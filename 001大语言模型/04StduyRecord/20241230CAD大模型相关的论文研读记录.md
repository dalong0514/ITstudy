## 20241230CAD大模型相关的论文研读记录

2024099Computer-Aided Design as Language

需要研读

计算机辅助设计（CAD）应用被广泛用于制造业，以对从咖啡杯到跑车等各种产品进行建模。这些软件非常复杂，需要多年培训和经验才能熟练掌握。在所有 CAD 模型中，一个尤其难以制作的部分，就是那些位于所有 3D 构建核心的高度结构化二维草图。为此，我们在本工作中提出了一种能够自动生成此类草图的机器学习模型。借助这一方法，我们为开发可帮助工程师以更少的工作量完成更佳设计的智能工具奠定了基础。

我们的方案结合了通用的语言建模技术和现成的数据序列化协议。实验证明，该方案在适应这一复杂领域方面具有足够的灵活性，并且在无条件生成和「图像到草图」的翻译任务中均表现良好。

---

2024098Vitruvion: A Generative Model of Parametric CAD Sketches

需要研读

参数化计算机辅助设计（CAD）工具是工程师用于指定物理结构（从自行车踏板到飞机，再到印刷电路板）的主要方式。参数化 CAD 的关键特征在于，其设计意图不仅通过几何基元来编码，还体现在基元之间的参数化约束中。这种关系式的规范可视为在构建一个约束程序，使得对设计的修改能够一致地传播到设计的其他部分。

机器学习为基于这些结构的生成式建模带来了激动人心的可能性，可加速设计过程，从而诞生如自动补全、约束推断和条件合成等新型工具。在本工作中，我们提出了一种针对参数化 CAD 草图的生成式建模方法，而参数化 CAD 草图正是现代机械设计的基础计算构件。我们的模型在来自 SketchGraphs 数据集的真实设计上进行训练，以自回归方式将草图合成为一系列几何基元（带有初始坐标），以及引用先前生成之基元的约束。由于从该模型采样得到的结果与标准 CAD 软件所使用的约束图表示形式相匹配，可以直接导入到 CAD 软件中进行求解和编辑，以便在后续设计任务中使用。

此外，我们还能在多种上下文中对模型进行条件约束，包括给定部分草图（作为「引子」）以及手绘草图的图像。对该方法的评估表明，模型能够生成逼真的 CAD 草图，并有潜力辅助机械设计工作流程。


---

2024097SketchGraphs: A Large-Scale Dataset for Modeling Relational Geometry in Computer-Aided Design

需要研读

以下是上述内容的简体中文翻译：

---

参数化计算机辅助设计（CAD）是机械工程中进行物理设计的主流范式。其特点是采用关联几何，参数化 CAD 模型从二维草图开始，这些草图由几何基元（如线段、弧）以及它们之间的显式约束（如重合、垂直）组成，并为后续的三维构建操作奠定基础。  

通过训练机器学习模型来理解和合成参数化 CAD 设计，既能减少设计时间，又能拓展新的设计工作流程。此外，参数化 CAD 设计还可视为约束编程的一种实例，为在程序合成和归纳方面的研究提供了一个范围清晰的测试平台。  

为了推动相关研究，我们提出了 **SketchGraphs**，这是一个包含 1500 万份来自真实 CAD 模型草图的集合，并配套提供了一个开源数据处理流水线。每个草图都被表示为一个几何约束图，其中边（edges）表示设计者施加在基元（nodes）之间的几何关系。我们进一步展示了该数据集的两个使用场景，并对其进行了基准评估：一是对草图的生成式建模，二是在给定未受约束的几何形状的条件下，生成可能的约束。

---

2024096Engineering Sketch Generation for Computer-Aided Design

需要研读

工程草图是参数化计算机辅助设计（CAD）的二维基础，而参数化 CAD 是制造业中最主要的建模范式。本文将生成式工程草图作为学习任务，视其为合成并组合参数化 CAD 模型的第一步。我们提出了两个用于工程草图生成的生成模型：CurveGen 和 TurtleGen。这两个模型在生成曲线基元时无需依赖草图约束求解器，并且在生成过程中显式地考虑了拓扑结构，以便在后续结合约束和 3D CAD 建模操作时使用。通过对人类受试者进行感知评估，我们发现 CurveGen 和 TurtleGen 在生成更逼真的工程草图方面，相较当前最先进的工程草图生成方法均有出色表现。


摘要工程草图是参数化计算机辅助设计（CAD）的二维基础，而参数化 CAD 是目前制造物体最主要的建模方法。本文旨在研究基于学习的工程草图生成问题，以此作为参数化 CAD 模型合成与组合的第一步。我们提出了两种生成模型，CurveGen 和 TurtleGen，用于生成工程草图。这两个模型都能生成曲线图元，且无需使用草图约束求解器，并明确考虑了拓扑结构，以便后续在约束和 3D CAD 建模操作中使用。通过人类受试者的感知评估，我们发现，与目前最先进的工程草图生成方法相比，CurveGen 和 TurtleGen 生成的工程草图更加真实。



---

2024093Query2CAD: Generating CAD models using natural language queries

摘要：

在传统的计算机辅助设计（CAD）流程中，工程师通常无法一次性就完成最佳原型，而是需要通过多次迭代与改进才能获得最优设计方案。尽管这一方法卓有成效，但它十分耗时，并且在很大程度上依赖于经验丰富的工程师。为应对这些挑战，本文提出了 **Query2CAD**，这是一种可生成 CAD 设计的新型框架。该框架使用大型语言模型（LLM）来生成可执行的 CAD 宏命令，并通过自我改进循环机制不断优化生成的 CAD 模型。值得注意的是，Query2CAD 无需有监督数据或额外训练，即可利用 LLM 同时进行生成与改进。其中，改进过程依赖于 BLIP2 模型生成的反馈，为了应对存在的错误否定，我们也引入了人类干预反馈。此外，我们还构建了一个覆盖大多数 CAD 模型设计操作的数据集，并基于该数据集对框架进行了测试。实验结果显示，当我们采用 GPT-4 Turbo 作为语言模型时，在首次生成时即可获得 53.6% 的成功率；在随后的改进循环中，成功率提高了 23.1%。尤为重要的是，在首次改进循环中成功率的提升最为显著，在后续改进中则没有明显提高。我们已将数据、模型和代码全部开源。

总结：

**Query2CAD** 可视为一种生成 3D CAD 模型的新方法，其核心思路在于生成一段宏命令代码，并在执行该代码后得到 3D CAD 模型。通过迭代流程及其内部架构，Query2CAD 能够不断优化输出结果，同时包含一个反馈循环：该循环使用 BLIP2 模型对先前的 3D 输出进行描述，或通过人工反馈来指导对已有设计进行调整。我们还整理了一个包含多样化用户查询的数据集，并使用 Query2CAD 对这些查询进行了测试。结果显示，该模型在生成简单形状的 3D 模型时表现极为出色，准确率高达 95.23%；对于中等和高难度查询，成功率分别为 70% 和 41%。值得关注的是，在最初的改进阶段，模型在成功率方面就已得到显著提升。为进一步促进研究的开放与发展，我们公开了全部代码、数据和提示信息，链接详见论文。


---

2024092CadVLM: Bridging Language and Vision in the Generation of Parametric CAD Sketches

需要研读

摘要：

参数化计算机辅助设计（CAD）在当代机械设计中占据核心地位。然而，它在实现精确的参数化草图建模方面仍面临挑战，并且缺乏适用于机械设计的实用评估指标。我们借助在自然语言处理和计算机视觉领域取得卓越成绩的预训练基础模型，针对 CAD 领域开发了生成模型。这些模型能够理解复杂几何形态并进行设计推理，这对 CAD 技术来说至关重要。本文提出了一种名为 **CadVLM** 的端到端视觉语言模型，用于 CAD 生成。我们的方法通过对预训练基础模型进行适配来高效操控工程草图，结合了草图图元序列与草图图像。大量实验表明，我们的方法在多项 CAD 草图生成任务（如 CAD 自动补全、CAD 自动约束以及基于图像的生成）上都取得了领先性能。据我们所知，这是首个成功应用于参数化 CAD 生成的多模态大型语言模型（LLM），代表了在计算机辅助机械设计领域的创新突破。

总结：

在本研究中，我们引入了 **CadVLM**，这是一种专门针对参数化 CAD 草图建模的创新型端到端视觉语言模型，对于当代机械设计至关重要。CadVLM 充分利用大型语言模型中所蕴含的常识与推理能力，使其能够灵活应对 CAD 草图所需的复杂几何推理。实验结果显示，CadVLM 在自动补全和自动约束任务上均优于当前最先进模型，充分体现了预训练模型在 CAD 构建方面所带来的强大增益。


---

2024091Generating CAD Code with Vision-Language Models for 3D Designs

生成式人工智能正在设计与制造领域带来革命性变革，它提供了高效且自动化的方法来生成与修改 3D 对象。其中一种方法是利用大型语言模型（LLMs）来生成计算机辅助设计（CAD）的脚本代码，然后执行这些代码从而渲染 3D 对象。然而，生成的 3D 对象可能无法满足特定需求。由于 3D 对象的复杂性和结构特征（例如形状、表面以及尺寸）难以仅通过代码进行检验，因此测试 CAD 代码生成的正确性面临挑战。

为了解决此问题，本文提出了 **CADCodeVerify**，一种能够对从 CAD 代码生成的 3D 对象进行迭代式验证并改进的全新方法。该方法通过引导视觉语言模型（VLM）生成并回答一系列验证问题来检查生成的对象，并在发现偏差时提示 VLM 进行修正。为评估 CADCodeVerify 的有效性，我们提出了 **CADPrompt**—— 首个专门用于 CAD 代码生成的基准，包含了 200 条自然语言提示及其对应的专家标注脚本代码。实验表明，通过提供视觉反馈，CADCodeVerify 能够有效改进 3D 对象的结构，并提升编译成功率。应用于 GPT-4 时，CADCodeVerify 将点云距离缩小了 7.30%，并使成功率提高了 5.0%，相较现有方法取得了显著提升。


---

2024090CAD-MLLM: Unifying Multimodality-Conditioned CAD Generation With MLLM

需要研读

本文旨在设计一个统一的计算机辅助设计（CAD）生成系统，该系统能够根据用户输入（包括文本描述、图像、点云，或它们的组合）轻松生成 CAD 模型。为实现这一目标，我们提出了 **CAD-MLLM**—— 首个能够基于多模态输入生成参数化 CAD 模型的系统。具体而言，在 CAD-MLLM 框架中，我们利用 CAD 模型的指令序列，并通过先进的大型语言模型（LLMs）来对多模态数据与 CAD 模型的向量化表示进行特征对齐。为便于模型训练，我们设计了一个全面的数据构建与标注流程，为每个 CAD 模型配备与之对应的多模态数据。由此得到的数据集名为 **Omni-CAD**，这是首个同时包含文本描述、多视图图像、点数据及命令序列的多模态 CAD 数据集，规模约为 45 万条数据及其对应的 CAD 构建序列。为了全面评估生成的 CAD 模型质量，我们在现有以重建质量为主的评估指标之外，新增了用于衡量拓扑质量及表面包围程度的指标。大量实验结果表明，CAD-MLLM 在有条件生成任务上相比现有方法具有显著优势，并在应对噪声与缺失点云时依然保持高度鲁棒性。项目主页及更多可视化结果可在 [https://cad-mllm.github.io/](https://cad-mllm.github.io/) 找到。

---

2024089FlexCAD-Unified-and-Versatile-Controllable-CAD-Generation-with-Fine-tuned-Large-Language-Models

需要研读

近年来，基于用户意图生成计算机辅助设计（CAD）模型的需求不断增长，这一方向被称为可控的 CAD 生成（controllable CAD generation）。现有方法在可控性方面有限，并且针对不同的控制类型往往需要使用不同的模型，削弱了模型的效率和实用性。为在所有 CAD 构建层级（例如「草图 - 拉伸」、拉伸、草图、面、环路、曲线）实现可控生成，我们提出了一个统一的模型 **FlexCAD**，通过对大型语言模型（LLMs）进行微调而得来。首先，为了增强 LLM 对 CAD 的理解，我们将一个 CAD 模型表示为结构化文本，并将每个层级抽象为一系列文本标记。其次，为了在同一个模型中实现不同可控生成任务，我们引入了层级感知的掩码策略（hierarchy-aware masking strategy）。具体而言，在训练过程中，我们用掩码标记（mask token）替换 CAD 文本中某个层级感知域（hierarchy-aware field）。该域由一系列标记组成，可以灵活设定以表示不同层级。随后，我们让 LLM 预测这个被掩码的域。在推理阶段，用户意图被转换成一段带有掩码标记的 CAD 文本，用以替换用户希望修改的部分，然后输入给 FlexCAD 来生成新的 CAD 模型。在公共数据集上的全面实验表明，**FlexCAD** 在生成质量和可控性方面均表现卓越。项目代码将在[https://github.com/microsoft/CADGeneration/FlexCAD](https://github.com/microsoft/CADGeneration/FlexCAD)公开。

---

2024088CAD-Recode: Reverse Engineering CAD Code from Point Clouds

摘要：

计算机辅助设计（CAD）模型通常通过依次绘制参数化草图并应用 CAD 操作来获得 3D 模型。3D CAD 逆向工程的问题在于，如何从点云等三维表示中重建草图与 CAD 操作序列。为解决这一难题，本文在三个层面上做出了新的贡献：CAD 序列表示、网络设计以及数据集方面。具体而言，我们将 CAD 的“草图-拉伸”序列表示为 Python 代码，并提出了 CAD-Recode，该方法能将点云转化为可执行的 Python 代码，从而重建出对应的 CAD 模型。借助预训练大型语言模型（LLMs）对 Python 代码的学习先验，我们在 CAD-Recode 中采用了一个相对较小的 LLM 作为解码器，同时结合了轻量级的点云投影器。CAD-Recode 仅使用了我们提出的一百万条多样化 CAD 序列的合成数据集进行训练。实验结果显示，CAD-Recode 在三个数据集上的表现均显著优于现有方法，并且对输入点数的需求更少。值得注意的是，CAD-Recode 在 DeepCAD 和 Fusion360 数据集上比当前最先进方法的平均 Chamfer 距离要低 10 倍。此外，我们还表明，CAD-Recode 生成的 Python 代码输出可以被现成的 LLM 理解并解释，这使得从点云进行 CAD 编辑以及 CAD 专项问答成为可能。

总结：

本研究从利用预训练 LLM 的角度重新思考了基于特征的 CAD 逆向工程问题，并充分利用基于 Python 的 CAD 表示方式。我们的主要贡献包括：提出了一种适用于“草图-拉伸”序列的新型 CAD 代码表示、一套规模达百万的多样化 CAD 程序合成数据集，以及一个从点云到 CAD 代码的模型。我们证明了 CAD-Recode 在准确度上大幅领先于现有方法，并且对输入点的要求更少。我们还展示了将预训练 LLM 与几何理解相结合所能带来的新型工作流程：设计者可以从点云重建 CAD 模型，并通过自然语言对其进行修改。我们相信，这项工作将为 CAD 逆向工程带来新的视角。我们认为未来可在以下方向展开进一步研究：(1) 更深入地利用所提出的 CAD 代码表示所具备的模块化特点；(2) 扩大 LLM 和数据集的规模，以实现更复杂 CAD 模型的逆向工程。

**致谢**  
本项目得到了卢森堡国家研究基金（BRIDGES2021/IS/16849599/FREE-3D 和 IF/17052459/CASCADES 项目）以及 Artec 3D 的支持。

A. 训练细节

在 CAD-Recode 的实现中，我们使用 Qwen2-1.5B 作为 LLM 解码器。训练配置采用 AdamW 优化器，学习率为 10⁻⁴，权重衰减系数为 0.01，并保持 HuggingFace [43] 的默认参数（包括余弦退火学习率调度器）。训练过程共进行 100k 次迭代，并在前 1k 次迭代进行预热。我们在 4 张 NVIDIA H100 GPU 上分布式训练，每张 GPU 的批大小为 8，完整训练约需 12 小时。针对解码器大小对性能影响的消融研究（见主文献第 5.1 节），我们使用了 Qwen2-0.5B。

B. 合成数据集

在第 3.2 节中介绍的合成数据集包含了由自动化管线生成的一百万条有效的 Python CadQuery 代码片段，管线工具包括 PythonOCC [36] 和 CadQuery [9]。生成过程主要包括两个部分：(1) 草图轮廓生成器（算法 1），用于生成有效的 2D 草图；(2) CAD 模型生成器（算法 2），用于将草图生成 3D CAD 模型。

草图生成步骤通过布尔操作（并集和差集）组合了基本图元（圆和矩形）。对于每个生成的草图，我们都会从内环和外环中提取线段、圆弧以及圆等基本图元。最终，我们通过多重验证手段（如检查环路无交叉、确保所有图元长度大于零）来保证草图的有效性。

CAD 模型生成过程会将已验证的草图进行拉伸，并通过并集操作将这些拉伸体组合起来。草图所在的平面是从三个典型平面中随机选出一个，然后再随机平移得到的。随后，我们对生成的每个模型进行归一化处理，使其位于以原点为中心的单位包围盒内。我们对参数进行量化，使得 CAD 表面上任何点的坐标都位于 [−50, 50] 范围内，并且最小分辨率为 1。接着，我们根据序列参数使用更高级别的抽象（例如矩形、立方体和圆柱体）来简化序列。我们的验证框架会检查生成模型是否存在内部零件，以及解析生成参数后编译代码是否成功。

图 7 展示了合成数据集中一些 CAD 模型示例以及对应的 CadQuery Python 代码。所有示例代码均可通过安装了 CadQuery 库的标准 Python 解释器直接执行。其代码结构一致，通常分为三个部分：(1) 引入必要的库；(2) 定义草图平面；(3) 通过并集操作将草图与拉伸操作组合。

C. 更多实验结果

**定性结果**：图 8、图 9 和图 10 分别展示了 DeepCAD、Fusion360 和 CC3D 数据集上从点云逆向工程生成 CAD 模型的更多可视化示例。正如主文献第 5.1 节所述，CAD-Recode 在生成与输入点云几何形状高度吻合的模型方面表现稳定，而 CAD-SIGNet [20] 有时会产生与输入差异很大的预测结果。

**代码输出**：图 11 展示了所预测的代码序列以及对应的重建形状。预测的代码语法与训练所使用的合成示例高度一致，表明 CAD-Recode 已成功学习了在合成训练集中建立的特征和 CAD 设计模式。

**无效预测**：CAD-Recode 的无效预测率非常低。在 DeepCAD [47] 和 Fusion360 [46] 数据集上不到 1%，在 CC3D [34] 数据集上约为 3%。图 12 展示了一些无效预测示例。当 CAD 模型包含尺寸小于量化分辨率的特征（见图 12(a) 和 (b)），或包含诸如旋转体或 B 样条等在训练数据中未出现过的特征（见图 12(c) 和 (d)）时，就会导致无效预测。

---

2024087CAD-GPT：Synthesising CAD Construction Sequence with Spatial Reasoning-Enhanced Multimodal LLMs

摘要：

计算机辅助设计（CAD）通过实现精确的 2D 和 3D 建模、大规模分析以及优化，大大提升了设计流程的效率、准确性和创新性。现有的 CAD 模型构建方法通常依赖潜向量或点云，但这些数据难以获取且存储成本高。多模态大型语言模型（MLLMs）的最新进展为利用自然语言指令和图像进行 CAD 模型构建带来了新的启示。然而，这些模型在推断准确的 3D 空间位置和方向时仍面临挑战，常常难以准确确定几何体的三维起始点和挤出方向。为此，本研究提出了 CAD-GPT，这是一种具备空间推理能力的多模态大型语言模型，可接受单张图像或文本描述作为输入。为了实现精确的空间推理，我们引入了「3D 建模空间机制」。该方法通过一个专门的空间展开机制，将 3D 空间位置和 3D 草图平面旋转角度映射到一维的语言特征空间，同时将 2D 草图坐标离散到合适的平面空间中，从而精确确定空间起始位置、草图方位以及 2D 草图坐标的变换。大量实验表明，在 CAD 模型合成方面，无论从定量指标还是定性分析来看，CAD-GPT 都显著优于现有的最先进方法。

总结：

在本研究中，我们提出了 CAD-GPT，一种通过「3D 建模空间定位机制」增强空间推理能力的多模态大型模型。该模型在推断草图方位变化、3D 空间位置变化以及准确生成 2D 草图等方面表现出色。依托这些能力，CAD-GPT 无论在图像输入还是文本输入的条件下，都能高精度生成 CAD 模型，展现了卓越的性能。

---

2024086BlenderLLM：Training Large Language Models for Computer-Aided Design with Self-improvement

摘要：

大型语言模型（LLMs）在计算机辅助设计（CAD）领域的应用仍然相对缺乏研究，尽管它们在其他领域已经取得了显著的进展。本文提出了一个名为 BlenderLLM 的新框架，利用自我改进的方法来专门针对 CAD 任务进行大型语言模型的训练。为此，我们开发了一个专用的训练数据集 BlendNet，并引入了一个全面的评测套件 CADBench。我们的研究结果表明，现有模型在生成准确的 CAD 脚本方面仍存在显著局限。然而，通过少量的基于指令的微调和迭代式自我改进，BlenderLLM 在 CAD 脚本生成的功能性与准确性上均大幅超越了这些模型。我们的研究为大型语言模型在 CAD 领域的应用奠定了坚实基础，同时展现了自我改进模型在推动 CAD 自动化方面的变革潜力。我们鼓励进一步探索与采用这些方法，以促进该领域的创新。所使用的数据集、模型、基准以及源代码可在本此 HTTPS URL 上公开获取。

结论：

在本研究中，我们提出了一个涵盖从数据构建到基于自我改进的 SFT 模型训练与基准测试的综合框架。通过该框架，BlenderLLM 在多项指标上都表现出相对于主流模型的优越性能。我们的结果突显了将自我改进与高质量数据集相结合的有效性，从而在模型能力上取得了显著进展。

局限性

本研究存在以下局限性。首先，在数据构建和模型训练中，我们主要关注的是基本的 CAD 建模方面，并未涉及到更复杂的要素，例如材料特性、表面处理或内部复杂度。这些因素可能会影响模型在应对更高级别 CAD 任务时的表现。其次，我们的工作仅针对从用户指令生成 CAD 脚本，尚未探索直接生成 CAD 模型或多模态输入（如将用户指令与图像结合）的潜力。未来研究可在这些方向上深入探讨，以增强模型的多样化能力。最后，模型尚未针对多轮对话进行训练，限制了其在更复杂、交互式对话中的能力。这些局限性表明了未来在改进和拓展模型能力方面的关键研究方向。

伦理声明

本研究的核心是开发并评估一个新型数据集和方法，以将大型语言模型（LLMs）应用于计算机辅助设计（CAD）。研究过程中未涉及任何人类受试者，也未使用任何可识别个人身份的信息。本研究严格遵循与数据隐私和知识产权相关的伦理准则。作者声明本研究中不存在利益冲突。我们提供的数据集和模型均遵循 CC-BY 4.0 许可证。

---

2024085CAD-LLM-Large-Language-Model-for-CAD-Generation

已研读

