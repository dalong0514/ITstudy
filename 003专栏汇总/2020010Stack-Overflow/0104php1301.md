[Codeigniter displays a blank page instead of error messages](https://stackoverflow.com/questions/9587413/codeigniter-displays-a-blank-page-instead-of-error-messages)

I'm using Codeigniter, and instead of error messages I'm just getting a blank page. Is there any way to show PHP error messages instead? It's very hard to debug when I get no feedback.My environment is Ubuntu with Apache. 

2012-03-06 16:06:41Z

I'm using Codeigniter, and instead of error messages I'm just getting a blank page. Is there any way to show PHP error messages instead? It's very hard to debug when I get no feedback.My environment is Ubuntu with Apache. Since none of the solutions seem to be working for you so far, try this one:http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errorsThis explicitly tells PHP to display the errors. Some environments can have this disabled by default.This is what my environment settings look like in index.php:Make sure php5-mysql is installed.I had this same problem and as Shayan Husaini pointed out, I had an undetected syntax error.I solved it using the php linter in the terminal:You can also use something like this to use the linter in every file in some folder:And to filter just the ones with errors:That should show files with parsing errors and the line where the error is.This behavior occurs when you have basic php syntax error in your code. In case when you have syntax errors the php parser does not parse the code completely and didnot display anything so all of the above suggestion would work only if you have other than syntax errors.you can set it in the main index.php This happens to me whenever I do autoload stuff in autoload.php like the 'database'To resolve this, If you're using Windows OS I had the same problem a couple days ago. My development environment is Win8 and the website was working just fine, but when i uploaded the files to production server (Linux) was displaying a blank page.Turns out that models and controllers's filenames should start with a uppercase letter.In windows environment this wont matter since windows does not differentiate uppercase and lowercase, but in linux environment, the files wont be displayed.Hope I've helped.Try adding this to your index.php fileMake sure you don't have a blank index.html file in your root folder. It happens :)check if error_reporting is ON at server or not, if that id off you wont get any errors and just blank page. if you are on a shared server then you can enable error reporting via htaccess. In codeIgniter add following in your htaccessand sethope it will work for youFirst of all you need to give the permission of your Codeigniter folder, It's might be the permission issue and then start your server.If you're using CI 2.0 or newer, you could change ENVIRONMENT type in your index.php to define('ENVIRONMENT', 'testing');.

Alternatively, you could add php_flag display_errors on to your .htaccess file.load your url helper when you create a function

eg,the it will show you errors or a view you loaded.Are you using the @ symbol anywhere?If you have something like:You will get a blank page.I ran into this because I had a CLI running via cron as the root user, thus creating log files with root:root. When you tried to navigate to a URI everything would work fine but CI exhibiting the blank page likely because it didn't have write permission to the log file.Codeigniter doesn't seem to throw an error message when I was referencing a view that did not exist.In my example I had within my controller:Because the file did not exist, I got a blank "An error has occurred page".  I changed the code to:This was how I resolved the same issue you seem to be having, hope this helps someone some day.i was also facing the same problem and tried almost all the things but finally i restarted my server and i found everything started working fine..i don't know how.....i think it was some server side problem that's why my PHP CODE was not giving any error.If you have this in your php.ini:and you have this in your CI Application at the same timeyou'll get HTTP/1.1 200 OK and a completely bank page.That's because when display_error is on, the php-fpm always return HTTP code 200.

And all the errors to output are forbidden by error_reporting(0).For CI application,the entry index.php sets up the running environment as bellows:In short, when you set ENV directive in your webserver's conf,say Nginx's fastcgi_params:then CI will automatically setAnother method is to see if you've surpassed the error checking in your code by accident. Search all your code for any instance of error_reporting(). If you call it without parameters, it just returns the current level, and is harmless. If you call it with a parameter, such as 0 (zero), it will turn off error reporting.You can test for this in CodeIgnitor by looking at their core library under ../system/core/Common.php and finding a section that's at about line 615 that looks like:Add something like:and you should be able to trap for surpassed errors, and debug from there.Often when codeigniter displays nothing, there is a syntax error. Mostly if the app was running seamlessly previously, just look around your most recent edits. For me the experience this time was the entire app, not just a page. So I did a quick brain scan for the most recent edits I had done and worked backwards, reviewing each file I had worked on this day. Turned out to be some 'where' clauses in two model files: For instance, I had I was having same problem, i installed latest xamp version and found my site is not working, after research and wasting time i found that.I need to turn on following tag in php.ini file short_open_tag=OnMake sure to restart apache after doing this.Hope this helps, most of these problems are related to php.ini file or fresh installation if your site was already running as other people facing similar issue.after installation of xamp/wamp you may notice few errors of similar nature. If your website was already running dont worry, it is a configuration related issue.1) check database connections in database.php file  inside application folder

2) check config.php file check url is correct or not?

3) by default short tags are off in new installations then follow the procedure belowin php.ini file change "short_open_tag=Off" to "short_open_tag=On"Make sure to restart apache after doing this.hope this helps.The error, In my case, was occurring because my Apache server was configured to run PHP as Fast CGI, I changed it to FPM and it worked.Just for anyone who is still looking for answers:$db['default']['dbdriver'] = 'mysqli';  (make sure you use mysqli, not mysql).  (database.php)please check either error folder is in application folder of not

in my case i replace error folder in application folder

Strip out HTML and Special Characters

Reham Fahmy

[Strip out HTML and Special Characters](https://stackoverflow.com/questions/7128856/strip-out-html-and-special-characters)

I'd like to use any php function or whatever so that i can remove any HTML code and special characters and gives me only alpha-numeric outputI want the output become Hello world it s me and love you (just Aa-Zz-0-9-WhiteSpace)I've tried strip_tags but it removes only HTML codesso is there any way to do it ~Thanks

2011-08-20 01:03:21Z

I'd like to use any php function or whatever so that i can remove any HTML code and special characters and gives me only alpha-numeric outputI want the output become Hello world it s me and love you (just Aa-Zz-0-9-WhiteSpace)I've tried strip_tags but it removes only HTML codesso is there any way to do it ~ThanksProbably better here for a regex replaceOr, in one go Strip out tags, leave only alphanumeric characters and space:Edit: all credit to DaveRandom for the perfect solution...All the other solutions are creepy because they are from someone that arrogantly simply thinks that English is the only language in the world :)All those solutions strip also diacritics like ç or à.The perfect solution, as stated in PHP documentation, is simply:In a more detailed manner from Above example, Considering below is your string:Code:Allows: English letters (Capital and small), 0 to 9 and characters !@#$%^&*().Removes: All html tags, and special characters other than aboveYou can do it in one single line :)

specially useful for GET or POST requestsHere's a function I've been using that I've put together from various threads around the net that removes everything, all tags and leaves you with a perfect phrase.  Does anyone know how to modify this script to allow periods (.) ?  In other words, leave everything 'as is' but leave the periods alone or other punctuation like and ! or a comma? let me know.to allow periods and any other character just add them like so:change: '#[^a-zA-Z ]#'

to:'#[^a-zA-Z .()!]#'preg_replace('/[^a-zA-Z0-9\s]/', '',$string) this is using for removing special character only rather than space between the strings.Remove all special character don't give space write in single line

Escape HTML to PHP or Use Echo? Which is better?

William T Wild

[Escape HTML to PHP or Use Echo? Which is better?](https://stackoverflow.com/questions/505642/escape-html-to-php-or-use-echo-which-is-better)

In terms of performance , what would be better. Using PHP to echo all the HTML output so I can pepper it with the various bits of working code and variables or escape HTML to php periodically throughout the documents.I know there may be some readability issues but I'm not to worried about that.Thanks all!Example 1OR

2009-02-03 00:46:30Z

In terms of performance , what would be better. Using PHP to echo all the HTML output so I can pepper it with the various bits of working code and variables or escape HTML to php periodically throughout the documents.I know there may be some readability issues but I'm not to worried about that.Thanks all!Example 1ORIt's all about which you find the most readable. Of course, this will vary with each situation. If you were doing an entire page, and there were large sections which did not have any PHP in it, then I'd break out of PHP and just write the plain HTML, whereas if there was a section which had a lot of PHP variables, I'd do it all in PHP.For example:versus:OrAlso don't forget about printfWhichever is easiest to read.The performance difference is pretty negligible compared to almost any other issue you'll encounter. Definitely readability is hands down the first issue here.Let's cite the manual:But please listen to the others and avoid this sort of micro optimization and choose the one that is more legible.Can I propose a third solution? Have you heard of template engines? They help you create a clear separation between code and presentation which usually leads to cleaner code which is easier to maintain. A popular such template engine is e.g. smarty, but there are hundreds with different strengths.It's pretty irrelevant to the overall speed of your app which one you go with.That being said, I know you said you don't care, but please use the 2nd one as it's about a million times easier to read. And readability is huge.I don't know about the performance of this, but within PHP you can also use what I believe is called a "Heredoc", which I think helps with readability within this sort of output.Nickf's example:becomes:I do believe that ultimately readability is a subjective thing, so your mileage may vary!RuthIt falls into the realm of micro optimizations. The largest part of your time falls into initializing the PHP engine starting the work.So unless you have an order of tens of thousands of lines (or even more), you shouldn't be concerned with it.To add, i did a small test of a million lines where i used php to print them and where i used php to call a c program that did the same thing and the difference was minuscule.A little more info.What is happening in the 2nd example is that you are "turning on/off" PHP, its not exactly what is happening but for this example it fits.The thing you should be more worried about, is that code going to have a lot of logic around it? Am i going to split that string into even more strings or even place it in different places? Is this the View of a MVC application?For 1 and 2 it could be a toss up between either method. But for 3 i would go with method 2 for these reasons.A view in a MVC web application is mostly html/css. So i want to see that be formatted correctly and i want to see in my editor the html coloring. So that is a plus.In terms of performance... it's not important. Readability of the code is king, a tiny fraction of a percent of performance difference isn't going to change anything.The raw HTML version is usually the easiest to read (and probably has the best performance too for what it's worth - but what it's worth is: nothing). This is no surprise: PHP is an HTML templating language, the whole point is interleaving HTML at a language syntax level.Look at nickf's code to see how to keep it readable. Indenting is important! Put a level of indenting inside each PHP control structure too, so you can keep track of them. eg.:Finally, when outputting content, such as $container in your example, you must always htmlspecialchars() it, or you'll have an application full of HTML-injection security holes, like every other PHP newbie (and even many professional developers, sadly). This matters whichever method you use to output content.Because htmlspecialchars is quite an annoyingly long function name, you could try defining your own shortcut function:Code as if the next programmer taking over the project is a serial killer. In other words, use the second option you mentionned.This should be considered more of a readability and maintenance issue than a performance issue. Thus, option 2 has a couple concrete advantages:For small bits I just keep it all in PHP strings, like when looping through an array to generate a list.  But for larger piles of markup I keep that out of the PHP and just drop into PHP when necessary.This is largely because I prefer to optimize for maintainability.  Not just because it's faster to see what's going on when the html has appropriate syntax highlighting applied, but because it also makes mistakes resulting from a flawed reading of the code less likely to occur.There really isn't a best way.  I just try to stay consistent with what's described above, and keep my eyes open for situations where maybe the other way would be a better way of handling it.I prefer to use php heredoc function, this way I don't need to escape any characters, ex:Note:The latter is much more readable. It's also more easily editable (you do not have to escape quotes in HTML, for example). And it preserves whitespace without any hassle, which may be preferred, particularly for debugging purposes.I almost wish PHP would enable print() and echo() to automatically convert HTML characters so that people would stop using them to generate HTML.You should seriously consider never placing PHP inside of HTML.  You are mixing logic with view which makes a project messy. As others have said, if you output into html, use <?php echo $whatever; ?>If you have to output a ton of information look into output buffering.

PHP preg_match and preg_match_all functions

sikas

[PHP preg_match and preg_match_all functions](https://stackoverflow.com/questions/4088836/php-preg-match-and-preg-match-all-functions)

I would like to know what the preg_match and preg_match_all functions do and how to use them.

2010-11-03 15:44:35Z

I would like to know what the preg_match and preg_match_all functions do and how to use them.preg_match stops looking after the first match. preg_match_all, on the other hand, continues to look until it finishes processing the entire string. Once match is found, it uses the remainder of the string to try and apply another match.http://php.net/manual/en/function.preg-match-all.phpBoth preg_match and preg_match_all functions in PHP use Perl compatible regular expressions. You can watch this series to fully understand Perl compatible regular expressions: https://www.youtube.com/watch?v=GVZOJ1rEnUg&list=PLfdtiltiRHWGRPyPMGuLPWuiWgEI9Kp1wThe preg_match function is used to search for a particular $pattern in a $subject string and when the pattern is found the first time, it stops searching for it. It outputs matches in the $matches, where $matches[0] will contain the text that matched the full pattern, $matches[1] will have the text that matched the first captured parenthesized sub-pattern, and so on. Output: The preg_match_all function searches for all the matches in a string and outputs them in a multi-dimensional array ($matches) ordered according to $flags. When no $flags value is passed, it orders results so that $matches[0] is an array of full pattern matches, $matches[1] is an array of strings matched by the first parenthesized sub-pattern, and so on.Output: A concrete example:The PHP manual can help you. Let us know if you have trouble understanding.

PHP removing a character in a string

Zero Cool

[PHP removing a character in a string](https://stackoverflow.com/questions/264480/php-removing-a-character-in-a-string)

My php is weak and I'm trying to change this string:to be:removing the / after the backend.php?. Any ideas on the best way to do this?Thanks!

2008-11-05 06:34:40Z

My php is weak and I'm trying to change this string:to be:removing the / after the backend.php?. Any ideas on the best way to do this?Thanks!I think that it's better to use simply str_replace, like the manual says:Edit: See CMS' answer. It's late, I should know better.While a regexp would suit here just fine, I'll present you with an alternative method. It might be a tad faster than the equivalent regexp, but life's all about choices (...or something).Weird, I know.

Autoload classes from different folders

laukok

[Autoload classes from different folders](https://stackoverflow.com/questions/5280347/autoload-classes-from-different-folders)

This is how I autoload all the classes in my controllers folder,But I have classes in models folder as well and I want to autoload them too - what should I do? Should I duplicate the autoload above and just change the path to models/ (but isn't this repetitive??)?Thanks.EDIT:these are my classes file names in the controller folder:these are my classes file names in the model folder:this is how I name my controller classes class usually (I use underscores and lowcaps),this is how I name my model classes class usually (I use underscores and lowcaps),

2011-03-12 03:26:18Z

This is how I autoload all the classes in my controllers folder,But I have classes in models folder as well and I want to autoload them too - what should I do? Should I duplicate the autoload above and just change the path to models/ (but isn't this repetitive??)?Thanks.EDIT:these are my classes file names in the controller folder:these are my classes file names in the model folder:this is how I name my controller classes class usually (I use underscores and lowcaps),this is how I name my model classes class usually (I use underscores and lowcaps),You should name your classes so the underscore (_) translates to the directory separator (/). A few PHP frameworks do this, such as Zend and Kohana.So, you name your class Model_Article and place the file in classes/model/article.php and then your autoload does...Also note you can use spl_autoload_register() to make any function an autoloading function. It is also more flexible, allowing you to define multiple autoload type functions.EditI see you are using controller_***** and model_***** as a class naming convention.I read a fantastic article, which suggests an alternative naming convention using php's namespace.I love this solution because it doesn't matter where I put my classes.  The __autoload will find it no matter where it is in my file structure.  It also allows me to call my classes whatever I want.  I don't need a class naming convention for my code to work.You can, for example, set up your folder structure like:Your classes can be set up like this:and:The autoloader could look like this (or see 'a note on autoloading' at the end):Then... you can call classes in three ways:or,or,EDIT - a note on autoloading:My main auto loader looks like this:This autoloader is a direct 1:1 mapping of class name to directory structure; the namespace is the directory path and the class name is the file name.  So the class application\controllers\Base() defined above would load the file www/application/controllers/Base.php.I put the autoloader into a file, bootstrap.php, which is in my root directory.  This can either be included directly, or php.ini can be modified to auto_prepend_file so that it is included automatically on every request.  By using spl_autoload_register you can register multiple autoload functions to load the class files any which way you want.  Ie, you could put some or all of your classes in one directory, or you could put some or all of your namespaced classes in the one file.  Very flexible :)I have to mention something about "good" autoload scripts and code structure, so read the following CAREFULLYKeep in Mind:e.g: Example.php contains e.g: /Path1/Path2/Example.php matchese.g: /Path1/Path2/Example.php with root:With this in mind, i produced the following script:Where to place it..Remeber: Happy coding ;-)A little review at other answers:

THIS IS JUST MY PERSONAL OPINION - NO OFFENSE INTENDED!https://stackoverflow.com/a/5280353/626731 

@alex good solution, but don't make you class names pay for bad file structures ;-) 

this is job for namespaceshttps://stackoverflow.com/a/5280510/626731 @Mark-Eirich it works, but its pretty nasty/ugly/slow/stiff[..] style to do it this way..https://stackoverflow.com/a/5284095/626731 @tealou for his problem to be solved this is the most clear approach so far :-) ..https://stackoverflow.com/a/9628060/626731 @br3nt this reflects my point of view, but please(!) .. dont use strtr!! .. which brings me to:https://stackoverflow.com/a/11866307/626731 @Iscariot .. to you, a little "you-know-bullshit-benchmark:Source: http://www.simplemachines.org/community/index.php?topic=175031.0Questions?.. (But he is in fact right about full path including)https://stackoverflow.com/a/12548558/626731 @Sunil-Kartikey

https://stackoverflow.com/a/17286804/626731 @jurrienNEVER loop in time critical environment! Don't search for files on os! - SLOWhttps://stackoverflow.com/a/21221590/626731 @sagits .. much better than Marks ;-)

Here is my solution,I'm not sure whether it is the best solution or not but it seems to work perfectly...What do you think??My version of @Mark Eirich answer:In my case only controller class have the keyword in their name, adapt it for your needs.Simpliest answer I can give you without writing down those complex codes and even without using the namespace (if this confuses you)Sample Code. Works 100%.I guess the logic is explainable itself. Cheers mate! Hope this helps :)Here's what I'd do:As long you name your files consistently, like class_controller_*.php and class_model_*.php, this should work fine.Everyone is is coping and pasting things from code they got off the internet (With the exception of the selected answer).  They all use String Replace.String Replace is 4 times slower than strtr.  You should use it instead.You should also use full paths when including classes with autoloading as it takes less time for the OS to resolve the path.__autoload() function should not be use because it is not encourged. Use spl_autoload(), spl_autoload_register() instead. __autoload() just can load one class but spl_autoload() can get more than 1 classes. And one thing more, in future __autoload() may deprecated. More stuff can be find on http://www.php.net/manual/en/function.spl-autoload.phpAltough this script doesn't have the name convention and this thread is already a bit old, in case someone is looking of a possible answer, this is what I did:not sure if it is really optimal, but it searches through the folders by reading dir recursively. With a creative str_replace function you can get your name cenvention.I use this. Basically define your folder structure (MVC etc) as a constant in a serialised array. Then call the array in your autoload class. Works efficiently for me.You could obviously create the folder array using another function but for MVC you may as well type it in manually.  For this to work you need to call your classes ...... class.classname.php

How to check if letter is upper or lower in PHP?

Tomasz Smykowski

[How to check if letter is upper or lower in PHP?](https://stackoverflow.com/questions/2814880/how-to-check-if-letter-is-upper-or-lower-in-php)

I have texts in UTF-8 with diacritic characters also, and would like to check if first letter of this text is upper case or lower case. How to do this?

2010-05-11 22:29:59Z

I have texts in UTF-8 with diacritic characters also, and would like to check if first letter of this text is upper case or lower case. How to do this?It is my opinion that making a preg_ call is the most direct, concise, and reliable call versus the other posted solutions here.My pattern breakdown:Please take notice when ctype_ and < 'a' fail with this battery of tests.Code: (Demo)Output:If anyone needs to differentiate between uppercase letters, lowercase letters, and non-letters see this post.It may be extending the scope of this question too far, but if your input characters are especially squirrelly (they might not exist in a category that Lu can handle), you may want to check if the first character has case variants:To include Roman Numerals ("Number Letters") with SMALL variants, you can add that extra range to the pattern if necessary.https://www.fileformat.info/info/unicode/category/Nl/list.htmCode: (Demo)Note that mb_substr is necessary to correctly isolate the first character.Use ctype_upper for check upper case:Tried ?As used in Kohana 2 autoloader function:When a string character is cast to integer it evaluates to its ASCII number. As you know in the ASCII table first there are some control characters and others. Then the uppercase letters from the Latin alphabet. And then the lowercase letters from the Latin alphabet. Thus you can easily check whether the code of a letter is smaller or bigger than the small latin character a.BTW this is around twice as fast than a solution with regular expressions.Note that PHP provides the ctype family like ctype_upper.You have to set the locale correctly via setLocale() first to get it to work with UTF-8.

See the comment on ctype_alpha for instance.Usage:I didn't want numbers and others to be an upper char, so I use:What about just:If you want it in a nice function, I've used this:Then just call..Another possible solution in PHP 7 is using IntlChar Output:While @mickmackusa's solution is good, it will give wrong result for different general category values (other than "Lu" uppercase letter category )For exampleBut Make sure to use IntlChar::isUUppercase but not IntlChar::isupper if you want to check for characters that are also uppercase but have a different general category valueNote: This library depends on intl (Internationalization extension)

Include PHP inside JavaScript (.js) files

GregH

[Include PHP inside JavaScript (.js) files](https://stackoverflow.com/questions/3241422/include-php-inside-javascript-js-files)

I have a JavaScript file (extension .js, not .html) containing several JavaScript functions.I want to call one of the PHP functions in a PHP file containing only several PHP functions from within one of the JavaScript functions.

2010-07-13 20:51:23Z

I have a JavaScript file (extension .js, not .html) containing several JavaScript functions.I want to call one of the PHP functions in a PHP file containing only several PHP functions from within one of the JavaScript functions.If you just need to pass variables from PHP to the javascript, you can have a  tag in the php/html file using the javascript to begin with.If you're trying to call functions, then you can do this like thisAdd the above code in .htaccess file and run php inside js filesDANGER: This will allow the client to potentially see the contents of your PHP files. Do not use this approach if your PHP contains any sensitive information (which it typically does).If you MUST use PHP to generate your JavaScript files, then please use pure PHP to generate the entire JS file.  You can do this by using a normal .PHP file in exactly the same way you would normally output html, the difference is setting the correct header using PHP's header function, so that the correct mime type is returned to the browser.  The mime type for JS is typically "application/javascript"PHP and JS are not compatible; you may not simply include a PHP function in JS. What you probably want to do is to issue an AJAX Request from JavaScript and send a JSON response using PHP.A slightly modified version based on Blorgbeard one, for easily referenceable associative php arrays to javascript object literals:First define an array with the values to be used into javascript files:Now write the php array values into a javascript object literal:Now we can access the javscript object literal from any other .js file with the notation:

This is somewhat tricky since PHP gets evaluated server-side and javascript gets evaluated client side.I would call your PHP file using an AJAX call from inside javascript and then use JS to insert the returned HTML somewhere on your page.Actually the best way to accomplish this is to write the javascript in a .php and use jquery in a separate file to use the Jquery get script file or jquery load use php include function in the doc where the javascript will live.  Essentially this is how it will look.Dynamic Javascript File in a .php file extension - Contains a mixture of php variables pre processed by the server and the javascript that needs these variables in scripts.Static Js File - Using http://api.jquery.com/jquery.getscript/ or http://api.jquery.com/load/ In the main html page call the static file as a regular js file.  Calling the static js file will force load the dynamic data from the server.some file.php 1:or simply echo the script such asFile 2:somejsfile.js:File 3 myhtml.html:I believe this answer the question for many people looking to mix php and javascript.  It would be nice to have that data process in the background then have the user have delays waiting for data.  You could also bypass the second file and simply use php's include on the main html page, you would just have your javascript exposed on the main page.  For performance that is up to you and how you want to handle all of that.You can't include server side PHP in your client side javascript, you will have to port it over to javascript. If you wish, you can use php.js, which ports all PHP functions over to javascript. You can also create a new php file that returns the results of calling your PHP function, and then call that file using AJAX to get the results.Because the Javascript executes in the browser, on the client side, and PHP on the server side, what you need is AJAX - in essence, your script makes an HTTP request to a PHP script, passing any required parameters. The script calls your function, and outputs the result, which ultimately gets picked up by the Ajax call. Generally, you don't do this synchronously (waiting for the result) - the 'A' in AJAX stands for asynchronous!You can make a double resolution of file:

"filename.php.js" in this way.

PHP generates JS in this file.

I got all parameters from DB.

This worked for me on xampp.There is not any safe way to include php file into js.One thing you can do as define your php file data as javascript global variable in php file. for example i have three variable which i want to use as js. abc.phpAfter use it directly in your js file wherever you want to use.abc.js Beside If you have any critical data which you don't want to show publicly then you can encrypt data with js. and also get original value of it's from js so no one can get it's original value. if they show into publicly.this is the standard way you can call php script data into js file without including js into php code or php script into js.

Replacing backslashes with forward slashes with str_replace() in php

Hai Truong IT

[Replacing backslashes with forward slashes with str_replace() in php](https://stackoverflow.com/questions/6806597/replacing-backslashes-with-forward-slashes-with-str-replace-in-php)

I have the following url:I'm using str_replace to try and replace backslashes with forward slashes:It doesn't seem to work, this is the result: 

2011-07-24 11:48:54Z

I have the following url:I'm using str_replace to try and replace backslashes with forward slashes:It doesn't seem to work, this is the result: you have to place double-backslashNo regex, so no need for //.this should work:You need to escape "\" as well.You need to escape backslash with a \Single quoted php string variable works.You want to replace the Backslash?Try stripcslashes:

How to remove both .php and .html extensions from url using NGINX?

anthropophagus

[How to remove both .php and .html extensions from url using NGINX?](https://stackoverflow.com/questions/21911297/how-to-remove-both-php-and-html-extensions-from-url-using-nginx)

I want my nginx make display all url's clean. With some research I've made the first case to work. It`s done by following configuration:It works for indexhtml.html displaying as indexhtml, but nothing happens with .php. If I change $uri.html to $uri.php, it works neither for .html, neither .php. I`ve tried to put something similar in php location but without any success.Any advices?

2014-02-20 14:51:20Z

I want my nginx make display all url's clean. With some research I've made the first case to work. It`s done by following configuration:It works for indexhtml.html displaying as indexhtml, but nothing happens with .php. If I change $uri.html to $uri.php, it works neither for .html, neither .php. I`ve tried to put something similar in php location but without any success.Any advices?From what I've researched, if you append your /etc/nginx/conf.d/domain.tld.conf file to include:Then restart nginx and give it a go.  Hopefully this will help you!  More information can be found (where I found it) here @ tweaktalk.netNo need for extra blocks and named locations and everything. Also move the index line outside the location blockKeep in mind that if you have a folder and a file with the same name inside the same folder, like /folder/xyz/ and /folder/xyz.php you won't be able to run the php file if the folder xyz contains an index.php or index.html, just keep this in mind.To further Mohammad's answer, you might also want to offer redirects from .html and .php to the extensionless versions.This can be accomplished due to the fact that $request_uri contains "full original request URI (with arguments)", and is not affected by the internal rewrites that are not visible to the user.Perhaps this may be of use for you... It' Simple and gets the job done:

how safe are PDO prepared statements

sqram

[how safe are PDO prepared statements](https://stackoverflow.com/questions/1314521/how-safe-are-pdo-prepared-statements)

Started using PDO prepared statements not too long ago, and, as i understand, it does all the escaping/security for you.for example, assuming $_POST['title'] is a form field.Is this really safe? Do i have to do anything else? what else do i have to take into consideration?Thanks.

2009-08-21 22:47:09Z

Started using PDO prepared statements not too long ago, and, as i understand, it does all the escaping/security for you.for example, assuming $_POST['title'] is a form field.Is this really safe? Do i have to do anything else? what else do i have to take into consideration?Thanks.Strictly speaking, there's actually no escaping needed, because the parameter value is never interpolated into the query string.  The way query parameters work is that the query is sent to the database server when you called prepare(), and parameter values are sent later, when you called execute().  So they are kept separate from the textual form of the query.  There's never an opportunity for SQL injection (provided PDO::ATTR_EMULATE_PREPARES is false).So yes, query parameters help you to avoid that form of security vulnerability.Are they 100% proof against any security vulnerability?  No, of course not.  As you may know, a query parameter only takes the place of a single literal value in an SQL expression.  You can't make a single parameter substitute for a list of values, for example:You can't use a parameter to make table names or column names dynamic:You can't use a parameter for any other type of SQL syntax:So there are quite a few cases where you have to manipulate the query as a string, prior to the prepare() call.  In these cases, you still need to write code carefully to avoid SQL injection.It's safe from SQL injection.A couple things it's NOT safe from:Security is more than just preventing SQL injection.Regarding SQL Injections, I believe that's the safest you can get, specially if you use constants like PDO::PARAM_INT.Seeing as XSS was mentioned, I think it's also good to take a look at using things such as this input cleaning class http://www.phpclasses.org/browse/package/2189.html to prevent XSS attacks.

Autocomplete syntax for HTML or PHP in Notepad++. Not auto-close, autocompelete

Wasim A.

[Autocomplete syntax for HTML or PHP in Notepad++. Not auto-close, autocompelete](https://stackoverflow.com/questions/5049861/autocomplete-syntax-for-html-or-php-in-notepad-not-auto-close-autocompelete)

How can I get autocompletion of syntax for HTML or PHP in Notepad++?

Not auto-close, I am looking for autocompelete.

2011-02-19 09:00:25Z

How can I get autocompletion of syntax for HTML or PHP in Notepad++?

Not auto-close, I am looking for autocompelete.Go to:Settings -> Preferences You will see a dialog box. There click the Backup / Auto-completion tab where you can set the auto complete option :)In Notepad++ v. 6.4.1 is this possibility in:Settings->Preferences->Auto-Completion and there check Enable auto-completion on each input.For auto-complete in code press Ctrl + Enter.Press Ctrl + Space to get a autocomplete hint.Go to:Settings -> Preferences You will see a dialog box. There click the Auto-completion tab where you can set the auto complete option.See image below:

If your code not detected automatically then you choose your coding language form Language menuSettings->Preferences->Auto-Completion and there check Enable auto-completion on each input.

Press Ctrl + Space to get a autocomplete hint.

For auto-complete in code type the first letter then press Ctrl + Enter. all the inputs you have given will be listed.Its supported in notepad++ 5.0+ but not enabled by default.  You can enable it from settings -> preferencesIf you want extended auto-completion for PHP (not only for the code in the current window or standard classes), try out the "ACCPC" plugin: https://github.com/StanDog/npp-phpautocompletion

The difference between「public」and「public static」?

Alex

[The difference between「public」and「public static」?](https://stackoverflow.com/questions/5527120/the-difference-between-public-and-public-static)

What does static mean?I know public means that it can be accessed from outside the class, and private only from inside the class…

2011-04-03 02:07:03Z

What does static mean?I know public means that it can be accessed from outside the class, and private only from inside the class…Static means that it can be accessed without instantiating a class.  This is good for constants.  Static methods need to have no effect on the state of the object.  They can have local variables in addition to the parameters.public: Public declared items can be accessed everywhere.protected: Protected limits access to inherited and parent

classes (and to the class that defines the item).private: Private limits visibility only to the class that defines

the item.static: A static variable exists only in a local function scope,

but it does not lose its value when program execution leaves this scope.final: Final keywords prevents child classes from overriding a

method by prefixing the definition with final. If the class itself is

being defined final then it cannot be extended.Beside of PHP:transient: A transient variable is a variable that may not

be serialized. volatile: A variable that might be concurrently modified by multiple

threads should be declared volatile. Variables declared to be volatile

won't be optimized by the compiler because their value can change at

anytime.From http://php.net/manual/en/language.oop5.static.phpAn example: when use the static keyword, we cannot use $this 

MySQL Join two tables with comma separated values

626

[MySQL Join two tables with comma separated values](https://stackoverflow.com/questions/19101550/mysql-join-two-tables-with-comma-separated-values)

I have 2 tables as belowNotes TablePositions TableI am looking to query my Notes table and associate the 'forDepts' column with values from the Positions table.The output should be:I know that the database should be normalized but I cannot change the database structure for this project.This is going to be used to export a excel file with the code below.This code outputs only the first value of 'forDepts'Exa: Executive (instead of Executive, Corp Admin, Art)Can this be accomplished by CONCAT or FIND_IN_SET?Please help! Thanks in advance!

2013-09-30 18:48:12Z

I have 2 tables as belowNotes TablePositions TableI am looking to query my Notes table and associate the 'forDepts' column with values from the Positions table.The output should be:I know that the database should be normalized but I cannot change the database structure for this project.This is going to be used to export a excel file with the code below.This code outputs only the first value of 'forDepts'Exa: Executive (instead of Executive, Corp Admin, Art)Can this be accomplished by CONCAT or FIND_IN_SET?Please help! Thanks in advance!

Strange behavior Of foreach

Manish Trivedi

[Strange behavior Of foreach](https://stackoverflow.com/questions/4969243/strange-behavior-of-foreach)

I think it's a normal program but this is the output I am getting:Can someone please explain this to me?

2011-02-11 12:58:04Z

I think it's a normal program but this is the output I am getting:Can someone please explain this to me?This is well-documented PHP behaviour

See the warning on the foreach page of php.netEDITAttempt at a step-by-step guide to what is actually happening hereThe first

foreach loop does not make any change to the array, just as we would expect.

However, it does cause $v to be assigned a reference to each of $a’s elements,

so that, by the time the first loop is over, $v is, in fact, a reference to $a[2].As soon as the second loop starts, $v is now assigned the value of each

element. However, $v is already a reference to $a[2]; therefore, any value

assigned to it will be copied automatically into the last element of the array!Thus, during the first iteration, $a[2] will become zero, then one, and then

one again, being effectively copied on to itself. To solve this problem, you

should always unset the variables you use in your by-reference foreach

loops—or, better yet, avoid using the former altogether.

PHP MYSQL - Insert into without using column names but with autoincrement field

Paulo Bueno

[PHP MYSQL - Insert into without using column names but with autoincrement field](https://stackoverflow.com/questions/1871331/php-mysql-insert-into-without-using-column-names-but-with-autoincrement-field)

I need to insert a long row with 32 fields into a MySQL table.I'd like to do something like this:Obviously it works fine if the fields are in the same order as the MySQL table fields. But, my table has an auto-increment id as it's first field.What I want is to fill in all table names but the first (id) one.Suggestions?

2009-12-09 02:57:41Z

I need to insert a long row with 32 fields into a MySQL table.I'd like to do something like this:Obviously it works fine if the fields are in the same order as the MySQL table fields. But, my table has an auto-increment id as it's first field.What I want is to fill in all table names but the first (id) one.Suggestions?Just use NULL as your first value, the autoincrement field will still work as expected:Insert NULL into the auto-increment field.I recommend that unless this is a hack script, you use field names.  The rationale is that your code will break if you ever add a field to the table or change their order.  Instead, be explicit with field names, and it will go much better in the future.We should omit any column values when we try without column name in insert query,Advise if above information is wrong.Here's a great shortcut that I've used (courtesy of a friend who wrote it for me) 

What does FILTER_SANITIZE_STRING do?

rr-

[What does FILTER_SANITIZE_STRING do?](https://stackoverflow.com/questions/23392128/what-does-filter-sanitize-string-do)

There's like a million Q&A that explain the options like FILTER_FLAG_STRIP_LOW, but what does FILTER_SANITIZE_STRING do on its own, without any options? Does it just filter tags?

2014-04-30 15:26:02Z

There's like a million Q&A that explain the options like FILTER_FLAG_STRIP_LOW, but what does FILTER_SANITIZE_STRING do on its own, without any options? Does it just filter tags?According to PHP Manual:According to W3Schools:Now, that doesn't tell us much. Let's go see some PHP sources.ext/filter/filter.c:Now, let's go see how php_filter_string is defined.

ext/filter/sanitizing_filters.c:I'll skip commenting flags since they're already explained on the Internet, like you said, and focus on what is always performed instead, which is not so well documented.First - php_filter_strip. It doesn't do much, just takes the flags you pass to the function and processes them accordingly. It does the well-documented stuff.Then we construct some kind of map and call php_filter_encode_html. It's more interesting: it converts stuff like ", ', & and chars with their ASCII codes lower than 32 and higher than 127 to HTML entities, so & in your string becomes &#38;. Again, it uses flags for this.Then we get call to php_strip_tags_ex, which just strips HTML, XML and PHP tags (according to its definition in /ext/standard/string.c) and removes NULL bytes, like the comment says.The code that follows it is used for internal string management and doesn't really do any sanitization. Well, not exactly - passing undocumented flag FILTER_FLAG_EMPTY_STRING_NULL will return NULL if the sanitized string is empty, instead of returning just an empty string, but it's not really that much useful. An example:→There isn't much more going on, so the manual was fairly correct - to sum it up:I wasn't sure if "stripping tags" means just the < > characters, and if it preserves content between tags, e.g. the string "Hello!" from <b>Hello!</b>, so I decided to check. Here are the results, using PHP 7.1.5 (and Bash for the command line):Also, for the flags FILTER_FLAG_STRIP_LOW & FILTER_FLAG_ENCODE_LOW, since my Bash doesn't display these characters, I checked using the bell character (, ASCII 007) and Restman Chrome extension that:

How to use sha256 in php5.3.0

Jiangong SUN

[How to use sha256 in php5.3.0](https://stackoverflow.com/questions/1752477/how-to-use-sha256-in-php5-3-0)

I'm using sha256 to encrypt the password. I can save the sha256 encrypted password in mysql. But i can't login with the same clause.Insert code:Select code:Is there something wrong?  I'm very confused. Thanks. 

2009-11-17 22:59:19Z

I'm using sha256 to encrypt the password. I can save the sha256 encrypted password in mysql. But i can't login with the same clause.Insert code:Select code:Is there something wrong?  I'm very confused. Thanks. Could this be a typo? (two Ps in ppasscode, intended?)I would make sure and do:and make sure the data is accurate there, and then echo out what it should look like:Compare this output to what you have in the database (manually). By doing this you're exploring your possible points of failure:First of all, sha256 is a hashing algorithm, not a type of encryption. An encryption would require having a way to decrypt the information back to its original value (collisions aside).Looking at your code, it seems it should work if you are providing the correct parameter.But most importantly before deploying this in any kind of public fashion, please remember to sanitize your inputs. Don't allow arbitrary SQL to be insert into the queries. The best idea here would be to use parameterized queries.You should use Adaptive hashing like http://en.wikipedia.org/wiki/Bcrypt for securing passwordsA way better solution is to just use the excelent compatibility script from Anthony Ferrara:https://github.com/ircmaxell/password_compatPlease, and also, when checking the password, always add a way (preferibly async, so it doesn't impact the check process for timming attacks) to update the hash if needed.The first thing is to make a comparison of functions of SHA and opt for the safest algorithm that supports your programming language (PHP).Then you can chew the official documentation to implement the hash() function that receives as argument the hashing algorithm you have chosen and the raw password.sha256 => 64 bits

sha384 => 96 bits

sha512 => 128 bitsThe more secure the hashing algorithm is, the higher the cost in terms of hashing and time to recover the original value from the server side.

PHPMailer generates PHP Warning: stream_socket_enable_crypto(): Peer certificate did not match expected

Rob Gunsuka

[PHPMailer generates PHP Warning: stream_socket_enable_crypto(): Peer certificate did not match expected](https://stackoverflow.com/questions/30371910/phpmailer-generates-php-warning-stream-socket-enable-crypto-peer-certificate)

I am using PHPMailer on PHP 5.6, the increased security around certificated in PHP 5.6 is certainly fun.I am trying to send a test message to a domain hosted on dreamhost, the error that comes back from PHPMailer is: Could not connect to SMTP host.That error is not right though, I have logging enabled and here is what is actually going on.I could not understand why PHPMailer just gives up, issuing a QUIT command when it should start sending the message.  I got another clue from another log:PHP Warning:  stream_socket_enable_crypto(): Peer certificate CN=*.mail.dreamhost.com' did not match expected CN=mx1.sub4.homie.mail.dreamhost.com' in /home/ikbb/domains/dev.ikbb.com/public_html/includes/phpmailer/5.2.10/class.smtp.phpIf I use some custom options to prevent validation of the cert they are using I can get it to continue.  Here is what I have:If I put the SMTPOptions in there and skip the peer verification, message goes OK - with no warning in PHP at all.How can I trap that error, so I know there is an issue but still send the message?

2015-05-21 11:05:35Z

I am using PHPMailer on PHP 5.6, the increased security around certificated in PHP 5.6 is certainly fun.I am trying to send a test message to a domain hosted on dreamhost, the error that comes back from PHPMailer is: Could not connect to SMTP host.That error is not right though, I have logging enabled and here is what is actually going on.I could not understand why PHPMailer just gives up, issuing a QUIT command when it should start sending the message.  I got another clue from another log:PHP Warning:  stream_socket_enable_crypto(): Peer certificate CN=*.mail.dreamhost.com' did not match expected CN=mx1.sub4.homie.mail.dreamhost.com' in /home/ikbb/domains/dev.ikbb.com/public_html/includes/phpmailer/5.2.10/class.smtp.phpIf I use some custom options to prevent validation of the cert they are using I can get it to continue.  Here is what I have:If I put the SMTPOptions in there and skip the peer verification, message goes OK - with no warning in PHP at all.How can I trap that error, so I know there is an issue but still send the message?I had the same problem and I found the answer in the PHPMailer documentation.PHP 5.6 certificate verification failureIn a change from earlier versions, PHP 5.6 verifies certificates on SSL connections. If the SSL config of the server you are connecting to is not correct, you will get an error like this:The correct fix for this is to replace the invalid, misconfigured or self-signed certificate with a good one. Failing that, you can allow insecure connections via the SMTPOptions property introduced in PHPMailer 5.2.10 (it's possible to do this by subclassing the SMTP class in earlier versions), though this is not recommended:You can also change these settings globally in your php.ini, but that's a really bad idea; PHP 5.6 made this change for very good reasons.Sometimes this behaviour is not quite so apparent; sometimes encryption failures may appear as the client issuing a QUIT immediately after trying to do a STARTTLS. If you see that happen, you should check the state of your certificates or verification settings.For PHP 5.6 use the following. Adding "tls://" is the key. See: http://php.net/manual/en/context.ssl.phpFor those of you using cPanel, I tried the SMTP check code from the examples folder in PHPMailer and I got this same error:I realized that it was not an error related to PHPMailer, so I searched for similar errors related to CentOS and I found this link that shed some light: Issue sending mails through 3rd party. You have to take a look at "SMTP Restrictions" in cPanel.I had a similar problem after I've upgraded to PHP 5.6 on my WordPress machine. The WP Mail SMTP by WPForms (wp-mail-smtp) plugin were configured to use localhost as SMTP Host. I've changed it to the FQHN (Fully Qualified Host Name) as it is defined in the SSL cert.

After this change it is working fine.

Add attribute to an object in PHP

igorgue

[Add attribute to an object in PHP](https://stackoverflow.com/questions/2850844/add-attribute-to-an-object-in-php)

How do you add an attribute to an Object in PHP?

2010-05-17 16:28:41Z

How do you add an attribute to an Object in PHP?Well, the general way to add arbitrary properties to an object is:You can, much cleaner, pre-define attributes in your class (PHP 5+ specific, in PHP 4 you would use the old var $attributename)this is highly recommended, because you can also document the properties in your class definition.You can also define getter and setter methods that get called whenever you try to modify an object's property.Take a look at the php.net documentation: http://www.php.net/manual/en/language.oop5.properties.phpAttributes are referred to as "properties" or "class members" in this case.this is a static class but, the same principle would go for an intantiated one as well.

this lets you store and retrieve whatever you want from this class. and throws an error if you try to get something that is not set. 

json_encode function: special characters

user2723490

[json_encode function: special characters](https://stackoverflow.com/questions/20694317/json-encode-function-special-characters)

Elements of an array containing special characters are converted to empty strings when encoding the array with json_encode:After JSON encoding the element [funds] is null. It happens only with special characters (copyright, trademark etc) like the ones in "ComStage STOXX®Europe 600 Techn NR ETF".Any suggestions?ThanksUPDATE: This is what solved the problem prior to populating the array (all names are taken from the db):

2013-12-20 00:28:53Z

Elements of an array containing special characters are converted to empty strings when encoding the array with json_encode:After JSON encoding the element [funds] is null. It happens only with special characters (copyright, trademark etc) like the ones in "ComStage STOXX®Europe 600 Techn NR ETF".Any suggestions?ThanksUPDATE: This is what solved the problem prior to populating the array (all names are taken from the db):Your input has to be encoded as UTF-8 or ISO-8859-1.http://www.php.net/manual/en/function.json-encode.phpBecause if you try to convert an array of non-utf8 characters you'll be getting 0 as return value.Since 5.5.0 The return value on failure was changed from null string to FALSE.The manual for json_encode specifies this:Thus, try array_mapping utf8_encode() to your array before you encode it:For reference, take a look at the differences between the three examples on this fiddle. The first doesn't use character encoding, the second uses htmlentities and the third uses utf8_encode - they all return different results.For consistency, you should use utf8_encode().To me, it works this way:you should use this code:array_map function converts special characters in UTF8 standardUse the below function. you should add charset=UTF-8 in meta tag and use json_encode for special charactersjson_encode function converts special characters in UTF8 standard1.mysql_set_charset('utf8'); // set this line on top of your page in which you are using json.

PHP Error : Fatal error: Constant expression contains invalid operations

Raja Gopal

[PHP Error : Fatal error: Constant expression contains invalid operations](https://stackoverflow.com/questions/40171546/php-error-fatal-error-constant-expression-contains-invalid-operations)

I am getting an error:That line was:Whether I did any mistakes in quotes? Or somewhere else?My search for the error message only showed a different source cause (a dynamic default value in a function definition).

2016-10-21 08:13:52Z

I am getting an error:That line was:Whether I did any mistakes in quotes? Or somewhere else?My search for the error message only showed a different source cause (a dynamic default value in a function definition).From the official Php documentation :So you cannot initialize a static variable with another variable. Replace $appdata['id'] with a constant string or remove the static attribute.This is because all static declarations are resolved in compile-time, when the content of other variables is not known (see this other page of official doc).Unless you mess with reflection, the only way I can think of to have a static private/protected class property with a dynamically generated value is to calculate it outside the class:In your precise use case, however, it's possible that there's simply no good reason for the property to be static. In that case, it's as straightforward as using the constructor:Raja this is because a static variable contains a constant value in it. But in your case:$appdata['id'] is dynamic that can change its value during the execution. That's why the error is showing.I had this error and my fix was to not declare a date within a class property array

PHP profiling with microtime(): Negative time?

Boldewyn

[PHP profiling with microtime(): Negative time?](https://stackoverflow.com/questions/2607150/php-profiling-with-microtime-negative-time)

For a very simple profiling I use microtime() like this:Now, the output of the echo line seems completely random, that is, I expected fluctuations, but I didn't expect negative numbers showing up.However, a typical result contains ~ 1/3 negative numbers. I confirmed this on Solaris (PHP 5.0.x) and WinVista (PHP 5.2.3).What the heck is going on here? Have I invented accidently a time machine?

2010-04-09 11:58:30Z

For a very simple profiling I use microtime() like this:Now, the output of the echo line seems completely random, that is, I expected fluctuations, but I didn't expect negative numbers showing up.However, a typical result contains ~ 1/3 negative numbers. I confirmed this on Solaris (PHP 5.0.x) and WinVista (PHP 5.2.3).What the heck is going on here? Have I invented accidently a time machine?If you want to do operations on what is returned by microtime, you have to set the "get as float" parameter to true (it defaults to false).http://www.php.net/manual/en/function.microtime.php

Max size of URL parameters in _GET

alexfernandez

[Max size of URL parameters in _GET](https://stackoverflow.com/questions/7724270/max-size-of-url-parameters-in-get)

I am accessing a PHP server using REST: all data is passed in a GET request as URL parameters. One of the parameters arrives at the server in the query_string, but it is not in the _GET global. But shortening the parameter (the cutoff seems to be around 512 characters) lets it through.Assuming I have diagnosed the problem correctly, is there a way to change this maximum size? I have not found any explanation in the documentation, not even a mention of this limit. This is on Debian squeeze / Apache 2.2.16 / PHP 5.3.3.

2011-10-11 09:58:22Z

I am accessing a PHP server using REST: all data is passed in a GET request as URL parameters. One of the parameters arrives at the server in the query_string, but it is not in the _GET global. But shortening the parameter (the cutoff seems to be around 512 characters) lets it through.Assuming I have diagnosed the problem correctly, is there a way to change this maximum size? I have not found any explanation in the documentation, not even a mention of this limit. This is on Debian squeeze / Apache 2.2.16 / PHP 5.3.3.Ok, it seems that some versions of PHP have a limitation of length of GET params:Source: http://www.php.net/manual/en/reserved.variables.get.php#101469See What is the maximum length of a URL in different browsers?The length of the url can't be changed in PHP.

The linked question is about the URL size limit, you will find what you want.

Run executable from php without spawning a shell

Stéphane Gourichon

[Run executable from php without spawning a shell](https://stackoverflow.com/questions/16595044/run-executable-from-php-without-spawning-a-shell)

I need to call an executable from an imposed context of a PHP script. Both performance and security wise it's better not to call a shell at all between web server process and executable.Of course I searched the web, without success (in such a PHP context). Many other languages allow that and document it clearly.Alas, backticks, exec(), shell_exec(), passthru(), system(), proc_open(), popen() call a shell.

And pcntl_fork() seems unavailable.This was tested on a Debian 6 64bit with PHP 5.3.3-7+squeeze15 .

Test code on http://pastebin.com/y4C7MeJzTo get a meaningful test I used a trick which is to ask to execute a shell command not also available as an executable. A good example is umask . Any function returning something like 0022 definitely called a shell. exec(), shell_exec(), passthru(), system(), proc_open() all did.

See detailed results on http://pastebin.com/RBcBz02F .Now, back the the goal : how to execute arbitrary program without launching a shell ?Php's exec takes as expected an array of string args instead of a unique string. But pcntl_fork just stops the requests without even a log.Edit: pcntl_fork failure is because the server uses Apache's mod_php, see http://www.php.net/manual/en/function.pcntl-fork.php#49949 .Edit: added popen() to the tests, following @hakre suggestion.Any hint appreciated.

2013-05-16 18:42:18Z

I need to call an executable from an imposed context of a PHP script. Both performance and security wise it's better not to call a shell at all between web server process and executable.Of course I searched the web, without success (in such a PHP context). Many other languages allow that and document it clearly.Alas, backticks, exec(), shell_exec(), passthru(), system(), proc_open(), popen() call a shell.

And pcntl_fork() seems unavailable.This was tested on a Debian 6 64bit with PHP 5.3.3-7+squeeze15 .

Test code on http://pastebin.com/y4C7MeJzTo get a meaningful test I used a trick which is to ask to execute a shell command not also available as an executable. A good example is umask . Any function returning something like 0022 definitely called a shell. exec(), shell_exec(), passthru(), system(), proc_open() all did.

See detailed results on http://pastebin.com/RBcBz02F .Now, back the the goal : how to execute arbitrary program without launching a shell ?Php's exec takes as expected an array of string args instead of a unique string. But pcntl_fork just stops the requests without even a log.Edit: pcntl_fork failure is because the server uses Apache's mod_php, see http://www.php.net/manual/en/function.pcntl-fork.php#49949 .Edit: added popen() to the tests, following @hakre suggestion.Any hint appreciated.To answer your sentence :About performances, well, yes, php internals forks, and the shell itself forks too so that's a bit heavy. But you really need to execute a lot of processes to consider those performances issues.About security, I do not see any issue here. PHP has the escapeshellarg function to sanitize arguments.The only real problem I met with exec without pcntl is not a resource nor security issue : it is really difficult to create real deamons (without any attachment to its parent, particularily Apache). I solved this by using at, after double-escaping my command:To get back to your question, the only way I know to execute programs in a standard (fork+exec) way is to use the PCNTL extension (as already mentionned). Anyway, good luck!To complete my answer, you can create an exec function yourself that does the same thing as pcntl_fork+pcntl_exec.I made a my_exec extension that does a classic exec+fork, but actually, I do not think it will solve your issues if you're running this function under apache, because the same behaviour as pcntl_fork will apply (apache2 will be forked and there may be unexpected behaviours with signal catching and so on when execv does not succeed).config.m4 the phpize configuration filemy_exec_extension.c the extensiontest.php a usage sampleshell script run those commands, of course use your own module directoryResultI am not a C dev, so I think there are cleaner ways to achieve this. But you get the idea.Id consider trying pcntl_exec() You can't launch any arbitrary program without a shell - the shell is the wrapper around the executing program that provides its environment settings, like PWD and PATH.If you want the ability to run system commands without launching a shell, re-write the system commands as PHP modules and install them into your PHP server, and run them as functions.

Best way to implement Single-Sign-On with all major providers?

The Surrican

[Best way to implement Single-Sign-On with all major providers?](https://stackoverflow.com/questions/4061537/best-way-to-implement-single-sign-on-with-all-major-providers)

I already did a lot of research on this topic and have implemented a lot of solutions myself.Including OpenID, Facebook Connect (using the old Rest API and the new Graph OAuth 2.0 API), Sign in with twitter (which has been upgraded to fully qualified OpenID by now as far as I know), and so on...But what I'm still missing is the perfect all in one solution.During my research I stumbled about some interesting projects:But I don't want to rely on an external provider and I would like a free solution as well, so I am not limited in implementation.I have also seen developers implementing one service after another dutifully following the providers instructions and setting up models and database tables for everything.Of course this will work but it is a shitload of work and always needs development and changes in your application etc.What I am looking for is an abstraction layer that takes all the services out there to one standard that can be integrated in my website. Once a new service appears I only want to add one model that deals with the abstraction of that specific provider so I can seamlessly integrate it into my application.Or better, find an already existing solution that I can just dowonload.Ideally this abstraction service would be hosted independently from my application so it can be used for several applications and be upgraded independently.The last of the 3 solutions above looks promising from the concept.

Everything is just ported to an synthetic OpenID, and the website jut has to implement OpenID.After a while i found Django socialauth, a python based authentication system for the Django Webframework. But it looks like it operates as described above and i think this is the same login system that Stackoverflow uses (or at least some modified fork...).I downloaded it and tried to set it up and to see whether it could be set up as a standalone solution but I had no luck, as I am not so into python either.I would love a PHP based solution.So after this long text my question precisely is:I hope this question is not too subjective, thanks in advance.Update:

I concluded that building a proxy / wrapper or what you might call it for Facebook, to port it to an OpenID so it becomes an OpenID endpoint / provider would be the best option.

So that exactly what i did.Please see my answer below.I added the bounty to get feedback/discussion on it. Maby my approach is not so good as i currently think it is!

2010-10-31 02:07:32Z

I already did a lot of research on this topic and have implemented a lot of solutions myself.Including OpenID, Facebook Connect (using the old Rest API and the new Graph OAuth 2.0 API), Sign in with twitter (which has been upgraded to fully qualified OpenID by now as far as I know), and so on...But what I'm still missing is the perfect all in one solution.During my research I stumbled about some interesting projects:But I don't want to rely on an external provider and I would like a free solution as well, so I am not limited in implementation.I have also seen developers implementing one service after another dutifully following the providers instructions and setting up models and database tables for everything.Of course this will work but it is a shitload of work and always needs development and changes in your application etc.What I am looking for is an abstraction layer that takes all the services out there to one standard that can be integrated in my website. Once a new service appears I only want to add one model that deals with the abstraction of that specific provider so I can seamlessly integrate it into my application.Or better, find an already existing solution that I can just dowonload.Ideally this abstraction service would be hosted independently from my application so it can be used for several applications and be upgraded independently.The last of the 3 solutions above looks promising from the concept.

Everything is just ported to an synthetic OpenID, and the website jut has to implement OpenID.After a while i found Django socialauth, a python based authentication system for the Django Webframework. But it looks like it operates as described above and i think this is the same login system that Stackoverflow uses (or at least some modified fork...).I downloaded it and tried to set it up and to see whether it could be set up as a standalone solution but I had no luck, as I am not so into python either.I would love a PHP based solution.So after this long text my question precisely is:I hope this question is not too subjective, thanks in advance.Update:

I concluded that building a proxy / wrapper or what you might call it for Facebook, to port it to an OpenID so it becomes an OpenID endpoint / provider would be the best option.

So that exactly what i did.Please see my answer below.I added the bounty to get feedback/discussion on it. Maby my approach is not so good as i currently think it is!After the discussion of the already existing answer i sum up:Almost every major provider is an openid provider / endpoint including Google, Yahoo, Aol.Some of them requrie the user to specify the username to construct the openid endpoint.

Some of them (the ones mentioned above) do have discovery urls, where the user id is automatically returned so that the user only has to click. (i would be glad if someone could explain the technical background)However the only pain in the ass is Facebook, because they have their Facebook connect where they use an adapted version of OAuth for authentication.Now what I did for my project is to set up an openid provider that authenticates the user with the credentials of my facebook Application - so the user gets connected to my application - and returns a user id that looks like:I also configured it to fetch email adress and name and return it as AX attributes.So my website just has to implement opend id and i am fine :)I build it upon the classes you can find here: http://gitorious.org/lightopenidIn my index.php file i just call it like this:and the source code of FacebookProvider.php follows:Its just a first working version (quick and dirty)

Some dynamic stuff is hardcoded to my needs.

It should show how and that it can be done.

I am happy if someone picks up and improves it or re writes it or whatever :)Well i consider this question answered but I add a bounty just to get discussion. I would like to know what you think of my solution.I will award the bounty to the best answer/comment beside this one.OpenID is going to be your best bet for this application. It is supported by many, providers:The Only problem is that twitter has not implemented OpenID yet. This is probably due to the fact that they are a proprietery based company, so they wanted their 'own' solution. To solve that solution, you might write a wrapper class to provide compatibility with OpenID, but the chance is that even if your users don't have a twitter account, they might have a Facebook, Google, or Yahoo account. Facebook Supports oauth, so you will have to port oauth to OpenIDSome PHP libraries for OpenID can be found here.Now, some questions have been raised about facebook being an oauth provider.Their oauth URL is "https://graph.facebook.com/oauth/authorize"If you still do not belive me, then you can look at this javascript file, where I got that URL. If you don't believe that javascript file, then notice that it is hosted by stackexchange, the provider of this site. Now you must beleive that.Fast forward two years and the answer of "OpenID is the answer" appears to be falling by the wayside by a number of the big providers.  Most of the major third-party integration sites seem to have moved onto some flavor of OAuth (usually OAuth2).  Also, if you don't mind NOT using OpenID/OAuth, there is a now complete SSO solution written in PHP (Disclaimer and full disclosure:  This product is developed and maintained by myself under the CubicleSoft banner):Single Sign-On Server/ClientWhich didn't exist when this question was originally asked.  It has a liberal license (MIT or LGPL) and meets your requirement of being an abstraction layer.  The project tends to be focused toward enterprise sign ins but has some social media sign ins in the mix too (Google and Facebook).You might also want to look at HybridAuth, which is only focused on social media sign ins but is more of a library than a prebuilt solution that you can throw onto a server and be done with it.  So there is a bit more work involved with setting it up.  It really depends on what you are after.If you are happy with your OpenID solution, then great, but there are more options today than there were two years ago and people are still finding this thread.

Does php have an equivalent to python's virtualenv or ruby's sandbox?

Zxaos

[Does php have an equivalent to python's virtualenv or ruby's sandbox?](https://stackoverflow.com/questions/7182176/does-php-have-an-equivalent-to-pythons-virtualenv-or-rubys-sandbox)

I'm used to using python's virtualenv tool to create separate environments that can mimic deployment environments for projects I write.Now, I'm going to be working on a php project and I'm wondering if there's any equivalent to that? Specifically I'm hoping to be able to run one virtualhost on apache with one (older) version of php, while everything else runs on the normal up to date version.My development machine is running ubuntu 11.04, so solutions that work on that platform would be preferred.

2011-08-24 20:58:15Z

I'm used to using python's virtualenv tool to create separate environments that can mimic deployment environments for projects I write.Now, I'm going to be working on a php project and I'm wondering if there's any equivalent to that? Specifically I'm hoping to be able to run one virtualhost on apache with one (older) version of php, while everything else runs on the normal up to date version.My development machine is running ubuntu 11.04, so solutions that work on that platform would be preferred.Assuming that you are using mod_php, there is no way to load multiple different versions into the same Apache instance. You can run multiple different versions if you're running PHP as CGI or FastCGI, but this will itself introduce some differences in behavior from mod_php.As loading different versions of php within apache with mod_php seems not to be posible, the easiest way of mimicking deployment and development setups will be with a virtualmachine, which you stated you would like to avoid. One way of making the burden of vm's for developers a bit easier is to use something like vagrant. With two files (the vagrant file, and the chef/puppet file) you can "version" your vm's, easily create them and destroy them for each project and when needed.Another alternative to virtual machines is docker.virtPHP is a tool for creating and managing multiple isolated PHP environments on a single machine. It's like Python's virtualenv, but for PHP. (README)https://github.com/virtphp/virtphpYou might be interested in this: https://github.com/phpenv/phpenv(Haven't coded php in years, so this might be outdated)As far as I remember you just had to point to another directory where your libraries reside (include PATH), using something like:and in your php files:PHP never really had a robust packaging system and library repository like perl/python/ruby has, PEAR was trying to move in that direction but it is very closed in comparison and was hard to configure in multiproject environments. Phark is trying to build a brew/bundler port for php, https://github.com/lox/phark, although it's not deployment ready.As of now, there is no out of the box solution to this problem. The only solution which comes close is Vagrant and puPHPet.com as discussed here: https://drupal.org/node/2055947

Why can't we have an environment like python's virtualenv or ruby's rbenv? It makes up a nice open source project. Multiple instances of PHP can be handy if we want to test out some libraries in sandboxes rather than globally. We can install dependencies for different projects using a package manager like Composer. 

What is the difference between PHP echo and PHP return in plain English?

Joe Morales

[What is the difference between PHP echo and PHP return in plain English?](https://stackoverflow.com/questions/9387765/what-is-the-difference-between-php-echo-and-php-return-in-plain-english)

Yes, I have googled this question and even referred to my textbook (PHP by Don Gosselin) but I seriously can't seem to understand the explanation.From my understanding:I applied both echo and return in the following functions I can't see the difference or the 'effectiveness' of using return instead of echo.Both display the result!

What am I not understanding?

2012-02-22 01:03:24Z

Yes, I have googled this question and even referred to my textbook (PHP by Don Gosselin) but I seriously can't seem to understand the explanation.From my understanding:I applied both echo and return in the following functions I can't see the difference or the 'effectiveness' of using return instead of echo.Both display the result!

What am I not understanding?I'm going to give a completely non-technical answer on this one. Let's say that there is a girl named Sally Function. You want to know if she likes you or not. So since you're in grade school you decide to pass Sally a note (call the function with parameters) asking her if she likes you or not. Now what you plan on doing is asking her this and then telling everyone what she tells you. Instead, you ask her and then she tells everyone. This is equivalent to returning (you getting the information and doing something with it) vs her echoing (telling everyone without you having any control). In your case what is happening is that when Sally echos she is taking the control from you and saying "I'm going to tell people this right now" instead of you being able to take her response and do what you wanted to do with it. The end result is, however, that you were telling people at the same time since you were echoing what she had already echoed but didn't return (she cut you off in the middle of you telling your class if she liked you or not)Consider the following:You might expect the output to be: The actual output is:The reason is that "Goodbye" is echo'ed (written) as output, as soon as the function is called. "Hello", on the other hand, is returned to the $hello variable. the $goodbye is actually empty, since the goodbye function does not return anything.I see you are posting comments still which suggest you are confused because you don't understand the flow of the code. Perhaps this will help you (particularly with Mathias R. Jessen's answer).So take these two functions again:Now if you do this:You will be left with 'GoodbyeHello' on your screen.Here's why. The code will run like this:with return the function itself can be treated somewhat like a variable.So will output:whilewill output:As there is no result of add2. What it does is only echo'ing out stuff. Never actually returning a value back to the code that called it.Btw, you are not dumb. You are just a beginner. We are all beginners in the beginning, and there is a certain threshold you'll need to get over in the beginning. You will probably have a lot of "dumb" questions in the beginning, but just keep on trying and above all experiment, and you will learn.So, basically you’ll want to use echo whenever you want to output something to the browser, and use return when you want to end the script or function and pass on data to another part of your script.there is couple of difference i found after testing it1) return just return the value of a function to get it used later after storing it in a variable but echo simply print the value as you call the function and returns nothing.here is the short example for thisfunction myfunc() {

    echo "i am a born programmer";

    }}The difference between the response of a function is that " echo" send something to the browser (DOM ) , while " return" returns something to the caller.Using a slight modification of your example:Can you see the difference?echo renders the text etc into the document, return returns data from a function/method etc to whatever called it. If you echo a return, it'll render it (Assuming it's text/number etc - not an object etc).Behind both functions you have a line, which toggles your output:echo prints the value so you can read it.

return returns the value to save in for example variables.Basically, to output PHP into HTML we should use echo. In other word, we need to echo it. These two example below will give a clear understanding :to show $result in html for each sample :for sample 1 we should use <?php echo $result ?> for sample 2 we should use <?php $result ?> On sample 2 we do not need to echo it, because we have echo it inside the function.One thing that I learned while doing changes in Buddypress is that it uses the return mainly on nested core functions and then with the use of sprintf it binds dynamic variables into the HTML and return that chunck of html back to the main function where it was called and only then it echo out once at the main function. By doing so the code becomes modular and easier to debug.The most important difference between echo and return in my viewpoint is:

the data type of result for each one.

when we write some functions like below:and yes, both of them will give us 151 as an output value. 

But, in the return case, we will print firstFunction($value) as an int data type.

Otherhand, in the echo case, we will print secondFunction($value) as a NULL data type.

You can try printing each one with var_dump() function to understand what I meant.That difference will benefit us when we treat some values that returns from databases, especially in the math operations like (post views count) or something like that.

That'll make sense over what has been written here.

hope I have explained it the easy way.

PHP Echo a large block of text

Thomas

[PHP Echo a large block of text](https://stackoverflow.com/questions/2672642/php-echo-a-large-block-of-text)

Im new to PHP and I can't figure out what the rules are for using the echo function. For example, if I need to echo a large block of css/js, do I need to add echo to each line of text or is there a way to echo a large block of code with a single echo?When I try to echo a big block of code like this one, I get an error: Is there a better way to echo large blocks of code without a lot of work (adding echo to each line for example)?

2010-04-20 04:55:11Z

Im new to PHP and I can't figure out what the rules are for using the echo function. For example, if I need to echo a large block of css/js, do I need to add echo to each line of text or is there a way to echo a large block of code with a single echo?When I try to echo a big block of code like this one, I get an error: Is there a better way to echo large blocks of code without a lot of work (adding echo to each line for example)?One option is to get out of the php block and just write HTML.With your code, after the opening curly brace of your if statement, end the PHP:Then remove the echo ' and the ';After all your html and css, before the closing }, write:If the text you want to write to the page is dynamic, it gets a little trickier, but for now this should work fine.Heredoc syntax can be very useful:Check out heredoc. Example:The is also nowdoc but no parsing is done inside the block. Echoing text that contains line breaks is fine, and there's no limit on the amount of text or lines you can echo at once (save for available memory).The error in your code is caused by the unescaped single quotes which appear in the string.See this line:You'd need to escape those single quotes in a PHP string whether it's a single line or not.There is another good way to echo large strings, though, and that's to close the PHP block and open it again later:Or another alternative, which is probably better for readability, is to put all that static HTML into another page and include() it.Man, PHP is not perl!

PHP can just escape from HTML :)

http://www.php.net/manual/en/language.basic-syntax.phpmode.phpI wonder why such many people stuck to ugly heredoc.Your problem is actually caused by:You need to escape the single quotes to be \' However: Using a Heredoc is a much better idea, as it will be much cleaner overall.To expand on @hookedonwinter's answer, here's an alternate (cleaner, in my opinion) syntax:Just break out where you need to.Do not use shortened-form. <? conflicts with XML and is disabled by default on most servers.I prefer to concatenate multiple Strings together. This works either for echo AND for variables.

Also some IDEs auto-initialize new lines if you hit enter.

This Syntax also generate small output because there are much less whitespaces in the strings.Normally i start with an empty string and then append bit by bit to it:(Please stop Posts like "uh. You answer to an five jears old Question." Why not? There are much people searching for an answer. And what's wrong to use five year old ideas? If they don't find "their" solution they would open a new Question. Then the first five answers are only "use the search function before you ask!" So. I give you another solution to solve problems like this.)You can achieve that by printing your string like:

Paypal Access - SSL certificate: unable to get local issuer certificate

Luca Pennisi

[Paypal Access - SSL certificate: unable to get local issuer certificate](https://stackoverflow.com/questions/17478283/paypal-access-ssl-certificate-unable-to-get-local-issuer-certificate)

I'm working with cUrl and PHP to make a request to a server (for paypal access)Paypal developer website does never mention that an SSL certificate is required to use PayPal access API, however the code that I use to request the token is the following:This echo outputs the following error:My questions are: 1) do I need SSL to use paypal access if I need only to get the user email?2) if I do not need SSL why this error occours?PS: the endpoint is the following: https://www.sandbox.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice

2013-07-04 21:27:20Z

I'm working with cUrl and PHP to make a request to a server (for paypal access)Paypal developer website does never mention that an SSL certificate is required to use PayPal access API, however the code that I use to request the token is the following:This echo outputs the following error:My questions are: 1) do I need SSL to use paypal access if I need only to get the user email?2) if I do not need SSL why this error occours?PS: the endpoint is the following: https://www.sandbox.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenserviceThe correct solution is to fix your PHP setup..   setting CURLOPT_SSL_VERIFYPEER to false is a quick hack, but it's wrong as you disable the certificate validation by it's certificate authority.  This exposes you to a man-in-the-middle attack.It's easy to fix (php 5.3.7 or higher) - 

Download a list file with an up-to-date certificate authorities, and add this setting to your php.ini

curl.cainfo=<path-to>cacert.pem

Restart your web server, and it'll work !You may disable SSL verification (which is enabled by default as of cURL 7.10), by adding this:to your $options, however the proper way is to keep validation enabled.SECURITY NOTICEIf remote site uses certificate issued by known CA but validation still fails, then most likely certificate is incorrectly set up on the remote server (lack of intermediate certificates etc.). Alternatively your system got no idea about used Certificate Authority that signed target's certificate. In such case yo should use php.ini's curl.cainfo (documentation) to point to valid PEM file with all supported CAs - that would make your setup properly validate issuer chain.Please be aware that by setting CURLOPT_SSL_VERIFYPEER to false you are NOT solving the issue! You are working it around. This is all about security so it's fine to do that for a while, but deploying that on production is not wise, politely speaking, as you will become open to Man In The Middle Attack. You have been warned.I had the same exact problem I used the code samples generated on paypal's github found here (I used PHP): https://github.com/paypal/ipn-code-samplesI downloaded both certs and tried testing both from curl: http://curl.haxx.se/docs/caextract.htmlAfter about 2 hours of testing (using paypal's ipn simulator) and googling, found that paypal ipn cannot be tested on localhost, so i pushed the code live and tried testing, but still got the same error (even with permissions set to 777).When I set CURLOPT_SSL_VERIFYPEER, false, it worked but this would defeat the purpose of having an ssl certificate.After snooping around on my server's files, I found a curl-ca-bundle.crt file in my PHP folder. I decided to hardcode the CURLOPT_CAINFO in my paypal ipn script to that path. It finally worked!I noticed this older .crt file included some certificates that weren't on the latest .crt file from the curl website. It was a bunch of certificates from verisign class 1, verisign class 2, verisign class 3 and verisign class 4.Here's the complete list of the certificate names I added to curl's .crt file:This may have something to do with what @Andomar was saying - paypal's verisign certificate is not included in the default (by default I mean curl's default) list of safe certificates.I didn't have the time to debug and figure out exactly which certificate is needed so I just included all of them.For anyone who experiences this problem in the future, I would suggest to get the latest certs from curl and add one by one the certificates in the list above until the error is gone. Here's a link for some of those verisign certificates (you may need to google for the others not listed): www.symantec.com/page.jsp?id=roots  Note*: To view paypal's current certificates you can run this command in terminal:If anyone has further insight to this issue, please comment as I spent hours to figure all of the above out.Means that cUrl doesn't trust Verisign, the certificate authority that vouches for PayPal.  As Marc B comments, cUrl no longer ships with trust for any certificate authority.You can bypass the certificate chain validation with the option:To read how to configure cUrl so that it trusts Verisign, read the cUrl documentation.

GD Library extension not available with this PHP installation Ubuntu Nginx

Saeed Vaziry

[GD Library extension not available with this PHP installation Ubuntu Nginx](https://stackoverflow.com/questions/34009844/gd-library-extension-not-available-with-this-php-installation-ubuntu-nginx)

i am using laravel web framework on my ubuntu 14.04 server and nginx web server , i have this error when i try to upload file using laravel to server.

my upload directory is on public/uploads folder that has 777 permission.

2015-11-30 23:21:02Z

i am using laravel web framework on my ubuntu 14.04 server and nginx web server , i have this error when i try to upload file using laravel to server.

my upload directory is on public/uploads folder that has 777 permission.The GD Graphics Library is for dynamically manipulating images. 

For Ubuntu you should install it manually:That's all, you can verify that GD support loaded:Output should be like this:@limonte's answer is correct, but if you're using PHP7+, you should use following command:sudo apt-get install php7.0-gdIf you don't know what version of PHP you're using, just typephp -vOutput should start with something similar to PHP 7.0.8-0ubuntu0.16.04.2 (cli) ( NTS ).for php -v 7.1works for mePhp 5.6 worked with below commandPHP5.6: sudo apt-get install php5.6-gdafter installing restart serverIn my case under Archlinux:php-gdthen in your php.ini for me in /etc/php/php.ini uncomment line ;extension=gd.so by removing semicolon.Don't forget to restart the server.I'm experiencing something unsual:If I execute generically it install php-gd for 7.3 versionDoing the following, nothing happens:Already tried to do:Does anyone got this error?

PHP7 Laravel Mcrypt issue

Bishal Paudel

[PHP7 Laravel Mcrypt issue](https://stackoverflow.com/questions/34083470/php7-laravel-mcrypt-issue)

Since Laravel4 requires mcrypt extension, and PHP7 doesn't seem to have mcrypt extension, is there any workaround for this to work?

2015-12-04 07:59:08Z

Since Laravel4 requires mcrypt extension, and PHP7 doesn't seem to have mcrypt extension, is there any workaround for this to work?Had the same issue - PHP7 missing mcrypt. This worked for me. When asked, keep local PHP configuration files.Restart FPM (or Apache or NGINX etc.) after installation.I'm on Mac and with laravel valet I've solved with this:Even if you enable mcrypt in php.ini, this issue may occur.

Try the following steps.I am working in ubuntu 16.04 and the following commands also helped me.On ubuntu: According to launchpad.net the package for mcrypt is called php7.0-mcrypt.sudo apt-get install php7.0-mcrypt to installOpen terminal with Ctrl + Alt + T and run following commands for PHP7.0 on Ubuntu 16.4php7 have mcrypt, you can enable it in php.ini and then everything will work fine.do like this: PHP7 contains mcrypt extension internally (source-path/ext/mcrypt/). 

But it depends on Libmcrypt soft.Step 1.Download libmcrypt-x.x.tar.gz from http://mcrypt.sourceforge.net/

and build it.Step 2.Rebuild PHP7 from source and add --with-mcrypt option.Other way without rebuilding PHP7Restart phpI use, Dotdeb, an extra repository providing up-to-date all kinds of cool toys for your Debian servers like Nginx, PHP, MySQL, Redis etc. 

PHP - count specific array values

Ivo San

[PHP - count specific array values](https://stackoverflow.com/questions/11646054/php-count-specific-array-values)

How can I count the number of element inside an array with value equals a constant?

example,how can I directly know how many "Ben" is inside?

2012-07-25 08:55:09Z

How can I count the number of element inside an array with value equals a constant?

example,how can I directly know how many "Ben" is inside?You can do this with array_keys and count.Output:Use the array_count_values function.$countValues = array_count_values($myArray);echo $countValues["Ben"];Use array_count_values() function . Check this link http://php.net/manual/en/function.array-count-values.phpIn my case of two dimensional array, from PHP Official Page comments, I found the useful snippet for a two dimensional array-try the array_count_values() functionoutput:http://php.net/manual/en/function.array-count-values.phpOutput:Try the PHP function array_count_values.If you want to count ALL the same occurences inside the array, here's a function to count them all, and return the results as a multi-dimensional array:array_count_values only works for integers and strings. If you happen to want counts for float/numeric values (and you are heedless of small variations in precision or representation), this works: Note that I return $cnts with the keys as strings. It would be easy to reconvert them, but I'm trying to determine the mode for the values, so I only need to re-convert the first (several) values.I tested a version which looped, creating an array of counts rather than using array_count_values, and this turned out to be more efficient (by maybe 8-10%)!

Uncaught ReflectionException: Class log does not exist Laravel 5.2

jakehallas

[Uncaught ReflectionException: Class log does not exist Laravel 5.2](https://stackoverflow.com/questions/34978828/uncaught-reflectionexception-class-log-does-not-exist-laravel-5-2)

I am currently trying to clone an existing project of mine from github. After clone I run composer install during the process I receive the following error:Uncaught ReflectionException: Class log does not existI am running Laravel 5.2 on Centos 7. I have seen references to: I have: None of the above have brought me any joy. I also have the same environment set up on another machine with the application working fine. The only difference here is the machine (working) wasn't cloned from git - it was the initial build environment.  The stack trace I am receiving: Any help would be much appreciated. Thanks in advance. 

2016-01-24 17:12:30Z

I am currently trying to clone an existing project of mine from github. After clone I run composer install during the process I receive the following error:Uncaught ReflectionException: Class log does not existI am running Laravel 5.2 on Centos 7. I have seen references to: I have: None of the above have brought me any joy. I also have the same environment set up on another machine with the application working fine. The only difference here is the machine (working) wasn't cloned from git - it was the initial build environment.  The stack trace I am receiving: Any help would be much appreciated. Thanks in advance. Okay, after many hours of digging, the solution for my problem has been found. The reason why I say my problem is because the Exception is very mis-leading. Uncaught ReflectionException: Class log does not existThis exception simply means Laravel tried to log an error but couldn't instantiate Laravel's Log class. This is not due to the Log class going walk-abouts or hiding. This is because Laravel is still going through its boot process & has yet to load the Log class. So, this exception is thrown because an error occurred during the boot cycle of Laravel - when this error occurred it tried to throw an exception - but it can't throw an exception because the Log class is yet the be loaded. Hence the reason we get a ReflectionExceptionThis has occurred in all versions of Laravel the only reason we have seen the exception thrown in laravel 5.1 <= is because previously Laravel silently discarded the problem & carried on through its boot process - basically, your app would still break however you would not receive the Log class exception. In my particular case I didn't have the php-mysql extension installed causing Laravel to break during its boot process. Ultimately, it is incredibly difficult to debug what you may have done wrong due to the error been very mis-leading. I hope this helps someone! In your .env file make sure you have no spaces for valuesfor example this is allowedthis is not allowed you can wrap the value in quotes if you have spaces.really wish they used json for the .env file, maybe we should request that featureThe underlying error is revealed by modifying vendor/laravel/framework/src/Illuminate/Container/Container.php and placing the following at the top:(Credit to https://laracasts.com/discuss/channels/general-discussion/class-log-does-not-exist/replies/160902 for this idea.)To add to the list of root-causes for this message, defining a closure in a configuration file and calling php artisan config:cache subsequently will cause this (at least in Laravel 5.1). Solution for this manifestation: don't define closures in Laravel configuration files, per https://github.com/laravel/framework/issues/9625 .Remove file bootstrap/cache/config.php . This file may not be displayed on windows, if so, use double commander for example. Definitelly will work!EDIT:It may be caused by caching .env file, if it's your case, try to remove 

bootstrap/cache/config.phpI was noticing the same behavior after adding a few lines to my .env files. Spaces are not allowed without quotes, and so this can be fixed like:APP_YOUR_NAME="A value with some spaces"In my case, the missing of PDO extension was the problem. After installing it, the problem was fixed.EDIT::Because I wasn't satisfied with the rather clumsy debugging and reworking paths, etc to get the VM running smoothly, I reflected on the process and reinstalled the vagrant box laravel/homestead (virtualbox 1.0.1)For me the issue potentially stemmed from a missing comma in config/app.php. The missing comma likely halted the compilation process and spit out the Uncaught ReflectionException: Class log does not exist error. This is not a direct answer, but serves more as a guide post to those who venture into this abyss of silent errorsSystem: macOS SierraVagrant: 1.9.1 (Latest Version at time of writing)VM: laravel/homestead (virtualbox 0.4.0)Laravel Version: 5.1.*PHP: 7.0.*After repeated attempts to resolve the issue which include:Critically, (for me) it seemed it was the virtualbox version in the initial set up: vagrant box add laravel/homesteadInstead try supplying the version number like so: vagrant box add laravel/homestead --box-version 0.4.0misc:I have attempted and failed with the following laravel/homestead virtualbox versions: and laravel/homestead-7:I was typing a CMD in the CLI and accidentally typed it in the app config file. I had to follow this procedure in order to find the problem. Solution, how to find problem:https://laracasts.com/discuss/channels/general-discussion/class-log-does-not-exist?page=2Also this is due to a syntax error in some file in the conf/ directory or .env  file.

In my case I got this error because I forget to put ::class at the end of the line when adding a service provider and facade, to the array providers and alises in conf/app.php file. I corrected this and the error disappeared.When composer updating, i think laravel makes some validations.Installing unzip works for me. Good Luck :)This problem is usually caused by spaces between words in the .env file.

Make sure if you have something likeyou replace it withThis Error Comes laravel 5.2 & > versions:My mistakes are:Tips1:

when You missing (;) end of your code in config FileOther syntax Error This error comes.My Error code:Correct code: Missing (;) End of return Array This error may be caused by an error in one of the config files.

To locate which file is causing it, change the function loadConfigurationFiles in /vendor/laravel/framework/src/Illuminate/Foundation/Bootstrap/LoadConfiguration.php to:Run php artisan and the last loading "key" is the config file causing the error.

Correct it and don't forget to remove the your var_dump command...

Good luck.Solved this issue after removing space in the .env file (view .env in sublime because vi editor doesn't show space at end of the .env file.) and run below commands.Commands:I had the same issue and none of the solutions here worked outI've found that there's an exception of permission denied to config folderAfter fixing the permission everything worked!How to figure it?Put a break-point in 

vendor/laravel/framework/src/illluminate/Foundation/Http/Kernel.phpline 101 inside the catch of the handle function.This is how I've found out about the permission denied.In my case, I had used the route() method in a config file. Obviously, this method does not work because these files don't use the Illuminate Helper, they are simple .php with data.The configuration files are read before instantiating the Log class, which causes the error that Jakehallas explains very well.Yes as said by @jakehallas . Its not related to what is showing in exception.Actually if there is any dababase issue or other config varilables issue causes this.Actually when i tried to change something in database.php i just duplicated same file as database-copy.php. I didn't execpt this causes issue.After gone through what i have done before i just removed this database-copy.php file its working fine..Thanks ...I tried a lot of solutions provided here and elsewhere. It did not work for me. I solved it by manually removing /var/www/html/bootstrap/cache/compiled.php and updating the autoload files:This type of error when you missed any of the dependencies of your project. 

 Runphp composer.phar updateRun php artisan config:cache solved it for me.Or if you are on shared hosting without access to the Terminal/CMD, add this to your Routs.php file:Then go to yourdomain.com/config-cache to run this script.Since no one has mentioned orchestra/testbench yet I thought I'd just add the solution to my problem.I was writing a Laravel package when I got this error in one of my unit tests. I was using orchestra/testbench to enable testing of Laravel-specific parts of the code.The problem was simply that the test class was extending PHPUnit\Framework\TestCase instead of Orchestra\Testbench\TestCase.I had some negative value likeI needed to wrapIn my case, a comma is missing in my config file (config/app.php) after I merged my branch to master.it was a syntax error, but didn't display it.

Laravel: How to get last N entries from DB

Jakub Kohout

[Laravel: How to get last N entries from DB](https://stackoverflow.com/questions/24860973/laravel-how-to-get-last-n-entries-from-db)

I have table of dogs in my DB and I want to retrieve N latest added dogs. Only way that I found is something like this:Is there another way how to do it? For example something like this Dogs:latest(5);Thank you very much for any help :)

2014-07-21 08:47:29Z

I have table of dogs in my DB and I want to retrieve N latest added dogs. Only way that I found is something like this:Is there another way how to do it? For example something like this Dogs:latest(5);Thank you very much for any help :)You may try something like this:Use orderBy with Descending order and take the first n numbers of records.My solution for cleanliness is:It's the same as other answers, just with using built-in methods to handle common practices.You may also try like this:It's working fine for me in Laravel 5.6Ive come up with a solution that helps me achieve the same result using the array_slice() method. In my code I did array_slice( PickupResults::where('playerID', $this->getPlayerID())->get()->toArray(), -5 ); with -5 I wanted the last 5 results of the query.

Does PHP time() return a GMT/UTC Timestamp?

Jiew Meng

[Does PHP time() return a GMT/UTC Timestamp?](https://stackoverflow.com/questions/4812170/does-php-time-return-a-gmt-utc-timestamp)

I just want to check if time() returns a UTC/GMT timestamp or do I need to use date_default_timezone_set()?

2011-01-27 02:40:25Z

I just want to check if time() returns a UTC/GMT timestamp or do I need to use date_default_timezone_set()?time returns a UNIX timestamp, which is timezone independent. Since a UNIX timestamp denotes the seconds since 1970 UTC you could say it's UTC, but it really has no timezone.To be really clear, a UNIX timestamp is the same value all over the world at any given time. At the time of writing it's 1296096875 in Tokyo, London and New York. To convert this into a "human readable" time, you need to specify which timezone you want to display it in. 1296096875 in Tokyo is 2011-01-27 11:54:35, in London it's 2011-01-27 02:54:35 and in New York it's 2011-01-26 21:54:35.In effect you're usually dealing with (a  mix of) these concepts when handling times:Visualise time like this:(not to scale)An absolute point on this line can be expressed as:Both formats express the same absolute point in time in different notations. The former is a simple counter which started roughly here:The latter is a much more complicated but equally valid and expressive counter which started roughly here:UNIX timestamps are simple. They're a counter which started at one specific point in time and which keeps increasing by 1 every second (for the official definition of what a second is). Imagine someone in London started a stopwatch at midnight Jan 1st 1970, which is still running. That's more or less what a UNIX timestamp is. Everybody uses the same value of that one stopwatch.Human readable wall clock time is more complicated, and it's even more complicated by the fact that it's abbreviated and parts of it omitted in daily use. 02:54:35 means almost nothing on the timeline pictured above. Jan. 27 2011 02:54:35 is already a lot more specific, but could still mean a variety of different points on this line. "When the clock struck 02:54:35 on Jan. 27 2011 in London, Europe" is now finally an unambiguous absolute point on this line, because there's only one point in time at which this was true.So, timezones are a "modifier" of "wall clock times" which are necessary to express a unique, absolute point in time using a calendar and hour/minute/second notation. Without a timezone a timestamp in such a format is ambiguous, because the clock struck 02:54:35 on Jan. 27 2011 in every country around the globe at different times.A UNIX timestamp inherently does not have this problem.To convert from a UNIX timestamp to a human readable wall clock time, you need to specify which timezone you'd like the time displayed in. To convert from wall clock time to a UNIX timestamp, you need to know which timezone that wall clock time is supposed to be in. You either have to include the timezone every single time with each such conversion, or you set the default timezone to be used with date_default_timezone_set.So in order to get a UTC timestamp you should check what the current timezone is and work off of that or just use:http://us3.php.net/time"Returns the current time measured in the number of seconds since the Unix Epoch (January 1 1970 00:00:00 GMT)."So I believe the answer to your question is yes.From the documentationOne of the comments claimed: "both time() and strtotime(gmdate("M d Y H:i:s", time())) return the same result"Since I wasn't sure about that, I ran a test:Output was:Diff is 18000 seconds = 5 hours = the timezone offset for the server running the test.

Quickly Convert (.rtf|.doc) Files to Markdown Syntax with PHP

Sampson

[Quickly Convert (.rtf|.doc) Files to Markdown Syntax with PHP](https://stackoverflow.com/questions/1043768/quickly-convert-rtf-doc-files-to-markdown-syntax-with-php)

I've been manually converting articles into Markdown syntax for a few days now, and it's getting rather tedious. Some of these are 3 or 4 pages, italics and other emphasized text  throughout. Is there a faster way to convert (.rtf|.doc) files to clean Markdown Syntax that I can take advantage of?

2009-06-25 13:00:33Z

I've been manually converting articles into Markdown syntax for a few days now, and it's getting rather tedious. Some of these are 3 or 4 pages, italics and other emphasized text  throughout. Is there a faster way to convert (.rtf|.doc) files to clean Markdown Syntax that I can take advantage of?If you happen to be on a mac, textutil does a good job of converting doc, docx, and rtf to html, and pandoc does a good job of converting the resulting html to markdown:I have a script that I threw together a while back that tries to use textutil, pdf2html, and pandoc to convert whatever I throw at it to markdown.ProgTips has a possible solution with a Word macro (source download):Source: ProgTipsSource: ProgTipsMacro source for safe keeping if ProgTips deletes the post or the site gets wiped out:Source: ProgTipsIf you're open to using the .docx format, you could use this PHP script that I put together that will extract the XML, run some XSL transformations and output a pretty decent Markdown equivalent:https://github.com/matb33/docx2mdNote that it is meant to work from the command-line, and is rather basic in its interface. However, it will get the job done!If the script doesn't work well enough for you, I encourage you to send me your .docx files so I can reproduce your problem and fix it. Log an issue in GitHub or contact me directly if you prefer.Pandoc is a good command-line conversion tool, but again, you will first need to get the input into a format that Pandoc can read, which is:We had the same problem of having to convert Word documents to markdown. Some were more complicated and (very) large documents, with math equations and images and such. So I made this script which converts using a number of different tools: https://github.com/Versal/word2markdownBecause it uses a chain of several tools it is a bit more error-prone, but it can be a good starting point if you have more complicated documents. Hope it can be helpful! :)Update:

It currently only works on Mac OS X, and you need to have some requirements installed (Word, Pandoc, HTML Tidy, git, node/npm). For it to work properly, you also need to open an empty Word document, and do: File->Save As Webpage->Compatibility->Encoding->UTF-8. Then this encoding is saved as default. See the README for more details on how to set up.Then run this in the console:Then you can find the Markdown in document.md and images in the directory document_files.It's perhaps a bit complicated now, so I would welcome any contributions that make this easier or make this work on other operating systems! :)Have you tried this one? Not sure about feature richness, but it works for simple texts.

http://markitdown.medusis.com/As part of the university ruby course I developed a tool which can convert openoffice word files (.odt) to markdown.

A lot of assumptions has to be made in order to turn it to correct formatting. For example it is hard to determine the size of a text which has to be considered as Heading.

However the only think that you can loose with this conversion is the formatting any text that is met is always appends to the markdown document.

The tool I've developed supports lists, bold and italic text, and it has syntax for tables.http://github.com/bostko/doc2text

Give it a try and please give me your feedback.

Using sessions & session variables in a PHP Login Script

Penian4

[Using sessions & session variables in a PHP Login Script](https://stackoverflow.com/questions/10097887/using-sessions-session-variables-in-a-php-login-script)

I have just finished creating an entire login and register systsem in PHP, but my problem is I haven't used any sessions yet. I'm kind of a newbie in PHP and I've never used sessions before. What I want to do is, after the user registers and fills out the login form, they will still stay on the same page. So, there will be one part of the which will be if the session is logged_in and the other part will be else (the user is not logged in so display the login form). Can anyone tell me how to get started?

2012-04-10 23:24:18Z

I have just finished creating an entire login and register systsem in PHP, but my problem is I haven't used any sessions yet. I'm kind of a newbie in PHP and I've never used sessions before. What I want to do is, after the user registers and fills out the login form, they will still stay on the same page. So, there will be one part of the which will be if the session is logged_in and the other part will be else (the user is not logged in so display the login form). Can anyone tell me how to get started?Hope this helps :)begins the session, you need to say this at the top of a page or before you call session codeput a user id in the session to track who is logged inCheck if someone is logged inFind the logged in user IDSo on your pagehere is the simplest session code using php.

We are using 3 files.login.phphome.phplogout.phpFirstly, the PHP documentation has some excellent information on sessions.Secondly, you will need some way to store the credentials for each user of your website (e.g. a database). It is a good idea not to store passwords as human-readable, unencrypted plain text. When storing passwords, you should use PHP's crypt() hashing function. This means that if any credentials are compromised, the passwords are not readily available.Most log-in systems will hash/crypt the password a user enters then compare the result to the hash in the storage system (e.g. database) for the corresponding username. If the hash of the entered password matches the stored hash, the user has entered the correct password.You can use session variables to store information about the current state of the user - i.e. are they logged in or not, and if they are you can also store their unique user ID or any other information you need readily available.To start a PHP session, you need to call session_start(). Similarly, to destroy a session and its data, you need to call session_destroy() (for example, when the user logs out):I would also recommend that you take a look at this. There's some good, easy to follow information on creating a simple log-in system there.I always do OOP and use this class to maintain the session so u can use the function is_logged_in to check if the user is logged in or not, and if not you do what you wish to.You need to begin the session at the top of a page or before you call session code

How to include only if file exists

Emanuil Rusev

[How to include only if file exists](https://stackoverflow.com/questions/4604965/how-to-include-only-if-file-exists)

I need an include function / statement that will include a file only if it exists. Is there one in PHP?You might suggest using @include but there is an issue with that approach - in case the file to be included exists, PHP will not output warnings if the parser find something wrong in the included file.

2011-01-05 14:11:04Z

I need an include function / statement that will include a file only if it exists. Is there one in PHP?You might suggest using @include but there is an issue with that approach - in case the file to be included exists, PHP will not output warnings if the parser find something wrong in the included file.That should do what you wantTry using file_exists()Based on @Select0r's answer, I ended up usingThis solution works even if you write this code in a file that has been included itself from a file in another directory.How about using file_exists before the include?Check out the stream_resolve_include_path function.I think you have to use file_exists, because if there was such an include, it would have been listed here: http://php.net/manual/en/function.include.phpUsing at in front, ignores any error that that function might generate.

Do not abuse this as IT IS WAY SLOWER than checking with if, but it is the shortest code alternative.the @ suppresses error messages.you cloud use:

How to embed images in html email

amol

[How to embed images in html email](https://stackoverflow.com/questions/1851728/how-to-embed-images-in-html-email)

I'm trying to implement a code to send HTML email with embedded image.I already tried for simple HTML email with image but this image is taken from server.

2009-12-05 09:45:57Z

I'm trying to implement a code to send HTML email with embedded image.I already tried for simple HTML email with image but this image is taken from server.I would strongly recommend using a library like PHPMailer to send emails.

It's easier and handles most of the issues automatically for you.Regarding displaying embedded (inline) images, here's what's on their documentation:To give you a more complete example of how it would work:Regarding your comment, you asked how to send HTML email with embedded images, so I gave you an example of how to do that.

The library I told you about can send emails using a lot of methods other than SMTP.

Take a look at the PHPMailer Example page for other examples.One way or the other, if you don't want to send the email in the ways supported by the library, you can (should) still use the library to build the message, then you send it the way you want.For example:You can replace the line that send the email:With this:Hope that helps.

Let me know if you run into trouble using it.I'm using this function that find all images in my letter and attaches it to the message.Parameters: Takes your HTML (which you want to send);

Return: The necessary HTML and headers, which you can use in mail();Example usage: PHPMailer has the ability to automatically embed images from your HTML email. You have to give full path in the file system, when writing your HTML:It will automaticaly convert to:Based on Arthur Halma's answer, I did the following that works correctly with Apple's, Android & iOS mail.You have to encode your email as multipart mime and then you can attach emails as attachments basically. You reference them by cid in the email.Alternatively you could not attach them to the email and use URLs directly but most mail programs will block this as spammers use the trick to detect the liveness of email addresses.You don't say what language but here is one example.Here is a way to get a string variable without having to worry about the coding.If you have Mozilla Thunderbird, you can use it to fetch the html image code for you.I wrote a little tutorial here, complete with a screenshot (it's for powershell, but that doesn't matter for this):powershell email with html picture showing red xAnd again:How to embed images in email

codeigniter check for user session in every controller

Stephen Curran

[codeigniter check for user session in every controller](https://stackoverflow.com/questions/3678798/codeigniter-check-for-user-session-in-every-controller)

I have this private session in one of my controllers that checks if a user is logged in:Problem is that I have more than one Controller. How can I use this function in those other controllers? Redefining the function in every Controller isn't very 'DRY'.Any ideas?

2010-09-09 17:01:11Z

I have this private session in one of my controllers that checks if a user is logged in:Problem is that I have more than one Controller. How can I use this function in those other controllers? Redefining the function in every Controller isn't very 'DRY'.Any ideas?Another option is to create a base controller.  Place the function in the base controller and then inherit from this.To achieve this in CodeIgniter, create a file called MY_Controller.php in the libraries folder of your application.Then make your controller inherit from this base controller.Put it in a helper and autoload it.helpers/login_helper.php:config/autoload.php:Then in your controller you can call:You can achieve this using helper and CodeIgniter constructor.Get all user's data from session.In the Controller,In the View,   I think using hooks is pretty easy. Just create a hook to check $this->session->user. It will be called in every request.I coded like this according to above answers.. And this is running for me

Create file my_helper.phpEdit in autoload.php fileIn your Controller fileJust add this on your folder core file ci_controller at function __construct() to check all controller ():

Include files from parent or other directory

Darren

[Include files from parent or other directory](https://stackoverflow.com/questions/8826567/include-files-from-parent-or-other-directory)

I'm needing to include a file from the parent directory, and other sub-directories, into a sub-directory. I've done it before by simply using include('/rootdirectory/file.php'); but now it won't seem to work. Just wondering how I can do this, thanks. Here's my exact line:It's giving me this error(the page still runs):

2012-01-11 21:02:24Z

I'm needing to include a file from the parent directory, and other sub-directories, into a sub-directory. I've done it before by simply using include('/rootdirectory/file.php'); but now it won't seem to work. Just wondering how I can do this, thanks. Here's my exact line:It's giving me this error(the page still runs):include() and its relatives take filesystem paths, not web paths relative to the document root. To get the parent directory, use ../If you begin with a /, an absolute system file path will be used:If your server is not resolving the file from the parent directory using include '../somefilein_parent.php'try this (using the parent directory relative to the script):include __DIR__ . "/../somefilein_parent.php";Here's something I wrote with that problem in mind: hope it helps.Depends on where the file you are trying to include from is located.Example:/rootdir/pages/file.php/someotherDir/index.phpIf you wrote the following in index.php:

include('/rootdir/pages/file.php');it would error becuase it would try to get: /someotherDir/rootdir/pages/file.php Which of course doesn't exist...So you would have to use include('../rootdir/pages/file.php');In laymans terms, and practicality, I see this as an old DOS trick/thing. Whoa! What was that? DOS? Never heard of it!".." backs you out of the current sub-directory one time to a higher folder/directory, and .. enter typed twice backs you out too 2 higher parent folders. Keep adding the ".. enter" back to back and you will soon find yourself at the top level of the directory.As for Newbies to understand this better, consider this (in terms of the home PC or "C:\ drive" if you know what that means, rather than the web-servers/host "root directory" ). While your at it, Consider your website existing somewhere on your home PC's hard drive, buried in some folder under the C:\ drive. Lastly, you can think of it as ".." is back one directory  and "/" is forward one directory/folder.Now!

If you are using the command prompt and are within the "myDocuments" folder of your PC you must back out of that folder to get closer to the higher directory "C:\" by typing the "../". 

If you wanted to access a file that is located in the widows directory while you are still in the myDocuments folder you would theoretically type ../windows; in reality of DOS command prompt you would simply type .., but I am setting you up for the web. The / redirects forward to another directory naturally.Using "myDocuments" lets pretend that you created 2 folders within it called "PHP1" and "PHP2", in such we now have the folders:In PHP1 you place a file called index.php. and in PHP2 folder you placed a file called Found.php. it now becomes:Inside the

C:\myDocuments\PHP1\index.php file you would need to edit and type something like:The ../ is positional thus it considers your current file location "C:\myDocuments\PHP1\index.php" and is a directive telling it to back out of PHP1 directory and enter or move forward into PHP2 directory to look for the Found.php file. But does it read it? See my thoughts on trouble shooting below.Now! suppose you have 1 folder PHP1 and a sub-folder PHP2:you would simply reference/codeas PHP2 exist as a sub-directory, below or within PHP1 directory.If the above does not work it may have something to do with access/htaccess or permission to the directory or a typo. To enhance this...getting into trouble shooting...If the "found.php" file has errors/typo's within it, it will crash upon rendering at the error, such could be the reason (require/require_once) that you are experiencing the illusion that it is not changing directories or accessing the file. 

At last thought on the matter, you may need to instantiate your functions or references in order to use the included/require "whatever" by creating a new variable or object such as Remember, just because you are including/requiring something, sometimes means just that, it is included/required to run, but it might need to be recreated to make it active or access it. New will surely re-create an instance of it "if it is readable" and make it available within the current document while preserving the original. However you should reference the newly created variable $newObject in all instances....if its global. To put this in perspective of some web host account; the web host is some whopping over sized hard-drive (like that on your PC) and your domain is nothing more than a folder they have assigned to you. Your folder is called the root. Inside that folder you can do anything you are allowed to do.

your "one of many ways" to move between directories/folders is to use the ../ however many times to back out of your current in reference to folder position you want to find. Any path beginning with a slash will be an absolute path. From the root-folder of the server and not the root-folder of your document root. You can use ../ to go into the parent directory.I took inspiration from frank and I added something like this in my "settings.php" file that is then included in all pages when there is a link:"settings.php"in my header.php to be included in all pages:a href= .... php echo $slash.'index.php'.... seems it works both on local and hosted environment....(NOTE: I am an absolute beginner )the root directory (in PHP) is the directory of the file that is pinged. For example, I go to http://localhost/directory/to/file/index.php, the root directory will be "/dictory/to/file", since it's the one that you've made a web request for.Had same issue earlier solved like this :You may interest in using php's inbuilt function realpath().

and passing a constant DIR for example:

$TargetDirectory = realpath(__DIR__."/../.."); //Will take you 2 folder's backString realpath() :: Returns canonicalized absolute pathname ..

How to manage session for a user logged in from mobile app in PHP?

PHPLover

[How to manage session for a user logged in from mobile app in PHP?](https://stackoverflow.com/questions/28647624/how-to-manage-session-for-a-user-logged-in-from-mobile-app-in-php)

I'm a PHP programmer by profession. So, I don't have any idea about iOS and Android coding.The scenario is there is one website developed using a Social Networking PHP software titled "PHPFox".Now there are two similar mobile apps which exactly replicates the functionality of this website. One mobile app is in iOS and another is in Android.So, I've written a set of RESTful APIs where I'm accepting the request from mobile app, parse the request, pass the request parameters to the function which does the same job for website, get the response from this function, convert it into JSON format and sent it back to mobile app. For iOS and Android app I'm using the same set of REST API files.When user logs in, the REST API for login gets called. Eventually the PHPFox function for authentication gets called, a security token is generated along with some other user data. With every login the different security token is generated by PHPFox. This data is set into the session. Now every time I call any of the functions through any REST API file the security token generated at the time of login is verified and only upon successful verification of token the PHPFox function gets called. This verification process is done internally by PHPFox. So no need to pass the security token explicitly or implicitly to any REST API call.Till now everything works absolutely fine.My doubt starts from here. I don't know whether the session is maintained in iOS/Android app. So, if session on server i.e. PHPFox gets timed out then what will happen to the app? Will it crash? Will the user have to login again? If user kills the app on the device and again comes to the app, does he/she have to do the login process again? There are too many doubts in my mind. I get totally confused with these things. Can someone please put more focus on the issue I'm facing? It would be really great if you could explain in detail. Thanks.

2015-02-21 15:42:19Z

I'm a PHP programmer by profession. So, I don't have any idea about iOS and Android coding.The scenario is there is one website developed using a Social Networking PHP software titled "PHPFox".Now there are two similar mobile apps which exactly replicates the functionality of this website. One mobile app is in iOS and another is in Android.So, I've written a set of RESTful APIs where I'm accepting the request from mobile app, parse the request, pass the request parameters to the function which does the same job for website, get the response from this function, convert it into JSON format and sent it back to mobile app. For iOS and Android app I'm using the same set of REST API files.When user logs in, the REST API for login gets called. Eventually the PHPFox function for authentication gets called, a security token is generated along with some other user data. With every login the different security token is generated by PHPFox. This data is set into the session. Now every time I call any of the functions through any REST API file the security token generated at the time of login is verified and only upon successful verification of token the PHPFox function gets called. This verification process is done internally by PHPFox. So no need to pass the security token explicitly or implicitly to any REST API call.Till now everything works absolutely fine.My doubt starts from here. I don't know whether the session is maintained in iOS/Android app. So, if session on server i.e. PHPFox gets timed out then what will happen to the app? Will it crash? Will the user have to login again? If user kills the app on the device and again comes to the app, does he/she have to do the login process again? There are too many doubts in my mind. I get totally confused with these things. Can someone please put more focus on the issue I'm facing? It would be really great if you could explain in detail. Thanks.REST is sessionless for its nature. You need to generate a token when user logged in. You must save this token on your mobile client.

For every request, you need to attach a valid token in request header and check it at server side.

If token expires, the token stored on a client is not valid. So, you need to login again because of 401 response. If token it's not correct you need to responde 400.

I hope that I'm helpful for you.Unlike web browsers, iOS and android apps cannot maintain sessions. Usually, once a user has logged in (login credentials verified from server), its login credentials are saved on client side. Then the app gets data from server using session less REST api calls. This is how mostly it is done in mobile applications.However, if you want the server session and mobile app go hand in hand (which i don't think is a good idea), the way is 1) When the user logs in, a security token is generated on the server side and saved on both server and client side.2) The mobile app will be able to communicate with the server as long as the security token is valid.3) When the session expires, the security token becomes invalid. Now there must be an understanding between server and client about the response when the session is expired. Now the mobile app must redirect the user to login page again. The user will login again and then communicate with the server. This should happen every time the session is expired.If your are using Oauth 2 for athentication, here is the common setup:Hope this helps.CheersYour server should be completely stateless, and so no session should be stored.. a REST API is effectively just a data abstraction layer with optional security (through token)So you API expose an authentication service, which will respond with an Authorization token to be used on subsequent requests as a header, this token should be a 1to1 relation with each user, and Universally Unique. It should also have an expire time, at which point your server responds with appropriate error response requesting your app to refresh the token, which can be done either via a separate refresh token system, or requesting that the user logs in again to refresh the token.It is the APP which should maintain the state, not the server. The server is merely there for data purposes, and so should not rely on any kind of session based authentication.You should not worry about the session from the mobile development side.in Android we use SharedPrefrence and NSUserDefaults (Flag which maintains the session locally).I dont have any experience working with PHPFox but this is how a mobile frontend should ideally handle the issues:Case 1: Mobile app actively talking to server:Case 2: Mobile app active without any server communication (e.g. incoming phone call, moving between apps etc.):Case 3: User kills the app on device and relaunches it:A session is "something" that lives on the server. It can be an object storing details about the user (for instance session id, username, email address...) or any other data that will be required to process future requests (such as shopping cart details, delivery address...). That "something" is typically an object, which can be stored in memory, in a database or even serialized and saved to the file system (I believe this is the default in PHP). So when you say "I don't know whether the session is maintained in iOS/Android app", I'm afraid that doesn't make sense. Only the server can maintain sessions. Typically, the only thing that the client would know (web browser or mobile app) is the session id (in the form of a token or GUID). That is the only thing the client/app needs to remember and it needs to be sent alongside any request to the server. It could be stored as a cookie and/or sent to the server as a request header. Then the server will read the session id/token from the cookies or header and will retrieve the session details from the place where it stores sessions (file system, memory or database). That is what happens behind the scene when you call session_start(). To read more about session handling and how to create custom session handler (which might be required in your case to get a token from the request headers):

http://php.net/manual/en/function.session-start.php

PHP CLI won't log errors

bcmcfc

[PHP CLI won't log errors](https://stackoverflow.com/questions/6387542/php-cli-wont-log-errors)

PHP currently will not log errors produced from the command line. I have :in /etc/php5/cli/php.iniAm I missing a further setting to get this working?

2011-06-17 14:44:13Z

PHP currently will not log errors produced from the command line. I have :in /etc/php5/cli/php.iniAm I missing a further setting to get this working?Please check that the user account running PHP CLI has write access to /var/log/php_errors.log.Additionally, you can verify that you are using the correct php.ini file like this:This question and answer thread was very helpful to me while setting up PHP CLI logging on an Ubuntu 12.04 environment, so I wanted to post an answer that distills what I learned. In addition to the great info provided by David Chan as well as George Cummins I have created a logrotate.d script to ensure the PHP CLI error log doesn’t grow out of control as well as set this up so multiple users will be able to log errors to the common PHP CLI error log.First, the default behavior of the PHP CLI is to log error messages to standard output; logging to a file is not default behavior. Which usually means logging to the same command line terminal session that is running the PHP CLI command. While the PHP ini file does have accommodations for a specified error_log additional accommodations need to be made to truly make it work.First, I had to create an initial php_errors.log file:Since the server in question is used by web developers working on various projects, I have setup a common group for them called www-users. And in this case, I want the php_errors.log to be readable and writable by www-users I change the ownership of the file like this:And then change the permissions of the file to this:Yes, from a security standpoint having a log file readable and writable by anyone in www-users is not so great. But this is a controlled shared work environment. So I trust the users to respect things like this. And besides, when PHP is run from the CLI, any user who can do that will need write access to the logs anyway to even get a log written.Next, go into /etc/php5/cli/php.ini to adjust the default Ubuntu 12.04 settings to match this new log file:Happily log_errors is enabled by default in Ubuntu 12.04:But to allow logging to a file we need to change the error_log to match the new file like this:Now that should be it, but since I don’t want logs to run out of control I set a logrotate.d for the php_errors.log. Create a file called php-cli in /etc/logrotate.d/ like this:And place the contents of this log rotate daemon script in there:With that done, let’s test the setup using David Chan’s tip above:If that ran correctly, you should just be bounced back to an empty command prompt since PHP CLI errors are no longer being sent to standard output. So check the actual php_errors.log for the test error message like this:And there should be a timestamped error line in there that looks something like this:as a diagnostic you can attempt to force a write to the error log this way.you should now see test 123 in your logThe logging/reporting behaviour of PHP is dependant on error_reporting too.Some PHP frameworks (for example CodeIgniter) execute an error_reporting(E_STRICT) statement or equivalent, when in production mode, which will severely reduce the number/kind of logged errors.If you want to debug something, then you can just put the following statement right before your code:If you can't figure out what why or perhaps don't have user permissions on php.ini, another way to debug a no-information parse error is to wrap your php source in another php source with body something like:in PHP file   in terminaloutput

You messed up!

imagecreatefrompng() Makes a black background instead of transparent?

Emily

[imagecreatefrompng() Makes a black background instead of transparent?](https://stackoverflow.com/questions/2611852/imagecreatefrompng-makes-a-black-background-instead-of-transparent)

I make thumbnails using PHP and GD library but my code turn png transparency into a solid black color, Is there a solution to improve my code?this is my php thumbnail maker code:Thank you

2010-04-10 01:10:30Z

I make thumbnails using PHP and GD library but my code turn png transparency into a solid black color, Is there a solution to improve my code?this is my php thumbnail maker code:Thank youAfter imagecreatetruecolor():if the code of the correct answer don't work try this :The order of operations is important. for .gif images i found that i needed to copy resized image first, then assign the black background as transparent.  for PNGs I found the code below resized images and kept the transparency backgrounds.also, this code worked for me...Sometimes if the .jpg image got small errors inside (you cannot see that), all transparent pixels turn to black color.Try to use: Here is my total test code. It works for mechange rgb to 255, it will give you transparent image, rather then black.Some of the above made the black parts of the image turn white, while some didn't work at all. This, however, worked for me https://github.com/claviska/SimpleImage/issues/28

Does php run faster without warnings?

Spuds

[Does php run faster without warnings?](https://stackoverflow.com/questions/1868874/does-php-run-faster-without-warnings)

Since PHP code will run just fine even if it's riddled with warnings and notices about undefined indexes and non-static methods being called as static, etc, the question is, if I spend the time to remove ALL notices and warnings from my code will it run significantly faster?

2009-12-08 18:21:15Z

Since PHP code will run just fine even if it's riddled with warnings and notices about undefined indexes and non-static methods being called as static, etc, the question is, if I spend the time to remove ALL notices and warnings from my code will it run significantly faster?I bookmarked an article in which the author did some benchmarks about that ; unfortunatly, it's in french... but here it is (maybe you'll understand some parts of it) : Ne faites pas d'erreurAnd here are the numbers, to help people who don't read french :Which means that, yes, PHP code runs faster without notices/warnings/errors, even when those are not displayed nor reported.

Derick Rethans says the same thing in this article : Five reasons why the shut-op operator (@) should be avoided (quoting) : Depends on the amount of warnings, but the error handling in PHP is, even when hiding error messages, relatively expensive.What you'd have to do to estimate the effect is profiling on C level: Install valgrind (assuming you're on Linux) and then runthis generates a file called callgrind.12345 or so, load this file into an app like kcachegrind and look for php_error_docref0 or php_error_cb to see how much time was spent in the error handler.Please mind the cachegrind and valgrind docs when doing that and mind that there are many system-dependant variables involved.EDIT: Oh one more note: I assume that way more time is spent while talking to databases and similar systems. and yet another additional note: fixing notices usually makes the code more robust for future changes so it's a good idea independent from performance.I wouldn't quite call it a "significant" improvement for most cases, but running code that does not generate errors of any sort naturally runs faster than code that has to generate a stack trace every other line.Check out: http://www.noamdesign.com/Web-Design-Blog/15-tips-to-optimizing-your-php-code/ for more information on minor optimizations you can make to your code.In my own experience, I've found that 95% of code optimization usually deals with how you use your database.

How can I ping a server port with PHP?

user1288533

[How can I ping a server port with PHP?](https://stackoverflow.com/questions/9841635/how-can-i-ping-a-server-port-with-php)

I want a PHP script which allows you to ping an IP address and a port number (ip:port). I found a similar script but it works only for websites, not ip:port.I want this for a game server.The idea is that I can type in the IP address and port number, and I get the ping response.

2012-03-23 15:09:57Z

I want a PHP script which allows you to ping an IP address and a port number (ip:port). I found a similar script but it works only for websites, not ip:port.I want this for a game server.The idea is that I can type in the IP address and port number, and I get the ping response.I think the answer to this question pretty much sums up the problem with your question.Also, here's a slightly cleaner version to ping to hosts.

In case the OP really wanted an ICMP-Ping, there are some proposals within the User Contributed Notes to socket_create() [link], which use raw sockets. Be aware that on UNIX like systems root access is required.Update: note that the usec argument has no function on windows. Minimum timeout is 1 second.In any case, this is the code of the top voted ping function:Try this :UPDATE: 

If you pass an hardcoded IP (like in this example and most of the real-case scenarios), this function can be enough. But since some users seem to be very concerned about safety, please remind to never pass user generated inputs to the shell_exec function:

If the IP comes from an untrusted source, at least check it with a filter before using it.Test different ports:You can use exec functionhere an example You don't need any exec or shell_exec hacks to do that, it is possible to do it in PHP. The book 'You want to do WHAT with PHP?' by Kevin Schroeder, show's how.It uses sockets and the pack() function which lets you read and write binary protocols. What you need to do is to create an ICMP packet, which you can do by using the 'CCnnnA*' format to create your packet.socket_create needs to be run as root on a UNIX system with;If you want to send ICMP packets in php you can take a look at this Native-PHP ICMP ping implementation, but I didn't test it.

PHP array_merge with numerical keys

Alex

[PHP array_merge with numerical keys](https://stackoverflow.com/questions/5929642/php-array-merge-with-numerical-keys)

How can make it so array_merge() overwrites two keys with different values but same key index from two arrays?for example, merging:[0] => 'whatever'with[0] => 'whatever', [1] => 'a', [2] => 'b'should produce[0] => 'whatever', [1] => 'a', [2] => 'b'Basically I want array_merge to bahave the same way it behaves if the arrays have string keys...

2011-05-08 19:09:35Z

How can make it so array_merge() overwrites two keys with different values but same key index from two arrays?for example, merging:[0] => 'whatever'with[0] => 'whatever', [1] => 'a', [2] => 'b'should produce[0] => 'whatever', [1] => 'a', [2] => 'b'Basically I want array_merge to bahave the same way it behaves if the arrays have string keys...Use the + operator.Compare array_merge to + operator:Output:The + operator still works if your associative array has the numerical keys out-of-order:Output:Notice array_merge in this case creates a new key.  Not desirable...array_replace does exactly this!Pretty easy to write manually:Update: This behaves differently than the union operator (return $first + $second;) because in this case the second array wins when both have elements with the same key.However, if you switch the places of the arguments and place the array that you want to "win" in case of conflicts as the first operand, you can get the same behavior. So the function above behaves exactly like return $second + $first;.You should use $a2+$a1 to get same result with array_merge($a1,$a2);Code:Output: Code:Output: Code:Output: In my project I use my own functionUsageYou could use array_merge() and then use array_unique().Compare to WRONG use of "+"

How to store NULL values in datetime fields in MySQL?

rhodesjason

[How to store NULL values in datetime fields in MySQL?](https://stackoverflow.com/questions/1691117/how-to-store-null-values-in-datetime-fields-in-mysql)

I have a "bill_date" field that I want to be blank (NULL) until it's been billed, at which point the date will be entered.I see that MySQL does not like NULL values in datetime fields. Do any of you have a simple way to handle this, or am I forced to use the min date as a "NULL equivalent" and then check for that date?Thanks.EDITED TO ADD:Ok I do see that MySQL will accept the NULL value, but it won't accept it as a database update if I'm updating the record using PHP.The variable name is $bill_date but it won't leave the variable as NULL if I update a record without sending a value to $bill_date -- I get this error: I assume I need to actually send the word NULL, or leave it out of the update query altogether, to avoid this error? Am I right? Thanks!!!

2009-11-06 23:01:21Z

I have a "bill_date" field that I want to be blank (NULL) until it's been billed, at which point the date will be entered.I see that MySQL does not like NULL values in datetime fields. Do any of you have a simple way to handle this, or am I forced to use the min date as a "NULL equivalent" and then check for that date?Thanks.EDITED TO ADD:Ok I do see that MySQL will accept the NULL value, but it won't accept it as a database update if I'm updating the record using PHP.The variable name is $bill_date but it won't leave the variable as NULL if I update a record without sending a value to $bill_date -- I get this error: I assume I need to actually send the word NULL, or leave it out of the update query altogether, to avoid this error? Am I right? Thanks!!!MySQL does allow NULL values for datetime fields. I just tested it:I'm using this version:EDIT #1: I see in your edit that the error message you are getting in PHP indicates that you are passing an empty string (i.e. ''), not null. An empty string is different than null and is not a valid datetime value which is why you are getting that error message. You must pass the special sql keyword null if that's what you mean. Also, don't put any quotes around the word null. See my insert statement above for an example of how to insert null.EDIT #2: Are you using PDO? If so, when you bind your null param, make sure to use the [PDO::PARAM_NULL][1] type when binding a null. See the answer to this stackoverflow question on how to properly insert null using PDO.This is a a sensible point.A null date is not a zero date. They may look the same, but they ain't. In mysql, a null date value is null. A zero date value is an empty string ('') and '0000-00-00 00:00:00'On a null date "... where mydate = ''"  will fail.

On an empty/zero date "... where mydate is null" will fail.But now let's get funky. In mysql dates, empty/zero date are strictly the same.by examplewill BOTH output: '0000-00-00 00:00:00'. if you update myDate with '' or '0000-00-00 00:00:00', both selects will still work the same.In php, the mysql null dates type will be respected with the standard mysql connector, and be real nulls ($var === null, is_null($var)). Empty dates will always be represented as '0000-00-00 00:00:00'.I strongly advise to use only null dates, OR only empty dates if you can. (some systems will  use "virual" zero dates which are valid Gregorian dates, like 1970-01-01 (linux) or 0001-01-01 (oracle).empty dates are easier in php/mysql. You don't have the "where field is null" to handle. However, you have to "manually" transform the '0000-00-00 00:00:00' date in '' to display empty fields. (to store or search you don't have special case to handle for zero dates, which is nice).Null dates need better care. you have to be careful when you insert or update to NOT add quotes around null, else a zero date will be inserted instead of null, which causes your standard data havoc. In search forms, you will need to handle cases like "and mydate is not null", and so on.Null dates are usually more work. but they much MUCH MUCH faster than zero dates for queries.I had this problem on windows.This is the solution:To pass '' for NULL you should disable STRICT_MODE (which is enabled by default on Windows installations)BTW It's funny to pass '' for NULL. I don't know why they let this kind of behavior.It depends on how you declare your table.  NULL would not be allowed in:But it would be allowed in:The second is the default, so someone must've actively decided that the column should not be nullable.I just tested in MySQL v5.0.6 and the datetime column accepted null without issue.For what it is worth:  I was experiencing a similar issue trying to update a MySQL table via Perl.  The update would fail when an empty string value (translated from a null value from a read from another platform) was passed to the date column ('dtcol' in the code sample below).  I was finally successful getting the data updated by using an IF statement embedded in my update statement:  I just discovered that MySQL will take null provided the default for the field is null and I write specific if statements and leave off the quotes. This works for update as well.Specifically relating to the error you're getting, you can't do something like this in PHP for a nullable field in MySQL:Because null in PHP will equate to an empty string which is not the same as a NULL value in MysQL. Instead you want to do this: Of course you don't have to use is_null but I figure that it demonstrates the point a little better. Probably safer to use empty() or something like that. And if $col2 happens to be a string which you would enclose in double quotes in the query, don't forget not to include those around the 'NULL' string, otherwise it wont work.Hope that helps!

How to send additional data using PLupload?

eric.itzhak

[How to send additional data using PLupload?](https://stackoverflow.com/questions/9535462/how-to-send-additional-data-using-plupload)

I'm using plupload to make an ajax file uploading.

Now the plupload.Uploader class has many options but none are additional data.For Example :What i'm trying to achive is i have a folder in my server where all the uploads 

are being saved.

I neeed inside the folder to create a sub-folder to each user that have uploaded files there.

How can i add data like id of the user to the instance of plupload.Uploader?

Or if i'll wrap a form inside the container div, will i be able to see it in the $_REQUEST?

Or is there some other way i can achive this?

2012-03-02 15:04:04Z

I'm using plupload to make an ajax file uploading.

Now the plupload.Uploader class has many options but none are additional data.For Example :What i'm trying to achive is i have a folder in my server where all the uploads 

are being saved.

I neeed inside the folder to create a sub-folder to each user that have uploaded files there.

How can i add data like id of the user to the instance of plupload.Uploader?

Or if i'll wrap a form inside the container div, will i be able to see it in the $_REQUEST?

Or is there some other way i can achive this?Have you tried using the setting for multipart_params? Add an additional option to your plupload.Uploader like so:You will then need to process the values in the file that handles the upload (upload.php by default). I think the values are captured by $_POST but you can use $_REQUEST just to be sure.I've used jQuery to assign values on the fly, so instead of "name1" : "value1" you can use something like "name1" : $("#name1").val(), where #name1 might be an input elsewhere on the page.Plupload's documentation is a little sparse for some of these settings.You can use uploader.settings.multipart_params["name1"] = yourValue; but "name1" must be declared in uploader config :  If you need to dynamically add parameters on every file upload you can do this:You can also useand just pass it as a get variable.

Search for PHP array element containing string

UserIsCorrupt

[Search for PHP array element containing string](https://stackoverflow.com/questions/12315536/search-for-php-array-element-containing-string)

How can I do a loose search for the word "Last" in the above array?The code above will only echo the value's key if the needle matches everything in the value exactly, which is what I don't want. I want something like this:And I want the value's key to echo if the value contains the word "Last".

2012-09-07 09:37:25Z

How can I do a loose search for the word "Last" in the above array?The code above will only echo the value's key if the needle matches everything in the value exactly, which is what I don't want. I want something like this:And I want the value's key to echo if the value contains the word "Last".To find values that match your search criteria, you can use array_filter function:Now $matches array will contain only elements from your original array that contain word last (case-insensitive).If you need to find keys of the values that match the criteria, then you need to loop over the array:Now array $matches contains key-value pairs from the original array where values contain (case- insensitive) word last.This will give you all the keys whose value contain the needle.It finds an element's key with first match:And if you need all keys use foreach:I was also looking for a solution to OP's problem and I stumbled upon this question via Google. However, none of these answers did it for me so I came up with something a little different that works well.This will only work with PHP 5.6.0 and above.I do not like regex because as far as I know they are always slower than a normal string function. So my solution is:function substr_in_array($needle, array $haystack)

{

    foreach($haystack as $value)

    {

        if(strpos($value, $needle) !== FALSE) return TRUE;

    }

    return FALSE;

}The answer that Aleks G has given is not accurate enough.The lineshould be replaced by these onesOr more simplyIn agreement with http://php.net/manual/en/function.preg-match.php

PHP compare time

DiegoP.

[PHP compare time](https://stackoverflow.com/questions/6158726/php-compare-time)

How to compare times in PHP?I want to say this:The above code does not print ok.  I expected it to.

2011-05-27 23:56:35Z

How to compare times in PHP?I want to say this:The above code does not print ok.  I expected it to.A solution using DateTime (that also regards the timezone).http://php.net/datetime.diffTo see of the curent time is greater or equal to 14:08:10 do this:Depending on your input sources, make sure to account for timezone.See PHP time()

and PHP strtotime()Simple way to compare time is :

How do you increment an assigned variable in smarty without displaying it

Francis Lewis

[How do you increment an assigned variable in smarty without displaying it](https://stackoverflow.com/questions/8674831/how-do-you-increment-an-assigned-variable-in-smarty-without-displaying-it)

So I have an assigned variable in smarty:Now I can increment it usingorWhich is exactly what I need, only problem is, it displays the value of $number on the page.

Is there a way I can increment the value but not display it?This is not used inside of a loop otherwise I would use something like iteration or index.

2011-12-29 23:48:42Z

So I have an assigned variable in smarty:Now I can increment it usingorWhich is exactly what I need, only problem is, it displays the value of $number on the page.

Is there a way I can increment the value but not display it?This is not used inside of a loop otherwise I would use something like iteration or index.You could do this:The above will be compiled to:orWhich in turn will be compiled as:another approach would be to write a small plugin:The function would then be called like this, notice that step is optional and if not given the variable will be incremented by one:Reference

Smarty {assign}

Smarty {capture}

Extending Smarty With PluginsIt's cleaner just to do it like this...Better to use the built in Smarty "counter" >> {counter} element.So, in template you can use: It will print for you: So, at least, you can use it with the print=false option, and you have the counter but it's hidden. If you use it the "variable way" (like the upper section write) you also can hide it with html/css or just simply don't let it print  :) If I had to do this I would do something like the following: {php}$number++{/php} but it is very ugly to have to use php in a smarty template. This might suggest that there is a better way of doing what you planned to do.

PHP FPM - check if running

Marty Wallace

[PHP FPM - check if running](https://stackoverflow.com/questions/14915147/php-fpm-check-if-running)

The documentation on php fpm website says that php fpm is part for coe php as of 5.3.3I am running 5.3.10, how can i check that it is working correctly?  I thought it was a service that ran on a port?

2013-02-16 21:10:33Z

The documentation on php fpm website says that php fpm is part for coe php as of 5.3.3I am running 5.3.10, how can i check that it is working correctly?  I thought it was a service that ran on a port?Assuming you are on Linux, check if php-fpm is running by searching through the process list:If running over IP (as opposed to over Unix socket) then you can also check for the port:Or using nmap:Lastly, I've read that you can request the status, but in my experience this has proven unreliable:For php7.0-fpm I call:Now watch for the good part. The process name is actually php-fpm7.0Here is how you can do it with a socket on php-fpm 7    You can also check if the service is running like this.It will returnActive: active (running) since Sun 2017-04-09 12:48:09 PDT; 48s agoin case it helps someone, on amilinux, with php5.6 and php-fpm installed, it's:sudo /etc/init.d/php-fpm-5.6 statusPHP-FPM is a service that spawns new PHP processes when needed, usually through a fast-cgi module like nginx.  You can tell (with a margin of error) by just checking the init.d script e.g. "sudo /etc/init.d/php-fpm status"What port or unix file socket is being used is up to the configuration, but often is just TCP port 9000.  i.e. 127.0.0.1:9000The best way to tell if it is running correctly is to have nginx running, and setup a virtual host that will fast-cgi pass to PHP-FPM, and just check it with wget or a browser.

Select from where field not equal to Mysql Php

Belgin Fish

[Select from where field not equal to Mysql Php](https://stackoverflow.com/questions/3286644/select-from-where-field-not-equal-to-mysql-php)

I'm just wondering what kind of mysql command i could execute in php that would select all items from a certain table where columna is not equal to x and columnb is not equal to xSomething like: select something from table where columna does not equal x and columnb does not equal xAny ideas?

2010-07-20 02:47:55Z

I'm just wondering what kind of mysql command i could execute in php that would select all items from a certain table where columna is not equal to x and columnb is not equal to xSomething like: select something from table where columna does not equal x and columnb does not equal xAny ideas?The key is the sql query, which you will set up as a string:Note that there are a lot of ways to specify NOT. Another one that works just as well is:Here is a full example of how to use it:You can do whatever you would like within the above while loop. Access each field of the table as an element of the $row array which means that $row['field1'] will give you the value for field1 on the current row, and $row['field2'] will give you the value for field2.Note that if the column(s) could have NULL values, those will not be found using either of the above syntaxes. You will need to add clauses to include NULL values:You can use likeOrOrAnd like Jeffly Bake's query, for including null values, you don't have to write likeYou can make it simple by<=> is the Null Safe equal to Operator, which includes results from even null values.Or can also insert the statement inside bracket.//this work in case insensitive mannerI'd suggest using the diamond operator (<>) in favor of != as the first one is valid SQL and the second one is a MySQL addition.You can use also                                            

PHP-MySQL-How to safely increment MySQL integer field?

John

[PHP-MySQL-How to safely increment MySQL integer field?](https://stackoverflow.com/questions/2033537/php-mysql-how-to-safely-increment-mysql-integer-field)

I want to increment a field value safely using php and mysql.

2010-01-09 13:50:27Z

I want to increment a field value safely using php and mysql.By what type of "table" I assume you mean storage engine.  Anything that supports mutations (i.e. not "archive" or "black hole")Any numeric field will do (tinyint, int, float, etc).  That said, there's no special PHP code, just the SQL for incrementing the desired field:If you want a transaction, then pack the above query into a transaction.  As for MySQL version, I agree with @hsz - use the most current version possible.If you are talking about primary key then set id column as primary and auto_increment.Increasing field is looking like that:About MySQL version - use the newest you can. ;)

> 5.0 will be fine.1.what type of table/field must I use?--> The type of table depends on what you have planned for your application. It could be Innodb or Myisam. I suggest you to use numeric column so that you can increment/decrement them. Do NOT make it UNSIGNED if you plan to allow negative numbers. Here's the limits that you might find useful in declaring your column length:2.is there a minimum version of MySQL I must use?--> Just to use auto-increment? You are well off using an up to date version. I suggest something > 5.2.4, if it's possible.3.what's the sql code for this, safe transaction for MySQL?--> Sorry, don't have an answer for this at the moment.

PDO PHP Fetch Class

Aditya Shukla

[PDO PHP Fetch Class](https://stackoverflow.com/questions/5137051/pdo-php-fetch-class)

I am learning pdo in php , so as to make database access easier and more efficient .One explanation i have read for fetch _class is that  The properties of your object are set BEFORE the constructor is called.What does this mean? Any direction is greatly appreciated.

2011-02-28 00:15:41Z

I am learning pdo in php , so as to make database access easier and more efficient .One explanation i have read for fetch _class is that  The properties of your object are set BEFORE the constructor is called.What does this mean? Any direction is greatly appreciated.This means that when using PDO to return a result into a custom object, you are required to set out the member variables which correspond to the query result keys.such as:This way PDO can set the variables to the object outside of its internal scope.if you user class was like so:then PDO Would not be able to set the values from outside the scope, as there are no properties defined.Say you have this snippit of codeThe bar propery for $obj will be set to "1" not what is retreived from the database.If you would like it to be set to the result from the database instead of "1" you can change the fetch mode toThis causes the constructor to be called before assigning the results to the propertiesLooking back at PDO::FETCH_CLASS, you don't really need to define the variables as public nor private (as of PHP 7.0 ) , you could define an empty class and PHP PDO will populate the attributes as $Class->attribute even if they are not defined.this is very useful because you can reuse classes with multiple queries that treat the same table but might return different columnsInstead of using: FetchAll(PDO::FETCH_CLASS, 'classname')

You can use: fetchObject('classname')Example:The parent Constructor just sets its 3 properties like: $this->id = $id;

Reasons to NOT use a PHP Framework? [closed]

romaninsh

[Reasons to NOT use a PHP Framework? [closed]](https://stackoverflow.com/questions/5925356/reasons-to-not-use-a-php-framework)

I have always developed web software using a framework (Agile Toolkit) and it was helpful to me in all situations, but one question always concerned me:In which circumstances it's NOT advisable to use a framework? So a question to other veteran framework developers - when would you code in a raw good PHP instead of your framework of choice?

2011-05-08 03:10:23Z

I have always developed web software using a framework (Agile Toolkit) and it was helpful to me in all situations, but one question always concerned me:In which circumstances it's NOT advisable to use a framework? So a question to other veteran framework developers - when would you code in a raw good PHP instead of your framework of choice?There are many reasons that people will suggest not to use a framework.There is also a very good article here that goes into other details.  The author of this article starts out by talking about how he always was such a big proponent of frameworks.http://jpst.it/jiYXI am always going to push towards making my own frameworks unless I start doing some freelance work.  I am constantly updating my framework and learning more and more.  You will never hear anybody say definitely use or definitely do not use a framework because it all depends on the use.Edit:  There is also a question over at the Programmers site on this:  https://softwareengineering.stackexchange.com/questions/49488/when-not-to-use-a-frameworkEdit #2:  One last article about why frameworks are not necessary:  http://www.amberweinberg.com/you-dont-need-a-framework-if-you-have-a-good-developer/Why use a framework with PHP?Why do I need to use a popular framework?PHP framework (cake/smarty): How to use it and when?

Does a PHP exception stop execution?

Not Joe Bloggs

[Does a PHP exception stop execution?](https://stackoverflow.com/questions/2302153/does-a-php-exception-stop-execution)

In the above code example, does do_some_database_stuff ever get called if check_for_safe_input fails, or does the exception stop the function running? It's something I've never quite been sure of, and usually I just stick functions like do_some_database_stuff in an else statement to be sure, but this tends to lead to hugely nested functions.

2010-02-20 12:24:36Z

In the above code example, does do_some_database_stuff ever get called if check_for_safe_input fails, or does the exception stop the function running? It's something I've never quite been sure of, and usually I just stick functions like do_some_database_stuff in an else statement to be sure, but this tends to lead to hugely nested functions.Yes, uncaught exceptions result in fatal errors that stop the execution of the script. So the do_some_database_stuff function will not be called if an exception is thrown.  You can read more about exceptions in this article.Have a look at the PHP manual on exceptions.http://ch.php.net/exceptionsSo yes, the rest of the function is not being executed, a fata error occurs instead.

If you catch the exception, execution of the script continues in the corresponding catch block, everything "between" the function which throws an exception and the catch block is not executed.An exception, if not catched, will end script execution.See the PHP manual chapter on Exceptions

Why am I getting mime-type of .csv file as「application/octet-stream」?

Mohammad Saberi

[Why am I getting mime-type of .csv file as「application/octet-stream」?](https://stackoverflow.com/questions/12061030/why-am-i-getting-mime-type-of-csv-file-as-application-octet-stream)

I'm working on a PHP application that must import an excel file into MySQL. So I need to convert the excel file to .csv format. But when I want to get its type using $_FILE['something']['type'] , I get application/octet-stream as its mime-type;

I think there is something wrong here. Because I gathered the list below as a .csv file mime-type:  What's the matter ?

2012-08-21 18:39:13Z

I'm working on a PHP application that must import an excel file into MySQL. So I need to convert the excel file to .csv format. But when I want to get its type using $_FILE['something']['type'] , I get application/octet-stream as its mime-type;

I think there is something wrong here. Because I gathered the list below as a .csv file mime-type:  What's the matter ?In times like these, the official HTTP specification is always helpful. From RFC 2616 7.2.1 (my emphasis added):The cause of your issue is that the server accepting the file upload does not itself know what type of file has been uploaded. Why? Because it relies on the the HTTP message which sent the file to specify a Content-Type header to determine the exact mime-type. The browser has likely not sent a Content-Type header and the server has assumed application/octet-stream as per the official HTTP specification excerpt above. It's also possible that the client uploading the file opted not to determine the mime type of the file it was uploading and sent the Content-Type: application/octet-stream header itself.Now, when we consider this in conjunction with the PHP manual entry regarding POST file uploadsdocs, we see the following:So as you can see, even if $_FILES['userfile']['type'] is specified, it only corresponds to the Content-Type header sent by the client. This information can easily be faked and should not be relied upon. If you need to be sure that the uploaded file is of a specific type, you'll have to verify that yourself.application/octet-stream is always used if the mime type is not known.All of the mime-types you listed show up as common mime-types for csv files on http://filext.com/file-extension/CSVSo basically I'd say it comes down to which program generated the .csv file and which mime-type they decided to use.$_FILE['something']['type'] is populated by the browser / user OS, so it is not reliable. You should make your own check at server side to determine if uploaded file was in desired format. 

What does the「[^][]」regex mean?

Emanuil Rusev

[What does the「[^][]」regex mean?](https://stackoverflow.com/questions/17845014/what-does-the-regex-mean)

I found it in the following regex:It matches square brackets (with their content) together with nested square brackets.

2013-07-24 21:19:59Z

I found it in the following regex:It matches square brackets (with their content) together with nested square brackets.[^][] is a character class that means all characters except [ and ].You can avoid escaping [ and ] special characters since it is not ambiguous for the PCRE, the regex engine used in preg_ functions.Since [^] is incorrect in PCRE, the only way for the regex to parse is that ] is inside the character class which will be closed later. The same with the [ that follows. It can not reopen a character class (except a POSIX character class [:alnum:]) inside a character class. Then the last ] is clear; it is the end of the character class. However, a [ outside a character class must be escaped since it is parsed as the beginning of a character class.In the same way, you can write []] or [[] or [^[] without escaping the [ or ] in the character class.Note: since PHP 7.3, you can use the inline xx modifier that allows blank characters to be ignored even inside character classes. This way you can write these classes in a less ambigous way like that: (?xx) [^ ][ ]     [ ] ]      [ [ ]      [^ [ ]. You can use this syntax with several regex flavour: PCRE (PHP, R), Perl, Python, Java, .NET, GO, awk, Tcl (if you delimit your pattern with curly brackets, thanks Donal Fellows), ...But not with: Ruby, JavaScript (except for IE < 9), ...As m.buettner noted, [^]] is not ambiguous because ] is the first character, [^a]] is seen as all that is not a a followed by a ]. To have a and ], you must write: [^a\]] or [^]a]In particular case of JavaScript, the specification allow [] as a regex token that never matches (in other words, [] will always fail) and [^] as a regex that matches any character. Then [^]] is seen as any character followed by a ]. The actual implementation varies, but modern browser generally sticks to the definition in the specification.Pattern details:In your pattern example, you don't need to escape the last ]But you can do the same with this pattern a little bit optimized, and more useful cause reusable as subpattern (with the (?-1)): (\[(?:[^][]+|(?-1))*+])or better: (\[[^][]*(?:(?-1)[^][]*)*+]) that avoids the cost of an alternation.

Why is the last number (1) printed?

kcsoft

[Why is the last number (1) printed?](https://stackoverflow.com/questions/18646003/why-is-the-last-number-1-printed)

The code:The output:Created a fiddleOne more: if you set $start = 1 and $stop = 2 it works fine.  Using: php 5.3.27Why is the 1 printed?

2013-09-05 21:09:13Z

The code:The output:Created a fiddleOne more: if you set $start = 1 and $stop = 2 it works fine.  Using: php 5.3.27Why is the 1 printed?Because not only float math is flawed, sometimes its representation is flawed too - and that's the case here. You don't actually get 0.1, 0.2, ... - and that's quite easy to check:The only difference here, as you see, is that echo replaced with number_format call. But the results are drastically different:See? Only one time it was 0.5 actually - because that number can be stored in a float container. All the others were only approximations.How to solve this? Well, one radical approach is using not floats, but integers in similar situations. It's easy to notice that have you done it this way...... it would work ok:Alternatively, you can use number_format to convert the float into some string, then compare this string with preformatted float. Like this:The problem is that the number in the variable $i is not 1 (when printed).  Its actual just less than 1.  So in the test ($i < $stop) is true, the number is converted to decimal (causing rounding to 1), and displayed.Now why is $i not 1 exactly?  It is because you got there by saying 10 * 0.1, and 0.1 cannot be represented perfectly in binary.  Only numbers which can be expressed as a sum of a finite number of powers of 2 can be perfectly represented.Why then is $stop exactly 1?  Because it isn't in floating point format.  In other words, it is exact from the start -- it isn't calculated within the system used floating point 10 * 0.1.Mathematically, we can write this as follows:

    A 64 bit binary float can only hold the first 27 non-zero terms of the sum which approximates 0.1.  The other 26 bits of the significand remain zero to indicate zero terms.  The reason 0.1 isn't physically representable is that the required sequence of terms is infinite.  On the other hand, numbers like 1 require only a small finite number of terms and are representable.  We'd like that to be the case for all numbers.  This is why decimal floating point is such an important innovation (not widely available yet).  It can represent any number that we can write down, and do so perfectly.  Of course, the number of available digits remains finite.Returning to the given problem, since 0.1 is the increment for the loop variable and isn't actually representable, the value 1.0 (although representable) is never precisely reached in the loop.If your step will always be a factor of 10, you can accomplish this quickly with the following:

mysql_real_escape_string VS addslashes

chicane007

[mysql_real_escape_string VS addslashes](https://stackoverflow.com/questions/3473047/mysql-real-escape-string-vs-addslashes)

Can someone shed some light on the differences between these 2 functions, from the PHP manual addslashes:

Returns a string with backslashes before characters that need to be quoted in database queries etc. These characters are single quote ('), double quote ("), backslash () and NUL (the NULL byte). mysql_real_escape_string:

mysql_real_escape_string() calls MySQL's library function mysql_real_escape_string, which prepends backslashes to the following characters: \x00, \n, \r, \, ', " and \x1a. from what i gather the major difference is \x00, \n \r \x1a which addslashes doesnt escape, can you tell me what the significance of that is? thanks

2010-08-13 00:26:56Z

Can someone shed some light on the differences between these 2 functions, from the PHP manual addslashes:

Returns a string with backslashes before characters that need to be quoted in database queries etc. These characters are single quote ('), double quote ("), backslash () and NUL (the NULL byte). mysql_real_escape_string:

mysql_real_escape_string() calls MySQL's library function mysql_real_escape_string, which prepends backslashes to the following characters: \x00, \n, \r, \, ', " and \x1a. from what i gather the major difference is \x00, \n \r \x1a which addslashes doesnt escape, can you tell me what the significance of that is? thanksWhat you quote is probably from the doc, but as far as I know it's not necessarily true.addslashes adds slashes to characters that are commonly disturbing. mysql_real_escape_string escapes whatever MySQL needs to be escaped. This may be more or less characters than what addslashes takes care of.Also, mysql_real_escape_string will not necessarily add slashes to escape. While I think it works if you do it that way, recent versions of MySQL escape quotes by putting two of them together instead of by putting a slash before it.I believe you should always use your data provider's escape function instead of addslashes, because addslashes may either do too much or not enough work for the purpose you use it. On the other hand, mysql_real_escape_string knows what to do to prepare a string for embedding it in a query. Even if the specs change about how to escape stuff and suddenly it's not backslashes that you should use anymore, your code will still work because mysql_real_escape_string will be aware of it.mysql_real_escape_string() also takes into account the character set used by the current connection to the database.The PHP function mysql_real_escape_string() uses the MySQL C API function of the same name: http://dev.mysql.com/doc/refman/5.1/en/mysql-real-escape-string.htmlAlso read addslashes() Versus mysql_real_escape_string() by noted PHP security expert Chris Shiflett, for a demonstration that you can get SQL injection exploits even if you use addslashes().Other folks recommend using query parameters, and then you don't have to do any escaping of dynamic values.  I recommend this too, but in PHP you'd have to switch to PDO or ext/mysqli, because the plain ext/mysql API doesn't support query parameters.Also there may be some corner cases where you can't use query parameters for a dynamic string value, like your search pattern in a fulltext search.There was a bunch of history with mysql_escape_string and mysql_real_escape_string. They were both attempts at providing a "general" escaping mechanism that would minimize the probability of sql injection attacks.mysql_real_escape_string and addslashes are ok, if they're what you really need --  but they probably aren't.As @afrazier says, you should use prepared statements Instead of prepare quer"ies using PDO you can use this while your application uses MySQLi (beware! "i" at and of Mysql")Ignore both and just use parameterized queries. Unless, of course, you like injection attacks. 

Is this a secure method to insert form data into a MySQL database? [duplicate]

Miles Pfefferle

[Is this a secure method to insert form data into a MySQL database? [duplicate]](https://stackoverflow.com/questions/9624292/is-this-a-secure-method-to-insert-form-data-into-a-mysql-database)

This is the example on w3schools.org:I've read through other questions on here, but I couldn't find a direct answer, as most were much more complicated.I looked at How can I prevent SQL injection in PHP?, but I'm a bit confused on how to modify this:Assuming I used the HTML form above and wanted to insert the data from field 'firstname' into the database, should it look like this? Or am I supposed to modify column?:

2012-03-08 20:20:12Z

This is the example on w3schools.org:I've read through other questions on here, but I couldn't find a direct answer, as most were much more complicated.I looked at How can I prevent SQL injection in PHP?, but I'm a bit confused on how to modify this:Assuming I used the HTML form above and wanted to insert the data from field 'firstname' into the database, should it look like this? Or am I supposed to modify column?:The example you provided inserts the post vars into the database without first analyzing them for evil user input. Use type casting, escaping/filter functions, prepared statements etc. before using them to interact with your DB.A general rule to go by is to never trust user input. EVER!Check out: Best way to stop SQL Injection in PHPIn response to your question, here is how you'd handle the entire form using PDO prepared statements.If you just want to insert one column in the record like you asked, the syntax would be:That is HIGHLY vulnerable to sql injection attacks.Instead of using mysql_real_escape_string, I suggest using prepared statements.Use mysql_real_escape_string.This is considered a very secure way to insert stuff into a database. Use the returned $sql to as your query!

Can someone explain to me the pack() function in PHP?

Tower

[Can someone explain to me the pack() function in PHP?](https://stackoverflow.com/questions/987854/can-someone-explain-to-me-the-pack-function-in-php)

I would like to know more about the pack() function in PHP: https://secure.php.net/manual/en/function.pack.phpI know it packs data into binary, but I'm not sure what all those v V n N c C mean and I was wondering if someone could be so kind as to give me a practical demonstration when to use which formats?The online documentation, for a change, lacks of information, in my opinion.

2009-06-12 17:11:02Z

I would like to know more about the pack() function in PHP: https://secure.php.net/manual/en/function.pack.phpI know it packs data into binary, but I'm not sure what all those v V n N c C mean and I was wondering if someone could be so kind as to give me a practical demonstration when to use which formats?The online documentation, for a change, lacks of information, in my opinion.Those represent how you want the data you are packing to be represented in binary format:so $bin = pack("v", 1);  =>  0000000000000001   (16bit)where $bin = pack("V", 1)   => 00000000000000000000000000000001   (32 bit)It tells pack how you want the data represented in the binary data.

The code below will demonstrate this.  Note that you can unpack with a different

format from what you packed the data as.  As noted in the php documentation for pack, the function is borrowed from Perl's pack function.  Take a look at Perl's documentation for pack, specifically the examples section at the very bottom of the page.  PHP's pack does not implement all the formats, but Perl's documentation for the function does a better job of providing examples and explaining each format.

How do you get PHP, Symlinks and __FILE__ to work together nicely?

Aaron Harun

[How do you get PHP, Symlinks and __FILE__ to work together nicely?](https://stackoverflow.com/questions/3221771/how-do-you-get-php-symlinks-and-file-to-work-together-nicely)

On localhost. I have the following directory structure:/share/www/trunk/wp-content/plugins/otherfolders/share/www/portfolio/wp-content/symlinkWhere symlink is a symbolic link to /trunk/.../plugins/. Basically, this is because I need to test multiple WordPress installs and set them up, but I don't want to have to move plugins around and copy and paste them everywhere.However, sometimes I need to crawl up the directory tree to include a config file:The folder always resolves to: /share/www/trunkEven when the plugin is being executed and included in/share/www/portfolio/.Is it possible in PHP to include files in the share/www/portfolio directory from a script executing in a symlink to the /share/www/trunk/.../plugins directory?While this problem only happens on my test server, I'd like to have a safely distributable solution so crawling up an extra level is not an option.

2010-07-11 03:42:49Z

On localhost. I have the following directory structure:/share/www/trunk/wp-content/plugins/otherfolders/share/www/portfolio/wp-content/symlinkWhere symlink is a symbolic link to /trunk/.../plugins/. Basically, this is because I need to test multiple WordPress installs and set them up, but I don't want to have to move plugins around and copy and paste them everywhere.However, sometimes I need to crawl up the directory tree to include a config file:The folder always resolves to: /share/www/trunkEven when the plugin is being executed and included in/share/www/portfolio/.Is it possible in PHP to include files in the share/www/portfolio directory from a script executing in a symlink to the /share/www/trunk/.../plugins directory?While this problem only happens on my test server, I'd like to have a safely distributable solution so crawling up an extra level is not an option.The problem that I see with your code is that __FILE__ resolves symlinks automatically.From the PHP Manual on Magic ConstantsYou can try using $_SERVER["SCRIPT_FILENAME"] instead.Note that I added the realpath() function to the root directory.  Depending on your setup, you may or may not need it.EDIT: Use $_SERVER["SCRIPT_FILENAME"] instead of $_SERVER["PHP_SELF"] for the file system path.You can use this code snippet to get a path where symlinks are not resolved.

If you don't have bash available, there's probably a different command you can use, but it works on linux enviroments.I do think it's a malpractice that php resolves symlinks in FILE, since there's no way to get the path with symlinks. Otherwise we could easily get it using realpath. Oh well.In some case its possible to change working dir and use getenv('PWD'):And change working directory before run this code:Here is the solution to that issue: https://github.com/logical-and/symlink-detectiveor you can try thatThe PHP interpreter resolves symlinks before it processes them. You can do this yourself with the readlink function. PHP resolves the links because it's more efficient for *_once functions and code caches like APC, Xcache etc.What you propably need is another way to find where a particular installation stores it's files. I'd recommend using {$_SERVER['DOCUMENT_ROOT']}/wp-content/wp-load.php assuming /share/www/portfolio is the document root.If I were trying to solve this, I'd split __FILE__ along the path bits and create a SplFileInfo for each along the way, test with isDir and isLink, then try to determine how to handle reconstruction of the path once it's known to be different than expected so you can pull from the right directory.  (If you're more of a procedural type, there's is_dir and is_link.)That being said, I think you've already disqualified this solution.  Maybe the tools are smart enough to do it for you.  Try comparing the result of getRealPath to getPath?  getRealPath expressly says that it resolves symlinks, while getPath doesn't expressly say that.  Even then, this sniffing might not be safe on client sites, depending on who the host is.  I've seen some pretty creative shared hosting filesystem setups.  You could add a check to php_uname and pull out the hostname of the machine, and if it isn't your dev box, don't do the extra work.

Laravel RESTful API versioning design

Sam Wong

[Laravel RESTful API versioning design](https://stackoverflow.com/questions/30239823/laravel-restful-api-versioning-design)

I am new to Laravel (4 and 5) and recently I am working on a RESTful API.

In order to allow  multiple version of the API, I am using URL to determine the version. I read follow this post and it seem most people following this approach:

How to organize different versioned REST API controllers in Laravel 4?Folders structures:And in UserController.php files I set the namespace accordingly:orand in routes:URL will be simple http://..../api/v1 for version 1 and http://..../api/v2 for version. This is straight forward.My questions is:

What if I am building minor upgrade of api, say v1.1 , how do I organize my folder structure? 

My thought was  this and it should be still fine as dot is valid name of folders? Also, how should I write the namespace? This is no namespace like this Is there naming convention I can refer to for using "dot" ?Note: I do not want to call it as version v2 because this is not a major upgrade.

2015-05-14 14:23:09Z

I am new to Laravel (4 and 5) and recently I am working on a RESTful API.

In order to allow  multiple version of the API, I am using URL to determine the version. I read follow this post and it seem most people following this approach:

How to organize different versioned REST API controllers in Laravel 4?Folders structures:And in UserController.php files I set the namespace accordingly:orand in routes:URL will be simple http://..../api/v1 for version 1 and http://..../api/v2 for version. This is straight forward.My questions is:

What if I am building minor upgrade of api, say v1.1 , how do I organize my folder structure? 

My thought was  this and it should be still fine as dot is valid name of folders? Also, how should I write the namespace? This is no namespace like this Is there naming convention I can refer to for using "dot" ?Note: I do not want to call it as version v2 because this is not a major upgrade.IMO, minor upgrades should not publish breaking changes to an API. So my suggestion is to stick to integer versioned APIs. Enhancements are no problems, but existing endpoints should behave as usual. This way your API-Versions would be in sync with the route-prefixes and the namespaces as well as the tests.EXAMPLEBe aware that you can of course keep track of the minor versions internally (e.g in SCM), but there should be no need for developers to change all of their API-Calls just to benefit from that little bugfix you published. Anyways, it is nice of course if you notify your clients of the newer minor versions and the bugfixes or enhancements they offer (blog, newsletter, ..)Let me add, that i am not aware of any RESTful APIs with minor API-URL-prefixes, so i guess this is quite a common practice.You can not use dots, use underscores instead.But...A well-designed api must have BC between minor versions, so you do not need to create new version for minor update, instead you need to write compatible code.

PHP & Case Sensitivity [duplicate]

Manngo

[PHP & Case Sensitivity [duplicate]](https://stackoverflow.com/questions/33273941/php-case-sensitivity)

In PHP, variable and constant names are case sensitive, while function names are not.As far as I am aware, PHP is the only language in which this happens. All other languages I have used are either totally case sensitive or totally case insensitive.Why is PHP partially case senstive?Please note, that I am not asking which names are case sensitive, but why.UpdateI thought I might add, for the benefit of those who think I am asking which, the following list:Case SensitiveCase InsensitiveNote:

2015-10-22 05:27:36Z

In PHP, variable and constant names are case sensitive, while function names are not.As far as I am aware, PHP is the only language in which this happens. All other languages I have used are either totally case sensitive or totally case insensitive.Why is PHP partially case senstive?Please note, that I am not asking which names are case sensitive, but why.UpdateI thought I might add, for the benefit of those who think I am asking which, the following list:Case SensitiveCase InsensitiveNote:I can only speculate that this stems from very early versions, probably PHP/FI 2.0. The manual explicitely states:Most user input, such as GET and POST parameters, has always been registered as global variables, back then. Treating these as case insensitive would likely have caused issues, and supposedly therefore all variables have been treated as being case sensitive.From what I can tell these have been the only kinds of identifiers in PHP/FI 2.0. All others have been introduced later, apparently mimicking the case-insensitive function names.Constants, which are special, have only been introduced as of PHP 4 (the PHP 3 manual mentions "constants", but these are nowadays referred to as "literals"). For some mysterious reason (maybe no consensus could be found), it had been decided to allow constant identifiers to be define()d either case sensitive or insensitive on the developers discression. Interestingly, while define() defaults to case sensitive constants, the respective C counterparts (REGISTER_*_CONSTANT) default to case insensitive.Case sensitive (both user defined and PHP defined)Case insensitive (both user defined and PHP defined)In php.netBasicsVariables in PHP are represented by a dollar sign followed by the name of the variable. The variable name is case-sensitive.Variable names follow the same rules as other labels in PHP. A valid variable name starts with a letter or underscore, followed by any number of letters, numbers, or underscores. As a regular expression, it would be expressed thus: '[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*'Some useful LinksCase sensitiveCase insensitive 

Set an environment variable in .htaccess and retrieve it in PHP

Bruno Cloutier

[Set an environment variable in .htaccess and retrieve it in PHP](https://stackoverflow.com/questions/17550223/set-an-environment-variable-in-htaccess-and-retrieve-it-in-php)

I am trying to set an environment variable in an .htaccess file and retrieve it in PHP. I've looked through a bunch of other threads here on SO but everything I've tried so far has failed.I've added this line to the .htaccess file:I have tried retrieving this value using the getenv() PHP function:I have runned phpinfo() to see the list of available environment variables, SPECIAL_PATH is not there. I am puzzled as to why this is not working.Thank you!

2013-07-09 14:00:06Z

I am trying to set an environment variable in an .htaccess file and retrieve it in PHP. I've looked through a bunch of other threads here on SO but everything I've tried so far has failed.I've added this line to the .htaccess file:I have tried retrieving this value using the getenv() PHP function:I have runned phpinfo() to see the list of available environment variables, SPECIAL_PATH is not there. I am puzzled as to why this is not working.Thank you!Assuming your configuration has AllowOverrides with .htaccess, you must enable mod_env in Apache for this to work.Apache - mod_envApache Docs custom-error.html covers environment variables passed to error handling pagesSays "REDIRECT_ environment variables are created from the environment variables which existed prior to the redirect. They are renamed with a REDIRECT_ prefix, i.e., HTTP_USER_AGENT becomes REDIRECT_HTTP_USER_AGENT."Says "None of these will be set if the ErrorDocument target is an external redirect (anything starting with a scheme name like http:, even if it refers to the same host as the server)."Says about SetEnv: "The internal environment variables set by this directive are set after most early request processing directives are run, such as access control and URI-to-filename mapping. If the environment variable you're setting is meant as input into this early phase of processing such as the RewriteRule directive, you should instead set the environment variable with SetEnvIf." On some servers, user-declared environment variables must start with 'HTTP_' for security purposes, e.g.:  SetEnv HTTP_MY_VARIABLE "my value"Here are some .htaccess ways of setting and using server environment variables, taken from my modifying the Perishable Press 5G Blacklist/Firewall http://perishablepress.com/5g-blacklist-2013/ to use environment variable reporting:Notice the use of paramters, e.g. $0--%1--%2. %0 gives the full string, %1 gives the match from the 1st parenthesized statement, %2 the 2nd. The hyphens are literal display characters, to visually separate parameter results (don't think is any way to put spaces in there).Here are some PHP methods of accessing the environment variables (in my case from 403.php and 404.php). 

Note that you don't look in phpinfo(), but in $SERVER, and that your variables get prefixed with REDIRECT

Note also that with a 403/404 redirect, the QUERY_STRING becomes REDIRECT_QUERY_STRING

This is stuff that could easily be server dependent, so check $_SERVER for your actual values. For example, I cover in some depth in http://lcblog.lernerconsult.com/2013-server-alert-you-file-not-found-errors/

Check if number is decimal

CodeVirtuoso

[Check if number is decimal](https://stackoverflow.com/questions/6772603/check-if-number-is-decimal)

I need to check in PHP if user entered a decimal number (US way, with decimal point: X.XXX)Any reliable way to do this?

2011-07-21 07:22:08Z

I need to check in PHP if user entered a decimal number (US way, with decimal point: X.XXX)Any reliable way to do this?You can get most of what you want from is_float, but if you really need to know whether it has a decimal in it, your function above isn't terribly far (albeit the wrong language):If all you need to know is whether a decimal point exists in a variable then this will get the job done...This isn't a very elegant solution but it works with strings and floats.Make sure to use !== and not != in the strpos test or you will get incorrect results. if you want "10.00" to return true check Night Owl's answerIf you want to know if the decimals has a value you can use this answer.Works with all kind of types (int, float, string)fmod returns the floating point remainder (modulo) of the division of the arguments, (hence the (!== 0.00))Modulus operator - why not use the modulus operator? E.g. ($val % 1 != 0) From the PHP docs: Which will effectively destroys the op purpose, in other languages like javascript you can use the modulus operatoranother way to solve this: preg_match('/^\d+\.\d+$/',$number); :)The function you posted is just not PHP.Have a look at is_float [docs].Edit: I missed the "user entered value" part. In this case you can actually use a regular expression:I was passed a string, and wanted to know if it was a decimal or not. I ended up with this:I ran a bunch of test including decimals and non-decimals on both sides of zero, and it seemed to work.is_numeric returns true for decimals and integers. So if your user lazily enters 1 instead of 1.00 it will still return true:You may wish to convert the integer to a decimal with PHP, or let your database do it for you.This is a more tolerate way to handle this with user input. This regex will match both "100" or "100.1" but doesn't allow for negative numbers.i use this:A total cludge.. but hey it works !Simplest solution is If you are working with form validation. Then in this case form send string.

I used following code to check either form input is a decimal number or not.

I hope this will work for you too.the easy way to find either posted value is integer and float so this will help you if you give 10 or 10.5 or 10.0 the result will be success if you define any character or specail character without dot it will give unsuccessKnown Issues with the above function:1) Does not support "scientific notation" (1.23E-123), fiscal (leading $ or other) or "Trailing f" (C++ style floats) or "trailing currency" (USD, GBP etc)2) False positive on string filenames that match a decimal: Please note that for example "10.0" as a filename cannot be distinguished from the decimal, so if you are attempting to detect a type from a string alone, and a filename matches a decimal name and has no path included, it will be impossible to discern.Maybe try looking into this as well!is_int()

Show image using file_get_contents

Belgin Fish

[Show image using file_get_contents](https://stackoverflow.com/questions/4286677/show-image-using-file-get-contents)

how can I display an image retrieved using file_get_contents in php?Do i need to modify the headers and just echo it or something?Thanks!

2010-11-26 15:48:55Z

how can I display an image retrieved using file_get_contents in php?Do i need to modify the headers and just echo it or something?Thanks!exactly.Send a header("content-type: image/your_image_type"); and the data afterwards.You can use readfile and output the image headers which you can get from getimagesize like this:The reason you should use readfile here is that it outputs the file directly to the output buffer where as file_get_contents will read the file into memory which is unnecessary in this content and potentially intensive for large files.You can do that, or you can use the readfile function, which outputs it for you:Edit: Derp, fixed obvious glaring typo.you can do like this :Small edit to @seengee answer:

In order to work, you need curly braces around the variable, otherwise you'll get an error.header("Content-type: {$imginfo['mime']}");

How to pass arguments to an included file?

menardmam

[How to pass arguments to an included file?](https://stackoverflow.com/questions/4315271/how-to-pass-arguments-to-an-included-file)

I'm trying to make the whole <head> section its own include file. One drawback is the title and description and keyword will be the same; I can't figure out how to pass arguments to the include file.So here is the code:Obviously this doesn't work; how can I pass arguments to an included file?

2010-11-30 15:17:56Z

I'm trying to make the whole <head> section its own include file. One drawback is the title and description and keyword will be the same; I can't figure out how to pass arguments to the include file.So here is the code:Obviously this doesn't work; how can I pass arguments to an included file?index.php:and header.phpIt's not an ideal solution, but I understand it's your first steps in php.PS. Your Doctype doesn't match the code. I've adjusted your header html to be XHTML.Include has the scope of the line it's called from. If you don't want to create new global variables, you can wrap include() with a function:$title will be defined in the included code whenever you call includeHeader with a value, for example includeHeader('My Fancy Title').If you want to pass more than one variable you can always pass an array instead of a string.Let's create a generic function:Voila!Using extract makes it even neater:Now you can do:Knowing that it will cause variables $keywords and $title to be defined in the scope of the included code.You can't pass arguments to include, but it has access to all variables you've already set. From the include documentation:Thus:Well marc, when you are using include, you can simply just set up a variable to use:In your header file:Allow your previously defined variables are usable in any include you have.you are over thinking it::EDIT::Decided I would add valueThe included file will gain the scope of where you included it. So if you include a file INSIDE a function:More over, you include the same file more than once to great effect.And even use this to load templates that become part of a method in a class. So you can do something like:defining a variable as a pseudo-argument/workaround before an include() - as recommended by many - is a bad idea. it introduces a variable in the global scope. define a function in the included file instead to catch the arguments u want to pass.This is good approach. I however would do it a bit inside out. Define a layout, a wrapper for your webpage and include your content file into it:Your content template file can look like this e.g.Then, you would have your main script (index) that will handle logic, connects to database etc.This way, you can nicely separate business logic and presentation. And it can help you cut repetitive code for parts of page like logo or navigation which are repeated on the whole site.If you include a file it is just like inserting that code into the parent file. You could simply do this:and then in the header.phpI used the isset() method to verify that it has a value already and is instantiated.I noticed nobody suggested using a template engine. I came looking here because for the project I'm working with, a template engine isn't possible and that might be your situation too, however I thought it might be worth mentioning these: Twig (my preferred engine) and Smarty both allow passing specific variables to includes. I highly recommend the use of a template engine whenever possible, as it simplifies your front end code, adds a layer of abstraction between your front end and back end, and both Twig and Smarty automatically clean the variables you pass to them which helps mitigate XSS attacks.Twig Exampleheader.htmlindex.htmlSmarty Exampleheader.tplindex.tpl

XAMPP 1.8.2-2 Apache Web Server won't start, always stops immediately

Onovar

[XAMPP 1.8.2-2 Apache Web Server won't start, always stops immediately](https://stackoverflow.com/questions/19787517/xampp-1-8-2-2-apache-web-server-wont-start-always-stops-immediately)

I'm running XAMPP 1.8.2-2 on my mac (OS X 10.9) and the Apache Web server won't start. It always get the status starting up.. or stopped. (never a green light.) I already tried to change the port to 8080 or 8888 but it still won't run.Can someone please help me? I show some images below to give you a better view.

Thank you!(I saw related questions but couldn't find an answer related to the mac os)

2013-11-05 11:06:13Z

I'm running XAMPP 1.8.2-2 on my mac (OS X 10.9) and the Apache Web server won't start. It always get the status starting up.. or stopped. (never a green light.) I already tried to change the port to 8080 or 8888 but it still won't run.Can someone please help me? I show some images below to give you a better view.

Thank you!(I saw related questions but couldn't find an answer related to the mac os)I had the same problem and I solved doing this:  open Terminal and enter this command:After install Mac OS X 10.11 you must reinstall XAMPP again. I'm not sure what is different (maybe some permissions) but that was the unique solution for me when I had the same problem.

How do I run PHP code when a user clicks on a link?

chustar

[How do I run PHP code when a user clicks on a link?](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)

I want to have a page run some PHP code when a user clicks on a link, without redirecting them. Is this possible with or with the javascript onclick event?

2009-08-15 00:05:18Z

I want to have a page run some PHP code when a user clicks on a link, without redirecting them. Is this possible with or with the javascript onclick event?Yeah, you'd need to have a javascript function triggered by an onclick that does an AJAX load of a page and then returns false, that way they won't be redirected in the browser.  You could use the following in jQuery, if that's acceptable for your project:You could also do a post-back if you need to use form values (use the $.post() method).As others have suggested, use JavaScript to make an AJAX call.http://docs.jquery.com/Ajax/jQuery.ajaxIf you haven't yet installed jquery (because you're just a beginner or something), use this bit of code:I know this post is old but I just wanted to add my answer!You said to log a user out WITHOUT directing... this method DOES redirect but it returns the user to the page they were on! here's my implementation:and there we go!the code that gets the file name from the full url isn't bug proof. for example if query strings are involved with un-escaped '/' in them, it will fail.However there are many scripts out there to get the filename from url!Happy Coding!AlexYou cant run PHP when a user clicks on a link without leaving the page unless you use AJAX. PHP is a serverside scripting language, meaning the second that the browser sees the page, there is no PHP in it.Unlike Javascript, PHP is ran completely on the server, and browser wouldn't know how to interpret it if it bit them on the rear. The only way to invoke PHP code is to make a Page request, by either refreshing the page, or using javascript to go fetch a page.In an AJAX Solution, basically the page uses javascript to send a page request to another page on your domain. Javascript then gets whatever you decide to echo in the response, and it can parse it and do what it wants from there. When you are creating the response, you can also do any backend stuff like updating databases.Well you said without redirecting. Well its a javascript code:give it a try :) hope you like itThere is the only better way is AJAX as everyone is suggest in their posts.

The alternative is using IFrames like below:Now you will get the output in IFrame (you can place IFrame wherever you need in the page or event hide it and the result from the script).Hope for non Ajax solution this is better.either send the user to another page which does itor do it with ajaxThis should work as wellThanks,cowtipper

Super fast getimagesize in php

Sir Lojik

[Super fast getimagesize in php](https://stackoverflow.com/questions/4635936/super-fast-getimagesize-in-php)

I am trying to get image size (image dimensions, width and height) of hundreds of remote images and getimagesize is way too slow.I have done some reading and found out the quickest way would be to use file_get_contents to read a certain amount of bytes from the images and examining the size within the binary data.Anyone attempted this before? How would I examine different formats? Anyone has seen any library for this?

2011-01-08 20:21:51Z

I am trying to get image size (image dimensions, width and height) of hundreds of remote images and getimagesize is way too slow.I have done some reading and found out the quickest way would be to use file_get_contents to read a certain amount of bytes from the images and examining the size within the binary data.Anyone attempted this before? How would I examine different formats? Anyone has seen any library for this?test...Loading 32kb of data worked for me.I have created a PHP library for exactly this scenario, it works by downloading the absolute minimum of the remote file needed to determine the filesize. This is different for every image and particularly for JPEG depends on how many embedded thumbnails there are in the file. It is available on GitHub here: https://github.com/tommoor/fastimageExample usage:I was looking for a better way to handle this situation, so I used a few different functions found around the internet.Overall, when it worked, the fastest tended to be the getjpegsize function that James Relyea posted on the PHP page for getimagesize, beating the ranger function provided by Dejan above.

http://php.net/manual/en/function.getimagesize.php#88793There are problems, though, as both ranger and getjpegsize are limited in ways that make it not stable enough to use. Both failed when dealing with a large JPG image around 3MB, but ranger will work after changing the amount of bytes it grabs. Also, these alternates only deal with JPG images, which means that a conditional would need to be used to only use them on JPGs and getimagesize on the other image formats.Also, note that the first image was on an older server running an old version of PHP 5.3.2, where as the 4 other images came from a modern server (cloud based cPanel with MultiPHP dialed back to 5.4.45 for compatibility).It's worth noting that the cloud based server did far better with getimagesize which beat out ranger, in fact for all 4 tests on the cloud server, ranger was the slowest. Those 4 also were pulling the images from the same server as the code was running, though different accounts.This makes me wonder if the PHP core improved in 5.4 or if the Apache version factors in. Also, it might be down to availability from the server and server load. Let's not forget how networks are getting faster and faster each year, so maybe the speed issue is becoming less of a concern.So, the end result and my answer is that for complete support for all web image formats, and to still achieve super fast image size, it might be best to suck it up and use getimagesize and then cache the image sizes (if these images will be checked more than once) in a database table. In that scenario, only the first check will incur a larger cost, but subsequent requests would be minimal and faster than any function that reads the image headers.As with any caching, it only works well if the content doesn't change and there is a way to check if has been a change. So, a possible solution is to check only the headers of a image URL when checking the cache, and if different, dump the cached version and grab it again with getimagesize.

How to connect to mysql with laravel?

Michael Joseph Aubry

[How to connect to mysql with laravel?](https://stackoverflow.com/questions/20208776/how-to-connect-to-mysql-with-laravel)

This is such a simple basic question I don't think there is much people asking this but simply how do I connect to mySql through localhost phpmyadmin with laravel (I've searched, there is some stuff, but I need to ask because I am a noob and I'd like to ask, the stuff I saw I don't quite get 100% or I tried and it didn't help)?I am working with backbone.js and am brand new to laravel, I installed laravel inside C:\wamp\www\laravel-project I tried AndI expect to have to define the database information, I checked C:\wamp\www\laravel-project\app\config\database.php and it looks correct, mySQL is set on the defaults root being the user name, and '' empty being the password.The error in the command line I get after running php artisan migrate isI am using windows 8, and wamp for my localhost server, it of course includes phpmyadmin and mySql. So I am sure there are tons of ways to use mySql but I don't think I am setting up laravel and phpmyadmin properly.So any insight would be amazing, easy points. EDIT: Actually thinking this through maybe I need to create a database named database let me try that. be back soon. Okay I'll answer my question or someone can, just in case someone searches this topic... it is KEY to make sure the database defined in C:\wamp\www\laravel-project\app\config\database.php matches a database that exists inside your phpmyadmin. No brainer!

2013-11-26 04:52:46Z

This is such a simple basic question I don't think there is much people asking this but simply how do I connect to mySql through localhost phpmyadmin with laravel (I've searched, there is some stuff, but I need to ask because I am a noob and I'd like to ask, the stuff I saw I don't quite get 100% or I tried and it didn't help)?I am working with backbone.js and am brand new to laravel, I installed laravel inside C:\wamp\www\laravel-project I tried AndI expect to have to define the database information, I checked C:\wamp\www\laravel-project\app\config\database.php and it looks correct, mySQL is set on the defaults root being the user name, and '' empty being the password.The error in the command line I get after running php artisan migrate isI am using windows 8, and wamp for my localhost server, it of course includes phpmyadmin and mySql. So I am sure there are tons of ways to use mySql but I don't think I am setting up laravel and phpmyadmin properly.So any insight would be amazing, easy points. EDIT: Actually thinking this through maybe I need to create a database named database let me try that. be back soon. Okay I'll answer my question or someone can, just in case someone searches this topic... it is KEY to make sure the database defined in C:\wamp\www\laravel-project\app\config\database.php matches a database that exists inside your phpmyadmin. No brainer!Laravel makes it very easy to manage your database connections through app/config/database.php.As you noted, it is looking for a database called 'database'. The reason being that this is the default name in the database configuration file.Change this to the name of the database that you would like to connect to like this:Once you have this configured correctly you will easily be able to access your database!Happy Coding!In Laravel 5, there is a .env file, It looks likeEdit that .env There is .env.sample is there , try to create from that if no such .env file found.   Maybe you forgot to first create a table migrations:Also there is a very userful package Generators, which makes a lot of work for you https://github.com/JeffreyWay/Laravel-4-Generators#viewsIt's also much more better to not modify the app/config/database.php file itself... otherwise modify .env file and put your DB info there. (.env file is available in Laravel 5, not sure if it was there in previous versions...)NOTE: Of course you should have already set mysql as your default database connection in the app/config/database.php file.I spent a lot of time trying to figure this one out. Finally, I tried shutting down my development server and booting it up again. Frustratingly, this worked for me. 

I came to the conclusion, that after editing the .env file in Laravel 5, you have to exit the server, and run php artisan serve again.You probably only forgot to create database. Enter your PHPMyAdmin and do it from there.Edit: Definitely don't go with Maulik's answer. Not only it is using mysql_ extenstion (which is commonly recognized bad practice), Laravel is also taking care of your connections using PDO.

Command line progress bar in PHP

Andrei Serdeliuc ॐ

[Command line progress bar in PHP](https://stackoverflow.com/questions/2124195/command-line-progress-bar-in-php)

I am currently trying to add a progress bar to a command line script and I've tried various solutions (including Zend and Console_ProgressBar). The problem they both have in common is that the progress bar doesn't stick at the bottom of the window because during the script, new lines and other information is outputted.Is there any way to keep the progress bar at the bottom of the terminal but still be able to output other information while the script is running?[Edit]I figured it out:Instead of outputting directly to STDOUT I am actually grabbing the output inside a variable, I erase the screen with echo chr(27) . '[2J' and then output to STDOUT the contents of the variable and then append my progress bar.Hope that makes sense :)

2010-01-23 18:30:55Z

I am currently trying to add a progress bar to a command line script and I've tried various solutions (including Zend and Console_ProgressBar). The problem they both have in common is that the progress bar doesn't stick at the bottom of the window because during the script, new lines and other information is outputted.Is there any way to keep the progress bar at the bottom of the terminal but still be able to output other information while the script is running?[Edit]I figured it out:Instead of outputting directly to STDOUT I am actually grabbing the output inside a variable, I erase the screen with echo chr(27) . '[2J' and then output to STDOUT the contents of the variable and then append my progress bar.Hope that makes sense :)This is nice progress bar for cli:http://snipplr.com/view/29548/Other answers seem overly complex. My solution is to simply echo \033[0G escape sequence before the next update and it moves the cursor back to the beginning.Calling the function for the first time outputs the progress bar and each subsequent call overwrites the last line with a new progress bar.EDIT:

I have changed echoing \r to the escape sequence \033[0G and this should now work on OSX as well as Linux/Unix.EDIT 2:

Fixed possible error on line 3 as per @tbjers suggestion.EDIT 3:

Updated with new version that prints to STDERR and now also on GitHub: https://github.com/MacroMan/PHPTerminalProgressBarThis is an improvement of the previous answer which handles terminal resizes and uses 2 lines instead of 1. First line is info like time/percent second line is the progress bar.I don't know why the above code has a license I'm just copying it to be safe. The bellow code is under no license. Free to use for any purpose.The following is for unix machines.The goal is to retrieve the current terminal total columns. (using tput)This is a base, ready to be expanded.The ob actions are here to hide the stdout of tput.Let's say you would like to make a progress bar matching your task progress.Just divide the remaining time in seconds by the numbers of columns.You may end up with microseconds, so it's best to use usleep. This way the progress bar will always match the user shell width, including when resized.To do the same thing in pure bash:This shows the main singularity of the php echo: it does not append a new line, while the bash echo does.When using loops, say to check for a condition in intervals,

one other nice way to warn for running activity is text effects.The following using strtoupper and the ansi code reverse video.Output:Some may likes the party version, obtained by iteration of ansi codes. See more about ANSI codes: https://stackoverflow.com/a/48365998/2494754

Send FormData and String Data Together Through JQuery AJAX?

laukok

[Send FormData and String Data Together Through JQuery AJAX?](https://stackoverflow.com/questions/21060247/send-formdata-and-string-data-together-through-jquery-ajax)

How can I post file and input string data with FormData()? For instance, I have many other hidden input data that I need them to be sent to the server,html,With this code below I only manage to send the file data but not the hidden input data.jquery,server.phpresult,I would like to get this as my result though,Is it possible?

2014-01-11 08:32:57Z

How can I post file and input string data with FormData()? For instance, I have many other hidden input data that I need them to be sent to the server,html,With this code below I only manage to send the file data but not the hidden input data.jquery,server.phpresult,I would like to get this as my result though,Is it possible?Added a for loop and changed .serialize() to .serializeArray() for object reference in a .each() to append to the FormData.well, as an easier alternative and shorter, you could do this too!! I always use this.It send form data using ajaxI try to contribute my code collaboration with my friend . modification from this forum.this my html filethis php code fileI hope people with same problem , can fast solve this problem.

i got headache because multiple upload image.From what I understand you would like to send the images and the values of the inputs together. This code works well for me, I hope it helps someone in the future.-Take a look at my short code for ajax multiple upload with preview. https://santanamic.github.io/ajax-multiple-upload/You can try this:For Multiple file input : 

Try this code : I found that, if somehow(like your ModelState is false on server.) and page post again to server then it was taking old value to the server. So i found that solution for that.For multiple files in ajax try thisIn php

PHP difference between notice and warning

Rene Terstegen

[PHP difference between notice and warning](https://stackoverflow.com/questions/4624474/php-difference-between-notice-and-warning)

When writing code errors, warnings and notices can occur. I know the idea behind errors. I suppose a warning is there to inform you about something that can cause an error, but isn't a notice exaclty the same? I suppose a notice is not a message of something doing right ;).It's just a bit confusing to me. Can anybody tell the difference between those two and the way these messages should be treated.

2011-01-07 10:17:11Z

When writing code errors, warnings and notices can occur. I know the idea behind errors. I suppose a warning is there to inform you about something that can cause an error, but isn't a notice exaclty the same? I suppose a notice is not a message of something doing right ;).It's just a bit confusing to me. Can anybody tell the difference between those two and the way these messages should be treated.A notice is an advisory message meaning "You probably shouldn't be doing what you're doing, but I'll let you do it anyway"A warning is a message saying "You are doing something wrong and it is very likely to cause errors in the future, so please fix it."Both notices and warnings will not halt execution of your script, although I would encourage you to take them seriously and strive to have not even one notice in your apps.Differences are explained here: http://www.php.net/manual/en/errorfunc.constants.phpSpecifficaly:Errors:Warnings: Notices:I won't re-iterate the specific meanings, which have been thoroughly covered by other answers. Warnings and notices indicate different "badness" levels for things you might be doing wrong, but I'm with the PEAR/Zend guides on this: you should always code to E_STRICT, which means you shouldn't ever raise either warnings or notices.If you follow E_STRICT compatibility, the distinction between notices and warnings is kind of redundant if both are considered "Non-fatal errors that you should make sure don't happen" - they're both essentially warnings.According to PHP Manual:Personally I think, that notices indicate some code parts, which potentially can lead to some problems, but which were introduced intentionally. In such cases programmer is considered to "know what he is doing" and to know about some particular PHP features (type casts, default initialization values etc).

Interpolate a constant (not variable) into 'heredoc'

Michael

[Interpolate a constant (not variable) into 'heredoc'](https://stackoverflow.com/questions/10041200/interpolate-a-constant-not-variable-into-heredoc)

Consider:If I put a variable inside the braces, it prints out. But not the constant. How can I do it?

2012-04-06 08:50:29Z

Consider:If I put a variable inside the braces, it prints out. But not the constant. How can I do it?Use sprintf()You can also approach the problem by assigning the value of the constant to a variable.Personally I do it that way because if you have lots of constants in your string then your sprintf() call can be quite messy. It's also then harder to scan through the string and see what is doing what. Plus, by assigning the variables individually, you can see what is taking on what value.An example would be:Here is an little trick to allow double-quoted strings and heredocs to contain arbitrary expressions in curly braces syntax, including constants and other function calls. It uses the fact that a function name can be assigned to a variable and then called within heredoc:You can also use the get_defined_constants function. It puts back all currently defined constants in an array, which you can use in your HEREDOC string:Put your defined variable into simple variable and use include it in heredoc just as in following example:

How to access a different controller from inside a controller Symfony2

chirag7jain

[How to access a different controller from inside a controller Symfony2](https://stackoverflow.com/questions/15827384/how-to-access-a-different-controller-from-inside-a-controller-symfony2)

I need to access a method from a different controller inside another controller. How can I do it? Can I use this->get method?Can I include the controller inside my current controller and make a object of it and access the method via the object? Is it "ok" to do it this way?I want to call the form method --- newAction of the other controller.

2013-04-05 06:34:40Z

I need to access a method from a different controller inside another controller. How can I do it? Can I use this->get method?Can I include the controller inside my current controller and make a object of it and access the method via the object? Is it "ok" to do it this way?I want to call the form method --- newAction of the other controller.You can define your controller as service, then get it in another controller.In your services.yml define needed controller as a service:Then in any controller you'll be able to get this service via container:There is some useful information about Controllers as Services in documentationIf you don't want to define the class as a service, as it doesn't feel as a good practice to me and @Qoop quoted Fabien saying the same, you can use forwarding:http://symfony.com/doc/current/controller/forwarding.htmlIf you need to embed the output of an internal controller-action in a template, the documentation for Symfony also has something for that.

How to get base url in CodeIgniter 2.*

Hai Truong IT

[How to get base url in CodeIgniter 2.*](https://stackoverflow.com/questions/7503302/how-to-get-base-url-in-codeigniter-2)

In config.phpIn View

=> Error: Call to undefined function base_url(); Help me

2011-09-21 16:30:00Z

In config.phpIn View

=> Error: Call to undefined function base_url(); Help meTo use base_url() (shorthand), you have to load the URL Helper firstOr you can autoload it by changing application/config/autoload.phpOr just useSame applies to site_url().Also I can see you are missing echo (though its not your current problem), use the code below to solve the problemI know this is very late, but is useful for newbies. We can atuload url helper and it will be available throughout the application. For this in application\config\autoload.php modify as follows -You need to load the URL Helper in order to use base_url().  In your controller, do:Then in your view you can do:Just load helper class thats it.You need to add url helper in config/autoloadThen you can use base_url or any kind of url.

Why is base64_encode() adding a slash「/」in the result?

BadHorsie

[Why is base64_encode() adding a slash「/」in the result?](https://stackoverflow.com/questions/11449577/why-is-base64-encode-adding-a-slash-in-the-result)

I am encoding the URL suffix of my application:Notice the slash before 'X2'.Why is this happening?  I thought base64 only outputted A-Z, 0-9 and '=' as padding?  I have tried using an online base64 encoder to check, and it seems base64 always does this.  I can't tell if it's the underscore "_" or the question mark "?" or the "=" perhaps?

2012-07-12 10:08:53Z

I am encoding the URL suffix of my application:Notice the slash before 'X2'.Why is this happening?  I thought base64 only outputted A-Z, 0-9 and '=' as padding?  I have tried using an online base64 encoder to check, and it seems base64 always does this.  I can't tell if it's the underscore "_" or the question mark "?" or the "=" perhaps?No. The Base64 alphabet includes A-Z, a-z, 0-9 and + and /.You can replace them if you don't care about portability towards other applications.See: http://en.wikipedia.org/wiki/Base64#Variants_summary_tableYou can use something like these to use your own symbols instead (replace - and _ by anything you want, as long as it is not in the base64 base alphabet, of course!).The following example converts the normal base64 to base64url as specified in RFC 4648:In addition to all of the answers above, pointing out that / is part of the expected base64 alphabet, it should be noted that the particular reason you saw a / in your encoded string, is because when base64 encoding ASCII text, the only way to generate a / is to have a question mark in a position divisible by three.Sorry, you thought wrong. A-Za-z0-9 only gets you 62 characters. Base64 uses two additional characters, in PHP's case / and +.There is nothing special in that.The base 64 "alphabet" or "digits" are A-Z,a-z,0-9 plus two extra characters + (plus) and / (slash). You can later encode / with %2f if you want.A-Z is 26 characters.

0-9 is 10 characters.

= is one character. That gives a total of 37 characters, which is some way short of 64./ is one of the 64 characters. You can see a complete list on the wikipedia page.For base64 the valid charset is:

ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/the = is used as filler for the last bytesM.Not directly related, and enough people above have answered and explained solutions quite well.However, going a bit outside of the scope of things. If you want readable base text, try looking into Base58. It's worth considering if you want only alphanumeric characters.Hope it may help youyou can decode the above key by this function below. Just pass your encrypted string herethere is no need to decode openssl_random_pseudo_bytes() , but you can use this for other cases like decode url...

what is the difference between site_url() and base_url()?

Afghan Dev

[what is the difference between site_url() and base_url()?](https://stackoverflow.com/questions/17079711/what-is-the-difference-between-site-url-and-base-url)

As I have read in some resources, base_url() and site_url() functions in codeigniter are almost the same, although  my version of codeigniter (2.1.3) does not have a site_url() in it's config.php file (in config directory).Yet are there differences between them in any way since I have seen site_url() with parameters and never seen base_url() holding none?

2013-06-13 05:18:45Z

As I have read in some resources, base_url() and site_url() functions in codeigniter are almost the same, although  my version of codeigniter (2.1.3) does not have a site_url() in it's config.php file (in config directory).Yet are there differences between them in any way since I have seen site_url() with parameters and never seen base_url() holding none?if you want a URL access to a resource (such as  css, js, image), use base_url(), otherwise, site_url() is better.for a detailed reference Check this both function in CodeIgniter.Base URL function.site_url: Returns base_url + index_page + uri_stringbase_url: Returns base_url + uri_stringSee source code of both functions at: https://github.com/EllisLab/CodeIgniter/blob/606fee0e2e0aa6a906db82e77090e91f133d7378/system/core/Config.phpThe purpose of site_url is that your pages become more portable in the event your URL changes.The site_url appears with the index.php file.Segments can be optionally passed to the function as a string or an array.it will give: http://ci.com/index.php/news/local/123you can even pass segments as an array:base_url is without the index_page or url_suffix being appended.

like site_url, you can supply segments as a string or an array.If you want a URL access to a resource use base_url you can supply a string to a file, such as an image or stylesheet else site_url is enough.site_url() is execute  index.php that why site_url is better as compare to base_url.Or, you can create file .htaccess in the CodeIgniter root folder next to its index.php file.just add this code on .htaccess file:this code will make the word index.php remain unseen.will be changed to thisbase_url() that is commonly used in Codeigniter can be used even without the .php extension.site_url() which is commonly used in Wordpress custom template can be used even when you just call the post_title of the blog or the file name with the extension.I would like to add when to use base_url() and the site_url() . Basically one can use site_url() while creating links for controllers whereas base_url() can be used where we need to create urls for the assets like loading a css or js file or some image .What I always prefer is to use site_url() for creating links to controllers or ajax urls and base_url() for loading assets .

Add values to an associative array in PHP

Thinker

[Add values to an associative array in PHP](https://stackoverflow.com/questions/1960730/add-values-to-an-associative-array-in-php)

I want to append an element to to end of an associative array.For example, my array is and my result should be Could you tell me how to implement this?

2009-12-25 07:45:50Z

I want to append an element to to end of an associative array.For example, my array is and my result should be Could you tell me how to implement this?Just add it like you would with a non-associative array:You can do this with PHP's array_merge function.

「Invalid parameter number: parameter was not defined」Inserting data

k to the z

[「Invalid parameter number: parameter was not defined」Inserting data](https://stackoverflow.com/questions/5874383/invalid-parameter-number-parameter-was-not-defined-inserting-data)

UPDATEI was making a petty mistake when listing the VALUES.  I should have put ":username" and not ":alias".  I suppose the answer credit to this question is free reign for anyone who wants it?  Or do I delete the question?ORIGINALI've been using Yii's active record pattern for a while.  Now, my project needs to access a different database for one small transaction.  I thought the Yii's DAO would be good for this.  However, I'm getting a cryptic error.Here is my code:This constructs the following query (as seen on the application log):FYI $model->placeOfBirth is supposed to be in both city and county values.  That's not a typo (just a silly thing I have to do).

2011-05-03 19:07:52Z

UPDATEI was making a petty mistake when listing the VALUES.  I should have put ":username" and not ":alias".  I suppose the answer credit to this question is free reign for anyone who wants it?  Or do I delete the question?ORIGINALI've been using Yii's active record pattern for a while.  Now, my project needs to access a different database for one small transaction.  I thought the Yii's DAO would be good for this.  However, I'm getting a cryptic error.Here is my code:This constructs the following query (as seen on the application log):FYI $model->placeOfBirth is supposed to be in both city and county values.  That's not a typo (just a silly thing I have to do).Just to provide an answer - because this error is pretty common - here are a few causes:1) The :parameter name does not match the bind by mistake (typo?). This is what happened here. He has :alias in the SQL statement, but bound :username. So when the param binding was attempted, Yii/PDO could not find :username in the sql statement, meaning it was "one parameter short" and threw an error.2) Completely forgetting to add the bindValue() for a parameter. This is easier to do in Yii other constructs like $critera, where you have an array or params ($criteria->params = array(':bind1'=>'test', ':bind2'=>'test)).3) Weird conflicts with CDataProvider Pagination and/or Sorting when using together and joins. There is no specific, easy way to characterize this, but when using complex queries in CDataProviders I have had weird issues with parameters getting dropped and this error occurring.One very helpful way to troubleshoot these issues in Yii is to enable parameter logging in your config file. Add this to your db array in your config file:And make sure the CWebLogRoute route is set up in your log section. This will print out the query that gave and error, and all of the parameters it was attempting to bind. Super helpful!May be you are trying to bind a param within single quotes instead of letting it does the work for you. Compare:With:A cause of this error for me not covered above is when you're dealing with a dynamic array of parameters if you unset any params, you need to reindex before passing them in.  The brutal part of this is that your error log doesn't show indexes so it looks like everything is right.  Eg:Might produce the Log: Invalid parameter number: parameter was not defined with params ("x","y","z")This looks like it shouldn't be throwing an error, but if the indexes are something like:It considers the last parameter undefined because it's looking for key 2.I got this error when trying to do something like:Basically, you can't have unused parameters in the array passed to execute(). Every value in the array passed to execute() must be used in your prepared statement.This is also specified in the docs:

How reload Twig cache in Symfony 2

Azhar

[How reload Twig cache in Symfony 2](https://stackoverflow.com/questions/16386925/how-reload-twig-cache-in-symfony-2)

I have a application which is developed in PHP using the Symfony 2 framework. I have changed a HTML file, but the change is not reflecting when I refresh the page.How can I reload the Twig cache?Notes:

2013-05-05 17:03:06Z

I have a application which is developed in PHP using the Symfony 2 framework. I have changed a HTML file, but the change is not reflecting when I refresh the page.How can I reload the Twig cache?Notes:The most simple way, type the command :The point is: all files in app/cache/ can be removed freely, they are regenerated when needed.If you really want to clear only twig cache :Replace <environment> by dev, prod, or test according to your requirements.When creating a new Twig_Environment instance, you can pass an array of options as the constructor second argument. One of them is auto_reload. When developing with Twig, it's useful to recompile the template whenever the source code changes. If you don't provide a value for the auto_reload option, it will be determined automatically based on the debug value.Set auto_reload to be true:Twig's documentation for developers:

http://twig.sensiolabs.org/doc/api.html#environment-optionsI had a similar problem, but deleting the cache-folder did not have any impact on my template and I don't know why. What seems to solve my problem now is the following code in my config_dev.yml:Maybe this is also a solution for you, so that you don't need to use the command all the time.References:TwigBundle ConfigurationTwig Environment OptionsIf you are using opcache/other similar caching, deleting twig's cache folder won't refresh templates as twig cache consist of only .php files.

You need to delete twig's cache folder + execute php file which contains:opcache_reset();You have to do some changes in app.php file located in web folder.Change:to:and clear the cache if you want.If you are using OPcache make sure to comment out opcache.validate_timestamps=0 in dev environment.you can add a function like this :

Disable OPCache temporarily

Anthony

[Disable OPCache temporarily](https://stackoverflow.com/questions/21556437/disable-opcache-temporarily)

I recently moved to PHP 5.4 and installed OPCache, it's very powerful!How can I temporarily disable the cache?I tried :But it has no effect.Thanks

2014-02-04 15:24:49Z

I recently moved to PHP 5.4 and installed OPCache, it's very powerful!How can I temporarily disable the cache?I tried :But it has no effect.ThanksOnce your script runs, it's too late to not cache the file. You need to set it outside PHP:And, in any case, you can use good old system-wide php.ini if you have access to it.opcache.enable is PHP_INI_ALL which means that ini_set() does work, but only for current request to disable OPcache caching for the remainder of scripts compiled in your current request.  (You can't force enabling).  It reverts back to the system default for other requests.  By this stage, the request script will already have been cached, unless you do the ini_set in an auto_prepend_file script.The system defaults (PHP_INI_SYSTEM) are latched as part of PHP system startup and can't be reread.  So in the case of Apache for example, you need to restart Apache to change / reload these.  The  .htaccess php_flag directives only apply if you are running mod_php or equivalent.  They and .user.ini files are PHP_INI_PERDIR, which will also be latched at request activation.Now to the Q that I think that you might be asking.  If you have a dev system then the easiest way is to set opcache.enable=0 in the appropriate INI file and restart your webserver.  Set it back to =1 and restart again when you are done.Also consider (in the dev context) setting opcache.validate_timestamps=on and opcache.revalidate_freq=0.  This will keep OPcache enabled but scripts will be stat'ed on every compile request to see if they are changed.  This gives the best of both worlds when developing.Also read up on the opcache.blacklist_filename directive.  This allow you to specify an exclusion file, so if this contains /var/www/test, and the web service docroot is /var/www then any scripts in the /var/www/test* hierarchies will not be cached.Hope this helps :) The best way i found in my case for disable opcache in a specific PHP file is : opcache_invalidate(__FILE__, true);You also can reset all cache with PHP :  opcache_reset();In my modest opinion, because I'm no expert, Jul has given the best answer. The question included the term "temporarily", so changing the configuration files I think... is not the best answer because you need to reconfigure, run what you want and reconfigure again to make it work normally. It's not smooth.With the answer of Jul you can modify the code to perform some action by disabling the opcache and return to a normal situation within the same code (although we would have to see how to re-enable from code the opcache)For example, with Prestashop, there can be problems cleaning the "normal" cache from the administration interface if opcache is enabled, so in that case you can use a method so that when the action is performed, opcache is disabled, the "normal" cache is cleaned, and then opcache is enabled again.

New reCaptcha with jQuery Validation Plugin

bluantinoo

[New reCaptcha with jQuery Validation Plugin](https://stackoverflow.com/questions/29563822/new-recaptcha-with-jquery-validation-plugin)

I searched and can't figure out how to validate the new reCaptcha,  before form submit, along with the validate function of jQuery validation Plugin.My intent:In a few words: I would like to check server-side, with the remote method, if the user has passed the recaptcha validation BEFORE submitting the form, along with other rules of validation.I'm able to check the recaptcha AFTER submission (on sendmail.php), but it would be nicer to have the recaptcha validation response along with other fields validation.The main reason is for a better user experience, having all fields checked at once.I've managed to achieve this, moving the check inside the submitHandler:But I don't like this approach, for 2 reasons:In this answer they say it can be done rendering the Recaptcha on a callback, to specify a function call on a successful CAPTCHA response.I tried to implement that, but I've not been able to use this solution within a rule of the validate() function. 

2015-04-10 14:19:03Z

I searched and can't figure out how to validate the new reCaptcha,  before form submit, along with the validate function of jQuery validation Plugin.My intent:In a few words: I would like to check server-side, with the remote method, if the user has passed the recaptcha validation BEFORE submitting the form, along with other rules of validation.I'm able to check the recaptcha AFTER submission (on sendmail.php), but it would be nicer to have the recaptcha validation response along with other fields validation.The main reason is for a better user experience, having all fields checked at once.I've managed to achieve this, moving the check inside the submitHandler:But I don't like this approach, for 2 reasons:In this answer they say it can be done rendering the Recaptcha on a callback, to specify a function call on a successful CAPTCHA response.I tried to implement that, but I've not been able to use this solution within a rule of the validate() function. I know this question is a bit dated but I was having the same problem and just found the solution.

You can do this by adding a hidden field next to the reCaptcha div, like:then in your javascript:NOTICE THAT YOU MUST HAVE the ignore: ".ignore" in your code because jquery.validate ignores hidden fields by default, not validating them.If you want to remove the error message on reCapcha validate add a data-callback to the reCapcha elementAnd then in your js file addYou can also prevent the form submit in the submitHandlerI've found your solution to be interesting (@FabioG).But, I've modified it for use a bit by myself and I'm willing to share the code for others to use.I was working on an interactive form, that validated as you completed steps.It was used for ordering food. Ergo, the form required verification and activation of the register button and it is using the latest reCaptcha to date (5/12/2016).Also, this code handles expired reCaptcha, server side verification via ajax (dough not included - if someone needs it feel free to comment my answer and I'll edit it accordingly).Lets get started.The HTML code:So as you can see, the button for submission (".button-register") is initially disabled.You can only enable it by filling the mandatory (*) fields.Please, keep in mind that I didn't include any CSS. The form is on a bear minimum and is just for educational purposes.Few things that differ from @FabioG, answer are:There is no need to hide the element or use the ".ignore". I've hidden it with inline CSS.There is a response callback for successful reCaptcha and expired reCaptcha.So, if your reCaptcha expires while filling out the form it will make it invalid and the button will be disabled again.As well, the form uses an input field (the hidden input field) to pass the information onto AJAX(PHP later on) and verify it server side (It is a potential security risk, I covered it more at the end of the text). Lets move on to the JavaScript/jQuery.JavaScript/jQuery:As you can see here, there are a few functions: recaptchaCallback() and recaptchaExpired().recaptchaCallback() that is embeded via the data attribute data-callback, uses the grecaptcha.getResponse() to see if the reCaptcha is validated, if so it enters the token to the hidden input field and asks for re-validation via the jQuery("#registerForm).validate();.However, if the reCaptcha expires in the meanwhile it will use the assigned function in the "data-expired-callback", to remove the token from the input field and ask for re-validation again which will fail because the field is empty. This is achieved with the function recaptchaExpired().Later in the code you can see that we added a jQuery keyup function, to check for re-validation and see if the user has passed on the required information to the input fields. If the information and the field validate successfully the keyup function will enable the Register button.Also, I've used a debounce script (tnx, David Walsh) on keyup. So it doesn't cause browser lag. Since, there would be a lot of typing.But, keep in mind if a user decides to circumvent the reCaptcha he can always just enter "255" character long string to the input field. But, I've went a step further and made an AJAX verification server side to confirm the reCaptcha. Dough, I haven't included it in the answer.It think this code is a marginal improvement on the previous answer. If you have any questions or need the AJAX/PHP code feel free to comment. I'll supply it when I can.Heres the codepen as well: reCaptcha with jQuery.validationYou can find all the information regarding the reCatpcha data-attributes and functions in their api here: reCaptcha APIHope it helped someone!Regards,I struggled with this one today and ended up going with:Which just feels like the simplest way to do it. Someone is bound to complain about putting js inline like that but I'm ok with it.

Finding n-th permutation without computing others

Simone Margaritelli

[Finding n-th permutation without computing others](https://stackoverflow.com/questions/7918806/finding-n-th-permutation-without-computing-others)

Given an array of N elements representing the permutation atoms, is there an algorithm like that:where $atoms is the array of elements, $permutation_index is the index of the permutation and $size is the size of the permutation.For instance:Would print:Without computing every permutation until $permutation_index ?I heard something about factoradic permutations, but every implementation i've found gives as result a permutation with the same size of V, which is not my case.Thanks.

2011-10-27 16:00:23Z

Given an array of N elements representing the permutation atoms, is there an algorithm like that:where $atoms is the array of elements, $permutation_index is the index of the permutation and $size is the size of the permutation.For instance:Would print:Without computing every permutation until $permutation_index ?I heard something about factoradic permutations, but every implementation i've found gives as result a permutation with the same size of V, which is not my case.Thanks.As stated by RickyBobby, when considering the lexicographical order of permutations, you should use the factorial decomposition at your advantage.From a practical point of view, this is how I see it:The following C code should give you an idea of how this works (n is the number of entries, and i is the index of the permutation):For example, ithPermutation(10, 3628799) prints, as expected, the last permutation of ten elements:Here's a solution that allows to select the size of the permutation. For example, apart from being able to generate all permutations of 10 elements, it can generate permutations of pairs among 10 elements. Also it permutes lists of arbitrary objects, not just integers.Usage example:How does it work?There's a very interesting idea behind it. Let's take the list A, B, C, D. We can construct a permutation by drawing elements from it like from a deck of cards. Initially we can draw one of the four elements. Then one of the three remaining elements, and so on, until finally we have nothing left.Here is one possible sequence of choices. Starting from the top we're taking the third path, then the first, the the second, and finally the first. And that's our permutation #13.Think about how, given this sequence of choices, you would get to the number thirteen algorithmically. Then reverse your algorithm, and that's how you can reconstruct the sequence from an integer.Let's try to find a general scheme for packing a sequence of choices into an integer without redundancy, and unpacking it back.One interesting scheme is called decimal number system. "27" can be thought of as choosing path #2 out of 10, and then choosing path #7 out of 10.But each digit can only encode choices from 10 alternatives. Other systems that have a fixed radix, like binary and hexadecimal, also can only encode sequences of choices from a fixed number of alternatives. We want a system with a variable radix, kind of like time units, "14:05:29" is hour 14 from 24, minute 5 from 60, second 29 from 60.What if we take generic number-to-string and string-to-number functions, and fool them into using mixed radixes? Instead of taking a single radix, like parseInt('beef', 16) and (48879).toString(16), they will take one radix per each digit.Does that even work?And now backwards:This is so beautiful. Now let's apply this parametric number system to the problem of permutations. We'll consider length 2 permutations of A, B, C, D. What's the total number of them? Let's see: first we draw one of the 4 items, then one of the remaining 3, that's 4 * 3 = 12 ways to draw 2 items. These 12 ways can be packed into integers [0..11]. So, let's pretend we've packed them already, and try unpacking:These numbers represent choices, not indexes in the original array. [0, 0] doesn't mean taking A, A, it means taking item #0 from A, B, C, D (that's A) and then item #0 from the remaining list B, C, D (that's B). And the resulting permutation is A, B.Another example: [3, 2] means taking item #3 from A, B, C, D (that's D) and then item #2 from the remaining list A, B, C (that's C). And the resulting permutation is D, C.This mapping is called Lehmer code. Let's map all these Lehmer codes to permutations:That's exactly what we need. But if you look at the unpack function you'll notice that it produces digits from right to left (to reverse the actions of pack). The choice from 3 gets unpacked before the choice from 4. That's unfortunate, because we want to choose from 4 elements before choosing from 3. Without being able to do so we have to compute the Lehmer code first, accumulate it into a temporary array, and then apply it to the array of items to compute the actual permutation.But if we don't care about the lexicographic order, we can pretend that we want to choose from 3 elements before choosing from 4. Then the choice from 4 will come out from unpack first. In other words, we'll use unpack(n, [3, 4]) instead of unpack(n, [4, 3]). This trick allows to compute the next digit of Lehmer code and immediately apply it to the list. And that's exactly how nth_permutation() works.One last thing I want to mention is that unpack(i, [4, 3]) is closely related to the factorial number system. Look at that first tree again, if we want permutations of length 2 without duplicates, we can just skip every second permutation index. That'll give us 12 permutations of length 4, which can be trimmed to length 2.It depends on the way you "sort" your permutations (lexicographic order for example).One way to do it is the factorial number system, it gives you a bijection between [0 , n!] and all the permutations.Then for any number i in [0,n!] you can compute the ith permutation without computing the others.This factorial writing is based on the fact that any number between [ 0 and n!] can be written as : (it's pretty similar to base decomposition)for more information on this decomposition, have a look at this thread : https://math.stackexchange.com/questions/53262/factorial-decomposition-of-integershope it helpsAs stated on this wikipedia article this approach is equivalent to computing the lehmer code :So the best you can do for a set of n element is O(n ln(n)) with an adapted data structure.Here's an algorithm to convert between permutations and ranks in linear time. However, the ranking it uses is not lexicographic. It's weird, but consistent. I'm going to give two functions, one that converts from a rank to a permutation, and one that does the inverse.First, to unrank (go from rank to permutation)Next, to rank:The running time of both of these is O(n).There's a nice, readable paper explaining why this works: Ranking & Unranking Permutations in Linear Time, by Myrvold & Ruskey, Information Processing Letters Volume 79, Issue 6, 30 September 2001, Pages 281–284.http://webhome.cs.uvic.ca/~ruskey/Publications/RankPerm/MyrvoldRuskey.pdfHere is a short and very fast (linear in the number of elements) solution in python, working for any list of elements (the 13 first letters in the example below) :Examples :Note: I give letters[:] (a copy of letters) and not letters because the function modifies its parameter elems (removes chosen element)The following code computes the kth permutation for given n.i.e n=3. 

The various permutations are

    123

    132

    213

    231

    312

