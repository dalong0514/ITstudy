I cannot find any examples, in books or on the web, describing how one would properly initialize an associative array by name only (with empty values) - unless, of course, this IS the proper way(?)It just feels as though there is another more efficient way to do this:config.phpindex.phpAny recommendations, suggestions, or direction would be appreciated. Thanks.What you have is the most clear option. But you could shorten it using array_fill_keys, like this:But if the user has to fill the values anyway, you can just leave the array empty, and just provide the example code in index.php. The keys will automatically be added when you assign a value.First file:Other file:

deleting a file after user download it

Utku Dalmaz

[deleting a file after user download it](https://stackoverflow.com/questions/2641667/deleting-a-file-after-user-download-it)

I am using this for sending file to userI want to delete this file after user downloads it, how can i do this?EDIT: My scenario is like that, when user hits download button, my script will create a temporary zip file and user download it then that temp zip file will be deleted.EDIT2: OK best way seems running a cron job that will be cleaning temp files once an hour.EDIT3: I tested my script with unlink, it works unless user cancel the download. If user cancel the download, zip file stays on the server. So that is enough for now. :)EDIT4: WOW! connection_aborted() made the trick !This one will delete the file even if user cancel the download. 

2010-04-14 23:08:18Z

I am using this for sending file to userI want to delete this file after user downloads it, how can i do this?EDIT: My scenario is like that, when user hits download button, my script will create a temporary zip file and user download it then that temp zip file will be deleted.EDIT2: OK best way seems running a cron job that will be cleaning temp files once an hour.EDIT3: I tested my script with unlink, it works unless user cancel the download. If user cancel the download, zip file stays on the server. So that is enough for now. :)EDIT4: WOW! connection_aborted() made the trick !This one will delete the file even if user cancel the download. This will delete the file.It needs to be combined with ignore_user_abort()Docs so that the unlink is still executed even the user canceled the download.I always use the following solution:There is no any correct way to detect whether file was completely downloaded by user or not.

So the best way will be to delete file after some period of inactivity.I too have very similar functionality in one of my website. It will be like deleting randomly created folder & zip file after/cancelling download. I try to explain it here, may be someone find it useful.  skin.php:

This page contains download link such as "http://mysite.com/downoload/bluetheme"  .htaccess:

I have following rule in htaccess file to redirect the download request to a php file. [download.php].download.php:  so on request download.php will create directory with a random name using snippets class. Inside the directory it will create a zip file. after the download/cancelling the request all the files and the directory will be deleted.I couldn't find something which worked for me, so I came up with this, which seems to work well for me:I hope that helps someoneconnection_aborted() never worked for me. 

Although ob_clean() works exactly as it should. Hope this help others aswellThe safest way I can think of would be to use some client-side flash movie that can observe the transfer from the client side, and then make an XmlHttpRequest call to the server once the download finishes.  AFAIK, there's no way to do that reliably without using Flash (or a similar browser plugin)

Is there garbage collection in PHP?

Sergey

[Is there garbage collection in PHP?](https://stackoverflow.com/questions/1735492/is-there-garbage-collection-in-php)

I know that in PHP you don't have to free memory.

Is it reached by garbage collector?

2009-11-14 20:28:15Z

I know that in PHP you don't have to free memory.

Is it reached by garbage collector?Yes there is, [here]'s a nice article describing its pitfalls. In PHP > 5.3.0, there is also the gc_enable function.PHP has a combination of garbage collection and reference counting. The latter is the main mode of managing memory, with the garbage collector picking up the pieces that the ref counter misses (circular references). Before 5.3, php only had ref-counting, and even in 5.3 it's the still how memory will usually be freed.Yes. There is also session cleanup done by the garbage collector.since 5.3.0 there is garbage collection support. please check this very informative article from php.net http://php.net/manual/en/features.gc.phpSince 5.3.0 you can force garbage collection by using gc_collect_cycles function.

Image links broken in Gmail because of google's Image proxy

Balaji Kandasamy

[Image links broken in Gmail because of google's Image proxy](https://stackoverflow.com/questions/20491590/image-links-broken-in-gmail-because-of-googles-image-proxy)

Image links in gmail are broken because of google's Image proxy (news1,news2). I can't load my site's images in gmail.Actual image path is:

http://sampleimageurl.com/images/logo.jpgBut I get the same image path like this in gmail: https://ci3.googleusercontent.com/proxy/CUiMBo2ELdin8h5R_jKaarbsjQOZUXM3765smBK1PB4BsKq9EsVziwcOYFqjZqCkRDyu1jzoityEA_PJ=s0-d-e1-ft#http://sampleimageurl.com/images/logo.jpgDoes anyone knows how to solve this issue?

2013-12-10 10:13:13Z

Image links in gmail are broken because of google's Image proxy (news1,news2). I can't load my site's images in gmail.Actual image path is:

http://sampleimageurl.com/images/logo.jpgBut I get the same image path like this in gmail: https://ci3.googleusercontent.com/proxy/CUiMBo2ELdin8h5R_jKaarbsjQOZUXM3765smBK1PB4BsKq9EsVziwcOYFqjZqCkRDyu1jzoityEA_PJ=s0-d-e1-ft#http://sampleimageurl.com/images/logo.jpgDoes anyone knows how to solve this issue?Because your image wasn't open to public.You need make sure the new Gmail image proxy can fetch your image from google server.In Google Apps, it's now possible to disable Image Proxy for GMail (in Apps Settings). Or, better, you can white-list your internal URLs for which image proxying should be disabled.DEG’s research has confirmed reports from wordtothewise blogger, Laura Atkins, that「Google is rewriting image links. This rewriting appears to be happening during the delivery process. Older messages that are currently in mailboxes aren’t showing this tracking.」For global images, this means only one user has to open the mail and the images are pulled from the server. In the case of tracking images, every image file name is unique. Every new open will cause Google to grab the uniquely named image. The result is that senders can track the first open, but no subsequent opens.」Reference: http://www.degdigital.com/blog/gmail-tracking-disruption-for-marketers/Two things that might help:Change the image's location. In the new Google setup, the first time an image is opened, Google downloads the image and caches it on a Google managed proxy.I had the same issue and I solved the problem hosting the images in my public server  (http://mydoamin.com/img/images.jpg).Next step responsive email displaying responsive images:

CSS

Is it possible to redirect post data?

alex

[Is it possible to redirect post data?](https://stackoverflow.com/questions/358263/is-it-possible-to-redirect-post-data)

I have a website where all requests are redirected silently (via .htaccess) to index.php and then PHP is used to show the correct page (by parsing the REQUEST_URI).I was wondering if it's possible to submit POST data to a fake address too?I've currently got my form like so...And my .htaccess rule is...My index.php checks isset($_GET['send-mail']) which works fine.This however seems to drop off all the POST data that should be sent to it.Is there a way to keep the post data? I don't want to use GET because it can't send as much information, though it might not be an issue with a simple inquiry form.Here is my .htaccess for redirecting to index.php

2008-12-11 02:10:07Z

I have a website where all requests are redirected silently (via .htaccess) to index.php and then PHP is used to show the correct page (by parsing the REQUEST_URI).I was wondering if it's possible to submit POST data to a fake address too?I've currently got my form like so...And my .htaccess rule is...My index.php checks isset($_GET['send-mail']) which works fine.This however seems to drop off all the POST data that should be sent to it.Is there a way to keep the post data? I don't want to use GET because it can't send as much information, though it might not be an issue with a simple inquiry form.Here is my .htaccess for redirecting to index.phpTry this:"P" acts like "L" in that it stops processing rules but it also tells the module that the request should be passed off to the proxy module intact (meaning POST data is preserved).You should be able to simply redirect to index.php, and then in that script, access $_SERVER['REQUEST_URI'] to see the original request, with "send-mail" intact.By the way, "can't send as much information" is not the reason to use POST.  The reason to use POST is that the request will modify data on your site, instead of simply retrieving data.  Suppose you put a hyperlink on your page with a GET request like "/delete_user?id=1234," and then some search engine innocently follows the link as it's indexing your site.  That's why GET requests are not good for requests that modify data.To avoid issues with some proxies and Apache rewrites, pass in POST data or set the Content-Length: 0 header for requests with an empty body.I recently had issues with Apache converting my request to a GET when doing a POST with an empty body. So, instead of this:pass the Content-Length header:or pass something in the body:As long as you are only using an internal rewrite, not an HTTP redirect, you should not lose POST data. Here is the rule I use on my site:Try using the HTTPLiveHeaders extension for Firefox (or something similar) and track the entire page request. Make sure you are not getting an HTTP redirect. If you get a HTTP/1.1 3xx response and Location: http://address header, that is the problem. Your rewrite rule that you posted should not cause that to happen. If you are being redirected, there is probably either an error in your PHP code or another rewrite rule that is being applied.I want to redirect user_login.php to seo friendly url like /user-login with post form data and this worked for me.In view file 

best way to determine if a URL is an image in PHP

danio

[best way to determine if a URL is an image in PHP](https://stackoverflow.com/questions/676949/best-way-to-determine-if-a-url-is-an-image-in-php)

Using PHP, given a URL, how can I determine whether it is an image?  There is no context for the URL - it is just in the middle of a plain text file, or maybe just a string on its own.I don't want high overhead (e.g. reading the content of the URL) as this could be called for many URLs on a page. Given this restriction, it isn't essential that all images are identified, but I would like a fairly good guess.  At the moment I am just looking at the file extension, but it feels like there should be a better way than this.Here is what I currently have:Edit: In case it's useful to anybody else here is the final function using the technique from Emil H's answer:

2009-03-24 11:14:30Z

Using PHP, given a URL, how can I determine whether it is an image?  There is no context for the URL - it is just in the middle of a plain text file, or maybe just a string on its own.I don't want high overhead (e.g. reading the content of the URL) as this could be called for many URLs on a page. Given this restriction, it isn't essential that all images are identified, but I would like a fairly good guess.  At the moment I am just looking at the file extension, but it feels like there should be a better way than this.Here is what I currently have:Edit: In case it's useful to anybody else here is the final function using the technique from Emil H's answer:You could use an HTTP HEAD request and check the content-type. This might be a good compromise. It can be done using PHP Streams. Wez Furlong has an article that shows how to use this approach to send post requests, but it can be easily adapted to send HEAD requests instead. You can retrieve the headers from an http response using stream_get_meta_data().Of course this isn't really 100%. Some servers send incorrect headers. It will however handle cases where images are delivered through a script and the correct file extension isn't available. The only way to be really certain is to actually retrieve the image - either all of it, or the first few bytes, as suggested by thomasrutter.There are a few different approaches.Unfortunately, it is possible for a file to be both a valid image as well as a ZIP file containing harmful content which could be executed as Java by a harmful site - see the GIFAR exploit.  You can almost certainly prevent this vulnerability by loading the image in a library like GD and performing some non-trivial filter on it, like softening or sharpening it a tiny amount (ie using a convolution filter) and saving it to a fresh file without transferring any metadata across.Trying to determine if something is an image by its content-type alone is quite unreliable, almost as unreliable as checking the file extension.  When loading an image using an <img element, browsers sniff for a magic string.In addition to Emil H's answer:Using get_headers() to check the content type of an url without downloading the entire file with getimagesize()Edit: For static images with popular image extension.  Similar to some given answer but with a slightly different logic.@ is an error control operator.Note we used the "strict" operator === FALSE in the condition because strpos($headers['Content-Type'], 'image/') does return 0 in our use case if the needle is found in the haystack. With type casting using == that would erroneously be interpreted as FALSE.we can use exif_imagetype to check the image type, so it's not allow to any other content types. It only allow images and we can restrict them to few image types, following sample code show how to allow GIF image type.You can use following image types,more details : linkFast Solution for broken or not found images link 

i recommend you that don't use getimagesize() because it will 1st download image then it will check images size+if this will not image then it will throw exception so use below code Note:

this current code help you to identify broken or not found url image this will not help you to identify image type or headers

How can I get XDebug to run with PHPUnit on the CLI?

blacktie24

[How can I get XDebug to run with PHPUnit on the CLI?](https://stackoverflow.com/questions/12104303/how-can-i-get-xdebug-to-run-with-phpunit-on-the-cli)

I've tried running the following CLI command:but it just runs as normal.  Can anyone point me in the right direction??  Thx!Here's the XDebug settings: 

2012-08-24 06:36:01Z

I've tried running the following CLI command:but it just runs as normal.  Can anyone point me in the right direction??  Thx!Here's the XDebug settings: The xdebug.profiler_enable setting can't be changed at runtime but only at the start of script.Running phpunit -d foo=bar will just lead to phpunit calling ini_set("foo", "bar"); and that doesn't work since the value can't change at runtime.See: xdebug.profiler_enableBy applying the setting directly to the PHP runtime and not phpunit it will be set before the script starts and should work.Spent ages trying to get this to work. Think this may change my life though!I originally was trying to do this (i.e. run phpunit) inside a vagrant box but realised it was easier (and faster performance wise) running it outside the vagrant box. First off I used brew install php55 php55-xdebugusing homebrew on a mac (but your configuration may be different and it should still work). My site is a symfony2 project.I was trying to follow this: phpunit vagrant xdebug to get it working from inside a vagrant box (almost got there but with some issues).These settings worked for me (running site from a vagrant box, but phpunit outside vagrant box):Then running this at the command line (here I am using a download of phpunit instead of the one linked to in /usr/local/bin (which doesn't seem to work))Or you can create a file called phpunit-debug (to store the XDEBUG_CONFIG environment variable) as outlined here: phpunit xdebugDid you try to :Hope that help.The correct name of the setting is xdebug.profiler_enable with an underscore. Change your command to this:You can run Xdebug from the command line by setting an environment variable beforehand, e.g.:export XDEBUG_CONFIG="idekey=YOUR_IDE_KEY remote_host=localhost remote_enable=1"This worked for me.More information on the Xdebug documentation.The only thing I need to do in the terminal, while using VS code debugger (with WSL), is execute this command:after that I simply run my phpunit command as usual. i.e. phpunit ./tests/ and the debugger will stop on the first breakpoint I have set.If the debugger pauses on unreachable code, you might want to toggle of "Everything" in the debugger pane under Breakpoints.I got this info from https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebugAssuming you already have Xdebug working from your editor/standalone debugger when triggered by cookie/post/get variables, add a shell script to do the same triggering, so you have less to remember:Create ~/bin/php-cli-debug.sh:Then to debug things on the CLI, use something like:Make sure your .bashrc has added ~/bin to your $PATH.First, my environment:php.ini:phpunit.xml:I made a test run configuration on phpstorm like this:

After making run configuration, the below command was run when I clicked debug button in PHPSTORM.Please notice the --teamcity. I have no idea about it :) Also notice the back and forward slashes.I hope this helps everyone.On Windows with phpStormEnter this into the command line:This will add an environment variable that phpStorm will lookout for.

Creating csv file with php

andrei.godea

[Creating csv file with php](https://stackoverflow.com/questions/15501463/creating-csv-file-with-php)

I want to create a csv file, but when I run the code, it returns a blank page and no csv file. I use PHP 5.

I use the following code:Thank you!

2013-03-19 13:55:51Z

I want to create a csv file, but when I run the code, it returns a blank page and no csv file. I use PHP 5.

I use the following code:Thank you!Its blank because you are writing to file. you should write to output using php://output instead and also send header information to indicate that it's csv.Example @Baba's answer is great. But you don't need to use explode because fputcsv takes an array as a parameterFor instance, if you have a three columns, four lines document, here's a more straight version:

How to convert array to a string using methods other than JSON?

maniclorn

[How to convert array to a string using methods other than JSON?](https://stackoverflow.com/questions/6817148/how-to-convert-array-to-a-string-using-methods-other-than-json)

What is a function in PHP used to convert array to string, other than using JSON?I know there is a function that directly does like JSON. I just don't remember.

2011-07-25 13:50:09Z

What is a function in PHP used to convert array to string, other than using JSON?I know there is a function that directly does like JSON. I just don't remember.serialize() is the function you are looking for.  It will return a string representation of its input array or object in a PHP-specific internal format. The string may be converted back to its original form with unserialize().But beware, that not all objects are serializable, or some may be only partially serializable and unable to be completely restored with unserialize().Use the implode() function:ORYou are looking for serialize(). Here is an example:Another good alternative is http_build_queryWill print More info here http://php.net/manual/en/function.http-build-query.phpuse php implode() or serialize()Display array in beautiful way:Displays:There are different ways to do this some of them has given.

implode(), join(), var_export(), print_r(), serialize(), json_encode()exc... You can also write your own function without these:A For() loop is very useful. You can add your array's value to another variable like this:In this code we added $dizi's values and comma to $dizin:$dizin.=("'$dizi[$i]',");NowIt's a string, but it has an extra comma :)And then we deleted the last comma, substr($dizin, 0, -1);Output:

Return current date plus 7 days

James Clear

[Return current date plus 7 days](https://stackoverflow.com/questions/11988428/return-current-date-plus-7-days)

I'm Trying to get the current date plus 7 days to display. Example: Today is August 16, 2012, so this php snippet would output August 23, 2012.Right now, I'm getting: Jan 08, 1970. What am I missing?

2012-08-16 13:38:56Z

I'm Trying to get the current date plus 7 days to display. Example: Today is August 16, 2012, so this php snippet would output August 23, 2012.Right now, I'm getting: Jan 08, 1970. What am I missing?strtotime will automatically use the current unix timestamp to base your string annotation off of.Just do:Added Info For Future Visitors: If you need to pass a timestamp to the function, the below will work.This will calculate 7 days from yesterday:If it's 7 days from now that you're looking for, just put:you didn't use time() function that returns the current time measured in the number of seconds since the Unix Epoch (January 1 1970 00:00:00 GMT).

use like this:This code works for me:

「usort」a Doctrine\Common\Collections\ArrayCollection?

luiges90

[「usort」a Doctrine\Common\Collections\ArrayCollection?](https://stackoverflow.com/questions/16705425/usort-a-doctrine-common-collections-arraycollection)

In various cases I need to sort a Doctrine\Common\Collections\ArrayCollection according to a property in the object. Without finding a method doing that right away, I do this:I presume this is not the best way when you have to copy everything to native PHP array and back. I wonder if there is a better way to "usort" a Doctrine\Common\Collections\ArrayCollection. Do I miss any doc?

2013-05-23 03:56:01Z

In various cases I need to sort a Doctrine\Common\Collections\ArrayCollection according to a property in the object. Without finding a method doing that right away, I do this:I presume this is not the best way when you have to copy everything to native PHP array and back. I wonder if there is a better way to "usort" a Doctrine\Common\Collections\ArrayCollection. Do I miss any doc?To sort an existing Collection you are looking for the ArrayCollection::getIterator() method which returns an ArrayIterator. example:The easiest way would be letting the query in the repository handle your sorting. Imagine you have a SuperEntity with a ManyToMany relationship with Category entities.Then for instance creating a repository method like this:... makes sorting pretty easy.Hope that helps.Since Doctrine 2.3 you can use the Criteria APIEg:If you have an ArrayCollection field you could order with annotations. eg:Say an Entity named Society has many Licenses. You could useThat will order the ArrayCollection by endDate (datetime field) in desc order.See Doctrine documentation: http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#orderbyDoctrine criteria does not allow to order by a property on a related object.If you want to do it (like me), you have to use the uasort method of the Iterator like a previous response and if you use PHP 7, you can use the Spaceship operator <=> like this :

Check if string is just white space? [duplicate]

JD Isaacks

[Check if string is just white space? [duplicate]](https://stackoverflow.com/questions/2992329/check-if-string-is-just-white-space)

I do not want to change a string nor do I want to check if it contains white space. I want to check if the entire string is ONLY white space. What the best way to do that?

2010-06-07 19:06:13Z

I do not want to change a string nor do I want to check if it contains white space. I want to check if the entire string is ONLY white space. What the best way to do that?This will be the fastest way:Returns false on empty string because empty is not white-space. If you need to include an empty string, you can add || $str == '' This will still result in faster execution than regex or trim.ctype_spacesince trim returns a string with whitespace removed, use that to check This should do the trick.preg_match('/^\s*$/',$string)change * to + if empty is not allowed

How do you get php working on Mac OS X?

AJA

[How do you get php working on Mac OS X?](https://stackoverflow.com/questions/6790568/how-do-you-get-php-working-on-mac-os-x)

I have recently updated to Lion and enabled Web Sharing in the System Preferences but I am unable to get php working.I added an info file to the web root directory and it outputs the file as text.

2011-07-22 13:17:59Z

I have recently updated to Lion and enabled Web Sharing in the System Preferences but I am unable to get php working.I added an info file to the web root directory and it outputs the file as text.(Edit: This method appears to work fine for 10.9 (Mavericks), 10.10 (Yosemite) and 10.11 (El Capitan), so I figured I'd mention that for any new influx of slightly frustrated OS X updaters :D )Edit your /etc/apache2/httpd.conf and make sure the line:...exists. I think it's commented out by default in the standard OS X config, but from what I remember, you just need to uncomment it, then re-start Apache:And you should be good to go.UPDATE: Please note that this was written for OS X pre-(High) Sierra. If you run OSX 10.12 or newer, please follow this more than excellent guide by Andy Miller: macOS 10.13 High Sierra Apache Setup: Multiple PHP VersionsI too like to use things that are basically already there. I don't see why anyone would use MAMP or AMPPS (or any other packed 3rd party out-of-box webserver app) when Mac OS X comes with apache and PHP by default.Took me a couple of tries to get it working, so here is basically what did it for me and hopefully it'll help you guys save a little time.Like Matt Gibson said, start terminal and type: (sudo requires your root password)Then uncomment this line by removing the '#' in front of it (ctrl+v can be used as page-down)To make sure you can include files etc in PHP, scroll to "User _www" (in my case) and change that to: (where "yourusername" is the user you login with)You can leave the group as-is, "Group _www" by default on a fresh OS X Mountain Lion install.On default apache only looks for index.html, so search for "DirectoryIndex index.html" and change that to: (adding index.html at the end is optional of course)Exit and save by pressing ctrl+x (and confirm with "y")Then restart apache:My phpinfo(); returned with a PHP Version 5.3.15==================Since I find it useful to have my local sites in my user dir, I created a directory /Users/yourusername/Sites (which isn't there on default anymore in Mountain Lion).Again, edit httpd.conf via "sudo nano /etc/apache2/httpd.conf" and ...Scroll down to "DocumentRoot" and change it to: (where "yourusername" is the username you login with)Scroll to where it says "# This should be changed to whatever you set DocumentRoot to." and change the next line to: (where "yourusername" is the username you login with)Then exit and save by pressing ctrl+x (and confirm with "y")Restart apache.I have one word for you. MAMP.Try it phpbrewIt's ease build, install tool for PHP, any version.For the latest version of mac os i.e Mojave 10.14, follow the steps below to activate PHP server:Now you can check the working of your server by opening the PHP file from your default server directory or you can also change the directory as well.After upgrading the MAC OSX to 10.14.5 My Apache config file was new and all my previous settings were replaced with default settings. I was not able to open any PHP files in my browser. I followed the above steps and it resolved the issue.Note - In OSX 10.14.5 there is Php7.1.23Steps I followed - LoadModule php7_module libexec/apache2/libphp7.soThank you for the solution, appreciated your help friends. Regards,Vicky Jadhav (India - pune) 

PSR-2 standard for long if-conditions

user3631654

[PSR-2 standard for long if-conditions](https://stackoverflow.com/questions/23758916/psr-2-standard-for-long-if-conditions)

I did not find any standard for this case:orImagine the var-names are longer and 80 letters are exceeded. How should I handle this?

It could look like:

2014-05-20 11:44:41Z

I did not find any standard for this case:orImagine the var-names are longer and 80 letters are exceeded. How should I handle this?

It could look like:There is no recommendation / convention for this case, and as Halcyon already mentioned this is a quite exceptional case.However, there is a recommendation for a function call with a long list of parameters:So if I had to create an if-statement similar to your's, I'd do this:As you can see, this is almost the same as the solution you proposed yourself, but I prefer adding the && operators after the conditions.Personally, I preferFor each line, you start with the double ampersand, indicating that the following statement is separate from the others. If you put the ampersand on the end of the line, it can become less obvious when the lines vary a lot in length.For example;In this case you have to scan the code more to know that each line is connected by a double ampersand.One year later, I would strongly recommend to rewrite your code to have a shorter if statement. Through variables or function calls.I came into this situation, so I decided to go with the following format:But, I use phpcbf, which transformed (following the PSR2 standard) the previous code into:I wanted to know more: how does it know that this is the behaviour expected by the standard if it is not written anywhere? Well, the answer is simple: the case is taken into account by the standard, by the following sentence:This explains why the second snippet is the one, and the only one, which follows the PSR-2 standard, as declared by php-fig.I prefer putting logical operators in long if statements at the beginning of the line, mainly for readability and better behavior in version control.Note that as also mentioned in the other answers it's usually a code smell to have long if statements. However sometimes you have to do it, or the code is already there and you can't rewrite it, so if it's already a bad thing then it helps not to make even more of a mess.Also these things apply to if statements with just a single "and" where the different elements are so long you still need to split it to multiple lines (long variable or class names for instance).Readability: As all logical operators are vertically grouped you can instantly see which operator is on each line. As your eye scans the code it can just move straight vertically and it only needs to move horizontally when there is an actual extra logical level.If the operators are at the end of the line your eye needs to move back and forth randomly between lines of uneven lenght.Better behavior in version control: When an extra clause is added at the bottom of the if statement then this translates to 1 line added and 0 removed in version control.If you put logical operators at the end then that will be 2 lines added and 1 removed. That in turn obscures useful information: your commit message for the last change will be shown for both lines when you Git annotate, so you would have to go to the previous version to see the commit message for the line you added the operator to.Worth mention that the new standard PSR-12, that replaces PSR-2, clarifies this question.Source: https://www.php-fig.org/psr/psr-12/#51-if-elseif-elseMy favourite approach is to remove sub-expressions from the IF statement, as follows: This approach will make it also easier to debug.The second case you expose is equivalent to the first one due to the associative property of the logic operators. Therefore, $a && $b && $c is the same as ($a && $b) && $c, which is the same as $a && ($b && $c)I would suggest you try to think about the operation in different terms. For example:You will perhaps find that you can express the whole algorithm as more of an operation on a set, use an array instead of individual variables and use logical operations on the set like shown above. That can lead to drastically different and more readable code.Another example of refactoring:I prefer it at the beginning as well:I prefer to do it in this style:But again, keep your if's as simple as possible.Maybe it's a better idea to separate a big condition in multiple if's.For your question, I would create a function which takes an array and returns true if all && are met. Then, in my main code you'd have likeA good way in my opinion is to do something like thisOf course, this can be used without wrapper function as well. It's really easy to debug: just var_dump the $criteria-variable, and you get the list of what succeed and what failed.ResultsThis is only an example, for something simple like this string detection, you should use regex.

PHP myAdmin - Change Field Order (Move Up Or Down)

Joshua

[PHP myAdmin - Change Field Order (Move Up Or Down)](https://stackoverflow.com/questions/1962448/php-myadmin-change-field-order-move-up-or-down)

How do I change the order of my table fields without deleting the field and re-inserting it, using PHP myAdmin?

2009-12-26 02:06:02Z

How do I change the order of my table fields without deleting the field and re-inserting it, using PHP myAdmin?DATATYPE is something like DATETIME or VARCHAR(20) ..etcIf you have phpMyAdmin 4.0.0+, you can use the phpMyAdmin Feature under Structure:Something like this will helpThis will move last_name right after first_name in order.http://dev.mysql.com/doc/refman/5.0/en/change-column-order.htmlIf you decide to change the order of table columns anyway, you can do so as follows:Since version 4.0, phpMyAdmin has a "Move columns" dialog in Structure, that permits you to graphically move columns in the structure.Another alternative:if you have MySQL Workbench you can easily reorder columns using mouse, graphically.Just connect to your database, select your table and after right click, alter table and then drag columns to reorder them.It's simple. Just go to PHPmyadmin, click on your database, then click table. Then click on structure. Below the table look for the button, "Move columns". Click and order the columns the way you want. 

How to use the php that brew installed?

kramer65

[How to use the php that brew installed?](https://stackoverflow.com/questions/20523183/how-to-use-the-php-that-brew-installed)

On my mac I've got php installed and working fine. I recently wanted to install mcrypt, so I did so using brew. Although it seemed to install fine, it doesn't show up in my phpinfo(). So I think that the php that brew installed mcrypt in, isn't the php that apache uses.Does anybody know how I can:All tips are welcome!

2013-12-11 15:31:34Z

On my mac I've got php installed and working fine. I recently wanted to install mcrypt, so I did so using brew. Although it seemed to install fine, it doesn't show up in my phpinfo(). So I think that the php that brew installed mcrypt in, isn't the php that apache uses.Does anybody know how I can:All tips are welcome!You have to make your Apache use the PHP that you just downloaded.Can't comment on stackoverflow yet due to my lack of experience but to add to the above answer is correct.  Just an additional comment to find the correct path:run:or which ever version u have installed and it will show you the path:The contributors of the Homebrew php formula give the following instructions. The exact instructions reproduced here install php7.2. Substitute the php version you need.(Avoid "special" ways of accomplishing your objective; they are often problematic. Sticking to "canonical" approaches is more likely to give you a sustainable and predictable setup.)The contributors of the formula also provide the following instructions for enabling PHP in Apache:These instructions for enabling PHP in Apache appear in stdout when you install php. Alternatively in Terminal use brew info php or visit the Homebrew PHP formula pageI would create an alias to it so you don't disturb the system PHP install.Brew installs into /usr/local/Cellar so you can add the following to your ~/.bash_alias or ~/.profile.brew install php installs php 7.3 at the moment, versions below are keg-onlyYou can make aliases for versions below by adding this to:~/.profile~/.bashrc~/.zshrcThen you can:If you use composer and the platform php is not set in your project then this can be handy:~/.profileIf you use artisan a lot (artisan maps to php which is 7.3) then this can be handy:~/.profileTry: brew link php71 --force to use brew specific php version.

It worked for me.

How to check an IP address is within a range of two IPs in PHP?

guitarlass

[How to check an IP address is within a range of two IPs in PHP?](https://stackoverflow.com/questions/11121817/how-to-check-an-ip-address-is-within-a-range-of-two-ips-in-php)

I have an IP address and I'm given two other IP addresses which together creates an IP range. I want to check if the first IP address is within this range. How can i find that out in PHP?

2012-06-20 14:29:14Z

I have an IP address and I'm given two other IP addresses which together creates an IP range. I want to check if the first IP address is within this range. How can i find that out in PHP?With ip2long() it's easy to convert your addresses to numbers. After this, you just have to check if the number is in range:This website offers a great guide and code to do this (which was the first result of a Google search for this question):I found this little gist

which has simpler/shorter solution than already mentioned here. Second argument (range) can either be a static ip such as 127.0.0.1 or a range like 127.0.0.0/24.I would always suggest ip2long, but sometimes you need to check networks and etc. I've built in the past a IPv4 Networking class, which can be found here on HighOnPHP.The nice thing about working with IP addressing is it's flexibility especially when using BITWISE operators. AND'ing, OR'ing and BitShifting will work like a charm.The following two functions were introduced in PHP 5.1.0, inet_pton and inet_pton. Their purpose is to convert human readable IP addresses into their packed in_addr representation. Since the result is not pure binary, we need to use the unpack function in order to apply bitwise operators.Both functions support IPv6 as well as IPv4. The only difference is how you unpack the address from the results. With IPv6, you will unpack with contents with A16, and with IPv4, you will unpack with A4.To put the previous in a perspective here is a little sample output to help clarify:We demonstrate above that the inet_* family supports both IPv6 and v4. Our next step will be to translate the packed result into an unpacked variable.Note : The current function returns the first index of an array. It is equivelant to saying $array[0].After the unpacking and packing, we can see we achieved the same result as input. This is a simple proof of concept to ensure we are not losing any data.Finally use,Reference: php.netBtw, in case you need to check multiple ranges at once you can add few rows to the code in order to pass array of ranges. The second argument can be an array or string:Here is my approach of the subject.

Set Font Color, Font Face and Font Size in PHPExcel

som

[Set Font Color, Font Face and Font Size in PHPExcel](https://stackoverflow.com/questions/17317301/set-font-color-font-face-and-font-size-in-phpexcel)

I'm working in PHPExcel. I'm beginner.When I'm using following code and its working fine.But when I'm using following code and not getting expected result as above.Please help me what am I doing wrong in above code.Thank you in advance!

2013-06-26 10:13:10Z

I'm working in PHPExcel. I'm beginner.When I'm using following code and its working fine.But when I'm using following code and not getting expected result as above.Please help me what am I doing wrong in above code.Thank you in advance!I recommend you start reading the documentation (4.6.18. Formatting cells). When applying a lot of formatting it's better to use applyFromArray() According to the documentation this method is also suppose to be faster when you're setting many style properties. There's an annex where you can find all the possible keys for this function.This will work for you:To apply font style to complete excel document:

Mysql transactions within transactions

Brian

[Mysql transactions within transactions](https://stackoverflow.com/questions/1490846/mysql-transactions-within-transactions)

In a PHP script working with a mysql database, I recently had the need to use a transaction at a point that happened to be inside another transaction.  All my tests seem to indicate this is working out fine, but I can't find any documentation on this usage.I want to be sure - are transactions within transactions valid in mysql?  If so, is there a way to find out how many levels deep you are in nested transactions?  (ie. how many rollbacks it would take to return to normal)Thanks in advance,

Brian

2009-09-29 06:16:49Z

In a PHP script working with a mysql database, I recently had the need to use a transaction at a point that happened to be inside another transaction.  All my tests seem to indicate this is working out fine, but I can't find any documentation on this usage.I want to be sure - are transactions within transactions valid in mysql?  If so, is there a way to find out how many levels deep you are in nested transactions?  (ie. how many rollbacks it would take to return to normal)Thanks in advance,

BrianThis page of the manual might interest you : 12.3.3. Statements That Cause an Implicit Commit; quoting a few sentences :And, a bit farther in the page :See also this paragraph :Contrary to everyone else's answer, you can effectively create transactions within transactions and it's really easy. You just create SAVEPOINT locations and use ROLLBACK TO savepoint to rollback part of the transaction, where savepoint is whatever name you give the savepoint.

Link to MySQL documentation: http://dev.mysql.com/doc/refman/5.0/en/savepoint.html

And of course, none of the queries anywhere in the transaction should be of the type that implicitly commit, or the whole transaction will be committed.Examples:In PHP I have written code like this, and it works perfectly:No.MySql doesn't support nested transactions. There are a few ways that you can emulate it though. First, you can use savepoints as a form of transaction, so that gives you two levels of transactions; I've used this for testing, but I'm not sure about the limitations, if you use it in production code. A simpler solution is to ignore the second begin transaction and instead increase a counter. For each commit, you decrease it. Once you hit zero, you do an actual commit. There are obvious limitations of this; Eg. a rollback will roll all transactions back, but for a case where you only use transactions for error-handling, that may be acceptable.There are some great answers in this thread, however, if you use innoDB as your MySQL storage engine and are using MySQL 5.0.3 or higher, you get nested transactions right out of the box without the need for any extra work on your part or any of the fancy techniques described by others in this thread. From the MySQL docs on XA Transactions:My XA Transaction Example Just For You:MySQL Documentation For XA Transactions:I <3 XA Transactions 4 Eva!You might want to check your testing methadology.  Outside of MaxDB, MySQL doesn't support anything remotely like nested transactions. It does:

http://dev.mysql.com/doc/refman/5.0/en/xa.html

Typecasting vs function to convert variable type in PHP

Matías Cánepa

[Typecasting vs function to convert variable type in PHP](https://stackoverflow.com/questions/30940148/typecasting-vs-function-to-convert-variable-type-in-php)

Is there any difference between typecasting and using a function to convert a variable to some type?(float)$var VS. floatval($var)If there are, when one of those should be used instead of the other?

2015-06-19 14:03:19Z

Is there any difference between typecasting and using a function to convert a variable to some type?(float)$var VS. floatval($var)If there are, when one of those should be used instead of the other?There's no difference in the resulting value, just:The last point is, I believe, the main reason for floatval's existence: so each casting operation has a function equivalent, which can be useful in some circumstances.

phpMyAdmin Duplicate Table

I wrestled a bear once.

[phpMyAdmin Duplicate Table](https://stackoverflow.com/questions/13210429/phpmyadmin-duplicate-table)

Is there some way to get phpMyAdmin to spit out the SQL needed to duplicate the table in another DB?I saved it when I initially made the table but I've changed it quite a bit since then. It's a pretty big table and this would really help.

2012-11-03 15:12:48Z

Is there some way to get phpMyAdmin to spit out the SQL needed to duplicate the table in another DB?I saved it when I initially made the table but I've changed it quite a bit since then. It's a pretty big table and this would really help.Yes, you can navigate to the table you want and then go to (tab) Operations > Copy table to (database.table):, which is a box on the right hand side. There you can define into which database and under what name you'd like to copy your table. After having done than you get the SQL "spat out".  As I'm not completely sure about your question, if you'd like to have the table in a dump file, you could alternatively click the tab Export, where you can get the SQL as well, or download the dump file straight away.You can use the Export tab to select which table to export. In the diagram below,

What do the ENT_HTML5, ENT_HTML401, … modifiers on html_entity_decode do?

Luis Siquot

[What do the ENT_HTML5, ENT_HTML401, … modifiers on html_entity_decode do?](https://stackoverflow.com/questions/13745353/what-do-the-ent-html5-ent-html401-modifiers-on-html-entity-decode-do)

Since php 5.4 html_entity_decode introduces four new flags, with a minimal explanationI want to understand what are they for. In which cases are they significant?    My guess, (but may I be wrong) is that any different standard, encodes some unusual chars but any other don't, so in order to respect that, they are here.My research: htmlentities has the same minimal explanation, with no examples too.  I have googled with no luck.

2012-12-06 14:09:53Z

Since php 5.4 html_entity_decode introduces four new flags, with a minimal explanationI want to understand what are they for. In which cases are they significant?    My guess, (but may I be wrong) is that any different standard, encodes some unusual chars but any other don't, so in order to respect that, they are here.My research: htmlentities has the same minimal explanation, with no examples too.  I have googled with no luck.I started wondering what behavior these constants have when I saw these constants at the htmlspecialchars page. The documentation was rubbish, so I started digging in the source code of PHP.Basically, these constants affect whether certain entities are encoded or not (or decoded for html_entity_decode). The most obvious effect is whether the apostrophe (') is encoded to &#039; (for ENT_HTML401) or &apos; (for others). Similarly, it determines whether &apos; is decoded or not when using html_entity_decode. (&#039; is always decoded).All usages can be found in ext/standard/html.c and its header file. From ext/standard/html.h:(replace ENT_HTML_DOC_ by ENT_ to get their PHP constant names)I started looking for all occurrences of these constants, and can share the following on the behaviour of the ENT_* constants:That covers almost everything. I am not going to list all entity differences, instead I would like to point at https://github.com/php/php-src/tree/php-5.4.11/ext/standard/html_tables for some text files that contain the mappings for each type.When using htmlspecialchars with ENT_COMPAT (default) or ENT_NOQUOTES, it does not matter which one you pick (see below). I saw some answers here on SO that boils down to this:This is insecure. It will override the default value ENT_HTML401 | ENT_COMPAT which has as difference that HTML5 entities are used, but also that quotes are not escaped anymore! In addition, this is redundant code. The entities that have to be encoded by htmlspecialchars are the same for all ENT_HTML401, ENT_HTML5, etc.Just use ENT_COMPAT or ENT_QUOTES instead. The latter also works when you use apostrophes for attributes (value='foo'). If you only have two arguments for htmlspecialchars, do not include the argument at all since it is the default (ENT_HTML401 is 0, remember?).When you want to print something on the page (between tags, not attributes), it does not matter at all which one you pick as it will have equal effect. It is even sufficient to use ENT_NOQUOTES | ENT_HTML401 which equals to the numeric value 0.See also below, about ENT_SUBTITUTE and ENT_DISALLOWED.If your text editor or database is so crappy that you cannot include non-US-ASCII characters (e.g. UTF-8), you can use htmlentities. Otherwise, save some bytes and use htmlspecialchars instead (see above).Whether you need to use ENT_HTML401, ENT_HTML5 or something else depends on how your page is served. When you have a HTML5 page (<!doctype html>), use ENT_HTML5. XHTML or XML? Use the corresponding ENT_XHTML or ENT_XML1. With no doctype or plain ol' HTML4, use ENT_HTML401 (which is the default when omitted).By default, byte sequences that are invalid for the given character set are removed. To have a � in place of an invalid byte sequence, specify ENT_SUBSTITUTE. (note that &#FFFD; is shown for non-UTF-8 charsets). When you specify ENT_IGNORE though, these characters are not shown even if you specified ENT_SUBSTITUTE.Invalid characters for a document type are substituted by the same replacement character (or its entity) above when ENT_DISALLOWED is specified. This happens regardless of having ENT_IGNORE set (which has nothing to do with invalid chars for doctypes).

'At' symbol before variable name in PHP: @$_POST

Majid Fouladpour

['At' symbol before variable name in PHP: @$_POST](https://stackoverflow.com/questions/3551527/at-symbol-before-variable-name-in-php-post)

I've seen function calls preceded with an at symbol to switch off warnings. Today I was skimming some code and found this:What good will it do here?

2010-08-23 20:43:15Z

I've seen function calls preceded with an at symbol to switch off warnings. Today I was skimming some code and found this:What good will it do here?The @ is the error suppression operator in PHP.See:In your example, it is used before the variable name to avoid the E_NOTICE error there. If in the $_POST array, the hn key is not set; it will throw an E_NOTICE message, but @ is used there to avoid that E_NOTICE.Note that you can also put this line on top of your script to avoid an E_NOTICE error:It won't throw a warning if $_POST['hn'] is not set.All that means is that, if $_POST['hn'] is not defined, then instead of throwing an error or warning, PHP will just assign NULL to $hn.  It suppresses warnings if $_POST['something'] is not defined.

Cannot start session without errors in phpMyAdmin

rciiipo

[Cannot start session without errors in phpMyAdmin](https://stackoverflow.com/questions/5013118/cannot-start-session-without-errors-in-phpmyadmin)

I get the below error when pointing browser to phpMyAdminI have checked everything and can't seem to figure out what the problem is. In my php.ini file I have:Permissions:  Nothing seems to work. Even changing permission on session directory to 777.

2011-02-16 06:17:48Z

I get the below error when pointing browser to phpMyAdminI have checked everything and can't seem to figure out what the problem is. In my php.ini file I have:Permissions:  Nothing seems to work. Even changing permission on session directory to 777.Problem usually lies on your browser end. You need to flush your browser cache, delete the cookies for the server/host and then retry loading phpMyAdmin.If you want to go all out, clear out the session folder on the server as well.One possible reason for this is a session data mismatch between the browser and the webserver causing it to not be able to pull out the required session info and dumping this error dialogue on your lap. The problem can be due to file and folder permissions; You can try changing the folder permissions:This will set full read/write permissions on the PHP sessions folder.Note: the php/session/ folder may be in a different location on some servers. Check your php.ini for your session path.In my case it was the wrong ownership for /var/lib/php/session.  I changed that to the Apache user and group (the user and group that the webserver runs as) and all was well.Set the session.save_path in your php.ini. Make sure that you are using an existing directory.If still you found any issue then give write & execution permission to that folder for the user by which you are going to use that folder.[This is specially used in case of IIS]There appears to be two common causes for this error, one is to do with the server configuration and the session.save_path and the other is the browser cache.If you encounter this error try using a different browser or machine before you attempt to alter your Apache and PHP configurations on the server! Note that clearing the Cookies for the server is not enough, you need to clear the cache. In Firefox clearing all history and cookies is easy, but you may not want to get rid of

everything. Clearing the cache is hidden away in Firefox:Tools > Options > Advanced > Network:

Cached Web Content - Clear NowIf you use nginx (like me), just change the ownership of the folders under /var/lib/php/ from apache to nginx:And also for the folders under /var/lib/phpMyAdmin/:Ok,I'm using windows 7 ultimate and WAMP 2.4 server

The tmp folder was missing, so I created one and this solved my problem.

Check the php.ini file for the correct path: session.save_pathLogin fails if session folder in not writeable. To check that, create a PHP file in your web directory with:If session folder is not writeable do eithersudo setfacl -R -m u:www-data:rwx <session directory> or chmod 777 <session directory>

 - For Xampp, Deleting temp flies from the 'root' folder works for me.THI worked on this same problem for a full day.   The answer for me was to simply clear my browser's cache.  Too bad, I had already reinstalled the webserver/phpmyadmin 3 times.  :(I cleared browser cache.  Created session folder as listed in phpinfo.php.It worked !Knowing this thread is marked as solved, it shows up early on Google Search for the given term. So I thought it might be useful to mention another reason that can lead to this error.If you enabled "safe/secure cookies", that has to be disabled for phpMyAdmin as it wont work with them being activated. So make sure you have nothing like:in your config.The problem can also be that you have a wrong session.save_handler value in your php.ini. I got this error when I changed it to memcached, and worked again when changing back to filesFirst: if not session dir (in my case it was)Second: set privilege for session dirProblem I found in Windows server 2016 was that the permissions were wrong on the temp directory used by PHP. I added IUSR.This is sometimes due to an invalid session key.  If using XAMPP, what worked for me was opening the temp folder in XAMPP  xampp/temp then deleting the session files starting with sess_

How to remove multiple UTF-8 BOM sequences

sheppardzw

[How to remove multiple UTF-8 BOM sequences](https://stackoverflow.com/questions/10290849/how-to-remove-multiple-utf-8-bom-sequences)

Using PHP5 (cgi) to output template files from the filesystem and having issues spitting out raw HTML.Even though I've added the BOM fix I'm still having problems with Firefox accepting it. You can see a live copy here: http://ircb.in/jisti/ (and the template file I threw at http://ircb.in/jisti/home.html if you want to check it out)Any idea how to fix this? o_o

2012-04-24 02:04:55Z

Using PHP5 (cgi) to output template files from the filesystem and having issues spitting out raw HTML.Even though I've added the BOM fix I'm still having problems with Firefox accepting it. You can see a live copy here: http://ircb.in/jisti/ (and the template file I threw at http://ircb.in/jisti/home.html if you want to check it out)Any idea how to fix this? o_oyou would use the following code to remove utf8 bomtry: :)Another way to remove the BOM which is Unicode code point U+FEFFb'\xef\xbb\xbf' stands for the literal string "\xef\xbb\xbf". If you want to check for a BOM, you need to use double quotes, so the \x sequences are actually interpreted into bytes:Your files also seem to contain a lot more garbage than just a single leading BOM:This global funtion resolve for UTF-8 system base charset. Tanks!if anybody using csv import then below code usefulAn extra method to do the same job:The other methods I found cannot work in my case.Hope it helps in some special case.If you are reading some API using file_get_contents and got an inexplicable NULL from json_decode, check the value of json_last_error(): sometimes the value returned from file_get_contents will have an extraneous BOM that is almost invisible when you inspect the string, but will make json_last_error() to return  JSON_ERROR_SYNTAX (4).In this case, check the first 3 bytes - echoing them is not very useful because the BOM is invisible on most settings:If the line above returns TRUE for you, then a simple test may fix the problem:A solution without pack function:When working with faulty software it happens that the BOM part gets multiplied with every saving.So I am using this to get rid of it.This might help. let me know if you care for me to expand my thought process.Result:

Best way to remove trailing slashes in URLs with PHP

daniel

[Best way to remove trailing slashes in URLs with PHP](https://stackoverflow.com/questions/2392677/best-way-to-remove-trailing-slashes-in-urls-with-php)

I have some URLs, like www.amazon.com/, www.digg.com or www.microsoft.com/ and I want to remove the trailing slash, if it exists, so not just the last character. Is there a trim or rtrim for this?

2010-03-06 13:59:47Z

I have some URLs, like www.amazon.com/, www.digg.com or www.microsoft.com/ and I want to remove the trailing slash, if it exists, so not just the last character. Is there a trim or rtrim for this?You put rtrim in your answer, why not just look it up?As a side note, look up any PHP function by doing the following:(rtrim stands for 'Right trim')Simple and works across both Windows and Unix:I came here looking for a way to remove trailing slash and redirect the browser, I have come up with an answer that I would like to share for anyone coming after me:The ($_SERVER['REQUEST_URI'] != "/") will avoid host URI e.g www.amazon.com/ because web browsers always send a trailing slash after a domain name, and preg_match('{/$}',$_SERVER['REQUEST_URI']) will match all other URI with trailing slash as last character. Then preg_replace('{/$}', '', $_SERVER['REQUEST_URI']) will remove the slash and hand over to header() to redirect. The exit() function is important  to stop any further code execution. 

Detect HTML tags in a string

bcmcfc

[Detect HTML tags in a string](https://stackoverflow.com/questions/5732758/detect-html-tags-in-a-string)

I need to detect whether a string contains HTML tags. The above regex gives me an error:I'm not well up on regex so not sure what the problem was. I tried escaping the \ and it didn't do anything. Is there a better solution than regex? If not, what would be the correct regex to work with the preg_match?

2011-04-20 15:22:18Z

I need to detect whether a string contains HTML tags. The above regex gives me an error:I'm not well up on regex so not sure what the problem was. I tried escaping the \ and it didn't do anything. Is there a better solution than regex? If not, what would be the correct regex to work with the preg_match?A simple solution is:The benefit of this over a regex is it's easier to understand, however I could not comment on the speed of execution of either solution.you need to 'delimit' the regex with some character or another.  Try this:If you just want to detect/replace certain tags: This function will search for certain html tags and encapsulate them in brackets - which is pretty senseless - just modify it to whatever you want to do with the tags. Explaination of the regex:I would use strlen() because if you don't, then a character-by-character comparison is done and that can be slow, though I would expect the comparison to quit as soon as it found a difference.I would recommend you to allow defined tags only! You don't want the user to type the <script> tag, which could cause a XSS vulnerability. Try it with:If purpose is just to check if string contain html tag or not. No matter html tags are valid or not. Then you can try this.This works for all valid or invalid html tags. You can check confirm here https://regex101.com/r/2g7Fx4/3Parsing HTML in general is a hard problem, there is some good material here:But regarding your question ('better' solution) - can be more specific regarding what you are trying to achieve, and what tools are available to you? If your not good at regular expressions (like me) I find lots of regex libraries out there that usually help me accomplish my task.Here is a little tutorial that will explain what your trying to do in php.Here is one of those libraries I was referring to.

Getting title and meta tags from external website

MacMac

[Getting title and meta tags from external website](https://stackoverflow.com/questions/3711357/getting-title-and-meta-tags-from-external-website)

I want to try figure out how to get theEven though if it's arranged in any order, I've heard of the PHP Simple HTML DOM Parser but I don't really want to use it. Is it possible for a solution except using the PHP Simple HTML DOM Parser. preg_match will not be able to do it if it's invalid HTML?Can cURL do something like this with preg_match?Facebook does something like this but it's properly used by using:I want something like this so that it is possible when someone posts a link, it should retrieve the title and the meta tags. If there are no meta tags, then it it ignored or the user can set it themselves (but I'll do that later on myself).

2010-09-14 17:27:51Z

I want to try figure out how to get theEven though if it's arranged in any order, I've heard of the PHP Simple HTML DOM Parser but I don't really want to use it. Is it possible for a solution except using the PHP Simple HTML DOM Parser. preg_match will not be able to do it if it's invalid HTML?Can cURL do something like this with preg_match?Facebook does something like this but it's properly used by using:I want something like this so that it is possible when someone posts a link, it should retrieve the title and the meta tags. If there are no meta tags, then it it ignored or the user can set it themselves (but I'll do that later on myself).This is the way it should be:get_meta_tags will help you with all but the title. To get the title just use a regex.Hope that helps.Php's native function:

get_meta_tags()http://php.net/manual/en/function.get-meta-tags.phpYour best bet is to bite the bullet use the DOM Parser - it's the 'right way' to do it. In the long run it'll save you more time than it takes to learn how. Parsing HTML with Regex is known to be unreliable and intolerant of special cases. get_meta_tags did not work with title.Only meta tags with name attributes like will be parsed.Unfortunately, the built in php function get_meta_tags() requires the name parameter, and certain sites, such as twitter leave that off in favor of the property attribute.  This function, using a mix of regex and dom document, will return a keyed array of metatags from a webpage.  It checks for the name parameter, then the property parameter.  This has been tested on instragram, pinterest and twitter.Easy and php's in-built function.http://php.net/manual/en/function.get-meta-tags.phpWe use Apache Tika via php (command line utility) with -j for json :http://tika.apache.org/This is a sample output from a random guardian article :Shouldnt we be using OG?The chosen answer is good but doesn't work when a site is redirected (very common!), and doesn't return OG tags, which are the new industry standard. Here's a little function which is a bit more usable in 2018. It tries to get OG tags and falls back to meta tags if it cant them:How to use it:Get meta tags from url, php function example:Example:Get Meta Tags phpNow a days, most of the sites add meta tags to their sites providing information about their site or any particular article page. Such as news or blog sites.I have created a Meta API which gives you required meta data ac like OpenGraph, Schema.Org, etc.Check it out - https://api.sakiv.com/docsIf you're working with PHP, check out the Pear packages at pear.php.net and see if you find anything useful to you. I've used the RSS packages effectively and it saves a lot of time, provided you can follow how they implement their code via their examples.Specifically take a look at Sax 3 and see if it will work for your needs. Sax 3 is no longer updated but it might be sufficient.As it was already said, this can handle the problem:I made this small composer package based on the top answer: https://github.com/diversen/get-meta-tags And then: It requires CURL and DOMDocument, as the top answer - and is built in the way, but has option for setting curl timeout (and for getting all kind of meta tags). I've got this working a different way and thought I'd share it. Less code than others and found it here. I've added a few things to make it load the page meta that you are on instead of a certain page. I wanted this to copy the default page title and description into the og tags automatically.For some reason though, whatever way (different scripts) I tried, the page loads super slow online but instant on wamp. Not sure why so I'm probably going with a switch case since the site is not huge.and in the HTML headerImproved answer from @shamittomar above to get the meta tags (or the specified one from html source)Can be improved further... the difference from php's default get_meta_tags is that it works even when there is unicode stringHere is PHP simple DOM HTML Class two line code to get page META details.

what does mysql_real_escape_string() really do?

locoboy

[what does mysql_real_escape_string() really do?](https://stackoverflow.com/questions/6327679/what-does-mysql-real-escape-string-really-do)

One thing that I hate about documentation at times (when you're a beginner) is how it doesn't really describe things in english. Would anyone mind translating this documentation for me? I'd like to know how exactly this makes things harder for a hacker to insert characters.http://php.net/manual/en/function.mysql-real-escape-string.phpAlso, if this is the case, how would a hacker try to insert characters?

2011-06-13 07:27:12Z

One thing that I hate about documentation at times (when you're a beginner) is how it doesn't really describe things in english. Would anyone mind translating this documentation for me? I'd like to know how exactly this makes things harder for a hacker to insert characters.http://php.net/manual/en/function.mysql-real-escape-string.phpAlso, if this is the case, how would a hacker try to insert characters?The function adds an escape character, the backslash, \, before certain potentially dangerous characters in a string passed in to the function. The characters escaped are This can help prevent SQL injection attacks which are often performed by using the ' character to append malicious code to an SQL query.Say you want to save the string I'm a "foobar" in the database.

Your query will look something like INSERT INTO foos (text) VALUES ("$text").

With the $text variable replaced, this will look like this:Now, where exactly does the string end? You may know, an SQL parser doesn't. Not only will this simply break this query, it can also be abused to inject SQL commands you didn't intend.mysql_real_escape_string makes sure such ambiguities do not occur by escaping characters which have special meaning to an SQL parser:This becomes:This makes the statement unambiguous and safe. The \ signals that the following character is not to be taken by its special meaning as string terminator. There are a few such characters that mysql_real_escape_string takes care of.Escaping is a pretty universal thing in programming languages BTW, all along the same lines. If you want to type the above sentence literally in PHP, you need to escape it as well for the same reasons:PHP’s mysql_real_escape_string function is only a wrapper for MySQL’s mysql_real_escape_string function. It basically prepares the input string to be safely used in a MySQL string declaration by escaping certain characters so that they can’t be misinterpreted as a string delimiter or an escape sequence delimiter and thereby allow certain injection attacks.The real in mysql_real_escape_string in opposite to mysql_escape_string is due to the fact that it also takes the current character encoding into account as the risky characters are not encoded equally in the different character encodings. But you need to specify the character encoding change properly in order to get mysql_real_escape_string work properly.Best explained here.It generally it helps to avoid SQL injection, for example consider the following code:and a hacker can send a query like:This would allow anyone to log in without a valid password.The mysql_real_escape_string() helps you escape special characters such as single quote etc that users may submit to your script. You need to escape such characters because that comes in handy when you want to avoid SQL Injection.I would sugggest you to check out:mysql_real_escape_string() versus Prepared StatementsTo be on much safer side, you need to go for Prepared Statements instead as demonstrated through above article.The mysqli_real_escape_string() function escapes special characters in a string for use in an SQL statement.

Error in phpMyAdmin after updating to v4.8.0: The $cfg['TempDir'] (./tmp/) is not accessible

David

[Error in phpMyAdmin after updating to v4.8.0: The $cfg['TempDir'] (./tmp/) is not accessible](https://stackoverflow.com/questions/49730100/error-in-phpmyadmin-after-updating-to-v4-8-0-the-cfgtempdir-tmp-is-no)

phpMyAdmin worked fine with v4.7.9. Now after updating to v4.8.0 today (replacing the old phpmyadmin folder against the new one) I'm getting this message in phpMyAdmin:I added the folder ./tmp/ like like this: /usr/share/tmpphpMyAdmin is on: /usr/share/phpmyadminThis didn't change anything.Who know this error? What can I do?

2018-04-09 09:51:44Z

phpMyAdmin worked fine with v4.7.9. Now after updating to v4.8.0 today (replacing the old phpmyadmin folder against the new one) I'm getting this message in phpMyAdmin:I added the folder ./tmp/ like like this: /usr/share/tmpphpMyAdmin is on: /usr/share/phpmyadminThis didn't change anything.Who know this error? What can I do?Solution was to create a folder called tmp like this: /usr/share/phpmyadmin/tmp.Also make sure that the user (or group) running the webserver (e.g. Apache) has write access to the newly created tmp folder. Consequently, change the ownership to that user or add write access for all users. The latter one might not be really advisable.simple fix is to create tmp dir in your phpmyadmin dir and set permission to 777 thenupdate your config.inc.php file add that lineI had this same problem on Ubuntu 18.04 when I replaced the phpMyAdmin version from the package repository (v4.6.6) with the latest version (4.8.0). I don't know if you are running on Ubuntu, but maybe my response will be helpful to you (or others) who encounter something similar.I put the new version in the standard location, /usr/share/phpmyadmin/, but Ubuntu's package installation of PMA puts some configuration settings in other places (see /etc/phpmyadmin/ and /var/lib/phpmyadmin/). I found this setting in /etc/phpmyadmin/apache.conf:and sure enough that directory had been created and had the proper permissions. Wanting to stay as close as possible to the package installation settings, I made this change in /usr/share/phpmyadmin/libraries/vendor_config.php and pointed directly to that folder:This setting is picked up by /usr/share/phpmyadmin/libraries/config.default.php (which you are not supposed to edit) to set $cfg['TempDir'].In my case I addedto the Hope it will help someoneCreate a tmp folder in the base directory of the phpMyAdmin install (e.g. /usr/share/phpmyadmin/tmp), and make sure that it is writable by the user that PHP is running under.Create a temp directory owned by and restricted to the webserver user. Do not place it inside of the phpMyAdmin webroot. (In this example, the webserver runs as apache):Next, set TempDir inside of phpMyAdmin's config.inc.php:Any answer suggesting that you create /usr/share/phpmyadmin/tmp is advocating bad security practice. This is generally true for temp directories, and explicitly stated in the official phpMyAdmin documentation:From the phpMyAdmin documentation:The name of the directory where temporary files can be stored.

It is used for several purposes, currently:The templates cache which speeds up page loading.

        ESRI Shapefiles import, see 6.30 Import: How can I import ESRI Shapefiles?.To work around limitations of open_basedir for uploaded files, see 1.11 I get an ‘open_basedir restriction’ while uploading a file from the import tab..This directory should have as strict permissions as possible as the only user required to access this directory is the one who runs the webserver. If you have root privileges, simply make this user owner of this directory and make it accessible only by it:If you cannot change owner of the directory, you can achieve a similar setup using ACL:If neither of above works for you, you can still make the directory chmod 777, but it might impose risk of other users on system reading and writing data in this directory.well,in my case this error has occured when i was using ubuntu 18.04.

All you need is to go to the installation directory (in ubuntu - opt/lampp/phpmyadmin)

and create a folder tmp with all the suitable read/write permissions.Follow these steps in case of ubuntu-1.go to the PMA installation directory by typing following commands in cmd- 2.Then type the following command- and then you are done..!!

I hope it helps..1) create the tmp folder2) findout your php user3) Change ownership of the tmp folder to the php user found in step 24) Signout of phpmyadmin and sign back inI had the same error message. I'm using Ubuntu16.04 with lampp. You should go to 'phpmyadmin' directory, in my case '/opt/lampp/phpmyadmin/', create a new 'tmp' folder. Open a terminal window and:Now you have to change the group of the 'tmp' folder to give access to php user. In order to find it, you can create a php file inside your localhost directory, in my case 'htdocs'Inside nano editor, type:Then press CTRL + O and CTRL + X to save and exit.

Open the browser and type in your address barIt shows your php user.After that, go to the terminal and navigate to your recently created 'tmp' directory inside phpmyadmin directory and type:And change the permission to the 'tmp' directory:I recommend never give 777 permission to any file.I hope it helps!For Arch and Manjaro users:Create a folder tmp at /etc/webapps/phpmyadmin/ - mkdir /etc/webapps/phpmyadmin/tmpSet permission to 777 - chmod 777 /etc/webapps/phpmyadmin/tmpAdd this line to the config file at /etc/webapps/phpmyadmin/config.inc.php - $cfg['TempDir'] = '/tmp';Cheers :)In my case [MacOs El Capitán/portuguese], the message was:My solution, in xamppfiles/phpmyadmin/config.inc.php:That is, I just added a point to the path... work's fine.I just changed my vendor_config.php file to define('TEMP_DIR', '/tmp/'); instead of define('TEMP_DIR', './tmp/');This seems to work. I had a similiar problem, with the "temp" directory. The solution was to change the owner and group of the "twig" directory (inside "temp") to "apache" (both owner and group)simply go to the phpmyadmin folder and put this code $cfg['TempDir'] = './tmp/';and then check tmp folder is exists or not into phpmyadmin if not exists then create tmp folder and give read and right permission to it.Create the tmp folder in the root of phpmyadmin filesIn addition to that, you also need to provide all permissions to that folder. That's what I did in Windows.For me phpmyadmin dir was found inside /opt/lampp/My Answer goes to centos 7 Sentora users,

tmp folder has to be created under phpMyadmin of Sentora as shown belowcd /etc/sentora/panel/etc/apps/phpmyadmin/

sudo mkdir tmpchown -R apache /etc/sentora/panel/etc/apps/phpmyadmin/tmp/I had the same problem but none of the answers above could solve.

In my case my php security settings was so strict protecting php to access directories out of scope defined in open_basedir located at my /etc/php.d/99-security.ini(which I added perviously from a security toturial and the settings also could be located at /etc/php.ini file in your case):change to:you just need to add your own directory in error mesage ('/usr/share/phpmyadmin/tmp/') and the end of open_basedir option. Don't forget placing separator : before adding it.

Check if JavaScript is enabled with PHP

Will

[Check if JavaScript is enabled with PHP](https://stackoverflow.com/questions/4454551/check-if-javascript-is-enabled-with-php)

Is there a way to check if JavaScript is enabled with PHP? If so, how?

2010-12-15 20:27:36Z

Is there a way to check if JavaScript is enabled with PHP? If so, how?No, that is not possible, because PHP is a server side language, it does not access the client's browser in any way or form (the client requests from the PHP server).The client may provide some meta info through HTTP headers, but they don't necessarily tell you whether the user has JavaScript enabled or not and you can't rely on them anyway,perhaps a more simple option...Technically no because as the other answers have said, PHP is strictly server-side, but you could do this...In the PHP page on the server, output (a lot of HTML has been deleted for brevity)Then in myPage.php set a session variable to indicate the client supports JSBut really, just use <script></script><noscript></noscript> tags, much, much less effort...//Here is a solution: 

//it works perfect//And then inside get-javascript-status.php : You can't tell if a browser has JS enabled, but you can tell if the browser supports JS http://php.net/manual/en/function.get-browser.php$js_capable = get_browser(null, true)=>javascript == 1Having said this, that's probably not of much use. You should reconsider detecting JS from PHP. There should be no need for it if you use progressive enhancement, meaning that JS only adds functionality to what's already on the page.Here is a small include I made up that I have on top of my pages to detect if js is enabled. Hope this helps out...Place above code in your header file after title tag and set appropriate like[disable.html] for redirection.You can try with 2 metod:if you want detect if JS enable enable setting before the loading of the page you can try this (I don't konw if it works):there is a fine tutorial on this issue on address http://www.inspirationbit.com/php-js-detection-of-javascript-browser-settings/before try you have to disable your browsers javascript...after thenTry This code :Write something in script-disabled.htmlits workPHP can't be used to detect whether javascript is enabled or not. Instead use <noscript> to display an alternate message / do something.To get rid of bots with JS disabled:No one can use for example curl -H "Cookie: JSEnabled=XXXXXXXXXXXXXXXXXX"

because they don't know your algo of computing the hash.This is the way I check whether javascript and cookies are enabled or not http://asdlog.com/Check_if_cookies_and_javascript_are_enabledI copy/paste it hereRecently, I had the following dilemma:I use a PHP function that generates a QR image related to the current URL, which is very useful for mobile devices. The function works fine, but having my site on a shared hosting, there are some limits for CPU and RAM usage. This function is to heavy and it consumes a lot of CPU time and RAM, so the hosting guys asked me to decrease the usage.After some tries, I finally reached the idea that I can save some CPU & RAM usage from search engine bots. It is difficult to recognize a bot by browser identification, but all the bots have no JS enabled and that's the main criteria I used to detect if it is a real browser or it is a bot. To explain how significant it is to prevent executing code which will not give anything more for Search Engines (QR, in my case, does not affect search engines), I can say that just Google bot for example makes about 16000 crawls a day on my site.So I've made this very simple thing which helped a lot:This code uses JS to write a line of PHP code, so this line will be written only when JS is enabled. Of couse you can use 'noscript' tag if you want to show something when JS is disabled, but this method shows how to execute some PHP only when JS is enabled.Hope this helps.Create a cookie using JavaScript and read it using PHP.With this basic ajax you can separate data that the client see based on javascript or not.index.phpjscheckCon.phpPlease despite all the people telling you cant check for a client-side scripting technology. If the target technology has http functions, you can do ALWAYS, just write out a verify step. That means literally, the way to check javascript is to run javascript. If javascript is disabled on the browser side it's not possible to check if the client is Javascript capable (like Dillo with it's default config or others)UPDATED: I've develop this script because i test some of the examples here and seems that everybody does copypasting without any sort of tests. Code is also on the Gist https://gist.github.com/erm3nda/4af114b520c7208f8f3f (updated)This solution do not need more files, just a iteration if you run a Javascript capable browser. The value is passed back to PHP using a GET with a simple variable but anyone can fake the output doing cURL to url + ?sessionstart=1 unless you add more logic to it.Make your main php page assume jscript is off, and add a <script> to redirect to the jscript-enabled app in the <head>. If the user actually uses your first page, assume jscript is off.Other option:

If you dont' have to check if JS is enabled at the visitors first view (mainpage) you can set a cookie with js. On the next page you can check with php if the cookie is there...You can use logic the logic (default/switch) - is this example I printed the variable in php:PHP:JS: (in my document ready)You can set a cookie using Javascript and then reload the page using Javascript. Then using PHP you shall check if the cookie is setted, if it is Javascript is enabled!Its 2013. Simply have your script render the non-js templates inside a body > noscript tag, then inside your CSS keep your main js site container div display: none; After that just put something like <script>$('#container').show();</script> immediately after you close you main #container div and before your noscript tag. (if you're using jquery of course).Doing it this way will show the HTML for the non-js enabled browsers automatically, and then the js enabled browsers will only see the js site.If you're worried about over-bloating the page size with too much mark up, then you could do the same but instead leave <div id="content"></div> empty, then with the js code instead of just showing the div use an ajax call to fetch the content for it.On a  side note, I would probably include additional css files for the non-js site within the noscript tag to save on bandwidth. Since PHP is server side you can't know in PHP whether the client has Javascript enabled unless you use sessions (or some other way to store data across requests) and first send some code to which the client responds.If you put the following at the start of your PHP file the client is redirected to the same URL with either 'js=0' or 'js=1' appended to the query string, depending on whether they have Javascript enabled or not. Upon receiving the redirected request the script records the result in a session variable and then redirects back to the original URL, i.e. without the appended 'js=0' or 'js=1'.Upon receiving this second redirect the script proceeds as normal, now with the session variable set according to the clients Javascript capability.If you don't care about how your query string looks in the user's address bar you can skip the second redirect and just set the session variable. While these redirects are taking place the user is shown a short informative message (also something you could skip if you don't care about that).if checking when the page first loads, this can run php if javascript is disabled: Yes.Ensure you have the latest jQuery.js

How to search in an array with preg_match?

Jorge Olaf Erlandsen

[How to search in an array with preg_match?](https://stackoverflow.com/questions/8627334/how-to-search-in-an-array-with-preg-match)

How do I search in an array with preg_match?Example:

2011-12-24 23:01:35Z

How do I search in an array with preg_match?Example:In this post I'll provide you with three different methods of doing what you ask for. I actually recommend using the last snippet, since it's easiest to comprehend as well as being quite neat in code.There is a function dedicated for just this purpose, preg_grep. It will take a regular expression as first parameter, and an array as the second.See the below example:outputarray_reduce with preg_match can solve this issue in clean manner; see the snippet below.outputDocumentationYes, and this one is actually cleaner though it doesn't involve using any pre-existing array_* or preg_* function.Wrap it in a function if you are going to use this method more than once.DocumentationUse preg_grepYou can use array_walk to apply your preg_match function to each element of the array.http://us3.php.net/array_walkOutput

ReflectionException: Class ClassName does not exist - Laravel

Nana Partykar

[ReflectionException: Class ClassName does not exist - Laravel](https://stackoverflow.com/questions/32475892/reflectionexception-class-classname-does-not-exist-laravel)

As soon, I am typing php artisan db:seed command. I'm getting Error Like:root@dd-desktop:/opt/lampp/htdocs/dd/laravel# php artisan db:seedHere, Is my UserTableSeeder.php & DatabaseSeeder.php PageUserTableSeeder.phpDatabaseSeeder.phpI'm Referring This Link To Design & Develop Login Page.

Please Help me to resolve this issue. Thanks.

2015-09-09 09:30:00Z

As soon, I am typing php artisan db:seed command. I'm getting Error Like:root@dd-desktop:/opt/lampp/htdocs/dd/laravel# php artisan db:seedHere, Is my UserTableSeeder.php & DatabaseSeeder.php PageUserTableSeeder.phpDatabaseSeeder.phpI'm Referring This Link To Design & Develop Login Page.

Please Help me to resolve this issue. Thanks.Perform a composer update, then composer dump-autoload.If the above doesn't solve the problem, change the classmap in your composer.json file such that it contains the project-relative path to your php files:and soon after, perform a composer dump-autoload, and it should work now like a breeze!If composer dump-autoload is not found, just enable this option composer config -g -- disable-tls true.From my experience, this will show up most of the time when the class you are trying to call has some bugs and cannot be compiled.  Check if the class that is not being reflected can be executed at its own.A composer dump-autoload should fix it.I had this problem and I could solve it by doing php artisan config:cache.  The problem was that I had already run that command previously and later included some new seeder classes.  The cached configurations didn't recognize the new classes.  So running that command again worked.If you see yourself making frequent changes to include new seeder classes then consider running php artisan config:clear.  This will enable you to make as many changes as you'd like and then after testing you can run config:cache again to make things run optimally again.For some reason I had to run composer dumpautoload -o. Notice flag -o which mean with optimization. I don't have any idea why it works only with it but give it a try. Perhaps it helps someone.I have the same problem with a class. I tried composer dump-autoload and php artisan config:clear but it did not solve my problem.Then I decided to read my code to find the problem and I found the problem. The problem in my case was a missing comma in my class. See my Model code:Check your capitalization!Your host system (Windows or Mac) is case insensitive by default, and Homestead inherits this behavior. Your production server on the other hand is case sensitive.Whenever you get a ClassNotFound Exception check the following:try to use following commandYou need to assign it to a name space for it to be found.I am not writing as the answer for this question. But I want to help others if they faced the same bug but the answers mentioned here not works. I also tried all the solutions mentioned here. But my problem was with the namespace I used. The path was wrong.The namespace I used is:But actually the controller reside inside a folder named 'FrontEnd'so the solution is change the namespace to:This will surely work. 

If not then, you need to do and then, the aforementioned commands. If the issue is not resolved by composer dump-autoload or is not a newly created class.Check for syntax errors in your class and its traits as well.

In my case, there was a syntax error in a Trait, but ReflectionException was shown for the actual Class using that Trait instead.When it is looking for the seeder class file, you can run composer dump-autoload. When you run it again and it's looking for the Model, you can reference it on the seeder file itself. Like so,Not strictly related to the question but received the error ReflectionException: Class config does not existI had added a new .env variable with spaces in it. Running php artisan config:clear told me that any .env variable with spaces in it should be surrounded by "s.Did this and  my application stated working again, no need for config clear as still in development on Laravel Homestead (5.4)I've recreated class, and it worked. Copy all file content, delete file, and run php artisan make:seeder ModelTableSeeder. Because composer dump-autoload didn't worked for me. You may try to write app in use uppercase, so App. Worked for me.this will fix itUsually error message ReflectionException: Class app does not exist appears in larval test when you forget to close connection.if you're using setUp or tearDown function in your test do not forget to close connection by calling parent::setUp and parent::tearDownIn case of using psr-0 , check the class name does not contain underscore .Above command worked for me.Whenever you make new migration in la-ravel you need to refresh classmap in composer.json file .I had this error when trying to reach an endpoint in a custom route file, that had a namespace prepended in RouteServiceProviderUpdating the namespace in the RouteServiceProvider solved the issue, as the relative controller path specified in the routes file was now resolving correctly.

skip current iteration

Hailwood

[skip current iteration](https://stackoverflow.com/questions/5023897/skip-current-iteration)

I have a php array $numbers = array(1,2,3,4,5,6,7,8,9)if I am looping over it using a foreach foreach($numbers as $number)and have an if statement if($number == 4)what would the line of code be after that that would skip anything after that line and start the loop at 5? break, return, exit?

2011-02-17 00:36:44Z

I have a php array $numbers = array(1,2,3,4,5,6,7,8,9)if I am looping over it using a foreach foreach($numbers as $number)and have an if statement if($number == 4)what would the line of code be after that that would skip anything after that line and start the loop at 5? break, return, exit?You are looking for the continue statement. Also useful is break which will exit the loop completely. Both statements work with all variations of loop, ie. for, foreach and while.Continue will tell it to skip the current iteration block, but continue on with the rest of the loop. Works in all scenerios (for, while, etc.)Break; will stop the loop and make compiler out side the loop. while continue; will just skip current one and go to next cycle.

like:Output:I suppose you are looking for continue statement. Have a look at http://php.net/manual/en/control-structures.continue.phpdinel

usort function in a class

Marinus

[usort function in a class](https://stackoverflow.com/questions/11312986/usort-function-in-a-class)

I have a function which sorts data in a multidimensional array, as shown below:  When i run this, it works as expected, returning the data ordered by name, ascending. However, I need to use this in a class. When I use this, i get the following warning: Warning: usort() expects parameter 2 to be a valid callback, function 'order_new' not found or invalid function name.When i put the order_new function in the changeOrder function it works fine, but I have problems with Fatal error: Cannot redeclare order_new(), so i cannot use that. Any suggestions?

2012-07-03 14:23:15Z

I have a function which sorts data in a multidimensional array, as shown below:  When i run this, it works as expected, returning the data ordered by name, ascending. However, I need to use this in a class. When I use this, i get the following warning: Warning: usort() expects parameter 2 to be a valid callback, function 'order_new' not found or invalid function name.When i put the order_new function in the changeOrder function it works fine, but I have problems with Fatal error: Cannot redeclare order_new(), so i cannot use that. Any suggestions?order_new is a class method not a global function. 

As the PHP-Manual suggest you can use in this case or declare order_new static and use Change to usort($data, array($this, "order_new"));is what you want when referring to a function in your class instance. See callableOne thing to consider is that if the variable is passed to your method by reference, usort() appears to execute in the context of the referenced variable and not your current method.  Therefore, you need to provide the full namespace in your class reference like so:I know this is an old thread, but I ran into another instance today that might benefit from another approach. I had a case where I wanted to use a specific key so I could abstract the actual support function. This led to finding a version using a wrapper function to return an anonymous function utilizing the 'use' command word to supply the name of the key used to sort in my class. (in my case, it's a key in a property on a [nested] class that is assigned to one of the class properties where I'm doing the sorting - i.e. I'm sorting instances based on a property in a 'dimensions' instance assigned to a property of 'items' and want to be able to sort them by width, height, length or weight for example). Then to get your function for the callback, you simply call this wrapper function with the key name you want to use to sort the result:This allows me to call it local using either static:: or self:: (conceivably, I could even wrap it as a non-static function in this case since the only thing I'm worried about is getting the call but function returned)

Another benefit I soon discovered is my dimensions object also has some 'calculated' fields such as girth, volume and dimensional weight. But one problem is that dimensional weight varies depending on if you are shipping an item domestically or internationally so I need to tell my 'calculateDimensionalWeight' function if it should use the value for international shipping or not. Well, using this method, I can do that by just passing an additional parameter to the wrapper function and adding the additional parameter to the use variables. Since I also need to make sure these values have been calculated prior to doing any comparisons, I can trigger that in my function based on the key:NOTE: calculating values this way creates overhead as all but the first and last items in any list will technically be calculated twice which is redundant, but in this instance my lists are not long and in some cases, I need to compare two items when doing bin-sorting, so it's still preferable. For large datasets, it would probably be wiser to pre-calculate values external to the sort method.

Can anyone confirm that phpMyAdmin AllowNoPassword works with MySQL databases?

diggersworld

[Can anyone confirm that phpMyAdmin AllowNoPassword works with MySQL databases?](https://stackoverflow.com/questions/5908752/can-anyone-confirm-that-phpmyadmin-allownopassword-works-with-mysql-databases)

I have a version of phpMyAdmin located on my local Apache server.I am trying to login without a password however phpMyAdmin keeps throwing the warning:However in my config.php file for phpMyAdmin I have set:So I don't know why the message is still appearing.

2011-05-06 08:27:54Z

I have a version of phpMyAdmin located on my local Apache server.I am trying to login without a password however phpMyAdmin keeps throwing the warning:However in my config.php file for phpMyAdmin I have set:So I don't know why the message is still appearing.According to this: https://www.simplified.guide/phpmyadmin/enable-login-without-passwordThis $cfg['Servers'][$i]['AllowNoPassword'] = TRUE; should be added twice in /etc/phpmyadmin/config.inc.phpI tested the statement:It did not work out for me.Instead worked. Thanks!You might have made the same silly mistake that I did, by not removing the // making it a comment.The line should be like this, but not as a comment.Make sure you don't add or uncomment the AllowNoPassword option after the $i++ line./* Uncomment the following to enable logging in to passwordless accounts,

     * after taking note of the associated security risks. */I have the same problem here, then I reinstalled mysql and it worked.Just in file /etc/phpmyadmin/config.inc.php, uncomment or add the line(if not there),It works just Awesome!if you have any doubt restart apache.Cheers!!! I had a same problem, and I solved my problem.First go to config.default.php and changeto After a lot of trials I found the following solution.This will work if you copied all phpmyadmin files in /var/wwwgo to your copied location of phpmyadmin folder in /var/wwwedit in config.inc.php the following line:(In original file it was false, change it as true and save it.)Then you will be able to login phpmyadmin without password. yes the above answer is correct, but it's not secure, you can login root user directlyinto phpMyAdmin.If you want to create new user with password and give grant permission, execute the below command in MySQL on terminal, 

Login into your server on terminal,Others may find, as I did, (working in OS X 10.10.1) that the situation for MAMP PRO (at least in the current release, 3.0.7.3, is different.All my attempts to apply the remedies suggested here failed. Upon examining the PHP error log I discovered that the index.php that is operating (in /Libary/Application Support/appsolute/MAMP PRO/index.php -- at line 43, is deciding NOT to go to the config.inc.php that is discussed here (at /Applications/MAMP/bin/phpMyAdmin/config.inc.php) but rather to /Library/Application Support/appsolute/MAMP PRO/phpMyAdmin/config.inc.php. Furthermore, there is no such file there (after a 'successful' install of MAMP PRO), so I'm stuck with the error, and furtherfuthermore, every time I try to put the correct file there, when I restart MAMP PRO, it is not there anymore - something is automatically refreshed to eliminate the config.inc.php I'm putting there. My workaround for now is to do this in MAMP instead of MAMP PRO.I had to install MariaDB. I am using OpenSUSE LINUX Leap 15 and had to execute these commands:Source.It works; just thought this would be helpful to someone in the future.If you are working with MAMP, as a security measure, the $cfg['Servers'][$i]['AllowNoPassword'] = true; usually will be missing in the config.inc.php file so if you want to use phpMyAdmin without a password for root then simply add it preferably after the $cfg['Servers'][$i]['AllowDeny']['rules'] = array(); statement. Then Restart your server just to be sure and you will be good to go.Yes not working! I spent whole day with this stupid phpMyAdmin. Just add a new user with a password1 - Login to mysql or mariadb mysql -u root -p2 - Run these SQL commands to create a new user with all permissions (or grant your custom permissions)2 - Go to /etc/phpMyAdmin/config.inc.php and change this:WARNING: This config is for localhost development server only, If you're running a production server you must use strong credentials and not setting user pass in config.inc.php

Relative path not working in cron PHP script

Sjoerd

[Relative path not working in cron PHP script](https://stackoverflow.com/questions/1969374/relative-path-not-working-in-cron-php-script)

If a PHP script is run as a cron script, the includes often fail if relative paths are used. For example, if you havethe file foo.php will be found when run on the command line, but not when run from a cron script.A typical workaround for this is to first chdir to the working directory, or use absolute paths. I would like to know, however, what is different between cron and shell that causes this behavior. Why does it fail when using relative paths in a cron script?

2009-12-28 13:03:38Z

If a PHP script is run as a cron script, the includes often fail if relative paths are used. For example, if you havethe file foo.php will be found when run on the command line, but not when run from a cron script.A typical workaround for this is to first chdir to the working directory, or use absolute paths. I would like to know, however, what is different between cron and shell that causes this behavior. Why does it fail when using relative paths in a cron script?Change the working directory to the running file path.  Just usein the running file. Then you won't need to change all the relative paths to absolute paths in every page.The working directory of the script may be different when run from a cron. Additionaly, there was some confusion about PHPs require() and include(), which caused confusion about the working directory really being the problem:The only chance I got "require_once" to work with cron and apache at the same time wasBecause the "current working directory" for cron jobs will be the directory where your crontab file exists -- so any relative paths with be relative to THAT directory.The simplest way to handle that is with dirname() function and PHP __FILE__ constant. Otherwise, you will need to edit the file with new absolute paths whenever you move the file to a different directory or a server with a different file structure.__FILE__ is a constant defined by PHP as the full path to the file from which it is called. Even if the file is included, __FILE__ will ALWAYS refer to the full path of the file itself -- not the file doing the including.So dirname( __FILE__ ) returns the full directory path to the directory containing the file -- no matter where it is included from and basename( __FILE__ ) returns the file name itself.example:

Let's pretend "/home/user/public_html/index.php" includes "/home/user/public_html/your_directory/your_php_file.php".If you call dirname( __FILE__ ) in "your_php_file.php" you would get "/home/user/public_html/your_directory" returned even though the active script is in "/home/user/public_html" (note the absence of the trailing slash).If you need the directory of the INCLUDING file use: dirname( $_SERVER['PHP_SELF'] ) which will return "/home/user/public_html" and is the same as calling dirname( __FILE__ ) in the "index.php" file since the relative paths are the same.example usages:Another possibility is that the CLI version is using a different php.ini file. (By default, it'll use php-cli.ini and fallback to the standard php.ini)Also, if you're using .htaccess files to set your library path, etc. this obviously won't work via the cli.When executed trough a cron job your PHP script probably runs in different context than if you start it manually from the shell. So your relative paths are not pointing to the right path.In addition to the accepted answer above, you can also use:The DIR works although it will not work on my localhost as it has a different path than my  live site server. I used this to fix it.

Yosemite / El Capitan php-gd + mcrypt installation

Kyslik

[Yosemite / El Capitan php-gd + mcrypt installation](https://stackoverflow.com/questions/26493762/yosemite-el-capitan-php-gd-mcrypt-installation)

note that following steps install newest PHP 5.5.xTo check if you have gd and mcrypt installed use $ php -m to display compiled in modules, continue if you are missing desired modules and please see accepted answer. You are definitely missing "full" gd (with png support) module if: 

imagecreatefrompng() function is missing."Call to undefined function imagecreatefrompng()"install brew using accepted answer and omit part with gd installation (unless you need it), and use following steps:Check out brew-php-switcher and follow instructions.

2014-10-21 18:32:49Z

note that following steps install newest PHP 5.5.xTo check if you have gd and mcrypt installed use $ php -m to display compiled in modules, continue if you are missing desired modules and please see accepted answer. You are definitely missing "full" gd (with png support) module if: 

imagecreatefrompng() function is missing."Call to undefined function imagecreatefrompng()"install brew using accepted answer and omit part with gd installation (unless you need it), and use following steps:Check out brew-php-switcher and follow instructions.You are right, Yosemite's built-in PHP comes without PNG and FreeType support.

Update 2015/10 for El Captian: With OS X 10.11 El Capitan PNG support is back, but FreeType is still missing.  SolutionUse the Homebrew package manager to painlessly build and install a complete PHP and replace it in Apache's config. The whole process only takes about ten minutes if you follow the steps below.  A quick (but complete) walk through(Note 1: I use Homebrew here, a package management system for OS X. If you are acquainted with MacPorts – another package manager – you can acchieve the same results with that system. It is also possible to use my Homebrew solution in parallel to an existing MacPorts installation on your machine.)

(Note 2: If you want to read all the details about the installation process, have a look at the Homebrew basic installation and  the Homebrew PHP installation information. But you really won't need that if you follow these steps.)Now let's go...First install Xcode from App Store. If you already have it, check App Store again, to make sure you've got the latest version!Now you need to install the Xcode Command Line Tools. To do so, open a Terminal and enter:The next command will install the Homebrew package manager system:The script explains what it will do and then pauses before it does it.The next command to enter is a kind of system status test:This checks the basics of the Homebrew installation.

I got a warning "You have MacPorts or Fink installed: /opt/local/bin/port ..." which I ignored successfully. ;)Now setup the homebrew/dupes tap which has dependencies we need:Setup the homebrew/versions tap which also has dependencies we need:Then run the following command:Now you are ready to finally build PHP. For a list of available configuration options you may run one of these:But I was fine just using the defaults.

To do so enter ONE of these two, depending on your needs:(This takes a while, please be patient!)If you get an error of type "Cannot find OpenSSL's " you have not installed the Xcode Command Line Tools as I told you in the beginning. ;) Go ahead, install them and re-run that last command.PHP is built now and the script will end with some details about how to use it:Open httpd.conf (should be located at /private/etc/apache2/httpd.conf) and enable PHP by adding ONE of these two lines, depending on which PHP version you just installed:Don't forget to comment out any existing LoadModule php5_module... line that might be present from Yosemite's own PHP version!Restart ApacheYour new php.ini file can be found in: /usr/local/etc/php/5.5/php.iniEnjoy!The answer from @Jpsy is good, but there's another option, from the guys from liip, here. This is a PHP package that comes pre-built for Yosemite (older versions works too) but it is just one line of code:curl -s http://php-osx.liip.ch/install.sh | bash -s 5.5After that, everything is ready to work as expected. The configuration that cames with that installation is well suited for Symfony 2 development, but it should work just fine with other use cases.Finally, if you need to use the updated PHP CLI, too, but you don't want to use the PHP version that comes with the OS, then you could also add to your .bash_profile or similar this line of code:export PATH=/usr/local/php5/bin:$PATHI don't have enough rep to make a comment, but if you're using OS X Server for Yosemite (Version 4 from the App Store) the file to edit is: /library/server/web/config/apache2/httpd_server_app.confmine looks like this now and confirmed it is working after using php 5.6 from homebrew.Standard Apache coming with Yosemite the file to update afteris in /etc/apache2/httpd.confNote that location of php.ini is also changed. The standard one coming with Yosemite is in /etc/php.ini, the one with homebrewed version is in /usr/local/etc/php/5.5/php.ini

Determine timezone from latitude/longitude without using web services like Geonames.org

Jacek Francuz

[Determine timezone from latitude/longitude without using web services like Geonames.org](https://stackoverflow.com/questions/5584602/determine-timezone-from-latitude-longitude-without-using-web-services-like-geona)

is there any possibility to determine the timezone of point (lat/lon) without using webservices? Geonames.org is not stable enough for me to use :( I need this to work in PHP.Thanks

2011-04-07 16:45:16Z

is there any possibility to determine the timezone of point (lat/lon) without using webservices? Geonames.org is not stable enough for me to use :( I need this to work in PHP.ThanksI had this problem a while back and did exactly what adam suggested:IIRC it took less than 1 second to populate the R-Tree, and it could then perform thousands of lookups per second (both on a 5 year old PC).How exact do your results have to be? If a rough estimate is enough, calculate the offset yourself:where direction is 1 for east, -1 for west, and longitude is in (-180,180)I ran into this problem while working on another project and looked into it very deeply.  I found all of the existing solutions to be lacking in major ways.  Downloading the GeoNames data and using some spatial index to look up the nearest point is definitely an option, and it will yield the correct result a lot of the time, but it can easily fail if a query point is on the wrong side of a time zone border from the nearest point in the database.A more accurate method is to use a digital map of the time zones and to write code to find the polygon in that map that contains a given query point.  Thankfully, there is an excellent map of the time zones of the world available at http://efele.net/maps/tz/world/ (not maintained anymore).  To write an efficient query engine, you need to:Each of those are worthy of their own Stack Overflow question/answer page.After concluding that none of the existing solutions out there met my needs, I wrote my own solution and made it available here:http://askgeo.comAskGeo uses a digital map and has a highly optimized spatial index that allows for running more than 10,000 queries per second on my computer in a single thread.  And it is thread safe, so even higher throughput is certainly possible.  This is a serious piece of code, and it took us a long time to develop, so we are offering it under a commercial license.  It is written in Java, so using it in PHP would involve using:http://php-java-bridge.sourceforge.net/doc/how_it_works.phpWe are also open to porting it for a bounty. For details on the pricing, and for detailed documentation, see http://askgeo.com.I hope this is useful. It certainly was useful for the project I was working on.I know this is old, but I spent some time looking for this answer.  Found something very useful.  Google does time zone lookups by long/lat. No free tier anymore :-/https://developers.google.com/maps/documentation/timezone/You should be able to, if you know the polygon of the timezone to see if a given lat/lon is inside it.World Time Zone Database

Latitude/Longitude Polygon Data

For areas on land, there are some shapefile maps that have been made for the timezones of the tz (Olson) database.  They're not updated quite as regularly as the tz database itself, but it's a great starting point and seems to be very accurate for most purposes.How about this ?I've written a small Java class to do this. It could be easily translated to PHP. The database is embedded in the code itself.  It's accurate to 22km.https://sites.google.com/a/edval.biz/www/mapping-lat-lng-s-to-timezonesThe whole code is basically stuff like this:...so I presume a translation to PHP would be easy.Unfortunately, time zones are not regular enough for some simple function. See the map in Wikipedia - Time ZoneHowever, some very rough approximation can be calculated:  1 hour difference corresponds to 15 degrees longitude (360 / 24).Another solution is to import a table of cities with timezones and then to use the Haversine formula to find the nearest city in that table, relevant to your coordinates.

I have posted a full description here: http://sylnsr.blogspot.com/2012/12/find-nearest-location-by-latitude-and.htmlFor an example of loading the data in MySQL, I have posted an example here (with sources for downloading a small data dump): http://sylnsr.blogspot.com/2012/12/load-timezone-data-by-city-and-country.htmlNote that the accuracy of the look-up will be based on how comprehensive your look-up data is.Credits and References:

MySQL Great Circle Distance (Haversine formula)You can use time zone boundaries, provided here:http://www.opensource.apple.com/source/TimeZoneData/Not sure if this is useful or not, but I built a database of timezone shapes (for North America only), which is painstakingly accurate and current not just for borders, but also for daylight saving time observance.  Also shapes for unofficial exceptions.  So you could query the set of shapes for a given location could return multiple shapes that apply to that location, and choose the correct one for the time of year.You can see an image of the shapes at http://OnTimeZone.com/OnTimeZone_shapes.gif.  Blue shapes are around areas that do not observe daylight saving time, magenta shapes those that do observe daylight saving time, and neon green shapes (small and tough to see at that zoom level) are for areas with unofficial deviation from the official time zone.  Lots more detail on that available at the OnTimeZone.com site.The data available for download at OnTimeZone.com is free for non-commercial use.  The shape data, which is not available for download, is available for commercial license.I downloaded data that matches 5 digit zip codes to time zones, and data that determines the UTC offset for each time zone during DST and non-DST periods.Then I simplified the data to only consider the first three digits of the ZIP Code, since all ZIP codes that share the first three digits are very close to each other; the three digits identify a unique mail distribution center.The resulting Json file does require you to decide whether or not you are subject to DST currently, and it probably has some inaccuracy here and there. But it's a pretty good local solution that is very compact and simple to query.Here it is:

https://gist.github.com/benjiwheeler/8aced8dac396c2191cf0I use geocoder.caInput any location in North America, Output geocodes, area codes and timezone in json or jsonp.For example: http://geocoder.ca/1600%20pennsylvania%20avenue,Washington,DCArea Code: (202)

 Time Zone: America/New_YorkJson: You can use Google Timezone api. https://maps.googleapis.com/maps/api/timezone/json?location=39.6034810,-119.6822510&timestamp=1331161200&key=YOUR_API_KEYThis project builds a shapefile from data from OpenStreetMap and link to multiple libraries that handle it. 

For PHP you can look at https://github.com/minube/geo-timezone

PHP: Get method's arguments?

Rakward

[PHP: Get method's arguments?](https://stackoverflow.com/questions/3387628/php-get-methods-arguments)

In php I can check all available methods for an object like so:But how can I see wich arguments have to be sent to these methods?Is there a function for this?

2010-08-02 12:17:33Z

In php I can check all available methods for an object like so:But how can I see wich arguments have to be sent to these methods?Is there a function for this?You can use reflection...

How to echo the whole content of an .html file in php?

Nikola Nastevski

[How to echo the whole content of an .html file in php?](https://stackoverflow.com/questions/9539849/how-to-echo-the-whole-content-of-an-html-file-in-php)

Is there any way I can echo the whole content of an .html file in php?For e.g. I have some sample.html file, and I want to echo that filename, so its content should be displayed.

2012-03-02 20:23:27Z

Is there any way I can echo the whole content of an .html file in php?For e.g. I have some sample.html file, and I want to echo that filename, so its content should be displayed.You should use readfile():This will read the file and send it to the browser in one command. This is essentially the same as:except that file_get_contents() may cause the script to crash for large files, while readfile() won't.Just use:That will echo it as well. This also has the benefit of executing any PHP in the file,If you need to do anything with the contents, use file_get_contents(),e.g.This doesn't execute code in that file, so be careful if you expect that to work.I usually use:as then I can move files without breaking the includes.If you want to make sure the HTML file doesn't contain any PHP code and will not be executed as PHP, DO NOT use include or require, simple do:

how to save DOMPDF generated content to file? [closed]

TomTom

[how to save DOMPDF generated content to file? [closed]](https://stackoverflow.com/questions/8720897/how-to-save-dompdf-generated-content-to-file)

I am using Dompdf to create PDF file but I don't know why it doesn't save the created PDF to server.Any ideas?

2012-01-04 01:14:46Z

I am using Dompdf to create PDF file but I don't know why it doesn't save the created PDF to server.Any ideas?I have just used dompdf and the code was a little different but it worked.Here it is:Only difference here is that all of the files in the include directory are included.Other than that my only suggestion would be to specify a full directory path for writing the file rather than just the filename.I did test your code and the only problem I could see was the lack of permission given to the directory you try to write the file in to.Give "write" permission to the directory you need to put the file. In your case it is the current directory. Use "chmod" in linux.Add "Everyone" with "write" enabled to the security tab of the directory if you are in Windows.

Parse XML with Namespace using SimpleXML

user38968

[Parse XML with Namespace using SimpleXML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)

I have this as xml:How can I loop through all of the event:event nodes and display, for example, all of the event:SessionKey's? This does not work:

2009-02-27 18:17:27Z

I have this as xml:How can I loop through all of the event:event nodes and display, for example, all of the event:SessionKey's? This does not work:it does work without registerXPathNamespace and the full namespace prefix in the xpath queries:You have to register the namespace for each simpleXMLElement object you use.The namespace should also be declared somewhere in the xml file.The method ax described works too. You can skip the registerXPathNamespace if you know the xml file will always use the same prefix.here alternative that worked for me.Having worked a lot with simplexml, this is how I do it.The magic trick if you already have an element and just want to get it's different namespaced children, say for a structure like this:Is to send true as the second parameter to the children function:Another approach is to use SimpleXML for parsing and DOMDocument for manipulation/access, which bypasses namespacing issues altogether:Using registerXPathNamespace and then calling xpath didn't actually work for me.

I had to go with the solution provided in this great post : http://blog.preinheimer.com/index.php?/archives/172-SimpleXML,-Namespaces-Hair-loss.htmlSo in your case, this : Will output:

Initializing Multiple PHP Variables Simultaneously

dreamer_999

[Initializing Multiple PHP Variables Simultaneously](https://stackoverflow.com/questions/9651793/initializing-multiple-php-variables-simultaneously)

How may I initialize multiple PHP variables with a value of zero  simultaneously without using an array? I wish to write code that is essentially equivalent to the following:

2012-03-11 02:00:44Z

How may I initialize multiple PHP variables with a value of zero  simultaneously without using an array? I wish to write code that is essentially equivalent to the following:While it is feasible to initialize multiple variables using a comma operator within a for-loop, as follows:(See demo here)the list construct provides a more efficient way to perform multiple variable assignment, as depicted in the following example:See demo here    One may wish to reconsider avoiding the usage of arrays to achieve multiple initialized variables. With PHP7.1+ one may write simpler, robust code if one utilizes array destructuring available with short array syntax, as follows:   See demo here.If one needs to be certain that the variables being initialized were not previously set, see this related discussion, particularly this response.

Setting POST variable without using form

denniss

[Setting POST variable without using form](https://stackoverflow.com/questions/3418044/setting-post-variable-without-using-form)

Is there a way to set a $_POST['var'] without using form related field (no type='hidden') and using only PHP.

Something likeIs there a way to do this?EDIT:

Someone asked me for some elaboration on this. So for example, I have page with a form on it, The form looks something like thisOnce the submit button is clicked, I want to get redirected to next.php. Is there a way for me to set the $_POST['text'] variable to another value? How do I make this persistent so that when I click on another submit button (for example) the $_POST['text'] will be what I set on next.php without using a hidden field.Let me know if this is still not clear and thank you for your help.

2010-08-05 18:44:37Z

Is there a way to set a $_POST['var'] without using form related field (no type='hidden') and using only PHP.

Something likeIs there a way to do this?EDIT:

Someone asked me for some elaboration on this. So for example, I have page with a form on it, The form looks something like thisOnce the submit button is clicked, I want to get redirected to next.php. Is there a way for me to set the $_POST['text'] variable to another value? How do I make this persistent so that when I click on another submit button (for example) the $_POST['text'] will be what I set on next.php without using a hidden field.Let me know if this is still not clear and thank you for your help.Yes, simply set it to another value:This will override the previous value corresponding to text key of the array. The $_POST is superglobal associative array and you can change the values like a normal PHP array.Caution: This change is only visible within the same PHP execution scope. Once the execution is complete and the page has loaded, the $_POST array is cleared. A new form submission will generate a new $_POST array.If you want to persist the value across form submissions, you will need to put it in the form as an input tag's value attribute or retrieve it from a data store.If you want to set $_POST['text'] to another value, why not use:on next.php?you can do it using ajax or by sending http headers+content like:You can do it using jQuery. Example:

XDebug or Zend Debugger?

wamp

[XDebug or Zend Debugger?](https://stackoverflow.com/questions/2855143/xdebug-or-zend-debugger)

It seems to me that they have both the same function set, but I'm not sure.What are the differences in functionality between the two?

2010-05-18 07:12:12Z

It seems to me that they have both the same function set, but I'm not sure.What are the differences in functionality between the two?Zend debugger is only available in binary format, so you need to be careful to download the right version to match your version of php ( http://downloads.zend.com/pdt/server-debugger/ ). I was able to get it working with Eclipse PDT and do line-by-line debugging with a local XAMPP installation. I think Zend has some additional features, but in my experience it has been easier to set up.XDebug is much more open, but I haven't successfully configured it to work with Eclipse PDT. XDebug works with Eclipse and with Netbeans (and some other ide's).ZendDebug doesn't work with Netbeans.

ZendDebug is already configured in ZendServer.

How can I get php to return 500 upon encountering a fatal exception?

Mike

[How can I get php to return 500 upon encountering a fatal exception?](https://stackoverflow.com/questions/1555862/how-can-i-get-php-to-return-500-upon-encountering-a-fatal-exception)

PHP fatal errors come back as status code 200 to the HTTP client. How can I make it return a status code 500 (Internal server error)?

2009-10-12 17:25:08Z

PHP fatal errors come back as status code 200 to the HTTP client. How can I make it return a status code 500 (Internal server error)?This is exactly the problem I had yesterday and I found solution as follows:1) first of all, you need to catch PHP fatal errors, which is error type E_ERROR. when this error occurs, script will be stored the error and terminate execution. you can get the stored error by calling function error_get_last().2) before script terminated, a callback function register_shutdown_function() will always be called. so you need to register a error handler by this function to do what you want, in this case, return header 500 and a customized internal error page (optional).Note: if you want to catch custom error type, which start with E_USER*, you can use function set_error_handler()  to register error handler and trigger error by function trigger_error, however, this error handler can not handle E_ERROR error type. see explanation on php.net about error handlerI have used "set_exception_handler" to handle uncaught exceptions.Standard PHP configuration does return 500 when error occurs! Just make sure that your display_errors = off. You can simulate it with:On production display_errors directive is off by default.It is not possible to handle PHP E_ERROR in any way according to the PHP documentation:

http://www.php.net/manual/en/function.set-error-handler.phpNor is is possible to handle "E_PARSE, E_CORE_ERROR, E_CORE_WARNING, E_COMPILE_ERROR, E_COMPILE_WARNING, and most of E_STRICT" according to that link.You CAN provide a handler for the other error, warning, and notices including E_USER_ERROR, but that's really not as useful as it sounds since this error only gets thrown intentionally by the programmer with trigger_error().And of course you can catch any Exception (even the ones thrown by the native PHP functions).I agree that this is a problem.  Servers should NOT return 200 OK when application code crashes and burns.You can use php error handling http://www.w3schools.com/php/php_error.aspYou would have to catch the thrown error using try/catch and then use that catch block to send a header() with the 500 error.If the fatal exception is not surrounded by try {} catch blocks then you must register a global handler and use register_shutdown_function() to check for an error at script end.Never forget to set header("HTTP/1.1 200 OK", true, 200); as the last line of any execution path:In PHP 5.4 you can replace the header function above with the much better http_response_code(200) or http_response_code(500).The hard thing when dealing with fatal errors (compile errors, for example a missing semicolon) is that the script won't be executed, so it won't help to set the status code in that script. However, when you include or require a script, the calling script will be executed, regardless of errors in the included script. With this, I come to this solution:rock-solid-script.php:script-i-want-to-guard-for-errors.php:Direct your call to the rock-solid-script.php and you're ready to go.I would have liked it better to set the default status code to 500 in .htaccess. That seems more elegant to me but I can't find a way to pull it off. I tried the RewriteRule R-flag, but this prevents execution of php altogether, so that's no use. 

Generating Facebook Open Graph meta tags dynamically

borisdiakur

[Generating Facebook Open Graph meta tags dynamically](https://stackoverflow.com/questions/8431694/generating-facebook-open-graph-meta-tags-dynamically)

As the title implies I'm trying to generate Facebook Open Graph meta tags dynamically, but I can't get it working. Is it even possible?Finally I got it working with the help of @saccharine. The following code is working for me: The url I'm putting into the Facebook debugger now can include any of the dynamic parameters or even none, all or only a selection and in any order like so:

http://mysite.com/index.php?type=restaurant&title=luigis

or this:

http://mysite.com/index.php?locale=de_DE&description=hi&type=bistro Having that accomplished: I can now publish actions to the user's stream:Works like a charm! : ]

2011-12-08 13:26:21Z

As the title implies I'm trying to generate Facebook Open Graph meta tags dynamically, but I can't get it working. Is it even possible?Finally I got it working with the help of @saccharine. The following code is working for me: The url I'm putting into the Facebook debugger now can include any of the dynamic parameters or even none, all or only a selection and in any order like so:

http://mysite.com/index.php?type=restaurant&title=luigis

or this:

http://mysite.com/index.php?locale=de_DE&description=hi&type=bistro Having that accomplished: I can now publish actions to the user's stream:Works like a charm! : ]First, I want to reiterate that I am almost positive that your problem is due to the fact that the url you are passing into the debugger is not dynamically generated. The url tag essentially acts as a redirector. Unless it's the exact same (meaning the meta tags on the url meta object is the same as those on the url you are passing in) as the url you are testing, you won't get the results you're looking for.The meta tagneeds to be dynamically generated. The debugger is being redirected to your default index page instead of the dynamically generated page.For example, I assign an id to every object I'm using, and so I have something like the followingI pass in that exact url into the debugger, and thus the final page the debugger lands on will be that exact url.Also, in the followinghow is the property being dynamically generated? Did you remember to set in your actual code something like the following?You also appear to be shoving everything into the url, which is dangerous and can cause huge headaches, which might be the issue here. Instead, shove only one thing , eg ?type=bistro and then propagate the necessary data from the DB.I would recommend dynamically generating most OG tags based on an object_id. Store the relevant OG info for every object_id, and then propagate them when accessed. This way, you can also easily expand and edit the tags you use when OG is updated. If you have problems with OG you shouldn't hesitate to post them as new questions instead of comments as I guarantee other people also have the same problem.I'm fairly certain Facebook no longer crawls any urls with parameters.  It always "redirects" to a stripped version of the url.In OPs example:http://example.com/index.php?type=restaurant&title=luigisbecomeshttp://example.com/index.phpregardless of what you do.  Closest thing I've seen to an explanation is this:Yes, works like a charm, but needs some recoding for me.  I have had to create a new page like this:When you click the Get Code link in your object types, did you try pasting the code it gave you?

I would try pasting to your web, and then if it works, replicate the html output.

Try it without the DOCTYPE tag.

Heres a sample of what I got, and I dont see these tags above: fb:app_id, not sure if it makes a difference.

Also, shouldnt the og:url also include the variables at the end?<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">

  <meta property="fb:app_id"      content="1234567888">

  <meta property="og:url"         content="http://mysite.com/index.php?type=MY_APP_NAMESPACE%3Abistro"> For Joomla Opengraph Meta dynamic:

What does the WordPress「_e()」function do?

Adam

[What does the WordPress「_e()」function do?](https://stackoverflow.com/questions/5775135/what-does-the-wordpress-e-function-do)

I have these all over my theme, and when if I delete them, there nothing happens to the theme. What does it do? Should I leave them in or are they unnecessary? I want to optimize my site to load faster, so this is why I'm asking.

2011-04-25 04:19:15Z

I have these all over my theme, and when if I delete them, there nothing happens to the theme. What does it do? Should I leave them in or are they unnecessary? I want to optimize my site to load faster, so this is why I'm asking.https://developer.wordpress.org/reference/functions/_e/They are used for localization in WordPress themes. If you're only using one language for your theme, you don't need them.These are for WordPress localization.Here is their documentation: http://codex.wordpress.org/Function_Reference/_eAlso a few links on localization in general on WordPress to put the _e's in context:It is a WordPress Function used for localization. 

See the WordPress Docs for localization.With this function you can output/assign "hardcoded" strings within your theme/plugin/code that are translateable (with .mo / .po files or plugins like WPML String Translation).The function __( 'My Text', 'my-text-domain' ); assigns a string "My Text" that is translateable. 'my-text-domain' is the text-doamin the string is referenced to. This function does not echo anything!The function _e( 'My Text', 'my-text-domain' ); is almost the same but it echoes your string directly.WordPress Offers several other functions for localization, take a look into the Codex (link on top of my answer).Those are WordPress library function used on localization in Wordpress themes. Its recommended to use escapes function as much as possible in theme and plugins for safety.It seems to me that if you eliminate it, you run the risk of your text not even showing up. From the uses I have seen, though, it is comments to the WordPress user to remind them to add information to the area, like the footer, header, or whatever. So eliminating may only remove all the hints the theme has built in for you.Actually, from my experience, I find that _e() is a function.  It is similar to: <?php function _e($txt) {

    echo $txt;

}It seems to me that if you eliminate it, you run the risk of your text not even showing up.  From the uses I have seen, though, it is comments to the WordPress user to remind them to add information to the area, like the footer, header, or whatever.  So eliminating may only remove all the hints the theme has built in for you.

ReCaptcha 2.0 With AJAX

Gofilord

[ReCaptcha 2.0 With AJAX](https://stackoverflow.com/questions/30006081/recaptcha-2-0-with-ajax)

I have managed to get ReCaptcha 2.0 working in my website. However, it's only working when I don't use AJAX and I let the form submit "naturally".  I want to submit the form with the captcha and alert the user with a success note without refreshing the page. I tried the following code, but it seems like the server doesn't get the user response:  HTML:JS:PHP:The result in the PHP page:Bottom line is, how can I get the input response manually without it automatically going with the rest of the POST data?

2015-05-02 18:41:07Z

I have managed to get ReCaptcha 2.0 working in my website. However, it's only working when I don't use AJAX and I let the form submit "naturally".  I want to submit the form with the captcha and alert the user with a success note without refreshing the page. I tried the following code, but it seems like the server doesn't get the user response:  HTML:JS:PHP:The result in the PHP page:Bottom line is, how can I get the input response manually without it automatically going with the rest of the POST data?Ok, this was pretty silly.  I have done a couple of things wrong:Thanks to @Samurai who helped my figure out things.Final PHP code:

Redirect after Login on WordPress

Philip Kirkbride

[Redirect after Login on WordPress](https://stackoverflow.com/questions/8127453/redirect-after-login-on-wordpress)

I'm creating a customized WordPress theme based on an existing site.I want to use an alternate dashboard which I have created.How can I have the user directed to 'news.php' after login instead of '/wp-admin/' ?--EDIT: Have a working Plug-in for this but the bounty is still availible for anyone who can find a manual way to do this through functions.php, as it would be more secure then using a 3rd party plug-in.

2011-11-14 20:12:40Z

I'm creating a customized WordPress theme based on an existing site.I want to use an alternate dashboard which I have created.How can I have the user directed to 'news.php' after login instead of '/wp-admin/' ?--EDIT: Have a working Plug-in for this but the bounty is still availible for anyone who can find a manual way to do this through functions.php, as it would be more secure then using a 3rd party plug-in.This should solve your problem. Adapted from an answer found here.Add the following snippet of code in the functions.php file of your theme:The accepted answer is very wrong. One should never be modifying the WordPress Core. Not only will edits be lost at a given update, some changes you make on a whim may compromise other functionality or even endanger the security of your site.Action Hooks & Filters are included within the core to allow modifying functionality without modifying code.An example of using the login_redirect filter to redirect certain users can be found here and is a much more robust solution to your problem.For your specific problem, you want to do this:This may help. Peter's Login RedirectOr if you only want to redirect other users:The Theme My Login plugin may help - it allows you to redirect users of specific roles to specific pages.If you have php 5.3+, you can use an anonymous function like so:Please try this, it works for any redirection on WordPress You can also use the customized link as:The accepted answer is clearly not a good answer! It may solve your problem for a while, but what will happen next time you update your WordPress installation?

Your core files may get overridden and you will loose all your modifications.As already stated by others (Dan and Travis answers), the correct answer is to use the login_redirect filter.To globally redirect after successful login, find this code in wp-login.php, under section.and replace <?php echo esc_attr($redirect_to); ?> with your URL where you want to redirect. The URL must start with http:// and ends on /other wise page redirect to default location.Do same thing form redirect after registration with in same file but under <form name="registerform"> section.The functions.php file doesn't have anything to do with login redirect, what you should be considering it's the wp-login.php file, you can actually change the entire login interface from there, and force users to redirect to your custom pages instead of the /wp-admin/ directory.Open the file with Notepad if using Windows or any text editor, Prese Ctrl + F (on window)

Find "wp-admin/" and change it to the folder you want it to redirect to after login, still on the same file Press Ctrl + F, find "admin_url" and the change the file name, the default file name there is "profile.php"...after just save and give a try.Or you can use the "registration-login plugin" http://wordpress.org/extend/plugins/registration-login/, just simple edit the redirect urls and the links to where you want it to redirect after login, and you've got your very own custom profile.

PHP extract GPS EXIF data

Kami

[PHP extract GPS EXIF data](https://stackoverflow.com/questions/2526304/php-extract-gps-exif-data)

I would like to extract the GPS EXIF tag from pictures using php.

I'm using the exif_read_data() that returns a array of all tags + data :I don't know how to interpret 46/1 5403/100 and 0/1 ? 46 might be 46° but what about the rest especially 0/1 ?What is this structure about ? How to convert them to "standard" ones (like 46°56′48″N 7°26′39″E from wikipedia) ? I would like to pass thoses coordinates to the google maps api to display the pictures positions on a map !

2010-03-26 19:53:13Z

I would like to extract the GPS EXIF tag from pictures using php.

I'm using the exif_read_data() that returns a array of all tags + data :I don't know how to interpret 46/1 5403/100 and 0/1 ? 46 might be 46° but what about the rest especially 0/1 ?What is this structure about ? How to convert them to "standard" ones (like 46°56′48″N 7°26′39″E from wikipedia) ? I would like to pass thoses coordinates to the google maps api to display the pictures positions on a map !According to http://en.wikipedia.org/wiki/Geotagging, ( [0] => 46/1 [1] => 5403/100 [2] => 0/1 ) should mean 46/1 degrees, 5403/100 minutes, 0/1 seconds, i.e. 46°54.03′0″N.  Normalizing the seconds gives 46°54′1.8″N.This code below should work, as long as you don't get negative coordinates (given that you get N/S and E/W as a separate coordinate, you shouldn't ever have negative coordinates). Let me know if there is a bug (I don't have a PHP environment handy at the moment).This is my modified version. The other ones didn't work for me. It will give you the decimal versions of the GPS coordinates.The code to process the EXIF data:Prints out in this format:Here are the functions:This is a refactored version of Gerald Kaszuba's code (currently the most widely accepted answer). The result should be identical, but I've made several micro-optimizations and combined the two separate functions into one. In my benchmark testing, this version shaved about 5 microseconds off the runtime, which is probably negligible for most applications, but might be useful for applications which involve a large number of repeated calculations.I know this question has been asked a long time ago, but I came across it while searching in google and the solutions proposed here did not worked for me. So, after further searching, here is what worked for me.I'm putting it here so that anybody who comes here through some googling, can find different approaches to solve the same problem:This is an old question but felt it could use a more eloquent solution (OOP approach and lambda to process the fractional parts)The code I've used in the past is something like (in reality, it also checks that the data is vaguely valid):Where you also have:To get the altitude value, you can use the following 3 lines:In case you need a function to read Coordinates from Imagick Exif here we go, I hope it saves you time. Tested under PHP 7.I'm using the modified version from Gerald Kaszuba but it's not accurate.

so i change the formula a bit.from:changed to:It works for me.This is a javascript port of the PHP-code posted @Gerald above. This way you can figure out the location of an image without ever uploading the image, in conjunction with libraries like dropzone.js and Javascript-Load-Imageshort story.

First part N

Leave the grade

multiply the minutes with 60

devide the seconds with 100.

count the grades,minuts and seconds with eachother.Second part E

Leave the grade

multiply the minutes with 60

devide the seconds with ...1000

cöunt the grades, minutes and seconds with each otheri have seen nobody mentioned this: https://pypi.python.org/pypi/LatLon/1.0.2 now using the Coordonates objecct you can do what you want:

Example:(like 46°56′48″N 7°26′39″E from wikipedia) You than have to convert from ascii, and you are done:and than printing example:With this GPS data:Using the above code (thanks Gerald) I get these Latitude & Longitude values:This is not correct.  It's doing my head in as the code works, but the answer is wrong in this case!  Many other images work fine, there just seems to be some logic missing to cater for something in this dat.  For example, when I load the image in to iPhoto (sorry for the Apple example to those without Macs) it gets the answer right; this EXIF data is for a picture near the Red Sea.

How to get the OS on which PHP is running?

Martin Klepsch

[How to get the OS on which PHP is running?](https://stackoverflow.com/questions/1482260/how-to-get-the-os-on-which-php-is-running)

For building a unix/dos specific script I need to know on which kind of operating system I am.  How do i get this information?

phpinfo(); tells me a lot more and not very clear whether I'm running on unix or not.

2009-09-26 21:44:04Z

For building a unix/dos specific script I need to know on which kind of operating system I am.  How do i get this information?

phpinfo(); tells me a lot more and not very clear whether I'm running on unix or not.PHP has many predefined constants that are often useful.Here, PHP_OS is the one you are looking for.

For instance, on my current machine, this code :Gives :

You have some examples and comparisons with what the php_uname function can get you on the manual page of php_uname ; for instance (quoting) :That page also says :Just bear in mind that PHP_OS actually contains the platform on which PHP was built. This may not be the same platform as that on which it is deployed. Therefore php_uname('s') is more reliable.As of PHP 7.2.0 we have a new Predefined Constant to get the operating system family i.e. PHP_OS_FAMILY.

It returns a string

Either of 'Windows', 'BSD', 'OSX', 'Solaris', 'Linux' or 'Unknown'.PHP_OS is prefined with the host os name: http://us2.php.net/manual/en/reserved.constants.phpThere are 2 different way to check the platform that your PHP is running on it.PHP Does not provide any function to get the name of the distribution, php_uname is similar to Linux command uname, does not provide any info about the distribution itself.Neither php_uname nor PHP_OS give sufficient info. about the distribution but the OS type (e.g. Linux / Windows).I think the best way to know what is the running OS/distribution is to read /etc/os-release, the good thing is this file has read permission for all system users and the bad thing is it may not work on shared hosting.Here I wrote a very simple PHP function which reads and convert os-release to an array:This function prints something like this:Held og lykke [1] ;-) [1] Danish phrase means good luck.On php 7.2.0 you can use the PHP_OS_FAMILY constant:In other PHP version you can use:I am aware that this is not very granular, but it may suffice for a simple recognition between Win and *nix systems. YMMV

How to install MySQLi

Jack Humphries

[How to install MySQLi](https://stackoverflow.com/questions/7250356/how-to-install-mysqli)

I cannot find instructions about installing MySQLi on a Mac. Just to be clear, MySQL is up to date and I am running PHP 5. How do I install it? Where do I even get it from? Thanks for your help. I'll be giving an up vote and a check mark to whoever answers this!

2011-08-30 22:05:33Z

I cannot find instructions about installing MySQLi on a Mac. Just to be clear, MySQL is up to date and I am running PHP 5. How do I install it? Where do I even get it from? Thanks for your help. I'll be giving an up vote and a check mark to whoever answers this!MySQLi is part of PHP. There should be a php-mysqli type package available, or you can take the PHP source and recompile that mysqli enabled. You may already have it installed, but it's done as a module and is disabled. Check your php.ini for extension=mysqli.so or similar. it may be commented out, or the .so file is present in your extensions directory but not linked to PHP via that extension= directive. Use php-mysqlnd instead of php-mysqlThis article is clearly explained, how to install MySqli with EachApache. This works for me too.To install mysqli using EachApache:This is how I installed it on my Debian based machine (ubuntu):php 7:php 5:You are supposed to edit two lines in your php.ini file (i'm using windows for this example):-The first one is regarding the extensions directory location. See below:-The second one is regarding the extension itself:Only modifying (uncommenting) the extension line was not enough for me. Hope it helpsHere is the link for installation details: 

http://php.net/manual/en/mysqli.installation.phpIf you are using Windows or Linux: 

- The MySQLi extension is automatically installed in most cases, when PHP & MySQL package is installed. For windows: 3 stepsstep1:

Just need to give the ext folder path in php.iniherestep 2:

Remove the comment from step 3:

restart the Apache server.Happy coding!!!Since you are using a Mac, open a terminal, andFind the php.ini, and sudo open it, for example, using the nano editorFind use control+w to search for "mysqli.default_socket", and change the line toUse control+x and then hit "y" and "return" to save the file. Restart Aapche if necessary.Now you should be able to run mysqli.I recently ditched Xampp in favor of the native Apache on Mac Sierra because a new php requirement of a project. Sierra comes with php 5.6.25, but it doesn't run mysql_* out of the box, after a lot of googling, I found this site really help - https://php-osx.liip.ch. As it turns out php 5.6.25 does support mysql_* but wasn't enabled. Choose your version of php and download it, it generates a proper php.ini for your php, then you are good to goif you use ubuntu 16.04 (maybe and above) just do thisSince many of these answers are old here is how to install mysqli for Easyapache 4.If you try and search for mysqli under your php extensions in WHM you are not going to find it. The way to know which extension you need to install mysqli you will need to run this command in terminalShould return something likeAll you really need from this is mysqlnd copy itTo install mysqli using EachApache4:Have a nice day!I had the same issue, I went to EasyApache4 from the WHM clicked on customize button then PHP Extension tab.. I selected and installed the extension php72-php-mysqlnd and my was solvedArch users (if using mariadb) just should find the following line in /etc/php/php.ini and uncomment it.https://wiki.archlinux.org/index.php/PHP#MySQL/MariaDB

Javascript closures vs PHP closures, what's the difference?

aziz punjani

[Javascript closures vs PHP closures, what's the difference?](https://stackoverflow.com/questions/7417430/javascript-closures-vs-php-closures-whats-the-difference)

What are the differences between closures in JS and closures in PHP? Do they pretty much work the same way? Are there any caveats to be aware of when writing closures in PHP?  

2011-09-14 13:49:57Z

What are the differences between closures in JS and closures in PHP? Do they pretty much work the same way? Are there any caveats to be aware of when writing closures in PHP?  One difference is how both cope with storing the context in which an anonymous function is executed:To fix this notice you'll have to use the use syntax:To have the anonymous function behave somehow like the JavaScript counterpart you'll have to use references:I think this is the most striking difference between JavaScript and PHP closures.Second difference is that every JavaScript closure has a this context available which means, that you can use this inside the closure itself (although it's often quite complicated to figure out what this actually refers to) - PHP's current stable version (PHP 5.3) does not yet support $this inside a closure, but PHP's upcoming version (PHP 5.4) will support $this binding and rebinding using $closure->bind($this) (See the Object Extension RFC for more info.)Third difference is how both languages treat closures assigned to object properties:The same is true if closures are assigned to properties in class definitions:Fourth difference: JavaScript Closures are full fledged objects, wheres in PHP they are restricted objects. For instance, PHP Closures cannot have properties of their own:while in JavaScript you can do:Fifth difference: Returned closures can be immediately called upon in Javascript:Not in PHP:The only thing I've found in PHP (that is totally cool and really handy!) is the ability to use them as getters and setters in classes which was always a nightmare to achieve before, JavaScript can be used in the same way but they do both act almost identically from what I've seen.I'm not sure about the namespacing convention differences between the two but as @Rijk pointed out there is a section on the PHP website dedicated to themThey are also really great for...Looping through items with a controller rather than a new for/each loop on the pageGreat for supplying as arguments to functions/classesWhats annoying about them is...You can't typecast them, since they're just functions...They do pretty much work the same way. Here's more information about the PHP implementation: http://php.net/manual/en/functions.anonymous.phpYou can use a closure (in PHP called 'anonymous function') as a callback:and assign it to a variable:Furthermore, anonymous function 'inherit' the scope in which they were defined - just as the JS implementation, with one gotcha: you have to list all variables you want to inherit in a use():and as a reference if you want to modify the orignal variable.

What Exception subclasses are built into PHP?

Chris

[What Exception subclasses are built into PHP?](https://stackoverflow.com/questions/10838257/what-exception-subclasses-are-built-into-php)

I have not yet been able to find a list of all the built-in Exception sub classes in PHP.  I'd rather use built in ones when they make sense, before creating my own exception subclasses.For example, I know InvalidArgumentException exists, but there appears to be nothing comparable to Java's NullPointerException.Does anyone have or can link to a list of the available Exception subclasses in PHP?

2012-05-31 17:19:58Z

I have not yet been able to find a list of all the built-in Exception sub classes in PHP.  I'd rather use built in ones when they make sense, before creating my own exception subclasses.For example, I know InvalidArgumentException exists, but there appears to be nothing comparable to Java's NullPointerException.Does anyone have or can link to a list of the available Exception subclasses in PHP?PHP 5 has two built in exceptionsLibraries within PHP have their own built in exceptionsSPL includes a few of its own built in exceptions:PHP 7 introduces new exceptions including catchable errors. New exceptions include:PHP 7.3 introduces JSON exceptions:Here's a chart that demonstrates the new hierarchy introduced in PHP 7:Actually, I managed to find them now that I broke down and asked.Technically it looks like PHP only has 2 built in exceptions:

http://www.php.net/manual/en/reserved.exceptions.phpAnd the SPL Defines several more:

http://www.php.net/manual/en/spl.exceptions.phpWith an explanation of their heirarchy:

http://www.php.net/~helly/php/ext/spl/classException.htmlUpdateThe link above is dead, it was a diagram of the basic PHP exception hierarchy.  I couldn't find the original, but here's a replacement:Originally found at http://fossies.org/dox/php-5.2.17/classException.html

Go back URL in Laravel 5.1

Linus Odenring

[Go back URL in Laravel 5.1](https://stackoverflow.com/questions/32826887/go-back-url-in-laravel-5-1)

How can I get the previous URL visited on the website in Laravel 5.1?In Laravel 4 I just needed to write it like below:

2015-09-28 15:43:31Z

How can I get the previous URL visited on the website in Laravel 5.1?In Laravel 4 I just needed to write it like below:The cleanest way seems to be using the url() helper:URL::previous() works for me in my Laravel 5.1 project. Here is Laravel 5.1 doc for previous() method, which is accessible through URL Facade.You can still try alternatives, in your views you can do: or:

How to count non-empty entries in a PHP array?

Damon

[How to count non-empty entries in a PHP array?](https://stackoverflow.com/questions/4422889/how-to-count-non-empty-entries-in-a-php-array)

Consider:I want the result to be 4.I would think that last one would accomplish what I need, but it is not (the empty entries are from unfilled inputs on the form).

2010-12-12 17:22:32Z

Consider:I want the result to be 4.I would think that last one would accomplish what I need, but it is not (the empty entries are from unfilled inputs on the form).You can use array_filter to only keep the values that are「truthy」in the array, like this:If you explicitly want only non-empty, or if your filter function is more complex:So, to count only non-empty items, the same way as if you called empty(item) on each of them:Here's a simple calculation function:This will preserve array indexes if your form handling function needs them, like when you're associating the third input on name to the third value of another input set, and there are empty inputs in between them.

How do I make this preg_match case insensitive?

GianFS

[How do I make this preg_match case insensitive?](https://stackoverflow.com/questions/12411037/how-do-i-make-this-preg-match-case-insensitive)

Consider:I'm trying to show only 100 characters in each side with the search string in the middle.This code actually works, but it is a case sensitive. How do I make it case insensitive?

2012-09-13 16:46:46Z

Consider:I'm trying to show only 100 characters in each side with the search string in the middle.This code actually works, but it is a case sensitive. How do I make it case insensitive?Just add the i modifier after your delimiter #:If the i modifier is set, letters in the pattern match both upper and lower case letters.

localhost vs. 127.0.0.1 in mysql_connect()

Joel

[localhost vs. 127.0.0.1 in mysql_connect()](https://stackoverflow.com/questions/3715925/localhost-vs-127-0-0-1-in-mysql-connect)

2010-09-15 08:33:12Z

"localhost" means local socket connection while 127.0.0.1 is TCP/IP. And yes, sockets are faster than TCP/IP.Cite from http://pl.php.net/mysql_connectNope, the 127.0.0.1 is recommended to use , because Windows 7 has a problem with choosing between IPv6 & IPv4. I tried this and if I used localhost, the page has reloading about 1sec (1,04sec) and when i used 127.0.0.1, the page has reloading 50ms. Both were used under Windows 7.

In Windows XP it doesn´t make difference.Php site says:Note:I guess the speed difference would be too low that it's something you should'nt be worried about.For Unix, add to the client block after 

[client]

in /etc/mysql/my.cnf this line :For macs, here's the solution:Connect to MySQL using localhost instead of 127.0.0.1 on a MAC. For a long while now I’ve been connecting to MySQL on my development platform with 127.0.0.1 because for some reason localhost didn’t work. Turns out it’s because 127.0.0.1 uses TCP/IP and localhost uses sockets. The php.ini file points to the wrong place for the mysql.sock so all you have to do is change it, restart apache and voila!Note: If you don’t have a php.ini file, you need to copy the provided default called php.ini.defaultvia http://madproject.com/general/connect-to-mysql-using-localhost-instead-of-127-0-0-1-on-a-mac/

How do I make a PHP form that submits to self?

user544079

[How do I make a PHP form that submits to self?](https://stackoverflow.com/questions/5826784/how-do-i-make-a-php-form-that-submits-to-self)

How do I make a self-posting/self-submitting form, i.e. a form that submits the results to itself, instead of submitting to another form?

2011-04-29 01:03:32Z

How do I make a self-posting/self-submitting form, i.e. a form that submits the results to itself, instead of submitting to another form?The proper way would be to use $_SERVER["PHP_SELF"] (in conjunction with htmlspecialchars to avoid possible exploits). You can also just skip the action= part empty, which is not W3C valid, but currently works in most (all?) browsers - the default is to submit to self if it's empty.Here is an example form that takes a name and email, and then displays the values you have entered upon submit:I guess , you means $_SERVER['PHP_SELF']. And if so , you really shouldn't use it without sanitizing it first.  This leaves you open to XSS attacks.The if(isset($_POST['submit'])) condition should be above all the HTML output, and should contain a header() function with a redirect to current page again (only now , with some nice notice that "emails has been sent" .. or something ). For that you will have to use $_SESSION or $_COOKIE.And please. Stop using $_REQUEST. It too poses a security threat.That will only work if register_globals is on, and it should never be on (unless of course you are defining that variable somewhere else).Try setting the form's action attribute to ?...You can also set it to be blank (""), but older WebKit versions had a bug.Try this <form method="post" id="reg" name="reg" action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']);?>"Works well :)Your submit button doesn't have a name. Add name="submit" to your submit button. If you view source on the form in the browser, you'll see how it submits to self - the form's action attribute will contain the name of the current script - therefore when the form submits, it submits to itself. Edit for vanity sake!

Redirecting to previous page after login? PHP

Alejandra Uzelac

[Redirecting to previous page after login? PHP](https://stackoverflow.com/questions/14523468/redirecting-to-previous-page-after-login-php)

I've been searching for a solution but it's seem I can't get it right, no matter what I try.  After successful login, the user should be redirected to the page he came from, let's say he's been browsing a post and wants to log in so he can leave a comment, so he should be redirected to the post he was browsing. So here is what I have:login.php shows the login form:The login-check.php checks if the username and pass are entered, does the user exist, or if he's already logged in, and a p parameter is sent to login.php:then parameter p is sent back to login.php and displays the according message:BUT, instead of going to index.php after successful login, it should go to the page the user has previously been. I've tried in different ways but ether it doesn't work at all or it returns to login.php. It doesn't need to be super safe, because I'm doing this for a school project.

ALSO, I consider myself pretty novice, so please have patience :D

2013-01-25 14:10:05Z

I've been searching for a solution but it's seem I can't get it right, no matter what I try.  After successful login, the user should be redirected to the page he came from, let's say he's been browsing a post and wants to log in so he can leave a comment, so he should be redirected to the post he was browsing. So here is what I have:login.php shows the login form:The login-check.php checks if the username and pass are entered, does the user exist, or if he's already logged in, and a p parameter is sent to login.php:then parameter p is sent back to login.php and displays the according message:BUT, instead of going to index.php after successful login, it should go to the page the user has previously been. I've tried in different ways but ether it doesn't work at all or it returns to login.php. It doesn't need to be super safe, because I'm doing this for a school project.

ALSO, I consider myself pretty novice, so please have patience :DA common way to do this is to pass the user's current page to the Login form via a $_GET variable.For example: if you are reading an Article, and you want to leave a comment. The URL for comments is comment.php?articleid=17. While comment.php is loading, it notices that you are not logged in. It wants to send you to login.php, like you showed earlier. However, we're going to change your script so that is also tells the login page to remember where you are:This should send the user to: login.php?location=comment.php%3Farticleid%3D17. login.php should now check to see if $_GET['location'] is populated. If it is populated, then send the user to this location (in this case, comment.php?articleid=17). For example: GotchasYou should run some validation against $_GET['location'] before sending the user there. For example, if I tell people who use your site to click on this link: login.php?location=http%3A%2F%2Fmalice.com%2Fevilpage.php... then they will be sent to a foreign URL that will try to do something bad.Always make sure to use urlencode when passing URLs as $_GET parameters. This encodes special URL characters (such as ?, &, and %) so that they don't break your url (e.g.: login.php?location=comment.php?id=17 <- this has two ?'s and will not work correctly)When user gets to the login page use this to see where is come fromThen set this value into the session, and when he is authenticated use url from the session to redirect him back. But you should do some checking before, if the url is your site. Maybe he come from another site directly to login :)You can save a page using php, like this:And return to the page with:You should probably place the url to redirect to in a POST variable. Since the login page is a separate page, I am assuming that you want to redirect to the page that the user reached the login page from.$_SERVER['REQUEST_URI'] will simply hold the current page. What you want to do is use $_SERVER['HTTP_REFERER']So save the HTTP_REFERER in a hidden element on your form <input type="hidden" name="referer" value="<?= $_SERVER['HTTP_REFERER'] ?>" /> but keep in mind that in the PHP that processes the form you will need some logic that redirects back to the login page if login fails but also to check that the referer is actually your website, if it isn't, then redirect back to the homepage.Another way, using SESSIONAssign current URL to session (use it on every page)and in your login page, useuse something like And if it's a successful login, display a link saying "Click here to go back" and a link to the referrer, and when the page loads, use some javascript to automatically load that page (don't use back() or whatever that function is as it won't re-load the page and it'll appear like the user never logged in.You can use session to to store the current page on which you want to return after login and that will work for other pages if you maintain session properly. It is very useful technique as you can develop your breadcrumb using it.You should try something like $_SERVER['HTTP_REFERER'].Construct the form action such that it 'remembers', or persists, the previous page by writing out a returnurl=value query string key/value pair to the URL - this can be passed from any page that redirects to login.I think you might need the $_SERVER['REQUEST_URI'];That should take the url they're at and redirect them them after a successful login.how about this :: javascript+phpit will work same as the previous button in your browserUse hidden input in your login page.

Like:You should first get user refer page in a variable using $_SERVER['HTTP_REFERER']; in your login page.LIKE:And now when the user clicks to Login then change header location to user refer page LIKE:And in this time you should first check that user refers page empty or not because your user can visit direct your login page then your $refPage variable will be empty so after Click to Login page stays here LIKE:Or you can use input type hidden where you can set value $_SERVER['HTTP_REFERER'];LIKE:And when a user clicks to Login then you can get the refPage value and redirect the previous page. And you should also check empty refer page. Because your user can visit direct your login page.

Thank you.I have created a function to store URL of previous pageAnd call this function in login.php@philipobenito's answer worked best for me.

I first created a hidden input that contain the user's HTTP referer and after a successful login i redirected the users to whatever value was stored in that hidden input

How to display errors for my MySQLi query? [duplicate]

Iain Simpson

[How to display errors for my MySQLi query? [duplicate]](https://stackoverflow.com/questions/17053466/how-to-display-errors-for-my-mysqli-query)

I am using the following script to process a form to add info to my website. The problem I am having is when I submit the form nothing gets submitted to the database, and there are no errors. How can I add error reporting to my query?

2013-06-11 20:44:12Z

I am using the following script to process a form to add info to my website. The problem I am having is when I submit the form nothing gets submitted to the database, and there are no errors. How can I add error reporting to my query?Just simply add or die(mysqli_error($db)); at the end of your query, this will print the mysqli error.As a side note I'd say you are at risk of mysql injection, check here How can I prevent SQL injection in PHP?. You should really use prepared statements to avoid any risk.As in:Trigger error is better than die because you can use it for development AND production, it's the permanent solution.

What is PHPSESSID?

DigitalRoss

[What is PHPSESSID?](https://stackoverflow.com/questions/1370951/what-is-phpsessid)

I'm playing around with cookies. And I dont have any cookies called PHPSESSID.Do i need it? Can i remove it?Whats the "function" of it?Prints:

2009-09-03 01:00:49Z

I'm playing around with cookies. And I dont have any cookies called PHPSESSID.Do i need it? Can i remove it?Whats the "function" of it?Prints:PHP uses one of two methods to keep track of sessions. If cookies are enabled, like in your case, it uses them.If cookies are disabled, it uses the URL. Although this can be done securely, it's harder and it often, well, isn't. See, e.g., session fixation.Google for it, you will get lots of SEO advice. The conventional wisdom is that you should use the cookies, but php will keep track of the session either way. PHPSESSID reveals you are using PHP. If you don't want this you can easily change the name using the session.name in your php.ini file or using the session_name() function.It's the identifier for your current session in PHP. If you delete it, you won't be able to access/make use of session variables. I'd suggest you keep it.Check php.ini for auto session id.If you enable it, you will have PHPSESSID in your cookies.

Built in support for sets in PHP?

devios1

[Built in support for sets in PHP?](https://stackoverflow.com/questions/8127384/built-in-support-for-sets-in-php)

I'm looking for a simple way to create an array in php that will not allow duplicate entries, but allows for easy combining of other sets or arrays.I'm mostly interested in whether such a feature exists in the language because writing my own wouldn't be difficult. I just don't want to if I don't need to.

2011-11-14 20:06:41Z

I'm looking for a simple way to create an array in php that will not allow duplicate entries, but allows for easy combining of other sets or arrays.I'm mostly interested in whether such a feature exists in the language because writing my own wouldn't be difficult. I just don't want to if I don't need to.Just an idea, if you use the array keys instead of values, you'll be sure there are no duplicates, also this allows for easy merging of two "sets".The answer is no, there is not a native set solution inside PHP. There is a Set data structure, but that is not baseline PHP.There is a convention for implementing sets using maps (i.e. associative arrays) in any language. And for PHP you should use true as the bottom value.You can use array_combine for removing duplicatesI also had this problem and so have written a Class: https://github.com/jakewhiteley/php-set-objectAs suggested, it does extend and ArrayObject and allow native-feeling insertion/iteration/removal of values, but without using array_unique() anywhere.Implementation is based on the MDN JS Docs for Sets in EMCA 6 JavaScript.In Laravel there is a method unique in Collection class that may be helpful. From Laravel documentation:

Are there tuples in PHP?

brian

[Are there tuples in PHP?](https://stackoverflow.com/questions/22083760/are-there-tuples-in-php)

I know in Python and other languages we have access to tuples to better facilitate, semantically or otherwise, the structuring of data.My question is: Does PHP have tuples?If not, what is the nearest facility?

2014-02-28 00:29:04Z

I know in Python and other languages we have access to tuples to better facilitate, semantically or otherwise, the structuring of data.My question is: Does PHP have tuples?If not, what is the nearest facility?PHP's only real built in data structure that people use for everything is the array.Arrays in PHP are all hash tables and can have either numeric or string indexes and can contain anything (usually more arrays).There are a few array constructs that work like tuples.See http://us1.php.net/manual/en/language.types.array.phphttp://us1.php.net/listList is very convenient for returning multiple values from a function.Arrays in PHP can be used very much like a tuple:As of PHP 7.1 you can also unpack like this:From https://coderwall.com/p/bah4oq:You can pass an array of objects to be used just like a tuple. You can also store heterogeneous types in the array at once, which mimics very closely the functionality of a tuple. As of PHP 7.1 Symmetric Array Destructuring was introduced which allows you to assign in the same way as list() as mentioned in previous comments. http://php.net/manual/en/migration71.new-features.php#migration71.new-features.symmetric-array-destructuringThe previous answers are correct in that you can simulate tuples with PHP arrays, however only in a limited sense, not all use cases. This is evident when you want to use tuples as keys to a map. Eg. when implementing a state machine, keys in your transition table would be tuples:If we had proper tuple support in PHP we could do something like this:Instead we have to simulate it like this:Both achieve the same result, but the first one has clear semantics.

Run Bash Command from PHP

r0skar

[Run Bash Command from PHP](https://stackoverflow.com/questions/11052162/run-bash-command-from-php)

I have a bash script, that I run like this via the command line:I am trying to execute the above command, after I call a certain php file.What I have right now is:But it doesn´t work. I tried it using exec and system too, but the script never got executed.However when I try to run shell_exec("ls"); it does work and $output is a list of all files.I am not sure whether this is because of a limitation of the VPS I am using or if the problem is somewhere else?

2012-06-15 14:03:18Z

I have a bash script, that I run like this via the command line:I am trying to execute the above command, after I call a certain php file.What I have right now is:But it doesn´t work. I tried it using exec and system too, but the script never got executed.However when I try to run shell_exec("ls"); it does work and $output is a list of all files.I am not sure whether this is because of a limitation of the VPS I am using or if the problem is somewhere else?You probably need to chdir to the correct directory before calling the script. This way you can ensure what directory your script is "in" before calling the shell command.Your shell_exec is executed by www-data user, from its directory.

You can tryWhere your script is located in /home/user/bin

Later on you canTo display the output of command. (Alternatively, without exporting path, try giving entire path of your script instead of just ./script.shCheck if have not set a open_basedir in php.ini or .htaccess of domain what you use. That will jail you in directory of your domain and php will get only access to execute inside this directory. 

Why would Magento fail to save a customer after generating an ID?

Jonathan Day

[Why would Magento fail to save a customer after generating an ID?](https://stackoverflow.com/questions/6107850/why-would-magento-fail-to-save-a-customer-after-generating-an-id)

I'm attempting to track down the cause of a rare bug (love those intermittent bugs) where a customer selects to Register at time of checkout, but when the order is completed, Magento somehow fails to save the customer record.  This results in an orphan order with no email address, a difficult customer service situation.  Here are the results of my investigations so far: Thoughts:   Does anyone have any suggestions on how to track this down?Version is Enterprise 1.9.

2011-05-24 08:45:11Z

I'm attempting to track down the cause of a rare bug (love those intermittent bugs) where a customer selects to Register at time of checkout, but when the order is completed, Magento somehow fails to save the customer record.  This results in an orphan order with no email address, a difficult customer service situation.  Here are the results of my investigations so far: Thoughts:   Does anyone have any suggestions on how to track this down?Version is Enterprise 1.9.I would add lots of extra logging, try to log it well enough to capture the bug - and to save those logs if the bug can be detected.Once you have logs that show the bug, you can then isolate the problematic code more easily.For this, you may need to log the database queries, which might, unfortunately, be tricky if the volume of data is high and/or subject to privacy concerns.

OpenSSL not working on Windows, errors 0x02001003 0x2006D080 0x0E064002

Brock Hensley

[OpenSSL not working on Windows, errors 0x02001003 0x2006D080 0x0E064002](https://stackoverflow.com/questions/15558321/openssl-not-working-on-windows-errors-0x02001003-0x2006d080-0x0e064002)

Problem: OpenSSL is not working in my Windows environment. OpenSSL repeatedly reports errors 0x02001003, 0x2006D080 and 0x0E064002.Environment:What I've Attempted:Code:  Results:OpenSSL Manually:EDIT:FINAL THOUGHTS:

I set up a linux box and I'm getting the same errors. After some playing around I see that even though it's throwing errors at the openssl_pkey_new it does eventually create my test p12 file. Long story short, the errors are misleading and it has to deal more with how you are using openssl functions not so much server-side configuration.Final code:Close away.A year later...So I found myself doing this again a year later, and regardless of whatever PATH variables I set on the computer or during the script execution, it kept erroring about file not found. I was able to resolve it by passing in the config parameter in the config_args array in openssl_pkey_new. Here is a function that tests the ability to successfully use OpenSSL:

2013-03-21 21:17:55Z

Problem: OpenSSL is not working in my Windows environment. OpenSSL repeatedly reports errors 0x02001003, 0x2006D080 and 0x0E064002.Environment:What I've Attempted:Code:  Results:OpenSSL Manually:EDIT:FINAL THOUGHTS:

I set up a linux box and I'm getting the same errors. After some playing around I see that even though it's throwing errors at the openssl_pkey_new it does eventually create my test p12 file. Long story short, the errors are misleading and it has to deal more with how you are using openssl functions not so much server-side configuration.Final code:Close away.A year later...So I found myself doing this again a year later, and regardless of whatever PATH variables I set on the computer or during the script execution, it kept erroring about file not found. I was able to resolve it by passing in the config parameter in the config_args array in openssl_pkey_new. Here is a function that tests the ability to successfully use OpenSSL:The code below works as expected. BUT if you run openssl_error_string() after the openssl methods it shows error:0E06D06C:configuration file routines:NCONF_get_string:no value which is some notice I have not been able to find documentation on.Further note that according to http://www.php.net/manual/en/function.openssl-error-string.php you could be seeing mis-leading errors as error messages are queued:I had a similar problem, for me it helped to set the environment variable 'OPENSSL_CONF' manually at the beginning of my script.Somehow the environment variable wasn't set correctly, or didn't get through to my php (Setup: AMPPS, Win7 64Bit).The example location used below is the path that you'd have to use with a standard AMPPS installation, so if you are using AMPPS, just copy&paste :a few things here :%PATH% should also contain windows and system32 so your %PATH% should look like c:\windows;c:\windows\system32;E:\wamp\php and in e:\wamp\php should be the openssl dll filealso try the openssl version matching the header version 0.9.8y 5 Feb 2013 download here for 32bit and here for 64bitthis code seems to work for me:If you're using Apache 2.4 + mod_fcgid, you can specify OpenSSL conf file by adding FcgidInitialEnv in httpd.conf file:I'm not using preconfigured package such as WAMP, I've got Apache from Apache Lounge and PHP from windows.php.net and configured by myself.Clean solution:You must add the path to the OPENSSL_CONF system variable. Adding it to the Path system variable is not sufficient! Under Windows 7 you find the settings dialog under: "Control Panel > System and Security > System > Advanced system settings (left menu) > Advanced (Tab) > Environment Variables...". Add the Variable OPENSSL_CONF there.It is not required to prepare the openssl.cnf file before usage - it will work out of the box. But you can, if you want to fine tune settings.Have you installed OpenSSL via this method ?

Installing OpenSSL on Windows If you see the list of commands printed by OpenSSL, you know that your installation is done correctly.In my case copying the files to c:\windows\system32 helped me outlibeay32.dll,

ssleay32.dllOne can find them in OpenSSL_INSTALL_PATH\bin.Might I suggest using Virtual Box, create a VM and install the LAMP stack. This will give you a "more real" environment. As well as troubleshooting OpenSSL is easier on Linux. With that said, I believe your problem is you can't find the plugin file itself. Make sure it lives in the right path and exists on your machine and the process Apache runs under has permissions to read it.

Writing/Drawing over a PDF template document in PHP

filip-fku

[Writing/Drawing over a PDF template document in PHP](https://stackoverflow.com/questions/4299315/writing-drawing-over-a-pdf-template-document-in-php)

I'd like to be able to write/overlay text over an existing pdf document using PHP. What I am hoping to do is have a pdf document that can act as a template, and fill in the gaps by opening the template doc, overlaying the relevant text, and serving the result as a new document. The template document is a single page so page merging/manipulation is not necessary.Are there any free libraries that can do this? Anywhere I should look? Most searches I've done seem to deal with merging documents/adding pages, instead of overlaying content over an existing page. Thanks.*EDIT:

Here is what I did:

1. Download FPDF

2. Download FPDI + FPDF_TPL fromhttp://www.setasign.de/products/pdf-php-solutions/fpdi/downloads/Here is some sample code for any future wanderers (adapted from the samples at www.setasign.de):

2010-11-28 21:53:07Z

I'd like to be able to write/overlay text over an existing pdf document using PHP. What I am hoping to do is have a pdf document that can act as a template, and fill in the gaps by opening the template doc, overlaying the relevant text, and serving the result as a new document. The template document is a single page so page merging/manipulation is not necessary.Are there any free libraries that can do this? Anywhere I should look? Most searches I've done seem to deal with merging documents/adding pages, instead of overlaying content over an existing page. Thanks.*EDIT:

Here is what I did:

1. Download FPDF

2. Download FPDI + FPDF_TPL fromhttp://www.setasign.de/products/pdf-php-solutions/fpdi/downloads/Here is some sample code for any future wanderers (adapted from the samples at www.setasign.de):Have a look at the FPDI Library an add on to FPDF for template annotation.It can also bolt-on to TCPDF, another popular PHP PDF library.  An existing PDF is used as the base of a page, instead of a blank, after that the procedures are the same as regular PDF creation.You probably want to use PDF Forms for what you want to do. To fill these babies you could use the FDF method described here: Using HTML forms to fill in PDF fields with PHP and FDF.

There is actually another nice SO post about PDF form filling here: Filling PDF Forms with PHP.When you want to use PDF lib to write over a document, positionning is time consuming and boring. Dhek is useful for such task: https://github.com/applicius/dhek/releases .JSON mapping over PDF page/coordinates is defined, so that you can write with PDF API you prefer.

CodeIgniter: Unable to connect to your database server using the provided settings Error Message

Onema

[CodeIgniter: Unable to connect to your database server using the provided settings Error Message](https://stackoverflow.com/questions/7254049/codeigniter-unable-to-connect-to-your-database-server-using-the-provided-settin)

I have been using CI just fine using the MySQL driver. I want to use the MySQL driver instead, but as soon as I change it (just add the ‘i’ at the end of MySQL, and added the port number) I get the following error messagemy setting look like this:I'm Using:Am I doing anything wrong?Thank you,

2011-08-31 07:52:11Z

I have been using CI just fine using the MySQL driver. I want to use the MySQL driver instead, but as soon as I change it (just add the ‘i’ at the end of MySQL, and added the port number) I get the following error messagemy setting look like this:I'm Using:Am I doing anything wrong?Thank you,For me the issue was in the php.ini file. The property mysql.default_socket was pointing to file in a non-existent directory. The property was pointing to /var/mysql/mysql.sock but in OSX, the file was located in /tmp/mysql.sock.Once I updated the entry in php.ini and restarted the webserver, the issue was resolved.I think, there is something wrong with PHP configration. 

First, debug your database connection using  this script at the end of ./config/database.php :Then see what the problem is.Today I fallen this kind of problem in live server and i solved the problem changing this lineto I solved the problem by changing $db['default']['pconnect'] = TRUE; TO

$db['default']['pconnect'] = FALSE; in /application/config/database.phpSET $db['default']['db_debug']  to FALSE instead of TRUE .If that is all you have changed, you may not have the mysqli driver installed or enabled within your PHP configuration.Check for its presence using phpinfo(), or in your php.ini file (extension=php_mysqli....).Extending @Valeh Hajiyev great and clear answer for mysqli driver tests:Debug your database connection using this script at the end of ./config/database.php:(CI 3) For me, what worked was changing:Problem solved!I was having all my website set up first in XAMMP, then I had to transfer it to LAMP, in a SUSE installation of LAMP, where I got this error.The problem is that these parameters in the database.php file should not be initialised.

Just leave username and password blank.

That's just it.(My first and lame guess would be that's because of old version of mysql, as built-in installations come with older versions.Change $db['default']['dbdriver'] = 'mysql' to $db['default']['dbdriver'] = 'mysqli'In my case storage was a problem. My hard drive was full...

Make some space in hardware and your site will work fine If you used this to secure your server:

http://www.thonky.com/how-to/prevent-base-64-decode-hack/And then got the error: Code Igniter needs mysql_pconnect() in order to run.I figured it out once I realized all the Code Igniter websites on the server were broken, so it wasn't a localized connection issue.I've solved this. In my case I just changed my configuration. 'hostname' became 'localhost'

PHP: Split a string in to an array foreach char

matthy

[PHP: Split a string in to an array foreach char](https://stackoverflow.com/questions/1293950/php-split-a-string-in-to-an-array-foreach-char)

I am making a method so your password needs at least one captial and one symbol or number.

I was thinking of splitting the string in to lose chars and then use preggmatch to count if it contains one capital and symbol/number.however i did something like this in action script but can't figure out how this is called in php. i cant find a way to put every char of a word in a array.AS3 exampleThanks,

Matthy

2009-08-18 13:43:24Z

I am making a method so your password needs at least one captial and one symbol or number.

I was thinking of splitting the string in to lose chars and then use preggmatch to count if it contains one capital and symbol/number.however i did something like this in action script but can't figure out how this is called in php. i cant find a way to put every char of a word in a array.AS3 exampleThanks,

MatthyYou can access characters in strings in the same way as you would access an array index, e.g.You could also do:However you might find it is easier to validate the string as a whole string, e.g. using regular expressions.you can convert a string to array with str_split and use foreachYou can access a string using [], as you do for arrays:Since str_split() function is not multibyte safe, an easy solution to split UTF-8 encoded string is to use preg_split() with u (PCRE_UTF8) modifier.A less readable, but better performing solution, when iterating over many strings, might be using isset to check the end of the string. This might be better performing because isset is a language construct and strlen is a function:This question should provide more background.

Quickest Way to Read First Line from File

Jonah

[Quickest Way to Read First Line from File](https://stackoverflow.com/questions/4521936/quickest-way-to-read-first-line-from-file)

What's the quickest, easiest way to read the first line only from a file?  I know you can use file, but in my case there's no point in wasting the time loading the whole file.Preferably a one-liner.

2010-12-23 19:44:06Z

What's the quickest, easiest way to read the first line only from a file?  I know you can use file, but in my case there's no point in wasting the time loading the whole file.Preferably a one-liner.Well, you could do:It's not one line, but if you made it one line you'd either be screwed for error checking, or be leaving resources open longer than you need them, so I'd say keep the multiple linesIf you ABSOLUTELY know the file exists, you can use a one-liner:The reason is that PHP implements RAII for resources. That means that when the file handle goes out of scope (which happens immediately after the call to fgets in this case), it will be closed. I'm impressed no one mentioned the file() function:or if version_compare(PHP_VERSION, "5.4.0") < 0:You could try to us fread and declare the file size to read. In one of my projects (qSandbox) I uses this approach to get the first line of a text file that I read anyways.

I have my email templates are in a text files and the subject is in the first line.fgets() returns "

" which is a new line at the end,but using this code you will get first line without the lineBreak at the end : If you don't mind reading in the entire file, then a one-liner would be::)Try this:

How to hide .env passwords in Laravel whoops output?

Jeff Puckett

[How to hide .env passwords in Laravel whoops output?](https://stackoverflow.com/questions/46407009/how-to-hide-env-passwords-in-laravel-whoops-output)

How can I hide my passwords and other sensitive environment variables on-screen in Laravel's whoops output?Sometimes other people are looking at my development work. I don't want them to see these secrets if an exception is thrown, but I also don't want to have to keep toggling debug on and off, or spin up a dedicated site just for a quick preview.

2017-09-25 13:57:51Z

How can I hide my passwords and other sensitive environment variables on-screen in Laravel's whoops output?Sometimes other people are looking at my development work. I don't want them to see these secrets if an exception is thrown, but I also don't want to have to keep toggling debug on and off, or spin up a dedicated site just for a quick preview.As of Laravel 5.5.13, there's a new feature that allows you to blacklist certain variables in config/app.php under the key debug_blacklist. When an exception is thrown, whoops will mask these values with asterisks * for each character.For example, given this config/app.phpResults in this output:First of all, love the solution by Jeff above.2nd, if like me you wanna hide all the env variables while still use whoops, here is a solution:Output:Thanks Jeff and Raheel for helping out, but I just found a little gotcha:Even if I clear out all environment keys from _ENV, the same keys are STILL exposed through the _SERVER variables listed. Adding the code below in config/app.php would hide all environment variables from the whoops page:I've made a package to solve this problem.Just install it usingMost of the server and all the env variables will be removed. Any password-like fields in $_POST will have their values hidden.You can also customize it in either blacklist or whitelist approach to show/obfuscate/remove fields however you like.The solution by @jeff + @raheel is great!!! On a project recently we found we sometimes wanted to whitelist a property or two, so building on the above, you can whitelist specific properties you want to debug with something like:If you want to allow that list to be configured via .env, you can do something like:Then in your .env, do something like:Cheers!Laravel 5.6 not works for my.

but this works:I would be grateful for a better solution.For Laravel 5.6-5.8:Just Change  To:In the .env file.

how to use php DateTime() function in Laravel 5

Praveen Srinivasan

[how to use php DateTime() function in Laravel 5](https://stackoverflow.com/questions/30708711/how-to-use-php-datetime-function-in-laravel-5)

I am using laravel 5. I have try to use the But it shows error likes this.What Can I do?

2015-06-08 12:05:01Z

I am using laravel 5. I have try to use the But it shows error likes this.What Can I do?DateTime is not a function, but the class.When you just reference a class like new DateTime() PHP searches for the class in your current namespace. However the DateTime class obviously doesn't exists in your controllers namespace but rather in root namespace.You can either reference it in the root namespace by prepending a backslash:Or add an import statement at the top:Best way is to use the Carbon dependency.With Carbon\Carbon::now(); you get the current Datetime.With Carbon you can do like enything with the DateTime. Event things like this:If you just want to get the current UNIX timestamp I'd just use time()I didn't mean to copy the same answer, that is why I didn't accept my own answer.Actually when I add use DateTime in top of the controller solves this problem.

Remove all array elements except what I want?

Stan

[Remove all array elements except what I want?](https://stackoverflow.com/questions/10122801/remove-all-array-elements-except-what-i-want)

I have controller that takes post parameters from HTML form, it will then send them to model that will insert the array into Cassandra database.It is SQLInjection proof, because it's NoSQL, however what I'm afraid is that user can just simulate 100k post parameters or just add some that I don't need and it will be inserted into database. How can I make sure that only the values I need will stay in my array.Example:How do I make sure that my array will unset all the elements that are not in good example?

2012-04-12 11:39:26Z

I have controller that takes post parameters from HTML form, it will then send them to model that will insert the array into Cassandra database.It is SQLInjection proof, because it's NoSQL, however what I'm afraid is that user can just simulate 100k post parameters or just add some that I don't need and it will be inserted into database. How can I make sure that only the values I need will stay in my array.Example:How do I make sure that my array will unset all the elements that are not in good example?You are looking for array_intersect:See it in action.Of course this specific example does not make much sense because it works on array values, but there is also array_intersect_key that does the same based on keys.By whitelisting the entries you do expect.Anyway, using Cassandra as a data-store is of course not a reason not to do validation on the data you're receiving.What about multidimensional array? I was researched for a couple of hours for this solution, nowhere found an optimal solution. so, i wrote it by myselfuse: example call: exampleoutput:so you get only needed keys from the multidimensional array. it is not limited only for "multidimensional", you can use it by passing an array likeoutput you get:cheers!This will output the same as $post_allowed. What it does is only allow the values in $post_input that are also present in $post_allow.This is called white listing, your example is misleading as the $_POST is an association array. This is a whitelisting function I created for associative arrays. In case you’re dealing with associative arrays and you don’t want to use array_intersect_key() for any reason, you can also do a simpler approach of manually build a new array using the values you want from the old one.Use array intersection. array intersect, it will help you.Its worth remembering that while array_intersect and array_intersect_key are good they might well be overkill. In my situation I only wanted 1 element left, therefore the simplest option was just to rebuild the array I wanted based on the key/values I needed. I wonder at what point therefore the array_intersect's don't become worth it and you are simply better off with $new = array('whatI'=>'want');. I believe in the OP this is worth it but in smaller cases it might be overkill.Alternatively in response to the original question simply using unset might have been a cheaper option - unset($post['one'],$post['two'],$post['three']). Again though, it relates to the point at which this becomes too inefficient and the array_intersect functions are better.

Detect bad json data in PHP json_decode()?

soren.qvist

[Detect bad json data in PHP json_decode()?](https://stackoverflow.com/questions/2348152/detect-bad-json-data-in-php-json-decode)

I'm trying handle bad json data when parsed through json_decode(). I'm using the following script:If $_POST equals:Then json_decode handles the error fine and spits out "bad json data!";

However, if I set $_POST to something like "invalid data", it gives me:Do I need to write a custom script to detect valid json data, or is there some other nifty way to detect this?

2010-02-27 16:55:31Z

I'm trying handle bad json data when parsed through json_decode(). I'm using the following script:If $_POST equals:Then json_decode handles the error fine and spits out "bad json data!";

However, if I set $_POST to something like "invalid data", it gives me:Do I need to write a custom script to detect valid json data, or is there some other nifty way to detect this?Here are a couple of things about json_decode :

To solve the warning problem, a solution would be to use the @ operator (I don't often recommend using it, as it makes debuging a lot more harder... But here, there is not much of a choice) :You'd then have to test if $data is null -- and, to avoid the case in which json_decode returns null for null in the JSON string, you could check json_last_error, which (quoting) :

Which means you'd have to use some code like the following :You can also use json_last_error : http://php.net/manual/en/function.json-last-error.phpwhich as documentation says :   here is an exampleThis is how Guzzle handles jsonSince PHP 7.3, the json_decode function will accept a new JSON_THROW_ON_ERROR option that will let json_decode throw an exception instead of returning null on error.Example:I just broke my head over a json syntax error in what appeared to be perfect json: {"test1":"car", "test2":"auto"} from a url encoded string.But in my case some of the above was html encoded, as adding html_entity_decode($string) did the trick.Hopefully this will save someone else some time.I just spent an hour going through all the possible solutions on this page. I took the liberty of collective all these possible solutions into one function, to make it quicker and easier to try and debug. I hope it can be of use to someone else. I'll maintain it here: https://github.com/zethodderskov/decontaminate-text-in-php/blob/master/decontaminate-text-preparing-it-for-json-decode.php

How to use basic authorization in PHP curl

Al Amin

[How to use basic authorization in PHP curl](https://stackoverflow.com/questions/20064271/how-to-use-basic-authorization-in-php-curl)

I am having problem with PHP curl request with basic authorization.Here is the command line curl:I have tried by setting curl header in following ways but it's not workingI get the response "authentication parameter in the request are missing or invalid" but I have used proper id and api_key which is working in command line curl (I tested)Please help me.

2013-11-19 05:58:35Z

I am having problem with PHP curl request with basic authorization.Here is the command line curl:I have tried by setting curl header in following ways but it's not workingI get the response "authentication parameter in the request are missing or invalid" but I have used proper id and api_key which is working in command line curl (I tested)Please help me.Try the following code :Can you try this,REF: http://php.net/manual/en/function.curl-setopt.phpIts Simple Way To Pass HeaderCheck My JSON Value 

PHP remove commas from numeric strings

user1082428

[PHP remove commas from numeric strings](https://stackoverflow.com/questions/9334879/php-remove-commas-from-numeric-strings)

In PHP, I have an array of variables that are ALL strings.  Some of the values stored are numeric strings with commas.  What I need:A way to trim the commas from strings, and ONLY do this for numeric strings.  This isn't as straightforward as it looks.  The main reason is that the following fails:This fails because $a = "1435" is numeric.  But $a = "1,435" is not numeric.  Because some of the strings I get will be regular sentences with commas, I can't run a string replace on every string. 

2012-02-17 20:24:11Z

In PHP, I have an array of variables that are ALL strings.  Some of the values stored are numeric strings with commas.  What I need:A way to trim the commas from strings, and ONLY do this for numeric strings.  This isn't as straightforward as it looks.  The main reason is that the following fails:This fails because $a = "1435" is numeric.  But $a = "1,435" is not numeric.  Because some of the strings I get will be regular sentences with commas, I can't run a string replace on every string. Not tested, but probably something like if(preg_match("/^[0-9,]+$/", $a)) $a = str_replace(...)Do it the other way around:The easiest would be:or if you need float:Try this .this worked for me number_format(1235.369,2,'.','')if you use  number_format like this 

number_format(1235.369,2) answer will be 1,235.37but if you use like below number_format(1235.369,2,'.','') answer will be 1235.37it's removing the "," of "1,235.37"If you want to remove commas from numbers inside a string that also contains words, the easiest way I think would be to use preg_replace_callback:Example:   

Output: In this case the pattern (regex) differs from the one given in the accepted answer since we don't want to remove the other commas (punctuation).If we'd use /[0-9,]+/ here instead of /[0-9]+,[0-9]+/ the output would be:It sounds like the ideal solution for what you're looking for is filter_var():(Note that it's using FILTER_VALIDATE_FLOAT instead of FILTER_VALIDATE_INT because that one doesn't currently have a FILTER_FLAG_ALLOW_THOUSAND option). 

How to solve JSON_ERROR_UTF8 error in php json_decode?

James Harzs

[How to solve JSON_ERROR_UTF8 error in php json_decode?](https://stackoverflow.com/questions/10199017/how-to-solve-json-error-utf8-error-in-php-json-decode)

I am trying this code I've tried a lot of functions, html_entities_decode, utf8_encode and decode, decoding the hex codes, but I always get the error "JSON_ERROR_UTF8".How could I solve this?

2012-04-17 20:55:29Z

I am trying this code I've tried a lot of functions, html_entities_decode, utf8_encode and decode, decoding the hex codes, but I always get the error "JSON_ERROR_UTF8".How could I solve this?There is a good function  to sanitize your arrays.I suggest you use a json_encode wrapper like this :In my application utf8_encode() works better than iconv() You need simple line of code:Credit: Sang Le, my teamate gave me this code. Yeah!The iconv function is pretty worthless unless you can guarantee the input is valid.  Use mb_convert_encoding instead.You can get more explicit than "auto", and even specify a comma-separated list of expected input encodings.Most importantly, invalid characters will be handled without causing the entire string to be discarded (unlike iconv).Decoding JSON in PHP

Decoding JSON is as simple as encoding it. PHP provides you a handy json_decode function that handles everything for you. If you just pass a valid JSON string into the method, you get an object of type stdClass back. Here’s a short example:If you want to get an associative array back instead, set the second parameter to true:If you expect a very large nested JSON document, you can limit the recursion depth to a certain level. The function will return null and stops parsing if the document is deeper than the given depth.The last argument works the same as in json_encode, but there is only one bitmask supported currently (which allows you to convert bigints to strings and is only available from PHP 5.4 upwards).We’ve been working with valid JSON strings until now (aside fromt the null depth error). The next part shows you how to deal with errors.Error-Handling and Testing

If the JSON value could not be parsed or a nesting level deeper than the given (or default) depth is found, NULL is returned from json_decode. This means that no exception is raised by json_encode/json_deocde directly.So how can we identify the cause of the error? The json_last_error function helps here. json_last_error returns an integer error code that can be one of the following constants (taken from here):JSON_ERROR_NONE: No error has occurred.

JSON_ERROR_DEPTH: The maximum stack depth has been exceeded.

JSON_ERROR_STATE_MISMATCH: Invalid or malformed JSON.

JSON_ERROR_CTRL_CHAR: Control character error, possibly incorrectly encoded.

JSON_ERROR_SYNTAX: Syntax error.

JSON_ERROR_UTF8: Malformed UTF-8 characters, possibly incorrectly encoded (since PHP 5.3.3).

With those information at hand, we can write a quick parsing helper method that raises a descriptive exception when an error is found.We can now use the exception testing function from the last post about exception handling to test if our exception works correctly.Note that since PHP 5.3.3, there is a JSON_ERROR_UTF8 error returned when an invalid UTF-8 character is found in the string. This is a strong indication that a different charset than UTF-8 is used. If the incoming string is not under your control, you can use the utf8_encode function to convert it into utf8.I’ve been using this in the past to convert data loaded from a legacy MSSQL database that didn’t use UTF-8.source

What is the PHP syntax to check「is not null」or an empty string? [duplicate]

I wrestled a bear once.

[What is the PHP syntax to check「is not null」or an empty string? [duplicate]](https://stackoverflow.com/questions/11213125/what-is-the-php-syntax-to-check-is-not-null-or-an-empty-string)

Simple PHP question:I have this stement:Somewhere above this statement I use the following line in my JavaScript to set the username as a variable both in my JavaScript and in my PHP:What I want to do is add a condition to make sure $user is not null or an empty string (it doesn't have to be any particular value, I just don't want it to be empty. What is the proper way to do this?I know this is a sill question but I have no experience with PHP. Please advise, Thank you!

2012-06-26 17:51:01Z

Simple PHP question:I have this stement:Somewhere above this statement I use the following line in my JavaScript to set the username as a variable both in my JavaScript and in my PHP:What I want to do is add a condition to make sure $user is not null or an empty string (it doesn't have to be any particular value, I just don't want it to be empty. What is the proper way to do this?I know this is a sill question but I have no experience with PHP. Please advise, Thank you!Null OR an empty string?Use empty().After realizing that $user ~= $_POST['user'] (thanks matt):Use empty(). It checks for both empty strings and null.From the manual:

What is a practical use for PHP's sleep()?

alex

[What is a practical use for PHP's sleep()?](https://stackoverflow.com/questions/3930736/what-is-a-practical-use-for-phps-sleep)

I just had a look at the docs on sleep().Where would you use this function?Is it there to give the CPU a break in an expensive function?Any common pitfalls?

2010-10-14 06:46:16Z

I just had a look at the docs on sleep().Where would you use this function?Is it there to give the CPU a break in an expensive function?Any common pitfalls?One place where it finds use is to create a delay.Lets say you've built a crawler that uses curl/file_get_contents to get remote pages. Now you don't want to bombard the remote server with too many requests in short time. So you introduce a delay between consecutive requests. sleep takes the argument in seconds, its friend usleep takes arguments in microseconds and is more suitable in some cases.Another example: You're running some sort of batch process that makes heavy use of a resource.  Maybe you're walking the database of 9,000,000 book titles and updating about 10% of them.  That process has to run in the middle of the day, but there are so many updates to be done that running your batch program drags the database server down to a crawl for other users.So you modify the batch process to submit, say, 1000 updates, then sleep for 5 seconds to give the database server a chance to finish processing any requests from other users that have backed up.Here's a snippet of how I use sleep in one of my projects:In this case sleep helps me prevent being blocked by Google maps, because I am sending too many requests to the server.Old question I know, but another reason for using u/sleep can be when you are writing security/cryptography code, such as an authentication script. A couple of examples: EDITUsing u/sleep against timing attacks is not a good solution. You can still get the important data in a timing attack, you just need more samples to filter out the noise that u/sleep adds.You can find more information about this topic in: Could a random sleep prevent timing attacks?You can use sleep to pause the script execution... for example to delay an AJAX call by server side or implement an observer. You can also use it to simulate delays.I use that also to delay sendmail() & co. .Somebody uses use sleep() to prevent DoS and login brutefoces, I do not agree 'cause in this you need to add some checks to prevent the user from running multiple times.Check also usleep.I had to use it recently when I was utilising Google's Geolocation API.  Every address in a loop needed to call Google's server so it needed a bit of time to receive a response.  I used usleep(500000) to give everything involved enough time.I wouldn't typically use it for serving web pages, but it's useful for command line scripts.Super old posts, but I thought I would comment as well.

I recently had to check for a VERY long running process that created some files. So I made a function that iterates over a cURL function. If the file I'm looking for doesn't exist, I sleep the php file, and check again in a bit:Another way to use it: if you want to execute a cronjob more often there every minute. I use the following code for this:I call this file, and cronjob.php every minute.This is a bit of an odd case...file transfer throttling.In a file transfer service we ran a long time ago, the files were served from 10Mbps uplink servers.  To prevent the network from bogging down, the download script tracked how many users were downloading at once, and then calculated how many bytes it could send per second per user.  It would send part of this amount, then sleep a moment (1/4 second, I think) then send more...etc.In this way, the servers ran continuously at about 9.5Mbps, without having uplink saturation issues...and always dynamically adjusting speeds of the downloads.I wouldn't do it this way, or in PHP, now...but it worked great at the time.One of its application is, if I am sending mails by a script to 100+ customers then this operation will take maximum 1-2 seconds thus most of the website like hotmail and yahoo consider it as spam, so to avoid this we need to use some delay in execution after every mail.Among the others: you are testing a web application that makes ayncronous requests (AJAX calls, lazy image loading,...)You are testing it locally so responses are immediate since there is only one user (you) and no network latency.Using sleep lets you see/test how the web app behaves when load and network cause delay on requests.A quick pseudo code example of where you may not want to get millions of alert emails for a single event but you want your script to keep running.  

Generic「Killed」error in PHP script

Pro777

[Generic「Killed」error in PHP script](https://stackoverflow.com/questions/952868/generic-killed-error-in-php-script)

I am working on a CRON job that invokes a PHP script which does a lot of database work with loops.It executes properly when I limit the data set, but when I run it against the full data set, the script errors out with a message:set_time_limit is (0) and memory_limit is (-1)Here is the code section where it consistently dies:The output looks like this:I've never seen this generic Killed error message and I'm wondering what is causing it to be killed?

2009-06-04 20:20:03Z

I am working on a CRON job that invokes a PHP script which does a lot of database work with loops.It executes properly when I limit the data set, but when I run it against the full data set, the script errors out with a message:set_time_limit is (0) and memory_limit is (-1)Here is the code section where it consistently dies:The output looks like this:I've never seen this generic Killed error message and I'm wondering what is causing it to be killed?You might be triggering the Linux out-of-memory (OOM) killer. Check dmesg for messages about it. It says which process was killed when this happens.Simple way to reproduce this Killed error:I was able to reproduce this error on Ubuntu 12.10 with PHP 5.3.10.Create a PHP script called m.php and save it:Run it:The program takes 100% CPU for about 15 seconds then halts with the Killed message.  Look at dmesg | grep php and there are clues:So in my case, the PHP program halted and printed "Killed" because it ran out of memory due to an infinite loop.  Solutions:In my case on CloudLinux, PHP 7.1, it occurred when 2 processes were reading and writing to the same file without locks.

Creating a REST API using PHP [duplicate]

Piya

[Creating a REST API using PHP [duplicate]](https://stackoverflow.com/questions/21959312/creating-a-rest-api-using-php)

I’m creating my first API to which if two values are passed, I should get the response in the JSON format. The number  will be passed as parameters by POST. Either using cURL or whatever POST method is available.Even though this is a very basic one, I would like to know the best practices and the API should be created by model–controller basis. Not just plain PHP.I have Googled for many REST API tutorials. They were good and I have acquired some knowledge on it.But I would like to get a sample model of the code so that I can refer to it and build my own, and that sample of course in the standard practice of making a real REST API.If you ask me what I have tried, it would be really fun, as a beginner, all I could do is this:Of course this can never be called an API, but still. If I give a POST response to this, I want the response from the REST API as JSON. I should be able to test it by REST console as well so that I get a standard response.Please do provide me with a very basic but yet a standard RESTful API.

2014-02-22 19:26:35Z

I’m creating my first API to which if two values are passed, I should get the response in the JSON format. The number  will be passed as parameters by POST. Either using cURL or whatever POST method is available.Even though this is a very basic one, I would like to know the best practices and the API should be created by model–controller basis. Not just plain PHP.I have Googled for many REST API tutorials. They were good and I have acquired some knowledge on it.But I would like to get a sample model of the code so that I can refer to it and build my own, and that sample of course in the standard practice of making a real REST API.If you ask me what I have tried, it would be really fun, as a beginner, all I could do is this:Of course this can never be called an API, but still. If I give a POST response to this, I want the response from the REST API as JSON. I should be able to test it by REST console as well so that I get a standard response.Please do provide me with a very basic but yet a standard RESTful API.In your example, it’s fine as it is: it’s simple and works. The only things I’d suggest are: Other than that, an API is something that takes an input and provides an output. It’s possible to「over-engineer」things, in that you make things more complicated that need be.If you wanted to go down the route of controllers and models, then read up on the MVC pattern and work out how your domain objects fit into it. Looking at the above example, I can see maybe a MathController with an add() action/method.There are a few starting point projects for RESTful APIs on GitHub that are worth a look.Trying to write a REST API from scratch is not a simple task. There are many issues to factor and you will need to write a lot of code to process requests and data coming from the caller, authentication, retrieval of data and sending back responses.Your best bet is to use a framework that already has this functionality ready and tested for you.Some suggestions are:Phalcon - REST API building - Easy to use all in one framework with huge performanceApigility - A one size fits all API handling framework by Zend TechnologiesLaravel API Building Tutorialand many more. Simple searches on Bitbucket/Github will give you a lot of resources to start with.

step-by-step instructions for installing IMAGEMAGICK on WAMP?

Haroldo

[step-by-step instructions for installing IMAGEMAGICK on WAMP?](https://stackoverflow.com/questions/2942523/step-by-step-instructions-for-installing-imagemagick-on-wamp)

There don't seem to be any concise tutorials/walk throughs for installing ImageMagick on WAMP for use with PHP.I've tried dozens of combinations of their binary releases with different php extension dll files. I can get imagemagick working fine from the command line, and I can get it to show as ticked in the WAMP extensions, but can't actually use it.Has anyone come across a good guide for installing this ball ache piece of software?I've followed http://www.knowledge-transfers.com/it/installing-imagemagick-on-windows-setup-imagick-on-php with no luck...Update: this is what happens when I follow the steps in PHP farmer's answer on windows7. My php.ini is setup as follows:I reboot and get these two errors in this order

and here is the dll file where it should be:

2010-05-31 09:14:39Z

There don't seem to be any concise tutorials/walk throughs for installing ImageMagick on WAMP for use with PHP.I've tried dozens of combinations of their binary releases with different php extension dll files. I can get imagemagick working fine from the command line, and I can get it to show as ticked in the WAMP extensions, but can't actually use it.Has anyone come across a good guide for installing this ball ache piece of software?I've followed http://www.knowledge-transfers.com/it/installing-imagemagick-on-windows-setup-imagick-on-php with no luck...Update: this is what happens when I follow the steps in PHP farmer's answer on windows7. My php.ini is setup as follows:I reboot and get these two errors in this order

and here is the dll file where it should be:I know this is old post but I spend my all day to make it work, so here are the steps that helped me:I have improved fsasvari answer to cater general scenarios and versions. All credits to him.Install Imagick in WAMPFor WAMPSERVER 3.1.9 64bit, PHP Version: 7.3.5I had a lot of trouble with this as well and some things I did wrong was that I doubted ImageMagick would load on my new php version. But you have to believe it will work and don't try with older php versions :)So this was my approach, remember to follow it with your own settings and versions/folders.Before you start, make sure you running the php version you want to run. If you installed Wampserver 3, you may click the wamp icon and go to php version and activate the one you want to run.1Get latest ImageMagick version for your system here: http://ftp.icm.edu.pl/packages/ImageMagick/binaries/(I got the ImageMagick-x86_64-pc-windows.exe in the bottom)2Install ImageMagick in C:/imagemagick (I put it in lower cases),

You will be asked for some stuff during install, just make sure the path thingy is ticked.You should also tick the convert thingy if it allows you.Then after install you can run CMD and type convert -version to see if imagick is installed.3Run <?php phpinfo(); ?> And find out these settings:PHP Version: 7.3.5System: WindowsCompiler:   MSVC15 (Visual C++ 2017) ([VC15])Architecture:   x64 (or maybe you have x86)Thread Safety:  enabled ([TS] else [NTS])You probably have other settings, but you need to remember yours to download the proper php_imagick.dll4Get the php_imagick.dll you want for your php version from here: http://pecl.php.net/package/imagickI got mine from here: http://pecl.php.net/package/imagick/3.4.4/windows for php 7.3Remember your info from the phpinfo(), it has to match, else it won't work.5After you unzip it, copy the php_imagick.dll and paste it in C:/wamp64/bin/php/php7.3.5/ext/Then copy all the other .dll files from that folder into C:/wamp64/bin/apache/apache2.4.39/bin/Yes it's dirty but you will get it working like this.6Add extension=php_imagick.dll in C:/wamp64/bin/php/php7.3.5/phpForApache.iniI added it after the other extensions in the file.7Restart all Wamp services.If you been messing around earlier with installs, you might have to restart the computer due to some weird cache stuff.8Check phpinfo() again if imagick shows up and try something like $im = new Imagick();9Click the Wamp icon -> php -> extensions, php_imagick should be listed.Good luck! :)PHP 5.4 php_imagick.dll is here: http://www.peewit.fr/imagick/ .

I read somewhere that 64bit php doesnt work with php_imagick. That might be the case when you get this error in apache_error.logAs mentioned above, it was also necessary to add this into httpd.conf (also, i read you cant have spaces/dashes/dots):If you dont, you might get this error:In the end, this article might partially help: http://www.elxsy.com/2009/07/installing-imagemagick-on-windows-and-using-with-php-imagick/This was a headache for me as well, but unfortunately I installed this quite awhile ago.  The instructions from that link you posted seem accurate. Have you ran phpinfo(); to see if it is installed in the Apache Environment?  It should be listed as MAGICK_HOME.Make sure "SetEnv MAGICK_HOME C:/imagemagick" is set at the end of your httpd.conf file. Assuming imagemagick is installed in that directory.Be sure that you have the extension "php_imagick.dll" in your php.ini file as well.It should work just fine if you have all those set.  On another note, here is a nice little library someone built to make imagick easier to use. https://github.com/francodacosta/phmagickI hope that helps! Good luck!I've never used WAMP but I have found that sometimes installing PHP extensions on Windows I need to ensure that any dll's that the extension relies on is in the Windows system PATH. If there is more than the one dll packaged with the imagemagick extension, try adding the directory that the dll's reside in to the Windows system PATH then REBOOT (to ensure that the web server gets a copy of the NEW environment). I know this is an old question but i guess this will help someone someday out there....If you are on WAMPP and have PHP 5.4.x installed , go here http://www.peewit.fr/imagick/and download appropriate files as instructed. It will work.Please see this answer already on StackOverflow:Installing ImageMagick extension with php/windowsI answered this question some time ago. This solves the DLL mismatch error.

Get query back from PDO prepared statement [duplicate]

ChrisR

[Get query back from PDO prepared statement [duplicate]](https://stackoverflow.com/questions/2243177/get-query-back-from-pdo-prepared-statement)

Is there a way to retrieve the query that was used to generate a PDO Prepared statement object?

2010-02-11 08:40:46Z

Is there a way to retrieve the query that was used to generate a PDO Prepared statement object?Try $statement->queryString.If you aren't opposed to extending the default \PDO and \PDOStatement object, you might consider looking at:github.com/noahheck/E_PDOStatementThis extension to PDO allows you to see a full query statement as an example of what might be executed at the database level. It uses regex to interpolate the bound parameters of your PDO statement.By extending the default \PDOStatement definition, E_PDOStatement is able to offer this enhancement to the default functionality without requiring modification to your normal work flow.Disclaimer: I created this extension.I just hope it's helpful to someone else.The simplest way to achieve what you want is:Just make sure you add it after executing the statement.This procedure works. Since debugDumpParams() doesn't return the output. Here is a little trick i designed.Hope this helps. 

PHP header() redirect with POST variables [duplicate]

Yoshiyahu

[PHP header() redirect with POST variables [duplicate]](https://stackoverflow.com/questions/4281900/php-header-redirect-with-post-variables)

I'm working with PHP, and I'm making an action page which a form posts to. The page checks for errors, then if everything is fine, it redirects them to the page where the data has been posted. If not, I need to to redirect them back to the page they were at with an error and the POST variables. Here is the gist of how it works.The HTML would look like this...action.php would look like this...In the case of an error, I need it to POST back to the first page.

I can't use GET, because the input will be too large.

I don't want to use SESSION, if possible.

Is this possible? 

2010-11-26 01:08:35Z

I'm working with PHP, and I'm making an action page which a form posts to. The page checks for errors, then if everything is fine, it redirects them to the page where the data has been posted. If not, I need to to redirect them back to the page they were at with an error and the POST variables. Here is the gist of how it works.The HTML would look like this...action.php would look like this...In the case of an error, I need it to POST back to the first page.

I can't use GET, because the input will be too large.

I don't want to use SESSION, if possible.

Is this possible? If you don't want to use sessions, the only thing you can do is POST to the same page. Which IMO is the best solution anyway.This can be made more elegant, but you get the idea...It is not possible to redirect a POST somewhere else. When you have POSTED the request, the browser will get a response from the server and then the POST is done. Everything after that is a new request. When you specify a location header in there the browser will always use the GET method to fetch the next page.You could use some Ajax to submit the form in background. That way your form values stay intact. If the server accepts, you can still redirect to some other page.  If the server does not accept, then you can display an error message, let the user correct the input and send it again.It would be beneficial to verify the form's data before sending it via POST. You should create a JavaScript function to check the form for errors and then send the form. This would prevent the data from being sent over and over again, possibly slowing the browser and using transfer volume on the server.Edit:If security is a concern, performing an AJAX request to verify the data would be the best way. The response from the AJAX request would determine whether the form should be submitted.Use a smarty template for your stuff then just set the POST array as a smarty array and open the template. In the template just echo out the array so if it passes:I have not tried this yet but I am going to try it as a solution and will let you know what I find. But of course this method assumes that you are using smarty.If not you can just recreate your form there on the error page and echo info into the form or you could send back non important data in a get from and get itex.

Justify string algorithm [closed]

Paolo Bergantino

[Justify string algorithm [closed]](https://stackoverflow.com/questions/11058483/justify-string-algorithm)

Just tanked a job interview where I was asked to implement a function with this signature:It needs to mimic what HTML's text-align: justify would do,  here's some examples (desired_length = 48)(I replaced the spaces with periods to illustrate)The length of spaces between words may never differ by more than one.I have written a PHP solution, but I am more interested in what algorithms people can come up with to solve the problem. It was my first whiteboard question at a job interview ever, and I'm afraid a combination of factors made me take way longer than I should have.

2012-06-15 21:32:26Z

Just tanked a job interview where I was asked to implement a function with this signature:It needs to mimic what HTML's text-align: justify would do,  here's some examples (desired_length = 48)(I replaced the spaces with periods to illustrate)The length of spaces between words may never differ by more than one.I have written a PHP solution, but I am more interested in what algorithms people can come up with to solve the problem. It was my first whiteboard question at a job interview ever, and I'm afraid a combination of factors made me take way longer than I should have.Here's what I came up with. I added the optional $char parameter so you can see what it's outputting - Of course you can pull it inside the function so the prototype matches the requirement.And the test cases:And the output:And a demo!Edit: Cleaned up the code, and it still works :).Made it a personal challenge to not use any loops/recursion or regex with callbacks. I used a single explode() and a single implode() to achieve this. Great success!Here's my solution with no pesky loopsComments and output...https://gist.github.com/2939068I wanted to see which algorithm was the most efficient, so I ran some benchmarks. I did 100k iterations of all 7 test cases. (Ran it in a single core Ubuntu VM)The results of @ppsreejith and @Kristian Antonsen's code are omitted, because their code crashed when I tried to run it. @PhpMyCoder's code ran as long as I didn't do the formatting to 48 length after object construction. Therefore the test result is incomplete. (Fixed)This is my solution. No pesky regular expressions :)This is powered by PHP array functions.Here is the working example.Just so no one thinks I'm trying to have them do my homework for me, this is my (working, I think) solution.I'm not sure I could have possibly been expected to write this much code on a whiteboard on demand, however, so I'm mostly curious to see how others would tackle it without looking at my code. (I made it to around the foreach in the interview before they called 'time' on me, so to speak)I miss my list comprehensions in Python ...Here's my attempt.I've tried to keep it relatively concise, which has impacted the readability. But here's how it works:For each entry, we split up the words into an array $words. Because we might want spaces before and after the word, we also add an empty string to the beginning and ending of the array.We calculate the left-over amount of spaces $leftover_space (that is, the spaces we need to insert somewhere), and divide it by number of words $word_count, so we know the average of how many spaces to put in between each word.Whenever we add a word, we also add a few spaces $extra_space, depending on how many are left. After that, we remove the amount added from the $leftover_space.I think this is fully working: (the "_" is just keeping the space visible)EDITED:Function now get rid of multiple spaces between words as well.

How it works (in short):TESTING:AND THE RESULT:THAT WAS TOUGH :)EDITED 2:Function is now about 20% faster, because that benchmark touched me :)It's taken me a while to perfect (probably much, much longer than an interviewer would have allowed for), but I've come up with an elegant, 162 line OOP solution to this problem. I included functionality to allow for the justifying of a single string, array of strings (already separated into lines) or a long string that needs to be broken up into lines of a maximum width first. Demos follow the code block.Important Note: This class will only work in PHP 5.4. I realized this when running a version on my own server PHP (5.3.6) to get profiling stats with XDebug. PHP 5.3 complains about my use of $this in the anonymous function. A quick check of the docs on anonymous functions reveals that $this could not be used in the context of an anonymous function until 5.4. If anyone can find a clean workaround to this, please drop it in the comments. Added support for PHP 5.3!You can pass in an array of many strings or just one string to Justifier. Calling Justifier::format($desired_length) will always return an array of justified lines *if an array of strings or string that required segmentation was passed to the constructor. Otherwise, a string will be returned. (Codepad Demo)You may notice I omitted one of the OP's test lines. This is because it was 54 characters and would exceed the $desired_length passed to Justifier::format(). The function will throw an IllegalArgumentException for widths that aren't positive, non-zero numbers that exceed or equal to the minimum width. The minimum width is calculated by finding the longest line (of all the lines passed to the constructor) with single spacing.If you omit the width, Justifier will use the width of the longest line (of those passed to the constructor) when single spaced. This is the same calculation as finding the minimum width in the previous demo. (Codepad Demo)I've also included a feature in the class which allows you to pass a single, non-broken string to the constructor. This string can be of any length. When you call Justifier::format($desired_length) the string is broken into lines such that each line is filled with as much text as possible and justified before starting a new line. The class will complain with an InvalidArgumentException because you must provide a width into which it can break the string. If anyone can think of a sensible default or way to programmatically determine a default for a string, I'm completely open to suggestions. (Codepad Demo)Here's my solution.  For what it's worth, it took me about 20 minutes to make both the justify function and acceptance tests for it; 5 of those minutes debugging the justify function.  Also, I used notpad++ instead of a more robust IDE to try to simulate to some extent the interview environment.I think this might be too large of a problem for a whiteboard interview question, unless the interviewer lets you write in pseudocode and is more interested in your thought process that what you are putting on the board.Here's a little bit different implementation just towards the end.I'm not sure about the regexp, I just meant $spaces and not next space.

Mock in PHPUnit - multiple configuration of the same method with different arguments

Václav Novotný

[Mock in PHPUnit - multiple configuration of the same method with different arguments](https://stackoverflow.com/questions/5484602/mock-in-phpunit-multiple-configuration-of-the-same-method-with-different-argum)

Is it possible to configure PHPUnit mock in this way?I use PHPUnit 3.5.10 and it fails when I ask for Matcher because it expects "Logger" argument.

It is like the second expectation is rewriting the first one, but when I dump the mock, everything looks ok. 

2011-03-30 09:39:33Z

Is it possible to configure PHPUnit mock in this way?I use PHPUnit 3.5.10 and it fails when I ask for Matcher because it expects "Logger" argument.

It is like the second expectation is rewriting the first one, but when I dump the mock, everything looks ok. As of PHPUnit 3.6, there is $this->returnValueMap() which may be used to return different values depending on the given parameters to the method stub.Sadly this is not possible with the default PHPUnit Mock API.I can see two options that can get you close to something like this:This will work fine but you are testing more than you should (mainly that it gets called with matcher first, and that is an implementation detail).Also this will fail if you have more than one call to each of of the functions!This is more work but works nicer since you don't depend on the order of the calls:This will output:I've used $this->exactly(2) in the matcher to show that this does also work with counting the invocations. If you don't need that swapping it out for $this->any() will, of course, work.You can achieve this with a callback:Should pass for any "Logger" or "Matcher" arguments passed to the Context Mock's offsetGet method:As you can see, PHPUnit ran two tests. One for each dataProvider value. And in each of those tests it made the assertion for with() and the one for instanceOf, hence four assertions.Following on from the answer of @edorian and the comments (@MarijnHuizendveld) regarding ensuring that the method is called with both Matcher and Logger, and not simply twice with either Matcher or Logger, here is an example.This is with PHPUnit 3.7. If the method you are testing doesn't actually return anything, and you simply need to test that it is called with the correct arguments, the same approach applies. For this scenario, I also attempted doing this using a callback function for $this->callback as the argument to the with, rather than returnCallback in the will. This fails, as internally phpunit calls the callback twice in the process of verifying the argument matcher callback. This means that the approach fails as on the second call that argument has already been removed from the expected arguments array. I don't know why phpunit calls it twice (seems an unnecessary waste), and I guess you could work around that by only removing it on the second call, but I wasn't confident enough that this is intended and consistent phpunit behaviour to rely on that occurring.My 2 cents to the topic: pay attention when using at($x): it means that expected method call will be the ($x+1)th method call on the mock object; it doesn't mean that will be the ($x+1)th call of the expected method. This made me waste some time so I hope it won't with you. Kind regards to everyone.I just stumbled on this PHP extension to mock objects: https://github.com/etsy/phpunit-extensions/wiki/Mock-ObjectHere are also some solutions with the doublit library :Solution 1 : using Stubs::returnValueMapSolution 2 : using a callback

test if array contains value using PHPUnit

Donoven Rally

[test if array contains value using PHPUnit](https://stackoverflow.com/questions/31638220/test-if-array-contains-value-using-phpunit)

I created this array of objects:and i want to check that a random ad i got from a function exists in the array. the code to get the ad looks like this:now i want to check if the array contains the random ad i received, what i was able to do like this:but my question is, is there an assert or some other way to check this thing better than the way i did it?? i tried using assertArrayHasKey but i got the following error:any idea please? thx

2015-07-26 14:37:45Z

I created this array of objects:and i want to check that a random ad i got from a function exists in the array. the code to get the ad looks like this:now i want to check if the array contains the random ad i received, what i was able to do like this:but my question is, is there an assert or some other way to check this thing better than the way i did it?? i tried using assertArrayHasKey but i got the following error:any idea please? thxTry the assertContains method:

How can I manually return or throw a validation error/exception in Laravel?

Svish

[How can I manually return or throw a validation error/exception in Laravel?](https://stackoverflow.com/questions/47219542/how-can-i-manually-return-or-throw-a-validation-error-exception-in-laravel)

Have a method that's importing CSV-data into a Database. I do some basic validation using But after that things can go wrong for more complex reasons, further down the rabbit hole, that throws exceptions of some sort. I can't write proper validation stuff to use with the validate method here, but, I really like how Laravel works when the validation fails and how easy it is to embed the error(s) into the blade view etc, so...Is there a (preferably clean) way to manually tell Laravel that "I know I didn't use your validate method right now, but I'd really like you to expose this error here as if I did"? Is there something I can return, an exception I can wrap things with, or something?

2017-11-10 09:30:13Z

Have a method that's importing CSV-data into a Database. I do some basic validation using But after that things can go wrong for more complex reasons, further down the rabbit hole, that throws exceptions of some sort. I can't write proper validation stuff to use with the validate method here, but, I really like how Laravel works when the validation fails and how easy it is to embed the error(s) into the blade view etc, so...Is there a (preferably clean) way to manually tell Laravel that "I know I didn't use your validate method right now, but I'd really like you to expose this error here as if I did"? Is there something I can return, an exception I can wrap things with, or something?As of laravel 5.5, the ValidationException class has a static method withMessages that you can use:I haven't tested this, but it should work.UpdateThe message does not have to be wrapped in an array. You can also do:Laravel <= 6.2 this solution worked for me:Simply return from controller:    you can try a custom message bagi just add /**

     * @throws \Illuminate\Validation\ValidationException

     */and fix For Laravel 5.8:.The easiest way to throw an exception is like this:

glob() - sort by date

cole

[glob() - sort by date](https://stackoverflow.com/questions/124958/glob-sort-by-date)

I'm trying to display an array of files in order of date (last modified).I have done this buy looping through the array and sorting it into another array, but is there an easier (more efficient) way to do this?

2008-09-24 01:51:54Z

I'm trying to display an array of files in order of date (last modified).I have done this buy looping through the array and sorting it into another array, but is there an easier (more efficient) way to do this?For the sake of posterity, in case the forum post linked in the accepted answer is lost or unclear to some, the relevant code needed is: Tested this on my system and verified it does sort by file mtime as desired. I used a similar approach (written in Python) for determining the last updated files on my website as well.This solution is same as accepted answer, updated with anonymous function1:1 Anonymous functions have been introduced in PHP in 2010. Original answer is dated 2008.I know this thread is old, but this can be done with a better performance. The usort() in the accepted answer will call filemtime() a lot of times. PHP uses quicksort algorithm which has an average performance of 1.39*n*lg(n). The algorithm calls filemtime() twice per comparison, so we will have about 28 calls for 10 directory entries, 556 calls for 100 entries, 8340 calls for 1000 entries etc. The following piece of code works good for me and has a great performance:Since PHP 7.4 the best solution is to use custom sort with arrow function:

Remove a child with a specific attribute, in SimpleXML for PHP

TimTowdi

[Remove a child with a specific attribute, in SimpleXML for PHP](https://stackoverflow.com/questions/262351/remove-a-child-with-a-specific-attribute-in-simplexml-for-php)

I have several identical elements with different attributes that I'm accessing with SimpleXML:I need to remove a specific seg element, with an id of "A12", how can I do this?  I've tried looping through the seg elements and unsetting the specific one, but this doesn't work, the elements remain.

2008-11-04 16:24:50Z

I have several identical elements with different attributes that I'm accessing with SimpleXML:I need to remove a specific seg element, with an id of "A12", how can I do this?  I've tried looping through the seg elements and unsetting the specific one, but this doesn't work, the elements remain.While SimpleXML provides a way to remove XML nodes, its modification capabilities are somewhat limited. One other solution is to resort to using the DOM extension. dom_import_simplexml() will help you with converting your SimpleXMLElement into a DOMElement.Just some example code (tested with PHP 5.2.5):outputsBy the way: selecting specific nodes is much more simple when you use XPath (SimpleXMLElement->xpath): Contrary to popular belief in the existing answers, each Simplexml element node can be removed from the document just by itself and unset(). The point in case is just that you need to understand how SimpleXML actually works.First locate the element you want to remove:Then remove the element represented in $element you unset its self-reference:This works because the first element of any element is the element itself in Simplexml (self-reference). This has to do with its magic nature, numeric indices are representing the elements in any list (e.g. parent->children), and even the single child is such a list.Non-numeric string indices represent attributes (in array-access) or child-element(s) (in property-access).Therefore numeric indecies in property-access like:work as well.Naturally with that xpath example, it is rather straight forward (in PHP 5.4):The full example code (Demo):Output:Just unset the node:This code was taken from How to delete / remove nodes in SimpleXML.I believe Stefan's answer is right on. If you want to remove only one node (rather than all matching nodes), here is another example:Note that sections Load XML... (first) and Format XML... (last) could be replaced with different code depending on where your XML data comes from and what you want to do with the output; it is the sections in between that find a node and remove it. In addition, the if statement is only there to ensure that the target node exists before trying to move it. You could choose different ways to handle or ignore this case.This work for me:If you extend the base SimpleXMLElement class, you can use this method:For future reference, deleting nodes with SimpleXML can be a pain sometimes, especially if you don't know the exact structure of the document. That's why I have written SimpleDOM, a class that extends SimpleXMLElement to add a few convenience methods.For instance, deleteNodes() will delete all nodes matching a XPath expression. And if you want to delete all nodes with the attribute "id" equal to "A5", all you have to do is:To remove/keep nodes with certain attribute value or falling into array of attribute values you can extend SimpleXMLElement class like this (most recent version in my GitHub Gist):Then having your $doc XML you can remove your <seg id="A12"/> node calling:or remove multiple <seg /> nodes:For keeping only <seg id="A5"/> and <seg id="A30"/> nodes and removing the rest:There is a way to remove a child element via SimpleXml. The code looks for a 

 element, and does nothing.  Otherwise it adds the element to a string.  It then writes out the string to a file.  Also note that the code saves a backup before overwriting the original file.A new idea: simple_xml works as a array.We can search for the indexes of the "array" we want to delete, and then, use the unset() function to delete this array indexes. My example:Even though SimpleXML doesn't have a detailed way to remove elements, you can remove elements from SimpleXML by using PHP's unset(). The key to doing this is managing to target the desired element. At least one way to do the targeting is using the order of the elements. First find out the order number of the element you want to remove (for example with a loop), then remove the element:You can even remove multiple elements with this, by storing the order number of target items in an array. Just remember to do the removal in a reverse order (array_reverse($targets)), because removing an item naturally reduces the order number of the items that come after it.Admittedly, it's a bit of a hackaround, but it seems to work fine.I was also strugling with this issue and the answer is way easier than those provided over here.

you can just look for it using xpath and unset it it the following method:this code will look for a node named "NODESNAME" with the id attribute "test" and remove the first occurence.remember to save the xml using $XML->saveXML(...);Since I encountered the same fatal error as Gerry and I'm not familiar with DOM, I decided to do it like this:Idea about helper functions is from one of the comments for DOM on php.net and idea about using unset is from kavoir.com. For me this solution finally worked:    using it:

$xml is SimpleXmlElementThe result is stored in $xml, so don’t worry about assigning it to any variable.With FluidXML you can use XPath to select the elements to remove.https://github.com/servo-php/fluidxmlThe XPath //*[@id="A12"] means:If you want to cut list of similar (not unique) child elements, for example items of RSS feed, you could use this code:It will cut tail of RSS to 10 elements. I tried to remove withBut it works somehow randomly and cuts only some of the elements.Your initial approach was right, but you forgot one little thing about foreach. It doesn't work on the original array/object, but creates a copy of each element as it iterates, so you did unset the copy. Use reference like this:

PHP check file extension

user547794

[PHP check file extension](https://stackoverflow.com/questions/7563658/php-check-file-extension)

I have an upload script that I need to check the file extension, then run separate functions based on that file extension.  Does anybody know what code I should use?

2011-09-27 02:46:02Z

I have an upload script that I need to check the file extension, then run separate functions based on that file extension.  Does anybody know what code I should use?pathinfo is what you're looking for PHP.netFor php 5.3+ you can use the SplFileInfo() class Also since you are checking extension for file uploads, I highly recommend using the mime type instead.. For php 5.3+ use the finfo class

How do I remove a directory that is not empty?

zeckdude

[How do I remove a directory that is not empty?](https://stackoverflow.com/questions/1653771/how-do-i-remove-a-directory-that-is-not-empty)

I am trying to remove a directory with rmdir, but I received the 'Directory not empty' message, because it still has files in it.What function can I use to remove a directory with all the files in it as well?

2009-10-31 08:22:05Z

I am trying to remove a directory with rmdir, but I received the 'Directory not empty' message, because it still has files in it.What function can I use to remove a directory with all the files in it as well?There is no built-in function to do this, but see the comments at the bottom of http://us3.php.net/rmdir. A number of commenters posted their own recursive directory deletion functions. You can take your pick from those.Here's one that looks decent:You could just invoke rm -rf if you want to keep things simple. That does make your script UNIX-only, so beware of that. If you go that route I would try something like:You could always try to use system commands.If on linux use: rm -rf /dir

