I have a function I'd like to test which calls an external API method twice, using different parameters. I'd like to mock this external API out with a Jasmine spy, and return different things based on the parameters. Is there any way to do this in Jasmine? The best I can come up with is a hack using andCallFake:

2013-04-24 17:22:35Z

I have a function I'd like to test which calls an external API method twice, using different parameters. I'd like to mock this external API out with a Jasmine spy, and return different things based on the parameters. Is there any way to do this in Jasmine? The best I can come up with is a hack using andCallFake:In Jasmine versions 3.0 and above you can use withArgsFor Jasmine versions earlier than 3.0 callFake is the right way to go, but you can simplify it using an object to hold the return values Depending on the version of Jasmine, the syntax is slightly different:Resources: You could also use $provide to create a spy. And mock using and.returnValues instead of and.returnValue to pass in parameterised data.In my case, I had a component I was testing and, in its constructor, there is a config service with a method called getAppConfigValue that is called twice, each time with different arguments:In my spec, I provided the ConfigService in the TestBed like so:So, as long as the signature for getAppConfigValue is the same as specified in the actual ConfigService, what the function does internally can be modified.

How To Save Canvas As An Image With canvas.toDataURL()?

Wardenclyffe

[How To Save Canvas As An Image With canvas.toDataURL()?](https://stackoverflow.com/questions/10673122/how-to-save-canvas-as-an-image-with-canvas-todataurl)

I'm currently building a HTML5 web app/Phonegap native app and I can't seem to figure out how to save my canvas as an image with canvas.toDataURL(). Can somebody help me out?Here's the code, what's wrong with it?//My canvas was named "canvasSignature"JavaScript:HTML5:

2012-05-20 11:46:30Z

I'm currently building a HTML5 web app/Phonegap native app and I can't seem to figure out how to save my canvas as an image with canvas.toDataURL(). Can somebody help me out?Here's the code, what's wrong with it?//My canvas was named "canvasSignature"JavaScript:HTML5:Here is some code. without any error.This solution allows you to change the name of the downloaded file:HTML:JAVASCRIPT:You can use canvas2image to prompt for download.I had the same issue, here's a simple example that both adds the image to the page and forces the browser to download it:I created a small library that does this (along with some other handy conversions). It's called reimg, and it's really simple to use.ReImg.fromCanvas(yourCanvasElement).toPng()This work for me: (Only google chrome)Similar to 1000Bugy's answer but simpler because you don't have to make an anchor on the fly and dispatch a click event manually (plus an IE fix).If you make your download button an anchor you can highjack it right before the default anchor functionality is run.

So onAnchorClick you can set the anchor href to the canvas base64 image and the anchor download attribute to whatever you want to name your image.This does not work in (the current) IE because it doesn't implement the download attribute and prevents download of data uris. But this can be fixed by using window.navigator.msSaveBlob instead.So your anchor click event handler would be as followed (where anchor, canvas and fileName are scope lookups):Here's a fiddleYou can try this; create a dummy HTML anchor, and download the image from there like...Here is the fiddleInstead of imageElement.src = myImage; you should use window.location = myImage; And even after that the browser will display the image itself. You can right click and use "Save Link" for downloading the image.Check this link for more information.@Wardenclyffe and @SColvin, you both are trying to save image using the canvas, not by using canvas's context. both you should try to ctx.toDataURL();

Try This: Also you may refer to following links:http://tutorials.jenkov.com/html5-canvas/todataurl.htmlhttp://www.w3.org/TR/2012/WD-html5-author-20120329/the-canvas-element.html#the-canvas-element

Node.js package.json main parameter

Gavin

[Node.js package.json main parameter](https://stackoverflow.com/questions/22512992/node-js-package-json-main-parameter)

I have done quite some search already. However, still having doubts about the main parameter in package.json of Node.js.I know that the second question is quite weird. It is because I have hosted a Node.js application on OpenShift but the application consists of two main components. One being a REST API and one being a notification delivering service.I afraid that the notification delivering process would block the REST API if they were implemented as a single thread. However, they have to connect to the same MongoDB cartridge. Moreover, I would like to save one gear if both the components could be serving in the same gear if possible.Any suggestions are welcome.

2014-03-19 16:59:26Z

I have done quite some search already. However, still having doubts about the main parameter in package.json of Node.js.I know that the second question is quite weird. It is because I have hosted a Node.js application on OpenShift but the application consists of two main components. One being a REST API and one being a notification delivering service.I afraid that the notification delivering process would block the REST API if they were implemented as a single thread. However, they have to connect to the same MongoDB cartridge. Moreover, I would like to save one gear if both the components could be serving in the same gear if possible.Any suggestions are welcome.From the npm documentation:To put it short:To answer your first question, the way you load a module is depending on the module entry point and the main parameter of the package.json.Let's say you have the following file structure:Without main parameter in the package.json, you have to load the module by giving the module entry point: require('my-npm-module/lib/module.js').If you set the package.json main parameter as follows "main": "lib/module.js", you will be able to load the module this way: require('my-npm-module').If you have for instance in your package.json file:lib/entry.js will be the main entry point to your package. 

When callingrequire( 'zig-zag' ); in node, lib/entry.js will be the actual file that is required.One important function of the main key is that it provides the path for your entry point.  This is very helpful when working with nodemon.  If you work with nodemon and you define the main key in your package.json as let say "main": "./src/server/app.js", then you can simply crank up the server with typing nodemon in the CLI with root as pwd instead of nodemon ./src/server/app.js.As far as I know, it's the main entry point to your node package (library) for npm. It's only needed if your npm project becomes a node package (library) which can be installed via npm by others.Let's say you have a library with a build/, dist/, or lib/ folder. In this folder, you got the following compiled file for your library:Then in your package.json, you tell npm how to access the library (node package):After installing the node package with npm to your JS project, you can import functionalities from your bundled bundle.js file:This holds also true when using Code Splitting (e.g. Webpack) for your library. For instance, this webpack.config.js makes use of code splitting the project into multiple bundles instead of one.Still, you would define one main entry point to your library in your package.json:Then when using the library, you can import your files from your main entry point:However, you can also bypass the main entry point from the package.json and import the code splitted bundles:After all, the main property in your package.json only points to your main entry point file of your library.For OpenShift, you only get one PORT and IP pair to bind to (per application).  It sounds like you should be able to serve both services from a single nodejs instance by adding internal routes for each service endpoint.I have some info on how OpenShift uses your project's package.json to start your application here: https://www.openshift.com/blogs/run-your-nodejs-projects-on-openshift-in-two-simple-steps#package_jsonJust think of it as the "starting point". In a sense of object-oriented programming, say C#, it's the init() or constructor of the object class, that's what "entry point" meant.For example

Returning JSON from PHP to JavaScript?

AquinasTub

[Returning JSON from PHP to JavaScript?](https://stackoverflow.com/questions/682260/returning-json-from-php-to-javascript)

I have a PHP script that's being called through jQuery AJAX. I want the PHP script to return the data in JSON format to the javascript. Here's the pseudo code in the PHP script:Basically, I need the results of the two for loops to be inserted in $json.

2009-03-25 16:00:47Z

I have a PHP script that's being called through jQuery AJAX. I want the PHP script to return the data in JSON format to the javascript. Here's the pseudo code in the PHP script:Basically, I need the results of the two for loops to be inserted in $json.Php has an inbuilt JSON Serialising function.json_encodePlease use that if you can and don't suffer Not Invented Here syndrome.Here are a couple of things missing in the previous answers:There's a JSON section in the PHP's documentation. You'll need PHP 5.2.0 though.If you don't, here's the PECL library you can install.Usually you would be interested in also having some structure to your data in the receiving end:This will preserve the array keys as well.Do remember that json_encode only works on utf8 -encoded data.You can use Simple JSON for PHP. It sends the headers help you to forge the JSON.It looks like : $msg="You Enter Wrong Username OR Password";

        $responso=json_encode($msg); 

JQuery .on() method with multiple event handlers to one selector

butangphp

[JQuery .on() method with multiple event handlers to one selector](https://stackoverflow.com/questions/8608145/jquery-on-method-with-multiple-event-handlers-to-one-selector)

Trying to figure out how to use the Jquery .on() method with a specific selector that has multiple events associated with it.  I was previously using the .live() method, but not quite sure how to accomplish the same feat with .on().  Please see my code below:I know I can assign the multiple events by calling:But I believe the proper use of .on() would be like so:Is there a way to accomplish this?  Or what is the best practice here?   I tried the code below, but no dice.  Thanks in advance!

2011-12-22 18:14:54Z

Trying to figure out how to use the Jquery .on() method with a specific selector that has multiple events associated with it.  I was previously using the .live() method, but not quite sure how to accomplish the same feat with .on().  Please see my code below:I know I can assign the multiple events by calling:But I believe the proper use of .on() would be like so:Is there a way to accomplish this?  Or what is the best practice here?   I tried the code below, but no dice.  Thanks in advance!That's the other way around. You should write:Also, if you had multiple event handlers attached to the same selector executing the same function, you could use If you want to use the same function on different events the following code block can be usedI learned something really useful and fundamental from here.chaining functions is very usefull in this case which works on most jQuery Functions including on function output too.It works because output of most jQuery functions are the input objects sets so you can use them right away and make it shorter and smarterAnd you can combine same events/functions in this way:Try with the following code:

How do I scroll to an element using JavaScript?

C..

[How do I scroll to an element using JavaScript?](https://stackoverflow.com/questions/5007530/how-do-i-scroll-to-an-element-using-javascript)

I am trying to move the page to a <div> element.I have tried the next code to no avail:

2011-02-15 18:02:07Z

I am trying to move the page to a <div> element.I have tried the next code to no avail:You can use an anchor to "focus" the div. I.e:and then use the following javascript:scrollIntoView works well:full reference in the MDN docs:

https://developer.mozilla.org/en-US/docs/Web/API/Element.scrollIntoViewyour question and the answers looks different. I don't know if I am mistaken, but for those who googles and reach here my answer would be the following:My Answer explained:here is a simple javascript for thatcall this when you need to scroll the screen to an element which has id="yourSpecificElementId"ie. for the above question, if the intention is to scroll the screen to the div with id 'divFirst' the code would be: window.scroll(0,findPos(document.getElementById("divFirst")));and you need this function for the working:the screen will be scrolled to your specific element.I've been looking a bit into this and I figured this one out which somehow feels like the most natural way to do it. Of course, this is my personal favorite scroll now. :)Note that window.scroll({ ...options }) is not supported on IE, Edge and Safari. In that case it's most likely best to use

element.scrollIntoView(). (Supported on IE 6). You can most likely (read: untested) pass in options without any side effects.These can of course be wrapped in a function that behaves according to which browser is being used.Try this:e.g @: To scroll to a given element, just made this javascript only solution below.Simple usage:Engine object (you can fiddle with filter, fps values):Here's a function that can include an optional offset for those fixed headers. No external libraries needed. You can grab the height of an element using JQuery and scroll to it. Update March 2018Scroll to this answer without using JQueryThe best, shortest answer that what works even with animation effects:If you have a fixed nav bar, just subtract its height from top value, so if your fixed bar height is 70px, line 2 will look like:Explanation: 

Line 1 gets the element position

Line 2 scroll to element position; behavior property adds a smooth animated effectYou can set focus to element. It works better than scrollIntoViewnode.setAttribute('tabindex', '-1')node.focus()node.removeAttribute('tabindex')Focus can be set on interactive elements only... Div only represent a logical section of the page.Perhaps you can set the borders around div or change it's color to simulate a focus. And yes Visiblity is not focus.I think that if you add a tabindex to your div, it will be able to get focus:I don't think it's valid though, tabindex can be applied only to a, area, button, input, object, select, and textarea. But give it a try.Similar to @caveman's solutionYou can't focus on a div. You can only focus on an input element in that div. Also, you need to use element.focus() instead of display()After looking around a lot, this is what finally worked for me:2000 is the no of pixels I wanted to scroll towards the right.

Use scrollTop instead of scrollLeft if you want to scroll your div down.Note : I tried using scrollIntoView but it didn't work properly because my webpage had multiple divs. It will work if you have only one main window where focus lies.

This is the best solution I have come across if you don't want to use jQuery which I didn't want to.A method i often use to scroll a container to its contents.if your whish to override globally, you could also do :Due to behavior "smooth" doesn't work in Safari, Safari ios, Explorer. I usually write a simple function utilizing requestAnimationFrameIn case you want to use html, you could just use this:and make it an html link to the specific element id. Its basically getElementById html version.try this function Pass the div id as parameter it will work I am using it already

How to call function on child component on parent events

jbodily

[How to call function on child component on parent events](https://stackoverflow.com/questions/42632711/how-to-call-function-on-child-component-on-parent-events)

In Vue 2.0 the documentation and others clearly indicate that communication from parent to child happens via props.How does a parent tell its child an event has happened via props?Should I just watch a prop called event? That doesn't feel right, nor do alternatives ($emit/$on is for child to parent, and a hub model is for distant elements).I have a parent container and it needs to tell its child container that it's okay to engage certain actions on an API. I need to be able to trigger functions. 

2017-03-06 18:14:29Z

In Vue 2.0 the documentation and others clearly indicate that communication from parent to child happens via props.How does a parent tell its child an event has happened via props?Should I just watch a prop called event? That doesn't feel right, nor do alternatives ($emit/$on is for child to parent, and a hub model is for distant elements).I have a parent container and it needs to tell its child container that it's okay to engage certain actions on an API. I need to be able to trigger functions. Give the child component a ref and use $refs to call a method on the child component directly.html:javascript:For more info, see Vue documentation on refs.What you are describing is a change of state in the parent. You pass that to the child via a prop. As you suggested, you would watch that prop. When the child takes action, it notifies the parent via an emit, and the parent might then change the state again.If you truly want to pass events to a child, you can do that by creating a bus (which is just a Vue instance) and passing it to the child as a prop.You can use $emit and $on. Using @RoyJ code:html:javascript:Running example: https://jsfiddle.net/rjurado/m2spy60r/1/If you have time, use Vuex store for watching variables (aka state) or trigger (aka dispatch) an action directly.Did not like the event-bus approach using $on bindings in the child during create.  Why?  Subsequent create calls (I'm using vue-router) bind the message handler more than once--leading to multiple responses per message.The orthodox solution of passing props down from parent to child and putting a property watcher in the child worked a little better.  Only problem being that the child can only act on a value transition.  Passing the same message multiple times needs some kind of bookkeeping to force a transition so the child can pick up the change.I've found that if I wrap the message in an array, it will always trigger the child watcher--even if the value remains the same.Parent:Child:HTML:A simple decoupled way to call methods on child components is by emitting a handler from the child and then invoking it from parent.The parent keeps track of the child handler functions and calls whenever necessary.The below example is self explainatory. where refs and events can be used to call function from and to parent and child.I think we should to have a consideration about the necessity of parent to use the child’s methods.In fact,parents needn’t to concern the method of child,but can treat the child component as a FSA(finite state machine).Parents component to control the state of child component.So the solution to watch the status change or just use the compute function is enoughYou could use a mixin to set a shared data attribute. Change it in the parent, watch it in the child:you can use key to reload child component using keyIf you want to reload component with new filter, if button click filter the child componentand use the filter to trigger the function

How do I hide the VueJS syntax while the page is loading?

antoniputra

[How do I hide the VueJS syntax while the page is loading?](https://stackoverflow.com/questions/36186831/how-do-i-hide-the-vuejs-syntax-while-the-page-is-loading)

maybe this is a trivial question.so, when I run my vuejs application on browser with enables throttling download speed (sets to low connection). I got unfinished vue syntax output in browser.I know we can trick this out with showing loading image before entire page has loaded, but it's there any best solution to fix this?

2016-03-23 19:15:02Z

maybe this is a trivial question.so, when I run my vuejs application on browser with enables throttling download speed (sets to low connection). I got unfinished vue syntax output in browser.I know we can trick this out with showing loading image before entire page has loaded, but it's there any best solution to fix this?You can use the v-cloak directive, which will hide the Vue instance until the compilation finishes.HTML:CSS:I attached the following codepen. You can see the difference with and without v-cloak.http://codepen.io/gurghet/pen/PNLQwyAs suggested by others using v-cloak is proper solution. However as @ DelightedD0D mentioned it IS clunky. Simple solution is to add some CSS in the pseudo selector ::before of v-cloak directive.In your sass/less file something along the lines of Of course you'd need to provide a valid and accessible path to loader image. It will render something like.Hope it helps.Using v-cloak directive you can hide un-compiled mustache bindings until vue instance is done compiling. You must use the CSS block to hide it until compiled.HTML:  CSS:This <div> will not be visible until the compilation is completed.You can see this link Hide elements during loading using v-cloak for better understating.Don't include any vuejs syntax in the HTML file:In your main JavaScript, you can:See the vuetify webpack template for reference.Another solution is to use:With:You could move any rendering to a simple wrapper component. The VueJS initialisation e.g. new Vue(....) shouldn’t contain any HTML apart from that single wrapper component.Depending on setup you could even have <app>Loading...</app> where app is the wrapper component with any loading HTML or text in between which is then replaced on load.Use <v-cloak> to hide your Vue code before binding data to relevant places. It's actually located in a place on Vue documentation that anyone might miss it unless you search for it or read thoroughly. Yep, you can use v-cloak, I like use spinkit, is a great library with only CSS, check a simple example:Link:

 - http://tobiasahlin.com/spinkit/I prefer using v-if with a computed property that checks if my data is ready, like this: In this way it's easier to show a loader only if the data is not ready (using v-else).In this particular case v-if="variableName" would work as well, but there can be more complicated scenarios. For those who use v-cloak in a view with multiple  Laravel Blade files and it's not working, try to use the v-cloak on the parent blade file rather than in any child blade file.

React:「this」is undefined inside a component function

Maximus S

[React:「this」is undefined inside a component function](https://stackoverflow.com/questions/33973648/react-this-is-undefined-inside-a-component-function)

I want to update loopActive state on toggle, but this object is undefined in the handler. According to the tutorial doc, I this should refer to the component. Am I missing something?

2015-11-28 16:30:26Z

I want to update loopActive state on toggle, but this object is undefined in the handler. According to the tutorial doc, I this should refer to the component. Am I missing something?ES6 React.Component doesn't auto bind methods to itself. You need to bind them yourself in constructor. Like this:There are a couple of ways. One is to add 

this.onToggleLoop = this.onToggleLoop.bind(this); in the constructor. Another is arrow functions 

onToggleLoop = (event) => {...}. And then there is onClick={this.onToggleLoop.bind(this)}. Write your function this way:Fat Arrow FunctionsI ran into a similar bind in a render function and ended up passing the context of this in the following way:I've also used:You should notice that this depends on how function is invoked

ie: when a function is called as a method of an object, its this is set to the object the method is called on.this is accessible in JSX context as your component object, so you can call your desired method inline as this method.If you just pass reference to function/method, it seems that react will invoke it as independent function. If you are using babel, you bind 'this' using ES7 bind operator

https://babeljs.io/docs/en/babel-plugin-transform-function-bind#auto-self-bindingIf you call your created method in the lifecycle methods like componentDidMount... then you can only use the this.onToggleLoop = this.onToogleLoop.bind(this) and the fat arrow function onToggleLoop = (event) => {...}.The normal approach of the declaration of a function in the constructor wont work because the lifecycle methods are called earlier.in my case this was the solution = () => {}In my case, for a stateless component that received the ref with forwardRef, I had to do what it is said here https://itnext.io/reusing-the-ref-from-forwardref-with-react-hooks-4ce9df693ddFrom this (onClick doesn't have access to the equivalent of 'this')To this (it works)

Adding additional data to select options using jQuery

jim smith

[Adding additional data to select options using jQuery](https://stackoverflow.com/questions/4564659/adding-additional-data-to-select-options-using-jquery)

Very simple question I hope.I have the usual <select> box like thisI can get the selected value (by using $("#select").val()) and the selected item's display value (by using $("#select :selected").text().But how can I store like an additional value in the <option> tag? I would like to be able to do something like <option value="3.1" value2="3.2">other</option> and get the value of the value2 attribute (which would be 3.2 in the example).

2010-12-30 17:12:34Z

Very simple question I hope.I have the usual <select> box like thisI can get the selected value (by using $("#select").val()) and the selected item's display value (by using $("#select :selected").text().But how can I store like an additional value in the <option> tag? I would like to be able to do something like <option value="3.1" value2="3.2">other</option> and get the value of the value2 attribute (which would be 3.2 in the example).HTML MarkupCodeSee this as a working sample using jQuery here: http://jsfiddle.net/GsdCj/1/

See this as a working sample using plain JavaScript here: http://jsfiddle.net/GsdCj/2/By using data attributes from HTML5 you can add extra data to elements in a syntactically-valid manner that is also easily accessible from jQuery.To me, it sounds like you want to create a new attribute?  Do you want To do this, you can doAnd then to retrieve it, you can useIt's not going to be valid code, but I guess it does the job.I made two examples from what I think your question might be:http://jsfiddle.net/grdn4/Check this out for storing additional values.  It uses data attributes to store the other value:http://jsfiddle.net/27qJP/1/HTML/JSP Markup:JQUERY CODE:

Event: changeTo have  a element libelle.val() or libelle.text() To store another value in select options:

Stop Chrome Caching My JS Files

Howdy_McGee

[Stop Chrome Caching My JS Files](https://stackoverflow.com/questions/8392441/stop-chrome-caching-my-js-files)

I will make a change to my JS files but it won't really change in the browser, I have to rename the files every time so that it reloads it. Is there some sort of .htaccess command I can add or something to make it stop caching? It is even caching my html pages hard core. I need to reopen my entire browser just to see changes. Could it possibly be a server problem?

2011-12-05 21:56:29Z

I will make a change to my JS files but it won't really change in the browser, I have to rename the files every time so that it reloads it. Is there some sort of .htaccess command I can add or something to make it stop caching? It is even caching my html pages hard core. I need to reopen my entire browser just to see changes. Could it possibly be a server problem?You can click the settings icon on top right corner ... | More Tools | Developer Tools | Network | Disable cache (while DevTools is open)For windows, this is F12 or CTRL + SHIFT + I while on mac CMD + SHIFT + I opens up DevTools.New path for Chrome Update Sept  2018:Click settings icon on the top right corner ... | Settings | Preferences | Developer Tools | Network | Disable cache (while DevTools is open)A faster way to do this is by right clicking the refresh icon beside the address bar and choosing Empty Cache and Hard reloadJust make sure Chrome's dev tools is open. (Press F12)

By the way... This trick only works on Chrome for Windows, Ubuntu, and Mac OSHold shift while clicking the reload button.add Something like script.js?a=[random Number] with the Random number generated by PHP.Have you tried expire=0, the pragma "no-cache" and "cache-control=NO-CACHE"? (I dunno what they say about Scripts). A few ideas:If you want to disable caching on your server, you can do something like:In .htaccessQuick steps:1) Open up the Developer Tools dashboard by going to the Chrome Menu -> Tools -> Developer Tools2) Click on the settings icon on the right hand side (it's a cog!)3) Check the box "Disable cache (when DevTools is open)"4) Now, while the dashboard is up, just hit refresh and JS won't be cached!When doing updates to my web applications I will either use a handler to return a single JS file to avoid the massive hits on my server, or add a small query string to them:The problem is that Chrome needs to have must-revalidate in the Cache-Control` header in order to re-check files to see if they need to be re-fetched.You can always SHIFT-F5 and force Chrome to refresh, but if you want to fix this problem on the server, include this response header:This tells Chrome to check with the server, and see if there is a newer file.  IF there is a newer file, it will receive it in the response.  If not, it will receive a 304 response, and the assurance that the one in the cache is up to date.If you do NOT set this header, then in the absence of any other setting that invalidates the file, Chrome will never check with the server to see if there is a newer version.Here is a blog post that discusses the issue further.I know this is an "old" question. But the headaches with caching never are. After heaps of trial and errors, I found that one of our web hosting providers had through CPanel this app called Cachewall. I just clicked on Enable Development mode and... voilà!!! It stopped the long suffered pain straight away :)

Hope this helps somebody else...

RI was getting the same css file when I browse website(on hosting company server with real domain) and I was unable to get the updated version on chrome. I was able to get the updated version of the file when I browse it on Firefox.  None of these answers worked for me. I also have the website files on my machine and browse the site with localhost using my local apache server. I shut down my apache server and I was able to get the updated file. Somehow my local apache server was messing with the chrome cache. Hope this helps someone as it was very hard for me to fix this. You can open an incognito window instead.  Switching to an incognito window worked for me when disabling the cache in a normal chrome window still didn't reload a JavaScript file I had changed since the last cache.https://www.quora.com/Does-incognito-mode-on-Chrome-use-the-cache-that-was-previously-stored  

How to render and append sub-views in Backbone.js

Ian Storm Taylor

[How to render and append sub-views in Backbone.js](https://stackoverflow.com/questions/9271507/how-to-render-and-append-sub-views-in-backbone-js)

I have a nested-View setup which can get somewhat deep in my application. There are a bunch of ways I could think of initializing, rendering and appending the sub-views, but I'm wondering what common practice is.Here are a couple I've thought of:Pros: You don't have to worry about maintaining the right DOM order with appending. The views are initialized early on, so there isn't as much to do all at once in the render function.Cons: You are forced to re-delegateEvents(), which might be costly? The parent view's render function is cluttered with all of the subview rendering that needs to happen? You don't have the ability to set the tagName of the elements, so the template needs to maintain the correct tagNames.Another way:Pros: You don't have to re-delegate events. You don't need a template that just contains empty placeholders and your tagName's are back to being defined by the view.Cons: You now have to make sure to append things in the right order. The parent view's render is still cluttered by the subview rendering.With an onRender event:Pros: The subview logic is now separated from the view's render() method.With an onRender event:I've kind of mix and matched a bunch of different practices across all of these examples (so sorry about that) but what are the ones that you would keep or add? and what would you not do?Summary of practices:

2012-02-14 04:00:32Z

I have a nested-View setup which can get somewhat deep in my application. There are a bunch of ways I could think of initializing, rendering and appending the sub-views, but I'm wondering what common practice is.Here are a couple I've thought of:Pros: You don't have to worry about maintaining the right DOM order with appending. The views are initialized early on, so there isn't as much to do all at once in the render function.Cons: You are forced to re-delegateEvents(), which might be costly? The parent view's render function is cluttered with all of the subview rendering that needs to happen? You don't have the ability to set the tagName of the elements, so the template needs to maintain the correct tagNames.Another way:Pros: You don't have to re-delegate events. You don't need a template that just contains empty placeholders and your tagName's are back to being defined by the view.Cons: You now have to make sure to append things in the right order. The parent view's render is still cluttered by the subview rendering.With an onRender event:Pros: The subview logic is now separated from the view's render() method.With an onRender event:I've kind of mix and matched a bunch of different practices across all of these examples (so sorry about that) but what are the ones that you would keep or add? and what would you not do?Summary of practices:I have generally seen/used a couple of different solutions:Solution 1This is similar to your first example, with a few changes:Solution 2Solution 2 may look cleaner, but it has caused some strange things in my experience and has affected performance negatively.I generally use Solution 1, for a couple of reasons:Keep in mind that if you are initializing a new View() every time render() is called, that initialization is going to call delegateEvents() anyway. So that shouldn't necessarily be a "con", as you've expressed.This is a perennial problem with Backbone and, in my experience, there's not really a satisfying answer to this question. I share your frustration, especially since there is so little guidance despite how common this use case is. That said, I usually go with something akin to your second example.First of all, I would dismiss out of hand anything that requires you to re-delegate events. Backbone's event-driven view model is one of its most crucial components, and to lose that functionality simply because your application is non-trivial would leave a bad taste in any programmer's mouth. So scratch number one.Regarding your third example, I think it's just an end-run around the conventional rendering practice and doesn't add much meaning. Perhaps if you're doing actual event triggering (i.e., not a contrived "onRender" event), it would be worth just binding those events to render itself. If you find render becoming unwieldy and complex, you have too few subviews.Back to your second example, which is probably the lesser of the three evils. Here is example code lifted from Recipes With Backbone, found on page 42 of my PDF edition:This is only a slightly more sophisticated setup than your second example: they specifiy a set of functions, addAll and addOne, that do the dirty work. I think this approach is workable (and I certainly use it); but it still leaves a bizarre aftertaste. (Pardon all these tongue metaphors.)To your point on appending in the right order: if you're strictly appending, sure, that's a limitation. But make sure you consider all possible templating schemes. Perhaps you'd actually like a placeholder element (e.g., an empty div or ul) that you can then replaceWith a new (DOM) element that holds the appropriate subviews. Appending isn't the only solution, and you can certainly get around the ordering problem if you care about it that much, but I would imagine you have a design issue if it is tripping you up. Remember, subviews can have subviews, and they should if it's appropriate. That way, you have a rather tree-like structure, which is quite nice: each subview adds all its subviews, in order, before the parent view adds another, and so on.Unfortunately, solution #2 is probably the best you can hope for using out-of-the-box Backbone. If you're interested in checking out third-party libraries, one that I have looked into (but haven't actually had any time to play with yet) is Backbone.LayoutManager, which seems to have a healthier method of adding subviews. However, even they have had recent debates on similar issues to these.Surprised this hasn't been mentioned yet, but I'd seriously consider using Marionette. It enforces a bit more structure to Backbone apps, including specific view types (ListView, ItemView, Region and Layout), adding proper Controllers and a lot more. Here is the project on Github and a great guide by Addy Osmani in the book Backbone Fundamentals to get you started.I have, what I believe to be, a quite comprehensive solution to this problem. It allows a model within a collection to change, and have only its view re-rendered (rather than the entire collection). It also handles removal of zombie views through the close() methods.Usage:Check out this mixin for creating and rendering subviews:https://github.com/rotundasoftware/backbone.subviewsIt is a minimalist solution that addresses a lot of the issues discussed in this thread, including rendering order, not having to re-delegate events, etc. Note that the case of a collection view (where each model in the collection is represented with one subview) is a different topic. Best general solution I am aware of to that case is the CollectionView in Marionette.I don't really like any of the above solutions. I prefer for this configuration over each view having to manually do work in the render method.Here's an example:Backbone was intentionally built so that there was no "common" practice in regards to this and many other issues. It is meant to be as unopinionated as possible. Theoretically, you don't even have to use templates with Backbone. You could use javascript/jquery in the render function of a view to manually change all of the data in the view. To make it more extreme, you don't even need one specific render function. You could have a function called renderFirstName which updates the first name in the dom and renderLastName which updates the last name in the dom. If you took this approach, it would be way better in terms of performance and you'd never have to manually delegate events again. The code would also make total sense to someone reading it (although it would be longer/messier code).However, usually there is no downside to using templates and simply destroying and rebuilding the entire view and it's subviews on each and every render call, as it didn't even occur to the questioner to do anything otherwise. So that's what most people do for pretty much every situation they come across. And that's why opinionated frameworks just make this the default behavior.You could also inject the rendered subviews as variables into the main template as variables.first render the subviews and convert them to html like this:

var subview1 = $(subview1.render.el).html();

var subview2 = $(subview2.render.el).html();(that way you could also dynamically string concatenate the views like subview1 + subview2 when used in loops) and then pass it to the master template which looks like this:

... some header stuff ...

<%= sub1 %>

<%= sub2 %>

... some footer stuff ...

and inject it finally like this:this.$el.html(_.template(MasterTemplate, { sub1: subview1, sub2: subview2 } ));Regarding the Events within the subviews: They will be most likely have to be connected in the parent (masterView) with this approach not within the subviews.I like to use the following approach which also make sure to remove the child views properly. Here is an example from the book by Addy Osmani.There is no need to re-delegate events as it is costly.  See below:

What do querySelectorAll and getElementsBy* methods return?

dmo

[What do querySelectorAll and getElementsBy* methods return?](https://stackoverflow.com/questions/10693845/what-do-queryselectorall-and-getelementsby-methods-return)

Do getElementsByClassName (and similar functions like getElementsByTagName and querySelectorAll) work the same as getElementById or do they return an array of elements?The reason I ask is because I am trying to change the style of all elements using getElementsByClassName. See below.

2012-05-21 23:17:15Z

Do getElementsByClassName (and similar functions like getElementsByTagName and querySelectorAll) work the same as getElementById or do they return an array of elements?The reason I ask is because I am trying to change the style of all elements using getElementsByClassName. See below.Your getElementById() code works since IDs have to be unique and thus the function always returns exactly one element (or null if none was found).However, getElementsByClassName(), querySelectorAll(), and other getElementsBy* methods return an array-like collection of elements. Iterate over it like you would with a real array:If you prefer something shorter, consider using jQuery:You are using a array as an object, the difference between getElementbyId and 

getElementsByClassName is that: https://www.w3.org/TR/2008/WD-html5-20080610/dom.html#getelementsbyclassnamehttps://developer.mozilla.org/en-US/docs/Web/API/Document/getElementByIdin your code the lines:will NOT work as expected, because the getElementByClassName will return an array, and the array will NOT have the style property, you can access each element by iterating through them.That's why the function getElementById worked for you, this function will return the direct object. Therefore you will be able to access the style property.The following description is taken from this page:So, as a parameter getElementsByClassName would accept a class name.If this is your HTML body:then var menuItems = document.getElementsByClassName('menuItem') would return a collection (not an array) of the 3 upper <div>s, as they match the given class name.You can then iterate over this nodes (<div>s in this case) collection with:Please refer to this post for more on differences between elements and nodes.ES6 provides Array.from() method, which creates a new Array instance from an array-like or iterable object.As you can see inside the code snippet, after using Array.from() function you are then able to manipulate over each element.

The same solution using jQuery.In Other WordsWhy use querySelector?It's used merely for the sole purpose of ease and brevity.Why use getElement/sBy?*Faster performance.Why this performance difference?Both ways of selection has the purpose of creating a NodeList for further use. 

querySelectors generates a static NodeList with the selectors thus it must be first created from scratch.

getElement/sBy* immediately adapts the existing live NodeList of the current DOM.So, when to use which method it's up to you/your project/your device.InfosDemo of all methods

NodeList Documentation

Performance TestIt returns Array-like list.You make that an Array as exampleYou could get a single element by running but it's going to work for the first element with class .myElement.If you would like apply this for all elements with the class I suggest you to use With ES5+ (any browsed nowadays - 2017) you should be able to do 

Change URL and redirect using jQuery

gacon

[Change URL and redirect using jQuery](https://stackoverflow.com/questions/846954/change-url-and-redirect-using-jquery)

I have some code like this,and now I want to redirect like this,Is there anyway in jQuery to solve this? It still lets me have url = http://example.com.

2009-05-11 06:31:36Z

I have some code like this,and now I want to redirect like this,Is there anyway in jQuery to solve this? It still lets me have url = http://example.com.As mentioned in the other answers, you don't need jQuery to do this; you can just use the standard properties.However, it seems you don't seem to know the difference between window.location.replace(url) and window.location = url.Of course, both have their use cases, but it seems to me like in this case you should stick with the latter.P.S.: You probably forgot two slashes after http: on line 2 of your JavaScript:tell you the true, I still don't get what you need, butshould bea search on window.location reference will tell you that.jQuery does not have an option for this, nor should it have one. This is perfectly valid javascript and there is no reason for jQuery to provide wrapper functions for this.jQuery is just a library on top of javascript, even if you use jQuery you can still use normal javascript.Btw window.location is not a function but a property which you should set like this:Try this...

      used as an alternativeTry this...What it means:Find a form with id "abc", change it's attribute named "action" and then submit it... This works for me... !!!you can do it simpler without jquery

Format date to MM/dd/yyyy in JavaScript [duplicate]

Pradeep

[Format date to MM/dd/yyyy in JavaScript [duplicate]](https://stackoverflow.com/questions/11591854/format-date-to-mm-dd-yyyy-in-javascript)

I have a dateformat like this '2010-10-11T00:00:00+05:30'. I have to format in to MM/dd/yyyy using JavaScript or jQuery . Anyone help me to do the same.

2012-07-21 11:41:07Z

I have a dateformat like this '2010-10-11T00:00:00+05:30'. I have to format in to MM/dd/yyyy using JavaScript or jQuery . Anyone help me to do the same.Try this; bear in mind that JavaScript months are 0-indexed, whilst days are 1-indexed.All other answers don't quite solve the issue. They print the date formatted as mm/dd/yyyy but the question was regarding MM/dd/yyyy. Notice the subtle difference? MM indicates that a leading zero must pad the month if the month is a single digit, thus having it always be a double digit number.i.e. whereas mm/dd would be 3/31, MM/dd would be 03/31.I've created a simple function to achieve this. Notice that the same padding is applied not only to the month but also to the day of the month, which in fact makes this MM/DD/yyyy:Update for ES2017 using String.padStart(), supported by all major browsers except IE.Pass your string into the Date Object:from here you can extract the desired using the following methods:Note that getMonth() returns the month number zero based (0-11) therefore a +1 is needed.Here you can find a list of other getters: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateAnother way, using .slice() and .split()

Validate phone number with JavaScript

Castro Roy

[Validate phone number with JavaScript](https://stackoverflow.com/questions/4338267/validate-phone-number-with-javascript)

I found this code in some website, and it works perfectly. It validates that the phone number is in one of these formats:

(123) 456-7890 or 123-456-7890  The problem is that my client (I don't know why, maybe client stuffs) wants to add another format, the ten numbers consecutively, something like this: 1234567890.I'm using this regular expression,How can I add that it also validates the another format? I'm not good with regular expressions.  

2010-12-02 18:07:16Z

I found this code in some website, and it works perfectly. It validates that the phone number is in one of these formats:

(123) 456-7890 or 123-456-7890  The problem is that my client (I don't know why, maybe client stuffs) wants to add another format, the ten numbers consecutively, something like this: 1234567890.I'm using this regular expression,How can I add that it also validates the another format? I'm not good with regular expressions.  First off, your format validator is obviously only appropriate for NANP (country code +1) numbers.  Will your application be used by someone with a phone number from outside North America?  If so, you don't want to prevent those people from entering a perfectly valid [international] number.Secondly, your validation is incorrect.  NANP numbers take the form NXX NXX XXXX where N is a digit 2-9 and X is a digit 0-9.  Additionally, area codes and exchanges may not take the form N11 (end with two ones) to avoid confusion with special services except numbers in a non-geographic area code (800, 888, 877, 866, 855, 900) may have a N11 exchange.So, your regex will pass the number (123) 123 4566 even though that is not a valid phone number.  You can fix that by replacing \d{3} with [2-9]{1}\d{2}.Finally, I get the feeling you're validating user input in a web browser.  Remember that client-side validation is only a convenience you provide to the user; you still need to validate all input (again) on the server.TL;DR don't use a regular expression to validate complex real-world data like phone numbers or URLs. Use a specialized library.My regex of choice is:Valid formats:(123) 456-7890

(123)456-7890

123-456-7890

123.456.7890

1234567890

+31636363634

075-63546725  If you are looking for 10 and only 10 digits, ignore everything but the digits-What I would do is ignore the format and validate the numeric content:The following REGEX will validate any of these formats:(123) 456-7890

123-456-7890

123.456.7890

1234567890This is a very loose option and I prefer to keep it this way, mostly I use it in registration forms where the users need to add their phone number.

Usually users have trouble with forms that enforce strict formatting rules, I prefer user to fill in the number and the format it in the display or before saving it to the database.

http://regexr.com/3c53vI would suggest using something clearer (especially thinking to who will have to maintain the code)... what about:where the regexp is built from a clear template ? Adding a new one would then be a no-brainer and may be even the customer itself could be able to do that in a "options" page.Where str could be any of these formarts:

555-555-5555

(555)555-5555

(555) 555-5555

555 555 5555

5555555555

1 555 555 5555Try this one - it includes validation for international formats too./^[+]?(1\-|1\s|1|\d{3}\-|\d{3}\s|)?((\(\d{3}\))|\d{3})(\-|\s)?(\d{3})(\-|\s)?(\d{4})$/gThis regex validates the following format:/^\+?1?\s*?\(?\d{3}(?:\)|[-|\s])?\s*?\d{3}[-|\s]?\d{4}$/Although this post is an old but want to leave my contribuition.

these are accepted:

5555555555

555-555-5555

(555)555-5555

1(555)555-5555

1 555 555 5555

1 555-555-5555

1 (555) 555-5555these are not accepted:555-5555 -> to accept this use:  ^\+?1?\s*?\(?(\d{3})?(?:\)|[-|\s])?\s*?\d{3}[-|\s]?\d{4}$5555555 -> to accept this use: ^\+?1?\s*?\(?(\d{3})?(?:\)|[-|\s])?\s*?\d{3}[-|\s]?\d{4}$1 555)555-5555

123**&!!asdf#

55555555

(6505552368)

2 (757) 622-7382

0 (757) 622-7382

-1 (757) 622-7382

2 757 622-7382

10 (757) 622-7382

27576227382

(275)76227382

2(757)6227382

2(757)622-7382

(555)5(55?)-5555this is the code I used:This will work:The ? character signifies that the preceding group should be matched zero or one times. The group (-|\s) will match either a - or a | character. Adding ? after the second  occurrence of this group in your regex allows you to match a sequence of 10 consecutive digits. Everyone's answers are great, but here's one I think is a bit more comprehensive...This is written for javascript match use of a single number in a single line:If you want to match at word boundaries, just change the ^ and $ to \bI welcome any suggestions, corrections, or criticisms of this solution.  As far as I can tell, this matches the NANP format (for USA numbers - I didn't validate other North American countries when creating this), avoids any 911 errors (can't be in the area code or region code), eliminates only those 555 numbers which are actually invalid (region code of 555 followed by 01xx where x = any number).realy simple /^(()?\d{3}())?(-|\s)?\d{3}(-|\s)?\d{4}$/ The ? character signifies that the preceding group should be matched zero or one times. The group (-|\s) will match either a - or a | character. I have to agree that validating phone numbers is a difficult task.

As for this specific problem i would change the regex fromtoas the only one more element that becomes unnecessary is the last dash/space.If you using on input tag than this code will help you. I write this code by myself and I think this is very good way to use in input. but you can change it using your format. It will help user to correct their format on input tag.Just wanted to add a solution specifically for selecting non-local phone numbers(800 and 900 types).Google has a good library for handling phone numbers in Javascript: https://github.com/googlei18n/libphonenumber. Works also with Java and C++.I would prefer using these, because this one must be really well tested in production. So this should be quite safe to relay on. This function worked for us well:There are too many regex variants to validate a phone number. I recommend this article: JavaScript: HTML Form - Phone Number validation, where multiple variants are specified for each case. If you want to deepen in regex for a custom expression, you can review this documentation.This reg ex is suitable for international phone numbers and multiple formats of mobile cell numbers.Here is the regular expression:

/^(+{1}\d{2,3}\s?[(]{1}\d{1,3}[)]{1}\s?\d+|+\d{2,3}\s{1}\d+|\d+){1}[\s|-]?\d+([\s|-]?\d+){1,2}$/Here is the JavaScript functionThis validates the following formats:+44 07988-825 465 (with any combination of hyphens in place of space except that only a space must follow the +44)+44 (0) 7988-825 465 (with any combination of hyphens in place of spaces except that no hyphen can exist directly before or after the (0) and the space before or after the (0) need not exist)123 456-789 0123 (with any combination of hyphens in place of the spaces)123-123 123 (with any combination of hyphens in place of the spaces)123 123456 (Space can be replaced with a hyphen)1234567890No double spaces or double hyphens can exist for all formats.Validate phone number + return formatted  dataSimple Regular expression: /\b\d{3}[-.]?\d{3}[-.]?\d{4}\b/gCheck out the format, hope it works :

    444-555-1234

    f:246.555.8888

    m:1235554567    This will validate any phone number of variable format:\\(?\d{3}\\)? finds 3 digits enclosed by parenthesis or not.([\-\s\.])? finds any of these separator characters or not\d{3} finds 3 digits\1 uses the first matched separator - this ensures that the separators are the same. So (000) 999-5555 will not validate here because there is a space and dash separator, so just remove the "\1" and replace with the separator sub-pattern (doing so will also validate  non standard formats). You should however be format hinting for user input anyway.\d{4} finds 4 digitsValidates:BTW this is for JavaScript hence to double escapes.Try this js function.

Returns true if it matches and false if it fails

Reftry thisvalid formatshttps://regex101.com/r/QXAhGV/1try this valid formats:

How to filter multiple values (OR operation) in angularJS

JustGoscha

[How to filter multiple values (OR operation) in angularJS](https://stackoverflow.com/questions/15868248/how-to-filter-multiple-values-or-operation-in-angularjs)

I want to use the filter in angular and want to filter for multiple values, if it has either one of the values then it should be displayed.I have  for example this structure: An object movie which has the property genres and I want to filter for Action and Comedy.I know I can do filter:({genres: 'Action'} || {genres: 'Comedy'}), but what to do if I want to filter it dynamically. E.g. filter: variableXHow do I set variableX in the $scope, when I have an array of the genres I have to filter?I could construct it as a string and then do an eval() but I don't want to use eval()...

2013-04-07 21:48:33Z

I want to use the filter in angular and want to filter for multiple values, if it has either one of the values then it should be displayed.I have  for example this structure: An object movie which has the property genres and I want to filter for Action and Comedy.I know I can do filter:({genres: 'Action'} || {genres: 'Comedy'}), but what to do if I want to filter it dynamically. E.g. filter: variableXHow do I set variableX in the $scope, when I have an array of the genres I have to filter?I could construct it as a string and then do an eval() but I don't want to use eval()...I would just create a custom filter.  They are not that hard.Edit here is the link: Creating Angular FiltersUPDATE:  Here is a fiddle that has an exact demo of my suggestion.You can use a controller function to filter.HTML:Creating a custom filter might be overkill here, you can just pass in a custom comparator, if you have the multiples values like:then in the filter:Here is the implementation of custom filter, which will filter the data using array of values.It will support multiple key object  with both array and single value of keys. As mentioned inangularJS API AngularJS filter Doc supports multiple key filter with single value, but below custom filter will support same feature as angularJS and also supports array of values and combination of both array and single value of keys.Please find the code snippet below,Usage:Here is a fiddle example with implementation of above "filterMutiple" custom filter.

:::Fiddle Example:::If you want to filter on Array of Objects then you can givefilter:({genres: 'Action', key :value }.Individual property will be filtered by particular filter given for that property.But if you wanted to something like filter by individual Property and filter globally for all properties then you can do something like this.~AtulI've spent some time on it and thanks to @chrismarx, I saw that angular's default filterFilter allows you to pass your own comparator. Here's the edited comparator for multiple values:And if we want to make a custom filter for DRY:And then we can use it anywhere we want:Finally here's a plunkr.Note: Expected array should only contain simple objects like String, Number etc.you can use searchField filter of angular.filterJS:HTML:You can also use ngIf if the situation permits:The quickest solution that I've found is to use the filterBy filter from angular-filter, for example:The upside is that angular-filter is a fairly popular library (~2.6k stars on GitHub) which is still actively developed and maintained, so it should be fine to add it to your project as a dependency.I believe this is what you're looking for:Please try thisLets assume you have two array, one for movie and one for genreJust use the filter as: filter:{genres: genres.type} Here genres being the array and type has value for genreI wrote this for strings AND functionality (I know it's not the question but I searched for it and got here), maybe it can be expanded.Usage:Angular Or Filter Module$filter('orFilter')([{..}, {..} ...], {arg1, arg2, ...}, false)here is the link: https://github.com/webyonet/angular-or-filterI had similar situation. Writing custom filter worked for me. Hope this helps!JS:HTML: Here is my example how create filter and directive for table jsfiddledirective get list (datas) and create table with filtersmy pleasure if i help youToo late to join the party but may be it can help someone:We can do it in two step, first filter by first property and then concatenate by second filter:See the working fiddle with multiple property filterOPTION 1:

Using Angular providered filter comparator parameterOPTION 2:

Using Angular providered filter negationMy solutionthe best answer is :

Break promise chain and call a function based on the step in the chain where it is broken (rejected)

m59

[Break promise chain and call a function based on the step in the chain where it is broken (rejected)](https://stackoverflow.com/questions/20714460/break-promise-chain-and-call-a-function-based-on-the-step-in-the-chain-where-it)

To help future viewers of this post, I created this demo of pluma's answer. My goal seems fairly straightforward.The problem here is that if I fail on step 1, both stepError(1) AND stepError(2) are fired. If I don't return $q.reject then stepError(2) won't be fired, but step(2) will, which I understand. I've accomplished everything except what I'm trying to do.How do I write promises so that I can call a function on rejection, without calling all of the functions in the error chain? Or is there another way to accomplish this?Here's a live demo so you've got something work with.I kind of have solved it. Here, I am catching the error at the end of the chain and passing the data to reject(data) so that I will know what issue to handle in the error function. This actually doesn't meet my requirements because I don't want to depend on the data. It would be lame, but in my case it would be cleaner to pass an error callback to the function rather than to depend on the returned data to determine what to do.Live demo here (click).

2013-12-21 01:30:59Z

To help future viewers of this post, I created this demo of pluma's answer. My goal seems fairly straightforward.The problem here is that if I fail on step 1, both stepError(1) AND stepError(2) are fired. If I don't return $q.reject then stepError(2) won't be fired, but step(2) will, which I understand. I've accomplished everything except what I'm trying to do.How do I write promises so that I can call a function on rejection, without calling all of the functions in the error chain? Or is there another way to accomplish this?Here's a live demo so you've got something work with.I kind of have solved it. Here, I am catching the error at the end of the chain and passing the data to reject(data) so that I will know what issue to handle in the error function. This actually doesn't meet my requirements because I don't want to depend on the data. It would be lame, but in my case it would be cleaner to pass an error callback to the function rather than to depend on the returned data to determine what to do.Live demo here (click).The reason your code doesn't work as expected is that it's actually doing something different from what you think it does.Let's say you have something like the following:To better understand what's happening, let's pretend this is synchronous code with try/catch blocks:The onRejected handler (the second argument of then) is essentially an error correction mechanism (like a catch block). If an error is thrown in handleErrorOne, it will be caught by the next catch block (catch(e2)), and so on.This is obviously not what you intended.Let's say we want the entire resolution chain to fail no matter what goes wrong:Note: We can leave the handleErrorOne where it is, because it will only be invoked if stepOne rejects (it's the first function in the chain, so we know that if the chain is rejected at this point, it can only be because of that function's promise).The important change is that the error handlers for the other functions are not part of the main promise chain. Instead, each step has its own "sub-chain" with an onRejected that is only called if the step was rejected (but can not be reached by the main chain directly).The reason this works is that both onFulfilled and onRejected are optional arguments to the then method. If a promise is fulfilled (i.e. resolved) and the next then in the chain doesn't have an onFulfilled handler, the chain will continue until there is one with such a handler.This means the following two lines are equivalent:But the following line is not equivalent to the two above:Angular's promise library $q is based on kriskowal's Q library (which has a richer API, but contains everything you can find in $q). Q's API docs on GitHub could prove useful. Q implements the Promises/A+ spec, which goes into detail on how then and the promise resolution behaviour works exactly.EDIT:Also keep in mind that if you want to break out of the chain in your error handler, it needs to return a rejected promise or throw an Error (which will be caught and wrapped in a rejected promise automatically). If you don't return a promise, then wraps the return value in a resolve promise for you. This means that if you don't return anything, you are effectively returning a resolved promise for the value undefined.Bit late to the party but this simple solution worked for me:This allows you to break out of the chain.What you need is a repeating .then() chain with a special case to start and a special case to finish.The knack is to get the step number of the failure case to ripple through to a final error handler.You can write the whole thing out longhand but it's easier to demonstrate the pattern with named, generalised functions :see demoNote how in step(), the deferred is rejected or resolved with n, thus making that value available to the callbacks in the next .then() in the chain. Once stepError is called, the error is repeatedly rethrown until it is handled by finalError.When rejecting you should pass an rejection error, then wrap step error handlers in a function that checks whether the rejection should be processed or "rethrown" until the end of the chain :What you'd see on the console :Here is some working code

https://jsfiddle.net/8hzg5s7m/3/If you have specific handling for each step, your wrapper could be something like:then your chainIf I understand correctly, you want only the error for the failing step to show, right?That should be as simple as changing the failure case of the first promise to this:By returning $q.reject() in the first step's failure case, you're rejecting that promise, which causes the errorCallback to be called in the 2nd then(...).http://jsbin.com/EpaZIsIp/20/editOr automated for any number of steps:http://jsbin.com/EpaZIsIp/21/editIf you want to solve this issue using async/await:Attach error handlers as separate chain elements directly to the execution of the steps:or using catch():Note: This is basically the same pattern as pluma suggests in his answer but using the OP's naming.Found Promise.prototype.catch() examples on MDN below very helpful.(The accepted answer mentions then(null, onErrorHandler) which is basically the same as catch(onErrorHandler).)The best solution is to refactor to your promise chain to use ES6 await's.  Then you can just return from the function to skip the rest of the behavior.I have been hitting my head against this pattern for over a year and using await's is heaven.Try ro use this like libs:https://www.npmjs.com/package/promise-chain-breakProvide a module whose responsibility is to execute requests sequentially, while tracking the current index of each operation in an ordinal manner. Define the operation in a Command Pattern for flexibility.Use SequentialPromise when ordinal behavior of Promise resolution is needed. SequentialPromise will track the index for which a Promise was rejected.SequentialPromiseIf at any point you return Promise.reject('something') you will be thrown in the catch block ot the promise.If the first promise does not return any result you will only get 'No result' in the console.

html5 localStorage error with Safari:「QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to add something to storage that exceeded the quota.」

leiyonglin

[html5 localStorage error with Safari:「QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to add something to storage that exceeded the quota.」](https://stackoverflow.com/questions/14555347/html5-localstorage-error-with-safari-quota-exceeded-err-dom-exception-22-an)

My webapp have javascript errors in ios safari private browsing:my code:

2013-01-28 04:16:30Z

My webapp have javascript errors in ios safari private browsing:my code:Apparently this is by design. When Safari (OS X or iOS) is in private browsing mode, it appears as though localStorage is available, but trying to call setItem throws an exception.What happens is that the window object still exposes localStorage in the global namespace, but when you call setItem, this exception is thrown. Any calls to removeItem are ignored.I believe the simplest fix (although I haven't tested this cross browser yet) would be to alter the function isLocalStorageNameSupported() to test that you can also set some value.https://github.com/marcuswestin/store.js/issues/42The fix posted on above link did not work for me. This did:Derived from http://m.cg/post/13095478393/detect-private-browsing-mode-in-mobile-safari-on-ios5As mentioned in other answers, you'll always get the QuotaExceededError in Safari Private Browser Mode on both iOS and OS X when localStorage.setItem (or sessionStorage.setItem) is called.One solution is to do a try/catch or Modernizr check in each instance of using setItem.However if you want a shim that simply globally stops this error being thrown, to prevent the rest of your JavaScript from breaking, you can use this:https://gist.github.com/philfreo/68ea3cd980d72383c951In my context, just developed a class abstraction.

When my application is launched, i check if localStorage is working by calling getStorage(). This function also return :In my code i never call localStorage directly. I call cusStoglobal var, i had initialised by calling getStorage().This way, it works with private browsing or specific Safari versionsIt seems that Safari 11 changes the behavior, and now local storage works in a private browser window. Hooray!Our web app that used to fail in Safari private browsing now works flawlessly. It always worked fine in Chrome's private browsing mode, which has always allowed writing to local storage.This is documented in Apple's Safari Technology Preview release notes - and the WebKit release notes - for release 29, which was in May 2017. Specifically:To expand on others' answers, here is a compact solution that doesn't expose/add any new variables. It doesn't cover all bases, but it should suit most people who just want a single page app to remain functional (despite no data persistence after reload).I had the same problem using Ionic framework (Angular + Cordova). I know this not solve the problem, but it's the code for Angular Apps based on the answers above. You will have a ephemeral solution for localStorage on iOS version of Safari.Here is the code:Source: https://gist.github.com/jorgecasar/61fda6590dc2bb17e871Enjoy your coding!Here's a solution for AngularJS using an IIFE and leveraging the fact that services are singletons.This results in isLocalStorageAvailable being set immediately when the service is first injected and avoids needlessly running the check every time local storage needs to be accessed.I just created this repo to provide sessionStorage and localStorage features for unsupported or disabled browsers.Supported browsersHow it worksIt detects the feature with the storage type.Sets StorageService.localStorage to window.localStorage if it is supported or creates a cookie storage.

Sets StorageService.sessionStorage to window.sessionStorage if it is supported or creates a in memory storage for SPA, cookie storage with sesion features for non SPA.Here is an Angular2+ service version for memory storage alternative, you can just inject into your components, based on Pierre Le Roux' answer.I have created a patch for the issue. Simply I am checking if the browser does support localStorage or sessionStorage or not. If not then the storage engine will be Cookie. But the negative side is Cookie have very tiny storage memory :(The following script solved my problem:It checks if localStorage exists and can be used and in the negative case, it creates a fake local storage and uses it instead of the original localStorage.

Please let me know if you need further information.

JavaScript listener,「keypress」doesn't detect backspace?

Skizit

[JavaScript listener,「keypress」doesn't detect backspace?](https://stackoverflow.com/questions/4843472/javascript-listener-keypress-doesnt-detect-backspace)

I'm using a keypress listener eg.. However, this doesn't seem to detect a backspace which erases text... Is there a different listener I can use to detect this?

2011-01-30 14:43:57Z

I'm using a keypress listener eg.. However, this doesn't seem to detect a backspace which erases text... Is there a different listener I can use to detect this?KeyPress event is invoked only for character (printable) keys, KeyDown event is raised for all including nonprintable such as Control, Shift, Alt, BackSpace, etc.UPDATE:  Reference.Try keydown instead of keypress.The keyboard events occur in this order: keydown, keyup, keypressThe problem with backspace probably is, that the browser will navigate back on keyup and thus your page will not see the keypress event.The keypress event might be different across browsers. I created a Jsfiddle to compare keyboard events (using the JQuery shortcuts) on Chrome and Firefox. Depending on the browser you're using a keypress event will be triggered or not -- backspace will trigger keydown/keypress/keyup on Firefox but only keydown/keyup on Chrome.on Chromeon FirefoxThis shouldn't be surprising because according to https://api.jquery.com/keypress/:The use of the keypress event type is deprecated by W3C (http://www.w3.org/TR/DOM-Level-3-Events/#event-type-keypress)Finally, to answer your question, you should use keyup or keydown to detect a backspace across Firefox and Chrome.Try it out on here:Something I wrote up incase anyone comes across an issue with people hitting backspace while thinking they are in a form fieldMy numeric control:try itBackSpace key code is 8More recent and much cleaner: use event.key. No more arbitrary number codes!Mozilla DocsSupported BrowsersUse one of keyup / keydown / beforeinput events instead. based on this reference, keypress is deprecated and no longer recommended. if you use "beforeinput" be careful about it's Browser compatibility. the difference between "beforeinput" and the other two is that "beforeinput" is fired when input value is about to changed, so with characters that can't change the input value, it is not fired (e.g shift, ctr ,alt).I had the same problem and by using keyup it was solved.

Download file from an ASP.NET Web API method using AngularJS

whereDragonsDwell

[Download file from an ASP.NET Web API method using AngularJS](https://stackoverflow.com/questions/24080018/download-file-from-an-asp-net-web-api-method-using-angularjs)

In my Angular JS project, I've an <a> anchor tag, which when clicked makes an HTTP GET request to a WebAPI method that returns a file. Now, I want the file to be downloaded to the user once the request is successful. How do I do that?The anchor tag: AngularJS:My WebAPI method:

2014-06-06 10:49:44Z

In my Angular JS project, I've an <a> anchor tag, which when clicked makes an HTTP GET request to a WebAPI method that returns a file. Now, I want the file to be downloaded to the user once the request is successful. How do I do that?The anchor tag: AngularJS:My WebAPI method:Support for downloading binary files in using ajax is not great, it is very much still under development as working drafts. You can have the browser download the requested file simply by using the code below, and this is supported in all browsers, and will obviously trigger the WebApi request just the same.Using ajax to download the binary file can be done in some browsers and below is an implementation that will work in the latest flavours of Chrome, Internet Explorer, FireFox and Safari.It uses an arraybuffer response type, which is then converted into a JavaScript blob, which is then either presented to save using the saveBlob method - though this is only currently present in Internet Explorer - or turned into a blob data URL which is opened by the browser, triggering the download dialog if the mime type is supported for viewing in the browser.Note: Internet Explorer 11 did not like using the msSaveBlob function if it had been aliased - perhaps a security feature, but more likely a flaw, So using var saveBlob = navigator.msSaveBlob || navigator.webkitSaveBlob ... etc. to determine the available saveBlob support caused an exception; hence why the code below now tests for navigator.msSaveBlob separately. Thanks? MicrosoftYou should modify your WebApi method to return the following headers:I hope this helps.C# WebApi PDF download all working with Angular JS AuthenticationWeb Api ControllerAngular JS ServiceEither one will doAngular JS Controller calling the service And last the HTML pageThis will be refactored just sharing the code now hope it helps someone as it took me a while to get this working.For me the Web API was Rails and client side Angular used with Restangular and FileSaver.jsWeb APIHTMLAngular controllerAngular ServiceWe also had to develop a solution which would even work with APIs requiring authentication (see this article)Using AngularJS in a nutshell here is how we did it:Step 1: Create a dedicated directiveStep 2: Create a templateStep 3: Use itThis will render a blue button. When clicked, a PDF will be downloaded (Caution: the backend has to deliver the PDF in Base64 encoding!) and put into the href. The button turns green and switches the text to Save. The user can click again and will be presented with a standard download file dialog for the file my-awesome.pdf.Send your file as a base64 string.If attr method not working in Firefox You can also use  javaScript setAttribute methodYou could implement a showfile function which takes in parameters of the data returned from the WEBApi, and a filename for the file you are trying to download. What I did was create a separate browser service identifies the user's browser and then handles the rendering of the file based on the browser. For instance if the target browser is chrome on an ipad, you have to use javascripts FileReader object.In your component i.e angular js code:I have gone through array of solutions and this is what I found to have worked great for me.In my case I needed to send a post request with some credentials.

Small overhead was to add jquery inside the script. 

But was worth it.

How to detect which one of the defined font was used in a web page?

Pat

[How to detect which one of the defined font was used in a web page?](https://stackoverflow.com/questions/845/how-to-detect-which-one-of-the-defined-font-was-used-in-a-web-page)

Suppose I have the following CSS rule in my page:How can I detect which one of the defined fonts was used in the user's browser?Edit for people wondering why I want to do this: The font I'm detecting contains glyph's that are not available in other fonts and when the user does not have the font I want to display a link asking the user to download that font so they can use my web application with the correct font.Currently I am displaying the download font link for all users, I want to only display this for people who do not have the correct font installed.

2008-08-03 21:42:37Z

Suppose I have the following CSS rule in my page:How can I detect which one of the defined fonts was used in the user's browser?Edit for people wondering why I want to do this: The font I'm detecting contains glyph's that are not available in other fonts and when the user does not have the font I want to display a link asking the user to download that font so they can use my web application with the correct font.Currently I am displaying the download font link for all users, I want to only display this for people who do not have the correct font installed.I've seen it done in a kind of iffy, but pretty reliable way. Basically, an element is set to use a specific font and a string is set to that element.  If the font set for the element does not exist, it takes the font of the parent element.  So, what they do is measure the width of the rendered string.  If it matches what they expected for the desired font as opposed to the derived font, it's present. This won't work for monospaced fonts.Here's where it came from:

Javascript/CSS Font Detector (ajaxian.com; 12 Mar 2007)I wrote a simple JavaScript tool that you can use it to check if a font is installed or not.

It uses simple technique and should be correct most of the time.

jFont Checker on github@pat Actually, Safari does not give the font used, Safari instead always returns the first font in the stack regardless of whether it is installed, at least in my experience.Assuming Helvetica is the one installed/used, you'll get:I took a pass at this problem and created Font Unstack, which tests each font in a stack and returns the first installed one only. It uses the trick that @MojoFilter mentions, but only returns the first one if multiple are installed. Though it does suffer from the weakness that @tlrobinson mentions (Windows will substitute Arial for Helvetica silently and report that Helvetica is installed), it otherwise works well.A technique that works is to look at the computed style of the element. This is supported in Opera and Firefox (and I recon in safari, but haven't tested). IE (7 at least), provides a method to get a style, but it seems to be whatever was in the stylesheet, not the computed style. More details on quirksmode: Get StylesHere's a simple function to grab the font used in an element:If the CSS rule for this was:Then it should return helvetica if that is installed, if not, arial, and lastly, the name of the system default sans-serif font. Note that the ordering of fonts in your CSS declaration is significant.An interesting hack you could also try is to create lots of hidden elements with lots of different fonts to try to detect which fonts are installed on a machine. I'm sure someone could make a nifty font statistics gathering page with this technique.A simplified form is:If you need something more complete, check this out.There is a simple solution - just use element.style.font:This function will  exactly do what you want. On execution It will return the font type of the user/browser. Hope this will help.Another solution would be to install the font automatically via @font-face which might negate the need for detection.Of course it wouldn't solve any copyright issues, however you could always use a freeware font or even make your own font. You will need both .eot & .ttf files to work best.Calibri is a font owned by Microsoft, and shouldn't be distributed for free. Also, requiring a user to download a specific font isn't very user-friendly. I would suggest purchasing a license for the font and embedding it into your application.I am using Fount. You just have to drag the Fount button to your bookmarks bar, click on it and then click on a specific text on the website. It will then show the font of that text. https://fount.artequalswork.com/You can use this website :http://website-font-analyzer.com/It does exactly what you want...You can put Adobe Blank in the font-family after the font you want to see, and then any glyphs not in that font won't be rendered.e.g.:As far as I'm aware there is no JS method to tell which glyphs in an element are being rendered by which font in the font stack for that element.This is complicated by the fact that browsers have user settings for serif/sans-serif/monospace fonts and they also have their own hard-coded fall-back fonts that they will use if a glyph is not found in any of the fonts in a font stack. So browser may render some glyphs in a font that is not in the font stack or the user's browser font setting. Chrome Dev Tools will show you each rendered font for the glyphs in the selected element. So on your machine you can see what it's doing, but there's no way to tell what's happening on a user's machine.It's also possible the user's system may play a part in this as e.g. Window does Font Substitution at the glyph level.so...For the glyphs you are interested in, you have no way of knowing whether they will be rendered by the user's browser/system fallback, even if they don't have the font you specify.If you want to test it in JS you could render individual glyphs with a font-family including Adobe Blank and measure their width to see if it is zero, BUT you'd have to iterate thorough each glyph and each font you wanted to test, but although you can know the fonts in an elements font stack there is no way of knowing what fonts the user's browser is configured to use so for at least some of your users the list of fonts you iterate through will be incomplete. (It is also not future proof if new fonts come out and start getting used.)

How to get progress from XMLHttpRequest

Sean McMains

[How to get progress from XMLHttpRequest](https://stackoverflow.com/questions/76976/how-to-get-progress-from-xmlhttprequest)

Is it possible to get the progress of an XMLHttpRequest (bytes uploaded, bytes downloaded)? This would be useful to show a progress bar when the user is uploading a large file. The standard API doesn't seem to support it, but maybe there's some non-standard extension in any of the browsers out there? It seems like a pretty obvious feature to have after all, since the client knows how many bytes were uploaded/downloaded.note: I'm aware of the "poll the server for progress" alternative (it's what I'm doing right now). the main problem with this (other than the complicated server-side code) is that typically, while uploading a big file, the user's connection is completely hosed, because most ISPs offer poor upstream. So making extra requests is not as responsive as I'd hoped. I was hoping there'd be a way (maybe non-standard) to get this information, which the browser has at all times.

2008-09-16 21:04:06Z

Is it possible to get the progress of an XMLHttpRequest (bytes uploaded, bytes downloaded)? This would be useful to show a progress bar when the user is uploading a large file. The standard API doesn't seem to support it, but maybe there's some non-standard extension in any of the browsers out there? It seems like a pretty obvious feature to have after all, since the client knows how many bytes were uploaded/downloaded.note: I'm aware of the "poll the server for progress" alternative (it's what I'm doing right now). the main problem with this (other than the complicated server-side code) is that typically, while uploading a big file, the user's connection is completely hosed, because most ISPs offer poor upstream. So making extra requests is not as responsive as I'd hoped. I was hoping there'd be a way (maybe non-standard) to get this information, which the browser has at all times.For the bytes uploaded it is quite easy. Just monitor the xhr.upload.onprogress event. The browser knows the size of the files it has to upload and the size of the uploaded data, so it can provide the progress info.For the bytes downloaded (when getting the info with xhr.responseText), it is a little bit more difficult, because the browser doesn't know how many bytes will be sent in the server request. The only thing that the browser knows in this case is the size of the bytes it is receiving. There is a solution for this, it's sufficient to set a Content-Length header on the server script, in order to get the total size of the bytes the browser is going to receive. For more go to https://developer.mozilla.org/en/Using_XMLHttpRequest .Example:

My server script reads a zip file (it takes 5 seconds):Now I can monitor the download process of the server script, because I know it's total length:Firefox supports XHR download progress events.There's a nice discussion of the Progress Indicator for AJAX pattern here:http://ajaxpatterns.org/Progress_IndicatorOne of the most promising approaches seems to be opening a second communication channel back to the server to ask it how much of the transfer has been completed.Firefox 3.5 will support upload progress eventFor the total uploaded there doesn't seem to be a way to handle that, but there's something similar to what you want for download. Once readyState is 3, you can periodically query responseText to get all the content downloaded so far as a String (this doesn't work in IE), up until all of it is available at which point it will transition to readyState 4. The total bytes downloaded at any given time will be equal to the total bytes in the string stored in responseText.For a all or nothing approach to the upload question, since you have to pass a string for upload (and it's possible to determine the total bytes of that) the total bytes sent for readyState 0 and 1 will be 0, and the total for readyState 2 will be the total bytes in the string you passed in. The total bytes both sent and received in readyState 3 and 4 will be the sum of the bytes in the original string plus the total bytes in responseText.If you have access to your apache install and trust third-party code, you can use the apache upload progress module (if you use apache; there's also a nginx upload progress module). Otherwise, you'd have to write a script that you can hit out of band to request the status of the file (checking the filesize of the tmp file for instance). There's some work going on in firefox 3 I believe to add upload progress support to the browser, but that's not going to get into all the browsers and be widely adopted for a while (more's the pity).The only way to do that with pure javascript is to implement some kind of polling mechanism.

You will need to send ajax requests at fixed intervals (each 5 seconds for example) to get the number of bytes received by the server.A more efficient way would be to use flash. The flex component FileReference dispatchs periodically a 'progress' event holding the number of bytes already uploaded. 

If you need to stick with javascript, bridges are available between actionscript and javascript. 

The good news is that this work has been already done for you :)swfuploadThis library allows to register a javascript handler on the flash progress event.This solution has the hudge advantage of not requiring aditionnal resources on the server side.

Best Practice: Access form elements by HTML id or name attribute?

seth

[Best Practice: Access form elements by HTML id or name attribute?](https://stackoverflow.com/questions/2435525/best-practice-access-form-elements-by-html-id-or-name-attribute)

As any seasoned JavaScript developer knows, there are many (too many) ways to do the same thing.  For example, say you have a text field as follows:There are many way to access this in JavaScript:Methods [1] and [3] are well documented in the Mozilla Gecko documentation, but neither are ideal. [1] is just too general to be useful and [3] requires both an id and a name (assuming you will be posting the data to a server side language). Ideally, it would be best to have only an id attribute or a name attribute (having both is somewhat redundant, especially if the id isn't necessary for any css, and increases the likelihood of typos, etc).[2] seems to be the most intuitive and it seems to be widely used, but I haven't seen it referenced in the Gecko documentation and I'm worried about both forwards compatibility and cross browser compatiblity (and of course I want to be as standards compliant as possible).So what's best practice here?  Can anyone point to something in the DOM documentation or W3C specification that could resolve this?Note I am specifically interested in a non-library solution (jQuery/Prototype).

2010-03-12 20:07:14Z

As any seasoned JavaScript developer knows, there are many (too many) ways to do the same thing.  For example, say you have a text field as follows:There are many way to access this in JavaScript:Methods [1] and [3] are well documented in the Mozilla Gecko documentation, but neither are ideal. [1] is just too general to be useful and [3] requires both an id and a name (assuming you will be posting the data to a server side language). Ideally, it would be best to have only an id attribute or a name attribute (having both is somewhat redundant, especially if the id isn't necessary for any css, and increases the likelihood of typos, etc).[2] seems to be the most intuitive and it seems to be widely used, but I haven't seen it referenced in the Gecko documentation and I'm worried about both forwards compatibility and cross browser compatiblity (and of course I want to be as standards compliant as possible).So what's best practice here?  Can anyone point to something in the DOM documentation or W3C specification that could resolve this?Note I am specifically interested in a non-library solution (jQuery/Prototype).Give your form an id only, and your input a name only:Then the most standards-compliant and least problematic way to access your input element is via:using .elements["foo"] instead of just .foo is preferable because the latter might return a property of the form named "foo" rather than a HTML element!"No-omg-never!" comes to mind when I see this method of element access.  The problem with this is that it assumes that the DOM is a normal data structure (e.g.: an array) wherein the element order is static, consistent or reliable in anyway.  We know that 99.9999% of the time, that this is not the case. Reordering or input elements within the form, adding another form to the page before the form in question, or moving the the form in question are all cases where this code breaks.  Short story: this is very fragile.  As soon as you add or move something, it's going to break.I'm with Sergey ILinsky on this: My main issue with this method is that the name attribute is useless when applied to a form.  The name is not passed to the server as part of the POST/GET and doesn't work for hash style bookmarks.In my opinion, this is the most preferable method.  Direct access is the most concise and clear method.In my opinion, this is acceptable, but more verbose than necessary.  Method #3 is preferable.I just so happened to be watch a video from Douglas Crockford and he weighed in on this very subject.  The point of interest is at -12:00.  To summarize:So there you have it.  Semantically, this makes the most sense.To access named elements placed in a form, it is a good practice to use the form object itself.To access an arbitrary element in the DOM tree that may on occasion be found within a form, use getElementById and the element's id.I much prefer a 5th method.  That is

[5] Use the special JavaScript identifier this to pass the form or field object to the function from the event handler.Specifically, for forms:  and Using this technique, the function never has to know

- the order in which forms are defined in the page,

- the form ID, nor

- the form name  Similarly, for fields:  andIn this case, the function never has to know the name or id of a particular weight field, though it does need to know the name of the weight limit field.It’s not really answering your question, but just on this part:You’ll most likely need to have an id attribute on each form field anyway, so that you can associate its <label> element with it, like this:This is required for accessibility (i.e. if you don’t associate form labels and controls, why do you hate blind people so much?).It is somewhat redundant, although less so when you have checkboxes/radio buttons, where several of them can share a name. Ultimately, id and name are for different purposes, even if both are often set to the same value.This is a bit old but I want to add a thing I think is relevant.

(I meant to comment on one or 2 threads above but it seems I need reputation 50 and I have only 21 at the time I'm writing this. :) )

Just want to say that there are times when it's much better to access the elements of a form by name rather than by id. I'm not talking about the form itself. The form, OK, you can give it an id and then access it by it. But if you have a radio button in a form, it's much easier to use it as a single object (getting and setting its value) and you can only do this by name, as far as I know.

Example:You can get/set the checked value of the radio button R1 as a whole by using

document.mainForm.R1.value

or

document.getElementById("mainForm").R1.value

So if you want to have a unitary style, you might want to always use this method, regardless of the type of form element. Me, I'm perfectly comfortable accessing radio buttons by name and text boxes by id.Being old-fashioned I've always used the 'document.myform.myvar' syntax but I recently found it failed in Chrome (OK in Firefox and IE).  It was an Ajax page (i.e. loaded into the innerHTML property of a div).  Maybe Chrome didn't recognise the form as an element of the main document. I used getElementById (without referencing the form) instead and it worked OK.Just to add to everything already said, you may access the inputs either with the name or id using preferably the elements property of the Object form, because without it you may get a property of the form named "foo" rather than an HTML element. And according to @Paul D. Waite it's perfectly ok to have both name and id.According to MDN on the HTMLFormElement.elements pageForm 2 is ok, and form 3 is also recommended.

Redundancy between name and id is caused by the need to keep compatibility, on html 5 some elements (as img, form, iframe and such) will lose their "name" attribute, and it's recommended to use just their id to reference them from now on :)To supplement the other answers, document.myForm.foo is the so-called DOM level 0, which is the way implemented by Netscape and thus is not really an open standard even though it is supported by most browsers.Check out this page: https://developer.mozilla.org/En/DOM/Document.getElementsByNameIt has to be 'elements' and must return an array because more than one element could have the same name.My answer will differ on the exact question. 

If I want to access a certain element specifically, then will I use document.getElementById().

An example is computing the full name of a person, because it is building on multiple fields, but it is a repeatable formula.If I want to access the element as part of a functional structure (a form), then will I use:This is how it also works from the perspective of the business. Changes within the loop go along with functional changes in the application and are therefor meaningful. I apply it mostly for user friendly validation and preventing network calls for checking wrong data. I repeat the validation server side (and add there some more to it), but if I can help the user client side, then is that beneficial to all.For aggregation of data (like building a pie chart based on data in the form) I use configuration documents and custom made Javascript objects. Then is the exact meaning of the field important in relation to its context and do I use document.getElementById().I prefer This Oneparent.children - Will list all elements with a name field of the parent.

parent.elements - Will list only form elements such as input-text, text-area, etcGood Luck...

Efficient way to insert a number into a sorted array of numbers?

Elliot Kroo

[Efficient way to insert a number into a sorted array of numbers?](https://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers)

I have a sorted JavaScript array, and want to insert one more item into the array such the resulting array remains sorted.  I could certainly implement a simple quicksort-style insertion function:[WARNING] this code has a bug when trying to insert to the beginning of the array, e.g. insert(2, [3, 7 ,9]) produces incorrect [ 3, 2, 7, 9 ].However, I noticed that implementations of the Array.sort function might potentially do this for me, and natively:Is there a good reason to choose the first implementation over the second?Edit: Note that for the general case, an O(log(n)) insertion (as implemented in the first example) will be faster than a generic sorting algorithm; however this is not necessarily the case for JavaScript in particular. Note that:

2009-08-28 00:55:32Z

I have a sorted JavaScript array, and want to insert one more item into the array such the resulting array remains sorted.  I could certainly implement a simple quicksort-style insertion function:[WARNING] this code has a bug when trying to insert to the beginning of the array, e.g. insert(2, [3, 7 ,9]) produces incorrect [ 3, 2, 7, 9 ].However, I noticed that implementations of the Array.sort function might potentially do this for me, and natively:Is there a good reason to choose the first implementation over the second?Edit: Note that for the general case, an O(log(n)) insertion (as implemented in the first example) will be faster than a generic sorting algorithm; however this is not necessarily the case for JavaScript in particular. Note that:Just as a single data point, for kicks I tested this out inserting 1000 random elements into an array of 100,000 pre-sorted numbers using the two methods using Chrome on Windows 7:So, at least on this setup, the native method doesn't make up for it.  This is true even for small data sets, inserting 100 elements into an array of 1000:Simple (Demo):Very good and remarkable question with a very interesting discussion! I also was using the Array.sort() function after pushing a single element in an array with some thousands of objects.I had to extend your locationOf function for my purpose because of having complex objects and therefore the need for a compare function like in Array.sort():There's a bug in your code. It should read:Without this fix the code will never be able to insert an element at the beginning of the array.Your insertion function assumes that the given array is sorted, it searches directly for the location where the new element can be inserted, usually by just looking at a few of the elements in the array.The general sort function of an array can't take these shortcuts. Obviously it at least has to inspect all elements in the array to see if they are already correctly ordered. This fact alone makes the general sort slower than the insertion function.A generic sort algorithm is usually on average O(n ⋅ log(n)) and depending on the implementation it might actually be the worst case if the array is already sorted, leading to complexities of O(n2). Directly searching for the insertion position instead has just a complexity of O(log(n)), so it will always be much faster.I know this is an old question that has an answer already, and there are a number of other decent answers.  I see some answers that propose that you can solve this problem by looking up the correct insertion index in O(log n) - you can, but you can't insert in that time, because the array needs to be partially copied out to make space.  Bottom line:  If you really need O(log n) inserts and deletes into a sorted array, you need a different data structure - not an array.  You should use a B-Tree. The performance gains you will get from using a B-Tree for a large data set, will dwarf any of the improvements offered here.If you must use an array. I offer the following code, based on insertion sort, which works, if and only if the array is already sorted. This is useful for the case when you need to resort after every insert:It should operate in O(n), which I think is the best you can do. Would be nicer if js supported multiple assignment.

here's an example to play with:this might be faster:Updated JS Bin linkFor a small number of items, the difference is pretty trivial. However, if you're inserting a lot of items, or working with a very large array, calling .sort() after each insertion will cause a tremendous amount of overhead.I ended up writing a pretty slick binary search/insert function for this exact purpose, so I thought I'd share it. Since it uses a while loop instead of recursion, there is no overheard for extra function calls, so I think the performance will be even better than either of the originally posted methods. And it emulates the default Array.sort() comparator by default, but accepts a custom comparator function if desired.If you're open to using other libraries, lodash provides sortedIndex and sortedLastIndex functions, which could be used in place of the while loop. The two potential downsides are 1) performance isn't as good as my method (thought I'm not sure how much worse it is) and 2) it does not accept a custom comparator function, only a method for getting the value to compare (using the default comparator, I assume).Here are a few thoughts:

Firstly, if you're genuinely concerned about the runtime of your code, be sure to know what happens when you call the built-in functions! I don't know up from down in javascript, but a quick google of the splice function returned this, which seems to indicate that you're creating a whole new array each call! I don't know if it actually matters, but it is certainly related to efficiency. I see that Breton, in the comments, has already pointed this out, but it certainly holds for whatever array-manipulating function you choose.Anyways, onto actually solving the problem.When I read that you wanted to sort, my first thought is to use insertion sort!. It is handy because it runs in linear time on sorted, or nearly-sorted lists. As your arrays will have only 1 element out of order, that counts as nearly-sorted (except for, well, arrays of size 2 or 3 or whatever, but at that point, c'mon). Now, implementing the sort isn't too too bad, but it is a hassle you may not want to deal with, and again, I don't know a thing about javascript and if it will be easy or hard or whatnot. This removes the need for your lookup function, and you just push (as Breton suggested).Secondly, your "quicksort-esque" lookup function seems to be a binary search algorithm! It is a very nice algorithm, intuitive and fast, but with one catch: it is notoriously difficult to implement correctly. I won't dare say if yours is correct or not (I hope it is, of course! :)), but be wary if you want to use it.Anyways, summary: using "push" with insertion sort will work in linear time (assuming the rest of the array is sorted), and avoid any messy binary search algorithm requirements. I don't know if this is the best way (underlying implementation of arrays, maybe a crazy built-in function does it better, who knows), but it seems reasonable to me. :)

   - Agor.Here's a version that uses lodash.note: sortedIndex does a binary search.Here's a comparison of four different algorithms for accomplishing this:

https://jsperf.com/sorted-array-insert-comparison/1AlgorithmsNaive is always horrible. It seems for small array sizes, the other three dont differ too much, but for larger arrays, the last 2 outperform the simple linear approach.Don't re-sort after every item, its overkill..If there is only one item to insert, you can find the location to insert using binary search. Then use memcpy or similar to bulk copy the remaining items to make space for the inserted one. The binary search is O(log n), and the copy is O(n), giving O(n + log n) total. Using the methods above, you are doing a re-sort after every insertion, which is O(n log n).Does it matter? Lets say you are randomly inserting k elements, where k = 1000. The sorted list is 5000 items. If the k items to insert arrive whenever, then you must do search+move. However, if you are given a list of k items to insert into a sorted array - ahead of time - then you can do even better. Sort the k items, separately from the already sorted n array. Then do a scan sort, in which you move down both sorted arrays simultaneously, merging one into the other. 

 - One-step Merge sort = k log k + n = 9965 + 5000 = ~15,000 opsUpdate: Regarding your question.

First method = binary search+move = O(n + log n). Second method = re-sort = O(n log n) Exactly explains the timings you're getting.The best data structure I can think of is an indexed skip list which maintains the insertion properties of linked lists with a hierarchy structure that enables log time operations. On average, search, insertion, and random access lookups can be done in O(log n) time. An order statistic tree enables log time indexing with a rank function. If you do not need random access but you need O(log n) insertion and searching for keys, you can ditch the array structure and use any kind of binary search tree. None of the answers that use array.splice() are efficient at all since that is on average O(n) time. What's the time complexity of array.splice() in Google Chrome? 

How to add jQuery in JS file

Daniel Moura

[How to add jQuery in JS file](https://stackoverflow.com/questions/1140402/how-to-add-jquery-in-js-file)

I have some code specific to sorting tables.  Since the code is common in most pages I want to make a JS file which will have the code and all the pages using it can reference it from there. Problem is: How do I add jQuery, and table sorter plugin into that .js file?I tried something like this:but this seems to not work. What is the best way to do this?

2009-07-16 21:25:31Z

I have some code specific to sorting tables.  Since the code is common in most pages I want to make a JS file which will have the code and all the pages using it can reference it from there. Problem is: How do I add jQuery, and table sorter plugin into that .js file?I tried something like this:but this seems to not work. What is the best way to do this?If you want to include jQuery code from another JS file, this should do the trick:I had the following in my HTML file:I created a separate my_jquery.js file with the following:You can use the below code to achieve loading jQuery in your JS file. I have also added a jQuery JSFiddle that is working and it's using a self-invoking function.Other Option : - You can also try Require.JS which is a JS module loader. In if you want to add reference to any js file, say, from your project, you may also add it directly using reference tag, in Visual Studio IDE this is handled automatically by dragging and dropping the external file from solution explorer to current file (This works for mark up files, .js & .css files too)The problem is you're using </script> within the script, which is ending the script tag. Try this:Here is the solution, that I adopted as a combination of some proposed solutions in some other forums.This way you can reference both css files and other js files in one js file, thus making change next time only in a single place. Please let me know if you have any concerns on it.I have done following:I hope my effort is appreciated.Thanksit is not possible to import js file inside another js fileThe way to use jquery inside js isimport the js in the html or whatever view page you are using inside which you are going to include the js fileview.htmldefault.jsthis will definitely work for you Theres a plugin for jquery where you can just include the files you need into some other js file, here is the link for it http://tobiasz123.wordpress.com/2007/08/01/include-script-inclusion-jquery-plugin/.Also this document.write line will write the script tags in the html not in your js file. So I hope this could help you out, a little with your problemIf you frequently want to update your jquery file link to a new version file, across your site on many pages, at one go.. Create a javascript file (.js) and put in the below code, and map this javascript file to all the pages (instead of mapping jquery file directly on the page), so when the jquery file link is updated on this javascript file it will reflect across the site.The below code is tested and it works good!You can create a master page base without included js and jquery files. Put a content place holder in master page base in head section, then create a nested master page that inherits from this master page base. Now put your includes in a asp:content in nested master page, finally create a content page from this nested master pageExample:Dynamic adding jQuery, CSS from js file.

When we added onload function to body we can use jQuery to create page from js file.If document.write('<\script ...') isn't working, try document.createElement('script')... Other than that, you should be worried about the type of website you're making - do you really think its a good idea to include .js files from .js files? just copy the code from the two files into your file at the top.or use something like this http://code.google.com/p/minify/ to combine your files dynamically.JoshI find that the best way is to use this...This is from the Codecademy 'Make an Interactive Website' project.After lots of research, I solve this issue with hint from ofir_aghai answer about script load event.Basically we need to use $ for jQuery code, but we can't use it till jQuery is loaded. I used document.createElement() to add a script for jQuery, but the issue is that it takes time to load while the next statement in JavaScript using $ fails. So, I used the below solution.myscript.js is having code which uses jQuery

main.js is used to load both jquery.min.js and myscript.js files making sure that jQuery is loaded.main.js codeThis way it worked. Using loadJQueryFile() from myscript.js didn't work. It immediately goes to the next statement which uses $.Why are you using Javascript to write the script tags? Simply add the script tags to your head section. So your document will look something like this:

How to set custom favicon in Express?

Ilya Karnaukhov

[How to set custom favicon in Express?](https://stackoverflow.com/questions/15463199/how-to-set-custom-favicon-in-express)

I recently started working in Node.js and in the app.js file there is this line:Now, how do I set up my own custom favicon.ico?

2013-03-17 16:29:58Z

I recently started working in Node.js and in the app.js file there is this line:Now, how do I set up my own custom favicon.ico?Install the favicon middleware and then do:Or better, using the path module:(note that this solution will work in express 3 apps as well)According to the API, .favicon accepts a location parameter:Most of the time, you might want this (as vsync suggested):Or better yet, use the path module (as Druska suggested):According to the package description:No extra middlewares required. Just use:smiley favicon to prevent error:to change icon in code abovemake an icon maybe here: http://www.favicon.cc/ or here :http://favicon-generator.orgconvert it to base64  maybe here: http://base64converter.com/then replace the icon base 64 valuegeneral information how to create a personalized fav iconicons are made using photoshop or inkscape, maybe inkscape then photoshop for vibrance and color correction (in image->adjustments menu).for quick icon goto http://www.clker.com/ and pick some Vector Clip Arts, and download as svg.

then bring it to inkscape (https://inkscape.org/) and change colors or delete  parts, maybe add something from another vector clipart image, then to export select the parts to export and click file>export, pick size like 16x16 for favicon or 32x32. for further edit 128x128 or 256x256. ico package can have several icon sizes inside. it can have along with 16x16 pixel favicon a high quality icons for link for the website.then maybe enhance the image in photoshop. like vibrance, bevel effect, round mask, anything.then upload this image to one of the websites that generate favicons.

there are also programs for windows for editing icons like https://sourceforge.net/projects/variicons/ . to add the favicon to website. just put the favicon.ico as a file in the root folder of the domain. for example in node.js in public folder that contains the static files. it doesn't have to be anything special like code above just a simple file.No need for custom middleware?! In express: Then put your favicon in public and add the following line in your html's head:I had it working locally without the __dirname + but couldn't get it working on my deployed server.If you are using Express > 4.0, you could go for serve-faviconIf you have you static path set, then just use the <link rel="icon" href="/images/favicon.ico" type="image/x-icon"> in your views. No need for anything else. Please make sure that you have your images folder inside the public folder.The code listed below works:Just make sure to refresh your browser or clear your cache.In app.js:Assuming the icon resides in "/public/images/favicon.ico" add next link in html's head:This worked fine in a project auto-generated with the command:Install express-favicon middleware:Use it like this:You must install middleware to serve the favicon.I tried this just now:and got this error message back:I think we can take that as being definitive.step 0: add below code to app.js or index.js

app.use("/favicon.ico", express.static('public/favicon.ico'));  

step 1: download icon from here https://icons8.com/ or create your own

step 2: go to https://www.favicongenerator.com/ 

step 3: upload the downloaded icon.png file > set 16px > create favicon > download 

step 4: go to downloads folder, you'll find [.ico file], rename it as favicon.ico 

step 5: copy favicon.ico in public directory you created

step 6: add below code to your .pug file under head tag, below title tag step 7: save > restart server > close browser > reopen browser > favicon appears 

NOTE: you can use name other than favicon,             but make sure you change the name in code and 

      in the public folder.

Concatenating variables and strings in React

lost9123193

[Concatenating variables and strings in React](https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react)

Is there a way to incorporate React's curly brace notation and an href tag? Say we have the following value in the state:and the following HTML attributes on a tag:Is there a way I can add the id state to the HTML attribute to get something like this:Which will yield:

2016-09-16 02:43:48Z

Is there a way to incorporate React's curly brace notation and an href tag? Say we have the following value in the state:and the following HTML attributes on a tag:Is there a way I can add the id state to the HTML attribute to get something like this:Which will yield:You're almost correct, just misplaced a few quotes. Wrapping the whole thing in regular quotes will literally give you the string #demo + {this.state.id} - you need to indicate which are variables and which are string literals. Since anything inside {} is an inline JSX expression, you can do:This will use the string literal #demo and concatenate it to the value of this.state.id. This can then be applied to all strings. Consider this:And this:This will yield:You can also use ES6 string interpolation/template literals with ` (backticks) and ${expr} (interpolated expression), which is closer to what you seem to be trying to do:This will basically substitute the value of this.state.id, concatenating it to #demo. It is equivalent to doing: "#demo" + this.state.id.the best way to concat props/variables:exampleData=example1=example2=I recommend second example , it is faster.

Why does !{}[true] evaluate to true in JavaScript?

user2430508

[Why does !{}[true] evaluate to true in JavaScript?](https://stackoverflow.com/questions/19702805/why-does-true-evaluate-to-true-in-javascript)

{}[true] is [true] and ![true] should be false.So why does  !{}[true] evaluate to true?

2013-10-31 09:34:05Z

{}[true] is [true] and ![true] should be false.So why does  !{}[true] evaluate to true?I believe that's because plain {}[true] is parsed as an empty statement block (not an object literal) followed by an array containing true, which is true.On the other hand, applying the ! operator makes the parser interpret {} as an object literal, so the following {}[true] becomes a member access that returns undefined, and !{}[true] is indeed true (as !undefined is true).Because {}[true] does not return true, but undefined, and undefined is evaluated as false:http://jsfiddle.net/67GEu/Becauseevaluates to undefined, and !undefined is true.From @schlingel:true is used as key and {} as hash map. There doesn't exist an property with the key true so it returns undefined. Not undefined is true, as expected.Console session (Node.js [0.10.17]):However, in the Google Chrome console:So, no inconsistencies. You're probably using an old version of the JavaScript VM. For those who need further evidence:With Firefox, it also evaluates to true:The reason for the confusion is down to a misunderstanding of your first assertion:{}[true] is [true]What you're seeing when you run it is the result of an ambiguity. Javascript has a defined set of rules as to how to handle ambiguities like this, and in this case, it breaks what you see as a signle statement down into two separate statements.So Javascript sees the above code as two separate statements: Firstly, there is a {}, and then there is an entirely separate [true]. The second statement is what is giving you the result [true]. The first statement {} is effetively entirely ignored.You can prove this by trying the following:ie wrapping the whole thing in brackets to force the interpreter to read it as a single statement.Now you'll see that the actual value of your statement is undefined. (this will also help us later to understand the next part)Now we know that the initial part of your question is a red herring, so let's move onto the final part of the question:Here, we have the same statement, but with a ! appended to the front of it.In this case, Javascript's rules tell it to evaluates the entire thing as a single statement.Refer back to what happened when we wrapped the earlier statement in brackets; we got undefined. This time, we are effectively doing the same thing, but putting a ! in front of it. So your code can be simplified as !undefined, which is true.Hopefully that explains it a bit.It is a complex beast, but the lesson to learn here is to use brackets around your statements when evaluating them in the console, to avoid spurious results like this.{}[true] is undefined. To find that write this:or simply:We know that !undefined is true.From @Benjamin Gruenbaum's answer:More information can be found in this question.The answers here are good, here's a breakdown in pseudo-code:This happens because {} in your meaning is not literal presentation of Object, but empty scope ( or empty code block ):It just evaluates code inside scope and then shows you your array.And from your Just converts to int this scope and return same array true. There is no bool checks in this code.And if you will try to check result from {}[true] you will get your false:As there is no more any scope.So ! in your question do the same as:You're not reversing the value of it. Check this out: Why is !true ? 'false' : 'true' returning 'true'?First, let's have some fun!:1) Here, the {} is parsed as an empty code block. Without an assign, negation, grouping (with parentheses) or any syntax which indicates to the parser that this {} is an object literal, the default assumption is to think it is simply a useless empty block. This is a proof of this behavior:The code above will show the alert normally, and will be evaluated as [true], in the same way {}[true] is.A block-type statement doesn't need a semicolon after it.For instance:Both alerts are shown.So, we can see that an empty block statement, without a semicolon, is valid and simply does nothing. This way, when you enter {}[true] in the Developer Tools (or Firebug) Console, the evaluated value will be the value of the last expression statement. In this case, the last expression statement is [true].2) In an assignment context, the parser will make sure that {} is an object literal. When you do var a = {}[true], you remove any ambiguity and tip the parser off that {} is not a block statement.

So, here, you're trying to get a value with a key "true" from an empty object. Obviously, there's no key-value pair with this key name. This way, the a variable is undefined.ECMAScript 5 allows object keys to be reserved words. So, the following keys are legal:3) The same explanation of example 1. But...

If the { b: 12345 } part is treated as a block statement, what's the type of the b: 12345 statement??... (?????)It's a label statement, you already saw it before... It's used in loops and in switch. Here are a few interesting links about label statements: 1, (2)[Best way to break from nested loops in Javascript?, (3)[How to break nested loops in javascript?.NOTE: Just try to evaluate this:Label statements can't be separeted by the comma operator, you would need to separate them with a semicolon. So this is valid: {a: 1; b: 2}4) See the explanations for the examples 1 and 3...5) One more time, we have a { b: 12345 } being treated as a code block, and you're trying to access a property of a code block by using the dot notation, and obviously, this is not allowed, and the parser throws an "Unexpected token :" exception.6) The code is almost identical to the above example, but by surrounding the { b: 12345 } statement with the expression grouping operator, the parser will know that is an object. This way, you'll be able to access the "b" property normally.7) Remember the example 2, we have an assignment here, the parser knows that { b: 12345 } is an object.8) Identical to the above example, but instead of the dot notation, here we're using the bracket notation.9) I already said that this "identifier: value" syntax inside a block statement is a label. But, you also have to know that a label name can't be a reserved keyword (the opposite of object property names). When we tried to define a label called "true", we got a SyntaxError.10) Again, we're dealing with an object. No problems using reserved words here. =)11) Finally, we have this: !{}[true]Let's separate the things here: a)  By doing a negation, we're informing to the parser that the {} is an object. b) As shown in the example 2, a {} object doesn't have a property called true, so this expression will evaluate to undefined.c) The final result is the negation of undefined value. Javascript performs implicity type conversion, and undefined value is falsy. d) So, the negation of false is... true!

Running NPM scripts sequentially

Rice

[Running NPM scripts sequentially](https://stackoverflow.com/questions/39172536/running-npm-scripts-sequentially)

Let's say I have What NPM command can I run to let all of these scripts launch sequentially. When I use pre/post fixing they launch sequentially but they don't wait for the parent script to finish before executing. I am assuming the only solution is like: How do I get Gulp tasks to fire sequentially when firing shell commands in an async.series helper function? ? I know this can be done with Gulp but I would like to stick with NPM for now to explore its capabilities. Thanks for any help!

2016-08-26 18:22:26Z

Let's say I have What NPM command can I run to let all of these scripts launch sequentially. When I use pre/post fixing they launch sequentially but they don't wait for the parent script to finish before executing. I am assuming the only solution is like: How do I get Gulp tasks to fire sequentially when firing shell commands in an async.series helper function? ? I know this can be done with Gulp but I would like to stick with NPM for now to explore its capabilities. Thanks for any help!Invoke these scripts via npm run and chain them with double ampersand &&:Explanation:Following @Mobiletainment's great answer, you can also use npm-run-all to make the command much shorter and much more readable. In your case:run-s is a shortcut npm-run-all provides, that runs all the given npm-scripts sequentially, hence the -s (run-s is a shorter version of npm-run-all -s).You could just string them into another script. "start": "pre-build && build_logic && post_build && exit"You can prefix your scripts pre and post so they will execute automatically:then run npm run buildyou can try:You can use npm-run-all to combine multiple commands in a lot of different waysFor example, if you had the following scripts in your package.json:You could run them all sequentially like this:See this question for how to run multiple npm commands in parallel

JavaScript editor within Eclipse [closed]

Dónal

[JavaScript editor within Eclipse [closed]](https://stackoverflow.com/questions/24678/javascript-editor-within-eclipse)

I'm looking for the best JavaScript editor available as an Eclipse plugin. I've been using Spket which is good. But, is there more better one?

2008-08-23 22:42:50Z

I'm looking for the best JavaScript editor available as an Eclipse plugin. I've been using Spket which is good. But, is there more better one?Disclaimer, I work at Aptana. I would point out there are some nice features for JS that you might not get so easily elsewhere. One is plugin-level integration of JS libraries that provide CodeAssist, samples, snippets and easy inclusion of the libraries files into your project; we provide the plugins for many of the more commonly used libraries, including YUI, jQuery, Prototype, dojo and EXT JS.Second, we have a server-side JavaScript engine called Jaxer that not only lets you run any of your JS code on the server but adds file, database and networking functionality so that you don't have to use a scripting language but can write the entire app in JS.Eclipse HTML Editor PluginI too have struggled with this totally obvious question.  It seemed crazy that this wasn't an extremely easy-to-find feature with all the web development happening in Eclipse these days.I was very turned off by Aptana because of how bloated it is, and the fact that it starts up a local web server (by default on port 8000) everytime you start Eclipse and you can't disable this functionality.  Adobe's port of JSEclipse is now a 400Mb plugin, which is equally insane.However, I just found a super-lightweight JavaScript editor called Eclipse HTML Editor Plugin, made by Amateras, which was exactly what I was looking for.Try the Vjet Javascript IDE from ebay (installation)Ganymede's version of WTP includes a revamped Javascript editor that's worth a try.  The key version numbers are Eclipse 3.4 and WTP 3.0.  See http://live.eclipse.org/node/569There once existed a plugin called JSEclipse that Adobe has subsequently sucked up and killed by making it available only by purchasing and installing FlexBuilder 3 (please someone prove me wrong). I found it to worked excellent but have since lost it since "upgrading" from Eclipse 3.4 to 3.4.1.The feature I liked most was Content Outline. The new release of Eclipse (Helios) has an especific package for javascript web development. I haven't tried it yet, but it certainly worth a look.Didn't use eclipse for a while, but there are ATF and Aptana.Oracle Workshop for WebLogic (formally BEA Workshop) has excellent support for JavaScript and for visually editing HTMLs. It support many servers, not only WebLogic, including Tomcat, JBoss, Resin, Jetty, and WebSphere.  It recently became free, check out my post about it. Given that it was an expensive product not long ago, I guess it's worth checking out.

What are the best practices for JavaScript error handling?

Joshua Cody

[What are the best practices for JavaScript error handling?](https://stackoverflow.com/questions/6484528/what-are-the-best-practices-for-javascript-error-handling)

I'm looking to start making my JavaScript a bit more error proof, and I'm finding plenty of documentation on using try, catch, finally, and throw, but I'm not finding a ton of advice from experts on when and where to throw errors.I'm also completely game for hearing of books that have great chapters or in-depth explanations of error-handling. Eloquent JavaScript touches on the matter, but isn't very prescriptive or opinionated about the issue. Thanks for any advice you can give!

2011-06-26 14:22:09Z

I'm looking to start making my JavaScript a bit more error proof, and I'm finding plenty of documentation on using try, catch, finally, and throw, but I'm not finding a ton of advice from experts on when and where to throw errors.I'm also completely game for hearing of books that have great chapters or in-depth explanations of error-handling. Eloquent JavaScript touches on the matter, but isn't very prescriptive or opinionated about the issue. Thanks for any advice you can give!An immensely interesting set of slides on Enterprise JavaScript Error Handling can be found at http://www.devhands.com/2008/10/javascript-error-handling-and-general-best-practices/In short it summarizes:The slides go into much more detail and most probably will give you some direction.UPDATEThe presentation mentioned above can be found here:

http://www.slideshare.net/nzakas/enterprise-javascript-error-handling-presentationNicholas Zakas of Yahoo! fame did a talk on Enterprise Error Handling (slides) at Ajax Experience 2008, in which he proposed something like this:A year later, Nicholas Zakas posted an update on his blog which included a clever pattern to inject error handling code automatically on your production environment (using aspect-oriented programming).When you start logging window.error calls, you're going to notice two things:Reducing the torrent of log entries is as simple as testing for severity and/or a random number before logging to the server:Handling the useless "window.error in undefined:0" errors depends on your site architecture, but can try identifying all Ajax calls and throwing an exception when something fails (possibly returning a stack trace using stacktrace.js).IHMO, you should use error handling in javascript like you do in several other languages (AFAIK: Python, Java).For better readability (and probably better performance, even though I am not sure it has a really big impact), you should use the try / catch block mostly on the following cases :Eventually, javascript experts may have other elements to give.my 2 cents to the box,Regards,MaxIn addition to the other answers: one important thing is to use context data available in JavaScript error objects and in the window.onerror function parameters.Things like the stacktrace (errorObject.stack), the filename, the line number and the column number.

Note that each browser has some differences...so do your best effort to get nice errors.There can even be problems with the console object itself.

I use a custom window.onerror function inspired by this one and a special function to trace any given standard error object inspired by this code.Another good point is to include the version of your web application somewhere close to the stacktrace (for quick and safe copy and pasting). You may also show errors more aggressively (alert...) in development mode as developers will not constantly monitor the browser console and may not see some of the problems.Also use avoid using throw 'My message', use throw new Error('My message'), you can even have custom errors, read this article.Always add some context to the errors (the version, the id of the object, some custom message, ...) and also make sure you make a distinction between external errors (some external data or force made your system fail) and internal errors/assertions (your own system messed up), read about 'Design by contract'.Here is a guide.Also think about using general error handling like interceptors your libs and frameworks:

What is「above-the-fold content」in Google Pagespeed?

Glipt

[What is「above-the-fold content」in Google Pagespeed?](https://stackoverflow.com/questions/18340402/what-is-above-the-fold-content-in-google-pagespeed)

Until recently, my site (www.heatexchangers.ca) scored 98% on Google Page Speed.  There were a couple of things I could do nothing about such as the query string from web fonts.  I was very happy with this as this represented all that I could do.Recently Google added something else that affects the page speed score and I now only get 89% on Page Speed and get this suggestion:The suggestion to fix this seems to involve trolling through all my .css and .js files and separating some parts of them and adding them inline to my html.  This is causing me some confusion as I was under the impression we must keep as much JS and CSS out of the HTML as possible.  What exactly is "Above the Fold" content?  If it is a few styles such as font, background colour etc; then I can see it might not be too big a deal to include inline.  I have not been able to find a list of exactly what this is.

2013-08-20 16:33:24Z

Until recently, my site (www.heatexchangers.ca) scored 98% on Google Page Speed.  There were a couple of things I could do nothing about such as the query string from web fonts.  I was very happy with this as this represented all that I could do.Recently Google added something else that affects the page speed score and I now only get 89% on Page Speed and get this suggestion:The suggestion to fix this seems to involve trolling through all my .css and .js files and separating some parts of them and adding them inline to my html.  This is causing me some confusion as I was under the impression we must keep as much JS and CSS out of the HTML as possible.  What exactly is "Above the Fold" content?  If it is a few styles such as font, background colour etc; then I can see it might not be too big a deal to include inline.  I have not been able to find a list of exactly what this is.This is because Google recently changed the page speed tool to better reflect an increasingly mobile web. Mobile data networks have different performance characteristics than wired or wifi so you need to do different things to optimize for them.Above-the-fold (ATF) is simply the first screen's worth--anything you don't need to scroll to see. Obviously, this varies depending on the device and its orientation, so you may need to generalize and maybe find some workable common options, maybe one targeting smartphones, one for tablets, and one for larger desktops.As for what CSS they are talking about, they are really intending all CSS needed to fully style whatever content is displayed ATF. To determine the load time of your ATF content, they are going to take a screen shot of the final version and compare that visually to the page as it loads and when it is alike enough, they'll consider that the point where the ATF content is loaded.This is a video presentation from Google on this subject:http://www.youtube.com/watch?v=YV1nKLWoARQThe emphasis is on getting users something to do within the first second. The reasoning behind putting the CSS for the ATF content directly into the HTML reflects their research on mobile data performance showing that if the CSS isn't there, it won't get loaded soon enough to be within the first second.They also provide links to tools that may be able to automate some of this. I have not tried them and YMMV.google page insights will tell you clearly how many % of css referring the content above the fold is being loaded too late and page could have been rendered earlier. Than you could move parts of css to achieve a green result.

i can do it for you:goo.gl/GsRxNca link from Google describing 'above the fold'

https://developers.google.com/speed/docs/insights/OptimizeCSSDeliveryThey refer to render-blocking js such as analytics or tracking code which is why they suggest placing those "load me prior to everything else" scripts in the footer as they will then be loaded once the user has the site on screen.

How to use lifecycle method getDerivedStateFromProps as opposed to componentWillReceiveProps

Andrew

[How to use lifecycle method getDerivedStateFromProps as opposed to componentWillReceiveProps](https://stackoverflow.com/questions/49617486/how-to-use-lifecycle-method-getderivedstatefromprops-as-opposed-to-componentwill)

It looks like componentWillReceiveProps is going to be completely phased out in coming releases, in favor of a new lifecycle method getDerivedStateFromProps:static getDerivedStateFromProps().Upon inspection, it looks like you are now unable to make a direct comparison between this.props and nextProps, like you can in componentWillReceiveProps. Is there any way around this?Also, it now returns an object. Am I correct to assume that the return value is essentially this.setState?Below is an example I found online: State derived from props/state.BeforeAfter

2018-04-02 19:24:33Z

It looks like componentWillReceiveProps is going to be completely phased out in coming releases, in favor of a new lifecycle method getDerivedStateFromProps:static getDerivedStateFromProps().Upon inspection, it looks like you are now unable to make a direct comparison between this.props and nextProps, like you can in componentWillReceiveProps. Is there any way around this?Also, it now returns an object. Am I correct to assume that the return value is essentially this.setState?Below is an example I found online: State derived from props/state.BeforeAfterAbout the removal of componentWillReceiveProps: you should be able to handle its uses with a combination of getDerivedStateFromProps and componentDidUpdate, see the React blog post for example migrations. And yes, the object returned by getDerivedStateFromProps updates the state similarly to an object passed to setState.In case you really need the old value of a prop, you can always cache it in your state with something like this:Anything that doesn't affect the state can be put in componentDidUpdate, and there's even a getSnapshotBeforeUpdate for very low-level stuff.UPDATE: To get a feel for the new (and old) lifecycle methods, the react-lifecycle-visualizer package may be helpful.As we recently posted on the React blog, in the vast majority of cases you don't need getDerivedStateFromProps at all.If you just want to compute some derived data, either:Here's the simplest "after" example:Check out this section of the blog post to learn more.As mentioned by Dan Abramov We actually use that approach with memoise one for any kind of proxying props to state calculations. Our code looks this wayThe benefits of it are that you don't need to code tons of comparison boilerplate inside getDerivedStateFromProps or componentWillReceiveProps and you can skip copy-paste initialization inside a constructor.NOTE:This approach is used only for proxying the props to state, in case you have some inner state logic it still needs to be handled in component lifecycles.

Add st, nd, rd and th (ordinal) suffix to a number

Antonio Vasilev

[Add st, nd, rd and th (ordinal) suffix to a number](https://stackoverflow.com/questions/13627308/add-st-nd-rd-and-th-ordinal-suffix-to-a-number)

I would like to dynamically generate a string of text based on a current day. So, for example, if it is day 1 then I would like my code to generate = "Its the <dynamic>1*<dynamic string>st</dynamic string>*</dynamic>".There are 12 days in total so I have done the following:UPDATEThis is the entire for loop as requested:

2012-11-29 13:53:13Z

I would like to dynamically generate a string of text based on a current day. So, for example, if it is day 1 then I would like my code to generate = "Its the <dynamic>1*<dynamic string>st</dynamic string>*</dynamic>".There are 12 days in total so I have done the following:UPDATEThis is the entire for loop as requested:The rules are as follows:The following JavaScript code (rewritten in Jun '14) accomplishes this:Sample output for numbers between 0-115:From Shopify(this is for positive integers, see below for other variations)Start with an array with the suffixes ["st", "nd", "rd"]. We want to map integers ending in 1, 2, 3 (but not ending in 11, 12, 13) to the indexes 0, 1, 2.Other integers (including those ending in 11, 12, 13) can be mapped to anything else—indexes not found in the array will evaluate to undefined. This is falsy in javascript and with the use of logical or (|| "th") the expression will return "th" for these integers, which is exactly what we want.The expression ((n + 90) % 100 - 10) % 10 - 1 does the mapping. Breaking it down:Allowing negative integers:In ES6 fat arrow syntax (anonymous function):An even shorter alternative for positive integers is the expressionSee this post for explanation.You can use the moment libraries local data functions.Code: You've only got 12 days? I'd be tempted to make it just a simple lookup array:then orBy splitting the number into an array and reversing we can easily check the last 2 digits of the number using array[0] and array[1]. If a number is in the teens array[1] = 1 it requires "th".I wrote this function to solve this problem:With this you can just put .addSuffix() to any number and it will result in what you want. For example:An alternative version of the ordinal function could be as follows:The variables are named more explicitly, uses camel case convention, and might be faster.I would just like to drop the canonical method in here, as nobody seems to know it.I wrote this simple function the other day.  Although for a date you don't need the larger numbers, this will cater for higher values too (1013th, 36021st etc...)function ordsfx(a){return["th","st","nd","rd"][(a=~~(a<0?-a:a)%100)>10&&a<14||(a%=10)>3?0:a]}See annotated version at https://gist.github.com/furf/986113#file-annotated-jsShort, sweet, and efficient, just like utility functions should be. Works with any signed/unsigned integer/float. (Even though I can't imagine a need to ordinalize floats)Here is another option.Notice the exception for the teens? Teens are so akward!Edit: Forgot about 11th and 12thI wanted to provide a functional answer to this question to complement the existing answer:we've created an array of the special values, the important thing to remember is arrays have a zero based index so ordinalSuffix[0] is equal to 'st'. Our function numberToOrdinal checks if the number ends in a teen number in which case append the number with 'th' as all then numbers ordinals are 'th'. In the event that the number is not a teen we pass the number to addSuffix which adds the number to the ordinal which is determined by if the number minus 1 (because we're using a zero based index) mod 10 has a remainder of 2 or less it's taken from the array, otherwise it's 'th'.sample output: Old one I made for my stuff...Strongly recommend the excellent date-fns library.  Fast, modular, immutable, works with standard dates.See date-fns docs: https://date-fns.org/v2.0.0-alpha.9/docs/formatI wrote this function for higher numbers and all test casesI strongly recommend this, it is super easy and straightforward to read. I hope it help?OUTPUTHere's a slightly different approach (I don't think the other answers do this). I'm not sure whether I love it or hate it, but it works!You can use1<sup>st</sup>

2<sup>nd</sup>

3<sup>rd</sup>

4<sup>th</sup>for positioning the suffix

Find out whether Chrome console is open

r0skar

[Find out whether Chrome console is open](https://stackoverflow.com/questions/7798748/find-out-whether-chrome-console-is-open)

I am using this little script to find out whether Firebug is open:And it works well. Now I was searching for half an hour to find a way to detect whether Google Chrome's built-in web developer console is open, but I couldn't find any hint.This:doesn't work.EDIT:So it seems that it is not possible to detect whether the Chrome console is open. But there is a "hack" that works, with some drawbacks:So, I am gonna choose Unsigned´s answer for now, but if some1 comes up with a brilliant idea, he is welcome to still answer and I change the selected answer! Thanks!

2011-10-17 19:47:25Z

I am using this little script to find out whether Firebug is open:And it works well. Now I was searching for half an hour to find a way to detect whether Google Chrome's built-in web developer console is open, but I couldn't find any hint.This:doesn't work.EDIT:So it seems that it is not possible to detect whether the Chrome console is open. But there is a "hack" that works, with some drawbacks:So, I am gonna choose Unsigned´s answer for now, but if some1 comes up with a brilliant idea, he is welcome to still answer and I change the selected answer! Thanks!Leaving these previous answers here for historical context. Currently Muhammad Umer's approach works on Chrome 78, with the added advantage of detecting both close and open events.Credit to Overcl9ck's comment on this answer. Replacing the regex /./ with an empty function object still works.Since the original asker doesn't seem to be around anymore and this is still the accepted answer, adding this solution for visibility. Credit goes to Antonin Hildebrand's comment on zswang's answer. This solution takes advantage of the fact that toString() is not called on logged objects unless the console is open.Update: console.profiles has been removed from Chrome. This solution no longer works.Thanks to Paul Irish for pointing out this solution from Discover DevTools, using the profiler:This other option can detect the docked inspector being opened, after the page loads, but will not be able to detect an undocked inspector, or if the inspector was already open on page load. There is also some potential for false positives.Chrome 65+ (2018)demo: https://jsbin.com/cecuzeb/edit?output (Update at 2018-03-16)package: https://github.com/zswang/jdetectsWhen printing「Element」Chrome developer tools will get its idAnother version (from comments)Print a regular variable：I created devtools-detect which detects when DevTools is open:You can also listen to an event:It doesn't work when DevTools is undocked. However, works with the Chrome/Safari/Firefox DevTools and Firebug.I found a way to tell if the Chrome Console is opened or not.

It’s still a hack but it’s way more accurate and will work weather the console is undocked or not.Basically running this code with the console closed takes about ~100 microseconds and while the console is opened it takes about twice as much ~200 microseconds.(1 millisecond = 1000 microsecond)I’ve written more about it here.Demo is here.Update:@zswang has found the current best solution - check out his answerVery Reliable hackBasically set a getter on property and log it in console. Apparently the thing gets accessed only when console is open. https://jsfiddle.net/gcdfs3oo/44/If your goal is to jam the developer tools, try this (I found a more complicated version of it at a place where JS code was obfuscated, it's very annoying):There is a tricky way to check it for extensions with 'tabs' permission:Also you can check if it open for your page:I wrote a blog post about this: http://nepjua.org/check-if-browser-console-is-open/It can detect whether it's docked or undockedThe Chrome developer tools is really just a part of WebKit's WebCore library. So this question  applies to Safari, Chrome, and any other WebCore consumers.If a solution exists, it'll be based off a difference in the DOM when the WebKit web inspector is open and when it's closed. Unfortunately, this is a kind of a chicken and egg problem because we can't use the inspector to observe the DOM when the inspector is closed.What you may be able to do is write a bit of JavaScript to dump the entire DOM tree. Then run it once when the inspector is open, and once when the inspector is closed. Any difference in the DOM is probably a side-effect of the web inspector, and we may be able to use it to test if the user is inspecting or not.This link is a good start for a DOM dumping script , but you'll want to dump the entire DOMWindow object, not just document.Update:Looks like there's a way to do this now. Check out Chrome Inspector DetectorAlso you can try this: https://github.com/sindresorhus/devtools-detectAs for Chrome/77.0.3865.75 a version of 2019 not works. toString invokes immediately without Inspector opening.If you are developers who are doing stuff during development. Check out this Chrome extension. It helps you detect when Chrome Devtoos is opened or closed.https://chrome.google.com/webstore/detail/devtools-status-detector/pmbbjdhohceladenbdjjoejcanjijoaa?authuser=1This extension helps Javascript developers detect when Chrome Devtools is open or closed on current page.

When Chrome Devtools closes/opens, the extension will raise a event named 'devtoolsStatusChanged' on window.document element. This is example code:Some answers here will stop working in Chrome 65. Here's a timing attack alternative that works pretty reliably in Chrome, and is much harder to mitigate than the toString() method. Unfortunately it's not that reliable in Firefox.

Javascript Equivalent to C# LINQ Select

Chris Nevill

[Javascript Equivalent to C# LINQ Select](https://stackoverflow.com/questions/18936774/javascript-equivalent-to-c-sharp-linq-select)

Following this question here :I've created some checkboxes using knockout that allow selection from an array.

working fiddle taken from above post:Is there a simple way of creating an array of just the fruit's ID's?I'm more at home with C# where I would do something along the lines of selectedFruits.select(fruit=>fruit.id);Is there some method/ready made function for doing something similar with javascript/jquery?  Or would the simplest option be to loop through the list and create a second array?

I intend to post the array back to the server in JSON so am trying to minimize the data sent.

2013-09-21 19:34:47Z

Following this question here :I've created some checkboxes using knockout that allow selection from an array.

working fiddle taken from above post:Is there a simple way of creating an array of just the fruit's ID's?I'm more at home with C# where I would do something along the lines of selectedFruits.select(fruit=>fruit.id);Is there some method/ready made function for doing something similar with javascript/jquery?  Or would the simplest option be to loop through the list and create a second array?

I intend to post the array back to the server in JSON so am trying to minimize the data sent.Yes, Array.map() or $.map() does the same thing.http://jsfiddle.net/NsCXJ/1/Since array.map isn't supported in older browsers, I suggest that you stick with the jQuery method.If you prefer the other one for some reason you could always add a polyfill for old browser support.You can always add custom methods to the array prototype as well:An extended version that uses the function constructor if you pass a string. Something to play around with perhaps:http://jsfiddle.net/aL85j/Update:Since this has become such a popular answer, I'm adding similar my where() +  firstOrDefault(). These could also be used with the string based function constructor approach (which is the fastest), but here is another approach using an object literal as filter:Usage:Here is a jsperf test to compare the function constructor vs object literal speed. If you decide to use the former, keep in mind to quote strings correctly.My personal preference is to use the object literal based solutions when filtering 1-2 properties, and pass a callback function for more complex filtering.I'll end this with 2 general tips when adding methods to native object prototypes:I know it is a late answer but it was useful to me! Just to complete, using the $.grep function you can emulate the linq where().Linq:Javascript:Since you're using knockout, you should consider using the knockout utility function arrayMap() and it's other array utility functions.Here's a listing of array utility functions and their equivalent LINQ methods:So what you could do in your example is this:If you want a LINQ like interface in javascript, you could use a library such as linq.js which offers a nice interface to many of the LINQ methods.The ES6 way:also at: https://jsfiddle.net/52dpucey/You can also try linq.jsIn linq.js yourwill be I have build a Linq library for TypeScript under TsLinq.codeplex.com that you can use for plain javascript too. That library is 2-3 times faster than Linq.js and contains unit tests for all Linq methods. Maybe you could review that one.Take a peek at underscore.js which provides many linq like functions. In the example you give you would use the map function.You can try manipula package, which implement all of C# LINQ methods and save its syntax:

https://github.com/litichevskiydv/manipulahttps://www.npmjs.com/package/manipulaYour example selectedFruits.select(fruit=>fruit.id);

will be implemented with manipula asDinqyjs has a linq-like syntax and provides polyfills for functions like map and indexOf, and has been designed specifically for working with arrays in Javascript.I am answering the title of the question rather than the original question which was more specific.With the new features of Javascript like iterators and generator functions and objects, something like LINQ for Javascript becomes possible. Note that linq.js, for example, uses a completely different approach, using regular expressions, probably to overcome the lack of support in the language at the time.With that being said, I've written a LINQ library for Javascript and you can find it at https://github.com/Siderite/LInQer. Comments and discussion at https://siderite.dev/blog/linq-in-javascript-linqer.From previous answers, only Manipula seems to be what one would expect from a LINQ port in Javascript.

Extending Error in Javascript with ES6 syntax & Babel

Karel Bílek

[Extending Error in Javascript with ES6 syntax & Babel](https://stackoverflow.com/questions/31089801/extending-error-in-javascript-with-es6-syntax-babel)

I am trying to extend Error with ES6 and Babel. It isn't working out.The Error object never get the right message set.Try in Babel REPL.Now I have seen a few solutions on SO (for example here), but they all seem very un-ES6-y. How to do it in a nice, ES6 way? (That is working in Babel)

2015-06-27 14:28:27Z

I am trying to extend Error with ES6 and Babel. It isn't working out.The Error object never get the right message set.Try in Babel REPL.Now I have seen a few solutions on SO (for example here), but they all seem very un-ES6-y. How to do it in a nice, ES6 way? (That is working in Babel)Based on Karel Bílek's answer, I'd make a small change to the constructor:This will print MyError in the stack, and not the generic Error.It will also add the error message to the stack trace - which was missing from Karel's example.It will also use captureStackTrace if it's available.With Babel 6, you need transform-builtin-extend (npm) for this to work.Combining this answer, this answer and this code, I have made this small "helper" class, that seems to work fine.Try in REPLTo finally put this to rest. In Babel 6 it is explicit that the developers do not support extending from built in. Although this trick will not help with things like Map, Set, etc. it does work for Error. This is important as one of the core ideas of a language that can throw an exception is to allow custom Errors. This is doubly important as Promises become more useful since they to are designed to reject an Error.The sad truth is you still need to perform this the old way in ES2015.Example in Babel REPLOn the other hand there is a plugin for Babel 6 to allow this.https://www.npmjs.com/package/babel-plugin-transform-builtin-extendUpdate: (as of 2016-09-29) After some testing it appears that babel.io does not properly account for all the asserts (extending from a custom extended Error). But in Ember.JS extending Error works as expected: https://ember-twiddle.com/d88555a6f408174df0a4c8e0fd6b27ceEdit: Breaking changes in Typescript 2.1Editing Lee Benson original answer a little bit works for me. This also adds stack and additional methods of ExtendableError class to the instance. With the latest changes in babel 6, I find transform-builtin-extend no longer working. I ended up using this mixed approach:andAs a result all these tests pass:QuotingAlthough the above codes cannot output the stack trace unless this.stack = (new Error()).stack; or Error.captureStackTrace(this, this.constructor.name); is invoked in Babel. IMO, it maybe one issue in here.Actually, the stack trace can be output under Chrome console and Node.js v4.2.1 with this code snippets.Output of Chrome console.Output of Node.jsIn addition to @zangw answer, you can define your errors like this:which will throws correct name, message and stacktrace:That class MyError extends Error {…} syntax is correct.Notice that transpilers still do have problems with inheriting from builtin objects. In your case,seems to fix the problem.Given this the accepted answer no longer works you could always use a factory as an alternative (repl):As @sukima mentions, you cannot extend native JS. The OP's question cannot be answered. Similar to Melbourne2991's answer, I did used a factory rather, but followed MDN's recommendation for customer error types.I prefer more strong syntax than described above. Additional methods at error type will help you to create pretty console.log or something else.To test this code you can run something similar:Extending of CustomError type are welcome. It is possible to add some specific functionality to the extended type or override existing. For example.This works for me:Not using Babel, but in plain ES6, the following seems to work fine for me:Testing from REPL:As you can see, the stack contains both the error name and message. I'm not sure if I'm missing something, but all the other answers seem to over-complicate things.I improved a little the solution of @Lee Benson this way:extendableError.jsan example of an errorThen you are able to group errors while having option specifiers to decide what to do differently in some of your application specific situations

Explain ExtJS 4 event handling

jrharshath

[Explain ExtJS 4 event handling](https://stackoverflow.com/questions/7260134/explain-extjs-4-event-handling)

I've recently started learning ExtJS, and have trouble understanding how to handle Events. I have no experience of any previous versions of ExtJS. From reading various manuals, guides and documentation pages, I've figured out how to use it, but I'm not clear on how it works. I've found several tutorials for older versions of ExtJS, but I'm not sure how applicable they are in ExtJS 4.I'm specifically looking on the "final word" on things likeFor example, this question leads me to believe that an event handler can receive quite a few arguments. I've seen other tutorials where there are just two arguments to the handler. What changes?

2011-08-31 16:18:45Z

I've recently started learning ExtJS, and have trouble understanding how to handle Events. I have no experience of any previous versions of ExtJS. From reading various manuals, guides and documentation pages, I've figured out how to use it, but I'm not clear on how it works. I've found several tutorials for older versions of ExtJS, but I'm not sure how applicable they are in ExtJS 4.I'm specifically looking on the "final word" on things likeFor example, this question leads me to believe that an event handler can receive quite a few arguments. I've seen other tutorials where there are just two arguments to the handler. What changes?Let's start by describing DOM elements' event handling.First of all you wouldn't want to work with DOM node directly. Instead you probably would want to utilize Ext.Element interface. For the purpose of assigning event handlers, Element.addListener and Element.on (these are equivalent) were created. So, for example, if we have html:and we want add click event handler.

Let's retrieve Element:Now let's check docs for click event. It's handler may have three parameters:Knowing all this stuff we can assign handler:Widgets event handling is pretty much similar to DOM nodes event handling.  First of all, widgets event handling is realized by utilizing Ext.util.Observable mixin. In order to handle events properly your widget must containg Ext.util.Observable as a mixin. All built-in widgets (like Panel, Form, Tree, Grid, ...) has Ext.util.Observable as a mixin by default.For widgets there are two ways of assigning handlers. The first one - is to use on method (or addListener). Let's for example create Button widget and assign click event to it. First of all you should check event's docs for handler's arguments:Now let's use on:The second way is to use widget's listeners config:Notice that Button widget is a special kind of widgets. Click event can be assigned to this widget by using handler config:First of all you need to register an event using addEvents method:Using the addEvents method is optional. As comments to this method say there is no need to use this method but it provides place for events documentation.To fire your event use fireEvent method:arg1, arg2, arg3, /* ... */ will be passed into handler. Now we can handle your event:It's worth mentioning that the best place for inserting addEvents method call is widget's initComponent method when you are defining new widget:To prevent bubbling you can return false or use Ext.EventObject.preventDefault(). In order to prevent browser's default action use Ext.EventObject.stopPropagation().For example let's assign click event handler to our button. And if not left button was clicked prevent default browser action:In addition to the very great answer above I want to mention application wide events which can be very useful in an MVC setup to enable communication between controllers. (extjs4.1)Lets say we have a controller Station (Sencha MVC examples) with a select box:When the select box triggers a change event, the function onStationSelect is fired.Within that function we see:This creates and fires an application wide event that we can listen to from any other controller.Thus in another controller we can now know when the station select box has been changed. This is done through listening to this.application.on as follows:If the selectbox has been changed we now fire the function onStationStart in the controller Song also ...From the Sencha docs:Application events are extremely useful for events that have many controllers. Instead of listening for the same view event in each of these controllers, only one controller listens for the view event and fires an application-wide event that the others can listen for. This also allows controllers to communicate with one another without knowing about or depending on each other’s existence.In my case: Clicking on a tree node to update data in a grid panel.Update 2016 thanks to @gm2008 from the comments below:In terms of firing application-wide custom events, there is a new method now after ExtJS V5.1 is published, which is using Ext.GlobalEvents. When you fire events, you can call: Ext.GlobalEvents.fireEvent('custom_event');When you register a handler of the event, you call: Ext.GlobalEvents.on('custom_event', function(arguments){/* handler codes*/}, scope);This method is not limited to controllers. Any component can handle a custom event through putting the component object as the input parameter scope.Found in Sencha Docs: MVC Part 2One more trick for controller event listeners.You can use wildcards to watch for an event from any component:Just wanted to add a couple of pence to the excellent answers above:

If you are working on pre Extjs 4.1, and don't have application wide events but need them, I've been using a very simple technique that might help: 

Create a simple object extending Observable, and define any app wide events you might need in it. You can then fire those events from anywhere in your app, including actual html dom element and listen to them from any component by relaying the required elements from that component.Then you can, from any other component: And fire them from any component or dom element:Just two more things I found helpful to know, even if they are not part of the question, really.You can use the relayEvents method to tell a component to listen for certain events of another component and then fire them again as if they originate from the first component. The API docs give the example of a grid relaying the store load event. It is quite handy when writing custom components that encapsulate several sub-components.The other way around, i.e. passing on events received by an encapsulating component mycmp to one of its sub-components subcmp, can be done like this

How to simulate a mouse click using JavaScript?

Nok Imchen

[How to simulate a mouse click using JavaScript?](https://stackoverflow.com/questions/6157929/how-to-simulate-a-mouse-click-using-javascript)

I know about the document.form.button.click() method. However, I'd like to know how to simulate the onclick event.I found this code somewhere here on Stack Overflow, but I don't know how to use it :(How do I fire a mouse click event using JavaScript?

2011-05-27 21:33:48Z

I know about the document.form.button.click() method. However, I'd like to know how to simulate the onclick event.I found this code somewhere here on Stack Overflow, but I don't know how to use it :(How do I fire a mouse click event using JavaScript?(Modified version to make it work without prototype.js)You can use it like this:Note that as a third parameter you can pass in 'options'. The options you don't specify are taken from the defaultOptions (see bottom of the script). So if you for example want to specify mouse coordinates you can do something like:You can use a similar approach to override other default options.Credits should go to kangax. Here's the original source (prototype.js specific).Here's a pure JavaScript function which will simulate a click (or any mouse event) on a target element:Here's a working example: http://www.spookandpuff.com/examples/clickSimulation.htmlYou can simulate a click on any element in the DOM. Something like simulatedClick(document.getElementById('yourButtonId')) would work.You can pass in an object into options to override the defaults (to simulate which mouse button you want, whether Shift/Alt/Ctrl are held, etc. The options it accepts are based on the MouseEvents API.I've tested in Firefox, Safari and Chrome. Internet Explorer might need special treatment, I'm not sure.An easier and more standard way to simulate a mouse click would be directly using the event constructor to create an event and dispatch it.Demo: http://jsfiddle.net/DerekL/932wyok6/This works on all modern browsers. For old browsers including IE,  MouseEvent.initMouseEvent will have to be used unfortunately though it's deprecated.From the Mozilla Developer Network (MDN) documentation, HTMLElement.click() is what you're looking for. You can find out more events here.Based on Derek's answer, I verified thatworks as expected even with key modifiers. And this is not a deprecated API, as far as I can see. You can verify on this page as well.You can use elementFromPoint:supported in all browsers: https://caniuse.com/#feat=element-from-pointJavaScript CodeHTML Code

Coding Style Guide for node.js apps? [closed]

alienhard

[Coding Style Guide for node.js apps? [closed]](https://stackoverflow.com/questions/5495984/coding-style-guide-for-node-js-apps)

Is there a (or several) coding style guide for node.js? If not, what are the emerging styles used by the top open-source node projects?I'm looking for a guide (or several guides) along the lines of PEP 8, the canonical Coding Style Guide for Python. I've seen various JavaScript guides not worth linking here (mostly old and targeted at client-side JavaScript). I found one interesting node.js style guide.A coding style guide, or coding conventions, should include (but is not limited to):This topic obviously is highly subjective, but I think it's an important step of a community to establish a common and widely accepted coding style in the process of getting mature. Also, it's not all just about taste. In particular, rules like "use === instead of ==" have a direct influence on code quality.

2011-03-31 06:21:42Z

Is there a (or several) coding style guide for node.js? If not, what are the emerging styles used by the top open-source node projects?I'm looking for a guide (or several guides) along the lines of PEP 8, the canonical Coding Style Guide for Python. I've seen various JavaScript guides not worth linking here (mostly old and targeted at client-side JavaScript). I found one interesting node.js style guide.A coding style guide, or coding conventions, should include (but is not limited to):This topic obviously is highly subjective, but I think it's an important step of a community to establish a common and widely accepted coding style in the process of getting mature. Also, it's not all just about taste. In particular, rules like "use === instead of ==" have a direct influence on code quality.I'd review the coding standards checked by JSLint or look at the author of NPM (Isaac Shlueter's) coding standards.You could also look at the style used by notable Node.JS coders:I'll throw mine in there for good measure ;)Edit: Suggestions from @alienhardIMO there's a few golden rules you should follow:Indentation, spacing between braces and keywords and semicolon placement are all a matter of preference.There's a new standard in town.Use Standard Style.You can learn a lot of good coding style practices from client side oriented JavaScript guides (most of them apply also to node.js in general since the difference between client and server side is mostly in libraries and not in language itself). For example JavaScript Patterns book dedicates to this topic some parts of the Chapter 2. Also Douglas Crockford's website, book and videos are a must see materials in order to adopt JavaScript specific coding styles and best practices I would say.When using node from the terminal, it's useful for your source code to use spaces for indentation. Otherwise, the "error here" caret won't line up.With tabs:With spaces:This might be a Mac only issue, but I would suspect not.It has been a while since I asked this question... and in the meantime I've found this excellent JavaScript guide:Principles of Writing Consistent, Idiomatic JavaScripthttps://github.com/rwldrn/idiomatic.js/Airbnb has a quite good Javascript style guide

https://github.com/airbnb/javascriptFor Coffee-Script, where bad indents means compilation errorsusepopular coffee projects, zombie, brunch uses this setup for indentations.Edit:Actually, just use this! https://github.com/paulmillr/code-style-guides (one of the main contributors to brunch)

Convert camelCaseText to Sentence Case Text

HyderA

[Convert camelCaseText to Sentence Case Text](https://stackoverflow.com/questions/7225407/convert-camelcasetext-to-sentence-case-text)

How can I convert a string either like 'helloThere' or 'HelloThere' to 'Hello There' in JavaScript?

2011-08-29 02:03:25Z

How can I convert a string either like 'helloThere' or 'HelloThere' to 'Hello There' in JavaScript?capitalize the first letter - as an example.Note the space in " $1".EDIT: added an example of capitalization of the first letter. Of course, in case the first letter is already capital - you would have a spare space to remove.Alternatively using lodash:Example:Lodash is a fine library to give shortcut to many everyday js tasks.There are many other similar string manipulation functions such as camelCase, kebabCase etc.I had a similar problem and dealt with it like this:For a more robust solution:http://jsfiddle.net/PeYYQ/Input:Output:Example without side effects.In ES6The best string I've found for testing camel-case-to-title-case functions is this ridiculously nonsensical example, which tests a lot of edge cases. To the best of my knowledge, none of the previously posted functions handle this correctly:ToGetYourGEDInTimeASongAboutThe26ABCsIsOfTheEssenceButAPersonalIDCardForUser456InRoom26AContainingABC26TimesIsNotAsEasyAs123ForC3POOrR2D2Or2R2DThis should be converted to:To Get Your GED In Time A Song About The 26 ABCs Is Of The Essence But A Personal ID Card For User 456 In Room 26A Containing ABC 26 Times Is Not As Easy As 123 For C3PO Or R2D2 Or 2R2DIf you want just a simple function that handles cases like the one above (and more cases than many of the previously answers), here's the one I wrote. This code isn't particularly elegant or fast, but it's simple, understandable, and works.An online runnable example is on jsfiddle, or you can view the output of the snippet below in your console: Alternately, as user Barno suggested, using SugarJS is an easy solution if you don't mind pulling in that library. I am not sure if it handles the test string I describe above, however; I haven't tried it on that input.Here's my version of it. It adds a space before every UpperCase english letter that comes after a lowercase english letter and also capitalizes the first letter if needed:For example:

thisIsCamelCase --> This Is Camel Case

this IsCamelCase --> This Is Camel Case

thisIsCamelCase123 --> This Is Camel Case123Ok, I'm a few years late to the game, but I had a similar question, and I wanted to make a one-replace solution for every possible input. I must give most of the credit to @ZenMaster in this thread and @Benjamin Udink ten Cate in this thread.

Here's the code:It has three clauses, all using lookahead to prevent the regex engine from consuming too many characters:This question was at the top of my search results, so hopefully I can save others some time!Based on one of the examples above I came up with this:It works for me because it uses .trim() to handle the edge case where the first letter is capitalized and you end up with a extra leading space. Reference:

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/TrimYou can use a function like this:Code with a bunch of test strings here: http://jsfiddle.net/jfriend00/FWLuV/.Alternate version that keeps leading spaces here: http://jsfiddle.net/jfriend00/Uy2ac/.This implementation takes consecutive uppercase letters and numbers in consideration.try this libraryhttp://sugarjs.com/api/String/titleizeNone of the answers above worked perfectly for me, so had to come with own bicycle:Test cases:This works for me check this outI think this can be done just with the reg exp /([a-z]|[A-Z]+)([A-Z])/g and replacement "$1 $2".ILoveTheUSADope -> I Love The USA DopeI didn't try everyone's answer, but the few solutions I tinkered with did not match all of my requirements.I was able to come up with something that did...Below is link which demonstrates camel case string to sentence string using regex.myCamelCaseSTRINGToSPLITDemomy  Camel  Case STRING To SPLIT DemoThis is regex for conversion of camel case to sentence textwith $1 $2 as subsitution.Click to view the conversion on regexInput

javaScriptOutput

Java ScriptAdding yet another ES6 solution that I liked better after not being happy with a few thoughts above.https://codepen.io/902Labs/pen/mxdxRv?editors=0010#0

Create array of all integers between two numbers, inclusive, in Javascript/jQuery [duplicate]

40 Degree Day

[Create array of all integers between two numbers, inclusive, in Javascript/jQuery [duplicate]](https://stackoverflow.com/questions/8069315/create-array-of-all-integers-between-two-numbers-inclusive-in-javascript-jquer)

Say I have the following checkbox:To get the two numbers that define the boundaries of range I'm looking for, I use the following jQuery:How do I then create an array that contains all integers between lowEnd and highEnd, including lowEnd and highEnd themselves? For this specific example, obviously, the resulting array would be:

2011-11-09 17:52:33Z

Say I have the following checkbox:To get the two numbers that define the boundaries of range I'm looking for, I use the following jQuery:How do I then create an array that contains all integers between lowEnd and highEnd, including lowEnd and highEnd themselves? For this specific example, obviously, the resulting array would be:In JavaScript ES6:For completeness, here it is with an optional step parameter.I would use range-inclusive from npm in an actual project. It even supports backwards steps, so that's cool.I highly recommend underscore or lo-dash libraries: http://underscorejs.org/#range(Almost completely compatible, apparently lodash runs quicker but underscore has better doco IMHO)Both libraries have bunch of very useful utilities.My version of the loop ;)       fastest wayfunction:or EDIT readable versionDemohttp://jsfiddle.net/W3CUn/FOR THE DOWNVOTERS performancehttp://jsperf.com/for-push-while-set/2faster in ie and 3x faster in firefoxonly on aipad air the for loop is a little faster.tested on win8, osx10.8, ubuntu14.04, ipad, ipad air, ipod;with chrome,ff,ie,safari,mobile safari.i would like to see the performance on older ie browsers where the for loop isn't that optimized!this is roughly equivalent tobreaking it down:this creates a sparse matrix of the correct nominal length.  Now the problem with a sparse matrix is that although it has the correct nominal length, it has no actual elements, so, forgives usThenpasses the sparse matrix as an argument list to the Array constructor, which produces a dense matrix of (actual) length targetLength, where all elements have undefined value.  The first argument is the 'this' value for the the array constructor function execution context, and plays no role here, and so is null.So now,yieldsfinallymakes use of the fact that the Array.map function passes: 1. the value of the current element and 2. the index of the current element, to the map delegate/callback.  The first argument is discarded, while the second can then be used to set the correct sequence value, after adjusting for the start offset.So thenyieldsIf the start is always less than the end, we can do:If we want to be able to take a third argument to be able to modify the step used to build the array, and to make it work even though the start is greater than the end:This way the function accepts positive and negative steps and if no step is given, it defaults to 1.My five cents:Both direction array of integers function.When range(0, 5) become [0, 1, 2, 3, 4, 5].And range(5, 0) become [5, 4, 3, 2, 1, 0].Based on this answer.P.S. For use in real life you should also check args for isFinite() and isNaN().There's probably a DRYer way to do the loop, but that's the basic idea.You can design a range method that increments a 'from' number by a desired amount until it reaches a 'to' number.

This example will 'count' up or down, depending on whether from is larger or smaller than to.If you ever want to step by a decimal amount : Array.range(0,1,.01)

you will need to truncate the values of any floating point imprecision.

Otherwise you will return numbers like

0.060000000000000005 instead of .06. This adds a little overhead to the other version, but works correctly for integer or decimal steps.Adding http://minifiedjs.com/ to the list of answers :)Code is similar to underscore and others:Docs here:

http://minifiedjs.com/api/range.htmlI use minified.js because it solves all my problems with low footprint and easy to understand syntax. For me, it is a replacement for jQuery, MustacheJS and Underscore/SugarJS in one framework.Of course, it is not that popular as underscore. This might be a concern for some.Minified was made available by Tim Jansen using the CC-0 (public domain) license.Solving in underscore

Get mouse wheel events in jQuery?

thejh

[Get mouse wheel events in jQuery?](https://stackoverflow.com/questions/8189840/get-mouse-wheel-events-in-jquery)

Is there a way to get the mouse wheel events (not talking about scroll events) in jQuery?

2011-11-18 22:16:31Z

Is there a way to get the mouse wheel events (not talking about scroll events) in jQuery?There's a plugin that detects up/down mouse wheel and velocity over a region.Binding to both mousewheel and DOMMouseScroll ended up working really well for me:This method is working in IE9+, Chrome 33, and Firefox 27.Edit - Mar 2016I decided to revisit this issue since it's been a while. The MDN page for the scroll event has a great way of retrieving the scroll position that makes use of requestAnimationFrame, which is highly preferable to my previous detection method. I modified their code to provide better compatibility in addition to scroll direction and position:This code is currently working in Chrome v50, Firefox v44, Safari v9, and IE9+References:As of now in 2017, you can just writeWorks with current Firefox 51, Chrome 56, IE9+Answers talking about "mousewheel" event are refering to a deprecated event. The standard event is simply "wheel". See https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheelThis worked for me:)from stackoverflowHere is a vanilla solution. Can be used in jQuery if the event passed to the function is event.originalEvent which jQuery makes available as property of the jQuery event. Or if inside the callback function under we add before first line: event = event.originalEvent;.This code normalizes the wheel speed/amount and is positive for what would be a forward scroll in a typical mouse, and negative in a backward mouse wheel movement.There is also a plugin for jQuery, which is more verbose in the code and some extra sugar: https://github.com/brandonaaron/jquery-mousewheelThis is working in each IE, Firefox and Chrome's latest versions.I was stuck in this issue today and found this code is working fine for meuse this codemy combination looks like this. it fades out and fades in on each scroll down/up. otherwise you have to scroll up to the header, for fading the header in.the above one is not optimized for touch/mobile, I think this one does it better for all mobile:The plugin that @DarinDimitrov posted, jquery-mousewheel, is broken with jQuery 3+. It would be more advisable to use jquery-wheel which works with jQuery 3+.If you don't want to go the jQuery route, MDN highly cautions using the mousewheel event as it's nonstandard and unsupported in many places. It instead says that you should use the wheel event as you get much more specificity over exactly what the values you're getting mean. It's supported by most major browsers.If using mentioned jquery mousewheel plugin, then what about to use the 2nd argument of event handler function - delta:I got same problem recently where

$(window).mousewheel was returning undefinedWhat I did was $(window).on('mousewheel', function() {});Further to process it I am using:

getMinutes() 0-9 - How to display two digit numbers?

Mark Fondy

[getMinutes() 0-9 - How to display two digit numbers?](https://stackoverflow.com/questions/8935414/getminutes-0-9-how-to-display-two-digit-numbers)

This returns 3. I tried this, but it did not work: If strlen == 1 then num = ('0' + num);

2012-01-20 00:41:15Z

This returns 3. I tried this, but it did not work: If strlen == 1 then num = ('0' + num);Yikes these answers aren't great, even the top post upticked. Here y'go, cross-browser and cleaner int/string conversion. Plus my advice is don't use a variable name 'date' with code like date = Date(...) where you're relying heavily on language case sensitivity (it works, but risky when you're working with server/browser code in different languages with different rules). So assuming the javascript Date in a var current_date:The technique is take the rightmost 2 characters (slice(-2)) of "0" prepended onto the string value of getMinutes(). So:andAnother short way is to fill the minutes with a leading zero using: Meaning: Make the string two chars long, if a char is missing then set 0 at this position. See docs at str.padStart(targetLength, padString)Elegant ES6 function to format a date into hh:mm:ss:I would like to provide a more neat solution to the problem if I may.The accepted answer is very good. But I would have done it like this.Now if you want to use this.I suggest:it is one function call fewer. It is always good to think about performance.

It is short as well; you should check if it is less than 10... not looking for the length of it , because this is a number and not a stringAnother option:.length is undefined because getMinutes is returning a number, not a string. numbers don't have a length property.  You could dovar m = "" + date.getMinutes();to make it a string, then check the length (you would want to check for length === 1, not 0).  Numbers don't have a length, but you can easily convert the number to a string, check the length and then prepend the 0 if it's necessary:I dont see any ES6 answers on here so I will add one using StandardJS formattingUsing ECMAScript Internationalization API, more info:      I assume you would need the value as string. You could use the code below.

It will always return give you the two digit minutes as string.Hope this helps.I usually use this piece of code :It is quite similar to the @ogur accepted answer but does not concatenate an empty string in the case that 0 is not needed. Not sure it is better. Just an other way to do it !you can use moment js :example : moment('2019-10-29T21:08').format('mm') ==> 08hope it helps someonenew to JS so this was very helpful

the most ppl looking at this prob new too

so this is how i got it to show in the div called "class="min"hope it helps someonehow about this? it works for me! :)Another option to get two digit minutes or hours. For two digit minutes use:

new Date().toLocaleFormat("%M")If you're using AngularJS in your project, just inject $filter and use it like here:You can also format the output in the template, more on filters here.

What are bitwise operators?

click

[What are bitwise operators?](https://stackoverflow.com/questions/276706/what-are-bitwise-operators)

I'm someone who writes code just for fun and haven't really delved into it in either an academic or professional setting, so stuff like these bitwise operators really escapes me.I was reading an article about JavaScript, which apparently supports bitwise operations. I keep seeing this operation mentioned in places, and I've tried reading about to figure out what exactly it is, but I just don't seem to get it at all. So what are they? Clear examples would be great! :DJust a few more questions - what are some practical applications of bitwise operations? When might you use them?

2008-11-09 23:59:26Z

I'm someone who writes code just for fun and haven't really delved into it in either an academic or professional setting, so stuff like these bitwise operators really escapes me.I was reading an article about JavaScript, which apparently supports bitwise operations. I keep seeing this operation mentioned in places, and I've tried reading about to figure out what exactly it is, but I just don't seem to get it at all. So what are they? Clear examples would be great! :DJust a few more questions - what are some practical applications of bitwise operations? When might you use them?Since nobody has broached the subject of why these are useful:I use bitwise operations a lot when working with flags.  For example, if you want to pass a series of flags to an operation (say, File.Open(), with Read mode and Write mode both enabled), you could pass them as a single value.  This is accomplished by assigning each possible flag it's own bit in a bitset (byte, short, int, or long).  For example:So if you want to pass read AND write, you would pass (READ | WRITE) which then combines the two into Which then can be decrypted on the other end like:which checkswhich returnswhich is not 0, so the flag does specify READ.You can use XOR to toggle various bits.  I've used this when using a flag to specify directional inputs (Up, Down, Left, Right).  For example, if a sprite is moving horizontally, and I want it to turn around:I simply XOR the current value with (LEFT | RIGHT) which will turn LEFT off and RIGHT on, in this case.Bit Shifting is useful in several cases.is the same asif you need to quickly multiply by a power of two, but watch out for shifting a 1-bit into the top bit - this makes the number negative unless it's unsigned.  It's also useful when dealing with different sizes of data.  For example, reading an integer from four bytes:Assuming that A is the most-significant byte and D the least.  It would end up as:Colors are often stored this way (with the most significant byte either ignored or used as Alpha):To find the values again, just shift the bits to the right until it's at the bottom, then mask off the remaining higher-order bits:0xFF is the same as 11111111.  So essentially, for Red, you would be doing this:It is worth noting that the single-bit truth tables listed as other answers work on only one or two input bits at a time. What happens when you use integers, such as:The answer lies in the binary expansion of each input:Each pair of bits in each column is run through the "AND" function to give the corresponding output bit on the bottom line. So the answer to the above expression is 4. The CPU has done (in this example) 8 separate "AND" operations in parallel, one for each column.I mention this because I still remember having this "AHA!" moment when I learned about this many years ago.Bitwise operators are operators that work on a bit at a time.AND is 1 only if both of its inputs are 1.OR is 1 if one or more of its inputs are 1.XOR is 1 only if exactly one of its inputs are 1.NOT is 1 only if its input are 0.These can be best described as truth tables.  Inputs possibilities are on the top and left, the resultant bit is one of the four (two in the case of NOT since it only has one input) values shown at the intersection of the two inputs.One example is if you only want the lower 4 bits of an integer, you AND it with 15 (binary 1111) so:These are the bitwise operators, all supported in JavaScript:To break it down a bit more, it has a lot to do with the binary representation of the value in question. Hope this helps. When the term "bitwise" is mentioned, it is sometimes clarifying that is is not a "logical" operator.For example in JavaScript, bitwise operators treat their operands as a sequence of 32 bits (zeros and ones); meanwhile, logical operators are typically used with Boolean (logical) values but can work with non-Boolean types.Take expr1 && expr2 for example.As others have noted, 2 & 4 is a bitwise AND, so it will return 0.You can copy the following to test.html or something and test:operations:List itemEg.Uses of bitwise operatorEg.Eg.Eg.Eg.bitwise shifting works only with +ve numberAlso there is a wide range of use of bitwise logicIt might help to think of it this way. This is how AND (&) works:It basically says are both of these numbers ones, so if you have two numbers 5 and 3 they will be converted into binary and the computer will thinkare both one:   00000001

0 is false, 1 is trueSo the AND of 5 and 3 is one. The OR (|) operator does the same thing except only one of the numbers must be one to output 1, not both.I kept hearing about how slow JavaScript bitwise operators were. I did some tests for my latest blog post and found out they were 40% to 80% faster than the arithmetic alternative in several tests. Perhaps they used to be slow. In modern browsers, I love them.I have one case in my code that will be faster and easier to read because of this. I'll keep my eyes open for more.

Loading cross-domain endpoint with jQuery AJAX

xonorageous

[Loading cross-domain endpoint with jQuery AJAX](https://stackoverflow.com/questions/15005500/loading-cross-domain-endpoint-with-jquery-ajax)

I'm trying to load a cross-domain HTML page using AJAX but unless the dataType is "jsonp" I can't get a response. However using jsonp the browser is expecting a script mime type but is receiving "text/html".My code for the request is:Is there any way of avoiding using jsonp for the request? I've already tried using the crossDomain parameter but it didn't work.If not is there any way of receiving the html content in jsonp? Currently the console is saying "unexpected <" in the jsonp reply.

2013-02-21 15:04:31Z

I'm trying to load a cross-domain HTML page using AJAX but unless the dataType is "jsonp" I can't get a response. However using jsonp the browser is expecting a script mime type but is receiving "text/html".My code for the request is:Is there any way of avoiding using jsonp for the request? I've already tried using the crossDomain parameter but it didn't work.If not is there any way of receiving the html content in jsonp? Currently the console is saying "unexpected <" in the jsonp reply.There are some ways to overcome the cross-domain barrier:There are some plugins that help with cross-domain requests:Heads up!The best way to overcome this problem, is by creating your own proxy in the back-end, so that your proxy will point to the services in other domains, because in the back-end not exists the same origin policy restriction. But if you can't do that in back-end, then pay attention to the following tips.Using third-party proxies is not a secure practice, because they can keep track of your data, so it can be used with public information, but never with private data.CORS Anywhere is a node.js proxy which adds CORS headers to the proxied request.

To use the API, just prefix the URL with the API URL. (Supports https: see github repository)If you want to automatically enable cross-domain requests when needed, use the following snippet:Whatever Origin is a cross domain jsonp access. This is an open source alternative to anyorigin.com.To fetch the data from google.com, you can use this snippet:CORS Proxy is a simple node.js proxy to enable CORS request for any website.

It allows javascript code on your site to access resources on other domains that would normally be blocked due to the same-origin policy.How does it work?

CORS Proxy takes advantage of Cross-Origin Resource Sharing, which is a feature that was added along with HTML 5. Servers can specify that they want browsers to allow other websites to request resources they host. CORS Proxy is simply an HTTP Proxy that adds a header to responses saying "anyone can request this".This is another way to achieve the goal (see www.corsproxy.com). All you have to do is strip http:// and www. from the URL being proxied, and prepend the URL with www.corsproxy.com/Recently I found this one, it involves various security oriented Cross Origin Remote Sharing utilities. But it is a black-box with Flash as backend.You can see it in action here: CORS proxy browser

Get the source code on GitHub: koto/cors-proxy-browserYou can use Ajax-cross-origin a jQuery plugin.

With this plugin you use jQuery.ajax() cross domain. It uses Google services to achieve this:It is very simple to use:You can read more here:

http://www.ajax-cross-origin.com/If the external site doesn't support JSONP or CORS, your only option is to use a proxy.Build a script on your server that requests that content, then use jQuery ajax to hit the script on your server.Just put this in the header of your PHP Page and it ill work without API:oror I'm posting this in case someone faces the same problem I am facing right now. I've got a Zebra thermal printer, equipped with the ZebraNet print server, which offers a HTML-based user interface for editing multiple settings, seeing the printer's current status, etc. I need to get the status of the printer, which is displayed in one of those html pages, offered by the ZebraNet server and, for example, alert() a message to the user in the browser. This means that I have to get that html page in Javascript first. Although the printer is within the LAN of the user's PC, that Same Origin Policy is still staying firmly in my way. I tried JSONP, but the server returns html and I haven't found a way to modify its functionality (if I could, I would have already set the magic header Access-control-allow-origin: *). So I decided to write a small console app in C#. It has to be run as Admin to work properly, otherwise it trolls :D an exception. Here is some code:All the user needs to do is run that console app as Admin. I know it is way too ... frustrating and complicated, but it is sort of a workaround to the Domain Policy problem in case you cannot modify the server in any way.edit: from js I make a simple ajax call:The html of the requested page is returned and stored in the data variable.To get the data form external site by passing using a local proxy as  suggested by jherax you can create a php page that fetches the content for you from respective external  url and than send a get request to that php page.as a php proxy you can use https://github.com/cowboy/php-simple-proxyYour URL doesn't work these days, but your code can be updated with this working solution:You need CORS proxy which proxies your request from your browser to requested service with appropriate CORS headers. List of such services are in code snippet below. You can also run provided code snippet to see ping to such services from your location.Figured it out.

Used this instead.

Submit jQuery UI dialog on <Enter>

CMB

[Submit jQuery UI dialog on <Enter>](https://stackoverflow.com/questions/868889/submit-jquery-ui-dialog-on-enter)

I have a jQuery UI dialog box with a form. I would like  to simulate a click on one of the dialog's buttons so you don't have to use the mouse or tab over to it. In other words, I want it to act like a regular GUI dialog box where  simulates hitting the "OK" button.I assume this might be a simple option with the dialog, but I can't find it in the jQuery UI documentation. I could bind each form input with keyup() but didn't know if there was a simpler/cleaner way. Thanks.

2009-05-15 14:09:09Z

I have a jQuery UI dialog box with a form. I would like  to simulate a click on one of the dialog's buttons so you don't have to use the mouse or tab over to it. In other words, I want it to act like a regular GUI dialog box where  simulates hitting the "OK" button.I assume this might be a simple option with the dialog, but I can't find it in the jQuery UI documentation. I could bind each form input with keyup() but didn't know if there was a simpler/cleaner way. Thanks.I don't know if there's an option in the jQuery UI widget, but you could simply bind the keypress event to the div that contains your dialog...This'll run no matter what element has the focus in your dialog, which may or may not be a good thing depending on what you want.If you want to make this the default functionality, you can add this piece of code:Here's a more detailed view of what it would look like:I have summed up the answers above & added important stuffAdvantages:Disadvantages:I know the question is old but I have had the same need, so, I shared the solution I've used.It works beautifully with the latest version of JQuery UI (1.8.1).

You may also use :first instead of :last depending on which button you want to set as the default.This solution, compared to the selected one above, has the advantage of showing which button is the default one for the user. The user can also TAB between buttons and pressing ENTER will click the button currently under focus.Cheers.A crude but effective way to make this work more generically:Then when you create a new dialog you can do this:And use it like a normal jquery dialog  thereafter:There are ways to improve that to make it work in more special cases.  With the above code it will automatically pick the first button in the dialog as the button to trigger when enter is hit.  Also it assumes that there is only one active dialog at any given time which may not be the case.  But you get the idea.Note: As mentioned above, the button that is pressed on enter is dependent on your setup.  So, in some cases you would want to use the :first selector in .find method and in others you may want to use the :last selector.Rather than listening for key codes like in this answer (which I couldn't get to work) you can bind to the submit event of the form within the dialog and then do this:So, the whole thing would look like thisNote that different browsers handle the enter key differently, and some do not always do a submit on enter.Ben Clayton's is the neatest and shortest and it can be placed at the top of your index page before any jquery dialogs have been initialized. However, i'd like to point out that ".live" has been deprecated. The preferred action is now ".on". If you want ".on" to function like ".live", you'll have to use delegated events to attach the event handler. Also, a few other things...In this case...I don't know about simpler, but ordinarily you would track which button has the current focus.  If the focus is changed to a different control, then the "button focus" would remain on the button that had focus last.  Ordinarily, the "button focus" would start on your default button.  Tabbing to a different button would change the "button focus".  You'd have to decide if navigating to a different form element would reset the "button focus" to the default button again.  You'll also probably need some visual indicator other than the browser default to indicate the focused button as it loses the real focus in the window.Once you have the button focus logic down and implemented, then I would probably add a key handler to the dialog itself and have it invoke the action associated with the currently "focused" button.EDIT: I'm making the assumption that you want to be able hit enter anytime you are filling out form elements and have the "current" button action take precedence. If you only want this behavior when the button is actually focused, my answer is too complicated.I found this solution, it work's on IE8, Chrome 23.0 and Firefox 16.0It's based on Robert Schmidt comment.I hope it help anyone.Sometimes we forget the fundamental of what the browser already supports:This will cause the ENTER key to submit the form.I did such way... ;) Hope it will helpful for somebody..This should work to trigger the click of the button's click handler. this example assumes you have already set up the form in the dialog to use the jquery.validate plugin. but could be easily adapted.    I realise there are a lot of answers already, but I reckon naturally that my solution is the neatest, and possibly the shortest. It has the advantage that it works on any dialogs created any time in the future.Here is what I did:In this case, myForm is a jQuery object containing the form's html (note, there aren't any "form" tags in there... if you put those in the whole screen will refresh when you press "enter"). Whenever the user presses "enter" from within the form it will be the equivalent of clicking the "ok" button.This also avoids the issue of having the form open with the "ok" button already highlighted. While that would be good for forms with no fields, if you need the user to fill in stuff, then you probably want the first field to be highlighted.done and done if you know the button element selector :Should do the trick for you. This will focus the ok button, and enter will 'click' it, as you would expect. This is the same technique used in native UI dialogs.I found a quite simple solution for this problem:This worked great for me..None of these solutions seemed to work for me in IE9. I ended up with this..Below body is used because dialog DIV added on body,so body now listen the keyboard event. It tested on IE8,9,10, Mojila, Chrome. Because I don't have enough reputation to post comments.Modified answer by Basemm #35 too add in Escape to close the dialog.It works fine Thank You!!!open: function () {

            debugger;

            $("#dialogDiv").keypress(function (e) {

                if (e.keyCode == 13) {

                    $(this).parent().find("#btnLoginSubmit").trigger("click");

                }

            });

        },Give your buttons classes and select them the usual way:

Add and remove multiple classes in jQuery

Raman

[Add and remove multiple classes in jQuery](https://stackoverflow.com/questions/7185709/add-and-remove-multiple-classes-in-jquery)

I'm trying to add and remove multiple classes on a text field by clicking different radio buttons. I'm not able to remove the unwanted classes while switching between different radio buttons.My code for this is:

2011-08-25 05:52:59Z

I'm trying to add and remove multiple classes on a text field by clicking different radio buttons. I'm not able to remove the unwanted classes while switching between different radio buttons.My code for this is:You can separate multiple classes with the space:http://api.jquery.com/addClass/Add multiple classes:or in cascade:Very similar also to remove more classes:or in cascade:easiest way to append class name using javascript.

It can be useful when .siblings() are misbehaving.

Does C# have an equivalent to JavaScript's encodeURIComponent()?

travis

[Does C# have an equivalent to JavaScript's encodeURIComponent()?](https://stackoverflow.com/questions/86477/does-c-sharp-have-an-equivalent-to-javascripts-encodeuricomponent)

In JavaScript:Is there an equivalent for C# applications? For escaping HTML characters I used:But I'm not sure how to convert the match to the correct hexadecimal format that JS uses. For example this code:Returns "%a9%221a" for "©√" instead of "%C2%A9%E2%88%9A". It looks like I need to split the string up into bytes or something.Edit: This is for a windows app, the only items available in System.Web are: AspNetHostingPermission, AspNetHostingPermissionAttribute, and AspNetHostingPermissionLevel.

2008-09-17 19:05:10Z

In JavaScript:Is there an equivalent for C# applications? For escaping HTML characters I used:But I'm not sure how to convert the match to the correct hexadecimal format that JS uses. For example this code:Returns "%a9%221a" for "©√" instead of "%C2%A9%E2%88%9A". It looks like I need to split the string up into bytes or something.Edit: This is for a windows app, the only items available in System.Web are: AspNetHostingPermission, AspNetHostingPermissionAttribute, and AspNetHostingPermissionLevel.Uri.EscapeDataString or HttpUtility.UrlEncode is the correct way to escape a string meant to be part of a URL.Take for example the string "Stack Overflow":Only the last is correct when used as an actual part of the URL (as opposed to the value of one of the query string parameters)HttpUtility.HtmlEncode / Decode

HttpUtility.UrlEncode / DecodeYou can add a reference to the System.Web assembly if it's not available in your projectI tried to do full compatible analog of javascript's encodeURIComponent for c# and after my 4 hour experiments I found thisc# CODE:the result is:

!%40%23%24%25%5e%26*()_%2b%20some%20text%20here%20%d0%b0%d0%bb%d0%b8%20%d0%bc%d0%b0%d0%bc%d0%b5%d0%b4%d0%be%d0%b2%20%d0%b1%d0%b0%d0%ba%d1%83After you decode It with Javascript's decodeURLComponent();you will get this: 

!@#$%^&*()_+ some text here али мамедов бакуThank You for attentionSystem.Uri.EscapeUriString() didn't seem to do anything, but System.Uri.EscapeDataString() worked for me.Try Server.UrlEncode(), or System.Web.HttpUtility.UrlEncode() for instances when you don't have access to the Server object. You can also use System.Uri.EscapeUriString() to avoid adding a reference to the System.Web assembly.For a Windows Store App, you won't have HttpUtility. Instead, you have:For an URI, before the '?':For an URI query name or value, after the '?':For a x-www-form-urlencoded query name or value, in a POST content:You can use the Server object in the System.Web namespaceServer.UrlEncode, Server.UrlDecode, Server.HtmlEncode, and Server.HtmlDecode.Edit: poster added that this was a windows application and not a web one as one would believe.  The items listed above would be available from the HttpUtility class inside System.Web which must be added as a reference to the project.

Removing element from array in component state

aherriot

[Removing element from array in component state](https://stackoverflow.com/questions/29527385/removing-element-from-array-in-component-state)

I am trying to find the best way to remove an element from an array in the state of a component.  Since I should not modify the this.state variable directly, is there a better way (more concise) to remove an element from an array than what I have here?:Thank you.updatedThis has been updated to use the callback in setState. This should be done when referencing the current state while updating it.

2015-04-08 23:58:50Z

I am trying to find the best way to remove an element from an array in the state of a component.  Since I should not modify the this.state variable directly, is there a better way (more concise) to remove an element from an array than what I have here?:Thank you.updatedThis has been updated to use the callback in setState. This should be done when referencing the current state while updating it.The cleanest way to do this that I've seen is with filter:You could use the update() immutability helper from react-addons-update, which effectively does the same thing under the hood, but what you're doing is fine.I believe referencing this.state inside of setState() is discouraged (State Updates May Be Asynchronous).The docs recommend using setState() with a callback function so that prevState is passed in at runtime when the update occurs. So this is how it would look:Using Array.prototype.filter without ES6Using Array.prototype.filter with ES6 Arrow FunctionsUsing immutability-helperUsing SpreadNote that in each instance, regardless of the technique used, this.setState() is passed a callback, not an object reference to the old this.state;Here is a way to remove the element from the array in the state using ES6 spread syntax.I want to chime in here even though this question has already been answered correctly by @pscl in case anyone else runs into the same issue I did.  Out of the 4 methods give I chose to use the es6 syntax with arrow functions due to it's conciseness and lack of dependence on external libraries:Using Array.prototype.filter with ES6 Arrow FunctionsAs you can see I made a slight modification to ignore the type of index (!== to !=) because in my case I was retrieving the index from a string field.Another helpful point if you're seeing weird behavior when removing an element on the client side is to NEVER use the index of an array as the key for the element:When React diffs with the virtual DOM on a change, it will look at the keys to determine what has changed. So if you're using indices and there is one less in the array, it will remove the last one. Instead, use the id's of the content as keys, like this.The above is an excerpt from this answer from a related post.Happy Coding Everyone!You can use this function, if you want to remove the element (without index)As mentioned in a comment to ephrion's answer above, filter() can be slow, especially with large arrays, as it loops to look for an index that appears to have been determined already. This is a clean, but inefficient solution. As an alternative one can simply 'slice' out the desired element and concatenate the fragments. Hope this helps!You could make the code more readable with a one line helper function:then use it like so:I am using this, hope it has no issue and help.Here is a simple way to do it:Hope it Helps!!!

Map over object preserving keys

xuanji

[Map over object preserving keys](https://stackoverflow.com/questions/19023226/map-over-object-preserving-keys)

The map function in underscore.js, if called with a javascript object, returns an array of values mapped from the object's values.is there a way to make it preserve the keys? ie, I want a function that returns

2013-09-26 08:35:02Z

The map function in underscore.js, if called with a javascript object, returns an array of values mapped from the object's values.is there a way to make it preserve the keys? ie, I want a function that returnsWith UnderscoreUnderscore provides a function _.mapObject to map the values and preserve the keys.DEMOWith LodashLodash provides a function _.mapValues to map the values and preserve the keys.DEMOI managed to find the required function in lodash, a utility library similar to underscore.http://lodash.com/docs#mapValuesI know this is old, but now Underscore has a new map for objects :You can of course build a flexible map for both arrays and objectsHow about this version in plain JS (ES6 / ES2015)?jsbinIf you want to map over an object recursively (map nested obj), it can be done like this:jsbinSince ES7 / ES2016 you can use Object.entries instead of Object.keys like this:_.map returns an Array, not an Object.If you want an object you're better off using a different function, like each; if you really want to use map you could do something like this:but that is confusing, when seeing map one would expect to have an array as result and then make something with it.I know it's been a long time, but still the most obvious solution via fold (aka reduce in js) is missing, for the sake of completeness i'll leave it here:I think you want a mapValues function (to map a function over the values of an object), which is easy enough to implement yourself:A mix fix for the underscore map bug :PA simple workaround that keeps the right key and return as object 

It is still used the same way as i guest you could used this function 

to override the bugy _.map function or simply as me used it as a mixin You can use _.mapValues(users, function(o) { return o.age; }); in Lodash and _.mapObject({ one: 1, two: 2, three: 3 }, function (v) { return v * 3; }); in Underscore.Check out the cross-documentation here: http://jonathanpchen.com/underdash-api/#mapvalues-object-iteratee-identity

How to update bower.json with installed packages?

Konga Raju

[How to update bower.json with installed packages?](https://stackoverflow.com/questions/20279792/how-to-update-bower-json-with-installed-packages)

In my project I've installed bower components without save option. Now, I would like update to bower.json?How can I update bower.json with installed packages?

2013-11-29 06:39:12Z

In my project I've installed bower components without save option. Now, I would like update to bower.json?How can I update bower.json with installed packages?Just list your dependencies: Then you should run all install command with param '--save' like this: It's a hard work, but if you have a thousand dependencies, could you create a script to automatize the task.before doing anything rename your bower.json in bower2.json for example.then you can do a:(automatically create a bower.json file).note that all questions should be pre-filled with your current config.When it will ask you:You now have all your dependencies in the new bower.json file (and you can check if everything is right with the old bower2.json)A bit arduous way is to run bower list, look for packages labeled extraneous and add those manually to the dependencies in the bower.json.If there are a lot of extraneous packages, it might be easier to workaround this by running bower init and answering Yes to "set currently installed components as dependencies?". This will take your current bower.json, read it and then create new one using information from the old one. So in an ideal case you will have the same file just with extraneous packages added.Warning: Firstly, there might be something lost in the process (e.g. devDependecies). Secondly in the last version of bower (v1.2.7) this will not preserve current packages info! I feel it is a bug. However you can save the old file and (manually) merge it with the generated one.Also, you should ask for an option or something by opening a bower issue as this would be welcomed by many developers.You can use bower-check-updates (you need installed node.js on your machine):bower-check-updates is a utility that automatically adjusts a bower.json with the latest version of all dependenciesbower-check-updates - is a fork of npm-check-updates, so it's all the same but updates bower.json, instead of package.jsonThis will install bower-check-updates globally, so you can launch it from anywhere.P.S. for more information about npm-check-updates pleas see this topicIf there aren't that many bower packages you have installed, try writing bower install [package_name] --save. This will just update your bower.json file. After bower-check-updates -u you must run bower install instead of npm install

vuejs update parent data from child component

Gal Ziv

[vuejs update parent data from child component](https://stackoverflow.com/questions/40915436/vuejs-update-parent-data-from-child-component)

I'm starting to play with vuejs (2.0).

I built a simple page with one component in it.

The page has one Vue instance with data.

On that page I registered and added the component to html. 

The component has one input[type=text]. I want that value to reflect on the parent (main Vue instance).How do I correctly update the component's parent data?

Passing a bound prop from the parent is not good and throws some warnings to the console. They have something in their doc but it is not working.

2016-12-01 16:16:13Z

I'm starting to play with vuejs (2.0).

I built a simple page with one component in it.

The page has one Vue instance with data.

On that page I registered and added the component to html. 

The component has one input[type=text]. I want that value to reflect on the parent (main Vue instance).How do I correctly update the component's parent data?

Passing a bound prop from the parent is not good and throws some warnings to the console. They have something in their doc but it is not working.Two-way binding has been deprecated in Vue 2.0 in favor of using a more event-driven architecture. In general, a child should not mutate its props. Rather, it should $emit events and let the parent respond to those events. In your specific case, you could use a custom component with v-model. This is a special syntax which allows for something close to two-way binding, but is actually a shorthand for the event-driven architecture described above. You can read about it here -> https://vuejs.org/v2/guide/components.html#Form-Input-Components-using-Custom-Events.Here's a simple example:The docs state thatis equivalent to That is why the prop on the child needs to be named value, and why the child needs to $emit an event named input.From the documentation:Following is the code to pass props to a child element:HTML:JS: In child component: In parent component:Child ComponentUse this.$emit('event_name') to send an event to the parent component. Parent ComponentIn order to listen to that event in the parent component, we do v-on:event_name and a method (ex. handleChange) that we want to execute on that event occursDone :)I agree with the event emitting and v-model answers for those above. However, I thought I would post what I found about components with multiple form elements that want to emit back to their parent since this seems one of the first articles returned by google.I know the question specifies a single input, but this seemed the closest match and might save people some time with similar vue components. Also, no one has mentioned the .sync modifier yet.As far as I know, the v-model solution is only suited to one input returning to their parent. I took a bit of time looking for it but Vue (2.3.0) documentation does show how to sync multiple props sent into the component back to the parent (via emit of course).It is appropriately called the .sync modifier.Here is what the documentation says:You can also sync multiple at a time by sending through an object. Check out the documentation hereThe way more simple is use this.$emitFather.vueChild.vueMy full example: https://codesandbox.io/s/update-parent-property-ufj4bIt is also possible to pass props as Object or Array. In this case data will be two-way binded:(This is noted at the end of topic: https://vuejs.org/v2/guide/components.html#One-Way-Data-Flow )The correct way is to $emit() an event in the child component that the main Vue instance listens for.1) Child Compnent : you can use like this in child component write like this :

   this.formValue is to send some data to parent component2) Parrent Compnenet : and in parrent component tag recieve send variable like this :

and this is the code to recevie that child compnent data in parent component tagAnother way is to pass a reference of your setter from the parent as a prop to the child component, similar to how they do it in React.

Say, you have a method updateValue on the parent to update the value, you could instantiate the child component like so: <child :updateValue="updateValue"></child>. Then on the child you will have a corresponding prop: props: {updateValue: Function}, and in the template call the method when the input changes: <input @input="updateValue($event.target.value)">.

「Single-page」JS websites and SEO

user544941

[「Single-page」JS websites and SEO](https://stackoverflow.com/questions/7549306/single-page-js-websites-and-seo)

There are a lot of cool tools for making powerful "single-page" JavaScript websites nowadays. In my opinion, this is done right by letting the server act as an API (and nothing more) and letting the client handle all of the HTML generation stuff. The problem with this "pattern" is the lack of search engine support. I can think of two solutions:The first solution is discussed further here. I have been working on a website doing this and it's not a very nice experience. It's not DRY and in my case I had to use two different template engines for the client and the server.I think I have seen the second solution for some good ol' Flash websites. I like this approach much more than the first one and with the right tool on the server it could be done  quite painlessly.So what I'm really wondering is the following:

2011-09-25 23:24:22Z

There are a lot of cool tools for making powerful "single-page" JavaScript websites nowadays. In my opinion, this is done right by letting the server act as an API (and nothing more) and letting the client handle all of the HTML generation stuff. The problem with this "pattern" is the lack of search engine support. I can think of two solutions:The first solution is discussed further here. I have been working on a website doing this and it's not a very nice experience. It's not DRY and in my case I had to use two different template engines for the client and the server.I think I have seen the second solution for some good ol' Flash websites. I like this approach much more than the first one and with the right tool on the server it could be done  quite painlessly.So what I'm really wondering is the following:While #2 might be "easier" for you as a developer, it only provides search engine crawling. And yes, if Google finds out your serving different content, you might be penalized (I'm not an expert on that, but I have heard of it happening).Both SEO and accessibility (not just for disabled person, but accessibility via mobile devices, touch screen devices, and other non-standard computing / internet enabled platforms) both have a similar underlying philosophy: semantically rich markup that is "accessible" (i.e. can be accessed, viewed, read, processed, or otherwise used) to all these different browsers. A screen reader, a search engine crawler or a user with JavaScript enabled, should all be able to use/index/understand your site's core functionality without issue. pushState does not add to this burden, in my experience. It only brings what used to be an afterthought and "if we have time" to the forefront of web development.What your describe in option #1 is usually the best way to go - but, like other accessibility and SEO issues, doing this with pushState in a JavaScript-heavy app requires up-front planning or it will become a significant burden. It should be baked in to the page and application architecture from the start - retrofitting is painful and will cause more duplication than is necessary.I've been working with pushState and SEO recently for a couple of different application, and I found what I think is a good approach. It basically follows your item #1, but accounts for not duplicating html / templates.Most of the info can be found in these two blog posts:http://lostechies.com/derickbailey/2011/09/06/test-driving-backbone-views-with-jquery-templates-the-jasmine-gem-and-jasmine-jquery/andhttp://lostechies.com/derickbailey/2011/06/22/rendering-a-rails-partial-as-a-jquery-template/The gist of it is that I use ERB or HAML templates (running Ruby on Rails, Sinatra, etc) for my server side render and to create the client side templates that Backbone can use, as well as for my Jasmine JavaScript specs. This cuts out the duplication of markup between the server side and the client side.From there, you need to take a few additional steps to have your JavaScript work with the HTML that is rendered by the server - true progressive enhancement; taking the semantic markup that got delivered and enhancing it with JavaScript.For example, i'm building an image gallery application with pushState. If you request /images/1 from the server, it will render the entire image gallery on the server and send all of the HTML, CSS and JavaScript down to your browser. If you have JavaScript disabled, it will work perfectly fine. Every action you take will request a different URL from the server and the server will render all of the markup for your browser. If you have JavaScript enabled, though, the JavaScript will pick up the already rendered HTML along with a few variables generated by the server and take over from there. Here's an example:After the server renders this, the JavaScript would pick it up (using a Backbone.js view in this example)This is a very simple example, but I think it gets the point across. When I instante the view after the page loads, I'm providing the existing content of the form that was rendered by the server, to the view instance as the el for the view. I am not calling render or having the view generate an el for me, when the first view is loaded. I have a render method available for after the view is up and running and the page is all JavaScript. This lets me re-render the view later if I need to.Clicking the "Say My Name" button with JavaScript enabled will cause an alert box. Without JavaScript, it would post back to the server and the server could render the name to an html element somewhere.EditConsider a more complex example, where you have a list that needs to be attached (from the comments below this)Say you have a list of users in a <ul> tag. This list was rendered by the server when the browser made a request, and the result looks something like:Now you need to loop through this list and attach a Backbone view and model to each of the <li> items. With the use of the data-id attribute, you can find the model that each tag comes from easily. You'll then need a collection view and item view that is smart enough to attach itself to this html.In this example, the UserListView will loop through all of the <li> tags and attach a view object with the correct model for each one. it sets up an event handler for the model's name change event and updates the displayed text of the element when a change occurs.This kind of process, to take the html that the server rendered and have my JavaScript take over and run it, is a great way to get things rolling for SEO, Accessibility, and pushState support.Hope that helps.I think you need this: http://code.google.com/web/ajaxcrawling/You can also install a special backend that "renders" your page by running javascript on the server, and then serves that to google.Combine both things and you have a solution without programming things twice. (As long as your app is fully controllable via anchor fragments.)So, it seem that the main concern is being DRYHere are a couple of examples using phantom.js for seo:http://backbonetutorials.com/seo-for-single-page-apps/http://thedigitalself.com/blog/seo-and-javascript-with-phantomjs-server-side-renderingIf you're using Rails, try poirot.  It's a gem that makes it dead simple to reuse mustache or handlebars templates client and server side.Create a file in your views like _some_thingy.html.mustache.  Render server side:Put the template your head for client side use:Rendre client side:To take a slightly different angle, your second solution would be the correct one in terms of accessibility...you would be providing alternative content to users who cannot use javascript (those with screen readers, etc.). This would automatically add the benefits of SEO and, in my opinion, would not be seen as a 'naughty' technique by Google.Interesting. I have been searching around for viable solutions but it seems to be quite problematic.I was actually leaning more towards your 2nd approach:Here's my take on solving the problem. Although it is not confirmed to work, it might provide some insight or idea's for other developers.Assume you're using a JS framework that supports "push state" functionality, and your backend framework is Ruby on Rails. You have a simple blog site and you would like search engines to index all your article index and show pages.Let's say you have your routes set up like this:Ensure that every server-side controller renders the same template that your client-side framework requires to run (html/css/javascript/etc). If none of the controllers are matched in the request (in this example we only have a RESTful set of actions for the ArticlesController), then just match anything else and just render the template and let the client-side framework handle the routing. The only difference between hitting a controller and hitting the wildcard matcher would be the ability to render content based on the URL that was requested to JavaScript-disabled devices.From what I understand it is a bad idea to render content that isn't visible to browsers. So when Google indexes it, people go through Google to visit a given page and there isn't any content, then you're probably going to be penalised. What comes to mind is that you render content in a div node that you display: none in CSS.However, I'm pretty sure it doesn't matter if you simply do this:And then using JavaScript, which doesn't get run when a JavaScript-disabled device opens the page:This way, for Google, and for anyone with JavaScript-disabled devices, they would see the raw/static content. So the content is physically there and is visible to anyone with JavaScript-disabled devices.But, when a user visits the same page and actually has JavaScript enabled, the #no-js node will be removed so it doesn't clutter up your application. Then your client-side framework will handle the request through it's router and display what a user should see when JavaScript is enabled.I think this might be a valid and fairly easy technique to use. Although that might depend on the complexity of your website/application.Though, please correct me if it isn't. Just thought I'd share my thoughts.Use NodeJS on the serverside, browserify your clientside code and route each http-request's(except for static http resources) uri through a serverside client to provide the first 'bootsnap'(a snapshot of the page it's state). Use something like jsdom to handle jquery dom-ops on the server. After the bootsnap returned, setup the websocket connection. Probably best to differentiate between a websocket client and a serverside client by making some kind of a wrapper connection on the clientside(serverside client can directly communicate with the server). I've been working on something like this: https://github.com/jvanveen/rnet/Use Google Closure Template to render pages. It compiles to javascript or java, so it is easy to render the page either on the client or server side. On the first encounter with every client, render the html and add javascript as link in header. Crawler will read the html only but the browser will execute your script. All subsequent requests from the browser could be done in against the api to minimize the traffic.

React + Redux - What's the best way to handle CRUD in a form component?

Mike Boutin

[React + Redux - What's the best way to handle CRUD in a form component?](https://stackoverflow.com/questions/33237818/react-redux-whats-the-best-way-to-handle-crud-in-a-form-component)

I got one form who is used to Create, Read, Update and Delete. I created 3 components with the same form but I pass them different props. I got CreateForm.js, ViewForm.js (readonly with the delete button) and UpdateForm.js. I used to work with PHP, so I always did these in one form. I use React and Redux to manage the store. When I'm in the CreateForm component, I pass to my sub-components this props createForm={true} to not fill the inputs with a value and don't disable them. In my ViewForm component, I pass this props readonly="readonly". And I got another problem with a textarea who is filled with a value and is not updatable. React textarea with value is readonly but need to be updatedWhat's the best structure to have only one component which handles these different states of the form? Do you have any advice, tutorials, videos, demos to share?

2015-10-20 13:20:59Z

I got one form who is used to Create, Read, Update and Delete. I created 3 components with the same form but I pass them different props. I got CreateForm.js, ViewForm.js (readonly with the delete button) and UpdateForm.js. I used to work with PHP, so I always did these in one form. I use React and Redux to manage the store. When I'm in the CreateForm component, I pass to my sub-components this props createForm={true} to not fill the inputs with a value and don't disable them. In my ViewForm component, I pass this props readonly="readonly". And I got another problem with a textarea who is filled with a value and is not updatable. React textarea with value is readonly but need to be updatedWhat's the best structure to have only one component which handles these different states of the form? Do you have any advice, tutorials, videos, demos to share?I found the Redux Form package. It does a really good job! So, you can use Redux with React-Redux. First you have to create a form component (obviously):After this, you connect the component which handles the form:And add the redux-form reducer in your combined reducers:And the validator module looks like this:After the form is completed, when you want to fill all the fields with some values, you can use the initialize function:Another way to populate the forms is to set the initialValues.If you got any other way to handle this, just leave a message! Thank you.There is also react-redux-form (step-by-step), which seems exchange some of redux-form's javascript (& boilerplate) with markup declaration. It looks good, but I've not used it yet.A cut and paste from the readme:./components/my-form-component.jsThe react-redux-form docs provide a comparison vs redux-form:https://davidkpiano.github.io/react-redux-form/docs/guides/compare-redux-form.htmlFor those who doesn't care about an enormous library for handling form related issues, I would recommend redux-form-utils.It can generate value and change handlers for your form controls, generate reducers of the form, handy action creators to clear certain(or all) fields, etc.All you need to do is assemble them in your code.By using redux-form-utils, you end up with form manipulation like following:However, this library only solves problem C and U, for R and D, maybe a more integrated Table component is to antipate.Just another thing for those who want to create fully controlled form component without using oversized library.ReduxFormHelper - a small ES6 class, less than 100 lines:It doesn't do all the work for you. However it facilitates creation, validation and handling of a controlled form component.

You may just copy & paste the above code into your project or instead, include the respective library - redux-form-helper (plug!).The first step is add specific data to Redux state which will represent the state of our form.

These data will include current field values as well as set of error flags for each field in the form.The form state may be added to an existing reducer or defined in a separate reducer.Furthermore it's necessary to define specific action initiating update of the form state as well as respective action creator.Action example:Reducer example:The second and final step is create a container component for our form and connect it with respective part of Redux state and actions.Also we need to define a form model specifying validation of form fields.

Now we instantiate ReduxFormHelper object as a member of the component and pass there our form model and a callback dispatching update of the form state.Then in the component's render() method we have to bind each field's onChange and the form's onSubmit events with processField() and processForm() methods respectively as well as display error blocks for each field depending on the form error flags in the state.The example below uses CSS from Twitter Bootstrap framework.Container Component example:Demo

Is there a tool to convert JavaScript files to TypeScript [closed]

Gisway

[Is there a tool to convert JavaScript files to TypeScript [closed]](https://stackoverflow.com/questions/14412164/is-there-a-tool-to-convert-javascript-files-to-typescript)

Now TypeScript came out, it is an exciting news for me, but how can I convert all the existing JavaScript files to TypeScript.

2013-01-19 07:30:46Z

Now TypeScript came out, it is an exciting news for me, but how can I convert all the existing JavaScript files to TypeScript.I fear this will be very problematic. TypeScript is a superset of JavaScript. This implies that all valid JavaScript code is also valid TypeScript code. Which is just wrong. The following code is correct in JavaScript, but creates an error in TypeScript:You can get the dynamic behaviour of JavaScript by declaring data as "ambient"Now this will work in TypeScript, too. Nevertheless you can change the extension of a .js file to .ts and pass this file to the TypeScript compiler. This really confused me and I asked the question in the TypeScript IRC channel on freenode. It turned out that the Typescript compiler checks its input for valid JavaScript and just doesn't do anything in case it finds something. Intuitively this sounds good. You should be able to "convert" all your JavaScript to Typescript by merely updating the file extensions and be good to go. Unfortunately this doesn't work as expected. Let's assume you've got this code:Edit:

I've just tried to compile this and it doesn't work. I'm sorry, I seem to have been mistaken: The TypeScript compiler doesn't even accept pure JavaScript. I'll try to find out what went wrong.You've changed the file extension to .ts and use the function func in your other code. At first everything seems fine but then an ugly bug turns up. You decide that some static type checking would probably help you and you change the code to:But now this is no longer valid JavaScript code and will cause the compiler to generate lots of error messages. After all data has no member "z". ...

This behaviour could be avoided if the default type would always "any" but then type inference would be utterly useless.So how do you solve this problem ?

The answer is: declaration files.

You can use your JavaScript code "as is" in the project and still get static type checking with the help of a few .d.ts files. They inform the compiler what variables, methods and "classes" are declared in a JavaScript file, including their types. Therefore they allow for compile-time type checking and fantastic intellisense. A .d.ts file for my example would beSave this as "myjsfile.d.ts" and import it to typescript withbe sure to include the JavaScript script in your html file above the compiled typescript.

Here's an interesting link. You might be interested in the section "Turning JavaScript into TypeScript".Update: Tool is described in details in this postReSharper starting with version 9 (EAP builds available) has functionality to automatically convert JavaScript code into TypeScript. You can start with renaming .js file into .ts and see R# suggestions like this one:Haven't tried it on real world examples. But it is capable of converting large number of JavaScript patterns.From terminal (mac):Renames all .js files to .tsThis is somewhat tongue-in-cheek - but as Benjamin points out above JavaScript files are valid TypeScript.

If you want to add types, classes, interfaces, etc to your JavaScript - you will yourself need to design and change your code using these concepts - there is little/no automatic conversion for this.With GNU findutils (most *nixes) + Bash, just do:

How to unbind a listener that is calling event.preventDefault() (using jQuery)?

klaus

[How to unbind a listener that is calling event.preventDefault() (using jQuery)?](https://stackoverflow.com/questions/1551389/how-to-unbind-a-listener-that-is-calling-event-preventdefault-using-jquery)

jquery toggle  calls preventDefault() by default, so the defaults don't work.

you can't click a checkbox, you cant click a link etc etcis it possible to restore the default handler?

2009-10-11 18:30:45Z

jquery toggle  calls preventDefault() by default, so the defaults don't work.

you can't click a checkbox, you cant click a link etc etcis it possible to restore the default handler?In my case:$('#some_link').unbind('click'); worked as the only method to restore the default action.As seen over here: https://stackoverflow.com/a/1673570/211514Its fairly simpleLets suppose you do something likenow to revert it to the original situation, do the below...From this website.It is not possible to restore a preventDefault() but what you can do is trick it :)If you want to go a step further you can even use the trigger button to trigger an event.in some cases* you can initially return false instead of e.preventDefault(), then when you want to restore the default to return true.*Meaning when you don't mind the event bubbling and you don't use the e.stopPropagation() together with e.preventDefault() Also see similar question (also in stack Overflow)or in the case of checkbox you can have something like: You can restore the default action (if it is a HREF follow) by doing this:window.location = $(this).attr('href');if it is a link then $(this).unbind("click"); would re-enable the link clicking and the default behavior would be restored.I have created a demo JS fiddle to demonstrate how this works:Here is the code of the JS fiddle:HTML:Javascript:Test this code, I think solve your problem:ReferenceThe best way to do this by using namespace. It is a safe and secure way. Here .rb is the namespace which ensures unbind function works on that particular keydown but not on others.ref1: http://idodev.co.uk/2014/01/safely-binding-to-events-using-namespaces-in-jquery/ref2: http://jqfundamentals.com/chapter/eventsDisable:Enable:I had a problem where I needed the default action only after some custom action (enable otherwise disabled input fields on a form) had concluded. I wrapped the default action (submit()) into an own, recursive function (dosubmit()).Use a boolean:I use this in a Progressive Web App to prevent scrolling/zooming on some 'pages' while allowing on others.You can set to form 2 classes. After you set your JS script to one of them, when you want to disable your script, you just delete the class with binded script from this form.HTML: JS I'm not sure you're what you mean: but here's a solution for a similar (and possibly the same) problem...I often use preventDefault() to intercept items. However: it's not the only method of interception... often you may just want a "question" following which behaviour continues as before, or stops. 

In a recent case I used the following solution:$("#content").on('click', '#replace', (function(event){

return confirm('Are you sure you want to do that?')

}));Basically, the "prevent default" is meant to intercept and do something else: the "confirm" is designed for use in ... well - confirming!

TypeError: Illegal Invocation on console.log.apply

Jacksonkr

[TypeError: Illegal Invocation on console.log.apply](https://stackoverflow.com/questions/8159233/typeerror-illegal-invocation-on-console-log-apply)

If you run this in the chrome console:Chrome gives you back an error:Why? (Tested on Chrome 15 via OSX)

2011-11-16 21:50:50Z

If you run this in the chrome console:Chrome gives you back an error:Why? (Tested on Chrome 15 via OSX)It may not work in cases when execution context changed from console to any other object:https://bugs.chromium.org/p/chromium/issues/detail?id=48662

Return index of greatest value in an array

Stephen

[Return index of greatest value in an array](https://stackoverflow.com/questions/11301438/return-index-of-greatest-value-in-an-array)

I have this:What's the best way to return the index of the highest value into another variable?

2012-07-02 21:27:20Z

I have this:What's the best way to return the index of the highest value into another variable?This is probably the best way, since it’s reliable and works on old browsers:There’s also this one-liner:It performs twice as many comparisons as necessary and will throw a RangeError on large arrays, though. I’d stick to the function.In one line and probably faster then arr.indexOf(Math.max.apply(Math, arr)):Where:About the reduce() method (from "JavaScript: The Definitive Guide" by David Flanagan):Here is another solution, If you are using ES6 using spread operator:Unless I'm mistaken, I'd say it's to write your own function.If you are utilizing underscore, you can use this nice short one-liner:It will first find the value of the largest item in the array, in this case 22. Then it will return the index of where 22 is within the array, in this case 2.This returns [5e-324, -1] if the array is empty.  If you want just the index, put [1] after.EDIT: Years ago I gave an answer to this that was gross, too specific, and too complicated. So I'm editing it. I favor the functional answers above for their neat factor but not their readability; but if I were more familiar with javascript then I might like them for that, too.   Pseudo code:Track index that contains largest value. Assume index 0 is largest initially. Compare against current index. Update index with largest value if necessary.   Code:pass array to haystack and Math.max(...array) to needle. This will give all max elements of the array, and it is more extensible (for example, you also need to find min values)If you create a copy of the array and sort it descending, the first element of the copy will be the largest. Than you can find its index in the original array.Time complexity is O(n) for the copy, O(n*log(n)) for sorting and O(n) for the indexOf. If you need to do it faster, Ry's answer is O(n).A stable version of this function looks like this:Simple

Creating range in JavaScript - strange syntax

Benjamin Gruenbaum

[Creating range in JavaScript - strange syntax](https://stackoverflow.com/questions/18947892/creating-range-in-javascript-strange-syntax)

I've run into the following code in the es-discuss mailing list:This producesWhy is this the result of the code? What's happening here?

2013-09-22 19:30:08Z

I've run into the following code in the es-discuss mailing list:This producesWhy is this the result of the code? What's happening here?Understanding this "hack" requires understanding several things:They're rather advanced topics in javascript, so this will be more-than-rather long. We'll start from the top. Buckle up!What's an array, really? A regular object, containing integer keys, which map to values. It has other special features, for instance the magical length variable, but at it's core, it's a regular key => value map, just like any other object. Let's play with arrays a little, shall we?We get to the inherent difference between the number of items in the array, arr.length, and the number of key=>value mappings the array has, which can be different than arr.length.Expanding the array via arr.length does not create any new key=>value mappings, so it's not that the array has undefined values, it does not have these keys. And what happens when you try to access a non-existent property? You get undefined.Now we can lift our heads a little, and see why functions like arr.map don't walk over these properties. If arr[3] was merely undefined, and the key existed, all these array functions would just go over it like any other value:I intentionally used a method call to further prove the point that the key itself was never there: Calling undefined.toUpperCase would have raised an error, but it didn't. To prove that:And now we get to my point: How Array(N) does things. Section 15.4.2.2 describes the process. There's a bunch of mumbo jumbo we don't care about, but if you manage to read between the lines (or you can just trust me on this one, but don't), it basically boils down to this:(operates under the assumption (which is checked in the actual spec) that len is a valid uint32, and not just any number of value)So now you can see why doing Array(5).map(...) wouldn't work - we don't define len items on the array, we don't create the key => value mappings, we simply alter the length property.Now that we have that out of the way, let's look at the second magical thing:What apply does is basically take an array, and unroll it as a function call's arguments. That means that the following are pretty much the same:Now, we can ease the process of seeing how apply works by simply logging the arguments special variable:It's easy to prove my claim in the second-to-last example:(yes, pun intended). The key => value mapping may not have existed in the array we passed over to apply, but it certainly exists in the arguments variable. It's the same reason the last example works: The keys do not exist on the object we pass, but they do exist in arguments.Why is that? Let's look at Section 15.3.4.3, where Function.prototype.apply is defined. Mostly things we don't care about, but here's the interesting portion:Which basically means: argArray.length. The spec then proceeds to do a simple for loop over length items, making a list of corresponding values (list is some internal voodoo, but it's basically an array). In terms of very, very loose code:So all we need to mimic an argArray in this case is an object with a length property. And now we can see why the values are undefined, but the keys aren't, on arguments: We create the key=>value mappings.Phew, so this might not have been shorter than the previous part. But there'll be cake when we finish, so be patient! However, after the following section (which'll be short, I promise) we can begin dissecting the expression. In case you forgot, the question was how does the following work:So! We saw what happens when you pass a length argument to Array, but in the expression, we pass several things as arguments (an array of 5 undefined, to be exact). Section 15.4.2.1 tells us what to do. The last paragraph is all that matters to us, and it's worded really oddly, but it kind of boils down to:Tada! We get an array of several undefined values, and we return an array of these undefined values.Finally, we can decipher the following:We saw that it returns an array containing 5 undefined values, with keys all in existence.Now, to the second part of the expression:This will be the easier, non-convoluted part, as it doesn't so much rely on obscure hacks.Doing Number(something) (section 15.7.1) converts something to a number, and that is all. How it does that is a bit convoluted, especially in the cases of strings, but the operation is defined in section 9.3 in case you're interested.call is apply's brother, defined in section 15.3.4.4. Instead of taking an array of arguments, it just takes the arguments it received, and passes them forward.Things get interesting when you chain more than one call together, crank the weird up to 11:This is quite wtf worthy until you grasp what's going on. log.call is just a function, equivalent to any other function's call method, and as such, has a call method on itself as well:And what does call do? It accepts a thisArg and a bunch of arguments, and calls its parent function. We can define it via apply  (again, very loose code, won't work):Let's track how this goes down:It's not over yet. Let's see what happens when you supply a function to most array methods:If we don't provide a this argument ourselves, it defaults to window. Take note of the order in which the arguments are provided to our callback, and let's weird it up all the way to 11 again:Whoa whoa whoa...let's back up a bit. What's going on here? We can see in section 15.4.4.18, where forEach is defined, the following pretty much happens:So, we get this:Now we can see how .map(Number.call, Number) works:Which returns the transformation of i, the current index, to a number.The expressionWorks in two parts:The first part creates an array of 5 undefined items. The second goes over that array and takes its indices, resulting in an array of element indices:Disclaimer: This is a very formal description of the above code - this is how I know how to explain it. For a simpler answer - check Zirak's great answer above. This is a more in depth specification in your face and less "aha".Several things are happening here. Let's break it up a bit.In the first line, the array constructor is called as a function with Function.prototype.apply.  Note: Notice the difference here between Array.apply(0,{length: 5}) and Array(5), the first creating five times the primitive value type undefined and the latter creating an empty array of length 5. Specifically, because of .map's behavior (8.b) and specifically [[HasProperty] .So the code above in a compliant specification is the same as:Now off to the second part.Thus, the code above takes the five undefined values and maps each to its index in the array.Which is why we get the result to our code.As you said, the first part:creates an array of 5 undefined values.The second part is calling the map function of the array which takes 2 arguments and returns a new array of the same size.The first argument which map takes is actually a function to apply on each element in the array, it is expected to be a function which takes 3 arguments and returns a value.

For example:if we pass the function foo as the first argument it will be called for each element withThe second argument which map takes is being passed to the function which you pass as the first argument. But it would not be a, b, nor c in case of foo, it would be this.Two examples:and another one just to make it clearer:So what about Number.call ?Number.call is a function that takes 2 arguments, and tries to parse the second argument to a number (I'm not sure what it does with the first argument).Since the second argument that map is passing is the index, the value that will be placed in the new array at that index is equal to the index. Just like the function baz in the example above. Number.call will try to parse the index - it will naturally return the same value.The second argument you passed to the map function in your code doesn't actually have an effect on the result. Correct me if I'm wrong, please.An array is simply an object comprising the 'length' field and some methods (e.g. push). So arr in var arr = { length: 5} is basically the same as an array where the fields 0..4 have the default value which is undefined (i.e. arr[0] === undefined yields true).

As for the second part, map, as the name implies, maps from one array to a new one. It does so by traversing through the original array and invoking the mapping-function on each item.All that's left is to convince you that the result of mapping-function is the index. The trick is to use the method named 'call'(*) which invokes a function with the small exception that the first param is set to be the 'this' context, and the second becomes the first param (and so on). Coincidentally, when the mapping-function is invoked, the second param is the index.Last but not least, the method which is invoked is the Number "Class", and as we know in JS, a "Class" is simply a function, and this one (Number) expects the first param to be the value.(*) found in Function's prototype (and Number is a function).MASHAL

Check with jquery if div has overflowing elements

Justin Meltzer

[Check with jquery if div has overflowing elements](https://stackoverflow.com/questions/7668636/check-with-jquery-if-div-has-overflowing-elements)

I have a div with a fixed height and overflow:hidden;I want to check with jQuery if the div has elements that are overflowing past the fixed height of the div. How can I do this?

2011-10-05 22:46:02Z

I have a div with a fixed height and overflow:hidden;I want to check with jQuery if the div has elements that are overflowing past the fixed height of the div. How can I do this?You actually don't need any jQuery to check if there is an overflow happening or not. Using element.offsetHeight, element.offsetWidth , element.scrollHeight and element.scrollWidth you can determine if your element have content bigger than it's size:See example in action: FiddleBut if you want to know what element inside your element is visible or not then you need to do more calculation. There is three states for a child element in terms of visibility:If you want to count semi-visible items it would be the script you need:And if you don't want to count semi-visible you can calculate with a little difference.I had the same question as the OP, and none of those answers fitted my needs. I needed a simple condition, for a simple need.Here's my answer:Also, you can change scrollWidth by scrollHeight if you need to test the either case. So I used the overflowing jquery library: https://github.com/kevinmarx/overflowingAfter installing the library, if you want to assign the class overflowing to all overflowing elements, you simply run: This will then give the class overflowing, as in  <div class="targetElement overflowing"> to all elements that are overflowing. You could then add this to some event handler(click, mouseover) or other function that will run the above code so that it updates dynamically. Partially based on Mohsen's answer (the added first condition covers the case where the child is hidden before the parent):Then just do:One method is to check scrollTop against itself.  Give the content a scroll value larger than its size and then check to see if its scrollTop is 0 or not (if it is not 0, it has overflow.)http://jsfiddle.net/ukvBf/In plain English: Get the parent element. Check it's height, and save that value. Then loop through all the child elements and check their individual heights.This is dirty, but you might get the basic idea:

http://jsfiddle.net/VgDgz/Here's a pure jQuery solution, but it's rather messy:This is the jQuery solution that worked for me. offsetWidth etc. didn't work.If this doesn't work, ensure that elements' parent has the desired width (personally, I had to use parent().parent()). position is relative to the parent. I've also included extra_width because my elements ("tags") contain images which take small time to load, but during the function call they have zero width, spoiling the calculation. To get around that, I use the following calling code:Hope this helps.I fixed this by adding another div in the one that overflows.

Then you compare the heights of the 2 divs.and the jsThis looks easier...

remove objects from array by object property

Dan Kanze

[remove objects from array by object property](https://stackoverflow.com/questions/16491758/remove-objects-from-array-by-object-property)

How do I remove an object from the array by matching object property?Only native JavaScript please.I am having trouble using splice because length diminishes with each deletion.

Using clone and splicing on orignal index still leaves you with the problem of diminishing length.

2013-05-10 22:36:20Z

How do I remove an object from the array by matching object property?Only native JavaScript please.I am having trouble using splice because length diminishes with each deletion.

Using clone and splicing on orignal index still leaves you with the problem of diminishing length.I assume you used splice something like this?All you need to do to fix the bug is decrement i for the next time around, then (and looping backwards is also an option):To avoid linear-time deletions, you can write array elements you want to keep over the array:and to avoid linear-time lookups in a modern runtime, you can use a hash set:which can be wrapped up in a nice function:If you don’t need to do it in place, that’s Array#filter:You can remove an item by one of its properties without using any 3rd party libs like this:If you want to modify the existing array itself, then we have to use splice. Here is the little better/readable way using findWhere of underscore/lodash:(without lodash/underscore)With ES5 onwards we have findIndex method on array, so its easy without lodash/underscore (ES5 is supported in almost all morden browsers)About findIndex, and its Browser compatibilityfindIndex works for modern browsers:If you just want to remove it from the existing array and not create a new one, try:Loop in reverse by decrementing i to avoid the problem:Or use filter:As an alternative, more "functional" solution, working on ECMAScript 5, you could use:According to the definition of 'Array.prototype.reduceRight'  in ECMA-262:So this is a valid usage of reduceRight.Check this out using Set and ES6 filter.Here is JsFiddle:

https://jsfiddle.net/jsq0a0p1/1/To delete an object by it's id in given array;as per your answer will be like this. when you click some particular object send the index in the param for the delete me function. This simple code will work like charm.with filter & indexOfwith filter & includesIf you like short and self descriptive parameters or if you don't want to use splice and go with a straight forward filter or if you are simply a SQL person like me:And a sample usage:

Why「use strict」improves performance 10x in this example?

exebook

[Why「use strict」improves performance 10x in this example?](https://stackoverflow.com/questions/38411552/why-use-strict-improves-performance-10x-in-this-example)

Following the question Extending String.prototype performance I am really intrigued, because just adding "use strict" to a String.prototype method improved performance 10 times. The explanation by bergi is short and does not explain it to me. Why there is such a dramatic difference between two almost identical methods, that only differ in "use strict" at the top? Can you explain in more detail and with the theory behind this?Result:

2016-07-16 13:09:48Z

Following the question Extending String.prototype performance I am really intrigued, because just adding "use strict" to a String.prototype method improved performance 10 times. The explanation by bergi is short and does not explain it to me. Why there is such a dramatic difference between two almost identical methods, that only differ in "use strict" at the top? Can you explain in more detail and with the theory behind this?Result:In strict mode, the this context is not forced to be an object. If you call a function on a non-object, this will just be that non-object.In contrast, in non-strict mode, the this context is always first wrapped in an object if it's not already an object. For example, (42).toString() first wraps 42 in a Number object and then calls Number.prototype.toString with the Number object as this context. In strict mode, the this context is left untouched and just calls Number.prototype.toString with 42 as this context.In your case, the non-strict mode version spends a lot of time wrapping and unwrapping primitive strings into String object wrappers and back. The strict mode version on the other hand directly works on the primitive string, which improves performance.

Global variables in Javascript across multiple files

Goro

[Global variables in Javascript across multiple files](https://stackoverflow.com/questions/2932782/global-variables-in-javascript-across-multiple-files)

A bunch of my JavaScript code is in an external file called helpers.js. Inside the HTML that calls this JavaScript code I find myself in need of knowing if a certain function from helpers.js has been called.I have attempted to create a global variable by defining:In global scope both in my HTML code and in helpers.js.Heres what my html code looks like:Is what I am trying to do even feasible? 

2010-05-28 21:54:57Z

A bunch of my JavaScript code is in an external file called helpers.js. Inside the HTML that calls this JavaScript code I find myself in need of knowing if a certain function from helpers.js has been called.I have attempted to create a global variable by defining:In global scope both in my HTML code and in helpers.js.Heres what my html code looks like:Is what I am trying to do even feasible? You need to declare the variable before you include the helpers.js file.  Simply create a script tag above the include for helpers.js and define it there.The variable can be declared in the .js file and simply referenced in the HTML file.

My version of helpers.js:And a page to test it:You'll see the test alert() will display two different things, and the value written to the page will be different the second time.OK, guys, here's my little test too. I had a similar problem, so I decided to test out 3 situations:All the results were as expected.Instead of browsing tutorials, I found it easier to try it out, so I did. My conclusion: whenever you include an external JS file in your HTML page, the contents of the external JS gets "copy/pasted" into your HTML page before the page is rendered. Or into your PHP page if you will. Please correct me if I'm wrong here. Thanx.My example files follow:EXTERNAL JS:HTML 1:HTML 2I think you should be using "local storage" rather than global variables.If you are concerned that "local storage" may not be supported in very old browsers, consider using an existing plug-in which checks the availability of "local storage" and uses other methods if it isn't available.I used  http://www.jstorage.info/ and I'm happy with it so far.Hi to pass values from one js file to another js file we can use Local storage conceptTwo.js fileThree.js FileYou can make a json object like:in fileA.js And access it from fileB.js like: 

globalVariable.example_attribute//Javascript file 1//Javascript file 2Don't forget to link your JS files in html :)

What is the difference between node.js and io.js?

maudulus

[What is the difference between node.js and io.js?](https://stackoverflow.com/questions/27309412/what-is-the-difference-between-node-js-and-io-js)

What is the difference between io.js and node.js? The more recent io.js is forked from node.js, and is furthermore made by some of the same people that made node.js. What are the key differences that have lead to this fork, and what does it mean for the node.js community as a whole?  

2014-12-05 05:33:21Z

What is the difference between io.js and node.js? The more recent io.js is forked from node.js, and is furthermore made by some of the same people that made node.js. What are the key differences that have lead to this fork, and what does it mean for the node.js community as a whole?  What are the differences?io.js:Node.js:It was primarily split for three reasons: faster, more active releases and development towards a 1.0.0 release, for a more community-driven development rather than the Advisory Board, and the use of semver for releases.The Advisory Board was Joyent's plan to bring Node.js a more centralized, faster way to plan development and plan future features along the road towards a 1.0.0 release. This was planned to be done by putting together a board of larger companies that use Node.jsQuote from Joyent's blog:Previously, Node.js was run via mailing lists, GitHub issues, and anyone could contribute their idea. This idea started getting some hate because it brought control away from your average, everyday contributor and moved the power to the "big shots": companies such as Walmart, Yahoo, IBM, Microsoft, Joyent, Netflix, and PayPal.In fact, there are practical differences between Node.js and io.js. Some facts forgotten by other answers:Why? Because io.js 1.6.2 ships with Google V8 4.1.0.25, and Node.js 0.12.1 ships with V8 3.28.73. Also, flags for ECMAScript 6 are different between Node.js and io.js. io.js's guide to ECMAScript 6 flags can be found here.The io.js website says: "io.js is a node & npm compatible javascript platform." It's a set of tools (a runtime/VM, a package manager, etc.) which is compatible with what currently exists as node. Any differences will presumably be in the underlying implementation, and any extensions that io.js adds beyond the node.js feature set.(Why would something compatible with what already exists divide the community? Why's that a bad thing?)Note that io.js hasn't even been released yet! However the io.js roadmap illustrates some particularly relevant differences between node and io.So as I understand it, io.js is the 1.0-alpha1 and future release of node, but with:io.js was a fork of node.js. But now io.js and node.js again collaborate.

So that's why node.js directly jump from  0.12.x directly to 4.0.0 as node.js version 4.0.0 includes all the major updates from io.js version 3.0.0

changing source on html5 video tag

sashn

[changing source on html5 video tag](https://stackoverflow.com/questions/5235145/changing-source-on-html5-video-tag)

i'm trying to build a video player, that works everywhere. so far i'd be going with:(as seen on several sites, for example video for everybody)

so far, so good.but now i also want some kind of playlist/menu along with the video player, from which i can select other videos. those should be opened within my player right away. so i will have to "dynamically change the source of the video" (as seen on dev.opera.com/articles/everything-you-need-to-know-html5-video-audio/ - section "Let's look at another movie") with javascript. let's forget about the flashplayer (and thus IE) part for the time being, i will try to deal with that later.so my JS to change the <source> tags should be something like:problem is, this doesnt work in all browsers. namely, firefox =O

there is a nice page, where you can observe the problem i'm having: http://www.w3.org/2010/05/video/mediaevents.htmlas soon as i trigger the load() method (in firefox, mind you), the video player dies.now i have found out that when i don't use multiple <source> tags, but instead just one src attribute within the <video> tag, the whole thing DOES work in firefox.so my plan is to just use that src attribute and determine the appropriate file using the canPlayType() function.am i doing it wrong somehow or complicating things??

2011-03-08 16:15:48Z

i'm trying to build a video player, that works everywhere. so far i'd be going with:(as seen on several sites, for example video for everybody)

so far, so good.but now i also want some kind of playlist/menu along with the video player, from which i can select other videos. those should be opened within my player right away. so i will have to "dynamically change the source of the video" (as seen on dev.opera.com/articles/everything-you-need-to-know-html5-video-audio/ - section "Let's look at another movie") with javascript. let's forget about the flashplayer (and thus IE) part for the time being, i will try to deal with that later.so my JS to change the <source> tags should be something like:problem is, this doesnt work in all browsers. namely, firefox =O

there is a nice page, where you can observe the problem i'm having: http://www.w3.org/2010/05/video/mediaevents.htmlas soon as i trigger the load() method (in firefox, mind you), the video player dies.now i have found out that when i don't use multiple <source> tags, but instead just one src attribute within the <video> tag, the whole thing DOES work in firefox.so my plan is to just use that src attribute and determine the appropriate file using the canPlayType() function.am i doing it wrong somehow or complicating things??I hated all these answers because they were too short or relied on other frameworks.Here is "one" vanilla JS way of doing this, working in Chrome, please test in other browsers:http://jsfiddle.net/mattdlockyer/5eCEu/2/HTML:JS:Modernizr worked like a charm for me.What I did is that I didn't use <source>. Somehow this screwed things up, since the video only worked the first time load() was called. Instead I used the source attribute inside the video tag -> <video src="blabla.webm" /> and used Modernizr to determine what format the browser supported.Hopefully this will help you :)If you don't want to use Modernizr , you can always use CanPlayType().Your original plan sounds fine to me.  You'll probably find more browser quirks dealing with dynamically managing the <source> elements, as indicated here by the W3 spec note:http://dev.w3.org/html5/spec/Overview.html#the-source-elementI solved this with this simple method Instead of getting the same video player to load new files, why not erase the entire <video> element and recreate it. Most browsers will automatically load it if the src's are correct.Example (using Prototype):Just put a div and update the content...According to the specSo what you are trying to do is apparently not supposed to work.Yaur: Although what you have copied and pasted is good advice, this does not mean that it is impossible to change the source element of an HTML5 video element elegantly, even in IE9 (or IE8 for that matter).(This solution does NOT involve replacing the entire video element, as it is bad coding practice).A complete solution to changing/switching videos in HTML5 video tags via javascript can be found here and is tested in all HTML5 browser (Firefox, Chrome, Safari, IE9, etc).If this helps, or if you're having trouble, please let me know.I come with this to change video source dynamically. "canplay" event sometime doesn't fire in Firefox so i have added "loadedmetadata". Also i pause previous video if there is one...This is my solution:Using the <source /> tags proved difficult for me in Chrome 14.0.835.202 specifically, although it worked fine for me in FireFox. (This could be my lack of knowledge, but I thought an alternate solution might be useful anyway.)  So, I ended up just using a <video /> tag and setting the src attribute right on the video tag itself.  The canPlayVideo('<mime type>') function was used to determine whether or not the specific browser could play the input video.  The following works in FireFox and Chrome.  Incidently, both FireFox and Chrome are playing the "ogg" format, although Chrome recommends "webm".  I put the check for browser support of "ogg" first only because other posts have mentioned that FireFox prefers the ogg source first (i.e. <source src="..." type="video/ogg"/> ).  But, I haven't tested (and highly doubt) whether or not it the order in the code makes any difference at all when setting the "src" on the video tag.HTMLJavaScript I have been researching this for quite a while and I am trying to do the same thing, so hopefully this will help someone else. I have been using crossbrowsertesting.com and literally testing this in almost every browser known to man. The solution I've got currently works in Opera, Chrome, Firefox 3.5+, IE8+, iPhone 3GS, iPhone 4, iPhone 4s, iPhone 5, iPhone 5s, iPad 1+, Android 2.3+, Windows Phone 8.Dynamically Changing SourcesDynamically changing the video is very difficult, and if you want a Flash fallback you will have to remove the video from the DOM/page and re-add it so that Flash will update because Flash will not recognize dynamic updates to Flash vars. If you're going to use JavaScript to change it dynamically, I would completely remove all <source> elements and just use canPlayType to set the src in JavaScript and break or return after the first supported video type and don't forget to dynamically update the flash var mp4. Also, some browsers won't register that you changed the source unless you call video.load(). I believe the issue with .load() you were experiencing can be fixed by first calling video.pause(). Removing and adding video elements can slow down the browser because it continues buffering the removed video, but there's a workaround.Cross-browser SupportAs far as the actual cross-browser portion, I arrived at Video For Everybody as well. I already tried the MediaelementJS Wordpress plugin, which turned out to cause a lot more issues than it resolved. I suspect the issues were due to the Wordpress plug-in and not the actually library. I'm trying to find something that works without JavaScript, if possible. So far, what I've come up with is this plain HTML:Important notes: Edit:I have a similar web app and am not facing that sort of problem at all.  What i do is something like this:then when i want to change the sources i have a function that does something like this:I do this so that the user can make their way through a playlist, but you could check for userAgent and then load the appropriate file that way.  I tried using multiple source tags like everyone on the internet suggested, but i found it much cleaner, and much more reliable to manipulate the src attribute of a single source tag.  The code above was written from memory, so i may have glossed over some of hte details, but the general idea is to dynamically change the src attribute of the source tag using javascript, when appropriate.Try moving the OGG source to the top. I've noticed Firefox sometimes gets confused and stops the player when the one it wants to play, OGG, isn't first.Worth a try.Using JavaScript and jQuery:Another way you can do in Jquery.

Executing JavaScript without a browser?

Daniel

[Executing JavaScript without a browser?](https://stackoverflow.com/questions/2941411/executing-javascript-without-a-browser)

I am looking into Javascript programming without a browser. I want to run scripts from the Linux or Mac OS X command line, much like we run any other scripting language (ruby, php, perl, python...)I looked into spider monkey (Mozilla) and v8 (Google), but both of these appear to be embedded.  Is anyone using Javascript as a scripting language to be executed from the command line?If anyone is curious why I am looking into this, I've been poking around node.js.  The performance of node.js makes me wonder if javascript may be a viable scripting language for processing large data.

2010-05-31 04:48:32Z

I am looking into Javascript programming without a browser. I want to run scripts from the Linux or Mac OS X command line, much like we run any other scripting language (ruby, php, perl, python...)I looked into spider monkey (Mozilla) and v8 (Google), but both of these appear to be embedded.  Is anyone using Javascript as a scripting language to be executed from the command line?If anyone is curious why I am looking into this, I've been poking around node.js.  The performance of node.js makes me wonder if javascript may be a viable scripting language for processing large data.I found this related question on the topic, but if you want direct links, here they are:I'm surprised node.js doesn't come with a shell, but I guess it's really more like an epoll/selector-based callback/event-oriented webserver, so perhaps it doesn't need the full JS feature set, but I'm not too familiar with its inner workings.Since you seem interested in node.js and since it's based on V8, it might be best to follow those instructions on getting a V8 environment set up so you can have a consistent basis for your JavaScript programming (I should hope JSC and V8 are mostly the same, but I'm not sure).Yes, to answer your question, it is possible to use JavaScript as a "regular" scripting language from the command line, without a browser. Since others have not mentioned it yet, I see that it is worth mentioning:On Debian-based systems (and this includes Ubuntu, Linux Mint, and aptosid/sidux, at least), besides the options of installing Rhino and others already mentioned, you have have other options:So, with almost no compilation you will have three of the heavy-weight JavaScript engines at your disposal.Once you have things installed, you can simply create files with the #!/usr/bin/js shebang line and things will just work:I have installed Node.js on an iMac and in bash will work.I know you asked about Linux and Mac;  I am going to provide the answer for Windows, in case other people who are interested in Windows find your question . Windows includes a Javascript engine that can be used from the command line.  All versions of Windows, since Windows 98, have included something called "The Windows Script Host". It's a windows-standard way to support script "engines".  Since the first release, WSH supports JScript, Microsoft's version of Javascript. Among other things, this means that, from a windows command line, you can just invoke the name of any *.js file, and it will run in the JScript engine. (via either wscript.exe or cscript.exe)Since nobody mentioned it: Since Java 1.6 The Java JDK  also comes bundled with a JavaScript commandline and REPL.It is based on Rhino: https://developer.mozilla.org/en/docs/RhinoIn Java 1.6 and 1.7 the command is called jrunscript (jrunscript.exe on Windows) and can be found in the bin folder of the JDK.Starting from Java 1.8 there is bundled a new JavaScript implementation (Nashorn: https://blogs.oracle.com/nashorn/)So in Java 1.8 the command is called jjs (jjs.exe on Windows)FWIW, node.js comes with a shell, try typing in:once you've installed node.js to see it in action. It's pretty standard to install rlwrap to get it to work nicely.You may want to check out Rhino.The Rhino Shell provides a way to run JavaScript scripts in batch mode:I know this is old but you should also try Zombie.js. A headless browser which is insanely fast and ideal for testing !I use Ubuntu 12.10 and js from commandlineIt is available with my installation of java:Some examples:The sky is the limit, then keep right on going.PhantomJS allows you to do this as wellhttp://phantomjs.org/I found this really nifty open source ECMAScript compliant JS Engine completely written in C called duktapeGood luck!Well there is JavaScript as OSA, an extension that provides JavaScript as an alternative to appleScript. I've been using that about 10 years ago, don't know if it's still working with current OS versionsJSDB, available for Linux, Windows, and Mac should fit the bill pretty well.  It uses Mozilla's Spidermonkey Javascript engine and seems to be less of a hassle to install compared to node.js (at least last time I tried node.js a couple of years ago).I found JSDB from this interesting list of Javascript shells: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Shells

Map and filter an array at the same time

Daniel Calderon Mori

[Map and filter an array at the same time](https://stackoverflow.com/questions/34398279/map-and-filter-an-array-at-the-same-time)

I have an array of objects that I want to iterate over to produce a new filtered array. But also, I need to filter out some of the objects from the new array depending of a parameter. I'm trying this:Is that a good approach? Is there a better method? I'm open to use any library such as lodash.

2015-12-21 14:43:13Z

I have an array of objects that I want to iterate over to produce a new filtered array. But also, I need to filter out some of the objects from the new array depending of a parameter. I'm trying this:Is that a good approach? Is there a better method? I'm open to use any library such as lodash.You should use Array.reduce for this.Alternatively, the reducer can be a pure function, like thisUse reduce, Luke!With ES6 you can do it very short:options.filter(opt => !opt.assigned).map(opt => someNewObject)Array.prototype.flatMap is another option.From the MDN page linked above:One line reduce with ES6 fancy spread syntax is here! I'd make a comment, but I don't have the required reputation. A small improvement to Maxim Kuzmin's otherwise very good answer to make it more efficient:ExplanationInstead of spreading the entire result over and over for each iteration, we only append to the array, and only when there's actually a value to insert.Use Array.prototy.filter itselfAt some point, isn't it easier(or just as easy) to use a forEachHowever it would be nice if there was a malter() or fap() function that combines the map and filter functions. It would work like a filter, except instead of returning true or false, it would return any object or a null/undefined.I optimized the answers with the following points:I'll present two solutions, one using forEach, the other using reduce:Solution 1: Using forEachSolution 2: Using reduceI leave it up to you to decide which solution to go for.Using reduce, you can do this in one Array.prototype function. This will fetch all even numbers from an array.You can use the same method and generalize it for your objects, like this.arr will now contain the filtered objects.

What does「export default」do in JSX?

Digweed

[What does「export default」do in JSX?](https://stackoverflow.com/questions/36426521/what-does-export-default-do-in-jsx)

I want to ask what the last sentence means and does (export default HelloWorld;) but I can't find any tutorials about it.

2016-04-05 12:34:42Z

I want to ask what the last sentence means and does (export default HelloWorld;) but I can't find any tutorials about it.Export like export default HelloWorld; and import, such as import React from 'react' are part of the ES6 modules system.A module is a self contained unit that can expose assets to other modules using export, and acquire assets from other modules using import. In your code:In ES6 there are two kinds of exports:Named exports - for example export function func() {} is a named export with the name of func. Named modules can be imported using import { exportName } from 'module';. In this case, the name of the import should be the same as the name of the export. To import the func in the example, you'll have to use import { func } from 'module';. There can be multiple named exports in one module.Default export - is the value that will be imported from the module, if you use the simple import statement import X from 'module'. X is the name that will be given locally to the variable assigned to contain the value, and it doesn't have to be named like the origin export. There can be only one default export.A module can contain both named exports and a default export, and they can be imported together using import defaultExport, { namedExport1, namedExport3, etc... } from 'module';.export default is used to export a single class, function or primitive from a script file.The export can also be written asYou could also write this as a function component like This is used to import this function in another script fileYou don't necessarily import it as HelloWorld you can give it any name as it's a default exportAs the name says, it's used to export functions, objects, classes or expressions from script files or modulesUtiliites.jsThis can be imported and used asApp.jsOrWhen export default is used, this is much simpler. Script files just exports one thing.

cube.jsand used as

App.jsIn Simple Words -Here is a link to get clear understanding : MDN Web DocsSimplest Understanding for default export isExport is ES6's feature which is used to Export a module(file) and use it in some other module(file).Default Export:  Export or Named Export: In React, Vue and many other frameworks the Export is mostly used to export reusable components to make modular based applications.

unit testing of private functions with mocha and node.js

fstab

[unit testing of private functions with mocha and node.js](https://stackoverflow.com/questions/22097603/unit-testing-of-private-functions-with-mocha-and-node-js)

I am using mocha in order to unit test an application written for node.jsI wonder if it's possible to unit test functions that have not been exported in a module.Example:I have a lot of functions defined like this in foobar.jsand a few functions exported as public:The test case is structured as follows:Obviously this does not work, since private_foobar1 is not exported.What is the correct way to unit-test private methods? Does mocha have some built-in methods for doing that?

2014-02-28 14:17:13Z

I am using mocha in order to unit test an application written for node.jsI wonder if it's possible to unit test functions that have not been exported in a module.Example:I have a lot of functions defined like this in foobar.jsand a few functions exported as public:The test case is structured as follows:Obviously this does not work, since private_foobar1 is not exported.What is the correct way to unit-test private methods? Does mocha have some built-in methods for doing that?If the function is not exported by the module, it cannot be called by test code outside the module. That's due to how JavaScript works, and Mocha cannot by itself circumvent this.In the few instances where I determined that testing a private function is the right thing to do, what I've done is set some environment variable that my module checks to determine whether it is running in a test setup or not. If it runs in the test setup, then it exports additional functions that I can then call during testing.The word "environment" is loosely used here. It might mean checking process.env or something else that can communicate to the module "you're being tested now". The instances where I've had to do this were in a RequireJS environment, and I've used module.config for this purpose.Check out the rewire module.  It allows you to get (and manipulate) private variables and functions within a module.So in your case the usage would be something like:Here is a really good workflow to test your private methods explained by Philip Walton, a Google engineer on its blog.Then use a build task or your own build system (for exemple grunt-strip-code) to strip this bloc for production builds.Your tests builds have access to your private api, and your production builds have not.Write your code as this:And your grunt tasks like that In a later article, it explains the "why" of "testing private methods"If you'd prefer to keep it simple, just export the private members as well, but clearly separated from the public API with some convention, e.g. prefix them with an _ or nest them under a single private object.I made an npm package for this purpose that you might find useful: require-fromBasically you expose non-public methods by:note: testExports can be any valid name you want, except exports of course.And from another module:I have added an extra function that I name Internal() and return all private functions from there. This Internal() function is then exported. Example:You can call the internal functions like this:I like this solution best because:I followed @barwin answer and checked how unit tests can be made with rewire module. I can confirm that this solution simply works. The module should be required in two parts - public one and private one. For public functions you can do that in standard way:For private scope:In order to know more about the subject, I created a working example with full module testing, testing includes private and public scope. For further information I encourage you to check the article (https://medium.com/@macsikora/how-to-test-private-functions-of-es6-module-fb8c1345b25f) fully describing the subject, it includes code samples.I know that this is not necessarily the answer you are looking for, but what I have found is that most of the time if a private function is worth testing, it's worth being in its own file.E.g. instead of having private methods in the same file as the public ones, like this...src/thing/PublicInterface.js...you split it up like this:src/thing/PublicInterface.jssrc/thing/internal/helper1.jssrc/thing/internal/helper2.jsThat way, you can easily test helper1 and helper2 as-is, without using Rewire and other "magic" (which, I have found, have their own pain points while debugging, or when you try to make your move towards TypeScript, not to mention poorer understandability for new colleagues). And them being in a sub-folder called internal, or something like that, will help avoiding accidental usage of them in unintended places.P.S.: Another common issue with "private" methods is that if you want to test publicMethod1 and publicMethod2 and mock the helpers, again, you normally need something like Rewire to do that. However, if they are in separate files, you can use Proxyquire to do it, which, unlike Rewire, doesn't need any changes to your build process, is easy to read and to debug, and works well even with TypeScript.To make private methods available for testing, I do this:

How to trigger the onclick event of a marker on a Google Maps V3?

AlexV

[How to trigger the onclick event of a marker on a Google Maps V3?](https://stackoverflow.com/questions/2730929/how-to-trigger-the-onclick-event-of-a-marker-on-a-google-maps-v3)

How do I trigger the onclick event of a marker on a Google Maps from outside the map?I use version 3 of the API. I've seen many tutorials for version 2, but can't find this for version 3.I have a global array (named markers) containing all the marker of the map (google.maps.Marker). Now I want do do something like:Thanks for your help and if you need more info, let me know!

2010-04-28 15:33:19Z

How do I trigger the onclick event of a marker on a Google Maps from outside the map?I use version 3 of the API. I've seen many tutorials for version 2, but can't find this for version 3.I have a global array (named markers) containing all the marker of the map (google.maps.Marker). Now I want do do something like:Thanks for your help and if you need more info, let me know!I've found out the solution! Thanks to Firebug ;)For future Googlers,

If you get an error similar below after you trigger click for a polygonthen try the code below

How to sort an array of objects by multiple fields?

Mike

[How to sort an array of objects by multiple fields?](https://stackoverflow.com/questions/6913512/how-to-sort-an-array-of-objects-by-multiple-fields)

From this original question, how would I apply a sort on multiple fields?Using this slightly adapted structure, how would I sort city (ascending) & then price (descending)?I liked the fact than an answer was given which provided a general approach.  Where I plan to use this code, I will have to sort dates as well as other things.  The ability to "prime" the object seemed handy, if not a little cumbersome.I've tried to build this answer into a nice generic example, but I'm not having much luck.

