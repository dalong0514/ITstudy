How can I remove a specific item from an array?

Walker

[How can I remove a specific item from an array?](https://stackoverflow.com/questions/5767325/how-can-i-remove-a-specific-item-from-an-array)

I have an array of numbers, and I'm using the .push() method to add elements to it.Is there a simple way to remove a specific element from an array?The equivalent of something like -I have to use core JavaScript - frameworks are not allowed.

2011-04-23 22:17:18Z

I have an array of numbers, and I'm using the .push() method to add elements to it.Is there a simple way to remove a specific element from an array?The equivalent of something like -I have to use core JavaScript - frameworks are not allowed.Find the index of the array element you want to remove using indexOf, and then remove that index with splice.The second parameter of splice is the number of elements to remove. Note that splice modifies the array in place and returns a new array containing the elements that have been removed.I don't know how you are expecting array.remove(int) to behave. There are three possibilities I can think of that you might want.To remove an element of an array at an index i:If you want to remove every element with value number from the array:If you just want to make the element at index i no longer exist, but you don't want the indexes of the other elements to change:In this code example I use "array.filter(...)" function to remove unwanted items from an array. This function doesn't change the original array and creates a new one. If your browser doesn't support this function (e.g. Internet Explorer before version 9, or Firefox before version 1.5), consider using the filter polyfill from Mozilla.IMPORTANT ECMAScript 6 "() => {}" arrow function syntax is not supported in Internet Explorer at all, Chrome before 45 version, Firefox before 22 version, and Safari before 10 version. To use ECMAScript 6 syntax in old browsers you can use BabelJS.An additional advantage of this method is that you can remove multiple itemsIMPORTANT "array.includes(...)" function is not supported in Internet Explorer at all, Chrome before 47 version, Firefox before 43 version, Safari before 9 version, and Edge before 14 version so here is polyfill from Mozilla.If the "This-Binding Syntax" proposal is ever accepted, you'll be able to do this:Try it yourself in BabelJS :)ReferenceIt depends on whether you want to keep an empty spot or not.If you do want an empty slot, delete is fine:If you don't, you should use the splice method:And if you need the value of that item, you can just store the returned array's element:In case you want to do it in some order, you can use array.pop() for the last one or array.shift() for the first one (and both return the value of the item too).And if you don't know the index of the item, you can use array.indexOf(item) to get it (in a if() to get one item or in a while() to get all of them). array.indexOf(item) returns either the index or -1 if not found. A friend was having issues in Internet Explorer 8 and showed me what he did. I told him it was wrong, and he told me he got the answer here. The current top answer will not work in all browsers (Internet Explorer 8 for example), and it will only remove the first occurrence of the item.It loops through the array backwards (since indices and length will change as items are removed) and removes the item if it's found. It works in all browsers.There are two major approaches:Be careful when you use delete for an array. It is good for deleting attributes of objects, but not so good for arrays. It is better to use splice for arrays.Keep in mind that when you use delete for an array you could get wrong results for anArray.length. In other words, delete would remove the element, but it wouldn't update the value of length property.You can also expect to have holes in index numbers after using delete, e.g. you could end up with having indexes 1, 3, 4, 8, 9, and 11 and length as it was before using delete. In that case, all indexed for loops would crash, since indexes are no longer sequential.If you are forced to use delete for some reason, then you should use for each loops when you need to loop through arrays. As the matter of fact, always avoid using indexed for loops, if possible. That way the code would be more robust and less prone to problems with indexes.There is no need to use indexOf or splice. However, it performs better if you only want to remove one occurrence of an element. Find and move (move):Use indexOf and splice (indexof):Use only splice (splice):Run-times on nodejs for array with 1000 elements (average over 10000 runs):indexof is approximately 10x slower than move. Even if improved by removing the call to indexOf in splice it performs much worse than move. This provides a predicate instead of a value.NOTE: it will update the given array, and return the affected rows.You can do it easily with the filter method:This removes all elements from the array and also works faster than a combination of slice and indexOf.John Resig posted a good implementation:If you don’t want to extend a global object, you can do something like the following, instead:But the main reason I am posting this is to warn users against the alternative implementation suggested in the comments on that page (Dec 14, 2007):It seems to work well at first, but through a painful process I discovered it fails when trying to remove the second to last element in an array. For example, if you have a 10-element array and you try to remove the 9th element with this:You end up with an 8-element array. Don't know why but I confirmed John's original implementation doesn't have this problem.Underscore.js can be used to solve issues with multiple browsers. It uses in-build browser methods if present. If they are absent like in the case of older Internet Explorer versions it uses its own custom methods.A simple example to remove elements from array (from the website):You can use ES6. For example to delete the value '3' in this case:Output : If you want a new array with the deleted positions removed, you can always delete the specific element and filter out the array. It might need an extension of the array object for browsers that don't implement the filter method, but in the long term it's easier since all you do is this:It should display [1, 2, 3, 4, 6].Check out this code. It works in every major browser.Call this function You can use lodash _.pull (mutate array), _.pullAt (mutate array) or _.without (does't mutate array), OK, for example you have the array below:And we want to delete number 4. You can simply use the below code:If you are reusing this function, you write a reusable function which will be attached to the native array function like below:But how about if you have the below array instead with a few [5]s in the array?We need a loop to check them all, but an easier and more efficient way is using built-in JavaScript functions, so we write a function which use a filter like below instead:Also there are third-party libraries which do help you to do this, like Lodash or Underscore. For more information, look at lodash _.pull, _.pullAt or _.without.ES6 & without mutation:  (October 2016)Here are a few ways to remove an item from an array using JavaScript.All the method described do not mutate the original array, and instead create a new one.Suppose you have an array, and you want to remove an item in position i.One method is to use slice():slice() creates a new array with the indexes it receives. We simply create a new array, from start to the index we want to remove, and concatenate another array from the first position following the one we removed to the end of the array.In this case, one good option is to use filter(), which offers a more declarative approach:This uses the ES6 arrow functions. You can use the traditional functions to support older browsers:or you can use Babel and transpile the ES6 code back to ES5 to make it more digestible to old browsers, yet write modern JavaScript in your code.What if instead of a single item, you want to remove many items?Let's find the simplest solution.You can just create a function and remove items in series:You can search for inclusion inside the callback function:splice() (not to be confused with slice()) mutates the original array, and should be avoided.(originally posted at https://flaviocopes.com/how-to-remove-item-from-array/)Removing a particular element/string from an array can be done in a one-liner:where:theArray : the array you want to remove something particular fromstringToRemoveFromArray : the string you want removed and 1 is the amount of elements you want to remove.NOTE : If "stringToRemoveFromArray" is not located your in array, this will remove last element of array.splice :indexOf :Its always good practice to check if the element exists in your array first, before removing it. If you have access to newer Ecmascript versions on your client's computers (WARNING, may not work on older stations): Where '3' is the value you want removed from the array.

The array would then become : ['1','2','4','5','6']I'm pretty new to JavaScript and needed this functionality. I merely wrote this:Then when I want to use it:Output - As expected.

["item1", "item1"]You may have different needs than I, so you can easily modify it to suit them. I hope this helps someone.If you have complex objects in the array you can use filters? 

In situations where $.inArray or array.splice is not as easy to use. Especially if the objects are perhaps shallow in the array.E.g. if you have an object with an Id field and you want the object removed from an array:Update: This method is recommended only if you cannot use ECMAScript 2015 (formerly known as ES6). If you can use it, other answers here provide much neater implementations.This gist here will solve your problem, and also deletes all occurrences of the argument instead of just 1 (or a specified value).Usage:I want to answer based on ECMAScript 6. Assume, you have an array like below:If you want to delete at a special index like 2, write the below code:But if you want to delete a special item like 3 and you don't know its index, do like below:Hint: please use an arrow function for filter callback unless you will get an empty array.You should never mutate your array. As this is against the functional programming pattern. You can create a new array without referencing the array you want to change data of using the ECMAScript 6 method filter;Suppose you want to remove 5 from the array, you can simply do it like this:This will give you a new array without the value you wanted to remove. So the result will be:For further understanding you can read the MDN documentation on Array.filter.A more modern, ECMAScript 2015 (formerly known as Harmony or ES 6) approach. Given:Then:Yielding: You can use Babel and a polyfill service to ensure this is well supported across browsers.You have 1 to 9 in the array, and you want remove 5. Use the below code:If you want to multiple values. Example:- 1,7,8If you want to remove an array value in an array. Example: [3,4,5]Includes supported browser is link.I know there are a lot of answers already, but many of them seem to over complicate the problem.  Here is a simple, recursive way of removing all instances of a key - calls self until index isn't found.  Yes, it only works in browsers with indexOf, but it's simple and can be easily polyfilled.Stand-alone functionPrototype methodBased on all the answers which were mainly correct and taking into account the best practices suggested (especially not using Array.prototype directly), I came up with the below code:Reviewing the above function, despite the fact that it works fine, I realised there could be some performance improvement. Also using ES6 instead of ES5 is a much better approach. To that end, this is the improved code:How to use:I am currently writing a blog post in which I have benchmarked several solutions for Array without problem and compared the time it takes to run. I will update this answer with the link once I finish that post. Just to let you know, I have compared the above against lodash's without and in case the browser supports Map, it beats lodash! Notice that I am not using Array.prototype.indexOf or Array.prototype.includes as wrapping the exlcudeValues in a Map or Object makes querying faster!You can do a backward loop to make sure not to screw up the indexes, if there are multiple instances of the element.

What is the most efficient way to deep clone an object in JavaScript?

Jeremy Banks

[What is the most efficient way to deep clone an object in JavaScript?](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript)

What is the most efficient way to clone a JavaScript object? I've seen obj = eval(uneval(o)); being used, but that's non-standard and only supported by Firefox. I've done things like obj = JSON.parse(JSON.stringify(o)); but question the efficiency.  I've also seen recursive copying functions with various flaws.

I'm surprised no canonical solution exists.

2012-06-06 14:59:04Z

What is the most efficient way to clone a JavaScript object? I've seen obj = eval(uneval(o)); being used, but that's non-standard and only supported by Firefox. I've done things like obj = JSON.parse(JSON.stringify(o)); but question the efficiency.  I've also seen recursive copying functions with various flaws.

I'm surprised no canonical solution exists.It's called "structured cloning", works experimentally in Node 11 and later, and hopefully will land in browsers. See this answer for more details.If you do not use Dates, functions, undefined, Infinity, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays or other complex types within your object, a very simple one liner to deep clone an object is:JSON.parse(JSON.stringify(object))See Corban's answer for benchmarks.Since cloning objects is not trivial (complex types, circular references, function etc.), most major libraries provide function to clone objects. Don't reinvent the wheel - if you're already using a library, check if it has an object cloning function. For example,For completeness, note that ES6 offers two shallow copy mechanisms: Object.assign() and the spread syntax.

which copies values of all enumerable own properties from one object to another. For example:Checkout this benchmark: http://jsben.ch/#/bWfk9In my previous tests where speed was a main concern I found to be the slowest way to deep clone an object (it is slower than jQuery.extend with deep flag set true by 10-20%).jQuery.extend is pretty fast when the deep flag is set to false (shallow clone). It is a good option, because it includes some extra logic for type validation and doesn't copy over undefined properties, etc., but this will also slow you down a little.If you know the structure of the objects you are trying to clone or can avoid deep nested arrays you can write a simple for (var i in obj) loop to clone your object while checking hasOwnProperty and it will be much much faster than jQuery.Lastly if you are attempting to clone a known object structure in a hot loop you can get MUCH MUCH MORE PERFORMANCE by simply in-lining the clone procedure and manually constructing the object.JavaScript trace engines suck at optimizing for..in loops and checking hasOwnProperty will slow you down as well. Manual clone when speed is an absolute must.Beware using the JSON.parse(JSON.stringify(obj)) method on Date objects - JSON.stringify(new Date()) returns a string representation of the date in ISO format, which JSON.parse() doesn't convert back to a Date object. See this answer for more details.Additionally, please note that, in Chrome 65 at least, native cloning is not the way to go. According to JSPerf, performing native cloning by creating a new function is nearly 800x slower than using JSON.stringify which is incredibly fast all the way across the board.Update for ES6If you are using Javascript ES6 try this native method for cloning or shallow copy.Assuming that you have only variables and not any functions in your object, you can  just use:The HTML standard includes an internal structured cloning/serialization algorithm that can create deep clones of objects. It is still limited to certain built-in types, but in addition to the few types supported by JSON it also supports Dates, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays, and probably more in the future. It also preserves references within the cloned data, allowing it to support cyclical and recursive structures that would cause errors for JSON.The v8 module in Node.js currently (as of Node 11) exposes the structured serialization API directly, but this functionality is still marked as "experimental", and subject to change or removal in future versions. If you're using a compatible version, cloning an object is as simple as:Browsers do not currently provide a direct interface for the structured cloning algorithm, but a global structuredClone() function has been discussed in whatwg/html#793 on GitHub. As currently proposed, using it for most purposes would be as simple as:Unless this is shipped, browsers' structured clone implementations are only exposed indirectly.The lower-overhead way to create a structured clone with existing APIs is to post the data through one port of a MessageChannels. The other port will emit a message event with a structured clone of the attached .data. Unfortunately, listening for these events is necessarily asynchronous, and the synchronous alternatives are less practical.There are no good options for creating structured clones synchronously. Here are a couple of impractical hacks instead.history.pushState() and history.replaceState() both create a structured clone of their first argument, and assign that value to history.state. You can use this to create a structured clone of any object like this:Though synchronous, this can be extremely slow. It incurs all of the overhead associated with manipulating the browser history. Calling this method repeatedly can cause Chrome to become temporarily unresponsive.The Notification constructor creates a structured clone of its associated data. It also attempts to display a browser notification to the user, but this will silently fail unless you have requested notification permission. In case you have the permission for other purposes, we'll immediately close the notification we've created.If there wasn't any builtin one, you could try:An Object.assign method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.Read more...The polyfill to support older browsers:Code:Test:This is what I'm using:Deep copy by performance:

Ranked from best to worstDeep copy an array of strings or numbers (one level - no reference pointers):When an array contains numbers and strings - functions like .slice(), .concat(), .splice(), the assignment operator "=", and Underscore.js's clone function; will make a deep copy of the array's elements.Where reassignment has the fastest performance:And .slice() has better performance than .concat(),

http://jsperf.com/duplicate-array-slice-vs-concat/3Deep copy an array of objects (two or more levels - reference pointers):Write a custom function (has faster performance than $.extend() or JSON.parse):Use third-party utility functions:Where jQuery's $.extend has better performance:There’s a library (called「clone」), that does this quite well. It provides the most complete recursive cloning/copying of arbitrary objects that I know of. It also supports circular references, which is not covered by the other answers, yet.You can find it on npm, too. It can be used for the browser as well as Node.js.Here is an example on how to use it:Install it withor package it with Ender.You can also download the source code manually.Then you can use it in your source code.(Disclaimer: I’m the author of the library.)Deep copying objects in JavaScript (I think the best and the simplest)1. Using JSON.parse(JSON.stringify(object));2.Using created method3. Using Lo-Dash's _.cloneDeep link lodash4. Using Object.assign() methodBUT WRONG WHEN5.Using Underscore.js _.clone link Underscore.jsBUT WRONG WHENJSBEN.CH Performance Benchmarking Playground 1~3 http://jsben.ch/KVQLd

Cloning an Object was always a concern in JS, but it was all about before ES6, I list different ways of copying an object in JavaScript below, imagine you have the Object below and would like to have a deep copy of that:There are few ways to copy this object, without changing the origin:1) ES5+, Using a simple function to do the copy for you:2) ES5+, using JSON.parse and JSON.stringify.3) AngularJs: 4) jQuery: 5) UnderscoreJs & Loadash: Hope these help... I know this is an old post, but I thought this may be of some help to the next person who stumbles along.As long as you don't assign an object to anything it maintains no reference in memory.  So to make an object that you want to share among other objects, you'll have to create a factory like so:If you're using it, the Underscore.js library has a clone method.Here's a version of ConroyP's answer above that works even if the constructor has required parameters:This function is also available in my simpleoo library.Edit:Here's a more robust version (thanks to Justin McCandless this now supports cyclic references as well):The following creates two instances of the same object. I found it and am using it currently. It's simple and easy to use.Lodash has a nice _.cloneDeep(value) method:Crockford suggests (and I prefer) using this function:It's terse, works as expected and you don't need a library.EDIT:This is a polyfill for Object.create, so you also can use this.NOTE:  If you use some of this, you may have problems with some iteration who use hasOwnProperty. Because, create create new empty object who inherits oldObject. But it is still useful and practical for cloning objects.For exemple if  oldObject.a = 5;but:Shallow copy one-liner (ECMAScript 5th edition):And shallow copy one-liner (ECMAScript 6th edition, 2015):Just because I didn't see AngularJS mentioned and thought that people might want to know...angular.copy also provides a method of deep copying objects and arrays.There seems to be no ideal deep clone operator yet for array-like objects.  As the code below illustrates, John Resig's jQuery cloner turns arrays with non-numeric properties into objects that are not arrays, and RegDwight's JSON cloner drops the non-numeric properties. The following tests illustrate these points on multiple browsers:I have two good answers depending on whether your objective is to clone a "plain old JavaScript object" or not.Let's also assume that your intention is to create a complete clone with no prototype references back to the source object. If you're not interested in a complete clone, then you can use many of the Object.clone() routines provided in some of the other answers (Crockford's pattern).For plain old JavaScript objects, a tried and true good way to clone an object in modern runtimes is quite simply:Note that the source object must be a pure JSON object. This is to say, all of its nested properties must be scalars (like boolean, string, array, object, etc). Any functions or special objects like RegExp or Date will not be cloned.Is it efficient? Heck yes. We've tried all kinds of cloning methods and this works best. I'm sure some ninja could conjure up a faster method. But I suspect we're talking about marginal gains.This approach is just simple and easy to implement. Wrap it into a convenience function and if you really need to squeeze out some gain, go for at a later time.Now, for non-plain JavaScript objects, there isn't a really simple answer.  In fact, there can't be because of the dynamic nature of JavaScript functions and inner object state. Deep cloning a JSON structure with functions inside requires you recreate those functions and their inner context. And JavaScript simply doesn't have a standardized way of doing that.The correct way to do this, once again, is via a convenience method that you declare and reuse within your code. The convenience method can be endowed with some understanding of your own objects so you can make sure to properly recreate the graph within the new object.We're written our own, but the best general approach I've seen is covered here:http://davidwalsh.name/javascript-cloneThis is the right idea. The author (David Walsh) has commented out the cloning of generalized functions. This is something you might choose to do, depending on your use case.The main idea is that you need to special handle the instantiation of your functions (or prototypal classes, so to speak) on a per-type basis. Here, he's provided a few examples for RegExp and Date.Not only is this code brief, but it's also very readable. It's pretty easy to extend.Is this efficient? Heck yes. Given that the goal is to produce a true deep-copy clone, then you're going to have to walk the members of the source object graph. With this approach, you can tweak exactly which child members to treat and how to manually handle custom types.So there you go. Two approaches. Both are efficient in my view.This isn't generally the most efficient solution, but it does what I need. Simple test cases below...Cyclic array test...Function test...Well if you're using angular you could do this tooI disagree with the answer with the greatest votes here. A Recursive Deep Clone is much faster than the JSON.parse(JSON.stringify(obj)) approach mentioned. And here's the function for quick reference:Only when you can use ECMAScript 6 or transpilers.Features:Code:For the people who want to use the JSON.parse(JSON.stringify(obj)) version, but without losing the Date objects, you can use the second argument of parse method to convert the strings back to Date:

How do I include a JavaScript file in another JavaScript file?

Alec Smart

[How do I include a JavaScript file in another JavaScript file?](https://stackoverflow.com/questions/950087/how-do-i-include-a-javascript-file-in-another-javascript-file)

Is there something in JavaScript similar to @import in CSS that allows you to include a JavaScript file inside another JavaScript file?

2009-06-04 11:59:50Z

Is there something in JavaScript similar to @import in CSS that allows you to include a JavaScript file inside another JavaScript file?The old versions of JavaScript had no import, include, or require, so many different approaches to this problem have been developed.But since 2015 (ES6), JavaScript has had the ES6 modules standard to import modules in Node.js, which is also supported by most modern browsers.For compatibility with older browsers, build and/or transpilation tools can be used.ECMAScript (ES6) modules have been supported in Node.js since v8.5, with the --experimental-modules flag, and since at least Node.js v13.8.0 without the flag. All files involved must have the .mjs extension.Browsers have had support for loading ECMAScript modules directly (no tools like Webpack required) since Safari 10.1, Chrome 61, Firefox 60, and Edge 16. Check the current support at caniuse.Read more at https://jakearchibald.com/2017/es-modules-in-browsers/Dynamic imports let the script load other scripts as needed:Read more at https://developers.google.com/web/updates/2017/11/dynamic-importThe old style of importing modules, still widely used in Node.js, is the module.exports/require system.There are other ways for JavaScript to include external JavaScript contents in browsers that do not require preprocessing.You could load an additional script with an AJAX call and then use eval to run it. This is the most straightforward way, but it is limited to your domain because of the JavaScript sandbox security model. Using eval also opens the door to bugs, hacks and security issues.Like Dynamic Imports you can load one or many scripts with a fetch call using promises to control order of execution for script dependencies using the Fetch Inject library:The jQuery library provides loading functionality in one line:You could add a script tag with the script URL into the HTML. To avoid the overhead of jQuery, this is an ideal solution.The script can even reside on a different server. Furthermore, the browser evaluates the code. The <script> tag can be injected into either the web page <head>, or inserted just before the closing </body> tag.Here is an example of how this could work:This function will add a new <script> tag to the end of the head section of the page, where the src attribute is set to the URL which is given to the function as the first parameter.Both of these solutions are discussed and illustrated in JavaScript Madness: Dynamic Script Loading.Now, there is a big issue you must know about. Doing that implies that you remotely load the code. Modern web browsers will load the file and keep executing your current script because they load everything asynchronously to improve performance. (This applies to both the jQuery method and the manual dynamic script loading method.)It means that if you use these tricks directly, you won't be able to use your newly loaded code the next line after you asked it to be loaded, because it will be still loading.For example: my_lovely_script.js contains MySuperObject:Then you reload the page hitting F5. And it works! Confusing...So what to do about it ?Well, you can use the hack the author suggests in the link I gave you. In summary, for people in a hurry, he uses an event to run a callback function when the script is loaded. So you can put all the code using the remote library in the callback function. For example:Then you write the code you want to use AFTER the script is loaded in a lambda function:Then you run all that:Note that the script may execute after the DOM has loaded, or before, depending on the browser and whether you included the line script.async = false;. There's a great article on Javascript loading in general which discusses this.As mentioned at the top of this answer, many developers use build/transpilation tool(s) like Parcel, Webpack, or Babel in their projects, allowing them to use upcoming JavaScript syntax, provide backward compatibility for older browsers, combine files, minify, perform code splitting etc.If anyone is looking for something more advanced, try out RequireJS. You'll get added benefits such as dependency management, better concurrency, and avoid duplication (that is, retrieving a script more than once).You can write your JavaScript files in "modules" and then reference them as dependencies in other scripts. Or you can use RequireJS as a simple "go get this script" solution.Example:Define dependencies as modules:some-dependency.jsimplementation.js is your "main" JavaScript file that depends on some-dependency.jsExcerpt from the GitHub README:There actually is a way to load a JavaScript file not asynchronously, so you could use the functions included in your newly loaded file right after loading it, and I think it works in all browsers.You need to use jQuery.append() on the <head> element of your page, that is:However, this method also has a problem: if an error happens in the imported JavaScript file, Firebug (and also Firefox Error Console and Chrome Developer Tools as well) will report its place incorrectly, which is a big problem if you use Firebug to track JavaScript errors down a lot (I do). Firebug simply doesn't know about the newly loaded file for some reason, so if an error occurs in that file, it reports that it occurred in your main HTML file, and you will have trouble finding out the real reason for the error.But if that is not a problem for you, then this method should work.I have actually written a jQuery plugin called $.import_js() which uses this method:So all you would need to do to import JavaScript is:I also made a simple test for this at Example.It includes a main.js file in the main HTML and then the script in main.js uses $.import_js() to import an additional file called included.js, which defines this function:And right after including included.js, the hello() function is called, and you get the alert.(This answer is in response to e-satis' comment).Another way, that in my opinion is much cleaner, is to make a synchronous Ajax request instead of using a <script> tag. Which is also how Node.js handles includes.Here's an example using jQuery:You can then use it in your code as you'd usually use an include:And be able to call a function from the required script in the next line:There is a good news for you. Very soon you will be able to load JavaScript code easily. It will become a standard way of importing modules of JavaScript code and will be part of core JavaScript itself. You simply have to write import cond from 'cond.js'; to load a macro named cond from a file cond.js.So you don't have to rely upon any JavaScript framework nor do you have to explicitly make Ajax calls.Refer to:It is possible to dynamically generate a JavaScript tag and append it to HTML document from inside other JavaScript code. This will load targeted JavaScript file.Statement import is in ECMAScript 6.SyntaxMaybe you can use this function that I found on this page How do I include a JavaScript file in a JavaScript file?:Here is a synchronous version without jQuery:Note that to get this working cross-domain, the server will need to set allow-origin header in its response.I just wrote this JavaScript code (using Prototype for DOM manipulation):Usage:Gist: http://gist.github.com/284442.Here's the generalized version of how Facebook does it for their ubiquitous Like button:If it works for Facebook, it will work for you.The reason why we look for the first script element instead of head or body is because some browsers don't create one if missing, but we're guaranteed to have a script element - this one. Read more at http://www.jspatterns.com/the-ridiculous-case-of-adding-a-script-element/.If you want in pure JavaScript, you can use document.write.If you use the jQuery library, you can use the $.getScript method.You can also assemble your scripts using PHP:File main.js.php:Most of solutions shown here imply dynamical loading. I was searching instead for a compiler which assemble all the depended files into a single output file. The same as Less/Sass preprocessors deal with the CSS @import at-rule. Since I didn't find anything decent of this sort, I wrote a simple tool solving the issue.So here is the compiler, https://github.com/dsheiko/jsic, which replaces $import("file-path") with the requested file content securely. Here is the corresponding Grunt plugin: https://github.com/dsheiko/grunt-jsic.On the jQuery master branch, they simply concatenate atomic source files into a single one starting with intro.js and ending with outtro.js. That doesn't suits me as it provides no flexibility on the source code design. Check out how it works with jsic:src/main.jssrc/Form/Input/Tel.jsNow we can run the compiler:And get the combined filebuild/main.jsIf your intention to load the JavaScript file is using the functions from the imported/included file, you can also define a global object and set the functions as object items. For instance:You just need to be careful when you are including scripts in an HTML file. The order should be as in below:This should do:Or rather than including at run time, use a script to concatenate prior to upload.I use Sprockets (I don't know if there are others). You build your JavaScript code in separate files and include comments that are processed by the Sprockets engine as includes. For development you can include files sequentially, then for production to merge them...See also:I had a simple issue, but I was baffled by responses to this question.I had to use a variable (myVar1) defined in one JavaScript file (myvariables.js) in another JavaScript file (main.js).For this I did as below:Loaded the JavaScript code in the HTML file, in the correct order, myvariables.js first, then main.js:File: myvariables.jsFile: main.jsAs you saw, I had use a variable in one JavaScript file in another JavaScript file, but I didn't need to include one in another. I just needed to ensure that the first JavaScript file loaded before the second JavaScript file, and, the first JavaScript file's variables are accessible in the second JavaScript file, automatically.This saved my day. I hope this helps.In case you are using Web Workers and want to include additional scripts in the scope of the worker, the other answers provided about adding scripts to the head tag, etc. will not work for you.Fortunately, Web Workers have their own importScripts function which is a global function in the scope of the Web Worker, native to the browser itself as it is part of the specification.Alternatively, as the second highest voted answer to your question highlights, RequireJS can also handle including scripts inside a Web Worker (likely calling importScripts itself, but with a few other useful features).In modern language with the check if script has already been loaded it would be: Usage (async/await):orUsage (Promise):The @import syntax for achieving CSS-like JavaScript importing is possible using a tool such as Mixture via their special .mix file type (see here). I imagine the application simply uses one of the aforementioned methods interally, though I don't know. From the Mixture documentation on .mix files: Here's an example .mix file that combines multiple .js files into one:Mixture outputs this as scripts-global.js and also as a minified version (scripts-global.min.js).Note: I'm not in any way affiliated with Mixture, other than using it as a front-end development tool. I came across this question upon seeing a .mix JavaScript file in action (in one of the Mixture boilerplates) and being a bit confused by it ("you can do this?" I thought to myself). Then I realized that it was an application-specific file type (somewhat disappointing, agreed). Nevertheless, figured the knowledge might be helpful for others.UPDATE: Mixture is now free (offline).UPDATE: Mixture is now discontinued. Old mixture releases are still availableMy usual method is:It works great and uses no page-reloads for me. I've tried the AJAX method (one of the other answers) but it doesn't seem to work as nicely for me.Here's an explanation of how the code works for those that are curious: essentially, it creates a new script tag (after the first one) of the URL. It sets it to asynchronous mode so it doesn't block the rest of the code, but calls a callback when the readyState (the state of the content to be loaded) changes to 'loaded'.I wrote a simple module that automates the job of importing/including module scripts in JavaScript. For detailed explanation of the code, refer to the blog post JavaScript require / import / include modules.Although these answers are great, there is a simple "solution" that has been around since script loading existed, and it will cover 99.999% of most people's use cases. Just include the script you need before the script that requires it. For most projects it does not take long to determine which scripts are needed and in what order.If script2 requires script1, this really is the absolute easiest way to do something like this. I'm very surprised no-one has brought this up, as it's the most obvious and simplest answer that will apply in nearly every single case.This script will add a JavaScript file to the top of any other <script> tag:There is also Head.js. It is very easy to deal with:As you see, it's easier than Require.js and as convenient as jQuery's $.getScript method. It also has some advanced features, like conditional loading, feature detection and much more.There are a lot of potential answers for this question. My answer is obviously based on a number of them. This is what I ended up with after reading through all the answers.The problem with $.getScript and really any other solution that requires a callback when loading is complete is that if you have multiple files that use it and depend on each other you no longer have a way to know when all scripts have been loaded (once they are nested in multiple files).file3.jsfile2.js:file1.js:You are right when you say that you could specify Ajax to run synchronously or use XMLHttpRequest, but the current trend appears to be to deprecate synchronous requests, so you may not get full browser support now or in the future.You could try to use $.when to check an array of deferred objects, but now you are doing this in every file and file2 will be considered loaded as soon as the $.when is executed not when the callback is executed, so file1 still continues execution before file3 is loaded. This really still has the same problem.I decided to go backwards instead of forwards. Thank you document.writeln. I know it's taboo, but as long as it is used correctly this works well. You end up with code that can be debugged easily, shows in the DOM correctly and can ensure the order the dependencies are loaded correctly.You can of course use $ ("body").append(), but then you can no longer debug correctly any more.NOTE: You must use this only while the page is loading, otherwise you get a blank screen. In other words, always place this before / outside of document.ready. I have not tested using this after the page is loaded in a click event or anything like that, but I am pretty sure it'll fail.I liked the idea of extending jQuery, but obviously you don't need to.Before calling document.writeln, it checks to make sure the script has not already been loading by evaluating all the script elements.I assume that a script is not fully executed until its document.ready event has been executed. (I know using document.ready is not required, but many people use it, and handling this is a safeguard.)When the additional files are loaded the document.ready callbacks will get executed in the wrong order. To address this when a script is actually loaded, the script that imported it is re-imported itself and execution halted. This causes the originating file to now have its document.ready callback executed after any from any scripts that it imports.Instead of this approach you could attempt to modify the jQuery readyList, but this seemed like a worse solution.Solution:Usage:File3:File2:File1:There are several ways to implement modules in Javascript, Here are the 2 most popular ones:Browsers do not support this moduling system yet so in order for you to use this syntax you must use a bundler like webpack. Using a bundler is better anyway because this can combine all of your different files into a single (or couple related) files. This will serve the files from the server to the client faster because each HTTP request has some associated overhead accompanied with it. Thus by reducing the overal HTTP request we improve the performance. Here is an example of ES6 modules: This moduling system is used in NodeJS. You basically add your exports to an object which is called module.exports. You then can access this object via a require('modulePath'). Important here is to realize that these modules are being cached, so if you require() a certain module twice it will return the already created module.I came to this question because I was looking for a simple way to maintain a collection of useful JavaScript plugins. After seeing some of the solutions here, I came up with this:BUT:Even though all of the plugins get dropped into the head tag the way they ought to, they don't always get run by the browser when you click into the page or refresh.I've found it's more reliable to just write the script tags in a PHP include. You only have to write it once and that's just as much work as calling the plugin using JavaScript.

For-each over an array in JavaScript

Dante1986

[For-each over an array in JavaScript](https://stackoverflow.com/questions/9329446/for-each-over-an-array-in-javascript)

How can I loop through all the entries in an array using JavaScript?I thought it was something like this:Where theArray is my array, but this seems to be incorrect.

2012-02-17 13:51:48Z

How can I loop through all the entries in an array using JavaScript?I thought it was something like this:Where theArray is my array, but this seems to be incorrect.TL;DRBut there's lots more to explore, read on...JavaScript has powerful semantics for looping through arrays and array-like objects. I've split the answer into two parts: Options for genuine arrays, and options for things that are just array-like, such as the arguments object, other iterable objects (ES2015+), DOM collections, and so on.I'll quickly note that you can use the ES2015 options now, even on ES5 engines, by transpiling ES2015 to ES5. Search for "ES2015 transpiling" / "ES6 transpiling" for more...Okay, let's look at our options:You have three options in ECMAScript 5 ("ES5"), the version most broadly supported at the moment, and two more added in ECMAScript 2015 ("ES2015", "ES6"):Details:In any vaguely-modern environment (so, not IE8) where you have access to the Array features added by ES5 (directly or using polyfills), you can use forEach (spec | MDN):forEach accepts a callback function and, optionally, a value to use as this when calling that callback (not used above). The callback is called for each entry in the array, in order, skipping non-existent entries in sparse arrays. Although I only used one argument above, the callback is called with three: The value of each entry, the index of that entry, and a reference to the array you're iterating over (in case your function doesn't already have it handy).Unless you're supporting obsolete browsers like IE8 (which NetApps shows at just over 4% market share as of this writing in September 2016), you can happily use forEach in a general-purpose web page without a shim. If you do need to support obsolete browsers, shimming/polyfilling forEach is easily done (search for "es5 shim" for several options).forEach has the benefit that you don't have to declare indexing and value variables in the containing scope, as they're supplied as arguments to the iteration function, and so nicely scoped to just that iteration.If you're worried about the runtime cost of making a function call for each array entry, don't be; details.Additionally, forEach is the "loop through them all" function, but ES5 defined several other useful "work your way through the array and do things" functions, including:Sometimes the old ways are the best:If the length of the array won't change during the loop, and it's in performance-sensitive code (unlikely), a slightly more complicated version grabbing the length up front might be a tiny bit faster:And/or counting backward:But with modern JavaScript engines, it's rare you need to eke out that last bit of juice.In ES2015 and higher, you can make your index and value variables local to the for loop:And when you do that, not just value but also index is recreated for each loop iteration, meaning closures created in the loop body keep a reference to the index (and value) created for that specific iteration:If you had five divs, you'd get "Index is: 0" if you clicked the first and "Index is: 4" if you clicked the last. This does not work if you use var instead of let.You'll get people telling you to use for-in, but that's not what for-in is for. for-in loops through the enumerable properties of an object, not the indexes of an array. The order is not guaranteed, not even in ES2015 (ES6). ES2015+ does define an order to object properties (via [[OwnPropertyKeys]], [[Enumerate]], and things that use them like Object.getOwnPropertyKeys), but it does not define that for-in will follow that order. (Details in this other answer.)The only real use cases for for-in on an array are:Looking only at that first example: You can use for-in to visit those sparese array elements if you use appropriate safeguards:Note the three checks:You wouldn't do that in inline code, of course. You'd write a utility function. Perhaps:ES2015 adds iterators to JavaScript. The easiest way to use iterators is the new for-of statement. It looks like this:Under the covers, that gets an iterator from the array and loops through it, getting the values from it. This doesn't have the issue that using for-in has, because it uses an iterator defined by the object (the array), and arrays define that their iterators iterate through their entries (not their properties). Unlike for-in in ES5, the order in which the entries are visited is the numeric order of their indexes.Sometimes, you might want to use an iterator explicitly. You can do that, too, although it's a lot clunkier than for-of. It looks like this:The iterator is an object matching the Iterator definition in the specification. Its next method returns a new result object each time you call it. The result object has a property, done, telling us whether it's done, and a property value with the value for that iteration. (done is optional if it would be false, value is optional if it would be undefined.)The meaning of value varies depending on the iterator; arrays support (at least) three functions that return iterators:Aside from true arrays, there are also array-like objects that have a length property and properties with numeric names: NodeList instances, the arguments object, etc. How do we loop through their contents?At least some, and possibly most or even all, of the array approaches above frequently apply equally well to array-like objects:Other times, you may want to convert an array-like object into a true array. Doing that is surprisingly easy:If you use Array.prototype functions with host-provided array-like objects (DOM lists and other things provided by the browser rather than the JavaScript engine), you need to be sure to test in your target environments to make sure the host-provided object behaves properly. Most do behave properly (now), but it's important to test. The reason is that most of the Array.prototype methods you're likely to want to use rely on the host-provided object giving an honest answer to the abstract [[HasProperty]] operation. As of this writing, browsers do a very good job of this, but the 5.1 spec did allow for the possibility a host-provided object may not be honest. It's in §8.6.2, several paragraphs below the big table near the beginning of that section), where it says:(I couldn't find the equivalent verbiage in the ES2015 spec, but it's bound to still be the case.) Again, as of this writing the common host-provided array-like objects in modern browsers [NodeList instances, for instance] do handle [[HasProperty]] correctly, but it's important to test.)Note: This answer is hopelessly out-of-date. For a more modern approach, look at the methods available on an array. Methods of interest might be:The standard way to iterate an array in JavaScript is a vanilla for-loop:Note, however, that this approach is only good if you have a dense array, and each index is occupied by an element. If the array is sparse, then you can run into performance problems with this approach, since you will iterate over a lot of indices that do not really exist in the array. In this case, a for .. in-loop might be a better idea. However, you must use the appropriate safeguards to ensure that only the desired properties of the array (that is, the array elements) are acted upon, since the for..in-loop will also be enumerated in legacy browsers, or if the additional properties are defined as enumerable.In ECMAScript 5 there will be a forEach method on the array prototype, but it is not supported in legacy browsers. So to be able to use it consistently you must either have an environment that supports it (for example, Node.js for server side JavaScript), or use a "Polyfill". The Polyfill for this functionality is, however, trivial and since it makes the code easier to read, it is a good polyfill to include.If you’re using the jQuery library, you can use jQuery.each:EDIT : As per question, user want code in javascript instead of jquery so the edit isI think the reverse for loop deserves a mention here:Some developers use the reverse for loop by default, unless there is a good reason to loop forwards.Although the performance gains are usually insignificant, it sort of screams:However in practice that is not actually a reliable indication of intent, since it is indistinguishable from those occasions when you do care about the order, and really do need to loop in reverse.  So in fact another construct would be needed to accurately express the "don't care" intent, something currently unavailable in most languages, including ECMAScript, but which could be called, for example, forEachUnordered().If order doesn't matter, and efficiency is a concern (in the innermost loop of a game or animation engine), then it may be acceptable to use the reverse for loop as your go-to pattern.  Just remember that seeing a reverse for loop in existing code does not necessarily mean that the order irrelevant!In general for higher level code where clarity and safety are greater concerns, I previously recommended using Array::forEach as your default pattern for looping (although these days I prefer to use for..of).  Reasons to prefer forEach over a reverse loop are:Then when you do see the reverse for loop in your code, that is a hint that it is reversed for a good reason (perhaps one of the reasons described above).  And seeing a traditional forward for loop may indicate that shifting can take place.(If the discussion of intent makes no sense to you, then you and your code may benefit from watching Crockford's lecture on Programming Style & Your Brain.)There is a debate about whether for..of or forEach() are preferable:Personally, I tend to use whatever looks easiest to read, unless performance or minification has become a major concern.  So these days I prefer to use for..of instead of forEach(), but I will always use map or filter or find or some when applicable. 

 (For the sake of my colleagues, I rarely use reduce.)You will notice that i-- is the middle clause (where we usually see a comparison) and the last clause is empty (where we usually see i++).  That means that i-- is also used as the condition for continuation.  Crucially, it is executed and checked before each iteration.Some people like to draw a little arrow in the reverse for loop, and end with a wink:Credits go to WYL for showing me the benefits and horrors of the reverse for loop.Some C-style languages use foreach to loop through enumerations. In JavaScript this is done with the for..in loop structure:There is a catch. for..in will loop through each of the object's enumerable members, and the members on its prototype. To avoid reading values that are inherited through the object's prototype, simply check if the property belongs to the object:Additionally, ECMAScript 5 has added a forEach method to Array.prototype which can be used to enumerate over an array using a calback (the polyfill is in the docs so you can still use it for older browsers):It's important to note that Array.prototype.forEach doesn't break when the callback returns false. jQuery and Underscore.js provide their own variations on each to provide loops that can be short-circuited.If you want to loop over an array, use the standard three-part for loop.You can get some performance optimisations by caching myArray.length or iterating over it backwards.I know this is an old post, and there are so many great answers already. For a little more completeness I figured I'd throw in another one using AngularJS. Of course, this only applies if you're using Angular, obviously, nonetheless I'd like to put it anyway.angular.forEach takes 2 arguments and an optional third argument. The first argument is the object (array) to iterate over, the second argument is the iterator function, and the optional third argument is the object context (basically referred to inside the loop as 'this'.There are different ways to use the forEach loop of angular. The simplest and probably most used isAnother way that is useful for copying items from one array to another isThough, you don't have to do that, you can simply do the following and it's equivalent to the previous example:Now there are pros and cons of using the angular.forEach function as opposed to the built in vanilla-flavored for loop.ProsConsider the following 2 nested loops, which do exactly the same thing. Let's say that we have 2 arrays of objects and each object contains an array of results, each of which has a Value property that's a string (or whatever). And let's say we need to iterate over each of the results and if they're equal then perform some action: Granted this is a very simple hypothetical example, but I've written triple embedded for loops using the second approach and it was very hard to read, and write for that matter.ConsI'm sure there's various other pros and cons as well, and please feel free to add any that you see fit. I feel that, bottom line, if you need efficiency, stick with just the native for loop for your looping needs. But, if your datasets are smaller and a some efficiency is okay to give up in exchange for readability and writability, then by all means throw an angular.forEach in that bad boy.If you don't mind emptying the array:x will contain the last value of y and it will be removed from the array. You can also use shift() which will give and remove the first item from y.A forEach implementation (see in jsFiddle):There are three implementations of foreach in jQuery as follows.An easy solution now would be to use the underscore.js library. It's providing many useful tools, such as each and will automatically delegate the job to the native forEach if available.A CodePen example of how it works is:As of ECMAScript 6:Where of avoids the oddities associated with in and makes it work like the for loop of any other language, and let binds i within the loop as opposed to within the function.The braces ({}) can be omitted when there is only one command (e.g. in the example above).Probably the for(i = 0; i < array.length; i++) loop is not the best choice. Why? If you have this:The method will call from array[0] to array[2]. First, this will first reference variables you don't even have, second you would not have the variables in the array, and third this will make the code bolder. Look here, it's what I use:And if you want it to be a function, you can do this:If you want to break, a little more logic:Example:It returns:There isn't any for each loop in native JavaScript. You can either use libraries to get this functionality (I recommend Underscore.js), use a simple for in loop.However, note that there may be reasons to use an even simpler for loop (see Stack Overflow question Why is using「for…in」with array iteration such a bad idea?)This is an iterator for NON-sparse list where the index starts at 0, which is the typical scenario when dealing with document.getElementsByTagName or document.querySelectorAll)Examples of usage:Example #1Example #2Each p tag gets class="blue"Example #3Every other p tag gets class="red">Example #4And finally the first 20 blue p tags are changed to greenCaution when using string as function: the function is created out-of-context and ought to be used only where you are certain of variable scoping.  Otherwise, better to pass functions where scoping is more intuitive.There are a few ways to loop through an array in JavaScript, as below:for - it's the most common one. Full block of code for looping while - loop while a condition is through. It seems to be the fastest loop do/while - also loop through a block of code while the condition is true, will run at least one time Functional loops - forEach, map, filter, also reduce (they loop through the function, but they are used if you need to do something with your array, etc.For more information and examples about functional programming on arrays, look at the blog post Functional programming in JavaScript: map, filter and reduce.ECMAScript 5 (the version on JavaScript) to work with Arrays:forEach - Iterates through every item in the array and do whatever you need with each item.In case, more interested on operation on array using some inbuilt feature.map - It creates a new array with the result of the callback function. This method is good to be used when you need to format the elements of your array.reduce - As the name says, it reduces the array to a single value by calling the given function passing in the current element and the result of the previous execution.every - Returns true or false if all the elements in the array pass the test in the callback function.filter - Very similar to every except that filter returns an array with the elements that return true to the given function.There's no inbuilt ability to break in forEach. To interrupt execution use the Array#some like below:This works because some returns true as soon as any of the callbacks, executed in array order, returns true, short-circuiting the execution of the rest. 

Original Answer

see Array prototype for someI also would like to add this as a composition of a reverse loop and an answer above for someone that would like this syntax too.Pros:The benefit for this: You have the reference already in the first like that won't need to be declared later with another line. It is handy when looping trough the object array.Cons:This will break whenever the reference is false - falsey (undefined, etc.). It can be used as an advantage though. However, it would make it a little bit harder to read. And also depending on browser it can be "not" optimized to work faster than original one.jQuery way using $.map:Using loops with ECMAScript 6  destructuring and the spread operatorDestructuring and using of the spread operator have proven quite useful for newcomers to ECMAScript 6 as being more human-readable/aesthetic, although some JavaScript veterans might consider it messy. Juniors or some other people might find it useful.Example 1: Normal for...of loop - no tricks here.Example 2: Split words to charactersExample 3: Looping with a key and valueExample 4: Get object properties inlineExample 5: Get deep object properties of what you needExample 6: Is Example 3 used with .forEachExample 7: Is Example 4 used with .forEachExample 8: Is Example 5 used with .forEachA way closest to your idea would be to use Array.forEach() which accepts a closure function which will be executed for each element of the array.Another viable way would be to use Array.map() which works in the same way, but it also takes all values that you return and returns them in a new array (essentially mapping each element to a new one), like this:You can call forEach like this:forEach will iterate over the array you provide and for each iteration it will have element which holds the value of that iteration. If you need index you can get the current index by passing the i as the second parameter in the callback function for forEach. Foreach is basically a High Order Function, Which takes another function as its parameter. Output:You can also iterate over an array like this:If you want to loop through an array of objects with the arrow function:The lambda syntax doesn't usually work in Internet Explorer 10  or below.I usually use theIf you are a jQuery fan and already have a jQuery file running, you should reverse the positions of the index and value parametersYou can use:And there are many others for iteration.If you have a massive array you should use iterators to gain some efficiency. Iterators are a property of certain JavaScript collections (like Map, Set, String, Array). Even, for..of uses iterator under-the-hood.Iterators improve efficiency by letting you consume the items in a list one at a time as if they were a stream. What makes an iterator special is how it traverses a collection. Other loops need to load the entire collection up front in order to iterate over it, whereas an iterator only needs to know the current position in the collection.             You access the current item by calling the iterator’s next method. The next method will return the value of the current item and a boolean to indicate when you have reached the end of the collection. The following is an example of creating an iterator from an array.               Transform your regular array to iterator using values() method like this:               You can also transform your regular array to iterator using Symbol.iterator like this:         You can also transform your regular array to an iterator like this:          NOTE:                You can read more about iteration protocol here.  If you want to use forEach(), it will look like - If you want to use for(), it will look like -   As per the new updated feature ECMAScript 6 (ES6) and ECMAScript 2015, you can use the following options with loops:Today (2019-12-18) I perform test on my macOS v10.13.6 (High Sierra), on Chrome v 79.0, Safari v13.0.4 and Firefox v71.0 (64 bit) - conclusions about optimisation (and micro-optimisation which usually is not worth to introduce it to code because the benefit is small, but code complexity grows).In tests we calculate the sum of array elements. I perform a test for small arrays (10 elements) and big arrays (1M elements) and divide them into three groups:Cross browser resultsResults for all tested browsersbrowsers**Array with 10 elementsResults for Chrome. You can perform the test on your machine here.Array with 1,000,000 elementsResults for Chrome. You can perform the test on your machine here

「Thinking in AngularJS」if I have a jQuery background? [closed]

Mark Rajcok

[「Thinking in AngularJS」if I have a jQuery background? [closed]](https://stackoverflow.com/questions/14994391/thinking-in-angularjs-if-i-have-a-jquery-background)

Suppose I'm familiar with developing client-side applications in jQuery, but now I'd like to start using AngularJS. Can you describe the paradigm shift that is necessary? Here are a few questions that might help you frame an answer:I'm not looking for a detailed comparison between jQuery and AngularJS.

2013-02-21 04:09:56Z

Suppose I'm familiar with developing client-side applications in jQuery, but now I'd like to start using AngularJS. Can you describe the paradigm shift that is necessary? Here are a few questions that might help you frame an answer:I'm not looking for a detailed comparison between jQuery and AngularJS.In jQuery, you design a page, and then you make it dynamic. This is because jQuery was designed for augmentation and has grown incredibly from that simple premise.But in AngularJS, you must start from the ground up with your architecture in mind. Instead of starting by thinking "I have this piece of the DOM and I want to make it do X", you have to start with what you want to accomplish, then go about designing your application, and then finally go about designing your view.Similarly, don't start with the idea that jQuery does X, Y, and Z, so I'll just add AngularJS on top of that for models and controllers. This is really tempting when you're just starting out, which is why I always recommend that new AngularJS developers don't use jQuery at all, at least until they get used to doing things the "Angular Way".I've seen many developers here and on the mailing list create these elaborate solutions with jQuery plugins of 150 or 200 lines of code that they then glue into AngularJS with a collection of callbacks and $applys that are confusing and convoluted; but they eventually get it working! The problem is that in most cases that jQuery plugin could be rewritten in AngularJS in a fraction of the code, where suddenly everything becomes comprehensible and straightforward.The bottom line is this: when solutioning, first "think in AngularJS"; if you can't think of a solution, ask the community; if after all of that there is no easy solution, then feel free to reach for the jQuery. But don't let jQuery become a crutch or you'll never master AngularJS.First know that single-page applications are applications. They're not webpages. So we need to think like a server-side developer in addition to thinking like a client-side developer. We have to think about how to divide our application into individual, extensible, testable components.So then how do you do that? How do you "think in AngularJS"? Here are some general principles, contrasted with jQuery.In jQuery, we programmatically change the view. We could have a dropdown menu defined as a ul like so:In jQuery, in our application logic, we would activate it with something like:When we just look at the view, it's not immediately obvious that there is any functionality here. For small applications, that's fine. But for non-trivial applications, things quickly get confusing and hard to maintain.In AngularJS, though, the view is the official record of view-based functionality. Our ul declaration would look like this instead:These two do the same thing, but in the AngularJS version anyone looking at the template knows what's supposed to happen. Whenever a new member of the development team comes on board, she can look at this and then know that there is a directive called dropdownMenu operating on it; she doesn't need to intuit the right answer or sift through any code. The view told us what was supposed to happen. Much cleaner.Developers new to AngularJS often ask a question like: how do I find all links of a specific kind and add a directive onto them. The developer is always flabbergasted when we reply: you don't. But the reason you don't do that is that this is like half-jQuery, half-AngularJS, and no good. The problem here is that the developer is trying to "do jQuery" in the context of AngularJS. That's never going to work well. The view is the official record. Outside of a directive (more on this below), you never, ever, never change the DOM. And directives are applied in the view, so intent is clear.Remember: don't design, and then mark up. You must architect, and then design.This is by far one of the most awesome features of AngularJS and cuts out a lot of the need to do the kinds of DOM manipulations I mentioned in the previous section. AngularJS will automatically update your view so you don't have to! In jQuery, we respond to events and then update content. Something like:For a view that looks like this:Apart from mixing concerns, we also have the same problems of signifying intent that I mentioned before. But more importantly, we had to manually reference and update a DOM node. And if we want to delete a log entry, we have to code against the DOM for that too. How do we test the logic apart from the DOM? And what if we want to change the presentation?This a little messy and a trifle frail. But in AngularJS, we can do this:And our view can look like this:But for that matter, our view could look like this:And now instead of using an unordered list, we're using Bootstrap alert boxes. And we never had to change the controller code! But more importantly, no matter where or how the log gets updated, the view will change too. Automatically. Neat!Though I didn't show it here, the data binding is two-way. So those log messages could also be editable in the view just by doing this: <input ng-model="entry.msg" />. And there was much rejoicing.In jQuery, the DOM is kind of like the model. But in AngularJS, we have a separate model layer that we can manage in any way we want, completely independently from the view. This helps for the above data binding, maintains separation of concerns, and introduces far greater testability. Other answers mentioned this point, so I'll just leave it at that.And all of the above tie into this over-arching theme: keep your concerns separate. Your view acts as the official record of what is supposed to happen (for the most part); your model represents your data; you have a service layer to perform reusable tasks; you do DOM manipulation and augment your view with directives; and you glue it all together with controllers. This was also mentioned in other answers, and the only thing I would add pertains to testability, which I discuss in another section below.To help us out with separation of concerns is dependency injection (DI). If you come from a server-side language (from Java to PHP) you're probably familiar with this concept already, but if you're a client-side guy coming from jQuery, this concept can seem anything from silly to superfluous to hipster. But it's not. :-)From a broad perspective, DI means that you can declare components very freely and then from any other component, just ask for an instance of it and it will be granted. You don't have to know about loading order, or file locations, or anything like that. The power may not immediately be visible, but I'll provide just one (common) example: testing.Let's say in our application, we require a service that implements server-side storage through a REST API and, depending on application state, local storage as well. When running tests on our controllers, we don't want to have to communicate with the server - we're testing the controller, after all. We can just add a mock service of the same name as our original component, and the injector will ensure that our controller gets the fake one automatically - our controller doesn't and needn't know the difference.Speaking of testing...This is really part of section 3 on architecture, but it's so important that I'm putting it as its own top-level section.Out of all of the many jQuery plugins you've seen, used, or written, how many of them had an accompanying test suite? Not very many because jQuery isn't very amenable to that. But AngularJS is.In jQuery, the only way to test is often to create the component independently with a sample/demo page against which our tests can perform DOM manipulation. So then we have to develop a component separately and then integrate it into our application. How inconvenient! So much of the time, when developing with jQuery, we opt for iterative instead of test-driven development. And who could blame us?But because we have separation of concerns, we can do test-driven development iteratively in AngularJS! For example, let's say we want a super-simple directive to indicate in our menu what our current route is. We can declare what we want in the view of our application:Okay, now we can write a test for the non-existent when-active directive:And when we run our test, we can confirm that it fails. Only now should we create our directive:Our test now passes and our menu performs as requested. Our development is both iterative and test-driven. Wicked-cool.You'll often hear "only do DOM manipulation in a directive". This is a necessity. Treat it with due deference!But let's dive a little deeper...Some directives just decorate what's already in the view (think ngClass) and therefore sometimes do DOM manipulation straight away and then are basically done. But if a directive is like a "widget" and has a template, it should also respect separation of concerns. That is, the template too should remain largely independent from its implementation in the link and controller functions.AngularJS comes with an entire set of tools to make this very easy; with ngClass we can dynamically update the class; ngModel allows two-way data binding; ngShow and ngHide programmatically show or hide an element; and many more - including the ones we write ourselves. In other words, we can do all kinds of awesomeness without DOM manipulation. The less DOM manipulation, the easier directives are to test, the easier they are to style, the easier they are to change in the future, and the more re-usable and distributable they are.I see lots of developers new to AngularJS using directives as the place to throw a bunch of jQuery. In other words, they think "since I can't do DOM manipulation in the controller, I'll take that code put it in a directive". While that certainly is much better, it's often still wrong.Think of the logger we programmed in section 3. Even if we put that in a directive, we still want to do it the "Angular Way". It still doesn't take any DOM manipulation! There are lots of times when DOM manipulation is necessary, but it's a lot rarer than you think! Before doing DOM manipulation anywhere in your application, ask yourself if you really need to. There might be a better way.Here's a quick example that shows the pattern I see most frequently. We want a toggleable button. (Note: this example is a little contrived and a skosh verbose to represent more complicated cases that are solved in exactly the same way.)There are a few things wrong with this:This directive can be rewritten (even for very complicated cases!) much more simply like so:Again, the template stuff is in the template, so you (or your users) can easily swap it out for one that meets any style necessary, and the logic never had to be touched. Reusability - boom!And there are still all those other benefits, like testing - it's easy! No matter what's in the template, the directive's internal API is never touched, so refactoring is easy. You can change the template as much as you want without touching the directive. And no matter what you change, your tests still pass.w00t!So if directives aren't just collections of jQuery-like functions, what are they? Directives are actually extensions of HTML. If HTML doesn't do something you need it to do, you write a directive to do it for you, and then use it just as if it was part of HTML.Put another way, if AngularJS doesn't do something out of the box, think how the team would accomplish it to fit right in with ngClick, ngClass, et al.Don't even use jQuery. Don't even include it. It will hold you back. And when you come to a problem that you think you know how to solve in jQuery already, before you reach for the $, try to think about how to do it within the confines the AngularJS. If you don't know, ask! 19 times out of 20, the best way to do it doesn't need jQuery and to try to solve it with jQuery results in more work for you.In jQuery, selectors are used to find DOM elements and then bind/register event handlers to them. When an event triggers, that (imperative) code executes to update/change the DOM.In AngularJS, you want to think about views rather than DOM elements. Views are (declarative) HTML that contain AngularJS directives. Directives set up the event handlers behind the scenes for us and give us dynamic databinding. Selectors are rarely used, so the need for IDs (and some types of classes) is greatly diminished. Views are tied to models (via scopes). Views are a projection of the model. Events change models (that is, data, scope properties), and the views that project those models update "automatically."In AngularJS, think about models, rather than jQuery-selected DOM elements that hold your data. Think about views as projections of those models, rather than registering callbacks to manipulate what the user sees.jQuery employs unobtrusive JavaScript - behavior (JavaScript) is separated from the structure (HTML).AngularJS uses controllers and directives (each of which can have their own controller, and/or compile and linking functions) to remove behavior from the view/structure (HTML).  Angular also has services and filters to help separate/organize your application.See also https://stackoverflow.com/a/14346528/215945One approach to designing an AngularJS application:You can do a lot with jQuery without knowing about how JavaScript prototypal inheritance works. When developing AngularJS applications, you will avoid some common pitfalls if you have a good understanding of JavaScript inheritance. Recommended reading: What are the nuances of scope prototypal / prototypical inheritance in AngularJS?AngularJS and jQuery adopt very different ideologies. If you're coming from jQuery you may find some of the differences surprising. Angular may make you angry.This is normal, you should push through. Angular is worth it.jQuery gives you a toolkit for selecting arbitrary bits of the DOM and making ad-hoc changes to them. You can do pretty much anything you like piece by piece.AngularJS instead gives you a compiler.What this means is that AngularJS reads your entire DOM from top to bottom and treats it as code, literally as instructions to the compiler. As it traverses the DOM, It looks for specific directives (compiler directives) that tell the AngularJS compiler how to behave and what to do. Directives are little objects full of JavaScript which can match against attributes, tags, classes or even comments. When the Angular compiler determines that a piece of the DOM matches a particular directive, it calls the directive function, passing it the DOM element, any attributes, the current $scope (which is a local variable store), and some other useful bits. These attributes may contain expressions which can be interpreted by the Directive, and which tell it how to render, and when it should redraw itself.Directives can then in turn pull in additional Angular components such as controllers, services, etc. What comes out the bottom of the compiler is a fully formed web application, wired up and ready to go.This means that Angular is Template Driven. Your template drives the JavaScript, not the other way around. This is a radical reversal of roles, and the complete opposite of the unobtrusive JavaScript we have been writing for the last 10 years or so. This can take some getting used to.If this sounds like it might be over-prescriptive and limiting, nothing could be farther from the truth. Because AngularJS treats your HTML as code, you get HTML level granularity in your web application. Everything is possible, and most things are surprisingly easy once you make a few conceptual leaps.Let's get down to the nitty gritty.Angular and jQuery do different things. AngularJS gives you a set of tools to produce web applications. jQuery mainly gives you tools for modifying the DOM. If jQuery is present on your page, AngularJS will use it automatically. If it isn't, AngularJS ships with jQuery Lite, which is a cut down, but still perfectly usable version of jQuery.Misko likes jQuery and doesn't object to you using it. However you will find as you advance that you can get a pretty much all of your work done using a combination of scope, templates and directives, and you should prefer this workflow where possible because your code will be more discrete, more configurable, and more Angular.If you do use jQuery, you shouldn't be sprinkling it all over the place. The correct place for DOM manipulation in AngularJS is in a directive. More on these later.jQuery is typically applied unobtrusively. Your JavaScript code is linked in the header (or the footer), and this is the only place it is mentioned. We use selectors to pick out bits of the page and write plugins to modify those parts.The JavaScript is in control. The HTML has a completely independent existence. Your HTML remains semantic even without JavaScript. Onclick attributes are very bad practice.One of the first things your will notice about AngularJS is that custom attributes are everywhere. Your HTML will be littered with ng attributes, which are essentially onClick attributes on steroids. These are directives (compiler directives), and are one of the main ways in which the template is hooked to the model.When you first see this you might be tempted to write AngularJS off as old school intrusive JavaScript (like I did at first). In fact, AngularJS does not play by those rules. In AngularJS, your HTML5 is a template. It is compiled by AngularJS to produce your web page.This is the first big difference. To jQuery, your web page is a DOM to be manipulated. To AngularJS, your HTML is code to be compiled. AngularJS reads in your whole web page and literally compiles it into a new web page using its built in compiler.Your template should be declarative; its meaning should be clear simply by reading it. We use custom attributes with meaningful names. We make up new HTML elements, again with meaningful names. A designer with minimal HTML knowledge and no coding skill can read your AngularJS template and understand what it is doing. He or she can make modifications. This is the Angular way.One of the first questions I asked myself when starting AngularJS and running through the tutorials is "Where is my code?". I've written no JavaScript, and yet I have all this behaviour. The answer is obvious. Because AngularJS compiles the DOM, AngularJS is treating your HTML as code. For many simple cases it's often sufficient to just write a template and let AngularJS compile it into an application for you.Your template drives your application. It's treated as a DSL. You write AngularJS components, and AngularJS will take care of pulling them in and making them available at the right time based on the structure of your template. This is very different to a standard MVC pattern, where the template is just for output.It's more similar to XSLT than Ruby on Rails for example.This is a radical inversion of control that takes some getting used to.Stop trying to drive your application from your JavaScript. Let the template drive the application, and let AngularJS take care of wiring the components together. This also is the Angular way.With jQuery your HTML page should contain semantic meaningful content. If the JavaScript is turned off (by a user or search engine) your content remains accessible.Because AngularJS treats your HTML page as a template. The template is not supposed to be semantic as your content is typically stored in your model which ultimately comes from your API. AngularJS compiles your DOM with the model to produce a semantic web page.Your HTML source is no longer semantic, instead, your API and compiled DOM are semantic.In AngularJS, meaning lives in the model, the HTML is just a template, for display only.At this point you likely have all sorts of questions concerning SEO and accessibility, and rightly so. There are open issues here. Most screen readers will now parse JavaScript. Search engines can also index AJAXed content. Nevertheless, you will want to make sure you are using pushstate URLs and you have a decent sitemap. See here for a discussion of the issue: https://stackoverflow.com/a/23245379/687677Separation of concerns (SOC) is a pattern that grew up over many years of web development for a variety of reasons including SEO, accessibility and browser incompatibility. It looks like this:Again, AngularJS does not play by their rules. In a stroke, AngularJS does away with a decade of received wisdom and instead implements an MVC pattern in which the template is no longer semantic, not even a little bit.It looks like this:MVC and SOC are not on opposite ends of the same scale, they are on completely different axes. SOC makes no sense in an AngularJS context. You have to forget it and move on.If, like me, you lived through the browser wars, you might find this idea quite offensive. Get over it, it'll be worth it, I promise.Plugins extend jQuery. AngularJS Directives extend the capabilities of your browser.In jQuery we define plugins by adding functions to the jQuery.prototype. We then hook these into the DOM by selecting elements and calling the plugin on the result. The idea is to extend the capabilities of jQuery.For example, if you want a carousel on your page, you might define an unordered list of figures, perhaps wrapped in a nav element. You might then write some jQuery to select the list on the page and restyle it as a gallery with timeouts to do the sliding animation.In AngularJS, we define directives. A directive is a function which returns a JSON object. This object tells AngularJS what DOM elements to look for, and what changes to make to them. Directives are hooked in to the template using either attributes or elements, which you invent. The idea is to extend the capabilities of HTML with new attributes and elements.The AngularJS way is to extend the capabilities of native looking HTML. You should write HTML that looks like HTML, extended with custom attributes and elements.If you want a carousel, just use a <carousel /> element, then define a directive to pull in a template, and make that sucker work.The tendency with jQuery is to write great big plugins like lightbox which we then configure by passing in numerous values and options.This is a mistake in AngularJS.Take the example of a dropdown. When writing a dropdown plugin you might be tempted to code in click handlers, perhaps a function to add in a chevron which is either up or down, perhaps change the class of the unfolded element, show hide the menu, all helpful stuff.Until you want to make a small change.Say you have a menu that you want to unfold on hover. Well now we have a problem. Our plugin has wired in our click handler for us, we're going to need to add a configuration option to make it behave differently in this specific case.In AngularJS we write smaller directives. Our dropdown directive would be ridiculously small. It might maintain the folded state, and provide methods to fold(), unfold() or toggle(). These methods would simply update $scope.menu.visible which is a boolean holding the state.Now in our template we can wire this up:Need to update on mouseover?The template drives the application so we get HTML level granularity. If we want to make case by case exceptions, the template makes this easy.JQuery plugins are created in a closure. Privacy is maintained within that closure. It's up to you to maintain your scope chain within that closure. You only really have access to the set of DOM nodes passed in to the plugin by jQuery, plus any local variables defined in the closure and any globals you have defined. This means that plugins are quite self contained. This is a good thing, but can get restrictive when creating a whole application. Trying to pass data between sections of a dynamic page becomes a chore.AngularJS has $scope objects. These are special objects created and maintained by AngularJS in which you store your model. Certain directives will spawn a new $scope, which by default inherits from its wrapping $scope using JavaScript prototypical inheritance. The $scope object is accessible in the controller and the view.This is the clever part. Because the structure of $scope inheritance roughly follows the structure of the DOM, elements have access to their own scope, and any containing scopes seamlessly, all the way up to the global $scope (which is not the same as the global scope).This makes it much easier to pass data around, and to store data at an appropriate level. If a dropdown is unfolded, only the dropdown $scope needs to know about it. If the user updates their preferences, you might want to update the global $scope, and any nested scopes listening to the user preferences would automatically be alerted.This might sound complicated, in fact, once you relax into it, it's like flying. You don't need to create the $scope object, AngularJS instantiates and configures it for you, correctly and appropriately based on your template hierarchy. AngularJS then makes it available to your component using the magic of dependency injection (more on this later).In jQuery you make all your DOM changes by hand. You construct new DOM elements programatically. If you have a JSON array and you want to put it to the DOM, you must write a function to generate the HTML and insert it.In AngularJS you can do this too, but you are encouraged to make use of data binding. Change your model, and because the DOM is bound to it via a template your DOM will automatically update, no intervention required.Because data binding is done from the template, using either an attribute or the curly brace syntax, it's super easy to do. There's little cognitive overhead associated with it so you'll find yourself doing it all the time.Binds the input element to $scope.user.name. Updating the input will update the value in your current scope, and vice-versa.Likewise:will output the user name in a paragraph. It's a live binding, so if the $scope.user.name value is updated, the template will update too.In jQuery making an Ajax call is fairly simple, but it's still something you might think twice about. There's the added complexity to think about, and a fair chunk of script to maintain.In AngularJS, Ajax is your default go-to solution and it happens all the time, almost without you noticing. You can include templates with ng-include. You can apply a template with the simplest custom directive. You can wrap an Ajax call in a service and create yourself a GitHub service, or a Flickr service, which you can access with astonishing ease.In jQuery, if we want to accomplish a small non-dom related task such as pulling a feed from an API, we might write a little function to do that in our closure. That's a valid solution, but what if we  want to access that feed often? What if we want to reuse that code in another application?AngularJS gives us service objects.Services are simple objects that contain functions and data. They are always singletons, meaning there can never be more than one of them. Say we want to access the Stack Overflow API, we might write a StackOverflowService which defines methods for doing so.Let's say we have a shopping cart. We might define a ShoppingCartService which maintains our cart and contains methods for adding and removing items. Because the service is a singleton, and is shared by all other components, any object that needs to can write to the shopping cart and pull data from it. It's always the same cart.Service objects are self-contained AngularJS components which we can use and reuse as we see fit. They are simple JSON objects containing functions and Data. They are always singletons, so if you store data on a service in one place, you can get that data out somewhere else just by requesting the same service.AngularJS manages your dependencies for you. If you want an object, simply refer to it and AngularJS will get it for you.Until you start to use this, it's hard to explain just what a massive time boon this is. Nothing like AngularJS DI exists inside jQuery.DI means that instead of writing your application and wiring it together, you instead define a library of components, each identified by a string.Say I have a component called 'FlickrService' which defines methods for pulling JSON feeds from Flickr. Now, if I want to write a controller that can access Flickr, I just need to refer to the 'FlickrService' by name when I declare the controller. AngularJS will take care of instantiating the component and making it available to my controller.For example, here I define a service:Now when I want to use that service I just refer to it by name like this:AngularJS will recognise that a FlickrService object is needed to instantiate the controller, and will provide one for us.This makes wiring things together very easy, and pretty much eliminates any tendency towards spagettification. We have a flat list of components, and AngularJS hands them to us one by one as and when we need them.jQuery says very little about how you should organise your code. AngularJS has opinions.AngularJS gives you modules into which you can place your code. If you're writing a script that talks to Flickr for example, you might want to create a Flickr module to wrap all your Flickr related functions in. Modules can include other modules (DI). Your main application is usually a module, and this should include all the other modules your application will depend on.You get simple code reuse, if you want to write another application based on Flickr, you can just include the Flickr module and voila, you have access to all your Flickr related functions in your new application.Modules contain AngularJS components. When we include a module, all the components in that module become available to us as a simple list identified by their unique strings. We can then inject those components into each other using AngularJS's dependency injection mechanism.AngularJS and jQuery are not enemies. It's possible to use jQuery within AngularJS very nicely. If you're using AngularJS well (templates, data-binding, $scope, directives, etc.) you will find you need a lot less jQuery than you might otherwise require.The main thing to realise is that your template drives your application. Stop trying to write big plugins that do everything. Instead write little directives that do one thing, then write a simple template to wire them together.Think less about unobtrusive JavaScript, and instead think in terms of HTML extensions.I got so excited about AngularJS, I wrote a short book on it which you're very welcome to read online http://nicholasjohnson.com/angular-book/. I hope it's helpful.Imperative vs DeclarativeWith jQuery you tell the DOM what needs to happen, step by step. With AngularJS you describe what results you want but not how to do it. More on this here. Also, check out Mark Rajcok's answer.AngularJS is an entire client-side framework that uses the MVC pattern (check out their graphical representation). It greatly focuses on separation of concerns.jQuery is a library AngularJS is a beautiful client-side framework, highly testable, that combines tons of cool stuff such as MVC, dependency injection, data binding and much more. It focuses on separation of concerns and testing (unit testing and end-to-end testing), which facilitates test-driven development.The best way to start is going through their awesome tutorial. You can go through the steps in a couple of hours; however, in case you want to master the concepts behind the scenes, they include a myriad of reference for further reading.You may use it on existing applications where you are already using pure jQuery. However, if you want to fully take advantage of the AngularJS features you may consider coding the server side using a RESTful approach.Doing so will allow you to leverage their resource factory, which creates an abstraction of your server side RESTful API and makes server-side calls (get, save, delete, etc.) incredibly easy.To describe the "paradigm shift", I think a short answer can suffice.In jQuery, you typically  use selectors to find elements, and then wire them up:

$('#id .class').click(doStuff);In AngularJS, you use directives to mark the elements directly, to wire them up:

<a ng-click="doStuff()">AngularJS doesn't need (or want) you to find elements using selectors - the primary difference between AngularJS's jqLite versus full-blown jQuery is that jqLite does not support selectors.  So when people say "don't include jQuery at all", it's mainly because they don't want you to use selectors; they want you to learn to use directives instead. Direct, not select!jQuery makes ridiculously long JavaScript commands like getElementByHerpDerp shorter and cross-browser.AngularJS allows you to make your own HTML tags/attributes that do things which work well with dynamic web applications (since HTML was designed for static pages).Saying "I have a jQuery background how do I think in AngularJS?" is like saying "I have an HTML background how do I think in JavaScript?" The fact that you're asking the question shows you most likely don't understand the fundamental purposes of these two resources. This is why I chose to answer the question by simply pointing out the fundamental difference rather than going through the list saying "AngularJS makes use of directives whereas jQuery uses CSS selectors to make a jQuery object which does this and that etc....". This question does not require a lengthy answer.jQuery is a way to make programming JavaScript in the browser easier. Shorter, cross-browser commands, etc.AngularJS extends HTML, so you don't have to put <div> all over the place just to make an application. It makes HTML actually work for applications rather than what it was designed for, which is static, educational web pages. It accomplishes this in a roundabout way using JavaScript, but fundamentally it is an extension of HTML, not JavaScript.jQuery: you think a lot about 'QUERYing the DOM' for DOM elements and doing something.AngularJS: THE model is the truth, and you always think from that ANGLE.For example, when you get data from THE server which you intend to display in some format in the DOM, in jQuery, you need to '1. FIND' where in the DOM you want to place this data, the '2. UPDATE/APPEND' it there by creating a new node or just setting its innerHTML. Then when you want to update this view, you then '3. FIND' the location and '4. UPDATE'. This cycle of find and update all done within the same context of getting and formatting data from server is gone in AngularJS.With AngularJS you have your model (JavaScript objects you are already used to) and the value of the model tells you about the model (obviously) and about the view, and an operation on the model automatically propagates to the view, so you don't have to think about it. You will find yourself in AngularJS no longer finding things in the DOM.To put in another way, in jQuery, you need to think about CSS selectors, that is, where is the div or td that has a class or attribute, etc., so that I can get their HTML or color or value, but in AngularJS, you will find yourself thinking like this: what model am I dealing with, I will set the model's value to true. You are not bothering yourself of whether the view reflecting this value is a checked box or resides in a td element (details you would have often needed to think about in jQuery).And with DOM manipulation in AngularJS, you find yourself adding directives and filters, which you can think of as valid HTML extensions.One more thing you will experience in AngularJS: in jQuery you call the jQuery functions a lot, in AngularJS, AngularJS will call your functions, so AngularJS will 'tell you how to do things', but the benefits are worth it, so learning AngularJS usually means learning what AngularJS wants or the way AngularJS requires that you present your functions and it will call it accordingly. This is one of the things that makes AngularJS a framework rather than a library.Those are some very nice, but lengthy answers.To sum up my experiences:jQuery is a DOM manipulation library.AngularJS is an MV* framework.In fact, AngularJS is one of the few JavaScript MV* frameworks (many JavaScript MVC tools still fall under the category library).Being a framework, it hosts your code and takes ownership of decisions about what to call and when!AngularJS itself includes a jQuery-lite edition within it. So for some basic DOM selection/manipulation, you really don't have to include the jQuery library (it saves many bytes to run on the network.)AngularJS has the concept of "Directives" for DOM manipulation and designing reusable UI components, so you should use it whenever you feel the need of doing DOM manipulation related stuff (directives are only place where you should write jQuery code while using AngularJS).AngularJS involves some learning curve (more than jQuery :-).-->For any developer coming from jQuery background, my first advice would be to "learn JavaScript as a first class language before jumping onto a rich framework like AngularJS!"

I learned the above fact the hard way.Good luck.They're apples and oranges. You don't want to compare them. They're two different things. AngularJs has already jQuery lite built in which allows you to perform basic DOM manipulation without even including the full blown jQuery version. jQuery is all about DOM manipulation. It solves all the cross browser pain otherwise you will have to deal with but it's not a framework that allows you to divide your app into components like AngularJS. A nice thing about AngularJs is that it allows you to separate/isolate the DOM manipulation in the directives.  There are built-in directives ready for you to use such as ng-click. You can create your own custom directives that will contain all your view logic or DOM manipulation so you don't end up mingle DOM manipulation code in the controllers or services that should take care of the business logic.Angular breaks down your app into 

- Controllers

- Services

- Views

- etc.and there is one more thing, that's the directive. It's an attribute  you can attach to any DOM element and you can go nuts with jQuery within it without worrying about your jQuery ever conflicts with AngularJs components or messes up with its architecture. I heard from a meetup I attended, one of the founders of Angular said they worked really hard to separate out the DOM manipulation so do not try to include them back in. Listen to the podcast JavaScript Jabber: Episode #32 that features the original creators of AngularJS: Misko Hevery & Igor Minar. They talk a lot about what it's like to come to AngularJS from other JavaScript backgrounds, especially jQuery.One of the points made in the podcast made a lot of things click for me with respects to your question:A transcript of the entire episode is available at the link provided above.So, to directly answer your question: AngularJS is -very- opinionated and is a true MV* framework. However, you can still do all of the really cool stuff you know and love with jQuery inside of directives. It's not a matter of "How do I do what I used to in jQuery?" as much as it's a matter of "How do I supplement AngularJS with all of the stuff I used to do in jQuery?"It's really two very different states of mind.I find this question interesting, because my first serious exposure to JavaScript programming was Node.js and AngularJS. I never learned jQuery, and I guess that's a good thing, because I don't have to unlearn anything. In fact, I actively avoid jQuery solutions to my problems, and instead, solely look for an "AngularJS way" to solve them. So, I guess my answer to this question would essentially boil down to, "think like someone who never learned jQuery" and avoid any temptation to incorporate jQuery directly (obviously AngularJS uses it to some extent behind the scenes).AngularJS and jQuery:AngularJs and JQuery are completely different at every level except the JQLite functionality and you will see it once you start learning the AngularJs core features (I explained it below).AngularJs is a client side framework that offers to build the independent client side application. JQuery is a client side library that play around the DOM.AngularJs Cool Principle - If you want some changes on your UI think from model data change perspective. Change your data and UI will re-render itself. You need not to play around DOM each time unless and until it is hardly required and that should also be handled through Angular Directives.To answer this question, I want to share my experience on the first enterprise application with AngularJS. These are the most awesome features that Angular provide where we start changing our jQuery mindset and we get the Angular like a framework and not the library.Two-way data binding is amazing: 

I had a grid with all functionality UPDATE, DELTE, INSERT. I have a data object that binds the grid's model using ng-repeat. You only need to write a single line of simple JavaScript code for delete and insert and that's it. grid automatically updates as the grid model changes instantly. Update functionality is real time, no code for it.

You feel amazing!!!Reusable directives are super:

Write directives in one place and use it throughout the application. OMG!!! I used these directive for paging, regex, validations, etc. It is really cool!Routing is strong:

It's up to your implementation how you want to use it, but it requires very few lines of code to route the request to specify HTML and controller (JavaScript)Controllers are great:

Controllers take care of their own HTML, but this separation works well for common functionality well as. If you want to call the same function on the click of a button on master HTML, just write the same function name in each controller and write individual code.Plugins:

There are many other similar features like showing an overlay in your app. You don't need to write code for it, just use an overlay plugin available as wc-overlay, and this will automatically take care of all XMLHttpRequest (XHR) requests.Ideal for RESTful architecture:

Being a complete frameworks makes AngularJS great to work with a RESTful architecture. To call REST CRUD APIs is very easier and Services: Write common codes using services and less code in controllers. Sevices can be used to share common functionalities among the controllers.Extensibility: Angular has extended the HTML directives using angular directives. Write expressions inside html and evaluate them on runtime. Create your own directives and services and use them in another project without any extra effort.As a JavaScript MV* beginner and purely focusing on the application architecture (not the server/client-side matters), I would certainly recommend the following resource (which I am surprised wasn't mentioned yet): JavaScript Design Patterns, by Addy Osmani, as an introduction to different JavaScript Design Patterns. The terms used in this answer are taken from the linked document above. I'm not going to repeat what was worded really well in the accepted answer. Instead, this answer links back to the theoretical backgrounds which power AngularJS (and other libraries).Like me, you will quickly realize that AngularJS (or Ember.js, Durandal, & other MV* frameworks for that matter) is one complex framework assembling many of the different JavaScript design patterns.I found it easier also, to test (1) native JavaScript code and (2) smaller libraries for each one of these patterns separately before diving into one global framework. This allowed me to better understand which crucial issues a framework adresses (because you are personally faced with the problem).For example:NB: This list is not complete, nor 'the best libraries'; they just happen to be the libraries I used. These libraries also include more patterns, the ones mentioned are just their main focuses or original intents. If you feel something is missing from this list, please do mention it in the comments, and I will be glad to add it.Actually, if you're using AngularJS, you don't need jQuery anymore. AngularJS itself has the binding and directive, which is a very good "replacement" for most things you can do with jQuery.I usually develop mobile applications using AngularJS and Cordova. The ONLY thing from jQuery I needed is the Selector.By googling, I see that there is a standalone jQuery selector module out there. It's Sizzle. And I decided to make a tiny code snippet that help me quickly start a website using AngularJS with the power of jQuery Selector (using Sizzle).I shared my code here: https://github.com/huytd/Sizzular

How do I copy to the clipboard in JavaScript?

Santiago Corredoira

[How do I copy to the clipboard in JavaScript?](https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript)

What is the best way to copy text to the clipboard? (multi-browser)I have tried: but in Internet Explorer it gives a syntax error. In Firefox, it says unsafeWindow is not defined.A nice trick without flash: How does Trello access the user's clipboard?

2008-12-30 13:09:05Z

What is the best way to copy text to the clipboard? (multi-browser)I have tried: but in Internet Explorer it gives a syntax error. In Firefox, it says unsafeWindow is not defined.A nice trick without flash: How does Trello access the user's clipboard?There are three primary browser APIs for copying to the clipboard:Don't expect clipboard related commands to work whilst you are testing code in the console. Generally the page is required to be active (Async Clipboard API) or requires user interaction (e.g. a user click) to allow (document.execCommand('copy')) to access the clipboard see below for more detail.Note that since this post was originally written deprecation of permissions in cross-origin IFRAMEs and other IFRAME "sandboxing" prevents the embedded demos "Run code snippet" buttons and "codepen.io example" from working in some browsers (including Chrome and Microsoft Edge).To develop create your own web page, serve that page over HTTPS connection to test and develop against.Here is a test/demo page which demonstrates the code working:

https://deanmarktaylor.github.io/clipboard-test/Due to the level of browser support for the new Async Clipboard API you will likely want to fallback to the document.execCommand('copy') method to get good browser coverage.Here is a simple example (may not work embedded in this site, read "important" note above):(codepen.io example may not work, read "important" note above)

Note that this snippet is not working well in Stack Overflow's embedded preview you can try it here: https://codepen.io/DeanMarkTaylor/pen/RMRaJX?editors=1011Note that there is an ability to "request permission" and test for access to the clipboard via the permissions API in Chrome 66.The rest of this post goes into the nuances and detail of the document.execCommand('copy') API.The JavaScript document.execCommand('copy') support has grown, see the links below for browser updates:(may not work embedded in this site, read "important" note above)

The above simple example works great if there is a textarea or input element visible on screen.In some cases you might wish to copy text to the clipboard without displaying an input / textarea element. This is one example of a way to work around this (basically insert element, copy to clipboard, remove element):Tested with Google Chrome 44, Firefox 42.0a1 and Internet Explorer 11.0.8600.17814.(may not work embedded in this site, read "important" note above)

All document.execCommand('copy') calls must take place as a direct result of a user action, e.g. click event handler. This is a measure to prevent messing with the user's clipboard when they don't expect it.See the Google Developers post here for more info.Note the full Clipboard API draft specification can be found here:

https://w3c.github.io/clipboard-apis/However as an example of browser compatibility issues, Google Chrome from ~April to ~October 2015 only returned true from document.queryCommandSupported('copy') if the command was called from a user-initiated thread.Note compatibility detail below.Whilst a simple call to document.execCommand('copy') wrapped in a try/catch block called as a result of a user click will get you the most compatibility use the following has some provisos:Any call to document.execCommand, document.queryCommandSupported or document.queryCommandEnabled should be wrapped in a try/catch block.Different browser implementations and browser versions throw differing types of exceptions when called instead of returning false.Different browser implementations are still in flux and the Clipboard API is still in draft, so remember to do your testing.Automatic copying to clipboard may be dangerous, therefore most browsers (except IE) make it very difficult. Personally, I use the following simple trick:The user is presented with the prompt box, where the text to be copied is already selected. Now it's enough to press Ctrl+C and Enter (to close the box) -- and voila!Now the clipboard copy operation is SAFE, because the user does it manually (but in a pretty straightforward way). Of course, works in all browsers.The following approach works in Chrome, Firefox, Internet Explorer and Edge, and in recent versions of Safari (copy support was added in version 10 which was released Oct 2016).Note: you will not see the textarea, as it is added and removed within the same synchronous invocation of Javascript code.Some things to watch out for if you are implementing this yourself:The function below should handle all of the following issues as cleanly as possible. Please leave a comment if you find any problems or have any suggestions for improving it.https://jsfiddle.net/fx6a6n6x/If you want a really simple solution (takes less than 5 minutes to integrate) and looks good right out of the box, then Clippy is a nice alternative to some of the more complex solutions.It was written by a co-founder of GitHub. Example Flash embed code below:Remember to replace #{text} with the text you need copied, and #{bgcolor} with a color.Reading and modifying the clipboard from a webpage raises security and privacy concerns. However, in Internet Explorer, it is possible to do it. I found this example snippet:Here is my take on that one...@korayem: Note that using html input field won't respect line breaks \n and will flatten any text into a single line.As mentioned by @nikksan in the comments, using textarea will fix the problem as follows:I have recently written a technical blog post on this very problem (I work at Lucidchart and we recently did an overhaul on our clipboard).Copying plain text to the clipboard is relatively simple, assuming you want to do it during a system copy event (user presses CtrlC or uses the browser's menu).Putting text on the clipboard not during a system copy event is much more difficult. It looks like some of these other answers reference ways to do it via Flash, which is the only cross-browser way to do it (so far as I understand).Other than that, there are some options on a browser-by-browser basis.This is the most simple in IE, where you can access the clipboardData object at anytime from JavaScript via:(When you attempt to do this outside of a system cut, copy, or paste event, however, IE will prompt the user to grant the web application clipboard permission.)In Chrome, you can create a Chrome extension that will give you clipboard permissions (this is what we do for Lucidchart). Then for users with your extension installed you'll just need to fire the system event yourself:It looks like Firefox has some options that allow users to grant permissions to certain sites to access the clipboard, but I haven't tried any of these personally.clipboard.js is a small, non-Flash, utility that allows copying of text or HTML data to the clipboard. It's very easy to use, just include the .js and use something like this:clipboard.js is also on GitHub.ZeroClipboard is the best cross-browser solution I've found:If you need non-flash support for iOS you just add a fall-back:http://zeroclipboard.org/https://github.com/zeroclipboard/ZeroClipboardFrom one of the projects I've been working on, a jQuery copy-to-clipboard plugin that utilizes the Zero Clipboard library.It is easier to use than the native Zero Clipboard plugin if you're a heavy jQuery user.In 2018, here's how you can go about it:It is used in my Angular 6+ code like so:If I pass in a string, it copies it. If nothing, it copies the page's URL.More gymnastics to the clipboard stuff can be done too. See more information here:Unblocking Clipboard AccessI found the following solution:On key down handler creates "pre" tag. We set the content to copy to this tag, then make a selection on this tag and return true in handler. This calls standard handler of chrome and copies selected text.And if you need you may be set the timeout for function for restoring previous selection. My implementation on Mootools:Usage:On paste it creates textarea and works the same way.PS may be this solution can be used for creating fully cross-browser solution without flash. Its works in FF and Chrome.Since Chrome 42+ and Firefox 41+ now support the document.execCommand('copy') command. So I created a couple of functions for a cross-browser copy-to-clipboard ability using a combination of Tim Down's old answer and Google Developer's answer:I use this very successfully (without jQuery or any other framework).WarningTabs are converted to spaces (at least in Chrome).The other methods will copy plain text to the clipboard. To copy HTML (ie, you can paste results into a WSIWYG editor), you can do the following in IE ONLY. This is is fundamentally different from the other methods, as the browser actually visibly selects the content.I've put together what I think is the best one.Here it is:Usage: copyToClipboard('some text')As of Flash 10, you can only copy to clipboard if the action originates from user interaction with a Flash object. (Read related section from Adobe's Flash 10 announcement)The solution is to overly a flash object above the Copy button, or whatever element initiates the copy. Zero Clipboard is currently the best library with this implementation. Experienced Flash developers may just want to make their own library.I found the following solution:I have the text in a hidden input. Because setSelectionRange doesn't work on hidden inputs, I changed temporarily the type to text, copied the text, and then made it hidden again. If you want to copy the text from an element, you can pass it to the function and save its content in the target variable.There are many answers already, however like to add one (jQuery). Works great on any browser, also mobile ones (i.e., prompts about security, but when you accept it just works fine).In your code:Copy text from HTML input to the clipboard:Note: The document.execCommand() method is not supported in Internet Explorer 9 and earlier.Source: W3Schools - Copy Text to ClipboardIn browsers other than IE you need to use a small flash object to manipulate the clipboard, e.g.I had the same problem building a custom grid edit from (something like Excel) and compatibility with Excel. I had to support selecting multiple cells, copying and pasting.Solution: create a textarea where you will be inserting data for the user to copy (for me when the user is selecting cells), set focus on it (for example, when user press Ctrl) and select the whole text.So, when the user hit Ctrl + C he/she gets copied cells he/she selected. After testing just resizing the textarea to one pixel (I didn't test if it will be working on display:none). It works nicely on all browsers, and it is transparent to the user.Pasting - you could do same like this (differs on your target) - keep focus on textarea and catch paste events using onpaste (in my project I use textareas in cells to edit).I can't paste an example (commercial project), but you get the idea.This is a bit of a combination between the other answers.It uses jQuery, but it doesn't have to of course. You can change that if you want. I just had jQuery to my disposal. You can also add some CSS to make sure the input doesn't show. For instance something like:Or of course you could also do some inline stylingI have used clipboard.js.We can get it on npm:And also on BowerUsage & examples are at https://zenorocha.github.io/clipboard.js/.This is an expansion of @Chase's answer, with the advantage that it will work for IMAGE and TABLE elements, not just DIVs on IE9.It seems I misread the question, but for reference, you can extract a range of the DOM (not to clipboard; compatible with all modern browsers), and combine it with the oncopy and onpaste and onbeforepaste events to get clipboard behaviour. Here's the code to achieve this: My bad. This only works in IE.Here's yet another way to copy text:This was the only thing I ever got working, after looking up various ways all around the Internet. This is a messy topic. There are lots of solutions posted around the world and most of them do not work. This worked for me:NOTE: This code will only work when executed as direct synchronous code to something like an 'onClick' method. If you call in an asynchronous response to Ajax or in any other asynchronous way it will not work.I do realize this code will show a 1-pixel wide component visibly on the screen for a millisecond, but decided not to worry about that, which is something that others can address if a real problem.To copy a selected text ('Text To Copy') to your clipboard, create a Bookmarklet (browser bookmark that executes JavaScript) and execute it (click on it). It will create a temporary textarea.Code from GitHub:https://gist.github.com/stefanmaric/2abf96c740191cda3bc7a8b0fc905a7d

What is the difference between call and apply?

John Duff

[What is the difference between call and apply?](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply)

What is the difference between using call and apply to invoke a function?func.apply(); vs func.call();Are there performance differences between the two aforementioned methods? When is it best to use call over apply and vice versa?

2009-12-31 19:56:25Z

What is the difference between using call and apply to invoke a function?func.apply(); vs func.call();Are there performance differences between the two aforementioned methods? When is it best to use call over apply and vice versa?The difference is that apply lets you invoke the function with arguments as an array; call requires the parameters be listed explicitly. A useful mnemonic is "A for array and C for comma."See MDN's documentation on apply and call.Pseudo syntax:theFunction.apply(valueForThis, arrayOfArgs)theFunction.call(valueForThis, arg1, arg2, ...)There is also, as of ES6, the possibility to spread the array for use with the call function, you can see the compatibilities here.Sample code:K. Scott Allen has a nice writeup on the matter.Basically, they differ on how they handle function arguments.  So:To answer the part about when to use each function, use apply if you don't know the number of arguments you will be passing, or if they are already in an array or array-like object (like the arguments object to forward your own arguments. Use call otherwise, since there's no need to wrap the arguments in an array.When I'm not passing any arguments (like your example), I prefer call since I'm calling the function. apply would imply you are applying the function to the (non-existent) arguments.There shouldn't be any performance differences, except maybe if you use apply and wrap the arguments in an array (e.g. f.apply(thisObject, [a, b, c]) instead of f.call(thisObject, a, b, c)). I haven't tested it, so there could be differences, but it would be very browser specific. It's likely that call is faster if you don't already have the arguments in an array and apply is faster if you do.Here's a good mnemonic.  Apply uses Arrays and Always takes one or two Arguments.  When you use Call you have to Count the number of arguments.While this is an old topic, I just wanted to point out that .call is slightly faster than .apply. I can't tell you exactly why.See jsPerf, http://jsperf.com/test-call-vs-apply/3[UPDATE!]Douglas Crockford mentions briefly the difference between the two, which may help explain the performance difference... http://youtu.be/ya4UHuXNygM?t=15m52sApply takes an array of arguments, while Call takes zero or more individual parameters! Ah hah!.apply(this, [...]).call(this, param1, param2, param3, param4...)Follows an extract from Closure: The Definitive Guide by Michael Bolin. It might look a bit lengthy, but it's saturated with a lot of insight. From "Appendix B. Frequently Misunderstood JavaScript Concepts":When calling a function of the form foo.bar.baz(), the object foo.bar is referred to as the receiver. When the function is called, it is the receiver that is used as the value for this:If there is no explicit receiver when a function is called, then the global object becomes the receiver. As explained in "goog.global" on page 47, window is the global object when JavaScript is executed in a web browser. This leads to some surprising behavior:Even though obj.addValues and f refer to the same function, they behave differently when called because the value of the receiver is different in each call. For this reason, when calling a function that refers to this, it is important to ensure that this will have the correct value when it is called. To be clear, if this were not referenced in the function body, then the behavior of f(20) and obj.addValues(20) would be the same.Because functions are first-class objects in JavaScript, they can have their own methods. All functions have the methods call() and apply() which make it possible to redefine the receiver (i.e., the object that this refers to) when calling the function. The method signatures are as follows:Note that the only difference between call() and apply() is that call() receives the function parameters as individual arguments, whereas apply() receives them as a single array:The following calls are equivalent, as f and obj.addValues refer to the same function:However, since neither call() nor apply() uses the value of its own receiver to substitute for the receiver argument when it is unspecified, the following will not work:The value of this can never be null or undefined when a function is called. When null or undefined is supplied as the receiver to call() or apply(), the global object is used as the value for receiver instead. Therefore, the previous code has the same undesirable side effect of adding a property named value to the global object.It may be helpful to think of a function as having no knowledge of the variable to which it is assigned. This helps reinforce the idea that the value of this will be bound when the function is called rather than when it is defined.End of extract.It is useful at times for one object to borrow the function of another object, meaning that the borrowing object simply executes the lent function as if it were its own.  A small code example:These methods are very useful for giving objects temporary functionality.Another example with Call, Apply and Bind.

The difference between Call and Apply is evident, but Bind works like this:} I'd like to show an example, where the 'valueForThis' argument is used:**details: http://es5.github.io/#x15.4.4.7*Call() takes comma-separated arguments, ex: .call(scope, arg1, arg2, arg3) and apply() takes an array of arguments, ex: .apply(scope, [arg1, arg2, arg3]) here are few more usage examples: 

http://blog.i-evaluation.com/2012/08/15/javascript-call-and-apply/From the MDN docs on Function.prototype.apply() :From the MDN docs on Function.prototype.call() :From Function.apply and Function.call in JavaScript :See also this Fiddle.Fundamental difference is that call() accepts an argument list, while apply() accepts a single array of arguments.Here's a small-ish post, I wrote on this:http://sizeableidea.com/call-versus-apply-javascript/The difference is that call() takes the function arguments separately, and apply() takes the function arguments in an array.We can differentiate call and apply methods as belowCALL : A function with argument provide individually.

If you know the arguments to be passed or there are no argument to pass you can use call.APPLY : Call a function with argument provided as an array. You can use apply if you don't know how many argument are going to pass to the function.There is a advantage of using apply over call, we don't need to change the number of argument only we can change a array that is passed.There is not big difference in performance. But we can say call is bit faster as compare to apply because an array need to evaluate in apply method.Difference between these to methods are, how you want to pass the parameters.「A for array and C for comma」is a handy mnemonic.Call and apply both are used to force the this value when a function is executed. The only difference is that call takes n+1 arguments where 1 is this and 'n' arguments. apply takes only two arguments, one is this the other is argument array.The advantage I see in apply over call is that we can easily delegate a function call to other function without much effort;Observe how easily we delegated hello to sayHello using apply, but with call this is very difficult to achieve.Even though call and apply achive the same thing, I think there is atleast one place where you cannot use call but can only use apply. That is when you want to support inheritance and want to call the constructor.Here is a function allows you to create classes which also supports creating classes by extending other classes.Both call() and apply() are methods which are located on Function.prototype. Therefore they are available on every function object via the prototype chain. Both call() and apply() can execute a function with a specified value of the this.The main difference between call() and apply() is the way you have to pass in arguments into it. In both call() and apply() you pass as a first argument the object you want to be the value as this. The other arguments differ in the following way:The this value can be tricky sometimes in javascript. The value of this determined when a function is executed not when a function is defined. If our function is dependend on a right this binding we can use call() and apply() to enforce this behaviour. For example:The main difference is, using call, we can change the scope and pass arguments as normal, but apply lets you call it using arguments as an Array (pass them as an array). But in terms of what they to do in your code, they are pretty similar.So as you see, there is not a big difference, but still, there are cases we prefer using call() or apply(). For example, look at the code below, which finding the smallest and largest number in an array from MDN, using the apply method:So the main difference is just the way we passing the arguments:  

Call: Apply: Let me add a little detail to this.these two calls are almost equivalent:There’s only a minor difference:So, these calls complement each other. Where we expect an iterable, call works, where we expect an array-like, apply works.And for objects that are both iterable and array-like, like a real array, we technically could use any of them, but apply will probably be faster because most JavaScript engines internally optimize it better.

Loop through an array in JavaScript

Mark Szymanski

[Loop through an array in JavaScript](https://stackoverflow.com/questions/3010840/loop-through-an-array-in-javascript)

In Java you can use a for loop to traverse objects in an array as follows:Can you do the same in JavaScript?

2010-06-10 00:04:27Z

In Java you can use a for loop to traverse objects in an array as follows:Can you do the same in JavaScript?You have several options:ProsConsThe ES5 specification introduced a lot of beneficial array methods, one of them, the Array.prototype.forEach and it gives us a concise way to iterate over an array:Being almost ten years as the time of writing that the ES5 specification was released (Dec. 2009), it has been implemented by nearly all modern engines in the desktop, server, and mobile environments, so it's safe to use them.And with the ES6 arrow function syntax, it's even more succinct:Arrow functions are also widely implemented unless you plan to support ancient platforms (e.g., IE11); you are also safe to go.ProsConsNormally, you can replace the need to break out of imperative loops by filtering the array elements before iterating them, for example:Keep in mind if you are iterating an array to build another array from it, you should use map, I've seen this anti-pattern so many times.Anti-pattern:Proper use case of map:Also, if you are trying to reduce the array to a value, for example, you want to sum an array of numbers, you should use the reduce method.Anti-pattern:Proper use of reduce:The ES6 standard introduces the concept of iterable objects and defines a new construct for traversing data, the for...of statement.This statement works for any kind of iterable object and also for generators (any object that has a [Symbol.iterator] property).Array objects are by definition built-in iterables in ES6, so you can use this statement on them:ProsCons@zipcodeman suggests the use of the for...in statement, but for iterating arrays for-in should be avoided, that statement is meant to enumerate object properties.It shouldn't be used for array-like objects because:The second point is that it can give you a lot of problems, for example, if you extend the Array.prototype object to include a method there, that property will also be enumerated.For example:The above code will console log "a", "b", "c", and "foo!".That be particularly a problem if you use some library that relies heavily on native prototypes augmentation (such as MooTools, for example).The for-in statement as I said before is there to enumerate object properties, for example:In the above example, the hasOwnProperty method allows you to enumerate only own properties, that's it, only the properties that the object physically has, no inherited properties.I would recommend you to read the following article:Yes, assuming your implementation includes the for...of feature introduced in ECMAScript 2015 (the "Harmony" release)... which is a pretty safe assumption these days.It works like this:Or better yet, since ECMAScript 2015 also provides block-scoped variables:(The variable s is different on each iteration, but can still be declared const inside the loop body as long as it isn't modified there.)A note on sparse arrays: an array in JavaScript may not actually store as many items as reported by its length; that reported number is simply one greater than the highest index at which a value is stored. If the array holds fewer elements than indicated by its length, its said to be sparse. For example, it's perfectly legitimate to have an array with items only at indexes 3, 12, and 247; the length of such an array is reported as 248, though it is only actually storing 3 values.  If you try to access an item at any other index, the array will appear to have the undefined value there. So when you want to "loop through" an array, you have a question to answer: do you want to loop over the full range indicated by its length and process undefineds for any missing elements, or do you only want to process the elements actually present? There are plenty of applications for both approaches; it just depends on what you're using the array for.If you iterate over an array with for..of, the body of the loop is executed length times, and the loop control variable is set to undefined for any items not actually present in the array. Depending on the details of your "do something with" code, that behavior may be what you want, but if not, you should use a different approach.Of course, some developers have no choice but to use a different approach anyway, because for whatever reason they're targeting a version of JavaScript that doesn't yet support for...of.As long as your JavaScript implementation is compliant with the previous edition of the ECMAScript specification (which rules out, for example, versions of Internet Explorer before 9), then you can use the Array#forEach iterator method instead of a loop. In that case, you pass a function to be called on each item in the array:Unlike for...of, .forEach only calls the function for elements that are actually present in the array. If passed our hypothetical array with three elements and a length of 248, it will only call the function three times, not 248 times. It also distinguishes between missing elements and elements that are actually set to undefined; for the latter, it will still call the function, passing undefined as the argument. If this is how you want to handle sparse arrays, .forEach may be the way to go even if your interpreter supports for...of.The final option, which works in all versions of JavaScript, is an explicit counting loop. You simply count from 0 up to one less than the length and use the counter as an index. The basic loop looks like this:One advantage of this approach is that you can choose how to handle sparse arrays; the above code will run the body of the loop the full length times, with s set to undefined for any missing elements, just like for..of. If you instead want to handle only the actually-present elements of a sparse array, like .forEach, you can add a simple in test on the index:Assigning the length value to the local variable (as opposed to including the full myStringArray.length expression in the loop condition) can make a significant difference in performance since it skips a property lookup each time through; using Rhino on my machine, the speedup is 43%. You may see the length caching done in the loop initialization clause, like this:The explicit counting loop also means you have access to the index of each value, should you want it. The index is also passed as an extra parameter to the function you pass to forEach, so you can access it that way as well:for...of doesn't give you the index associated with each object, but as long as the object you're iterating over is actually an Array (for..of works for other iterable types which may not have this method), you can use the Array#entries method to change it to an array of [index, item] pairs, and then iterate over that:The for...in syntax mentioned by others is for looping over an object's properties; since an Array in JavaScript is just an object with numeric property names (and an automatically-updated length property), you can theoretically loop over an Array with it.  But the problem is that it doesn't restrict itself to the numeric property values (remember that even methods are actually just properties whose value is a closure), nor is it guaranteed to iterate over those in numeric order. Therefore, the for...in syntax should not be used for looping through Arrays. You can use map, which is a functional programming technique that's also available in other languages like Python and Haskell.The general syntax is:In general func would take one parameter, which is an item of the array. But in the case of JavaScript, it can take a second parameter which is the item's index, and a third parameter which is the array itself.The return value of array.map is another array, so you can use it like this:And now x is [10,20,30,40].You don't have to write the function inline. It could be a separate function.which would be sort-of equivalent to:Except you don't get the new_list.In JavaScript it's not advisable to loop through an Array with a for-in loop, but it's better to use a for loop such as:It's optimized as well ("caching" the array length). If you'd like to learn more, read my post on the subject.(Directly answering your question: now you can!)Most other answers are right, but they do not mention (as of this writing) that ECMA Script  6  2015 is bringing a new mechanism for doing iteration, the for..of loop. This new syntax is the most elegant way to iterate an array in javascript (as long you don't need the iteration index), but it is not yet widely supported by the browsers. It currently works with Firefox 13+, Chrome 37+ and it does not natively work with other browsers (see browser compatibility below). Luckily we have JS compilers (such as Babel) that allow us to use next-generation features today.It also works on Node (I tested it on version 0.12.0).Iterating an arrayIterating an array of objectsIterating a generator:(example extracted from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)Compatibility table:

http://kangax.github.io/es5-compat-table/es6/#For..of loopsSpec: http://wiki.ecmascript.org/doku.php?id=harmony:iteratorsOpera, Safari, Firefox and Chrome now all share a set of enhanced Array methods for optimizing many common loops.You may not need all of them, but they can be very useful, or would be if every browser supported them.Mozilla Labs published the algorithms they and WebKit both use, so that you can add them yourself.filter returns an array of items that satisfy some condition or test.every returns true if every array member passes the test.some returns true if any pass the test.forEach runs a function on each array member and doesn't return anything.map is like forEach, but it returns an array of the results of the operation for each element.These methods all take a function for their first argument and have an optional second argument, which is an object whose scope you want to impose on the array members as they loop through the function.Ignore it until you need it.indexOf and lastIndexOf find the appropriate position of the first or last element that matches its argument exactly.Use the while loop...logs: 'one','two','three'And for the reverse order, an even more efficient looplogs: 'three','two','one'Or the classical for looplogs: 'one','two','three'Reference:

http://www.sitepoint.com/google-closure-how-not-to-write-javascript/Since my time in college, I've programmed in Java, JavaScript, Pascal, ABAP, PHP, Progress 4GL, C/C++ and possibly a few other languages I can't think of right now.While they all have their own linguistic idiosyncrasies, each of these languages share many of the same basic concepts. Such concepts include procedures / functions, IF-statements, FOR-loops, and WHILE-loops.A traditional for loop has three components:These three components are separated from each other by a ; symbol. Content for each of these three components is optional, which means that the following is the most minimal for loop possible:Of course, you will need to include an if(condition === true) { break; }  or an if(condition === true) { return; } somewhere inside that for-loop to get it to stop running.Usually, though, the initialization is used to declare an index, the condition is used to compare that index with a minimum or maximum value, and the afterthought is used to increment the index:The traditional way to loop through an array, is this:Or, if you prefer to loop backwards, you do this:There are, however, many variations possible, like for example this one:...or this one......or this one:Whichever works best is largely a matter of both personal taste and the specific use case you're implementing.Note that each of these variations is supported by all browsers, including very very old ones!One alternative to a for loop is a while loop. To loop through an array, you could do this:Like traditional for loops, while loops are supported by even the oldest of browsers.Also, note that every while loop can be rewritten as a for loop. For example, the while loop hereabove behaves the exact same way as this for-loop:In JavaScript, you can also do this:This should be used with care, however, as it doesn't behave the same as a traditional for loop in all cases, and there are potential side-effects that need to be considered. See Why is using "for...in" with array iteration a bad idea? for more details.As an alternative to for...in, there's now also for for...of. The following example shows the difference between a for...of loop and a for...in loop:Additionally, you need to consider that no version of Internet Explorer supports for...of (Edge 12+ does) and that for...in requires at least Internet Explorer 10.An alternative to for-loops is Array.prototype.forEach(), which uses the following syntax:Array.prototype.forEach() is supported by all modern browsers, as well as Internet Explorer 9 and later.Finally, many utility libraries also have their own foreach variation. AFAIK, the three most popular ones are these:jQuery.each(), in jQuery:_.each(), in Underscore.js:_.forEach(), in Lodash.js:If you want a terse way to write a fast loop and you can iterate in reverse:This has the benefit of caching the length (similar to for (var i=0, len=myArray.length; i<len; ++i) and unlike for (var i=0; i<myArray.length; ++i)) while being fewer characters to type.There are even some times when you ought to iterate in reverse, such as when iterating over a live NodeList where you plan on removing items from the DOM during iteration.Some use cases of looping through an array in the functional programming way in JavaScript:Note: Array.prototype.forEach() is not a functional way strictly speaking, as the function it takes as the input parameter is not supposed to return a value, which thus cannot be regarded as a pure function.Note: The map() method creates a new array with the results of calling a provided function on every element in the calling array.Note: The filter() method creates a new array with all elements that pass the test implemented by the provided function.The Array.prototype.find() method returns the value of the first element in the array that satisfies the provided testing function.There is a way to do it where you have very little implicit scope in your loop and do away with extra variables.Or if you really want to get the id and have a really classical for loop:Modern browsers all support iterator methods forEach, map, reduce, filter and a host of other methods on the Array prototype. There are various way to loop through array in JavaScript.  Generic loop:ES5's forEach:jQuery.each:Have a look this for detailed information or you can also check MDN for looping through an array in JavaScript & using jQuery check jQuery for each.I would thoroughly recommend making use of the underscore.js library. It provides you with various functions that you can use to iterate over arrays/collections.For instance:Array loop:Object loop:Yes, you can do the same in JavaScript using a loop, but not limited to that, there are many ways to do a loop over arrays in JavaScript. Imagine you have this array below, and you'd like to do a loop over it:These are the solutions:1) For loopA for loop is a common way looping through arrays in JavaScript, but no considered as the fastest solutions for large arrays:2) While loopA while loop is considered as the fastest way to loop through long arrays, but it is usually less used in the JavaScript code:3) Do while

A do while is doing the same thing as while with some syntax difference as below:These are the main ways to do JavaScript loops, but there are a few more ways to do that.Also we use a for in loop for looping over objects in JavaScript.Also look at the map(), filter(), reduce(), etc. functions on an Array in JavaScript. They may do things much faster and better than using while and for.This is a good article if you like to learn more about the asynchronous functions over arrays in JavaScript.Read more>> here:If anybody is interested in the performance side of the multiple mechanisms available for Array iterations, I've prepared the following JSPerf tests:https://jsperf.com/fastest-array-iteratorThe traditional for() iterator, is by far the fastest method, especially when used with the array length cached.The Array.prototype.forEach() and the Array.prototype.map() methods are the slowest approximations, probably as a consequence of the function call overhead.If you're using the jQuery library, consider using 

http://api.jquery.com/jQuery.each/From the documentation:I did not yet see this variation, which I personally like the best:Given an array:You can loop over it without ever accessing the length property:See this JsFiddle demonstrating that: http://jsfiddle.net/prvzk/This only works for arrays that are not sparse. Meaning that there actually is a value at each index in the array. However, I found that in practice I hardly ever use sparse arrays in JavaScript... In such cases it's usually a lot easier to use an object as a map/hashtable. If you do have a sparse array, and want to loop over 0 .. length-1, you need the for (var i=0; i<someArray.length; ++i) construct, but you still need an if inside the loop to check whether the element at the current index is actually defined.Also, as CMS mentions in a comment below, you can only use this on arrays that don't contain any falsish values. The array of strings from the example works, but if you have empty strings, or numbers that are 0 or NaN, etc. the loop will break off prematurely. Again in practice this is hardly ever a problem for me, but it is something to keep in mind, which makes this a loop to think about before you use it... That may disqualify it for some people :)What I like about this loop is:The reason this works is that the array specification mandates that when you read an item from an index >= the array's length, it will return undefined. When you write to such a location it will actually update the length.For me, this construct most closely emulates the Java 5 syntax that I love:... with the added benefit of also knowing about the current index inside the loopThere's a method to iterate over only own object properties, not including prototype's ones:but it still will iterate over custom-defined properties.In JavaScript any custom property could be assigned to any object, including an array.If one wants to iterate over sparsed array, for (var i = 0; i < array.length; i++) if (i in array) or array.forEach with es5shim should be used.http://jsperf.com/native-loop-performance/8Comparing methods for looping through an array of 100000 items and do a minimal operation with the new value each time.Preparation:Tests:There are a couple of ways to do it in JavaScript. The first two examples are JavaScript samples. The third one makes use of a JavaScript library, that is, jQuery making use of the .each() function.The optimized approach is to cache the length of array and using single var pattern initializing all variables with single var keyword.If order of iteration does not matter than you should try reversed loop, it is fastest as it reduce overhead condition testing and decrement is in one statement:or better and cleaner to use while loop:In JavaScript, there are so many solutions to loop an array.The code below are popular onesThe best way in my opinion is to use the Array.forEach function. If you cannot use that I would suggest to get the polyfill from MDN. To make it available, it is certainly the safest way to iterate over an array in JavaScript.Array.prototype.forEach()So as others has suggested, this is almost always what you want:This ensures that anything you need in the scope of processing the array stays within that scope, and that you are only processing the values of the array, not the object properties and other members, which is what for .. in does.Using a regular C-style for loop works in most cases. It is just important to remember that everything within the loop shares its scope with the rest of your program, the { } does not create a new scope.Hence:will output "11" - which may or may not be what you want.A working jsFiddle example:

https://jsfiddle.net/workingClassHacker/pxpv2dh5/7/If you want to use jQuery, it has a nice example in its documentation:It's not 100% identical, but similar:For example, I used in a Firefox console:A lot cleaner...Short answer: yes. You can do with this:In a browser console, you can see something like "element1", "element2", etc., printed.You can either use Array.prototype.forEach(...):Or Array.prototype.map(...):Or the jquery or for loop ways previously mentioned.

What is the !! (not not) operator in JavaScript?

Hexagon Theory

[What is the !! (not not) operator in JavaScript?](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)

I saw some code that seems to use an operator I don't recognize, in the form of two exclamation points, like so: !!. Can someone please tell me what this operator does?The context in which I saw this was,

2009-04-24 08:13:58Z

I saw some code that seems to use an operator I don't recognize, in the form of two exclamation points, like so: !!. Can someone please tell me what this operator does?The context in which I saw this was,Converts Object to boolean. If it was falsey (e.g. 0, null, undefined, etc.), it will be false, otherwise, true.So !! is not an operator, it's just the ! operator twice.Real World Example "Test IE version":  If you ⇒But if you ⇒It's a horribly obscure way to do a type conversion.! is NOT.  So !true is false, and !false is true. !0 is true, and !1 is false.So you're converting a value to a boolean, then inverting it, then inverting it again.!!expr returns a Boolean value (true or false) depending on the truthiness of the expression. It makes more sense when used on non-boolean types. Consider these examples, especially the 3rd example and onward:Brew some tea:!! is not an operator. It is the double-use of ! -- which is the logical "not" operator. In theory:! determines the "truth" of what a value is not:!! determines the "truth" of what a value is not not:What we wish to determine in the comparison is the "truth" about the value of a reference, not the value of the reference itself. There is a use-case where we might want to know the truth about a value, even if we expect the value to be false (or falsey), or if we expect the value not to be typeof boolean. In practice:Consider a concise function which detects feature functionality (and in this case, platform compatibility) by way of dynamic typing (aka "duck typing"). We want to write a function that returns true if a user's browser supports the HTML5 <audio> element, but we don't want the function to throw an error if <audio> is undefined; and we don't want to use try ... catch to handle any possible errors (because they're gross); and also we don't want to use a check inside the function that won't consistently reveal the truth about the feature (for example, document.createElement('audio') will still create an element called <audio> even if HTML5 <audio> is not supported). Here are the three approaches:Each function accepts an argument for a <tag> and an attribute to look for, but they each return different values based on what the comparisons determine. But wait, there's more!Some of you probably noticed that in this specific example, one could simply check for a property using the slightly more performant means of checking if the object in question has a property. There are two ways to do this:We digress...However rare these situations may be, there may exist a few scenarios where the most concise, most performant, and thus most preferred means of getting true from a non-boolean, possibly undefined value is indeed by using !!. Hopefully this ridiculously clears it up.!! converts the value to the right of it to its equivalent boolean value. (Think poor man's way of "type-casting"). Its intent is usually to convey to the reader that the code does not care what value is in the variable, but what it's "truth" value is.!!foo applies the unary not operator twice and is used to cast to boolean type similar to the use of unary plus +foo to cast to number and concatenating an empty string ''+foo to cast to string.Instead of these hacks, you can also use the constructor functions corresponding to the primitive types (without using new) to explicitly cast values, ieSo many answers doing half the work. Yes, !!X could be read as "the truthiness of X [represented as a boolean]". But !! isn't, practically speaking, so important for figuring out whether a single variable is (or even if many variables are) truthy or falsy. !!myVar === true is the same as just myVar. Comparing !!X to a "real" boolean isn't really useful.What you gain with !! is the ability to check the truthiness of multiple variables against each other in a repeatable, standardized (and JSLint friendly) fashion.That is...The above's not so useful. if (!0) gives you the same results as if (!!0 === false). I can't think of a good case for casting a variable to boolean and then comparing to a "true" boolean.See "== and !=" from JSLint's directions (note: Crockford is moving his site around a bit; that link is liable to die at some point) for a little on why:Note that there are some unintuitive cases where a boolean will be cast to a number (true is cast to 1 and false to 0) when comparing a boolean to a number. In this case, !! might be mentally useful. Though, again, these are cases where you're comparing a non-boolean to a hard-typed boolean, which is, imo, a serious mistake. if (-1) is still the way to go here.And things get even crazier depending on your engine. WScript, for instance, wins the prize.Because of some historical Windows jive, that'll output -1 in a message box! Try it in a cmd.exe prompt and see! But WScript.echo(-1 == test()) still gives you 0, or WScript's false. Look away. It's hideous.But what if I have two values I need to check for equal truthi/falsi-ness?Pretend we have myVar1 = 0; and myVar2 = undefined;.So the only place you'd really need to use "boolean-cast variables" would be if you had a situation where you're checking if both variables have the same truthiness, right? That is, use !! if you need to see if two vars are both truthy or both falsy (or not), that is, of equal (or not) truthiness.I can't think of a great, non-contrived use case for that offhand. Maybe you have "linked" fields in a form? So now if you have a truthy for both or a falsy for both spouse name and age, you can continue. Otherwise you've only got one field with a value (or a very early arranged marriage) and need to create an extra error on your errorObjects collection.EDIT 24 Oct 2017, 6 Feb 19: Here's an interesting case... !! might be useful when 3rd party libs expect explicit Boolean values.For instance, False in JSX (React) has a special meaning that's not triggered on simple falsiness. If you tried returning something like the following in your JSX, expecting an int in messageCount...{messageCount && <div>You have messages!</div>}... you might be surprised to see React render a 0 when you have zero messages. You have to explicitly return false for JSX not to render. The above statement returns 0, which JSX happily renders, as it should. It can't tell you didn't have Count: {messageCount && <div>Get your count to zero!</div>} (or something less contrived).Same deal in Typescript: If you have a function that returns a boolean (or you're assigning a value to a boolean variable), you [usually] can't return/assign a boolean-y value; it has to be a strongly typed boolean. This means, iff myObject is strongly typed, return !myObject; works for a function returning a boolean, but return myObject; doesn't. You have to return !!myObject to match Typescript's expectations.Keep in mind that these are JSX & Typescript conventions, not ones inherent to JavaScript.But if you see strange 0s in your rendered JSX, think loose falsy management.It's just the logical NOT operator, twice - it's used to convert something to boolean, e.g.:It converts the suffix to a Boolean value. It's a double not operation.  The first ! converts the value to boolean and inverts its logical value.  The second ! inverts the logical value back.It simulates the behavior of the Boolean() casting function.

The first NOT returns a Boolean value no matter what operand it is given. The second NOT negates that Boolean value and so gives the true Boolean value of a variable. The end result is the same as using the Boolean() function on a value.It seems that the !! operator results in a double negation.! is "boolean not", which essentially typecasts the value of "enable" to its boolean opposite. The second ! flips this value. So, !!enable means "not not enable," giving you the value of enable as a boolean.I think worth mentioning is, that a condition combined with logical AND/OR will not return a boolean value but last success or first fail in case of && and 

first success or last fail in case of || of condition chain.In order to cast the condition to a true boolean literal we can use the double negation:!! it's using NOT operation twice together, ! convert the value to a boolean and reverse it, here is a simple example to see how !! works:At first, the place you have:Then you do !0, it will be converted to boolean and be evaluated to true, because 0 is falsy, so you get the reversed value and converted to boolean, so it gets evaluated to true.but we don't want the reversed boolean version of the value, so we can reverse it again to get our result! That's why we use another !.Basically, !! make us sure, the value we get is boolean, not falsy, truthy or string etc...So  it's like using Boolean function in javascript, but easy and shorter way to convert a value to boolean:The !! construct is a simple way of turning any JavaScript expression into

its Boolean equivalent. For example: !!"he shot me down" === true and !!0 === false.It's not a single operator, it's two.  It's equivalent to the following and is a quick way to cast a value to boolean. I suspect this is a leftover from C++ where people override the ! operator but not the bool operator.So to get a negative(or positive) answer in that case you would first need to use the ! operator to get a boolean, but if you wanted to check the positive case would use !!.The if and while statements and the ? operator use truth values to determine which branch of code to run. For example, zero and NaN numbers and the empty string are false, but other numbers and strings are true. Objects are true, but the undefined value and null are both false.The double negation operator !! calculates the truth value of a value. It's actually two operators, where !!x means !(!x), and behaves as follows:When used at the top level of a Boolean context (if, while, or ?), the !! operator is behaviorally a no-op. For example, if (x) and if (!!x) mean the same thing.However it has several practical uses.One use is to lossily compress an object to its truth value, so that your code isn't holding a reference to a big object and keeping it alive. Assigning !!some_big_object to a variable instead of some_big_object lets go of it for the garbage collector. This is useful for cases that produce either an object or a false value such as null or the undefined value, such as browser feature detection.Another use, which I mentioned in an answer about C's corresponding !! operator, is with "lint" tools that look for common typos and print diagnostics. For example, in both C and JavaScript, a few common typos for Boolean operations produce other behaviors whose output isn't quite as Boolean:The !! operator reassures the lint tool that what you wrote is what you meant: do this operation, then take the truth value of the result.A third use is to produce logical XOR and logical XNOR. In both C and JavaScript, a && b performs a logical AND (true if both sides are true), and a & b performs a bitwise AND. a || b performs a logical OR (true if at least one are true), and a | b performs a bitwise OR. There's a bitwise XOR (exclusive OR) as a ^ b, but there's no built-in operator for logical XOR (true if exactly one side is true). You might, for example, want to allow the user to enter text in exactly one of two fields. What you can do is convert each to a truth value and compare them: !!x !== !!y.Double boolean negation. Often used to check if value is not undefined.Tons of great answers here, but if you've read down this far, this helped me to 'get it'. Open the console on Chrome (etc), and start typing:Naturally, these are all the same as merely typing !!someThing, but the added parentheses might help make it more understandable.!!x is shorthand for Boolean(x)The first bang forces the js engine to run Boolean(x) but also has the side effect of inverting the value.  So the second bang undoes the side effect.It forces all things to boolean. For example:This question has been answered quite thoroughly, but I'd like to add an answer that I hope is as simplified as possible, making the meaning of !! as simple to grasp as can be.Because javascript has what are called "truthy" and "falsey" values, there are expressions that when evaluated in other expressions will result in a true or false condition, even though the value or expression being examined is not actually true or false.For instance: If that element does in fact exist, the expression will evaluate as true, and the code block will be executed.However:...will NOT result in a true condition, and the code block will not be executed, even if the element does exist.  Why?  Because document.getElementById() is a "truthy" expression that will evaluate as true in this if() statement, but it is not an actual boolean value of true.The double "not" in this case is quite simple.  It is simply two nots back to back. The first one simply "inverts" the truthy or falsey value, resulting in an actual boolean type, and then the second one "inverts" it back again to it's original state, but now in an actual boolean value.  That way you have consistency:and will BOTH return true, as expected.I just wanted to add thatis the same asBut this can be an issue when something is undefined.The trick here is the chain of &&s will return the first falsey value it finds -- and this can be fed to an if statement etc.  So if b.foo is undefined, it will return undefined and skip the b.foo.bar statement, and we get no error.The above return undefined but if you have an empty string, false, null, 0, undefined those values will return and soon as we encounter them in the chain -- [] and {} are both "truthy" and we will continue down the so-called "&& chain" to the next value to the right.P.S. Another way of doing the same thing is (b || {}).foo, because if b is undefined then b || {} will be {}, and you'll be accessing a value in an empty object (no error) instead of trying to access a value within "undefined" (causes an error).  So, (b || {}).foo is the same as b && b.foo and ((b || {}).foo || {}).bar is the same as b && b.foo && b.foo.bar.here is a piece of code from angular js their intention is to set rafSupported to true or false based on the availability of function in requestAnimationFrame it can be achieved by checking in following way in general:the short way could be using !!so if requestAnimationFrame was assigned a function

 then

!requestAnimationFrame would be false and one more ! of it would be trueif requestAnimationFrame was assinged undefined then

!requestAnimationFrame would be true and one more ! of it would be falseAfter seeing all these great answers, I would like to add another reason for using  !!. Currenty I'm working in Angular 2-4 (TypeScript) and I want to return a boolean as false when my user is not authenticated. If he isn't authenticated, the token-string would be null or "". I can do this by using the next block of code:Some operators in JavaScript perform implicit type conversions, and are sometimes

used for type conversion.The unary ! operator converts its operand to a boolean and negates it.This fact lead to the following idiom that you can see in your source code:Use logical not operator two times

it means !true= false

 and  !!true = trueReturns boolean value of a variable.Instead, Boolean class can be used.(please read code descriptions)Namely, Boolean(X) = !!X in use.Please check code snippet out below ↓

How do I correctly clone a JavaScript object?

soundly_typed

[How do I correctly clone a JavaScript object?](https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object)

I have an object, x. I'd like to copy it as object y, such that changes to y do not modify x. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn't a problem, since I'm copying one of my own literal-constructed objects.How do I correctly clone a JavaScript object?

2009-04-08 03:01:06Z

I have an object, x. I'd like to copy it as object y, such that changes to y do not modify x. I realized that copying objects derived from built-in JavaScript objects will result in extra, unwanted properties. This isn't a problem, since I'm copying one of my own literal-constructed objects.How do I correctly clone a JavaScript object?To do this for any object in JavaScript will not be simple or straightforward. You will run into the problem of erroneously picking up attributes from the object's prototype that should be left in the prototype and not copied to the new instance. If, for instance, you are adding a clone method to Object.prototype, as some answers depict, you will need to explicitly skip that attribute. But what if there are other additional methods added to Object.prototype, or other intermediate prototypes, that you don't know about? In that case, you will copy attributes you shouldn't, so you need to detect unforeseen, non-local attributes with the hasOwnProperty method.In addition to non-enumerable attributes, you'll encounter a tougher problem when you try to copy objects that have hidden properties. For example, prototype is a hidden property of a function. Also, an object's prototype is referenced with the attribute __proto__, which is also hidden, and will not be copied by a for/in loop iterating over the source object's attributes. I think __proto__ might be specific to Firefox's JavaScript interpreter and it may be something different in other browsers, but you get the picture. Not everything is enumerable. You can copy a hidden attribute if you know its name, but I don't know of any way to discover it automatically.Yet another snag in the quest for an elegant solution is the problem of setting up the prototype inheritance correctly. If your source object's prototype is Object, then simply creating a new general object with {} will work, but if the source's prototype is some descendant of Object, then you are going to be missing the additional members from that prototype which you skipped using the hasOwnProperty filter, or which were in the prototype, but weren't enumerable in the first place. One solution might be to call the source object's constructor property to get the initial copy object and then copy over the attributes, but then you still will not get non-enumerable attributes. For example, a Date object stores its data as a hidden member:The date string for d1 will be 5 seconds behind that of d2. A way to make one Date the same as another is by calling the setTime method, but that is specific to the Date class. I don't think there is a bullet-proof general solution to this problem, though I would be happy to be wrong!When I had to implement general deep copying I ended up compromising by assuming that I would only need to copy a plain Object, Array, Date, String, Number, or Boolean. The last 3 types are immutable, so I could perform a shallow copy and not worry about it changing. I further assumed that any elements contained in Object or Array would also be one of the 6 simple types in that list. This can be accomplished with code like the following:The above function will work adequately for the 6 simple types I mentioned, as long as the data in the objects and arrays form a tree structure. That is, there isn't more than one reference to the same data in the object. For example:It will not be able to handle any JavaScript object, but it may be sufficient for many purposes as long as you don't assume that it will just work for anything you throw at it.If you do not use Dates, functions, undefined, regExp or Infinity within your object, a very simple one liner is JSON.parse(JSON.stringify(object)):This works for all kind of objects containing objects, arrays, strings, booleans and numbers.See also this article about the structured clone algorithm of browsers which is used when posting messages to and from a worker. It also contains a function for deep cloning.With jQuery, you can shallow copy with extend:subsequent changes to the copiedObject will not affect the originalObject, and vice versa.Or to make a deep copy:In ECMAScript 6 there is Object.assign method, which copies values of all enumerable own properties from one object to another. For example:But be aware that nested objects are still copied as reference.Per MDN:There is no need for external libraries but you need to check browser compatibility first.There are many answers, but none that mentions Object.create from ECMAScript 5, which admittedly does not give you an exact copy, but sets the source as the prototype of the new object.Thus, this is not an exact answer to the question, but it is a one-line solution and thus elegant. And it works best for 2 cases:Example:Why do I consider this solution to be superior? It's native, thus no looping, no recursion. However, older browsers will need a polyfill.An Object.assign method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.Read more...The polyfill to support older browsers:There are several issues with most solutions on the internet. So I decided to make a follow-up, which includes, why the accepted answer shouldn't be accepted.I want to deep-copy a Javascript Object with all of its children and their children and so on. But since I'm not kind of a normal developer, my Object has normal properties, circular structures and even nested objects.So let's create a circular structure and a nested object first.Let's bring everything together in an Object named a.Next, we want to copy a into a variable named b and mutate it.You know what happened here because if not you wouldn't even land on this great question.Now let's find a solution.The first attempt I tried was using JSON.Don't waste too much time on it, you'll get TypeError: Converting circular structure to JSON.Let's have a look at the accepted answer.Looks good, heh? It's a recursive copy of the object and handles other types as well, like Date, but that wasn't a requirement.Recursion and circular structures doesn't work well together... RangeError: Maximum call stack size exceededAfter arguing with my co-worker, my boss asked us what happened, and he found a simple solution after some googling. It's called Object.create.This solution was added to Javascript some time ago and even handles circular structure.... and you see, it didn't work with the nested structure inside.There's a polyfill for Object.create in the older browser just like the IE 8. It's something like recommended by Mozilla, and of course, it's not perfect and results in the same problem as the native solution.I've put F outside the scope so we can have a look at what instanceof tells us.Same problem as the native solution, but a little bit worse output.When digging around, I found a similar question (In Javascript, when performing a deep copy, how do I avoid a cycle, due to a property being "this"?) to this one, but with a way better solution.And let's have a look at the output...The requirements are matched, but there are still some smaller issues, including changing the instance of nested and circ to Object.The last solution using recursion and a cache, may not be the best, but it's a real deep-copy of the object. It handles simple properties, circular structures and nested object, but it will mess up the instance of them while cloning.jsfiddleIf you're okay with a shallow copy, the underscore.js library has a clone method.or you can extend it likeOK, imagine you have this object below and you want to clone it:orthe answer is mainly depeneds on which ECMAscript you using, in ES6+, you can simply use Object.assign to do the clone:or using spread operator like this:But if you using ES5, you can use few methods, but the JSON.stringify, just make sure you not using for a big chunk of data to copy, but it could be one line handy way in many cases, something like this:One particularly inelegant solution is to use JSON encoding to make deep copies of objects that do not have member methods. The methodology is to JSON encode your target object, then by decoding it, you get the copy you are looking for.  You can decode as many times as you want to make as many copies as you need.Of course, functions do not belong in JSON, so this only works for objects without member methods.This methodology was perfect for my use case, since I'm storing JSON blobs in a key-value store, and when they are exposed as objects in a JavaScript API, each object actually contains a copy of the original state of the object so we can calculate the delta after the caller has mutated the exposed object.You can simply use a spread property to copy an object without references. But be careful (see comments), the 'copy' is just on the lowest object/array level. Nested properties are still references!Complete clone:Clone with references on second level:JavaScript actually does not support deep clones natively. Use an utility function. For example Ramda:For those using AngularJS, there is also direct method for cloning or extending of the objects in this library.orMore in angular.copy documentation...A.Levy's answer is almost complete, here is my little contribution: there is a way how to handle recursive references, see this lineif(this[attr]==this) copy[attr] = copy;If the object is XML DOM element, we must use cloneNode insteadif(this.cloneNode) return this.cloneNode(true);Inspired by A.Levy's exhaustive study and Calvin's prototyping approach, I offer this solution:See also Andy Burke's note in the answers.From this article: How to copy arrays and objects in Javascript by Brian Huisman:Here is a function you can use. In ES-6 you can simply use Object.assign(...).

Ex:A good reference is here:

https://googlechrome.github.io/samples/object-assign-es6/In ECMAScript 2018Be aware that nested objects are still copied as a reference.You can clone an object and remove any reference from the previous one using a single line of code. Simply do:For browsers / engines that do not currently support Object.create you can use this polyfill:Using Lodash: New answer to an old question!  If you have the pleasure of having using ECMAScript 2016 (ES6) with Spread Syntax, it's easy.This provides a clean method for a shallow copy of an object.  Making a deep copy, meaning makign a new copy of every value in every recursively nested object, requires on of the heavier solutions above.JavaScript keeps evolving.Interested in cloning simple objects:JSON.parse(JSON.stringify(json_original));Source : How to copy JavaScript object to new variable NOT by reference?ES6 solution if you want to (shallow) clone a class instance and not just a property object.I think there is a simple and working answer. In deep copying there are two concerns:So I think one simple solution will be to first serialize and deserialize and then do an assign on it to copy functions too.Although this question has many answers, I hope this one helps too.For a deep copy and clone, JSON.stringify then JSON.parse the object:This is an adaptation of A. Levy's code to also handle the cloning of functions and multiple/cyclic references - what this means is that if two properties in the tree which is cloned are references of the same object, the cloned object tree will have these properties point to one and the same clone of the referenced object. This also solves the case of cyclic dependencies which, if left unhandled, leads to an infinite loop. The complexity of the algorithm is O(n)Some quick testsI just wanted to add to all the Object.create solutions in this post, that this does not work in the desired way with nodejs. In Firefox the result ofis {test:"test"}.In nodejs it is Since mindeavor stated that the object to be cloned is a 'literal-constructed' object, a solution might be to simply generate the object multiple times rather than cloning an instance of the object:I've written my own implementation. Not sure if it counts as a better solution:Following is the implementation:

How can I check for an empty/undefined/null string in JavaScript?

casademora

[How can I check for an empty/undefined/null string in JavaScript?](https://stackoverflow.com/questions/154059/how-can-i-check-for-an-empty-undefined-null-string-in-javascript)

I saw this question, but I didn't see a JavaScript specific example. Is there a simple string.Empty available in JavaScript, or is it just a case of checking for ""?

2008-09-30 17:17:45Z

I saw this question, but I didn't see a JavaScript specific example. Is there a simple string.Empty available in JavaScript, or is it just a case of checking for ""?If you just want to check whether there's any value, you can do If you need to check specifically for an empty string over null, I would think checking against "" is your best bet, using the === operator (so that you know that it is, in fact, a string you're comparing against).For checking if a string is empty, null or undefined I use:For checking if a string is blank, null or undefined I use:For checking if a string is blank or contains only white-space:All the previous answers are good, but this will be even better. Use the !!(not not) operator. Or use type casting:Both do the same function. Typecast the variable to Boolean, where str is a variable.

It returns false for null,undefined,0,000,"",false.

It returns true for string "0" and whitespace " ".The closest thing you can get to str.Empty (with the precondition that str is a String) is:If you need to make sure that the string is not just a bunch of empty spaces (I'm assuming this is for form validation) you need to do a replace on the spaces.I use:You can use lodash:

_.isEmpty(value).It covers a lot of cases like {}, '', null, undefined, etc.But it always returns true for Number type of JavaScript primitive data types like _.isEmpty(10) or _.isEmpty(Number.MAX_VALUE) both returns true.Function:PS: In JavaScript, don't use line break after return;There's nothing representing an empty string in JavaScript. Do a check against either length (if you know that the var will always be a string) or against ""Try:I would not worry too much about the most efficient method. Use what is most clear to your intention. For me that's usually strVar == "".As per the comment from Constantin, if strVar could some how end up containing an integer 0 value, then that would indeed be one of those intention-clarifying situations.You could also go with regular expressions:Checks for strings that are either empty or filled with whitespace.A lot of answers, and a lot of different possibilities!Without a doubt for quick and simple implementation the winner is: if (!str.length) {...}However, as many other examples are available. The best functional method to go about this, I would suggest:A bit excessive, I know.Also, in case you consider a whitespace filled string as "empty".You can test it with this regular expression:I usually use something like this,I have not noticed an answer that takes into account the possibility of null characters in a string. For example, if we have a null character string:To test its nullness one could do something like this:It works on a null string, and on an empty string and it is accessible for all strings. In addition, it could be expanded to contain other JavaScript empty or whitespace characters (i.e. nonbreaking space, byte order mark, line/paragraph separator, etc.).Meanwhile we can have one function that checks for all 'empties' like null, undefined, '', ' ', {}, [].

So I just wrote this.Use cases and results.As of now there is no direct method like string.empty to check whether a string is empty or not. But in your code you can use a wrapper check for an empty string like:Using this you can also make sure that string is not undefined or null too. Remember, undefined, null and empty are three different things.All these answers are nice.But I cannot be sure that variable is a string, doesn't contain only spaces (this is important for me), and can contain '0' (string).My version:Sample on jsfiddle.If one needs to detect not only empty but also blank strings, I'll add to Goral's answer:Try thisYou can easily add it to native String object in JavaScript and reuse it over and over...

Something simple like below code can do the job for you if you want to check '' empty strings:Otherwise if you'd like to check both '' empty string and '   ' with space, you can do that by just adding trim(), something like the code below:and you can call it this way:Try this:To check if it is exactly an empty string:To check if it is an empty string OR a logical equivalent for no-value (null, undefined, 0, NaN, false, ...):There's no isEmpty() method, you have to check for the type and the length:The type check is needed in order to avoid runtime errors when test is undefined or null.Ignoring whitespace strings, you could use this to check for null, empty and undefined:It is concise and it works for undefined properties, although it's not the most readable.I use a combination, and the fastest checks are first.I did some research on what happens if you pass a non-string and non-empty/null value to a tester function. As many know, (0 == "") is true in JavaScript, but since 0 is a value and not empty or null, you may want to test for it.The following two functions return true only for undefined, null, empty/whitespace values and false for everything else, such as numbers, Boolean, objects, expressions, etc.More complicated examples exists, but these are simple and give consistent results. There is no need to test for undefined, since it's included in (value == null) check. You may also mimic C# behaviour by adding them to String like this:You do not want to put it in Strings prototype, because if the instance of the String-class is null, it will error:I tested with the following value array. You can loop it through to test your functions if in doubt.I didn't see a good answer here (at least not an answer that fits for me)So I decided to answer myself:value === undefined || value === null || value === "";You need to start checking if it's undefined. Otherwise your method can explode, and then you can check if it equals null or is equal to an empty string.You cannot have !! or only if(value) since if you check 0 it's going to give you a false answer (0 is false).With that said, wrap it up in a method like:public static isEmpty(value: any): boolean {

    return value === undefined || value === null || value === "";

}PS.: You don't need to check typeof, since it would explode and throw even before it enters the method

JavaScript closure inside loops – simple practical example

nickf

[JavaScript closure inside loops – simple practical example](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

It outputs this:Whereas I'd like it to output:The same problem occurs when the delay in running the function is caused by using event listeners:… or asynchronous code, e.g. using Promises:What’s the solution to this basic problem?

2009-04-15 06:06:20Z

It outputs this:Whereas I'd like it to output:The same problem occurs when the delay in running the function is caused by using event listeners:… or asynchronous code, e.g. using Promises:What’s the solution to this basic problem?Well, the problem is that the variable i, within each of your anonymous functions, is bound to the same variable outside of the function.What you want to do is bind the variable within each function to a separate, unchanging value outside of the function:Since there is no block scope in JavaScript - only function scope - by wrapping the function creation in a new function, you ensure that the value of "i" remains as you intended.With the relatively widespread availability of the Array.prototype.forEach function (in 2015), it's worth noting that in those situations involving iteration primarily over an array of values, .forEach() provides a clean, natural way to get a distinct closure for every iteration. That is, assuming you've got some sort of array containing values (DOM references, objects, whatever), and the problem arises of setting up callbacks specific to each element, you can do this:The idea is that each invocation of the callback function used with the .forEach loop will be its own closure. The parameter passed in to that handler is the array element specific to that particular step of the iteration. If it's used in an asynchronous callback, it won't collide with any of the other callbacks established at other steps of the iteration.If you happen to be working in jQuery, the $.each() function gives you a similar capability.ECMAScript 6 (ES6) introduces new let and const keywords that are scoped differently than var-based variables. For example, in a loop with a let-based index, each iteration through the loop will have a new value of i where each value is scoped inside the loop, so your code would work as you expect. There are many resources, but I'd recommend 2ality's block-scoping post as a great source of information.Beware, though, that IE9-IE11 and Edge prior to Edge 14 support let but get the above wrong (they don't create a new i each time, so all the functions above would log 3 like they would if we used var). Edge 14 finally gets it right.Try:Edit (2014):Personally I think @Aust's more recent answer about using .bind is the best way to do this kind of thing now. There's also lo-dash/underscore's _.partial when you don't need or want to mess with bind's thisArg.Another way that hasn't been mentioned yet is the use of Function.prototype.bindUPDATEAs pointed out by @squint and @mekdev, you get better performance by creating the function outside the loop first and then binding the results within the loop.Using an Immediately-Invoked Function Expression, the simplest and most readable way to enclose an index variable:This sends the iterator i into the anonymous function of which we define as index.  This creates a closure, where the variable i gets saved for later use in any asynchronous functionality within the IIFE.Bit late to the party, but I was exploring this issue today and noticed that many of the answers don't completely address how Javascript treats scopes, which is essentially what this boils down to.So as many others mentioned, the problem is that the inner function is referencing the same i variable. So why don't we just create a new local variable each iteration, and have the inner function reference that instead?Just like before, where each inner function outputted the last value assigned to i, now each inner function just outputs the last value assigned to ilocal. But shouldn't each iteration have it's own ilocal?Turns out, that's the issue. Each iteration is sharing the same scope, so every iteration after the first is just overwriting ilocal. From MDN:Reiterated for emphasis:We can see this by checking ilocal before we declare it in each iteration:This is exactly why this bug is so tricky. Even though you are redeclaring a variable, Javascript won't throw an error, and JSLint won't even throw a warning. This is also why the best way to solve this is to take advantage of closures, which is essentially the idea that in Javascript, inner functions have access to outer variables because inner scopes "enclose" outer scopes.This also means that inner functions "hold onto" outer variables and keep them alive, even if the outer function returns. To utilize this, we create and call a wrapper function purely to make a new scope, declare ilocal in the new scope, and return an inner function that uses ilocal (more explanation below):Creating the inner function inside a wrapper function gives the inner function a private environment that only it can access, a "closure". Thus, every time we call the wrapper function we create a new inner function with it's own separate environment, ensuring that the ilocal variables don't collide and overwrite each other. A few minor optimizations gives the final answer that many other SO users gave:UpdateWith ES6 now mainstream, we can now use the new let keyword to create block-scoped variables:Look how easy it is now! For more information see this answer, which my info is based off of.With ES6 now widely supported, the best answer to this question has changed.  ES6 provides the let and const keywords for this exact circumstance.  Instead of messing around with closures, we can just use let to set a loop scope variable like this:val will then point to an object that is specific to that particular turn of the loop, and will return the correct value without the additional closure notation.  This obviously significantly simplifies this problem.const is similar to let with the additional restriction that the variable name can't be rebound to a new reference after initial assignment.Browser support is now here for those targeting the latest versions of browsers. const/let are currently supported in the latest Firefox, Safari, Edge and Chrome. It also is supported in Node, and you can use it anywhere by taking advantage of build tools like Babel.  You can see a working example here: http://jsfiddle.net/ben336/rbU4t/2/Docs here:Beware, though, that IE9-IE11 and Edge prior to Edge 14 support let but get the above wrong (they don't create a new i each time, so all the functions above would log 3 like they would if we used var). Edge 14 finally gets it right.Another way of saying it is that the i in your function is bound at the time of executing the function, not the time of creating the function.When you create the closure, i is a reference to the variable defined in the outside scope, not a copy of it as it was when you created the closure. It will be evaluated at the time of execution.Most of the other answers provide ways to work around by creating another variable that won't change the value for you.Just thought I'd add an explanation for clarity. For a solution, personally, I'd go with Harto's since it is the most self-explanatory way of doing it from the answers here. Any of the code posted will work, but I'd opt for a closure factory over having to write a pile of comments to explain why I'm declaring a new variable(Freddy and 1800's) or have weird embedded closure syntax(apphacker).What you need to understand is the scope of the variables in javascript is based on the function. This is an important difference than say c# where you have block scope, and just copying the variable to one inside the for will work.Wrapping it in a function that evaluates returning the function like apphacker's answer will do the trick, as the variable now has the function scope.There is also a let keyword instead of var, that would allow using the block scope rule. In that case defining a variable inside the for would do the trick. That said, the let keyword isn't a practical solution because of compatibility.Here's another variation on the technique, similar to Bjorn's (apphacker), which lets you assign the variable value inside the function rather than passing it as a parameter, which might be clearer sometimes:Note that whatever technique you use, the index variable becomes a sort of static variable, bound to the returned copy of the inner function. I.e., changes to its value are preserved between calls. It can be very handy.This describes the common mistake with using closures in JavaScript.Consider:For each time makeCounter is invoked, {counter: 0} results in a new object being created. Also, a new copy of obj 

is created as well to reference the new object. Thus, counter1 and counter2 are independent of each other.Using a closure in a loop is tricky.Consider: Notice that counters[0] and counters[1] are not independent. In fact, they operate on the same obj!This is because there is only one copy of obj shared across all iterations of the loop, perhaps for performance reasons.

Even though {counter: 0} creates a new object in each iteration, the same copy of obj will just get updated with a

reference to the newest object.Solution is to use another helper function:This works because local variables in the function scope directly, as well as function argument variables, are allocated 

new copies upon entry.For a detailed discussion, please see JavaScript closure pitfalls and usageThe most simple solution would be,Instead of using:which alerts "2", for 3 times. This is because anonymous functions created in for loop, shares same closure, and in that closure, the value of i is the same. Use this to prevent shared closure:The idea behind this is, encapsulating the entire body of the for loop with an IIFE (Immediately-Invoked Function Expression) and passing new_i as a parameter and capturing it as i. Since the anonymous function is executed immediately, the i value is different for each function defined inside the anonymous function.This solution seems to fit any such problem since it will require minimal changes to the original code suffering from this issue. In fact, this is by design, it should not be an issue at all!http://jsfiddle.net/7P6EN/Here's a simple solution that uses forEach (works back to IE9):Prints:The main issue with the code shown by the OP is that i is never read until the second loop. To demonstrate, imagine seeing an error inside of the codeThe error actually does not occur until funcs[someIndex] is executed (). Using this same logic, it should be apparent that the value of i is also not collected until this point either. Once the original loop finishes, i++ brings i to the value of 3 which results in the condition i < 3 failing and the loop ending. At this point, i is 3 and so when funcs[someIndex]() is used, and i is evaluated, it is 3 - every time.To get past this, you must evaluate i as it is encountered. Note that this has already happened in the form of funcs[i] (where there are 3 unique indexes). There are several ways to capture this value. One is to pass it in as a parameter to a function which is shown in several ways already here. Another option is to construct a function object which will be able to close over the variable. That can be accomplished thuslyjsFiddle DemoJavaScript functions "close over" the scope they have access to upon declaration, and retain access to that scope even as variables in that scope change.Each function in the array above closes over the global scope (global, simply because that happens to be the scope they're declared in).Later those functions are invoked logging the most current value of i in the global scope. That's the magic, and frustration, of closure."JavaScript Functions close over the scope they are declared in, and retain access to that scope even as variable values inside of that scope change."Using let instead of var solves this by creating a new scope each time the for loop runs, creating a separated scope for each function to close over. Various other techniques do the same thing with extra functions.(let makes variables block scoped. Blocks are denoted by curly braces, but in the case of the for loop the initialization variable, i in our case, is considered to be declared in the braces.)After reading through various solutions, I'd like to add that the reason those solutions work is to rely on the concept of scope chain. It's the way JavaScript resolve a variable during execution.  In the initial code:When funcs gets executed, the scope chain will be function inner -> global. Since the variable i cannot be found in function inner (neither declared using var nor passed as arguments), it continues to search, until the value of i is eventually found in the global scope which is window.i.By wrapping it in an outer function either explicitly define a helper function like harto did or use an anonymous function like Bjorn did:When funcs gets executed, now the scope chain will be function inner -> function outer. This time i can be found in the outer function's scope which is executed 3 times in the for loop, each time has value i bound correctly. It won't use the value of window.i when inner executed.More detail can be found here

It includes the common mistake in creating closure in the loop as what we have here, as well as why we need closure and the performance consideration.With new features of ES6 block level scoping is managed:The code in OP's question is replaced with let instead of var.I'm surprised no one yet has suggested using the forEach function to better avoid (re)using local variables. In fact, I'm not using for(var i ...) at all anymore for this reason.// edited to use forEach instead of map.This question really shows the history of JavaScript! Now we can avoid block scoping with arrow functions and handle loops directly from DOM nodes using Object methods.The reason your original example did not work is that all the closures you created in the loop referenced the same frame. In effect, having 3 methods on one object with only a single i variable. They all printed out the same value.First of all, understand what's wrong with this code:Here when the funcs[] array is being initialized, i is being incremented, the funcs array is initialized and the size of func array becomes 3,  so i = 3,. 

Now when the funcs[j]() is called, it is again using the variable i, which has already been incremented to 3.Now to solve this, we have many options. Below are two of them:Use closure structure, this would reduce your extra for loop. You can do it in a single for loop:Now open your chrome console window by pressing F12 and refresh the page.

Expend every 3 functions inside the array.You will see an property called [[Scopes]].Expand that one. You will see one 

array object called "Global",expand that one. You will find a property 'i' declared into the object which having value 3.Conclusion: Now replace the 'var' with 'let'Do the same thing, Go to the scopes . Now you will see two objects "Block" and "Global". Now expand Block object , you 

will see 'i' is defined there , and the strange thing is that , for every functions , the value if i is different (0 , 1, 2). Conclusion:When you declare variable using 'let' even outside the function but inside the loop , this variable will not be a Global 

variable , it will become a Block level variable which is only available for the same function only.That is the reason , we 

are getting value of i different for each function when we invoke the functions.For more detail about how closer works , please go through the awesome video tutorial https://youtu.be/71AtaJpJHw0You could use a declarative module for lists of data such as query-js(*). In these situations I personally find a declarative approach less surprisingYou could then use your second loop and get the expected result or you could do (*) I'm the author of query-js and therefor biased towards using it, so don't take my words as a recommendation for said library only for the declarative approach :)I prefer to use forEach function, which has its own closure with creating a pseudo range:That looks uglier than ranges in other languages, but IMHO less monstrous than other solutions.And yet another solution: instead of creating another loop, just bind the this to the return function.By binding this, solves the problem as well.Many solutions seem correct but they don't mention it's called Currying which is a functional programming design pattern for situations like here. 3-10 times faster than bind depending on the browser.See the performance gain in different browsers.Your code doesn't work, because what it does is:Now the question is, what is the value of variable i when the function is called? Because the first loop is created with the condition of i < 3, it stops immediately when the condition is false, so it is i = 3. You need to understand that, in time when your functions are created, none of their code is executed, it is only saved for later. And so when they are called later, the interpreter executes them and asks: "What is the current value of i?"So, your goal is to first save the value of i to function and only after that save the function to funcs. This could be done for example this way:This way, each function will have it's own variable x and we set this x to the value of i in each iteration.This is only one of the multiple ways to solve this problem.Use let(blocked-scope) instead of var.

Is there an「exists」function for jQuery?

Jake McGraw

[Is there an「exists」function for jQuery?](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery)

How can I check the existence of an element in jQuery?The current code that I have is this:Is there a more elegant way to approach this? Perhaps a plugin or a function?

2008-08-27 19:49:41Z

How can I check the existence of an element in jQuery?The current code that I have is this:Is there a more elegant way to approach this? Perhaps a plugin or a function?In JavaScript, everything is 'truthy' or 'falsy', and for numbers 0 (and NaN) means false, everything else true. So you could write:You don't need that >0 part.Yes!This is in response to: Herding Code podcast with Jeff AtwoodIf you usedyou would imply that chaining was possible when it is not.This would be better:Alternatively, from the FAQ:You could also use the following. If there are no values in the jQuery object array then getting the first item in the array would return undefined.You can use this:The fastest and most semantically self explaining way to check for existence is actually by using plain JavaScript:It is a bit longer to write than the jQuery length alternative, but executes faster since it is a native JS method.And it is better than the alternative of writing your own jQuery function. That alternative is slower, for the reasons @snover stated. But it would also give other programmers the impression that the exists() function is something inherent to jQuery. JavaScript would/should be understood by others editing your code, without increased knowledge debt.NB: Notice the lack of an '#' before the element_id (since this is plain JS, not jQuery).You can save a few bytes by writing:This works because each jQuery object also masquerades as an array, so we can use the array dereferencing operator to get the first item from the array. It returns undefined if there is no item at the specified index.This plugin can be used in an if statement like if ($(ele).exist()) { /* DO WORK */ } or using a callback.jsFiddleYou may specify one or two callbacks. The first one will fire if the element exists, the second one will fire if the element does not exist. However, if you choose to pass only one function, it will only fire when the element exists. Thus, the chain will die if the selected element does not exist. Of course, if it does exist, the first function will fire and the chain will continue.Keep in mind that using the callback variant helps maintain chainability – the element is returned and you can continue chaining commands as with any other jQuery method!You can use:A little more elegant, perhaps.I see most of the answers here are not accurate as they should be, they check element length, it can be OK in many cases, but not 100%, imagine if number pass to the function instead, so I prototype a function which check all conditions and return the answer as it should be:This will check both length and type, Now you can check it this way:There's no need for jQuery really. With plain JavaScript it's easier and semantically correct to check for:If for any reason you don't want to put an id to the element, you can still use any other JavaScript method designed to access the DOM.jQuery is really cool, but don't let pure JavaScript fall into oblivion...You could use this:The reason all of the previous answers require the .length parameter is that they are mostly using jquery's $() selector which has querySelectorAll behind the curtains (or they are using it directly).  This method is rather slow because it needs to parse the entire DOM tree looking for all matches to that selector and populating an array with them.The ['length'] parameter is not needed or useful and the code will be a lot faster if you directly use document.querySelector(selector) instead, because it returns the first element it matches or null if not found.However this method leaves us with the actual object being returned; which is fine if it isn't going to be saved as variable and used repeatedly (thus keeping the reference around if we forget).In some cases this may be desired.  It can be used in a for loop like this:If you don't actually need the element and want to get/store just a true/false, just double not it !!  It works for shoes that come untied, so why knot here?Is $.contains() what you want?I have found if ($(selector).length) {} to be insufficient. It will silently break your app when selector is an empty object {}.My only suggestion is to perform an additional check for {}.I'm still looking for a better solution though as this one is a bit heavy.Edit: WARNING! This doesn't work in IE when selector is a string.You can check element is present or not using length in java script.

   If length is greater than zero then element is present if length is zero then

   element is not present   Checking for existence of an element is documented neatly in the official jQuery website itself!this is very similar to all of the answers, but why not use the ! operator twice so you can get a boolean:Try testing for DOM elementInspired by hiway's answer I came up with the following:jQuery.contains takes two DOM elements and checks whether the first one contains the second one.Using document.documentElement as the first argument fulfills the semantics of the exists method when we want to apply it solely to check the existence of an element in the current document.Below, I've put together a snippet that compares jQuery.exists() against the $(sel)[0] and $(sel).length approaches which both return truthy values for $(4) while $(4).exists() returns false. In the context of checking for existence of an element in the DOM this seems to be the desired result.No need for jQuery (basic solution)Much more performant option below(notice lack of a dot before a-class).querySelector uses a proper matching engine like $() (sizzle) in jQuery and uses more computing power but in 99% cases will do just fine. The second option is more explicit and tells the code exactly what to do. It's much faster according to jsperf https://jsperf.com/getelementsbyclassname-vs-queryselectorall/25I just like to use plain vanilla javascript to do this.I stumbled upon this question and i'd like to share a snippet of code i currently use:And now i can write code like this - It might seem a lot of code, but when written in CoffeeScript it is quite small:I had a case where I wanted to see if an object exists inside of another so I added something to the first answer to check for a selector inside the selector..How about:It's very minimal and saves you having to enclose the selector with $() every time.I'm using this:Execute the chain only if a jQuery element exist  - http://jsfiddle.net/andres_314/vbNM3/2/Here is my favorite exist method in jQueryand other version which supports callback when selector does not existExample:$("selector") returns an object which has the length property. If the selector finds any elements, they will be included in the object. So if you check its length you can see if any elements exist. In JavaScript 0 == false, so if you don't get 0 your code will run.Here is the complete example of different situations and way to check if element exists using direct if on jQuery selector may or may not work because it returns array or elements.FINAL SOLUTION You don't have to check if it's greater than 0 like $(selector).length > 0, $(selector).length it's enough and a elegant way to check the existence of elements. I don't think that is worth to write a function only for this, if you want to do more extra things, yes.

How can I change an element's class with JavaScript?

Nathan Smith

[How can I change an element's class with JavaScript?](https://stackoverflow.com/questions/195951/how-can-i-change-an-elements-class-with-javascript)

How can I change a class of an HTML element in response to an onclick event using JavaScript?

2008-10-12 20:06:43Z

How can I change a class of an HTML element in response to an onclick event using JavaScript?Modern browsers have added classList which provides methods to make it easier to manipulate classes without needing a library:Unfortunately, these do not work in Internet Explorer prior to v10, though there is a shim to add support for it to IE8 and IE9, available from this page. It is, though, getting more and more supported.The standard JavaScript way to select an element is using document.getElementById("Id"), which is what the following examples use - you can of course obtain elements in other ways, and in the right situation may simply use this instead - however, going into detail on this is beyond the scope of the answer.To replace all existing classes with one or more new classes, set the className attribute:(You can use a space-delimited list to apply multiple classes.)To add a class to an element, without removing/affecting existing values, append a space and the new classname, like so:To remove a single class to an element, without affecting other potential classes, a simple regex replace is required:An explanation of this regex is as follows:The g flag tells the replace to repeat as required, in case the class name has been added multiple times.The same regex used above for removing a class can also be used as a check as to whether a particular class exists:Whilst it is possible to write JavaScript directly inside the HTML event attributes (such as onclick="this.className+=' MyClass'") this is not recommended behaviour. Especially on larger applications, more maintainable code is achieved by separating HTML markup from JavaScript interaction logic.The first step to achieving this is by creating a function, and calling the function in the onclick attribute, for example:(It is not required to have this code in script tags, this is simply for brevity of example, and including the JavaScript in a distinct file may be more appropriate.)The second step is to move the onclick event out of the HTML and into JavaScript, for example using addEventListener(Note that the window.onload part is required so that the contents of that function are executed after the HTML has finished loading - without this, the MyElement might not exist when the JavaScript code is called, so that line would fail.)The above code is all in standard JavaScript, however it is common practise to use either a framework or a library to simplify common tasks, as well as benefit from fixed bugs and edge cases that you might not think of when writing your code.Whilst some people consider it overkill to add a ~50 KB framework for simply changing a class, if you are doing any substantial amount of JavaScript work, or anything that might have unusual cross-browser behaviour, it is well worth considering.(Very roughly, a library is a set of tools designed for a specific task, whilst a framework generally contains multiple libraries and performs a complete set of duties.)The examples above have been reproduced below using jQuery, probably the most commonly used JavaScript library (though there are others worth investigating too).(Note that $ here is the jQuery object.)In addition, jQuery provides a shortcut for adding a class if it doesn't apply, or removing a class that does:or, without needing an id:You could also just do:And to toggle a class (remove if exists else add it):In one of my old projects that did not use jQuery, I built the following functions for adding, removing and checking if element has class:So, for example, if I want onclick to add some class to the button I can use this:By now for sure it would just be better to use jQuery.You can use node.className like so:This should work in IE5.5 and up according to PPK.Wow, surprised there are so many overkill answers here...Using pure JavaScript code:This is working for me:As well you could extend HTMLElement object, in order to add methods to add, remove, toggle and check classes (gist):And then just use like this (on click will add or remove class):Here is demo.Just to add on information from another popular framework, Google Closures, see their dom/classes class:One option for selecting the element is using goog.dom.query with a CSS3 selector:Change an element's CSS class with JavaScript in ASP.NET:A couple of minor notes and tweaks on the previous regexes:You'll want to do it globally in case the class list has the class name more than once. And, you'll probably want to strip spaces from the ends of the class list and convert multiple spaces to one space to keep from getting runs of spaces. None of these things should be a problem if the only code dinking with the class names uses the regex below and removes a name before adding it. But. Well, who knows who might be dinking with the class name list.This regex is case insensitive so that bugs in class names may show up before the code is used on a browser that doesn't care about case in class names.I would use jQuery and write something like this:This code adds a function to be called when an element of the id some-element is clicked. The function appends clicked to the element's class attribute if it's not already part of it, and removes it if it's there.Yes you do need to add a reference to the jQuery library in your page to use this code, but at least you can feel confident the most functions in the library would work on pretty much all the modern browsers, and it will save you time implementing your own code to do the same.ThanksThe lineshould be:Here's my version, fully working:Usage:Here's a toggleClass to toggle/add/remove a class on an element:see jsfiddlealso see my answer here for creating a new class dynamicallyYou may try to use node attributes property to keep compatibility with old browsers even IE6:I use the following vanilla JavaScript functions in my code. They use regular expressions and indexOf but do not require quoting special characters in regular expressions.You can also use element.classList in modern browsers.Here is a little style vs. classList examples to get you to see what are the options you have available and how to use classList to do what you want.The difference between style and classList is that with style you're adding to the style properties of the element, but classList is kinda controlling the class(es) of the element (add, remove, toggle, contain), I will show you how to use the add and remove method since those are the popular ones. If you want to add margin-top property into an element, you would do in such: Let say we have a <div class="class-a class-b">, in this case, we have 2 classes added to our div element already, class-a and class-b, and we want to control what classes remove and what class to add. This is where classList becomes handy. Just thought I'd throw this in:just say myElement.classList="new-class" unless you need to maintain other existing classes in which case you can use the classList.add, .remove methods.OK, I think in this case you should use jQuery or write your own Methods in pure javascript, my preference is adding my own methods rather than injecting all jQuery to my application if I don't need that for other reasons.I'd like to do something like below as methods to my javascript framework to add few functionalities which handle adding classes, deleting classes, etc similar to jQuery, this is fully supported in IE9+, also my code is written in ES6, so you need to make sure your browser support it or you using something like babel, otherwise need to use ES5 syntax in your code, also in this way, we finding element via ID, which means the element needs to have an ID to be selected:and you can simply call use them as below, imagine your element has id of 'id' and class of 'class', make sure you pass them as a string, you can use the util as below:A very convenient manner of adding and removing classes is the classList DOM API. This API allows us to select all classes of a specific DOM element in order to modify the list using javascript. For example:We can observe in the log that we are getting back an object with not only the classes of the element, but also many auxiliary methods and properties. This object inherits from the interface DOMTokenList, an interface which is used in the DOM to represent a set of space separated tokens (like classes).Yes there is many ways to do this. In ES6 syntax we can achieve easily. 

Use this code toggle add and remove class.tryusing the accepted answer above here is a simple cross-browser function to add and remove classadd class:remove class:Lots of answers, lots of good answers.ORThat's it.And, if you really want to know the why and educate yourself then I suggest reading Peter Boughton's answer, it's perfect.Note:

This is possible with (document or event):Working JavaScript code:You can download a working code from this link.Here is simple jQuery code to do that.Here,Good Luck.This is easiest with a library like jQuery:No offense, but it's unclever to change class on-the-fly as it forces the CSS interpreter to recalculate the visual presentation of the entire web page.The reason is that it is nearly impossible for the CSS interpreter to know if any inheritance or cascading could be changed, so the short answer is:Never ever change className on-the-fly !-)But usually you'll only need to change a property or two, and that is easily implemented:

Why doesn’t Postman get a「No 'Access-Control-Allow-Origin' header is present on the requested resource」error when my JavaScript code does?

Mr Jedi

[Why doesn’t Postman get a「No 'Access-Control-Allow-Origin' header is present on the requested resource」error when my JavaScript code does?](https://stackoverflow.com/questions/20035101/why-doesn-t-postman-get-a-no-access-control-allow-origin-header-is-present-on)

I am trying to do authorization using JavaScript by connecting to the RESTful API built-in Flask. However, when I make the request, I get the following error:I know that the API or remote resource must set the header, but why did it work when I made the request via the Chrome extension Postman?This is the request code:

2013-11-17 19:29:06Z

I am trying to do authorization using JavaScript by connecting to the RESTful API built-in Flask. However, when I make the request, I get the following error:I know that the API or remote resource must set the header, but why did it work when I made the request via the Chrome extension Postman?This is the request code:If I understood it right you are doing an XMLHttpRequest to a different domain than your page is on. So the browser is blocking it as it usually allows a request in the same origin for security reasons. You need to do something different when you want to do a cross-domain request. A tutorial about how to achieve that is Using CORS.When you are using postman they are not restricted by this policy. Quoted from Cross-Origin XMLHttpRequest:It's very simple to solve if you are using PHP. Just add the following script in the beginning of your PHP page which handles the request:If you are using Node-red you have to allow CORS in the node-red/settings.js file by un-commenting the following lines:If you are using Flask same as the question; you have first to install flask-corsThen include the Flask cors in your application.A simple application will look like:For more details, you can check the Flask documentation.Because 

$.ajax({type: "POST" - calls OPTIONS 

$.post( - Calls POST Both are different. Postman calls "POST" properly, but when we call it, it will be "OPTIONS".For C# web services - Web APIPlease add the following code in your web.config file under <system.webServer> tag. This will work:Please make sure you are not doing any mistake in the Ajax callAngular 4 issue - please refer to http://www.hubfly.com/blog/solutions/how-to-fix-angular-4-api-call-issues/Note: If you are looking for downloading content from a third-party website then this will not help you.  You can try the following code, but not JavaScript.Applying a CORS restriction is a security feature defined by a server and implemented by a browser. However, the Postman tool does not bother about the CORS policy of the server.That is why the CORS error appears in the browser, but not in Postman.In the below investigation as API, I use http://example.com instead of http://myApiUrl/login from your question, because this first one working.I assume that your page is on http://my-site.local:8088.The reason why you see different results is that Postman:This is similar to browsers' way of sending requests when the site and API has the same domain (browsers also set the header item Referer=http://my-site.local:8088, however I don't see it in Postman). When Origin header is not set, usually servers allow such requests by default.This is the standard way how Postman sends requests. But a browser sends requests differently when your site and API have different domains, and then CORS occurs and the browser automatically:(The header Referer has the same value as Origin). And now in Chrome's Console & Networks tab you will see:When you have Host != Origin this is CORS, and when the server detects such a request, it usually blocks it by default.Origin=null is set when you open HTML content from a local directory, and it sends a request. The same situation is when you send a request inside an <iframe>, like in the below snippet (but here the Host header is not set at all) - in general, everywhere the HTML specification says opaque origin, you can translate that to Origin=null. More information about this you can find here.If you do not use a simple CORS request, usually the browser automatically also sends an OPTIONS request before sending the main request - more information is here. The snippet below shows it:You can change the configuration of your server to allow CORS requests.Here is an example configuration which turns on CORS on nginx (nginx.conf file) - be very careful with setting always/"$http_origin" for nginx and "*" for Apache - this will unblock CORS from any domain.Here is an example configuration which turns on CORS on Apache (.htaccess file)If you use .NET as your middle tier, check the route attribute clearly, for example,I had issue when it was like this, Fixed it by this, Encountered the same error in chrome when tried to call Spring REST end point in angular.Solution: Add @CrossOrigin("*") annotation on top of respective Controller Class.

How can I refresh a page with jQuery?

luca

[How can I refresh a page with jQuery?](https://stackoverflow.com/questions/5404839/how-can-i-refresh-a-page-with-jquery)

How can I refresh a page with jQuery?

2011-03-23 11:55:31Z

How can I refresh a page with jQuery?Use location.reload():The reload() function takes an optional parameter that can be set to true to force a reload from the server rather than the cache. The parameter defaults to false, so by default the page may reload from the browser's cache.This should work on all browsers even without jQuery:There are multiple unlimited ways to refresh a page with JavaScript:You can continue the list being creative:Lots of ways will work, I suppose:To reload a page with jQuery, do:The approach here that I used was Ajax jQuery. I tested it on Chrome 13. Then I put the code in the handler that will trigger the reload. The URL is "", which means this page.If the current page was loaded by a POST request, you may want to useinstead ofbecause window.location.reload() will prompt for confirmation if called on a page that was loaded by a POST request.The question should be,How to refresh a page with JavaScriptYou're spoiled for choice.You may want to useforceGet is a boolean and optional.The default is false which reloads the page from the cache.Set this parameter to true if you want to force the browser to get the page from the server to get rid of the cache as well.Or justif you want quick and easy with caching.Three approaches with different cache-related behaviours:So, in summary, you want to use:window.location.reload() will reload from the server and will load all your data, scripts, images, etc. again.So if you just want to refresh the HTML, the window.location = document.URL will return much quicker and with less traffic. But it will not reload the page if there is a hash (#) in the URL.The jQuery Load function can also perform a page refresh:As the question is generic, let's try to sum up possible solutions for the answer:Simple plain JavaScript Solution:The easiest way is a one line solution placed in an appropriate way:What many people are missing here, because they hope to get some "points" is that the reload() function itself offers a Boolean as a parameter (details: https://developer.mozilla.org/en-US/docs/Web/API/Location/reload).This means there are two ways:Solution1: Force reloading the current page from the serverSolution2: Reloading from cache or server (based on browser and your config)And if you want to combine it with jQuery an listening to an event, I would recommend using the ".on()" method instead of ".click" or other event wrappers, e.g. a more proper solution would be:Here is a solution that asynchronously reloads a page using jQuery. It avoids the flicker caused by window.location = window.location. This example shows a page that reloads continuously, as in a dashboard. It is battle-tested and is running on an information display TV in Times Square.Notes:I foundoralso makes a page refresh.This makes it very much easier to reload the page removing any hash.

This is very nice when I am using AngularJS in the iOS simulator, so that I don't have to rerun the app.You can use  JavaScript  location.reload()  method.

This method accepts a boolean parameter. true or false. If the parameter is  true; the page always reloaded from the server. If it is false; which  is  the default or with empty parameter browser reload the page from it's cache.With true parameterWith default/ false parameterUsing jqueryYou don't need anything from jQuery, to reload a page using pure JavaScript, just use reload function on location property like this:By default, this will reload the page using the browser cache (if exists)...If you'd like to do force reload the page, just pass a true value to reload method like below...Also if you are already in window scope, you can get rid of window and do:use orUse onclick="return location.reload();" within the button tag.If you are using jQuery and want to refresh, then try adding your jQuery in a javascript function:I wanted to hide an iframe from a page when clicking oh an h3, for me it worked but I wasn't able to click the item that allowed me to view the iframe to begin with unless I refreshed the browser manually...not ideal.I tried the following:Mixing plain Jane javascript with your jQuery should work.All the answers here are good. Since the question specifies about reloading the page with jquery, I just thought adding something more for future readers.So you'll understand that the foundation of jquery, or jquery is based on javascript. So going with pure javascript is way better when it comes to simple things.But if you need a jquery solution, here's one.There are many ways to reload the current pages, but somehow using those approaches you can see page updated but not with few cache values will be there, so overcome that issue or if you wish to make hard requests then use the below code.Simple Javascript Solution:Probably shortest (12 chars) - use historyYou can write it in two ways. 1st is the standard way of reloading the page also called as simple refresh  And another is called the hard refresh. Here you pass the boolean expression and set it to true. This will reload the page destroying the older cache and displaying the contents from scratch.It is shortest in JavaScript.Here are some lines of code you can use to reload the page using jQuery.It uses the jQuery wrapper and extracts the native dom element. Use this if you just want a jQuery feeling on your code and you don't care about speed/performance of the code.Just pick from 1 to 10 that suits your needs or add some more based on the pattern and answers before this.

Add table row in jQuery

Darryl Hein

[Add table row in jQuery](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)

What is the best method in jQuery to add an additional row to a table as the last row?Is this acceptable?Are there limitations to what you can add to a table like this (such as inputs, selects, number of rows)?

2008-10-04 21:33:10Z

What is the best method in jQuery to add an additional row to a table as the last row?Is this acceptable?Are there limitations to what you can add to a table like this (such as inputs, selects, number of rows)?The approach you suggest is not guaranteed to give you the result you're looking for - what if you had a tbody for example:You would end up with the following:I would therefore recommend this approach instead:You can include anything within the after() method as long as it's valid HTML, including multiple rows as per the example above.Update: Revisiting this answer following recent activity with this question. eyelidlessness makes a good comment that there will always be a tbody in the DOM; this is true, but only if there is at least one row. If you have no rows, there will be no tbody unless you have specified one yourself.DaRKoN_ suggests appending to the tbody rather than adding content after the last tr. This gets around the issue of having no rows, but still isn't bulletproof as you could theoretically have multiple tbody elements and the row would get added to each of them.Weighing everything up, I'm not sure there is a single one-line solution that accounts for every single possible scenario. You will need to make sure the jQuery code tallies with your markup.I think the safest solution is probably to ensure your table always includes at least one tbody in your markup, even if it has no rows. On this basis, you can use the following which will work however many rows you have (and also account for multiple tbody elements):jQuery has a built-in facility to manipulate DOM elements on the fly.You can add anything to your table like this:The $('<some-tag>') thing in jQuery is a tag object that can have several attr attributes that can be set and get, as well as text, which represents the text between the tag here: <tag>text</tag>.This is some pretty weird indenting, but it's easier for you to see what's going on in this example.So things have changed ever since @Luke Bennett answered this question. Here is an update.jQuery since version 1.4(?) automatically detects if the element you are trying to insert (using any of the append(), prepend(), before(), or after() methods) is a <tr> and inserts it into the first <tbody> in your table or wraps it into a new <tbody> if one doesn't exist. So yes your example code is acceptable and will work fine with jQuery 1.4+. ;)What if you had a <tbody> and a <tfoot>? Such as:Then it would insert your new row in the footer - not to the body.Hence the best solution is to include a <tbody> tag and use .append, rather than .after.I know you have asked for a jQuery method. I looked a lot and find that we can do it in a better way than using JavaScript directly by the following function.index is an integer that specifies the position of the row to insert (starts at 0). The value of -1 can also be used; which result in that the new row will be inserted at the last position.This parameter is required in Firefox and Opera, but it is optional in Internet Explorer, Chrome and Safari.If this parameter is omitted, insertRow() inserts a new row at the last position in Internet Explorer and at the first position in Chrome and Safari.It will work for every acceptable structure of HTML table.The following example will insert a row in last (-1 is used as index):I hope it helps.I recommendas opposed to The first and last keywords work on the first or last tag to be started, not closed. Therefore, this plays nicer with nested tables, if you don't want the nested table to be changed, but instead add to the overall table. At least, this is what I found.In my opinion the fastest and clear way ishere is demo  FiddleAlso I can recommend a small function to make more html changesIf you use my string composer you can do this likeHere is demo

FiddleThis can be done easily using the "last()" function of jQuery.I'm using this way when there is not any row in the table, as well as, each row is quite complicated.style.css:xxx.htmlFor the best solution posted here, if there's a nested table on the last row, the new row will be added to the nested table instead of the main table. A quick solution (considering tables with/without tbody and tables with nested tables):Usage example:I solved it this way.Using jqueryI was having some related issues, trying to insert a table row after the clicked row. All is fine except the .after() call does not work for the last row.I landed up with a very untidy solution:create the table as follows (id for each row):etc ...and then :You can use this great jQuery add table row function. It works great with tables that have <tbody> and that don't. Also it takes into the consideration the colspan of your last table row.Here is an example usage:My solution:usage:Neil's answer is by far the best one. However things get messy really fast. My suggestion would be to use variables to store elements and append them to the DOM hierarchy.HTMLJAVASCRIPTWrite with a javascript functionI found this AddRow plugin quite useful for managing table rows. Though, Luke's solution would be the best fit if you just need to add a new row.Here is some hacketi hack code. I wanted to maintain a row template in an HTML page. Table rows 0...n are rendered at request time, and this example has one hardcoded row and a simplified template row. The template table is hidden, and the row tag must be within a valid table or browsers may drop it from the DOM tree. Adding a row uses counter+1 identifier, and the current value is maintained in the data attribute. It guarantees each row gets unique URL parameters.I have run tests on Internet Explorer 8, Internet Explorer 9, Firefox, Chrome, Opera, Nokia Lumia 800, Nokia C7 (with Symbian 3), Android stock and Firefox beta browsers.PS: I give all credits to the jQuery team; they deserve everything. JavaScript programming without jQuery - I don't even want think about that nightmare.I Guess i have done in my project , here it is:htmljsThis is my solutionAs i have also got a way too add row at last or any specific place so i think i should also share this:First find out the length or rows:and then use below code to add your row:To add a good example on the topic, here is working solution if you need to add a row at specific position. The extra row is added after the 5th row, or at the end of the table if there are less then 5 rows.I put the content on a ready (hidden) container below the table ..so if you(or the designer) have to change it is not required to edit the JS.You can cache the footer variable and reduce access to DOM (Note: may be it will be better to use a fake row instead of footer).if you have another variable you can access in <td> tag like that try.This way I hope it would be helpfulwill add a new row to the first TBODY of the table, without depending of any THEAD or TFOOT present.

(I didn't find information from which version of jQuery .append() this behavior is present.)You may try it in these examples:In which example a b row is inserted after 1 2, not after 3 4 in second example. If the table were empty, jQuery creates TBODY for a new row.If you are using Datatable JQuery plugin you can try.Refer Datatables fnAddData Datatables APIIn a simple way:Try this : very simple way

How to check for「undefined」in JavaScript? [duplicate]

goodguys_activate

[How to check for「undefined」in JavaScript? [duplicate]](https://stackoverflow.com/questions/3390396/how-to-check-for-undefined-in-javascript)

What is the most appropriate way to test if a variable is undefined in JavaScript? I've seen several possible ways:OrOr

2010-08-02 17:53:29Z

What is the most appropriate way to test if a variable is undefined in JavaScript? I've seen several possible ways:OrOrIf you are interested in finding out whether a variable has been declared regardless of its value, then using the in operator is the safest way to go. Consider this example:But this may not be the intended result for some cases, since the variable or property was declared but just not initialized. Use the in operator for a more robust check.If you are interested in knowing whether the variable hasn't been declared or has the value undefined, then use the typeof operator, which is guaranteed to return a string:Direct comparisons against undefined are troublesome as undefined can be overwritten. As @CMS pointed out, this has been patched in ECMAScript 5th ed., and undefined is non-writable.if (window.myVar) will also include these falsy values, so it's not very robust:Thanks to @CMS for pointing out that your third case - if (myVariable) can also throw an error in two cases. The first is when the variable hasn't been defined which throws a ReferenceError. The other case is when the variable has been defined, but has a getter function which throws an error when invoked. For example,I personally use Warning: Please note that === is used over == and that myVar has been previously declared (not defined).I do not like typeof myVar === "undefined". I think it is long winded and unnecessary. (I can get the same done in less code.)Now some people will keel over in pain when they read this, screaming: "Wait! WAAITTT!!! undefined can be redefined!"Cool. I know this. Then again, most variables in Javascript can be redefined. Should you never use any built-in identifier that can be redefined?If you follow this rule, good for you: you aren't a hypocrite.The thing is, in order to do lots of real work in JS, developers need to rely on redefinable identifiers to be what they are. I don't hear people telling me that I shouldn't use setTimeout because someone canBottom line, the "it can be redefined" argument to not use a raw === undefined is bogus. (If you are still scared of undefined being redefined, why are you blindly integrating untested library code into your code base? Or even simpler: a linting tool.)Also, like the typeof approach, this technique can "detect" undeclared variables: But both these techniques leak in their abstraction. I urge you not to use this or even Consider:To catch whether or not that variable is declared or not, you may need to resort to the in operator. (In many cases, you can simply read the code O_o).But wait! There's more! What if some prototype chain magic is happening…? Now even the superior in operator does not suffice. (Okay, I'm done here about this part except to say that for 99% of the time, === undefined (and ****cough**** typeof) works just fine. If you really care, you can read about this subject on its own.)Using typeof is my preference. It will work when the variable has never been declared, unlike any comparison with the == or === operators or type coercion using if. (undefined, unlike null, may also be redefined in ECMAScript 3 environments, making it unreliable for comparison, although nearly all common environments now are compliant with ECMAScript 5 or above).You can use typeof, like this:It's been nearly five years since this post was first made, and JavaScript has come a long way.  In repeating the tests in the original post, I found no consistent difference between the following test methods:Even when I modified the tests to prevent Chrome from optimizing them away, the differences were insignificant.  As such, I'd now recommend abc === undefined for clarity.Relevant content from chrome://version:In Google Chrome, the following was ever so slightly faster than a typeof test:The difference was negligible.  However, this code is more concise, and clearer at a glance to someone who knows what void 0 means. Note, however, that abc must still be declared.Both typeof and void were significantly faster than comparing directly against undefined.  I used the following test format in the Chrome developer console:The results were as follows:Note that the first row is in milliseconds, while the second row is in nanoseconds.  A difference of 3.4 nanoseconds is nothing.  The times were pretty consistent in subsequent tests.If it is undefined, it will not be equal to a string that contains the characters "undefined", as the string is not undefined.You can check the type of the variable:Sometimes you don't even have to check the type. If the value of the variable can't evaluate to false when it's set (for example if it's a function), then you can just evalue the variable. Example:Note that strict comparison (!==) is not necessary in this case, since typeof will always return a string.Some scenarios illustrating the results of the various answers:

http://jsfiddle.net/drzaus/UVjM4/(Note that the use of var for in tests make a difference when in a scoped wrapper)Code for reference:And results:In this article I read that frameworks like Underscore.js use this function:Personally, I always use the following:The window.undefined property is non-writable in all modern browsers (JavaScript 1.8.5 or later). From Mozilla's documentation: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined, I see this: One reason to use typeof() is that it does not throw an error if the variable has not been defined.I prefer to have the approach of usingbecause it fails and blows up in my face rather than silently passing/failing if x has not been declared before. This alerts me that x is not declared. I believe all variables used in JavaScript should be declared.The most reliable way I know of checking for undefined is to use void 0.This is compatible with newer and older browsers, alike, and cannot be overwritten like window.undefined can in some cases.Since none of the other answers helped me, I suggest doing this. It worked for me in Internet Explorer 8:On the contrary of @Thomas Eding answer:If I forget to declare myVar in my code, then I'll get myVar is not defined.Let's take a real example:I've a variable name, but I am not sure if it is declared somewhere or not.Then @Anurag's answer will help:I use it as a function parameter and exclude it on function execution that way I get the "real" undefined. Although it does require you to put your code inside a function. I found this while reading the jQuery source.Of course you could just use typeof though. But all my code is usually inside a containing function anyways, so using this method probably saves me a few bytes here and there.

How do I get the current date in JavaScript?

Suresh Chaganti

[How do I get the current date in JavaScript?](https://stackoverflow.com/questions/1531093/how-do-i-get-the-current-date-in-javascript)

How do I get current date in JavaScript?

2009-10-07 11:39:02Z

How do I get current date in JavaScript?Use new Date() to generate a new Date object containing the current date and time.This will give you today's date in the format of mm/dd/yyyy.Simply change today = mm +'/'+ dd +'/'+ yyyy; to whatever format you wish.Use the replace option if you're going to reuse the utc variable, such as new Date(utc), as Firefox and Safari don't recognize a date with dashes.If you want something simple pretty to the end-user ... Also, fixed a small suffix issue in the first version below. Now properly returns suffix.This update comes in 2 flavors, still relatively small, though not as small as my above, original answer. If you want extremely small, go with that.  Also Note: This is still less bloated than moment.js. While moment.js is nice, imo, it has too many secular methods, which require learning moment as if it were a language. Mine here uses the same common format as PHP: date.In this mod, the format characters are inspired by PHP: date. For a complete list, please see my READMEThis mod also has a much longer list of pre-made formats. To use a premade format, simply enter its key name. dateFormat(new Date(), 'pretty-a');As you may notice, you can use double \ to escape a character.The shortest possible. To get format like "2018-08-03":To get format like "8/3/2018":Also, you can pass locale as argument, for example toLocaleDateString("sr"), etc.If you just want a date without time info, use:Try this:The result will be likeIf you're looking for a lot more granular control over the date formats, I thoroughly recommend  checking out momentjs. Terrific library - and only 5KB.

http://momentjs.com/You can use moment.js: http://momentjs.com/To break it down into steps:This works every time:Also, you can call method toLocaleDateString with two parameters:Article on MSDN. More about this method on MDN.Cleaner, simpler version:Result varies according to the user's locale:If you are happy with YYYY-MM-DD format, this will do the job as well.new Date().toISOString().split('T')[0]2018-03-10You can use Date.js library which extens Date object, thus you can have .today() method.You can get the current date call the static method now like this:reference:https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date/nowVarun's answer does not account for TimezoneOffset. Here is a version that does:The TimezoneOffset is minutes, while the Date constructor takes milliseconds, thus the multiplication by 60000.The Shortest Answer is: new Date().toJSON().slice(0,10)Result:As toISOString() will only return current UTC time , not local time. We have to make a date by using '.toString()' function to get date in yyyy-MM-dd format likeTo get date and time into in yyyy-MM-ddTHH:mm:ss formatTo get date and time into in yyyy-MM-dd HH:mm:ss formatIf you want a simple DD/MM/YYYY format, I've just come up with this simple solution, although it doesn't prefix missing zeros.would work tooLATEST EDIT: 8/23/19

The date-fns library works much like moment.js but has a WAY smaller footprint. It lets you cherry pick which functions you want to include in your project so you don't have to compile the whole library to format today's date. If a minimal 3rd party lib isn't an option for your project, I endorse the accepted solution by Samuel Meddows up top.Preserving history below because it helped a few people. But for the record it's pretty hacky and liable to break without warning, as are most of the solutions on this postEDIT 2/7/2017

A one-line JS solution: ExplanationI found out that IE10 and IE Edge do things a bit differently.. go figure.

with new Date(Date.now()).toLocaleString() as input,IE10 returns: I could write a big long function and FTFY. But you really ought to use moment.js for this stuff. My script merely cleans this up and gives you the expanded traditional US notation: > todaysDate = "March 06, 2017"IE EDGE returns:Of course it couldn't be that easy. Edge's date string has invisible "•" characters between each visible one. So not only will we now be checking if the first character is a number, but the first 3 characters, since it turns out that any single character in the whole date range will eventually be a dot or a slash at some point. So to keep things simple, just .slice() the first three chars (tiny buffer against future shenanigans) and then check for numbers. It should probably be noted that these invisible dots could potentially persist in your code. I'd maybe dig into that if you've got bigger plans than just printing this string to your view.∴ updated one-liner:That sucks to read. How about:ORIGINAL ANSWERI've got a one-liner for you:and [1] will give you the time of day.You can use thisThe HTML isIf you are using jQuery. Try this one liner :Here is the convention for formatting the date Here is the reference for jQuery datepickerYou can checkout thisAnd see the documentation for Date() constructor.

linkWhat's the big deal with this..   The cleanest way to do this is var currentDate=new Date().toLocaleString().slice(0,10);This may help youThis will print current date in dd/MM/yyyy formatThis is good to get formatted date I think this is an old question but the easiest way would be the following:This will grab the current time, pass it to a string based on location and then you can call the function CurrentTime to display the time.  This would be, to me, the most effective way to get a time stamp for something.

What is the JavaScript version of sleep()?

Dan Dascalescu

[What is the JavaScript version of sleep()?](https://stackoverflow.com/questions/951021/what-is-the-javascript-version-of-sleep)

Is there a better way to engineer a sleep in JavaScript than the following pausecomp function (taken from here)?This is not a duplicate of Sleep in JavaScript - delay between actions; I want a real sleep in the middle of a function, and not a delay before a piece of code executes.

2016-10-07 09:44:56Z

Is there a better way to engineer a sleep in JavaScript than the following pausecomp function (taken from here)?This is not a duplicate of Sleep in JavaScript - delay between actions; I want a real sleep in the middle of a function, and not a delay before a piece of code executes.Since 2009 when this question was asked, JavaScript has evolved significantly. All other answers are now obsolete or overly complicated. Here is the current best practice:Or as a one-liner:Note that,Two new JavaScript features helped write this "sleep" function:If for some weird reason you're using Node older than 7 (which has reached end of life), or are targeting old browsers, async/await can still be used via Babel (a tool that will transpile JavaScript + new features into plain old JavaScript), with the transform-async-to-generator plugin.(See the updated answer for 2016)I think it's perfectly reasonable to want to perform an action, wait, then perform another action. If you are used to writing in multi-threaded languages, you probably have the idea of yielding execution for a set amount of time until your thread wakes up.The issue here is that JavaScript is a single-thread event-based model. While in a specific case, it might be nice to have the whole engine wait for a few seconds, in general it is bad practice. Suppose I wanted to make use of your functions while writing my own? When I called your method, my methods would all freeze up. If JavaScript could somehow preserve your function's execution context, store it somewhere, then bring it back and continue later, then sleep could happen, but that would basically be threading.So you are pretty much stuck with what others have suggested -- you'll need to break your code up into multiple functions.Your question is a bit of a false choice, then. There is no way to sleep in the way you want, nor should you pursue the solution you suggest.In JavaScript, I rewrite every function so that it can end as soon as possible. You want the browser back in control so it can make your DOM changes.Every time I've wanted a sleep in the middle of my function, I refactored to use a setTimeout().The infamous sleep, or delay, function within any language is much debated.  Some will say that there should always be a signal or callback to fire a given functionality, others will argue that sometimes an arbitrary moment of delay is useful.  I say that to each their own and one rule can never dictate anything in this industry.Writing a sleep function is simple and made even more usable with JavaScript Promises:Only for debug/dev , I post this if it's useful to someoneInteresting stuff, in Firebug ( & probably other js consoles ), nothing happen after hitting enter, only after the sleep duration specified (...)Example of use:I agree with the other posters, a busy sleep is just a bad idea.However, setTimeout does not hold up execution, it executes the next line of the function immediately after the timeout is SET, not after the timeout expires, so that does not accomplish the same task that a sleep would accomplish.The way to do it is to breakdown your function in to before and after parts. Make sure your function names still accurately describe what each piece is doing (I.E. GatherInputThenWait and CheckInput, rather than funcPart1 and funcPart2)Edit This method achieves the purpose of not executing the lines of code you decide until AFTER your timeout, while still returning control back to the client PC to execute whatever else it has queued up.Further EditAs pointed out in the comments this will absolutely NOT WORK in a loop. You could do some fancy (ugly) hacking to make it work in a loop, but in general that will just make for disastrous spaghetti code.For the love of $DEITY please do not make a busy-wait sleep function.  setTimeout and setInterval do everything you need.Every two second interval hide text for one second. This shows how to use setInterval and setTimeout to show and hide text each second. I know this is a bit of an old question, but if (like me) you're using Javascript with Rhino, you can use...If you're using jQuery, someone actually created a "delay" plugin that's nothing more than a wrapper for setTimeout:You can then just use it in a row of function calls as expected:I've searched for sleep solution too (not for production code, only for dev/tests) and found this article:http://narayanraman.blogspot.com/2005/12/javascript-sleep-or-wait.html...and here's another link with client-side solutions: http://www.devcheater.com/Also, when you are calling alert(), your code will be paused too, while alert is shown -- need to find a way to not display alert but get the same effect. :)Here's a simple solution using a synchronous XMLHttpRequest:contents of sleep.php:Now call it with:

sleep(5);Here you go.  As the code says, don't be a bad dev and use this on websites.  It's a development utility function.I personally like the simple:then:I'm using it all the time to create fake load time while creating scripts in P5jsFirst:Define a function you want to execute like this:Then schedule its execution with the setTimeout method:Note two thingsBetter solution to make things look like what most people want is to use an anonymous function:This is probably the closest you'll get to something that simply does what you want.Note, if you need multiple sleeps this can get ugly in a hurry and you might actually need to rethink your design.make sure your calling function is async verified and working fineFor browsers, I agree that setTimeout and setInterval are the way to go.But for server-side code, it may require a blocking function (for example, so you can effectively have thread synchronization).If you're using node.js and meteor, you may have run into the limitations of using setTimeout in a fiber. Here is the code for server-side sleep.See: https://github.com/laverdet/node-fibers#sleepI would encapsulate setTimeOut in a Promise for code consistency with other asynchronous tasks : Demo in FiddleUsed like that :It is easy to remember syntax if you used to use Promises.Most of the answers here are misguided or at the very least outdated. There is no reason javascript has to be single threaded, and indeed it isnt't. Today all the mainstream browsers support workers, before this was the case other javascript runtimes like Rhino and Node.js supported multithreading.'Javascript is single threaded' is not a valid answer. For example running a sleep function within a worker would not block any of the code running in the ui thread.In newer runtimes supporting generators and yield, one could bring similar functionality to the sleep function in a single threaded environment:This imitation of sleep is different from a true sleep function as it does not block the thread. It is simply sugar on top of javascript's current setTimeout function. This functionality type has been implemented in Task.js and should work today in Firefox.I have searched/googled quite a few webpages on javascript sleep/wait... and there is NO answer if you want javascript to "RUN, DELAY, RUN"... what most people got was either, "RUN, RUN(useless stuff), RUN" or "RUN, RUN + delayed RUN"....So I ate some burgers and got thinking:::

here is a solution that works... but you have to chop up your running codes...:::

yes, I know, this is just an easier to read refactoring... still...//.........................................

//example1://....................................

//example2://.................

example3://..............

example4:2019 Update using Atomics.waitShould work in Node 9.3 or higher.I needed a pretty accurate timer in Node.js and it works great for that.

However it seems like there is extremely limited support in browsers.Ran a few 10 second timer benchmarks.With setTimeout I get a error of up to 7000 microseconds. (7ms)With Atomics my error seems to stay under 600 microseconds. (0.6ms)You can't do a sleep like that in JavaScript, or, rather, you shouldn't. Running a sleep or a while loop will cause the user's browser to hang until the loop is done.Use a timer, as specified in the link you referenced. One scenario where you might want a sleep() function rather than using setTimeout() is if you have a function responding to a user click that will ultimately end up opening a new i.e. popup window and you have initiated some processing that requires a short period to complete before the popup is displayed. Moving the open window into a closure means that it typically gets blocked by the browser.I can understand the purpose of a sleep function if you have to deal with synchronous execution. The setInterval and setTimeout functions create a parallel execution thread which returns the execution sequence back to the main program, which is ineffective if you have to wait for a given result. Of course one may use events and handlers, but in some cases is not what is intended.Adding my two bits. I needed a busy-wait for testing purposes. I didn't want to split the code as that would be a lot of work, so a simple for did it for me. I don't see any downside in doing this and it did the trick for me.It can be done using Java's sleep method. I've tested it in FF and IE and it doesn't lock the computer, chew up resources, or cause endless server hits. Seems like a clean solution to me.First you have to get Java loaded up on the page and make its methods available. To do that, I did this:Then, all you have to do when you want a painless pause in your JS is:Where xxx is time in milliseconds. In my case (by way of justification), this was part of back-end order fulfillment at a very small company and I needed to print an invoice that had to be loaded from the server. I did it by loading the invoice (as a webpage) into an iFrame and then printing the iFrame. Of course, I had to wait until the page was fully loaded before I could print, so the JS had to pause. I accomplished this by having the invoice page (in the iFrame) change a hidden form field on the parent page with the onLoad event.  And the code on the parent page to print the invoice looked like this (irrelevant parts cut for clarity):So the user pushes the button, the script loads the invoice page, then waits, checking every quarter second to see if the invoice page is finished loading, then pops up the print dialog for the user to send it to the printer.  QED.A lot of the answers don't (directly) answer the question, and neither does this one...Here's my two cents (or functions):If you want less clunky functions than setTimeout and setInterval, you can wrap them in functions that just reverse the order of the arguments and give them nice names:CoffeeScript versions:You can then use them nicely with anonymous functions:Now it reads easily as "after N milliseconds, ..." (or "every N milliseconds, ...")For the specific case of wanting to space out a set of calls being executed by a loop, you can use something like the code below with prototype. Without prototype, you can substitute the delay function with setTimeout.If you're on node.js, you can have a look at fibers – a native C extension to node, a kinda-multi-threading simulation.It allows you to do a real sleep in a way which is blocking execution in a fiber, but it's non-blocking in the main thread and other fibers.Here's an example fresh from their own readme:– and the results are:An old question from 2009.  Now in 2015 a new solution is possible with generators defined in ECMAscript 2015 aka ES6.  It was approved in June, but it was implemented in Firefox and Chrome before.  Now a sleep function can be made non-busy, non-blocking and nested inside loops and sub-functions without freezing the browser.  Only pure JavaScript is needed, no libraries or frameworks.The program below shows how sleep() and runSleepyTask() can be made.  The sleep() function is only a yield statement.  It is so simple that it is actually easier to write the yield statement directly in stead of calling sleep(), but then there would be no sleep-word :-)  The yield returns a time value to the next() method inside wakeup() and waits.  The actual "sleeping" is done in wakeup() using the good old setTimeout().  At callback the the next() method triggers the yield statement to continue, and the "magic" of yield is that all the local variables and the whole call-stack around it is still intact.Functions that use sleep() or yield must be defined as generators.  Easy done by adding an asterix to the keyword function*.  To execute a generator is a bit trickier.  When invoked with the keyword new the generator returns an object that has the next() method, but the body of the generator is not executed (the keyword new is optional and makes no difference).  The next() method triggers execution of the generator body until it encounters a yield.  The wrapper function runSleepyTask() starts up the ping-pong: next() waits for a yield, and yield waits a next().Another way to invoke a generator is with keyword yield*, here it works like a simple function call, but it also includes the ability to yield back to next().This is all demonstrated by the example drawTree().  It draws a tree with leaves on a rotating 3D scene.  A tree is drawn as a trunk with 3 parts at the top in different directions.  Each part is then drawn as another but smaller tree by calling drawTree() recursively after a short sleep.  A very small tree is drawn as only a leaf.Each leaf has its own life in a separate task started with runSleepyTask().  It is born, grows, sits, fades, falls and dies in growLeaf().  The speed is controlled with sleep().  This demonstrates how easy multitasking can be done.The 3D stuff is hidden inside setup3D() and is only included to make it less boring than console.log().  Angels are measured in radians by the way.Tested to work in Firefox and Chrome.  Not implemented in Internet Explore and iOS (iPads).  Try to run it yourself.After another pass of the answers I found, that Gabriel Ratener made a similar answer a year ago: https://stackoverflow.com/a/24401317/5032384 

How to get the children of the $(this) selector?

Alex

[How to get the children of the $(this) selector?](https://stackoverflow.com/questions/306583/how-to-get-the-children-of-the-this-selector)

I have a layout similar to this:and would like to use a jQuery selector to select the child img inside the div on click.To get the div, I've got this selector:How can I get the child img using a selector?

2008-11-20 19:44:05Z

I have a layout similar to this:and would like to use a jQuery selector to select the child img inside the div on click.To get the div, I've got this selector:How can I get the child img using a selector?The jQuery constructor accepts a 2nd parameter called context which can be used to override the context of the selection. Which is the same as using .find() like this:If the imgs you desire are only direct descendants of the clicked element, you can also use .children():You could also usewhich would return all imgs that are descendants of the divIf you need to get the first img that's down exactly one level, you can do If your DIV tag is immediately followed by the IMG tag, you can also use:The direct children is You can find all img element of parent div like belowIf you want specific img element you can write like thisYour div contain only one img element. So for this below is rightBut if your div contain more img element like below then you can't use upper code to find alt value of second img element. So you can try this:This example shows a general idea that how you can find actual object within parent object.

You can use classes to differentiate your child object. That is easy and fun. i.e.You can do this as below :and more specific as:You can use find or children as above code. For more visit Children http://api.jquery.com/children/ and Find http://api.jquery.com/find/. 

See example http://jsfiddle.net/lalitjs/Nx8a6/Ways to refer to a child in jQuery. I summarized it in the following jQuery: Without knowing the ID of the DIV I think you could select the IMG like this:Try this code:You can use either of the following methods:1 find():  2 children():  jQuery's each is one option:You can use Child Selecor to reference the child elements available within the parent.And the below is if you don't have reference to $(this) and you want to reference img available within a div from other function.Also this should work:Here's a functional code, you can run it (it's a simple demonstration). When you click the DIV you get the image from some different methods, in this situation "this" is the DIV.Hope it helps!You may have 0 to many <img> tags inside of your <div>.  To find an element, use a .find().  To keep your code safe, use a .each().  Using .find() and .each() together prevents null reference errors in the case of 0 <img> elements while also allowing for handling of multiple <img> elements.You could use

How to decide when to use Node.js?

Legend

[How to decide when to use Node.js?](https://stackoverflow.com/questions/5062614/how-to-decide-when-to-use-node-js)

I am new to this kind of stuff, but lately I've been hearing a lot about how good Node.js is. Considering how much I love working with jQuery and JavaScript in general, I can't help but wonder how to decide when to use Node.js. The web application I have in mind is something like Bitly - takes some content, archives it. From all the homework I have been doing in the last few days, I obtained the following information. Node.js Some of the sources that I have come across are:Considering that Node.js can be run almost out-of-the-box on Amazon's EC2 instances, I am trying to understand what type of problems require Node.js as opposed to any of the mighty kings out there like PHP, Python and Ruby. I understand that it really depends on the expertise one has on a language, but my question falls more into the general category of: When to use a particular framework and what type of problems is it particularly suited for?

2011-02-21 05:20:51Z

I am new to this kind of stuff, but lately I've been hearing a lot about how good Node.js is. Considering how much I love working with jQuery and JavaScript in general, I can't help but wonder how to decide when to use Node.js. The web application I have in mind is something like Bitly - takes some content, archives it. From all the homework I have been doing in the last few days, I obtained the following information. Node.js Some of the sources that I have come across are:Considering that Node.js can be run almost out-of-the-box on Amazon's EC2 instances, I am trying to understand what type of problems require Node.js as opposed to any of the mighty kings out there like PHP, Python and Ruby. I understand that it really depends on the expertise one has on a language, but my question falls more into the general category of: When to use a particular framework and what type of problems is it particularly suited for?You did a great job of summarizing what's awesome about Node.js. My feeling is that Node.js is especially suited for applications where you'd like to maintain a persistent connection from the browser back to the server. Using a technique known as "long-polling", you can write an application that sends updates to the user in real time. Doing long polling on many of the web's giants, like Ruby on Rails or Django, would create immense load on the server, because each active client eats up one server process. This situation amounts to a tarpit attack. When you use something like Node.js, the server has no need of maintaining separate threads for each open connection.  This means you can create a browser-based chat application in Node.js that takes almost no system resources to serve a great many clients. Any time you want to do this sort of long-polling, Node.js is a great option.  It's worth mentioning that Ruby and Python both have tools to do this sort of thing (eventmachine and twisted, respectively), but that Node.js does it exceptionally well, and from the ground up. JavaScript is exceptionally well situated to a callback-based concurrency model, and it excels here. Also, being able to serialize and deserialize with JSON native to both the client and the server is pretty nifty. I look forward to reading other answers here, this is a fantastic question. It's worth pointing out that Node.js is also great for situations in which you'll be reusing a lot of code across the client/server gap. The Meteor framework makes this really easy, and a lot of folks are suggesting this might be the future of web development. I can say from experience that it's a whole lot of fun to write code in Meteor, and a big part of this is spending less time thinking about how you're going to restructure your data, so the code that runs in the browser can easily manipulate it and pass it back. Here's an article on Pyramid and long-polling, which turns out to be very easy to set up with a little help from gevent: TicTacToe and Long Polling with Pyramid.I believe Node.js is best suited for real-time applications: online games, collaboration tools, chat rooms, or anything where what one user (or robot?  or sensor?) does with the application needs to be seen by other users immediately, without a page refresh.I should also mention that Socket.IO in combination with Node.js will reduce your real-time latency even further than what is possible with long polling.  Socket.IO will fall back to long polling as a worst case scenario, and instead use web sockets or even Flash if they are available.But I should also mention that just about any situation where the code might block due to threads can be better addressed with Node.js.  Or any situation where you need the application to be event-driven.Also, Ryan Dahl said in a talk that I once attended that the Node.js benchmarks closely rival Nginx for regular old HTTP requests.  So if we build with Node.js, we can serve our normal resources quite effectively, and when we need the event-driven stuff, it's ready to handle it.Plus it's all JavaScript all the time.  Lingua Franca on the whole stack.Reasons to use NodeJS:Reasons not to use NodeJS:I love NodeJS, it is fast and wild and fun, but I am concerned it has little interest in provable-correctness.  Let's hope we can eventually merge the best of both worlds.  I am eager to see what will replace Node in the future... :)To make it short:Node.js is well suited for applications that have a lot of concurrent connections and each request only needs very few CPU cycles, because the event loop (with all the other clients) is blocked during execution of a function.A good article about the event loop in Node.js is Mixu's tech blog: Understanding the node.js event loop.I have one real-world example where I have used Node.js. The company where I work got one client who wanted to have a simple static HTML website. This website is for selling one item using PayPal and the client also wanted to have a counter which shows the amount of sold items. Client expected to have huge amount of visitors to this website. I decided to make the counter using Node.js and the Express.js framework.The Node.js application was simple. Get the sold items amount from a Redis database, increase the counter when item is sold and serve the counter value to users via the API.Some reasons why I chose to use Node.js in this caseIn this case, Node.js was an awesome choice.The most important reasons to start your next project using Node ...What to expect ...Who uses it?There is nothing like Silver Bullet. Everything comes with some cost associated with it. It is like if you eat oily food, you will compromise your health and healthy food does not come with spices like oily food. It is individual choice whether they want health or spices as in their food.

Same way Node.js consider to be used in specific scenario. If your app does not fit into that scenario you should not consider it for your app development. I am just putting my thought on the same:When to use Node.JSWhen NOT to use Node.JSScalability Consideration with Node.JSNode.JS AlternativesThere are other option to use in place of Node.JS however Vert.x seems to be pretty promising and has lots of additional features like polygot and better scalability considerations.Another great thing that I think no one has mentioned about Node.js is the amazing community, the package management system (npm) and the amount of modules that exist that you can include by simply including them in your package.json file. My piece: nodejs is great for making real time systems like analytics, chat-apps, apis, ad servers, etc.

Hell, I made my first chat app using nodejs and socket.io under 2 hours and that too during exam 

week!EditIts been several years since I have started using nodejs and I have used it in making many different things including static file servers, simple analytics, chat apps and much more.

This is my take on when to use nodejsWhen to useWhen making system which put emphasis on concurrency and speed.When not to useIts a very versatile webserver so you can use it wherever you want but probably not these places.Keep in mind that I am just nitpicking. For static file servers, apache is better mainly because it is widely available. The nodejs community has grown larger and more mature over the years and it is safe to say nodejs can be used just about everywhere if you have your own choice of hosting.It can be used whereOn Mobile front, prime-time companies have relied on Node.js for their mobile solutions. Check out why?LinkedIn is a prominent user. Their entire mobile stack is built on Node.js. They went from running 15 servers with 15 instances on each physical machine, to just 4 instances – that can handle double the traffic!eBay launched ql.io, a web query language for HTTP APIs, which uses Node.js as the runtime stack. They were able to tune a regular developer-quality Ubuntu workstation to handle more than 120,000 active connections per node.js process, with each connection consuming about 2kB memory!Walmart re-engineered its mobile app to use Node.js and pushed its JavaScript processing to the server.Read more at: http://www.pixelatingbits.com/a-closer-look-at-mobile-app-development-with-node-js/Node best for concurrent request handling -So, Let’s start with a story. From last 2 years I am working on JavaScript and developing web front end and I am enjoying it. Back end guys provide’s us some API’s written in Java,python (we don’t care) and we simply write a AJAX call, get our data and guess what ! we are done. But in real it is not that easy, If data we are getting is not correct or there is some server error then we stuck and we have to contact our back end guys over the mail or chat(sometimes on whatsApp too :).) This is not cool. What if we wrote our API’s in JavaScript and call those API’s from our front end ? Yes that’s pretty cool because if we face any problem in API we can look into it. Guess what ! you can do this now , How ? – Node is there for you.Ok agreed that you can write your API in JavaScript but what if I am ok with above problem. Do you have any other reason to use node for rest API ?so here is the magic begins. Yes I do have other reasons to use node for our API’s.Let’s go back to our traditional rest API system which is based on either blocking operation or threading. Suppose two concurrent request occurs( r1 and r2) , each of them require database operation. So In traditional system what will happens :1. Waiting Way : Our server starts serving r1 request and waits for query response. after completion of r1 , server starts to serve r2 and does it in same way. So waiting is not a good idea because we don’t have that much time.2. Threading Way : Our server will creates two threads for both requests r1 and r2 and serve their purpose after querying database so cool its fast.But it is memory consuming because you can see we started two threads also problem increases when both request is querying same data then you have to deal with deadlock kind of issues . So its better than waiting way but still issues are there.Now here is , how node will do it:3. Nodeway : When same concurrent request comes in node then it will register an event with its callback and move ahead it will not wait for query response for a particular request.So when r1 request comes then node’s event loop (yes there is an event loop in node which serves this purpose.) register an event with its callback function and move ahead for serving r2 request and similarly register its event with its callback. Whenever any query finishes it triggers its corresponding event and execute its callback  to completion without being interrupted.So no waiting, no threading , no memory consumption – yes this is nodeway for serving rest API.My one more reason to choose Node.js for a new project is: Be able to do pure cloud based developmentI have used Cloud9 IDE for a while and now I can't imagine without it, it covers all the development lifecycles. All you need is a browser and you can code anytime anywhere on any devices. You don't need to check in code in one Computer(like at home), then checkout in another computer(like at work place). Of course, there maybe cloud based IDE for other languages or platforms (Cloud 9 IDE is adding supports for other languages as well), but using Cloud 9 to do Node.js developement is really a great experience for me.   One more thing node provides is the ability to create multiple v8 instanes of node using node's child process( childProcess.fork() each requiring 10mb memory as per docs) on the fly, thus not affecting the main process running the server. So offloading a background job that requires huge server load becomes a child's play and we can easily kill them as and when needed.I've been using node a lot and in most of the apps we build, require server connections at the same time thus a heavy network traffic. Frameworks like Express.js and the new Koajs (which removed callback hell) have made working on node even more easier.Donning asbestos longjohns...Yesterday my title with Packt Publications, Reactive Programming with JavaScript. It isn't really a Node.js-centric title; early chapters are intended to cover theory, and later code-heavy chapters cover practice. Because I didn't really think it would be appropriate to fail to give readers a webserver, Node.js seemed by far the obvious choice. The case was closed before it was even opened.I could have given a very rosy view of my experience with Node.js. Instead I was honest about good points and bad points I encountered.Let me include a few quotes that are relevant here:The Appendix, which I did not really want after the rising crescendo in the last chapters and the conclusion, talks about what I was able to find in the ecosystem, and provided a workaround for moronic literalism:Swapping two comments in order:If your application mainly tethers web apis, or other io channels, give or take a user interface, node.js may be a fair pick for you, especially if you want to squeeze out the most scalability, or, if your main language in life is javascript (or javascript transpilers of sorts). If you build microservices, node.js is also okay. Node.js is also suitable for any project that is small or simple.Its main selling point is it allows front-enders take responsibility for back-end stuff rather than the typical divide. Another justifiable selling point is if your workforce is javascript oriented to begin with. Beyond a certain point however, you cannot scale your code without terrible hacks for forcing modularity, readability and flow control. Some people like those hacks though, especially coming from an event-driven javascript background, they seem familiar or forgivable. In particular, when your application needs to perform synchronous flows, you start bleeding over half-baked solutions that slow you down considerably in terms of your development process. If you have computation intensive parts in your application, tread with caution picking (only) node.js. Maybe http://koajs.com/ or other novelties alleviate those originally thorny aspects, compared to when I originally used node.js or wrote this.I can share few points where&why to use node js.Drawbacks:-Conclusion:- 

Nodejs best to use for simple and real time applications..if you have very big business logic and complex functionality better should not use nodejs.

If you want to build an application along with chat and any collaborative functionality.. node can be used in specific parts and remain should go with your convenience technology.

How do I empty an array in JavaScript?

akano1

[How do I empty an array in JavaScript?](https://stackoverflow.com/questions/1232040/how-do-i-empty-an-array-in-javascript)

Is there a way to empty an array and if so possibly with .remove()?For instance, How can I empty that?

2009-08-05 09:08:39Z

Is there a way to empty an array and if so possibly with .remove()?For instance, How can I empty that?Ways to clear an existing array A:Method 1(this was my original answer to the question)This code will set the variable A to a new empty array. This is perfect if you don't have references to the original array A anywhere else because this actually creates a brand new (empty) array. You should be careful with this method because if you have referenced this array from another variable or property, the original array will remain unchanged. Only use this if you only reference the array by its original variable A.This is also the fastest solution.This code sample shows the issue you can encounter when using this method:Method 2 (as suggested by Matthew Crumley)This will clear the existing array by setting its length to 0. Some have argued that this may not work in all implementations of JavaScript, but it turns out that this is not the case. It also works when using "strict mode" in ECMAScript 5 because the length property of an array is a read/write property.Method 3 (as suggested by Anthony)Using .splice() will work perfectly, but since the .splice() function will return an array with all the removed items, it will actually return a copy of the original array. Benchmarks suggest that this has no effect on performance whatsoever.Method 4 (as suggested by tanguy_k)This solution is not very succinct, and it is also the slowest solution, contrary to earlier benchmarks referenced in the original answer.PerformanceOf all the methods of clearing an existing array, methods 2 and 3 are very similar in performance and are a lot faster than method 4. See this benchmark.As pointed out by Diadistis in their answer below, the original benchmarks that were used to determine the performance of the four methods described above were flawed. The original benchmark reused the cleared array so the second iteration was clearing an array that was already empty.The following benchmark fixes this flaw: http://jsben.ch/#/hyj65. It clearly shows that methods #2 (length property) and #3 (splice) are the fastest (not counting method #1 which doesn't change the original array).This has been a hot topic and the cause of a lot of controversy. There are actually many correct answers and because this answer has been marked as the accepted answer for a very long time, I will include all of the methods here. If you vote for this answer, please upvote the other answers that I have referenced as well.If you need to keep the original array because you have other references to it that should be updated too, you can clear it without creating a new array by setting its length to zero:Here the fastest working implementation while keeping the same array ("mutable"):FYI it cannot be simplified to while (array.pop()): the tests will fail.FYI Map and Set define clear(), it would have seem logical to have clear() for Array too.TypeScript version:The corresponding tests:Here the updated jsPerf: http://jsperf.com/array-destroy/32 http://jsperf.com/array-destroy/152A more cross-browser friendly and more optimal solution will be to use the splice method to empty the content of the array A as below:A.splice(0, A.length);The answers that have no less that 2739 upvotes by now are misleading and incorrect.The question is: "How do you empty your existing array?" E.g. for A = [1,2,3,4].Let's say your mother asks you to empty the trash can. Emptying an array object is the easiest thing ever:This way, the can under "A" is not only empty, but also as clean as new!No, you were asked to empty it:This is the only code that correctly empties the contents of a given JavaScript array.Performance test:http://jsperf.com/array-clear-methods/3You can add this to your JavaScript file to allow your arrays to be "cleared":Then you can use it like this:Or if you want to be sure you don't destroy something:Lots of people think you shouldn't modify native objects (like Array), and I'm inclined to agree. Please use caution in deciding how to handle this.There is a lot of confusion and misinformation regarding the while;pop/shift performance both in answers and comments. The while/pop solution has (as expected) the worst performance. What's actually happening is that setup runs only once for each sample that runs the snippet in a loop. eg:I have created a new test that works correctly :http://jsperf.com/empty-javascript-array-reduxWarning: even in this version of the test you can't actually see the real difference because cloning the array takes up most of the test time. It still shows that splice is the fastest way to clear the array (not taking [] into consideration because while it is the fastest it's not actually clearing the existing array).In case you are interested in the memory allocation, you may compare each approach using something like this jsfiddle in conjunction with chrome dev tools' timeline tab. You will want to use the trash bin icon at the bottom to force a garbage collection after 'clearing' the array. This should give you a more definite answer for the browser of your choice. A lot of answers here are old and I wouldn't rely on them but rather test as in @tanguy_k's answer above.(for an intro to the aforementioned tab you can check out here)Stackoverflow forces me to copy the jsfiddle so here it is:And you should take note that it may depend on the type of the array elements, as javascript manages strings differently than other primitive types, not to mention arrays of objects. The type may affect what happens.You can easily create a function to do that for you, change the length or even add it to native Array as remove() function for reuse.Imagine you have this array:OK, just simply run this:and the result is:easy way to empty an array...Also using loop which is not necessary but just another way to do that:There are also tricky way which you can think about, for example something like this:So if arr has 5 items, it will splice 5 items from 0, which means nothing will remain in the array.Also other ways like simply reassign the array for example:If you look at the Array functions, there are many other ways to do this, but the most recommended one could be changing the length.As I said in the first place, you can also prototype remove() as it's the answer to your question. you can simply choose one of the methods above and prototype it to Array object in JavaScript, something like:and you can simply call it like this to empty any array in your javascript application:And call it: array.clear();A.splice(0);I just did this on some code I am working on.  It cleared the array.If you are using Then you are assigning new array reference to a, if reference in a is already assigned to any other variable, then it will not empty that array too and hence garbage collector will not collect that memory.For ex. orWhen we specify a.length, we are just resetting boundaries of the array and memory for rest array elements will be connected by garbage collector. Instead of these two solutions are better.andAs per previous answer by kenshou.html, second method is faster.Use a modified version of Jan's initial suggestion:If you use constants then you have no choice:You can not reasign:You can only truncate:To Empty a Current memory location of an array use: 'myArray.length = 0' or 'myArray.pop() UN-till its length is 0'Example:I'm surprised no one has suggested this yet:This yields an array in quite a different state from the other solutions. In a sense, the array has been 'emptied':You can produce an equivalent array with [,,,,] or Array(4)Use below if you need to empty Angular 2+ FormArray. 

$(document).ready equivalent without jQuery

FlySwat

[$(document).ready equivalent without jQuery](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)

I have a script that uses $(document).ready, but it doesn't use anything else from jQuery. I'd like to lighten it up by removing the jQuery dependency.How can I implement my own $(document).ready functionality without using jQuery? I know that  using window.onload will not be the same, as window.onload fires after all images, frames, etc. have been loaded.

2009-04-28 21:51:11Z

I have a script that uses $(document).ready, but it doesn't use anything else from jQuery. I'd like to lighten it up by removing the jQuery dependency.How can I implement my own $(document).ready functionality without using jQuery? I know that  using window.onload will not be the same, as window.onload fires after all images, frames, etc. have been loaded.There is a standards based replacement,DOMContentLoaded that is supported by over 98% of browsers, though not IE8:jQuery's native function is much more complicated than just window.onload, as depicted below.  Edit:Taken from

https://plainjs.com/javascript/events/running-code-when-the-document-is-ready-15/Another good domReady function here taken from https://stackoverflow.com/a/9899701/175071As the accepted answer was very far from complete, I stitched together a "ready" function like jQuery.ready() based on jQuery 1.6.2 source:How to use:I am not sure how functional this code is, but it worked fine with my superficial tests. This took quite a while, so I hope you and others can benefit from it.PS.: I suggest compiling it.Or you can use http://dustindiaz.com/smallest-domready-ever:or the native function if you only need to support the new browsers (Unlike jQuery ready, this won't run if you add this after the page has loaded)Three options:onreadystatechangeSource: MDNDOMContentLoadedConcerned about stone age browsers:

Go to the jQuery source code and use the ready function. In that case you are not parsing+executing the whole library you're are doing only a very small part of it.Place your <script>/*JavaScript code*/</script> right before the closing </body> tag.Admittedly, this might not suit everyone's purposes since it requires changing the HTML file rather than just doing something in the JavaScript file a la document.ready, but still...Poor man's solution:View FiddleAdded this one, a bit better I guess, own scope, and non recursiveView FiddleI use this:Note: This probably only works with newer browsers, especially these: http://caniuse.com/#feat=domcontentloadedReally, if you care about Internet Explorer 9+ only, this code would be enough to replace jQuery.ready:If you worry about Internet Explorer 6 and some really strange and rare browsers, this will work:This question was asked quite a long time ago.  For anyone just seeing this question, there is now a site called "you might not need jquery"  which breaks down - by level of IE support required - all the functionality of jquery and provides some alternative, smaller libraries.IE8 document ready script according to you might not need jqueryI was recently using this for a mobile site. This is John Resig's simplified version from "Pro JavaScript Techniques". It depends on addEvent.Cross-browser (old browsers too) and a simple solution:Showing alert in jsfiddleThe jQuery answer was pretty useful to me. With a little refactory it fitted my needs well.

I hope it helps anybody else.Here is the smallest code snippet to test DOM ready which works across all browsers (even IE 8):See this answer.Just add this to the bottom of your HTML page...Because, HTML documents are parsed by top-bottom.It is worth looking in Rock Solid addEvent() and http://www.braksator.com/how-to-make-your-own-jquery.Here is the code in case the site goes downThis cross-browser code will call a function once the DOM is ready:Here's how it works:For example, if you do this: domReady(function(){alert();});, the following will appended to the body element:Note that this works only for user-defined functions. The following won't work: domReady(alert);How about this solution?It's always good to use JavaScript equivalents as compared to jQuery. One reason is one fewer library to depend on and they are much faster than the jQuery equivalents.One fantastic reference for jQuery equivalents is http://youmightnotneedjquery.com/.As far as your question is concerned, I took the below code from the above link :)

Only caveat is it only works with Internet Explorer 9 and later.We found a quick-and-dirty cross browser implementation of ours that may do the trick for most simple cases with a minimal implementation:The setTimeout/setInterval solutions presented here will only work in specific circumstances.The problem shows up especially in older Internet Explorer versions up to 8.The variables affecting the success of these setTimeout/setInterval solutions are:the original (native Javascript) code solving this specific issue is here:this is the code from which the jQuery team have built their implementation.I have picked the answer from PlainJS and it's working fine for me. It extends DOMContentLoaded so that it can be accepted at all the browsers.This function is the equivalent of jQuery's $(document).ready() method:However, in contrast to jQuery, this code will only run properly in modern browsers (IE > 8) and it won't in case the document is already rendered at the time this script gets inserted (e.g. via Ajax). Therefore, we need to extend this a little bit:This covers basically all possibilities and is a viable replacement for the jQuery helper.Here's what I use, it's fast and covers all bases I think; works for everything except IE<9.This seems to catch all cases:The DOMContentLoaded event is available in IE9 and everything else, so I personally think it's OK to use this. Rewrite the arrow function declaration to a regular anonymous function if you're not transpiling your code from ES2015  to ES5.If you want to wait until all assets are loaded, all images displayed etc then use window.onload instead.If you don't have to support very old browsers, here is a way to do it even when your external script is loaded with async attribute:For IE9+:If you are loading jQuery near the bottom of BODY, but are having trouble with code that writes out jQuery(<func>) or jQuery(document).ready(<func>), check out jqShim on Github.Rather than recreate its own document ready function, it simply holds onto the functions until jQuery is available then proceeds with jQuery as expected. The point of moving jQuery to the bottom of body is to speed up page load, and you can still accomplish it by inlining the jqShim.min.js in the head of your template.I ended up writing this code to make moving all the scripts in WordPress to the footer, and just this shim code now sits directly in the header.Try this:onDocReady provides a callback when the HTML dom is ready to fully  access/parse/manipulate.onWinLoad provides a callback when everything has loaded (images etc)Most vanilla JS Ready functions do NOT consider the scenario where the DOMContentLoaded handler is set after  the document is already loaded - Which means the function will never run. This can happen if you look for DOMContentLoaded within an async external script (<script async src="file.js"></script>).The code below checks for DOMContentLoaded only if the document's readyState isn't already interactive or complete.If you want to support IE aswell:I simply use:And unlike document.addEventListener("DOMContentLoaded" //etc as in the very top answer, it works as far back as IE9 -- http://caniuse.com/#search=DOMContentLoaded only indicates as recently as IE11. Interestingly I stumbled upon this setTimeout solution in 2009: Is checking for the readiness of the DOM overkill?, which probably could have been worded slightly better, as I meant "is it overkill to use various frameworks' more complicated approaches to check for the readiness of the DOM".My best explanation for why this technique works is that, when the script with such a setTimeout has been reached, the DOM is in the middle of being parsed, so execution of the code within the setTimeout gets deferred until that operation is finished.This was a good https://stackoverflow.com/a/11810957/185565 poor man's solution. One comment considered a counter to bail out in case of emergency. This is my modification.

How does data binding work in AngularJS?

Pashec

[How does data binding work in AngularJS?](https://stackoverflow.com/questions/9682092/how-does-data-binding-work-in-angularjs)

How does data binding work in the AngularJS framework?I haven't found technical details on their site. It's more or less clear how it works when data is propagated from view to model. But how does AngularJS track changes of model properties without setters and getters?I found that there are JavaScript watchers that may do this work. But they are not supported in Internet Explorer 6 and Internet Explorer 7. So how does AngularJS know that I changed for example the following and reflected this change on a view?

2012-03-13 10:16:37Z

How does data binding work in the AngularJS framework?I haven't found technical details on their site. It's more or less clear how it works when data is propagated from view to model. But how does AngularJS track changes of model properties without setters and getters?I found that there are JavaScript watchers that may do this work. But they are not supported in Internet Explorer 6 and Internet Explorer 7. So how does AngularJS know that I changed for example the following and reflected this change on a view?AngularJS remembers the value and compares it to a previous value. This is basic dirty-checking. If there is a change in value, then it fires the change event.The $apply() method, which is what you call when you are transitioning from a non-AngularJS world into an AngularJS world, calls $digest(). A digest is just plain old dirty-checking. It works on all browsers and is totally predictable.To contrast dirty-checking (AngularJS) vs change listeners (KnockoutJS and Backbone.js): While dirty-checking may seem simple, and even inefficient (I will address that later), it turns out that it is semantically correct all the time, while change listeners have lots of weird corner cases and need things like dependency tracking to make it more semantically correct. KnockoutJS dependency tracking is a clever feature for a problem which AngularJS does not have.So it may seem that we are slow, since dirty-checking is inefficient. This is where we need to look at real numbers rather than just have theoretical arguments, but first let's define some constraints.Humans are:So the real question is this: How many comparisons can you do on a browser in 50 ms? This is a hard question to answer as many factors come into play, but here is a test case: http://jsperf.com/angularjs-digest/6 which creates 10,000 watchers. On a modern browser this takes just under 6 ms. On Internet Explorer 8 it takes about 40 ms. As you can see, this is not an issue even on slow browsers these days. There is a caveat: The comparisons need to be simple to fit into the time limit... Unfortunately it is way too easy to add a slow comparison into AngularJS, so it is easy to build slow applications when you don't know what you are doing. But we hope to have an answer by providing an instrumentation module, which would show you which are the slow comparisons.It turns out that video games and GPUs use the dirty-checking approach, specifically because it is consistent. As long as they get over the monitor refresh rate (typically 50-60 Hz, or every 16.6-20 ms), any performance over that is a waste, so you're better off drawing more stuff, than getting FPS higher.Misko already gave an excellent description of how the data bindings work, but I would like to add my view on the performance issue with the data binding.As Misko stated, around 2000 bindings are where you start to see problems, but you shouldn't have more than 2000 pieces of information on a page anyway. This may be true, but not every data-binding is visible to the user. Once you start building any sort of widget or data grid with two-way binding you can easily hit 2000 bindings, without having a bad UX.Consider, for example, a combo box where you can type text to filter the available options. This sort of control could have ~150 items and still be highly usable. If it has some extra feature (for example a specific class on the currently selected option) you start to get 3-5 bindings per option. Put three of these widgets on a page (e.g. one to select a country, the other to select a city in the said country, and the third to select a hotel) and you are somewhere between 1000 and 2000 bindings already.Or consider a data-grid in a corporate web application. 50 rows per page is not unreasonable, each of which could have 10-20 columns. If you build this with ng-repeats, and/or have information in some cells which uses some bindings, you could be approaching 2000 bindings with this grid alone.I find this to be a huge problem when working with AngularJS, and the only solution I've been able to find so far is to construct widgets without using two-way binding, instead of using ngOnce, deregistering watchers and similar tricks, or construct directives which build the DOM with jQuery and DOM manipulation. I feel this defeats the purpose of using Angular in the first place.I would love to hear suggestions on other ways to handle this, but then maybe I should write my own question. I wanted to put this in a comment, but it turned out to be way too long for that...TL;DR 

The data binding can cause performance issues on complex pages.Angular maintains a simple array of watchers in the $scope objects. If you inspect any $scope you will find that it contains an array called $$watchers. Each watcher is an object that contains among other thingsThere are many different ways of defining a watcher in AngularJS. When we interact with AngularJS through the normal channels (ng-model, ng-repeat, etc) a digest cycle will be triggered by the directive.A digest cycle is a depth-first traversal of $scope and all its children. For each $scope object, we iterate over its $$watchers array and evaluate all the expressions. If the new expression value is different from the last known value, the watcher's function is called. This function might recompile part of the DOM, recompute a value on $scope, trigger an AJAX request, anything you need it to do.Every scope is traversed and every watch expression evaluated and checked against the last value.If a watcher is triggered, the app knows something has changed, and the $scope is marked as dirty.Watcher functions can change other attributes on $scope or on a parent $scope. If one $watcher function has been triggered, we can't guarantee that our other $scopes are still clean, and so we execute the entire digest cycle again.This is because AngularJS has two-way binding, so data can be passed back up the $scope tree. We may change a value on a higher $scope that has already been digested. Perhaps we change a value on the $rootScope.We continually loop through the $digest cycle until either the digest cycle comes up clean (all $watch expressions have the same value as they had in the previous cycle), or we reach the digest limit. By default, this limit is set at 10.If we reach the digest limit AngularJS will raise an error in the console:As you can see, every time something changes in an AngularJS app, AngularJS will check every single watcher in the $scope hierarchy to see how to respond. For a developer this is a massive productivity boon, as you now need to write almost no wiring code, AngularJS will just notice if a value has changed, and make the rest of the app consistent with the change.From the perspective of the machine though this is wildly inefficient and will slow our app down if we create too many watchers. Misko has quoted a figure of about 4000 watchers before your app will feel slow on older browsers.This limit is easy to reach if you ng-repeat over a large JSON array for example. You can mitigate against this using features like one-time binding to compile a template without creating watchers.Each time your user interacts with your app, every single watcher in your app will be evaluated at least once. A big part of optimising an AngularJS app is reducing the number of watchers in your $scope tree. One easy way to do this is with one time binding.If you have data which will rarely change, you can bind it only once using the :: syntax, like so:orThe binding will only be triggered when the containing template is rendered and the data loaded into $scope.This is especially important when you have an ng-repeat with many items.This is my basic understanding. It may well be wrong!In normal development, data-binding syntax in the HTML tells the AngularJS compiler to create the watches for you and controller methods are run inside $apply already. So to the application developer it is all transparent.I wondered this myself for a while. Without setters how does AngularJS notice changes to the $scope object? Does it poll them?What it actually does is this: Any "normal" place you modify the model was already called from the guts of AngularJS, so it automatically calls $apply for you after your code runs. Say your controller has a method that's hooked up to ng-click on some element. Because AngularJS wires the calling of that method together for you, it has a chance to do an $apply in the appropriate place. Likewise, for expressions that appear right in the views, those are executed by AngularJS so it does the $apply.When the documentation talks about having to call $apply manually for code outside of AngularJS, it's talking about code which, when run, doesn't stem from AngularJS itself in the call stack.Explaining with Pictures : The reference in the scope is not exactly the reference   in the template. When you data-bind two objects, you need a third one that listen to the first and modify the other.Here, when you modify the <input>, you touch the data-ref3. And the classic data-bind mecanism will change data-ref4. So how the other {{data}} expressions will move ?Angular maintains a oldValue and newValue of every binding. And after every Angular event, the famous $digest() loop will check the WatchList to see if something changed. These Angular events are ng-click, ng-change, $http completed ...  The $digest() will loop as long as any oldValue differs from the newValue.In the previous picture, it will notice that data-ref1 and data-ref2 has changed.It's a little like the Egg and Chicken. You never know who starts, but hopefully it works most of the time as expected. The other point is that you can understand easily the impact deep of a simple binding on the memory and the CPU. Hopefully Desktops are fat enough to handle this. Mobile phones are not that strong.Obviously there is no periodic checking of Scope whether there is any change in the Objects attached to it. Not all the objects attached to scope are watched . Scope prototypically maintains a $$watchers . Scope only iterates through this $$watchers when $digest is called . Angular adds a watcher to the $$watchers for each of these $watch function takes in three parameters:There is an interesting thing in Angular called Digest Cycle. The $digest cycle starts as a result of a call to $scope.$digest(). Assume that you change a $scope model in a handler function through the ng-click directive. In that case AngularJS automatically triggers a $digest cycle by calling $digest().In addition to ng-click, there are several other built-in directives/services that let you change models (e.g. ng-model, $timeout, etc) and automatically trigger a $digest cycle.  The rough implementation of $digest looks like this.If we use JavaScript’s setTimeout() function to update a scope model, Angular has no way of knowing what you might change. In this case it’s our responsibility to call $apply() manually, which triggers a $digest cycle. Similarly, if you have a directive that sets up a DOM event listener and changes some models inside the handler function, you need to call $apply() to ensure the changes take effect. The big idea of $apply is that we can execute some code that isn't aware of Angular, that code may still change things on the scope. If we wrap that code in $apply , it will take care of calling $digest(). Rough implementation of $apply().AngularJS handle data-binding mechanism with the help of three powerful functions :      $watch(),$digest()and $apply(). Most of the time AngularJS will call the $scope.$watch() and $scope.$digest(), but

in some cases you may have to call these functions manually to update with new values.$watch() :- $digest() - $apply() - It happened that I needed to link a data model of a person with a form, what I did was a direct mapping of the data with the form.For example if the model had something like:The control input of the form:That way if you modify the value of the object controller, this will be reflected automatically in the view.An example where I passed the model is updated from server data is when you ask for a zip code and zip code based on written loads a list of colonies and cities associated with that view, and by default set the first value with the user. And this I worked very well, what does happen, is that angularJS sometimes takes a few seconds to refresh the model, to do this you can put a spinner while displaying the data.Data binding lets you treat the model as the single-source-of-truth in your application. The view is a projection of the model at all times. If the model is changed, the view reflects the change and vice versa.Here is an example of data binding with AngularJS, using an input field. I will explain laterHTML CodeAngularJS CodeAs you can see in the example above, AngularJS uses ng-model to listen and watch what happens on HTML elements, especially on input fields. When something happens, do something. In our case, ng-model is bind to our view, using the mustache notation {{}}. Whatever is typed inside the input field is displayed on the screen instantly. And that's the beauty of data binding, using AngularJS in its simplest form.Hope this helps.See a working example here on

CodepenAngularJs supports Two way data-binding.

Means you can access data View -> Controller & Controller -> ViewFor Ex.1)O/PYou can bind data in ng-model Like:-

2)Here in above example whatever input user will give, It will be visible in <div> tag.If want to bind input from html to controller:-

3)Here if you want to use input name in the controller then,ng-model binds our view and render it in expression {{ }}.

ng-model is the data which is shown to the user in the view and with which the user interacts.

So it is easy to bind data in AngularJs.Angular.js creates a watcher for every model we create in view. Whenever a model is changed, an "ng-dirty" class is appeneded to the model, so the watcher will observe all models which have the class "ng-dirty" & update their values in the controller & vice versa.data binding:What is data binding?Whenever the user changes the data in the view , there occurs an update of that change in the scope model, and viceversa.How is it possible?Short answer :

With the help of digest cycle.Description :

Angular js sets the watcher on the scope model, which fires the listener function if there is a change in the model.//Dom update code with new value});So When and How is the watcher function called?Watcher function is called as part of the digest cycle.Digest cycle is called automatically triggered as part of angular js built in directives/services like ng-model , ng-bind , $timeout, ng-click and others.. that let you trigger the digest cycle.Digest cycle function:i.e$rootScope.$apply()Note:

$apply() is equal to $rootScope.$digest() this  means the dirty checking starts right from the root or top or the parent scope down to all the child $scopes in the angular js application.The above features work in the browsers IE for the mentioned versions also just by making sure your application is angular js application which means you are using the angularjs framework script file referenced in the script tag.Thank you.

JavaScript equivalent to printf/String.Format

fearphage

[JavaScript equivalent to printf/String.Format](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)

I'm looking for a good JavaScript equivalent of the C/PHP printf() or for C#/Java programmers, String.Format() (IFormatProvider for .NET).My basic requirement is a thousand separator format for numbers for now, but something that handles lots of combinations (including dates) would be good.I realize Microsoft's Ajax library provides a version of String.Format(), but we don't want the entire overhead of that framework.

2011-01-12 20:02:34Z

I'm looking for a good JavaScript equivalent of the C/PHP printf() or for C#/Java programmers, String.Format() (IFormatProvider for .NET).My basic requirement is a thousand separator format for numbers for now, but something that handles lots of combinations (including dates) would be good.I realize Microsoft's Ajax library provides a version of String.Format(), but we don't want the entire overhead of that framework.From ES6 on you could use template strings:See Kim's answer below for details. Try sprintf() for JavaScript.If you really want to do a simple format method on your own, don’t do the replacements successively but do them simultaneously.Because most of the other proposals that are mentioned fail when a replace string of previous replacement does also contain a format sequence like this:Normally you would expect the output to be {1}{0} but the actual output is {1}{1}. So do a simultaneously replacement instead like in fearphage’s suggestion.Building on the previously suggested solutions:"{0} is dead, but {1} is alive! {0} {2}".format("ASP", "ASP.NET")outputsIf you prefer not to modify String's prototype:Gives you the much more familiar:String.format('{0} is dead, but {1} is alive! {0} {2}', 'ASP', 'ASP.NET');with the same result:It's funny because Stack Overflow actually has their own formatting function for the String prototype called formatUnicorn. Try it! Go into the console and type something like:You get this output:Hello, Gabriel, are you feeling OK?You can use objects, arrays, and strings as arguments! I got its code and reworked it to produce a new version of String.prototype.format:Note the clever Array.prototype.slice.call(arguments) call -- that means if you throw in arguments that are strings or numbers, not a single JSON-style object, you get C#'s String.Format behavior almost exactly.That's because Array's slice will force whatever's in arguments into an Array, whether it was originally or not, and the key will be the index (0, 1, 2...) of each array element coerced into a string (eg, "0", so "\\{0\\}" for your first regexp pattern).Neat.I got to this question page hoping to find how to format numbers in JavaScript, without introducing yet another library.  Here's what I've found:The equivalent of sprintf("%.2f", num) in JavaScript seems to be num.toFixed(2), which formats num to 2 decimal places, with rounding (but see @ars265's comment about Math.round below).The equivalent of sprintf("%.2e", num) is num.toExponential(2).  To print numbers in base B, try num.toString(B).  JavaScript supports automatic conversion to and from bases 2 through 36 (in addition, some browsers have limited support for base64 encoding).Quick tutorial on JS number formattingMozilla reference page for toFixed() (with links to toPrecision(), toExponential(), toLocaleString(), ...)From ES6 on you could use template strings:Be aware that template strings are surrounded by backticks ` instead of (single) quotes.For further information:https://developers.google.com/web/updates/2015/01/ES6-Template-Stringshttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_stringsNote:

Check the mozilla-site to find a list of supported browsers.jsxt, ZippoThis option fits better.With this option I can replace strings like these:With your code the second {0} wouldn't be replaced. ;)I use this simple function:That's very similar to string.format:For Node.js users there is util.format which has printf-like functionality:I'm surprised no one used reduce, this is a native concise and powerful JavaScript function.How it works:Here's a minimal implementation of sprintf in JavaScript: it only does "%s" and "%d", but I have left space for it to be extended. It is useless to the OP, but other people who stumble across this thread coming from Google might benefit from it.Example:In contrast with similar solutions in previous replies, this one does all substitutions in one go, so it will not replace parts of previously replaced values.JavaScript programmers can use String.prototype.sprintf at https://github.com/ildar-shaimordanov/jsxt/blob/master/js/String.js. Below is example:Adding to zippoxer's answer, I use this function:I also have a non-prototype version which I use more often for its Java-like syntax:All the cool new stuff in ES 2015 makes this a lot easier:I figured that since this, like the older ones, doesn't actually parse the letters, it might as well just use a single token %%. This has the benefit of being obvious and not making it difficult to use a single %. However, if you need %% for some reason, you would need to replace it with itself:+1 Zippo with the exception that the function body needs to be as below or otherwise it appends the current string on every iteration:I want to share my solution for the 'problem'. I haven't re-invented the wheel but tries to find a solution based on what JavaScript already does. The advantage is, that you get all implicit conversions for free. Setting the prototype property $ of String gives a very nice and compact syntax (see examples below). It is maybe not the most efficient way, but in most cases dealing with output it does not have to be super optimized.Here are a few examples:I'll add my own discoveries which I've found since I asked:Sadly it seems sprintf doesn't handle thousand separator formatting like .NET's string format.I use a small library called String.format for JavaScript which supports most of the format string capabilities (including format of numbers and dates), and uses the .NET syntax. The script itself is smaller than 4 kB, so it doesn't create much of overhead.Very elegant:Credit goes to (broken link) https://gist.github.com/0i0/1519811If you are looking to handle the thousands separator, you should really use toLocaleString() from the JavaScript Number class since it will format the string for the user's region.The JavaScript Date class can format localized dates and times.I use this one:Then I call it:I have a solution very close to Peter's, but it deals with number and object case.Maybe it could be even better to deal with the all deeps cases, but for my needs this is just fine.PS: This function is very cool if you are using translations in templates frameworks like AngularJS:Where the en.json is something likeThe PHPJS project has written JavaScript implementations for many of PHP's functions. Since PHP's sprintf() function is basically the same as C's printf(), their JavaScript implementation of it should satisfy your needs.One very slightly different version, the one I prefer (this one uses {xxx} tokens rather than {0} numbered arguments, this is much more self-documenting and suits localization much better):A variation would be:that calls an l() localization function first.There is "sprintf" for JavaScript which you can find at http://www.webtoolkit.info/javascript-sprintf.html.For those who like Node.JS and its util.format feature, I've just extracted it out into its vanilla JavaScript form (with only functions that util.format uses):Harvested from: https://github.com/joyent/node/blob/master/lib/util.jsFor basic formatting: I have a slightly longer formatter for JavaScript here...  You can do formatting several ways:Also, if you have say a ObjectBase.prototype.format (such as with DateJS) it will use that.Examples...I've also aliased with .asFormat and have some detection in place in case there's already a string.format (such as with MS Ajax Toolkit (I hate that library).Just in case someone needs a function to prevent polluting global scope, here is the function that does the same:We can use a simple lightweight String.Format string operation library for Typescript.String.Format():String Format for specifiers:String Format for Objects including specifiers:I did not see the String.format variant:For use with jQuery.ajax() success functions.  Pass only a single argument and string replace with the properties of that object as {propertyName}:Example:

JavaScript chop/slice/trim off last character in string

Phill Pafford

[JavaScript chop/slice/trim off last character in string](https://stackoverflow.com/questions/952924/javascript-chop-slice-trim-off-last-character-in-string)

I have a string, 12345.00, and I would like it to return 12345.0.I have looked at trim, but it looks like it is only trimming whitespace and slice which I don't see how this would work. Any suggestions?

2009-06-04 20:31:53Z

I have a string, 12345.00, and I would like it to return 12345.0.I have looked at trim, but it looks like it is only trimming whitespace and slice which I don't see how this would work. Any suggestions?You can use the substring function:This is the accepted answer, but as per the conversations below, the slice syntax is much clearer:You can use slice! You just have to make sure you know how to use it. Positive #s are relative to the beginning, negative numbers are relative to the end.You can use the substring method of JavaScript string objects:It unconditionally removes the last four characters from string s.However, if you want to conditionally remove the last four characters, only if they are exactly _bar:The easiest method is to use the slice method of the string, which allows negative positions (corresponding to offsets from the end of the string):If you needed something more general to remove everything after (and including) the last underscore, you could do the following (so long as s is guaranteed to contain at least one underscore):For a number like your example, I would recommend doing this over substring:Do note that this will actually round the number, though, which I would imagine is desired but maybe not:Using JavaScript's slice function:This could be used to remove '_bar' at end of a string, of any length.A regular expression is what you are looking for:How about:Use regex:Try this:Here is an alternative that i don't think i've seen in the other answers, just for fun.Not as legible or simple as slice or substring but does allow you to play with the string using some nice array methods, so worth knowing.If you want to do generic rounding of floats, instead of just trimming the last character:EDIT: Seems like there exists a built in function for this, as Paolo points out. That solution is obviously much cleaner than mine. Use parseFloat followed by toFixed The shortest way:https://jsfiddle.net/invos/w3zeqv6v/https://stackoverflow.com/questions/34817546/javascript-how-to-delete-last-two-characters-in-a-string"11.01 °C".slice(0,-2).trim()In cases where you want to remove something that is close to the end of a string (in case of variable sized strings) you can combine slice() and substr().I had a string with markup, dynamically built, with a list of anchor tags separated by comma. The string was something like:To remove the last comma I did the following:Sorry for my graphomany but post was tagged 'jquery' earlier. So, you can't use slice() inside jQuery because slice() is jQuery method for operations with DOM elements, not substrings ... 

In other words answer @Jon Erickson suggest really perfect solution.However, your method will works out of jQuery function, inside simple Javascript.

Need to say due to last discussion in comments, that jQuery is very much more often renewable extension of JS than his own parent most known ECMAScript.Here also exist two methods:as our:string.substring(from,to) as plus if 'to' index nulled returns the rest of string. so:

string.substring(from) positive or negative ...and some other - substr() - which provide range of substring and 'length' can be positive only:

string.substr(start,length)Also some maintainers suggest that last method string.substr(start,length) do not works or work with error for MSIE.Try this:You can also try the live working example on http://jsfiddle.net/informativejavascript/F7WTn/87/.Use substring to get everything to the left of _bar. But first you have to get the instr of _bar in the string:3 is that start and 7 is the length.

What is the 'new' keyword in JavaScript?

Alon Gubkin

[What is the 'new' keyword in JavaScript?](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)

The new keyword in JavaScript can be quite confusing when it is first encountered, as people tend to think that JavaScript is not an object-oriented programming language.

2009-10-29 21:32:45Z

The new keyword in JavaScript can be quite confusing when it is first encountered, as people tend to think that JavaScript is not an object-oriented programming language.It does 5 things:Note: constructor function refers to the function after the new keyword, as in Once this is done, if an undefined property of the new object is requested, the script will check the object's [[prototype]] object for the property instead. This is how you can get something similar to traditional class inheritance in JavaScript. The most difficult part about this is point number 2.  Every object (including functions) has this internal property called [[prototype]]. It can only be set at object creation time, either with new, with Object.create, or based on the literal (functions default to Function.prototype, numbers to Number.prototype, etc.). It can only be read with Object.getPrototypeOf(someObject). There is no other way to set or read this value.Functions, in addition to the hidden [[prototype]] property, also have a property called prototype, and it is this that you can access, and modify, to provide inherited properties and methods for the objects you make.Here is an example:It's like class inheritance because now, any objects you make using new ObjMaker() will also appear to have inherited the 'b' property.If you want something like a subclass, then you do this:I read a ton of rubbish on this subject before finally finding this page, where this is explained very well with nice diagrams.Suppose you have this function:If you call this as a standalone function like so:Executing this function will add two properties to the window object (A and B). It adds it to the window because window is the object that called the function when you execute it like that, and this in a function is the object that called the function. In Javascript at least. Now, call it like this with new:What happens when you add new to a function call is that a new object is created (just var bar = new Object()) and that the this within the function points to the new Object you just created, instead of to the object that called the function. So bar is now an object with the properties A and B. Any function can be a constructor, it just doesn't always make sense. In addition to Daniel Howard's answer, here is what new does (or at least seems to do):Whileis equivalent totry out the following code in the browser console.Now you can read the community wiki answer :)It's used exactly for that. You define a function constructor like so:However the extra benefit that ECMAScript has is you can extend with the .prototype property, so we can do something like...All objects created from this constructor will now have a getName because of the prototype chain that they have access to.JavaScript is an object-oriented programming language and it's used exactly for creating instances. It's prototype-based, rather than class-based, but that does not mean that it is not object-oriented.Javascript is a dynamic programming language which supports the object oriented programming paradigm, and it use used for creating new instances of object.Classes are not necessary for objects - Javascript is a prototype based language.There are already some very great answers but I'm posting a new one to emphasize my observation on case III below about what happens when you have an explicit return statement in a function which you are newing up. Have a look at below cases:Case I:Above is a plain case of calling the anonymous function pointed by Foo. When you call this function it returns undefined. Since there is no explicit return statement so JavaScript interpreter forcefully inserts a return undefined; statement in the end of the function. Here window is the invocation object (contextual this) which gets new A and B properties.Case II:Here JavaScript interpreter seeing the new keyword creates a new object which acts as the invocation object (contextual this) of anonymous function pointed by Foo. In this case A and B become properties on the newly created object (in place of window object). Since you don't have any explicit return statement so JavaScript interpreter forcefully inserts a return statement to return the new object created due to usage of new keyword.Case III:Here again JavaScript interpreter seeing the new keyword creates a new object which acts as the invocation object (contextual this) of anonymous function pointed by Foo. Again, A and B become properties on the newly created object. But this time you have an explicit return statement so JavaScript interpreter will not do anything of its own.The thing to note in case III is that the object being created due to new keyword got lost from your radar. bar is actually pointing to a completely different object which is not the one which JavaScript interpreter created due to new keyword.Quoting David Flanagan from JavaScripit: The Definitive Guide (6th Edition),Ch. 4, Page # 62:---Additional Info---The functions used in code snippet of above cases have special names in JS world as below:Case I and II - Constructor functionCase III - Factory function. Factory functions shouldn't be used with new keyword which I've done to explain the concept in current thread.You can read about difference between them in this thread.sometimes code is easier than words:for me, as long as I not prototype, I use style of func2 as it gives me a bit more flexibility inside and outside the function.The new keyword changes the context under which the function is being run and returns a pointer to that context. When you don't use the new keyword, the context under which function Vehicle() runs is the same context from which you are calling the Vehicle function. The this keyword will refer to the same context. When you use new Vehicle(), a new context is created so the keyword this inside the function refers to the new context. What you get in return is the newly created context.The new keyword is for creating new object instances. And yes, javascript is a dynamic programming language, which supports the object oriented programming paradigm. The convention about the object naming is, always use capital letter for objects that are supposed to be instantiated by the new keyword.The new keyword is used in javascript to create a object from a constructor function. The new keyword has to be placed before the constructor function call and will do the following things:What exactly happens:The new keyword creates instances of objects using functions as a constructor. For instance:Instances inherit from the prototype of the constructor function. So given the example above...Well JavaScript per si can differ greatly from platform to platform as it is always an implementation of the original specification EcmaScript.In any case, independently of the implementation all JavaScript implementations that follow the EcmaScript specification right, will give you an Object Oriented Language. According to the ES standard:So now that we have agreed that JavaScript is an implementation of EcmaScript and therefore it is an object-oriented language. The definition of the new operation in any Object-oriented language, says that such keyword is used to create an object instance from a class of a certain type (including anonymous types, in cases like C#).In EcmaScript we don't use classes, as you can read from the specs:

JavaScript check if variable exists (is defined/initialized)

Samuel Liew

[JavaScript check if variable exists (is defined/initialized)](https://stackoverflow.com/questions/5113374/javascript-check-if-variable-exists-is-defined-initialized)

Which method of checking if a variable has been initialized is better/correct?

(Assuming the variable could hold anything (string, int, object, function, etc.))oror

2011-02-25 03:44:47Z

Which method of checking if a variable has been initialized is better/correct?

(Assuming the variable could hold anything (string, int, object, function, etc.))ororYou want the typeof operator. Specifically:The typeof operator will check if the variable is really undefined.The typeof operator, unlike the other operators, doesn't throw a ReferenceError exception when used with an undeclared variable.However, do note that typeof null will return "object". We have to be careful to avoid the mistake of initializing a variable to null. To be safe, this is what we could use instead:For more info on using strict comparison === instead of simple equality ==, see:Which equals operator (== vs ===) should be used in JavaScript comparisons?In many cases, using:will do the job for you!... this will check these below cases:So it will cover off kind of all cases, but there are always weird cases which we'd like to cover as well, for example, a string with spaces, like this '    ' one, this will be defined in javascript as it has spaces inside string... for example in this case you add one more check using trim(), like:Also, these checks are for values only, as objects and arrays work differently in Javascript, empty array [] and empty object {} are always true. I create the image below to show a quick brief of the answer:In JavaScript, a variable can be defined, but hold the value undefined, so the most common answer is not technically correct, and instead performs the following:That may suffice for your purposes.  The following test has simpler semantics, which makes it easier to precisely describe your code's behavior and understand it yourself (if you care about such things):This, of course, assumes you are running in a browser (where window is a name for the global object).  But if you're mucking around with globals like this you're probably in a browser.  Subjectively, using 'name' in window is stylistically consistent with using window.name to refer to globals.  Accessing globals as properties of window rather than as variables allows you to minimize the number of undeclared variables you reference in your code (for the benefit of linting), and avoids the possibility of your global being shadowed by a local variable.  Also, if globals make your skin crawl you might feel more comfortable touching them only with this relatively long stick.In the majority of cases you would use:Unlike a simple if (elem), it allows 0, false, NaN and '', but rejects null or undefined, making it a good, general test for the presence of an argument, or property of an object.The other checks are not incorrect either, they just have different uses:Also useful is a strict comparison against undefined:However, because the global undefined can be overridden with another value, it is best to declare the variable undefined in the current scope before using it:Or:A secondary advantage of this method is that JS minifiers can reduce the undefined variable to a single character, saving you a few bytes every time.An alternative to the plethora of typeof answers;Global variables declared with a var varname = value; statement in the global scopeAs such, the hasOwnProperty() method, whicha var of "varname" has been declared globally i.e. is a property of the window.What's great about hasOwnProperty() is that in calling it, we don't use a variable that might as yet be undeclared - which of course is half the problem in the first place.Although not always the perfect or ideal solution, in certain circumstances, it's just the job!The above is true when using var to define a variable, as opposed to let which:For completeness: const constants are, by definition, not actually variable (although their content can be); more relevantly:Since let variables or const constants are never properties of any object which has inherited the hasOwnProperty() method, it cannot be used to check for their existence.Regarding the availability and use of hasOwnProperty():This is a pretty bulletproof solution for testing if a variable exists and has been initialized :It is most commonly used in combination with a ternary operator to set a default in case a certain variable has not been initialized :Unfortunately, you cannot simply encapsulate your check in a function.You might think of doing something like this :However, this will produce a reference error if you're calling eg. isset(foo) and variable foo has not been defined, because you cannot pass along a non-existing variable to a function : While our isset function cannot be used to test whether a variable exists or not (for reasons explained hereabove), it does allow us to test whether the parameters of a function are undefined :Even though no value for y is passed along to function test, our isset function works perfectly in this context, because y is known in function test as an undefined value.There is another short hand way to check this, when you perform simple assignments and related checks. Simply use Conditional (Ternary) Operator.Also this will be helpful, when you try to declare the Global variable with instance assignment of the reference variable.If you wanted to check variable shouldn't be undefined or null. Then perform below check.When the variable is declared, and if you want to check the value, this is even Simple: and it would perform undefined and null checks together.It depends if you just care that the variable has been defined or if you want it to have a meaningful value.Checking if the type is undefined will check if the variable has been defined yet.=== null or !== null will only check if the value of the variable is exactly null.== null or != null will check if the value is undefined or null.if(value) will check if the variable is undefined, null, 0, or an empty string.Short way to test a variable is not declared (not undefined) isI found it useful for detecting script running outside a browser (not having declared window variable).The highest answer is correct, use typeof.However, what I wanted to point out was that in JavaScript undefined is mutable (for some ungodly reason). So simply doing a check for varName !== undefined has the potential to not always return as you expect it to, because other libs could have changed undefined. A few answers (@skalee's, for one), seem to prefer not using typeof, and that could get one into trouble.The "old" way to handle this was declaring undefined as a var to offset any potential muting/over-riding of undefined. However, the best way is still to use typeof because it will ignore any overriding of undefined from other code. Especially if you are writing code for use in the wild where who knows what else could be running on the page...Or betterWorks in all browsersTo contribute to the debate, if I know the variable should be a string or an object I always prefer if (!variable), so checking if its falsy. This can bring to more clean code so that, for example:..could be reduced to:It is difficult to distinguish between undefined and null. Null is a value you can assign to a variable when you want to indicate that the variable has no particular value. Undefined

is a special value which will be the default value of unassigned variables.Null is a value in JavaScript and typeof null returns "object"Therefore, accepted answer will not work if you pass null values. If you pass null values, you need to add an extra check for null values:The most robust 'is it defined' check is with typeofIf you are just checking for a defined variable to assign a default, for an easy to read one liner

you can often do this:It's often fine to use, see: Idiomatic way to set default value in javascriptThere is also this one liner using the typeof keyword:you can use the typeof operator.For example,Above code snippet will return the output likeThese answers (aside from the Fred Gandt solution ) are all either incorrect or incomplete. Suppose I need my variableName; to carry an undefined value, and therefore it has been declared in a manner such as var variableName; which means it's already initialized; - How do I check if it's already declared?Or even better - how do I immediately check if "Book1.chapter22.paragraph37" exists with a single call, but not rise a reference error?We do it by using the most powerful JasvaScript operator, the in operator.:In times of AJAX peaking popularity I've written a method (later named) isNS() which is capable of determining if the namespace exists including deep tests for property names such as "Book1.chapter22.paragraph37" and a lot more.But since it has been previously published and because of its great importance it deserves to be published in a separate thread I will not post it here but will provide keywords (javascript + isNS ) which will help you locate the source code, backed with all the necessary explanations.In the particular situation outlined in the question,is identical to I prefer the latter since it's shorter.Please note that we look up for console only in global scope (which is a window object in all browsers).  In this particular situation it's desirable.  We don't want console defined elsewhere.@BrianKelley in his great answer explains technical details.  I've only added lacking conclusion and digested it into something easier to read.To check if a variable has been declared/set I did this dirty trick.I haven't found a way to extract the code to a function, even with eval.I use two different ways depending on the object.Sometimes I do not want to evaluate an empty string as falsey, so then I use this caseIf you need the opposite, then in the first instance !variable becomes !!variable, and in the invalid function === become != and the function names changes to notInvalid.It depends on the situation. If you're checking for something that may or may not have been defined globally outside your code (like jQuery perhaps) you want:(No need for strict equality there, typeof always returns a string.) But if you have arguments to a function that may or may not have been passed, they'll always be defined, but null if omitted.My preference is typeof(elem) != 'undefined' && elem != null. However you choose, consider putting the check in a function like soIf you don't know the variable is declared then continue with typeof (x) != 'undefined' && x != null;Where you know the variable is declared but may not be existy, you could use The variable you are checking may be a nested property sometimes. You can use prop || {} to go down the line checking existance to the property in question:After each property use (...' || {}').nextProp so that a missing property won't throw an error.Or you could use existy like existy(o) && existy(o.p) && existy(o.p.q) && doSomething(o.p.q)I'm surprised this wasn't mentioned yet... here are a couple of additional variations using this['var_name']the benefit of using this method that it can be used before a variable is defined.

Copy array by value

Dan

[Copy array by value](https://stackoverflow.com/questions/7486085/copy-array-by-value)

When copying an array in JavaScript to another array:I realized that arr2 refers to the same array as arr1, rather than a new, independent array. How can I copy the array to get two independent arrays?

2011-09-20 13:38:08Z

When copying an array in JavaScript to another array:I realized that arr2 refers to the same array as arr1, rather than a new, independent array. How can I copy the array to get two independent arrays?Use this:Basically, the slice() operation clones the array and returns a reference to a new array.  For references, strings and numbers (and not the actual object), slice() copies object references into the new array. Both the original and new array refer to the same object. If a referenced object changes, the changes are visible to both the new and original arrays.Primitives such as strings and numbers are immutable, so changes to the string or number are impossible. In Javascript, deep-copy techniques depend on the elements in an array. Let's start there.  Elements can be: literal values, literal structures, or prototypes.From these elements we can create three types of arrays.Based on the types of elements in the array, we can use various techniques to deep copy.Question Answer  Because arr1 is an array of literal values (boolean, number, or string), you can use any deep copy technique discussed above, where the spread operator ... has the highest performance.You can use array spreads ... to copy arrays.const itemsCopy = [...items];Also if want to create a new array with the existing one being part of it:Array spreads are now supported in all major browsers but if you need older support use typescript or babel and compile to ES5.More info on spreadsNo jQuery needed...  Working ExampleThis copys the array from the starting position 0 through the end of the array.It is important to note that it will work as expected for primitive types (string, number, etc.), and to also explain the expected behavior for reference types...If you have an array of Reference types, say of type Object.  The array will be copied, but both of the arrays will contain references to the same Object's.  So in this case it would seem like the array is copied by reference even though the array is actually copied.An alternative to slice is concat, which can be used in 2 ways. The first of these is perhaps more readable as the intended behaviour is very clear:The second method is:Cohen (in the comments) pointed out that this latter method has better performance.The way this works is that the concat method creates a new array consisting of the elements in the object on which it is called followed by the elements of any arrays passed to it as arguments. So when no arguments are passed, it simply copies the array.Lee Penkman, also in the comments, points out that if there's a chance array1 is undefined, you can return an empty array as follows:Or, for the second method:Note that you can also do this with slice: var array2 = (array1 || []).slice();.This is how I've done it after trying many approaches:This will create a new deep copy not related to the first one (not a shallow copy).Also this obviously will not clone events and functions, but the good thing you can do it in one line, and it can be used for any kind of object (arrays, strings, numbers, objects ...)Some of mentioned methods work well when working with simple data types like number or string, but when the array contains other objects these methods fail. When we try to pass any object from one array to another it is passed as a reference, not the object.Add the following code in your JavaScript file:And simply useIt will work.From ES2015,I personally think Array.from is a more readable solution. By the way, just beware of its browser support.Important!Most of answers here works for particular cases.If you don't care about deep/nested objects and props use (ES6):let clonedArray = [...array]but if you want to do deep clone use this instead:let cloneArray = JSON.parse(JSON.stringify(array))For lodash users:let clonedArray = _.clone(array) documentationandlet clonedArray = _.cloneDeep(array) documentationIf you are in an environment of ECMAScript 6, using the Spread Operator you could do it this way:Adding to the solution of array.slice(); be aware that if you have multidimensional array sub-arrays will be copied by references.

What you can do is to loop and slice() each sub-array individually  same things goes to array of objects, they will be copied by reference, you have to copy them manuallySo how do we copy this arr? Passing one varible to another on Compound values such as Object/Array behave difrently. Using asign operator on copand values we pass reference to an object. This is why the value of both arrays are changing when removing/adding arr elements.When you assign a new value to the variable, you are changing the reference itself and it doesn’t affect the original Object/Array. read moreAs we know in Javascript arrays and objects are by reference, but what ways we can do copy the array without changing the original array later one? Here are few ways to do it:Imagine we have this array in your code:1) Looping through the array in a function and return a new array, like this:2) Using slice method, slice is for slicing part of the array, it will slice some part of your array without touching the original, in the slice, if don't specify the start and end of the array, it will slice the whole array and basically make a full copy of the array, so we can easily say:3) Also contact method, this is for merging two array, but we can just specify one of arrays and then this basically make a copy of the values in the new contacted array:4) Also stringify and parse method, it's not recommended, but can be an easy way to copy Array and Objects:5) Array.from method, this is not widely supported, before use check the support in different browsers:6) ECMA6 way, also not fully supported, but babelJs can help you if you want to transpile:Now you can do any one of the following to make a copy of an array.ORORORORNow, if i change a,Then, a is [1,2,3,5] but b is still [1,2,3] as it has different reference.But i think, in all the methods above Array.from is better and made mainly to copy an array.In my particular case I needed to ensure the array remained intact so this worked for me:Make copy of multidimensional array/object:Thanks to James Padolsey for this function.Source: HereI would personally prefer this way:Dan, no need to use fancy tricks. All you need to do is make copy of arr1 by doing this.Now arr1 and arr2 are two different array variables stored in separate stacks.

Check this out on jsfiddle.When we want to copy an array using the assignment operator ( = ) it doesn't create a copy it merely copies the pointer/reference to the array. For example:Often when we transform data we want to keep our initial datastructure (e.g. Array) intact. We do this by making a exact copy of our array so this one can be transformed while the initial one stays intact.When arrays are nested the values are copied by reference. Here is an example of how this could lead to issues:So don't use these methods when there are objects or arrays inside your array you want to copy. i.e. Use these methods on arrays of primitives only. If you do want to deepclone a javascript array use JSON.parse in conjunction with JSON.stringify, like this:So which one do we choose for optimal performance. It turns out that the most verbose method, the for loop has the highest performance. Use the for loop for really CPU intensive copying (large/many arrays). After that the .slice() method also has decent performance and is also less verbose and easier for the programmer to implement. I suggest to use .slice() for your everyday copying of arrays which aren't very CPU intensive. Also avoid using the JSON.parse(JSON.stringify(arr)) (lots of overhead) if no deep clone is required and performance is an issue.Source performance testIf your array contains elements of the primitive data type such as int, char, or string etc then you can user one of those methods which returns a copy of the original array such as .slice() or .map() or spread operator(thanks to ES6).ororBUT if your array contains complex elements such as objects(or arrays) or more nested objects, then, you will have to make sure that you are making a copy of all the elements from the top level to the last level else reference of the inner objects will be used and that means changing values in object_elements in new_array will still affect the old_array. You can call this method of copying at each level as making a DEEP COPY

of the old_array.For deep copying, you can use the above-mentioned methods for primitive data types at each level depending upon the type of data or you can use this costly method(mentioned below) for making a deep copy without doing much work.There are a lot of other methods out there which you can use depending on your requirements. I have mentioned only some of those for giving a general idea of what happens when we try to copy an array into the other by value.If you want to make a new copy of an object or array, you must explicitly copy the properties of the object or the elements of the array, for example:You can search for more information on Google about immutable primitive values and mutable object references.Using jQuery deep copy could be made as following:You can also use ES6 spread operator to copy ArrayHere are few more way to copy:You could use ES6 with spread Opeartor, its simpler.There are limitations..check  docs Spread syntax @ mozillaQuick Examples:Here's a variant:There's the newly introduced Array.from, but unfortunately, as of the time of this writing it's only supported on recent Firefox versions (32 and higher). It can be simply used as follows:Reference: HereOr Array.prototype.map may be used with an identity function:Reference: HereFor ES6 array containing objects

How to print a number with commas as thousands separators in JavaScript

Elias Zamaria

[How to print a number with commas as thousands separators in JavaScript](https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript)

I am trying to print an integer in JavaScript with commas as thousands separators. For example, I want to show the number 1234567 as "1,234,567". How would I go about doing this? Here is how I am doing it:Is there a simpler or more elegant way to do it? It would be nice if it works with floats also, but that is not necessary. It does not need to be locale-specific to decide between periods and commas. 

2010-05-24 23:42:31Z

I am trying to print an integer in JavaScript with commas as thousands separators. For example, I want to show the number 1234567 as "1,234,567". How would I go about doing this? Here is how I am doing it:Is there a simpler or more elegant way to do it? It would be nice if it works with floats also, but that is not necessary. It does not need to be locale-specific to decide between periods and commas. I used the idea from Kerry's answer, but simplified it since I was just looking for something simple for my specific purpose. Here is what I did:The regex uses 2 lookahead assertions: For example, if you pass it 123456789.01, the positive assertion will match every spot to the left of the 7 (since 789 is a multiple of 3 digits, 678 is a multiple of 3 digits, 567, etc.). The negative assertion checks that the multiple of 3 digits does not have any digits after it. 789 has a period after it so it is exactly a multiple of 3 digits, so a comma goes there. 678 is a multiple of 3 digits but it has a 9 after it, so those 3 digits are part of a group of 4, and a comma does not go there. Similarly for 567. 456789 is 6 digits, which is a multiple of 3, so a comma goes before that. 345678 is a multiple of 3, but it has a 9 after it, so no comma goes there. And so on. The \B keeps the regex from putting a comma at the beginning of the string.@neu-rah mentioned that this function adds commas in undesirable places if there are more than 3 digits after the decimal point. If this is a problem, you can use this function:@t.j.crowder pointed out that now that JavaScript has lookbehind (support info), it can be solved in the regular expression itself:(?<!\.\d*) is a negative lookbehind that says the match can't be preceded by a . followed by zero or more digits. The negative lookbehind is faster than the split and join solution (comparison), at least in V8.I'm surprised nobody mentioned Number.prototype.toLocaleString.

It's implemented in JavaScript 1.5 (which was introduced in 1999) so it's basically supported across all major browsers.It also works in Node.js as of v0.12 via inclusion of IntlJust pay attention that this function returns a string, not a number.If you want something different, Numeral.js might be interesting.⚠ Mind that javascript has a maximum integer value of 9007199254740991toLocaleString:

NumberFormat (Safari not supported):From what I checked (Firefox at least) they are both more or less same regarding performance.I suggest using phpjs.org 's number_format()UPDATE 02/13/14People have been reporting this doesn't work as expected, so I did a JS Fiddle that includes automated tests.Update 26/11/2017Here's that fiddle as a Stack Snippet with slightly modified output:This is a variation of @mikez302's answer, but modified to support numbers with decimals (per @neu-rah's feedback that numberWithCommas(12345.6789) -> "12,345.6,789" instead of "12,345.6789"Using Regular expressionUsing toLocaleString()ref MDN:Number.prototype.toLocaleString()Using Intl.NumberFormat()ref Intl.NumberFormatDEMO AT HERE

Performance 

http://jsben.ch/sifRdIntl.NumberFormatNative JS function. Supported by IE11, Edge, latest Safari, Chrome, Firefox, Opera, Safari on iOS and Chrome on Android.Thanks to everyone for their replies. I have built off of some of the answers to make a more "one-size-fits-all" solution. The first snippet adds a function that mimics PHP's number_format() to the Number prototype. If I am formatting a number, I usually want decimal places so the function takes in the number of decimal places to show. Some countries use commas as the decimal and decimals as the thousands separator so the function allows these separators to be set.You would use this as follows:I found that I often needed to get the number back for math operations, but parseFloat converts 5,000 to 5, simply taking the first sequence of integer values. So I created my own float conversion function and added it to the String prototype.Now you can use both functions as follows:I think this is the shortest regular expression that does it:I checked it on a few numbers and it worked.I am quite impressed by the number of answers this question has got. I like the answer by uKolka:But unfortunately, in some locales like Spanish, it does not work (IMHO) as expected for numbers below 10,000:Gives 1000 and not 1.000.See toLocaleString not working on numbers less than 10000 in all browsers to know why.So I had to use the answer by Elias Zamaria choosing the right thousands separator character:This one works well as a one-liner for both locales that use , or . as the thousands separator and starts working from 1,000 in all cases.Gives 1.000 with a Spanish locale context.Should you want to have absolute control over the way a number is formatted, you may also try the following:Gives 1,234.57.This one does not need a regular expression. It works by adjusting the number to the desired amount of decimals with toFixed first, then dividing it around the decimal point . if there is one. The left side is then turned into an array of digits which is reversed. Then a thousands separator is added every three digits from the start and the result reversed again. The final result is the union of the two parts. The sign of the input number is removed with Math.abs first and then put back if necessary.It is not a one-liner but not much longer and easily turned into a function. Variables have been added for clarity, but those may be substituted by their desired values if known in advance. You may use the expressions that use toLocaleString as a way to find out the right characters for the decimal point and the thousands separator for the current locale (bear in mind that those require a more modern Javascript.)Number.prototype.toLocaleString() would have been awesome if it was provided natively by all browsers (Safari). I checked all other answers but noone seemed to polyfill it. Here is a poc towards that, which is actually a combination of first two answers; if toLocaleString works it uses it, if it doesn't it uses a custom function.The thousands separator can be inserted in an international-friendly manner using the browser's Intl object:See MDN's article on NumberFormat for more, you can specify locale behavior or default to the user's. This is a little more foolproof because it respects local differences; many countries use periods to separate digits while a comma denotes the decimals.Intl.NumberFormat isn't available in all browsers yet, but it works in latest Chrome, Opera, & IE. Firefox's next release should support it. Webkit doesn't seem to have a timeline for implementation.You can either use this procedure to format your currency needing.For more info you can access this link.https://www.justinmccandless.com/post/formatting-currency-in-javascript/if you are dealing with currency values and formatting a lot then it might be worth to add tiny accounting.js which handles lot of edge cases and localization:The following code uses char scan, so there's no regex. It shows promising performance: http://jsperf.com/number-formatting-with-commas/52015.4.26: Minor fix to resolve issue when num<0. See https://jsfiddle.net/runsun/p5tqqvs3/Here's a simple function that inserts commas for thousand separators.  It uses array functions rather than a RegEx.CodeSandbox link with examples: https://codesandbox.io/s/p38k63w0vqUse This code to handle currency format for india. Country code can be changed to handle other country currency.output:You can also use the Intl.NumberFormat constructor. Here is how you can do it. I Wrote this one before stumbling on this post. No regex and you can actually understand the code.EDIT:

The function only work with positive number. for exmaple:Output: "123,123,231,232"But to answer the question above toLocaleString() method just solves the problem.Output: "123,123,231,232"Cheer!My answer is the only answer that completely replaces jQuery with a much more sensible alternative:This solution not only adds commas, but it also rounds to the nearest penny in the event that you input an amount like $(1000.9999) you'll get $1,001.00. Additionally, the value you input can safely be a number or a string; it doesn't matter.If you're dealing with money, but don't want a leading dollar sign shown on the amount, you can also add this function, which uses the previous function but removes the $:If you're not dealing with money, and have varying decimal formatting requirements, here's a more versatile function:Oh, and by the way, the fact that this code does not work in some old version of Internet Explorer is completely intentional. I try to break IE anytime that I can catch it not supporting modern standards.Please remember that excessive praise, in the comment section, is considered off-topic. Instead, just shower me with up-votes.For me, the best answer is using toLocaleString like some members said.

If you want to include the '$' symbol just add languaje and type options.

Here is and example to format a number to Mexican PesosshortcutLet me try to improve uKolka's answer and maybe help others save some time.Use Numeral.js.You should go with Number.prototype.toLocaleString() only if its browser compatibilty is not an issue.An alternative way, supporting decimals, different separators and negatives.Some corrections by @Jignesh Sanghani, don't forget to upvote his comment.I think this function will take care of all the issues related to this problem.Just for future Googlers (or not necessarily 'Googlers'):All of solutions mentioned above are wonderful, however, RegExp might be awfully bad thing to use in a situation like that.So, yes, you might use some of the options proposed or even write something primitive yet useful like:The regexp that's used here is fairly simple and the loop will go precisely the number of times it takes to get the job done.And you might optimize it far better, "DRYify" code & so on.Yet, (in most situations) would be a far better choice.The point is not in the speed of execution or in cross-browser compatibility.In situations when you'd like to show the resulting number to user, .toLocaleString() method gives you superpower to speak the same language with the user of your website or app (whatever her/his language is).This method according to ECMAScript documentation was introduced in 1999, and I believe that the reason for that was the hope that the Internet at some point will connect people all around the world, so, some "internalization" tools were needed.Today the Internet does connect all of us, so, it is important to remember that the world is a way more complex that we might imagine & that (/almost) all of us are here, in the Internet.Obviously, considering the diversity of people, it is impossible to guarantee perfect UX for everybody because we speak different languages, value different things, etc. And exactly because of this, it is even more important to try to localize things as much as it's possible.So, considering that there're some particular standards for representation of date, time, numbers, etc. & that we have a tool to display those things in the format preferred by the final user, isn't that rare and almost irresponsible not to use that tool (especially in situations when we want to display this data to the user)?For me, using RegExp instead of .toLocaleString() in situation like that sounds a little bit like creating a clock app with JavaScript & hard-coding it in such a way so it'll display Prague time only (which would be quite useless for people who don't live in Prague) even though the default behaviour ofis to return the data according to final user's clock.You see those enthusiastic players above? Maybe you can golf out of it. Here’s my stroke.Uses a  THIN SPACE (U+2009) for a thousands separator, as the International System of Units said to do in the eighth edition(2006) of their publication「SI Brochure: The International System of Units (SI)」(See §5.3.4.). The ninth edition(2019) suggests to use a space for it (See §5.4.4.). You can use whatever you want, including a comma.I added tofixed to Aki143S's solution.

This solution uses dots for thousands separators and comma for the precision.Examples;Lots of good answers already. Here's another, just for fun:Some examples:

Generate random string/characters in JavaScript

Tom Lehman

[Generate random string/characters in JavaScript](https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript)

I want a 5 character string composed of characters picked randomly from the set [a-zA-Z0-9].What's the best way to do this with JavaScript?

2009-08-28 21:14:41Z

I want a 5 character string composed of characters picked randomly from the set [a-zA-Z0-9].What's the best way to do this with JavaScript?I think this will work for you:Note: The above algorithm has the following weaknesses:Math.random is bad for this kind of thingOption 1If you're able to do this server-side, just use the crypto module -The resulting string will be twice as long as the random bytes you generate; each byte encoded to hex is 2 characters. 20 bytes will be 40 characters of hex.Option 2If you have to do this client-side, perhaps try the uuid module -Option 3If you have to do this client-side and you don't have to support old browsers, you can do it without dependencies -For more information on crypto.getRandomValues -Here's a little console example -For IE11 support you can use -For browser coverage see https://caniuse.com/#feat=getrandomvaluesReturns exactly 5 random characters, as opposed to some of the top rated answers found here.Here's an improvement on doubletap's excellent answer. The original has two drawbacks which are addressed here:First, as others have mentioned, it has a small probability of producing short strings or even an empty string (if the random number is 0), which may break your application. Here is a solution:Second, both the original and the solution above limit the string size N to 16 characters. The following will return a string of size N for any N (but note that using N > 16 will not increase the randomness or decrease the probability of collisions):Explanation:Further thoughts:Update:Here are a couple other functional-style one-liners I came up with. They differ from the solution above in that:So, say your alphabet of choice isThen these two are equivalent to each other, so you can pick whichever is more intuitive to you:andEdit:I seems like qubyte and Martijn de Milliano came up with solutions similar to the latter (kudos!), which I somehow missed. Since they don't look as short at a glance, I'll leave it here anyway in case someone really wants a one-liner :-)Also, replaced 'new Array' with 'Array' in all solutions to shave off a few more bytes.The most compact solution, because slice is shorter than substring.  Subtracting from the end of the string allows to avoid floating point symbol generated by the random function:or evenUpdate: Added one more approach using btoa method:Something like this should workCall with default charset [a-zA-Z0-9] or send in your own:A newer version with es6 spread operator:[...Array(30)].map(() => Math.random().toString(36)[2]).join('') While the above uses additional checks for the desired A/N, A, N output,

let's break it down the to the essentials (Alpha-Numeric only) for a better understanding:Let's picture the ASCII Character table ranges:Math.floor( Math.random * 62 ) gives a range from 0..61 (what we need).

Let's fix the random to get the correct charCode ranges:The conditional operation logic from the table above:From the explanation above, here's the resulting alpha-numeric snippet:Or if you will:The simplest way is: This generate random strings of 5 characters based on the current time. Example output is 4mtxj or 4mv90 or 4mwp1The problem with this is that if you call it two times on the same second, it will generate the same string. The safer way is: This will generate a random string of 4 or 5 characters, always diferent. Example output is like 30jzm or 1r591 or 4su1aIn both ways the first part generate a random number. The .toString(36) part cast the number to a base36 (alphadecimal) representation of it. Here are some easy one liners. Change new Array(5) to set the length.I know everyone has got it right already, but i felt like having a go at this one in the most lightweight way possible(light on code, not CPU):It takes a bit of time to wrap your head around, but I think it really shows how awesome javascript's syntax is.If you are using Lodash or Underscore, then it so simple:In case anyone is interested in a one-liner (although not formatted as such for your convenience) that allocates the memory at once (but note that for small strings it really does not matter) here is how to do it:You can replace 5 by the length of the string you want. Thanks to @AriyaHidayat in this post for the solution to the map function not working on the sparse array created by Array(5).Here's the method I created.

It will create a string containing both uppercase and lowercase characters.

In addition I've included the function that will created an alphanumeric string too.Working examples:

http://jsfiddle.net/greatbigmassive/vhsxs/  (alpha only)

http://jsfiddle.net/greatbigmassive/PJwg8/ (alphanumeric)Upgrade July 2015

This does the same thing but makes more sense and includes all letters.To meet requirement [a-zA-Z0-9] and length=5 useLowercase letters, uppercase letters, and numbers will occur.Assuming you use underscorejs it's possible to elegantly generate random string in just two lines:Fast and improved algorithm. Does not guarantee uniform (see comments).You can loop through an array of items and recursively add them to a string variable, for instance if you wanted a random DNA sequence:The problem with responses to "I need random strings" questions (in whatever language) is practically every solution uses a flawed primary specification of string length. The questions themselves rarely reveal why the random strings are needed, but I would challenge you rarely need random strings of length, say 8. What you invariably need is some number of unique strings, for example, to use as identifiers for some purpose.There are two leading ways to get strictly unique strings: deterministically (which is not random) and store/compare (which is onerous). What do we do? We give up the ghost. We go with probabilistic uniqueness instead. That is, we accept that there is some (however small) risk that our strings won't be unique. This is where understanding collision probability and entropy are helpful.So I'll rephrase the invariable need as needing some number of strings with a small risk of repeat. As a concrete example, let's say you want to generate a potential of 5 million IDs. You don't want to store and compare each new string, and you want them to be random, so you accept some risk of repeat. As example, let's say a risk of less than 1 in a trillion chance of repeat. So what length of string do you need?  Well, that question is underspecified as it depends on the characters used. But more importantly, it's misguided. What you need is a specification of the entropy of the strings, not their length. Entropy can be directly related to the probability of a repeat in some number of strings. String length can't.And this is where a library like EntropyString can help. To generate random IDs that have less than 1 in a trillion chance of repeat in 5 million strings using entropy-string:entropy-string uses a character set with 32 characters by default. There are other predefined characters sets, and you can specify your own characters as well. For example, generating IDs with the same entropy as above but using hex characters:Note the difference in string length due to the difference in total number of characters in the character set used. The risk of repeat in the specified number of potential strings is the same. The string lengths are not. And best of all, the risk of repeat and the potential number of strings is explicit. No more guessing with string length.This is as clean as it will get. It is fast too, http://jsperf.com/ay-random-string.I did not find a clean solution for supporting both lowercase and uppercase characters.Lowercase only support:Math.random().toString(36).substr(2, 5)Building on that solution to support lowercase and uppercase:Math.random().toString(36).substr(2, 5).split('').map(c => Math.random() < 0.5 ? c.toUpperCase() : c).join('');Change the 5 in substr(2, 5) to adjust to the length you need.This works for sureHow about something like this: Date.now().toString(36)

Not very random, but short and quite unique every time you call it.Generate 10 characters long string. Length is set by parameter (default 10).You can use coderain. It's a library to generate random codes according to given pattern. Use # as a placeholder for upper and lowercase characters as well as digits:There are other placeholders like A for uppercase letters or 9 for digits.What may be useful is that calling .next() will always give you a unique result so you don't have to worry about duplicates.Here is a demo application that generates a list of unique random codes.Full disclosure: I'm the author of coderain.How about this compact little trick?You need the Array.apply there to trick the empty array into being an array of undefineds.If you're coding for ES2015, then building the array is a little simpler:The benefit of this function is that you can get different length random string and it ensures the length of the string.This one combines many of the answers give.I have been using it for 1 month with great results.

Difference between == and === in JavaScript [duplicate]

Shiva

[Difference between == and === in JavaScript [duplicate]](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)

What is the difference between == and === in JavaScript?  I have also seen != and !== operators.  Are there more such operators?

2009-02-07 11:53:04Z

What is the difference between == and === in JavaScript?  I have also seen != and !== operators.  Are there more such operators?=== and !== are strict comparison operators:Comparison Operators - MDCTake a look here: http://longgoldenears.blogspot.com/2007/09/triple-equals-in-javascript.htmlThe 3 equal signs mean "equality without type coercion". Using the triple equals, the values must be equal in type as well.

Writing files in Node.js

Gjorgji

[Writing files in Node.js](https://stackoverflow.com/questions/2496710/writing-files-in-node-js)

I've been trying to find a way to write to a file when using Node.js, but with no success. How can I do that?

2010-03-23 00:25:02Z

I've been trying to find a way to write to a file when using Node.js, but with no success. How can I do that?There are a lot of details in the File System API. The most common way is:Currently there are three ways to write a file:A WriteStream, as the name says, is a stream. A stream by definition is「a buffer」containing data which moves in one direction (source ► destination). But a writable stream is not necessarily「buffered」. A stream is「buffered」when you write n times, and at time n+1, the stream sends the buffer to the kernel (because it's full and needs to be flushed).In other words:「A buffer」is the object. Whether or not it「is buffered」is a property of that object.If you look at the code, the WriteStream inherits from a writable Stream object. If you pay attention, you’ll see how they flush the content; they don't have any buffering system.If you write a string, it’s converted to a buffer, and then sent to the native layer and written to disk. When writing strings, they're not filling up any buffer. So, if you do:You're doing:That’s three calls to the I/O layer. Although you're using「buffers」, the data is not buffered. A buffered stream would do: fs.write(new Buffer ("abc")), one call to the I/O layer.As of now, in Node.js v0.12 (stable version announced 02/06/2015) now supports two functions:

cork() and

uncork(). It seems that these functions will finally allow you to buffer/flush the write calls.For example, in Java there are some classes that provide buffered streams (BufferedOutputStream, BufferedWriter...). If you write three bytes, these bytes will be stored in the buffer (memory) instead of doing an I/O call just for three bytes. When the buffer is full the content is flushed and saved to disk. This improves performance.I'm not discovering anything, just remembering how a disk access should be done.You can of course make it a little more advanced. Non-blocking, writing bits and pieces, not writing the whole file at once:Synchronous WriteAsynchronous WriteWhereWorth reading the offical File System (fs) docs.I liked Index of ./articles/file-system.It worked for me.See also How do I write files in node.js?.Contents of helloworld.txt:Update:

As in Linux node write in current directory , it seems in some others don't, so I add this comment just in case :

Using this ROOT_APP_PATH = fs.realpathSync('.'); console.log(ROOT_APP_PATH); to get where the file is written.The answers provided are dated and a newer way to do this is:see documents here for more infoI know the question asked about "write" but in a more general sense "append" might be useful in some cases as it is easy to use in a loop to add text to a file (whether the file exists or not). Use a "\n" if you want to add lines eg:OK, it's quite simple as Node has built-in functionality for this, it's called fs which stands for File System and basically, NodeJS File System module...So first require it in your server.js file like this:fs has few methods to do write to file, but my preferred way is using appendFile, this will append the stuff to the file and if the file doesn't exist, will create one, the code could be like below:For example : read file and write to another file :You may write to a file using fs (file system) module.Here is an example of how you may do it:You might also want to get rid of this callback-inside-callback code structure by useing Promises and async/await statements. This will make asynchronous code structure much more flat. For doing that there is a handy util.promisify(original) function might be utilized. It allows us to switch from callbacks to promises. Take a look at the example with fs functions below:Here we use w+ for read/write both actions and if the file path is not found the it would be created automatically.Content means what you have to write to the file and its length, 'content.length'.Here is the sample of how to read file csv from local and write csv file to local.After, reading this long article. You should understand how it works.

So, here's an example of createWriteStream().You can use library easy-file-managerinstall first from npm

npm install easy-file-managerSample to upload and remove filesYou can write in a file by the following code example:

Differences between lodash and underscore [closed]

Brian M. Hunt

[Differences between lodash and underscore [closed]](https://stackoverflow.com/questions/13789618/differences-between-lodash-and-underscore)

Why would someone prefer either the lodash.js or underscore.js utility library over the other?Lodash seems to be a drop-in replacement for underscore, the latter having been around longer.I think both are brilliant, but I do not know enough about how they work to make an educated comparison, and I would like to know more about the differences.

2012-12-09 17:08:36Z

Why would someone prefer either the lodash.js or underscore.js utility library over the other?Lodash seems to be a drop-in replacement for underscore, the latter having been around longer.I think both are brilliant, but I do not know enough about how they work to make an educated comparison, and I would like to know more about the differences.I created Lo-Dash to provide more consistent cross-environment iteration support for arrays, strings, objects, and arguments objects1. It has since become a superset of Underscore, providing more consistent API behavior, more features (like AMD support, deep clone, and deep merge), more thorough documentation and unit tests (tests which run in Node, Ringo, Rhino, Narwhal, PhantomJS, and browsers), better overall performance and optimizations for large arrays/object iteration, and more flexibility with custom builds and template pre-compilation utilities.Because Lo-Dash is updated more frequently than Underscore, a lodash underscore build is provided to ensure compatibility with the latest stable version of Underscore.At one point I was even given push access to Underscore, in part because Lo-Dash is responsible for raising more than 30 issues; landing bug fixes, new features, & perf gains in Underscore v1.4.x+.In addition there are at least 3 Backbone boilerplates that include Lo-Dash by default and Lo-Dash is now mentioned in Backbone’s official documentation.Check out Kit Cambridge's post, Say "Hello" to Lo-Dash, for a deeper breakdown on the differences between Lo-Dash and Underscore.Footnotes:Lo-Dash is inspired by underscore, but nowadays is superior solution. You can make your custom builds, have a higher performance, support AMD and have great extra features. Check this Lo-Dash vs Underscore benchmarks on jsperf and.. this awesome post about lo-dash:One of the most useful feature when you work with collections, is the shorthand syntax:(taken from lodash docs)If like me you were expecting a list of usage differences between underscore and lodash, there's a guide for migrating from underscore to lodash.Here's the current state of it for posterity:In addition to John's answer, and reading up on lodash (which I had hitherto regarded as a "me-too" to underscore), and seeing the performance tests, reading the source-code, and blog posts, the few points which make lodash much superior to underscore are these:Here is a list of differences between lodash, and it's underscore-build is a drop-in replacement for your underscore projects.This is 2014 and a couple of years too late. Still I think my point holds:IMHO this discussion got blown out of proportion quite a bit. Quoting the aforementioned blog post:As if "simple loops" and "vanilla Javascript" are more native than Array or Object method implementations. Jeez ...It certainly would be nice to have a single source of truth, but there isn't. Even if you've been told otherwise, there is no Vanilla God, my dear. I'm sorry. The only assumption that really holds is that we are all writing Javascript code that aims at performing well in all major browsers, knowing that all of them have different implementations of the same things. It's a bitch to cope with, to put it mildly. But that's the premise, whether you like it or not. Maybe y'all are working on large scale projects that need twitterish performance so that you really see the difference between 850,000 (underscore) vs. 2,500,000 (lodash) iterations over a list per sec right now! I for one am not. I mean, I worked projects where I had to address performance issues, but they were never solved or caused by neither Underscore nor Lo-Dash. And unless I get hold of the real differences in implementation and performance (we're talking C++ right now) of lets say a loop over an iterable (object or array, sparse or not!), I rather don't get bothered with any claims based on the results of a benchmark platform that is already opinionated.It only needs one single update of lets say Rhino to set its Array method implementations on fire in a fashion that not a single "medieval loop methods perform better and forever and whatnot" priest can argue his/her way around the simple fact that all of a sudden array methods in FF are much faster than his/her opinionated brainfuck. Man, you just can't cheat your runtime environment by cheating your runtime environment! Think about that when promoting ... ... next time. So to keep it relevant: Choose whatever approach fits your needs the most. As usual. I'd prefer fallbacks on actual implementations over opinionated runtime cheats anytime but even that seems to be a matter of taste nowadays. Stick to quality resources like http://developer.mozilla.com and http://caniuse.com and you'll be just fine. I'm agree with most of things said here but I just want to point out an argument in favor of underscore.js: the size of the library.Specially in case you are developing an app or website which intend to be use mostly on mobile devices, the size of the resulting bundle and the effect on the boot or download time may have an important role.For comparison, these sizes are those I noticed with source-map-explorer after running ionic serve:edited Feb 2020:one can use BundlePhobia to check the current size of Lo-Dash and UnderscoreNot sure if that is what OP meant, but I came accross this question because I was searching for a list of issues I have to keep in mind when migrating from underscore to lodash.I would really appreciate if someone posted an article with a complete list of such differences. Let me start with the things I've learned the hard way (that is, things which made my code explode on production:/) :http://benmccormick.org/2014/11/12/underscore-vs-lodash/Latest article comparing the two by Ben McCormick:I just found one difference that ended up being important for me. The non-underscore-compatible version of lodash's _.extend() does not copy over class-level-defined properties or methods.I've created a Jasmine test in CoffeeScript that demonstrates this:https://gist.github.com/softcraft-development/1c3964402b099893bd61Fortunately, lodash.underscore.js preserves Underscore's behaviour of copying everything, which for my situation was the desired behaviour.lodash has got _.mapValues() which is identical to underescore's _.mapObject().For the most part underscore is subset of lodash.  At times, like presently underscore will have cool little functions lodash doesn't have like mapObject.  This one saved me a lot of time in the development of my project.They are pretty similar, with Lodash is taking over...They both are a utility library which takes the world of utility in JavaScript...Seems Lodash is getting updated more regularly now, so more used in the latest projects...Also Lodash seems is lighter by a couple of KBs...Both have a good api and doc, but I think Lodash one is better...Here is screenshot for each of the docs for getting the first value of an array...underscore:lodash:

As things may get updated time to time, just check their website also...lodashunderscore

How can I display a JavaScript object?

maxjackie

[How can I display a JavaScript object?](https://stackoverflow.com/questions/957537/how-can-i-display-a-javascript-object)

How do I display the content of a JavaScript object in a string format like when we alert a variable?The same formatted way I want to display an object.

2009-06-05 19:01:59Z

How do I display the content of a JavaScript object in a string format like when we alert a variable?The same formatted way I want to display an object.If you want to print the object for debugging purposes, use the code:will display:Note: you must only log the object. For example, this won't work:Note ': You can also use a comma in the log method, then the first line of the output will be the string and after that the object will be rendered:Use native JSON.stringify method.

Works with nested objects and all major browsers support this method.Link to Mozilla API Reference and other examples.Use a custom JSON.stringify replacer if you

encounter this Javascript errorconsole.dir(object):Note that the console.dir() feature is non-standard.  See MDN Web DocsThis will print the stringify version of object. So instead of [object] as an output you will get the content of object.Well, Firefox (thanks to @Bojangles for detailed information) has Object.toSource() method which prints objects as JSON and function(){}.That's enough for most debugging purposes, I guess.If you want to use alert, to print your object, you can do this:alert("myObject is " + myObject.toSource());It should print each property and its corresponding value in string format.If you would like to see data in tabular format you can useTable can be sorted if you click on the table column.You can also select what columns to show:You can find more information about console.table hereIn NodeJS you can print an object by using util.inspect(obj). Be sure to state the depth or you'll only have a shallow print of the object. Function:Usage:Example:http://jsfiddle.net/WilsonPage/6eqMn/Simply use ExampleOr Also, note in javascript functions are considered as objects.As an extra note :Actually you can assign new property like this and access it console.log or display it in alertUse this:As it was said before best and most simply way i found was To print the full object with Node.js with colors as a bonus:Colors are of course optional, 'depth: null' will print the full object.The options don't seem to be supported in browsers.References:https://developer.mozilla.org/en-US/docs/Web/API/Console/dirhttps://nodejs.org/api/console.html#console_console_dir_obj_optionsIf you would like to print the object of its full length, can use If you want to print the object by converting it to the string then(This has been added to my library at GitHub)Reinventing the wheel here! None of these solutions worked for my situation. So, I quickly doctored up wilsonpage's answer. This one is not for printing to screen (via console, or textfield or whatever). It does work fine in those situations and works just fine as the OP requested, for alert. Many answers here do not address using alert as the OP requested. Anyhow, It is, however, formatted for data transport. This version seems to return a very similar result as toSource(). I've not tested against JSON.stringify, but I assume this is about the same thing. This version is more like a poly-fil so that you can use it in any environment. The result of this function is a valid Javascript object declaration.I wouldn't doubt if something like this was already on SO somewhere, but it was just shorter to make it than to spend a while searching past answers. And since this question was my top hit on google when I started searching about this; I figured putting it here might help others.Anyhow, the result from this function will be a string representation of your object, even if your object has embedded objects and arrays, and even if those objects or arrays have even further embedded objects and arrays. (I heard you like to drink? So, I pimped your car with a cooler. And then, I pimped your cooler with a cooler. So, your cooler can drink, while your being cool.)Arrays are stored with [] instead of {} and thus dont have key/value pairs, just values. Like regular arrays. Therefore, they get created like arrays do.Also, all string (including key names) are quoted, this is not necessary unless those strings have special characters (like a space or a slash). But, I didn't feel like detecting this just to remove some quotes that would otherwise still work fine.This resulting string can then be used with eval or just dumping it into a var thru string manipulation. Thus, re-creating your object again, from text.Let me know if I messed it all up, works fine in my testing. Also, the only way I could think of to detect type array was to check for the presence of length. Because Javascript really stores arrays as objects, I cant actually check for type array (there is no such type!). If anyone else knows a better way, I would love to hear it. Because, if your object also has a property named length then this function will mistakenly treat it as an array.EDIT: Added check for null valued objects. Thanks Brock AdamsEDIT: Below is the fixed function to be able to print infinitely recursive objects. This does not print the same as toSource from FF because toSource will print the infinite recursion one time, where as, this function will kill it immediately. This function runs slower than the one above, so I'm adding it here instead of editing the above function, as its only needed if you plan to pass objects that link back to themselves, somewhere.Test:Result:NOTE: Trying to print document.body is a terrible example. For one, FF just prints an empty object string when using toSource. And when using the  function above, FF crashes on SecurityError: The operation is insecure.. And Chrome will crash on Uncaught RangeError: Maximum call stack size exceeded. Clearly, document.body was not meant to be converted to string. Because its either too large, or against security policy to access certain properties. Unless,  I messed something up here, do tell!NB:

In these examples, yourObj defines the object you want to examine.This is the defacto way of showing the contents of an objectwill produce something like :

It will output something like : 

(pictured above: the keys/values stored in the object)This will produce neat output : 

The solution mentioned in a previous answer: console.log(yourObj) displays too many parameters and is not the most user friendly way to display the data you want. That is why I recommend logging keys and then values separately.Someone in an earlier comment suggested this one, however it never worked for me. If it does work for someone else on a different browser or something, then kudos! Ill still put the code here for reference!

Will output something like this to the console : 

I needed a way to recursively print the object, which pagewil's answer provided (Thanks!). I updated it a little bit to include a way to print up to a certain level, and to add spacing so that it is properly indented based on the current level that we are in so that it is more readable.Usage:Here's a way to do it:I always use console.log("object will be: ", obj, obj1).

this way I don't need to do the workaround with stringify with JSON.

All the properties of the object will be expanded nicely.Another way of displaying objects within the console is with JSON.stringify. Checkout the below example:Javascript FunctionPrinting Objectvia print_r in Javascriptwhere object is your objector you can use this in chrome dev tools, "console" tab:console.log(object);Assume object obj = {0:'John', 1:'Foo', 2:'Bar'}Print object's contentConsole output (Chrome DevTools) :Hope that helps!A little helper function I always use in my projects for simple, speedy debugging via the console. 

 Inspiration taken from Laravel.Usagedd(123.55); outputs:

  I prefer using console.table for getting clear object format, so imagine you have this object:And you will you see a neat and readable table like this below:

i used pagewil's print method, and it worked very nicely. here is my slightly extended version with (sloppy) indents and distinct prop/ob delimiters:Another modification of pagewils code... his doesn't print out anything other than strings and leaves the number and boolean fields blank and I fixed the typo on the second typeof just inside the function as created by megaboss.Here's function.It can show object using tab indent with readability. If you're looking for something that can return a prettified string of any javascript object, check out https://github.com/fresheneesz/beautinator . An example:Results in:It even works if there are functions in your object.

JavaScript post request like a form submit

Joseph Holsten

[JavaScript post request like a form submit](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)

I'm trying to direct a browser to a different page. If I wanted a GET request, I might sayBut the resource I'm trying to access won't respond properly unless I use a POST request. If this were not dynamically generated, I might use the HTMLThen I would just submit the form from the DOM.But really I would like JavaScript code that allows me to sayWhat's the best cross browser implementation?Edit I'm sorry I was not clear. I need a solution that changes the location of the browser, just like submitting a form. If this is possible with XMLHttpRequest, it is not obvious. And this should not be asynchronous, nor use XML, so Ajax is not the answer.

2008-09-25 15:15:43Z

I'm trying to direct a browser to a different page. If I wanted a GET request, I might sayBut the resource I'm trying to access won't respond properly unless I use a POST request. If this were not dynamically generated, I might use the HTMLThen I would just submit the form from the DOM.But really I would like JavaScript code that allows me to sayWhat's the best cross browser implementation?Edit I'm sorry I was not clear. I need a solution that changes the location of the browser, just like submitting a form. If this is possible with XMLHttpRequest, it is not obvious. And this should not be asynchronous, nor use XML, so Ajax is not the answer.Example:EDIT: Since this has gotten upvoted so much, I'm guessing people will be copy-pasting this a lot. So I added the hasOwnProperty check to fix any inadvertent bugs.This would be a version of the selected answer using jQuery.A simple quick-and-dirty implementation of @Aaron answer:Of course, you should rather use a JavaScript framework such as Prototype or jQuery...Using the createElement function provided in this answer, which is necessary due to IE's brokenness with the name attribute on elements created normally with document.createElement:Rakesh Pai's answer is amazing, but there is an issue that occurs for me (in Safari) when I try to post a form with a field called submit. For example, post_to_url("http://google.com/",{ submit: "submit" } );. I have patched the function slightly to walk around this variable space collision.No. You can't have the JavaScript post request like a form submit.What you can have is a form in HTML, then submit it with the JavaScript. (as explained many times on this page).You can create the HTML yourself, you don't need JavaScript to write the HTML. That would be silly if people suggested that.Your function would just configure the form the way you want it.Then, use it like.But I would just leave out the function and just do.Finally, the style decision goes in the ccs file.Personally I think forms should be addressed by name but that is not important right now.If you have Prototype installed, you can tighten up the code to generate and submit the hidden form like this:this is the answer of rakesh, but with support for arrays (which is quite common in forms): plain javascript: oh, and here's the jquery version: (slightly different code, but boils down to the same thing)One solution is to generate the form and submit it. One implementation isSo I can implement a URL shortening bookmarklet with a simpleWell, wish I had read all the other posts so I didn't lose time creating this from Rakesh Pai's answer. Here's a recursive solution that works with arrays and objects.  No dependency on jQuery.Added a segment to handle cases where the entire form should be submitted like an array. (ie. where there's no wrapper object around a list of items)Three options here.I'd go down the Ajax route as others suggested with something like:Here is how I wrote it using jQuery. Tested in Firefox and Internet Explorer.The easiest way is using Ajax Post Request:where:Then in the success handler redirect the browser with something like window.location.The Prototype library includes a Hashtable object, with a ".toQueryString()" method, which allows you to easily turn a JavaScript object/structure into a query-string style string. Since the post requires the "body" of the request to be a query-string formatted string, this allows your Ajax request to work properly as a post. Here's an example using Prototype:This works perfectly in my case:You can use it in function like:Using this you can post all the values of inputs.Yet another recursive solution, since some of others seem to be broken (I didn't test all of them). This one depends on lodash 3.x and ES6 (jQuery not required):My solution will encode deeply nested objects, unlike the currently accepted solution by @RakeshPai.It uses the 'qs' npm library and its stringify function to convert nested objects into parameters.This code works well with a Rails back-end, although you should be able to modify it to work with whatever backend you need by modifying the options passed to stringify.  Rails requires that arrayFormat be set to "brackets".Example:Produces these Rails parameters:FormObject is an option. But FormObject is not supported by most browsers now.This is like Alan's option 2 (above). How to instantiate the httpobj is left as an excercise.This is based on beauSD's code using jQuery. It is improved so it works recursively on objects.You could dynamically add the form using DHTML and then submit.You could use a library like jQuery and its $.post method.I use the document.forms java and loop it to get all the elements in the form, then send via xhttp. So this is my solution for javascript / ajax submit (with all html included as an example):The method I use to post and direct a user automatically to another page is to just write a hidden form and then auto submit it.  Be assured that the hidden form takes absolutely no space on the web page. The code would be something like this:Application of auto submitAn application of an auto submit would be directing form values that the user automatically put in on the other page back to that page.  Such an application would be like this:Here is how I do it.None of the above solutions handled deep nested params with just jQuery,

so here is my two cents solution.If you're using jQuery and you need to handle deep nested parameters, you can use this function below:Here is an example of how to use it.

The html code:And if you click the test button, it will post the form and you will get the following values in POST:Note: if you want to post the form to another url than the current page, you can specify the url as the second argument of the postForm function.So for instance (to re-use your example):Hope this helps.Note2: the code was taken from the redirect plugin. I basically just simplified it

for my needs.You could use jQuery's trigger method to submit the form, just like you press a button, like so,it will submit on the browser.jQuery plugin for redirect with POST or GET:https://github.com/mgalante/jquery.redirect/blob/master/jquery.redirect.jsTo test, include the above .js file or copy/paste the class into your code, then use the code here, replacing "args" with your variable names, and "values" with the values of those respective variables:You could make an AJAX call (likely using a library such as using Prototype.js or JQuery). AJAX can handle both GET and POST options.

Retrieve the position (X,Y) of an HTML element

Andy E

[Retrieve the position (X,Y) of an HTML element](https://stackoverflow.com/questions/442404/retrieve-the-position-x-y-of-an-html-element)

I want to know how to get the X and Y position of HTML elements such as img and div in JavaScript.

2009-01-14 09:35:03Z

I want to know how to get the X and Y position of HTML elements such as img and div in JavaScript.The correct approach is to use element.getBoundingClientRect():Internet Explorer has supported this since as long as you are likely to care about and it was finally standardized in CSSOM Views. All other browsers adopted it a long time ago.Some browsers also return height and width properties, though this is non-standard.  If you're worried about older browser compatibility, check this answer's revisions for an optimised degrading implementation.The values returned by element.getBoundingClientRect() are relative to the viewport.  If you need it relative to another element, simply subtract one rectangle from the other:The libraries go to some lengths to get accurate offsets for an element.

here's a simple function that does the job in every circumstances that I've tried.This worked for me (modified from highest voted answer):Using this we can callorIf you want it done only in javascript, here are some one liners  using getBoundingClientRect()The first line will return offsetLeft say X relative to document.The second line will return offsetTop say Y relative to document.getBoundingClientRect() is a javascript function that returns the position of the element relative to viewport of window.HTML elements on most browsers will have:-These specifiy the position of the element relative its nearest parent that has layout.  This parent can often be accessed bif the offsetParent property.IE and FF3 haveThese properties are less common, they specify an elements position with its parents client area (padded area is part of the client area but border and margin is not).You can add two properties to Element.prototype to get the top/left of any element.This is called like this:Here's a demo comparing the results to jQuery's offset().top and .left: http://jsfiddle.net/ThinkingStiff/3G7EZ/If page includes - at least- any "DIV", the function given by meouw throws the "Y" value beyond current page limits. In order to find the exact position, you need to handle both offsetParent's and parentNode's.Try the code given below (it is checked for FF2):To retrieve the position relative to the page efficiently, and without using a recursive function: (includes IE also)How about something like this, by passing ID of the element and it will return the left or top, we can also combine them:1) find left2) find topor 3) find left and top togetherYou might be better served by using a JavaScript framework, that has functions to return such information (and so much more!) in a browser-independant fashion. Here are a few:With these frameworks, you could do something like:

$('id-of-img').top

to get the y-pixel coordinate of the image.jQuery .offset() will get the current coordinates of the first element, or set the coordinates of every element, in the set of matched elements, relative to the document.I've taken @meouw's answer, added in the clientLeft that allows for the border, and then created three versions:getAbsoluteOffsetFromBody - similar to @meouw's, this gets the absolute position relative to the body or html element of the document (depending on quirks mode)getAbsoluteOffsetFromGivenElement - returns the absolute position relative to the given element (relativeEl). Note that the given element must contain the element el, or this will behave the same as getAbsoluteOffsetFromBody. This is useful if you have two elements contained within another (known) element (optionally several nodes up the node tree) and want to make them the same position.getAbsoluteOffsetFromRelative - returns the absolute position relative to the first parent element with position: relative. This is similar to getAbsoluteOffsetFromGivenElement, for the same reason but will only go as far as the first matching element.If you are still having problems, particularly relating to scrolling, you could try looking at http://www.greywyvern.com/?post=331 - I noticed at least one piece of questionable code in getStyle which should be fine assuming browsers behave, but haven't tested the rest at all.if using jQuery, the dimensions plugin is excellent and allows you specify exactly what you want.e.g.Relative position, absolute position, absolute position without padding, with padding...It goes on, let's just say there is a lot you can do with it.Plus the bonus of using jQuery is it's lightweight file size and easy use, you won't go back to JavaScript without it afterwards.If you are using jQuery, this could be a simple solution:This is the best code I've managed to create (works in iframes as well, unlike jQuery's offset()). Seems webkit has a bit of a different behavior.Based on meouw's comment:The cleanest approach I have found is a simplified version of the technique used by jQuery's offset.  Similar to some of the other answers it starts with getBoundingClientRect; it then uses the window and the documentElement to adjust for scroll position as well as things like the margin on the body (often the default).  Difference between small and littleLook a example coordinates:

http://javascript.info/tutorial/coordinatesWhile this is very likely to be lost at the bottom of so many answers, the top solutions here were not working for me.

As far as I could tell neither would any of the other answers have helped.

Situation:

In an HTML5 page I had a menu that was a nav element inside a header (not THE header but a header in another element).

I wanted the navigation to stick to the top once a user scrolled to it, but previous to this the header was absolute positioned (so I could have it overlay something else slightly).

The solutions above never triggered a change because .offsetTop was not going to change as this was an absolute positioned element. Additionally the .scrollTop property was simply the top of the top most element... that is to say 0 and always would be 0.

Any tests I performed utilizing these two (and same with getBoundingClientRect results) would not tell me if the top of the navigation bar ever scrolled to the top of the viewable page (again, as reported in console, they simply stayed the same numbers while scrolling occurred). Solution

The solution for me was utilizing The value of the pageTop property reflects the viewable section of the screen, therefore allowing me to track where an element is in reference to the boundaries of the viewable area.Probably unnecessary to say, anytime I am dealing with scrolling I expect to use this solution to programatically respond to movement of elements being scrolled. 

 Hope it helps someone else.

IMPORTANT NOTE: This appears to work in Chrome and Opera currently & definitely not in Firefox (6-2018)... until Firefox supports visualViewport I recommend NOT using this method, (and I hope they do soon... it makes a lot more sense than the rest).

UPDATE:

Just a note regarding this solution. While I still find what I discovered to be very valuable for situations in which "...programmatically respond to movement of elements being scrolled." is applicable. The better solution for the problem that I had was to use CSS to set position: sticky on the element. Using sticky you can have an element stay at the top without using javascript (NOTE: there are times this will not work as effectively as changing the element to fixed but for most uses the sticky approach will likely be superior)

UPDATE01:

So I realized that for a different page I had a requirement where I needed to detect the position of an element in a mildly complex scrolling setup (parallax plus elements that scroll past as part of a message).

I realized in that scenario that the following provided the value I utilized to determine when to do something:Hope this answer is more widely useful now.I did it like this so it was cross-compatible with old browsers.More about coordinates in JavaScript here: http://javascript.info/tutorial/coordinatesI successfully used Andy E's solution to position a bootstrap 2 modal depending on what link in a table row a user clicks on. The page is a Tapestry 5 page and javascript below is imported in the java page class.javascript:}My modal code:The link in the loop:And the java code in the page class:Hope this helps someone, this post helped out.To get the total offset of an element, you could recursively sum up all parent offsets:with this utility function the total top offset of a dom element is: Thank ThinkingStiff for the answer, this is only another version of it.After much research and testing this seems to worksee http://jsbin.com/xuvovalifo/edit?html,js,output Just thought I'd throw this out there as well. 

I haven't been able to test it in older browsers, but it works in the latest of the top 3.  :)Since different browsers are rendering border, padding, margin and etc in different way. I wrote a little function to retrieve top and left positions of specific element in every root element that you want in precise dimension: For retrieve left position you must return: 

Find object by id in an array of JavaScript objects

thugsb

[Find object by id in an array of JavaScript objects](https://stackoverflow.com/questions/7364150/find-object-by-id-in-an-array-of-javascript-objects)

I've got an array:I'm unable to change the structure of the array. I'm being passed an id of 45, and I want to get 'bar' for that object in the array. How do I do this in JavaScript or using jQuery?

2011-09-09 15:42:29Z

I've got an array:I'm unable to change the structure of the array. I'm being passed an id of 45, and I want to get 'bar' for that object in the array. How do I do this in JavaScript or using jQuery?Use the find() method:From MDN:If you want to find its index instead, use findIndex():From MDN:If you want to get an array of matching elements, use the filter() method instead:This will return an array of objects. If you want to get an array of foo properties, you can do this with the map() method:Side note: methods like find() or filter(), and arrow functions are not supported by older browsers (like IE), so if you want to support these browsers, you should transpile your code using Babel (with the polyfill).As you are already using jQuery, you can use the grep function which is intended for searching an array:The result is an array with the items found. If you know that the object is always there and that it only occurs once, you can just use result[0].foo to get the value. Otherwise you should check the length of the resulting array. Example:Another solution is to create a lookup object:This is especially interesting if you need to do many lookups.This won't need much more memory since the IDs and objects will be shared.ECMAScript 2015 provides the find() method on arrays: It works without external libraries. But if you want older browser support you might want to include this polyfill.Underscore.js has a nice method for that:I think the easiest way would be the following, but it won't work on Internet Explorer 8 (or earlier):Try the followingA generic and more flexible version of the findById function above:You can get this easily using the map() function:Working example: http://jsfiddle.net/hunter/Pxaua/You can use filters,While there are many correct answers here, many of them do not address the fact that this is an unnecessarily expensive operation if done more than once. In an extreme case this could be the cause of real performance problems.In the real world, if you are processing a lot of items and performance is a concern it's much faster to initially build a lookup:you can then get at items in fixed time like this : You might also consider using a Map instead of an object as the lookup: https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Mapreturns the object element if found, otherwise falseHere's how I'd go about it in pure JavaScript, in the most minimal manner I can think of that works in ECMAScript 3 or later. It returns as soon as a match is found.If you do this multiple times, you may set up a Map (ES6):Then you can simply do:More generic and shortin your case Ex. var element = findFromArray(myArray,'id',45) that will give you the whole element.You may try out Sugarjs from http://sugarjs.com/.It has a very sweet method on Arrays, .find. So you can find an element like this:You may also pass an object with more properties to it to add another "where-clause".Note that Sugarjs extends native objects, and some people consider this very evil...Building on the accepted answer:jQuery:Or CoffeeScript:Iterate over any item in the array. For every item you visit, check that item's id. If it's a match, return it.If you just want teh codez:And the same thing using ECMAScript 5's Array methods:As long as the browser supports ECMA-262, 5th edition (December 2009), this should work, almost one-liner:You can do this even in pure JavaScript by using the in built "filter" function for arrays:So now simply pass "id" in place of key and "45" in place of value, and you will get the full object matching an id of 45. So that would be,Use Array.prototype.filter() function.DEMO: https://jsfiddle.net/sumitridhal/r0cz0w5o/4/JSONFILTERRecently, I have to face the same thing in which I need to search the string from a huge array.After some search I found It'll be easy to handle with simple code:Code:See https://jsfiddle.net/maheshwaghmare/cfx3p40v/4/I really liked the answer provided by Aaron Digulla but needed to keep my array of objects so I could iterate through it later.  So I modified it to We can use Jquery methods $.each()/$.grep()or use ES6 syntax: Or use Lodash https://lodash.com/docs/4.17.10#filter, Underscore https://underscorejs.org/#filterUse:It should return an object by id.This solution may helpful as well:I made it just like $.grep and if one object is find out, function will return the object, rather than an array.Starting from aggaton's answer, this is a function that actually returns the wanted element (or null if not found), given the array and a callback function that returns a truthy value for the "correct" element:Just remember that this doesn't natively work on IE8-, as it doesn't support some. A polyfill can be provided, alternatively there's always the classic for loop:It's actually faster and more compact. But if you don't want to reinvent the wheel, I suggest using an utility library like underscore or lodash.Shortest,Consider "axesOptions" to be array of objects with an object format being

{:field_type => 2, :fields => [1,3,4]}

How do I check if an object has a specific property in JavaScript?

sheats

[How do I check if an object has a specific property in JavaScript?](https://stackoverflow.com/questions/135448/how-do-i-check-if-an-object-has-a-specific-property-in-javascript)

How do I check if an object has a specific property in JavaScript?Consider:Is that the best way to do it?

2008-09-25 19:27:06Z

How do I check if an object has a specific property in JavaScript?Consider:Is that the best way to do it?I'm really confused by the answers that have been given - most of them are just outright incorrect. Of course you can have object properties that have undefined, null, or false values. So simply reducing the property check to typeof this[property] or, even worse, x.key will give you completely misleading results.It depends on what you're looking for. If you want to know if an object physically contains a property (and it is not coming from somewhere up on the prototype chain) then object.hasOwnProperty is the way to go. All modern browsers support it. (It was missing in older versions of Safari - 2.0.1 and older - but those versions of the browser are rarely used any more.)If what you're looking for is if an object has a property on it that is iterable (when you iterate over the properties of the object, it will appear) then doing: prop in object will give you your desired effect.Since using hasOwnProperty is probably what you want, and considering that you may want a fallback method, I present to you the following solution:The above is a working, cross-browser, solution to hasOwnProperty, with one caveat: It is unable to distinguish between cases where an identical property is on the prototype and on the instance - it just assumes that it's coming from the prototype. You could shift it to be more lenient or strict, based upon your situation, but at the very least this should be more helpful.With Underscore.js or (even better) lodash:Which calls Object.prototype.hasOwnProperty, but (a) is shorter to type, and (b) uses "a safe reference to hasOwnProperty" (i.e. it works even if hasOwnProperty is overwritten).In particular, lodash defines _.has as:What about?Note: the following is nowadays largely obsolete thanks to strict mode, and hasOwnProperty. The correct solution is to use strict mode and to check for the presence of a property using obj.hasOwnProperty. This answer predates both these things, at least as widely implemented (yes, it is that old). Take the following as a historical note.Bear in mind that undefined is (unfortunately) not a reserved word in JavaScript if you’re not using strict mode. Therefore, someone (someone else, obviously) could have the grand idea of redefining it, breaking your code.A more robust method is therefore the following:On the flip side, this method is much more verbose and also slower. :-/A common alternative is to ensure that undefined is actually undefined, e.g. by putting the code into a function which accepts an additional parameter, called undefined, that isn’t passed a value. To ensure that it’s not passed a value, you could just call it yourself immediately, e.g.:Armin Ronacher seems to have already beat me to it, but:A safer, but slower solution, as pointed out by Konrad Rudolph and Armin Ronacher would be:You can use the in operator to check if the property exists on an object:You can also loop through all the properties of the object using a for - in loop, and then check for the specific property:You must consider if this object property is enumerable or not, because non-enumerable properties will not show up in a for-in loop. Also, if the enumerable property is shadowing a non-enumerable property of the prototype, it will not show up in Internet Explorer 8 and earlier.If you’d like a list of all instance properties, whether enumerable or not, you can useThis will return an array of names of all properties that exist on an object.Finally, you can use the typeof operator to directly check the data type of the object property:If the property does not exist on the object, it will return the string undefined. Else it will return the appropriate property type. However, note that this is not always a valid way of checking if an object has a property or not, because you could have a property that is set to undefined, in which case, using typeof x.key would still return true (even though the key is still in the object).Update: You can check if a property exists by comparing to the undefined javascript property This should work unless key was specifically set to undefined on the x objectLet's cut through some confusion here. First, let's simplify by assuming hasOwnProperty already exists; this is true of the vast majority of current browsers in use.hasOwnProperty returns true if the attribute name that is passed to it has been added to the object. It is entirely independent of the actual value assigned to it which may be exactly  undefined.Hence:However:The problem is what happens when an object in the prototype chain has an attribute with the value of undefined? hasOwnProperty will be false for it, and so will !== undefined. Yet, for..in will still list it in the enumeration.The bottom line is there is no cross-browser way (since Internet Explorer doesn't expose __prototype__) to determine that a specific identifier has not been attached to an object or anything in its prototype chain.If you are searching for a property, then "NO".  You want:In general you should not care whether or not the property comes from the prototype or the object.However, because you used 'key' in your sample code, it looks like you are treating the object as a hash, in which case your answer would make sense.  All of the hashes keys would be properties in the object, and you avoid the extra properties contributed by the prototype.John Resig's answer was very comprehensive, but I thought it wasn't clear.  Especially with when to use "'prop' in obj".For testing simple objects use:

    if (obj[x] !== undefined)If you don't know what object type it is use: 

    if (obj.hasOwnProperty(x))All other options are slower..DetailsPerformance evaluation of 100,000,000 cycles under Nodejs to the 5 options suggested by others here:The evaluation tells us that unless we specifically want to check the object's prototype chain as well as the object itself, we should not use the common form:  if (X in Obj)... It is between 2 to 6 times slower depending on the use case Bottom line, if your Obj is not necessarily a simple object and you wish to avoid checking the object's prototype chain and to ensure x is owned by Obj directly, use 'if (obj.hasOwnProperty(x))...'.Otherwise, when using a simple object and not being worried about the object's prototype chain, using if (typeof(obj[x]) !== 'undefined')... is the safest and fastest way. If you use a simple object as a hash table and never do anything kinky, I would use if (obj[x])... as I find it much more readable.Have fun.Yes it is :)  I think you can also do Object.prototype.hasOwnProperty.call(x, 'key') which should also work if x has a property called hasOwnProperty :)But that tests for own properties.  If you want to check if it has an property that may also be inhered you can use typeof x.foo != 'undefined'.Becausefails if x.key resolves to false (for example, x.key = "").You can also use the ES6 Reflect object:Documentation on MDN for Reflect.has can be found here.OK, it looks like I had the right answer unless if you don't want inherited properties:Here are some other options to include inherited properties:Do not do this object.hasOwnProperty(key)), its really bad because these methods may be shadowed by properties on the object in question - consider { hasOwnProperty: false } - or, the object may be a null object (Object.create(null)).The best way is to do Object.prototype.hasOwnProperty.call(object, key) or:Another relatively simple way is using Object.keys. This returns an array which means you get all of the features of an array.Although we are in a world with great browser support. Because this question is so old I thought I'd add this: 

This is safe to use as of JS v1.8.5hasOwnProperty "can be used to determine whether an object has the specified property as a direct property of that object; unlike the in operator, this method does not check down the object's prototype chain." So most probably, for what seems by your question, you don't want to use hasOwnProperty, which determines if the property exists as attached directly to the object itself,.If you want to determine if the property exists in the prototype chain you main want to use in, like:I hope this helps.With risk of massive downvoting, here is another option for a specific case. :)If you want to test for a member on an object and want to know if it has been set to something other than:then you can use:You can use the following approaches- The difference between the following approaches are as follows- ECMA Script 6 solution with reflect. Create wrapper like:There is method "hasOwnProperty" exists on object, but its not recommended to call this method directly because might be sometimes the object is null or some property exist on object like: { hasOwnProperty: false }So better way would be:You need to use the method object.hasOwnProperty(property). It returns true if the object has the property and false if the object doesn't.Why over-complicate things when you can do:Simple and clear for most cases...You can use JSON.stringify function, to turn around reference checking.If the key you are checking is stored in a variable, you can check it like this:i used this. which is lots helped me if you have a objects inside object

Where should I put <script> tags in HTML markup?

mipadi

[Where should I put <script> tags in HTML markup?](https://stackoverflow.com/questions/436411/where-should-i-put-script-tags-in-html-markup)

When embedding JavaScript in an HTML document, where is the proper place to put the <script> tags and included JavaScript? I seem to recall that you are not supposed to place these in the <head> section, but placing at the beginning of the <body> section is bad, too, since the JavaScript will have to be parsed before the page is rendered completely (or something like that). This seems to leave the end of the <body> section as a logical place for <script> tags.So, where is the right place to put the <script> tags?(This question references this question, in which it was suggested that JavaScript function calls should be moved from <a> tags to <script> tags. I'm specifically using jQuery, but more general answers are also appropriate.)

2009-01-12 18:15:54Z

When embedding JavaScript in an HTML document, where is the proper place to put the <script> tags and included JavaScript? I seem to recall that you are not supposed to place these in the <head> section, but placing at the beginning of the <body> section is bad, too, since the JavaScript will have to be parsed before the page is rendered completely (or something like that). This seems to leave the end of the <body> section as a logical place for <script> tags.So, where is the right place to put the <script> tags?(This question references this question, in which it was suggested that JavaScript function calls should be moved from <a> tags to <script> tags. I'm specifically using jQuery, but more general answers are also appropriate.)Here's what happens when a browser loads a website with a <script> tag on it:Step #4 causes a bad user experience. Your website basically stops loading until you've downloaded all scripts. If there's one thing that users hate it's waiting for a website to load.Any script can insert its own HTML via document.write() or other DOM manipulations. This implies that the parser has to wait until the script has been downloaded & executed before it can safely parse the rest of the document. After all, the script could have inserted its own HTML in the document.However, most JavaScript developers no longer manipulate the DOM while the document is loading. Instead, they wait until the document has been loaded before modifying it. For example:Javascript:Because your browser does not know my-script.js isn't going to modify the document until it has been downloaded & executed, the parser stops parsing.The old approach to solving this problem was to put <script> tags at the bottom of your <body>, because this ensures the parser isn't blocked until the very end. This approach has its own problem: the browser cannot start downloading the scripts until the entire document is parsed. For larger websites with large scripts & stylesheets, being able to download the script as soon as possible is very important for performance. If your website doesn't load within 2 seconds, people will go to another website.In an optimal solution, the browser would start downloading your scripts as soon as possible, while at the same time parsing the rest of your document.Today, browsers support the async and defer attributes on scripts. These attributes tell the browser it's safe to continue parsing while the scripts are being downloaded.Scripts with the async attribute are executed asynchronously. This means the script is executed as soon as it's downloaded, without blocking the browser in the meantime.

This implies that it's possible to script 2 is downloaded & executed before script 1.  According to http://caniuse.com/#feat=script-async, 94.57% of all browsers support this.Scripts with the defer attribute are executed in order (i.e. first script 1, then script 2). This also does not block the browser.Unlike async scripts, defer scripts are only executed after the entire document has been loaded.According to http://caniuse.com/#feat=script-defer, 94.59% of all browsers support this. 94.92% support it at least partially.An important note on browser compatibility: in some circumstances IE <= 9 may execute deferred scripts out of order. If you need to support those browsers, please read this first!The current state-of-the-art is to put scripts in the <head> tag and use the async or defer attributes. This allows your scripts to be downloaded asap without blocking your browser.The good thing is that your website should still load correctly on the 6% of browsers that do not support these attributes while speeding up the other 94%.Just before the closing body tag, as stated onhttp://developer.yahoo.com/performance/rules.html#js_bottomNon-blocking script tags can be placed just about anywhere:Such scripts will be executed asynchronously/after document ready, which means you cannot do this:Or this:Or this:Or this:Having said that, asynchronous scripts offer these advantages:It is possible to circumvent the execution order issues by using external scripts that support callbacks. Many third party JavaScript APIs now support non-blocking execution. Here is an example of loading the Google Maps API asynchronously.The standard advice, promoted by the Yahoo! Exceptional Performance team, is to put the <script> tags at the end of the document body so they don't block rendering of the page.But there are some newer approaches that offer better performance, as described in this answer about the load time of the Google Analytics JavaScript file:If you are using JQuery then put the javascript wherever you find it best and use $(document).ready() to ensure that things are loaded properly before executing any functions.On a side note: I like all my script tags in the <head> section as that seems to be the cleanest place.The modern approach in 2019 is using ES6 module type scripts.By default, modules are loaded asynchronously and defered. i.e. you can place them anywhere and they will load in parallel and execute when the page finishes loading. The differences between a script and a module are described here:https://stackoverflow.com/a/53821485/731548The execution of a module compared to a script is described here:https://developers.google.com/web/fundamentals/primers/modules#deferSupport is shown here:https://caniuse.com/#feat=es6-moduleXHTML Won't Validate if the script is anywhere other than within the head element. turns out it can be everywhere.You can defer the execution with something like jQuery so it doesn't matter where it's placed (except for a small performance hit during parsing).script tag should be use always before body  close or Bottom in HTML file.then you can see content of the page first before loading js file.check this if require :

http://stevesouders.com/hpws/rule-js-bottom.phpThe conventional (and widely accepted) answer is "at the bottom", because then the entire DOM will have been loaded before anything can start executing.There are dissenters, for various reasons, starting with the available practice to intentionally begin execution with a page onload event.The best place to put <script> tag is before closing </body> tag, so the downloading and executing it doesn't block the browser to parse the html in document,Also loading the js files externally has it's own advantages like it will be cached by browsers and can speed up page load times, it separates the HTML and JavaScript code and help to manage the code base better.but modern browsers also support some other optimal ways like async and defer to load external javascript files.Normally HTML page execution starts line by line. When an external JavaScript  element is encountered, HTML parsing is stopped until a JavaScript is download and ready for execution. This normal page execution can be changed using defer and async attribute.When a defer attribute is used, JavaScript is downloaded parallelly with HTML parsing but  will be execute only after full HTML parsing is done.When async attribute is used,  JavaScript is downloaded as soon as the script is encountered and after the download, it will be executed asynchronously (parallelly) along with HTML parsing.reference:knowledgehills.comDepends, if you are loading a script that's necessary to style your page / using actions in your page (like click of a button) then you better place it on the top. If your styling is 100% CSS and you have all fallback options for the button actions then you can place it in the bottom.Or best thing (if that's not a concern) is you can make a modal loading box, place your javascript at the bottom of your page and make it disappear when the last line of your script gets loaded. This way you can avoid users using actions in your page before the scripts are loaded. And also avoid the improper styling.Including scripts at the end is mainly used where the content/ styles of the website is to be shown first.including the scripts in the head loads the scripts early and can be used before the loading of the whole web site.if the scripts are entered at last the validation will happen only after the loading of the entire styles and design which is not appreciated for fast responsive websites.Depending on the script and its usage the best possible (in terms of page load and rendering time) may be to not use a conventional <script>-tag per se, but to dynamically trigger the loading of the script asynchronously.There are some different techniques, but the most straight forward is to use document.createElement("script") when the window.onload event is triggered. Then the script is loaded first when the page itself has rendered, thus not impacting the time the user has to wait for the page to appear.This naturally requires that the script itself is not needed for the rendering of the page.For more information, see the post Coupling async scripts by Steve Souders (creator of YSlow but now at Google).Script blocks DOM load untill it's loaded and executed.If you place scripts at the end of <body> all of DOM has chance to load and render (page will "display" faster). <script> will have access to all of those DOM elements.In other hand placing it after <body> start or above will execute script (where there's still no DOM elements).You are including jQuery which means you can place it wherever you wish and use .ready()I think it depends on the webpage execution. If the page that you want to display can not displayed properly  without loading JavaScript first then  you should include JavaScript file first. But If you can display/render a webpage without initially download JavaScript file, then you should put JavaScript code at the bottom of the page. Because it will emulate a speedy page load, and from an user's point of view it would seems like that page is loading faster. You can place most of <script> references at the end of <body>, But If there are active components on your page which are using external scripts,

then their dependency (js files) should come before that (ideally in head tag).Before the end of the body tag in order to prevent and UI blocking.At The End of HTML DocumentSo that it will not effect the loading of the HTML document in the browser at the time of execution.It makes more sense to me to include the script  after the HTML. Because most of the time I need the Dom to load before I execute my script. I could put it in the head tag but I don't like all the Document loading listener overhead. I want my code to be short and sweet and easy to read.  I've heard old versions of safari was quarky when adding your script outside of the head tag but I say who cares. I don't know anybody using that old crap do you.Good question by the way. the best place to write your JavaScript code in the end of document code after  tag to load the document then execute js code.

and if u write JQuery code write You can place where you want the scripts and one is not better than another practice.the situation is as follows:The page load linearly, "top-down", so if you put the script in the head ensures that it starts to load before everything, now, if you put it inside the body mixed with the code can cause page loads a unsightly manner.identify good practice does not depend on where.to support you, I will mention the following:you can place: and the page will load linearly page is loaded asynchronously with other content the content of the page will load before and after completion of loading the scripts are loadedgood practice here would be, when will implement each?I hope I've been helpful, anything just answer me this issue.

Is there a「null coalescing」operator in JavaScript?

Daniel Schaffer

[Is there a「null coalescing」operator in JavaScript?](https://stackoverflow.com/questions/476436/is-there-a-null-coalescing-operator-in-javascript)

Is there a null coalescing operator in Javascript?For example, in C#, I can do this:The best approximation I can figure out for Javascript is using the conditional operator:Which is sorta icky IMHO. Can I do better?

2009-01-24 18:18:02Z

Is there a null coalescing operator in Javascript?For example, in C#, I can do this:The best approximation I can figure out for Javascript is using the conditional operator:Which is sorta icky IMHO. Can I do better?The JavaScript equivalent of the C# null coalescing operator (??) is using a logical OR (||):There are cases (clarified below) that the behaviour won't match that of C#, but this is the general, terse way of assigning default/alternative values in JavaScript.Regardless of the type of the first operand, if casting it to a Boolean results in false, the assignment will use the second operand. Beware of all the cases below:This means:this solution works like the SQL coalesce function, it accepts any number of arguments, and returns null if none of them have a value.  It behaves like the C# ?? operator in the sense that "", false, and 0 are considered NOT NULL and therefore count as actual values.  If you come from a .net background, this will be the most natural feeling solution.Yes, it is coming soon. See proposal here and implementation status here.It looks like this:If || as a replacement of C#'s ?? isn't good enough in your case, because it swallows empty strings and zeros, you can always write your own function:Nobody has mentioned in here the potential for NaN, which--to me--is also a null-ish value. So, I thought I'd add my two-cents.For the given code:If you were to use the || operator, you get the first non-false value:If you use the typical coalesce method, as posted here, you will get c, which has the value: NaNNeither of these seem right to me.  In my own little world of coalesce logic, which may differ from your world, I consider undefined, null, and NaN as all being "null-ish".  So, I would expect to get back d (zero) from the coalesce method.If anyone's brain works like mine, and you want to exclude NaN, then this method will accomplish that:For those who want the code as short as possible, and don't mind a little lack of clarity, you can also use this as suggested by @impinball. This takes advantage of the fact that NaN is never equal to NaN.  You can read up more on that here: Why is NaN not equal to NaN?Currently no support, but the JS-standardization process is working on it: https://github.com/tc39/proposal-optional-chainingbeware of the JavaScript specific definition of null. there are two definitions for "no value" in javascript.

1. Null: when a variable is null, it means it contains no data in it, but the variable is already defined in the code. like this:in such case, the type of your variable is actually Object. test it.if such case, the type of your variable is 'undefined'.notice that if you use the type-converting comparison operator (==), JavaScript will act equally for both of these empty-values. to distinguish between them, always use the type-strict comparison operator (===).After reading your clarification, @Ates Goral's answer provides how to perform the same operation you're doing in C# in JavaScript.@Gumbo's answer provides the best way to check for null; however, it's important to note the difference in == versus === in JavaScript especially when it comes to issues of checking for undefined and/or null.There's a really good article about the difference in two terms here. Basically, understand that if you use == instead of ===, JavaScript will try to coalesce the values you're comparing and return what the result of the comparison after this coalescence. Note that React's create-react-app tool-chain supports the null-coalescing since version 3.3.0 (released 5.12.2019). From the release notes:This said, in case you use create-react-app 3.3.0+ you can start using the null-coalesce operator already today in your React apps.For people using Typescript, you can use the nullish coalescing operator from Typescript 3.7From the docs - Does it exist in JavaScript? Yes, it does. BUT. It's currently as of 2020-02-06 at Stage 3 and is not supported everywhere, yet. Follow the link in URL below and go to the "Specifications" and "Browser compatibility" headers for more info on where it is at.Quote from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operatorWant examples? Follow the link I posted, it has everything.

What does「javascript:void(0)」mean?

omg

[What does「javascript:void(0)」mean?](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)

I've seen such hrefs many times, but I don't know what exactly that means.

2009-08-18 05:20:13Z

I've seen such hrefs many times, but I don't know what exactly that means.An explanation is provided here: void operator.The reason you’d want to do this with the href of a link is that normally, a javascript: URL will redirect the browser to a plain text version of the result of evaluating that JavaScript. But if the result is undefined, then the browser stays on the same page. void(0) is just a short and simple script that evaluates to undefined.In addition to the technical answer, javascript:void means the author is Doing It Wrong.There is no good reason to use a javascript: pseudo-URL(*). In practice it will cause confusion or errors should anyone try things like ‘bookmark link’, ‘open link in a new tab’, and so on. This happens quite a lot now people have got used to middle-click-for-new-tab: it looks like a link, you want to read it in a new tab, but it turns out to be not a real link at all, and gives unwanted results like a blank page or a JS error when middle-clicked.<a href="#"> is a common alternative which might arguably be less bad. However you must remember to return false from your onclick event handler to prevent the link being followed and scrolling up to the top of the page.In some cases there may be an actual useful place to point the link to. For example if you have a control you can click on that opens up a previously-hidden <div id="foo">, it makes some sense to use <a href="#foo"> to link to it. Or if there is a non-JavaScript way of doing the same thing (for example, ‘thispage.php?show=foo’ that sets foo visible to begin with), you can link to that.Otherwise, if a link points only to some script, it is not really a link and should not be marked up as such. The usual approach would be to add the onclick to a <span>, <div>, or an <a> without an href and style it in some way to make it clear you can click on it. This is what StackOverflow [did at the time of writing; now it uses href="#"].The disadvantage of this is that you lose keyboard control, since you can't tab onto a span/div/bare-a or activate it with space. Whether this is actually a disadvantage depends on what sort of action the element is intended to take. You can, with some effort, attempt to mimic the keyboard interactability by adding a tabIndex to the element, and listening for a Space keypress. But it's never going to 100% reproduce the real browser behaviour, not least because different browsers can respond to the keyboard differently (not to mention non-visual browsers).If you really want an element that isn't a link but which can be activated as normal by mouse or keyboard, what you want is a <button type="button"> (or <input type="button"> is just as good, for simple textual contents). You can always use CSS to restyle it so it looks more like a link than a button, if you want. But since it behaves like a button, that's how really you should mark it up.(*: in site authoring, anyway. Obviously they are useful for bookmarklets. javascript: pseudo-URLs are a conceptual bizarreness: a locator that doesn't point to a location, but instead calls active code inside the current location. They have caused massive security problems for both browsers and webapps, and should never have been invented by Netscape.)It means it’ll do nothing. It’s an attempt to have the link not ‘navigate’ anywhere. But it’s not the right way.You should actually just return false in the onclick event, like so:Typically it’s used if the link is doing some ‘JavaScript-y’ thing. Like posting an AJAX form, or swapping an image, or whatever. In that case you just make whatever function is being called return false.To make your website completely awesome, however, generally you’ll include a link that does the same action, if the person browsing it chooses not to run JavaScript.There is a HUGE difference in the behaviour of "#" vs javascript:void"#" scrolls you to the TOP of the page

while "javascript:void(0);" does not.This is very important if you are coding dynamic pages.

the user does not want to go back to top just because he clicked a link on the page.It is a very popular method of adding JavaScript functions to HTML links.For example: the [Print] links that you see on many webpages are written like this:Why do we need href while onclick alone can get the job done? Because when users hover over the text 'Print' when there's no href, the cursor will change to a caret (ꕯ) instead of a pointer (👆). Only having href on an a tag validates it as a hyperlink.An alternative to href="javascript:void(0);", is the use of href="#". This alternative doesn't require JavaScript to be turned on in the user's browser, so it is more compatible.You should always have an href on your a tags. Calling a JavaScript function that returns 'undefined' will do just fine. So will linking to '#'.Anchor tags in Internet Explorer 6 without an href do not get the a:hover style applied.Yes, it is terrible and a minor crime against humanity, but then again so is Internet Explorer 6 in general.I hope this helps.Internet Explorer 6 is actually a major crime against humanity.It's worth mentioning that you'll sometimes see void 0 when checking for undefined, simply because it requires less characters.For example:vs.Some minification methods replace undefined with void 0 for this reason.Usage of javascript:void(0) means that the author of the HTML is misusing the anchor element in place of the button element.Source: MDN's <a> Page.void is an operator that is used to return a undefined value so the browser will not be able to load a new page.Web browsers will try and take whatever is used as a URL and load it unless it is a JavaScript function that returns null. For example, if we click a link like this:then an alert message will show up without loading a new page, and that is because alert is a function that returns a null value. This means that when the browser attempts to load a new page it sees null and has nothing to load.An important thing to note about the void operator is that it requires a value and cannot be used by itself. We should use it like this:To understand this concept one should first understand the void operator in JavaScript.The syntax for the void operator is: void «expr» which evaluates expr and returns undefined.If you implement void as a function, it looks as follows:This void operator has one important usage that is - discarding the result of an expression.In some situations, it is important to return undefined as opposed to the result of an expression. Then void can be used to discard that result. One such situation involves javascript: URLs, which should be avoided for links, but are useful for bookmarklets. When you visit one of those URLs, many browsers replace the current document with the result of evaluating the URLs「content」, but only if the result isn’t undefined. Hence, if you want to open a new window without changing the currently displayed content, you can do the following:The void operator evaluates the given expression and then returns undefined.

It avoids refreshing the page.Web Developers use javascript:void(0) because it is the easiest way to prevent default behavior of a tag. void(*anything*) returns undefined and it is a falsy value. and returning a falsy value is like return false in onclick event of a tag that prevent its default behavior. So I think javascript:void(0) is the simplest way to prevent default behavior of a tag.A link must have an HREF target to be specified to enable it to be a usable display object.Most browsers will not parse advanced JavaScript in antag such as: because the HREF tag in most browsers does not allow whitespace, or will convert whitespace to %20, the HEX equivelent of a SPACE, which renders your JavaScript absolutely useless to the interpreter.So if you want to use an A HREF tag to execute inline JavaScript, you must specify a valid value for HREF FIRST that isn't too complex (doesn't contain whitespace), and then provide the JavaScript in an event attribute tag like OnClick, OnMouseOver, OnMouseOut, etc.The typical answer is to do something like this:This works fine but it makes the page jump to the top because of the pound sign/hash tag tells it to do so.Just providing a pound sign/hash tag in an A HREF tag actually specifies the root anchor, which is always, by default the top of the page, you can specify a different location by using specifying the NAME attribute inside an A HREF tag.You can then change your A HREF tag to jump to 'middleofpage' and execute the JavaScript in the OnClick event, once that happens like so:There will be MANY times where you do not want that link jumping around, so you can do two things:Now it will go nowhere when clicked, but it could cause the page to re-center itself from it's current viewport. This is not pretty. What is the best way to provide in-line javascript, using an A HREF, but without having to do any of the above? JavaScript:void(0); This tells the browser to go NOWHERE, but instead execute the valid JavaScript:void(0); function first in the HREF tag because it contains no whitespace, and will not be parsed as a URL. It will instead be run by the compiler. VOID is a keyword which, when supplied with a perameter of 0 returns UNDEFINED, which does not use any more resources to handle a return value that would occur without specifying the 0 (it is more memory-management/performance friendly).The next thing that happens is the OnClick gets executed. The page does not move, nothing happens display-wise.JavaScript: URLs aside; this is where void can be useful to write shorter code.Another example where is used javascript.void(0) . I'm not sure whether it is the correct way, but does the job

How to manage a redirect request after a jQuery Ajax call

Elliot Vargas

[How to manage a redirect request after a jQuery Ajax call](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

I'm using $.post() to call a servlet using Ajax and then using the resulting HTML fragment to replace a div element in the user's current page. However, if the session times out, the server sends a redirect directive to send the user to the login page. In this case, jQuery is replacing the div element with the contents of the login page, forcing the user's eyes to witness a rare scene indeed. How can I manage a redirect directive from an Ajax call with jQuery 1.2.6?

2008-10-13 21:29:50Z

I'm using $.post() to call a servlet using Ajax and then using the resulting HTML fragment to replace a div element in the user's current page. However, if the session times out, the server sends a redirect directive to send the user to the login page. In this case, jQuery is replacing the div element with the contents of the login page, forcing the user's eyes to witness a rare scene indeed. How can I manage a redirect directive from an Ajax call with jQuery 1.2.6?I read this question and implemented the approach that has been stated regarding setting the response HTTP status code to 278 in order to avoid the browser transparently handling the redirects. Even though this worked, I was a little dissatisfied as it is a bit of a hack.After more digging around, I ditched this approach and used JSON. In this case, all responses to AJAX requests have the status code 200 and the body of the response contains a JSON object that is constructed on the server. The JavaScript on the client can then use the JSON object to decide what it needs to do.I had a similar problem to yours. I perform an AJAX request that has 2 possible responses: one that redirects the browser to a new page and one that replaces an existing HTML form on the current page with a new one. The jQuery code to do this looks something like:The JSON object "data" is constructed on the server to have 2 members: data.redirect and data.form. I found this approach to be much better.I solved this issue by:No browsers handle 301 and 302 responses correctly. And in fact the standard even says they should handle them "transparently" which is a MASSIVE headache for Ajax Library vendors. In Ra-Ajax we were forced into using HTTP response status code 278 (just some "unused" success code) to handle transparently redirects from the server...This really annoys me, and if someone here have some "pull" in W3C I would appreciate that you could let W3C know that we really need to handle 301 and 302 codes ourselves...! ;)The solution that was eventually implemented was to use a wrapper for the callback function of the Ajax call and in this wrapper check for the existence of a specific element on the returned HTML chunk. If the element was found then the wrapper executed a redirection. If not, the wrapper forwarded the call to the actual callback function. For example, our wrapper function was something like:Then, when making the Ajax call we used something like:This worked for us because all Ajax calls always returned HTML inside a DIV element that we use to replace a piece of the page. Also, we only needed to redirect to the login page.I like Timmerz's method with a slight twist of lemon. If you ever get returned contentType of text/html when you're expecting JSON, you are most likely being redirected. In my case, I just simply reload the page, and it gets redirected to the login page. Oh, and check that the jqXHR status is 200, which seems silly, because you are in the error function, right? Otherwise, legitimate error cases will force an iterative reload (oops)Use the low-level $.ajax() call:Try this for a redirect:I just wanted to share my approach as this might it might help someone:I basically included a JavaScript module which handles the authentication stuff like displaying the username and also this case handling the redirect to the login page.My scenario: We basically have an ISA server in between which listens to all requests and responds with a 302 and a location header to our login page.In my JavaScript module my initial approach was something likeThe problem (as many here already mentioned) is that the browser handles the redirect by itself wherefore my ajaxComplete callback got never called, but instead I got the response of the already redirected Login page which obviously was a status 200. The problem: how do you detect whether the successful 200 response is your actual login page or just some other arbitrary page??Since I was not able to capture 302 redirect responses, I added a LoginPage header on my login page which contained the url of the login page itself. In the module I now listen for the header and do a redirect:...and that works like charm :). You might wonder why I include the url in the LoginPage header...well basically because I found no way of determining the url of GET resulting from the automatic location redirect from the xhr object...I know this topic is old, but I'll give yet another approach I've found and previously described here. Basically I'm using ASP.MVC with WIF (but this is not really important for the context of this topic - answer is adequate no matter which frameworks are used. The clue stays unchanged - dealing with issues related to authentication failures while performing ajax requests). The approach shown below can be applied to all ajax requests out of the box (if they do not redefine beforeSend event obviously).Before any ajax request is performed CheckPulse method is invoked (the controller method which can be anything simplest):If user is not authenticated (token has expired) such method cannot be accessed (protected by Authorize attribute). Because the framework handles authentication, while token expires, it puts http status 302 to the response. If you don't want your browser to handle 302 response transparently, catch it in Global.asax and change response status - for example to 200 OK. Additionally, add header, which instructs you to process such response in special way (later at the client side):Finally at the client side check for such custom header. If present - full redirection to logon page should be done (in my case window.location is replaced by url from request which is handled automatically by my framework).I think a better way to handle this is to leverage the existing HTTP protocol response codes, specifically 401 Unauthorized.Here is how I solved it:IMO this is more generic and you are not writing some new custom spec/header.  You also should not have to modify any of your existing ajax calls.Edit: Per @Rob's comment below, 401 (the HTTP status code for authentication errors) should be the indicator. See 403 Forbidden vs 401 Unauthorized HTTP responses for more detail. With that being said some web frameworks use 403 for both authentication AND authorization errors - so adapt accordingly. Thanks Rob.I resolved this issue like this:Add a middleware to process response, if it is a redirect for an ajax request, change the response to a normal response with the redirect url.Then in ajaxComplete, if the response contains redirect, it must be a redirect, so change the browser's location.Most of the given solutions use a workaround, using an extra header or an inappropiate HTTP code. Those solutions will most probably work but feel a bit 'hacky'. I've come up with another solution.We're using WIF which is configured to redirect (passiveRedirectEnabled="true") on a 401 response. The redirect is usefull when handling normal requests but won't work for AJAX requests (since browsers won't execute the 302/redirect). Using the following code in your global.asax you can disable the redirect for AJAX requests:This allows you to return 401 responses for AJAX requests, which your javascript can then handle by reloading the page. Reloading the page  will throw a 401 which will be handled by WIF (and WIF will redirect the user to the login page).An example javascript to handle 401 errors:Another solution I found (especially useful if you want to set a global behaviour) is to use the $.ajaxsetup() method together with the statusCode property. Like others pointed out, don't use a redirect statuscode (3xx), instead use a 4xx statuscode and handle the redirect client-side.Replace 400 with the statuscode you want to handle. Like already mentioned 401 Unauthorized could be a good idea. I use the 400 since it's very unspecific and I can use the 401 for more specific cases (like wrong login credentials). So instead of redirecting directly your backend should return a 4xx error-code when the session timed out and you you handle the redirect client-side. Works perfect for me even with frameworks like backbone.jsThis problem may appear then using ASP.NET MVC RedirectToAction method. To prevent form displaying the response in div you can simply do some kind of ajax response filter for incomming responses with $.ajaxSetup. If the response contains MVC redirection you can evaluate this expression on JS side. Example code for JS below:If data is: "window.location = '/Acount/Login'" above filter will catch that and evaluate to make the redirection instead of letting the data to be displayed.I have a simple solution that works for me, no server code change needed...just add a tsp of nutmeg...I check the presence of html tag, but you can change the indexOf to search for whatever unique string exists in your login page...Putting together what Vladimir Prudnikov and Thomas Hansen said:This makes the browser treat the response as a success, and hand it to your Javascript.TryPut it on the login page. If it was loaded in a div on the main page, it will redirect til the login page. "#site" is a id of a div which is located on all pages except login page.While the answers seem to work for people if you're using Spring Security I have found extending LoginUrlAuthenticationEntryPoint and adding specific code to handle AJAX more robust.  Most of the examples intercept all redirects not just authentication failures.  This was undesirable for the project I work on.  You may find the need to also extend ExceptionTranslationFilter and override the "sendStartAuthentication" method to remove the caching step if you don't want the failed AJAX request cached.Example AjaxAwareAuthenticationEntryPoint:Sources:

1, 2I solved this by putting the following in my login.php page.Let me just quote again the problem as described by @StegIMHO this is a real challenge and will have to be officially extended to the current HTTP standards.I believe the new Http Standard will be to use a new status-code.

meaning: currently 301/302 tells the browser to go and fetch the content of this request to a new location.In the extended standard, it will say that if the response status: 308 (just an example), then the browser should redirect the main page to the location provided.That being said; I'm inclined to already mimic this future behavior, and therefore when a document.redirect is needed, I have the server respond as:When JS gets the "status: 204", it checks for the existence of the x-status: 308 header, and does a document.redirect to the page provided in the location header.Does this make any sense to you?Some might find the below useful:I wanted clients to be redirected to the login page for any rest-action that is sent without an authorization token. Since all of my rest-actions are Ajax based, I needed a good generic way to redirect to the login page instead of handling the Ajax success function.This is what I've done:On any Ajax request my server will return a Json 200 response "NEED TO AUTHENTICATE" (if the client needs to authenticate).Simple example in Java (server side):In my Javascript I've added the following code:And that's about it.in the servlet you should put 

response.setStatus(response.SC_MOVED_PERMANENTLY);

to send the '301' xmlHttp status you need for a redirection...and in the $.ajax function you should not use the .toString() function..., justif (xmlHttp.status == 301) {

    top.location.href = 'xxxx.jsp';

}the problem is it is not very flexible, you can't decide where you want to redirect..redirecting through the servlets should be the best way. but i still can not find the right way to do it.I just wanted to latch on to any ajax requests for the entire page. @SuperG got me started. Here is what I ended up with:I wanted to specifically check for certain http status codes to base my decision on. However, you can just bind to ajaxError to get anything other than success (200 only perhaps?) I could have just written:If you also want to pass the values then you can also set the session variables and access 

Eg: 

In your jsp you can write And then you can store this temp value in your javascript variable and play around I didn't have any success with the header solution - they were never picked up in my ajaxSuccess / ajaxComplete method. I used Steg's answer with the custom response, but I modified the JS side some. I setup a method that I call in each function so I can use standard $.get and $.post methods.Example of it in use...Finally, I solve the problem by adding a custom HTTP Header. Just before response for every request in server side, i add the current requested url to response's header.My application type on server is Asp.Net MVC, and it has a good place to do it. in Global.asax i implemented the Application_EndRequest event so:It works perfect for me! Now in every response of the JQuery $.post i have the requested url and also other response headers which comes as result of POST method by status 302, 303 ,... .and other important thing is that there is no need to modify code on server side nor client side.and the next is the ability to get access to the other information of post action such errors, messages, and ..., In this way.I posted this, maybe help someone :)I was having this problem on a django app I'm tinkering with (disclaimer: I'm tinkering to learn, and am in no way an expert). What I wanted to do was use jQuery ajax to send a DELETE request to a resource, delete it on the server side, then send a redirect back to (basically) the homepage. When I sent HttpResponseRedirect('/the-redirect/') from the python script, jQuery's ajax method was receiving 200 instead of 302. So, what I did was to send a response of 300 with:Then I sent/handled the request on the client with jQuery.ajax like so:Maybe using 300 isn't "right", but at least it worked just like I wanted it to.PS :this was a huge pain to edit on the mobile version of SO. Stupid ISP put my service cancellation request through right when I was done with my answer! You can also hook XMLHttpRequest send prototype. This will work for all sends (jQuery/dojo/etc) with one handler.I wrote this code to handle a 500 page expired error, but it should work just as well to trap a 200 redirect. Ready the wikipedia entry on XMLHttpRequest onreadystatechange about the meaning of readyState.Additionally you will probably want to redirect user to the given in headers URL. So finally it will looks like this:UPD: Opps. Have the same task, but it not works. Doing this stuff. I'll show you solution when I'll find it.I got a working solulion using the answers from @John and @Arpad  link and @RobWinch linkI use Spring Security 3.2.9 and jQuery 1.10.2.Extend Spring's class to cause 4XX response only from AJAX requests:applicationContext-security.xmlIn my JSPs, add a global AJAX error handler as shown hereAlso, remove existing error handlers from AJAX calls in JSP pages:I hope it helps others.Update1

I found that I needed to add the option (always-use-default-target="true") to the form-login config.

This was needed since after an AJAX request gets redirected to the login page (due to expired session), Spring remembers the previous AJAX request and auto redirects to it after login. This causes the returned JSON to be displayed on the browser page. Of course, not what I want.Update2

Instead of using always-use-default-target="true", use @RobWinch example of blocking AJAX requests from the requstCache. This allows normal links to be redirected to their original target after login, but AJAX go to the home page after login.

How can I add a key/value pair to a JavaScript object?

James Skidmore

[How can I add a key/value pair to a JavaScript object?](https://stackoverflow.com/questions/1168807/how-can-i-add-a-key-value-pair-to-a-javascript-object)

Here is my object literal:How can I add field key3 with value3 to the object?

2009-07-22 23:21:51Z

Here is my object literal:How can I add field key3 with value3 to the object?There are two ways to add new properties to an object:The first form is used when you know the name of the property. The second form is used when the name of the property is dynamically determined. Like in this example:A real JavaScript array can be constructed using either:Object.assign(dest, src1, src2, ...) merges objects.It overwrites dest with properties and values of (however many) source objects, then returns dest.From MDN:It works in current Chrome and current Firefox. They say it doesn’t work in current Edge.Object assignment operator +=:Oops... I got carried away. Smuggling information from the future is illegal. Duly obscured!I have grown fond of the LoDash / Underscore when writing larger projects.Adding by obj['key'] or obj.key are all solid pure JavaScript answers. However both of LoDash and Underscore libraries do provide many additional convenient functions when working with Objects and Arrays in general..push() is for Arrays, not for objects.Depending what you are looking for, there are two specific functions that may be nice to utilize and give functionality similar to the the feel of arr.push(). For more info check the docs, they have some great examples there.The second object will overwrite or add to the base object.

undefined values are not copied.The second object will overwrite or add to the base object.

undefined will be copied.The second object contains defaults that will be added to base object if they don't exist.

undefined values will be copied if key already exists.In addition, it may be worthwhile mentioning jQuery.extend, it functions similar to _.merge and may be a better option if you already are using jQuery.The second object will overwrite or add to the base object.

undefined values are not copied.It may be worth mentioning the ES6/ ES2015 Object.assign, it functions similar to _.merge and may be the best option if you already are using an ES6/ES2015 polyfill like Babel if you want to polyfill yourself.The second object will overwrite or add to the base object.

undefined will be copied.You could use either of these (provided key3 is the acutal key you want to use)orIf key3 is a variable, then you should do:After this, requesting arr.a_key would return the value of value3, a literal 3.because your arr is not really an array... It's a prototype object. The real array would be:but it's still not right. It should actually be:I know there is already an accepted answer for this but I thought I'd document my idea somewhere.  Please [people] feel free to poke holes in this idea, as I'm not sure if it is the best solution... but I just put this together a few minutes ago:You would utilize it in this way:Since, the prototype function is returning this you can continue to chain .push's to the end of your obj variable: obj.push(...).push(...).push(...);Another feature is that you can pass an array or another object as the value in the push function arguments.  See my fiddle for a working example: http://jsfiddle.net/7tEme/You can create a class with the answer of  @Ionuț G. StanCreating a new object with the last class:Printing the object Printing a KeyI'm newbie in javascript, comments are welcome. Works for me.And we want to add prop2 : 2 to this object, these are the most convenient options:So which one do we use then? The dot operator is more clean syntax and should be used as a default (imo). However, the dot operator is not capable of adding dynamic keys to an object, which can be very useful in some cases. Here is an example:When we want to merge the properties of 2 objects these are the most convenient options:Which one do we use?Two most used ways already mentioned in most answersOne more way to define a property is using Object.defineProperty()This method is useful when you want to have more control while defining property.

Property defined can be set as enumerable, configurable and writable by user.Your example shows an Object, not an Array.  In that case, the preferred way to add a field to an Object is to just assign to it, like so:supported by most of browsers, and it checks if object key available or not you want to add, if available it overides existing key value and it not available it add key with valueexample 1example 2example 3In case you have multiple anonymous Object literals inside an Object and want to add another Object containing key/value pairs, do this:Firebug' the Object:returns:Code:will add Object {name="Peanuts", value="12"} to the Comicbook ObjectEither obj['key3'] = value3 or obj.key3 = value3 will add the new pair to the obj.However, I know jQuery was not mentioned, but if you're using it, you can add the object through $.extend(obj,{key3: 'value3'}). E.g.:jQuery.extend(target[,object1][,objectN]) merges the contents of two or more objects together into the first object.And it also allows recursive adds/modifications with $.extend(true,object1,object2);:A short and elegant way in next Javascript specification (candidate stage 3) is: obj = { ... obj, ... { key3 : value3 } }A deeper discussion can be found in Object spread vs Object.assign and on Dr. Axel Rauschmayers site.It works already in node.js since release 8.6.0. Vivaldi, Chrome, Opera, and Firefox in up to date releases know this feature also, but Mirosoft don't until today, neither in Internet Explorer nor in Edge.You can either add it this way:or this way:The answers suggesting keying into the object with the variable key3 would only work if the value of key3 was 'key3'.According to Property Accessors defined in ECMA-262(http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf, P67), there are two ways you can do to add properties to a exists object. All these two way, the Javascript engine will treat them the same.The first way is to use dot notation:But this way, you should use a IdentifierName after dot notation.The second way is to use bracket notation:and another form:This way, you could use a Expression (include IdentifierName) in the bracket notation.We can do this in this way too.Output like this:-Today 2020.01.14 I perform tests on MacOs HighSierra 10.13.6 on Chrome v78.0.0, Safari v13.0.4 and Firefox v71.0.0, for  chosen solutions. I divide solutions to mutable (first letter M) and immutable (first letter I). I also provide few immutable solutions (IB,IC,ID/IE) not yet published in answers to this questionConclusionsIn snippet below there are presended tested solution, you can prefrom test on your machine HERE

In order to prepend a key-value pair to an object so the for in works with that element first do this:Best way to achieve same is stated below:Since its a question of the past but the problem of present. Would suggest one more solution: Just pass the key and values to the function and you will get a map object.

How do you access the matched groups in a JavaScript regular expression?

nickf

[How do you access the matched groups in a JavaScript regular expression?](https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression)

I want to match a portion of a string using a regular expression and then access that parenthesized substring:What am I doing wrong?I've discovered that there was nothing wrong with the regular expression code above: the actual string which I was testing against was this:Reporting that "%A" is undefined seems a very strange behaviour, but it is not directly related to this question, so I've opened a new one, Why is a matched substring returning "undefined" in JavaScript?.The issue was that console.log takes its parameters like a printf statement, and since the string I was logging ("%A") had a special value, it was trying to find the value of the next parameter.

2009-01-11 07:21:20Z

I want to match a portion of a string using a regular expression and then access that parenthesized substring:What am I doing wrong?I've discovered that there was nothing wrong with the regular expression code above: the actual string which I was testing against was this:Reporting that "%A" is undefined seems a very strange behaviour, but it is not directly related to this question, so I've opened a new one, Why is a matched substring returning "undefined" in JavaScript?.The issue was that console.log takes its parameters like a printf statement, and since the string I was logging ("%A") had a special value, it was trying to find the value of the next parameter.You can access capturing groups like this:And if there are multiple matches you can iterate over them:As you can see the way to iterate over multiple matches was not very intuitive. This lead to the proposal of the String.prototype.matchAll method. This new method is expected to ship in the ECMAScript 2020 specification. It gives us a clean API and solves multiple problems. It has been started to land on major browsers and JS engines as Chrome 73+ / Node 12+ and Firefox 67+.The method returns an iterator and is used as follows:As it returns an iterator, we can say it's lazy, this is useful when handling particularly large numbers of capturing groups, or very large strings. But if you need, the result can be easily transformed into an Array by using the spread syntax or the Array.from method:In the meantime, while this proposal gets more wide support, you can use the official shim package.Also, the internal workings of the method are simple. An equivalent implementation using a generator function would be as follows:A copy of the original regexp is created; this is to avoid side-effects due to the mutation of the lastIndex property when going through the multple matches.Also, we need to ensure the regexp has the global flag to avoid an infinite loop.I'm also happy to see that even this StackOverflow question was referenced in the discussions of the proposal.Here’s a method you can use to get the n​th capturing group for each match:The \b isn't exactly the same thing. (It works on --format_foo/, but doesn't work on format_a_b) But I wanted to show an alternative to your expression, which is fine. Of course, the match call is the important thing.In regards to the multi-match parentheses examples above, I was looking for an answer here after not getting what I wanted from:After looking at the slightly convoluted function calls with while and .push() above, it dawned on me that the problem can be solved very elegantly with mystring.replace() instead (the replacing is NOT the point, and isn't even done, the CLEAN, built-in recursive function call option for the second parameter is!):After this, I don't think I'm ever going to use .match() for hardly anything ever again.Last but not least, I found one line of code that worked fine for me (JS ES6):This will return:To get access to the matched groups, in each of the matched patterns, you need a function or something similar to iterate over the match. There are a number of ways you can do this, as many of the other answers show. Most other answers use a while loop to iterate over all matched patterns, but I think we all know the potential dangers with that approach. It is necessary to match against a new RegExp() instead of just the pattern itself, which only got mentioned in a comment. This is because the .exec() method behaves similar to a generator function – it stops every time there is a match, but keeps its .lastIndex to continue from there on the next .exec() call.Below is an example of a function searchString which returns an Array of all matched patterns, where each match is an Array with all the containing matched groups. Instead of using a while loop, I have provided examples using both the Array.prototype.map() function as well as a more performant way – using a plain for-loop.These are less performant since they basically implement a forEach-loop instead of the faster for-loop.I have yet to compare these alternatives to the ones previously mentioned in the other answers, but I doubt this approach is less performant and less fail-safe than the others.Your syntax probably isn't the best to keep. FF/Gecko defines RegExp as an extension of Function.

(FF2 went as far as typeof(/pattern/) == 'function')It seems this is specific to FF -- IE, Opera, and Chrome all throw exceptions for it.Instead, use either method previously mentioned by others: RegExp#exec or String#match.

They offer the same results:String#matchAll (see the Stage 3 Draft / December 7, 2018 proposal), simplifies acccess to all groups in the match object (mind that Group 0 is the whole match, while further groups correspond to the capturing groups in the pattern):This method yields a similar output to Regex.Matches in C#, re.finditer in Python, preg_match_all in PHP.See a JS demo (tested in Google Chrome 73.0.3683.67 (official build), beta (64-bit)):The console.log([...matches]) showsYou may also get match value or specific group values usingNOTE: See the browser compatibility details.There is no need to invoke the exec method! You can use "match" method directly on the string. Just don't forget the parentheses.Position 0 has a string with all the results. Position 1 has the first match represented by parentheses, and position 2 has the second match isolated in your parentheses. Nested parentheses are tricky, so beware!A one liner that is practical only if you have a single pair of parenthesis:Using your code:Edit: Safari 3, if it matters.With es2018 you can now String.match() with named groups, makes your regex more explicit of what it was trying to do.and you'll get something like Your code works for me (FF3 on Mac) even if I agree with PhiLo that the regex should probably be:(But, of course, I'm not sure because I don't know the context of the regex.)You don't really need an explicit loop to parse multiple matches — pass a replacement function as the second argument as described in: String.prototype.replace(regex, func):The m0 argument represents the full matched substring {0}, {1}, etc. m1 represents the first matching group, i.e. the part enclosed in brackets in the regex which is 0 for the first match. And position is the starting index within the string where the matching group was found — unused in this case.In the code \1 represented matched by first group ([a-z])Get all group occurrence I you are like me and wish regex would return an Object like this:then snip the function from below

How to get the value from the GET parameters?

joe

[How to get the value from the GET parameters?](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters)

I have a URL with some GET parameters as follows:I need to get the whole value of c. I tried to read the URL, but I got only m2. How do I do this using JavaScript?

2009-06-11 08:32:49Z

I have a URL with some GET parameters as follows:I need to get the whole value of c. I tried to read the URL, but I got only m2. How do I do this using JavaScript?JavaScript itself has nothing built in for handling query string parameters. Code running in a (modern) browser you can use the URL object (which is part of the APIs provided by browsers to JS):For older browsers (including Internet Explorer), you can use this polyfill or the code from the original version of this answer that predates URL:You could access location.search, which would give you from the ? character on to the end of the URL or the start of the fragment identifier (#foo), whichever comes first.Then you can parse it with this:You can get the query string from the URL of the current page with:Most implementations I've seen miss out URL-decoding the names and the values.Here's a general utility function that also does proper URL-decoding:source    This is an easy way to check just one parameter:Example URL:Example Javascript:if "myParam" exists in the URL... variable myParam will contain "2", otherwise it will be undefined.Maybe you want a default value, in that case:Update: This works better:And it works right even when URL is full of parameters.Browsers vendors have implemented a native way to do this via URL and URLSearchParams.Currently supported in Firefox, Opera, Safari, Chrome and Edge. For a list of browser support see here.https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams

https://developer.mozilla.org/en-US/docs/Web/API/URL/URLhttps://url.spec.whatwg.org/Eric Bidelman, an engineer at Google, recommends using this polyfill for unsupported browsers.I found this ages ago, very easy:Then call it like this:You can get the query string in location.search, then you can split everything after the question mark:I wrote a more simple and elegant solution.Here is a recursive solution that has no regex, and has minimal mutation (only the params object is mutated, which I believe is unavoidable in JS).It's awesome because it:Code:A super simple way using URLSearchParams.It's currently supported in Chrome, Firefox, Safari, Edge, and others.I made a function that does this:Update 5/26/2017, here is an ES7 implementation (runs with babel preset stage 0, 1, 2, or 3):Some tests:Update 3/26/2018, here is a Typescript implementation:Update 2/13/2019, here is an updated TypeScript implementation that works with TypeScript 3.See thisECMAScript 6 solution:I useI use the parseUri library. It allows you to do exactly what you are asking for:Here is my solution. As advised by Andy E while answering this question, it's not good for your script's performance if it's repeatedly building various regex strings, running loops etc just to get a single value. So, I've come up with a simpler script that returns all the GET parameters in a single object. You should call it just once, assign the result to a variable and then, at any point in the future, get any value you want from that variable using the appropriate key. Note that it also takes care of URI decoding (i.e things like %20) and replaces + with a space:So, here are are a few tests of the script for you to see:Or if you don't want to reinvent the URI parsing wheel use URI.jsTo get the value of a parameter named foo:What that does is Here's a fiddle for this.... http://jsfiddle.net/m6tett01/12/For Single Parameter Value like this index.html?msg=1 use following code,For All Parameter Value use following Code,Here I am posting one example. But it's in jQuery. Hope it will help others:The shortest way:this question has too many answers, so i'm adding another one.usage:this copes with empty parameters (those keys present without "=value"), exposure of both a scalar and array-based value retrieval API, as well as proper URI component decoding.From the urlStr string:or from the current URL:Explanation:Got from here: http://jquery-howto.blogspot.ru/2009/09/get-url-parameters-values-with-jquery.htmlSimple waythen call it like getParams(url)Yet another suggestion. There are some good answers already, but I found them needlessly complex and hard to understand. This is short, simple, and returns a simple associative array with key names corresponding to the token names in the URL. I added a version with comments below for those who want to learn.Note this relies on jQuery ($.each) for its loop, which I recommend instead of forEach. I find it simpler to ensure cross-browser compatibility using jQuery across the board rather than plugging in individual fixes to support whichever new functions aren't supported in older browsers.Edit: After I wrote this I noticed Eric Elliott's answer, which is almost the same, though it uses forEach, while I'm generally against (for reasons stated above).Commented version: For the examples below we'll assume this address:You can assign the URL tokens to your own variable:Then refer to each URL token by name like this:This would print "4".You can also simply refer to a a token name from the function directly:...which would print "murray".Here is the angularJs source code for parsing url query parameters into an Object :You can add this function to window.location:I had the need to read a URL GET variable and complete an action based on the url parameter. I searched high and low for a solution and came across this little piece of code. It basically reads the current page url, perform some regular expression on the URL then saves the url parameters in an associative array, which we can easily access.So as an example if we had the following url with the javascript at the bottom in place.All we’d need to do to get the parameters id and page are to call this:The Code will be:This Gist by Eldon McGuinness is by far the most complete implementation of a JavaScript query string parser that I've seen so far.Unfortunately, it's written as a jQuery plugin.I rewrote it to vanilla JS and made a few improvements :See also this Fiddle.Elegant, functional style solutionLet's create an object containing URL param names as keys, then we can easily extract the parameter by its name:

Sorting an array of objects by property values

Stobor

[Sorting an array of objects by property values](https://stackoverflow.com/questions/979256/sorting-an-array-of-objects-by-property-values)

I've got the following objects using AJAX and stored them in an array:How do I create a function to sort the objects by the price property in ascending or descending order using JavaScript only?

2009-06-11 04:12:35Z

I've got the following objects using AJAX and stored them in an array:How do I create a function to sort the objects by the price property in ascending or descending order using JavaScript only?Sort homes by price in ascending order:Or after ES6 version:Some documentation can be found here.Here's a more flexible version, which allows you to create 

reusable sort functions, and sort by any field.To sort it you need to create a comparator function taking two arguments. Then call the sort function with that comparator function as follows:If you want to sort ascending switch the expressions on each side of the minus sign.for string sorting in case some one needs it,If you have an ES6 compliant browser you can use:The difference between ascending and descending sort order is the sign of the value returned by your compare function:Here's a working code snippet:You want to sort it in Javascript, right?  What you want is the sort() function.  In this case you need to write a comparator function and pass it to sort(), so something like this:Your comparator takes one of each of the nested hashes inside the array and decides which one is higher by checking the "price" field.I recommend GitHub: Array sortBy - a best implementation of sortBy method which uses the Schwartzian transformBut for now we are going to try this approach Gist: sortBy-old.js.

Let's create a method to sort arrays being able to arrange objects by some property.Arrange the array, by "date" as StringIf you want to ignore case sensitive, set the parser callback:If you want to convert the "date" field as Date type:Here you can play with the code:

jsbin.com/lesebiThanks to @Ozesh by his feedback, the issue related to properties with falsy values was fixed.Use lodash.sortBy, (instructions using commonjs, you can also just put the script include-tag for the cdn at the top of your html)Descending orderAscending orderThis could have been achieved through a simple one line valueof() sort function. Run code snippet below to see demo.I'm little late for the party but below is my logic for sorting.You can use the JavaScript sort method with a callback function:While I am aware that the OP wanted to sort an array of numbers, this question has been marked as the answer for similar questions regarding strings.  To that fact, the above answers do not consider sorting an array of text where casing is important.  Most answers take the string values and convert them to uppercase/lowercase and then sort one way or another.  The requirements that I adhere to are simple:What I expect is [ A, a, B, b, C, c ] but the answers above return A, B, C, a, b, c.  I actually scratched my head on this for longer than I wanted (which is why I am posting this in hopes that it will help at least one other person).  While two users mention the localeCompare function in the comments for the marked answer, I didn't see that until after I stumbled upon the function while searching around.  After reading the String.prototype.localeCompare() documentation I was able to come up with this:This tells the function to sort uppercase values before lowercase values.  The second parameter in the localeCompare function is to define the locale but if you leave it as undefined it automatically figures out the locale for you.This works the same for sorting an array of objects as well:Here is a culmination of all answers above. Fiddle validation: http://jsfiddle.net/bobberino/4qqk3/I also worked with some kind of rating and multiple fields sort:ResultWith ECMAScript 6 StoBor's answer can be done even more concise:Descending order of price: Ascending order of price: For sorting a array you must define a comparator function. This function always be different on your desired sorting pattern or order(i.e. ascending or descending).Let create some functions that sort an array ascending or descending and that contains object or string or numeric values.Sort numbers (alphabetically and ascending):Sort numbers (alphabetically and descending):Sort numbers (numerically and ascending):Sort numbers (numerically and descending):As above use sorterPriceAsc and sorterPriceDes method with your array with desired key.If you use Underscore.js, try sortBy:While it is a bit of an overkill for just sorting a single array, this prototype function allows to sort Javascript arrays by any key, in ascending or descending order, including nested keys, using dot syntax.Usage:Sorting by nested properties with dot-syntax or array-syntax:Sorting by multiple keys:You can fork the repo: https://github.com/eneko/Array.sortByHere is a slightly modified version of elegant implementation from the book "JavaScript: The Good Parts".NOTE: This version of by is stable. It preserves the order of the first sort while performing the next chained sort.I have added isAscending parameter to it. Also converted it to ES6 standards and "newer" good parts as recommended by the author.You can sort ascending as well as descending and chain sort by multiple properties.For a normal array of elements values only:For an array of objects:Create a function and sort based on the input using below codeFor sort on multiple array object field.

Enter your field name in arrprop array like ["a","b","c"]

then pass in second parameter arrsource actual source we want to sort.You will need two functionThen you can apply this to any object property:I recently wrote a universal function to manage this for you if you want to use it.Hi after reading this article, I made a sortComparator for my needs, with the functionality to compare more than one json attributes, and i want to share it with you.This solution compares only strings in ascending order, but the solution can be easy extended for each attribute to support: reverse ordering, other data types, to use locale, casting etcand the result isand another sortwith resultA simple code :

Check if a value is an object in JavaScript

Danny Fox

[Check if a value is an object in JavaScript](https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript)

How do you check if a value is an Object in JavaScript?

2011-12-14 20:35:47Z

How do you check if a value is an Object in JavaScript?UPDATE:This answer is incomplete and gives misleading results. For example, null is also considered of type object in JavaScript, not to mention several other edge cases. Follow the recommendation below and move on to other "most upvoted (and correct!) answer".Original answer:Try using typeof(var) and/or var instanceof something.EDIT: This answer gives an idea of how to examine variable's properties, but it is not a bulletproof recipe (after all there's no recipe at all!) for checking whether it's an object, far from it. Since people tend to look for something to copy from here without doing any research, I'd highly recommend that they turn to the other, most upvoted (and correct!) answer.If typeof yourVariable === 'object', it's an object or null. If you want to exclude null, just make it typeof yourVariable === 'object' && yourVariable !== null.Let's define "object" in Javascript.  According to the MDN docs, every value is either an object or a primitive:What's a primitive?What's an object (i.e. not a primitive)?How to check whether a value is an objectinstanceof by itself won't work, because it misses two cases:typeof x === 'object' won't work, because of false positives (null) and false negatives (functions):Object.prototype.toString.call won't work, because of false positives for all of the primitives:So I use:@Daan's answer also seems to work:because, according to the MDN docs:A third way that seems to work (not sure if it's 100%) is to use Object.getPrototypeOf which throws an exception if its argument isn't an object:underscore.js provides the following method to find out if something is really an object:UPDATEBecause of a previous bug in V8 and minor micro speed optimization, the method looks as follows since underscore.js 1.7.0 (August 2014):Object.prototype.toString.call(myVar) will return:For more information on this and why it is a good alternative to typeof, check out this article.For simply checking against Object or Array without additional function call (speed). As also posted here.isArray()isObject() - Note: use for Object literals only, as it returns false for custom objects, like new Date or new YourCustomObject.I'm fond of simply: If the item is a JS object, and it's not a JS array, and it's not null…if all three prove true, return true. If any of the three conditions fails, the && test will short-circuit and false will be returned. The null test can be omitted if desired (depending on how you use null). DOCS: http://devdocs.io/javascript/operators/typeofhttp://devdocs.io/javascript/global_objects/objecthttp://devdocs.io/javascript/global_objects/array/isarrayhttp://devdocs.io/javascript/global_objects/nullJust surprised how many upvotes for wrong answers 😮

 Only 1 answer passed my tests!!! Here I've created my simplified version:As for me, it's clear and simple, and just works! Here my tests:ONE MORE TIME: not all answers pass this tests !!! 🙈In case you need to verify that object is instance of particular class you have to check constructor with your particular class, like:simple test:As result, you will have strict and robust code!In case you won't create functions like isDate, isError, isRegExp, etc you may consider option to use this generalized functions:it won't work correctly for all test cases mentioned earlier, but it's good enough for all objects (plain or constructed).isObject won't work in case of Object.create(null) because of internal implementation of Object.create which is explained here but you can use isObject in more sophisticated implementation:There is already created package on npm v1 based on this implementation! And it works for all earlier described test cases! 🙂Oh My God! I think this could be more shorter than ever, let see this:typeof JavaScript objects (including null) returns "object"Checking on their constructor property returns function with their names.Function.name returns a readonly name of a function or "anonymous" for closures.OK, let's give you this concept first before answering your question, in JavaScript Functions are Object, also null, Object, Arrays and even Date, so as you see there is not a simple way like typeof obj === 'object', so everything mentioned above will return true, but there are ways to check it with writing a function or using JavaScript frameworks, OK:Now, imagine you have this object that's a real object (not null or function or array):Pure JavaScript:or ororYou can simply use one of these functions as above in your code by calling them and it will return true if it's an object:If you are using a JavaScript framework, they usually have prepared these kind of functions for you, these are few of them:jQuery: Angular:Underscore and Lodash:It depends on what you mean with "is an object". If you want everything that is not a primitive, i.e. things that you can set new properties on, this should do the trick:It excludes the primitives (plain numbers/NaN/Infinity, plain strings, symbols, true/false, undefined and null) but should return true for everything else (including Number, Boolean and String objects). Note that JS does not define what "host" objects, such as window or console, should return when used with typeof, so those are hard to cover with a check like this.If you want to know whether something is a "plain" object, i.e. it was created as a literal {} or with Object.create(null), you might do this:Edit 2018: Because Symbol.toStringTag now allows customizing the output of Object.prototype.toString.call(...), the isPlainObject function above might return false in some cases even when the object started its life as a literal. Arguably, by convention an object with a custom string tag isn't exactly a plain object any more, but this has further muddied the definition of what a plain object even is in Javascript.My God, too much confusion in other answers.Short Answer typeof anyVar == 'object' && anyVar instanceof Object && !(anyVar instanceof Array)To test this simply run the following statements in chrome console.Case 1.Case 2.Case 3.ExplanationOkay.Let's break it downtypeof anyVar == 'object' is returned true from three candidates -  [], {} and null,anyVar instanceof Object narrows down these candidates to two - [], {}!(anyVar instanceof Array) narrows to only one - {}Drum rolls please!By this you may have already learnt how to check for Array in Javascript.The most reasonable way to check the type of a value seems the typeof operator. The only problem is that it's horribly broken:typeof is only reliable for non-null primitives. So a way to check if a value is an object would be ensuring that the string returned by typeof does not correspond to a primitive, and that the object is not null. However, the problem is that a future standard could introduce a new primitive type, and our code would consider it to be an object. New types don't appear frequently, but for example ECMAScript 6 introduced the Symbol type.Therefore, instead of typeof, I only recommend approaches whose result varies depending on if the value is an object or not. The following intends to be a Note: I intentionally skipped some approaches like Object.getPrototypeOf(value) (ES5) and Reflect methods (ES6) because they call essential internal methods which might do nasty things, e.g. if value is a proxy. For safety reasons my examples only reference value without accessing it directly.Try thisIf you would like to check if the prototype for an object solely comes from Object. Filters out String, Number, Array, Arguments, etc.Or as a single-expression arrow function (ES6+)I was asked to provide more details. Most clean and understandable way of checking if our variable is an object is typeof myVar. It returns a string with a type (e.g. "object", "undefined").Unfortunately either Array and null also have a type object. To take only real objects there is a need to check inheritance chain using instanceof operator. It will eliminate null, but Array has Object in inheritance chain.So the solution is:Little late... for "plain objects" (i mean, like {'x': 5, 'y': 7}) i have this little snippet:It generates the next output:It always works for me. If will return "true" only if the type of "o" is "object", but no null, or array, or function. 

:)lodash has isPlainObject, which might be what many who come to this page are looking for. It returns false when give a function or array.This will work. It is a function that returns true, false, or possibly null.Since there seems a lot of confusion about how to handle this problem correctly, I'll leave my 2 cents (this answer is spec compliant and produces correct results under all circumstances):Testing for primitives:

undefined null boolean string numberAn object is not a primitive:Or alternatively:Testing for any Array:Testing for object excluding: Date RegExp Boolean Number String Function any ArrayWhen everything else fails, I use this:The Ramda functional library has a wonderful function for detecting JavaScript types.Paraphrasing the full function:I had to laugh when I realized how simple and beautiful the solution was.Example usage from Ramda documentation:After reading and trying out a lot of implementations, I've noticed that very few people try to check for values like JSON, Math, document or objects with prototype chains longer than 1 step.Instead of checking the typeof of our variable and then hacking away edge-cases, I thought it'd be better if the check is kept as simple as possible to avoid having to refactor when there's new primitives or native objects added that register as typeof of 'object'.After all, the typeof operator will tell you if something is an object to JavaScript, but JavaScript's definition of an object is too broad for most real-world scenarios (e.g. typeof null === 'object').

Below is a function that determines whether variable v is an object by essentially repeating two checks:If explicitly want to check if the given value is {}.!!obj is shorthand for checking if obj is truthy (to filter out null) What I like to use is thisI think in most of the cases a Date must pass the check as an Object, so I do not filter dates outi found a "new" way to do just this kind of type checking from this SO question: Why does instanceof return false for some literals?from that, i created a function for type checking as follows:then you can just do:this is tested on Chrome 56, Firefox 52, Microsoft Edge 38, Internet Explorer 11, Opera 43edit:

if you also want to check if a variable is null or undefined, you can use this instead:update from inanc's comment: challenge accepted :Dif you want to loose compare objects you can try this way:that way, you can do just like inanc's comment:orIt is an old question but thought to leave this here. Most people are checking if the variable is {} meaning a key-value paired and not what is the underline construct that JavaScript is using for a given thing, cuz to be honest mostly everything in JavaScript is an object. So taking that out of the way. If you do...Most of the time what we want is to know if we have a resource object from an API or our database call returned from the ORM. We can then test if is not an Array, is not null, is not typeof 'function', and is an Object

Turning off eslint rule for a specific line

runtimeZero

[Turning off eslint rule for a specific line](https://stackoverflow.com/questions/27732209/turning-off-eslint-rule-for-a-specific-line)

In order to turn off linting rule for a particular line in JSHint we use the following rule:I have been trying to locate the equivalent of the above for eslint. 

2015-01-01 15:47:47Z

In order to turn off linting rule for a particular line in JSHint we use the following rule:I have been trying to locate the equivalent of the above for eslint. You can use the single line syntax now:Or if you don't want to have a comment on the same line with the actual code, it is possible to disable next line:Requested docs link: http://eslint.org/docs/user-guide/configuring.html#configuring-rulesYou can use the followingWhich is slightly buried the "configuring rules" section of the docs;To disable a warning for an entire file, you can include a comment at the top of the file e.g. ESlint has now been updated with a better way disable a single line, see @goofballLogic's excellent answer.You can also disable a specific rule/rules (rather than all) by specifying them in the enable (open) and disable (close) blocks:via @goofballMagic's link above: http://eslint.org/docs/user-guide/configuring.html#configuring-rulesFrom Configuring ESLint - Disabling Rules with Inline Comments:You can use an inline comment: // eslint-disable-next-line rule-name.ESLint - Disabling Rules with Inline CommentsThe general end of line comment, // eslint-disable-line, does not need anything after it: no need to look up a code to specify what you wish ES Lint to ignore.If you need to have any syntax ignored for any reason other than a quick debugging, you have problems: why not update your delint config?I enjoy // eslint-disable-line to allow me to insert console for a quick inspection of a service, without my development environment holding me back because of the breach of protocol. (I generally ban console, and use a logging class - which sometimes builds upon console.)Or for multiple ignores on the next line, string the rules using commasTo disable a single rule for the rest of the file below:To disable all rules on a specific line:  single line comment did not work for me inside a react dumb functional component, I have used file level disabling by adding 

/* eslint-disable insertEslintErrorDefinitionHere */(normally if you are using vs code and getting eslint error, you can click on the line which gives error and a bulb would show up in vs code, right click on the light bulb and choose any disable option and vs code will do it for you.)You can add the files which give error to .eslintignore file in your project.Like for all the .vue files just add /*.vue 

Can't bind to 'ngModel' since it isn't a known property of 'input'

Anthony Brenelière

[Can't bind to 'ngModel' since it isn't a known property of 'input'](https://stackoverflow.com/questions/38892771/cant-bind-to-ngmodel-since-it-isnt-a-known-property-of-input)

I've got the following error when launching my Angular app, even if the component is not displayed.I have to comment out the <input> so that my app works.I'm looking at the Hero plunker, but I don't see any difference from my code.Here is the component file:

2016-08-11 09:44:32Z

I've got the following error when launching my Angular app, even if the component is not displayed.I have to comment out the <input> so that my app works.I'm looking at the Hero plunker, but I don't see any difference from my code.Here is the component file:Yes that's it, in the app.module.ts, I just added :In order to be able to use two-way data binding for form inputs you need to import theFormsModule package in your Angular module.

For more info see the Angular 2 official tutorial here and the official documentation for formsFor using [(ngModel)] in Angular 2, 4 & 5+, You need to import FormsModule from Angular form...Also it is in this path under forms in Angular repo in github:Probably this is not a very pleasure for the AngularJs developers as you could use ng-model everywhere anytime before, but as Angular tries to separate modules to use whatever you'd like you to want to use at the time, ngModel is in FormsModule now.Also if you are using ReactiveFormsModule, needs to import it too.So simply looks for app.module.ts and make sure you have FormsModule imported in...Also this is the current starting comments for Angular4 ngModel in FormsModule:If you'd like to use your input, not in a form, you can use it with ngModelOptions and make standalone true...For more info, Look at ng_model in Angular section hereYou need to import the FormsModuleOpen app.module.tsand add lineandThrowing in this might help someone.Assuming you have created a new NgModule, say AuthModule dedicated to handling your Auth needs, make sure to import FormsModule in that AuthModule too.If you'll be using the FormsModule ONLY in the AuthModule then you wouldn't need to import the FormModule IN the default AppModuleSo something like this in the AuthModule:Then forget about importing in AppModule if you don't use the FormsModule anywhere else.Example 1Example 2There are two steps you need to follow to get rid of this errorbasically app.module.ts should look like below :Hope it helps Import the FormsModule in those modules where you want to use the [(ngModel)]You need to import FormsModule in your root module if this component is in the root i.e. app.module.tsKindly open app.module.tsImport FormsModule from @angular/formsEx:andI am using Angular 7I have to import ReactiveFormsModule because I am using FormBuilder class to create reactive form.import FormsModule in you app module.it would let your application running well.If you need to use [(ngModel)] first do you need to import FormsModule in app.module.ts and then add in a list of imports. Something like this:app.module.ts app.component.tsIf someone is still getting errors after applying the accepted solution, it could be possibly because you have a separate module file for the component in which you want to use the ngModel property in input tag. In that case, apply the accepted solution in the component's module.ts file as well.I'm using Angular 5.In my case, I needed to import RactiveFormsModule too.app.module.ts (or anymodule.module.ts)ngModel is the part of FormsModule. And it should be imported from @angular/forms to work with ngModel.Please change the app.module.ts as follow:I know this question is about Angular 2, but I am on Angular 4 and none of these answers helped.In Angular 4 the syntax needs to be Hope this helps.if you are still getting the error after importing FormsModule correctly then check in your terminal or (windows console) because your project is not compiling (because of another error that could be anything) and your solution has not been reflected in your browser! In my case, my console had the following unrelated error: Property 'retrieveGithubUser' does not exist on type 'ApiService'.In the module you are willing to use ngModel you have to import FormsModulengModel is coming from FormsModule.There are some cases when you can receive this kind of error:In ngModule you need to import FormsModule, because ngModel is coming from FormsModule.

Please modify your app.module.ts like the below code I have sharedSometimes you get this error when you try to use a component from a module, which is not shared, in a different module.For example, you have 2 modules with module1.componentA.component.ts and module2.componentC.component.ts and you try to use the selector from module1.componentA.component.ts in a template inside module2 (e.g. <module1-componentA [someInputVariableInModule1]="variableFromHTTPRequestInModule2">),  it will throw the error that the someInputVariableInModule1 is not available inside module1.componentA.component.ts - even though you have the @Input() someInputVariableInModule1 in the module1.componentA.If this happens, you want to share the module1.componentA to be accessible in other modules.

So if you share the module1.componentA inside a sharedModule, the module1.componentA will be usable inside other modules (outside from module1), and every module importing the sharedModule will be able to access the selector in their templates injecting the @Input() declared variable.For my scenario, I had to import both [CommonModule] and [FormsModule] to my moduleYou need to import the FormsModuleOpen app.module.tsand add lineandSometimes if we are already imported BrowserModule, FormsModule and other related Modules though I got the same Error then I realized that we need import them in Order, in my case I missed it. So order should be like  BrowserModule, FormsModule, ReactiveFormsModule.Hope this helps someone ..  :)This is for the folks who use plain JavaScript instead of Type Script. In addition to referencing the forms script file on top of the page like belowyou should also tell the the module loader to load the ng.forms.FormsModule. After making the changes my imports property of NgModule method looked like belowimports: [ng.platformBrowser.BrowserModule, ng.forms.FormsModule],Happy coding!I upgraded from RC1 to RC5 and received this error. I completed my migration (introducing a new app.module.ts file, changing package.json to include new versions and missing modules, and finally changing my main.ts to boot accordingly, based on the Angular2 quick start example). I did an npm update and then an npm outdated to confirm the versions installed were correct, still no luck.I ended up completely wiping the node_modules folder and reinstalling with npm install - Voila! Problem solved.When I first did the tutorial, main.ts looked slightly different from what it is now. It looks very similar, but note the differences (the top one is correct).Correct:Old tutorial code:Here is a youtube video which explains how to solve this practically you can see the video from this Youtube link. Below goes the textual explanation of the same.Simple translation of the above error message is that "ngModel" directive is not understood and the necessary Angular modules needs to be loaded so that the syntax works. For "ngModel" directive to work inside HTML we need to import "FormModules" from "@Angular/forms".Below is one more similar kind of error but related to "FormsGroup". In the below case we should load ReactiveFormsModule.Small tip when you get such above error you can hunt for the "[Error-->]" text , the arrow points towards the directive which is not understood by Angular.For any version from Angular 2, you need to import FormsModule in your app.module.ts file and it will fix the issue.

How do I find out which DOM element has the focus?

Tony Peterson

[How do I find out which DOM element has the focus?](https://stackoverflow.com/questions/497094/how-do-i-find-out-which-dom-element-has-the-focus)

I would like to find out, in JavaScript, which element currently has focus. I've been looking through the DOM and haven't found what I need, yet. Is there a way to do this, and how?The reason I was looking for this:I'm trying to make keys like the arrows and enter navigate through a table of input elements. Tab works now, but enter, and arrows do not by default it seems. I've got the key handling part set up but now I need to figure out how to move the focus over in the event handling functions.

2009-01-30 20:21:31Z

I would like to find out, in JavaScript, which element currently has focus. I've been looking through the DOM and haven't found what I need, yet. Is there a way to do this, and how?The reason I was looking for this:I'm trying to make keys like the arrows and enter navigate through a table of input elements. Tab works now, but enter, and arrows do not by default it seems. I've got the key handling part set up but now I need to figure out how to move the focus over in the event handling functions.Use document.activeElement, it is supported in all major browsers.Previously, if you were trying to find out what form field has focus, you could not. To emulate detection within older browsers, add a "focus" event handler to all fields and record the last-focused field in a variable. Add a "blur" handler to clear the variable upon a blur event for the last-focused field.Related links:As said by JW, you can't find the current focused element, at least in a browser-independent way. But if your app is IE only (some are...), you can find it the following way :EDIT: It looks like IE did not have everything wrong after all, this is part of HTML5 draft and seems to be supported by the latest version of Chrome, Safari and Firefox at least.If you can use jQuery, it now supports :focus, just make sure you are using version 1.6+.This statement will get you the currently focused element.From: How to select an element that has focus on it with jQuerydocument.activeElement is now part of the HTML5 working draft specification, but it might not yet be supported in some non-major/mobile/older browsers.  You can fall back to querySelector (if that is supported).  It's also worth mentioning that document.activeElement will return document.body if no element is focused — even if the browser window doesn't have focus.The following code will work around this issue and fall back to querySelector giving a little better support.An addition thing to note is the performance difference between these two methods.  Querying the document with selectors will always be much slower than accessing the activeElement property.  See this jsperf.com test.By itself, document.activeElement can still return an element if the document isn't focused (and thus nothing in the document is focused!)You may want that behavior, or it may not matter (e.g. within a keydown event), but if you need to know something is actually focused, you can additionally check document.hasFocus().The following will give you the focused element if there is one, or else null. To check whether a specific element has focus, it's simpler:To check whether anything is focused, it's more complex again:Robustness Note: In the code where it the checks against document.body and document.documentElement, this is because some browsers return one of these or null when nothing is focused.It doesn't account for if the <body> (or maybe <html>) had a tabIndex attribute and thus could actually be focused. If you're writing a library or something and want it to be robust, you should probably handle that somehow.Here's a (heavy airquotes) "one-liner" version of getting the focused element, which is conceptually more complicated because you have to know about short-circuiting, and y'know, it obviously doesn't fit on one line, assuming you want it to be readable.

I'm not gonna recommend this one. But if you're a 1337 hax0r, idk... it's there.

You could also remove the || null part if you don't mind getting false in some cases. (You could still get null if document.activeElement is null):For checking if a specific element is focused, alternatively you could use events, but this way requires setup (and potentially teardown), and importantly, assumes an initial state:You could fix the initial state assumption by using the non-evented way, but then you might as well just use that instead.document.activeElement may default to the <body> element if no focusable elements are in focus. Additionally, if an element is focused and the browser window is blurred, activeElement will continue to hold the focused element.If either of these two behaviors are not desirable, consider a CSS-based approach: document.querySelector( ':focus' ).I liked the approach used by Joel S, but I also love the simplicity of document.activeElement. I used jQuery and combined the two. Older browsers that don't support document.activeElement will use jQuery.data() to store the value of 'hasFocus'. Newer browsers will use document.activeElement. I assume that document.activeElement will have better performance.A little helper that I've used for these purposes in Mootools:This way you can check if element has focus with el.hasFocus() provided that startFocusTracking() has been called on the given element. JQuery does support the :focus pseudo-class as of current.  If you are looking for it in the JQuery documentation, check under "Selectors" where it points you to the W3C CSS docs.  I've tested with Chrome, FF, and IE 7+.  Note that for it to work in IE, <!DOCTYPE... must exist on the html page.  Here is an example assuming you've assigned an id to the element that has focus:If you want to get a object that is instance of Element, you must use document.activeElement, but if you want to get a object that is instance of Text, you must to use document.getSelection().focusNode.I hope helps.There are potential problems with using document.activeElement. Consider:If the user focuses on an inner-div, then document.activeElement still references the outer div. You cannot use document.activeElement to determine which of the inner div's has focus.The following function gets around this, and returns the focused node:If you would rather get the focused element, use:Reading other answers, and trying myself, it seems document.activeElement will give you the element you need in most browsers.If you have a browser that doesn't support document.activeElement if you have jQuery around, you should be able populate it on all focus events with something very simple like this (untested as I don't have a browser meeting those criteria to hand):If you're using jQuery, you can use this to find out if an element is active:I have found the following snippet to be useful when trying to determine which element currently has focus. Copy the following into the console of your browser, and every second it will print out the details of the current element that has focus.Feel free to modify the console.log to log out something different to help you pinpoint the exact element if printing out the whole element does not help you pinpoint the element.With dojo, you can use dijit.getFocus()Just putting this here to give the solution I eventually came up with.I created a property called document.activeInputArea, and used jQuery's HotKeys addon to trap keyboard events for arrow keys, tab and enter, and I created an event handler for clicking into input elements.Then I adjusted the activeInputArea every time focus changed, so I could use that property to find out where I was.It's easy to screw this up though, because if you have a bug in the system and focus isn't where you think it is, then its very hard to restore the correct focus.

How do I remove a key from a JavaScript object? [duplicate]

Martin Ongtangco

[How do I remove a key from a JavaScript object? [duplicate]](https://stackoverflow.com/questions/3455405/how-do-i-remove-a-key-from-a-javascript-object)

Let's say we have an object with this format:I wanted to do a function that removes by key:

2010-08-11 04:59:03Z

Let's say we have an object with this format:I wanted to do a function that removes by key:The delete operator allows you to remove a property from an object.  The following examples all do the same thing.If you're interested, read Understanding Delete for an in-depth explanation.If you are using Underscore.js or Lodash, there is a function 'omit' that will do it.

http://underscorejs.org/#omitIf you want to modify the current object, assign the returning object to the current object.With pure JavaScript, use:Another option with pure JavaScript.It's as easy as:or

How do I set/unset a cookie with jQuery?

omg

[How do I set/unset a cookie with jQuery?](https://stackoverflow.com/questions/1458724/how-do-i-set-unset-a-cookie-with-jquery)

How do I set and unset a cookie using jQuery, for example create a cookie named test and set the value to 1?

2009-09-22 08:09:50Z

How do I set and unset a cookie using jQuery, for example create a cookie named test and set the value to 1?Update April 2019jQuery isn't needed for cookie reading/manipulation, so don't use the original answer below.Go to https://github.com/js-cookie/js-cookie instead, and use the library there that doesn't depend on jQuery.Basic examples:See the docs on github for details.See the plugin:https://github.com/carhartl/jquery-cookieYou can then do:To delete:Additionally, to set a timeout of a certain number of days (10 here) on the cookie:If the expires option is omitted, then the cookie becomes a session cookie and is deleted when the browser exits.To cover all the options:To read back the value of the cookie:You may wish to specify the path parameter if the cookie was created on a different path to the current one:UPDATE (April 2015):As stated in the comments below, the team that worked on the original plugin has removed the jQuery dependency in a new project (https://github.com/js-cookie/js-cookie) which has the same functionality and general syntax as the jQuery version. Apparently the original plugin isn't going anywhere though.There is no need to use jQuery particularly to manipulate cookies.From QuirksMode (including escaping characters)Take a look atYou can set the cookies as like You can get the cookies as likeAnd finally you can erase the cookies like this oneHope it will helps to someone :)EDIT:If you want to set the cookie to all the path/page/directory then set path attribute to the cookieThanks,

vickyYou can use a plugin available here..https://plugins.jquery.com/cookie/and then to write a cookie do

$.cookie("test", 1);to access the set cookie do

$.cookie("test");Here is my global module I use -Make sure not to do something like this:Then, if the cookie doesn't exist, the debugger will return some unhelpful message like ".cookie not a function".Always declare first, then do the split after checking for null. Like this:A simple example of set cookie in your browser:Simple just copy/paste and use this code for set your cookie.Here is how you set the cookie with JavaScript:below code has been taken from https://www.w3schools.com/js/js_cookies.aspnow you can get the cookie with below function:And finally this is how you check the cookie:If you want to delete the cookie just set the expires parameter to a passed date:You can use the library on Mozilla website here You'll be able to set and get cookies like this I think Fresher gave us nice way, but there is a mistake:You should add "value" near getTime(); otherwise the cookie will expire immediately :)I thought Vignesh Pichamani's answer was the simplest and cleanest. Just adding to his the ability to set the number of days before expiration:EDIT: also added 'never expires' option if no day number is setSet the cookie:I know there are many great answers. Often, I only need to read cookies and I do not want to create overhead by loading additional libraries or defining functions.Here is how to read cookies in one line of javascript. I found the answer in Guilherme Rodrigues' blog article:This reads the cookie named key, nice, clean and simple. 

What does the exclamation mark do before the function?

Sebastian Otto

[What does the exclamation mark do before the function?](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

2010-09-20 21:21:51Z

JavaScript syntax 101. Here is a function declaration:Note that there's no semicolon: this is just a function declaration. You would need an invocation, foo(), to actually run the function.Now, when we add the seemingly innocuous exclamation mark: !function foo() {} it turns it into an expression. It is now a function expression.The ! alone doesn't invoke the function, of course, but we can now put () at the end: !function foo() {}() which has higher precedence than ! and instantly calls the function.So what the author is doing is saving a byte per function expression; a more readable way of writing it would be this:Lastly, ! makes the expression return true. This is because by default all IIFE return undefined, which leaves us with !undefined which is true. Not particularly useful.The function:returns nothing (or undefined). Sometimes we want to call a function right as we create it. You might be tempted to try this:but it results in a SyntaxError.Using the ! operator before the function causes it to be treated as an expression, so we can call it:This will also return the boolean opposite of the return value of the function, in this case true, because !undefined is true. If you want the actual return value to be the result of the call, then try doing it this way:There is a good point for using ! for function invocation marked on airbnb JavaScript guideGenerally idea for using this technique on separate files (aka modules) which later get concatenated. The caveat here is that files supposed to be concatenated by tools which put the new file at the new line (which is anyway common behavior for most of concat tools). In that case, using ! will help to avoid error in if previously concatenated module missed trailing semicolon, and yet that will give the flexibility to put them in any order with no worry.Will work the same asbut saves one character and arbitrary looks better.And by the way any of +,-,~,void operators have the same effect, in terms of invoking the function, for sure if you have to use something to return from that function they would act differently.but if you using IIFE patterns for one file one module code separation and using concat tool for optimization (which makes one line one file job), then constructionWill do safe code execution, same as a very first code sample. This one will throw error cause JavaScript ASI will not be able to do its work.One note regarding unary operators, they would do similar work, but only in case, they used not in the first module. So they are not so safe if you do not have total control over the concatenation order.This works:This not:It returns whether the statement can evaluate to false. eg:You can use it twice to coerce a value to boolean:So, to more directly answer your question:Edit: It has the side effect of changing the function declaration to a function expression.  E.g. the following code is not valid because it is interpreted as a function declaration that is missing the required identifier (or function name):Its just to save a byte of data when we do javascript minification.consider the below anonymous functionTo make the above as self invoking function we will generally change the above code asNow we added two extra characters (,) apart from adding () at the end of the function which necessary to call the function. In the process of minification we generally focus to reduce the file size. So we can also write the above function asStill both are self invoking functions and we save a byte as well. Instead of 2 characters (,) we just used one character !! is a logical NOT operator, it's a boolean operator that will invert something to its opposite. Although you can bypass the parentheses of the invoked function by using the BANG (!) before the function, it will still invert the return, which might not be what you wanted. As in the case of an IEFE, it would return undefined, which when inverted becomes the boolean true.Exclamation mark makes any function always return a boolean. The final value is the negation of the value returned by the function.Omitting ! in the above examples would be a SyntaxError.However, a better way to achieve this would be:Its another way of writing IIFE (immediately-invoked function expression).Its other way of writing -same as ! will negate (opposite) whatever you're expecting as a result, i.e if you have when you call boy, your result will be true, but the moment you add the ! when calling boy, i.e !boy, your result will be false. Which in other words you mean NotBoy, but this time it's basically a boolean result, either true or false.That's the same thing that happens to the !function () {}(); expression, running only function () {}(); will flag you an error, but add ! right in front of your function () {}(); expression, makes it the opposite of the function () {}(); which should return you true. Example can be seen below:Let's save a few other bytes!example:

window.onload vs $(document).ready()

Vaibhav Jain

[window.onload vs $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

What are the differences between JavaScript's window.onload and jQuery's $(document).ready() method?

2010-09-13 06:24:52Z

What are the differences between JavaScript's window.onload and jQuery's $(document).ready() method?The ready event occurs after the HTML document has been loaded, while the onload event occurs later, when all content (e.g. images) also has been loaded.The onload event is a standard event in the DOM, while the ready event is specific to jQuery. The purpose of the ready event is that it should occur as early as possible after the document has loaded, so that code that adds functionality to the elements in the page doesn't have to wait for all content to load.window.onload is the built-in JavaScript event, but as its implementation had subtle quirks across browsers (Firefox, Internet Explorer 6, Internet Explorer 8, and Opera), jQuery provides document.ready, which abstracts those away, and fires as soon as the page's DOM is ready (doesn't wait for images, etc.).$(document).ready (note that it's not document.ready, which is undefined) is a jQuery function, wrapping and providing consistency to the following events:$(document).ready() is a jQuery event.  JQuery’s $(document).ready() method gets called as soon as the DOM is ready (which means that the browser has parsed the HTML and built the DOM tree). This allows you to run code as soon as the document is ready to be manipulated.  For example, if a browser supports the DOMContentLoaded event (as many non-IE browsers do), then it will fire on that event. (Note that the DOMContentLoaded event was only added to IE in IE9+.)Two syntaxes can be used for this: Or the shorthand version:Main points for $(document).ready():window.onload() is a native JavaScript function. The window.onload() event fires when all the content on your page has loaded, including the DOM (document object model), banner ads and images. Another difference between the two is that, while we can have more than one $(document).ready() function, we can only have one onload function.A Windows load event fires when all the content on your page is fully loaded including the DOM (document object model) content and asynchronous JavaScript, frames and images. You can also use body onload=. Both are the same; window.onload = function(){} and <body onload="func();"> are different ways of using the same event.jQuery $document.ready function event executes a bit earlier than window.onload and is called once the DOM(Document object model) is loaded on your page. It will not wait for the images, frames to get fully load.Taken from the following article:

how $document.ready() is different from window.onload()A word of caution on using $(document).ready() with Internet Explorer.  If an HTTP request is interrupted before the entire document is loaded (for example, while a page is streaming to the browser, another link is clicked) IE will trigger the $(document).ready event.  If any code within the $(document).ready() event references DOM objects, the potential exists for those objects to be not found, and Javascript errors can occur.  Either guard your references to those objects, or defer code which references those objects to the window.load event. I have not been able to reproduce this problem in other browsers (specifically, Chrome and Firefox)Always use the window.addEventListener to add an event to window. Because that way you can execute the code in different event handlers .Correct code:Invalid code:This is because onload is just property of the object, which is overwritten.By analogy with addEventListener, it is better to use $(document).ready() rather than onload.$(document).on('ready', handler) binds to the ready event from jQuery. The handler is called when the DOM is loaded. Assets like images maybe still are missing. It will never be called if the document is ready at the time of binding. jQuery uses the DOMContentLoaded-Event for that, emulating it if not available.$(document).on('load', handler) is an event that will be fired once all resources are loaded from the server. Images are loaded now. While onload is a raw HTML event, ready is built by jQuery.$(document).ready(handler) actually is a promise. The handler will be called immediately if document is ready at the time of calling. Otherwise it binds to the ready-Event.Before jQuery 1.8, $(document).load(handler) existed as an alias to $(document).on('load',handler).The $(document).ready() is a jQuery event which occurs when the HTML document has been fully loaded, while the window.onload event occurs later, when everything including images on the page loaded.Also window.onload is a pure javascript event in the DOM, while the $(document).ready() event is a method in jQuery.$(document).ready() is usually the wrapper for jQuery to make sure the elements all loaded in to be used in jQuery...Look at to jQuery source code to understand how it's working:Also I have created the image below as a quick references for both:window.onload: A normal JavaScript event.document.ready: A specific jQuery event when the entire HTML has been loaded.One thing to remember (or should I say recall) is that you cannot stack onloads like you can with ready.  In other words, jQuery magic allows multiple readys on the same page, but you can't do that with onload.The last onload will overrule any previous onloads.A nice way to deal with that is with a function apparently written by one Simon Willison and described in Using Multiple JavaScript Onload Functions.Document.ready (a jQuery event) will fire when all the elements are in place, and they can be referenced in the JavaScript code, but the content is not necessarily loaded. Document.ready executes when the HTML document is loaded.The window.load however will wait for the page to be fully loaded. This includes inner frames, images, etc.The document.ready event occurs when the HTML document has been loaded, and the window.onload event occurs always later, when all content (images, etc) has been loaded.You can use the document.ready event if you want to intervene "early" in the rendering process, without waiting for the images to load.

If you need the images (or any other "content") ready before your script "does something", you need to wait until window.onload.For instance, if you are implementing a "Slide Show" pattern, and you need to perform calculations based on image sizes, you may want to wait until window.onload. Otherwise, you might experience some random problems, depending on how fast the images will get loaded. Your script would be running concurrently with the thread that loads images. If your script is long enough, or the server is fast enough, you may not notice a problem, if images happen to arrive in time. But the safest practice would be allowing for images to get loaded.document.ready could be a nice event for you to show some "loading..." sign to users, and upon window.onload, you can complete any scripting that needed resources loaded, and then finally remove the "Loading..." sign.Examples :-window.onload is a JavaScript inbuilt function. window.onload trigger when the HTML page loaded. window.onload can be written only once.document.ready is a function of the jQuery library. document.ready triggers when HTML and all JavaScript code, CSS, and images which are included in the HTML file are completely loaded.

document.ready can be written multiple times according to requirements.When you say $(document).ready(f), you tell script engine to do the following:In the best case, this is 2 hash table lookups, but that's ignoring the heavy work done by jQuery, where $ is the kitchen sink of all possible inputs to jQuery, so another map is likely there to dispatch the query to correct handler.Alternatively, you could do this:which willIn the best case, this costs a single hash table lookup, which is necessary because onload must be fetched. Ideally, jQuery would compile their queries to strings that can be pasted to do what you wanted jQuery to do but without the runtime dispatching of jQuery. This way you have an option of either window.onload is provided by DOM api and it says " the load event fires when a given resource has loaded"."The load event fires at the end of the document loading process. At this point, all of the objects in the document are in the DOM, and all the images, scripts, links and sub-frames have finished loading."

DOM onloadBut in jQuery $(document).ready() will only run once the page Document Object Model (DOM) is ready for JavaScript code to execute. This does not include images, scripts, iframes etc. jquery ready eventSo the jquery ready method will run earlier than the the dom onload event.

jQuery get specific option tag text

Paolo Bergantino

[jQuery get specific option tag text](https://stackoverflow.com/questions/196684/jquery-get-specific-option-tag-text)

All right, say I have this:What would the selector look like if I wanted to get "Option B" when I have the value '2'?Please note that this is not asking how to get the selected text value, but just any one of them, whether selected or not, depending on the value attribute. I tried:But it is not working.

2008-10-13 04:06:34Z

All right, say I have this:What would the selector look like if I wanted to get "Option B" when I have the value '2'?Please note that this is not asking how to get the selected text value, but just any one of them, whether selected or not, depending on the value attribute. I tried:But it is not working.It's looking for an element with id list which has a property value equal to 2. What you want is the option child of the list.If you'd like to get the option with a value of 2, useIf you'd like to get whichever option is currently selected, useThis worked perfectly for me, I was looking for a way to send two different values with options generated by MySQL, and the following is generic and dynamic:As mentioned in one of the comments. With this I was able to create a dynamic function that works with all my selection boxes that I want to get both values, the option value and the text.Few days ago I noticed that when updating the jQuery from 1.6 to 1.9 of the site I used this code, this stop working... probably was a conflict with another piece of code... anyway, the solution was to remove option from the find() call:That was my solution... use it only if you have any problem after updating your jQuery.Based on the original HTML posted by Paolo I came up with the following.It has been tested to work on Internet Explorer and Firefox.for multiple selected value in the #list element.Try the following:The reason why your original snippet wasn't working is because your OPTION tags are children to your SELECT tag, which has the id list.This is an old Question which has not been updated in some time the correct way to do this now would be to use I hope this helps :-)I wanted to get the selected label. This worked for me in jQuery 1.5.1.leave a space after the id selector.You can get selected option text by using function .text(); you can call the function like this :While "looping" through dynamically created select elements with a .each(function()...): $("option:selected").text(); and $(this + " option:selected").text() did not return the selected option text - instead it was null.But Peter Mortensen's solution worked:I do not know why the usual way does not succeed in a .each() (probably my own mistake), but thank you, Peter. I know that wasn't the original question, but am mentioning it "for newbies coming through Google."I would have started with $('#list option:selected").each() except I needed to grab stuff from the select element as well.Use:I was looking for getting val by internal field name instead of ID and came from google to this post which help but did not find the solution I need, but I got the solution and here it is: So this might help somebody looking for selected value with field internal name instead of using long id for SharePoint lists: I needed this answer as I was dealing with a dynamically cast object, and the other methods here did not seem to work:This of course uses the DOM object instead of parsing its HTML with nodeValue, childNodes, etc.A tip: you can use below code if your value is dynamic:Or (better style)As mentioned in jQuery get specific option tag text and placing dynamic variable to the valueAs an alternative solution, you can also use a context part of jQuery selector to find <option> element(s) with value="2" inside the dropdown list:I wanted a dynamic version for select multiple that would display what is selected to the right (wish I'd read on and seen $(this).find... earlier):You can get one of following ways

Why use Redux over Facebook Flux? [closed]

VB_

[Why use Redux over Facebook Flux? [closed]](https://stackoverflow.com/questions/32461229/why-use-redux-over-facebook-flux)

I've read this answer, reducing boilerplate, looked at few GitHub examples and even tried redux a little bit (todo apps). As I understand, official redux doc motivations provide pros comparing to traditional MVC architectures. BUT it doesn't provide an answer to the question: Why you should use Redux over Facebook Flux? Is that only a question of programming styles: functional vs non-functional? Or the question is in abilities/dev-tools that follow from redux approach? Maybe scaling? Or testing?Am I right if I say that redux is a flux for people who come from functional languages? To answer this question you may compare the complexity of implementation redux's motivation points on flux vs redux.Here are motivation points from official redux doc motivations:

2015-09-08 15:05:14Z

I've read this answer, reducing boilerplate, looked at few GitHub examples and even tried redux a little bit (todo apps). As I understand, official redux doc motivations provide pros comparing to traditional MVC architectures. BUT it doesn't provide an answer to the question: Why you should use Redux over Facebook Flux? Is that only a question of programming styles: functional vs non-functional? Or the question is in abilities/dev-tools that follow from redux approach? Maybe scaling? Or testing?Am I right if I say that redux is a flux for people who come from functional languages? To answer this question you may compare the complexity of implementation redux's motivation points on flux vs redux.Here are motivation points from official redux doc motivations:Redux author here!  Redux is not that different from Flux. Overall it has same architecture, but Redux is able to cut some complexity corners by using functional composition where Flux uses callback registration.There is not a fundamental difference in Redux, but I find it makes certain abstractions easier, or at least possible to implement, that would be hard or impossible to implement in Flux.Take, for example, pagination. My Flux + React Router example handles pagination, but the code for that is awful. One of the reasons it's awful is that Flux makes it unnatural to reuse functionality across stores. If two stores need to handle pagination in response to different actions, they either need to inherit from a common base store (bad! you're locking yourself into a particular design when you use inheritance), or call an externally defined function from within the event handler, which will need to somehow operate on the Flux store's private state. The whole thing is messy (although definitely in the realm of possible).On the other hand, with Redux pagination is natural thanks to reducer composition. It's reducers all the way down, so you can write a reducer factory that generates pagination reducers and then use it in your reducer tree. The key to why it's so easy is because in Flux, stores are flat, but in Redux, reducers can be nested via functional composition, just like React components can be nested.This pattern also enables wonderful features like no-user-code undo/redo. Can you imagine plugging Undo/Redo into a Flux app being two lines of code? Hardly. With Redux, it is—again, thanks to reducer composition pattern. I need to highlight there's nothing new about it—this is the pattern pioneered and described in detail in Elm Architecture which was itself influenced by Flux.People have been rendering on the server fine with Flux, but seeing that we have 20 Flux libraries each attempting to make server rendering「easier」, perhaps Flux has some rough edges on the server. The truth is Facebook doesn't do much server rendering, so they haven't been very concerned about it, and rely on the ecosystem to make it easier.In traditional Flux, stores are singletons. This means it's hard to separate the data for different requests on the server. Not impossible, but hard. This is why most Flux libraries (as well as the new Flux Utils) now suggest you use classes instead of singletons, so you can instantiate stores per request.There are still the following problems that you need to solve in Flux (either yourself or with the help of your favorite Flux library such as Flummox or Alt):Admittedly Flux frameworks (not vanilla Flux) have solutions to these problems, but I find them overcomplicated. For example, Flummox asks you to implement serialize() and deserialize() in your stores. Alt solves this nicer by providing takeSnapshot() that automatically serializes your state in a JSON tree.Redux just goes further: since there is just a single store (managed by many reducers), you don't need any special API to manage the (re)hydration. You don't need to「flush」or「hydrate」stores—there's just a single store, and you can read its current state, or create a new store with a new state. Each request gets a separate store instance. Read more about server rendering with Redux.Again, this is a case of something possible both in Flux and Redux, but Flux libraries solve this problem by introducing a ton of API and conventions, and Redux doesn't even have to solve it because it doesn't have that problem in the first place thanks to conceptual simplicity.I didn't actually intend Redux to become a popular Flux library—I wrote it as I was working on my ReactEurope talk on hot reloading with time travel. I had one main objective: make it possible to change reducer code on the fly or even「change the past」by crossing out actions, and see the state being recalculated.I haven't seen a single Flux library that is able to do this. React Hot Loader also doesn't let you do this—in fact it breaks if you edit Flux stores because it doesn't know what to do with them.When Redux needs to reload the reducer code, it calls replaceReducer(), and the app runs with the new code. In Flux, data and functions are entangled in Flux stores, so you can't「just replace the functions」. Moreover, you'd have to somehow re-register the new versions with the Dispatcher—something Redux doesn't even have.Redux has a rich and fast-growing ecosystem. This is because it provides a few extension points such as middleware. It was designed with use cases such as logging, support for Promises, Observables, routing, immutability dev checks, persistence, etc, in mind. Not all of these will turn out to be useful, but it's nice to have access to a set of tools that can be easily combined to work together.Redux preserves all the benefits of Flux (recording and replaying of actions, unidirectional data flow, dependent mutations) and adds new benefits (easy undo-redo, hot reloading) without introducing Dispatcher and store registration.Keeping it simple is important because it keeps you sane while you implement higher-level abstractions.Unlike most Flux libraries, Redux API surface is tiny. If you remove the developer warnings, comments, and sanity checks, it's 99 lines. There is no tricky async code to debug.You can actually read it and understand all of Redux.See also my answer on downsides of using Redux compared to Flux.In Quora, somebody says: Also this visual diagram which I've created to show a quick view of both, probably a quick answer for the people who don't want to read the whole explanation:

But if you still interested knowing more, read on.From Redux docs:Also from Redux docs:You might be best starting with reading this post by Dan Abramov where he discusses various implementations of Flux and their trade-offs at the time he was writing redux:

The Evolution of Flux FrameworksSecondly that motivations page you link to does not really discuss the motivations of Redux so much as the motivations behind Flux (and React). The Three Principles is more Redux specific though still does not deal with the implementation differences from the standard Flux architecture.Basically, Flux has multiple stores that compute state change in response to UI/API interactions with components and broadcast these changes as events that components can subscribe to. In Redux, there is only one store that every component subscribes to. IMO it feels at least like Redux further simplifies and unifies the flow of data by unifying (or reducing, as Redux would say) the flow of data back to the components - whereas Flux concentrates on unifying the other side of the data flow - view to model.I'm an early adopter and implemented a mid-large single page application using the Facebook Flux library.As I'm a little late to the conversation I'll just point out that despite my best hopes Facebook seem to consider their Flux implementation to be a proof of concept and it has never received the attention it deserves.I'd encourage you to play with it, as it exposes more of the inner working of the Flux architecture which is quite educational, but at the same time it does not provide many of the benefits that libraries like Redux provide (which aren't that important for small projects, but become very valuable for bigger ones).We have decided that moving forward we will be moving to Redux and I suggest you do the same ;)Here is the simple explanation of Redux over Flux.

Redux does not have a dispatcher.It relies on pure functions called reducers. It does not need a dispatcher. Each actions are handled by one or more reducers to update the single store. Since data is immutable, reducers returns a new updated state that updates the storeFor more information Flux vs ReduxI worked quite a long time with Flux and now quite a long time using Redux. As Dan pointed out both architectures are not so different. The thing is that Redux makes the things simpler and cleaner. It teaches you a couple of things on top of Flux. Like for example Flux is a perfect example of one-direction data flow. Separation of concerns where we have data, its manipulations and view layer separated. In Redux we have the same things but we also learn about immutability and pure functions.From a new react/redux adopter migrating from (a few years of) ExtJS in mid-2018: After sliding backward down the redux learning curve I had the same question and thought pure flux would be simpler like OP. I soon saw the benefits of redux over flux as noted in the answers above, and was working it into my first app. While getting a grip on the boiler plate again, I tried out a few of the other state management libs, the best I found was rematch. It was much more intuitive then vanilla redux, it cuts out 90% of the boilerplate and cut out 75% of the time I was spending on redux (something I think a library should be doing), I was able to get a couple enterprise apps going right away.It also runs with the same redux tooling. This is a good article that covers some of the benefits.So for anyone else who arrived to this SO post searching "simpler redux", I recommend trying it out as a simple alternative to redux with all the benefits and 1/4 of the boilerplate.According to this article:

https://medium.freecodecamp.org/a-realworld-comparison-of-front-end-frameworks-with-benchmarks-2019-update-4be0d3c78075You better use MobX to manage the data in your app to get better performance, not Redux.

(Built-in) way in JavaScript to check if a string is a valid number

Electrons_Ahoy

[(Built-in) way in JavaScript to check if a string is a valid number](https://stackoverflow.com/questions/175739/built-in-way-in-javascript-to-check-if-a-string-is-a-valid-number)

I'm hoping there's something in the same conceptual space as the old VB6 IsNumeric() function?

2008-10-06 19:12:52Z

I'm hoping there's something in the same conceptual space as the old VB6 IsNumeric() function?This works regardless of whether the variable content is a string or number.Of course, you can negate this if you need to. For example, to implement the IsNumeric example you gave:Only works if the string only contains numeric characters, else it returns NaN.Useful for converting '12px' to 12, for example:Bear in mind that, unlike +num, parseInt (as the name suggests) will convert a float into an integer by chopping off everything following the decimal point (if you want to use parseInt() because of this behaviour, you're probably better off using another method instead):Empty strings may be a little counter-intuitive. +num converts empty strings or strings with spaces to zero, and isNaN() assumes the same:But parseInt() does not agree:And you could go the RegExp-way:If you're just trying to check if a string is a whole number (no decimal places), regex is a good way to go. Other methods such as isNaN are too complicated for something so simple.To only allow positive whole numbers use this:If you really want to make sure that a string contains only a number, any number (integer or floating point), and exactly a number, you cannot use parseInt()/ parseFloat(), Number(), or !isNaN() by themselves.  Note that !isNaN() is actually returning true when Number() would return a number, and false when it would return NaN, so I will exclude it from the rest of the discussion.The problem with parseFloat() is that it will return a number if the string contains any number, even if the string doesn't contain only and exactly a number:The problem with Number() is that it will return a number in cases where the passed value is not a number at all!The problem with rolling your own regex is that unless you create the exact regex for matching a floating point number as Javascript recognizes it you are going to miss cases or recognize cases where you shouldn't.  And even if you can roll your own regex, why?  There are simpler built-in ways to do it.However, it turns out that Number() (and isNaN()) does the right thing for every case where parseFloat() returns a number when it shouldn't, and vice versa.  So to find out if a string is really exactly and only a number, call both functions and see if they both return true:The accepted answer for this question has quite a few flaws (as highlighted by couple of other users). This is one of the easiest & proven way to approach it in javascript:Below are some good test cases:Try the isNan function:Old question, but there are several points missing in the given answers.Scientific notation.!isNaN('1e+30') is true, however in most of the cases when people ask for numbers, they do not want to match things like 1e+30.Large floating numbers may behave weirdObserve (using Node.js):On the other hand:So, if one expects String(Number(s)) === s, then better limit your strings to 15 digits at most (after omitting leading zeros).InfinityGiven all that, checking that the given string is a number satisfying all of the following:is not such an easy task. Here is a simple version:However, even this one is far from complete. Leading zeros are not handled here, but they do screw the length test.I have tested and Michael's solution is best. Vote for his answer above (search this page for "If you really want to make sure that a string" to find it). In essence, his answer is this:It works for every test case, which I documented here:

https://jsfiddle.net/wggehvp9/5/Many of the other solutions fail for these edge cases:

' ', null, "", true, and [].

In theory, you could use them, with proper error handling, for example:orwith special handling for 

/\s/, null, "", true, false, [] (and others?)You can use the result of Number when passing an argument to its constructor.If the argument (a string) cannot be converted into a number, it returns NaN, so you can determinate if the string provided was a valid number or not.Notes: Note when passing empty string or  '\t\t' and '\n\t' as Number will return 0; Passing true will return 1 and false returns 0.Maybe there are one or two people coming across this question who need a much stricter check than usual (like I did). In that case, this might be useful:Beware! This will reject strings like .1, 40.000, 080, 00.1. It's very picky - the string must match the "most minimal perfect form" of the number for this test to pass.It uses the String and Number constructor to cast the string to a number and back again and thus checks if the JavaScript engine's "perfect minimal form" (the one it got converted to with the initial Number constructor) matches the original string.parseInt(), but be aware that this function is a bit different in the sense that it for example returns 100 for parseInt("100px").Quote:is not entirely true if you need to check for leading/trailing spaces - for example when a certain quantity of digits is required, and you need to get, say, '1111' and not ' 111' or '111 ' for perhaps a PIN input.Better to use:Why is jQuery's implementation not good enough?Michael suggested something like this (although I've stolen "user1691651 - John"'s altered version here):The following is a solution with most likely bad performance, but solid results. It is a contraption made from the jQuery 1.12.4 implementation and Michael's answer, with an extra check for leading/trailing spaces (because Michael's version returns true for numerics with leading/trailing spaces):The latter version has two new variables, though. One could get around one of those, by doing:I haven't tested any of these very much, by other means than manually testing the few use-cases I'll be hitting with my current predicament, which is all very standard stuff. This is a "standing-on-the-shoulders-of-giants" situation.It is not valid for TypeScript as:declare function isNaN(number: number): boolean;For TypeScript you can use:/^\d+$/.test(key)Well, I'm using this one I made...It's been working so far:If you spot any problem with it, tell me, please.If anyone ever gets this far down, I spent some time hacking on this trying to patch moment.js (https://github.com/moment/moment). Here's something that I took away from it:Handles the following cases:True! :False! :Ironically, the one I am struggling with the most:Any suggestions welcome. :]Often, a 'valid number' means a Javascript number excluding NaN and Infinity, ie a 'finite number'.To check the numerical validity of a value (from an external source for example), you can define in ESlint Airbnb style :and use it this way:PFB the working solution:Save yourself the headache of trying to find a "built-in" solution.There isn't a good answer, and the hugely upvoted answer in this thread is wrong.npm install is-numberUsing plain JavaScript:Using Lodash:I recently wrote an article about ways to ensure a variable is a valid number: https://github.com/jehugaleahsa/artifacts/blob/master/2018/typescript_num_hack.md The article explains how to ensure floating point or integer, if that's important (+x vs ~~x).The article assumes the variable is a string or a number to begin with and trim is available/polyfilled. It wouldn't be hard to extend it to handle other types, as well. Here's the meat of it:Maybe this has been rehashed too many times, however I fought with this one today too and wanted to post my answer, as I didn't see any other answer that does it as simply or thoroughly:This seems quite simple and covers all the bases I saw on the many other posts and thought up myself:You can also try your own isNumeric function and just past in these use cases and scan for "true" for all of them.Or, to see the values that each return:My attempt at a slightly confusing, Pherhaps not the best solutionIn my application we are only allowing a-z A-Z and 0-9 characters. I found the answer above using " string % 1 === 0" worked unless the string began with 0xnn (like 0x10) and then it would return it as numeric when we didn't want it to. The following simple trap in my numeric check seems to do the trick in our specific cases.    Warning : This might be exploiting a longstanding bug in Javascript and Actionscript [Number("1" + the_string) % 1 === 0)],  I can't speak for that, but it is exactly what we needed.My solution:You can add additional conditions inside the loop, to fit you particular needs.You could make use of types, like with the flow library, to get static, compile time checking.  Of course not terribly useful for user input.Here's a one-liner to check if sNum is a valid numeric value; it has been tested for a wide variety of inputs:Just use isNaN(), this will convert the string to a number and if get a valid number, will return false...I'm using the following:

How do I check if an object has a key in JavaScript? [duplicate]

ForYourOwnGood

[How do I check if an object has a key in JavaScript? [duplicate]](https://stackoverflow.com/questions/455338/how-do-i-check-if-an-object-has-a-key-in-javascript)

Which is the right thing to do?oror

2009-01-18 15:42:58Z

Which is the right thing to do?ororTry the JavaScript in operator.And the inverse.Be careful! The in operator matches all object keys, including those in the object's prototype chain.Use myObj.hasOwnProperty('key') to check an object's own keys and will only return true if key is available on myObj directly:Unless you have a specific reason to use the in operator, using myObj.hasOwnProperty('key') produces the result most code is looking for.You should use hasOwnProperty. For example:Note: If you are using ESLint, the above may give you an error for violating the no-prototype-builtins rule, in that case the workaround is as below:

How to measure time taken by a function to execute

Julius A

[How to measure time taken by a function to execute](https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute)

I need to get execution time in milliseconds.

2008-11-24 11:09:14Z

I need to get execution time in milliseconds.Note: The string being pass to the time() and timeEnd() methods must match(for the timer to finish as expected).use new Date().getTime()ex.Use performance.now():It works on: console.time may be viable for you, but it's non-standard §:Besides browser support, performance.now seems to have the potential to provide more accurate timings as it appears to be the bare-bones version of console.time.<rant> Also, DON'T EVER use Date for anything because  it's affected by changes in "system time". Which means we will get invalid results —like "negative timing"— when the user doesn't have an accurate system time:(Set your system clock to one year ago and go to Gmail so we can all have a good laugh. Perhaps someday we will have a Hall of Shame for JS Date.)Google Spreadsheet's now() function also suffers from this problem.The only time you'll be using Date is when you want to show the user his system clock time. Not when you want to get the time or to measure anything.If you need to get function execution time on your local development machine, you can either use your browser's profiling tools, or console commands such as console.time() and console.timeEnd().All modern browsers have JavaScript profilers built-in.  These profilers should give the most accurate measurement as you do not have to modify your existing code, which could affect the function's execution time.To profile your JavaScript:Alternatively, on your development machine, you can add instrumentation to your code with console.time() and console.timeEnd().  These functions, supported in Firefox11+, Chrome2+ and IE11+, report on timers that you start/stop via console.time().  time() takes a user-defined timer name as an argument, and timeEnd() then reports on the execution time since the timer started:Note that only Firefox returns the elapsed time in the timeEnd() call.  The other browsers simply report the result to the developer console: the return value of timeEnd() is undefined.If you want to get function execution time in the wild, you will have to instrument your code.  You have a couple options.  You can simply save the start and end times by querying new Date().getTime():However, the Date object only has millisecond resolution and will be affected by any OS's system clock changes.  In modern browsers, there's a better option.The better option is to use the High Resolution Time, aka window.performance.now().  now() is better than the traditional Date.getTime() in two important ways:now() can be used in almost every place that new Date().getTime(), + new Date andt Date.now() are.  The exception is that Date and now() times don't mix, as Date is based on unix-epoch (the number of milliseconds since 1970), while now() is the number of milliseconds since your page navigation started (so it will be much smaller than Date).Here's an example of how to use now():now() is supported in Chrome stable, Firefox 15+, and IE10.  There are also several polyfills available.One other option for measuring execution time in the wild is UserTiming.  UserTiming behaves similarly to console.time() and console.timeEnd(), but it utilizes the same High Resolution Timestamp that now() uses (so you get a sub-millisecond monotonically increasing clock), and saves the timestamps and durations to the PerformanceTimeline.UserTiming has the concepts of marks (timestamps) and measures (durations).  You can define as many of either as you want, and they're exposed on the PerformanceTimeline.To save a timestamp, you call mark(startMarkName).  To get the duration since your first mark, you simply call measure(measurename, startMarkname).  The duration is then saved in the PerformanceTimeline alongside your marks.UserTiming is available in IE10+ and Chrome25+.  There is also a polyfill available (which I wrote).To get precise values you should use Performance interface. It's supported in modern versions of Firefox, Chrome, Opera and IE. Here's an example of how it can be used:Date.getTime() or console.time() are not good for measuring precise execution time. You can use them if quick rough estimate is OK for you. By rough estimate I mean you can get 15-60 ms shift from the real time.Check this brilliant post on measuring execution time in JavaScript. The author also gives a couple of links about accuracy of JavaScript time, worth reading. Use Firebug, enable both Console and Javascript.  Click Profile.  Reload.  Click Profile again.  View the report.process.hrtime() is available within Node.js - it returns a value in nanosecondsBenchmarkOutputperformance.now() is optional - just pass false into StopWatch constructor function.you can use add operator also hereTo extend vsync's code further to have the ability to return the timeEnd as a value in NodeJS use this little piece of code.Now use the code like so:This gives you more possibilities. You can store the execution time to be used for more purposes like using it in equations, or stored in a database, sent to a remote client over websockets, served on a webpage, etc.It is possible to use only one variable:timer/1000 - to convert milliseconds to seconds.toFixed(5) - to trim extra digitsSince console.time and performance.now aren't supported in some major browsers (i.e. IE10), I created a slim utility that utilizes the best available methods. However, it lacks error handling for false usages (calling End() on a not initialized timer).Use it and improve it as you want. It may help you.var t0 = date.now();

doSomething();

var t1 = date.now();

console.log("Call to doSomething took approximate" + (t1 - t0)/1000 + " seconds.")Here's a decorator for timing functionsUsage:If you're using async functions you can make timed async and add an await before f(...args), and that should work for those. It gets more complicated if you want one decorator to handle both sync and async functions. Thanks, Achim Koellner, will expand your answer a bit:Please, note, that you shouldn't do anything apart from what you want to measure (for example, console.log will also take time to execute and will affect performance tests).Note, that in order by measure asynchronous functions execution time, you should insert var timeInMilliseconds = process.hrtime(t0)[1]/1000000; inside the callback. For example,A couple months ago I put together my own routine that times a function using Date.now() -- even though at the time the accepted method seemed to be performance.now() --

 because the performance object is not yet available (built-in) in the stable Node.js release.Today I was doing some more research and found another method for timing. Since I also found how to use this in Node.js code, I thought I would share it here. The following is combined from the examples given by w3c and Node.js:NOTE:If you intend to use the performance object in a Node.js app, you must include the following require: 

const { performance } = require('perf_hooks')

InitTime related to string.return Singleton.getInstance().initTime(label); // Returns the time initreturn Singleton.getInstance().endTime(label); // Returns the total time between init and endIf you want to measure the time between multiple things that aren't nested you could use this:Similar to console.time(), but easier usage if you don't need to keep track of previous timers.If you like the blue color from console.time(), you can use this line insteadIn my case, I perfer to use @ grammar suger and compile it with babel.

The problem of this method is that function has to be inside object.  Sample JS Code.babelrc (for babel 6)Works with server and client (Node or DOM), uses the Performance API. 

Good when you have many small cycles e.g. in a function called 1000 times that processes 1000 data objects but you want to see how each operation in this function adds up to the total.So this one uses a module global (singleton) timer. Same as a class singleton pattern, just a bit simpler to use, but you need to put this in a separate e.g. stopwatch.js file.The best way would be to use the performance hooks module. Although unstable, you can mark specific areas of your code and measure the duration between marked areas.Try herethere are multiple ways to achieve this objective : Here's what happens when you apply the unary plus operator to a Date instance:

         Get the value of the Date instance in question

         Convert it to a NumberNOTE: getTime() gives better performance than unary + operator.With performanceNodeJs: It is required to import the performance classUsing console.timeYou can read more about this on MDN and in the Node.js documentation.Available on Chrome, Firefox, Opera and NodeJS. (not on Edge or Internet Explorer).As previously stated check for and use built in timer. But if you want or need to write your own here is my two cents:The accepted answer is wrong ! Since JavaScript is asynchronous, the values of the variable end of the accepted answer would be wrong.The execution of the for may be very fast so you can not see that the result is wrong. You can test it with a code doing some request :So the alert will prompt very quickly but in the console you'll see that the ajax requests are continuing. Here is how you should do it : https://developer.mozilla.org/en-US/docs/Web/API/Performance.now

Convert a Unix timestamp to time in JavaScript

roflwaffle

[Convert a Unix timestamp to time in JavaScript](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

I am storing time in a MySQL database as a Unix timestamp and that gets sent to some JavaScript code. How would I get just the time out of it?For example, in HH/MM/SS format.

2009-05-11 08:23:28Z

I am storing time in a MySQL database as a Unix timestamp and that gets sent to some JavaScript code. How would I get just the time out of it?For example, in HH/MM/SS format.For more information regarding the Date object, please refer to MDN or the ECMAScript 5 specification.JavaScript works in milliseconds, so you'll first have to convert the UNIX timestamp from seconds to milliseconds.I'm partial to Jacob Wright's Date.format() library, which implements JavaScript date formatting in the style of PHP's date() function.Here is the shortest one-liner solution to format seconds as hh:mm:ss:N.B.: This solution does not require any third-party libraries and is supported in all modern browsers and JavaScript engines.Use:and for time:see Date.prototype.toLocaleDateString()I'd think about using a library like momentjs.com, that makes this really simple:Based on a Unix timestamp:Based on a MySQL date string:UNIX timestamp is number of seconds since 00:00:00 UTC on January 1, 1970 (according to Wikipedia).Argument of Date object in Javascript is number of miliseconds since 00:00:00 UTC on January 1, 1970 (according to W3Schools Javascript documentation).See code below for example:gives:shortest one-liner solution to format seconds as hh:mm:ss: variant:Using Moment.js, you can get time and date like this:And you can get only time using this:The problem with the aforementioned solutions is, that if hour, minute or second, has only one digit (i.e. 0-9), the time would be wrong, e.g. it could be 2:3:9, but it should rather be 02:03:09.According to this page it seems to be a better solution to use Date's "toLocaleTimeString" method.In moment you must use unix timestamp:Another way - from an ISO 8601 date.Based on @shomrat's answer, here is a snippet that automatically writes datetime like this (a bit similar to StackOverflow's date for answers: answered Nov 6 '16 at 11:51):oror (if different but same year than today)or (if another year than today)The modern solution that doesn't need a 40 KB library:Intl.DateTimeFormat is the non-culturally imperialistic way to format a date/time.My timestamp is being fetched from a PHP backend. I tried all the methods above and it did not work. I then came across a tutorial that worked:the methods above will generate this resultsThere's a bunch of methods that work perfectly with timestamps. Cant list them allPay attention to the zero problem with some of the answers. For example, the timestamp 1439329773 would be mistakenly converted to 12/08/2015 0:49.I would suggest on using the following to overcome this issue:Now results in:See Date/Epoch Converter.You need to ParseInt, otherwise it wouldn't work:You can use the following function to convert your timestamp to HH:MM:SS format :Without passing a separator, it uses : as the (default) separator :If you want to use / as a separator, just pass it as the second parameter:See also this Fiddle.If you want to convert Unix time duration to real hours, minutes, and seconds, you could use the following code:Code below also provides 3-digit millisecs, ideal for console log prefixes:https://momentjs.com/The answer given by @Aron works, but it didn't work for me as I was trying to convert timestamp starting from 1980. So I made few changes as followsSo if you have a timestamp starting from another decade or so just use this. It saves a lot of headache for me.

Object comparison in JavaScript [duplicate]

spankmaster79

[Object comparison in JavaScript [duplicate]](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)

What is the best way to compare objects in JavaScript?Example:I know that two objects are equal if they refer to the exact same object, but is there a way to check if they have the same attributes' values?The following way works for me, but is it the only possibility?

2009-07-01 12:18:29Z

What is the best way to compare objects in JavaScript?Example:I know that two objects are equal if they refer to the exact same object, but is there a way to check if they have the same attributes' values?The following way works for me, but is it the only possibility?Unfortunately there is no perfect way, unless you use _proto_ recursively and access all non-enumerable properties, but this works in Firefox only.So the best I can do is to guess usage scenarios.Works when you have simple JSON-style objects without methods and DOM nodes inside:The ORDER of the properties IS IMPORTANT, so this method will return false for following objects:Compares objects without digging into prototypes, then compares properties' projections recursively, and also compares constructors.This is almost correct algorithm:Known issues (well, they have very low priority, probably you'll never notice them):Tests: passes tests are from How to determine equality for two JavaScript objects?.Here is my commented solution in ES3 (gory details after the code):In developing this solution, I took a particular look at corner cases, efficiency, yet trying to yield a simple solution that works, hopefully with some elegance. JavaScript allows both null and undefined properties and objects have prototypes chains that can lead to very different behaviors if not checked.First I have chosen to extend Object instead of Object.prototype, mostly because null could not be one of the objects of the comparison and that I believe that null should be a valid object to compare with another. There are also other legitimate concerns noted by others regarding the extension of Object.prototype regarding possible side effects on other's code.Special care must taken to deal the possibility that JavaScript allows object properties can be set to undefined, i.e. there exists properties which values are set to undefined. The above solution verifies that both objects have the same properties set to undefined to report equality. This can only be accomplished by checking the existence of properties using Object.hasOwnProperty( property_name ). Also note that JSON.stringify() removes properties that are set to undefined, and that therefore comparisons using this form will ignore properties set to the value undefined. Functions should be considered equal only if they share the same reference, not just the same code, because this would not take into account these functions prototype. So comparing the code string does not work to guaranty that they have the same prototype object.The two objects should have the same prototype chain, not just the same properties. This can only be tested cross-browser by comparing the constructor of both objects for strict equality. ECMAScript 5 would allow to test their actual prototype using Object.getPrototypeOf(). Some web browsers also offer a __proto__ property that does the same thing. A possible improvement of the above code would allow to use one of these methods whenever available.The use of strict comparisons is paramount here because 2 should not be considered equal to "2.0000", nor false should be considered equal to null, undefined, or 0.Efficiency considerations lead me to compare for equality of properties as soon as possible. Then, only if that failed, look for the typeof these properties. The speed boost could be significant on large objects with lots of scalar properties.No more that two loops are required, the first to check properties from the left object, the second to check properties from the right and verify only existence (not value), to catch these properties which are defined with the undefined value.Overall this code handles most corner cases in only 16 lines of code (without comments).Update (8/13/2015). I have implemented a better version, as the function value_equals() that is faster, handles properly corner cases such as NaN and 0 different than -0, optionally enforcing objects' properties order and testing for cyclic references, backed by more than 100 automated tests as part of the Toubkal project test suite.Simple way to compare ONE-LEVEL only objects.Certainly not the only way - you could prototype a method (against Object here but I certainly wouldn't suggest using Object for live code) to replicate C#/Java style comparison methods.Edit, since a general example seems to be expected:Note that testing methods with toString() is absolutely not good enough but a method which would be acceptable is very hard because of the problem of whitespace having meaning or not, never mind synonym methods and methods producing the same result with different implementations. And the problems of prototyping against Object in general.The following algorithm will deal with self-referential data structures, numbers, strings, dates, and of course plain nested javascript objects:Objects are considered equivalent whenFunctions are not considered identical by function text.  This test is insufficient because functions may have differing closures.  Functions are only considered equal if === says so (but you could easily extend that equivalent relation should you choose to do so).Infinite loops, potentially caused by circular datastructures, are avoided.  When areEquivalent attempts to disprove equality and recurses into an object's properties to do so, it keeps track of the objects for which this sub-comparison is needed.  If equality can be disproved, then some reachable property path differs between the objects, and then there must be a shortest such reachable path, and that shortest reachable path cannot contain cycles present in both paths; i.e. it is OK to assume equality when recursively comparing objects.  The assumption is stored in a property areEquivalent_Eq_91_2_34, which is deleted after use, but if the object graph already contains such a property, behavior is undefined.  The use of such a marker property is necessary because javascript doesn't support dictionaries using arbitrary objects as keys.I wrote this piece of code for object comparison, and it seems to work. check the assertions:I have modified a bit the code above. for me 0 !== false and null !== undefined. If you do not need such strict check remove one "=" sign in "this[p] !== x[p]" inside the code.Then I have tested it with next objects:a==b expected true; returned truea==c expected false; returned falsec==d expected false; returned falsea==e expected false; returned falsef==g expected true; returned trueh==g expected false; returned falsei==j expected true; returned trued==k expected false; returned falsek==l expected false; returned falseif you want to check for methods explicitly you can use the method.toSource() or method.toString() methods.Here is my version, pretty much stuff from this thread is integrated (same counts for the test cases):Here is my TestCase:If you work without the JSON library, maybe this will help you out:

What is the difference between angular-route and angular-ui-router?

Premchandra Singh

[What is the difference between angular-route and angular-ui-router?](https://stackoverflow.com/questions/21023763/what-is-the-difference-between-angular-route-and-angular-ui-router)

I'm planning to use AngularJS in my big applications. So I'm in the process to find out the right modules to use.What is the difference between ngRoute (angular-route.js) and ui-router (angular-ui-router.js) modules?In many articles when ngRoute is used, route is configured with $routeProvider. However, when used with ui-router, route is configured with $stateProvider and $urlRouterProvider. Which module should I use for better manageability and extensibility?

2014-01-09 15:03:28Z

I'm planning to use AngularJS in my big applications. So I'm in the process to find out the right modules to use.What is the difference between ngRoute (angular-route.js) and ui-router (angular-ui-router.js) modules?In many articles when ngRoute is used, route is configured with $routeProvider. However, when used with ui-router, route is configured with $stateProvider and $urlRouterProvider. Which module should I use for better manageability and extensibility?ui-router is a 3rd-party module and is very powerful.  It supports everything the normal ngRoute can do as well as many extra functions.Here are some common reason ui-router is chosen over ngRoute:In essence, ui-router is ngRouter with more features, under the sheets it is quite different. These additional features are very useful for larger applications.More Information:ngRoute is a module developed by the AngularJS team which was earlier part of the AngularJS core.ui-router is a framework which was made outside the AngularJS project to improve and enhance routing capabilities.From the ui-router documentation:Neither of them is better, you will have to chose the most appropriate for your project.However, if you plan to have complex views in your application and you would like to deal with the "$state" notion. I recommend you to chose ui-router.URL: https://docs.angularjs.org/api/ngRouteURL: https://github.com/angular-ui/ui-routerSome of the difference between ui-router and ngRoutehttp://www.amasik.com/angularjs-ngroute-vs-ui-router/ngRoute is part of the core AngularJS framework.ui-router is a community library that has been created to attempt to improve upon the default routing capabilities.Here is a good article about configuring/setting up ui-router:http://www.ng-newsletter.com/posts/angular-ui-router.htmlIf you want to make use of nested views functionality implemented within ngRoute paradigm, try angular-route-segment - it aims to extend ngRoute rather than to replace it.Angular 1.xng-route:ng-route is developed by the angularJS Team for routing.ng-route:  url (Location) based routing.Ex: ui-route:ui-router is develoepd by 3rd party module.ui-router : state based routingEx:--> ui-router allows for nested views --> ui-router more powerful than ng-routeng-router, 

ui-routerGenerally ui-router works on a state mechanism... It can be understood with an easy example:Let's say we have a big application of a music library (like ..gaana or saavan or any other). And at the bottom of the page, you have a music player which is shared across all the state of the page.Now let's say you just click on some songs to play. In this case, only that music player state should change instead of reloading the full page. That can be easily handled by ui-router.While in ngRoute we just attach the view and the controller.ngRoute is a module built by the Angular team that provides basic client-side routing functionality. This module provides a fairly powerful base for routing, and can be built upon pretty easily to give solid routing functionality, as exemplified in this blog post (be sure to read the comment trail between Ward Bell and Ben Nadel, the author - they are a couple of Angular pros)ui-router shifts the focus from url-centric routes to application "states", which may or may not be reflected in the url.The primary features added by ui-router are nested states and named views.Nested states allow you to separate controller logic for the various pieces of the application. A very simple example of this would be an app with primary navigation across the top, a secondary navigation list along the left, and content on the right. Without nested states, a single controller would typically have to handle the display logic for the secondary navigation as well as the content. Nested routing allows you to separate these concerns.Named views are another additional feature of ui-router. With ngRoute, you can only have a single ngView directive on a page, whereas with named views in ui-router you can specify multiple ui-view directives, and then each state is able to affect the template and controller of the names views. A super simple example of this would be to have the main content of your app be the primary view, and then to also have a footer bar that would be a separate ui-view. In this scenario, the footer's controller no longer has to listen for state/route changes.A good comparison of ngRoute and ui-router can be found on this podcast episode.Just to make things more confusing, keep an eye on the new "official" routing module that the Angular team is expecting to release for versions 1.5 and 2.0 of Angular. This will be replacing the ngRoute module. Here  is the current documentation for the new Router module - it is fairly sparse as of this posting since the implementation has not yet been finalized. Watch here for more news on when this module will actually be released.ngRoute is a basic routing library, where you can specify just one view and controller for any route.With ui-router, you can specify multiple views, both parallel and nested. So if your application requires (or may require in future) any kind of complex routing/views, then go ahead with ui-router. This is best getting started guide for AngularUI Router.Basic thing you have to know: ng-router uses $location.path() and ui-router uses $state.goRest us all features.ui router make your life easier! You can add it to you AngularJS application via injecting it into your applications...ng-route comes as part of the core AngularJS, so it's simpler and gives you fewer options...Look at here to understand ng-route better: https://docs.angularjs.org/api/ngRouteAlso when using it, don't forget to use: ngView ..ng-ui-router is different but:https://github.com/angular-ui/ui-router but gives you more options....AngularUI Router is a routing framework for AngularJS, which allows you to organize the parts of your interface into a state machine. Unlike the $route service in the Angular ngRoute module, which is organized around URL routes, UI-Router is organized around states, which may optionally have routes, as well as other behavior, attached.https://github.com/angular-ui/ui-routerngRoute is a module developed by the Angular.js team which was earlier part of the Angular core.ui-router is a framework which was made outside the Angular.js project to improve and enhance routing capabalities.1- ngRoute is developed by angular team whereas ui-router is a 3rd party module.     2- ngRoute implements routing based on the route URL whereas ui-router implements routing based on the state of the application.                                             3- ui-router provides everything that the ng-route provides plus some additional features like nested states and multiple named views.ng-View (developed by the AngularJS team) can be used only once per page, whereas ui-View (3rd party module) can be used multiple times per page.ui-View is therefore the best option.

Is Safari on iOS 6 caching $.ajax results?

user1684978

[Is Safari on iOS 6 caching $.ajax results?](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

Since the upgrade to iOS 6, we are seeing Safari's web view take the liberty of caching $.ajax calls. This is in the context of a PhoneGap application so it is using the Safari WebView. Our $.ajax calls are POST methods and we have cache set to false {cache:false}, but still this is happening. We tried manually adding a TimeStamp to the headers but it did not help.We did more research and found that Safari is only returning cached results for web services that have a function signature that is static and does not change from call to call.  For instance, imagine a function called something like:This function receives the same input parameters over and over again, but the data it returns should be different every time.Must be in Apple's haste to make iOS 6 zip along impressively they got too happy with the cache settings.  Has anyone else seen this behavior on iOS 6? If so, what exactly is causing it?The workaround that we found was to modify the function signature to be something like this:and then always pass in a TimeStamp parameter as well, and just discard that value on the server side.  This works around the issue.  I hope this helps some other poor soul who spends 15 hours on this issue like I did!

2012-09-20 06:07:23Z

Since the upgrade to iOS 6, we are seeing Safari's web view take the liberty of caching $.ajax calls. This is in the context of a PhoneGap application so it is using the Safari WebView. Our $.ajax calls are POST methods and we have cache set to false {cache:false}, but still this is happening. We tried manually adding a TimeStamp to the headers but it did not help.We did more research and found that Safari is only returning cached results for web services that have a function signature that is static and does not change from call to call.  For instance, imagine a function called something like:This function receives the same input parameters over and over again, but the data it returns should be different every time.Must be in Apple's haste to make iOS 6 zip along impressively they got too happy with the cache settings.  Has anyone else seen this behavior on iOS 6? If so, what exactly is causing it?The workaround that we found was to modify the function signature to be something like this:and then always pass in a TimeStamp parameter as well, and just discard that value on the server side.  This works around the issue.  I hope this helps some other poor soul who spends 15 hours on this issue like I did!After a bit of investigation, turns out that Safari on iOS6 will cache POSTs that have either no Cache-Control headers or even "Cache-Control: max-age=0".The only way I've found of preventing this caching from happening at a global level rather than having to hack random querystrings onto the end of service calls is to set "Cache-Control: no-cache".So:I suspect that Apple is taking advantage of this from the HTTP spec in section 9.5 about POST:So in theory you can cache POST responses...who knew. But no other browser maker has ever thought it would be a good idea until now. But that does NOT account for the caching when no Cache-Control or Expires headers are set, only when there are some set. So it must be a bug.Below is what I use in the right bit of my Apache config to target the whole of my API because as it happens I don't actually want to cache anything, even gets. What I don't know is how to set this just for POSTs.Update: Just noticed that I didn't point out that it is only when the POST is the same, so change any of the POST data or URL and you're fine. So you can as mentioned elsewhere just add some random data to the URL or a bit of POST data.Update: You can limit the "no-cache" just to POSTs if you wish like this in Apache:I hope this can be of use to other developers banging their head against the wall on this one.  I found that any of the following prevents Safari on iOS 6 from caching the POST response:My solution was the following in my Javascript (all my AJAX requests are POST).I also add the [pragma: no-cache] header to many of my server responses.If you use the above solution be aware that any $.ajax() calls you make that are set to global: false will NOT use the settings specified in $.ajaxSetup(), so you will need to add the headers in again.Simple solution for all your web service requests, assuming you're using jQuery:Read more about the jQuery prefilter call here.If you aren't using jQuery, check the docs for your library of choice.  They may have similar functionality.I just had this issue as well in a PhoneGap application. I solved it by using the JavaScript function getTime() in the following manner:I wasted a few hours figuring this out. It would have been nice of Apple to notify developers of this caching issue.I had the same problem with a webapp getting data from ASP.NET webserviceThis worked for me:Finally, I've a solution to my uploading problem.In JavaScript:In PHP:From my own blog post iOS 6.0 caching Ajax POST requests:How to fix it: There are various methods to prevent caching of requests. The recommended method is adding a no-cache header. This is how it is done.Check for iOS 6.0 and set Ajax header like this:Check for iOS 6.0 and set the Ajax header like this:Make sure to add this at the top the page before any data is sent to the client.OrThis JavaScript snippet works great with jQuery and jQuery Mobile:Just place it somewhere in your JavaScript code (after jQuery is loaded, and best before you do AJAX requests) and it should help.You can also fix this issue by modifying the jQuery Ajax function by doing the following (as of 1.7.1) to the top of the Ajax function (function starts at line 7212). This change will activate the built-in anti-cache feature of jQuery for all POST requests.(The full script is available at http://dl.dropbox.com/u/58016866/jquery-1.7.1.js.)Insert below line 7221:Then modify the following (starting at line ~7497).To:A quick work-around for GWT-RPC services is to add this to all the remote methods:This is an update of Baz1nga's answer. Since options.data is not an object but a string I just resorted to concatenating the timestamp:In order to resolve this issue for WebApps added to the home screen, both of the top voted workarounds need to be followed. Caching needs to be turned off on the webserver to prevent new requests from being cached going forward and some random input needs to be added to every post request in order for requests that have already been cached to go through. Please refer to my post:iOS6 - Is there a way to clear cached ajax POST requests for webapp added to home screen?WARNING: to anyone who implemented a workaround by adding a timestamp to their requests without turning off caching on the server. If your app is added to the home screen, EVERY post response will now be cached, clearing safari cache doesn't clear it and it doesn't seem to expire. Unless someone has a way to clear it, this looks like a potential memory leak!Things that DID NOT WORK for me with an iPad 4/iOS 6:My request containing: Cache-Control:no-cacheAdding cache: false to my jQuery ajax callOnly this did the trick:That's the work around for GWT-RPCMy workaround in ASP.NET (pagemethods, webservice, etc.)While adding cache-buster parameters to make the request look different seems like a solid solution, I would advise against it, as it would hurt any application that relies on actual caching taking place. Making the APIs output the correct headers is the best possible solution, even if that's slightly more difficult than adding cache busters to the callers.For those that use Struts 1, here is how I fixed the issue.web.xmlcom.example.struts.filters.CacheControlFilter.jsI was able to fix my problem by using a combination of $.ajaxSetup and appending a timestamp to the url of my post (not to the post parameters/body). This based on the recommendations of previous answersI think you have already resolved your issue, but let me share an idea about web caching.It is true you can add many headers in each language you use, server side, client side, and you can use many other tricks to avoid web caching, but always think that you can never know from where the client are connecting to your server, you never know if he are using a Hotel「Hot-Spot」connection that uses Squid or other caching products.If the users are using proxy to hide his real position, etc… the real only way to avoid caching is the timestamp in the request also if is unused.For example:Then every cache manager you have to pass didnt find the same URL in the cache repository and go re-download the page content.Depending on the app you can trouble shoot the issue now in iOS 6 using Safari>Advanced>Web Inspector so that is helpful with this situation. Connect the phone to Safari on a Mac an then use the developer menu to trouble shoot the web app. Clear the website data on the iPhone after update to iOS6, including specific to the app using a Web View. Only one app had an issue and this solved it during IOS6 Beta testing way back, since then no real problems. You may need to look at your app as well, check out NSURLCache if in a WebView in a custom app.https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003754I guess depending on the true nature of your problem, implementation, etc. ..  Ref:  $.ajax calls I found one workaround that makes me curious as to why it works.  Before reading Tadej's answer concerning ASP.NET web service, I was trying to come up with something that would work.  And I'm not saying that it's a good solution, but I just wanted to document it here.main page:  includes a JavaScript function, checkStatus().  The method calls another method which uses a jQuery AJAX call to update the html content.  I used setInterval to call checkStatus().  Of course, I ran into the caching problem.Solution:  use another page to call the update.On the main page, I set a boolean variable, runUpdate, and added the following to the body tag:In the  of helper.html:So, if checkStatus() is called from the main page, I get the cached content.  If I call checkStatus from the child page, I get updated content.While my login and signup pages works like a charm in Firefox, IE and Chrome... I've been struggling with this issue in Safari for IOS and OSX, few months ago I found a workaround on the SO.OR via javascriptThis is kinda ugly thing but works for a while.I don't know why, but returning null to the onunload event the page do not get cached in Safari.We found that older iPhones and iPads, running iOS versions 9 & 10, occasionally return bogus blank AJAX results, perhaps due to Apple's turning down CPU speed. When returning the blank result, iOS does not call the server, as if returning a result from cache. Frequency varies widely, from roughly 10% to 30% of AJAX calls return blank.The solution is hard to believe. Just wait 1s and call again. In our testing, only one repeat was all that was ever needed, but we wrote the code to call up to 4 times. We're not sure if the 1s wait is required, but we didn't want to risk burdening our server with bursts of repeated calls.We found the problem happened with two different AJAX calls, calling on different API files with different data. But I'm concerned it could happen on any AJAX call. We just don't know because we don't inspect every AJAX result and we don't test every call multiple times on old devices.Both problem AJAX calls were using: POST, Asynchronously = true, setRequestHeader = ('Content-Type', 'application/x-www-form-urlencoded')When the problem happens, there's usually only one AJAX call going on. So it's not due to overlapping AJAX calls. Sometimes the problem happens when the device is busy, but sometimes not, and without DevTools we don't really know what's happening at the time.iOS 13 doesn't do this, nor Chrome or Firefox. We don't have any test devices running iOS 11 or 12. Perhaps someone else could test those?I'm noting this here because this question is the top Google result when searching for this problem.It worked with ASP.NET only after adding the pragma:no-cache header in IIS. Cache-Control: no-cache was not enough.I suggest a workaround to modify the function signature to be something like this:getNewRecordID(intRecordType, strTimestamp)

and then always pass in a TimeStamp parameter as well, and just discard that value on the server side. This works around the issue.

Merge/flatten an array of arrays

Andy

[Merge/flatten an array of arrays](https://stackoverflow.com/questions/10865025/merge-flatten-an-array-of-arrays)

I have a JavaScript array like:How would I go about merging the separate inner arrays into one like:

2012-06-02 18:53:46Z

I have a JavaScript array like:How would I go about merging the separate inner arrays into one like:You can use concat to merge arrays:Using the apply method of concat will just take the second parameter as an array, so the last line is identical to this:There is also an experimental Array.prototype.flat() method (not yet part of the ECMAScript standard) which you could use to flatten the arrays, although it is only available in Node.js starting with version 11, and not at all in Edge.Here's a short function that uses some of the newer JavaScript array methods to flatten an n-dimensional array.Usage:There is a confusingly hidden method, which constructs a new array without mutating the original one:It can be best done by javascript reduce function.Or, with ES2015:js-fiddleMozilla docsThere's a new native method called flat to do this exactly. (As of late 2019, flat is now published in the ECMA 2019 standard, and core-js@3 (babel's library)  includes it in their polyfill library)Most of the answers here don't work on huge (e.g. 200 000 elements) arrays, and even if they do, they're slow. polkovnikov.ph's answer has the best performance, but it doesn't work for deep flattening.Here is the fastest solution, which works also on arrays with multiple levels of nesting:It handles huge arrays just fine. On my machine this code takes about 14 ms to execute.It works with nested arrays. This code produces [1, 1, 1, 1, 1, 1, 1, 1].It doesn't have any problems with flattening arrays like this one.Update: it turned out that this solution doesn't work with large arrays. It you're looking for a better, faster solution, check out this answer.Is simply expands arr and passes it as arguments to concat(), which merges all the arrays into one. It's equivalent to [].concat.apply([], arr).You can also try this for deep flattening:See demo on JSBin.References for ECMAScript 6 elements used in this answer:Side note: methods like find() and arrow functions are not supported by all browsers, but it doesn't mean that you can't use these features right now. Just use Babel — it transforms ES6 code into ES5.You can use Underscore:Generic procedures mean we don't have to rewrite complexity each time we need to utilize a specific behaviour.concatMap (or flatMap) is exactly what we need in this situation.And yes, you guessed it correctly, it only flattens one level, which is exactly how it should workImagine some data set like thisOk, now say we want to print a roster that shows all the players that will be participating in game …If our flatten procedure flattened nested arrays too, we'd end up with this garbage result …That's not to say sometimes you don't want to flatten nested arrays, too – only that shouldn't be the default behaviour.We can make a deepFlatten procedure with ease …There. Now you have a tool for each job – one for squashing one level of nesting, flatten, and one for obliterating all nesting deepFlatten.Maybe you can call it obliterate or nuke if you don't like the name deepFlatten.Don't iterate twice !Of course the above implementations are clever and concise, but using a .map followed by a call to .reduce means we're actually doing more iterations than necessaryUsing a trusty combinator I'm calling mapReduce helps keep the iterations to a minium; it takes a mapping function m :: a -> b, a reducing function r :: (b,a) ->b and returns a new reducing function - this combinator is at the heart of transducers; if you're interested, I've written other answers about themA solution for the more general case, when you may have some non-array elements in your array.Another ECMAScript 6 solution in functional style:Declare a function: and use it:Consider also a native function Array.prototype.flat() (proposal for ES6) available in last releases of modern browsers. Thanks to @(Константин Ван) and @(Mark Amery) mentioned it in the comments.The flat function has one parameter, specifying the expected depth of array nesting, which equals 1 by default.What about using reduce(callback[, initialValue]) method of JavaScript 1.8Would do the job.To flatten an array of single element arrays, you don't need to import a library, a simple loop is both the simplest and most efficient solution :To downvoters: please read the question, don't downvote because it doesn't suit your very different problem. This solution is both the fastest and simplest for the asked question.Please note: When Function.prototype.apply ([].concat.apply([], arrays)) or the spread operator ([].concat(...arrays)) is used in order to flatten an array, both can cause stack overflows for large arrays, because every argument of a function is stored on the stack.Here is a stack-safe implementation in functional style that weighs up the most important requirements against one another:As soon as you get used to small arrow functions in curried form, function composition and higher order functions, this code reads like prose. Programming then merely consists of putting together small building blocks that always work as expected, because they don't contain any side effects.See lodash flatten, underscore flatten (shallow true)orTested withSee lodash flattenDeep, underscore flattenTested withYou can use Array.flat() with Infinity for any depth of nested array.check here for browser compatibility A Haskellesque approachES6 way:ES5 way for flatten function with ES3 fallback for N-times nested arrays:If you only have arrays with 1 string element:will do the job. Bt that specifically matches your code example.(I'm just writing this as a separate answer, based on comment of @danhbear.)I recommend a space-efficient generator function:If desired, create an array of flattened values as follows:I would rather transform the whole array, as-is, to a string, but unlike other answers, would do that using JSON.stringify and not use the toString() method, which produce an unwanted result.With that JSON.stringify output, all that's left is to remove all brackets, wrap the result with start & ending brackets yet again, and serve the result with JSON.parse which brings the string back to "life".It looks like this looks like a job for RECURSION!Code:Usage:I have done it using recursion and closuresI was goofing with ES6 Generators the other day and wrote this gist. Which contains...Basically I'm creating a generator that loops over the original input array, if it finds an array it uses the yield* operator in combination with recursion to continually flatten the internal arrays. If the item is not an array it just yields the single item. Then using the ES6 Spread operator (aka splat operator) I flatten out the generator into a new array instance.I haven't tested the performance of this, but I figure it is a nice simple example of using generators and the yield* operator.But again, I was just goofing so I'm sure there are more performant ways to do this.just the best solution without lodashThat's not hard, just iterate over the arrays and merge them:I propose two short solutions without recursion. They are not optimal from a computational complexity point of view, but work fine in average cases:The logic here is to convert input array to string and remove all brackets([]) and parse output to array. I'm using ES6 template feature for this.

How do you remove all the options of a select box and then add one option and select it with jQuery?

Jay Corbett

[How do you remove all the options of a select box and then add one option and select it with jQuery?](https://stackoverflow.com/questions/47824/how-do-you-remove-all-the-options-of-a-select-box-and-then-add-one-option-and-se)

Using core jQuery, how do you remove all the options of a select box, then add one option and select it?My select box is the following.EDIT: The following code was helpful with chaining. However, (in Internet Explorer) .val('whatever') did not select the option that was added. (I did use the same 'value' in both .append and .val.)EDIT: Trying to get it to mimic this code, I use the following code whenever the page/form is reset. This select box is populated by a set of radio buttons. .focus() was closer, but the option did not appear selected like it does with .selected= "true". Nothing is wrong with my existing code - I am just trying to learn jQuery.EDIT: selected answer was close to what I needed. This worked for me:But both answers led me to my final solution..

2008-09-06 20:53:54Z

Using core jQuery, how do you remove all the options of a select box, then add one option and select it?My select box is the following.EDIT: The following code was helpful with chaining. However, (in Internet Explorer) .val('whatever') did not select the option that was added. (I did use the same 'value' in both .append and .val.)EDIT: Trying to get it to mimic this code, I use the following code whenever the page/form is reset. This select box is populated by a set of radio buttons. .focus() was closer, but the option did not appear selected like it does with .selected= "true". Nothing is wrong with my existing code - I am just trying to learn jQuery.EDIT: selected answer was close to what I needed. This worked for me:But both answers led me to my final solution..why not just use plain javascript?I had a bug in IE7 (works fine in IE6) where using the above jQuery methods would clear the select in the DOM but not on screen. Using the IE Developer Toolbar I could confirm that the select had been cleared and had the new items, but visually the select still showed the old items - even though you could not select them.The fix was to use standard DOM methods/properites (as the poster original had) to clear rather than jQuery - still using jQuery to add options.If your goal is to remove all the options from the select except the first one (typically the 'Please pick an item' option) you could use:Not sure exactly what you mean by "add one and select it", since it will be selected by default anyway. But, if you were to add more than one, it would make more sense. How about something like:Response to "EDIT": Can you clarify what you mean by "This select box is populated by a set of radio buttons"? A <select> element cannot (legally) contain <input type="radio"> elements.Thanks to the answers I received, I was able to create something like the following, which suits my needs. My question was somewhat ambiguous. Thanks for following up. My final problem was solved by including "selected" in the option that I wanted selected.How about just changing the html to new data.Another example:Another way:Under this link, there are good practices https://api.jquery.com/select/I've found on the net something like below. With a thousands of options like in my situation this is a lot faster than .empty() or .find().remove() from jQuery.More info here.Building on mauretto's answer, this is a little easier to read and understand:To remove all the options except one with a specific value, you can use this:This would be better if the option to be added was already there.The first line of code will remove all the options of a select box as no option find criteria has been mentioned.The second line of code will add the Option with the specified value("testValue") and Text("TestText").Uses the jquery prop() to clear the selected optionThis will replace your existing mySelect with a new mySelect.You can do simply by replacing htmlHope it will workI saw this code in select2 - 

Clearing Selections

How to replace innerHTML of a div using jQuery?

tonyf

[How to replace innerHTML of a div using jQuery?](https://stackoverflow.com/questions/1309452/how-to-replace-innerhtml-of-a-div-using-jquery)

How could I achieve the following:Using jQuery where regTitle is my div ID?

2009-08-20 23:51:36Z

