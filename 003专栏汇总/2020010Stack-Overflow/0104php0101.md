c) the method/function array argument is explicitly marked as a reference (with an ampersand) => explicit (user-land) reference Or this:

- non-ampersand array param: passed by reference; the writing operations alter a new copy of the array, copy which is created on the first write;

- ampersand array param:  passed by reference; the writing operations alter the original array.  Remember - PHP does a value-copy the moment you write to the non-ampersand array param. That's what copy-on-write means. I'd love to show you the C source of this behaviour, but it's scary in there. Better use xdebug_debug_zval().Pascal MARTIN was right. Kosta Kontos was even more so.It depends.I think I'm writing this down for myself. I should have a blog or something...Whenever people talk of references (or pointers, for that matter), they usually end up in a logomachy (just look at this thread!).

PHP being a venerable language, I thought I should add up to the confusion (even though  this a summary of the above answers). Because, although two people can be right at the same time, you're better off just cracking their heads together into one answer.First off, you should know that you're not a pedant if you don't answer in a black-and-white manner. Things are more complicated than "yes/no".As you will see, the whole by-value/by-reference thing is very much related to what exactly are you doing with that array in your method/function scope: reading it or modifying it?The manual says this (emphasis mine):  As far as I can tell, when big, serious, honest-to-God programmers talk about references, they usually talk about altering the value of that reference. And that's exactly what the manual talks about: hey, if you want to CHANGE the value in a function, consider that PHP's doing "pass-by-value".There's another case that they don't mention, though: what if I don't change anything - just read?

What if you pass an array to a method which doesn't explicitly marks a reference, and we don't change that array in the function scope? E.g.:Read on, my fellow traveller.The same big and serious programmers, when they get even more serious, they talk about "memory optimizations" in regards to references. So does PHP. Because PHP is a dynamic, loosely typed language, that uses copy-on-write and reference counting, that's why.  It wouldn't be ideal to pass HUGE arrays to various functions, and PHP to make copies of them (that's what "pass-by-value" does, after all):Well now, if this actually was pass-by-value, we'd have some 3mb+ RAM gone, because there are two copies of that array, right?  Wrong. As long as we don't change the $arr variable, that's a reference, memory-wise. You just don't see it. That's why PHP mentions user-land references when talking about &$someVar, to distinguish between internal and explicit (with ampersand) ones.  So, when an array is passed as an argument to a method or function is it passed by reference?I came up with three (yeah, three) cases:

a) the method/function only reads the array argument

b) the method/function modifies the array argument

c) the method/function array argument is explicitly marked as a reference (with an ampersand)   Firstly, let's see how much memory that array actually eats (run here):That many bytes. Great.  Now let's make a function which only reads the said array as an argument and we'll see how much memory the reading logic takes:Wanna guess? I get 80! See for yourself. This is the part that the PHP manual omits. If the $arr param was actually passed-by-value, you'd see something similar to 1331840 bytes. It seems that $arr behaves like a reference, doesn't it? That's because it is a references - an internal one.  Now, let's write to that param, instead of reading from it:Again, see for yourself, but, for me, that's pretty close to being 1331840. So in this case, the array is actually being copied to $arr.Now let's see how much memory a write operation to an explicit reference takes (run here) - note the ampersand in the function signature:My bet is that you get 200 max! So this eats approximately as much memory as reading from a non-ampersand param.By defaultNote:  As an optimization, every single value is passed as reference until its modified inside the function.  If it's modified and the value was passed by reference then, it's copied and the copy is modified.  When an array is passed to a method or function in PHP, it is passed by value unless you explicitly pass it by reference, like so:In your second question, $b is not a reference to $a, but a copy of $a.  Much like the first example, you can reference $a by doing the following:This thread is a bit older but here something I just came across:Try this code:http://codepad.viper-7.com/gwPYMwNote there is no amp for the $params parameter and still it changes the value of $arr['date']. This doesn't really match with all the other explanations here and what I thought until now.If I clone the $params['date'] object, the 2nd outputted date stays the same. If I just set it to a string it doesn't effect the output either.In PHP arrays are passed to functions by value by default, unless you explicitly pass them by reference, as the following snippet shows:Here is the output:To extend one of the answers, also subarrays of multidimensional arrays are passed by value unless passed explicitely by reference.The result is:

How can I split a comma delimited string into an array in PHP?

Kevin

[How can I split a comma delimited string into an array in PHP?](https://stackoverflow.com/questions/1125730/how-can-i-split-a-comma-delimited-string-into-an-array-in-php)

I need to split my string input into an array at the commas.How can I go about accomplishing this?

2009-07-14 14:21:52Z

I need to split my string input into an array at the commas.How can I go about accomplishing this?Try explode:Output :OutputFor more complicated situations, you may need to use preg_split.If that string comes from a csv file, I would use fgetcsv() (or str_getcsv() if you have PHP V5.3). That will allow you to parse quoted values correctly. If it is not a csv, explode() should be the best choice.Code:Online:In simple way you can go with explode($delimiter, $string);But in a broad way, with Manual Programming :Outpou : print_r($resultArr);The Best choice is to use the function "explode()".If you want a faster approach you can use a delimiter tool like Delimiters.co There are many websites like this. But I prefer a simple PHP code.

How can I add a PHP page to WordPress?

rutherford

[How can I add a PHP page to WordPress?](https://stackoverflow.com/questions/2810124/how-can-i-add-a-php-page-to-wordpress)

I want to create a custom page for my WordPress blog that will execute my PHP code in it, whilst remaining a part of the overall site CSS/theme/design.The PHP code will make use of third-party APIs (so I need to include other PHP files).How do I accomplish this?N.B.: I do not have a specific need to interact with the WordPress API - apart from including certain other PHP libraries, I need I have no other dependencies in the PHP code I want to include in a WordPress page. So obviously any solution that didn't require learning the WordPress API would be the best one.

2010-05-11 11:12:24Z

I want to create a custom page for my WordPress blog that will execute my PHP code in it, whilst remaining a part of the overall site CSS/theme/design.The PHP code will make use of third-party APIs (so I need to include other PHP files).How do I accomplish this?N.B.: I do not have a specific need to interact with the WordPress API - apart from including certain other PHP libraries, I need I have no other dependencies in the PHP code I want to include in a WordPress page. So obviously any solution that didn't require learning the WordPress API would be the best one.You don't need to interact with the API or use a plugin.First, duplicate post.php or page.php in your theme folder (under /wp-content/themes/themename/).Rename the new file as templatename.php (where templatename is what you want to call your new template). To add your new template to the list of available templates, enter the following at the top of the new file:You can modify this file (using PHP) to include other files or whatever you need.Then create a new page in your WordPress blog, and in the page editing screen you'll see a Template dropdown in the Attributes widget to the right. Select your new template and publish the page.Your new page will use the PHP code defined in templatename.phpSource: Creating Custom Page Templates for Global UseIf you wanted to create your own .php file and interact with WordPress without 404 headers and keeping your current permalink structure there is no need for a template file for that one page.I found that this approach works best, in your .php file:Then you can simply perform any WordPress functions after this. Also, this assumes that your .php file is within the root of your WordPress site where your wp-config.php file is located.This, to me, is a priceless discovery as I was using require_once(dirname(__FILE__) . '/wp-blog-header.php'); for the longest time as WordPress even tells you that this is the approach that you should use to integrate WordPress functions, except, it causes 404 headers, which is weird that they would want you to use this approach. Integrating WordPress with Your Website I know many people have answered this question, and it already has an accepted answer, but here is a nice approach for a .php file within the root of your WordPress site (or technically anywhere you want in your site), that you can browse to and load without 404 headers!Just to update you all on this, a little less code needed for this approach, but it's up to you on which one you use.If you're like me, sometimes you want to be able to reference WordPress functions in a page which does not exist in the CMS. This way, it remains backend-specific and cannot be accidentally deleted by the client.This is actually simple to do just by including the wp-blog-header.php file using a PHP require().Here's an example that uses a query string to generate Facebook Open Graph (OG) data for any post.Take the example of a link like http://example.com/yourfilename.php?1 where 1 is the ID of a post we want to generate OG data for:Now in the contents of yourfilename.php which, for our convenience, is located in the root WordPress directory:There you have it: generated sharing models for any post using the post's actual image, excerpt and title!We could have created a special template and edited the permalink structure to do this, but since it's only needed for one page and because we don't want the client to delete it from within the CMS, this seemed like the cleaner option.EDIT 2017:

Please note that this approach is now deprecatedFor WordPress installations from 2016+ please see How can I add a PHP page to WordPress? for extra parameters to include before outputting your page data to the browser.Creating the template page is the correct answer. For this, just add this into the page you created inside the theme folder:For running this code, you need to select "mytemplate" as the template of the page from the back end.Please see this link for getting the correct details  https://developer.wordpress.org/themes/template-files-section/page-template-files/.Any answer did not cover if you need to add a PHP page outside of the WordPress Theme. This is the way.You need to include wp-load.php.Then you can use any WordPress function on that page.Create a page call it my-page.php and save it under your theme directory.

Now, edit this php file and write the following line at the top of the pageWrite your PHP code under the custom page definition line, you can call your other WP template, functions inside this file.Start like 

<?php require_once("header.php");?> ORwhatever way you are integrating your header and footer to keep the layout consistent.Since this is a my page, you NEED TO CREATE A PAGE from WordPress admin panel.

Go to Admin => Pages => Add NewAdd a page title, depending upon how you have coded the custom page, you might add page body (description) as well. You can fully skip the description if it’s written in the custom php page.At right hand side, select Template.

Choose My Custom Page from the dropdown.

You are all set! Go to the slug (permalink) created by [wordpress][1] and see the page.The widely accepted answer by Adam Hopkinson is not a fully automated method of creating a page! It requires a user to manually create a page in the back-end of WordPress (in the wp-admin dash). The problem with that is, a good plugin should have a fully automated setup. It should not require clients to manually create pages.Also, some of the other widely accepted answers here involve creating a static page outside of WordPress, which then include only some of the WordPress functionality to achieve the themed header and footer. While that method may work in some cases, this can make integrating these pages with WordPress very difficult without having all its functionality included.I think the best, fully automated, approach would be to create a page using wp_insert_post and have it reside in the database. An example and a great discussion about that, and how to prevent accidental deletion of the page by a user, can be found here: wordpress-automatically-creating-pageFrankly, I'm surprised this approach hasn't already been mentioned as an answer to this popular question (it has been posted for 7 years).Try this:The best way to add PHP pages in WordPress to Page Template in the child-theme folder.How to create Page Template in WordPress.Create a file named template-custom.php and put it in /wp-content/theme/my-theme/.For more detailsYou will want to take a look in to WordPress' plugin API.This explains how to "hook" and "filter" in to different parts of the WordPress mechanics, so you can execute custom PHP code pretty much anywhere at any given time. This hooking, filtering, and custom code authoring can all take place in your functions.php file in any of your themes. Happy coding :)If you don't want to deal with the WordPress API, then Adam's answer is really the best one.If you were willing to deal with the API I would suggest hooking into the "template-redirect" hook, which would allow you to point a particular URL or page to an arbitrary PHP file while still having access to WordPress.Apart from creating a custom template file and assigning that template to a page (like in the example in the accepted answer), there is also a way with the template naming convention that WordPress uses for loading templates (template hierarchy).Create a new page and use the slug of that page for the template filename (create a template file named page-{slug}.php). WordPress will automatically load the template that fits to this rule.Just create a page-mytitle.php file to the folder of the current theme, and from the Dashboard a page "mytitle".Then when you invoke the page by the URL you are going to see the page-mytitle.php. You must add HTML, CSS, JavaScript, wp-loop, etc. to this PHP file (page-mytitle.php).You can name your file "newpage.php" - put it in your theme directory in wp-content. You can make it a page template (see http://codex.wordpress.org/Pages...) or you can include it in one of the PHP files in your theme, such as header.php or single.php.Even better, create a child theme and put it in there, so you leave your theme code alone, and it's easier to update.http://codex.wordpress.org/Pages#Creating_Your_Own_Page_TemplatesYou can also directly use the PHP page, like to create the PHP page and run with full path.Like, http://localhost/path/filename.php

php execute a background process

tim

[php execute a background process](https://stackoverflow.com/questions/45953/php-execute-a-background-process)

I need to execute a directory copy upon a user action, but the directories are quite large, so I would like to be able to perform such an action without the user being aware of the time it takes for the copy to complete.Any suggestions would be much appreciated.

2008-09-05 14:43:48Z

I need to execute a directory copy upon a user action, but the directories are quite large, so I would like to be able to perform such an action without the user being aware of the time it takes for the copy to complete.Any suggestions would be much appreciated.Assuming this is running on a Linux machine, I've always handled it like this:This launches the command $cmd, redirects the command output to $outputfile, and writes the process id to $pidfile.That lets you easily monitor what the process is doing and if it's still running.Write the process as a server-side script in whatever language (php/bash/perl/etc) is handy and then call it from the process control functions in your php script.The function probably detects if standard io is used as the output stream and if it is then that will set the return value..if not then it ends I tested this quickly from the command line using "sleep 25s" as the command and it worked like a charm.(Answer found here)You might want to try to append this to your commandeg.I'd just like to add a very simple example for testing this functionality on Windows:Create the following two files and save them to a web directory:foreground.php:background.php:Give IUSR permission to write to the directory in which you created the above filesGive IUSR permission to READ and EXECUTE C:\Windows\System32\cmd.exeHit foreground.php from a web browserThe following should be rendered to the browser w/the current timestamps and local resource # in the output array:You should see testoutput.php in the same directory as the above files were saved, and it should be emptyYou should see testprocesses.php in the same directory as the above files were saved, and it should contain the following text w/the current timestamps:If you need to just do something in background without the PHP page waiting for it to complete, you could use another (background) PHP script that is "invoked" with wget command. This background PHP script will be executed with privileges, of course, as any other PHP script on your system.Here is an example on Windows using wget from gnuwin32 packages.The background code (file test-proc-bg.php) as an exmple ...The foreground script, the one invoking ...You must use the popen/pclose for this to work properly.The wget options:Here is a function to launch a background process in PHP. Finally created one that actually works on Windows too, after a lot of reading and testing different approaches and parameters.Note 1: On windows, do not use /B parameter as suggested elsewhere. It forces process to run the same console window as start command itself, resulting in the process being processed synchronously. To run the process in a separate thread (asynchronously), do not use /B.Note 2: The empty double quotes after start "" are required if the command is a quoted path. start command interprets the first quoted parameter as window title.Well i found a bit faster and easier version to useand it works.Can you arrange to fork off a separate process, and then run your copy in the background? It's been a while since I did any PHP, but the function pcntl-fork looks promising. Use this function to run your program in background. It cross-platform and fully customizable.Note that after command started, by default this function closes the stdin and stdout of running process. You can redirect process output into some file via $redirectStdout and $redirectStderr arguments.Note for windows users:

You cannot redirect stdout/stderr to nul in the following manner:However, you can do this:Notes for *nix users:1) Use exec shell command if you want get actual PID:2) Use $stdin argument if you want to pass some data to the input of your program:You might try a queuing system like Resque. You then can generate a job, that processes the information and quite fast return with the "processing" image. With this approach you won't know when it is finished though.This solution is intended for larger scale applications, where you don't want your front machines to do the heavy lifting, so they can process user requests.

Therefore it might or might not work with physical data like files and folders, but for processing more complicated logic or other asynchronous tasks (ie new registrations mails) it is nice to have and very scalable.A working solution for both Windows and Linux. Find more on My github page.Thanks to this answer: A perfect tool to run a background process would be Symfony Process Component, which is based on proc_* functions, but it's much easier to use. See its documentation for more information.Instead of initiating a background process, what about creating a trigger file and having a scheduler like cron or autosys periodically execute a script that looks for and acts on the trigger files? The triggers could contain instructions or even raw commands (better yet, just make it a shell script).If using PHP there is a much easier way to do this using pcntl_fork:http://www.php.net/manual/en/function.pcntl-fork.phpI am heavily using fast_cgi_finish_request()In combination with a closure and register_shutdown_function()Then register this closure to be executed before shutdown. Finally when the response was sent to the client you can close the connection to the client and continue working with the PHP process:The closure will be executed after fast_cgi_finish_request. The $message will not be visible at any time. And you can register as much closures as you want, but take care about script execution time. 

This will only work if PHP is running as a Fast CGI module (was that right?!)PHP scripting is not like other desktop application developing language. In desktop application languages we can set daemon threads to run a background process but in PHP a process is occuring when user request for a page. However It is possible to set a background job using server's cron job functionality  which php script runs.For those of us using Windows, look at this:Reference: http://php.net/manual/en/function.exec.php#43917start Notepad.exe minimized in the background: start a shell command invisible in the background: start MSPaint maximized and wait for you to close it before continuing the script: For more info on the Run() method go to: 

http://msdn.microsoft.com/library/en-us/script56/html/wsMthRun.aspEdited URL:Go to https://technet.microsoft.com/en-us/library/ee156605.aspx instead as the link above no longer exists.I know it is a 100 year old post, but anyway, thought it might be useful to someone. You can put an invisible image somewhere on the page pointing to the url that needs to run in the background, like this:<img src="run-in-background.php" border="0" alt="" width="1" height="1" />

Remove a cookie

sanders

[Remove a cookie](https://stackoverflow.com/questions/686155/remove-a-cookie)

When I want to remove a Cookie I tryI see in my cookie browser from firefox that the cookie still exists. How can I really remove the cookie?

2009-03-26 14:59:15Z

When I want to remove a Cookie I tryI see in my cookie browser from firefox that the cookie still exists. How can I really remove the cookie?You May Try thisSet the value to "" and the expiry date to yesterday (or any date in the past)Then the cookie will expire the next time the page loads.A clean way to delete a cookie is to clear both of $_COOKIE value and browser cookie file :To reliably delete a cookie it's not enough to set it to expire anytime in the past, as computed by your PHP server. This is because client computers can and often do have times which differ from that of your server.The best practice is to overwrite the current cookie with a blank cookie which expires one second in the future after the epoch (1 January 1970 00:00:00 UTC), as so:That will unset the cookie in your code, but since the $_COOKIE variable is refreshed on each request, it'll just come back on the next page request.To actually get rid of the cookie, set the expiration date in the past:I had the same problem in my code and found that it was a cookie path issue.  Check out this stack overflow post: Can't delete php set cookie I had set the cookie using a path value of "/", but didn't have any path value when I tried to clear it, so it didn't clear.  So here is an example of what worked:Setting the cookie:Clearing the cookie:Hope that helps.If you set the cookie to expire in the past, the browser will remove it.  See setcookie() delete example at php.netSee the sample labelled "Example #2 setcookie() delete example" from the PHP docs. To clear a cookie from the browser, you need to tell the browser that the cookie has expired... the browser will then remove it. unset as you've used it just removes the 'hello' cookie from the COOKIE array.This is how PHP v7 setcookie() code works when you do:From the output of tcpdump while sniffing on the port 80, the server sends to the client (Browser) the following HTTP headers:Observing packets in the following requests the Browser no longer sends these cookies in the headersTo delete cookie you just need to set the value to NULL:"If you've set a cookie with nondefault values for an expiration time, path, or domain, you must provide those same values again when you delete the cookie for the cookie to be deleted properly." 

Quote from "Learning PHP5" book.So this code should work(works for me):Setting the cookie:

setcookie('foo', 'bar', time() + 60 * 5);Deleting the cookie:

setcookie('foo', '', time() + 60 * 5);But i noticed that everybody is setting the expiry date to past, is that necessary, and why? To remove all cookies you could write:Just set the expiration date to one hour ago, if you want to "remove" the cookie, like this:orSource: http://www.php.net/manual/en/function.setcookie.phpYou should use the filter_input() function for all globals which a visitor can enter/manipulate, like this:You can read more about it here: http://www.php.net/manual/en/function.filter-input.php and here: http://www.w3schools.com/php/func_filter_input.aspI know that there has been a long time since this topic has been created but I saw a little mistake within this solution (I can call it like that, because it's a detail).

I agree that the better solution is probably this solution:But, in the present case, you delete the cookies in every case where the unset function works and immediately you create new expired cookies in case that the unset function doesn't work.That means that even if the unset function works, it will still have 2 cookies on the computer.

The asked goal, in a logical point of view, is to delete the cookies if it is possible and if it really isn't, make it expire; to get "the cleanest" result.So, I think we better should do:Thanks and have a nice day :)If you want to delete the cookie completely from all your current domain then the following code will definitely help you.This code will delete the cookie variable completely from all your domain i.e; " / " - it denotes that cookie variable's value all set for all domain not just for current domain or path. time() - 300 denotes that it sets to a previous time so it will expire.Thats how it's perfectly deleted.You could set a session variable based on cookie valuesYou can simply use this customize function:If you want to remove $_COOKIE['user_account'].

Just use:It's simple!When you enter 0 for time, you mean "now" (+0s from now is actually now) for the browser and it deletes the cookie.I checked it in chrome browser that gives me:Just set the value of cookie to false in order to unset it,PS:- That's the easiest way to do it.You have to delete cookies with php in your server and also with js for your browser.. (They has made with php, but cookie files are in the browser client too):An example:Most of you are forgetting that this will only work on a local machine.

On a domain you will need a pattern like this example.

Could not open input file: artisan

wessodesigner

[Could not open input file: artisan](https://stackoverflow.com/questions/26193314/could-not-open-input-file-artisan)

When trying to create a new laravel project, The following error appears on the CLI:I am using the latest version of XAMPP v3.2.1 with PHP 5.5.15 and with mcrypt enabled (made sure of that by issuing the command php -m). And I am running windows 8.1

2014-10-04 13:29:44Z

When trying to create a new laravel project, The following error appears on the CLI:I am using the latest version of XAMPP v3.2.1 with PHP 5.5.15 and with mcrypt enabled (made sure of that by issuing the command php -m). And I am running windows 8.1You need to first create Laravel project and if you already have one you need to go to this project dir using cd command in terminal for example cd myproject. Now you will be able to run any artisan commands, for example running php artisan will display you list of available commands.You cannot use php artisan if you are not inside a laravel project folder. That is why it says 'Could not open input file - artisan'.If you project is at /home/forge/laravel-project/You can properly execute your artisan like this php /home/forge/laravel-project/artisan ... I just needed to make artisan executable.chmod +x artisan ...and it works without the php prefix then.First, be sure to be in the laravel project folder or else the terminal won't be able to locate the artisan file in the project directory and any subsequent request you pulled to start a server would be rejected.Let's say our laravel project name is blog and located in C:\laravel

We then have: C:\laravel\blogNavigate to the C:\laravel\blog directory and open the command window (terminal). Input the code below:php artisan serve --host 127.0.0.1You must must be in your Laravel Project FolderWhen creating a new project with laravel new project-name, a folder will be created with your project name as name. You must get in that folder before using any php artisan command like php artisan serve because the artisan file is in that folderI also had the problem i just installed but forgot to jump the created project folder.

So you need to jump your project folder.and then serve php artisan commandJust make sure you are in the project folder by typinglsIf not then go to the project folder by typingfor example: And then typephp artisan serveMost probably you are not in the right directory!If it is your first install of laravel then create another directory/folder inside the laravel directory and then move to that empty folder and create another project using the command below:This will create a new project named "blog", then go back to parent laravel directory and now you can run this command:You will receive the return such as: See attached image

Try executing it as sudo.sudo laravel new blogYour file may not have the appropriate permissions. Let us know if it worked!I checked out an existing Laravel project, which did not have this script. Even a find / -name 'artisan' produced no results. The solution turned out to be simple, if a bit weird:You probably want to choose a tagged version that matches your installed version of Laravel.If you're running your Laravel project in Vagrant and have just SSH-ed into the virtual machine, don't forget to cd /vagrant before you try running artisan commands!After struggling with this issue, I found out that you need to find where artisan resides by running sudo find / -name artisan,

and from there run the command php artisan ....First go to the Laravel folder then type the artisan commands like

if your Laravel app name "Demopro"so open cmd and with the help of cd command go in the Demopro and then use artisan commandAfter creating the project you should move in the folder before issuing the commandI think you are not into laravel project directory 

please simply go to laravel project directory by using following commandWhat did the trick for me was to do cd src from my project directoy, and then use the php artisan command, since my artisan file was in the src folder. Here is my project structure:After installing composer, you need to create the project:You can see the documentation, for your php version the lastest Laravel you can install is 5.0.Now days here is the lastest version and require > php7.0. Here is the documentation.-> cd ..-> cd project_dir-> php artisan ('works fine')in my case, i removed the directory and again clone the repo from the same directory through terminal.

then i went one step back and step into my project folder again and the problem was gone.Just try and execute the command in directory where all laravel code resides. Happened with me too, I was trying to run the command in project's root folder, but the code was in a sub directoryThis error happens because you didn't installed composer on your project.run composer install command in your project path.

How to prevent XSS with HTML/PHP?

TimTim

[How to prevent XSS with HTML/PHP?](https://stackoverflow.com/questions/1996122/how-to-prevent-xss-with-html-php)

How do I prevent XSS (cross-site scripting) using just HTML and PHP?I've seen numerous other posts on this topic but I have not found an article that clear and concisely states how to actually prevent XSS.

2010-01-03 20:09:09Z

How do I prevent XSS (cross-site scripting) using just HTML and PHP?I've seen numerous other posts on this topic but I have not found an article that clear and concisely states how to actually prevent XSS.Basically you need to use the function htmlspecialchars() whenever you want to output something to the browser that came from the user input.The correct way to use this function is something like this:Google Code University also has these very educational videos on Web Security: One of my favorite OWASP references is the Cross-Site Scripting explanation because while there are a large number of XSS attack vectors, the following of a few rules can defend against the majority of them greatly!This is PHP Security Cheat SheetOne of the most important steps is to sanitize any user input before it is processed and/or rendered back to the browser.  PHP has some "filter" functions that can be used.The form that XSS attacks usually have is to insert a link to some off-site javascript that contains malicious intent for the user.  Read more about it here.You'll also want to test your site - I can recommend the Firefox add-on XSS Me.In order of preference:Also, make sure you escape on output, not on input.Cross-posting this as a consolidated reference from the SO Documentation beta which is going offline.Cross-site scripting is the unintended execution of remote code by a web client.  Any web application might expose itself to XSS if it takes input from a user and outputs it directly on a web page.  If input includes HTML or JavaScript, remote code can be executed when this content is rendered by the web client.For example, if a 3rd party side contains a JavaScript file:And a PHP application directly outputs a string passed into it:If an unchecked GET parameter contains <script src="http://example.com/runme.js"></script> then the output of the PHP script will be:The 3rd party JavaScript will run and the user will see "I'm running" on the web page.As a general rule, never trust input coming from a client.  Every GET, POST, and cookie value could be anything at all, and should therefore be validated.  When outputting any of these values, escape them so they will not be evaluated in an unexpected way.Keep in mind that even in the simplest applications data can be moved around and it will be hard to keep track of all sources.  Therefore it is a best practice to always escape output.PHP provides a few ways to escape output depending on the context.PHPs Filter Functions allow the input data to the php script to be sanitized or validated in many ways. They are useful when saving or outputting client input.htmlspecialchars will convert any "HTML special characters" into their HTML encodings, meaning they will then not be processed as standard HTML.  To fix our previous example using this method:Would output:Everything inside the <div> tag will not be interpreted as a JavaScript tag by the browser, but instead as a simple text node. The user will safely see:When outputting a dynamically generated URL, PHP provides the urlencode function to safely output valid URLs.  So, for example, if a user is able to input data that becomes part of another GET parameter:Any malicious input will be converted to an encoded URL parameter.Sometimes you will want to send HTML or other kind of code inputs. You will need to maintain a list of authorised words (white list) and un-authorized (blacklist).You can download standard lists available at the OWASP AntiSamy website. Each list is fit for a specific kind of interaction (ebay api, tinyMCE, etc...). And it is open source.There are libraries existing to filter HTML and prevent XSS attacks for the general case and performing at least as well as AntiSamy lists with very easy use. 

For example you have HTML PurifierMany frameworks help handle XSS in various ways. When rolling your own or if there's some XSS concern, we can leverage filter_input_array (available in PHP 5 >= 5.2.0, PHP 7.) 

I typically will add this snippet to my SessionController, because all calls go through there before any other controller interacts with the data. In this manner, all user input gets sanitized in 1 central location. If this is done at the beginning of a project or before your database is poisoned, you shouldn't have any issues at time of output...stops garbage in, garbage out.The above will remove ALL HTML & script tags. If you need a solution that allows safe tags, based on a whitelist, check out HTML Purifier.If your database is already poisoned or you want to deal with XSS at time of output, OWASP recommends creating a custom wrapper function for echo, and using it EVERYWHERE you output user-supplied values:You are also able to set some XSS related HTTP response headers via header(...)to be sure, the browser XSS protection mode is enabled.to enable browser-side content security. See this one for Content Security Policy (CSP) details: http://content-security-policy.com/

Especially setting up CSP to block inline-scripts and external script sources is helpful against XSS.  for a general bunch of useful HTTP response headers concerning the security of you webapp, look at OWASP: https://www.owasp.org/index.php/List_of_useful_HTTP_headersUse htmlspecialchars on PHP. On HTML try to avoid using:element.innerHTML =「…」;

 element.outerHTML =「…」;

 document.write(…);

 document.writeln(…);where var is controlled by the user. Also obviously try avoiding eval(var),

if you have to use any of them then try JS escaping them, HTML escape them and you might have to do some more but for the basics this should be enough.The best way to protect your input it's use htmlentities function.

Example:You can get more information here.

How to remove the first character of string in PHP?

yuli chika

[How to remove the first character of string in PHP?](https://stackoverflow.com/questions/4638569/how-to-remove-the-first-character-of-string-in-php)

How to use PHP, Remove the first character :  

2011-01-09 09:48:40Z

How to use PHP, Remove the first character :  To remove every : from the beginning of a string, you can use ltrim:The substr() function will probably help you here:Strings are indexed starting from 0, and this functions second parameter takes the cutstart. So make that 1, and the first char is gone.Use substr:Exec time for the 3 answers :Remove the first letter by replacing the caseExec time for 1.000.000 tests : 0.39602184295654 secRemove the first letter with substr()Exec time for 1.000.000 tests : 5.153294801712 secRemove the first letter with ltrim()Exec time for 1.000.000 tests : 5.2393000125885 secRemove the first letter with preg_replace()Exec time for 1.000.000 tests : 6.8543920516968 secHere is the codeOutput:To remove first Character of string in PHP,See PHP manual example 3Note: will not work as you cannot unset part of a string:-After further tests, I don't recommend using this any more. It caused a problem for me when using the updated string in a MySQL query, and changing to substr fixed the problem. I thought about deleting this answer, but comments suggest it is quicker somehow so someone might have a use for it. You may find trimming the updated string resolves string length issues.Sometimes you don't need a function:For example:This method modifies the existing string rather than creating another.The accepted answer:works but will remove multiple : when there are more than one at the start.will remove any character from the start.However,works perfectly.you can use the sbstr() function Trims occurrences of every word in an array from the beginning and end of a string + whitespace and optionally extra single characters as per normal trim()The code works well for me.Maybe, contribute with answers too. use mb_substr function

Warning: mysql_connect(): [2002] No such file or directory (trying to connect via unix:///tmp/mysql.sock) in

Nr 28

[Warning: mysql_connect(): [2002] No such file or directory (trying to connect via unix:///tmp/mysql.sock) in](https://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi)

I'm trying to connect to my MySQL DB with the Terminal on my Apple (With PHP).Yesterday it worked fine, and now I suddenly get the error in the title.The script works when I use my browser to run it (I have XAMPP installed), but Terminal refuses to connect to the DB.Here is the file that I include to connect (the script works when I don't include this, but then it doesn't connect to the DB):That should work, since it works with my browser. The command I use at the Terminal is php scriptname.php.

2010-11-18 21:53:43Z

I'm trying to connect to my MySQL DB with the Terminal on my Apple (With PHP).Yesterday it worked fine, and now I suddenly get the error in the title.The script works when I use my browser to run it (I have XAMPP installed), but Terminal refuses to connect to the DB.Here is the file that I include to connect (the script works when I don't include this, but then it doesn't connect to the DB):That should work, since it works with my browser. The command I use at the Terminal is php scriptname.php.For some reason mysql on OS X gets the locations of the required socket file a bit wrong, but thankfully the solution is as simple as setting up a symbolic link.You may have a socket (appearing as a zero length file) as /tmp/mysql.sock or /var/mysql/mysql.sock, but one or more apps is looking in the other location for it. Find out with this command:Rather than move the socket, edit config files, and have to remember to keep edited files local and away from servers where the paths are correct, simply create a symbolic link so your Mac finds the required socket, even when it's looking in the wrong place!If you have /tmp/mysql.sock but no /var/mysql/mysql.sock then...If you have /var/mysql/mysql.sock but no /tmp/mysql.sock then...You will need permissions to create the directory and link, so just prefix the commands above with sudo if necessary.I also had this error, but could only fix it through the suggestion here.To summarize, use:Instead of:The reason is that "localhost" is a special name for the MySQL driver making it use the UNIX socket to connect to MySQL instead of the a TCP socket.I was having the same problem and this is how I fixed it:I had this and it didn't work:I did this and it worked:Instead of using the mysql server, I connected directly to the Unix Socket. Worked for me.MySQL socket is located, in general, in /tmp/mysql.sock or /var/mysql/mysql.sock, but probably PHP looks in the wrong place.I am on XAMPP on Mac OS X, and Brian Lowe's solution above worked with a slight modification. The mysql.sock file is actually in "/Applications/xampp/xamppfiles/var/mysql/" folder. So had to link it up both in /tmp and /var/mysql. I haven't checked which one is used by PHP command line, but this did the fix, so I am happy :-)Mac OS X EL Capitan + MAMP Pro

Do thisThen do thisHope this saves you some time.The reason is that php cannot find the correct path of mysql.sock.Please make sure that your mysql is running first. Then, please confirm that which path is the mysql.sock located, for example /tmp/mysql.sockthen add this path string to php.ini: Finally, restart Apache.When you face the following issue:Set "mysql.default_socket" value in your /etc/php.ini toThen restart web service in server admin Fix the looming 2002 socket error – which is linking where MySQL places the socket and where OSX thinks it should be, MySQL puts it in /tmp and OSX looks for it in /var/mysql the socket is a type of file that allows mysql client/server communication.and thensource: http://coolestguidesontheplanet.com/get-apache-mysql-php-phpmyadmin-working-osx-10-10-yosemite/Another solution is to fix the socket location in the php.ini configuration file like this:Of course, the symlink works too, so its a matter of preference which one you change.When you install php53-mysql using port it returns the following message which is the solution to this problem:i was having the same issue [PDOException]

SQLSTATE[HY000] [2002] No such file or directory[ErrorException]

Warning: PDO::__construct(): [2002] No such file or directory (trying to connect via unix:///var/mysql/mysql.sock) in …htdocs/Symfony/vendor/doctrine-dbal/lib/Doctrine/DBAL/Driver/PDOConnection.php So the solution is to make a symlink to the sock file thus resolving the issue. Do the following to resolve it:$ sudo mkdir /private/var/mysql/$ sudo ln -s /Applications/MAMP/tmp/mysql/mysql.sock /private/var/mysql/mysql.socksource:http://www.reecefowell.com/2012/07/21/symfony2-cli-does-not-connect-to-mysql-while-browser-works-fine/I got the same errors.

Mysql was running as a standalone application before I started phpMyAdmin.I just stopped mysql

Then

sudo /Applications/XAMPP/xamppfiles/xampp stop

sudo /Applications/XAMPP/xamppfiles/xampp startIt worked fineI just had this problem, but it only appeared when loading certain pages (other pages worked fine). It turned out that I was making calls to MySQL after I closed the connection with mysql_close(). So, as @brucenan said: make sure that MySQL is running when you call it.You can do it by simply aliasing the MAMP php on Apple terminal:Example: > phpmamp - vNow you can run something like: > phpmamp scriptname.phpNote: This will be applied only for the current terminal session.Since your might use MAMP, either change your Port to the default 3306 or use 127.0.0.1 in the database.phpOr with the default settings:The mySQL client by default attempts to connect through a local file called a socket instead of connecting to the loopback address (127.0.0.1) for localhost. The default location of this socket file, at least on OSX, is /tmp/mysql.sock.QUICK, LESS ELEGANT SOLUTIONCreate a symlink to fool the OS into finding the correct socket.PROPER SOLUTIONChange the socket path defined in the startMysql.sh file in /Applications/MAMP/bin.

Which version of CodeIgniter am I currently using?

Dirk

[Which version of CodeIgniter am I currently using?](https://stackoverflow.com/questions/2196799/which-version-of-codeigniter-am-i-currently-using)

Quick question.Is there something similar to a phpinfo() - that would display the version for CodeIgniter?  Thanks.

2010-02-04 01:30:34Z

Quick question.Is there something similar to a phpinfo() - that would display the version for CodeIgniter?  Thanks.Yes, the constant CI_VERSION will give you the current CodeIgniter version number. It's defined in: /system/codeigniter/CodeIgniter.php As of CodeIgniter 2, it's defined in /system/core/CodeIgniter.phpFor example, Look for define in system/core/CodeIgniter.php:You should try :Or check the file system/core/CodeIgniter.phpFrom a controller or view - use the following to display the version:you can easily find the current CodeIgniter version byPlease check the file "system/core/CodeIgniter.php". It is defined in const CI_VERSION = '3.1.10';For CodeIgniter 4, use the following:

Laravel Checking If a Record Exists

Ben

[Laravel Checking If a Record Exists](https://stackoverflow.com/questions/27095090/laravel-checking-if-a-record-exists)

I am new to Laravel. Please excuse the newbie question but how do I find if a record exists?What can I do here to see if $user has a record?

2014-11-23 22:24:42Z

I am new to Laravel. Please excuse the newbie question but how do I find if a record exists?What can I do here to see if $user has a record?It depends if you want to work with the user afterwards or only check if one exists.If you want to use the user object if it exists:And if you only want to checkOr even nicerOne of the best solution is to use the firstOrNew or firstOrCreate method. The documentation has more details on both.Eloquent uses collections. 

See the following link: https://laravel.com/docs/5.4/eloquent-collectionsUse first(), not count() if you only need to check for existence.first() is faster because it checks for a single match whereas count() counts all matches.Laravel 5.6.26v to find the existing record through primary key ( email or id ) then include " use DB " and table name user become plural using the above query like user to usersThis will check if requested email exist in the user table:In your Controller In your View - Display Already Exist Message would work with try/catch ->get() would still return an empty arrayIn laravel eloquent, has default exists() method, refer followed example.if(User::where('id', $user_id )->exists()){

 // your code...

}It's simple to get to know if there are any records or not you can use laravel validation .But this code is also good:This will check if particular email address exist in the table:Checking for null within if statement prevents Laravel from returning 404 immediately after the query is over.It seems like it runs double query if the user is found, but I can't seem to find any other reliable solution.can be written as This will return true or false without assigning a temporary variable if that is all you are using $user for in the original statement.I think below way is the simplest way to achieving same :Created below method (for myself) to check if the given record id exists on Db table or not.Home It helps!The Easiest Way to do Laravel 6 or on the top: Write the table name, then give where clause condition for instance where('id', $request->id)The efficient way to check if the record exists you must use is_null method to check against the query.The code below might be helpful:Shortest working options:here is a link to something l think can assist

https://laraveldaily.com/dont-check-record-exists-methods-orcreate-ornew/this is simple code to check email is exist or not in database

Only variables should be passed by reference

Frank Nwoko

[Only variables should be passed by reference](https://stackoverflow.com/questions/4636166/only-variables-should-be-passed-by-reference)

Any ideas? After 2 days still stuck.

2011-01-08 21:10:39Z

Any ideas? After 2 days still stuck.Assign the result of explode to a variable and pass that variable to end:The problem is, that end requires a reference, because it modifies the internal representation of the array (i.e. it makes the current element pointer point to the last element).The result of explode('.', $file_name) cannot be turned into a reference. This is a restriction in the PHP language, that probably exists for simplicity reasons.Php 7 compatible proper usage:Everyone else has already given you the reason you're getting an error, but here's the best way to do what you want to do:

$file_extension = pathinfo($file_name, PATHINFO_EXTENSION);save the array from explode() to a variable, and then call end() on this variable:btw: I use this code to get the file extension:where strrchr extracts the string after the last . and substr cuts off the .Try this:The reason is that the argument for end is passed by reference, since end modifies the array by advancing its internal pointer to the final element. If you're not passing a variable in, there's nothing for a reference to point to.See end in the PHP manual for more info.PHP complains because end() expects a reference to something that it wants to change (which can be a variable only). You however pass the result of explode() directly to end() without saving it to a variable first. At the moment when explode() returns your value, it exists only in memory and no variable points to it. You cannot create a reference to something (or to something unknown in the memory), that does not exists.Or in other words: PHP does not know, if the value you give him is the direct value or just a pointer to the value (a pointer is also a variable (integer), which stores the offset of the memory, where the actual value resides). So PHP expects here a pointer (reference) always.But since this is still just a notice (not even deprecated) in PHP 7, you can savely ignore notices and use the ignore-operator instead of completely deactivating error reporting for notices:Just as you can't index the array immediately, you can't call end on it either.  Assign it to a variable first, then call end.end(...[explode('.', $file_name)]) has worked since PHP 5.6. This is documented in the RFC although not in PHP docs themselves. Since it raise a flag for over 10 years, but works just fine and return the expected value, a little stfu operator is the goodiest bad practice you are all looking for:PHP offical Manual :

end()ParametersThe array. This array is passed by reference because it is modified by the function. This means you must pass it a real variable and not a function returning an array because only actual variables may be passed by reference.First, you will have to store the value in a variable like thisThen you can use the end function to get the last index from an array like thisI hope it will work for you.

Delete directory with files in it?

matt

[Delete directory with files in it?](https://stackoverflow.com/questions/3349753/delete-directory-with-files-in-it)

I wonder, what's the easiest way to delete a directory with all its files in it?I'm using rmdir(PATH . '/' . $value); to delete a folder, however, if there are files inside of it, I simply can't delete it.

2010-07-28 03:41:48Z

I wonder, what's the easiest way to delete a directory with all its files in it?I'm using rmdir(PATH . '/' . $value); to delete a folder, however, if there are files inside of it, I simply can't delete it.There are at least two options available nowadays.I generally use this to delete all files in a folder:And then you can doShort function that does the job:I use it in a Utils class like this:With great power comes great responsibility: When you call this function with an empty value, it will delete files starting in root (/). As a safeguard you can check if path is empty:As seen in most voted comment on PHP manual page about rmdir() (see http://php.net/manual/es/function.rmdir.php), glob() function does not return hidden files.  scandir() is provided as an alternative that solves that issue.Algorithm described there (which worked like a charm in my case) is:This is a shorter Version works great to meYou may use Symfony's Filesystem (code):However I couldn't delete some complex directory structures with this method, so first you should try it to ensure it's working properly.

I could delete the said directory structure using a Windows specific implementation:

And just for the sake of completeness, here is an old code of mine:Here you have one nice and simple recursion for deleting all files in source directory including that directory:Function is based on recursion made for copying directory. You can find that function here:

Copy entire contents of a directory to another using phpWhat about this:Glob function doesn't return the hidden files, therefore scandir can be more useful, when trying to delete recursively a tree.I prefer this because it still returns TRUE when it succeeds and FALSE when it fails, and it also prevents a bug where an empty path might try and delete everything from '/*' !!:The Best Solution for mecode:p.s. REMEMBER! dont pass EMPTY VALUES  to any Directory deleting functions!!!  (backup them always, otherwise one day you might get DISASTER!!)I want to expand on the answer by @alcuadrado with the comment by @Vijit for handling symlinks. Firstly, use getRealPath(). But then, if you have any symlinks that are folders it will fail as it will try and call rmdir on a link - so you need an extra check.Using DirectoryIterator an equivalent of a previous answer…This one works for me:You can try as follows:Litle bit modify of alcuadrado's code - glob don't see files with name from points like .htaccess so I use scandir and script deletes itself - check __FILE__.Example for the Linux server: exec('rm -f -r ' . $cache_folder . '/*');Something like this?Delete all files in Folder

array_map('unlink', glob("$directory/*.*"));

Delete all .*-Files in Folder (without: "." and "..")

array_map('unlink', array_diff(glob("$directory/.*),array("$directory/.","$directory/..")))

Now delete the Folder itself

rmdir($directory)2 cents to add to THIS answer above, which is great BTWAfter your glob (or similar) function has scanned/read the directory, add a conditional to check the response is not empty, or an invalid argument supplied for foreach() warning will be thrown. So...My full function (as an object method):Here is the solution that works perfect:Have your tryed out the obove code from php.netWork for me fineFor windows:Like Playnox's solution, but with the elegant built-in DirectoryIterator:I do not remember from where I copied this function, but it looks like it is not listed and it is working for meSimple and Easy...What about this?    Refrence:

https://paulund.co.uk/php-delete-directory-and-files-in-directoryIf you are not sure, Given path is directory or file then you can use this function to delete pathyou can try this simple 12 line of code for delete folder or folder files...

happy coding... ;) :)

How do I get the function name inside a function in PHP?

omg

[How do I get the function name inside a function in PHP?](https://stackoverflow.com/questions/1006248/how-do-i-get-the-function-name-inside-a-function-in-php)

Is it possible?

2009-06-17 10:31:28Z

Is it possible?The accurate way is to use the __FUNCTION__ predefined magic constant.Example:Result: MethodA.You can use the magic constants __METHOD__ (includes the class name) or __FUNCTION__ (just function name) depending on if it's a method or a function... =)If you are using PHP 5 you can try this:Result: "MethodA";

Catching multiple exception types in one catch block

Dominic Gurto

[Catching multiple exception types in one catch block](https://stackoverflow.com/questions/8439581/catching-multiple-exception-types-in-one-catch-block)

I'd like a cleaner way to obtain the following functionality, to catch AError and BError in one block:Is there any way to do this? Or do I have to catch them separately?AError and Berror have a shared base class, but they also share it with other types that I'd like to fall through to handler2, so I can't just catch the base class.

2011-12-09 00:22:37Z

I'd like a cleaner way to obtain the following functionality, to catch AError and BError in one block:Is there any way to do this? Or do I have to catch them separately?AError and Berror have a shared base class, but they also share it with other types that I'd like to fall through to handler2, so I can't just catch the base class.As of PHP 7.1, this is available.The syntax is:https://wiki.php.net/rfc/multiple-catchhttps://github.com/php/php-src/commit/0aed2cc2a440e7be17552cc669d71fdd24d1204aDespite what these other answers say, you can catch AError and BError in the same block (it is somewhat easier if you are the one defining the exceptions). Even given that there are exceptions you want to "fall through", you should still be able to define a hierarchy to match your needs.Then:As you can see here and here, even the SPL default exceptions have a hierarchy you can leverage. Additionally, as stated in the PHP Manual:This means you could also havewhich you need to handle differently than AError or BError, so your catch statement would look like this:If you had the case where there were twenty or more exceptions that legitimately belonged under the same superclass, and you needed to handle five (or whatever large-ish group) of them one way and the rest the other, you can STILL do this.And then:Using OOP when it comes to exceptions is very powerful. Using things like get_class or instanceof are hacks, and should be avoided if possible.Another solution I would like to add is putting the exception handling functionality in its own method.You could have Assuming there is absolutely no way you can control exception class hierarchies or interfaces (and there almost always will be a way), you can do the following:In this way, you are still have a only single code location you have to modify if your exception handling mechanism needs to change, and you are working within the general constructs of OOP.  In PHP >= 7.1 this is possible. See the answer below.If you can modify the exceptions, use this answer.If you can't, you could try catching all with Exception and then check which exception was thrown with instanceof.But it would probably be better to use multiple catch blocks as described in aforementioned answer.Coming in PHP 7.1 is the ability to catch multiple types.So that this:andare functionally equivalent.As of PHP 7.1,  interestingly, you can also:and in earlier versions of PHP:This article covers the question electrictoolbox.com/php-catch-multiple-exception-types. Content of the post copied directly from the article:Example exceptionsHere's some example exceptions that have been defined for the purposes of this example:Handling multiple exceptionsIt's very simple - there can be a catch block for each exception type that can be thrown:If an exception is thrown that is not handled by any of the other catch statements it will be handled by the catch(Exception $e) block. It does not necessarily have to be the last one.As an extension to the accepted answer, you could switch the type of Exception resulting in a pattern that is somewhat like the original example:Here's a reasonable alternative if you don't have control over defining the exceptions. Use the name of the exception variable to categorize the exceptions when they are caught. Then check for the exception variable after the try/catch block.This somewhat odd looking approach is probably only worth it if there is a lot of duplication between catch block implementations.Besides fall-through, it's also possible to step over by using goto.

It's very useful if you want to see the world burn.3v4l.orgA great way is to use set_exception_handler.Warning!!! with PHP 7, you might get a white screen of death for fatal errors.  For example, if you call a method on a non-object you would normally get Fatal error: Call to a member function your_method() on null and you would expect to see this if error reporting is on.The above error will NOT be caught with  catch(Exception $e).

The above error will NOT trigger any custom error handler set by set_error_handler. You must use catch(Error $e){ } to catch errors in PHP7. .

This could help:Another option not listed here is to use the code attribute of an exception, so you can do something like this:Hmm, there are many solution written for php version lower than 7.1. Here is an other simple one for those who doesn't want catch all exception and can't make common interfaces:

How to generate XML file dynamically using PHP?

musicking123

[How to generate XML file dynamically using PHP?](https://stackoverflow.com/questions/486757/how-to-generate-xml-file-dynamically-using-php)

I have to generate a xml file dynamically at runtime. Please help me in generating the below XML file dynamically using PHP.

2009-01-28 07:22:42Z

I have to generate a xml file dynamically at runtime. Please help me in generating the below XML file dynamically using PHP.I'd use SimpleXMLElement.To create an XMLdocument in PHP you should instance a DOMDocument class, create child nodes and append these nodes in the correct branch of the document tree.For reference you can read http://it.php.net/manual/en/book.dom.phpNow we will take a quick tour of the code below.These are the basics, you can create and append a node in just a line (13th, for example), you can do a lot of other things with the dom api. It is up to you.Edit:

Just one other hint:

   The main advantage of using an xmldocument (the dom document one or the simplexml one) instead of printing the xml,is that the xmltree is searchable with xpath queryAn easily broken way to do this is :save it as .phpWith FluidXML you can generate your XML very easly.https://github.com/servo-php/fluidxmlTake a look at the Tiny But Strong templating system.  It's generally used for templating HTML but there's an extension that works with XML files.  I use this extensively for creating reports where I can have one code file and two template files - htm and xml - and the user can then choose whether to send a report to screen or spreadsheet.Another advantage is you don't have to code the xml from scratch, in some cases I've been wanting to export very large complex spreadsheets, and instead of having to code all the export all that is required is to save an existing spreadsheet in xml and substitute in code tags where data output is required.  It's a quick and a very efficient way to work.Its simple just connect with your database it will create test.xml file in your project folder

PHP Redirect with POST data

Shiro

[PHP Redirect with POST data](https://stackoverflow.com/questions/5576619/php-redirect-with-post-data)

I did some research on this topic, and there are some experts who have said that it is not possible, so I would like to ask for an alternative solution.My situation:Page A: [checkout.php] Customer fills in their billing details.Page B: [process.php] Generate an invoice number and store customer details in database.Page C: [thirdparty.com] Third Payment Gateway (ONLY ACCEPT POST DATA).Customer fills in their details and sets up their cart in Page A, then POSTs to Page B. Inside process.php, store the POSTed data inside the database and generate an invoice number. After that, POST the customer data and invoice number to thirdparty.com payment gateway. The problem is doing POST in page B. cURL is able to POST the data to Page C, but the problem is the page didn't redirect to page C. The customer needs to fill in Credit Card details on Page C.The third party payment gateway did give us the API sample, the sample is POST the invoice number together with customer detail.

We don't want the system to generate an excess of unwanted invoice numbers.Is there any solution for this?

Our current solution is for the customer to fill detail in Page A, then in Page B we create another page showing all the customer details there, where the user can click a CONFIRM button to POST to Page C.Our goal is for customers to only have to click once.Hope my question is clear :)

2011-04-07 05:54:19Z

I did some research on this topic, and there are some experts who have said that it is not possible, so I would like to ask for an alternative solution.My situation:Page A: [checkout.php] Customer fills in their billing details.Page B: [process.php] Generate an invoice number and store customer details in database.Page C: [thirdparty.com] Third Payment Gateway (ONLY ACCEPT POST DATA).Customer fills in their details and sets up their cart in Page A, then POSTs to Page B. Inside process.php, store the POSTed data inside the database and generate an invoice number. After that, POST the customer data and invoice number to thirdparty.com payment gateway. The problem is doing POST in page B. cURL is able to POST the data to Page C, but the problem is the page didn't redirect to page C. The customer needs to fill in Credit Card details on Page C.The third party payment gateway did give us the API sample, the sample is POST the invoice number together with customer detail.

We don't want the system to generate an excess of unwanted invoice numbers.Is there any solution for this?

Our current solution is for the customer to fill detail in Page A, then in Page B we create another page showing all the customer details there, where the user can click a CONFIRM button to POST to Page C.Our goal is for customers to only have to click once.Hope my question is clear :)Generate a form on Page B with all the required data and action set to Page C and submit it with JavaScript on page load. Your data will be sent to Page C without much hassle to the user. This is the only way to do it. A redirect is a 303 HTTP header that you can read up on http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html, but I'll quote some of it:The only way to achieve what you're doing is with a intermediate page that sends the user to Page C. Here's a small/simple snippet on how you can achieve that:You should also have a simple "confirm" form inside a noscript tag to make sure users without Javascript will be able to use your service. I have another solution that makes this possible. It requires the client be running Javascript (which I think is a fair requirement these days).Simply use an AJAX request on Page A to go and generate your invoice number and customer details in the background (your previous Page B), then once the request gets returned successfully with the correct information - simply complete the form submission over to your payment gateway (Page C).This will achieve your result of the user only clicking one button and proceeding to the payment gateway. Below is some pseudocodeHTML:JS (using jQuery for convenience but trivial to make pure Javascript):$_SESSION is your friend if you don't want to mess with JavascriptLet's say you're trying to pass an email:On page A:And on Page B:To destroy the sessionYou can let PHP do a POST, but then your php will get the return, with all sorts of complications. I think the simplest would be to actually let the user do the POST.So, kind-of what you suggested, you'll get indeed this part:Customer fill detail in Page A, then in Page B we create another page show all the customer detail there, click a CONFIRM button then POST to Page C.But you can actually do a javascript submit on page B, so there is no need for a click. Make it a "redirecting" page with a loading animation, and you're set.I know this is an old question, but I have yet another alternative solution with jQuery:The above code uses jQuery to create a form tag, appending hidden fields as post fields, and submit it at last. The page will forward to the form target page with the POST data attached.p.s. JavaScript & jQuery are required for this case. As suggested by the comments of the other answers, you can make use of <noscript> tag to create a standard HTML form in case JS is disabled.There is a simple hack, use $_SESSION and create an array of the posted values, and once you go to the File_C.php you can use it then do you process after that destroy it.I'm aware the question is php oriented, but the best way to redirect a POST request is probably using .htaccess, ie:Explanation:By default, if you want to redirect request with POST data, browser redirects it via GET with 302 redirect. This also drops all the POST data associated with the request. Browser does this as a precaution to prevent any unintentional re-submitting of POST transaction.But what if you want to redirect anyway POST request with it’s data? In HTTP 1.1, there is a status code for this. Status code 307 indicates that the request should be repeated with the same HTTP method and data. So your POST request will be repeated along with it’s data if you use this status code.   SRCYou can use sessions to save $_POST data, then retrieve that data and set it to $_POST on the subsequent request.User submits request to /dirty-submission-url.php

Do:Then the browser redirects to and requests /clean-submission-url from your server. You will have some internal routing to figure out what to do with this.

At the beginning of the request, you will do:Now, through the rest of your request, you can access $_POST as you could upon the first request.I faced similar issues with POST Request where GET Request was working fine on my backend which i am passing my variables etc.

The problem lies in there that the backend does a lot of redirects, which didnt work with fopen or the php header methods.So the only way i got it working was to put a hidden form and push over the values with a POST submit when the page is loaded.Try this: Send data and request with http header in page B to redirect to GatewayAdditional Headers :Here there is another approach that works for me:if you need to redirect to another web page (user.php) and includes a PHP variable ($user[0]): orExample:

How to include() all PHP files from a directory?

occhiso

[How to include() all PHP files from a directory?](https://stackoverflow.com/questions/599670/how-to-include-all-php-files-from-a-directory)

Very quick n00b question, in PHP can I include a directory of scripts.i.e. Instead of:is there something like:Couldn't seem to find a good way of including a collection of about 10 sub-classes for a particular class.

2009-03-01 11:36:28Z

Very quick n00b question, in PHP can I include a directory of scripts.i.e. Instead of:is there something like:Couldn't seem to find a good way of including a collection of about 10 sub-classes for a particular class.Here is the way I include lots of classes from several folders in PHP 5. This will only work if you have classes though.I realize this is an older post BUT... DON'T INCLUDE YOUR CLASSES... instead use __autoloadThen whenever you call a new class that hasn't been included yet php will auto fire __autoload and include it for youIf you are using php 5 you might want to use autoload instead.this is just a modification of Karsten's codeHow to do this in 2017:Recommended by PHP documentation here: Autoloading classesYou can use set_include_path:http://php.net/manual/en/function.set-include-path.phpIf you want include all in a directory AND its subdirectories:Don't forget that it will use alphabetic order to include your files.If there are NO dependencies between files... here is a recursive function to include_once ALL php files in ALL subdirs:I suggest you use a readdir() function and then loop and include the files (see the 1st example on that page).If your looking to include a bunch of classes without having to define each class at once you can use:This way you can just define the class on the php file containing the class and not a whole list of $thisclass = new thisclass();As for how well it handles all the files? I'm not sure there might be a slight speed decrease with this.Do no write a function() to include files in a directory. You may lose the variable scopes, and may have to use "global". Just loop on the files.Also, you may run into difficulties when an included file has a class name that will extend to the other class defined in the other file - which is not yet included. So, be careful.

Can you「compile」PHP code and upload a binary-ish file, which will just be run by the byte code interpreter?

Carson Myers

[Can you「compile」PHP code and upload a binary-ish file, which will just be run by the byte code interpreter?](https://stackoverflow.com/questions/1408417/can-you-compile-php-code-and-upload-a-binary-ish-file-which-will-just-be-run)

I know that PHP is compiled to byte code before it is run on the server, and then that byte code can be cached so that the whole script doesn't have to be re-interpreted with every web access.But can you "compile" PHP code and upload a binary-ish file, which will just be run by the byte code interpreter?

2009-09-11 00:23:28Z

I know that PHP is compiled to byte code before it is run on the server, and then that byte code can be cached so that the whole script doesn't have to be re-interpreted with every web access.But can you "compile" PHP code and upload a binary-ish file, which will just be run by the byte code interpreter?After this question was asked, Facebook launched HipHop for PHP which is probably the best-tested PHP compiler to date (seeing as it ran one of the world’s 10 biggest websites). However, Facebook discontinued it in favour of HHVM, which is a virtual machine, not a compiler.Beyond that, googling PHP compiler turns up a number of 3rd party solutions.PeachPiePhalangerphcRoadsend PHP CompilerbcompilerProject ZeroBambalamBinaryPHPThe short answer is "no".The current implementation of PHP is that of an interpreted language.  You can argue the theoretical aspects of the fact that any language can technically be interpreted or compiled, but as it stands, the current implementations are such that PHP code requires an interpreter to run, and the interpreter manages the executing environment.To answer your question about uploading pre-compiled PHP bytecode, it's probably possible, but you'd have to implement a way for the PHP interpreter to read in such a file and work with it.  With existing opcode caches out there already, it doesn't seem like a task that would reap much reward.Since the question was first asked, there has been a change to that answer from a flat out "no" to a "kind of"http://github.com/facebook/hiphop-php/wikiHip Hop for PHP was a compiler that took PHP code and turned it into highly optimized C++

Apparently, some functions are not supported (for example 'explode')I found this question while looking for more information on how to implement HipHop and thought I'd speak up :)Since 2013 Facebook no longer use it, however, and it has been discontinued in favour of HHVM, which is not a compiler: https://en.wikipedia.org/wiki/HipHop_for_PHPThere is alsowhich aimsThe extension is available from PECL.phc allows you to compile PHP programs into shared libraries, which can be uploaded to the server. The PHP program is compiled into binaries. It's done in such a way as to support evals, includes, and the entire PHP standard library.If you are simply looking for producing a binary executable from a PHP script, then please avoid trying to make your question extremely precise because it will make it appear that you know exactly what you need. Besides, most PHP developer have absolutely zero clue about what a bytecode is.With that said, the answers is YES. I have just finished compiling a PHP script into a binary. And not just any binary. I have used the CDE application (link to Wayback Machine, the original link is now broken) to turn it into an portable binary that can be distributed with all the dependencies and executed without any issue… and it works beautifully.All you need is to use phc.Um, anybody heard of Zend Guard, which does exactly what this person is asking.  It encodes/obfuscates PHP code into "machine code".There are several "compilers" of PHP code. Most of them do not support all of PHP features, since these simply must be interpreted during run time.We are using Phalanger - http://www.php-compiler.net/ - that is supporting even those dirty PHP dynamic features, and still is able to compile them as .NET assembly, that can be distributed as a standalone DLL.see 5.5.x with the integrated OPcache module, volatile in a shared memory, much more performance and the dynamism principle of php remain untouched.http://www.php.net/manual/en/opcache.installation.phpIn php 7 there is the php ini option opcache.file_cache that saves the bytecode in a specific folder. In could be useful to in php cli script that are "compiled" and saved in a specific folder for a optimized reuse.Opcache it is not compiling but is something similar.PHP doesn't really get compiled as with many programs.  You can use Zend's encoder to make it unreadable though.

What does yield mean in PHP?

Gordon

[What does yield mean in PHP?](https://stackoverflow.com/questions/17483806/what-does-yield-mean-in-php)

I've recently stumbled over this code:I've never seen this yield keyword before. Trying to run the code I get So what is this yield keyword? Is it even valid PHP? And if it is, how do I use it?

2013-07-05 07:53:07Z

I've recently stumbled over this code:I've never seen this yield keyword before. Trying to run the code I get So what is this yield keyword? Is it even valid PHP? And if it is, how do I use it?The yield keyword returns data from a generator function:A generator function is effectively a more compact and efficient way to write an Iterator. It allows you to define a function (your xrange) that will calculate and return values while you are looping over it:This would create the following output:You can also control the $key in the foreach by usingIn the generator function, $someKey is whatever you want appear for $key and $someValue being the value in $val. In the question's example that's $i.Now you might wonder why we are not simply using PHP's native range function to achieve that output. And right you are. The output would be the same. The difference is how we got there. When we use range PHP, will execute it, create the entire array of numbers in memory and return that entire array to the foreach loop which will then go over it and output the values. In other words, the foreach will operate on the array itself. The range function and the foreach only "talk" once. Think of it like getting a package in the mail. The delivery guy will hand you the package and leave. And then you unwrap the entire package, taking out whatever is in there.When we use the generator function, PHP will step into the function and execute it until it either meets the end or a yield keyword. When it meets a yield, it will then return whatever is the value at that time to the outer loop. Then it goes back into the generator function and continues from where it yielded. Since your xrange holds a for loop, it will execute and yield until $max was reached. Think of it like the foreach and the generator playing ping pong.Obviously, generators can be used to work around memory limits. Depending on your environment, doing a range(1, 1000000) will fatal your script whereas the same with a generator will just work fine. Or as Wikipedia puts it:Generators are also supposed to be pretty fast. But keep in mind that when we are talking about fast, we are usually talking in very small numbers. So before you now run off and change all your code to use generators, do a benchmark to see where it makes sense.Another Use Case for Generators is asynchronous coroutines. The yield keyword does not only return values but it also accepts them. For details on this, see the two excellent blog posts linked below.Generators have been introduced in PHP 5.5. Trying to use yield before that version will result in various parse errors, depending on the code that follows the keyword. So if you get a parse error from that code, update your PHP.This function is using yield:is almost the same as this one without:The only one difference is that a() returns a generator and b() just a simple array. You can iterate on both.Also, the first one does not allocate a full array and is therefore less memory-demanding.yield keyword serves for definition of "generators" in PHP 5.5.

Ok, then what is a generator?From php.net:From this place: generators = generators, other functions (just a simple functions) = functions.So, they are useful when:simple exampleoutputadvanced exampleoutputWith yield you can easily describe the breakpoints between multiple tasks in a single function. That's all, there is nothing special about it.If task1 and task2 are highly related, but you need a breakpoint between them to do something else:then generators are the best solution, because you don't have to split up your code into many closures or mix it with other code, or use callbacks, etc... You just use yield to add a breakpoint, and you can continue from that breakpoint if you are ready.Add breakpoint without generators:Add breakpoint with generatorsnote: It is easy to make mistake with generators, so always write unit tests before you implement them!

note2: Using generators in an infinite loop is like writing a closure which has infinite length...An interesting aspect, which worth to be discussed here, is yielding by reference. Every time we need to change a parameter such that it is reflected outside of the function, we have to pass this parameter by reference. To apply this to generators, we  simply prepend an ampersand & to the name of the generator and to the variable used in the iteration:The above example shows how changing the iterated values within the foreach loop changes the $from variable within the generator. This is because $from is yielded by reference due to the ampersand before the generator name. Because of that, the $value variable within the foreach loop is a reference to the $from variable within the generator function.The below code illustrates how using a generator returns a result before completion, unlike the traditional non generator approach that returns a complete array after full iteration. With the generator below, the values are returned when ready, no need to wait for an array to be completely filled:

On delete cascade with doctrine2

rfc1484

[On delete cascade with doctrine2](https://stackoverflow.com/questions/6328535/on-delete-cascade-with-doctrine2)

I'm trying to make a simple example in order to learn how to delete a row from a parent table and automatically delete the matching rows in the child table using Doctrine2.Here are the two entities I'm using:Child.php:Father.phpThe tables are correctly created on the database, but the On Delete Cascade option it's not created. What am I doing wrong?

2011-06-13 09:12:22Z

I'm trying to make a simple example in order to learn how to delete a row from a parent table and automatically delete the matching rows in the child table using Doctrine2.Here are the two entities I'm using:Child.php:Father.phpThe tables are correctly created on the database, but the On Delete Cascade option it's not created. What am I doing wrong?There are two kinds of cascades in Doctrine:1) ORM level - uses cascade={"remove"} in the association - this is a calculation that is done in the UnitOfWork and does not affect the database structure.  When you remove an object, the UnitOfWork will iterate over all objects in the association and remove them.2) Database level - uses onDelete="CASCADE" on the association's joinColumn - this will add On Delete Cascade to the foreign key column in the database:I also want to point out that the way you have your cascade={"remove"} right now, if you delete a Child object, this cascade will remove the Parent object. Clearly not what you want.Here is simple example. A contact has one to many associated phone numbers. When a contact is deleted, I want all its associated phone numbers

to also be deleted, so I use ON DELETE CASCADE. The one-to-many/many-to-one relationship is implemented with by the foreign key in the phone_numbers. By adding "ON DELETE CASCADE" to the foreign key constraint, phone_numbers will automatically be deleted when their associated contact is

deleted.Now when a row in the contacts table is deleted, all its associated phone_numbers rows will automatically be deleted.To achieve the same thing in Doctrine, to get the same DB-level "ON DELETE CASCADE" behavoir, you configure the @JoinColumn with

the onDelete="CASCADE" option. If you now do you will see that the same SQL will be generated as in the first, raw-SQL example

cURL error 60: SSL certificate: unable to get local issuer certificate

LoveAndHappiness

[cURL error 60: SSL certificate: unable to get local issuer certificate](https://stackoverflow.com/questions/29822686/curl-error-60-ssl-certificate-unable-to-get-local-issuer-certificate)

I use WAMP on a local development environment and am trying to charge a credit card but get the error message:I searched a lot on Google and lots of people are suggesting that I download this file: cacert.pem, put it somewhere and reference it in my php.ini. This is the part in my php.ini:Yet, even after restarting my server several times and changing the path, I get the same error message. I use WAMP from the Apache Modules and have the ssl_module enabled. And from the PGP extensions I have php_curl enabled.Still the same error message. Why is that happening?Now I am following this fix: How to fix PHP CURL Error 60 SSLWhich suggests that I add these lines to my cURL options:Where do I add options to my cURL? Apparently not through the command line, since my CLI doesn't find the command "curl_setopt"EDITThis is the code I am running:

2015-04-23 11:54:20Z

I use WAMP on a local development environment and am trying to charge a credit card but get the error message:I searched a lot on Google and lots of people are suggesting that I download this file: cacert.pem, put it somewhere and reference it in my php.ini. This is the part in my php.ini:Yet, even after restarting my server several times and changing the path, I get the same error message. I use WAMP from the Apache Modules and have the ssl_module enabled. And from the PGP extensions I have php_curl enabled.Still the same error message. Why is that happening?Now I am following this fix: How to fix PHP CURL Error 60 SSLWhich suggests that I add these lines to my cURL options:Where do I add options to my cURL? Apparently not through the command line, since my CLI doesn't find the command "curl_setopt"EDITThis is the code I am running:working solution:similar for other environment

- download and extract for cacert.pem here (a clean file format/data) Problem solved!(source: https://laracasts.com/discuss/channels/general-discussion/curl-error-60-ssl-certificate-problem-unable-to-get-local-issuer-certificate)Attention Wamp/Wordpress/windows users. I had this issue for hours and not even the correct answer was doing it for me, because i was editing the wrong php.ini file because the question was answered to XAMPP and not for WAMP users, even though the question was for WAMP. here's what i didDownload the certificate bundle.Put it inside of C:\wamp64\bin\php\your php version\extras\sslMake sure the file mod_ssl.so is inside of C:\wamp64\bin\apache\apache(version)\modulesEnable mod_ssl in httpd.conf inside of Apache directory C:\wamp64\bin\apache\apache2.4.27\confEnable php_openssl.dll in php.ini. Be aware my problem was that I had two php.ini files and I need to do this in both of them. First one can be located inside of your WAMP taskbar icon here.and the other one is located in C:\wamp64\bin\php\php(Version)find the location for both of the php.ini files and find the line curl.cainfo = and give it a path like thiscurl.cainfo = "C:\wamp64\bin\php\php(Version)\extras\ssl\cacert.pem"Now save the files and restart your server and you should be good to goIf you are using PHP 5.6 with Guzzle, Guzzle has switched to using the PHP libraries autodetect for certificates rather than it's process (ref).  PHP outlines the changes here.You can to dump where PHP is looking using:For OS X testing, you can use homebrew to install openssl brew install openssl and then use openssl.cafile=/usr/local/etc/openssl/cert.pem in your php.ini or Zend Server settings (under OpenSSL).A certificate bundle is also available from curl/Mozilla on the curl website: https://curl.haxx.se/docs/caextract.htmlOnce you have a bundle, either place it where PHP is already looking (which you found out above) or update openssl.cafile in php.ini.  (Generally, /etc/php.ini or /etc/php/7.0/cli/php.ini or /etc/php/php.ini on Unix.)Guzzle, which is used by cartalyst/stripe, will do the following to find a proper certificate archive to check a server certificate against:You will want to make sure that the values for the first two settings are properly defined by doing a simple test:Alternatively, try to write the file into the locations indicated by #7 or #8.If you're unable to change php.ini you could also point to the cacert.pem file from code like this:What i did was use var_dump(openssl_get_cert_locations()); die; in any php script, which gave me the information about defaults that my local php was using:As you can notice, i have set the ini_cafile or the ini option curl.cainfo. But in my case, curl would try to use the "default_cert_file" which did not exist. I copied the file from https://curl.haxx.se/ca/cacert.pem into the location for "default_cert_file" (c:/openssl-1.0.1c/ssl/cert.pem) and i was able to get it to work. This was the only solution for me.I found a solution that worked for me. I downgraded from the latest guzzle to version ~4.0 and it worked.In composer.json add "guzzlehttp/guzzle": "~4.0"Hope it helps someoneI had this problem appear out-of-the-blue one day, when a Guzzle(5) script was attempting to connect to a host over SSL. Sure, I could disable the VERIFY option in Guzzle/Curl, but that's clearly not the correct way to go.I tried everything listed here and in similar threads, then eventually went to terminal with openssl to test against the domain with which I was trying to connect:... and received first few lines indicating:... while everything worked fine when trying other destinations (ie: google.com, etc)This prompted me to contact the domain I had been trying to connect to, and indeed, they had a problem on THEIR END that had crept up.  It was resolved and my script went back to working.So... if you're pulling your hair out, give openssl a shot and see if there's anything up with the response from the location you are attempting to connect. Maybe the issue isn't so 'local' after all sometimes.Be sure that you open the php.ini file directly by your Window Explorer. (in my case: C:\DevPrograms\wamp64\bin\php\php5.6.25). Don't use the shortcut to php.ini in the Wamp/Xamp icon's menu in the System Tray. This shortcut doesn't work in this case.Then edit that php.ini :andAfter saving php.ini you don't need to "Restart All Services" in Wamp icon or close/re-open CMD. Have you tried..If you are consuming a trusted source arguably you dont need to verify the SSL cert.I just experienced this same problem with the Laravel 4 php framework which uses the guzzlehttp/guzzle composer package. For some reason, the SSL certificate for mailgun stopped validating suddenly and I got that same "error 60" message.If, like me, you are on a shared hosting without access to php.ini, the other solutions are not possible. In any case, Guzzle has this client initializing code that would most likely nullify the php.ini effects:Here Guzzle forces usage of its own internal cacert.pem file, which is probably now out of date, instead of using the one provided by cURL's environment. Changing this line (on Linux at least) configures Guzzle to use cURL's default SSL verification logic and fixed my problem:You can also set this to false if you don't care about the security of your SSL connection, but that's not a good solution.Since the files in vendor are not meant to be tampered with, a better solution would be to configure the Guzzle client on usage, but this was just too difficult to do in Laravel 4.Hope this saves someone else a couple hours of debugging...This might be an edge case, but in my case the problem was not the client conf (I already had curl.cainfo configured in php.ini), but rather the remote server not being configured properly: It did not send any intermediate certs in the chain. There was no error browsing the site using Chrome, but with PHP I got following error.After including the Intermediate Certs in the remote webserver configuration it worked.You can use this site to check the SSL configuration of your server: https://whatsmychaincert.com/when I run 'var_dump(php_ini_loaded_file());'

I get this output on my page

'C:\Development\bin\apache\apache2.4.33\bin\php.ini' (length=50)'and to get php to load my cert file I had to edit the php.ini in this path 'C:\Development\bin\apache\apache2.4.33\bin\php.ini'

and add openssl.cafile="C:/Development/bin/php/php7.2.4/extras/ssl/cacert.pem" where I had downloaded and place my cert file from https://curl.haxx.se/docs/caextract.htmlam on windows 10, using drupal 8, wamp and php7.2.4I spent too much time to figure out this problem for me.I had PHP version 5.5 and I needed to upgrade to 5.6.In versions < 5.6 Guzzle will use it's own cacert.pem file, but in higher versions of PHP it will use system's cacert.pem file.I also downloaded file from here https://curl.haxx.se/docs/caextract.html and set it in php.ini.Answer found in Guzzles StreamHandler.php file https://github.com/guzzle/guzzle/blob/0773d442aa96baf19d7195f14ba6e9c2da11f8ed/src/Handler/StreamHandler.php#L437All of the answers are correct ; but the most important thing is You have to find the right php.ini file. 

check this command in cmd " php --ini "  is not the right answer for finding the right php.ini file.if you editand checkthen curl.cainfo should have a value. if not then that's not right php.ini file;*I recommend you to search *.ini  in wamp/bin or xxamp/bin or any server you use and change them one by one and check it. *As you are using Windows, I think your path separator is '\' (and '/' on Linux). 

Try using the constant DIRECTORY_SEPARATOR. Your code will be more portable. Try:EDIT: and write the full path. I had some issues with relative paths (perhaps curl is executed from another base directory?)if you use WAMP you should also add the certificate line in php.ini for Apache (besides the default php.ini file):works for php5.3+

dyld: Library not loaded: /usr/local/opt/icu4c/lib/libicui18n.62.dylib error running php after installing node with brew on Mac

petekaner

[dyld: Library not loaded: /usr/local/opt/icu4c/lib/libicui18n.62.dylib error running php after installing node with brew on Mac](https://stackoverflow.com/questions/53828891/dyld-library-not-loaded-usr-local-opt-icu4c-lib-libicui18n-62-dylib-error-run)

I installed node using homebrew (Mojave), afterwards php stoped working and if I try to run php -v I get this error:I tried to uninstall both node and icu4c but the problem persists

2018-12-18 08:20:21Z

I installed node using homebrew (Mojave), afterwards php stoped working and if I try to run php -v I get this error:I tried to uninstall both node and icu4c but the problem persistsI just had this same problem. Upgrading Homebrew and then cleaning up worked for me. This error likely showed up for me because of a mismatch in package versions. None of the above solutions resolved my error, but running the following homebrew commands did.and thenIn my case, that happened because icu4c was upgraded to version 63 but my locally installed postgres image still referenced icu4c 62.1. Therefore i had to change the icu4c version used:Where version is the the installed version returned by infoTurns out I, like @Grey Black, had to actually install v62.1 of icu4c. Nothing else worked.However, brew switch icu4c 62.1 only works if you have installed 62.1 in the past. If you haven't there's more legwork involved. Homebrew does not make it easy to install previous versions of formulae. Here's how I did it:I had the same problem after I upgraded my macOS to version 10.13.6. I can't run composer and php commands. After researching for a while and trying various solutions posted online, reinstalling php using homebrew worked. brew reinstall php@7.1Added on March 14th based on Ryan's commentget the version you are currently using by running php -v and get the right formulae (which you can find here: https://formulae.brew.sh/formula/php) to replace @7.1 in the above command. I am actually quite surprised that this solution has not been presented yet, and I feel like it is the easiest solution.Go to GitHub, find the version of the brewfile that matches the version of icu4c that you need and get the raw version of the file (follow the links above and click View File then Raw).Then just have brew reinstall from that url.For example, version 62.1:Run npm version and see if you see the same error.If so, upgrade your node version brew upgrade npm.CreditsThis fixed it for me:Just brew remove php and brew install php did not work, nor did brew reinstall php.

My solution was to do:Now php -v gives me:Seems like it is impossible to link icu4c using brew after latest OS X update. Which makes things more interesting. The only solution I found working for me:I had problems because my version of PHP (7.3) was expecting icu4c 63 and brew would only install 64.https://stackoverflow.com/a/55828190/2000947 helped me install 63.On MacOS Mojave, only way I could fix it was with brew upgradebrew update && brew upgrade worked for meRather than install an old version of icu4c that the older (precompiled) php can link to, it's better to recompile the old php to link to the more recent library.This will build php and link it to the newer library. I found reinstall didn't quite work; the new install choked when the destination folder already existed.I also did brew link --force php@7.2 for my environment.Leland's answer worked for me, but I had to change steps 4 and 6 to:4) git checkout -B icu4c-62.1 575eb4b6) brew reinstall Formula/icu4c.rbIn order to downgrade, i had to recompile from source (MacOS Mojave)For me brew reinstall nodejs fixed this - my issue was with running Elixir/Phoenix so not PHP specific, I think it was caused by brew install postgres, but reinstalling that didn't help. I was getting it from npm commands.Got this error, too, after installing php 7.3. I had it resolved upgrading just my old php's versions (5.6 and 7.0, not from the official repos).The maintainers had compiled new php versions against the current icu4c. In my case, PHP 7 got from 0.31 to 0.33, and the problem was solved.

What is cURL in PHP?

Aakash Chakravarthy

[What is cURL in PHP?](https://stackoverflow.com/questions/3062324/what-is-curl-in-php)

In PHP, I see the word cURL in many PHP projects.  What is it?  How does it work?Reference Link: cURL

2010-06-17 14:06:12Z

In PHP, I see the word cURL in many PHP projects.  What is it?  How does it work?Reference Link: cURLcURL is a library that lets you make HTTP requests in PHP. Everything you need to know about it (and most other extensions) can be found in the PHP manual.You can make HTTP requests  without cURL, too, though it requires allow_url_fopen to be enabled in your php.ini file.cURL is a way you can hit a URL from your code to get a html response from it. cURL means client URL which allows you to connect with other URLs and use their responses in your code.Summary:The curl_exec command in PHP is a bridge to use curl from console.  curl_exec makes it easy to quickly and easily do GET/POST requests, receive responses from other servers like JSON and download files.Warning, Danger:curl is evil and dangerous if used improperly because it is all about getting data from out there in the internet.  Someone can get between your curl and the other server and inject a rm -rf / into your response, and then why am I dropped to a console and ls -l doesn't even work anymore?  Because you mis underestimated the dangerous power of curl.  Don't trust anything that comes back from curl to be safe, even if you are talking to your own servers.  You could be pulling back malware to relieve fools of their wealth.  These were done on Ubuntu 12.10Reminder of danger:Be careful dumping curl output around, if any of it gets interpreted and executed, your box is owned and your credit card info will be sold to third parties and you'll get a mysterious $900 charge from an Alabama one-man flooring company that's a front for overseas credit card fraud crime ring.cURL is a way you can hit a URL from your code to get a HTML response from it. It's used for command line cURL from the PHP language.Step 1: Initialize a curl session using curl_init().Step 2: Set option for CURLOPT_URL. This value is the URL which we are sending the request to. Append a search term curl using parameter q=. Set option for CURLOPT_RETURNTRANSFER. True will tell curl to return the string instead of print it out. Set option for CURLOPT_HEADER, false will tell curl to ignore the header in the return value.Step 3: Execute the curl session using curl_exec().Step 4: Close the curl session we have created.Step 5: Output the return string.This is also used for authentication. We can also set the username and password for authentication.For more functionality, see the user manual or the following tutorial:http://php.net/manual/en/ref.curl.php

http://www.startutorial.com/articles/view/php-curlFirstly let us understand the concepts of curl, libcurl and PHP/cURL.How to use it:step1: Initialize a curl session use curl_init().step2: Set option for CURLOPT_URL. This value is the URL which we are sending the request to.Append a search term "curl" using parameter "q=".Set option CURLOPT_RETURNTRANSFER, true will tell curl to return the string instead ofprint it out. Set option for CURLOPT_HEADER, false will tell curl to ignore the header in the return value.step3: Execute the curl session using curl_exec().step4: Close the curl session we have created.step5: Output the return string.Make DEMO :You will need to create two PHP files and place them into a folder that your web server can serve PHP files from. In my case I put them into /var/www/ for simplicity. 1. helloservice.php and 2. demo.phphelloservice.php is very simple and essentially just echoes back any data it gets:2.demo.php page, you can see the result:The cURL extension to PHP is designed to allow you to use a variety of web resources from within your PHP script.cURL in PHP is a bridge to use command line cURL from the php languagePHP supports libcurl, a library created by Daniel Stenberg, that allows you to connect and communicate to many different types of servers with many different types of protocols. libcurl currently supports the http, https, ftp, gopher, telnet, dict, file, and ldap protocols. libcurl also supports HTTPS certificates, HTTP POST, HTTP PUT, FTP uploading (this can also be done with PHP's ftp extension), HTTP form based upload, proxies, cookies, and user+password authentication.Once you've compiled PHP with cURL support, you can begin using the cURL functions. The basic idea behind the cURL functions is that you initialize a cURL session using the curl_init(), then you can set all your options for the transfer via the curl_setopt(), then you can execute the session with the curl_exec() and then you finish off your session using the curl_close().Curl is nothing but an extension of PHP which inherits behaviors of the normal curl command & library written primarily for Linux/Unix command line toolWhat is Curl?

cURL stand for Client URL. The cURL is used to send data to any URL. For more detail about what curl exactly is, you can visit CURL WebsitecURL in PHP

Now the same concept is introduced in PHP, to send data to any accessible URL via the different protocol, for example, HTTP or FTP. For More detail, you may refer to PHP Curl TutorialPhp curl function (POST,GET,DELETE,PUT)Php curl class (GET,POST,FILES UPLOAD, SESSIONS, SEND POST JSON, FORCE SELFSIGNED SSL/TLS):Example:Php file: api.php

PHP 5.4 Call-time pass-by-reference - Easy fix available?

bardiir

[PHP 5.4 Call-time pass-by-reference - Easy fix available?](https://stackoverflow.com/questions/8971261/php-5-4-call-time-pass-by-reference-easy-fix-available)

Is there any way to easily fix this issue or do I really need to rewrite all the legacy code?This happens everywhere as variables are passed into functions as references throughout the code.

2012-01-23 12:01:13Z

Is there any way to easily fix this issue or do I really need to rewrite all the legacy code?This happens everywhere as variables are passed into functions as references throughout the code.You should be denoting the call by reference in the function definition, not the actual call.  Since PHP started showing the deprecation errors in version 5.3,  I would say it would be a good idea to rewrite the code.From the documentation:For example, instead of using:Use:For anyone who, like me, reads this because they need to update a giant legacy project to 5.6: as the answers here point out, there is no quick fix: you really do need to find each occurrence of the problem manually, and fix it. The most convenient way I found to find all problematic lines in a project (short of using a full-blown static code analyzer, which is very accurate but I don't know any that take you to the correct position in the editor right away) was using Visual Studio Code, which has a nice PHP linter built in, and its search feature which allows searching by Regex. (Of course, you can use any IDE/Code editor for this that does PHP linting and Regex searches.)Using this regex: it is possible  to search project-wide for the occurrence of &$ only in lines that are not a function definition. This still turns up a lot of false positives, but it does make the job easier.VSCode's search results browser makes walking through and finding the offending lines super easy: you just click through each result, and look out for those that the linter underlines red. Those you need to fix.PHP and references are somewhat unintuitive. If used appropriately references in the right places can provide large performance improvements or avoid very ugly workarounds and unusual code.The following will produce an error:None of these have to fail as they could follow the rules below but have no doubt been removed or disabled to prevent a lot of legacy confusion.If they did work, both involve a redundant conversion to reference and the second also involves a redundant conversion back to a scoped contained variable.The second one used to be possible allowing a reference to be passed to code that wasn't intended to work with references. This is extremely ugly for maintainability.This will do nothing:More specifically, it turns the reference back into a normal variable as you have not asked for a reference.This will work:This sees that you are passing a non-reference but want a reference so turns it into a reference.What this means is that you can't pass a reference to a function where a reference is not explicitly asked for making it one of the few areas where PHP is strict on passing types or in this case more of a meta type.If you need more dynamic behaviour this will work:Here it sees that you want a reference and  already have a reference so leaves it alone. It may also chain the reference but I doubt this.

Create a CSV File for a user in PHP

Oleg Barshay

[Create a CSV File for a user in PHP](https://stackoverflow.com/questions/217424/create-a-csv-file-for-a-user-in-php)

I have data in a MySQL database. I am sending the user a URL to get their data out as a CSV file.I have the e-mailing of the link, MySQL query, etc. covered.How can I, when they click the link, have a pop-up to download a CVS with the record from MySQL? I have all the information to get the record already. I just don't see how to have PHP create the CSV file and let them download a file with a .csv extension.

2008-10-20 03:11:46Z

I have data in a MySQL database. I am sending the user a URL to get their data out as a CSV file.I have the e-mailing of the link, MySQL query, etc. covered.How can I, when they click the link, have a pop-up to download a CVS with the record from MySQL? I have all the information to get the record already. I just don't see how to have PHP create the CSV file and let them download a file with a .csv extension.Try:etcEdit: Here's a snippet of code I use to optionally encode CSV fields:php://output

fputcsvHere is an improved version of the function from php.net that @Andrew posted.It is really easy to use and works great with MySQL(i)/PDO result sets.Remember to exit() after calling this if you are done with the page.In addition to all already said, you might need to add:It's very useful when handling files with multiple languages in them, like people's names, or cities.The thread is a little old, I know, but for future reference and for noobs as myself:Everyone else here explain how to create the CSV, but miss a basic part of the question: how to link. In order to link to download of the CSV-file, you just link to the .php-file, which in turn responds as being a .csv-file. The PHP headers do that. This enables cool stuff, like adding variables to the querystring and customize the output:my_csv_creator.php can work with the variables given in the querystring and for example use different or customized database queries, change the columns of the CSV, personalize the filename and so on, e.g.:Create your file then return a reference to it with the correct header to trigger the Save As - edit the following as needed. Put your CSV data into $csvdata.Here is a full working example using PDO and including column headers:    First make data as a String with comma as the delimiter (separated with ","). Something like thisHey It works very well....!!!! Thanks Peter Mortensen and Connor Burton?>Simple method - So each line of the $data array will go to a new line of your newly created CSV file. It only works only for PHP 5 and later.You can simply write your data into CSV using fputcsv function. let us have a look at the example below. Write the list array to CSV fileThe easiest way is to use a dedicated CSV class like this:Instead of:Use:Already very good solution came. I'm just puting the total code so that a newbie get total helpI have saved this code in csv-download.phpNow see how I have used this data to download csv fileSo when I have clicked the link it download the file without taking me to csv-download.php page on browser.To have it send it as a CSV and have it give the file name, use header():http://us2.php.net/headerAs far as making the CSV itself, you would just loop through the result set, formatting the output and sending it, just like you would any other content.Writing your own CSV code is probably a waste of your time, just use a package such as league/csv - it deals with all the difficult stuff for you, the documentation is good and it's very stable / reliable:http://csv.thephpleague.com/You'll need to be using composer. If you don't know what composer is I highly recommend you have a look: https://getcomposer.org/How to write in CSV file using PHP script? Actually I was also searching for that too. It is kind of easy task with PHP.

fputs(handler, content) - this function works efficiently for me. First you need to open the file in which you need to write content using fopen($CSVFileName, ‘wb’).Put in the $output variable the CSV data and echo with the correct headers

Remove warning messages in PHP

Alireza

[Remove warning messages in PHP](https://stackoverflow.com/questions/1987579/remove-warning-messages-in-php)

I have some PHP code. When I run it, a warning message appears.How can I remove/suppress/ignore these warning messages?

2010-01-01 00:32:50Z

I have some PHP code. When I run it, a warning message appears.How can I remove/suppress/ignore these warning messages?You really should fix whatever's causing the warning, but you can control visibility of errors with error_reporting(). To skip warning messages, you could use something like:You can put an @ in front of your function call to suppress all error messages.To suppress warnings while leaving all other error reporting enabled:If you don't want to show warnings as well as errors use Error Reporting - PHP ManualIf you want to suppress the warnings and some other error types (for example, notices) while displaying all other errors, you can do:in Core Php to hide warning message set error_reporting(0) at top of common include file or individual file.In Wordpress hide Warnings and Notices add following code in wp-config.php fileNot exactly answering the question, but I think this is a better compromise in some situations:I had a warning message as a result of a printf() statement in a third-party library. I knew exactly what the cause was - a temporary work-around while the third-party fixed their code. I agree that warnings should not be suppressed, but I could not demonstrate my work to a client with the warning message popping up on screen.  My solution:Warning was still in page source as a reminder to me, but invisible to the client.You could suppress the warning using error_reporting but the much better way is to fix your script in the first place.If you don't know how, edit your question and show us the line in question and the warning that is displayed.I think that better solution is configuration of .htaccess In that way you dont have to alter code of application. Here are directives for Apache2I do it as follows in my php.ini:This logs only fatal errors and no warnings.

What is the best method to merge two PHP objects?

Veynom

[What is the best method to merge two PHP objects?](https://stackoverflow.com/questions/455700/what-is-the-best-method-to-merge-two-php-objects)

We have two PHP5 objects and would like to merge the content of one into the second. There are no notion of subclasses between them so the solutions described in the following topic cannot apply.How do you copy a PHP object into a different object typeRemarks:

2009-01-18 18:55:18Z

We have two PHP5 objects and would like to merge the content of one into the second. There are no notion of subclasses between them so the solutions described in the following topic cannot apply.How do you copy a PHP object into a different object typeRemarks:This actually also works when objects have methods. (tested with PHP 5.3 and 5.6)You could create another object that dispatches calls to magic methods to the underlying objects.   Here's how you'd handle __get, but to get it working fully you'd have to override all the relevant magic methods.  You'll probably find syntax errors since I just entered it off the top of my head. Good luck.I understand that using the generic objects [stdClass()] and casting them as arrays answers the question, but I thought the Compositor was a great answer. Yet I felt it could use some feature enhancements and might be useful for someone else.Features:  Code:Usage:Example:A very simple solution considering you have object A and B:That's all. You now have objA with all values from objB.The \ArrayObject class has the possibility to exchange the current array to disconnect the original reference. To do so, it comes with two handy methods: exchangeArray() and getArrayCopy(). The rest is plain simple array_merge() of the provided object with the ArrayObjects public properties:The usage is as easy as this: a solution To preserve,both methods and properties from merged onjects  is to create a combinator class that can simple useI would go with linking the second object into a property of the first object. If the second object is the result of a function or method, use references. Ex:To merge any number of raw objectsHere is a function that will flatten an object or array.  Use this only if you are sure your keys are unique.  If you have keys with the same name they will be overwritten. You will need to place this in a class and replace "Functions" with the name of your class.  Enjoy...Let's keep it simple!If that doesn't answer your question, it will surely help towards the answer.

Credit for the code above goes to myself :)This snippet of code will recursively convert that data to a single type (array or object) without the nested foreach loops. Hope it helps someone!Once an Object is in array format you can use array_merge and convert back to Object if you need to.Procedural wayAll credit goes to: Jason Oakley

Convert DateTime to String PHP

Netorica

[Convert DateTime to String PHP](https://stackoverflow.com/questions/10569053/convert-datetime-to-string-php)

I have already researched a lot of site on how can I convert PHP DateTime object to String.  I always see "String to DateTime" and not "DateTime to String"PHP DateTime can be echoed, but what i want to process my DateTime with PHP string functions.My question is how can I make PHP dateTime Object to a string starting from this kind of code:

2012-05-13 03:15:21Z

I have already researched a lot of site on how can I convert PHP DateTime object to String.  I always see "String to DateTime" and not "DateTime to String"PHP DateTime can be echoed, but what i want to process my DateTime with PHP string functions.My question is how can I make PHP dateTime Object to a string starting from this kind of code:You can use the format method of the DateTime class:If format fails for some reason, it will return FALSE. In some applications, it might make sense to handle the failing case:There are some predefined formats in date_d.php to use with format like:Use like this:The simplest way I found is:I hope it helps.Shorter way using list. And you can do what you want with each date component.Its worked for me 

Laravel: How to Get Current Route Name? (v5 & v6)

Md Rashedul Hoque Bhuiyan

[Laravel: How to Get Current Route Name? (v5 & v6)](https://stackoverflow.com/questions/30046691/laravel-how-to-get-current-route-name-v5-v6)

In Laravel v4 I was able to get the current route name using...How can I do it in Laravel v5 and Laravel v6?

2015-05-05 07:27:49Z

In Laravel v4 I was able to get the current route name using...How can I do it in Laravel v5 and Laravel v6?Try this orfrom v5.1Laravel v5.2Or if you need the action nameLaravel 5.2 route documentationRetrieving The Request URIThe path method returns the request's URI. So, if the incoming request is targeted at http://example.com/foo/bar, the path method will return foo/bar:The is method allows you to verify that the incoming request URI matches a given pattern. You may use the * character as a wildcard when utilizing this method:To get the full URL, not just the path info, you may use the url method on the request instance:Laravel v5.3 ... v5.8Laravel 5.3 route documentationLaravel v6.x** Current as of Nov 11th 2019 - version 6.5 **Laravel 6.x route documentationThere is an option to use request to get routeUsing Laravel 5.1, you can useIf you need url, not route name, you do not need to use/require any other classes:Found a way to find the current route name works for  laravel v5 , v5.1.28 and v5.2.10Namespaceand For Laravel laravel v5.3 you can just use:If you want to select menu on multiple routes you may do like this:Or if you want to select just single menu you may simply do like this:Also tested in Laravel 5.2Hope this help someone.Laravel 5.2 You can useIt will give you current route name.In 5.2, you can use the request directly with:or via the helper method:Output example:Shortest way is Route facade

\Route::current()->getName()This also works in laravel 5.4.*You can use in template:In a controller action, you could just do:$request here is resolved by Laravel's service container.getName() returns the route name for named routes only, null otherwise (but you could still explore the \Illuminate\Routing\Route object for something else of interest).In other words, you should have your route defined like this to have "nameOfMyRoute" returned:Now in Laravel 5.3 I am seeing that can be made similarly you tried: https://laravel.com/docs/5.3/routing#accessing-the-current-routeAccessing The Current Route(v5.3 onwards)You may use the current, currentRouteName, and currentRouteAction methods on the Route facade to access information about the route handling the incoming request:Refer to the API documentation for both the underlying class of the Route facade and Route instance to review all accessible methods.Reference : https://laravel.com/docs/5.2/routing#accessing-the-current-routeAccessing The Current RouteGet current route name in Blade templatesfor more info https://laravel.com/docs/5.5/routing#accessing-the-current-routeRequest::path(); is better, and remember to use Request;I have used for getting route name in larvel 5.3Request::path()Looking at \Illuminate\Routing\Router.php you can use the method currentRouteNamed() by injecting a Router in your controller method. For example:or using the Route facade:You could also use the method is() to check if the route is named any of the given parameters, but beware this method uses preg_match() and I've experienced it to cause strange behaviour with dotted route names (like 'foo.bar.done'). There is also the matter of performance around preg_match() 

 which is a big subject in the PHP community.In a Helper file,Your can use Route::current()->uri() to get current URL.Hence, If you compare your route name to set active class on menu then it would be good if you use Route::currentRouteName() to get the name of route and comparefor some reasons, I couldn't use any of these solutions. so I just declared my route in web.php as $router->get('/api/v1/users', ['as' => 'index',   'uses' => 'UserController@index']) and in my controller I got the name of the route using $routeName =  $request->route()[1]['as']; which $request is \Illuminate\Http\Request $request typehinted parameter in index method of UserControllerusing Lumen 5.6. Hope it would help someone.Solution :In my opinion the most easiest solution is using this helper:For the docs, see this linkYou can use below method :In Laravel version > 6.0, You can use below methods: 

GCM with PHP (Google Cloud Messaging)

user1488243

[GCM with PHP (Google Cloud Messaging)](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)

How can I integrate the new Google Cloud Messaging in a PHP backend?

2012-06-28 10:32:56Z

How can I integrate the new Google Cloud Messaging in a PHP backend?This code will send a GCM message to multiple registration IDs via PHP CURL. It's easy to do. The cURL code that's on the page that Elad Nava has put here works. Elad has commented about the error he's receiving.String describing an error that occurred while processing the message for that recipient. The possible values are the same as documented in the above table, plus "Unavailable" (meaning GCM servers were busy and could not process the message for that particular recipient, so it could be retried).I've got a service set up already that seems to be working (ish), and so far all I've had back are unavailable returns from Google. More than likely this will change soon.To answer the question, use PHP, make sure the Zend Framework is in your include path, and use this code:And there we have it. A working (it will work soon) example of using Googles new GCM in Zend Framework PHP.After searching for a long time finally I am able to figure out what I exactly needed, Connecting to the GCM using PHP as a server side scripting language, The following tutorial will give us a clear idea of how to setup everything we need to get started with GCMAndroid Push Notifications using Google Cloud Messaging (GCM), PHP and MySQLI actually have this working now in a branch in my Zend_Mobile tree: https://github.com/mwillbanks/Zend_Mobile/tree/feature/gcmThis will be released with ZF 1.12, however, it should give you some great examples on how to do this.Here is a quick demo on how it would work....A lot of the tutorials are outdated, and even the current code doesn't account for when device registration_ids are updated or devices unregister. If those items go unchecked, it will eventually cause issues that prevent messages from being received.  http://forum.loungekatt.com/viewtopic.php?t=63#p181Also you can try this piece of code, source:In above script just change :Let me know if you are getting any problem in this I am able to get notification successfully using the same script.You can use this PHP library available on packagist:https://github.com/CoreProc/gcm-phpAfter installing it you can do this:Here's a library I forked from CodeMonkeysRU.The reason I forked was because Google requires exponential backoff. I use a redis server to queue messages and resend after a set time.I've also updated it to support iOS.https://github.com/stevetauber/php-gcm-queueHere is android code for PHP code of above posted by @Elad NavaMainActivity.java (Launcher Activity)GCMClientManager.javaPushNotificationService.java (Notification generator)AndroidManifest.xmluse thisI know this is a late Answer, but it may be useful for those who wants to develop similar apps with current FCM format (GCM has been deprecated).

The following PHP code has been used to send topic-wise podcast. All the apps registered with the mentioned channel/topis would receive this Push Notification.

How are echo and print different in PHP? [duplicate]

zuk1

[How are echo and print different in PHP? [duplicate]](https://stackoverflow.com/questions/234241/how-are-echo-and-print-different-in-php)

Is there any major and fundamental difference between these two functions in PHP?

2008-10-24 16:25:12Z

Is there any major and fundamental difference between these two functions in PHP?From:

http://web.archive.org/web/20090221144611/http://faqts.com/knowledge_base/view.phtml/aid/1/fid/40print is also part of the precedence table which it needs to be if it 

is to be used within a complex expression. It is just about at the bottom

of the precedence list though.  Only , AND OR XOR are lower.So, echo without parentheses can take multiple parameters, which get

concatenated:print() can only take one parameter:They are: To add to the answers above, while print can only take one parameter, it will allow for concatenation of multiple values, ie:This is 5 values in 1 parameter                                                      I think print() is slower than echo.I like to use print() only for situations like:As the PHP.net manual suggests, take a read of this discussion.One major difference is that echo can take multiple parameters to output. E.g.:If you're looking to evaluate the outcome of an output statement (as below) use print. If not, use echo.

How to render a DateTime object in a Twig template

Chris Ridmann

[How to render a DateTime object in a Twig template](https://stackoverflow.com/questions/8318914/how-to-render-a-datetime-object-in-a-twig-template)

One of my fields in one of my entities is a "datetime" variable.How can I convert this field into a string to render in a browser?Here is a code snippet:Here is the variable in my entity class:And here is the error message I am getting:

2011-11-29 22:54:33Z

One of my fields in one of my entities is a "datetime" variable.How can I convert this field into a string to render in a browser?Here is a code snippet:Here is the variable in my entity class:And here is the error message I am getting:Although you can use theapproach, keep in mind that this version does not honor the user locale, which should not be a problem with a site used by only users of one nationality. International users should display the game date totally different, like extending the \DateTime class, and adding a __toString() method to it that checks the locale and acts accordingly.Edit:As pointed out by @Nic in a comment, if you use the Intl extension of Twig, you will have a localizeddate filter available, which shows the date in the user’s locale. This way you can drop my previous idea of extending \DateTime.You can use date filter:It depends on the format you want the date to be shown as.If you want to display a static format, which is the same for all locales (for instance ISO 8601 for an Atom feed), you should use Twig's date filter:Which will allways return a datetime in the following format:The format strings accepted by the date filter are the same as you would use for PHP's date() function. (the only difference is that, as far as I know, you can't use the predefined constants which can be used in the PHP date() function)However, since you want to render it in the browser, you'll likely want to show it in a human-readable format, localised for the user's language and location. Instead of doing the localization yourself, you can use the Intl Extension for this (which makes use of PHP's IntlDateFormatter). It provides a filter localizeddate which will output the date and time using a localized format.Arguments for localizeddate:(there are more, see the docs for the complete list of possible arguments)For date_format and time_format you can use one of the following strings:So, for instance, if you want to display the date in a format equivalent to February 6, 2014 at 10:52 AM, use the following line in your Twig template:However, if you use a different locale, the result will be localized for that locale:As you can see, localizeddate does not only translate the month names but also uses the local notations. The English notation puts the date after the month, where Dutch, French and German notations put it before the month. English and German month names start with an uppercase letter, whereas Dutch and French month names are lowercase. And German dates have a dot appended.Installation instructions for the Intl extension can be found in this seperate answer.Dont forget Entity :View:>> Output  2013-09-18 16:14:20 There is a symfony2 tool to display date in the current locale:https://github.com/michelsalib/BCCExtraToolsBundleFor full date time string including timezone offset.you can render in following way{{ post.published_at|date("m/d/Y") }}For more details can visit http://twig.sensiolabs.org/doc/filters/date.htmlI know this is a pretty old question, but I found this question today, but the answers were not what I needed.So here's what I needed.If you, like me, are looking to display the current date in twig, you can use the following:{{ "now"|date("m/d/Y") }}See documentation about this:date in twig

How to initialize static variables

Svish

[How to initialize static variables](https://stackoverflow.com/questions/693691/how-to-initialize-static-variables)

I have this code:Which gives me the following error:So, I guess I am doing something wrong... but how can I do this if not like that? If I change the mktime stuff with regular strings, it works. So I know that I can do it sort of like that..Anyone have some pointers?

2009-03-28 22:50:59Z

I have this code:Which gives me the following error:So, I guess I am doing something wrong... but how can I do this if not like that? If I change the mktime stuff with regular strings, it works. So I know that I can do it sort of like that..Anyone have some pointers?PHP can't parse non-trivial expressions in initializers.I prefer to work around this by adding code right after definition of the class:orPHP 5.6 can handle some expressions now.If you have control over class loading, you can do static initializing from there.Example:in your class loader, do the following:A more heavy weight solution would be to use an interface with ReflectionClass:in your class loader, do the following:Instead of finding a way to get static variables working, I prefer to simply create a getter function. Also helpful if you need arrays belonging to a specific class, and a lot simpler to implement.Wherever you need the list, simply call the getter method. For example:I use a combination of Tjeerd Visser's and porneL's answer.But an even better solution is to do away with the static methods and use the Singleton pattern. Then you just do the complicated initialization in the constructor. Or make it a "service" and use DI to inject it into any class that needs it.That's too complex to set in the definition. You can set the definition to null though, and then in the constructor, check it, and if it has not been changed - set it:You can't make function calls in this part of the code.  If you make an init() type method that gets executed before any other code does then you will be able to populate the variable then.In PHP 7.0.1, I was able to define this: And then use it like this:best way is to create an accessor like this:then you can do static::db(); or self::db(); from anywhere.Here is a hopefully helpful pointer, in a code example.  Note how the initializer function is only called once.Also, if you invert the calls to StaticClass::initializeStStateArr() and $st = new StaticClass() you'll get the same result.Which yields :

How to make asynchronous HTTP requests in PHP

Brent

[How to make asynchronous HTTP requests in PHP](https://stackoverflow.com/questions/124462/how-to-make-asynchronous-http-requests-in-php)

Is there a way in PHP to make asynchronous HTTP calls? I don't care about the response, I just want to do something like file_get_contents(), but not wait for the request to finish before executing the rest of my code. This would be super useful for setting off "events" of a sort in my application, or triggering long processes.Any ideas?

2008-09-23 23:00:53Z

Is there a way in PHP to make asynchronous HTTP calls? I don't care about the response, I just want to do something like file_get_contents(), but not wait for the request to finish before executing the rest of my code. This would be super useful for setting off "events" of a sort in my application, or triggering long processes.Any ideas?The answer I'd previously accepted didn't work. It still waited for responses. This does work though, taken from How do I make an asynchronous GET request in PHP?If you control the target that you want to call asynchronously (e.g. your own "longtask.php"), you can close the connection from that end, and both scripts will run in parallel. It works like this:I have tried this, and it works just fine. But quick.php won't know anything about how longtask.php is doing, unless you create some means of communication between the processes.Try this code in longtask.php, before you do anything else. It will close the connection, but still continue to run (and suppress any output):The code is copied from the PHP manual's user contributed notes and somewhat improved.this needs php5, 

I stole it out of docs.php.net and edited the end.I use it for monitoring when an error happens on a clients site, it sends data off to me without holding up the outputYou can do trickery by using exec() to invoke something that can do HTTP requests, like wget, but you must direct all output from the program to somewhere, like a file or /dev/null, otherwise the PHP process will wait for that output.If you want to separate the process from the apache thread entirely, try something like (I'm not sure about this, but I hope you get the idea):It's not a nice business, and you'll probably want something like a cron job invoking a heartbeat script which polls an actual database event queue to do real asynchronous events.As of 2018, Guzzle has become the defacto standard library for HTTP requests, used in several modern frameworks. It's written in pure PHP and does not require installing any custom extensions.It can do asynchronous HTTP calls very nicely, and even pool them such as when you need to make 100 HTTP calls, but don't want to run more than 5 at a time.See http://docs.guzzlephp.org/en/stable/quickstart.html#concurrent-requestsYou can use this library: https://github.com/stil/curl-easyIt's pretty straightforward then:Below you can see console output of above example.

It will display simple live clock indicating how much time request is running:With this method no need to implement connection handling via headers and buffer too dependent on OS, Browser and PHP versionMaster processBackground processNBResourceslet me show you my way :)needs nodejs installed on the server(my server sends 1000 https get request takes only 2 seconds)url.php : urlscript.js >The swoole extension. https://github.com/matyhtf/swoole

Asynchronous & concurrent networking framework for PHP.You can use non-blocking sockets and one of pecl extensions for PHP:You can use library which gives you an abstraction layer between your code and a pecl extension: https://github.com/reactphp/event-loopYou can also use async http-client, based on the previous library: https://github.com/reactphp/http-clientSee others libraries of ReactPHP: http://reactphp.orgBe careful with an asynchronous model.

I recommend to see this video on youtube: http://www.youtube.com/watch?v=MWNcItWuKpIEvent extension is very appropriate. It is a port of Libevent library which is designed for event-driven I/O, mainly for networking.I have written a sample HTTP client that allows to schedule a number of 

HTTP requests and run them asynchronously.This is a sample HTTP client class based on Event extension.The class allows to schedule a number of HTTP requests, then run them asynchronously. This is a sample script on the server side. Sample Output(Trimmed.)Note, the code is designed for long-term processing in the CLI SAPI.For custom protocols, consider using low-level API, i.e. buffer events, buffers. For SSL/TLS communications, I would recommend the low-level API in conjunction with Event's ssl context. Examples:Although Libevent's HTTP API is simple, it is not as flexible as buffer events. For example, the HTTP API currently doesn't support custom HTTP methods. But it is possible to implement virtually any protocol using the low-level API.I have also written a sample of another HTTP client using Ev extension with sockets in non-blocking mode. The code is slightly more verbose than the sample based on Event, because Ev is a general purpose event loop. It doesn't provide network-specific functions, but its EvIo watcher is capable of listening to a file descriptor encapsulated into the socket resource, in particular.This is a sample HTTP client based on Ev extension.Ev extension implements a simple yet powerful general purpose event loop. It doesn't provide network-specific watchers, but its I/O watcher can be used for asynchronous processing of sockets.The following code shows how HTTP requests can be scheduled for parallel processing.Suppose http://my-host.local/test.php script is printing the dump of $_GET:Then the output of php http-client.php command will be similar to the following:(trimmed)Note, in PHP 5 the sockets extension may log warnings for EINPROGRESS, EAGAIN, and EWOULDBLOCK errno values. It is possible to turn off the logs withThe code that is supposed to run in parallel with the network requests can be executed within a the callback of an Event timer, or Ev's idle watcher, for instance. You can easily figure it out by watching the samples mentioned above. Otherwise, I'll add another example :)Here is a working example, just run it and open storage.txt afterwards, to check the magical resultHere is my own PHP function when I do POST to a specific URL of any page....

Sample: *** usage of my Function...ReactPHP async http client

https://github.com/shuchkin/react-http-clientInstall via Composer

Async HTTP GETRun php in CLI-mode

I find this package quite useful and very simple: https://github.com/amphp/parallel-functionsIt will load all 3 urls in parallel. 

You can also use class instance methods in the closure.For example I use Laravel extension based on this package https://github.com/spatie/laravel-collection-macros#parallelmapHere is my code:It loads all needed data in 10 parallel threads and instead of 50 secs without async it finished in just 8 secs.Well, the timeout can be set in milliseconds,

see "CURLOPT_CONNECTTIMEOUT_MS" in http://www.php.net/manual/en/function.curl-setopt

Add a custom attribute to a Laravel / Eloquent model on load?

coatesap

[Add a custom attribute to a Laravel / Eloquent model on load?](https://stackoverflow.com/questions/17232714/add-a-custom-attribute-to-a-laravel-eloquent-model-on-load)

I'd like to be able to add a custom attribute/property to an Laravel/Eloquent model when it is loaded, similar to how that might be achieved with RedBean's $model->open() method.For instance, at the moment, in my controller I have:It would be nice to be able to omit the loop and have the 'available' attribute already set and populated.I've tried using some of the model events described in the documentation to attach this property when the object loads, but without success so far.Notes:

2013-06-21 10:13:20Z

I'd like to be able to add a custom attribute/property to an Laravel/Eloquent model when it is loaded, similar to how that might be achieved with RedBean's $model->open() method.For instance, at the moment, in my controller I have:It would be nice to be able to omit the loop and have the 'available' attribute already set and populated.I've tried using some of the model events described in the documentation to attach this property when the object loads, but without success so far.Notes:The problem is caused by the fact that the Model's toArray() method ignores any accessors which do not directly relate to a column in the underlying table.As Taylor Otwell mentioned here, "This is intentional and for performance reasons." However there is an easy way to achieve this:Any attributes listed in the $appends property will automatically be included in the array or JSON form of the model, provided that you've added the appropriate accessor.Old answer (for Laravel versions < 4.08):The best solution that I've found is to override the toArray() method and either explicity set the attribute:or, if you have lots of custom accessors, loop through them all and apply them:The last thing on the Laravel Eloquent doc page is:That can be used automatically to add new accessors to the model without any additional work like modifying methods like ::toArray(). Just create getFooBarAttribute(...) accessor and add the foo_bar to  $appends array. If you rename your getAvailability() method to getAvailableAttribute() your method becomes an accessor and you'll be able to read it using ->available straight on your model.Docs: https://laravel.com/docs/5.4/eloquent-mutators#accessors-and-mutatorsEDIT: Since your attribute is "virtual", it is not included by default in the JSON representation of your object.But I found this: Custom model accessors not processed when ->toJson() called?  In order to force your attribute to be returned in the array, add it as a key to the $attributes array.I didn't test it, but should be pretty trivial for you to try in your current setup.I had something simular:

I have an attribute picture in my model, this contains the location of the file in the Storage folder.

The image must be returned base64 encodedyou can use setAttribute function in Model to add a custom attributeLet say you have 2 columns named first_name and last_name in your users table and you want to retrieve full name. you can achieve with the following code :now you can get full name as:In my subscription model, I need to know the subscription is paused or not.

here is how I did itthen in the view template,I can use 

$subscription->is_paused to get the result. The getIsPausedAttribute is the format to set a custom attribute,and uses is_paused to get or use the attribute in your view.in my case, creating an empty column and setting its accessor worked fine.

my accessor filling user's age from dob column. toArray() function worked too.

Running Composer returns:「Could not open input file: composer.phar」

user3291745

[Running Composer returns:「Could not open input file: composer.phar」](https://stackoverflow.com/questions/21670709/running-composer-returns-could-not-open-input-file-composer-phar)

I am new to symfony2 and reading symblog. In third chapter while trying with data-fixtures I tried the command: php composer.phar update but I got the error: Could not open input file: composer.pharSo I googled a little and tried but still getting the same error. So please guide how to deal with this composer to install new extentions or bundles like data-fixtures in symfony2 using wamp.

2014-02-10 06:49:22Z

I am new to symfony2 and reading symblog. In third chapter while trying with data-fixtures I tried the command: php composer.phar update but I got the error: Could not open input file: composer.pharSo I googled a little and tried but still getting the same error. So please guide how to deal with this composer to install new extentions or bundles like data-fixtures in symfony2 using wamp.If you followed instructions like these:https://getcomposer.org/doc/00-intro.mdWhich tell you to do the following:Then it's likely that you, like me, ran those commands and didn't read the next part of the page telling you to stop referring to composer.phar by its full name and abbreviate it as an executable (that you just renamed with the mv command). So this:Becomes this:I had the same problem on Windows and used a different solution. I used the Composer_Setup.exe installation file supplied by the composer website and it does a global install. After installing, make sure your PATH variable points to the directory where composer.phar is stored. This is usually C:\ProgramData\ComposerSetup\bin (ProgramData might be a hidden directory). It goes without saying, but also be sure that the PHP executable is also in your PATH variable.You can then simply callinstead of It is helpful to know that there are two ways to install (and use) Composer: locally as a file in your project directory, or globally as a system-wide executable.Installing Composer locally simply means that you are downloading a file (composer.phar - which is a PHP Archive) into your project directory. You will have to download it for every project that requires Composer.Like a regular PHP file that you want to execute on the command line, you will have to run it with PHP:Which basically tells the php executable to run the file composer.phar with update as argument.However, if you install it globally, you can make composer itself executable, so you can call it without php (and don't have to download it for every project). In other words, you can use composer like this:Since you are executing php composer.phar update, and you are getting the error Could not open input file: composer.phar, you probably don't have composer.phar in your current directory.If you have Composer installed globally, simply run composer update instead of php composer.phar update.If you don't have Composer installed yet, download the PHAR using the following command:This will download the installer and run it using php. The installer will download the actual Composer PHAR to your current working directory, and make it executable.To install Composer globally (I recommend this), copy the file to a location in your PATH. The exact location differs per operating system and setup, see https://getcomposer.org/doc/00-intro.md#globally for more information.Personally, I prefer to install Composer in my home directory so I don't need sudo to install or update the composer executable (which can be a security risk). As I'm on Linux, I use the following command:If anyone else came this low on the page and still didn't find a working answer (like I did), use this:et voila! A working composer :-)I found this worked as I did not have curl installed. On Windows 8 with XAMPP installed. It will add it to your local build I use .gitignore to avoid the repoI got it from here: https://getcomposer.org/download/To solve this issue the first thing you need to do is to get the last version of composer :I recommend you to move the composer.phar file to a global「bin」directoy, in my case (OS X) the path is:than you need to create an alias file for an easy access If everything is ok, now it is time to verify our Composer version:Let's make composer great again.This worked  for me:Without Yesterday I was trying to install Yii2 framework on Windows 10 and I have same problem(Could not open input file: composer.phar) running this command:Issue is composer.phr file is not in current directory,you need to give full path composer.phr likeOr you can create yii2 project using this command:OrI had the same issue. It is solved when I made composer globally available. Now I am able to tun the commands from any where in the folder.composer updatecomposer require "samplelibraryyouwant"Use this :Easy answer, navigate to the directory where you already have the composer.json file that you want to run (ideally your project folder) then download composer into the same folder, then instantly run the install command like so:This will automatically find the composer.json and run your required scripts. Good luck. This stuff is a breeze for terminal wizards and totally bizarre to the rest of usI am using windows 8.0. In my case to install or update i just use composer install or something else instead of php composer.phar. This worked for me

like your composer.phar should be placed in above way.For windows, I made composer.cmd and used the below text:where composer.phar is installed and c:\programs\php\ is added to my path.Not sure why this isn't done automatically.For Windows10 Pro, Following steps fix the issue. select properties check the Unblock program option. run the installer, run the command CMD with Admin rights. At command promp run composer --version to make sure it is globally installed. you should be able to now run composer require drush/drush This is for drush dependency using composer.Your composer.phar must be in Source files. I had same problem and I just cut my composer.phar into mine  framework-standard-edition folder, where is my whole strong textproject.if the composer is already install all you need is to know where the composer.phar file is (its directory) after that you move to your symfony project where you have the composer.json and from that directory you execute your composer.phar file. In windows here is what you have to do.That's alluse two steps .curl -sS https://getcomposer.org/installer | phpsudo php composer.phar updateYou can doThe -sS flag meaning don't show progress, do show errorsand thenfrom:

How do I get cURL to not show the progress bar?https://packagist.org/I've reach to this problem when trying to install composer on a Window 7 machine from http://getcomposer.org/download page. As there was an existing compose version (provided by acquia Dev Desktop tool) the installation fails and the only chance was to fix this issue manually. (or to remove Dev Desktop tool composer).Anyway the error message is quite straightforward (Could not open input file: composer.phar), we should then tell the system where the file is located.Edit composer.bat file and should look like:See that composer.phar doesn´t have a file path. When standing in a different folder than the one where composer.phar is located the system won´t be able to find it. So, just complete the composer.phar file path:Reopen your window console and that should do the trick.Do not access the composer by

composer composer.pher installuse

composer installYou can just try this command if you're already installed the Composer :or  if you want add some bundle to your composer try this :use composer alone without php like :I have fixed the same issue with below stepsEverything is working fine now because the composer.phar file is available within the current project directory.thanks With me it works just you need the file composer.phar and composer.json in the current project. 

The command isCommand like this : I solved the problem by following this process i set the composer globally and renamed composer.phar to composer then run this command composer require intervention/image . and now it's working fineI know that maybe my answer is too specific for a embedded QNAP server, but I ended here trying to install Yii:For me, inside a QNAP NAS through PuTTY, after trying all tricks above, and updating PATH to no avail, the only cmd line that works is:Of course, adapt your path accordingly...If I do a which composer, I have a correct answer, but if I do a which php nothing returns.Besides that, trying to run /mnt/ext/opt/apache/bin/php composer create-project yiisoft/yii2-app-basic basic or referring to composer.phar didn't worked too...Just open cmd as Administrator and  go into your project folder and check it is working or not using composer command.The above error is because of the composer is not accessible globally.

So you need to run "cmd" as Administrator. This is working fine for me.  the simple straight way i went about this similar was 

- navigate to my project folder using cd command prompt

- type in composer inside cdm to be sure its installed

- if yes then type composer require ../the extension u intended to install

Adding days to $Date in PHP

Istari

[Adding days to $Date in PHP](https://stackoverflow.com/questions/3727615/adding-days-to-date-in-php)

I have a date returned as part of a mySQL query in the form 2010-09-17I would like to set the variables $Date2 to $Date5 as follows:$Date2 = $Date + 1$Date3 = $Date + 2etc..so that it returns 2010-09-18, 2010-09-19 etc...I have tried but this gives me the date BEFORE $Date.What is the correct way to get my Dates in the format form 'Y-m-d' so that they may be used in another query?

2010-09-16 14:23:07Z

I have a date returned as part of a mySQL query in the form 2010-09-17I would like to set the variables $Date2 to $Date5 as follows:$Date2 = $Date + 1$Date3 = $Date + 2etc..so that it returns 2010-09-18, 2010-09-19 etc...I have tried but this gives me the date BEFORE $Date.What is the correct way to get my Dates in the format form 'Y-m-d' so that they may be used in another query?All you have to do is use days instead of day like this:And it outputs correctly:If you're using PHP 5.3, you can use a DateTime object and its add method:Take a look at the DateInterval constructor manual page to see how to construct other periods to add to your date (2 days would be 'P2D', 3 would be 'P3D', and so on).Without PHP 5.3, you should be able to use strtotime the way you did it (I've tested it and it works in both 5.1.6 and 5.2.10):From PHP 5.2 on you can use modify with a DateTime object:http://php.net/manual/en/datetime.modify.phpBe careful when adding months... (and to a lesser extent, years)Here is a small snippet to demonstrate the date modifications:You can also use the following formatYou can stack changes this way:Note the difference between this approach and the one in other answers: instead of concatenating the values +1 day and <timestamp>, you can just pass in the timestamp as the second parameter of strtotime.Using a variable for Number of daysHere is the simplest solution to your queryHere has an easy way to solve this.Output will be:Solution has found from here - How to Add Days to Date in PHPAll have to use bellow code:

How do I extract data from JSON with PHP?

user3942918

[How do I extract data from JSON with PHP?](https://stackoverflow.com/questions/29308898/how-do-i-extract-data-from-json-with-php)

I have the JSON:How do I decode this in PHP and access the resulting data?

2015-03-27 19:38:46Z

I have the JSON:How do I decode this in PHP and access the resulting data?First off you have a string. JSON is not an array, an object, or a data structure. JSON is a text-based serialization format - so a fancy string, but still just a string. Decode it in PHP by using json_decode().Therein you might find:These are the things that can be encoded in JSON. Or more accurately, these are PHP's versions of the things that can be encoded in JSON.There's nothing special about them. They are not "JSON objects" or "JSON arrays." You've decoded the JSON - you now have basic everyday PHP types.Objects will be instances of stdClass, a built-in class which is just a generic thing that's not important here.You access the properties of one of these objects the same way you would for the public non-static properties of any other object, e.g. $object->property.You access the elements of one of these arrays the same way you would for any other array, e.g. $array[0].Iterate over it with foreach.Or mess about with any of the bazillion built-in array functions.The properties of objects and the elements of arrays might be more objects and/or arrays - you can simply continue to access their properties and members as usual, e.g. $object->array[0]->etc.When you do this, instead of objects you'll get associative arrays - arrays with strings for keys. Again you access the elements thereof as usual, e.g. $array['key'].When decoding a JSON object to an associative PHP array, you can iterate both keys and values using the foreach (array_expression as $key => $value) syntax, egPrintsRead the documentation for whatever it is you're getting the JSON from.Look at the JSON - where you see curly brackets {} expect an object, where you see square brackets [] expect an array.Hit the decoded data with a print_r():and check the output:It'll tell you where you have objects, where you have arrays, along with the names and values of their members.If you can only get so far into it before you get lost - go that far and hit that with print_r():Take a look at it in this handy interactive JSON explorer.Break the problem down into pieces that are easier to wrap your head around.This happens because either:If you need to change the max depth you're probably solving the wrong problem. Find out why you're getting such deeply nested data (e.g. the service you're querying that's generating the JSON has a bug) and get that to not happen.Sometimes you'll have an object property name that contains something like a hyphen - or at sign @ which can't be used in a literal identifier. Instead you can use a string literal within curly braces to address it.If you have an integer as property see: How to access object properties with names like integers? as reference.It's ridiculous but it happens - there's JSON encoded as a string within your JSON. Decode, access the string as usual, decode that, and eventually get to what you need.If your JSON is too large for json_decode() to handle at once things start to get tricky. See:See: Reference: all basic ways to sort arrays and data in PHP.You can use json_decode() to convert a json string to a PHP object/array.Eg.Input:Output:Few Points to remember:We can decode json string into array using json_decode function in php1) json_decode($json_string) // it returns object2) json_decode($json_string,true) // it returns arrayConsider using JSONPath https://packagist.org/packages/flow/jsonpathThere is a pretty clear explanation of how to use it and parse a JSON-file avoiding all the loops proposed. If you are familiar with XPath for XML you will start loving this approach. I have written a package named JSON (GitHub, Packagist). If you want to prevent overheads of using json_* functions, you should try it.See the wiki, or the quick tutorial to get familiar with it.Furthermore, if you want to read JSON files and extract its data (as it seems you're trying to perform this), see JSONFile package, which I have written it, too.https://paiza.io/projects/X1QjjBkA8mDo6oVh-J_63wCheck below code for converting json to array in PHP,

If JSON is correct then json_decode() works well, and will return an array,

But if malformed JSON, then It will return NULL,If malformed JSON, and you are expecting only array, then you can use this function,If malformed JSON, and you want to stop code execution, then you can use this function,You can use any function depends on your requirement,

How to Remove Array Element and Then Re-Index Array?

daGrevis

[How to Remove Array Element and Then Re-Index Array?](https://stackoverflow.com/questions/5217721/how-to-remove-array-element-and-then-re-index-array)

I have some troubles with an array. I have one array that I want to modify like below. I want to remove element (elements) of it by index and then re-index array. Is it possible?

2011-03-07 09:04:20Z

I have some troubles with an array. I have one array that I want to modify like below. I want to remove element (elements) of it by index and then re-index array. Is it possible?http://php.net/manual/en/function.array-splice.phpYou better use array_shift(). That will return the first element of the array, remove it from the array and re-index the array. All in one efficient method.I don't know why this is being downvoted, but if anyone has bothered to try it, you will notice that it works. 

Using sort on an array reassigns the keys of the the array. The only drawback is it sorts the values. 

Since the keys will obviously be reassigned, even with array_values, it does not matter is the values are being sorted or not.Try with:If you use array_merge, this will reindex the keys. The manual states: http://php.net/manual/en/function.array-merge.phpThis is where i found the original answer.http://board.phpbuilder.com/showthread.php?10299961-Reset-index-on-array-after-unset()In addition to xzyfer's answerThe functionUseResult

How do I get a PHP class constructor to call its parent's parent's constructor?

Paulo

[How do I get a PHP class constructor to call its parent's parent's constructor?](https://stackoverflow.com/questions/1557608/how-do-i-get-a-php-class-constructor-to-call-its-parents-parents-constructor)

I need to have a class constructor in PHP call its parent's parent's (grandparent?) constructor without calling the parent constructor.I know this is a bizarre thing to do and I'm attempting to find a means that doesn't smell bad but nonetheless, I'm curious if it's possible.

2009-10-13 00:09:04Z

I need to have a class constructor in PHP call its parent's parent's (grandparent?) constructor without calling the parent constructor.I know this is a bizarre thing to do and I'm attempting to find a means that doesn't smell bad but nonetheless, I'm curious if it's possible.The ugly workaround would be to pass a boolean param to Papa indicating that you do not wish to parse the code contained in it's constructor.  i.e:You must use Grandpa::__construct(), there's no other shortcut for it. Also, this ruins the encapsulation of the Papa class - when reading or working on Papa, it should be safe to assume that the __construct() method will be called during construction, but the Kiddo class does not do this.Beautiful solution using Reflection.I ended up coming up with an alternative solution that solved the problem.I've upvoted the other two answers that provided valid yet ugly solutions for an uglier question:)Another option that doesn't use a flag and might work in your situation:I agree with "too much php", try this:I got the result as expected:This is a feature not a bug, check this for your reference:https://bugs.php.net/bug.php?id=42016parent::method() works in the same way, you don't have to define the method as static but it can be called in the same context. Try this out for more interesting:It also works as expected:But if you try to initialize a new Papa, you will get an E_STRICT error:You can use instanceof to determine if you can call a Children::method() in a parent method:There's an easier solution for this, but it requires that you know exactly how much inheritance your current class has gone through.  Fortunately, get_parent_class()'s arguments allow your class array member to be the class name as a string as well as an instance itself.Bear in mind that this also inherently relies on calling a class' __construct() method statically, though within the instanced scope of an inheriting object the difference in this particular case is negligible (ah, PHP).Consider the following:Again, this isn't a viable solution for a situation where you have no idea how much inheritance has taken place, due to the limitations of debug_backtrace(), but in controlled circumstances, it works as intended.You can call Grandpa::__construct from where you want and the $this keyword will refer to your current class instance. But be carefull with this method you cannot access to protected properties and methods of current instance from this other context, only to public elements. => All work and officialy supported.ExampleFunny detail about php: extended classes can use non-static functions of a parent class in a static matter. Outside you will get a strict error.So inside a extended class (Child) you can use or to access a parent (or grandPa's) (not private) function. Outside class def will trow strict error (non static function).Ok, Yet another ugly solution:Create a function in Papa like:Then in Kiddo you use:parent::call2Granpa(); //instead of calling constructor in Papa.I think it could work... I haven't test it, so I'm not sure if the

objects are created correctly. I used this approach but with non-constructor functions. Of course this expects you do not need to do anything within the construct of the pa_pa. Running this will output :Hey I am Grand Pa

Hey I am a childnote that "___construct" is not some magic name, you can call it "doGrandpaStuff".from php 7 u can use parent::parent::__construct();

What is the difference between is_a and instanceof?

Daniel

[What is the difference between is_a and instanceof?](https://stackoverflow.com/questions/3017684/what-is-the-difference-between-is-a-and-instanceof)

I am aware that instanceof is an operator and that is_a is a method.Is the method slower in performance? What would you prefer to use?

2010-06-10 19:19:05Z

I am aware that instanceof is an operator and that is_a is a method.Is the method slower in performance? What would you prefer to use?UpdateAs of PHP 5.3.9, the functionality of is_a() has changed. The original answer below states that is_a() must accept an Object as the first argument, but PHP versions >= 5.3.9 now accept an optional third boolean argument $allow_string (defaults to false) to allow comparisons of string class names instead:The key difference in the new behavior between instanceof and is_a() is that instanceof will always check that the target is an instantiated object of the specified class (including extending classes), whereas is_a() only requires that the object be instantiated when the $allow_string argument is set to the default value of false.OriginalActually, is_a is a function, whereas instanceof is a language construct.  is_a will be significantly slower (since it has all the overhead of executing a function call), but the overall execution time is minimal in either method.It's no longer deprecated as of 5.3, so there's no worry there.There is one difference however.  is_a being a function takes an object as parameter 1, and a string (variable, constant, or literal) as parameter 2. So:instanceof takes an object as parameter 1, and can take a class name (variable), object instance (variable), or class identifier (class name written without quotes) as parameter 2.Here is performance results of is_a() and instanceof:Test source is here.instanceof can be used with other object instances, the class's name, or an interface. I don't think that is_a() works with interfaces (only a string representing a class name), but correct me if it does. (Update: See https://gist.github.com/1455148)Example from php.net:outputs:In regards to ChrisF's answer, is_a() is no longer deprecated as of PHP 5.3.0. I find it's always safer to go by the official source for things like this.With regards to your question, Daniel, I can't say about the performance differences, but part of it will come down to readibility and which you find easier to work with.Also, there is some discussion about the confusion around negating an instanceof check vs is_a(). For example, for instanceof you would do:vs the following for is_a():orEdit Looks like ChrisF deleted his answer, but the first part of my answer still stands.Besides the speed, another important difference is how they handle edge cases. So, is_a() highlights possible bugs while instanceof suppresses them. The optimisation is minimal. And micro-optimisations are never a real good answer, in front of the readability, understandability and stability of the code.( personaly I prefere instanceof, but the choice is yours ;) )The principal difference is the possibility to use direct class name with instanceofis shorter than( ok… it’s not trivial. )The syntaxical coloration between instanceof (language structure) and is_a is usefull too (for me). letting function color to bigger operations.

And for single use in if, instanceof dosn’t need more parenthesis.Note :

Of course instead of MyClass::class you can use a shorter direct string : But use direct string in a code isn’t a good practice.The syntaxical colloration is better and more usefull if you can make a difference between simple string and classes names.

And it's easier to change names with constant classname. Specialy if you use namespace with alias.So, wy use is_a() ?For same raison : readability and undestandability. (the choice is yours)

Specialy when used with ! or others boolean operators : is_a seems more pratical with parenthesis.is more readable than :An other good reason is when you need use callback in functions. ( like array_map … )

instanceof isn’t a function, it’s a language construct, so you cannot use it as callback.In thoses cases, is_a may be usefullI can't speak for performance -- I haven't measured anything yet -- but depending on what you are attempting, there are limitations with instanceof.  Check out my question, just recently, about it:PHP 'instanceof' failing with class constantI've ended up using is_a instead.  I like the structure of instanceof better (I think it reads nicer) and will continue to use it where I can.Here are performance results obtained from here:instanceof is faster.FunctionsTimes (run 5000 times each)There is a scenario where only is_a() works and instanceof will fail.instanceof expects a literal class name or a variable that is either an object or a string (with the name of a class) as its right argument.But if you want to provide the string of a class name from a function call it will not work and result in a syntax error.However, the same scenario works fine with is_a().Example:This is based on PHP 7.2.14.

How to increase maximum execution time in php [duplicate]

Pritesh Mahajan

[How to increase maximum execution time in php [duplicate]](https://stackoverflow.com/questions/16171132/how-to-increase-maximum-execution-time-in-php)

I want to increase maximum execution time in php , not by changing php.ini file. I want to Increase it from my php file.Is this possible?

2013-04-23 13:51:58Z

I want to increase maximum execution time in php , not by changing php.ini file. I want to Increase it from my php file.Is this possible?Place this at the top of your PHP script and let your script loose!Taken from Increase PHP Script Execution Time Limit Using ini_set()use below statement if safe_mode is offUse the PHP functionThe maximum execution time, in seconds. If set to zero, no time limit is imposed.You can try to set_time_limit(n). However, if your PHP setup is running in safe mode, you can only change it from the php.ini file.

PHP prepend leading zero before single digit number, on-the-fly [duplicate]

Ben

[PHP prepend leading zero before single digit number, on-the-fly [duplicate]](https://stackoverflow.com/questions/5659042/php-prepend-leading-zero-before-single-digit-number-on-the-fly)

PHP - Is there a quick, on-the-fly method to test for a single character string, then prepend a leading zero?Example:

2011-04-14 05:44:23Z

PHP - Is there a quick, on-the-fly method to test for a single character string, then prepend a leading zero?Example:You can use sprintf: http://php.net/manual/en/function.sprintf.phpIt will only add the zero if it's less than the required number of characters.Edit: As pointed out by @FelipeAls:When working with numbers, you should use %d (rather than %s), especially when there is the potential for negative numbers. If you're only using positive numbers, either option works fine.For example:sprintf("%04s", 10); returns 0010

sprintf("%04s", -10); returns 0-10Where as:sprintf("%04d", 10); returns  0010

sprintf("%04d", -10); returns -010You can use str_pad for adding 0'sstring str_pad ( string $input , int $pad_length [, string $pad_string = " " [, int $pad_type = STR_PAD_RIGHT ]] )The universal tool for string formatting, sprintf:http://php.net/manual/en/function.sprintf.php

How to get a variable name as a string in PHP?

Gary Willoughby

[How to get a variable name as a string in PHP?](https://stackoverflow.com/questions/255312/how-to-get-a-variable-name-as-a-string-in-php)

Say i have this PHP code:i then need a function like this:which prints:Any Ideas how to achieve this? Is this even possible in PHP?

2008-11-01 00:28:31Z

Say i have this PHP code:i then need a function like this:which prints:Any Ideas how to achieve this? Is this even possible in PHP?You could use get_defined_vars() to find the name of a variable that has the same value as the one you're trying to find the name of. Obviously this will not always work, since different variables often have the same values, but it's the only way I can think of to do this.Edit: get_defined_vars() doesn't seem to be working correctly, it returns 'var' because $var is used in the function itself. $GLOBALS seems to work so I've changed it to that.Edit: to be clear, there is no good way to do this in PHP, which is probably because you shouldn't have to do it. There are probably better ways of doing what you're trying to do.I couldn't think of a way to do this efficiently either but I came up with this. It works, for the limited uses below. shrugIt works based on the line that called the function, where it finds the argument you passed in. I suppose it could be expanded to work with multiple arguments but, like others have said, if you could explain the situation better, another solution would probably work better.You might consider changing your approach and using a variable variable name?then you could just to get Here's the link to the PHP manual on Variable variablesNo-one seems to have mentioned the fundamental reasons why this is a) hard and b) unwise:Now, I understand the desire for this for debugging (although some of the proposed usages go far beyond that), but as a generalised solution it's not actually as helpful as you might think: if your debug function says your variable is called "$file", that could still be any one of dozens of "$file" variables in your code, or a variable which you have called "$filename" but are passing to a function whose parameter is called "$file".A far more useful piece of information is where in your code the debug function was called from. Since you can quickly find this in your editor, you can see which variable you were outputting for yourself, and can even pass whole expressions into it in one go (e.g. debug('$foo + $bar = ' . ($foo + $bar))).For that, you can use this snippet at the top of your debug function:This is exactly what you want - its a ready to use "copy and drop in" function that echo the name of a given var:USAGE: print_var_name($FooBar)PRINT: FooBarLucas on PHP.net provided a reliable way to check if a variable exists. In his example, he iterates through a copy of the global variable array (or a scoped array) of variables, changes the value to a randomly generated value, and checks for the generated value in the copied array. Then try:Be sure to check his post on PHP.net: http://php.net/manual/en/language.variables.phpI made an inspection function for debugging reasons.  It's like print_r() on steroids, much like Krumo but a little more effective on objects.  I wanted to add the var name detection and came out with this, inspired by Nick Presta's post on this page.  It detects any expression passed as an argument, not only variable names.  This is only the wrapper function that detects the passed expression.

Works on most of the cases. 

It will not work if you call the function more than once in the same line of code.This works fine:

 die(inspect($this->getUser()->hasCredential("delete")));inspect() is the function that will detect the passed expression.We get:      $this->getUser()->hasCredential("delete")Here's an example of the inspector function (and my dInspect class) in action:http://inspect.ip1.ccTexts are in spanish in that page, but code is concise and really easy to understand.From php.net@Alexandre - short solution@Lucas - usageMany replies question the usefulness of this. However, getting a reference for a variable can be very useful. Especially in cases with objects and $this. My solution works with objects, and as property defined objects as well:Example for the above:Adapted from answers above for many variables, with good performance, just one $GLOBALS scan for manyIf the variable is interchangable, you must have logic somewhere that's determining which variable gets used. All you need to do is put the variable name in $variable within that logic while you're doing everything else.I think we're all having a hard time understanding what you're needing this for. Sample code or an explanation of what you're actually trying to do might help, but I suspect you're way, way overthinking this.I actually have a valid use case for this.I have a function cacheVariable($var) (ok, I have a function cache($key, $value), but I'd like to have a function as mentioned).The purpose is to do:......I have tried with I have also tried withBut this fails as well... :(Sure, I could continue to do cache('colour', $colour), but I'm lazy, you know... ;)So, what I want is a function that gets the ORIGINAL name of a variable, as it was passed to a function. Inside the function there is no way I'm able to know that, as it seems. Passing get_defined_vars() by reference in the second example above helped me (Thanks to Jean-Jacques Guegan for that idea) somewhat. The latter function started working, but it still only kept returning the local variable ('variable', not 'colour'). I haven't tried yet to use get_func_args() and get_func_arg(), ${}-constructs and key() combined, but I presume it will fail as well.I have this:I would prefer this:The existing function displays a yellow box with a red outline and shows each variable by name and value. The array solution works but is a little convoluted to type when it is needed.That's my use case and yes, it does have to do with debugging. I agree with those who question its use otherwise.Here's my solution based on Jeremy Rutenusing itWhy don't you just build a simple function and TELL it?I was looking for this but just decided to pass the name in, I usually have the name in the clipboard anyway.You could use compact() to achieve this.This would create an associative array with the variable name as the key.  You could then loop through the array using the key name where you needed it.I think you want to know variable name with it's value. You can use an associative array to achieve this.use variable names for array keys:When you want to get variable names, use array_keys($vars), it will return an array of those variable names that used in your $vars array as it's keys.Use this to detach user variables from global to check variable at the moment.  It may be considered quick and dirty, but my own personal preference is to use a function/method like this:basically it just creates an associative array containing one null/empty element, using as a key the variable for which you want the name.we then get the value of that key using array_keys and return it.obviously this gets messy quick and wouldn't be desirable in a production environment, but it works for the problem presented.why we have to use globals to get variable name... we can use simply like below.I really fail to see the use case... If you will type print_var_name($foobar) what's so hard (and different) about typing print("foobar") instead? Because even if you were to use this in a function, you'd get the local name of the variable...In any case, here's the reflection manual in case there's something you need in there.

Get the first N elements of an array?

GSto

[Get the first N elements of an array?](https://stackoverflow.com/questions/3720096/get-the-first-n-elements-of-an-array)

What is the best way to accomplish this?

2010-09-15 17:20:46Z

What is the best way to accomplish this?Use array_slice()   This is an example from the PHP manual: array_sliceThere is only a small issueIf the array indices are meaningful to you, remember that array_slice will reset and reorder the numeric array indices. You need the preserve_keys flag set to trueto avoid this. (4th parameter, available since 5.0.2).Example:Output:You can use array_slice as:In the current order? I'd say array_slice(). Since it's a built in function it will be faster than looping through the array while keeping track of an incrementing index until N.array_slice() is best thing to try, following are the examples: if you want to get the first N elements and also remove it from the array, you can use array_splice() (note the 'p' in "splice"):http://docs.php.net/manual/da/function.array-splice.phpuse it like so: $array_without_n_elements = array_splice($old_array, 0, N)

Getting the location from an IP address

Ben Dowling

[Getting the location from an IP address](https://stackoverflow.com/questions/409999/getting-the-location-from-an-ip-address)

I want to retrieve information like the city, state, and country of a visitor from their IP address, so that I can customize my web page according to their location. Is there a good and reliable way to do this in PHP? I am using JavaScript for client-side scripting, PHP for server-side scripting, and MySQL for the database.

2009-01-03 22:27:01Z

I want to retrieve information like the city, state, and country of a visitor from their IP address, so that I can customize my web page according to their location. Is there a good and reliable way to do this in PHP? I am using JavaScript for client-side scripting, PHP for server-side scripting, and MySQL for the database.You could download a free GeoIP database and lookup the IP address locally, or you could use a third party service and perform a remote lookup. This is the simpler option, as it requires no setup, but it does introduce additional latency. One third party service you could use is mine, http://ipinfo.io. They provide hostname, geolocation, network owner and additional information, eg:Here's a PHP example:You can also use it client-side. Here's a simple jQuery example:Thought I'd post as nobody seems to have given info on this particular API, but its returning exactly what I'm after and you can get it to return in multiple formats, json, xml and csv.This will give you all of the things you could possibly want:A pure Javascript example, using the services of https://geolocation-db.com They provide a JSON and JSONP-callback solution.No jQuery required!You need to use an external service... such as http://www.hostip.info/ if you google search for "geo-ip" you can get more results.The Host-IP API is HTTP based so you can use it either in PHP or JavaScript depending on your needs.Using Google APIS:I wrote a bot using an API from ipapi.co, here's how you can get location for an IP address (e.g. 1.2.3.4) in php : Set header : Get JSON responseof get a specific field (country, timezone etc.)This question is protected, which I understand. However, I do not see an answer here, what I see is a lot of people showing what they came up with from having the same question.There are currently five Regional Internet Registries with varying degrees of functionality that serve as the first point of contact with regard to IP ownership. The process is in flux, which is why the various services here work sometimes and don't at other times.Who Is is (obviously) an ancient TCP protocol, however -- the way it worked originally was by connection to port 43, which makes it problematic getting it routed through leased connections, through firewalls...etc.At this moment -- most Who Is is done via RESTful HTTP and ARIN, RIPE and APNIC have RESTful services that work. LACNIC's returns a 503 and AfriNIC apparently has no such API. (All have online services, however.)That will get you -- the address of the IP's registered owner, but -- not your client's location -- you must get that from them and also -- you have to ask for it. Also, proxies are the least of your worries when validating the IP that you think is the originator.People do not appreciate the notion that they are being tracked, so -- my thoughts are -- get it from your client directly and with their permission and expect a lot to balk at the notion.Look at the API from hostip.info - it provides lots of information.

Example in PHP:If you trust hostip.info, it seems to be a very useful API.Assuming you want to do it yourself and not rely upon other providers, IP2Nation provides a MySQL database of the mappings which are updated as the regional registries change things around.I like the free GeoLite City from Maxmind which works for most

applications and from which you can upgrade to a paying version if it's not precise enough. There is a PHP API included, as well as for other languages. And if you are running Lighttpd as a webserver, you can even use a module to get the information in the SERVER variable for every visitor if that's what you need.I should add there is also a free Geolite Country (which would be faster if you don't need to pinpoint the city the IP is from) and Geolite ASN (if you want to know who owns the IP) and that finally all these are downloadable on your own server, are updated every month and are pretty quick to lookup with the provided APIs as they state "thousands of lookups per second".PHP has an extension for that.From PHP.net:For example:The service in Ben Dowling's response has changed, so it's now simpler. To find the location, simply do:The coordinates return in a single string like '31,-80', so from there you just:I run the service at IPLocate.io, which you can hook into for free with one easy call:The $res object will contain your geolocation fields like country, city, etc.Check out the docs for more information.Ipdata.co is a fast, highly available IP Geolocation API with reliable performance.It's extremely scalable with 10 endpoints around the world each able to handle >10,000 requests per second!In phpHere's a client-side example showing how you'd get the country, region and city;Disclaimer;I built the service. For examples in multiple languages see the DocsAlso see this detailed analysis of the best IP Geolocation APIs.In case anyone stumbles upon this thread, here's another solution. At timezoneapi.io you can request an IP address and get several objects in return (I've created the service). It was created because I needed to know which timezone my users were in, where in the world and what time it currently is.In PHP - returns location, timezone and date/time:Using jQuery:The following is a modified version of a snippet I found that uses http://ipinfodb.com/ip_locator.php to get its information. Keep in mind, you can also apply for an API key with them and use the API directly to get the information supplied as you see fit.If you need to get location from an IP address you can use reliable geo ip service, you can get more detail here. It supports IPv6.As a bonus it allows to check whether ip address is a tor node, public proxy or spammer. You can use javascript or php as below.Javascript Code:Php Code:Output:I've created a wrapper for ipinfo.io. You can install it using composer.You can use it in this way:You can also use "smart-ip" service:I've done a bunch of testing with IP address services and here are a few ways I do it myself.

First off a bunch off links to useful websites that I use:https://db-ip.com/db 

Has a free ip-lookup service and has a few free csv files you can 

download. This uses a free api key that is attached to your email. It limits at 2000 queries per day.http://ipinfo.io/

Free ip-lookup service without a api-key

PHP functions:In the end you get something like this:http://www.geoplugin.com/

Slightly older but this service gives you a bunch of extra usefull information such as the currency off the country, continent code, longitude and more.http://lite.ip2location.com/database-ip-country-region-city-latitude-longitude

Offers a bunch of downloadable files with instructions to import them into your database.

Once you have one off these files in your database you can select the data fairly easily.Use the php function ip2long(); to turn the ip-address into a numeric value. For example 1.1.1.1 becomes 16843009. This lets you scan for the ip ranges given to you by the database file.So in order to find out where 1.1.1.1 belongs to all we do is run this query:This returns this data as a example.There 2 broad approaches to perform IP geolocation: one is to download a dataset, host it on your infrastructure and maintain it up-to-date. This requires time and effort, especially if you need to support a high number of requests. Another solution is to use an existing API service that manages all the work for you and more.There exist many API Geolocation services: Maxmind, Ip2location, Ipstack, IpInfo, etc. Recently, the company I work for has switched to Ipregistry (https://ipregistry.co) and I was involved in the decision and implementation process. Here are some elements you should consider while looking for an IP geolocation API:Here is an example to get IP geolocation information (but also threat and user agent data using one call):Note: I am not here to promote Ipregistry and say it's the best but I spent a long time analyzing existing solutions and their solution is really promising.If you're searching for an updated/accurate database I recommend to use this one here because it was showing my exact location which was not included in many other services when I was testing.

(My city was Rasht and my country was Iran with this ip address: 2.187.21.235 when I was testing.)I recommend to use database rather than API methods, because it will be processed much faster locally.Ok, guys, thanks for your suggestions;

While i have 6k+ of IPs, some services will failed my requests due to some limitations;

So, you could use them all in fallback mode;If we have source file with following format: than you could use this simple expample command (PoC) for Yii:This is some kind of shitty-code, but it works.

usage:Feel free to use, modify it, and do it better )

How to call a JavaScript function from PHP?

Zeeshan Rang

[How to call a JavaScript function from PHP?](https://stackoverflow.com/questions/1045845/how-to-call-a-javascript-function-from-php)

How to call a JavaScript function from PHP?The following code is from xyz.html (on a button click) it calls a wait() in an external xyz.js. This wait() calls wait.php.and wait.phpwhere loadxml() calls code from another PHP file the same way. The loadxml() is working fine otherwise, but it is not being called the way I want it.

2009-06-25 19:45:42Z

How to call a JavaScript function from PHP?The following code is from xyz.html (on a button click) it calls a wait() in an external xyz.js. This wait() calls wait.php.and wait.phpwhere loadxml() calls code from another PHP file the same way. The loadxml() is working fine otherwise, but it is not being called the way I want it.As far as PHP is concerned (or really, a web server in general), an HTML page is nothing more complicated than a big string.All the fancy work you can do with language like PHP - reading from databases and web services and all that - the ultimate end goal is the exact same basic principle: generate a string of HTML*.Your big HTML string doesn't become anything more special than that until it's loaded by a web browser. Once a browser loads the page, then all the other magic happens - layout, box model stuff, DOM generation, and many other things, including JavaScript execution.So, you don't "call JavaScript from PHP", you "include a JavaScript function call in your output".There are many ways to do this, but here are a couple.Using just PHP:Escaping from php mode to direct output mode:You don't need to return a function name or anything like that.  First of all, stop writing AJAX requests by hand.  You're only making it hard on yourself.  Get jQuery or one of the other excellent frameworks out there.Secondly, understand that you already are going to be executing javascript code once the response is received from the AJAX call.Here's an example of what I think you're doing with jQuery's AJAXNow, if you're dead-set on sending a function name from PHP back to the AJAX call, you can do that too.  * Or JSON or XML etc.I always just use  echo "<script> function(); </script>"; or something similar. you're not technically calling the function in PHP, but this as close as your going to get.Per now (February 2012) there's a new feature for this. Check hereCode sample (taken from the web):You can't.  You can call a JS function from HTML outputted by PHP, but that's a whole 'nother thing.Thats not possible. PHP is a Server side language and JavaScript client side and they don't really know a lot about each other. You would need a Server sided JavaScript Interpreter (like Aptanas Jaxer). Maybe what you actually want to do is to use an Ajax like Architecture (JavaScript function calls PHP script asynchronously and does something with the result).If you want to echo it out for later execution it's okIf you want to execute the JS and use the results in PHP use V8JSYou can refer here for further reference:

What are Extensions in php v8js?If you want to execute HTML&JS and use the output in PHP http://htmlunit.sourceforge.net/ is your solutionPHP runs in the server. JavaScript runs in the client. So php can't call a JavaScript function.you can try this one also:-try like this You may not be able to directly do this, but the Xajax library is pretty close to what you want. I will demonstrate with an example. Here's a button on a webpage:Our intuitive guess would be that xajax_addCity() is a Javascript function, right? Well, right and wrong. The cool thing Xajax allows is that we don't have any JS function called xajax_addCity(), but what we do have is a PHP function called addCity() that can do whatever PHP does! Think about it for a minute. We are virtually invoking a PHP function from Javascript code!

That over-simplified example was just to whet the appetite, a better explanation is on the Xajax site, have fun!

PHP Get Site URL Protocol - http vs https

profitphp

[PHP Get Site URL Protocol - http vs https](https://stackoverflow.com/questions/4503135/php-get-site-url-protocol-http-vs-https)

I've written a little function to establish the current site url protocol but I don't have SSL and don't know how to test if it works under https. Can you tell me if this is correct?Is it necessary to do it like above or can I just do it like?:Under SSL, doesn't the server automatically convert the url to https even if the anchor tag url is using http? Is it necessary to check for the protocol?Thank you!

2010-12-21 19:30:18Z

I've written a little function to establish the current site url protocol but I don't have SSL and don't know how to test if it works under https. Can you tell me if this is correct?Is it necessary to do it like above or can I just do it like?:Under SSL, doesn't the server automatically convert the url to https even if the anchor tag url is using http? Is it necessary to check for the protocol?Thank you!It is not automatic.  Your top function looks ok.I know it's late, although there is a much more convenient way to solve this kind of problem! The other solutions are quite messy; this is how I would do it:...or even without condition if you prefer:Have a look at $_SERVER["SERVER_PROTOCOL"]This works for meSome changes:short wayBecause testing port number is not a good practice according to me, my solution is:The HTTPSconstant returns TRUE if $_SERVER['HTTPS'] is set and equals to "1", "true", "on" or "yes".

Returns FALSE otherwise.For any system except IIS this is quite enough to define site self URL:or depends on what you exactly want:

HTTP_HOST vs. SERVER_NAMEIn case of proxy the SERVER_PORT may not give the correct value so this is what worked for me -Use this server variable to get the protocol details:Note that this server variable is unreliable. For more information take a look at:

Is $_SERVER['REQUEST_SCHEME'] reliable?I know this is an old question but I came across this today since I needed to test for this in my site.  It seems the answers above are needlessly complicated.  To establish the site protocol, all you have to do is test $_SERVER['HTTPS']If the protocol is using HTTPS, then $_SERVER['HTTPS'] will return 'on'.  If not, the variable will remain empty.

For example:

//  test if HTTPS is being used.  If it is, the echo will return '$SSL_test: on'.  If not HTTPS, '$SSL_test' will remain empty.$SSL_test = $_SERVER['HTTPS'];

You can use the above to easily and cleanly test for HTTPS and implement accordingly.    :)  made a function using the Rid Iculous's answer which worked on my system.Hope it helpsI've tested the most voted answer and it didn't work for me, I ended up using:Extracted from CodeIgniter :it's the best solution of https or http use this :But can't display https or http, so it only use to link your site content like image, etc.if want to redirect your site in https, add this code in .htaccess file :Change www.your-domain.com with your dowmain name.Here is how I do it ... it is a shorthand if else version of Rid Iculous's answer ...I think the complete func should look like :Notes: I know I'm a bit late to this party, but if you much prefer not using $_SERVER as it's strongly discouraged, and even deactivated on some PHP frameworks; and you have an apache web server, you can use it's native command thusly: -

How to trigger XDebug profiler for a command line PHP script?

selfawaresoup

[How to trigger XDebug profiler for a command line PHP script?](https://stackoverflow.com/questions/2288612/how-to-trigger-xdebug-profiler-for-a-command-line-php-script)

XDebug offers the configuration directive "xdebug.profiler_enable_trigger" that allows to activate profiling by passing the GET or POST parameter "XDEBUG_PROFILE" when calling a script via HTTP. This is handy if you don't want profiling for ALL of your scripts but only for a few special cases without always changing your PHP configuration.Is there a way to achieve the same behavior for command line PHP programs? I tried to pass the "XDEBUG_PROFILE" as a command line argument but it didn't work.In general, profiling command line PHP works well, but I'd like to have the same per-call-flexibility as with a browser and HTTP server.Any suggestions?

2010-02-18 12:40:13Z

XDebug offers the configuration directive "xdebug.profiler_enable_trigger" that allows to activate profiling by passing the GET or POST parameter "XDEBUG_PROFILE" when calling a script via HTTP. This is handy if you don't want profiling for ALL of your scripts but only for a few special cases without always changing your PHP configuration.Is there a way to achieve the same behavior for command line PHP programs? I tried to pass the "XDEBUG_PROFILE" as a command line argument but it didn't work.In general, profiling command line PHP works well, but I'd like to have the same per-call-flexibility as with a browser and HTTP server.Any suggestions?You can pass INI settings with the -d flag: php -d xdebug.profiler_enable=On script.php.I got this working on Ubuntu/Netbeans by:Then it's simply a case of starting debugging in netbeans and doing "php myscript.php" at the command line.with PhpStorm on remote webserver i use this command:

where server_name stands for name of the server in PhpStorm project conifugurationAs described on the Xdebug Remote Debugging page, profiling can also be enabled via the XDEBUG_CONFIG environment variable by inluding a "profile_enable=1" directive:Similar, but different process for getting it to work with Netbeans while developing on a VM. Need to pass in the remote enabled flag, the auto start flag, the ide flag, and the name of your remote host. I created a shell script to handle client debugging.script name: phpdebugI placed this script in /usr/bin and gave it execute permissions. The script takes the arguments passed into phpdebug and calls php with the xdebug arguments and appends the arguments passed into the shell script, the $* on the end.In PhpStorm 7 using WAMP I got this to work by copying my already working xdebug settings from C:\wamp\bin\apache\apache2.2.22\bin\php.ini to the xdebug section of C:\wamp\bin\php\phpX.Y.Z\php.ini. Then I ran my script like so:This even worked for debugging laravel artisan scriptsDocumentation from JetbrainsTo start the script with debugging using PHP command line switches

Set an environment variable that would tell XDebug to connect to IDE:Windows / MacOS / Linux  Here idekey should have a random value.Launch PHP with the following command-line options:You may use 10.0.2.2 instead of 127.0.0.1 with Vagrant (see related SO question).

PHP, get file name without file extension

Mostafa Elkady

[PHP, get file name without file extension](https://stackoverflow.com/questions/2183486/php-get-file-name-without-file-extension)

I have this PHP code:If I have a file named my.zip, this function returns .zip.I want to do the reverse, I want the function to return my without the extension.The file is just a string in a variable.

2010-02-02 11:10:29Z

I have this PHP code:If I have a file named my.zip, this function returns .zip.I want to do the reverse, I want the function to return my without the extension.The file is just a string in a variable.No need for all that. Check out pathinfo(), it gives you all the components of your path.Example from the manual:Output of the code:And alternatively you can get only certain parts like:As an alternative to pathinfo(), you can useExample from PHP manualYou have to know the extension to remove it in advance though.However, since your question suggests you have the need for getting the extension and the basename, I'd vote Pekka's answer as the most useful one, because it will give you any info you'd want about the path and file with one single native function.https://php.net/manual/en/function.pathinfo.phpSimple functional test: https://ideone.com/POhIDCAnother approach is by using regular expressions.This removes from the last period . up until the end of the string.If the extension is not known, use this solutionPHP MAN function pathinfo@Gordon basename will work fine if you know the extension, if you dont you can use explode:Almost all the above solution have the shown getting filename from variable $pathBelow snippet will get the current executed file name without extensionExplanationThere is no need to write lots of code. Even it can be done just by one line of code. See hereBelow is the one line code that returns the filename only and removes extension name:It will printSource: Remove extension and return only file name in PHP@fire incase the filename uses dots, you could get the wrong output.

I would use @Gordon method but get the extension too, so the basename function works with all extensions, like this:in my case, i use below. I don't care what is its extention. :D

i think it will help youYou can write thisThese will return current element of array, if not used before.Short File name without file extension when you don't know that extension:$basename = substr($filename, 0, strrpos($filename, "."));If you don't know which extension you have, then you can try this:Working with all possibilities: Your answer is below the perfect solution to hide to file extension in php.This return only filename without any extension in 1 row:The existing solutions fail when there are multiple parts to an extension. The function below works for multiple parts, a full path or just a a filename:

How can I send a Firebase Cloud Messaging notification without use the Firebase Console?

David Corral

[How can I send a Firebase Cloud Messaging notification without use the Firebase Console?](https://stackoverflow.com/questions/37371990/how-can-i-send-a-firebase-cloud-messaging-notification-without-use-the-firebase)

I'm starting with the new Google service for the notifications, Firebase Cloud Messaging. Thanks to this code https://github.com/firebase/quickstart-android/tree/master/messaging I was able to send notifications from my Firebase User Console to my Android device.Is there any API or way to send a notification without use the Firebase console? I mean, for example, a PHP API or something like that, to create notifications from my own server directly.

2016-05-22 08:11:50Z

I'm starting with the new Google service for the notifications, Firebase Cloud Messaging. Thanks to this code https://github.com/firebase/quickstart-android/tree/master/messaging I was able to send notifications from my Firebase User Console to my Android device.Is there any API or way to send a notification without use the Firebase console? I mean, for example, a PHP API or something like that, to create notifications from my own server directly.Firebase Cloud Messaging has a server-side APIs that you can call to send messages. See https://firebase.google.com/docs/cloud-messaging/server. Sending a message can be as simple as using curl to call a HTTP end-point. See https://firebase.google.com/docs/cloud-messaging/server#implementing-http-connection-server-protocolThis works using CURL$message is your message to send to the device$id is the devices registration tokenYOUR_KEY_HERE is your Server API Key (or Legacy Server API Key)Use a service api.URL: https://fcm.googleapis.com/fcm/sendMethod Type: POSTHeaders: Body/Payload:And with this in your app you can add below code in your activity to be called:Also check the answer on Firebase onMessageReceived not called when app in background Send messages to specific devicesTo send messages to specific devices, set the  to the registration token for the specific app instanceSend messages to topicshere the topic is : /topics/foo-barSend messages to device groupsSending messages to a device group is very similar to sending messages to an individual device. Set the to parameter to the unique notification key for the device groupAPI URL : https://fcm.googleapis.com/fcm/sendHeadersRequest Method : POSTRequest Body Messages to specific devicesMessages to topicsMessages to device groupsAs mentioned by Frank, you can use Firebase Cloud Messaging (FCM) HTTP API to trigger push notification from your own back-end. But you won't be able to Meaning: you'll have to store FCM/GCM registration ids (push tokens) yourself or use FCM topics to subscribe users. Keep also in mind that FCM is not an API for Firebase Notifications, it's a lower-level API without scheduling or open-rate analytics. Firebase Notifications is build on top on FCM.First you need to get a token from android and then you can call this php code and you can even send data for further actions in your app. You can use for example a PHP script for Google Cloud Messaging (GCM). Firebase, and its console, is just on top of GCM.I found this one on github:

https://gist.github.com/prime31/5675017Hint: This PHP script results in a android notification.Therefore: Read this answer from Koot if you want to receive and show the notification in Android. Notification or data message can be sent to firebase base cloud messaging server using FCM HTTP v1 API endpoint.

https://fcm.googleapis.com/v1/projects/zoftino-stores/messages:send.You need to generate and download private key of service account using Firebase console and generate access key using google api client library. Use any http library to post message to above end point, below code shows posting message using OkHTTP. You can find complete server side and client side code at firebase cloud messaging and sending messages to multiple clients using fcm topic exampleIf a specific client message needs to sent, you need to get firebase registration key of the client, see sending client or device specific messages to FCM server exampleIf you want to send push notifications from android check out my blog post Send Push Notifications from 1 android phone to another with out server.sending push notification is nothing but a post request  to https://fcm.googleapis.com/fcm/sendcode snippet using volley:I suggest you all to check out my blog post for complete details. Using Firebase Console you can send message to all users based on application package.But with CURL or PHP API its not possible.Through API You can send notification to specific device ID or subscribed users to selected topic or subscribed topic users. Or you can use Firebase cloud functions, which is for me the easier way to implement your push notifications.

firebase/functions-samplesIf you're using PHP, I recommend using the PHP SDK for Firebase: Firebase Admin SDK. For an easy configuration you can follow these steps:Get the project credentials json file from Firebase (Initialize the sdk) and include it in your project.Install the SDK in your project. I use composer:Try any example from the Cloud Messaging session in the SDK documentation:

PHP/MySQL insert row then get 'id'

Hintswen

[PHP/MySQL insert row then get 'id'](https://stackoverflow.com/questions/897356/php-mysql-insert-row-then-get-id)

The 'id' field of my table auto increases when I insert a row. I want to insert a row and then get that ID.I would do it just as I said it, but is there a way I can do it without worrying about the time between inserting the row and getting the id?I know I can query the database for the row that matches the information that was entered, but there is a high change there will be duplicates, with the only difference being the id.

2009-05-22 11:07:02Z

The 'id' field of my table auto increases when I insert a row. I want to insert a row and then get that ID.I would do it just as I said it, but is there a way I can do it without worrying about the time between inserting the row and getting the id?I know I can query the database for the row that matches the information that was entered, but there is a high change there will be duplicates, with the only difference being the id.See mysqli_insert_id().Whatever you do, don't insert and then do a "SELECT MAX(id) FROM mytable". Like you say, it's a race condition and there's no need. mysqli_insert_id() already has this functionality.The MySQL function LAST_INSERT_ID() does just what you need: it retrieves the id that was inserted during this session. So it is safe to use, even if there are other processes (other people calling the exact same script, for example) inserting values into the same table.The PHP function mysql_insert_id() does the same as calling SELECT LAST_INSERT_ID() with mysql_query().As to PHP's website, mysql_insert_id is now deprecated and we must use PDO. To do this with PDO, proceed as following:As @NaturalBornCamper said, mysql_insert_id is now deprecated and should not be used. The options are now to use  either PDO or mysqli. NaturalBornCamper explained PDO in his answer, so I'll show how to do it with MySQLi (MySQL Improved) using mysqli_insert_id.Check out the PHP documentation for more examples: http://php.net/manual/en/mysqli.insert-id.phpI just want to add a small detail concerning lastInsertId();When entering more than one row at the time, it does not return the last Id, but the first Id of the collection of last inserts.Consider the following exampleWhat happens here is that I push in my_table two new rows. The id of the table is auto-increment. Here, for the same user, I add two rows with a different varNumb.The echoed value at the end will be equal to the id of the row where varNumb=1, which means not the id of the last row, but the id of the first row that was added in the last request.An example.  The code line $course_id = $query_new->insert_id; will display the ID of the last inserted row. 

Hope this helps. Try like this you can get the answer:Have a look at following links:http://www.w3schools.com/php/func_mysqli_insert_id.asphttp://php.net/manual/en/function.mysql-insert-id.phpAlso please have a note that this extension was deprecated in PHP 5.5 and removed in PHP 7.0I found an answer in the above link http://php.net/manual/en/function.mysql-insert-id.phpThe answer is:Try this... it worked for me!Another possible answer will be:When you define the table, with the columns and data it'll have. The column id can have the property AUTO_INCREMENT.By this method, you don't have to worry about the id, it'll be made automatically.For example (taken from w3schools )Hope this will be helpful for someone.Edit: This is only the part where you define how to generate an automatic ID, to obtain it after created, the previous answers before are right.

Row count with PDO

James

[Row count with PDO](https://stackoverflow.com/questions/883365/row-count-with-pdo)

There are many conflicting statements around. What is the best way to row count using PDO in PHP? Before using PDO, I just simply used mysql_num_rows.fetchAll is something I won't want because I may sometimes be dealing with large datasets, so not good for my use.Do you have any suggestions?

2009-05-19 15:12:30Z

There are many conflicting statements around. What is the best way to row count using PDO in PHP? Before using PDO, I just simply used mysql_num_rows.fetchAll is something I won't want because I may sometimes be dealing with large datasets, so not good for my use.Do you have any suggestions?Not the most elegant way to do it, plus it involves an extra query.PDO has PDOStatement::rowCount(), which apparently does not work in MySql. What a pain.From the PDO Doc:EDIT: The above code example uses a prepared statement, which is in many cases is probably unnecessary for the purpose of counting rows, so:As I wrote previously in an answer to a similar question, the only reason mysql_num_rows() worked is because it was internally fetching all the rows to give you that information, even if it didn't seem like it to you.So in PDO, your options are:You shouldn't have been using it in the first place.mysql_num_rows(), as well as PDOStatement::rowCount() implies that you already selected your data. In this case there are only two possible use cases for such a function:And the former one should never be used at all. One should never select rows to count them, as your server indeed may choke due to large dataset returned.Besides, selecting rows only to count them simply makes no sense. A count(*) query have to be run instead, with only one row returned. The second use case is less disastrous but rather pointless: in case you need to know whether your query returned any data, you always have the data itself! Say, if you are selecting only one row, then just fetch it, and check the result:In case you need to get many rows, then you can use fetchAll().Note that in a web application you should never select a huge amount of rows. Only rows that will be actually used on a web page should be selected. For which purpose a LIMIT or similar clause in SQL have to be used. And for such a moderate amount of data it's all right to use fetchAll()In such a rare case when you need to select a real huge amount of rows (in a console application for example), to reduce the amount of memory used, you have to use an unbuffered query, but in this case rowCount() won't be available anyway, thus there is no use for this function as well.So you see, there is no use case neither for rowCount() nor for an extra query to substitute it, as suggested in the accepted answer. This is super late, but I ran into the problem and I do this:It's really simple, and easy. :)I ended up using this:This post is old but Getting row count in php with PDO is simpleThis is an old post, but getting frustrated looking for alternatives. It is super unfortunate that PDO lacks this feature, especially as PHP and MySQL tend to go hand in hand. There is an unfortunate flaw in using fetchColumn() as you can no longer use that result set (effectively) as the fetchColumn() moves the needle to the next row. So for example, if you have a result similar to If you use fetchColumn() you can find out that there are 3 fruits returned, but if you now loop through the result, you only have two columns, The price of fetchColumn() is the loss of the first column of results just to find out how many rows were returned. That leads to sloppy coding, and totally error ridden results if implemented. So now, using fetchColumn() you have to implement and entirely new call and MySQL query just to get a fresh working result set. (which hopefully hasn't changed since your last query), I know, unlikely, but it can happen. Also, the overhead of dual queries on all row count validation. Which for this example is small, but parsing 2 million rows on a joined query, not a pleasant price to pay. I love PHP and support everyone involved in its development as well as the community at large using PHP on a daily basis, but really hope this is addressed in future releases. This is 'really' my only complaint with PHP PDO, which otherwise is a great class.Answering this because I trapped myself with it by now knowing this and maybe it will be useful. Keep in mind that you cant fetch results twice. You have to save fetch result into array, get row count by count($array), and output results with foreach.

For example:If you just want to get a count of rows (not the data) ie. using COUNT(*) in a prepared statement then all you need to do is retrieve the result and read the value:Actually retrieving all the rows (data) to perform a simple count is a waste of resources. If the result set is large your server may choke on it.When it is matter of mysql how to count or get how many rows in a table with PHP PDO I use thiscredits goes to Mike @ codeofaninja.comHave a look at this link:

http://php.net/manual/en/pdostatement.rowcount.php

It is not recommended to use rowCount() in SELECT statements!To use variables within the query, you can bindValue() or bindParam()

To use variables within a query you have to use bindValue() or bindParam(). And do not concatenate the variables with " . $variable . "GLThere is a simple solution. If you use PDO connect to your DB like this:Then, the query to DB will be:And finally, to count the rows matching your query write like this A quick one liner to get the first entry returned.  This is nice for very basic queries.ReferenceI tried $count = $stmt->rowCount(); with Oracle 11.2 and it did not work.

I decided to used a for loop as show below. For straight queries where I want a specific row, and want to know if it was found, I use something like:when you make a COUNT(*) in your mysql statement like inyour mysql query is already counting the number of result why counting again in php? to get the result of your mysqland $nb will contain the integer you have counted with  your mysql statement

a bit long to write but fast to executeEdit:

sorry for the wrong post but as some example show query with count in, I was suggesting using the mysql result, but if you don't use the count in sql fetchAll() is efficient, if you save the result in a variable you won't loose a line.count($table) will return the number of row and you can still use the result after like $row = $table[0]  or using a foreachHere's a custom-made extension of the PDO class, with a helper function to retrieve the number of rows included by the last query's "WHERE" criteria.You may need to add more 'handlers', though, depending on what commands you use. Right now it only works for queries that use "FROM " or "UPDATE ".You can combine the best method into one line or function, and have the new query auto-generated for you:Use parameter   array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL), else show -1:Usen parametro  array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL), sin ello sale -1 example:

PHP Pass variable to next page

Carlo

[PHP Pass variable to next page](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

It seems pretty simple but I can't find a good way to do it.Say in the first page I create a variableAnd the form's action for that page is "Page2.php". So in Page2.php, how can I have access to that variable? I know I can do it with sessions but I think it's too much for a simple string, and I do only need to pass a simple string (a file name).How can I achieve this?Thanks!

2009-05-16 06:58:45Z

It seems pretty simple but I can't find a good way to do it.Say in the first page I create a variableAnd the form's action for that page is "Page2.php". So in Page2.php, how can I have access to that variable? I know I can do it with sessions but I think it's too much for a simple string, and I do only need to pass a simple string (a file name).How can I achieve this?Thanks!HTML / HTTP is stateless, in other words, what you did / saw on the previous page, is completely unconnected with the current page. Except if you use something like sessions, cookies or GET / POST variables. Sessions and cookies are quite easy to use, with session being by far more secure than cookies. More secure, but not completely secure.Session:Remember to run the session_start(); statement on both these pages before you try to access the $_SESSION array, and also before any output is sent to the browser.Cookie:The big difference between sessions and cookies is that the value of the variable will be stored on the server if you're using sessions, and on the client if you're using cookies. I can't think of any good reason to use cookies instead of sessions, except if you want data to persist between sessions, but even then it's perhaps better to store it in a DB, and retrieve it based on a username or id.GET and POSTYou can add the variable in the link to the next page:This will create a GET variable. Another way is to include a hidden field in a form that submits to page two:And then on page two:Just change the method for the form to post if you want to do it via post. Both are equally insecure, although GET is easier to hack.The fact that each new request is, except for session data, a totally new instance of the script caught me when I first started coding in PHP. Once you get used to it, it's quite simple though.Thanks for the answers above. Here's how I did it, I hope it helps those who follow. I'm looking to pass a registration number from one page to another, hence regName and regValue:Create your first page, call it set_reg.php:Create your second page, call it get_reg.php:Although not as comprehensive as the answer above, for my purposes this illustrates in simple fashion the relationship between the various elements.You could either embed it as a hidden field in your form, or add it your forms action URLorNote this also illustrates the use of htmlentities and urlencode when passing data around.If the data doesn't need to be passed to the client side, then sessions may be more appropriate. Simply call session_start() at the start of each page, and you can get and set data into the $_SESSION array.Since you state your value is actually a filename, you need to be aware of the security ramifications. If the filename has arrived from the client side, assume the user has tampered with the value. Check it for validity! What happens when the user passes the path to an important system file, or a file under their control? Can your script be used to "probe" the server for files that do or do not exist?As you are clearly just getting started here, its worth reminding that this goes for any data which arrives in $_GET, $_POST or $_COOKIE - assume your worst enemy crafted the contents of those arrays, and code accordingly!There are three method to pass value in php.These three method are used for different purpose.For example if we want to receive our value on next page then we can use 'post' ($_POST) method as:-If we require the value of variable on more than one page than we can use session variable as:-Before using this Syntax for creating SESSION variable we first have to add this tag at the very beginning of our php page GET method are generally used to print data on same page which used to take input from user. Its syntax is as:POST method are generally consume more secure than GET because when we use Get method than it can display the data in URL bar.If the data is more sensitive data like password then it can be inggeris.Sessions would be the only good way, you could also use GET/POST but that would be potentially insecure.try this codeusing hidden field we can pass php varibale to another pagepage1.phppass php variable to hidden field value so you can access this variable into another pagepage2.phppage 2Sessions would be the only good way, you could also use GET/POST but that would be potentially insecure.Passing data in the session

If the data doesn't need to be passed to the client-side, then sessions may be more appropriate. Simply call session_start() at the start of each page, and you can get and set data into the $_SESSION array.Security

Since you state your value is actually a filename, you need to be aware of the security ramifications. If the filename has arrived from the client-side, assume the user has tampered with the value. Check it for validity! What happens when the user passes the path to an important system file or a file under their control? Can your script be used to "probe" the server for files that do or do not exist?As you are clearly just getting started here, it is worth reminding that this goes for any data which arrives in $_GET, $_POST or $_COOKIE - assume your worst enemy crafted the contents of those arrays, and code accordingly!

selecting unique values from a column

meandme

[selecting unique values from a column](https://stackoverflow.com/questions/8571902/selecting-unique-values-from-a-column)

I have a MySQL table which contains the following type of information:Here is an example of a script I use to get data from this table:This script displays every date from the table, e.g.I would like to only display unique dates, e.g.

2011-12-20 07:08:34Z

I have a MySQL table which contains the following type of information:Here is an example of a script I use to get data from this table:This script displays every date from the table, e.g.I would like to only display unique dates, e.g.Use the DISTINCT operator in MySQL:useso MySQL removes duplicatesBTW: using explicit column names in SELECT uses less resources in PHP when you're getting a large result from MySQLUse this query to get valuesThe rest are almost correct, except they should order by Date DESCDISTINCT is always a right choice to get unique values. Also you can do it alternatively without using it. That's GROUP BY. Which has simply add at the end of the query and followed by the column name. Another DISTINCT answer, but with multiple values:Use something like this in case you also want to output products details per date as JSON.Try it out in SQL FiddleThere is a specific keyword for the achieving the same.Depends on what you need.In this case I suggest:because there are few fields and the execution time of DISTINCT is lower than the execution of GROUP BY.In other cases, for example where there are many fields, I prefer:

Is it possible to delete an object's property in PHP?

valk

[Is it possible to delete an object's property in PHP?](https://stackoverflow.com/questions/3600750/is-it-possible-to-delete-an-objects-property-in-php)

If I have an stdObject say, $a.Sure there's no problem to assign a new property, $a,But then I want to remove it, so unset is of no help here.So,is kind of it. But is there a more 'elegant' way?

2010-08-30 13:25:53Z

If I have an stdObject say, $a.Sure there's no problem to assign a new property, $a,But then I want to remove it, so unset is of no help here.So,is kind of it. But is there a more 'elegant' way?This works for array elements, variables, and object attributes.Example:This also works specially if you are looping over an object.Newer versions of PHP throw fatal error Fatal error: Cannot use object of type Object as array as mentioned by @CXJ . In that case you can use brackets insteadThis also works if you are looping over an object.No need to use brackets.

+ operator for array in PHP?

user198729

[+ operator for array in PHP?](https://stackoverflow.com/questions/2140090/operator-for-array-in-php)

What does + mean for array in PHP?

2010-01-26 14:46:17Z

What does + mean for array in PHP?Quoting from the PHP Manual on Language OperatorsSo if you doYou will getSo the logic of + is equivalent to the following snippet:If you are interested in the details of the C-level implementation head to Note, that + is different from how array_merge() would combine the arrays:would give youSee linked pages for more examples.The best example I found for using this is in a config array.The $default_vars, as it suggests, is the array for default values.

The $user_vars array will overwrite the values defined in $default_vars.

Any missing values in $user_vars are now the defaults vars from $default_vars.This would print_r as:I hope this helps!This operator takes the union of two arrays (same as array_merge, except that with array_merge duplicate keys are overwritten).The documentation for array operators is found here.Carefull with numeric keys, if they should be preserved or if you don't want to loose anythingunionmergeThe + operator produces the same results as array_replace(). However since the operator arguments are reversed, the ordering of the resulting array may also be different.Expanding on another example from this page:outputs:I post the code below to make things clear.$a + $b = array_plus($a, $b)It will append the new array to the previous.Array ( [0] => example [1] => test ) 

How to find out if you're using HTTPS without $_SERVER['HTTPS']

Tyler Carter

[How to find out if you're using HTTPS without $_SERVER['HTTPS']](https://stackoverflow.com/questions/1175096/how-to-find-out-if-youre-using-https-without-serverhttps)

I've seen many tutorials online that says you need to check $_SERVER['HTTPS'] if the server is connection is secured with HTTPS. My problem is that on some of the servers I use, $_SERVER['HTTPS'] is an undefined variable that results in an error. Is there another variable I can check that should always be defined?Just to be clear, I am currently using this code to resolve if it is an HTTPS connection:

2009-07-23 23:42:49Z

I've seen many tutorials online that says you need to check $_SERVER['HTTPS'] if the server is connection is secured with HTTPS. My problem is that on some of the servers I use, $_SERVER['HTTPS'] is an undefined variable that results in an error. Is there another variable I can check that should always be defined?Just to be clear, I am currently using this code to resolve if it is an HTTPS connection:This should always work even when  $_SERVER['HTTPS'] is undefined:The code is compatible with IIS.From the PHP.net documentation and user comments :Also, Apache 1.x servers (and broken installations) might not have $_SERVER['HTTPS'] defined even if connecting securely. Although not guaranteed, connections on port 443 are, by convention, likely using secure sockets, hence the additional port check.Additional note: if there is a load balancer between the client and your server, this code doesn't test the connection between the client and the load balancer, but the connection between the load balancer and your server. To test the former connection, you would have to test using the HTTP_X_FORWARDED_PROTO header, but it's much more complex to do; see latest comments below this answer.My solution (because the standard conditions [$_SERVER['HTTPS'] == 'on'] do not work on servers behind a load balancer) is:HTTP_X_FORWARDED_PROTO: a de facto standard for identifying the originating protocol of an HTTP request, since a reverse proxy (load balancer) may communicate with a web server using HTTP even if the request to the reverse proxy is HTTPS

http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Common_non-standard_request_headersChacha, per the PHP documentation: "Set to a non-empty value if the script was queried through the HTTPS protocol." So your if statement there will return false in many cases where HTTPS is indeed on. You'll want to verify that $_SERVER['HTTPS'] exists and is non-empty. In cases where HTTPS is not set correctly for a given server, you can try checking if $_SERVER['SERVER_PORT']  == 443.But note that some servers will also set $_SERVER['HTTPS'] to a non-empty value, so be sure to check this variable also.Reference: Documentation for $_SERVER and $HTTP_SERVER_VARS [deprecated]This also works when $_SERVER['HTTPS'] is undefined I have just had an issue where I was running the server using Apache mod_ssl, yet a phpinfo() and a var_dump( $_SERVER ) showed that PHP still thinks I'm on port 80.Here is my workaround for anyone with the same issue....The line worth noting is the SetEnv line.  With this in place and after a restart, you should have the HTTPS environment variable you always dreamt ofMaking my own function from reading all previous posts:If your are using Apache you may always count onto verify the scheme of the URL requested. But, as mentioned in other answers, it is prudent to verify other parameters before assuming SSL is really being used.The REAL answer: ready for copy-paste into a [config] script$pv_URIprotocol is now correct and ready to be used; example $site=$pv_URIprotocol.$_SERVER["SERVER_NAME"]. Naturally, the string could be replaced with TRUE and FALSE also. PV stands for PortalPress Variable as it is a direct copy-paste which will always work. This piece can be used in a production script.I don't think that adding a port is good idea - specially when you got many servers with different builds. that just adds one more thing to remember to change. looking at doc's I think the last line of kaisers is quite good, so that:seems like perfectly enough.The only reliable method is the one described by Igor M.Consider following:

You are using nginx with fastcgi, by default(debian, ubuntu) fastgi_params contain directive:fastcgi_param  HTTPS                   $https;if you are NOT using SSL, it gets translated as empty value, not 'off', not 0

and you are doomed.http://unpec.blogspot.cz/2013/01/nette-nginx-php-fpm-redirect.htmlI find these params acceptable as well and more then likely don't have false positives when switching web servers.Shortest way I am using:If if https is used, then $secure_connection is true.You could check $_SERVER['SERVER_PORT'] as SSL normally runs on port 443, but this is not foolproof.What do you think of this?On my server (Ubuntu 14.10, Apache 2.4, php 5.5) variable $_SERVER['HTTPS'] is not set when php script is loaded via https. I don't know what is wrong. But following lines in .htaccess file fix this problem:Here is a re-usable function that I have been using for a while. HTH.Note: The value of HTTPS_PORT (which is a custom constant in my code) may vary on your envrionment, for example it may be 443 or 81.just for interest, chrome canary at the moment sends to the server, and depending on how the server is configured can mean that you get back the followingThis broke our application because we were testing if on, which it obviously isn't. 

At the moment, only chrome canary seems to do this, but its worth noting that things from canary generally land in "normal" chrome a short while later.If You use nginx as loadbalancing system check $_SERVER['HTTP_HTTPS'] == 1 other checks will be fail for ssl.Code is checking anything possible and works also on IIS web server. Chrome since v44 do not set header HTTP: 1 so checking HTTP_HTTPS is OK. If this code does not match https it means your webserver or proxy server is poorly configured. Apache itself sets HTTPS flag correctly but there can be problem when you use proxy (e.g. nginx). You must set some header in nginx https virtual hostand use some Apache module to set HTTPS flag correctly by looking for X-HTTPS from proxy. Search for mod_fakessl, mod_rpaf, etc.If you are using Incapsula's load balancer you'll need to use an IRule to generate a custom header for your server. I created an HTTP_X_FORWARDED_PROTO header that is equal to either "http" if the port is set to 80 and "https" if it is equal to 443.I would add a global filter to ensure everything I am checking is correct;I have occasion to go a step further and determine if the site I'm connecting to is SSL capable (one project asks the user for their URL and we need to verify they have installed our API pack on a http or https site).Here's the function I use - basically, just call the URL via cURL to see if https works!This is the most reliable way I have found to not only find out IF you are using https (as the question asks), but if you COULD (or even SHOULD) be using https.  NOTE: it is possible (though not really likely...) that a site could have different http and https pages (so if you are told to use http, maybe you don't need to change..)  The vast majority of sites are the same, and probably should reroute you themselves, but this additional check has its use (certainly as I said, in the project where the user inputs their site info and you want to make sure from the server side)This is how i find solve thisI used the main suggestion here and got annoyed at the "PHP Notice" in the logs when HTTPS was not set. You can avoid it by using the null-coalescing operator "??": (Note: not available prior to php v7)As per hobodave's post: "Set to a non-empty value if the script was queried through the HTTPS protocol."

How can I output a UTF-8 CSV in PHP that Excel will read properly?

Ben Saufley

[How can I output a UTF-8 CSV in PHP that Excel will read properly?](https://stackoverflow.com/questions/4348802/how-can-i-output-a-utf-8-csv-in-php-that-excel-will-read-properly)

I've got this very simple thing that just outputs some stuff in CSV format, but it's got to be UTF-8. I open this file in TextEdit or TextMate or Dreamweaver and it displays UTF-8 characters properly, but if I open it in Excel it's doing this silly íÄ kind of thing instead. Here's what I've got at the head of my document:This all seems to have the desired effect except Excel (Mac, 2008) doesn't want to import it properly. There's no options in Excel for me to "open as UTF-8" or anything, so … I'm getting a little annoyed.I can't seem to find any clear solutions to this anywhere, despite a lot of people having the same problem. The thing I see the most is to include the BOM, but I can't exactly figure out how to do that. As you can see above I'm just echoing this data, I'm not writing any file. I can do that if I need to, I'm just not because there doesn't seem like a need for it at this point. Any help?Update: I tried echoing the BOM as echo pack("CCC", 0xef, 0xbb, 0xbf); which I just pulled from a site that was trying to detect the BOM. But Excel just appends those three characters to the very first cell when it imports, and still messes up the special characters.

2010-12-03 18:49:11Z

I've got this very simple thing that just outputs some stuff in CSV format, but it's got to be UTF-8. I open this file in TextEdit or TextMate or Dreamweaver and it displays UTF-8 characters properly, but if I open it in Excel it's doing this silly íÄ kind of thing instead. Here's what I've got at the head of my document:This all seems to have the desired effect except Excel (Mac, 2008) doesn't want to import it properly. There's no options in Excel for me to "open as UTF-8" or anything, so … I'm getting a little annoyed.I can't seem to find any clear solutions to this anywhere, despite a lot of people having the same problem. The thing I see the most is to include the BOM, but I can't exactly figure out how to do that. As you can see above I'm just echoing this data, I'm not writing any file. I can do that if I need to, I'm just not because there doesn't seem like a need for it at this point. Any help?Update: I tried echoing the BOM as echo pack("CCC", 0xef, 0xbb, 0xbf); which I just pulled from a site that was trying to detect the BOM. But Excel just appends those three characters to the very first cell when it imports, and still messes up the special characters.To quote a Microsoft support engineer,Update, 2017: This is true of all versions of Microsoft Excel for Mac before Office 2016. Newer versions (from Office 365) do now support UTF-8.In order to output UTF-8 content that Excel both on Windows and OS X will be able to successfully read, you will need to do two things:The next problem that appears only with Excel on OS X (but not Windows) will be when viewing a CSV file with comma separated values, Excel will render rows only with one row and all of the text along with the commas in the first row.The way to avoid this is to use tabs as your separated value.I used this function from the PHP comments (using tabs "\t" instead of commas) and it worked perfectly on OS X and Windows Excel.Note that to fix an issue with an empty column as the end of a row, that I did have to change the line of code that says:toAs some of the other comments on this page say, other spreadsheet apps like OpenOffice Calc, Apple's own Numbers and Google Doc's Spreadsheet have no issues with UTF-8 files with commas.See the table in this question for what works and doesn't work for Unicode CSV files in ExcelAs a side note, I might add that if you are using Composer, you should have a look at adding League\Csv to your requires. League\Csv has a really nice API for building CSV files.To use League\Csv with this method of creating CSV files, check out this exampleI have the same (or similar) problem.In my case, if I add a BOM to the output, it works:I believe this is a pretty ugly hack, but it worked for me, at least for Excel 2007 Windows. Not sure it'll work on Mac.Here is how I did it (that's to prompt browser to download the csv file):The only thing it fixed UTF8 encoding problem in CSV preview when you hit space bar on Mac.. but not in Excel Mac 2008... don't know whyI just dealt with the same problem, and came up with two solutions. I was having the same issue and it was solved like below:Excel doesn't support UTF-8. You have to encode your UTF-8 text into UCS-2LE.To follow up on this:It appears that the problem is simply with Excel on the Mac. It's not how I'm generating the files, because even generating CSVs from Excel is breaking them. I save as CSV, and reimport, and all the characters are messed up.So … there doesn't appear to be a correct answer to this. Thanks for all the suggestions.I would say that from all I've read, @Daniel Magliola's suggestion about the BOM would probably be the best answer for some other computer. But it still doesn't solve my problem.In my case following works very nice to make CSV file with UTF-8 chars displayed correctly in Excel.The 0xEF 0xBB 0xBF BOM header will let Excel know the correct encoding.Fix issues in excel that are not displaying characters containing diacritics, cyrillic letters, greek letter and currency symbols.The CSV File musst include a Byte Order Mark.Or as suggested and workaround just echo it with the HTTP bodySince UTF8 encoding doesn't play well with Excel. You can convert the data to another encoding type using iconv().e.g.Add:Or:Before writing any content to CSV file.Example:Converting already utf-8 encoded text by using mb_convert_encoding is not needed. Just add three characters in front of the original content:For me this resolved the problem of special characters in csv files.As I investigated and I found that UTF-8 is not working well on MAC and Windows so I tried with Windows-1252 , it supports well on both of them but you must select type of encoding on ubuntu.

Here is my code$valueToWrite = mb_convert_encoding($value, 'Windows-1252');How about just outputting for Excel itself?  This is an excellent class that allows you to generate XLS files server-side.  I use it frequently for clients who can't "figure out" csv's and so far have never had a complaint.  It also allows some extra formatting (shading, rowheights, calculations, etc) that csv won't ever do.  you can convert your CSV String with iconv.

 for example:You have to use the encoding "Windows-1252". Maybe you have to convert your strings:You may append the 3 bytes to the file before exporting, it works for me . Before doing that system only work in Windows and HP -UX but failed in Linux.Have a UTF-8 BOM (3 bytes, hex EF BB BF) at the start of the file. Otherwise Excel will interpret the data according to your locale's default encoding (e.g. cp1252) instead of utf-8 Generating CSV file for Excel, how to have a newline inside a valueI'm on Mac, in my case I just had to specify the separator with "sep=;\n" and encode the file in UTF-16LE like this:For me none of the solution above worked.  Below is what i did to resolve the issue:

modify the value using this function in the PHP code: This output values properly in an excel sheet.  I had this same problem when I had an Excel VBA routine that imported data. Since CSV is a plain text format, I was working around this by programatically opening the data in a simple file editor like wordpad, and re-saving it as unicode text, or copying it to the clipboard from there and pasting it to Excel. If excel doesn't automatically parse the CSV into cells, this is easily remedied using the built in "Text to Columns" feature.Does the problem still occur when you save it as a .txt file and them open that in excel with comma as a delimiter?The problem might not be the encoding at all, it might just be that the file isn't a perfect CSV according to excel standards.This Post is quite old, but after hours of trying I want to share my solution … maybe it helps someone dealing with Excel and Mac and CSV and stumbles over this threat. I am generating a csv dynamically as output from a Database with Excel Users in mind. (UTF-8 with BOM)I tried a lot of iconv´s but couldn´t get german umlauts working in Mac Excel 2004. One solution: PHPExcel. It is great but for my project a bit too much. What works for me is creating the csv file and convert this csv file to xls with this PHPsnippet: csv2xls. the result xls works with excel german umlauts (ä,ö,Ü,...).I just tried these headers and got Excel 2013 on a Windows 7 PC to import the CSV file with special characters correctly. The Byte Order Mark (BOM) was the final key that made it work.Otherwise you may:EASY solution for Mac Excel 2008:

I struggled with this soo many times, but here was my easy fix:

Open the .csv file in Textwrangler which should open your UTF-8 chars correctly. Now in the bottom status bar change the file format from "Unicode (UTF-8)" to "Western (ISO Latin 1)" and save the file.

Now go to your Mac Excel 2008 and select File > Import > Select csv > Find your file > in File origin select "Windows (ANSI)" and voila the UTF-8 chars are showing correctly. At least it does for me...I use this and it works #output a UTF-8 CSV in PHP that Excel will read properly.

How to echo or print an array in PHP?

EnexoOnoma

[How to echo or print an array in PHP?](https://stackoverflow.com/questions/9816889/how-to-echo-or-print-an-array-in-php)

I have this arrayMy question is how can I just echo the content without this structure? I tried 

2012-03-22 05:22:56Z

I have this arrayMy question is how can I just echo the content without this structure? I tried This will doTo see the contents of array you can use.1) print_r($array);  or if you want nicely formatted array then:2) use var_dump($array) to get more information of the content in the array like datatype and length.3) you can loop the array using php's foreach(); and get the desired output. more info on foreach in php's documentation website:

http://in3.php.net/manual/en/control-structures.foreach.phpIf you just want to know the content without a format (e.g. for debuging purpose) I use this:This will show it as a JSON which is pretty human readable.There are multiple function to printing array content that each has features.Prints human-readable information about a variable. Displays structured information about expressions that includes its type and value.Displays structured information about the given variable that returned representation is valid PHP code.Note that because browser condense multiple whitespace characters (including newlines) to a single space (answer) you need to wrap above functions in <pre></pre> to display result in correct format.Also there is another way to printing array content with certain conditions.Output one or more strings. So if you want to print array content using echo, you need to loop through array and in loop use echo to printing array items.Did you try using print_r to print it in human-readable form?You can use print_r, var_dump and var_export funcations of php:print_r: Convert into human readble formvar_dump(): will show you the type of the thing as well as what's in it.foreach loop: using for each loop you can iterate each and every value of an array.or echo $results['data'][1]['type'];You have no need to put for loop to see the data into the array, you can simply do in following mannerI know this is an old question but if you want a parseable PHP representation you could use:If you echo the exported code to a file.php (with a return statement) you may require it as I checked the answer however, (for each) in PHP is deprecated and no longer work with the latest php versions. Usually we would convert an array into a string to log it somewhere, perhaps debugging or test etc. I would convert the array into a string by doing:Whereas:$output is the result (where the string would be generated",": is the separator (between each array field$SourceArray: is your source array. I hope this helps Loop through and print all the values of an associative array, you could use a foreach loop, like this:

Set a cookie to never expire

brainimus

[Set a cookie to never expire](https://stackoverflow.com/questions/3290424/set-a-cookie-to-never-expire)

Looking at the php documentation on setting a cookie I see that I can set an expiration date for the cookie.  You can set the cookie to expire at the end of the browser session or at some time in the future but I do not see a way to set the cookie to never expire.  Is this even possible and how is this accomplished?

2010-07-20 13:29:51Z

Looking at the php documentation on setting a cookie I see that I can set an expiration date for the cookie.  You can set the cookie to expire at the end of the browser session or at some time in the future but I do not see a way to set the cookie to never expire.  Is this even possible and how is this accomplished?All cookies expire as per the cookie specification, so this is not a PHP limitation.Use a far future date. For example, set a cookie that expires in ten years:Note that if you set a date past 2038 in 32-bit PHP, the number will wrap around and you'll get a cookie that expires instantly.Maximum value: 2147483647To avoid integer overflow the timestamp should be set to:Setting a higher value might cause problems with older browsers. Also see the RFC about cookies:and RFC 2616, 14.6 Age:http://www.faqs.org/rfcs/rfc2616.htmlSet a far future absolute time:It is better to use an absolute time than calculating it relative to the present as recommended in the accepted answer.The maximum value compatible with 32 bits systems is:My privilege prevents me making my comment on the first post so it will have to go here.Consideration should be taken into account of 2038 unix bug when setting 20 years in advance from the current date which is suggest as the correct answer above.Your cookie on January 19, 2018 + (20 years) could well hit 2038 problem depending on the browser and or versions you end up running on.Can't you just say a never ending loop, cookie expires as current date + 1 so it never hits the date it's supposed to expire on because it's always tomorrow? A bit overkill but just saying. While that isn't exactly possible you could do something similar to what Google does and set your cookie to expire Jan 17, 2038 or something equally far off. In all practicality you might be better off setting your cookie for 10 years or 60*60*24*365*10, which should outlive most of the machines your cookie will live on.If you want to persist data on the client machine permanently -or at least until browser cache is emptied completely, use Javascript local storage:https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorageDo not use session storage, as it will be cleared just like a cookie with a maximum age of Zero.You shouldn't do that and that's not possible anyway, If you want you can set a greater value such as 10 years ahead.By the way, I have never seen a cookie with such requirement :)I believe that there isn't a way to make a cookie last forever, but you just need to set it to expire far into the future, such as the year 2100.I'm not sure but aren't cookies deleted at browser close? I somehow did a never expiring cookie and chrome recognized expired date as "at browser close" ...You can't but what if you set expire time to now + 100 years ?

MySQL Great Circle Distance (Haversine formula)

Nick Woodhams

[MySQL Great Circle Distance (Haversine formula)](https://stackoverflow.com/questions/574691/mysql-great-circle-distance-haversine-formula)

I've got a working PHP script that gets Longitude and Latitude values and then inputs them into a MySQL query. I'd like to make it solely MySQL. Here's my current PHP Code:Does anyone know how to make this entirely MySQL? I've browsed the Internet a bit but most of the literature on it is pretty confusing. 

2009-02-22 10:18:10Z

I've got a working PHP script that gets Longitude and Latitude values and then inputs them into a MySQL query. I'd like to make it solely MySQL. Here's my current PHP Code:Does anyone know how to make this entirely MySQL? I've browsed the Internet a bit but most of the literature on it is pretty confusing. From Google Code FAQ - Creating a Store Locator with PHP, MySQL & Google Maps:$greatCircleDistance = acos( cos($latitude0) * cos($latitude1) * cos($longitude0 - $longitude1) + sin($latitude0) * sin($latitude1));with latitude and longitude in radian.sois your SQL queryto get your results in Km or miles, multiply the result with the mean radius of Earth (3959 miles,6371 Km or 3440 nautical miles)The thing you are calculating in your example is a bounding box.

If you put your coordinate data in a spatial enabled MySQL column, you can use MySQL's build in functionality to query the data.If you add helper fields to the coordinates table, you can improve response time of the query.Like this:If you're using TokuDB, you'll get even better performance if you add clustering

indexes on either of the predicates, for example, like this:You'll need the basic lat and lon in degrees as well as sin(lat) in radians, cos(lat)*cos(lon) in radians and cos(lat)*sin(lon) in radians for each point.

Then you create a mysql function, smth like this:This gives you the distance.Don't forget to add an index on lat/lon so the bounding boxing can help the search instead of slowing it down (the index is already added in the CREATE TABLE query above).Given an old table with only lat/lon coordinates, you can set up a script to update it like this: (php using meekrodb)Then you optimize the actual query to only do the distance calculation when really needed, for example by bounding the circle (well, oval) from inside and outside.

For that, you'll need to precalculate several metrics for the query itself:Given those preparations, the query goes something like this (php):EXPLAIN on the above query might say that it's not using index unless there's enough results to trigger such. The index will be used when there's enough data in the coordinates table.

You can add 

    FORCE INDEX (lat_lon_idx)

to the SELECT to make it use the index with no regards to the table size, so you can verify with EXPLAIN that it is working correctly.With the above code samples you should have a working and scalable implementation of object search by distance with minimal error.I have had to work this out in some detail, so I'll share my result.  This uses a zip table with latitude and longitude tables. It doesn't depend on Google Maps; rather you can adapt it to any table containing lat/long.Look at this line in the middle of that query:This searches for the 30 nearest entries in the zip table within 50.0 miles of the lat/long point 42.81/-70.81 . When you build this into an app, that's where you put your own point and search radius.If you want to work in kilometers rather than miles, change 69 to 111.045 and change 3963.17 to 6378.10 in the query.Here's a detailed writeup.  I hope it helps somebody.  http://www.plumislandmedia.net/mysql/haversine-mysql-nearest-loc/I have written a procedure that can calculate the same,

but you have to enter the latitude and longitude in the respective table.I can't comment on the above answer, but be careful with @Pavel Chuchuva's answer. That formula will not return a result if both coordinates are the same. In that case, distance is null, and so that row won't be returned with that formula as is.I'm not a MySQL expert, but this seems to be working for me:for distance of 25 km I thought my javascript implementation would be a good reference to:calculate distance in Mysql thus distance value will be calculated and anyone can apply as required.

Illegal string offset Warning PHP

thesonix

[Illegal string offset Warning PHP](https://stackoverflow.com/questions/9869150/illegal-string-offset-warning-php)

I get a strange PHP error after updating my php version to 5.4.0-3.I have this array:When I try to access it like this I get strange warningsI really don't want to just edit my php.ini and re-set the error level.

2012-03-26 08:55:03Z

I get a strange PHP error after updating my php version to 5.4.0-3.I have this array:When I try to access it like this I get strange warningsI really don't want to just edit my php.ini and re-set the error level.Please try this way.... I have tested this code.... It works....The error Illegal string offset 'whatever' in... generally means: you're trying to use a string as a full array.That is actually possible since strings are able to be treated as arrays of single characters in php.  So you're thinking the $var is an array with a key, but it's just a string with standard numeric keys, for example:You can see this in action here:

http://ideone.com/fMhmkRFor those who come to this question trying to translate the vagueness of the error into something to do about it, as I was.You're trying to access a string as if it were an array, with a key that's a string. string will not understand that. In code we can see the problem:What does it say? It says we're trying to use the string 'port' as an offset for a string. Like this:For some reason you expected an array, but you have a string. Just a mix-up. Maybe your variable was changed, maybe it never was an array, it's really not important.If we know we should have an array, we should do some basic debugging to determine why we don't have an array. If we don't know if we'll have an array or string, things become a bit trickier.What we can do is all sorts of checking to ensure we don't have notices, warnings or errors with things like is_array and isset or array_key_exists:There are some subtle differences between isset and array_key_exists. For example, if the value of $array['key'] is null, isset returns false. array_key_exists will just check that, well, the key exists.There are a lot of great answers here - but I found my issue was quite a bit more simple.I was trying to run the following command:and I was getting this illegal string error on $x['name'] because I hadn't defined the array first.  So I put the following line of code in before trying to assign things to $x[]:and it worked.A little bit late to the question, but for others who are searching: I got this error by initializing with a wrong value (type):The right way is:As from PHP 5.4 we need to pass the same datatype value that a function expects. For example:When invoking this function, if a string value is provided like this:This will generate an illegal offset warning because of datatype mismatch. In order to solve this, you can use settype:Before to check the array, do this:In my case i change  mysql_fetch_assoc to mysql_fetch_array and solve. It takes 3 days to solve :-( and the other versions of my proyect run with fetch assoc.In my case, I solved it when I changed in function that does sql query

after: return json_encode($array) 

then: return $array  It works to me:Testing Code of mine:Output: 55Check it guys. Thanksjust use beforethis is because you never define what is $memcachedConfig, so by default are treated by string not arrays..I solved this problem by using trim() function. the issue was with space.so lets tryI hope this will help you.Just incase it helps anyone, I was getting this error because I forgot to unserialize a serialized array. That's definitely something I would check if it applies to your case.It's an old one but in case someone can benefit from this. 

You will also get this error if your array is empty. In my case I had:which I changed to:i think the only reason for this message is because target Array is actually an array like string etc (JSON -> {"host": "127.0.0.1"}) variableFor PHPJust make sure to check that the value returning is not empty.

So this example was for PHP so find out how to check if an array is empty in other languages.

PHP PDO: charset, set names?

Karem

[PHP PDO: charset, set names?](https://stackoverflow.com/questions/4361459/php-pdo-charset-set-names)

I had this previously in my normal mysql_* connection:Do I need it for the PDO? And where should I have it?

2010-12-05 21:54:00Z

I had this previously in my normal mysql_* connection:Do I need it for the PDO? And where should I have it?You'll have it in your connection string like:HOWEVER, prior to PHP 5.3.6, the charset option was ignored. If you're running an older version of PHP, you must do it like this:Prior to PHP 5.3.6, the charset option was ignored.  If you're running an older version of PHP, you must do it like this:This is probably the most elegant way to do it.

Right in the PDO constructor call, but avoiding the buggy charset option (as mentioned above):Works great for me.For completeness, there're actually three ways to set the encoding when connecting to MySQL from PDO and which ones are available depend on your PHP version. The order of preference would be:This sample code implements all three:Doing all three is probably overkill (unless you're writing a class you plan to distribute or reuse).I just want to add that you have to make sure your database is created with COLLATE utf8_general_ci or whichever collation you want to use, Else you might end up with another one than intended.In phpmyadmin you can see the collation by clicking your database and choose operations. If you try create tables with another collation than your database, your tables will end up with the database collation anyways.So make sure the collation for your database is right before creating tables. Hope this saves someone a few hours lolI think you need an additionally query because the charset option in the DSN is actually ignored. see link posted in the comment of the other answer.Looking at how Drupal 7 is doing it in http://api.drupal.org/api/drupal/includes--database--mysql--database.inc/function/DatabaseConnection_mysql%3A%3A__construct/7:$con = new PDO ( "mysql:host=$dbhost;dbname=$database;charset=$encoding", "$dbuser", "$dbpassword");I test this code and

How do you create optional arguments in php?

gregh

[How do you create optional arguments in php?](https://stackoverflow.com/questions/34868/how-do-you-create-optional-arguments-in-php)

In the PHP manual, to show the syntax for functions with optional parameters, they use brackets around each set of dependent optional parameter. For example, for the date() function, the manual reads:Where $timestamp is an optional parameter, and when left blank it defaults to the time() function's return value.How do you go about creating optional parameters like this when defining a custom function in PHP?

2008-08-29 17:57:50Z

In the PHP manual, to show the syntax for functions with optional parameters, they use brackets around each set of dependent optional parameter. For example, for the date() function, the manual reads:Where $timestamp is an optional parameter, and when left blank it defaults to the time() function's return value.How do you go about creating optional parameters like this when defining a custom function in PHP?Much like the manual, use an equals (=) sign in your definition of the parameters:If you need this functionality however:Assuming $bar isn't expected to be a boolean of course.Some notes that I also found useful:Give the optional argument a default value. The date function would be defined something like this:Usually, you would put the default value like this:However, only literals are valid default arguments, which is why I used null as default argument in the first example, not $timestamp = time(), and combined it with a null check. Literals include arrays (array() or []), booleans, numbers, strings, and null.If you don't know how many attributes need to be processed, you can use the variadic argument list token(...) introduced in PHP 5.6 (see full documentation here).Syntax:For example:As you can see, this token basically turns all parameters to an array, which you can process in any way you like.

GET URL parameter in PHP

Feras Odeh

[GET URL parameter in PHP](https://stackoverflow.com/questions/5884807/get-url-parameter-in-php)

I'm trying to pass a URL as a url parameter in php but when I try to get this parameter I get nothing I'm using the following url form:I'm trying to get it through:But nothing returned. What is the problem?

2011-05-04 14:16:20Z

I'm trying to pass a URL as a url parameter in php but when I try to get this parameter I get nothing I'm using the following url form:I'm trying to get it through:But nothing returned. What is the problem?$_GET is not a function or language construct—it's just a variable (an array). Try:In particular, it's a superglobal: a built-in variable that's populated by PHP and is available in all scopes (you can use it from inside a function without the global keyword).Since the variable might not exist, you could (and should) ensure your code does not trigger notices with:Alternatively, if you want to skip manual index checks and maybe add further validations you can use the filter extension:Please post your code,or do work...To make sure you're always on the safe side, without getting all kinds of unwanted code insertion use FILTERS:More reading on php.net function filter_input, or check out the description of the different filtersUse this:Or just use:The accepted answer is good. But if you have a scenario like this:You can treat the named anchor as a query string like this:Then, access it like this:Array

       (

        [  0] => link=www.google.com

       )       I was getting nothing for any $_GET["..."] (e.g print_r($_GET) gave an empty array) yet $_SERVER['REQUEST_URI'] showed stuff should be there. In the end it turned out that I was only getting to the web page because my .htaccess was redirecting it there (my 404 handler was the same .php file, and I had made a typo in the browser when testing).Simply changing the name meant the same php code worked once the 404 redirection wasn't kicking in!So there are ways $_GET can return nothing even though the php code may be correct.Whomever gets nothing back, I think he just has to enclose the result in html tags, Like this:

Differences and Similarities Between Lumen and Laravel

Ranjit Karki

[Differences and Similarities Between Lumen and Laravel](https://stackoverflow.com/questions/29647960/differences-and-similarities-between-lumen-and-laravel)

I read the documentation and it seems Lumen is Laravel with less features. I must be missing something.

I am looking for a comparison table of the components and features of both Laravel and Lumen. Does anyone know the differences?

2015-04-15 10:35:56Z

I read the documentation and it seems Lumen is Laravel with less features. I must be missing something.

I am looking for a comparison table of the components and features of both Laravel and Lumen. Does anyone know the differences?With the latest version of Lumen (5.2) the Microframework focuses on Stateless APIs.

The documentation states:Lumen is all about speed. It's faster and can handle more requests per second than Laravel.Laravel is a framework that glues together a lot of components (3rd party and Laravels own components). Now Lumen makes use of a lot of the same components, but strips down the bootstrapping process to a minimum. You could say it is a "different glue", the components (and therefore a lot of the features) are mostly the same.The performance improvement is achieved by taking away some of the flexibility of the framework in terms of configuration and altering the default boot process.  Besides that, more features are disabled by default and have to be activated before they can be used. As an example: Facades (like DB::table())

You first need to uncomment this line in bootstrap/app.php to enable them:The same goes for Dotenv environment files and Eloquent.For routing Lumen uses nikic/FastRoute instead of symfonys router because it performs a lot better and gives the micro-framework another big boost.Other than that pretty much everything is the same as in Laravel.Good reads on LumenLumen is not designed to replace Laravel, rather, it is a more specialized (and stripped-down) framework designed for micro-services and APIs. It took away unneeded features for an API such as HTTP sessions and cookies, and also limited the number of configuration options. Out-of-the-box, Lumen sacrified the flexibility of Laravel for speed.However, you can add Laravel components to Lumen to extend it, so it can be used for more than just micro-services and API. However, if your goal is to extend Lumen to become a website, you might as well use Laravel instead.They also have different use cases. Lumen and Laravel are meant to work together. For APIs and services are frequently get called, use Lumen. For user-facing applications, use Laravel.This answer is taken from a blog post I wrote that explains the difference between Lumen and Laravel.Quote from Matt Stauffer You can read more hereLumen microframework is a lightweight version of Laravel full-stack framework. Lumen use the Laravel syntax and components, and can be 'upgrade' easily to Laravel.Lumen is a more specialized (and stripped-down) framework designed for Microservices development and API development. So, some of the features in Laravel such as HTTP sessions, cookies, and templating are not needed and Lumen takes them away, keeping what's essential - routing, logging, caching, queues, validation, error handling and a couple of others.Why Lumen ? Lumen is a framework to build APIs, which will essentially serve JSON responses for your requests. That's it.These kinds of applications are known as web services in general. As of Lumen 5.2 update, it doesn't support laravel views, sessions etc... for that you will have to upgrade to full laravel framework.Some components of the Laravel framework is swapped with other packages in favour of performance. check them here Example scenarios where we can consider LumenThe main difference between laravel and lumen is, Laravel can have artisan commands, which lumen doesn't have.

How do you connect to multiple MySQL databases on a single webpage?

JoshFinnie

[How do you connect to multiple MySQL databases on a single webpage?](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)

I have information spread out across a few databases and want to put all the information onto one webpage using PHP.  I was wondering how I can connect to multiple databases on a single PHP webpage.I know how to connect to a single database using:However, can I just use multiple "mysql_connect" commands to open the other databases, and how would PHP know what database I want the information pulled from if I do have multiple databases connected.

2008-11-08 16:24:13Z

I have information spread out across a few databases and want to put all the information onto one webpage using PHP.  I was wondering how I can connect to multiple databases on a single PHP webpage.I know how to connect to a single database using:However, can I just use multiple "mysql_connect" commands to open the other databases, and how would PHP know what database I want the information pulled from if I do have multiple databases connected.Warning : mysql_xx functions are deprecated since php 5.5 and removed since php 7.0 (see http://php.net/manual/intro.mysql.php), use mysqli_xx functions or see the answer below from @TroelsknYou can make multiple calls to mysql_connect(), but if the parameters are the same you need to pass true for the '$new_link' (fourth) parameter, otherwise the same connection is reused. For example:Then to query database 1 pass the first link identifier:and for database 2 pass the second:If you do not pass a link identifier then the last connection created is used (in this case the one represented by $dbh2) e.g.: Other optionsIf the MySQL user has access to both databases and they are on the same host (i.e. both DBs are accessible from the same connection) you could:Also please read troelskn's answer because that is a better approach if you are able to use PDO rather than the older extensions.If you use PHP5 (And you should, given that PHP4 has been deprecated), you should use PDO, since this is slowly becoming the new standard. One (very) important benefit of PDO, is that it supports bound parameters, which makes for much more secure code.You would connect through PDO, like this:(Of course replace databasename, username and password above)You can then query the database like this:Or, if you have variables:If you need multiple connections open at once, you can simply create multiple instances of PDO:I just made my life simple:hope it is helpful... cheers...Instead of mysql_connect use mysqli_connect.mysqli is provide a functionality for connect multiple database at a time.Try below code:You can fetch data of above query from both database as belowUnless you really need to have more than one instance of a PDO object in play, consider the following:Notice the absence of dbname= in the construction arguments. When you connect to MySQL via a terminal or other tool, the database name is not needed off the bat. You can switch between databases by using the USE dbname statement via the PDO::exec() method.Of course you may want to wrap this in a catch try statement.This is the most obvious solution that I use but just remember, if the username / password for both the database is exactly same in the same host, this solution will always be using the first connection. So don't be confused that this is not working in such case. What you need to do is, create 2 different users for the 2 databases and it will work.You might be able to use MySQLi syntax, which would allow you to handle it better.Define the database connections, then whenever you want to query one of the database, specify the right connection.E.g.:Then to query them on the same page, use something like:Changing to MySQLi in this way will help you.You don't actually need select_db. You can send a query to two databases at the same time. First,  give a grant to DB1 to select from DB2 by GRANT select ON DB2.* TO DB1@localhost;. Then, FLUSH PRIVILEGES;. Finally, you are able to do 'multiple-database query' like SELECT DB1.TABLE1.id, DB2.TABLE1.username FROM DB1,DB2 etc. (Don't forget that you need 'root' access to use grant command)if you are using mysqli and have two db_connection file. like

first one issecond one isSO just change the name of parameter pass in mysqli like DB1 and DB2.

 if you pass same parameter in mysqli suppose DB1 in both file then second database will no connect any more. So remember when you use two or more connection pass different parameter name in mysqli function  i had done this in laravelAnd this is my sample code

PHP sprintf escaping %

Sandeepan Nath

[PHP sprintf escaping %](https://stackoverflow.com/questions/3666734/php-sprintf-escaping)

I want the following output:-when I do something like this:-But it gives me this error vsprintf() [function.vsprintf]: Too few arguments in ... because it considers the % in 50% also for replacement. How do I escape it?

2010-09-08 10:24:52Z

I want the following output:-when I do something like this:-But it gives me this error vsprintf() [function.vsprintf]: Too few arguments in ... because it considers the % in 50% also for replacement. How do I escape it?Escape it with another %:It is very easy.Put another % in front of the original % to escape it.For example,Output:What about this:Just add your percent sign in your variables array

How to Truncate a string in PHP to the word closest to a certain number of characters?

Brian

[How to Truncate a string in PHP to the word closest to a certain number of characters?](https://stackoverflow.com/questions/79960/how-to-truncate-a-string-in-php-to-the-word-closest-to-a-certain-number-of-chara)

I have a code snippet written in PHP that pulls a block of text from a database and sends it out to a widget on a webpage.  The original block of text can be a lengthy article or a short sentence or two; but for this widget I can't display more than, say, 200 characters.  I could use substr() to chop off the text at 200 chars, but the result would be cutting off in the middle of words-- what I really want is to chop the text at the end of the last word before 200 chars.

2008-09-17 04:24:04Z

I have a code snippet written in PHP that pulls a block of text from a database and sends it out to a widget on a webpage.  The original block of text can be a lengthy article or a short sentence or two; but for this widget I can't display more than, say, 200 characters.  I could use substr() to chop off the text at 200 chars, but the result would be cutting off in the middle of words-- what I really want is to chop the text at the end of the last word before 200 chars.By using the wordwrap function. It splits the texts in multiple lines such that the maximum width is the one you specified, breaking at word boundaries. After splitting, you simply take the first line:One thing this oneliner doesn't handle is the case when the text itself is shorter than the desired width. To handle this edge-case, one should do something like:The above solution has the problem of prematurely cutting the text if it contains a newline before the actual cutpoint. Here a version which solves this problem:Also, here is the PHPUnit testclass used to test the implementation:Special UTF8 characters like 'à' are not handled. Add 'u' at the end of the REGEX to handle it:$parts = preg_split('/([\s\n\r]+)/u', $string, null, PREG_SPLIT_DELIM_CAPTURE);This will return the first 200 characters of words:And there you have it — a reliable method of truncating any string to the nearest whole word, while staying under the maximum string length.I've tried the other examples above and they did not produce the desired results.The following solution was born when I've noticed a $break parameter of wordwrap function:Here is the solution:Example #1.The above example will output:Example #2.The above example will output:Keep in mind whenever you're splitting by "word" anywhere that some languages such as Chinese and Japanese do not use a space character to split words. Also, a malicious user could simply enter text without any spaces, or using some Unicode look-alike to the standard space character, in which case any solution you use may end up displaying the entire text anyway. A way around this may be to check the string length after splitting it on spaces as normal, then, if the string is still above an abnormal limit - maybe 225 characters in this case - going ahead and splitting it dumbly at that limit.One more caveat with things like this when it comes to non-ASCII characters; strings containing them may be interpreted by PHP's standard strlen() as being longer than they really are, because a single character may take two or more bytes instead of just one. If you just use the strlen()/substr() functions to split strings, you may split a string in the middle of a character! When in doubt, mb_strlen()/mb_substr() are a little more foolproof.Use strpos and substr:This will give you a string truncated at the first space after 30 characters.Here is my function based on @Cd-MaN's approach.Here you go:It's surprising how tricky it is to find the perfect solution to this problem.  I haven't yet found an answer on this page that doesn't fail in at least some situations (especially if the string contains newlines or tabs, or if the word break is anything other than a space, or if the string has UTF-8 multibyte characters).Here is a simple solution that works in all cases.  There were similar answers here, but the "s" modifier is important if you want it to work with multi-line input, and the "u" modifier makes it correctly evaluate UTF-8 multibyte characters.One possible edge case with this... if the string doesn't have any whitespace at all in the first $characterCount characters, it will return the entire string.  If you prefer it forces a break at $characterCount even if it isn't a word boundary, you can use this:One last option, if you want to have it add ellipsis if it truncates the string... Description:Tests:Enjoy.I would use the preg_match function to do this, as what you want is a pretty simple expression.The expression means "match any substring starting from the beginning of length 1-200 that ends with a space." The result is in $result, and the match is in $matches. That takes care of your original question, which is specifically ending on any space. If you want to make it end on newlines, change the regular expression to:Ok so I got another version of this based on the above answers but taking more things in account(utf-8, \n and &nbsp ; ), also a line stripping the wordpress shortcodes commented if used with wp.This is a small fix for mattmac's answer:The only difference is to add a space at the end of $string. This ensures the last word isn't cut off as per ReX357's comment.I don't have enough rep points to add this as a comment.Usage:This will output first 10 words.The preg_split function is used to split a string into substrings. The boundaries along which the string is to be split, are specified using a regular expressions pattern.preg_split function takes 4 parameters, but only the first 3 are relevant to us right now.First Parameter – Pattern

The first parameter is the regular expressions pattern along which the string is to be split. In our case, we want to split the string across word boundaries. Therefore we use a predefined character class \s which matches white space characters such as space, tab, carriage return and line feed.Second Parameter – Input String

The second parameter is the long text string which we want to split.Third Parameter – Limit

The third parameter specifies the number of substrings which should be returned. If you set the limit to n, preg_split will return an array of n elements. The first n-1 elements will contain the substrings. The last (n th) element will contain the rest of the string.Based on @Justin Poliey's regex:I have a function that does almost what you want, if you'll do a few edits, it will fit exactly:This is how i did it:I know this is old, but...I create a function more similar to substr, and using the idea of @Dave.Ps.: The full length cut may be less than substr.Added IF/ELSEIF statements to the code from Dave and AmalMurali for handling strings without spacesI find this works:function abbreviate_string_to_whole_word($string,$max_length,$buffer) {}The buffer allows you to adjust the length of the returned string.Use this: the following code will remove ','. If you have anyother character or sub-string, you may use that instead of ','// if you have another string account for    I used this beforeHere you can try thisI believe this is the easiest way to do it:I'm using the special characters to split the text and cut it.May be this will help someone:

CodeIgniter: Create new helper?

Jonathan

[CodeIgniter: Create new helper?](https://stackoverflow.com/questions/804399/codeigniter-create-new-helper)

I need to loop lot of arrays in different ways and display it in a page. The arrays are generated by a module class. I know that its better not to include functions on 'views' and I want to know where to insert the functions file.I know I can 'extend' the helpers, but I don't want to extend a helper. I want to kind of create a helper with my loop functions.. Lets call it loops_helper.php

2009-04-29 21:41:29Z

I need to loop lot of arrays in different ways and display it in a page. The arrays are generated by a module class. I know that its better not to include functions on 'views' and I want to know where to insert the functions file.I know I can 'extend' the helpers, but I don't want to extend a helper. I want to kind of create a helper with my loop functions.. Lets call it loops_helper.phpA CodeIgniter helper is a PHP file with multiple functions. It is not a classCreate a file and put the following code into it. Save this to application/helpers/ . We shall call it "new_helper.php"The first line exists to make sure the file cannot be included and ran from outside the CodeIgniter scope. Everything after this is self explanatory.This can be in your controller, model or view (not preferable)If you use this helper in a lot of locations you can have it load automatically by adding it to the autoload configuration file i.e. <your-web-app>\application\config\autoload.php.-MathewSome code that allows you to use CI instance inside the helper:  Well for me only works adding the text "_helper" after in the php file like:And to load automatically the helper in the folder aplication -> file autoload.php add in the array helper's the name without "_helper" like:And with that I can use all the helper's functions To create a new helper you can follow the instructions from The Pixel Developer, but my advice is not to create a helper just for the logic required by a particular part of a particular application. Instead, use that logic in the controller to set the arrays to their final intended values. Once you got that, you pass them to the view using the Template Parser Class and (hopefully) you can keep the view clean from anything that looks like PHP using simple variables or variable tag pairs instead of echos and foreachs. i.e:instead ofAnother benefit from this approach is that you don't have to worry about adding the CI instance as you would if you use custom helpers to do all the work.Create a file with the name of your helper in /application/helpers and add it to the autoload config file/load it manually.E.g. place a file called user_helper.php in /application/helpers with this content:Now you can either load the helper via $this->load->helper(‘user’); or add it to application/config/autoload.php config.Just define a helper in application helper directory

then call from your controller just function name likein controller

load the helperoutput will beTo retrieve an item from your config file, use the following function:$this->config->item('item name');

Where item name is the $config array index you want to retrieve. For example, to fetch your language choice you'll do this:$lang = $this->config->item('language');

The function returns FALSE (boolean) if the item you are trying to fetch does not exist.If you are using the second parameter of the $this->config->load function in order to assign your config items to a specific index you can retrieve it by specifying the index name in the second parameter of the $this->config->item() function. Example:// Loads a config file named blog_settings.php and assigns it to an index named "blog_settings"// Retrieve a config item named site_name contained within the blog_settings array// An alternate way to specify the same item:$site_name = $blog_config['site_name'];

Which is a better way to check if an array has more than one element?

tuxnani

[Which is a better way to check if an array has more than one element?](https://stackoverflow.com/questions/10024910/which-is-a-better-way-to-check-if-an-array-has-more-than-one-element)

I just need to check if an array has more than one element. 

I am trying to do it this way :the other traditional way is Which of the two is better? In such situaions, how should I judge between two alternate methods?

Is there any performance check meter available to measure which is better?

2012-04-05 08:10:42Z

I just need to check if an array has more than one element. 

I am trying to do it this way :the other traditional way is Which of the two is better? In such situaions, how should I judge between two alternate methods?

Is there any performance check meter available to measure which is better?Use thisOr sizeof() is an alias for count(), they work the same.Edit:

Answering the second part of the question:

The two lines of codes in the question are not alternative methods, they perform different functions. The first checks if the value at $arr['1'] is set, while the second returns the number of elements in the array.if(is_array($arr) && count($arr) > 1)Just to be sure that $arr is indeed an array.sizeof is an alias of count, I prefer to use count because:sizeof() is an alias for count(). Both work with non-arrays too, but they will only return values greater than 1 if the argument is either an array or a Countable object, so you're pretty safe with this.Obviously using count($arr) > 1 (sizeof is just an alias for count) is the best solution.

Depending on the structure of your array, there might be tons of elements but no $array['1'] element.Use count()this page explains it pretty well http://phparraylength.com/I prefer the count() function instead of sizeOf() as sizeOf() is only an alias of count() and does not mean the same in many other languages. Many programmers expect sizeof() to return the amount of memory allocated.For checking an array empty() is better than sizeof().If the array contains huge amount of data. It will takes more times for counting the size of the array. But checking empty is always easy.isset() only checks if a variable is set.. Has got nothing to do with size or what the array containsI assume $arr is an array then this is what you are looking forThe first method

if (isset($arr['1']))

will not work on an associative array.For example, the following code displays "Nope, not more than one."I do my array looping and getting filled defaults accordingly in Swift 4/5

PHP - Move a file into a different folder on the server

odd_duck

[PHP - Move a file into a different folder on the server](https://stackoverflow.com/questions/19139434/php-move-a-file-into-a-different-folder-on-the-server)

I need to allow users on my website to delete their images off the server after they have uploaded them if they no longer want them. I was previously using the unlink function in PHP but have since been told that this can be quite risky and a security issue. (Previous code below:)Instead i now want to simply move the file into a different folder. This must be able to be done a long time after they have first uploaded the file so any time they log into their account. If i have the main folder which stores the users image(s):and then within that a folder called del which is the destination to put their unwanted images:Is there a command to move a file into a different folder? So that say:moves to/becomes

2013-10-02 14:28:53Z

I need to allow users on my website to delete their images off the server after they have uploaded them if they no longer want them. I was previously using the unlink function in PHP but have since been told that this can be quite risky and a security issue. (Previous code below:)Instead i now want to simply move the file into a different folder. This must be able to be done a long time after they have first uploaded the file so any time they log into their account. If i have the main folder which stores the users image(s):and then within that a folder called del which is the destination to put their unwanted images:Is there a command to move a file into a different folder? So that say:moves to/becomesThe rename function does thisdocs renamerename('image1.jpg', 'del/image1.jpg');If you want to keep the existing file on the same place you should use copydocs copycopy('image1.jpg', 'del/image1.jpg');If you want to move an uploaded file use the move_uploaded_file, although this is almost the same as rename this function also checks that the given file is a file that was uploaded via the POST, this prevents for example that a local file is moved docs move_uploaded_filecode snipet from docsUse the rename() function.If you want to move the file in new path with keep original file name. use this:Some solution is first to copy() the file (as mentioned above) and when the destination file exists - unlink() file from previous localization. Additionally you can validate the MD5 checksum before unlinking to be sureCreate a function to move it:I using shell read all data file then assign to array.

Then i move file in top position.use copy() and unlink() functionshell_exec('mv filename dest_filename');

What are the Differences Between「php artisan dump-autoload」and「composer dump-autoload」?

Naing Lin Aung

[What are the Differences Between「php artisan dump-autoload」and「composer dump-autoload」?](https://stackoverflow.com/questions/20274082/what-are-the-differences-between-php-artisan-dump-autoload-and-composer-dump)

I am pretty new to Laravel 4 and Composer. While I do Laravel 4 tutorials, I couldn't understand the difference between those two commands; php artisan dump-autoload and composer dump-autoload What's the difference between them? 

2013-11-28 20:10:21Z

I am pretty new to Laravel 4 and Composer. While I do Laravel 4 tutorials, I couldn't understand the difference between those two commands; php artisan dump-autoload and composer dump-autoload What's the difference between them? Laravel's Autoload is a bit different:1) It will in fact use Composer for some stuff2) It will call Composer with the optimize flag3) It will 'recompile' loads of files creating the huge bootstrap/compiled.php4) And also will find all of your Workbench packages and composer dump-autoload them, one by one.php artisan dump-autoload was deprecated on Laravel 5, so you need to use composer dump-autoload

Among $_REQUEST, $_GET and $_POST which one is the fastest?

kobra

[Among $_REQUEST, $_GET and $_POST which one is the fastest?](https://stackoverflow.com/questions/1924939/among-request-get-and-post-which-one-is-the-fastest)

Which of these code will be faster?or

2009-12-17 22:08:12Z

Which of these code will be faster?or$_REQUEST, by default, contains the contents of $_GET, $_POST and $_COOKIE. But it's only a default, which depends on variables_order ; and not sure you want to work with cookies.If I had to choose, I would probably not use $_REQUEST, and I would choose $_GET or $_POST -- depending on what my application should do (i.e. one or the other, but not both) : generally speaking :Either way, there will not be much of a difference about performances : the difference will be negligible, compared to what the rest of your script will do.GET vs. POST1) Both GET and POST create an array (e.g. array( key => value, key2 => value2, key3 => value3, ...)). This array holds key/value pairs, where keys are the names of the form controls and values are the input data from the user.2) Both GET and POST are treated as $_GET and $_POST. These are superglobals, which means that they are always accessible, regardless of scope - and you can access them from any function, class or file without having to do anything special.3) $_GET is an array of variables passed to the current script via the URL parameters.4) $_POST is an array of variables passed to the current script via the HTTP POST method.When to use GET?Information sent from a form with the GET method is visible to everyone (all variable names and values are displayed in the URL). GET also has limits on the amount of information to send. The limitation is about 2000 characters. However, because the variables are displayed in the URL, it is possible to bookmark the page. This can be useful in some cases.GET may be used for sending non-sensitive data.Note: GET should NEVER be used for sending passwords or other sensitive information!When to use POST?Information sent from a form with the POST method is invisible to others (all names/values are embedded within the body of the HTTP request) and has no limits on the amount of information to send.Moreover POST supports advanced functionality such as support for multi-part binary input while uploading files to server.However, because the variables are not displayed in the URL, it is not possible to bookmark the page.I'd suggest using $_POST and $_GET explicitly. Using $_REQUEST should be unnecessary with proper site design anyway, and it comes with some downsides like leaving you open to easier CSRF/XSS attacks and other silliness that comes from storing data in the URL.The speed difference should be minimal either way.Use REQUEST.  Nobody cares about the speed of such a simple operation, and it's much cleaner code.Don't worry. But you should still use the second solution (plus an extra check for none of those variables existing), because there are security issues with $_REQUEST (since $_GET and $_POST aren't the only sources for that array).There was a post about the problems with $_REQUEST yesterday, I believe. Let me go find it.EDIT: Oh well, not directly a post, but here it is anyway: http://kuza55.blogspot.com/2006/03/request-variable-fixation.htmlUse that because it is safer and it won't make noticeable speed difference$_GET retrieves variables from the querystring, or your URL.>$_POST retrieves variables from a POST method, such as (generally) forms.$_REQUEST is a merging of $_GET and $_POST where $_POST overrides $_GET. Good to use $_REQUEST on self refrential forms for validations.There are certain security concerns involved as a hacker can set a cookie that will override a $_POST or $_GET value. If you handle sensitive data, I would not recommend using $_REQUEST. – Xandoryou can't be used $_GET alternative of $_POST on some case.When ??GET also has limits on the amount of information to send. The limitation is about 2000 characters. Other thing's there are few case when you can't retrieve a data using $_POSTWhen ?For Rest Service there is nothing be wrong to use $_REQUEST.But the way to do that is to check $_SERVER['REQUEST_METHOD'] explicitly, not rely on $_POST being empty for a GET.I would use the second method as it is more explicit. Otherwise you don't know where the variables are coming from.Why do you need to check both GET and POST anyway? Surely using one or the other only makes more sense.I only ever use _GET or _POST. I prefer to have control.What I don't like about either code fragment in the OP is that they discard the information on which HTTP method was used. And that information is important for input sanitization.For example, if a script accepts data from a form that's going to be entered into the DB then the form had better use POST (use GET only for idempotent actions). But if the script receives the input data via the GET method then it should (normally) be rejected. For me, such a situation might warrant writing a security violation to the error log since it's a sign somebody is trying something on.With either code fragment in the OP, this sanitization wouldn't be possible.I would use $_POST, and $_GET because differently from $_REQUEST their content is not influenced by variables_order.

When to use $_POST and $_GET depends on what kind of operation is being executed. An operation that changes the data handled from the server should be done through a POST request, while the other operations should be done through a GET request. To make an example, an operation that deletes a user account should not be directly executed after the user click on a link, while viewing an image can be done through a link.I use this,the statement validates if $_REQUEST has more than one parameter (the first parameter in $_REQUEST will be the request uri which can be used when needed, 

some PHP packages wont return $_GET so check if its more than 1 go for $_GET, By default, it will be $_POST.You are prematurely optimizing. Also, you should really put some thought into whether GET should be used for stuff you're POST-ing, for security reasons.It's ugly and I wouldn't recommended it as a final solution when pushing code live, but while building rest functions, it's sometimes handy to have a 'catch-all' parameter grabber:Someone creative could probably even add to it to handle command line parameters or whatever comes from your IDE.  Once you decide what a given rest-function is doing, you can pick one appropriate for that given call to make sure you get what you need for the deploy version.

This assumes 'REQUEST_METHOD' is set.

Best Practices: working with long, multiline strings in PHP?

Andrew

[Best Practices: working with long, multiline strings in PHP?](https://stackoverflow.com/questions/1848945/best-practices-working-with-long-multiline-strings-in-php)

Note: I'm sorry if this is an extremely simple question but I'm somewhat obsessive compulsive over the formatting of my code.I have a class that has a function that returns a string that will make up the body text of an email. I want this text formatted so it looks right in the email, but also so it doesn't make my code look funky. Here's what I mean:but it could also be written as:but what's the deal with new lines and carriage returns? What's the difference? Is \n\n the equivalent of \r\r or \n\r? Which should I use when I'm creating a line gap between lines?Then there's the option of output buffering and heredoc syntax.How do you deal with using long multiline strings in your objects?

2009-12-04 18:52:46Z

Note: I'm sorry if this is an extremely simple question but I'm somewhat obsessive compulsive over the formatting of my code.I have a class that has a function that returns a string that will make up the body text of an email. I want this text formatted so it looks right in the email, but also so it doesn't make my code look funky. Here's what I mean:but it could also be written as:but what's the deal with new lines and carriage returns? What's the difference? Is \n\n the equivalent of \r\r or \n\r? Which should I use when I'm creating a line gap between lines?Then there's the option of output buffering and heredoc syntax.How do you deal with using long multiline strings in your objects?You should use HEREDOC or NOWDOC.The difference between Heredoc and Nowdoc is that PHP code embedded in a heredoc gets executed, while PHP code in Nowdoc will be printed out as is.In this case $text will have the value My $var.Note: before the closing EOT; there should be no spaces or tabs. otherwise you will get an errorI use similar system as pix0r and I think that makes the code quite readable. Sometimes I would actually go as far as separating the line breaks in double quotes and use single quotes for the rest of the string. That way they stand out from the rest of the text and variables also stand out better if you use concatenation rather than inject them inside double quoted string. So I might do something like this with your original example:Regarding the line breaks, with email you should always use \r\n. PHP_EOL is for files that are meant to be used in the same operating system that php is running on.I use templates for long text:email-template.txt containsIn PHP I do this:Adding \n and/or \r in the middle of the string, and having a very long line of code, like in second example, doesn't feel right : when you read the code, you don't see the result, and you have to scroll.In this kind of situations, I always use Heredoc (Or Nowdoc, if using PHP >= 5.3) : easy to write, easy to read, no need for super-long lines, ...For instance :Just one thing : the end marker (and the ';' after it) must be the only thing on its line : no space/tab before or after !Sure, you could use HEREDOC, but as far as code readability goes it's not really any better than the first example, wrapping the string across multiple lines.If you really want your multi-line string to look good and flow well with your code, I'd recommend concatenating strings together as such:This might be slightly slower than HEREDOC or a multi-line string, but it will flow well with your code's indentation and make it easier to read.I like this method a little more for Javascript but it seems worth including here because it has not been mentioned yet.For smaller things, I find it is often easier to work with array structures compared to concatenated strings.Related: implode vs concat performanceThe one who believes thatis multiline string is wrong. That's two strings with concatenation operator, not a multiline string. Such concatenated strings cannot be used as keys of pre-defined arrays, for example. Unfortunately php does not offer real multiline strings in form ofonly HEREDOC and NOWDOC syntax, which is more suitable for templates, because nested code indent is broken by such syntax.you can also use: In regards to your question about newlines and carriage returns:I would recommend using the predefined global constant PHP_EOL as it will solve any cross-platform compatibility issues.This question has been raised on SO beforehand and you can find out more information by reading "When do I use the PHP constant PHP_EOL"No one here seemed to actualy answer this question, so here I am.\r represents 'carriage-return'\n represents 'line-feed'The actual reason for them goes back to typewriters. As you typed the 'carriage' would slowly slide, character by character, to the right of the typewriter. When you got to the end of the line you would return the carriage and then go to a new line. To go to the new line, you would flip a lever which fed the lines to the type writer. Thus these actions, combined, were called carriage return line feed. So quite literally:A line feed,\n, means moving to the next line.A carriage return, \r, means moving the cursor to the beginning of the line.Ultimately Hello\n\nWorld should result in the following output on the screen:Where as Hello\r\rWorld should result in the following output.It's only when combining the 2 characters \r\n that you have the common understanding of knew line. I.E. Hello\r\nWorld should result in:And of course \n\r would result in the same visual output as \r\n.Originally computers took \r and \n quite literally. However these days the support for carriage return is sparse. Usually on every system you can get away with using \n on its own. It never depends on the OS, but it does depend on what you're viewing the output in.Still I'd always advise using \r\n wherever you can!

Print array to a file

Atif Mohammed Ameenuddin

[Print array to a file](https://stackoverflow.com/questions/2628798/print-array-to-a-file)

I would like to print an array to a file.I would like the file to look exactly similar like how a code like this looks.print_r ($abc); assuming $abc is an array.Is there any one lines solution for this rather than regular for each look.P.S - I currently use serialize but i want to make the files readable as readability is quite hard with serialized arrays.

2010-04-13 10:34:35Z

I would like to print an array to a file.I would like the file to look exactly similar like how a code like this looks.print_r ($abc); assuming $abc is an array.Is there any one lines solution for this rather than regular for each look.P.S - I currently use serialize but i want to make the files readable as readability is quite hard with serialized arrays.Either var_export or set print_r to return the output instead of printing it.Example from PHP manualYou can then save $results with file_put_contents. Or return it directly when writing to file:Just use print_r ; ) Read the documentation: So this is one possibility:file_put_contents($file, print_r($array, true), FILE_APPEND)You could try:Quick and simple do this:You can try this, $myArray as the ArrayI just wrote this function to output an array as text:Should output nicely formatted array.IMPORTANT NOTE:Beware of user input. This script was created for internal use. If you intend to use this for public use you will need to add some additional data validation to prevent script injection.This is not fool proof and should be used with trusted data only.The following function will output something like:here is the function (note: function is currently formatted for oop implementation.)Alternately you can use this script I also wrote a while ago:This one is nice to copy and paste parts of an array.( Would be near impossible to do that with serialized output )Not the cleanest function but it gets the job done.This one will output as follows:Also take care for user input.

Here is the code.just use file_put_contents('file',$myarray);

file_put_contents() works with arrays too.Here is what I learned in last 17 hours which solved my problem while searching for a similar solution.resources: http://php.net/manual/en/language.types.array.phpSpecific Code : What I took from above, $arr[fruit] can go inside " " (double quotes) and be accepted as string by PHP for further processing.Second Resource is the code in one of the answers above:This is the second thing I didn't knew, FILE_APPEND.What I was trying to achieve is get contents from a file, edit desired data and update the file with new data but after deleting old data.Now I only need to know how to delete data from file before adding updated data.About other solutions:Just so that it may be helpful to other people; when I tried var_export or Print_r or Serialize or Json.Encode, I either got special characters like => or ; or ' or [] in the file or some kind of error. Tried too many things to remember all errors. So if someone may want to try them again (may have different scenario than mine), they may expect errors.About reading file, editing and updating:I used fgets() function to load file array into a variable ($array) and then use unset($array[x]) (where x stands for desired array number, 1,2,3 etc) to remove particular array. Then use array_values() to re-index and load the array into another variable and then use a while loop and above solutions to dump the array (without any special characters) into target file.Below Should work nice and more readable using <pre>However op needs to write array as it is on file I have landed this page to find out a solution where I can write a array to file and than can easily read later using php again.I have found solution my self by using json_encode so anyone else is looking for the same here is the code:than readtest.phpindex.php

How can I remove a key and its value from an associative array?

gsquare567

[How can I remove a key and its value from an associative array?](https://stackoverflow.com/questions/3053517/how-can-i-remove-a-key-and-its-value-from-an-associative-array)

Given an associative array:How would I go about removing a certain key-value pair, given the key?

2010-06-16 13:14:01Z

Given an associative array:How would I go about removing a certain key-value pair, given the key?You can use unset:Example:Output:Use unset():Use this function to remove specific arrays of keys without modifying the original array:First param pass all array, second param set array of keys to remove.For example:Using unset:You may need two or more loops depending on your array:Consider this array:read more about array_diff: http://php.net/manual/en/function.array-diff.phpread more about array_splice: http://php.net/manual/en/function.array-splice.php

Best practice multi language website

Joshua - Pendo

[Best practice multi language website](https://stackoverflow.com/questions/19249159/best-practice-multi-language-website)

I've been struggling with this question for quite some months now, but I haven't been in a situation that I needed to explore all possible options before. Right now, I feel like it's time to get to know the possibilities and create my own personal preference to use in my upcoming projects.Let me first sketch the situation I'm looking forI'm about to upgrade/redevelop a content management system which I've been using for quite a while now. However, I'm feeling multi language is a great improvement to this system. Before I did not use any frameworks but I'm going to use Laraval4 for the upcoming project. Laravel seems the best choice of a cleaner way to code PHP. Sidenote: Laraval4 should be no factor in your answer. I'm looking for general ways of translation that are platform/framework independent.What should be translatedAs the system I am looking for needs to be as user friendly as possible the method of managing the translation should be inside the CMS. There should be no need to start up an FTP connection to modify translation files or any html/php parsed templates.Furthermore, I'm looking for the easiest way to translate multiple database tables perhaps without the need of making additional tables.What did I come up with myselfAs I've been searching, reading and trying things myself already. There are a couple of options I have. But I still don't feel like I've reached a best practice method for what I am really seeking. Right now, this is what I've come up with, but this method also has it side effects.So, there they are. My ideas so far. They don't even include localization options for dates etc yet, but as my server supports PHP5.3.2+ the best option is to use the intl extension as explained here: http://devzone.zend.com/1500/internationalization-in-php-53/ - but this would be of use in any later stadium of development. For now the main issue is how to have the best practics of translation of the content in a website.Besides everything I explained here, I still have another thing which I haven't decided yet, it looks like a simple question, but in fact it's been giving me headaches:URL Translation? Should we do this or not? and in what way?So.. if I have this url: http://www.domain.com/about-us and English is my default language. Should this URL be translated into http://www.domain.com/over-ons when I choose Dutch as my language? Or should we go the easy road and simply change the content of the page visible at /about. The last thing doesn't seem a valid option because that would generate multiple versions of the same URL, this indexing the content will fail the right way.Another option is using http://www.domain.com/nl/about-us instead. This generates at least a unique URL for each content. Also this would be easier to go to another language, for example http://www.domain.com/en/about-us and the URL provided is easier to understand for both Google and Human visitors. Using this option, what do we do with the default languages? Should the default language remove the language selected by default? So redirecting http://www.domain.com/en/about-us to http://www.domain.com/about-us ... In my eyes this is the best solution, because when the CMS is setup for only one language there is no need to have this language identification in the URL.And a third option is a combination from both options: using the "language-identification-less"-URL (http://www.domain.com/about-us) for the main language. And use an URL with a translated SEO slug for sublanguages: http://www.domain.com/nl/over-ons & http://www.domain.com/de/uber-unsI hope my question gets your heads cracking, they cracked mine for sure! It did help me already to work things out as a question here. Gave me a possibility to review the methods I've used before and the idea's I'm having for my upcoming CMS.I would like to thank you already for taking the time to read this bunch of text!// Edit #1: I forgot to mention: the __() function is an alias to translate a given string. Within this method there obviously should be some sort of fallback method where the default text is loaded when there are not translations available yet. If the translation is missing it should either be inserted or the translation file should be regenerated.

2013-10-08 13:33:26Z

I've been struggling with this question for quite some months now, but I haven't been in a situation that I needed to explore all possible options before. Right now, I feel like it's time to get to know the possibilities and create my own personal preference to use in my upcoming projects.Let me first sketch the situation I'm looking forI'm about to upgrade/redevelop a content management system which I've been using for quite a while now. However, I'm feeling multi language is a great improvement to this system. Before I did not use any frameworks but I'm going to use Laraval4 for the upcoming project. Laravel seems the best choice of a cleaner way to code PHP. Sidenote: Laraval4 should be no factor in your answer. I'm looking for general ways of translation that are platform/framework independent.What should be translatedAs the system I am looking for needs to be as user friendly as possible the method of managing the translation should be inside the CMS. There should be no need to start up an FTP connection to modify translation files or any html/php parsed templates.Furthermore, I'm looking for the easiest way to translate multiple database tables perhaps without the need of making additional tables.What did I come up with myselfAs I've been searching, reading and trying things myself already. There are a couple of options I have. But I still don't feel like I've reached a best practice method for what I am really seeking. Right now, this is what I've come up with, but this method also has it side effects.So, there they are. My ideas so far. They don't even include localization options for dates etc yet, but as my server supports PHP5.3.2+ the best option is to use the intl extension as explained here: http://devzone.zend.com/1500/internationalization-in-php-53/ - but this would be of use in any later stadium of development. For now the main issue is how to have the best practics of translation of the content in a website.Besides everything I explained here, I still have another thing which I haven't decided yet, it looks like a simple question, but in fact it's been giving me headaches:URL Translation? Should we do this or not? and in what way?So.. if I have this url: http://www.domain.com/about-us and English is my default language. Should this URL be translated into http://www.domain.com/over-ons when I choose Dutch as my language? Or should we go the easy road and simply change the content of the page visible at /about. The last thing doesn't seem a valid option because that would generate multiple versions of the same URL, this indexing the content will fail the right way.Another option is using http://www.domain.com/nl/about-us instead. This generates at least a unique URL for each content. Also this would be easier to go to another language, for example http://www.domain.com/en/about-us and the URL provided is easier to understand for both Google and Human visitors. Using this option, what do we do with the default languages? Should the default language remove the language selected by default? So redirecting http://www.domain.com/en/about-us to http://www.domain.com/about-us ... In my eyes this is the best solution, because when the CMS is setup for only one language there is no need to have this language identification in the URL.And a third option is a combination from both options: using the "language-identification-less"-URL (http://www.domain.com/about-us) for the main language. And use an URL with a translated SEO slug for sublanguages: http://www.domain.com/nl/over-ons & http://www.domain.com/de/uber-unsI hope my question gets your heads cracking, they cracked mine for sure! It did help me already to work things out as a question here. Gave me a possibility to review the methods I've used before and the idea's I'm having for my upcoming CMS.I would like to thank you already for taking the time to read this bunch of text!// Edit #1: I forgot to mention: the __() function is an alias to translate a given string. Within this method there obviously should be some sort of fallback method where the default text is loaded when there are not translations available yet. If the translation is missing it should either be inserted or the translation file should be regenerated.There are three distinct aspects in a multilingual site:While they all interconnected in different ways, from CMS point of view they are managed using different UI elements and stored differently. You seem to be confident in your implementation and understanding of the first two. The question was about the latter aspect - "URL Translation? Should we do this or not? and in what way?"A very important thing is, don't get fancy with IDN. Instead favor transliteration (also: transcription and romanization). While at first glance IDN seems viable option for international URLs, it actually does not work as advertised for two reasons:I actually tried to IDN approach few years ago in a Yii based project (horrible framework, IMHO). I encountered both of the above mentioned problems before scraping that solution. Also, I suspect that it might be an attack vector.Basically you have two choices, that could be abstracted as:Lets say you pick http://site.tld/[:query].In that case you have one primary source of language: the content of [:query] segment; and two additional sources:First, you need to match the query to one of defined routing patterns (if your pick is Laravel, then read here).  On successful match of pattern you then need to find the language.You would have to go through all the segments of the pattern. Find the potential translations for all of those segments and determine which language was used. The two additional sources (cookie and header) would be used to resolve routing conflicts, when (not "if") they arise.Take for example: http://site.tld/blog/novinka.That's transliteration of "блог, новинка", that in English means approximately "blog", "latest".As you can already notice, in Russian "блог" will be transliterated as "blog". Which means that for the first part of [:query] you (in the best case scenario) will end up with ['en', 'ru'] list of possible languages.  Then you take next segment - "novinka". That might have only one language on the list of possibilities: ['ru']. When the list has one item, you have successfully found the language.But if you end up with 2 (example: Russian and Ukrainian) or more possibilities .. or 0 possibilities, as a case might be. You will have to use cookie and/or header to find the correct option.And if all else fails, you pick the site's default language.The alternative is to use URL, that can be defined as http://site.tld/[:language]/[:query]. In this case, when translating query, you do not need to guess the language, because at that point you already know which to use.There is also a secondary source of language: the cookie value. But here there is no point in messing with Accept-Language header, because you are not dealing with unknown amount of possible languages in case of "cold start" (when user first time opens site with custom query).Instead you have 3 simple, prioritized options:When you have the language, you simply attempt to translate the query, and if translation fails, use the "default value" for that particular segment (based on routing results).Yes, technically you can combine both approaches, but that would complicate the process and only accommodate people who want to manually change URL of http://site.tld/en/news to http://site.tld/de/news and expect the news page to change to German.But even this case could probable be mitigated using cookie value (which would contain information about previous choice of language), to implement with less magic and hope.As you might already guessed, I would recommend http://site.tld/[:language]/[:query] as the more sensible option.Also in real word situation you would have 3rd major part in URL: "title". As in name of the product in online shop or headline of article in news site.Example: http://site.tld/en/news/article/121415/EU-as-global-reserve-currencyIn this case '/news/article/121415' would be the query, and the 'EU-as-global-reserve-currency' is title. Purely for SEO purposes.Kinda, but not by default. I am not too familiar with it, but from what I have seen, Laravel uses simple pattern-based routing mechanism. To implement multilingual URLs you will probably have to extend core class(es), because multilingual routing need access to different forms of storage (database, cache and/or configuration files).As a result of all you would end up with two valuable pieces of information: current language and translated segments of query. These values then can be used to dispatch to the class(es) which will produce the result.Basically, the following URL: http://site.tld/ru/blog/novinka (or the version without '/ru') gets turned into something like Which you just use for dispatching:.. or some variation of it, depending on the particular implementation.At work, we recently went through implementation of i18n on a couple of our properties, and one of the things we kept struggling with was the performance hit of dealing with on-the-fly translation, then I discovered this great blog post by Thomas Bley which inspired the way we're using i18n to handle large traffic loads with minimal performance issues.Instead of calling functions for every translation operation, which as we know in PHP is expensive, we define our base files with placeholders, then use a pre-processor to cache those files (we store the file modification time to make sure we're serving the latest content at all times).Thomas uses {tr} and {/tr} tags to define where translations start and end. Due to the fact that we're using TWIG, we don't want to use { to avoid confusion so we use [%tr%] and [%/tr%] instead. Basically, this looks like this:Note that Thomas suggests using the base English in the file. We don't do this because we don't want to have to modify all of the translation files if we change the value in English.Then, we create an INI file for each language, in the format placeholder = translated:It would be trivial to allow a user to modify these inside the CMS, just get the keypairs by a preg_split on \n or = and making the CMS able to write to the INI files.Essentially, Thomas suggests using a just-in-time 'compiler' (though, in truth, it's a preprocessor) function like this to take your translation files and create static PHP files on disk. This way, we essentially cache our translated files instead of calling a translation function for every string in the file:Note: I didn't verify that the regex works, I didn't copy it from our company server, but you can see how the operation works.Again, this example is from Thomas Bley, not from me:We store the language in a cookie (or session variable if we can't get a cookie) and then retrieve it on every request. You could combine this with an optional $_GET parameter to override the language, but I don't suggest subdomain-per-language or page-per-language because it'll make it harder to see which pages are popular and will reduce the value of inbound links as you'll have them more scarcely spread.We like this method of preprocessing for three reasons:We just add a column for content in our database called language, then we use an accessor method for the LANG constant which we defined earlier on, so our SQL calls (using ZF1, sadly) look like this:Our articles have a compound primary key over id and language so article 54 can exist in all languages. Our LANG defaults to en_US if not specified.I'd combine two things here, one is a function in your bootstrap which accepts a $_GET parameter for language and overrides the cookie variable, and another is routing which accepts multiple slugs. Then you can do something like this in your routing:These could be stored in a flat file which could be easily written to from your admin panel. JSON or XML may provide a good structure for supporting them.PHP-based On-The-Fly TranslationI can't see that these offer any advantage over pre-processed translations.Front-end Based TranslationsI've long found these interesting, but there are a few caveats. For example, you have to make available to the user the entire list of phrases on your website that you plan to translate, this could be problematic if there are areas of the site you're keeping hidden or haven't allowed them access to.You'd also have to assume that all of your users are willing and able to use Javascript on your site, but from my statistics, around 2.5% of our users are running without it (or using Noscript to block our sites from using it).Database-Driven TranslationsPHP's database connectivity speeds are nothing to write home about, and this adds to the already high overhead of calling a function on every phrase to translate. The performance & scalability issues seem overwhelming with this approach.I suggest you not to invent a wheel and use gettext and ISO languages abbrevs list. Have you seen how i18n/l10n implemented in popular CMSes or frameworks? Using gettext you will have a powerful tool where many of cases is already implemented like plural forms of numbers. In english you have only 2 options: singular and plural. But in Russian for example there are 3 forms and its not as simple as in english.Also many translators already have experience to work with gettext.Take a look to CakePHP or Drupal . Both multilingual enabled. CakePHP as example of interface localization and Drupal as example of content translation.For l10n using database isn't the case at all. It will be tons on queries. Standard approach is to get all l10n data in memory in early stage (or during first call to i10n function if you prefer lazy loading). It can be reading from .po file or from DB all data at once. And than just read requested strings from array.If you need to implement online tool to translate interface you can have all that data in DB but than still save all data to file to work with it. To reduce amount of data in memory you can split all your translated messages/strings into groups and than load only that groups you need if it will be possible.So you totally right in your #3. With one exception: usually it is one big file not a per-controller file or so. Because it is best for performance to open one file. You probably know that some highloaded web apps compiles all PHP code in one file to avoid file operations when include/require called.About URLs. Google indirectly suggest to use translation: Also i think you need to redirect user to default language prefix e.g. http://examlpe.com/about-us will redirects to http://examlpe.com/en/about-us

But if your site use only one language so you don't need prefixes at all.Check out:

http://www.audiomicro.com/trailer-hit-impact-psychodrama-sound-effects-836925

http://nl.audiomicro.com/aanhangwagen-hit-effect-psychodrama-geluidseffecten-836925

http://de.audiomicro.com/anhanger-hit-auswirkungen-psychodrama-sound-effekte-836925Translating content is more difficult task. I think it will be some differences with different types of content e.g. articles, menu items etc. But in #4 you're in the right way. Take a look in Drupal to have more ideas. It have clear enough DB schema and good enough interface for translating. Like you creating article and select language for it. And than you can later translate it to other languages.I think it isn't problem with URL slugs. You can just create separate table for slugs and it will be right decision. Also using right indexes it isn't problem to query table even with huge amount of data.

And it wasn't full text search but string match if will use varchar data type for slug and you can have an index on that field too.PS Sorry, my English is far from perfect though.It depends on how much content your website has. At first I used a database like all other people here, but it can be time-consuming to script all the workings of a database. I don't say that this is an ideal method and especially if you have a lot of text, but if you want to do it fast without using a database, this method could work, though, you can't allow users to input data which will be used as translation-files. But if you add the translations yourself, it will work:Let's say you have this text: You can input this in a database with translations, but you can also do this:Now, if your website uses a cookie, you have this for example:To make it easy let's transform it in a code which can easily be used:If your cookie language is Welsh and you have this piece of code:The result of this will be:If you need to add a lot of translations for your website and a database is too consuming, using an array can be an ideal solution.I will suggest you not to really depend of database for translation it could be really a messy task and could be a extreme problem in case of data encoding.I had face similar issue while ago and written following class to solve my problem{a:1} is replaced by 1st argument passed to method Locale::translate('key_name','arg1')

{a:2} is replaced by 2nd argument passed to method Locale::translate('key_name','arg1','arg2')Just a sub answer:

Absolutely use translated urls with a language identifier in front of them:   http://www.domain.com/nl/over-ons

Hybride solutions tend to get complicated, so I would just stick with it. Why? Cause the url is essential for SEO. About the db translation: Is the number of languages more or less fixed? Or rather unpredictable and dynamic? If it is fixed, I would just add new columns, otherwise go with multiple tables.But generally, why not use Drupal? I know everybody wants to build their own CMS cause it's faster, leaner, etc. etc. But that is just really a bad idea!I had the same probem a while ago, before starting using Symfony framework.URLs should be translated using the stored slugs in the translation table.Final wordsit is always good to research the best practices, but do not reinvent the wheel. just take and use the components from well known frameworks and use them.take a look at Symfony translation component. It could be a good code base for you.I am not going to attempt to refine the answers already given. Instead I will tell you about the way my own OOP PHP framework handles translations.Internally, my framework use codes like en, fr, es, cn and so on. An array holds the languages supported by the website: array('en','fr','es','cn')

The language code is passed via $_GET (lang=fr) and if not passed or not valid, it is set to the first language in the array. So at any time during program execution and from the very beginning, the current language is known.It is useful to understand the kind of content that needs to be translated in a typical application:1) error messages from classes (or procedural code)

2) non-error messages from classes (or procedural code)

3) page content (usually store in a database)

4) site-wide strings (like website name)

5) script-specific stringsThe first type is simple to understand. Basically, we are talking about messages like "could not connect to the database ...". These messages only need to be loaded when an error occurs. My manager class receives a call from the other classes and using the information passed as parameters simply goes to relevant the class folder and retrieves the error file.The second type of error message is more like the messages you get when the validation of a form went wrong. ("You cannot leave ... blank" or "please choose a password with more than 5 characters"). The strings need to be loaded before the class runs.I know what is For the actual page content, I use one table per language, each table prefixed by the code for the language. So en_content is the table with English language content, es_content is for spain, cn_content for China and fr_content is the French stuff.The fourth kind of string is relevant throughout your website. This is loaded via a configuration file named using the code for the language, that is en_lang.php, es_lang.php and so on. In the global language file you will need to load the translated languages such as array('English','Chinese', 'Spanish','French') in the English global file and array('Anglais','Chinois', 'Espagnol', 'Francais') in the French file. So when you populate a dropdown for language selection, it is in the correct language ;)Finally you have the script-specific strings. So if you write a cooking application, it might be "Your oven was not hot enough". In my application cycle, the global language file is loaded first. In there you will find not just global strings (like "Jack's Website") but also settings for some of the classes. Basically anything that is language or culture-dependent. Some of the strings in there include masks for dates (MMDDYYYY or DDMMYYYY), or ISO Language Codes. In the main language file, I include strings for individual classes becaue there are so few of them. The second and last language file that is read from disk is the script language file. lang_en_home_welcome.php is the language file for the home/welcome script. A script is defined by a mode (home) and an action (welcome). Each script has its own folder with config and lang files.The script pulls the content from the database naming the content table as  explained above. If something goes wrong, the manager knows where to get the language-dependent error file. That file is only loaded in case of an error. So the conclusion is obvious. Think about the translation issues before you start developing an application or framework. You also need a development workflow that incorporates translations. With my framework, I develop the whole site in English and then translate all the relevant files. Just a quick final word on the way the translation strings are implemented. My framework has a single global, the $manager, which runs services available to any other service. So for example the form service gets hold of the html service and uses it to write the html. One of the services on my system is the translator service. $translator->set($service,$code,$string) sets a string for the current language. The language file is a list of such statements. $translator->get($service,$code) retrieves a translation string. The $code can be numeric like 1 or a string like 'no_connection'. There can be no clash between services because each has its own namespace in the translator's data area. I post this here in the hope it will save somebody the task of reinventing the wheel like I had to do a few long years ago.I've been asking myself related questions over and over again, then got lost in formal languages... but just to help you out a little I'd like to share some findings:I recommend to give a look at advanced CMS Typo3 for PHP  (I know there is a lot of stuff but thats the one I think is most mature)Plone in PythonIf you find out that the web in 2013 should work different then, start from scratch. That would mean to put together a team of highly skilled/experienced people to build a new CMS.

May be you'd like to give a look at polymer for that purpose.If it comes to coding and multilingual websites / native language support, I think every programmer should have a clue about unicode. If you don't know unicode you'll most certainly mess up your data. Do not go with the thousands of ISO codes. They'll only save you some memory. But you can do literally everything with UTF-8 even store chinese chars. But for that you'd need to store either 2 or 4 byte chars that makes it basically a utf-16 or utf-32.If it's about URL encoding, again there you shouldn't mix encodings and be aware that at least for the domainname there are rules defined by different lobbies that provide applications like a browser. e.g. a Domain could be very similar like:ьankofamerica.com or bankofamerica.com samesamebutdifferent ;)Of course you need the filesystem to work with all encodings. Another plus for unicode using utf-8 filesystem. If its about translations, think about the structure of documents. e.g. a book or an article. You have the docbook specifications to understand about those structures. But in HTML its just about content blocks. So you'd like to have a translation on that level, also on webpage level or domain level. 

So if a block doesn't exist its just not there, if a webpage doesn't exist you'll get redirected to the upper navigation level. If a domain should be completely different in navigation structure, then.. its a complete different structure to manage.

This can already be done with Typo3. If its about frameworks, the most mature ones I know, to do the general stuff like MVC(buzzword I really hate it! Like "performance" If you want to sell something, use the word performance and featurerich and you sell... what the hell) is Zend. It has proven to be a good thing to bring standards to php chaos coders. But, typo3 also has a Framework besides the CMS. Recently it has been redeveloped and is called flow3 now. The frameworks of course cover database abstraction, templating and concepts for caching, but have individual strengths.If its about caching... that can be awefully complicated / multilayered. In PHP you'll think about accellerator, opcode, but also html, httpd, mysql, xml, css, js ... any kinds of caches. Of course some parts should be cached and dynamic parts like blog answers shouldn't. Some should be requested over AJAX with generated urls. JSON, hashbangs etc.Then, you'd like to have any little component on your website to be accessed or managed only by certain users, so conceptually that plays a big role. Also you'd like to make statistics, maybe have distributed system / a facebook of facebooks etc. any software to be built on top of your over the top cms ... so you need different type of databases inmemory, bigdata, xml, whatsoever.well, I think thats enough for now. If you haven't heard of either typo3 / plone or mentioned frameworks, you have enough to study. On that path you'll find a lot of solutions for questions you haven't asked yet. If then you think, lets make a new CMS because its 2013 and php is about to die anyway, then you r welcome to join any other group of developers hopefully not getting lost.Good luck!And btw. how about people will not having any websites anymore in the future? and we'll all be on google+? I hope developers become a little more creative and do something usefull(to not be assimilated by the borgle)//// Edit ///

Just a little thought for your existing application:If you have a php mysql CMS and you wanted to embed multilang support. you could either use your table with an aditional column for any language or insert the translation with an object id and a language id in the same table or create an identical table for any language and insert objects there, then make a select union if you want to have them all displayed. For the database use utf8 general ci and of course in the front/backend use utf8 text/encoding. 

I have used url path segments for urls in the way you already explaned like domain.org/en/about

you can map the lang ID to your content table. anyway you need to have a map of parameters for your urls so you'd like to define a parameter to be mapped from a pathsegment in your URL that would be e.g.domain.org/en/about/employees/IT/administrators/lookup configuration pageid| url1     | /about/employees/../..1     | /../about/employees../../map parameters to url pathsegment ""per say, thats been covered already in upper post.And to not forget, you'd need to "rewrite" the url to your generating php file that would in most cases be index.phpCreate Language Table ‘languages’:Fields:Create a table in database ‘content’:Fields:When user selects any language from dropdown or any area then save selected language id in session like,$_SESSION['language']=1;Now fetch data from database table ‘content’ based on language id stored in session.Detail may found here   http://skillrow.com/multilingual-website-in-php-2/As a person who live in Quebec where almost all site is french and english... i have try many if not most multilanguage plugin for WP... the one an only usefull solution that work nive with all my site is mQtranslate... i live and die with it !https://wordpress.org/plugins/mqtranslate/What about WORDPRESS + MULTI-LANGUAGE SITE BASIS(plugin) ?

the site will have structure: The plugin provides Interface for Translation all phrases, with simple logic:then it can be outputed:

echo translate('my_title', LNG); // LNG is auto-detectedp.s. however, check, if the plugin is still active.A really simple option that works with any website where you can upload Javascript is www.multilingualizer.comIt lets you put all text for all languages onto one page and then hides the languages the user doesn't need to see. Works well.

Using Default Arguments in a Function

renosis

[Using Default Arguments in a Function](https://stackoverflow.com/questions/9166914/using-default-arguments-in-a-function)

I am confused about default values for PHP functions. Say I have a function like this:What if I want to use the default argument for $x and set a different argument for $y? I have been experimenting with different ways and I am just getting more confused. For example, I tried these two:But both of those do not result in a proper default argument for $x. I have also tried to set it by variable name.I fully expected something like this to work. But it doesn't work as I expected at all. It seems like no matter what I do, I am going to have to end up typing in the default arguments anyway, every time I invoke the function. And I must be missing something obvious. 

2012-02-06 20:36:37Z

I am confused about default values for PHP functions. Say I have a function like this:What if I want to use the default argument for $x and set a different argument for $y? I have been experimenting with different ways and I am just getting more confused. For example, I tried these two:But both of those do not result in a proper default argument for $x. I have also tried to set it by variable name.I fully expected something like this to work. But it doesn't work as I expected at all. It seems like no matter what I do, I am going to have to end up typing in the default arguments anyway, every time I invoke the function. And I must be missing something obvious. I would propose changing the function declaration as follows so you can do what you want:This way, you can make a call like foo('blah', null, 'non-default y value'); and have it work as you want, where the second parameter $x still gets its default value.With this method, passing a null value means you want the default value for one parameter when you want to override the default value for a parameter that comes after it.As stated in other answers, If I have a method that can accept varying numbers of parameters, and parameters of varying types, I often declare the function similar to the answer shown by Ryan P.Here is another example (this doesn't answer your question, but is hopefully informative:Optional arguments only work at the end of a function call. There is no way to specify a value for $y in your function without also specifying $x. Some languages support this via named parameters (VB/C# for example), but not PHP.You can emulate this if you use an associative array for parameters instead of arguments -- i.e.Then call the function like so:It is actually possible:Whether you would want to do so is another story :)The reasons to avoid this solution are:But it can actually be useful in situations where:About the performance, a very simple test shows that using the Reflection API to get the default parameters makes the function call 25 times slower, while it still takes less than one microsecond. You should know if you can to live with that.Of course, if you mean to use it in a loop, you should get the default value beforehand.The only way I know of doing it is by omitting the parameter. The only way to omit the parameter is to rearrange the parameter list so that the one you want to omit is after the parameters that you HAVE to set. For example:Then you can call foo like:This will result in:You can't do this directly, but a little code fiddling makes it possible to emulate.I recently had this problem and found this question and answers.  While the above questions work, the problem is that they don't show the default values to IDEs that support it (like PHPStorm).if you use null you won't know what the value would be if you leave it blank.The solution I prefer is to put the default value in the function definition also:The only difference is that I need to make sure they are the same - but I think that's a small price to pay for the additional clarity.This is case, when object are better - because you can set up your object to hold x and y , set up defaults etc. Approach with array is near to create object ( In fact, object is bunch of parameters and functions which will work over object, and function taking array will work over some bunch ov parameters )Cerainly you can always do some tricks to set null or something like this as defaultYou can also check if you have an empty string as argument so you can call like:foo('blah', "", 'non-default y value', null);Below the function:It doesn't matter if you fill null or "", you will still get the same result.Pass an array to the function, instead of individual parameters and use null coalescing operator (PHP 7+).Below, I'm passing an array with 2 items. Inside the function, I'm checking if value for item1 is set, if not assigned default vault.

Array copy values to keys in PHP [duplicate]

kusanagi

[Array copy values to keys in PHP [duplicate]](https://stackoverflow.com/questions/6175548/array-copy-values-to-keys-in-php)

I have this array:Is there a simple method to convert the array to the following?

2011-05-30 11:14:20Z

I have this array:Is there a simple method to convert the array to the following?$final_array = array_combine($a, $a);  http://php.net/array-combineP.S. 

 * Be careful with similar values. For example:

 array('one','two','one') may be problematic if converted like duplicate keys:

 array('one'=>..,'two'=>..,'one'=>...)Be careful, the solution proposed with $a = array_combine($a, $a); will not work for numeric values.I for example wanted to have a memory array(128,256,512,1024,2048,4096,8192,16384) to be the keys as well as the values however PHP manual states:So I solved it like this:

