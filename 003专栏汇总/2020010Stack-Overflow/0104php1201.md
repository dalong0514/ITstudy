ZZPLKF

[PHP how to get the base domain/url?](https://stackoverflow.com/questions/17201170/php-how-to-get-the-base-domain-url)

For example with the function above, it works fine if I work with the same directory, but if I make a sub directory, and work in it, it will give me the location of the sub directory also for example. I just want example.com but it gives me example.com/sub if I'm working in the folder sub. If I'm using the main directory,the function works fine. Is there an alternative to $_SERVER['HTTP_HOST']?Or how could I fix my function/code to get the main url only? Thanks.

2013-06-19 20:56:43Z

For example with the function above, it works fine if I work with the same directory, but if I make a sub directory, and work in it, it will give me the location of the sub directory also for example. I just want example.com but it gives me example.com/sub if I'm working in the folder sub. If I'm using the main directory,the function works fine. Is there an alternative to $_SERVER['HTTP_HOST']?Or how could I fix my function/code to get the main url only? Thanks.Use SERVER_NAME.You could use PHP's parse_url() functionShortest solution:Use parse_url() like this:Here is another shorter option:First trim the trailing backslash (/) from the URL. For example, If the URL is http://www.google.com/ then the resultant URL will be http://www.google.comIf scheme not included in the URL, then prepend it. So for example if the URL is www.google.com then the resultant URL will be http://www.google.comGet the parts of the URL. Now remove www. from the URLYour final domain without http and www is now stored in $domain variable.Examples:http://www.google.com => google.comhttps://www.google.com => google.comwww.google.com => google.comhttp://google.com => google.com2 lines to solve itPlease try this:I hope this will help you.Tenary Operator helps keep it short and simple.

create array tree from array list

Thunderstriker

[create array tree from array list](https://stackoverflow.com/questions/4196157/create-array-tree-from-array-list)

i have a list like this:but way bigger so i need a efficient way to make this into a tree like structure like this:i cannot use things like nested set or things like that becoas i can add left and right values in my database.

any ideas? 

2010-11-16 16:04:03Z

i have a list like this:but way bigger so i need a efficient way to make this into a tree like structure like this:i cannot use things like nested set or things like that becoas i can add left and right values in my database.

any ideas? oke this is how i solved it:small fix if you need more than 1 parentid[0] element :)One more rework of Thunderstriker's variant  - all the logic in one function:Playground: https://www.tehplayground.com/xOqMQd11W96XljZVHere is my adaptation from arthur's rework:Use:I created an unusual ('while-based' instead of recursive) but multidimensional sorting function that walk the array until there aren't any orphans. Here the function:Recommendation: the key of each element of the array has to be the id fo the element itself. Example:Usage: the function need $a (the array), $parent_key (the name of the column where the id of the father is saved), $children_key (the name of the column where the children will be move). It returns nothing (the array is changed by reference). Example:One way to do this is with a recursive function that first finds all the bottom values of the list, adding them to a new array. Then for each new id, you use the same function on that id, taking the returned array and stuffing it in that item's new children array. Finally, you return your new array.I won't do all the work for you, but the function's parameters will look something like:function recursiveChildren($items_array, $parent_id = 0)Essentially, it'll find all the ones with parent of 0, then for each of those it'll find all the ones with that id as the parent, and for each of those.. so on.The end result should be what you are looking for.Is there any reason this three pass method wouldn't work?  I didn't do any tests to compare speed to some of the recursive solutions, but it seemed more straight forward.  If your initial array is already associative with the IDs being the key, then you can skip the first foreach().

PHP replacing special characters like à->a, è->e

Zoran Đukić

[PHP replacing special characters like à->a, è->e](https://stackoverflow.com/questions/10152894/php-replacing-special-characters-like-%c3%a0-a-%c3%a8-e)

I have php document signup.php which save the content from form (in form.php document) to MySQL base. The problem arises when I want to reformat the input content. I want do decode UTF-8 charachters like  à->a.Why it works perfectly for $chain, but for $first_name or $last_name doesnt work?Also i trybut the problem, as you can see, is same!

2012-04-14 10:32:38Z

I have php document signup.php which save the content from form (in form.php document) to MySQL base. The problem arises when I want to reformat the input content. I want do decode UTF-8 charachters like  à->a.Why it works perfectly for $chain, but for $first_name or $last_name doesnt work?Also i trybut the problem, as you can see, is same!There's a much easier way to do this, using iconv - from the user notes, this seems to be what you want to do: characters transliterationBe very conscientious with your character encodings, so you are keeping the same encoding at all stages in the process - front end, form submission, encoding of the source files. Default encoding in PHP and in forms is ISO-8859-1, before PHP 5.4 where it changed to be UTF8 (finally!). There's a couple of functions you can play around with for ideas. First is from CakePHP's inflector class, called slug:It depends on a self::$_transliteration array which is similar to what you were doing in your question - you can see the source for inflector on github. Another is a function I use personally, which comes from here.What those functions do is transliterate and create 'slugs' from arbitrary text input, which is a very very useful thing to have in your toolchest when making web apps. Hope this helps!Here is a way to have some flexibility in what should be discarded and what should be replaced.

This is how I currently do it.As of PHP >= 5.4.0The string $chain is in the same character encoding as the characters in the array - it's possible, even likely, that the $first_name string is in a different encoding, and so those characters don't match. You might want to try using the multibyte string functions instead.Try mb_convert_encoding. You might also want to try using HTML_ENTITIES as the to_encoding parameter, then you don't need to worry about how the characters will get converted - it will be very predictable.Assuming your input to this script is in UTF-8, probably not a bad place to start...Wish I found this thread sooner. The function I made (that took me way too long) is below:CodeIgniter way:This function uses a companion config file application/config/foreign_chars.php to define the to and from array for transliteration.https://www.codeigniter.com/user_guide/helpers/text_helper.html#ascii_to_entitiesSimple function. Transform strings like 'Ábç Éfg' to 'abc_efg' 

Adding 1 hour to time variable

paulcol.

[Adding 1 hour to time variable](https://stackoverflow.com/questions/8552106/adding-1-hour-to-time-variable)

This simple thing has wasted hours of my time trying to get it working, still havnt worked it out...i have I want to add an hour to that...So, I've tried:None of the above worked.Can you guys help me out?Thanks.

2011-12-18 13:43:26Z

This simple thing has wasted hours of my time trying to get it working, still havnt worked it out...i have I want to add an hour to that...So, I've tried:None of the above worked.Can you guys help me out?Thanks.Worked for me..Explanation:strtotime('10:09') creates a numerical timestamp in seconds, something like 1510450372. Simply add or remove the amount of seconds you need and use date() to convert it back into a human readable format.time() also creates a numerical timestamp but for right now. You can use it in the same way.You can do like thisCheck PHP manual for strtotime(), strftime() and date() for details.BTW, in your initial code, you need to add some quotes otherwise you will get PHP syntax errors:try this it is worked for me.for this problem please follow bellow code:It is weird that no one has suggested the OOP way:ORORExtract it in string with format:I hope it helpsYou can use:Or date_add: http://www.php.net/manual/en/datetime.add.phpSimple and smart solution: Beware of adding 3600!! may be a problem on day change because of unix timestamp format uses moth before day.e.g. 2012-03-02 23:33:33 would become 2014-01-13 13:00:00 by adding 3600 better use mktime and date functions they can handle this and things like adding 25 hours etc.You can try this code:

How to set auto height in phpexcel?

bungdito

[How to set auto height in phpexcel?](https://stackoverflow.com/questions/6054444/how-to-set-auto-height-in-phpexcel)

I am using phpexcel to generate excel document with PHP.

the question is, how to make auto height row using phpexcel?

many thanks :)

2011-05-19 06:00:02Z

I am using phpexcel to generate excel document with PHP.

the question is, how to make auto height row using phpexcel?

many thanks :)Should set the row height to 'auto' for row 1.To change height of all rows to auto you can do:You can set it by using following code,

Getting GET「?」variable in laravel

justmyfreak

[Getting GET「?」variable in laravel](https://stackoverflow.com/questions/15081090/getting-get-variable-in-laravel)

Hello I'm creating API using REST and Laravel following this article.Everything works well as expected.Now, I want to map GET request to recognise variable using "?".For example: domain/api/v1/todos?start=1&limit=2Below is the content of my routes.php : my controllers/api/todos.php :How to recognise get parameter using "?" ?

2013-02-26 03:57:50Z

Hello I'm creating API using REST and Laravel following this article.Everything works well as expected.Now, I want to map GET request to recognise variable using "?".For example: domain/api/v1/todos?start=1&limit=2Below is the content of my routes.php : my controllers/api/todos.php :How to recognise get parameter using "?" ?Take a look at the $_GET and $_REQUEST superglobals. Something like the following would work for your example:EDITAccording to this post in the laravel forums, you need to use Input::get(), e.g.,See also: http://laravel.com/docs/input#inputI haven't tested on other Laravel versions but on 5.3-5.8 you reference the query parameter as if it were a member of the Request class.http://example.com/path?page=2We can also pass in a default value which is returned if a parameter doesn't exist. It's much cleaner than a ternary expression that you'd normally use with the request globalsThe default parameter is optional therefore one can omit itYou can read more in the official documentation https://laravel.com/docs/5.8/requestsWe have similar situation right now and as of this answer, I am using laravel 5.6 release.I will not use your example in the question but mine, because it's related though.I have route like this:Then in your controller method, make sure you include and this should be above your controller, most likely a default, if generated using php artisan, now to get variable from the url it should look like this:Regardless of the HTTP verb, the input() method may be used to retrieve user input.https://laravel.com/docs/5.6/requests#retrieving-inputHope this help.This is the best practice. This way you will get the variables from 

GET method as well as POST methodQuery params are used like this:In laravel 5.3 $start = Input::get('start'); returns NULLTo solve this In laravel 5.3I want to show the get param in my viewStep 1 : my routeStep 2 : Write a function inside your controllerNow you're returning the parameter that you passed to the viewStep 3 : Showing it in my ViewInside my view you i can simply echo it by usingSo If you have this in your urlhttp://127.0.0.1/yourproject/refral/this@that.comThen it will print this@that.com in you view filehope this helps someone.

Dynamically create PHP object based on string

Mat Kelly

[Dynamically create PHP object based on string](https://stackoverflow.com/questions/2201335/dynamically-create-php-object-based-on-string)

I would like to create an object in PHP based on a type defined by a string in a MySQL database. The database table has columns and sample data of:...with PHP data typesUsing only one query, I would like to SELECT a row by id and create an object of the type define the table's type column with other columns in the SELECTed row being assigned to the newly created object.I was thinking that using: But know of no way to dynamically create a type based on a string. How does one do this? 

2010-02-04 16:32:44Z

I would like to create an object in PHP based on a type defined by a string in a MySQL database. The database table has columns and sample data of:...with PHP data typesUsing only one query, I would like to SELECT a row by id and create an object of the type define the table's type column with other columns in the SELECTed row being assigned to the newly created object.I was thinking that using: But know of no way to dynamically create a type based on a string. How does one do this? You can do it quite easily and naturally:If your query is returning an associative array, you can assign properties using similar syntax:There's a very neat syntax you can use that I learned about a couple of months ago that does not rely on a temporary variable. Here's an example where I use a POST variable to load a specific class:In your specific case though, you would be able to solve it by using PDO. It has a fetch mode that allows the first column's value to be the class the row instantiates into.Works very well...as silkfire says, this can be achieved by using PDO specific modes, so here is an example. Using your same database values and defined objects:with a single query (you must name the field containing the class name first):this is cool but it gets cooler with a whileyou can define a constructor (which will be called after the values from database are assigned to properties) to work on those dynamically assigned properties, say by replacing a string with it's uppercased valueBelow is what I was looking for when I came to this thread. use {"objectName"} (brackets) to declare or reference the object name in the form of a string.This way of referring to the object seems to be interchangeable. I couldn't find the answer so i had to fool around with it Until I found a way.

Callback function using variables calculated outside of it

Breno Gazzola

[Callback function using variables calculated outside of it](https://stackoverflow.com/questions/4588714/callback-function-using-variables-calculated-outside-of-it)

Basically I'd like to do something like this:Is this actually possible? Calculating a variable outside of the anonymous function and using it inside?

2011-01-03 21:54:57Z

Basically I'd like to do something like this:Is this actually possible? Calculating a variable outside of the anonymous function and using it inside?You can use the use keyword to inherit variables from the parent scope. In your example, you could do the following:For more information, see the manual page on anonymous functions.use global variables i.e $GLOBAL['avg']

How long will my session last?

Keith Donegan

[How long will my session last?](https://stackoverflow.com/questions/1516266/how-long-will-my-session-last)

Can someone please tell me how long my session will last from the data below? - I'm not sure which one tells me

2009-10-04 12:17:07Z

Can someone please tell me how long my session will last from the data below? - I'm not sure which one tells meIn general you can say session.gc_maxlifetime specifies the maximum lifetime since the last change of your session data (not the last time session_start was called!). But PHP’s session handling is a little bit more complicated.Because the session data is removed by a garbage collector that is only called by session_start with a probability of session.gc_probability devided by session.gc_divisor. The default values are 1 and 100, so the garbage collector is only started in only 1% of all session_start calls. That means even if the the session is already timed out in theory (the session data had been changed more than session.gc_maxlifetime seconds ago), the session data can be used longer than that.Because of that fact I recommend you to implement your own session timeout mechanism. See my answer to How do I expire a PHP session after 30 minutes? for more details.This is the one. The session will last for 1440 seconds (24 minutes).If session.cookie_lifetime is 0, the session cookie lives until the browser is quit.EDIT: Others have mentioned the session.gc_maxlifetime setting. When session garbage collection occurs, the garbage collector will delete any session data that has not been accessed in longer than session.gc_maxlifetime seconds. To set the time-to-live for the session cookie, call session_set_cookie_params() or define the session.cookie_lifetime PHP setting. If this setting is greater than  session.gc_maxlifetime, you should increase session.gc_maxlifetime to a value greater than or equal to the cookie lifetime to ensure that your sessions won't expire.You're searching for gc_maxlifetime, see http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime for a description.Your session will last 1440 seconds which is 24 minutes (default).

array_splice() for associative arrays

Pekka

[array_splice() for associative arrays](https://stackoverflow.com/questions/1783089/array-splice-for-associative-arrays)

Say I have an associative array:and I want to introduce a new element into it:behind the 2nd item but preserving all the array keys:is there a function to do that? array_splice() won't cut it, it can work with numeric keys only.  

2009-11-23 13:19:15Z

Say I have an associative array:and I want to introduce a new element into it:behind the 2nd item but preserving all the array keys:is there a function to do that? array_splice() won't cut it, it can work with numeric keys only.  I think you need to do that manually:Based on soulmerge's answer I created this handy function:I hate to beat an old issue to death, it seems like some people have come up with some similar answers to mine already.  But I'd like to offer a version that I think is just a little more thorough.  This function is designed to feel and behave -exactly- like the regular array_splice() one, including its return value and how it handles invalid or negative values.  The only difference in that regard is that when defining a replacement array (or string or number) and not a length, you're allowed to use a null value for the length instead of having to pass count($array) as an argument.  It will assume that much from a null.  0 is still 0 though.The only difference in function is of course the $key value parameter, specifying what key to derive a position from to start making changes.  The $offset has been left in as well, now used as a modifier for that initial position.  Key conflicts will always favor the replacement array but also trigger a warning.  And if the key parameter is null or blank, the function will look only to the offset parameter and behave like array_splice, except while maintaining key values.  If the key is simply not found though, it will behave the same way array_splice does when given an offset that's beyond the array length; it appends it to the end.So then...This could also be a simpler way to replace individual array keys while maintaining its position, without having to go through array_values and array_combine.EDIT:

I just discovered, apparently array_merge() can't really tell the difference between associative array keys that just happen to be numbers, and regular sequential keys.  Merging the arrays using the + operator instead of array_merge() avoids this problem.Here's another way:I'm not sure if there is a function for that, but you can iterate through your array, store the index and use array_push.Well, you can rebuild the array from scratch.  But the easiest way to go through an associative array in a particular order is to keep a separate ordering array. Like so:There is a super simple way to do this that I came up with tonight.It will search for a key, splice it like normal and return the removed element like the normal function.Based on solution provided by ragulka and soulmerge, I created a slightly different function that let's you specify the 'key' instead of offset.Similar to @Luxian's answer I arrived at a similar method and set it up as array_splice_key. https://gist.github.com/4499117

This works like array_splice, but preserves the keys of the inserted array:You use this as you would array_splice, but just add a k at the end. (ragulka's answer is good, but this makes it easier to adapt existing code.) So, for exampleInstead of useThen $a will contain the result you're looking for.My solution mimics array_splice exactly, the second parameter is now String $key, instead of Int $offset,So to get the result you require you would do Output Important Note:It won't work if the keys are not in the array.My solution is (I love using native php array functions);It is pretty simple and you can turn it into a function easily.

PHP fwrite new line

Dynamiite

[PHP fwrite new line](https://stackoverflow.com/questions/15130289/php-fwrite-new-line)

I'm trying to write username and password to a new line in a txt file. 

The output should be something like this in the txt file.

I know this is not very secure but its just for learning purposesThis is what i have so farEDIT: Here's the solution

       

2013-02-28 07:56:08Z

I'm trying to write username and password to a new line in a txt file. 

The output should be something like this in the txt file.

I know this is not very secure but its just for learning purposesThis is what i have so farEDIT: Here's the solution

       

Use PHP_EOL which produces \r\n or \n// File outputYou append a newline to both the username and the password, i.e. the output would be something likeuse fwrite($fh,$user." ".$password."\n"); instead to have them both on one line.

Or use fputcsv() to write the data and fgetcsv() to fetch it. This way you would at least avoid encoding problems like e.g. with $username='Charles, III';...i.e. setting aside all the things that are wrong about storing plain passwords in plain files and using _GET for this type of operation (use _POST instead) ;-)Add this under this.          .How about you store it like this?

Maybe in username:password format, soThen you can use list($username,$password) = explode(':',file_get_contents('users.txt'));

to parse the data on your end.

Storing datetime as UTC in PHP/MySQL

JasonDavis

[Storing datetime as UTC in PHP/MySQL](https://stackoverflow.com/questions/1349280/storing-datetime-as-utc-in-php-mysql)

Everywhere I read about converting time to a user's timezone says that the best method is to store a date and time in UTC then just add the user's timezone offset to this time.How can I store a date in UTC time? I use the MySQL DATETIME field.  When adding a new record to MySQL in my PHP code I would use now() to insert into MySQL DATETIME.Would I need to use something different than now() to store UTC time?

2009-08-28 20:49:20Z

Everywhere I read about converting time to a user's timezone says that the best method is to store a date and time in UTC then just add the user's timezone offset to this time.How can I store a date in UTC time? I use the MySQL DATETIME field.  When adding a new record to MySQL in my PHP code I would use now() to insert into MySQL DATETIME.Would I need to use something different than now() to store UTC time?MySQL: UTC_TIMESTAMP()PHP: gmdate()Also PHP date_default_timezone_set() is used in PHP to set the current time zone for the script. You can set it to the client time zone so all the formatting functions return the time in his local time.In truth though I had a hard time getting this to work and always stumble into some gotcha. Eg. time information returned from MySQL is not formatted as 'UTC' so strtotime transforms it into a local time if you are not careful. I'm curious to hear if someone has a reliable solution for this problem, one that doesn't break when dates traverse media boundaries (HTTP->PHP->MySQL and MySQL->PHP->HTTP), also considering XML and RSS/Atom.I would suggest inserting the date in UTC time zone. This will save you a lot of headaches in the future with daylight saving problems.When I query my data I use the following PHP script:You can replace the DateTimeZone value with one of the available PHP timezones.NOW() gives you the time (including the timezone offset) of the system running your database. To get UTC date/time you should use UTC_TIMESTAMP() as described in the MySQL Reference Manual.https://dba.stackexchange.com/questions/20217/mysql-set-utc-time-as-default-timestampTo go along with @ypercube's comment that CURRENT_TIMESTAMP is stored as UTC but retrieved as the current timezone, you can affect your server's timezone setting with the --default_time_zone option for retrieval. This allows your retrieval to always be in UTC. By default, the option is 'SYSTEM' which is how your system time zone is set (which may or may not be UTC!):You can set this dynamically:Or permanently in your my.cnf: Restart your server, and you will see the change:As @Haluk suggests, you can store the date as a UTC datetime .

I'm complementing his answer for situations when the date you want to insert comes from PHP code, and adding some details about how it works :Actually datetime in PHP doesn't have a timezone associated to it. What is passed to PDO is just a string, in one of the formats recognized by MySQL, representing the date in UTC timezone. For example if the date is 2015-10-21 19:32:33 UTC+2:00, the code above just tells MySQL to insert 2015-10-21 17:32:33. gmtdate("Y-m-d H:i:s") gives you the current date in such a format. In any case, all you need to do is build the string representing the date you want to insert in UTC time.Then, when you read the date, you have to tell PHP that the timezone of the date you just retrieved is UTC. Use the code in Haluk's answer for this.Random: UTC_TIMESTAMP(6) for time with 6 digits of microseconds.MySQL 5.7+

PHP check if file is an image [duplicate]

sf89

[PHP check if file is an image [duplicate]](https://stackoverflow.com/questions/15408125/php-check-if-file-is-an-image)

Is there a way to make sure a received file is an image in PHP?Testing for the extension doesn't sound very secure to me as you could upload a script and change its extension to whatever you want.I've tried to use getimagesize too, but there might be something more suited for that particular problem.

2013-03-14 11:35:20Z

Is there a way to make sure a received file is an image in PHP?Testing for the extension doesn't sound very secure to me as you could upload a script and change its extension to whatever you want.I've tried to use getimagesize too, but there might be something more suited for that particular problem.Native way to get the mimetype:For PHP < 5.3 use mime_content_type()

For PHP >= 5.3 use finfo_open() or mime_content_type()Alternatives to get the MimeType are exif_imagetype and getimagesize, but these rely on having the appropriate libs installed. In addition, they will likely just return image mimetypes, instead of the whole list given in magic.mime.While mime_content_type is available from PHP 4.3 and is part of the FileInfo extension (which is enabled by default since PHP 5.3, except for Windows platforms, where it must be enabled manually, for details see here).If you don't want to bother about what is available on your system, just wrap all four functions into a proxy method that delegates the function call to whatever is available, e.g.The getimagesize() should be the most definite way of working out whether the file is an image:because this is a sample getimagesize() output:Using file extension and getimagesize function to detect if uploaded file has right format is just the entry level check and it can simply bypass by uploading a file with true extension  and some byte of an image header but wrong content.for being secure and safe you may make thumbnail/resize (even with original image sizes) the uploaded picture and save this version instead the uploaded one.

Also its possible to get uploaded file content and search it for special character like <?php to find the file is image or not.

How do I reload a relation collection in laravel?

Benubird

[How do I reload a relation collection in laravel?](https://stackoverflow.com/questions/23364276/how-do-i-reload-a-relation-collection-in-laravel)

In laravel, after using attach() or detach() to add or remove something from a relation, the collection has not changed. So if I have a model whose realation contains [1, 2], after this:it will still contain [1, 2]! How do I refresh it?

2014-04-29 12:09:52Z

In laravel, after using attach() or detach() to add or remove something from a relation, the collection has not changed. So if I have a model whose realation contains [1, 2], after this:it will still contain [1, 2]! How do I refresh it?You can easily tell laravel to do it with a single command:Will tell it to refresh the relation collection, and $model->relation will now show the correct values.If you want to force all your relations to reload on an as-needed basis and you're inside your model, you can use:It is possible to use Eloquent query builder:Conclusion: three solutions in hereeither just unset it and let the system reload on demand.or And let it be loaded on request.

Resize animated GIF file without destroying animation

riad

[Resize animated GIF file without destroying animation](https://stackoverflow.com/questions/718491/resize-animated-gif-file-without-destroying-animation)

I need to resize an animated GIF file without destroying the animation.How can I do it using PHP?

2009-04-05 07:02:39Z

I need to resize an animated GIF file without destroying the animation.How can I do it using PHP?if you have imagemagick access, you can do this:this is most likely possible with the imagemagick plugin if you don't have system() accessNOTE: this may create a larger filesize though a smaller dimensions image due to coalescing essentially deoptimizing the image.UPDATE:

If you don't have ImageMagick access, you should be able to use a combination of the following steps to resize an animated gif (assuming you have GD access):This is definitely much more intensive than the ImageMagick route, but it should be technically possible.If you get it working, please share with the world!Try GDEnhancer (Use ImageCraft). It only need GD Library, and it keep gif animationYou would need to decompose the gif into frames, thumbnail and re-assemble.  Have a look at ImageMagick and this tutorial.I have tried numerous examples of resizing animated GIFs with Imagick PHP module, but none of them worked for me.

Then after some debugging time at last I found the actual issue: the animation was lost upon saving image to disk, by $animation->writeImage($file_dst); or 

$animation->writeImages($file_dst, true);I've changed it to 

file_put_contents($file_dst, $animation->getImagesBlob());

and most examples started working immediately.Hope it helps someone.The example on http://www.php.net/manual/en/imagick.coalesceimages.php will resize your gif while retaining your frame timing. Something most of the other examples do not do.Other examples rebuild the gif while this one allows you to modify the frames of the image.If you have ImageMagick installed then you can use a single call to convert:I think I've got this in the bag.This solution is by no means perfect and contains some brute force here and there, but I was able to append my GD / PHP based image resizing script with enough functionality to support animations.The solution is heavily based on the excellent freeware libraries by László Zsidi - http://www.phpclasses.org/browse/author/283569.htmlYou can check out a quick demo and download the sources from http://forssto.com/gifexample/ (direct link: http://forssto.com/gifexample/gifanimresize.zip )KNOWN ISSUES: just creat 3 folder name 1.frame_output 2.images 3.resized_frame_output and download 2 encoder and decoder class from this below link 

1.Download class "GIFDecoder.class.php" from http://phpclasses.elib.com/browse/package/3234.html 

2.Download class "GIFEncoder.class.php" from http://phpclasses.betablue.net/browse/package/3163.html and then run the script name as "resize_animator.php" , creat a upload html file & Let Enjoy the script...save this script as .....index.php...............................save and this script as resize_animator.php...................................LETS ENJOY............uncomment the usleep function to see the work happen into those folders.its not necessary but i use it to see the functionality.If you dont have Imagemagick in your server you may want to try this : http://www.phpclasses.org/package/7353-PHP-Resize-animations-in-files-of-the-GIF-format.html The class is resizing GIF animations with GD. First parses the frames, then resizes them, after that it compiles them again into single file without losing its delay times,disposal methods, color tables etc. Try and if you find a bug or want to suggest some optimizations etc. you can use the class' forum or leave a comment on the page in my website. And I'll answer that ASAP.This all answers except trough ImageMagick didnt work for me. Scripts in answers before this are all full of errors.Even installing ImageMagick was difficult to manage so here is my experience.Here is how to install ImageMagick on windows 7 and xampp 1.7.4.

Note: Choose 64 bit (for win7), and when installing leave checked the option "Add to system path".And then follow:

http://www.creativearmory.com/tutorials/resize-animated-gifs-with-php-and-imagemagickI have lost hours on scripts at this posts, and ImageMagick and this tutorial was sucessfull in minutes.And one more note: my webserver have ImageMagick by default, so i guess most of servers have it too.GIF Animation Resizer is a simple one-class tool that will do the trick.Note: It uses a temporary folder to write out the separate frames. While it timestamps the frames, you may need to create a unique folder if you intend to use this on a server where multiple users will be resizing GIFs at the same time.Imagecraft is a reliable PHP GD library and extension that keeps GIF animation, edit and compose images in multiple layers and supports watermark.I used this function:}

How to get info on sent PHP curl request

user101289

[How to get info on sent PHP curl request](https://stackoverflow.com/questions/17092677/how-to-get-info-on-sent-php-curl-request)

I'm trying to debug a curl request to a webservice 'getToken' endpoint. I'm not 100% confident that the URL and the auth info is getting written in to the curl handle correctly. I'm trying to use curl_getinfo($ch, CURLINFO_HEADER_OUT); to capture the sent request, but it doesn't give me much info. Is there a way to get more in depth diagnostics about what the actual curl request looks like?Here's the code:This all works as far as it goes, but returns a 401 every time-- the API admin assures me that the username / pass I have is correct. I was wondering if I'm somehow getting the URL value wrong, or not sending the right username / pass, but this info isn't printed in the request data saved:You can see that the username/pass is not recorded (I assume for security). The endpoint URL  I think is the host value plus the start of the HEAD value, so webservices.mycompany.com/export/auth?The "Verbose Information" statement prints nothing. Not sure why on this either!Thanks for help.EDIT: added verbose mode from Php - Debugging Curl thanks to commenter immulatin

2013-06-13 16:47:54Z

I'm trying to debug a curl request to a webservice 'getToken' endpoint. I'm not 100% confident that the URL and the auth info is getting written in to the curl handle correctly. I'm trying to use curl_getinfo($ch, CURLINFO_HEADER_OUT); to capture the sent request, but it doesn't give me much info. Is there a way to get more in depth diagnostics about what the actual curl request looks like?Here's the code:This all works as far as it goes, but returns a 401 every time-- the API admin assures me that the username / pass I have is correct. I was wondering if I'm somehow getting the URL value wrong, or not sending the right username / pass, but this info isn't printed in the request data saved:You can see that the username/pass is not recorded (I assume for security). The endpoint URL  I think is the host value plus the start of the HEAD value, so webservices.mycompany.com/export/auth?The "Verbose Information" statement prints nothing. Not sure why on this either!Thanks for help.EDIT: added verbose mode from Php - Debugging Curl thanks to commenter immulatinIf you set CURLINFO_HEADER_OUT to true, outgoing headers are available in the array returned by curl_getinfo(), under request_header key:This will print:Note the auth details are base64-encoded:Also note that username and password need to be percent-encoded to escape any URL reserved characters (/, ?, &, : and so on) they might contain:You can also use a proxy tool like Charles to capture the outgoing request headers, data, etc. by passing the proxy details through CURLOPT_PROXY to your curl_setopt_array method.For example:curl_getinfo() must be added before closing the curl handlerThe request is printed in a request.txt with detailsYou can also use curl_getinfo() function. 

Get「Content-Type」header of request in PHP

CodeZombie

[Get「Content-Type」header of request in PHP](https://stackoverflow.com/questions/5519802/get-content-type-header-of-request-in-php)

I'm implementing a REST service in PHP. This service should be able to support multiple input and output formats (JSON, XML). For that reason I want to check the request headers "Accept" and "Content-Type" for the type of content sent and requested by the client.Accessing the "Accept" header is a simple as using $_SERVER['HTTP_ACCEPT']. But accessing the "Content-Type" header seems to be a difficult task. I searched the PHP documentation and the web, but the only solution offered was the use of the PHP function apache_request_headers() which is only supported when PHP is installed as an Apache module, which is not true in my case.So my question now: How can I access the header "Content-Type" of a request?

2011-04-01 23:09:17Z

I'm implementing a REST service in PHP. This service should be able to support multiple input and output formats (JSON, XML). For that reason I want to check the request headers "Accept" and "Content-Type" for the type of content sent and requested by the client.Accessing the "Accept" header is a simple as using $_SERVER['HTTP_ACCEPT']. But accessing the "Content-Type" header seems to be a difficult task. I searched the PHP documentation and the web, but the only solution offered was the use of the PHP function apache_request_headers() which is only supported when PHP is installed as an Apache module, which is not true in my case.So my question now: How can I access the header "Content-Type" of a request?Normal (GET) requests do not have a Content-Type header. For POST requests it would appear as $_SERVER["CONTENT_TYPE"], with a value like multipart/form-data or application/x-www-form-urlencoded.This is mandated by the CGI/1.1 specification: http://www.ietf.org/rfc/rfc3875.You'll need to manually instruct Apache to supply the Content-Type header (plus any other headers you want).Pop something like this in your .htaccess file or virtual host:And voila, you just synthesised your very own $_SERVER['HTTP_CONTENT_TYPE']!Edit:I assume you're running PHP as CGI with Apache so you can use verbs other than GET and POST, as most rest services do. If you're using another web server or largely unheard-of PHP SAPI, you'll need to use a similar trick; PHP as CGI simply doesn't have access to request headers outside the contents of $_SERVER, no matter what other mechanisms you use - $_ENV, apache_request_headers(), even the classes in the php_http extension will all be empty.You can also get the content type (like "text/html") with this :orUpdateLike Benjamin said, apache_request_headers is available with FastCGI from 5.4.0 and from internal PHP server since 5.5.7.

Environment driven database settings in Laravel?

Hailwood

[Environment driven database settings in Laravel?](https://stackoverflow.com/questions/13860283/environment-driven-database-settings-in-laravel)

I am moving over the the Laravel framework, but I am having trouble with the database settings,Specifically, I have my environments setup, and they are working fine for the application.php config file, however the database.php config file seems to have no effect.Even if I have a database.php config file in my environments folder it is never loaded, I put a bunch of invalid characters (keyboard mash) into the file to get php to throw an error, but it is never hit.Does Laravel not support environment based database settings? or am I doing this wrong?

2012-12-13 12:53:49Z

I am moving over the the Laravel framework, but I am having trouble with the database settings,Specifically, I have my environments setup, and they are working fine for the application.php config file, however the database.php config file seems to have no effect.Even if I have a database.php config file in my environments folder it is never loaded, I put a bunch of invalid characters (keyboard mash) into the file to get php to throw an error, but it is never hit.Does Laravel not support environment based database settings? or am I doing this wrong?You can definitely set database settings (and any other config setting) by environment.For Laravel 3 (for Laravel 4 and Laravel 5 see below):Firstly - you need to define $environments in your paths.php and set it to something like this:Laravel will automatically look for this variable, and if set, will use the associated configuration.Normally you have a config folder, with settings such as database.php and auth.phpNow just create a new folder for each Laravel_Env you plan to use (such as Development). You'll end up with a folder structure like this;You'll note I've only included database.php in each subfolder. Laravel will always load the default config settings first, then override them with any custom configs from the environments setting.Finally, in your development/database file, you would have something like this;p.s. I just tested this on the current 3.2.12 build of Laravel - and it definitely works.Bonus Tip: You can also automatically set an environment for Artisan, so you do not have to include the environment manually on each command line! To do this:You should end up with something like this:Artisan will now run using your development environment. If you deploy to a live server - re-run these steps to get the hostname() for the server, and you can configure a specific artisan config just for the server!For Laravel 4:The default environment is always production. But in your start.php file you can define additional environments.On Linux and Mac, you may determine your hostname by type hostname in your terminal - it will output the name of your computer. On Windows put dd(gethostname()); at the beginning of your routes.php file - and run the website once - it will show you the current hostname of your computer.To get the current environment as a variable in your application - read this SO answer here. Laravel 4: how can I get the environment value?For Laravel 5:There is single configuration file, called .env in your root directory.

Watch this laracast, config explained fully.if you are using the artisan ( command line for laravel ) every command you need to add orHeres how I have it setup for my needs. I personally need 4 different configurations:Since all 4 of my environments have distinctive directory structure, I can use php's magic constant __DIR__ to fetch the app directory and then use the strpos() function to do a simple check and return the appropriate environment. It will take care of Artisan environment as well, no need to manually type the environment, or add any machine names.Inside the Add a callback functionWe can also set and grab all the values at once into an array, and run a foreach loop.Tip: Since we using the strpos() function, which checks position of the first occurrence of the given value against the $haystack, and returns the position number. We don't really have to supply the entire path, we can simply add a distinctive value from each path to get the job done. Whether we work on one machine or multiple, the chances of having the same path to different environments is very slim. Or so I think. :)How to setup environment specific configuration is now in the official Laravel docs. I would recommend using their method instead of the accepted answer:Use the DotEnv approach detailed in the Laravel docs here.We are using the method Jeffrey Way recommended in this Laracasts lesson.I've been working away on this today, struggling to work out how best to do environmental settings for a database. In the end, after trying several methods, I fully agree with @troy-harvey that Jeffrey Way's recommendation of doing this is the best (for me at least). One thing I will add to this, and its what held me up so much today is (and correct me if I'm wrong) that you need to access the settings you are trying to over-ride in your environmental settings file by their corresponding array keys. I started out returning a simple array:within an app/config/staging/database.php. This had no effect and after much head scratching realised that you need to access the array as it is presented in app/config/database.php, like so:At least this is how I finally managed to get my settings being picked up. Adding this here in case anyone else is struggling to work this out. Upon realisation I understood how obvious a mistake I was making. Edited 01 July 2014An additional comment to this is that since 4.1 Laravel ships with an append_config() helper function for appending environmental configurations to the main config array. This would look like this for the example given above:In Laravel 3 to detect the environment it was:Which would return whatever was identified in the environments array found in the paths.php file.As mentioned before in Laravel 4 it is now:My way of doing it!If you're trying to use Laravel in a Windows environment, check out the settings in file .env in the top level folder for your Laravel project - these will override whatever database settings you have in config/database.phpIf you are on Laravel 4 here is a gist that will take you through the process step by step. Credits to @"The Shift Exchange"'s answer for guiding me to create it.

Twig extend template on condition

Dan Cearnau

[Twig extend template on condition](https://stackoverflow.com/questions/7861438/twig-extend-template-on-condition)

I use Symfony 2 with Twig and my question is pretty straightforward:In a view I want to extend one of the layouts based on a variable. If the variable is false I want to extend UdoWebsiteBundle::layout.html.twig and if it's true I want to extend UdoWebsiteBundle::layout_true.html.twig. Here is the code I tried:I get this error:Is there any other way to achieve this?

2011-10-22 17:44:43Z

I use Symfony 2 with Twig and my question is pretty straightforward:In a view I want to extend one of the layouts based on a variable. If the variable is false I want to extend UdoWebsiteBundle::layout.html.twig and if it's true I want to extend UdoWebsiteBundle::layout_true.html.twig. Here is the code I tried:I get this error:Is there any other way to achieve this?Try this one: Idea taken from here: http://jorisdewit.ca/2011/08/27/extending-different-layouts-for-ajax-requests-in-twig-symfony2/To keep it neat you should use Twig dynamic inheritance support by using a variable, defined in your controller, as the base template:If the variable evaluates to a Twig_Template object, Twig will use it as the parent template.Define parent_template_var in your controller:http://twig.sensiolabs.org/doc/tags/extends.htmlAnswer from the official documentation:You cannot extends multiple template, that's why you've got the error, if you want to so, you need to push them in an array like below.{% extends ['MyAppCustomBundle::Layout/layout.html.twig', 'FOSUserBundle::layout.html.twig'] %}But you will need to use Twig version 1.2 to do it.

twig documentationThis all makes sense to do either this template or that template.But let me describe another situation. You have a profile form and a form where users can upload personal profile related documents. Since the profile form is already very long the documents moved to a new form. Everything works great. Now we want to use the bootstrap tabs to do Profile | Documents for user friendliness. Now I know because we are using two seperate forms if you submit the documents the changes on the profile won't save and vice versa.I have added the document form in the tab usingThe 'viewOnly': true is a query parameter and is not required by the action.My question now becomes if the profile tab renders the document template it must only show the upload widget and the submit where as when you go directly to the document page it must show the title and side bar and everything. So I did try That gave problems because you can't use extends within a if. Like you suggested in other answers try usingThis reolved the Twig issue up to the execution of the code when viewOnly is false.When viewOnly is false it must extend the base template used by all other templates but if it is true I only want to show this: But now with the top if viewOnly becomes false it fails with Template "" can't be find.Is there a way to say extends this specific template that will be the same result of not extending any template?Or alternatively is there a way of saying extend this when viewOnly true but nothing happens on the fail?

How to extract text from word file .doc,docx,.xlsx,.pptx php

M Khalid Junaid

[How to extract text from word file .doc,docx,.xlsx,.pptx php](https://stackoverflow.com/questions/19503653/how-to-extract-text-from-word-file-doc-docx-xlsx-pptx-php)

There may be a scenario we need to get the text from word documents for the future use to search the string in the document uploaded by user like for searching in cv's/resumes and occurs a common problem that how to get the text , Open and read a user uploaded Word document,there are some helpful links but don't cure the whole problem.We need to get the text at the time of uploading and save text in database and we can easily search within  the database.

2013-10-21 20:03:55Z

There may be a scenario we need to get the text from word documents for the future use to search the string in the document uploaded by user like for searching in cv's/resumes and occurs a common problem that how to get the text , Open and read a user uploaded Word document,there are some helpful links but don't cure the whole problem.We need to get the text at the time of uploading and save text in database and we can easily search within  the database.Here is a simple class which does the right job for .doc/.docx ,

PHP docx reader: Convert MS Word Docx files to text.Document_file_format Doc files are binary blobs.They can be read by using fopen.While .docx files  are just zip files and xml files xml files in a zipfile container (source wikipedia) you can read them by using zip_open.Usage of above classFrom DOC fileFrom DOCX ://For DOCX.If you want to preserve white spaces, also take care of tables tr and tc, use the codes below: Modify it to your taste. Cos it downloads the file from a remote or local For docx documents, I suggest use of docx2txt tool (available at least on Debian/Ubuntu):README explain how to integrate it with vim. Add to your .vimrc:(it also explain how to integrate with emacs). For hackers, this tool is written in perl.

php.ini changes but not effective in ubuntu

tinybai

[php.ini changes but not effective in ubuntu](https://stackoverflow.com/questions/11662295/php-ini-changes-but-not-effective-in-ubuntu)

I want change the limit of php upload file's size

And this is some information of my phpinfo.And this is the content of my php.ini file:Then i restart apache2,but the phpinfo show is also:

2012-07-26 04:20:44Z

I want change the limit of php upload file's size

And this is some information of my phpinfo.And this is the content of my php.ini file:Then i restart apache2,but the phpinfo show is also:I have solved my question. there is a syntax error in php.ini in line 109,so the next all syntax not excuteThere is a good chance you didn't have permissions to modify the php.ini file. If you just browse to it via a normal folder window and click it Gedit (or whatever your default text editor is) won't be able to open it with write permissions.You should be able to get away by sudo nano /etc/php5/apache2/php.ini (then your password at the prompt) then changing the variables. Then be sure to Write Out (CTRL O) or make sure you confirm the save on exit.For anyone wondering why the php.ini modification is not applied even after all directives are fine and restarting the apache on ubuntu, try restarting apache with sudoI have the same problem and this solve it

I have foound php.ini inside folder /etc/php5/cli/php.ini I make changes to it I have already change /etc/php5/apache2/php.ini and restart apache by using sudo service apache2 restart but symfony doesn't see changesI write it , it may help anyone here is how i solved this issue on ubuntu after about 3 hours of debuging (PHP 7)steps1) run phpinfo() function and observe where the loaded php configuration file (php.ini) is2) cd into that directory and update it to the new values3) reboot your server4) it works !!I use over ubuntu 14.10 the command:sudo /etc/init.d/apache2 restartI too had the same problem but then found that root permission is needed to edit php.ini file so just opened the terminal and wrote the followingand it perfectly worked!!

Looping Through All a Server's Sessions in PHP

Ash

[Looping Through All a Server's Sessions in PHP](https://stackoverflow.com/questions/675913/looping-through-all-a-servers-sessions-in-php)

Is there a way in PHP to get a list of all sessions (and the variables within each) on the server?Basically, we have a maintenance function which needs to know which users are currently logged into the site.  We already store data for each user in a session variable, but I am hoping that I can loop through each of these sessions and pluck out the data I need.MY PHP is very limited (I am a .Net developer ussually) but if anyone knows if this is even possible (and how to do it) I'd be very grateful.  I googled this, and the results I found tended to inidcate that it WASN'T possible, but I find this very hard to accept.Still, If you can't you can't but I thought my buddies on StackOverflow could give me a definitive answer!

2009-03-24 01:59:40Z

Is there a way in PHP to get a list of all sessions (and the variables within each) on the server?Basically, we have a maintenance function which needs to know which users are currently logged into the site.  We already store data for each user in a session variable, but I am hoping that I can loop through each of these sessions and pluck out the data I need.MY PHP is very limited (I am a .Net developer ussually) but if anyone knows if this is even possible (and how to do it) I'd be very grateful.  I googled this, and the results I found tended to inidcate that it WASN'T possible, but I find this very hard to accept.Still, If you can't you can't but I thought my buddies on StackOverflow could give me a definitive answer!PHP stores session data for each user in a temporary folder on the server. This folder is defined in the php.ini configuration file under the variable session.save_path. Locate this value from within your php.ini file, or alternatively, create a php file with:as it's contents, and open the file in your browser.Once you find the save path for the session data, open up that folder and you'll notice a fairly simple structure. All sessions are stored in the format: sess_$SESSIONID . Session data is serialized before being stored on disk. As such, objects stored in the session file would have to be deserialized before being usable. However, if you're using plain text, which is stored as-is, to store your session data (ex. $_SESSION['userid'] = 1234) to store information about your users, it should be easy enough to parse out the data you're looking for from within the files.One more thing ... I haven't looked into it, but it appears as though the session ID that appears in the filename corresponds directly to, for instance, the name of the PHPSESSID cookie stored on the user's computer. So, with this in mind, it may be possible to loop through the files within the temporary session directory, acquire all the $SESSIONID values, set the current session ID using session_id($SESSIONID), start a session with session_start() and access the data you need through PHP without having to parse the contents files themselves. Can anyone confirm whether or not this would be possible?Edit: Adjusted post to match Itay's comment.Here's a more succinct way to get a list of sessions via the stored files:This will get you the data for all sessions, stored in an array and indexed by session id:I used the @mgroat method in the ajax call, but there is a problem in the header of the HTTP response that the Set-Cookie header appears multiple times and jQuery reports an error:The solution is to add header_remove("Set-Cookie") right after session_start().

How to integrate WordPress template with CodeIgniter

Click Upvote

[How to integrate WordPress template with CodeIgniter](https://stackoverflow.com/questions/1253906/how-to-integrate-wordpress-template-with-codeigniter)

How can CodeIgniter and WordPress be integrated such that the look and feel/template of

the WordPress blog is carried over to the CodeIgniter-created pages?

2009-08-10 09:26:45Z

How can CodeIgniter and WordPress be integrated such that the look and feel/template of

the WordPress blog is carried over to the CodeIgniter-created pages?First step is to move CodeIgniter and the WordPress files in their own directory. After that, put the following line at the top of your CodeIgniter's index.php file. Change the path to wp-blog-header.php as needed to point to your WordPress's root directory.Then, you can use the following functions inside your views:Other helper functions can also be found in WordPress's documentation which can

assist you in integrating the design.When I included the file wp-blog-header.php in Codeigniter's index.php page, I got a problem that site_url() is defined in both codeigniter's URL helper and WordPress. I solved this using the following code:Last line needs to be added as WordPress file was adding a HTTP response header 'HTTP/1.0 404 Page not found' to the header.Now its fine to use WordPress functions to call in CodeIgntier.Here is another way to use WordPress templates in your codeigniter project. This works better for me so I wanted to share it. Tested with WordPress 3.3.1 and Codeigniter 2.1.Directory Structure:/ci/index.php (Top of CI Index file)Deal with the site_url function collision by overriding the default codeigniter version. You will need to change any place you used site_url() in codeigniter to use ci_site_url() instead./ci/application/helpers/MY_url_helper.phpYou can now use the WordPress get_header() and/or get_footer() functions to draw the template in your CI project.I'm using Wordpress for managing articles in a custom CI e-commerce website. CI is my main site. The directory structure is the following:I'm able to use Wordpress functions in my CI controllers without my URLs being messed up when adding the following code to the top of CI's index.php:Works also when using CI i18n library by Jérôme Jaglale (http://jeromejaglale.com/doc/php/codeigniter_i18n).if you're planning on using the code ignitor site_url function in your code, or if you're doing a merge of an existing CI site and WP... this might be helpful:at the top of CI index.php:effectively this allows you to use site_url in CI, so if you've already added a ton of links and content to your project it might help you out.

How to call shell script from php that requires SUDO?

JD Isaacks

[How to call shell script from php that requires SUDO?](https://stackoverflow.com/questions/3166123/how-to-call-shell-script-from-php-that-requires-sudo)

I have a file that is a bash script that requires SUDO to work.I can run it from the command line using SUDO but I will be prompted to put in the SUDO password.I want to run this script from php via shell_exec but I if I call SUDO, its not like a command line where I can be prompted for the password. Is there a way to pass the password for sudo with the sudo call?How can I do this?

2010-07-02 13:35:56Z

I have a file that is a bash script that requires SUDO to work.I can run it from the command line using SUDO but I will be prompted to put in the SUDO password.I want to run this script from php via shell_exec but I if I call SUDO, its not like a command line where I can be prompted for the password. Is there a way to pass the password for sudo with the sudo call?How can I do this?Edit the sudoers file (with visudo) and add a rule that allows the web server user to run the command without a password.  For example:There are various solutions for this problem.You can add something like this to your sudoers file:This will allow that particular user to call sudo on that particular script without being prompted for a password.The best secure method is to use the crontab. ie Save all your commands in a database say, mysql table and create a cronjob to read these mysql entreis and execute via shell_exec(). Please read this link for more detailed information.

In a PHP / Apache / Linux context, why exactly is chmod 777 dangerous?

Pekka

[In a PHP / Apache / Linux context, why exactly is chmod 777 dangerous?](https://stackoverflow.com/questions/2338641/in-a-php-apache-linux-context-why-exactly-is-chmod-777-dangerous)

Inspired by the discussion in this question, a maybe stupid question.We have all been taught that leaving directories or files on Linux-based web hosting with the permission level of 777 is a bad thing, and to set always as little permissions as necessary.I am now curious as to where exactly lies the danger of exploitation, specifically in a PHP / Apache  context. After all, a PHP script file can be executed from the outside (i.e. through a call to the web server, and subsequently to the interpreter) no matter whether it is marked as "executable", can't it? And the same applies to files called through the command-line php interpreter, right? So where exactly is the vulnerability with 777? Is it the fact that other users on the same machine can access files that are made world writable?

2010-02-26 00:20:34Z

Inspired by the discussion in this question, a maybe stupid question.We have all been taught that leaving directories or files on Linux-based web hosting with the permission level of 777 is a bad thing, and to set always as little permissions as necessary.I am now curious as to where exactly lies the danger of exploitation, specifically in a PHP / Apache  context. After all, a PHP script file can be executed from the outside (i.e. through a call to the web server, and subsequently to the interpreter) no matter whether it is marked as "executable", can't it? And the same applies to files called through the command-line php interpreter, right? So where exactly is the vulnerability with 777? Is it the fact that other users on the same machine can access files that are made world writable?Here's one scenario:If this directory is 777, that means that anybody (including the user apache, which is what php script will execute as) can execute it! If the execute bit is not set on that directory and presumably the files inside the directory, then step 3 above would do nothing.edit from the comments: it's not the PHP file's permissions that matter, it's the system() call inside the PHP file that will be executed as a linux system call by the linux user apache (or whatever you have apache set to run as), and that is PRECISELY where the execution bit matters.It greatly increases the vulnerability profile of your website to malicious activity because it's only necessary to break into one account.Anyone that gains access to your system with any login can do whatever they want to your pages, including changing them to read "This website is really insecure so please give me your credit card info."EDIT: (To clarify and address comments)Many servers have more than one purpose in life.  They run multiple services.  If you carefully isolate those services from each other by assigning each a unique user and managing file permissions accordingly, yes, you are still in hot water if someone compromises the credentials for an account, but the damage they can do is limited to that one service.  If you just have one generic account and set the whole file system to 777, one compromised account jeopardizes everything on the machine.If your server is dedicated to only running Apache/PHP and serves no other purpose in life, and there is only one account under which Apache/PHP is being run, having that one account compromised is as good as having the whole machine compromised from the point of view of your application (although you should still have system files protected and non-writable by the account used to run PHP... that should still only be possible for an admin account/root).If they can write a file, and it is executable, they can change it to something that executes on your machine (executable or script) and then use PHP's shell_exec to run that executable. If you're configured not to allow shell_exec, they can change your configuration as wellThere are many good general reasons to follow minimalism when it comes to permissions, but in the context of a LAMP webhost, the few that come readily to mind areLet's suppose you have a software package installed in your server and there is a zero day vulnerability into it, the attacker gains access to your Admin Control Panel with uploading files capabilities, if you set everything to 777 it would be trivial for him to upload a shell script anywhere he wants. However, if you set the permissions properly he can't do it since nobody/www-data/etc won't have write permissions.

Install dependency (doctrine/dbal) on composer laravel

elvainch

[Install dependency (doctrine/dbal) on composer laravel](https://stackoverflow.com/questions/22413408/install-dependency-doctrine-dbal-on-composer-laravel)

I am trying to execute a migration to rename some columns and I got an exception. As I read on the documentation I have to add the doctrine/dbal dependency to my composer.json file. How do I do that? Which is the correct composer.json file. I have many in my application. Is the one that is on the same level as the folders app,bootstrap, public and vendor.If so how do I add that dependency. Do I have to download anything?By the way im using easyphp, not wamp!After doing that the console throws this error

2014-03-14 18:51:33Z

I am trying to execute a migration to rename some columns and I got an exception. As I read on the documentation I have to add the doctrine/dbal dependency to my composer.json file. How do I do that? Which is the correct composer.json file. I have many in my application. Is the one that is on the same level as the folders app,bootstrap, public and vendor.If so how do I add that dependency. Do I have to download anything?By the way im using easyphp, not wamp!After doing that the console throws this errorTo add this dependency open the composer.json at the root of your project (in the same level as app, public etc.) and in the require section add the doctrine/dbal package like:Save the file and run composer updateEdit You probably installed git with the default settings and it's not in your PATH env.Open Git Bash (it was installed with git - you will find it in your programs) and do composer update. By the way it's far better that windows command prompt.1) To install dependency , run this command2) For 'git' is not recognized error, either you don't have git installed or the PATH is not added in the environment variables.Install git for windows. 

PHP: Remove the first and last item of the array

Decko

[PHP: Remove the first and last item of the array](https://stackoverflow.com/questions/2675257/php-remove-the-first-and-last-item-of-the-array)

Suppose I have this array:Questions:What is the fastest/easiest way to remove the first item from the above array?

What is the fastest/easiest way to remove the last item from the above array?  So the resulting array contains only these values:

2010-04-20 13:03:28Z

Suppose I have this array:Questions:What is the fastest/easiest way to remove the first item from the above array?

What is the fastest/easiest way to remove the last item from the above array?  So the resulting array contains only these values:Using array_slice is simplestIf the input array has less than 3 elements in it, the output array will be empty.To remove the first element, use array_shift, to remove last element, use array_pop:array_slice is going to be the fastest since it's a single function call.You use it like this:

array_slice($input, 1, -1);Make sure that the array has at least 2 items in it before doing this, though.Removes the first element from the array, and returns it:Removes the last element from the array, and returns it:If you dont mind doing them both at the same time, you can use:to knock off the first and last element at the same time.Check the array_push, array_pop and array_slice documentation :)Check this code:

Is there any benefit in using PHP comments over HTML comments in HTML code? [closed]

Emanuil Rusev

[Is there any benefit in using PHP comments over HTML comments in HTML code? [closed]](https://stackoverflow.com/questions/6992793/is-there-any-benefit-in-using-php-comments-over-html-comments-in-html-code)

I heard someone say that there is, so I was wondering.HTML comment:PHP comment:

2011-08-09 07:29:46Z

I heard someone say that there is, so I was wondering.HTML comment:PHP comment:Unlike HTML comments, PHP comments don't show up in the final output. That is often desirable, as comments are usually internal notes that are none of anybody's business.PHP comments will not be visible in the source on the client, where HTML comments will. So the question is: do you want the comment to be readable by the end user?PHP comments do not show up in the output HTML as other users have stated. This has 2 main effects:Small HTML comments can be useful for front-end developers, for example specifying the identifier of a closing tag in large files:These comments can be extremely helpful, and have little or no effect on the page size.PHP comments should be kept to a minimum in your display code, because there shouldn't be an awful lot of PHP to comment (although this is an entirely different subject).It goes without saying that you should only ever comment PHP with PHP comments, and HTML with HTML comments. If you ever find yourself having to write long HTML comments to explain some quirky HTML to your front-end developers, it's probably a bad sign.Really depends on what you are commenting. In addition to all other answers, I've something that can really matter. From time to time, we coders would need to comment out a block of code like:Assume that length of $results is 20 and character length of each div is around 500 Bytes (a moderately dense div). Then we have 10 KB of HTML here. In this case, the two commenting methods would be very, very different:Zero bytes is sent to the visitor and there is no PHP processing. vs10 KB is still sent to the visitor and PHP runs this huge-y loop for nothing.Of course, if you are using a revision control system (e.g. git, svn), such comments (comments that cover running code rather than descriptions) should really be deleted altogether.sometimes html comments are useful when you need to get info that cannot be rendered in html by the browser. for example you need to know the server's ip that sent the html page, you cannot show in the html page.. you print it as an html comment so you can check that info in the html source code

Get environment value in controller

nielsv

[Get environment value in controller](https://stackoverflow.com/questions/34263107/get-environment-value-in-controller)

In my .env file I have the following:Now I would like to use them in my controller. I've tried this but with no result:The $hostname variable is equal to null. How can I use these config variables in my controller?

2015-12-14 09:08:27Z

In my .env file I have the following:Now I would like to use them in my controller. I've tried this but with no result:The $hostname variable is equal to null. How can I use these config variables in my controller?try it with Doesn't work in Laravel 5.3+ if you want to try to access the value from the controller like below, it returns always nullSOLUTION: Rather you need to create a file in config folder ..say values.php and then 

write the codes like belowvalues.phpThen access the value in your controller with the following codeWhere "values" is the filename followed by the key "myvalue"

Hope it helpsI thought I'd add an answer, to simplify what has been said in the past. Only config files can access env variables - and then pass them on.Step 1.) Add your variable to your .env file, ie.Step 2.) Create a new file inside of the config folder, any name, ie.Step 3.) Inside of this new file, I add an array being returned, containing that env variable.Step 4.) Because I named it "example" my configuration 'namespace' is now example. So now, in my controller I can access this variable with:Tip - if you add use Config; at the top of your controller, you don't need the backslash (which designates the root namespace). Ie.--- IMPORTANT --- Remember to enter into the console php artisan config:cache once you have created your example.php file. Config files and variables are cached, so if you make changes you need to flush that cache - the same applies to the .env file being changed / added to.All of the variables listed in  .env file will be loaded into the $_ENV PHP super-global when your application receives a request.

    Checkout laravel configuration pageInControllerIn blade.viewin Laravel Controlllerin Laravel Blade filesExample : Accessing Laravel .env variables in bladeGet environment value in controllerYou can use with this format, (Tested on Laravel 5.5) in my case i used for get the data of database connections and use on Controller:The second parameter can be null, or set any default in case of DB_USERNAMEchild is null.you .env file can be the same:It's a better idea to put your config variables in a config file.In your case, I would suggest putting your variables in config/mail.php like 'imap_hostname' => env('IMAP_HOSTNAME_TEST', 'imap.gmail.com')and refer to them byIt first tries to get config variable value in the .env file and if it couldn't find the variable value in the .env file it will get variable value from config/mail.phpyou can not access the env variable like this. inside .env file you write next inside config folder there is a mail.php you may use this file to code. As you are working with mail functionality. You might use another file as well. you can call the variable from a controller using 'config( 

Whatever file you are using inside config folder. you need to use that file name (without extension) + '.' + 'variable name' + ')' . Current case you can call the variable as follows.    since you declare the variable inside mail.php and variable name is imap_hostname_test. you need to call like this. If you declare this variable inside app.php then you should call May be not related, but it might help someone.... in Laravel just dd(config('app.env'));

and you'll see 'local' or 'production'

How can I fix「Error: Formulae found in multiple taps」?

soapbar

[How can I fix「Error: Formulae found in multiple taps」?](https://stackoverflow.com/questions/30864992/how-can-i-fix-error-formulae-found-in-multiple-taps)

I want to install php54-redis.What am I doing wrong and how is thise done properly?

2015-06-16 10:26:00Z

I want to install php54-redis.What am I doing wrong and how is thise done properly?This is same problem. josegonzalez/homebrew-php has been  moved to homebrew/php, so we can untap it to fix error.Referencing this GitHub issue link, you need to do the following with the tap that you don't want.  In this case, if you don't want the homebrew/php/php54 tap, try this:I just tried it in on the other tap (brew untap josegonzalez/php) and it worked well.I know this might be risky, but in my case the other solutions didn't work, so I deleted /usr/local/Homebrew/Library/ manually and everything was working again.

What are the PHP operators「?」and「:」called and what do they do?

seb

[What are the PHP operators「?」and「:」called and what do they do?](https://stackoverflow.com/questions/1080247/what-are-the-php-operators-and-called-and-what-do-they-do)

What are the ? and : operators in PHP?For example:

2009-07-03 17:27:15Z

What are the ? and : operators in PHP?For example:This is the conditional operator.means "if $x is true, then use $y; otherwise use $z".It also has a short form.means "if $x is true, then use $x; otherwise use $z".People will tell you that ?: is "the ternary operator".  This is wrong.  ?: is a ternary operator, which means that it has three operands.  People wind up thinking its name is "the ternary operator" because it's often the only ternary operator a given language has.What is a ternary operator?A ternary ? : is shorthand for if and else. That's basically it. See "Ternary Operators" half way down this page for more of an official explanation.As of PHP 5.3:As of PHP 7.0In PHP 5, if you wanted to use a ternary with a potentially non-existent variable then you would have to perform an isset() at the beginning of the ternary statement:In PHP 7, you can now do this instead:The Null Coalesce Operator does not work with an empty string, however, so bear that in mind. The great thing about this is you can also chain the operators for multiple checks for multiple variables, providing a sort of backup depending on whether or not each variable in the chain exists:In PHP, with systems where a user can login, it is not uncommon for an administrator to be able to impersonate another user for testing purposes. With the above example, if the user is not impersonating another user, and also a logged in user does not exist, then the user will be a guest user instead. Read on more if you don't understand this yet to see what ternaries are and how they are used, and then come back to this bit to see how the new PHPHow are ternaries used?Here's how a normal if statement looks:Let's shorten that down into a ternary.Much shorter, but maybe harder to read. Not only are they used for setting variables like $var in the previous example, but you can also do this with echo, and to check if a variable is false or not:Why do people use them?I think ternaries are sexy. Some developers like to show off, but sometimes ternaries just look nice in your code, especially when combined with other features like PHP 5.4's latest short echos.Going off-topic slightly, when you're in a 'view/template' (if you're seperating your concerns through the MVC paradigm), you want as little server-side logic in there as possible. So, using ternaries and other short-hand code is sometimes the best way forward. By "other short-hand code", I mean:Note, I personally do not like this kind of shorthand if / endif nonsenseHow fast is the ternary operator?People LIKE micro-optimisations. They just do. So for some, it's important to know how much faster things like ternaries are when compared with normal if / else statements.Reading this post, the differences are about 0.5ms. That's a lot!Oh wait, no it's not. It's only a lot if you're doing thousands upon thousands of them in a row, repeatedly. Which you won't be. So don't worry about speed optimisation at all, it's absolutely pointless here.When not to use ternariesYour code should be:Obviously this is subject to the persons intelligence and coding knowledge / general level of understanding on such concepts when coming to look at your code. A single simple ternary like the previous examples are okay, something like the following, however, is not what you should be doing:That was pointless for three reasons:ConclusionTernaries really are simple and nothing to get too worked up about. Don't consider any speed improvements, it really won't make a difference. Use them when they are simple and look nice, and always make sure your code will be readable by others in the future. If that means no ternaries, then don't use ternaries.It's called a ternary operator. If the first expression evaluates to true, HTTPS_SERVER is used, else HTTP_SERVER is chosen.It's basically a shorthand if statement, and the above code could also be rewritten as follows:This is sometimes known as the ternary conditional operator. Ternary means that it has three arguments, as x ? y : z. Basically, it checks if x is true; if it is, then put y instead of this operation, otherwise z.Conditional operator ? : is an operator which is used to check a condition and select a value depending on the value of the condition. It is expressed in the following form:It works as follows...For example:In this, for x, firstly the condition (a>b) is evaluated. If this condition becomes true, then x will become the value 5 (ie, x=5). But if the condition (a>b) becomes false, then x will attain the value 9 (ie, x=9).Ternary OperatorSometimes conditional operator ? : is also called a ternary operator. This is so because it involves three operands. For example:Here, x,y and z are the three operands. If condition x is true, then value y is assigned otherwise value z is assigned.This is a short way of writing if sentences. It is also used in other languages like Java, JavaScript and others.Your code,can be written like this:That is a one line if statement:Translated to an ordinary if statement in your case, that would be:That's basically a fancy way of writing an if-else statement. Some say it's easier to read, some say not.Ternary operator at WikipediaAs John T says, it is called a ternary operator and is essentially a shorthand version of an if /else statement. Your example, as a full if / else statement, would read;

How to test if a user has SELECTED a file to upload?

sf_tristanb

[How to test if a user has SELECTED a file to upload?](https://stackoverflow.com/questions/2958167/how-to-test-if-a-user-has-selected-a-file-to-upload)

on a page, i have : The problem is, if the users wants to edit information WITHOUT uploading a LOGO, it raises an error : 'error you must upload the right type'So, if a user didn't put anything in the inputbox in order to upload it, i don't want to enter in these conditions test.i tested :

if (!empty($_FILES['logo']['name']) and if (isset($_FILES['logo']['name'])but both doesn't seems to work.Any ideas? edit : maybe i wasn't so clear, i don't want to test if he uploaded a logo, i want to test IF he selected a file to upload, because right now, if he doesn't select a file to upload, php raises an error telling he must upload with the right format.thanks.

2010-06-02 13:33:21Z

on a page, i have : The problem is, if the users wants to edit information WITHOUT uploading a LOGO, it raises an error : 'error you must upload the right type'So, if a user didn't put anything in the inputbox in order to upload it, i don't want to enter in these conditions test.i tested :

if (!empty($_FILES['logo']['name']) and if (isset($_FILES['logo']['name'])but both doesn't seems to work.Any ideas? edit : maybe i wasn't so clear, i don't want to test if he uploaded a logo, i want to test IF he selected a file to upload, because right now, if he doesn't select a file to upload, php raises an error telling he must upload with the right format.thanks.You can check this with:Or you can use a javascript construction that only enables the upload/submit button whenever the upload field has a value other then an empty string ("") to avoid submission of the form with no upload at all.There is a section in php documentation about file handling. You will find that you can check various errors and one of them isIn your case you need code likeorYou should consider checking (and probably providing appropriate response for a user) for other various errors as well.You should use is_uploaded_file($_FILES['logo']['tmp_name']) to make sure that the file was indeed uploaded through a POST.I would test if (file_exists($_FILES['logo']['tmp_name'])) and see if it works.Or, more approperately (thanks Baloo): if (is_uploaded_file($_FILES['logo']['tmp_name']))is the only right way

PHP read and write JSON from file

Josiah

[PHP read and write JSON from file](https://stackoverflow.com/questions/8858848/php-read-and-write-json-from-file)

I have the following JSON in a file list.txt:How do I add "bross":{"first":"Bob","last":"Ross"} to my file using PHP?Here's what I have so far:Which gives me a Fatal error: Cannot use object of type stdClass as array on this line:I'm using PHP5.2. Any thoughts? Thanks!

2012-01-13 23:55:48Z

I have the following JSON in a file list.txt:How do I add "bross":{"first":"Bob","last":"Ross"} to my file using PHP?Here's what I have so far:Which gives me a Fatal error: Cannot use object of type stdClass as array on this line:I'm using PHP5.2. Any thoughts? Thanks!The clue is in the error message - if you look at the documentation for json_decode note that it can take a second param, which controls whether it returns an array or an object - it defaults to object.So change your call toAnd it'll return an associative array and your code should work fine.The sample for reading and writing JSON in PHP:Or just use $json as an object:This is how it is returned without the second parameter (as an instance of stdClass).You need to make the decode function return an array by passing in the true parameter.json_decode(file_get_contents($file),true);Try using second parameter for json_decode function:This should work for you to get the contents of list.txt fileIf you want to display the JSON data in well defined formate you can modify the code as:When you want to create json format it had to be in this format for it to read:

PHP Undefined Index [duplicate]

dragonridingsorceress

[PHP Undefined Index [duplicate]](https://stackoverflow.com/questions/4842759/php-undefined-index)

This is going to sound really stupid, but I cannot figure out why I am getting this error.I have created a selection box, named "query_age" in my html form:In the corresponding php form, I have:When I run the page, I get this error:I don't understand why this is happening, and I'd love to know how to make it go away.

2011-01-30 11:59:01Z

This is going to sound really stupid, but I cannot figure out why I am getting this error.I have created a selection box, named "query_age" in my html form:In the corresponding php form, I have:When I run the page, I get this error:I don't understand why this is happening, and I'd love to know how to make it go away.I don't see php file, but that could be that -

replace in your php file:with:Most probably, at first time you running your script without ?query_age=[something] and $_GET has no key like query_age.The checking of the presence of the member before assigning it is, in my opinion, quite ugly.Kohana has a useful function to make selecting parameters simple.You can make your own like so...And then do something like...The first time you run the page, the query_age index doesn't exist because it hasn't been sent over from the form.When you submit the form it will then exist, and it won't complain about it.if you use isset like the answer posted already by singles, just make sure there is a bracket at the end like so:

$query_age = (isset($_GET['query_age']) ? $_GET['query_age'] : null);

Resetting MySQL Root Password with XAMPP on Localhost

Codeeeeee

[Resetting MySQL Root Password with XAMPP on Localhost](https://stackoverflow.com/questions/24566453/resetting-mysql-root-password-with-xampp-on-localhost)

So for the past hour I've been trying to figure out how to reset my 'root' password for MySQL as I cannot log into PHPMyAdmin. I've tried changing the password in the config.inc.php file and searching through other methods. I cannot find a successful way. A few months ago I changed it as a test password but now I forget what it was. If anyone can help, that would be great. (I'm running on a Windows computer).

2014-07-04 03:50:33Z

So for the past hour I've been trying to figure out how to reset my 'root' password for MySQL as I cannot log into PHPMyAdmin. I've tried changing the password in the config.inc.php file and searching through other methods. I cannot find a successful way. A few months ago I changed it as a test password but now I forget what it was. If anyone can help, that would be great. (I'm running on a Windows computer).You want to edit this file: "\xampp\phpMyAdmin\config.inc.php"change this line:to whatever your password is. If you don't remember your password, then run this command within the Shell:where WhateverPassword is your new password.Steps:7 . now open your xampp dir ( c:/xampp ) -->

8 .   to phpMyadmin dir  [C:\xampp\phpMyAdmin]10 .find [ $cfg['Servers'][$i]['auth_type'] = 'config'; ]line and replace 'config' to ‘cookie’last : save the file .here is a video link in case you want to see it in Action [ click Here ]You can configure it with the "XAMPP Shell" (command prompt). 

Open the shell and execute this command:mysqladmin.exe -u root password secretIf you indeed forgot the root password to the MySQL server, you need to start it with the option skip-grant-tables. Search for the appropriate Ini-File my.ini (C:\ProgramData\MySQL Server ... or something like this) and add skip-grant-tables to the section [mysqld] like so:Reset XAMPP MySQL root password through SQL update phpmyadmin to work with it:-Start the Apache Server and MySQL instances from the XAMPP control panel.

After the server started, open any web browser and go to http://localhost/phpmyadmin/. This will open the phpMyAdmin interface. Using this interface we can manager the MySQL server from the web browser.-In the phpMyAdmin window, select SQL tab from the right panel. This will open the SQL tab where we can run the SQL queries.-Now type the following query in the textarea and click Go-Now you will see a message saying that the query has been executed successfully.-If you refresh the page, you will be getting a error message. This is because the phpMyAdmin configuration file is not aware of our newly set root passoword. To do this we have to modify the phpMyAdmin config file.-Open the file C:\xampp\phpMyAdmin\config.inc.php in your favorite text editor.

Search for the string: -Now all set to go. Save the config.inc.php file and restart the XAMPP server.Modified from Source: http://veerasundar.com/blog/2009/01/how-to-change-the-root-password-for-mysql-in-xampp/1.-In XAMPP press button Shell2.-place command:mysqladmin -u root passwordNew password: aqui colocar password ejemplo ´09876´3.-go on the local disk c: xampp \ phpMyAdmin

open config.inic.php with notepad ++5.- add the password and in AllowNoPassword change to false6.- save changes, clear browser cache and restart xamppTry this:sudo /Applications/XAMPP/xamppfiles/xampp security

Then follow the instructionsFor me much better way is to do it using terminal rather then PhpMyAdmin UI.The answer is copied from "https://gist.github.com/susanBuck/39d1a384779f3d596afb19fcad6b598c" which I have tried and it works always, try it out..C:\xampp\mysql\bin\mysql.exe --user=rootUSE mysql;SELECT * FROM user \G;UPDATE user SET password = PASSWORD('secret_pass') WHERE user = 'root';UPDATE user SET password = '' WHERE user = 'root';When you're done, run exit; to exit the MySQL command line.Next, re-enable password checking by removing skip-grant-tables from C:\xampp\mysql\bin\my.ini.Save changes, restart MySQL from XAMPP.On xampp -> Phpmyadmin -> config.inc 21st line you see:Add your password here and restart your xampp.

The password will change.Open the file C:\xampp\phpMyAdmin\config.inc.php in your text editor. Search for the tags below and edit accordinglyWhere 'password' is your new password. In-between quotes.GO to your browser and visit link http://localhost/phpmyadmin/. Click on 'GO' without your new password. It would log you in and you would be able to see the "CHANGE PASSWORD". Proceed to change your password and you are done.On Dashboard, 

Go to User Accounts, 

Select user, 

Click Change Password, 

Fill the New Password, 

Go.SIMPLE STRAIGHT FORWARD WORKING SOLUTION AND OUT OF THE BOX:1 - Start the Apache Server and MySQL instances from the XAMPP control panel.2 - After the server started, open any web browser and give http://localhost/phpmyadmin/. This will open the phpMyAdmin interface. Using this interface we can manage the MySQL server from the web browser.3 - In the phpMyAdmin window, select SQL tab from the top panel. This will open the SQL tab where we can run the SQL queries.4 - Now type the following query in the text area and click Go5 - Now you will see a message saying some thing like: the query has been executed successfully.6 - If you refresh the page, you will be getting a error message. This is because the phpMyAdmin configuration file is not aware of our newly set root passoword. To do this we have to modify the phpMyAdmin config file.7 - Open the file [XAMPP Installation Path]/phpmyadmin/config.inc.php in your favorite text editor (e.g: C:\xampp\phpMyAdmin\config.inc.php).8 - Search for the string and change it to like this, Here the ‘password’ is what we set to the root user using the SQL query.9 - Now all set to go. Save the config.inc.php file and restart the XAMPP apache and mysql servers. It should work!Source: https://veerasundar.com/blog/2009/01/how-to-change-the-root-password-for-mysql-in-xampp/DONE!

Warning: preg_replace(): Unknown modifier ']'

user3122995

[Warning: preg_replace(): Unknown modifier ']'](https://stackoverflow.com/questions/20705399/warning-preg-replace-unknown-modifier)

I have the following error:This is the code on line 38:How can I fix this problem?

2013-12-20 14:05:39Z

I have the following error:This is the code on line 38:How can I fix this problem?In PHP, a regular expression needs to be enclosed within a pair of delimiters. A delimiter can be any non-alphanumeric, non-backslash, non-whitespace character; /, #, ~ are the most commonly used ones. Note that it is also possible to use bracket style delimiters where the opening and closing brackets are the starting and ending delimiter, i.e. <pattern_goes_here>, [pattern_goes_here] etc. are all valid.The "Unknown modifier X" error usually occurs in the following two cases:In this case, the regular expression is <div[^>]*><ul[^>]*>. The regex engine considers everything from < to > as the regex pattern, and everything afterwards as modifiers.] here is an unknown modifier, because it appears after the closing > delimiter. Which is why PHP throws that error.Depending on the pattern, the unknown modifier complaint might as well have been about *, +, p, / or ) or almost any other letter/symbol. Only imsxeADSUXJu are valid PCRE modifiers.The fix is easy. Just wrap your regex pattern with any valid delimiters. In this case, you could chose ~ and get the following:If you're receiving this error despite having used a delimiter, it might be because the pattern itself contains unescaped occurrences of the said delimiter./foo[^/]+bar/i would certainly throw an error. So you can escape it using a \ backslash if it appears anywhere within the regex:This is a tedious job if your regex pattern contains so many occurrences of the delimiter character. The cleaner way, of course, would be to use a different delimiter altogether. Ideally a character that does not appear anywhere inside the regex pattern, say # - #foo[^/]+bar#i.The reference answer already explains the reason for "Unknown modifier" warnings. This is just a comparison of other typical variants.As mentioned already, the quickest solution to this error is just picking a distinct delimiter. Any non-letter symbol can be used. Visually distinctive ones are often preferred:Technically you could use $abc$ or |abc| for delimiters. However, it's best to avoid symbols that serve as regex meta characters themselves. The hash # as delimiter is rather popular too. But care should be taken in combination with the x/PCRE_EXTENDED readability modifier. You can't use # inline or (?#…) comments then, because those would be confused as delimiters.Occassionally you see " and ' used as regex delimiters paired with their conterpart as PHP string enclosure:Which is perfectly valid as far as PHP is concerned. It's sometimes convenient and unobtrusive, but not always legible in IDEs and editors.An interesting variation are paired delimiters. Instead of using the same symbol on both ends of a regex, you can use any <...> (...) [...] {...} bracket/braces combination.While most of them also serve as regex meta characters, you can often use them without further effort. As long as those specific braces/parens within the regex are paired or escaped correctly, these variants are quite readable.A somewhat lazy trick (which is not endorsed hereby) is using non-printable ASCII characters as delimiters. This works easily in PHP by using double quotes for the regex string, and octal escapes for delimiters:The \001 is just a control character ␁ that's not usually needed. Therefore it's highly unlikely to appear within most regex patterns. Which makes it suitable here, even though not very legible.Sadly you can't use Unicode glyps ❚ as delimiters. PHP only allows single-byte characters. And why is that? Well, glad you asked:The preg_* functions utilize the PCRE regex engine, which itself doesn't care or provide for delimiters. For resemblence with Perl the preg_* functions implement them. Which is also why you can use modifier letters /ism instead of just constants as parameter.See ext/pcre/php_pcre.c on how the regex string is preprocessed:Now this is all somewhat irrelevant. But explains where the delimiter warnings come from. And this whole procedure is all to have a minimum of Perl compatibility. There are a few minor deviations of course, like the […] character class context not receiving special treatment in PHP.If you would like to get an exception (MalformedPatternException), instead of warnings or using preg_last_error() - consider using T-Regx library:

PHP global or $GLOBALS

Francisc

[PHP global or $GLOBALS](https://stackoverflow.com/questions/3573847/php-global-or-globals)

Is there a best practice / recommendation when I want to use a variable declared outside of a function when it comes to using:Thank you.

2010-08-26 09:39:17Z

Is there a best practice / recommendation when I want to use a variable declared outside of a function when it comes to using:Thank you.What you should  really do is pass the variable to the function instead of using a global at all.An example how to change a variable outside of the function via passing it as reference parameter:Well, you should only use globals in limited circumstances, but to answer your question:As to points 1 and 2, I'll quote Sara Golemon here:Use global at the top of your function. That way, you can easily see what globals are used.global $var; is equivalent to $var =& $GLOBALS['var'].Some people suggested that it is faster than using $GLOBALS, however it's not necessarily the case. If you use the variable only once, $GLOBALS will be faster, because you won't waste time for assignment.However, if you do use the variable multiple times, using global (or the equivalent assignment) is faster, because search the array for the var key only once.That's it about speed. However, the speed difference is really small, and readability is more important. However, different people have different preferences about readability -- I prefer global, some other people answering here prefer $GLOBALS, so it's up to you to decide what looks better.

php explode all characters [duplicate]

qwertymk

[php explode all characters [duplicate]](https://stackoverflow.com/questions/9814375/php-explode-all-characters)

I'm looking for the equivalent of what in js would be 'this is a string'.split('') for PHP.If I try $array = explode('', 'testing'); I get an error Warning: explode() [function.explode]: Empty delimiter inIs there another way to do this?

2012-03-21 23:32:14Z

I'm looking for the equivalent of what in js would be 'this is a string'.split('') for PHP.If I try $array = explode('', 'testing'); I get an error Warning: explode() [function.explode]: Empty delimiter inIs there another way to do this?As indicated by your error, explode requires a delimiter to split the string. Use str_split instead:OutputUse the str_split function.There is no need to explode itTO SPLIT string into ARRAY its best to use 

How to increase maximum POST variable in PHP?

Anantha Krishnan

[How to increase maximum POST variable in PHP?](https://stackoverflow.com/questions/9399315/how-to-increase-maximum-post-variable-in-php)

I'm using WAMP in my local machine, when a FORM(method="POST") with 2000 input fields is submitted I'm able to read only 1001 _POST variable. i.e With Netbeans debugger I can clearly see _POST size is always 1001 if there are more than 1001 input fields in the form.I used this http://ideone.com/GAw14 java code to generate form with N input fields and tested.The same is working fine in another machine(WAMP), where I can see all the POST variables.Please help me to solve my problem.

2012-02-22 16:56:32Z

I'm using WAMP in my local machine, when a FORM(method="POST") with 2000 input fields is submitted I'm able to read only 1001 _POST variable. i.e With Netbeans debugger I can clearly see _POST size is always 1001 if there are more than 1001 input fields in the form.I used this http://ideone.com/GAw14 java code to generate form with N input fields and tested.The same is working fine in another machine(WAMP), where I can see all the POST variables.Please help me to solve my problem.PHP 5.3.9 introduced the max_input_vars config option, which is defaulted to a value of 1000. Check out the Runtime Configuration section of the PHP manual. The default value and the change log are at the top of the page.The value can be changed by updating the server's php.ini, adding an .htaccess file, or adding a line to httpd.conf.If you are using Suhosin with Hardened PHP, you might be hitting a maximum variables limit that it imposes. In your php.ini, you can just addchanging 1000 to whatever you want and restart your webserver. I ran into this on the Drupal Permissions page when there were a lot of modules installed with a large number of roles, which resulted in a ton of checkboxes. It would only save a certain number of them before anything after would just get ignored.It sounds like this is probably not your problem, but since it's fairly likely that someone in the future may stumble upon this when searching for something related I'll go ahead and throw this in since it took me ages to figure out when I was stumped.I solved my $_POST max inputs -problem by adding the following to php.ini:Note the suhosin.request.max_vars also.I solved this problem. Open the PHP.INI configuration file and add these lines[suhosin]suhosin.post.max_vars = 20000suhosin.request.max_vars = 20000I suspect the problem is with the amount of data coming with your POST request. There is no setting which limits the number of $_POST vars that can be set. However there is a memory limit for POST data which is 8MB by default.In your php.ini file try modifying the value of post_max_size and set it to a higher value.  Don't forget to restart apache after the change is made.

symfony2: how to access service from template

torbatamas

[symfony2: how to access service from template](https://stackoverflow.com/questions/13243638/symfony2-how-to-access-service-from-template)

If I created a service is there a way to access it from twig, without creating a twig.extension?

2012-11-06 02:52:22Z

If I created a service is there a way to access it from twig, without creating a twig.extension?You can set the service a twig global variable in config.yml, e.gAnd in your template.html.twig file you can invoke your service this way:See here.

Get the string after a string from a string

Alex

[Get the string after a string from a string](https://stackoverflow.com/questions/4221117/get-the-string-after-a-string-from-a-string)

what's the fastest way to get only the important_stuff part from a string like this:_delimiter_ is always there, but the rest of the string can change.

2010-11-19 00:36:47Z

what's the fastest way to get only the important_stuff part from a string like this:_delimiter_ is always there, but the rest of the string can change.here:I like this method:cutting from end of the delimiter to end of stringnote:1) for substr the string start at '0' whereas for strpos & strlen takes the size of the string (starts at '1')2) using 1 character delimiter maybe a good idea 

Passing parameters to PHPUnit

dl__

[Passing parameters to PHPUnit](https://stackoverflow.com/questions/2094970/passing-parameters-to-phpunit)

I'm starting to write PHPUnit tests and I'd like the tests to be run from developers machines as well as from our servers.  Developers machines are set up differently than the servers and even differently from each other.To run in these different places it seems to be the person that runs the test is going to have to indicate where it's being run.  The test can then look up the proper config of the machine it's running on.I'm imagining something like:or on the alpha server:In the test I would be able to get the value if the 'X' (or whatever it is) parameter and know, for example, what the path to the app root is for this machine.It doesn't look like the command line allows for that - or have I missed something?

2010-01-19 16:19:58Z

I'm starting to write PHPUnit tests and I'd like the tests to be run from developers machines as well as from our servers.  Developers machines are set up differently than the servers and even differently from each other.To run in these different places it seems to be the person that runs the test is going to have to indicate where it's being run.  The test can then look up the proper config of the machine it's running on.I'm imagining something like:or on the alpha server:In the test I would be able to get the value if the 'X' (or whatever it is) parameter and know, for example, what the path to the app root is for this machine.It doesn't look like the command line allows for that - or have I missed something?One way would be for you to inspect $argv and $argc. Something like:Then you can call your phpunittest like this:You can use PHPUnit's --bootstrap switch for this.Then, make a bootstrap.php file that contains variables:In your tests, you can grab those values:Then run:An elegant way to pass variables to both bootstrap files as well as to test files is by using environment variables:Then, in your PHP files, you can access it like this:Source: http://blog.lysender.com/2010/10/phpunit-passing-environment-variable-to-your-application/I don't think answers above solve my same problem.The accepted answer is not perfect. In this way, custom options should always be put to the end of the parameters list, and there is no indicator to tell that they are custom options. If the number of custom options which I need is not fixed, I should code a lot to parse custom options with regular expressions or something like that.The environment variables solution is good, but not natural. Looks weird. The shell script plus setUp() solution share the same weakness with the accepted one. May be you should code a lot to parse the file and handle unpredictable numbers of custom options.I don't think the bootstrap script is the correct solution. It could be used to handle dirty works automatically, with doing same things every time but not dealing with change parts good.I don't like all the above answers.And I have no good idea myself too. But maybe what I've done could give you inspiration. I've forked the phpunit project on GitHub, and modified code a little, and made it to support the custom option feature.Modified version of phpunit, could accept custom options like this:And in the test, you can visit the custom options by accessing the super global variables $_SERVERand you can find my code here, and download the modified version here (by click the "view the full file" link on the page).FYI. this article is the similar solution.As Jasir already mentioned, a one line solution would be to set environment variable before phpunit call. On Linux:On Windows probably:And inside your script use to read the valueI struggled with this exact issue, and came up with a kind of hacky-yet-convenient solution: I write parameters to a file on disk and retrieve them in the setUp() method:Rather than calling phpunit or paratest directly, I have a shell script to launch the tests.  This one invokes paratest and lets me specify the number of processes as well as the host I'd like the tests to run against.run_all_tests.shThen, to run with 7 threads against http://adifferenthost.com:./run_all_tests.sh 7 'http://adifferenthost.com'All the solutions here are valid for the question, but there is yet another way that might be simpler for some situations.

Phing will take arguments passed in the form -Dargument=valueSo using

phing -Dtest=MyTest.class.phpYou can then use phing conditionals to handle these arguments:Passing arguments on the command line would make sense if you want to vary the test parameters per test run.  Running host-specific tests on different machines is not the best justification for this solution.For that, the PHPUnit configuration file may prove to be more suitable.  It gives you control over host- and even request-specific variables including manipulating php.ini settings as well as defining constants, global variables, $_ENV, $_SERVER, and even $_GET, $_POST, etc.  This is all done under the <php> node of the configuration file, see Setting PHP INI settings, Constants and Global VariablesSymfony2 uses this approach and provides both a phpunit.xml.dist (default config) and a phpunit.xml with your unit tests.  The latter is gitignored to allow you to customize it for each machine without affecting the repo.  You would then run your tests with:If you would like to run tests on remote machine, use ssh then run it. On locale machine you only have to cd to your root dir, then run phpunit.Edit: You are talking about a machine dependent configuration. (What kind of conf btw?) My solution is to put these config under the same, not versioncontrolled place, then read/parse it runtime, in the needed set up methds for example.

How do I run all my PHPUnit tests?

JJ.

[How do I run all my PHPUnit tests?](https://stackoverflow.com/questions/1414125/how-do-i-run-all-my-phpunit-tests)

I have script called Script.php and tests for it in Tests/Script.php, but when I run phpunit Tests it does not execute any tests in my test file. How do I run all my tests with phpunit?PHPUnit 3.3.17, PHP 5.2.6-3ubuntu4.2, latest UbuntuOutput:And here are my script and test files:Script.phpTests/Script.php

2009-09-12 02:54:32Z

I have script called Script.php and tests for it in Tests/Script.php, but when I run phpunit Tests it does not execute any tests in my test file. How do I run all my tests with phpunit?PHPUnit 3.3.17, PHP 5.2.6-3ubuntu4.2, latest UbuntuOutput:And here are my script and test files:Script.phpTests/Script.phpPhp test's filename must end with Test.phpphpunit  mydir  will run all scripts named xxxxTest.php in directory mydir(looks likes it's not described in the phpunit documentation)I created following phpunit.xml and now atleast I can do phpunit --configuration phpunit.xml in my root directory to run the tests located in Tests/I think forPHPUnit to decide to automatically run it it must follow a filename convention: somethingTest.php.You think they would have documented this. I just looked through the manual, and they say you can pass a directory, but not really how to do it.Perhaps your class name has to match the basename (everything but the ".php") of your test scripts filename?

PHP: Can I Use Fields In Interfaces?

Scott

[PHP: Can I Use Fields In Interfaces?](https://stackoverflow.com/questions/2251541/php-can-i-use-fields-in-interfaces)

In PHP, can I specify an interface to have fields, or are PHP interfaces limited to functions?If not, I realize I can expose a getter as a function in the interface:

2010-02-12 11:52:13Z

In PHP, can I specify an interface to have fields, or are PHP interfaces limited to functions?If not, I realize I can expose a getter as a function in the interface:You cannot specify members. You have to indicate their presence through getters and setters, just like you did. However, you can specify constants:See http://www.php.net/manual/en/language.oop5.interfaces.phpLate answer, but to get the functionality wanted here, you might want to consider an abstract class containing your fields. The abstract class would look like this:While you could still have the interface:Then you have your child class like this:There's an alternative solution for those still curious and interested. :)Interfaces are only designed to support methods.This is because interfaces exist to provide a public API that can then be accessed by other objects. Publicly accessible properties would actually violate encapsulation of data within the class that implements the interface.Use getter setter. But this might be tedious to implement many getters and setters in many classes, and it clutter class code. And you repeat yourself!As of PHP 5.4 you can use traits to provide fields and methods to classes, ie:This is specially usefull if you have to inherit from some base class and need to implement some interface.You cannot specify properties in an interface : only methods are allowed (and make sense, as the goal of an interface is to specify an API)

In PHP, trying to define properties in an interface should raise a Fatal Error : this portion of code :Will give you :

Working days (Mon-Fri) in PHP

fredley

[Working days (Mon-Fri) in PHP](https://stackoverflow.com/questions/4261179/working-days-mon-fri-in-php)

Is there a way to use strtotime to add working days (Monday to Friday) to a date? Or some other method? What I want to do is:

2010-11-23 21:33:56Z

Is there a way to use strtotime to add working days (Monday to Friday) to a date? Or some other method? What I want to do is:If you are limiting to weekdays use the string weekdays.This should jump you ahead by 3 weekdays, so if it is Thursday it will add the additional weekend time.Source: http://www.php.net/manual/en/datetime.formats.relative.phpI have found this buggy when needing a larger amount of weekdays.  I was looking for X amount of business days after the 1st of the current month. Looked great at first until after adding > 5 business days (similar to what @zerkms found). This has proved more accurate for me. For PHP >= 5.6 I  think a function can be easily developed that you can just export current day no of the week and you can add two and mod of 5 will give you easily weekday.And you can export the weekday name by using an array, this method can alternatively be used.I do it recursively, worked for meFor older versions of PHP < 5.3You can do this too:See:https://www.php.net/manual/en/function.date-create.phphttps://www.php.net/manual/en/datetime.modify.php

Posting multidimensional array with PHP and CURL

David Hancock

[Posting multidimensional array with PHP and CURL](https://stackoverflow.com/questions/3772096/posting-multidimensional-array-with-php-and-curl)

I'm having trouble posting form data via CURL to a receiving PHP script located on a different host.I get an Array to string conversion errorThis is print_r of the array I'm posting:This is the line the error occurs on:The third argument must be an array because I need the Content-Type header to be set to multipart/form-data as I am sending a file via this same array, therefore I cannot convert the array to a query string or use http_build_query().Also I do not have access to the code on the receiving host so I cannot serialize and unserialize the array.I'm assuming that the value of the name key being an array is the cause for this error, I'm also assuming that CURLOPT_POSTFIELDS doesn't support multidimensional arrays. Is there any other way around this or am I doomed?Thanks in advance!

2010-09-22 17:43:27Z

I'm having trouble posting form data via CURL to a receiving PHP script located on a different host.I get an Array to string conversion errorThis is print_r of the array I'm posting:This is the line the error occurs on:The third argument must be an array because I need the Content-Type header to be set to multipart/form-data as I am sending a file via this same array, therefore I cannot convert the array to a query string or use http_build_query().Also I do not have access to the code on the receiving host so I cannot serialize and unserialize the array.I'm assuming that the value of the name key being an array is the cause for this error, I'm also assuming that CURLOPT_POSTFIELDS doesn't support multidimensional arrays. Is there any other way around this or am I doomed?Thanks in advance!You'd have to build the POST string manually, rather than passing the entire array in. You can then override curl's auto-chose content header with:Serializing/json-ifying would be easier, but as you say, you have no control over the receiving end, so you've got a bit of extra work to do.The concept of an array doesn't really exist when it comes to HTTP requests. PHP (and likely other server-side languages) has logic baked in that can take request data that looks like an array (to it) and puts it together as an array while populating $_GET, $_POST etc.For instance, when you POST an array from a form, the form elements often look something like this:or even:While PHP knows what to do with this data when it receives it (ie. build an array), to HTML and HTTP, you have three unrelated inputs that just happen to have similar (or the same, although this isn't technically valid HTML) names.To do the reverse for your cURL request, you need to decompose your array into string representations of the keys. So with your name array, you could do something like:Which would result in your $post array looking like:And then each key in the array you are posting would be a scalar value, which cURL is expecting, and the array would be represented as you need to for HTTP.Simplest solution is to do a :Below is sample code where this is used in real life :https://gist.github.com/gayanhewa/142c48162f72e68a4a23When you have nested $params section in the above gist it will parse it accordingly and prepare it for posting via curl.First I would like to thank Daniel Vandersluis for his insightful reply. Based on his input I came up with this to fix the problem from the original question:Usage should look like this:This function will convert arrays like this:Into this:It doesn't handle cases with mixed format when there is a key collision like this:The output will contain only the first value for that keyI think you'll need to pass the options as a string:You should then be able to set the header manually via CURLOPT_HTTPHEADER.The cURL option CURLOPT_POSTFIELDS will accept either a string or simple array but not a nested array. Attempting to do so will generate the Array to string conversion error.However http_build_query() can handle a nested array so use it to convert the $_POST array to a string then send that string instead. So where you have;use this instead;

PHP Multiple Checkbox Array

Darek Gajda

[PHP Multiple Checkbox Array](https://stackoverflow.com/questions/14026361/php-multiple-checkbox-array)

I've looked around for a few examples here but a lot of them are either too advanced for my grasp of PHP or their examples are too specific to their own projects. I am currently struggling with a very basic part of a PHP form.I am trying to create a form with a few checkboxes, each assigned a different value, I want these to be sent to a variable (array?) that I can echo/use later, in my case I will be sending the checked values in an email.So far, I have tried a few variations, but the closest I have come to it is this...Where I'd echo $checkboxvar[] into my email.

Am I going about this completely wrong? The other idea I had was to use a lot of if statements.

2012-12-24 23:06:38Z

I've looked around for a few examples here but a lot of them are either too advanced for my grasp of PHP or their examples are too specific to their own projects. I am currently struggling with a very basic part of a PHP form.I am trying to create a form with a few checkboxes, each assigned a different value, I want these to be sent to a variable (array?) that I can echo/use later, in my case I will be sending the checked values in an email.So far, I have tried a few variations, but the closest I have come to it is this...Where I'd echo $checkboxvar[] into my email.

Am I going about this completely wrong? The other idea I had was to use a lot of if statements.You pass the form name as an array and then you can access all checked boxes using the var itself which would then be an array.To echo checked options into your email you would then do this:Please keep in mind you should always sanitize your input as needed.For the record, official docs on this exist: http://php.net/manual/en/faq.html.php#faq.html.arraysadd [] in the name of the attributes in the input tagfor PHP Code : You need to use the square brackets notation to have values sent as an array:Please note though, that only the values of only checked checkboxes will be sent.Try this, by for LoopAlso remember you can include custom indices to the array sent to the server like thisThis is particularly useful when you want to use the id of individual objects in a server array accounts (for instance) to send data back to the server and recognize same at server 

PHP: running scheduled jobs (cron jobs)

Eikern

[PHP: running scheduled jobs (cron jobs)](https://stackoverflow.com/questions/120228/php-running-scheduled-jobs-cron-jobs)

I have a site on my webhotel I would like to run some scheduled tasks on. What methods of achieving this would you recommend?What I’ve thought out so far is having a script included in the top of every page and then let this script check whether it’s time to run this job or not.This is just a quick example of what I was thinking about:Anything else I should take into consideration or is there a better method than this?

2008-09-23 10:27:20Z

I have a site on my webhotel I would like to run some scheduled tasks on. What methods of achieving this would you recommend?What I’ve thought out so far is having a script included in the top of every page and then let this script check whether it’s time to run this job or not.This is just a quick example of what I was thinking about:Anything else I should take into consideration or is there a better method than this?That's what cronjobs are made for.  man crontab assuming you are running a linux server.  If you don't have shell access or no way to setup cronjobs, there are free services that setup cronjobs on external servers and ping one of your URLs.I'm answering this now because no-one seems to have mentioned this exact solution.On a site I'm currently working on, we've set up a cron job using cPanel, but instead of running the PHP Interpreter directly (because we're using CodeIgniter and our code is mapped to a controller function, this probably isn't a great idea) we're using wget.-q is so that wget won't generate any output (so you won't keep getting emails). -O cron_job.log will save the contents of whatever your controller generates to a log file (overwritten each time so it won't keep growing).I've found this to be the easiest way of getting 'proper' cron working.If you have a cPanel host, you can add cron jobs through the web interface.Go to Advanced -> Cron Jobs and use the non-advanced form to set up the cron frequency. You want a command like this:Have you ever looked ATrigger? The PHP library is also available to start creating scheduled tasks without any overhead.Disclaimer: I'm among their team.if you're wondering how to actually run your PHP script from cron, there are two options: Call the PHP interpreter directly (i.e., "php /foo/myscript.php"), or use lynx (lynx http://mywebsite.com/myscript.php).  Which one you choose depends mostly on how your script needs its environment configured - the paths and file access permissions will be different depending on whether you call it through the shell or the web browser.  I'd recommend using lynx.One side effect is that you get an e-mail every time it runs.  To get around this, I make my cron PHP scripts output nothing (and it has to be nothing, not even whitespace) if they complete successfully, and an error message if they fail.  I then call them using a small PHP script from cron.  This way, I only get an e-mail if it fails.  This is basically the same as the lynx method, except my shell script makes the HTTP request and not lynx.Call this script "docron" or something (remember to chmod +x), and then use the command in your crontab: "docron http://mydomain.com/myscript.php".  It e-mails you the output of the page as an HTML e-mail, if the page returns something.If you want to avoid setting up cron jobs and whatnot (though I'd suggest it's a better method), the solution you've provided is pretty good. On a number of projects, I've had the PHP script itself do the check to see whether it's time to run the update.The down-side (okay, one of the down sides) is that if no one is using the app during a certain period then the script won't run.The up-side is that if no one is using the app during a certain period then the script won't run. The tasks I've got it set up to do are things like "update a cache file", "do a daily backup" and whatnot. If someone isn't using the app, then you aren't going to need updated cache files, nor are there going to be any database changes to backup.The only modification to your method which I'd suggest is that you only run those checks when someone successfully logs in. You don't need to check on every page load.Cron is a general purpose solution for scheduling problems. But when you go big and schedules go high in frequency, there can be reliability/overlapping issues. If you see such problems, consider something like supervise or more sophisticated monit.If you using cpanel u should add this like: I would outsource the cronjobs with www.guardiano.pm and call a url every X minute. When your url (i.e www.yoursite.com/dothis.php) is called than you execute some code. If you don't want to let the web request the page when you want you can allow only request in POST and send some parameter that only you know with guardiano.pm Thats what I would do because I do that on my pet projects. Have fun! The method you are using is fine, if you don't want to use cronjobs or anything external, but these can be heavy to check each time a page loads.At first, some cronjobs can probably be replaced. For example if you have a counter for how many users have registered on your website, you can simply update this number when a user registers, so you don't have to use a cronjob or any scheduled task for this.If you want to use scheduled tasks, I suggest you to use the method you are using right now, but with a little modification. If you're site has enough hits on a day, you can simply make the tasks run (or the tasks check function run) only for 1% or maybe 0.01% of the hits instead of all of them, the percentage you should use depends on the page hits you have and how many times you want to run the task. So, simply add a randomizer to achieve this feature.You could simply use a function like this;Command line PHP + cron would be the way I would go.  It's simple and should fit the bill.  It is usually installed with PHP as a matter of course.If you do not have the option to setup a cronjob you can call the script with cUrl (as alternative to wget - same functionality). Just do a scheduled task on your local machine that executes the cUrl function.If you want something more abstract, you might consider using something like a PHP scheduler. 

For example:  And also, to parse the cron expression, you could use an existing library such as https://github.com/mtdowling/cron-expression. It provides a lot of useful methods to help you figure out information of a cron job.Hope that helps.

How to set cron job url for codeigniter?

Sachin

[How to set cron job url for codeigniter?](https://stackoverflow.com/questions/19269566/how-to-set-cron-job-url-for-codeigniter)

I am using Codeigniter for my website. I have to use cron job to run one of controller function. I am using route in website. And also I am not using index.php in url. e.g. http://my-domain.com/welcome/show, here welcome is my controller and show is function name of that controller.I have used like this, 0 * * * * php /home/username/public_html/welcome/show It is giving 'No such directory'How can I set cron jon in CPANEL for above url.Thanks.

2013-10-09 10:32:35Z

I am using Codeigniter for my website. I have to use cron job to run one of controller function. I am using route in website. And also I am not using index.php in url. e.g. http://my-domain.com/welcome/show, here welcome is my controller and show is function name of that controller.I have used like this, 0 * * * * php /home/username/public_html/welcome/show It is giving 'No such directory'How can I set cron jon in CPANEL for above url.Thanks.Use:as command in your crontab. E.g.:Source (ver. 2.2.0)

http://www.codeigniter.com/userguide2/general/cli.htmlSource (ver. 3.*)

http://www.codeigniter.com/user_guide/general/cli.htmlI have used below cronsource: http://www.asim.pk/2009/05/14/creating-and-installing-crontabs-using-codeigniter/This works for me.Thanks to allYou can try with this one:You can also try:Or localhostI hope that is helpful./usr/local/bin/php /home/username/public_html/index.php controllername methodnameThis worked for me.Here is the cron I use/usr/bin/php /home/pia/www/jobs/index.php cron newsletterExplanation:a) $_SERVER['DOCUMENT_ROOT'] = /home/pia/wwwb) codeigniter website root = /home/pia/www/jobsc) 'cron' = controller named) 'newsletter' = method nameI have done it as crontest is the name of the controller which also uses a model to pull data from the database and send mail periodically (between 9 AM to 6 PM on Monday to Friday every week)I just viewed this page which explains very detail with example. Hope this will be useful to others as well.I am using codeigniter 3.0.3 and my server is hostgator. For me, the below format is working fineabove command runs every 15 minutes, reminders in command is controller name and index is method name.in my case im using codeigniter and  the above command executes the user_balance function which is found in check_balance controller every 60 sec.On a Linux EC2 intance, this worked:If you are using cPanel then Use the following command:This works perfectly for me.Set up cron jobs through cPanel using this procedure:

phpexcel freeze row and columns

CMR

[phpexcel freeze row and columns](https://stackoverflow.com/questions/23423964/phpexcel-freeze-row-and-columns)

I'm trying to freeze the top row and the first 3 columns in a worksheet, using PHPExcel.I can freeze the row without any problem:Or I can freeze the column without any problem:But when I try to use both, the first gets over-written by the second.Is there any way to use both on the same sheet?Thanks.

2014-05-02 08:34:49Z

I'm trying to freeze the top row and the first 3 columns in a worksheet, using PHPExcel.I can freeze the row without any problem:Or I can freeze the column without any problem:But when I try to use both, the first gets over-written by the second.Is there any way to use both on the same sheet?Thanks.I assume you're trying to Freeze columns and rows both.freezePane will obviously overwrite any previous parameters you might have given to it.As per your current scenario, I see that you're trying to freeze the top row and the left-most 3 columnsTry this:This will freeze Row 1 and Columns A,B & CThis should get your work done!Note: freezePane works exactly how you use it in MS Excel. You select a cell and select Freeze. And it freezes whatever rows are above it, and the columns which are left to it.

How to check not in array element in php

s4suryapal

[How to check not in array element in php](https://stackoverflow.com/questions/22316925/how-to-check-not-in-array-element-in-php)

I am trying to check if an element is not in array than want to redirect page:

My code is as below:I am confused how to check if element is not in array.

As we can check element exist or not in array using in_array function of php.

I am trying to check it using (!in_array) but I did not got result.Please help.

2014-03-11 05:08:16Z

I am trying to check if an element is not in array than want to redirect page:

My code is as below:I am confused how to check if element is not in array.

As we can check element exist or not in array using in_array function of php.

I am trying to check it using (!in_array) but I did not got result.Please help.SimplyI prefer thisrespectiveTry with array_intersect methodI think everything that you need is array_key_exists:you can check using php in_array() built in functionand you can also check using thisin_array() is fine if you're only checking but if you need to check that a value exists and return the associated key, array_search is a better option.for more details

http://php.net/manual/en/function.in-array.php

undefined offset PHP error

user272899

[undefined offset PHP error](https://stackoverflow.com/questions/2508215/undefined-offset-php-error)

I am receiving the following error in PHPHere is the PHP code that causes it:What does the error mean?

2010-03-24 14:02:17Z

I am receiving the following error in PHPHere is the PHP code that causes it:What does the error mean?If preg_match did not find a match, $matches is an empty array. So you should check if preg_match found an match before accessing $matches[0], for example:How to reproduce this error in PHP:Create an empty array and ask for the value given a key like this:What happened?You asked an array to give you the value given a key that it does not contain.  It will give you the value NULL then put the above error in the errorlog.It looked for your key in the array, and found undefined.  How to make the error not happen?Ask if the key exists first before you go asking for its value.If the key exists, then get the value, if it doesn't exist, no need to query for its value.  Undefined offset error in PHP is Like 'ArrayIndexOutOfBoundException' in Java.example:error: Undefined offset 2It means you're referring to an array key that doesn't exist. "Offset"

refers to the integer key of a numeric array, and "index" refers to the

string key of an associative array.Undefined offset means there's an empty array key for example:You can solve the problem using a loop (while):

MySQL Drop Multiple Columns

Cory Nickerson

[MySQL Drop Multiple Columns](https://stackoverflow.com/questions/15823498/mysql-drop-multiple-columns)

I'm trying to drop multiple columns, but having some trouble. The syntax below works when I do ALTER TABLE and ADD with multiple values in the brackets () but it doesn't work with DROP COLUMN. Am I using the wrong syntax?

2013-04-04 23:30:07Z

I'm trying to drop multiple columns, but having some trouble. The syntax below works when I do ALTER TABLE and ADD with multiple values in the brackets () but it doesn't work with DROP COLUMN. Am I using the wrong syntax?To drop multiple columns actual syntax isSo for every column you need to specify "drop column" in Mysql 5.0.45. This is same as that of above answer. Just adding one point here. Alter table wont free up the actual space on the disk. So run optimize table on after running optimize table.

Symfony calls the PHP garbage collector on Ubuntu 14.04 even when session.gc_probability is set to 0

Chase

[Symfony calls the PHP garbage collector on Ubuntu 14.04 even when session.gc_probability is set to 0](https://stackoverflow.com/questions/25454675/symfony-calls-the-php-garbage-collector-on-ubuntu-14-04-even-when-session-gc-pro)

As the title state for some reason my Symfony 2.5 Application is calling the php garbage collector even when all of my php.ini files have:Does anyone know how to prevent this from happening?Error message im getting:FROM PHPINFO():I know that i can just give the www-data user permission to the /var/lib/php5 folder or change the session.save_path to somewhere that the www-data user has access to already but i want to know why this process is even getting called when it should be disabled.

2014-08-22 19:54:12Z

As the title state for some reason my Symfony 2.5 Application is calling the php garbage collector even when all of my php.ini files have:Does anyone know how to prevent this from happening?Error message im getting:FROM PHPINFO():I know that i can just give the www-data user permission to the /var/lib/php5 folder or change the session.save_path to somewhere that the www-data user has access to already but i want to know why this process is even getting called when it should be disabled.I found it, I guess the latest version of symfony is overwriting this by default when using the app_dev.php. The Symfony FrameworkBundle is setting the session.gc_probability = 1.However, some operating systems do their own session handling and set the session.gc_probability variable to 0 to stop PHP doing garbage collection. That's why Symfony now overwrites this value to 1.If you wish to use the original value set in your php.ini, add the following configuration:https://symfony.com/doc/current/components/http_foundation/session_configuration.html#configuring-garbage-collectionTo change this add the following to your config.ymlThen clear the dev cacheThis is where it shows the gc_probability defaulted to 1. Why they dont just read from the php.ini settings im not sure.http://symfony.com/doc/2.5/reference/configuration/framework.html#gc-probabilityYou can set path for sessions manually. See Symfony doc on sessions directory.

unit testing and Static methods

stefgosselin

[unit testing and Static methods](https://stackoverflow.com/questions/5961023/unit-testing-and-static-methods)

Reading up and picking up on unit testing, trying to make sense of the following post on that explains the hardships of static function calls. I don't clearly understand this issue.  I have always assumed static functions were a nice way of rounding up utility functions in a class. For example, I often  use static functions calls to initialise,  ie:// After reading the post, I now aim for this instead ...But, the few dozen tests I had written for this class are the same. I changed nothing and they still all pass. Am I doing something wrong?The author of the post states the following:Now, I understand from the post that static methods create dependencies, but don't grasp intuitively why one cannot test the return value of a  static method just as easily as a regular method?I will be avoiding static methods, but I would of liked having an idea of WHEN static methods are useful, if at all. It seems from this post static methods are just about as evil as global variables and should be avoided as much as possible.Any additional information or links on the subject would be greatly appreciated.

2011-05-11 07:59:59Z

Reading up and picking up on unit testing, trying to make sense of the following post on that explains the hardships of static function calls. I don't clearly understand this issue.  I have always assumed static functions were a nice way of rounding up utility functions in a class. For example, I often  use static functions calls to initialise,  ie:// After reading the post, I now aim for this instead ...But, the few dozen tests I had written for this class are the same. I changed nothing and they still all pass. Am I doing something wrong?The author of the post states the following:Now, I understand from the post that static methods create dependencies, but don't grasp intuitively why one cannot test the return value of a  static method just as easily as a regular method?I will be avoiding static methods, but I would of liked having an idea of WHEN static methods are useful, if at all. It seems from this post static methods are just about as evil as global variables and should be avoided as much as possible.Any additional information or links on the subject would be greatly appreciated.Static methods themselves aren't harder to test than instance methods. The trouble arises when a method--static or otherwise--calls other static methods because you cannot isolate the method being tested. Here is a typical example method that can be difficult to test:What might you want to test with this method?These requirements are simple, but you must also setup logging, connect to a database, load it with data, etc. The Database class should be solely responsible for testing that it can connect and query. The Log class should do the same for logging. findUser() should not have to deal with any of this, but it must because it depends on them.If instead the method above made calls to instance methods on Database and Log instances, the test could pass in mock objects with scripted return values specific to the test at hand.The above test will fail if findUser() neglects to call connect(), passes the wrong value for $id (5 above), or returns anything other than null. The beauty is that no database is involved, making the test quick and robust, meaning it won't fail for reasons unrelated to the test like network failure or bad sample data. It allows you to focus on what really matters: the functionality contained within findUser().Sebastian Bergmann agrees with Misko Hevery and quotes him frequently:The main issue with static methods is that they introduce coupling, usually by hardcoding the dependency into your consuming code, making it difficult to replace them with stubs or mocks in your Unit-Tests. This violates the Open/Closed Principle and the Dependency Inversion Principle, two of the SOLID principles.You are absolutely right that statics are considered harmful. Avoid them.Check the links for additional information please.Update: note that while statics are still considered harmful, the capability to stub and mock static methods has been removed as of PHPUnit 4.0I do not see any problem when testing static methods (at least none that doesn't exists in non-static methods).

C# String.Format() Equivalent in PHP?

Ben Griswold

[C# String.Format() Equivalent in PHP?](https://stackoverflow.com/questions/1241177/c-sharp-string-format-equivalent-in-php)

I'm building a rather large Lucene.NET search expression. Is there a best practices way to do the string replacement in PHP? It doesn't have to be this way, but I'm hoping for something similar to the C# String.Format method. Here's what the logic would look like in C#.Is there a PHP5 equivalent?

2009-08-06 20:22:44Z

I'm building a rather large Lucene.NET search expression. Is there a best practices way to do the string replacement in PHP? It doesn't have to be this way, but I'm hoping for something similar to the C# String.Format method. Here's what the logic would look like in C#.Is there a PHP5 equivalent?You could use the sprintf function:Or you write your own function to replace the {i} by the corresponding argument:Try sprintf http://php.net/sprintf try this one if there is an error or 'create_function' I found it from here

Find total number of results in mySQL query with offset+limit

Nyxynyx

[Find total number of results in mySQL query with offset+limit](https://stackoverflow.com/questions/5928611/find-total-number-of-results-in-mysql-query-with-offsetlimit)

I'm doing a pagination feature using Codeigniter but I think this applies to PHP/mySQL coding in general.I am retrieving directory listings using offset and limit depending on how many results I want per page. However to know the total number of pages required, I need to know (total number of results)/(limit). Right now I am thinking of running the SQL query a second time then count the number of rows required but without using LIMIT. But I think this seems to be a waste of computational resources. Are there any better ways? Thanks!EDIT: My SQL query uses WHERE as well to select all rows with a particular 'category_id'

2011-05-08 16:11:41Z

I'm doing a pagination feature using Codeigniter but I think this applies to PHP/mySQL coding in general.I am retrieving directory listings using offset and limit depending on how many results I want per page. However to know the total number of pages required, I need to know (total number of results)/(limit). Right now I am thinking of running the SQL query a second time then count the number of rows required but without using LIMIT. But I think this seems to be a waste of computational resources. Are there any better ways? Thanks!EDIT: My SQL query uses WHERE as well to select all rows with a particular 'category_id'Take a look at SQL_CALC_FOUND_ROWS SELECT COUNT(*) FROM table_name WHERE column = 'value' will return the total number of records in a table matching that condition very quickly.Database SELECT operations are usually "cheap" (resource-wise), so don't feel too bad about using them in a reasonable manner.EDIT: Added WHERE after the OP mentioned that they need that feature.Considering that SQL_CALC_FOUND_ROWS requires invoking FOUND_ROWS() afterwards, if you wanted to fetch the total count with the results returned from your limit without having to invoke a second SELECT, I would use JOIN results derived from a subquery:Note: Every derived table must have its own alias, so be sure to name the joined table. In my example I used t2.Use these queries instead:Gives you the number of rows for your specific category.

phpunit - testing is painfully slow

stefgosselin

[phpunit - testing is painfully slow](https://stackoverflow.com/questions/6167382/phpunit-testing-is-painfully-slow)

I am diving deeper and deeper in the world of unit testing.One issue I encountered, and this is where I would like feedback, is when one runs multiple test suites, maybe it is just me but I need to use the parameter --process-isolation for my tests to pass. I can run any of my suites individually without a problem, but running the 6-7 suites I have so far with 180 assertions spread between them fails if I run without --process-isolation. The problem is that using this parameter makes the test run last for 35 mins, versus the usual 2.5 minutes. That's a loooong wait.The problem is related to using mocked DI containers for specific tests and  containers are not properly re-initialised when tests suites are running chained.  Static properties set on DI-Container to test for expected failures make the tests in following suite fail. The container has a parameter that can hold contained object in a static var, to return the same instance at every call. A singleton in disguise. And this runs fine on application level, it's just a nuisance for testing.I could avoid that  container parameter and code the application to not use static properties, but avoiding a useful language construct for the sake of a methodology seems like overkill. Maybe I am doing something wrong (I sure hope so!) but I have the impression if one wants to run tests with the SUT in a clean state for every test, there is no getting around using --process-isolation. This makes testing very time consuming and takes the joy out of it a little bit. I have bypassed the issue somewhat by running suites and tests individually when I am coding, and running the suite in background before major commits.Is what I am experiencing normal, and is there a way to counter this? How do you testers out there ensure testing time is reasonable? How are statics handled  so as to not influence testing?Any insight appreciated/comment appreciated.

2011-05-29 11:04:29Z

I am diving deeper and deeper in the world of unit testing.One issue I encountered, and this is where I would like feedback, is when one runs multiple test suites, maybe it is just me but I need to use the parameter --process-isolation for my tests to pass. I can run any of my suites individually without a problem, but running the 6-7 suites I have so far with 180 assertions spread between them fails if I run without --process-isolation. The problem is that using this parameter makes the test run last for 35 mins, versus the usual 2.5 minutes. That's a loooong wait.The problem is related to using mocked DI containers for specific tests and  containers are not properly re-initialised when tests suites are running chained.  Static properties set on DI-Container to test for expected failures make the tests in following suite fail. The container has a parameter that can hold contained object in a static var, to return the same instance at every call. A singleton in disguise. And this runs fine on application level, it's just a nuisance for testing.I could avoid that  container parameter and code the application to not use static properties, but avoiding a useful language construct for the sake of a methodology seems like overkill. Maybe I am doing something wrong (I sure hope so!) but I have the impression if one wants to run tests with the SUT in a clean state for every test, there is no getting around using --process-isolation. This makes testing very time consuming and takes the joy out of it a little bit. I have bypassed the issue somewhat by running suites and tests individually when I am coding, and running the suite in background before major commits.Is what I am experiencing normal, and is there a way to counter this? How do you testers out there ensure testing time is reasonable? How are statics handled  so as to not influence testing?Any insight appreciated/comment appreciated.You have several problems.The first is process isolation. Normally, it should not be necessary and you only want to use it to find out which specific test is the one that fatally breaks your tests. As you noted yourself, it's awfully slow, which is something you cannot fix.

You might want to disable backing up global vars which saves some milliseconds per test, though.The second problem, which leads to your first problem, is that your code is not testable because static vars are kept during tests - my most-hated singleton problem.

You can solve that problem by providing a "cleanup" or "reset" method in your dependency containers. Those will get called from the setUp() method in your main test case class and reset everything to a clean state.Regarding the runtime of tests - I recently wrote a blog entry about finding out which tests were too slow. Generally, tests are too slow if you can't run them after saving the file or each commit on your own box. 10 seconds is barely acceptable for me. The more tests you have, the slower will running them be.If you really have 35 minutes, then split up your tests into sensible groups so that you can run the necessary ones on your own machine - only the tests that test the code you changed. Pyrus, the next-gen PEAR installer, has the nifty feature to automatically detect and run the tests that need to be run, depending on what files you changed.

PHPUnit does not have that, but you can emulate that by hand and phpunit --group .. :)Always take care of mocking web services and databases, or at least running the database with only necessary data for each single test. Waiting 3 seconds for a web services response in a test that's verifying if you can save the user to database is something you never want.One of the things I usually do when I test with MySQL instead of SQLite's :memory: is I add Hash::setRounds(5); inside tests/CreatesApplication.php Trait like this. I experienced this will make the tests especially with MySQL so much faster:A few tricks;

PHP: When does the temporary uploaded files get deleted?

user1105430

[PHP: When does the temporary uploaded files get deleted?](https://stackoverflow.com/questions/11131226/php-when-does-the-temporary-uploaded-files-get-deleted)

I am running WAMP server. On file upload using PHP I see$_FILES[tmp_name] => string 'C:\wamp\tmp\phpD382.tmp' (length=23)I go to that folder and it's empty. I made sure my 'show hidden files' is on from my 'folders option' but I don't see it. Where is it exactly? Besides when does it get deleted? If I don't move that file? For an instance if I'm uploading a file and the file uploaded halfway and I decided to close that browser what happens to the file? When does the server know to delete that temp file?

2012-06-21 03:46:27Z

I am running WAMP server. On file upload using PHP I see$_FILES[tmp_name] => string 'C:\wamp\tmp\phpD382.tmp' (length=23)I go to that folder and it's empty. I made sure my 'show hidden files' is on from my 'folders option' but I don't see it. Where is it exactly? Besides when does it get deleted? If I don't move that file? For an instance if I'm uploading a file and the file uploaded halfway and I decided to close that browser what happens to the file? When does the server know to delete that temp file?As soon as your PHP script finishes executing and re-saving to the defined locationhttp://www.php.net/manual/en/features.file-upload.post-method.php

    

If you do not do anything with them they will be deleted right after the script is finished.If deleting file is not desired, i found that PHP wont delete file after execution if you "move" it to same location.

CodeIgniter sessions vs PHP sessions

Mala

[CodeIgniter sessions vs PHP sessions](https://stackoverflow.com/questions/2005552/codeigniter-sessions-vs-php-sessions)

I'm relatively new to CodeIgniter and am making my first CI project in which there are user-accounts, etc. In the past, I have always used PHP's $_SESSION variable to this end. However, CI seems to have its own session mechanism, which it claims is "better"CI's session mechanism seems to store all the data in a cookie? Personally I like the idea of all the data being stored on the server, accessed with a cookie-key like PHPs native session mechanism... Am I being dumb thinking that's better? Should I just accept CI's mechanism? Or should I go ahead and use native PHP sessions?What do you guys do?Thanks,

Mala

2010-01-05 11:06:19Z

I'm relatively new to CodeIgniter and am making my first CI project in which there are user-accounts, etc. In the past, I have always used PHP's $_SESSION variable to this end. However, CI seems to have its own session mechanism, which it claims is "better"CI's session mechanism seems to store all the data in a cookie? Personally I like the idea of all the data being stored on the server, accessed with a cookie-key like PHPs native session mechanism... Am I being dumb thinking that's better? Should I just accept CI's mechanism? Or should I go ahead and use native PHP sessions?What do you guys do?Thanks,

MalaIn my experience with CI I've encountered some anomalies with its sessions, but for most day-to-day needs the library is good and easy to work with. As it was pointed out, Flashdata is a very nice feature.If you choose to stay with CI's sessions, I'd strongly suggest to store sessions in a database and, additionally, encrypt cookies:The database structure should be as follows:The manual says more flexibility rather than better ;-)I presume the main benefit of CodeIgnite session class is that it integrates with the framework and it offers a few extra functionality, such as IP address tracking and what it calls flashdata (session data that's erased as soon as it's read). If you are using a framework in the first place that means these options may be attractive for you.Whatever, you can also save session data into a database:http://codeigniter.com/user_guide/libraries/sessions.htmlKeep PHP session for important information and use CI session for less important info.Read here wyh.http://codeigniter.com/forums/viewthread/130577/I know this is an older post, but I feel it is worth sharing what I have found.Since CI uses a cookie based approach ( even with database storage ) it causes a problem for my particular app which serves data to remote clients requesting data through curl.  The bottom line is Cookies and Cross Site Scripting, although manageable, do not play well together.I chose to try to override the native Session.php class provided by CI with my own MY_Session.php.  I was happy to find this wasn't too difficult, but was surprised to find that CI was regenerating session id even though my script explicitly provided them.According to the CI manualAlthough I can probably find a way to override this, I am wondering if it wouldn't be much easier to revert back to PHP sessions.Just food for thought if you're going to use CI.CI sessions has Storage size limitationsAs you are aware , CI sessions are cookies basically, whether you encrypt it or not. As far as security is concerned both have its on pros and cons.My concern was the size limit of CI sessions, It can hold only 4 kb data as its basically a cookie, while Native PHP session only stores reference id on cookie and all the session data is stored in server memory. This comes handy when you have a larger number of items need to be stored in a session.Say a shopping cart with more items, or a user music playlist with more than 50 tracks... etc.I hope this information helps someone some day.Cheers..!!

PHP Sessions with disabled cookies, does it work?

Limeni

[PHP Sessions with disabled cookies, does it work?](https://stackoverflow.com/questions/12572134/php-sessions-with-disabled-cookies-does-it-work)

Today I had skype interview for a job as PHP developer, one of the questions asked was about Cookies and PHP Sessions.The question was, can PHP session be set and read, used, if Cookies are disabled in users Browser?I told them not, beacuse PHP Sessions by default depends on setting a session cookie. When PHP session starts, new session Cookie is set with default name PHPSESSID, and that cookie holds value of that session id, for example: ftu63d8al491s5gatuobj39gk7

Then on apache server in tmp folder file sess_ftu63d8al491s5gatuobj39gk7 is created and it holds content of that session, for example: test1|s:12:"SessionTest1";test2|s:12:"SessionTest2";They told me that's not true, and that you can use PHP Sessions even if user disables cookies in his browser. Then I told them that you can do that, but then session id would be passed through URL as GET variable. And that's not secure and you must set it up in php.ini.They were talking how you can use PHP Sessions even if Cookies are disabled in browser. And what if we are building web shop, and some granny uses our web shop and disables cookies and she joust don't care. And that PHP Sessions are great because you can use them even if user disables Cookies. I was like wtf, wtf wtf?!?!I made test with two files, index.php starts session and sets session variables. And then session.php tries to read that session variables.This is how it looks:index.phpsession.phpNow, if you enable cookies in your browser, visit index.php, and the visit session.php , session would be printed out.But, if you clear your browser history and cookies, and then visit index.php, and then visit session.php, you would see empty array right?So basically my question is, am I right?

Can you use PHP sessions if you disable cookies in your browser?

And do PHP Session mechanism by default, depends on setting a session COOKIE?Update:

I was going mad about this, so I called back the guy I was talking with. And asked him, can PHP session work without cookies by default? The guy said "yes". Then I told him he is wrong and he said: "yes, yes, if you say so..." and start laughing. Then I told him, ok if PHP session can work without setting cookie, how would server know current user/browser session id, if its not stored in a session cookie? (I wanted to see if he knows that session id can be passed as GET variable) And he was quiet for at least 20s, and told me that he is a System Administrator, and that I should ask that the Developer guy. And that he is 43 years old and has huge experience of 13 years in the bussines (he started with 30? wtf?), but he trusts me on this one. And I explained him how Session work and that you can use it without Cookie but then session id is passed as GET variable, and told him I told them that on interview, but they ware telling me no, no no... :S So basically, the guy didn't have a clue about PHP and PHP Sessions, and yes he was the one that asked me about sessions telling me that PHP Session can work without cookie, even when I told him it cant be done, and that there is a way to use PHP Sessions without cookies but it won't work by default. He was like, no no no...

At the end he told me that he was thinking that sessions can work without cookies because he, as System Admin on his servers, can never see sessions in tmp folder?!?!?Anyway, those guys suck at PHP, there is no way I will accept job offer from them, and after all this I dont think they will offer me a job anyway...Thanks for all the comments!

2012-09-24 20:07:23Z

Today I had skype interview for a job as PHP developer, one of the questions asked was about Cookies and PHP Sessions.The question was, can PHP session be set and read, used, if Cookies are disabled in users Browser?I told them not, beacuse PHP Sessions by default depends on setting a session cookie. When PHP session starts, new session Cookie is set with default name PHPSESSID, and that cookie holds value of that session id, for example: ftu63d8al491s5gatuobj39gk7

Then on apache server in tmp folder file sess_ftu63d8al491s5gatuobj39gk7 is created and it holds content of that session, for example: test1|s:12:"SessionTest1";test2|s:12:"SessionTest2";They told me that's not true, and that you can use PHP Sessions even if user disables cookies in his browser. Then I told them that you can do that, but then session id would be passed through URL as GET variable. And that's not secure and you must set it up in php.ini.They were talking how you can use PHP Sessions even if Cookies are disabled in browser. And what if we are building web shop, and some granny uses our web shop and disables cookies and she joust don't care. And that PHP Sessions are great because you can use them even if user disables Cookies. I was like wtf, wtf wtf?!?!I made test with two files, index.php starts session and sets session variables. And then session.php tries to read that session variables.This is how it looks:index.phpsession.phpNow, if you enable cookies in your browser, visit index.php, and the visit session.php , session would be printed out.But, if you clear your browser history and cookies, and then visit index.php, and then visit session.php, you would see empty array right?So basically my question is, am I right?

Can you use PHP sessions if you disable cookies in your browser?

And do PHP Session mechanism by default, depends on setting a session COOKIE?Update:

I was going mad about this, so I called back the guy I was talking with. And asked him, can PHP session work without cookies by default? The guy said "yes". Then I told him he is wrong and he said: "yes, yes, if you say so..." and start laughing. Then I told him, ok if PHP session can work without setting cookie, how would server know current user/browser session id, if its not stored in a session cookie? (I wanted to see if he knows that session id can be passed as GET variable) And he was quiet for at least 20s, and told me that he is a System Administrator, and that I should ask that the Developer guy. And that he is 43 years old and has huge experience of 13 years in the bussines (he started with 30? wtf?), but he trusts me on this one. And I explained him how Session work and that you can use it without Cookie but then session id is passed as GET variable, and told him I told them that on interview, but they ware telling me no, no no... :S So basically, the guy didn't have a clue about PHP and PHP Sessions, and yes he was the one that asked me about sessions telling me that PHP Session can work without cookie, even when I told him it cant be done, and that there is a way to use PHP Sessions without cookies but it won't work by default. He was like, no no no...

At the end he told me that he was thinking that sessions can work without cookies because he, as System Admin on his servers, can never see sessions in tmp folder?!?!?Anyway, those guys suck at PHP, there is no way I will accept job offer from them, and after all this I dont think they will offer me a job anyway...Thanks for all the comments!Sessions: Introduction If session.use_cookies = 1        (Cookie enabled.)If session.use_cookies = 0        (Cookie disabled.)If session.use_cookies = 1 then session stores the sessionId into cookie. Calling session_id() get the stored sessionId from cookie and saved data into session array will be found on all the pages. If session.use_cookies = 0 In this case session does not store sessionId into cookie and you will get each time a new sessionId using session_id() and data stored into session on other pages will not be found on another pages.Yes session will work when cookies is disabled. 

But first apache check php configuration settings.

Like: if these value are set true the session will passed by POST automatically.If "--enable-trans-sid" and "--enable-track-vars" values are set to FALSE, we need to pass session id by using the SID constant.Need to set php.iniMostly. In the real world: YES.You CAN use PHP sessions without cookies, as long as the browser identity is obtained somehow and yields a unique value (and this value is passed to the PHP session layer):Or - and here we're not in Kansas anymore:(1) if you were in a LAN where you can trust the IPs, you could associate a "session" to the user IP. You might enforce a strict "no cookies" policy in a small firm and still have user sessions without resorting to _GET/_POST for your session ID.If it was me, I would say "Yes"Since you could store session in form / url somewhere to passed to next page (very bad idea). So, based on his question "can PHP session be set and read, used, if Cookies are disabled in users Browser?"Then, it should be yes. It can read and used.However, If user close browser, then it's gone, and that's it. (since that guy didn't ask about this part)Yes.. It will Work

1.PHP will pass one GET parameter in URL with the name PHPSESSID but it can be changed session.name in php.ini file.

2. It add one hidden input in forms with same name.You will need to put the session ID in the URL. You will need to make a change in your php.ini file so if you are on a shared host you will need to contact them to see what they will do for you.You are right, Session cannot work without cookies.

To illustrate this try doing the following actions.You will be redirected to the login page again as the server cannot identify the session.Hence, we can say without cookies session will not work.Also, If you are trying to login into the gmail( taking as example you can take any website) with diabled cookies then it will message as "Your browser has cookies disabled. Make sure your cookies are enabled and try again."// tell the PHP we want to use cookies from the session// then pass the session ID in the URL(inspect, navigate the network refresh the page you will see in the headers your session ID)

Unterminated entity reference in PHP

mega6382

[Unterminated entity reference in PHP](https://stackoverflow.com/questions/17027043/unterminated-entity-reference-in-php)

Here is my code:and here is the error:The error is in the line with '$row[imag_url]'.

2013-06-10 15:07:55Z

Here is my code:and here is the error:The error is in the line with '$row[imag_url]'.This correctly encodes the & < > and "" ''SimpleXMLElement is actually a system resource which behaves like an object. Which makes working with loops tricky. So when trying to add new child elements

instead of this:do this:or you can use htmlspecialchars(), to escape html characters.Note:mysql_* is deprecated as of php-5.5 and removed as of php-7. So instead use mysqli_* or PDO.

Why shouldn't I use mysql_* functions in PHP?My solution to this is specifically creating a text node, which makes sure absolutely everything is escaped properly:Try by changing -ToOREDIT

wrap quotes too round image_url, courtesy  BarrmarThe correct form is:Sorry for reviving an old question, but there is another solution to this..

Assuming the following code causes the "unterminated entity reference" error:@Joel-Davey's solution works very well:But you can also do the following if, for some reason, you don't want to use the above htmlspecialchars function (basically, you split the one step into two steps):i have no idea which one will execute faster; i doubt it'd make much of a difference, but, this works, and i thought it should be mentionedPS: i know it works because i'm using it on a personal projectIf you use the new created node you can set the value by accessing {0} property. This should escape any special characters.

Magento addFieldToFilter: Two fields, match as OR, not AND

Gabriel H

[Magento addFieldToFilter: Two fields, match as OR, not AND](https://stackoverflow.com/questions/3826474/magento-addfieldtofilter-two-fields-match-as-or-not-and)

I've been stuck on this for the last few hours. I got it working by hacking a few lines in /lib/Varien/Data/Collection/Db.php, but I'd rather use the proper solution and leave my core untouched.All I need to do is get a collection and filter it by two or more fields. Say, customer_firstname and remote_ip. Here's my (disfunctional without hacking Db.php) code:With a stock Db.php, I tried this: (sample taken from http://magentoexpert.blogspot.com/2009/12/retrieve-products-with-specific.html)But that gives me this error:If I wrap that with a try/catch, then it moves into _getConditionSql() and gives this error:Does anyone have any working, functional code for doing this? I'm running Magento 1.9 (Enterprise). Thanks!

2010-09-29 22:53:31Z

I've been stuck on this for the last few hours. I got it working by hacking a few lines in /lib/Varien/Data/Collection/Db.php, but I'd rather use the proper solution and leave my core untouched.All I need to do is get a collection and filter it by two or more fields. Say, customer_firstname and remote_ip. Here's my (disfunctional without hacking Db.php) code:With a stock Db.php, I tried this: (sample taken from http://magentoexpert.blogspot.com/2009/12/retrieve-products-with-specific.html)But that gives me this error:If I wrap that with a try/catch, then it moves into _getConditionSql() and gives this error:Does anyone have any working, functional code for doing this? I'm running Magento 1.9 (Enterprise). Thanks!I've got another way to add an or condition in the field:OR conditions can be generated like this:This will generate an SQL WHERE condition something like:Each nested array(<condition>) generates another set of parentheses for an OR condition.I also tried to get the field1 = 'a' OR field2 = 'b'Your code didn't work for me.Here is my solutionIt gives me SELECT name, keywords FROM abc WHERE keywords like '%foo%' OR additional_keywords like '%bar%'.It is maybe not the "magento's way" but I was stuck 5 hours on that.Hope it will helpHere is my solution in Enterprise 1.11 (should work in CE 1.6):Which results in this SQL:To filter by multiple attributes use something like:For more information check:

http://docs.magentocommerce.com/Varien/Varien_Data/Varien_Data_Collection_Db.html#_getConditionSqlThanks Anda, your post has been a great help!!

However the OR sentence didnt' quite work for me and I was getting an error: 

getCollection() "invalid argument supplied for foreach".So this is what I ended with (notice the attribute being specified 3 times instead of 2 in this case): addFieldToFilter first requires a field and then condition  -> link.There is a bit of confusion going on here, but let me try to clarify things:Lets say you wanted sql that looked something like:In order to achieve this, your collection needs to be formatted like this:Now to see what this looks like you can always echo the query that this creates by using This is the real magento way:Result:Source: http://alanstorm.com/magento_collectionsTo create simple OR condition for collection, use format below:This will produce SQL like this:

PHP to search within txt file and echo the whole line

aullah

[PHP to search within txt file and echo the whole line](https://stackoverflow.com/questions/3686177/php-to-search-within-txt-file-and-echo-the-whole-line)

Using php, I'm trying to create a script which will search within a text file and grab that entire line and echo it.I have a text file (.txt) titled "numorder.txt" and within that text file, there are several lines of data, with new lines coming in every 5 minutes (using cron job). The data looks similar to:How would I go about creating a php script which will search for the data "aullah1" and then grab the entire line and echo it? (Once echoed, it should display "2 aullah1" (without quotations).If I didn't explain anything clearly and/or you'd like me to explain in more detail, please comment.

2010-09-10 15:55:59Z

Using php, I'm trying to create a script which will search within a text file and grab that entire line and echo it.I have a text file (.txt) titled "numorder.txt" and within that text file, there are several lines of data, with new lines coming in every 5 minutes (using cron job). The data looks similar to:How would I go about creating a php script which will search for the data "aullah1" and then grab the entire line and echo it? (Once echoed, it should display "2 aullah1" (without quotations).If I didn't explain anything clearly and/or you'd like me to explain in more detail, please comment.And a PHP example, multiple matching lines will be displayed:Do it like this. This approach lets you search a file of any size (big size won't crash the script) and will return ALL lines that match the string you want.Note the way strpos is used with !== operator.Using file() and strpos():When tested on this file:It outputs:Update:

To show text if the text is not found, use something like this:Here I'm using the $found variable to find out if a match was found.looks like you're better off systeming out to system("grep \"$QUERY\"") since that script won't be particularly high performance either way. Otherwise http://php.net/manual/en/function.file.php shows you how to loop over lines and you can use http://php.net/manual/en/function.strstr.php for finding matches.one way...though it would probably be better to read it line by line with fopen() and fread() and use strpos()

Permission denied: /var/www/abc/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable?

PHPLover

[Permission denied: /var/www/abc/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable?](https://stackoverflow.com/questions/20627084/permission-denied-var-www-abc-htaccess-pcfg-openfile-unable-to-check-htacces)

Hi all I'm using PHP for my website and ubuntu linux on my system. I got the above error in error.log file of apache, even after configurating everything properly. I did a lot of research on this but couldn't be able to resolve the issue. Can anyone please help me in this reagard? Following is my .htaccess file in abc directory. Can anyone please help me in this regard?

2013-12-17 06:03:05Z

Hi all I'm using PHP for my website and ubuntu linux on my system. I got the above error in error.log file of apache, even after configurating everything properly. I did a lot of research on this but couldn't be able to resolve the issue. Can anyone please help me in this reagard? Following is my .htaccess file in abc directory. Can anyone please help me in this regard?Make sure that the htaccess file is readable by apache:And make sure the directory it's in is readable and executable:I had the same issue when I changed the home directory of one use. In my case it was because of selinux. I used the below to fix the issue:If it gets into the selinux arena you've got a much more complicated issue. It's not a good idea to remove the selinux protection but to embrace it and use the tools that were designed to manage it.If you are serving content out of /var/www/abc, you can verify the selinux permissions with a Z appended to the normal ls -l command. i.e. ls -laZ will give the selinux context. To add a directory to be served by selinux you can use the semanage command like this. This will change the label on /var/www/abc to httpd_sys_content_tthis will update the label for /var/www/abcThis answer was taken from unixmen and modified to fit this question. I had been searching for this answer for a while and finally found it so felt like I needed to share somewhere. Hope it helps someone.

Dollar ($) sign in password string treated as variable

ncatnow

[Dollar ($) sign in password string treated as variable](https://stackoverflow.com/questions/2557834/dollar-sign-in-password-string-treated-as-variable)

Spent some time troubleshooting a problem whereby a PHP/MySQL web application was having problems connecting to the database. The database could be accessed from the shell and phpMyAdmin with the exact same credentials and it didn't make sense.Turns out the password had a $ sign in it:The password being sent was "mypas" which is obviously wrong.What's the best way to handle this problem? I escaped the $ with a \and it worked.I generally use $string = 'test' for strings which is probably how I avoided running into this before. Is this correct behavior? What if this password was stored in a database and PHP pulled it out - would this same problem occur? What am I missing here...

2010-04-01 02:45:30Z

Spent some time troubleshooting a problem whereby a PHP/MySQL web application was having problems connecting to the database. The database could be accessed from the shell and phpMyAdmin with the exact same credentials and it didn't make sense.Turns out the password had a $ sign in it:The password being sent was "mypas" which is obviously wrong.What's the best way to handle this problem? I escaped the $ with a \and it worked.I generally use $string = 'test' for strings which is probably how I avoided running into this before. Is this correct behavior? What if this password was stored in a database and PHP pulled it out - would this same problem occur? What am I missing here...Single quote strings are not processed and are taken "as-is". You should always use single quote strings unless you specifically need the $variable or escape sequences (\n, \r, etc) substitutions. It's faster and less error prone.PHP is interpolating the variable $word into the string mypas$word, as is normal behaviour for string literals delineated with double quotes. Since $word is presumably undefined, the resulting interpolated string is mypas.The solution is to use single quotes. Single-quoted string literals do not undergo variable interpolation.The other answers all work until there are single quotes embedded in the passsword.Fail:$_DB['password'] = 'my'pas$word';Alternatives:If you don't have other escaped characters, you can escape the $ with \$, e.g. $_DB['password'] = "my'pas\$word";Or it may be simpler to escape the single quote e.g.$_DB['password'] = 'my\'pas$word';Just put it in a single-quoted string:The double-quoted string will interpolate variables, but single-quoted strings won't. So that will solve your problem.use single quotesJust use single quotes ' instead of  " and it will not try and treat $word as a variable.Strings quotes with the double quotation are interpreted for variables.  Single quoted strings are interpreted literally.This should yield:I just ran across this problem and fixed it prior to finding this thread.  I am sure all the solutions with single quotes work perfect.  I chose to just concatenate the pass which also works fine as I was unaware of the single quote solution....IE 

How do you hide labels in a form class in symfony2?

Mark

[How do you hide labels in a form class in symfony2?](https://stackoverflow.com/questions/10602923/how-do-you-hide-labels-in-a-form-class-in-symfony2)

I know that you can split a form out in twig and choose to not render the label for a particular field, but I can't help but think that you must be able to do this from the form class. The 'label' key in the options array lets you change this value to whatever you like, but passing either false or an empty string just returns the field name (see examples below where 'roles' is rendered as the label).Strangely, passing an empty space (which feels very dirty) seems to render a completely empty label, with no space even when viewing the source. Can anyone shed any light on the best approach, or even why the empty space seems to work?

2012-05-15 14:27:48Z

I know that you can split a form out in twig and choose to not render the label for a particular field, but I can't help but think that you must be able to do this from the form class. The 'label' key in the options array lets you change this value to whatever you like, but passing either false or an empty string just returns the field name (see examples below where 'roles' is rendered as the label).Strangely, passing an empty space (which feels very dirty) seems to render a completely empty label, with no space even when viewing the source. Can anyone shed any light on the best approach, or even why the empty space seems to work?Since Symfony 2.2 you can avoid the <label> rendering using the false value for the label attribute:SourceIf you follow the accepted answer which says:your form is not as re-usable. Especially if your form appears in more than one location (or might in the future).If you do not want to render the form label it is best to do so in Twig (assuming your using Twig).instead of rendering {{ form_row(form.name) }}, render each element separetly and exclude the form_labelex.If down the road you wanted the label in one instance of the form but the not the other, simply adding {{ form_label(form.name) }} would suffice; Where as changing array('label' => true) would turn the label on everywhereIf you are rendering your form with the one liner {{ form(form) }} then you should have a look at the symfony docs Just add {'label':false} to your form_row()To hide my label, I had to render just the widget for the field, and not the label, e.g.The problem with the ' ' label with a space in, is that it still renders the html input which is there and affects the page.I don't understand very well your question but in form to show the name of label,personnaly I do like that  : in my twig  :this should work (although its not a very clean solution)(note the space between the ticks)

Request headers bag is missing Authorization header in Symfony 2?

Polmonino

[Request headers bag is missing Authorization header in Symfony 2?](https://stackoverflow.com/questions/11990388/request-headers-bag-is-missing-authorization-header-in-symfony-2)

I'm trying to implement a custom authentication provider in Symfony 2. I'm sending a test request using Fiddler and printing all headers server side; well, Authorization header is missing.Am i doing something wrong?Listener just prints the headers and quits:Response is missing Authorization header:

2012-08-16 15:16:21Z

I'm trying to implement a custom authentication provider in Symfony 2. I'm sending a test request using Fiddler and printing all headers server side; well, Authorization header is missing.Am i doing something wrong?Listener just prints the headers and quits:Response is missing Authorization header:

You must add this code to a virtualhost tagIt will not work if you put it in a Directory tag.Akambi's answer didn't work for me, but found this answer in the php website:"Workaround for missing Authorization header under CGI/FastCGI Apache:Now PHP should automatically declare $_SERVER[PHP_AUTH_*] variables if the client sends the Authorization header."Thanks derkontrollfreak+9hy5l!The verified solution worked for me at the time to get the Authorization header through. However, it generated an empty Authorization header when there was none in the incoming request. This is how I solved it:I had the same problem when writing a public API with custom Authorization header. To fix the HeaderBag I used a listener:and bound it to kernel.request in the service definition:Authorization header is used for http basic authentication which is discarded by apache if not in valid format. Try using another name. Another option that worked for Apache 2.4 when other options did not was to set the CGIPassAuth option in the relevant <Directory> context, like this:According to the documentation, it is available since Apache 2.4.13.Another solution is to change your PHP handler to run PHP as Apache Module instead of as CGI application.We should authorise this header "Authorization" on the server side,it's also simply done with nelmioCorsBundle

nelmio_cors:

    defaults:

        allow_credentials: false

        allow_origin: []

        allow_headers: []

        allow_methods: []

        expose_headers: []

        max_age: 0

        hosts: []

        origin_regex: false

        forced_allow_origin_value: ~

    paths:

        '^/api/':

            allow_origin: ['*']

            allow_headers: ['Authorization']

Getting「Indirect modification of overloaded property has no effect」notice

Nikolay Dutchuk

[Getting「Indirect modification of overloaded property has no effect」notice](https://stackoverflow.com/questions/13421661/getting-indirect-modification-of-overloaded-property-has-no-effect-notice)

I want to use a Registry to store some objects. Here is a simple Registry class implementation. When I try to access this class, I get "Indirect modification of overloaded property has no effect" notification.What do I do wrong?

2012-11-16 17:38:39Z

I want to use a Registry to store some objects. Here is a simple Registry class implementation. When I try to access this class, I get "Indirect modification of overloaded property has no effect" notification.What do I do wrong?This behavior has been reported as a bug a couple times:It is unclear to me what the result of the discussions was although it appears to have something to do with values being passed "by value" and "by reference". A solution that I found in some similar code did something like this:Notice how they use &__get and &__set and also when assigning the value use & $value. I think that is the way to make this work.I know that this is now quite an old topic, but it is something that I encountered myself for the first time today, and I thought it might be helpful to others if I expanded upon what was said above with my own findings.As far as I can tell, this is not a bug in PHP. In fact, I suspect the PHP interpreter has to make a special effort to detect and report this issue so specifically. It relates to the way in which you are accessing the "foo" variable.When PHP sees this part of your statements, the first thing that it does is check to see if the object instance has a publicly accessible variable called "foo". In this case, it doesn't, so the next step is to call one of the magic methods, either __set() (if you are attempting to replace the current value of "foo"), or __get() (if you are trying to access that value).In this statement, you are attempting to replace the value of "foo" with array(1, 2, 3), so PHP calls your __set() method with $key = "foo" and $value = array(1, 2, 3), and everything works fine.However, in this statement, you are retrieving the value of "foo" so that you can modify it (in this case by treating it as an array and appending a new element). The code implies that you want to modify the value of "foo" held by the instance, but in reality you are actually modifying a temporary copy of foo returned by __get(), and so PHP issues the warning (a similar situation arises if you pass Registry::getInstance()->foo to a function by reference instead of by value).You have a few options for working around this issue.Method 1You could write the value of "foo" into a variable, modify that variable, and then write it back, i.e.Functional, but horribly verbose and so not recommended.Method 2Have your __get() function return by reference, as suggested by cillosis (there is no need to have your __set() function return by reference, since it is not supposed to return a value at all). In this case you need to be aware that PHP can only return references to variables that already exist, and may issue notices or behave strangely if this constraint is violated. If we look at cillosis' __get() function adapted for your class (if you do choose to go down this route then, for reasons that are explained below, stick with this implementation of __get() and religiously do an existence check before any read from your registry):This is fine provided your application never tries to get a value that doesn't yet exist in your registry, but the moment you do, you will hit the "return;" statement and get an "Only variable references should be returned by reference" warning, and you can't fix this by creating a fallback variable and returning that instead, since that will give you the "Indirect modification of overloaded property has no effect" warning again for the same reasons as before. If your program can't have any warnings (and warnings are a Bad Thing because they can pollute your error log and affect the portability of your code to other versions/configurations of PHP), then your __get() method would have to create entries that do not exist before returning them, i.e.Incidentally, PHP itself seems to do something very similar to this with its arrays, that is:The above code will (on at least some versions of PHP) output something like "array(1) { ["foo"]=> &NULL }", meaning the "$var2 =& $var1['foo'];" statement might affect both sides of the expression. However, I think that it is fundamentally bad to allow the contents of a variable to be changed by a read operation, because it can lead to some seriously nasty bugs (and hence I feel that the above array behaviour is a PHP bug).For example, let us suppose that you're only ever going to store objects in your registry, and you modify your __set() function to raise an exception if $value is not an object. Any object stored in the registry must also conform to a special "RegistryEntry" interface, which declares that the "someMethod()" method must be defined. The documentation for your registry class thus states that a caller can attempt to access any value within the registry, and the result will either be retrieval of a valid "RegistryEntry" object, or null if that object does not exist. Let's also suppose that you further modify your registry to implement the Iterator interface so that people can loop through all registry entries using a foreach construct. Now imagine the following code:The rational here is that the doSomethingToRegistryEntry() function knows that it's not safe to read arbitrary entries from the registry, since they may or may not exist, so it does a check for the "null" case and behaves accordingly. All well and good. By contrast, the loop "knows" that any write operation to the registry would have failed unless the value written was an object that conforms to the "RegistryEntry" interface, so it doesn't bother to check to make sure that $entry is indeed such an object to save unnecessary overhead. Now let's suppose that there's a very rare circumstance under which this loop is reached sometime after an attempt is made to read any registry entry that does not yet exist. Bang!In the scenario described above, the loop would generate a fatal error "Call to a member function someMethod() on a non-object" (and if warnings are Bad Things, fatal errors are Catastrophes). Finding out that this is actually being caused by a seemingly-innocuous read operation somewhere else in the program that was added by last month's update is not going to be straightforward.Personally, I would avoid this method as well because whilst it can appear to behave well most of the time, it can really bite you hard if provoked. Happily, there is a much simpler solution available.Method 3Just don't define __get(), __set(), or __isset()! Then, PHP will create properties for you at runtime and make them publicly accessible, so that you can simply access them directly whenever you need to. No need to worry about references at all, and if you want your registry to be iterable, you can still do this by implementing the IteratorAggregate interface. Given the example you gave in your original question, I believe that this is by far your best option.The time to implement __get() and __isset() are when you want to give callers read-only access to certain private/protected properties, in which case you don't want to be returning anything by reference.I hope that this helps. :)In the example that doesn't workYou first do the __get and then it works with the returned value to add something to array. So you need to pass result from __get by reference:We need to use $value as only variables can be passed by reference.

We don't need to add & sign to __set as this function should return nothing, so there is nothing to reference to.

Why MAMP doesn't display errors?

Alex McCabe

[Why MAMP doesn't display errors?](https://stackoverflow.com/questions/14581460/why-mamp-doesnt-display-errors)

OK this is getting very frustrating. MAMP used to display errors but then stopped. I decided to do a fresh install of it as I couldn't figure it out. I check my PHP version, running 5.4.4 and go to that folder and change the php.ini to this:Still no errors showing. I go through all the folders and change all php.ini files, just in case. Nothing. I fix the forced error and dump out phpinfo(), check the error section and display_errors is Off. What the hell. I place error_reporting(E_ALL); ini_set('display_errors', 'on'); at the start of the PHP file and phpinfo() again. Local value is now On, master is still Off. Force a PHP error, and still get Server Error not PHP error. Anybody have any insight? I have a bug somewhere in some code and cannot find it, would love for PHP to just tell me. 

2013-01-29 11:06:43Z

OK this is getting very frustrating. MAMP used to display errors but then stopped. I decided to do a fresh install of it as I couldn't figure it out. I check my PHP version, running 5.4.4 and go to that folder and change the php.ini to this:Still no errors showing. I go through all the folders and change all php.ini files, just in case. Nothing. I fix the forced error and dump out phpinfo(), check the error section and display_errors is Off. What the hell. I place error_reporting(E_ALL); ini_set('display_errors', 'on'); at the start of the PHP file and phpinfo() again. Local value is now On, master is still Off. Force a PHP error, and still get Server Error not PHP error. Anybody have any insight? I have a bug somewhere in some code and cannot find it, would love for PHP to just tell me. MAMP sets up a few different php.ini files for the server, the client etc. Check in your phpinfo() which php.ini actually is read. Looks like you're editing the wrong one.There are two php.ini files on MAMP. You should change both php.ini files.Then change:to: If you're using MAMP PRO, you've to enable Error handling (PHP) in the UI interface which should contain at least two the main options: 'Display startup errors' and set output 'To: Display'.Display startup errors option is equivalent to display_startup_errors (in PHP) and To: Display to display_errors.See below:Change the setting in your php.ini file. The file is located in MAMP > conf > php5 > php.iniLook for display_errors = Off and change to display_errors = OnAfter that you need to restart your Apache and MySQL servers for the change to take effect.MAMP PRO users can visit the PHP tab in UI and make sure Log Errors: to screen is checked: screencastIf you are using MAMP version 3.2.2 then you only need to change one php.ini file:Mac: Applications/MAMP/conf/'(php7.0.9)'/php.iniWindows: C:\MAMP\conf\PHP Version you use'(php7.0.9)'\php.iniI know this is an old post but MAMP keeps changing their configuration of the files so I hope this helps.For newer versions of MAMP, the config file is stored in Appliations/MAMP/bin/php/[php version]/conf. Andrew Nagy pointed me in the right direction with his answer, but it wasn't quite correct for my installation of MAMP. Why they're different, I can't tell, but here we are.If anyone is stuck, the easiest thing to do is to just <?php echo phpinfo(); ?> in the index file of the application and look for the loaded php.ini directory.Here's a 2018 update to this problem. 

First, I'm having the same trouble and found this thread. I used phpinfo() and found yet another location of a php.ini file. Here are the paths (I work on a Mac):and ...The phpinfo() page lists two sources for the php.ini:I ended up changing all three, adding error_reporting(E_ALL) to some pages, restarting the server (even rebooted the machine) and still cant get it to display any error messages. i'm not sure where to go from here. Any ideas?Also there is a template saved in MAMP of the php.ini.

Go to File > Edit Template > PHP > Your Version.On MAMP 3.2.0 and PHP 7 you'll need to target php.ini-production and change the value to Production Value = On

Using mysql concat() in WHERE clause?

kevtrout

[Using mysql concat() in WHERE clause?](https://stackoverflow.com/questions/303679/using-mysql-concat-in-where-clause)

I would like to search my table having a column of first names and a column of last names.  I currently accept a search term from a field and compare it against both columns, one at a time with This works fine with single word search terms but the result set includes everyone with the name "Larry". But if someone enters a first name then a space, then a last name, I want a narrower search result. I've tried the following without success.   Any advice?EDIT:  The name I'm testing with is "Larry Smith".  The db stores "Larry" in the "first_name" column, and "Smith" in the "last_name" column.  The data is clean, no extra spaces and the search term is trimmed left and right.EDIT 2:  I tried Robert Gamble's answer out this morning.  His is very similar to what I was running last night.  I can't explain it, but this morning it works.  The only difference I can think of is that last night I ran the concat function as the third "or" segment of my search query (after looking through first_name and last_name). This morning I ran it as the last segment after looking through the above as well as addresses and business names.  Does running a mysql function at the end of a query work better than in the middle?

2008-11-19 22:44:12Z

I would like to search my table having a column of first names and a column of last names.  I currently accept a search term from a field and compare it against both columns, one at a time with This works fine with single word search terms but the result set includes everyone with the name "Larry". But if someone enters a first name then a space, then a last name, I want a narrower search result. I've tried the following without success.   Any advice?EDIT:  The name I'm testing with is "Larry Smith".  The db stores "Larry" in the "first_name" column, and "Smith" in the "last_name" column.  The data is clean, no extra spaces and the search term is trimmed left and right.EDIT 2:  I tried Robert Gamble's answer out this morning.  His is very similar to what I was running last night.  I can't explain it, but this morning it works.  The only difference I can think of is that last night I ran the concat function as the third "or" segment of my search query (after looking through first_name and last_name). This morning I ran it as the last segment after looking through the above as well as addresses and business names.  Does running a mysql function at the end of a query work better than in the middle?What you have should work but can be reduced to:Can you provide an example name and search term where this doesn't work?Note that the search query is now case sensitive.When usingIt will match both "Larry" and "larry". With this concat_ws, it will suddenly become case sensitive!This can be fixed by using the following query:Edit: Note that this only works on non-binary elements. See also mynameispaulie's answer....is probably what you want.To Luc:I agree with your answer, although I would like to add that UPPER only works on non-binary elements. If you are working with say an AGE column (or anything numeric) you will need to perform a CAST conversion to make the UPPER function work correctly.Forgive me for not responding to Luc's answer directly but for the life of me I could not figure out how to do that. If an admin can move my post, please do so.There's a few things that could get in the way - is your data clean?It could be that you have spaces at the end of the first name field, which then means you have two spaces between the firstname and lastname when you concat them? Using trim(first_name)/trim(last_name) will fix this - although the real fix is to update your data.You could also this to match where two words both occur but not necessarily together (assuming you are in php - which the $search_term variable suggests you are)you can do that (work in mysql) probably other SQL too..

just try this:You can try this:

What is 22527 in error_reporting 22527 of phpinfo

shin

[What is 22527 in error_reporting 22527 of phpinfo](https://stackoverflow.com/questions/4678082/what-is-22527-in-error-reporting-22527-of-phpinfo)

In my local dev env, I use PHP Version 5.3.3-1ubuntu9.2. Now when I see error_reporting, the value is 22527.What is 22527?I checked http://www.php.net/manual/en/errorfunc.constants.php, but I could not find the number.Could anyone tell me what it is?Do I need to change it to E_ALL | E_STRICT ?Thanks in advance.

2011-01-13 08:33:34Z

In my local dev env, I use PHP Version 5.3.3-1ubuntu9.2. Now when I see error_reporting, the value is 22527.What is 22527?I checked http://www.php.net/manual/en/errorfunc.constants.php, but I could not find the number.Could anyone tell me what it is?Do I need to change it to E_ALL | E_STRICT ?Thanks in advance.This value is actually bitmap mask, a sum of constants.So, 22527 isIn your case it's E_ALL & ~E_DEPRECATED, it will display every error, except E_DEPRECATED. PHP versions below 5.4 will also exclude E_STRICT errors (since E_STRICT is not included in E_ALL before that version)This value is one or more of these constants bitwise-ored together.phpinfo() usually displays the numeric value instead of the constants or shorthands used inside INI files. Here is an example to map the value back to constants:Output:NEVER use the numeric value to set your error reporting, as the meaning of that value can change but the meaning of the constants (like E_ALL, E_STRICT, etc) likely will not:(and note that as of PHP 5.4, E_ALL now includes E_STRICT)IF you want the strictest reporting forever and ever, you could set error_reporting to a very large number in order to guarantee(?) that you will report all errors forever :Check your php.ini for the value of error_reporting in human-readable PHP constants format. The phpinfo() function appears to always show the numeric value rather than showing the constants.But, personally, I leave php.ini with the default values for error reporting. Instead I just put the error reporting function at the top of whatever php script I'm working on to override the defaults. e.g.:

How to Increase Import Size Limit in phpMyAdmin using Xampp server?

Rohit Verma

[How to Increase Import Size Limit in phpMyAdmin using Xampp server?](https://stackoverflow.com/questions/31266508/how-to-increase-import-size-limit-in-phpmyadmin-using-xampp-server)

Does anyone know if or how you can increase the import size limit in phpMyAdmin? Currently my server is limited to 2MB.Please note that this is not the same as the upload_max_filesize in php.ini. That value is set to 2MB.I need to import a table into one of my DBs and the phpMyAdmin restriction of 50MB or more MB Data on the import is preventing me from doing that.

2015-07-07 10:50:12Z

Does anyone know if or how you can increase the import size limit in phpMyAdmin? Currently my server is limited to 2MB.Please note that this is not the same as the upload_max_filesize in php.ini. That value is set to 2MB.I need to import a table into one of my DBs and the phpMyAdmin restriction of 50MB or more MB Data on the import is preventing me from doing that.Change these values in php.iniThen restart Wamp for the changes to take effect. It will take some time. If you get following error:Then update the phpMyAdmin configuration, at phpMyAdmin\libraries\config.default.phpChange below lines in php.ini file:You can increase the limit from php.ini file. If you are using windows, you will the get php.ini file from C:\xampp\php directory.Now changes the following lines & set your limitgo to your cpanel and search "ini editor". You'll get "Multiphp INI Editor"

There you select your wordpress directory and put

upload_max_filesize = 256M 

post_max_size = 256M

memory_limit = 256MAfter changing your php.ini values, edit your phpmyadmin.conf located on wamp\alias directory and increase the values of:Be sure you are editing php.ini not php-development.ini or php-production.ini, php.ini is Configuration setting file and when you edit it in editor it show .ini extension. You can find php.ini here: xampp/php/phpimage of php.ini file location

How to determine whether a string is valid JSON?

Spot

[How to determine whether a string is valid JSON?](https://stackoverflow.com/questions/1187576/how-to-determine-whether-a-string-is-valid-json)

Does anyone know of a robust (and bullet proof) is_JSON function snippet for PHP? I (obviously) have a situation where I need to know if a string is JSON or not.Hmm, perhaps run it through a JSONLint request/response, but that seems a bit overkill.

2009-07-27 10:59:22Z

Does anyone know of a robust (and bullet proof) is_JSON function snippet for PHP? I (obviously) have a situation where I need to know if a string is JSON or not.Hmm, perhaps run it through a JSONLint request/response, but that seems a bit overkill.If you are using the built in json_decode PHP function, json_last_error returns the last error (e.g. JSON_ERROR_SYNTAX when your string wasn't JSON).Usually json_decode returns null anyway.What about using json_decode, which should return null if the given string was not valid JSON-encoded data ?See example 3 on the manual page :For my projects I use this function (please read the "Note" on the json_decode() docs).Passing the same arguments you would pass to json_decode() you can detect specific application "errors" (e.g. depth errors)With PHP >= 5.6With PHP >= 5.3Usage example:Doesn't json_decode() with a json_last_error() work for you?  Are you looking for just a method to say "does this look like JSON" or actually validate it? json_decode() would be the only way to effectively validate it within PHP.This is the best and efficient way  

PHP: HTTP or HTTPS? [duplicate]

sachidanand

[PHP: HTTP or HTTPS? [duplicate]](https://stackoverflow.com/questions/4042962/php-http-or-https)

How can I tell if a php page was accessed via http or https?

2010-10-28 12:35:23Z

How can I tell if a php page was accessed via http or https?If the request was sent with HTTPS you will have a extra parameter in the $_SERVER superglobal - $_SERVER['HTTPS']. You can check if it is set or notIf your request is sent by HTTPS you will have an extra server variable named 'HTTPS'These should both workThis can get more complicated depending on where PHP sits in your environment, since your question is quite broad. This may depend on whether there's a load-balancer and how it's configured. Here are are a few related questions:This will contain a 'non-empty' value if the request was sent through HTTPSPHP Server VariablesYou should be able to do this by checking the value of $_SERVER['HTTPS'] (it should only be set when using https).See http://php.net/manual/en/reserved.variables.server.php.

root path doesn't work with php include

Paul Dixon

[root path doesn't work with php include](https://stackoverflow.com/questions/1400795/root-path-doesnt-work-with-php-include)

/ in the beginning of a link to get to the root folder doesn't work in php include.for example "/example/example.php"What is the solution?

2009-09-09 16:48:29Z

/ in the beginning of a link to get to the root folder doesn't work in php include.for example "/example/example.php"What is the solution?I'm assuming by root folder you mean your web document root, rather than filesystem root.To that end, you can eitherI had this issue too. Paul Dixon's answer is correct, but maybe this will help you understand why:The issue here is that PHP is a server side language. Where pure HTML documents can access files based on the root url you set up on the server (ie. to access an image from any sub-directory you're on you would use /images/example.jpg to go from the top directory down), PHP actually accesses the server root when you use include (/images/example.jpg)The site structure that you have set up actually lies within a file system in the Apache Server. My site root looks something like this, starting from the server root and going down:"test" represents your site rootSo to answer your question why your PHP include isn't getting the result you want (it is working exactly as it should) is because you're asking the PHP code to try and find your file at the server root, when it is actually located at the HTML root of your site which would look something like the above.Your file would be based on the site root of "test/" and would look something like this:/home2/siteuserftp/public_html/test/about/index.phpThe answer Paul Dixon provided:is exactly what will fix your problem (don't worry about trying to find the document root to replace 'DOCUMENT_ROOT', PHP will do it for you. Just make sure you have 'DOCUMENT_ROOT' literally in there)EDIT:More information DOCUMENT_ROOT and other PHP SERVER variables can be found hereinclude() (and many other functions like require(), fopen(), etc) all work off the local filesystem, not the web root.So, when you do something like thisYou're trying to include from the root of your *nix machine.And while there are a multitude of ways to approach what you're doing, Paul Dixon's suggestions are probably your best bets.Every web server has a public_html folder, in which you usually keep your files etc. By using /, you will not get to public_html, instead you direct towards the main (unaccesible) root. So, use $_SERVER['DOCUMENT_ROOT']."/your/locati.on" insteadI solved this on a machine running Windows and IIS with the following:If you're on a local dev machine, you can force your domain to point to localhost by adding the following in C:\Windows\System32\drivers\etc\hostsAlso, you'll need to enable allow_url_include in php.ini like soFor me, the following trick worked.

I'm using Windows with IIS, so DOCROOT is C:\Inetpub\wwwroot.Now, both versions allowed:some versions of PHP may have the delimiter at the end of document root while others may not. As a practical matter you may want to use:maybe it's a bit unconventionalIf I have a case likethe solution that I use is simple. 

get the path before the "Dir1"something like this I found it usefull id i need to rename the main subdir

for example fromTO 

How to pass an array via $_GET in php?

Mirko

[How to pass an array via $_GET in php?](https://stackoverflow.com/questions/7206978/how-to-pass-an-array-via-get-in-php)

How can I pass one or more variables of type array to another page via $_GET?I always passed variable values in the form ?a=1&b=2&c=3What about passing a=[1,2,3] ?Do I need to write a for loop and append all the values?Thanks

2011-08-26 15:21:27Z

How can I pass one or more variables of type array to another page via $_GET?I always passed variable values in the form ?a=1&b=2&c=3What about passing a=[1,2,3] ?Do I need to write a for loop and append all the values?ThanksYou can use the [] syntax to pass arrays through _GET:PHP understands this syntax, so $_GET['a'] will be equal to array(1, 2, 3).You can also specify keys:Multidimentional arrays work too:http_build_query() does this automatically:An alternative would be to pass json encoded arrays:And you can parse a with json_decode:And encode it again with json_encode:Dont ever use serialize() for this purpose. Serialize allows to serialize objects, and there is ways to make them execute code. So you should never deserialize untrusted strings.You can pass an associative array to http_build_query() and append the resulting string as the query string to the URL. The array will automatically be parsed by PHP so $_GET on the receiving page will contain an array.Examplethis will give you:if you want to encode the brackets also then use the below code:Output:Reference: http_build_query, urlencodeJust repeat your $_GET variables like this: name=john&name=leaThis gives you an array. I used to believe it would be overwritten!

parent::parent in PHP

Alexandre

[parent::parent in PHP](https://stackoverflow.com/questions/8212048/parentparent-in-php)

I search a way to access to the parent, parent function of a class without to call the parent... Hmmm, that sound a bit weird explanation so i will give an example: I would like to display "level 1-level 3" then doing something like that:Do you have an idea how I can do this? (I am not allow to edit myclass and myclass2, they are part of a framework...)

2011-11-21 12:47:41Z

I search a way to access to the parent, parent function of a class without to call the parent... Hmmm, that sound a bit weird explanation so i will give an example: I would like to display "level 1-level 3" then doing something like that:Do you have an idea how I can do this? (I am not allow to edit myclass and myclass2, they are part of a framework...)Simple solution. Use the root object myclass directly:If you need a more general approach have a look at outis answer.You could do it using get_parent_classOr you could use reflection:However, it may not be a good idea, depending on what you're trying to achieve.Maybe you can just add myclass2 as a member object in myclass3  and try to code like :No, this is not possible. Unfortunately there is no possibility to refer directly to the original class, only to it's self or to it's parent.You cannot chain parents, instead create some sort of GetParent() method in your parent classes that simply returns $this;if you want use the test function directly on class1  you must extend from class1. Please search about polimorphism.will you try "parent::parent::parent::parent" when you have class5 ??I think you can  add a level parameter to test method. and check it first.There is no operator to get the root object. I would do something like this:In some situations, probably you can entirely override the root's method. I mean, instead of calling the parent's parent's one, you can copy the parent's parent's method code and add yours.my approach:

if you have the code:

and you want in class C call method from class A (but not class B) refactor it to the code:

Convert time and date from one time zone to another in PHP

titel

[Convert time and date from one time zone to another in PHP](https://stackoverflow.com/questions/3905193/convert-time-and-date-from-one-time-zone-to-another-in-php)

Basically what I need is an script that, when provided with a time and a timezone can return the time in another time zone. My main issues are:

2010-10-11 10:05:05Z

Basically what I need is an script that, when provided with a time and a timezone can return the time in another time zone. My main issues are:The above examples will output:found on DateTime Manual on php.netEDIT:

Like Pekka said: The DateTime class exists from 5.2 on and there you first have to find out which of the methods are realy implemented and which one only exist from 5.3 on.try this, it might help :)A bit description:

The function takes 3 inputs, time to convert, timezone to convert to, current timezone and returns the output in the specified format.I know its late. For anyone who would want simple function to convert utc to any local time zone Here i use this function for converting datetime into another timezone.

For best result if you convert your datetime into utc timezone and then convert into required timezone then it is better result for it.Thank You.

Error 502 in nginx + php5-fpm

andre487

[Error 502 in nginx + php5-fpm](https://stackoverflow.com/questions/10470109/error-502-in-nginx-php5-fpm)

I have some error with subj. Server doesn't high loaded: ~15% CPU, there are several Gb of memory, HDD is not buisy. But error 502 throws approximately in 3% of cases.Programs: Debian 6, nginx/0.7.62, php5-fpm (5.3.3-1).In error.log of nginx is this error: State of php5-fpm usually like this:I think, this mean loading is not high.I have increased backlog params: in sysctl - net.core.somaxconn = 5000, in php-fpm pool - listen.backlog = 5000. No effect.I quote a configuration:/etc/nginx/nginx.conf/etc/nginx/php_locationphp-fpm poolWhat can I do to optimize this system and make this use all server resources?PS. I'm sorry, my english is bad.

2012-05-06 11:18:07Z

I have some error with subj. Server doesn't high loaded: ~15% CPU, there are several Gb of memory, HDD is not buisy. But error 502 throws approximately in 3% of cases.Programs: Debian 6, nginx/0.7.62, php5-fpm (5.3.3-1).In error.log of nginx is this error: State of php5-fpm usually like this:I think, this mean loading is not high.I have increased backlog params: in sysctl - net.core.somaxconn = 5000, in php-fpm pool - listen.backlog = 5000. No effect.I quote a configuration:/etc/nginx/nginx.conf/etc/nginx/php_locationphp-fpm poolWhat can I do to optimize this system and make this use all server resources?PS. I'm sorry, my english is bad.The issue is socket itself, its problems on high-load cases is well-known. Please consider using TCP\IP connection instead of unix socket, for that you need to make these changes:On Centos 7, Plesk 12.5I had this problem after my harddisc went full and some services failed.

Other Domains workt perfectly, but not one of them it only gave me 502 and similar as timeouts. From the Errorlog:To solve it, I had to (first make space available and then) restart php-fpm and nginx - then this error vanished!The only reason for this file not created is configuration at /etc/php-fpm.d/www.confChange  listen = 127.0.0.1:9000With    listen = /var/run/php-fpm/php-fpm.sockAnd then restart both nginx and php-fpmI the same issue, but didn't wish to switch from sockets to TCP/IP.  Restarting php-fpm and nginx will solve the issue.

Validating entities without form in Symfony 2

vinnylinux

[Validating entities without form in Symfony 2](https://stackoverflow.com/questions/10324782/validating-entities-without-form-in-symfony-2)

I'm creating a REST API controller for Symfony 2. I started using the SensioGeneratorBundle to create a CRUD and modified the controller to act as a REST controller. However, i don't have forms so i'm thinking about removing this part.How can i validate my fields without a form? Everything is connected to the form and i want some freedom, including customizing field names. For example, POST x and y fields are interpreted by Symfony as title and content. 

2012-04-25 22:33:58Z

I'm creating a REST API controller for Symfony 2. I started using the SensioGeneratorBundle to create a CRUD and modified the controller to act as a REST controller. However, i don't have forms so i'm thinking about removing this part.How can i validate my fields without a form? Everything is connected to the form and i want some freedom, including customizing field names. For example, POST x and y fields are interpreted by Symfony as title and content. To be true, form is not directly related to validation. Let me explain this.The form component is responsible of mapping data received from the client, be it GET or POST data. So, it will maps string to object of your code (can be an array if not binding to an entity).Form use the validator component to validate the entity after data have been mapped to it. This means that validation of the entity is totally decoupled from the form component. So, when the form is validated, it really means that the form component validate your entity and not the form data. What gets validated is the entity, not the form. The form is use solely to take a string representation and map it to the entity hierarchy. The documentation reflects this as the Form and the Validation are distinct sections of the symfony book.That being said, this also means that the validation of entities can be done outside the form component at great ease. You define you constaints as annotations or in an external file (yml, php or xml) and use the validator component to validate you entity. Here a code example taken from the Validation section of the book:As you can see, there is no form involved here, only an object and the validator service. Moreover, the validation component of Symfony2 is completely standalone. This means you can use it without the whole framework. That being said, when used standalone, you loose nice integration with other stuff.This way, your REST service receives parameters, create entities from it and use the validator service to validate their integrity. Using the form is not mandatory to validate entities.

Hiding PHP's X-Powered-By header

alex

[Hiding PHP's X-Powered-By header](https://stackoverflow.com/questions/2318806/hiding-phps-x-powered-by-header)

I know in PHP, it sends the X-Powered-By header to have the PHP version.I also know by appending some checksums, you can get access to PHP's credits, and some random images (more info here).I also know in php.ini you can turn expose_php = off.But here is something I have done on a few sites, and that is useWhen I view the headers, I can see that it is now 'Alex' instead of the PHP version. My question is, will this send the previous PHP header first (before it reaches my header(), and is it detectable by any sniffer program? Or are headers 'collected' by PHP, before being sent back to the browser?By the way, this is not for security by obscurity, just curious how headers work in PHP.

2010-02-23 14:26:13Z

I know in PHP, it sends the X-Powered-By header to have the PHP version.I also know by appending some checksums, you can get access to PHP's credits, and some random images (more info here).I also know in php.ini you can turn expose_php = off.But here is something I have done on a few sites, and that is useWhen I view the headers, I can see that it is now 'Alex' instead of the PHP version. My question is, will this send the previous PHP header first (before it reaches my header(), and is it detectable by any sniffer program? Or are headers 'collected' by PHP, before being sent back to the browser?By the way, this is not for security by obscurity, just curious how headers work in PHP.In PHP, headers aren't sent until PHP encounters its first output statement.This includes anything before the first <?php.This is also why setcookie sends throws a warning if you try to use it after something has been output:Note that none of this applies if output buffering is in use, as the output will not be sent until the appropriate output buffering command is run.You can set expose_php = Off in your php.ini if you don't want it to send X-Powered-By header.PHP first compiles everything (including which headers have which values ) and then start the output, not vice-versa.PHP is also detectable with its own easter eggs, you can read about this topic here : PHP Easter EggsSee Apache Tips & Tricks: Hide PHP version (X-Powered-By)Headers are "collected" by PHP before being sent back to the browser, so that you can override things like the status header.  The way to test it is go to a command prompt, and type:And you'll see the headers that are sent in the response (replace /index.php with the URL of your PHP page after the domain.)To get rid of the X-Powered-By header without having access to php.ini, simply add an empty header.This overwrites the default X-Powered-By header with an empty value an though most clients and applications act like this header was not sent at all.As noticed before, this must be inserted into the code before any output is sent.And to answer your question:Only your X-Powered-By header will be sent because it gets replaced by your header with the same name. So it can't be detected by a 'sniffer'.No, it does not send the previous PHP header first. Headers are either sent or not sent (in complete, as one batch) in PHP. By default your headerDocs call replaces a previous header with the same name (unless you specify something different with the second parameter).As it does not sent it earlier, it is not detectable with a sniffer program.So yes, headers are collected by PHP and are send the moment "the real" output starts (HTTP response body).See as well headers_sentDocs.

PHP DateTime::createFromFormat doesn't parse ISO 8601 date time

Jake

[PHP DateTime::createFromFormat doesn't parse ISO 8601 date time](https://stackoverflow.com/questions/4411340/php-datetimecreatefromformat-doesnt-parse-iso-8601-date-time)

Code speaks a million words:Any idea what's going on? Btw, yes, new DateTime("2010-12-07T23:00:00.000Z") works fine. But I prefer to know what input I am getting. 

2010-12-10 16:59:15Z

Code speaks a million words:Any idea what's going on? Btw, yes, new DateTime("2010-12-07T23:00:00.000Z") works fine. But I prefer to know what input I am getting. There's a bug report that exactly describes your problem :)https://bugs.php.net/bug.php?id=51950Since 2016-08-07, the bug report has been marked as "not a bug". You need to use strtotime or new DateTime instead.The constants that have been defined apply to both formatting and parsing in the same way, which forces your ways.Parsing ISO8601 date, and also switching timezone:Nobody mentioned to use DATE_ATOM which is as far as i know phps most correct implementation of ISO 8601. It should at least work for the last 3 of these:To be able to parse all of them i wrote a tiny function:As @Glutexo mentioned it works only if there are only 1 to 6 precision digits for the decimal part, too. Feel free to improve it.try this:It is very strange and disappointing that this bug is still actual.

Here is a right pattern for parsing date with microseconds in decimal part of seconds:Usage:For the answer listed here https://stackoverflow.com/a/14849503/2425651

we can use this format "Y-m-d\TH: i: s.u+" to keep the microseconds.Simply :Use DATE_ATOM rather than 'c' when formatting like @Steven said. This is how you work with ISO 8601 in PHP.printsThis one works for me:I am using follow function that allow multiple ISO8601 formats:here are all supported datesThis code is benevolent for missing timezone and milliseconds and works in older php versions.I've experienced this issue with POSTGRES default Time with timezone format and this was the format that fixed it for me:Y-m-d H:i:s.uO

Check if two PHP datetime objects are set to the same date ( ignoring time )

Dave Shaw

[Check if two PHP datetime objects are set to the same date ( ignoring time )](https://stackoverflow.com/questions/8328416/check-if-two-php-datetime-objects-are-set-to-the-same-date-ignoring-time)

I just want to compare 2 datetime objects to see if they are set to the same date, but I don't care about the time component of the the object.  At the moment I am using the date_format command to extract strings like 'Y-m-d' to compare but this seems awkward.I'm new to programming and PHP so any pointers appreciated.

2011-11-30 15:29:51Z

I just want to compare 2 datetime objects to see if they are set to the same date, but I don't care about the time component of the the object.  At the moment I am using the date_format command to extract strings like 'Y-m-d' to compare but this seems awkward.I'm new to programming and PHP so any pointers appreciated.Use the object syntax!You were very close with your if expression, but the ! operator must be within the parenthesis.This can also be expressed asMy first answer was completely wrong, so I'm starting a new one.The simplest way, as shown in other answers, is with date_format. This is almost certainly the way to go. However, there is another way that utilises the full power of the DateTime classes.  Use diff to create a DateInterval instance, then check its d property: if it is 0, it is the same day.Note that this is almost certainly overkill for this instance, but it might be a useful technique if you want to do more complex stuff in future.I think your approach is good, but I would remove the - as they do not add anything.Searching for an answer with the same problem.. I arrived to this solution that's look better for me then use diff or other things.The main problem was ignoring the time parts of object DateTime, just set it to a time, for example at 12:00:00This worked great for me. Looking here for the same question and came up with another way to do it.  Fairly concise:First get a date_interval object using date_diff.   The date_interval object has a property for 'days' which you can use to get the total number of days between the two dates.I'm using this to compare today to registration dates and send emails at specific time intervals based on how long they have been a member.strtotime convert a textual date into a Unix timestamp : http://fr.php.net/manual/en/function.strtotime.phpAnd also :Initialise a DateTime object and set the time to 00:00:00. Then you can use any comparison between dates ignoring the times:

@Evert's answer works fine, but it looks like really wrong to transform a DateTime object into a string and then compare them. Quick and dirty, reusable with as many dates as you like, may still need some adjusting:update: less dirty.

Convert var_dump of array back to array variable

Chuck Burgess

[Convert var_dump of array back to array variable](https://stackoverflow.com/questions/3531857/convert-var-dump-of-array-back-to-array-variable)

I have never really thought about this until today, but after searching the web I didn't really find anything. Maybe I wasn't wording it right in the search.Given an array (of multiple dimensions or not):When var_dumped:The challenge is this: What is the best optimized method for recompiling the array to a useable array for PHP? Like an undump_var() function. Whether the data is all on one line as output in a browser or whether it contains the line breaks as output to terminal.Is it just a matter of regex? Or is there some other way? I am looking for creativity.UPDATE: Note. I am familiar with serialize and unserialize folks. I am not looking for alternative solutions. This is a code challenge to see if it can be done in an optimized and creative way. So serialize and var_export are not solutions here. Nor are they the best answers.

2010-08-20 14:33:16Z

I have never really thought about this until today, but after searching the web I didn't really find anything. Maybe I wasn't wording it right in the search.Given an array (of multiple dimensions or not):When var_dumped:The challenge is this: What is the best optimized method for recompiling the array to a useable array for PHP? Like an undump_var() function. Whether the data is all on one line as output in a browser or whether it contains the line breaks as output to terminal.Is it just a matter of regex? Or is there some other way? I am looking for creativity.UPDATE: Note. I am familiar with serialize and unserialize folks. I am not looking for alternative solutions. This is a code challenge to see if it can be done in an optimized and creative way. So serialize and var_export are not solutions here. Nor are they the best answers.var_export or serialize is what you're looking for.  var_export will render a PHP parsable array syntax, and serialize will render a non-human readable but reversible "array to string" conversion...Edit Alright, for the challenge:Basically, I convert the output into a serialized string (and then unserialize it).  I don't claim this to be perfect, but it appears to work on some pretty complex structures that I've tried...I tested it on a complex structure such as:There's no other way than manual parsing depending on the type.

I didn't add support for objects, but it's very similar to the arrays one; you just need to do some reflection magic to populate not only public properties and to not trigger the constructor.EDIT: Added support for objects... Reflection magic...(Here are a lot of "magic" numbers when incrementing string position counter $i, mostly just string lengths of the keywords and some parenthesis etc.)If you want to encode/decode an array like this, you should either use var_export(), which generates output in PHP's array for, for instance:could be the result of it. You would have to use eval() to get the array back, though, and that is a potentially dangerous way (especially since eval() really executes PHP code, so a simple code injection could make hackers able to gain control over your PHP script).Some even better solutions are serialize(), which creates a serialized version of any array or object; and json_encode(), which encodes any array or object with the JSON format (which is more preferred for data exchange between different languages).The trick is to match by chunks of code and "strings", and on strings do nothing but otherwise do the replacements:outputs:(removing ascending numeric keys starting at 0 takes a little extra accounting, which can be done in the repl function.)ps. this doesn't solve the problem of strings containing ", but as it seems that var_dump doesn't escape string contents, there is no way to solve that reliably. (you could match \["[^"]*"\] but a string may contain "] as well)Use regexp to change array(.) { (.*) } to array($1) and eval the code, this is not so easy as written because You have to deal with matching brackets etc., just a clue on how to find solution ;)I think you are looking for the serialize function:It allows you to save the contents of array in readable format and later you can read the array back with unserialize function.Using these functions, you can store/retrieve the arrays even in text/flat files as well as database.Updated to NOT USE create_function, as it is DEPRECATED as of PHP 7.2.0. Instead it is replaced to use anonymous functions:

How do I get Composer to download the latest commit in the master branch from GitHub for a package?

Patrick

[How do I get Composer to download the latest commit in the master branch from GitHub for a package?](https://stackoverflow.com/questions/19916183/how-do-i-get-composer-to-download-the-latest-commit-in-the-master-branch-from-gi)

I am trying to get Composer do download the latest commit for the Behat/MinkSelenium2Driver package. That particular repo only has a master branch. I have tried every method I can think of, including deleting the files and letting it pull them back in, to get it to work but it doesn't.How would I get it to pull in latest committed files or at least those from the commit I list below?Specifically I want to get this commit:

https://github.com/Behat/MinkSelenium2Driver/commit/2e73d8134ec8526b6e742f05c146fec2d5e1b8d6Thanks,

Patrick

2013-11-11 21:20:07Z

I am trying to get Composer do download the latest commit for the Behat/MinkSelenium2Driver package. That particular repo only has a master branch. I have tried every method I can think of, including deleting the files and letting it pull them back in, to get it to work but it doesn't.How would I get it to pull in latest committed files or at least those from the commit I list below?Specifically I want to get this commit:

https://github.com/Behat/MinkSelenium2Driver/commit/2e73d8134ec8526b6e742f05c146fec2d5e1b8d6Thanks,

PatrickThere is only one way to grab the head of the repository: Oh well, at least two ways:Probably at least three ways:Because that repository actually aliased the master branch as 1.1.x-dev, this would also work without the minimum-stability affecting all other packages:Simply specify the master branch:PS: the --dev is just to specify it's a test/development requirement, that's probably what you want.In our case, none of the previous answers were working. It turned out to be something simple:Composer only uses the repositories attribute of the ROOT composer.jsonhttps://getcomposer.org/doc/04-schema.md#repositoriesIn our case, we were trying to get the latest commit from dev-master of one of our transitive dependencies. There was some problem with the hooks between github and packagist preventing it from working like normal and it took us a couple hours to realize that we were editing the wrong composer.json (the one from our library that carries the dependency) instead of the top-level composer.json that we were installing.To download the latest version of a repo, I usually use:This will update your composer.lock with the last available commit reference.

Linux - PHP 7.0 and MSSQL (Microsoft SQL)

Donavon Yelton

[Linux - PHP 7.0 and MSSQL (Microsoft SQL)](https://stackoverflow.com/questions/34377338/linux-php-7-0-and-mssql-microsoft-sql)

Yes, I know that PHP 7.0 removed the extensions needed to connect to MSSQL. FreeTDS was my option prior to PHP 7.0 but now there really is no obvious upgrade path for those needing to still connect to MSSQL.Stupid question, but given that MSSQL is most certainly well used in enterprise environments, how are we supposed to connect to those databases beginning with PHP 7.0?Am I overlooking something blatantly obvious or did the release of PHP 7 basically give a slap in the face to anyone needing to connect to MSSQL?For clarity, I am NOT talking about connecting from a Windows server running PHP, I am needing to connect to MSSQL from a Linux server and thus would need a Linux ODBC driver.Does anyone make such a thing that works with MSSQL 2012 and PHP 7.0 that can be had freely or for a fee?It is odd to me that there isn't much PHP 7 and MSSQL info to be had out there. Granted that PHP 7 is fresh off the presses, but there has to be more MSSQL shops out there (FWIW we use both).

2015-12-20 02:10:54Z

Yes, I know that PHP 7.0 removed the extensions needed to connect to MSSQL. FreeTDS was my option prior to PHP 7.0 but now there really is no obvious upgrade path for those needing to still connect to MSSQL.Stupid question, but given that MSSQL is most certainly well used in enterprise environments, how are we supposed to connect to those databases beginning with PHP 7.0?Am I overlooking something blatantly obvious or did the release of PHP 7 basically give a slap in the face to anyone needing to connect to MSSQL?For clarity, I am NOT talking about connecting from a Windows server running PHP, I am needing to connect to MSSQL from a Linux server and thus would need a Linux ODBC driver.Does anyone make such a thing that works with MSSQL 2012 and PHP 7.0 that can be had freely or for a fee?It is odd to me that there isn't much PHP 7 and MSSQL info to be had out there. Granted that PHP 7 is fresh off the presses, but there has to be more MSSQL shops out there (FWIW we use both).Microsoft has PHP Linux Drivers for SQL Server for PHP 7 and above on PECL. These are production ready. To download them, follow these steps:Ubuntu 16.04:CentOS 7:This will install the PHP SQL Server Drivers and register them in the php.ini folder. Verify that it works by using the following sampleLinks for reference:The sybase of PHP7 contains the pdo_dblib module.tldr; 

sqlsrv and pdo_sqlsrv php extentions were very slow with large queries with lots of parameters, but installing and using pdo-dblib resolved the issue for me.Running on php framework laravel 5.1 and 5.6 (on php 7.1 and 7.2) on Ubunutu 16.04. I found that the packages sqlsrv and pdo_sqlsrv did not work well for large queries.  I had a large query with 30 bound variables.  Sql Server 2008 converted all of the bound variables to nvarchar(4000) causing the db to do loads of casting taking forever.I then disable the sqlsrv.so and pdo_sqlsrv.so extentions and installed pdo-dblib extension with:Then the query processed much quicker.For more information:Under the hood laravel uses a PDOStatement like this:where a direct query like would work fine.I definitely agree with you. I work primarily with SQL Servers at work and do not understand why they are not including default drivers for SQL servers in PHP.For linux, i'm not too sure what you previously used but I found that the "dblib" driver is the best driver to connect to SQL Servers.But basically for a linux box you just want to run these few steps to have a sql server driver installed.Then go ahead and add your connections there and restart apache and you should be good to go!Official MS extension has branch for PHP 7:There's still lot of things missing, some marked as planned (Linux support is amongst them), nevertheless it could be another solution in the future.EDIT (09-09-2016): There were already few Linux releases published since March, with CentOS/Ubuntu specific packages and source available. Keep in mind they aren't marked as Production Ready yet.As per the answer above - the steps output a shared object (*.so) so the php.ini file needs the file extension too. I modifiedAnd modify freetds.conf, install php mssql moduleA short dump for the Debian people: this worked for me on PHP 7.0 but still, you need to add the extension on as well as 

How create an array from the output of an array printed with print_r?

John Kar.

[How create an array from the output of an array printed with print_r?](https://stackoverflow.com/questions/7025909/how-create-an-array-from-the-output-of-an-array-printed-with-print-r)

I have an array:and I do:which prints:Is there a function, so when doing:I will get the array array('foo' => 'fooMe'); back?

2011-08-11 12:34:10Z

I have an array:and I do:which prints:Is there a function, so when doing:I will get the array array('foo' => 'fooMe'); back?I actually wrote a function that parses a "stringed array" into an actual array. Obviously, it's somewhat hacky and whatnot, but it works on my testcase. Here's a link to a functioning prototype at http://codepad.org/idlXdij3.I'll post the code inline too, for those people that don't feel like clicking on the link:If you want to store an array as string, use serialize [docs] and unserialize [docs].To answer your question: No, there is no built-in function to parse the output of print_r into an array again.No. But you can use both serialize and json_* functions.Or:For Array output with Subarrays, the solution provided by ninetwozero will not work, you can try with this function that works with complex arrays:There is one tiny bug, if you have an empty value (empty string) it gets embedded in the value before.you cannot do this with print_r,

var_export should allow something similar, but not exactly what you asked forhttp://php.net/manual/en/function.var-export.phpThere is a nice Online-Tool which does exatly what its name is:print_r to json online converterFrom a JSON Object its not far to creating an array with the json_decode function:To get an array from this, set the second paramter to true. If you don't, you will get an object instead.I think my function is cool too, works with nested arrays:NB: better not use this with user input data Quick function (without checks if you're sending good data):This is the expected input:use Output:

How to use a PHP class from another file?

Xhynk

[How to use a PHP class from another file?](https://stackoverflow.com/questions/14350803/how-to-use-a-php-class-from-another-file)

Let's say I've got two files class.php and page.phpclass.phpThat's a very rudamentary example, but let's say  I want to use:in my page.php file; how do I go about doing that? If I do include(LIB.'/class.php'); it yells at me and gives me Fatal error: Cannot redeclare class IUarts in /dir/class.php on line 4

2013-01-16 03:12:28Z

Let's say I've got two files class.php and page.phpclass.phpThat's a very rudamentary example, but let's say  I want to use:in my page.php file; how do I go about doing that? If I do include(LIB.'/class.php'); it yells at me and gives me Fatal error: Cannot redeclare class IUarts in /dir/class.php on line 4You can use include/include_once or require/require_onceAlternatively, use autoloading

by adding to page.phpIt also works adding that __autoload function in a lib that you include on every file like utils.php.There is also this post that has a nice and different approach.Efficient PHP auto-loading and naming strategiesIn this case, it appears that you've already included the file somewhere. But for class files, you should really "include" them using require_once to avoid that sort of thing; it won't include the file if it already has been. (And you should usually use require[_once], not include[_once], the difference being that require will cause a fatal error if the file doesn't exist, instead of just issuing a warning.)Use include_once instead.

This error means that you have already included this file.include_once(LIB.'/class.php');Use include("class.classname.php");And class should use <?php //code  ?> not <? //code  ?>use This will also help in importing files in from different folders.

Try extends method to inherit the classes in that file and reuse the functions

How to minify JS or CSS on the fly [closed]

gourav

[How to minify JS or CSS on the fly [closed]](https://stackoverflow.com/questions/5389822/how-to-minify-js-or-css-on-the-fly)

How to minify JS and CSS on the fly / runtime, so that I can keep the original code structure in my servers if its minified on the runtime / fly.

2011-03-22 10:27:56Z

How to minify JS and CSS on the fly / runtime, so that I can keep the original code structure in my servers if its minified on the runtime / fly.After a lot of searching and sites optimizations i really recommend to use this script for CSS files:It compress all css files into one and past it into html, reducing the number of additional requests to zero. You can also make your own compressed.css file if you prefer this than pasting styles into html.I think your question should actually be: How can I reliably and repeatably update my live servers? What you need is an automatic deployment script. Personally I prefer Fabric, but there are other tools are available.An automatic deployment script will allow you to run a single command which will go to live servers and update the source code, run any deployment steps (such as minifying javascript) and restart the webserver.You really don't want to be minifying javascript or css files on the fly, you should do that once at deployment and then have a variable in your code that specifies whether this is a live deployment or not. If the variable is true then your links to the files should be links to the minimized version, if it's false then they should be to the normal versions.There are a number of programs which perform minimization, one that hasn't been mentioned yet is JSMin.If your goal is to make your JavaScript slightly less readable, and do this at runtime, you could keep it very, very, simple. With just three lines of code you can get a long way toward total minification within a few milliseconds.This does not do any syntax checking whatsoever. Code can become invalid after using this. Check the end of the lines in your JS, is a ';' missing somewhere?If I may speak so freely;Minifying a JS/CSS file would have as goal that it parses more quickly ( and also use up less disk space). By minifying it at runtime, that benefit would be completely lost.Perhaps I am mistaken in your final goal, but this is what comes to my mind at first.Edit: post by @Ant clarified it for me.HTML5 Boilerplate comes with a handy build script that compresses JS, CSS, images and much more. Check it out!As explained in the other answers,「real」on-the-fly minification (dynamically compress a file every time it’s requested) wouldn’t be a very good idea.Assetic is a nice project that helps in organizing resources such as CSS and Javascript including minification. See here for an introduction.Generally runtime minification should always be combined with solid caching on the server side and the usage of client and proxy caches along the way to the browser. If you have full control of your Apache / Ngnix configuration, a great option (in general) would be to enable the PageSpeed module, in your case with You need to system(); this$ java -jar yuicompressor-x.y.z.jarhttp://developer.yahoo.com/yui/compressor/Thats is exactly what WebUtilities (for J2EE) does. Here is the link.It does the minification and merging on the fly. It also has caching to avoid reruning the minification or reprocessing of a resource if resource not modified. It also helps with following optimizations.Please have a look in case you find it interesting. I am doubtful that this minification craze really makes that big of a difference if the JS is sent with zlib compression.First, white space compresses extremely well, so the reduced filesize that results from minification is probably only a major issue with large libraries such as jQuery (which probably should be served from a CDN unless you need a hacked version).Seconfly, JS is usually cached by the client so unless you use a lot of different scripts on different pages, most page loads it is not going to make a difference.The problems with minification and why I do not do it (except with things like jQuery):

A) It strips out comments, so unless you re-add them, things like copyright notices are lost. This could result in a license violation, since even many OSS licenses require the copyright be intact.B) When there is a problem, it is nice to see the actual code the server is serving just in case it happens to be different than your working copy. Minified code does not do well in that respect.My personal opinion - zlib compress on the fly, yes. minify - only for really large files.Performance parsing the JS into the interpreter - maybe if the browser is running on an Apple Performa with 32MB of RAM. I do not buy that it makes a real world difference with most scripts. Pages that are slow are usually slow because of too much inefficient code running at same time or are making too many requests to overloaded servers. (IE do you really need to check availability of username as I type each letter? Can't you check when I change to a different field or when I click submit ??? ;)

Cannot use X as Y because the name is already in use, even though it's not

Benjamin

[Cannot use X as Y because the name is already in use, even though it's not](https://stackoverflow.com/questions/17746481/cannot-use-x-as-y-because-the-name-is-already-in-use-even-though-its-not)

I'm using PHP 5.4, and have a PSR-0 class structure similar to the following.A\Library\Session.php:My\Application\Session.php:My\Application\Facebook.php:When I try to run the application, I get the following error:Even though it's not, at least not in this file. The Facebook.php file declares only the Facebook class, and imports exactly one Session class, the A\Library one.The only problem I can see is that another Session class exists in the same namespace as the Facebook class, but as it was never imported in the Facebook.php file, I thought it did not matter at all.Am I wrong (in that case please point to the relevant documentation), or is this a bug?

2013-07-19 12:49:31Z

I'm using PHP 5.4, and have a PSR-0 class structure similar to the following.A\Library\Session.php:My\Application\Session.php:My\Application\Facebook.php:When I try to run the application, I get the following error:Even though it's not, at least not in this file. The Facebook.php file declares only the Facebook class, and imports exactly one Session class, the A\Library one.The only problem I can see is that another Session class exists in the same namespace as the Facebook class, but as it was never imported in the Facebook.php file, I thought it did not matter at all.Am I wrong (in that case please point to the relevant documentation), or is this a bug?There is a bug confirmed in PHP that may affect the behavior you see. It is supposed to fatal error, but with opcache enabled, it may still execute flawlessly.https://bugs.php.net/bug.php?id=66773If it still concerns you, please vote for the bug.No, this is not a bug. As mentioned in Using namespaces: Aliasing/Importingis the same as:So try using something like:Yes, it does matter. This is why you don't need to "import" classes from the same namespace. If you have conflicting names from different namespaces, you need to alias the class.I've read the thread about the issue, but I tested on many PHP versions (php 5.5, 5.6, 7.*, x32, x64, vc11, vc14, vc5). I'm using Laravel with Laragon. But, when I build up the server with php artisan serve (and open the server at http://localhost:8000) I have the problem of "the namespace that some Class was already used" and stuff.I tested with and without opcache extension and nothing works, then I tested the virtual domain that Laragon provides and... voila, the error just disappeared and now I can work OK. I don't know what was happening, my namespaces were OK, I had an alias but the same code works in many machine without problem (AWS, local, prod, dev, etc) but only in my machine I had the problem just as I described it.So, if someone is working with Laravel (5.1) and is having this issue, try the virtual host of Laragon.

Difference between composer prefer-dist and prefer-source?

Alan Storm

[Difference between composer prefer-dist and prefer-source?](https://stackoverflow.com/questions/16205100/difference-between-composer-prefer-dist-and-prefer-source)

Looking at the help for PHP Composer's install command, I see the following two optionsWhat's a "dist" installation?  I poked around the composer site and Google but there didn't seem to be anything that addressed this (So I assume it's something core and obvious to folks familiar with Composer — apologies for the newbie question)I'm assuming --prefer-source is where Composer will ask Packagist for the repository location, and then checkout/clone/export/etc. the project itself. If so, then where does --prefer-dist download from?  What does it download?

2013-04-25 01:47:55Z

Looking at the help for PHP Composer's install command, I see the following two optionsWhat's a "dist" installation?  I poked around the composer site and Google but there didn't seem to be anything that addressed this (So I assume it's something core and obvious to folks familiar with Composer — apologies for the newbie question)I'm assuming --prefer-source is where Composer will ask Packagist for the repository location, and then checkout/clone/export/etc. the project itself. If so, then where does --prefer-dist download from?  What does it download?According to http://getcomposer.org/doc/03-cli.md, the --prefer-source option will prefer to create a package directory that is a "version control repository". This is equivalent to you typing:orThe --prefer-dist option will prefer to create a non-"version control repository", which is equivalent to you typing:orAlso, you can define separate repos for source and dist in your composer.json. Here's an example:NOTE: for whatever reason, when I use --prefer-dist, I sometimes get errors such aswhich do not appear when I use --prefer-source. For this reason, I only use --prefer-source, until I figure out the cause of this issue.I don't admire, or even approve the provided answer, as it does not address the question. So despite of it being a bit too old, I am posting this answer for any further reference to this question.Normally composer deals with tags (like 1.2.7), but that is not the case all the time. You may also require a branch (like dev-master) as a dependency.What if you want to require a tag, but still be able to develop it on your local?use --prefer-source along with your composer install, composer update or composer require commands:What if you want to require a most new development branch, but you just want to get the new stuff and don't want to get engaged in its development?use --prefer-dist along with your composer install, composer update or composer require commands:As clearly stated in Composer's Documentation:and,so,If you're checking out a branch, it's assumed that you want to work on the branch and Composer actually clones the repo into the correct place in your vendor directory.For tags, it just copies the right files without actually cloning the repo.

How to get an option previously set with curl_setopt()?

hakre

[How to get an option previously set with curl_setopt()?](https://stackoverflow.com/questions/5356075/how-to-get-an-option-previously-set-with-curl-setopt)

I'm just wondering as there is no curl_getopt() function, how it is possible to find out which value has been set for a specific option with curl_setopt() previously?

2011-03-18 18:07:23Z

I'm just wondering as there is no curl_getopt() function, how it is possible to find out which value has been set for a specific option with curl_setopt() previously?Pulled from various answers around the internets:My suggestion (and others) is to encapsulate cURL into a class where your $cURL->setOpt() function also stores the value for retrieval later.The multirequest PHP library has this functionality (and then some!):Possibly curl_getinfo() may satisfy some of your needs.

If not, you can write a wrapper of curl_setopt() which saves all options to an array.

Getting Google PageRank via an API (PHP) [closed]

Henk Denneboom

[Getting Google PageRank via an API (PHP) [closed]](https://stackoverflow.com/questions/1344917/getting-google-pagerank-via-an-api-php)

I have a list of domains and would like to get the:

2009-08-28 03:40:53Z

I have a list of domains and would like to get the:This will have everything you need.

https://github.com/eyecatchup/SEOstatsAmazing.I've published a Pagerank API that returns a json array, containing the checksum and the Pagerank of any URL.I also have a bunch of related tools and a Google code project that might interest you.Try this guy: http://www.fourmilab.ch/webtools/PageRank/although written in perl, you can issue a call to your OS from PHP to run this, then further process the output.  Make sure to put http:// at the beginning your your query, and not hit the google server more often than once per second, and sanitize (urlencode) the user input if users will be using this.

Is Ajax in WordPress

Racura

[Is Ajax in WordPress](https://stackoverflow.com/questions/14348470/is-ajax-in-wordpress)

Is there anyway to detect if the current server operation is currently an AJAX request in WordPress?For example:

2013-01-15 22:55:29Z

Is there anyway to detect if the current server operation is currently an AJAX request in WordPress?For example:Update: since WordPress 4.7.0 you can call a function wp_doing_ajax(). This is preferable because plugins that "do Ajax" differently can filter to turn a "false" into a "true".Original answer:If you're using Ajax as recommended in the codex, then you can test for the DOING_AJAX constant:WordPress 4.7 has introduced an easy way to check for AJAX requests, so I thought I would add to this older question.From the Developer Reference:It is essentially a wrapper for DOING_AJAX.To see if the current request is an AJAX request sent from a js library ( like jQuery ), you could try something like this:I am not sure if WordPress has a function for this but it can be done by creating a simple one yourself.I know this is an old thread, but there is an issue with the accepted answer,Checking for the defined DOING_AJAX constant will always be true, if the request is to the admin-ajax.php file. (https://core.trac.wordpress.org/browser/tags/4.4.2/src/wp-admin/admin-ajax.php#L16)Sometimes admin-ajax.php hooks aren't used for AJAX request, just a simple endpoint (Paypal IPN for example).The correct way is what Ian and Spencer have mentioned.(would have commented... but no rep)I personally prefer the wp_doing_ajax(), but here is another example that should do it.

How to read a list of files from a folder using PHP? [closed]

Arun Annamalai

[How to read a list of files from a folder using PHP? [closed]](https://stackoverflow.com/questions/720751/how-to-read-a-list-of-files-from-a-folder-using-php)

I want to read a list the names of files in a folder in a web page using php.

is there any simple script to acheive it?

2009-04-06 09:18:50Z

I want to read a list the names of files in a folder in a web page using php.

is there any simple script to acheive it?The simplest and most fun way (imo) is globBut the standard way is to use the directory functions.There are also the SPL DirectoryIterator methods. If you are interestedThere is this function scandir():More here in the php.net manualThis is what I like to do: If you have problems with accessing to the path, maybe you need to put this:There is a glob. In this webpage there are good article how to list files in very simple way:How to read a list of files from a folder using PHPCheck in many folders :Folder_1 and folder_2 are name of folders, from which we have to select files. $format is required format.You can use standard directory functionsThere is also a really simple way to do this with the help of the RecursiveTreeIterator class, answered here: https://stackoverflow.com/a/37548504/2032235images/ is meaning to your images directory.

$i=0 variable is finding the . images files and will be start first file name.

How can I tell which CakePHP version is a project made with?

Mauricio Pasquier Juan

[How can I tell which CakePHP version is a project made with?](https://stackoverflow.com/questions/16875569/how-can-i-tell-which-cakephp-version-is-a-project-made-with)

Is it posible to know the version of CakePHP used to generate a project with only the app code available?My problem:I downloaded a project made with CakePHP, and I really can't tell wich Cake version to use. The files say, e.g. @version       $Revision: 8004 $, but this is different in some files. Should I assume that the highest revision (8004) is the correct one to use?It seems to be from around 2008, so I guess it's a 1.x version.PD: Here is the code to the project.

2013-06-01 17:56:04Z

Is it posible to know the version of CakePHP used to generate a project with only the app code available?My problem:I downloaded a project made with CakePHP, and I really can't tell wich Cake version to use. The files say, e.g. @version       $Revision: 8004 $, but this is different in some files. Should I assume that the highest revision (8004) is the correct one to use?It seems to be from around 2008, so I guess it's a 1.x version.PD: Here is the code to the project.I have found that the version, as of CakePHP 2.3.0, is held within a static file under the root Cake lib.Edit core.php, add to top:For cakephp 3.x find 

\vendor\cakephp\cakephp\VERSION.txtSimple way  : Just search for VERSION.txt file. Open It  to check the version.Path for version.txtFor cakephp  1.* : cake/VERSION.txtFor cakephp  2.* : lib/Cake/ VERSION.txtFor cakephp 3. & 4.*  : vendor/cakephp/cakephp/ VERSION.txtI'm certain this is for CakePHP 1.2.x branch, and not the CakePHP 1.3.x branch.You can download a 1.2.x branch from here.The reason I think it's 1.2 is that all the comment headers are Copyright 2005-2008, and only the 1.2.x branch uses that date range. Everything in the 1.3.x branch is Copyright 2005-2010 or newer.we can check through following pathPath=root/lib/cake/VERSION.txtOpen version.txt last line show the version of cakephp On the wellcome page the version is written, we dont need any command to check the version.

If still it a problem, you somehow dont find the wellcome page. you can useThis is the BEST way to get it on run time3.x docs2.x docsThe other way is to look for VERSION.txt 2.x lib/Cake/VERSION.txt3.x vendor/cakephp/cakephp/VERSION.txtIt's like not possible (without going through all the version changes, checking file/folder structures, comments...etc).AND, it's for good reason IMO.When I start an app, I build it in the latest release.  But, even by the time it goes public, I'm usually on a new release of CakePHP, and will continue to update it as they come out.  My APP files don't change at all (other than the requested changes per release notes - if any).  Only the cakephp/lib directory changes (and unfortunately, you don't have that).If you're lucky, and the previous developer keeps their Cake versions in separate folders instead of overwriting, then you might find the version number in your webroot/index.php in the CAKE_CORE_INCLUDE_PATH line, but in your case, it's not there.If you do have the actual Cake files (I know you don't, but other people might), then you can look in the cake/VERSION.txt file for the version you're using.In Cake 3x, inside your project directory, type bin\cake version (windows) or bin/cake version(osx/linux).Also for Linux console you can check your CakePHP version like this.

Change example.com with your domain name.in cake 3.0 from app root directory>>> cat vendor/cakephp/cakephp/VERSION.txtFor Cakephp3, open command line and go to your Project App directory and type bin/cake,it will show you something like this *Which is your current cakephp Version.

Codeigniter displays a blank page instead of error messages

FlyingCat

