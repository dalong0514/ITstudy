2011-12-21 03:55:34Z

I have a number from minus 1000 to plus 1000 and I have an array with numbers in it. Like this:I want that the number I've got changes to the nearest number of the array.For example I get 80 as number I want it to get 82.ES5 Version:Here's the pseudo-code which should be convertible into any procedural language:It simply works out the absolute differences between the given number and each array element and gives you back one of the ones with the minimal difference.For the example values:As a proof of concept, here's the Python code I used to show this in action:And, if you really need it in Javascript, see below for a complete HTML file which demonstrates the function in action:Now keep in mind there may be scope for improved efficiency if, for example, your data items are sorted (that could be inferred from the sample data but you don't explicitly state it). You could, for example, use a binary search to find the closest item.You should also keep in mind that, unless you need to do it many times per second, the efficiency improvements will be mostly unnoticable unless your data sets get much larger.If you do want to try it that way (and can guarantee the array is sorted in ascending order), this is a good starting point:It basically uses bracketing and checking of the middle value to reduce the solution space by half for each iteration, a classic O(log N) algorithm whereas the sequential search above was O(N):As stated, that shouldn't make much of a difference for small datasets or for things that don't need to be blindingly fast, but it's an option you may want to consider.ES6(2015) Version:For reusability you can wrap in a curry function that supports placeholders (http://ramdajs.com/0.19.1/docs/#curry or https://lodash.com/docs#curry). This gives lots of flexibility depending on what you need:Working code as below:While there were some good solutions posted here, JavaScript is a flexible language that gives us tools to solve a problem in many different ways.

It all comes down to your style, of course. If your code is more functional, you'll find the reduce variation suitable, i.e.:However, some might find that hard to read, depending on their coding style. Therefore I propose a new way of solving the problem:Contrary to other approaches finding the minimum value using Math.min.apply, this one doesn't require the input array arr to be sorted. We don't need to care about the indexes or sort it beforehand.I'll explain the code line by line for clarity:I've created a bin demonstrating it.All answers so far concentrate on searching through the whole array.

Considering your array is sorted already and you really only want the nearest number this is probably the fastest solution:Note that the algorithm can be vastly improved e.g. using a binary tree.All of the solutions are over-engineered.It is as simple as:This solution uses ES5 existential quantifier Array#some, which allows to stop the iteration, if a condition is met.Opposit of Array#reduce, it does not need to iterate all elements for one result.Inside the callback, an absolute delta between the searched value and actual item is taken and compared with the last delta. If greater or equal, the iteration stops, because all other values with their deltas are greater than the actual value.If the delta in the callback is smaller, then the actual item is assigned to the result and the delta is saved in lastDelta.Finally, smaller values with equal deltas are taken, like in the below example of 22, which results in 2.If there is a priority of greater values, the delta check has to be changed from:to:This would get with 22, the result 42 (Priority of greater values).This function needs sorted values in the array.I don't know if I'm supposed to answer an old question, but as this post appears first on Google searches, I hoped that you would forgive me adding my solution & my 2c here.Being lazy, I couldn't believe that the solution for this question would be a LOOP, so I searched a bit more and came back with filter function:That's all !My answer to a similar question is accounting for ties too and it is in plain Javascript, although it doesn't use binary search so it is O(N) and not O(logN):https://stackoverflow.com/a/26429528/986160I like the approach from Fusion, but there's a small error in it. Like that it is correct:It it also a bit faster because it uses the improved for loop.At the end I wrote my function like this:I tested it with console.time() and it is slightly faster than the other function.ES6Examples:A slightly modified binary search on the array would work.For a small range, the simplest thing is to have a map array, where, eg, the 80th entry would have the value 82 in it, to use your example.  For a much larger, sparse range, probably the way to go is a binary search.With a query language you could query for values some distance either side of your input number and then sort through the resulting reduced list.  But SQL doesn't have a good concept of "next" or "previous", to give you a "clean" solution.Another variant here we have circular range connecting head to toe and accepts only min value to given input. This had helped me get char code values for one of the encryption algorithm.The most efficient would be a binary search. However even simple solutions can exit when the next number is a further match from the current. Nearly all solutions here are not taking into account that the array is ordered and iterating though the whole thing :/This can be run on non-primitives too e.g. closest(data, 21, item => item.age)Change find to findIndex to return the index in the array.Here is the Code snippet to find the closest element to a number from an array in Complexity O(nlog(n)) :-Input :- {1,60,0,-10,100,87,56}

Element:- 56

Closest Number in Array:- 60Source Code (Java):

Retrieving the text of the selected <option> in <select> element

CountZero

[Retrieving the text of the selected <option> in <select> element](https://stackoverflow.com/questions/610336/retrieving-the-text-of-the-selected-option-in-select-element)

In the following: How can I get the text of the selected option (i.e. "Test One" or "Test Two") using JavaScriptdocument.getElementsById('test').selectedValue returns 1 or 2, what property returns the text of the selected option?

2009-03-04 12:30:42Z

In the following: How can I get the text of the selected option (i.e. "Test One" or "Test Two") using JavaScriptdocument.getElementsById('test').selectedValue returns 1 or 2, what property returns the text of the selected option?If you use jQuery then you can write the following code:References:Under HTML5 you are be able to do this:MDN's documentation at https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedOptions indicates full cross-browser support (as of at least December 2017), including Chrome, Firefox, Edge and mobile browsers, but excluding Internet Explorer.The options property contains all the <options> - from there you can look at .textYou can use selectedIndex to retrieve the current selected option:this.options[this.selectedIndex].innerTextIf you found this thread and wanted to know how to get the selected option text via event here is sample code:Use the select list object, to identify its own selected options index.

From there - grab the inner HTML of that index.

And now you have the text string of that option.Similar to @artur just without jQuery, with plain javascript:// Using @Sean-bright's "elt" variableEasy, simple way:

Change default timeout for mocha

lm.

[Change default timeout for mocha](https://stackoverflow.com/questions/23492043/change-default-timeout-for-mocha)

If we have a unit test file my-spec.js and running with mocha: The default timeout will be 2000 ms. It can be overwritten for partial test with a command line parameter: Is it possible to change the default timeout globally for all tests? 

i.e. the default timeout value will be different from 2000 ms when you call:

2014-05-06 10:23:17Z

If we have a unit test file my-spec.js and running with mocha: The default timeout will be 2000 ms. It can be overwritten for partial test with a command line parameter: Is it possible to change the default timeout globally for all tests? 

i.e. the default timeout value will be different from 2000 ms when you call:By default Mocha will read a file named test/mocha.opts that can contain command line arguments. So you could create such a file that contains:Whenever you run Mocha at the command line, it will read this file and set a timeout of 5 seconds by default.Another way which may be better depending on your situation is to set it like this in a top level describe call in your test file:This would allow you to set a timeout only on a per-file basis.You could use both methods if you want a global default of 5000 but set something different for some files.Note that you cannot generally use an arrow function if you are going to call this.timeout (or access any other member of this that Mocha sets for you). For instance, this will usually not work:This is because an arrow function takes this from the scope the function appears in. Mocha will call the function with a good value for this but that value is not passed inside the arrow function. The documentation for Mocha says on this topic:Just adding to the correct answer you can set the timeout with the arrow function like this:Adding this for completeness.  If you (like me) use a script in your package.json file, just add the --timeout option to mocha:Then you can run npm run test to run your test suite with the timeout set to 10,000 milliseconds.In current versions of Mocha, the timeout can be changed globally like this:Just add the line above anywhere in your test suite, preferably at the top of your spec or in a separate test helper.In older versions, and only in a browser, you could change the global configuration using mocha.setup.The documentation does not cover the global timeout setting, but offers a few examples on how to change the timeout in other common scenarios.

JavaScript: filter() for Objects

AgileMeansDoAsLittleAsPossible

[JavaScript: filter() for Objects](https://stackoverflow.com/questions/5072136/javascript-filter-for-objects)

ECMAScript 5 has the filter() prototype for Array types, but not Object types, if I understand correctly.How would I implement a filter() for Objects in JavaScript? Let's say I have this object:And I want to write a filter() that works on Objects:This works when I use it in the following demo, but when I add it to my site that uses jQuery 1.5 and jQuery UI 1.8.9, I get JavaScript errors in FireBug.

2011-02-21 22:42:25Z

ECMAScript 5 has the filter() prototype for Array types, but not Object types, if I understand correctly.How would I implement a filter() for Objects in JavaScript? Let's say I have this object:And I want to write a filter() that works on Objects:This works when I use it in the following demo, but when I add it to my site that uses jQuery 1.5 and jQuery UI 1.8.9, I get JavaScript errors in FireBug.Never ever extend Object.prototype.Horrible things will happen to your code. Things will break. You're extending all object types, including object literals.Here's a quick example you can try:Instead create a function that you pass the object.First of all, it's considered bad practice to extend Object.prototype. Instead, provide your feature as utility function on Object, just like there already are Object.keys, Object.assign, Object.is, ...etc.I provide here several solutions:With reduce and Object.keys to implement the desired filter (using ES6 arrow syntax):Note that in the above code predicate must be an inclusion condition (contrary to the exclusion condition the OP used), so that it is in line with how Array.prototype.filter works.In the above solution the comma operator is used in the reduce part to return the mutated res object. This could of course be written as two statements instead of one expression, but the latter is more concise. To do it without the comma operator, you could use Object.assign instead, which does return the mutated object:Here we move the Object.assign call out of the loop, so it is only made once, and pass it the individual keys as separate arguments (using the spread syntax):As the solution translates the object to an intermediate array and then converts that back to a plain object, it would be useful to make use of Object.entries (ES2017) and the opposite (i.e. create an object from an array of key/value pairs) with Object.fromEntries (ES2019).It leads to this "one-liner" method on Object:The predicate function gets a key/value pair as argument here, which is a bit different, but allows for more possibilities in the predicate function's logic.If you're willing to use underscore or lodash, you can use pick (or its opposite, omit).Examples from underscore's docs:Or with a callback (for lodash, use pickBy):As patrick already stated this is a bad idea, as it will almost certainly break any 3rd party code you could ever wish to use. All libraries like jquery or prototype will break if you extend Object.prototype, the reason being that lazy iteration over objects (without hasOwnProperty checks) will break since the functions you add will be part of the iteration.ES6 approach...Imagine you have this object below:Create a function:And call it:and will return:How about:Or...I have created an Object.filter() which does not only filter by a function, but also accepts an array of keys to include. The optional third parameter will allow you to invert the filter.Disclaimer: I chose to use Ext JS core for brevity. Did not feel it was necessary to write type checkers for object types as it was not part of the question.Giventhen  :If you wish to mutate the same object rather than create a new one.The following example will delete all 0 or empty values:My opinionated solution:Test cases:https://gist.github.com/khullah/872d5a174108823159d845cc5baba337Like everyone said, do not screw around with prototype. Instead, simply write a function to do so. Here is my version with lodash:In these cases I use the jquery $.map, which can handle objects. As mentioned on other answers, it's not a good practice to change native prototypes (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain#Bad_practice_Extension_of_native_prototypes)Below is an example of filtering just by checking some property of your object. It returns the own object if your condition is true or returns undefined if not. The undefined property will make that record disappear from your object list; 

How to convert file to base64 in JavaScript?

Vassily Vorobyov

[How to convert file to base64 in JavaScript?](https://stackoverflow.com/questions/36280818/how-to-convert-file-to-base64-in-javascript)

Now I'm getting File object by this line: I need to send this file via json in base 64. What should I do to convert it to base64 string?

2016-03-29 09:49:26Z

Now I'm getting File object by this line: I need to send this file via json in base 64. What should I do to convert it to base64 string?Modern ES6 way (async/await)UPD:If you want to catch errorsTry the solution using the FileReader class:Notice that .files[0] is a File type, which is a sublcass of Blob. Thus it can be used with FileReader.

See the complete working example.If you're after a promise-based solution, this is @Dmitri's code adapted for that:Building up on Dmitri Pavlutin and joshua.paling answers, here's an extended version that extracts the base64 content (removes the metadata at the beginning) and also ensures padding is done correctly.JavaScript btoa() function can be used to convert data into base64 encoded stringHere are a couple functions I wrote to get a file in a json format which can be passed around easily:

Create a string of variable length, filled with a repeated character

talemyn

[Create a string of variable length, filled with a repeated character](https://stackoverflow.com/questions/14343844/create-a-string-of-variable-length-filled-with-a-repeated-character)

So, my question has been asked by someone else in it's Java form here: Java - Create a new String instance with specified length and filled with specific character. Best solution?. . . but I'm looking for its JavaScript equivalent.Basically, I'm wanting to dynamically fill text fields with "#" characters, based on the "maxlength" attribute of each field.  So, if an input has has maxlength="3", then the field would be filled with "###".Ideally there would be something like the Java StringUtils.repeat("#", 10);, but, so far, the best option that I can think of is to loop through and append the "#" characters, one at a time, until the max length is reached.  I can't shake the feeling that there is a more efficient way to do it than that.Any ideas?FYI - I can't simply set a default value in the input, because the "#" characters need to clear on focus, and, if the user didn't enter a value, will need to be "refilled" on blur. It's the "refill" step that I'm concerned with

2013-01-15 17:57:43Z

So, my question has been asked by someone else in it's Java form here: Java - Create a new String instance with specified length and filled with specific character. Best solution?. . . but I'm looking for its JavaScript equivalent.Basically, I'm wanting to dynamically fill text fields with "#" characters, based on the "maxlength" attribute of each field.  So, if an input has has maxlength="3", then the field would be filled with "###".Ideally there would be something like the Java StringUtils.repeat("#", 10);, but, so far, the best option that I can think of is to loop through and append the "#" characters, one at a time, until the max length is reached.  I can't shake the feeling that there is a more efficient way to do it than that.Any ideas?FYI - I can't simply set a default value in the input, because the "#" characters need to clear on focus, and, if the user didn't enter a value, will need to be "refilled" on blur. It's the "refill" step that I'm concerned withThe best way to do this (that I've seen) is That creates an array with the given length, and then joins it with the given string to repeat.  The .join() function honors the array length regardless of whether the elements have values assigned, and undefined values are rendered as empty strings.You have to add 1 to the desired length because the separator string goes between the array elements.Give this a try :PUnfortunately although the Array.join approach mentioned here is terse, it is about 10X slower than a string-concatenation-based implementation. It performs especially badly on large strings. See below for full performance details.On Firefox, Chrome, Node.js MacOS, Node.js Ubuntu, and Safari, the fastest implementation I tested was:This is verbose, so if you want a terse implementation you could go with the naive approach; it still performs betweeb 2X to 10X better than the Array.join approach, and is also faster than the doubling implementation for small inputs. Code:Further information:I would create a constant string and then call substring on it.Something like A bit faster too.http://jsperf.com/const-vs-joinES2015 the easiest way is to do something like 'X'.repeat(data.length)X being any string, data.length being the desired length.see: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeatA great ES6 option would be to padStart an empty string. Like this:Note: this won't work in IE (without a polyfill).This function does what you want, and performs a lot faster than the option suggested in the accepted answer :You use it like this :To compare the performance of this function with that of the option proposed in the accepted answer, see this Fiddle and this Fiddle for benchmarks.In modern browsers, you can now also do this :This option is even faster. However, unfortunately it doesn't work in any version of Internet explorer. The numbers in the table specify the first browser version that fully supports the method :You can also add a polyfill for Repeat for older browsersBased on answers from Hogan and Zero Trick Pony. I think this should be both fast and flexible enough to handle well most use cases: You can use the first line of the function as a one-liner if you like:

How to scroll to top of page with JavaScript/jQuery?

Yarin

[How to scroll to top of page with JavaScript/jQuery?](https://stackoverflow.com/questions/4210798/how-to-scroll-to-top-of-page-with-javascript-jquery)

Is there a way to control browser scrolling with JavaScript/jQuery?When I scroll my page half way down, then trigger a reload, I want the page to go pack to the top, but instead it tries to find the last scroll position. So I did this:But no luck.EDIT:So both your answers worked when I call them after the page loads-Thanks. However, if I just do a refresh on the page, looks like the browser calculates and scrolls to its old scroll position AFTER the .ready event (I tested the body onload() function too).So the follow up is, is there a way to PREVENT the browser scrolling to its past position, or to re-scroll to the top AFTER it does its thing?

2010-11-18 01:21:50Z

Is there a way to control browser scrolling with JavaScript/jQuery?When I scroll my page half way down, then trigger a reload, I want the page to go pack to the top, but instead it tries to find the last scroll position. So I did this:But no luck.EDIT:So both your answers worked when I call them after the page loads-Thanks. However, if I just do a refresh on the page, looks like the browser calculates and scrolls to its old scroll position AFTER the .ready event (I tested the body onload() function too).So the follow up is, is there a way to PREVENT the browser scrolling to its past position, or to re-scroll to the top AFTER it does its thing?Wow, I'm 9 years late to this question.  Here you go:Add this code to your onload.history.scrollRestoration  Browser support:Chrome: supported (since 46)Firefox: supported (since 46)IE/Edge: not supported (Yet..)Opera: supported (since 33)Safari: supportedFor IE/Edge if you want to re-scroll to the top AFTER it autoscrolls down then this worked for me:Cross-browser, pure JavaScript solution:You almost got it - you need to set the scrollTop on body, not window:EDIT:Maybe you can add a blank anchor to the top of the page:The following jquery solution works for me:Here's a pure JavaScript animated scroll version for no-jQuery'ers :DAnd then:UPDATEGoing to top of the page with a scroll effect is a bit more easier in javascript now with:https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollCAUTIONWe have been using this in our more recent projects, but I just checked the mozilla doc right now while updating my answer and I believe it has been updated. Right now the method is window.scroll(x-coord, y-coord) and does not mention or show examples that use the object parameter where you can set the behavior to smooth. I just tried the code and it still works in chrome and firefox and the object parameter is still in the spec.So use this with caution or you can use this Polyfill. Aside from scrolling to the top, this polyfill also handles other methods: window.scrollBy, element.scrollIntoView, etc.OLD ANSWERThis is our vanilla javascript implementation. It has a simple easing effect so that the user doesn't get shocked after clicking the To Top button.Its very small and gets even smaller when minified. Devs looking for an alternative to the jquery method but want the same results can try this.JSHTMLCheers!This works for me:Uses a short setTimeout inside the onload to give the browser a chance to do the scroll.You can use with jQueryUse the following functionHere xpos is Required. The coordinate to scroll to, along the x-axis (horizontal), in pixelsypos is also Required. The coordinate to scroll to, along the y-axis (vertical), in pixelsUse ThisThe following code works in Firefox, Chrome and Safari, but I was unable to test this in Internet Explorer. Can someone test it, and then edit my answer or comment on it?My pure (animated) Javascript solution:Explanation:window.scrollY is a variable maintained by the browser of the amount of pixels from the top that the window has been scrolled by.window.scrollTo(x,y) is a function that scrolls the window a specific amount of pixels on the x axis and on the y axis.Thus, window.scrollTo(0,window.scrollY-20) moves the page 20 pixels towards the top.The setTimeout calls the function again in 10 milliseconds so that we can then move it another 20 pixels (animated), and the if statement checks if we still need to scroll.Why don't you just use some reference element at the very beginning of your html file, like and then, when the page loads, simply doIf the browser scrolls after this function fires, you simply doCross-browser scroll to top: Cross-browser scroll to an element with id = div_id: To answer your edited-in question, you could register the onscroll handler like so:This will make it so that the first attempt at scrolling (which is likely the automatic one done by the browser) will be effectively cancelled.If you're in quircks mode (thanks @Niet the Dark Absol):If you're in strict mode:No need for jQuery here.This is working:In my case body didn't worked:But HTML worked:Combination of these two helped me. None of the other answers helped me since i had a sidenav that was not scrolling.without animation, just scroll(0, 0) (vanilla JS)If anyone is using angular and material design with sidenav.  This will send you to to the top of the page:Seeint the hash should do the job. If you have a header, you can use otherwise, the # alone will workAnd as it get written into the url, it'll stay if you refresh.In fact, you don't event need JavaScript for that if you want to do it on an onclick event, you should just put a link arround you element and give it # as href.First add a blank anchor tag to the place where you want to goNow add a function in header sectionfinally add an onload event to the body tagA generic version that works for any X and Y value, and is the same as the window.scrollTo api, just with the addition of scrollDuration.*A generic version matching the window.scrollTo browser api**I remember seeing this posted somewhere else (I couldn't find where), but this works really well:It's weird, but the way it works is based off of the way JavaScript's stack queue works. The full explanation is found here in the Zero Delays section. 

The basic idea is that the time for setTimeout doesn't actually specify the set amount of time it will wait, but the minimum amount of time it will wait. So when you tell it to wait 0ms, the browser runs all the other queued processes (like scrolling the window to where you were last) and then executes the callback.

Disable sorting for a particular column in jQuery DataTables

usman

[Disable sorting for a particular column in jQuery DataTables](https://stackoverflow.com/questions/3932587/disable-sorting-for-a-particular-column-in-jquery-datatables)

I am using the jQuery DataTables plugin to sort the table fields. My question is: how do I disable sorting for a particular column? I have tried with the following code, but it did not work:I have also tried the following code:but this still did not produce the desired results.

2010-10-14 11:21:02Z

I am using the jQuery DataTables plugin to sort the table fields. My question is: how do I disable sorting for a particular column? I have tried with the following code, but it did not work:I have also tried the following code:but this still did not produce the desired results.This is what you're looking for:    -from DataTables example - HTML5 data-* attributes - table optionsSo you can use data-orderable="false" on the th of the column you don't want to be sortable. For example, the second column "Avatar" in the table below will not be sortable:See a working example at https://jsfiddle.net/jhfrench/6yxvxt7L/.To make a first column sorting disable, try with the below code in datatables jquery. The null represents the sorting enable here.Disable Sorting on a Column in jQuery DatatablesUsing Datatables 1.9.4 I've disabled the sorting for the first column with this code:EDIT:You can disable even by using the no-sort class on your <th>, and use this initialization code:EDIT 2In this example I'm using Datables with Bootstrap, following an old blog post. Now there is one link with updated material about styling Datatables with bootstrap.What I use is just add a custom attribute in thead td and control sorting by checking that attr value automatically.So the HTML code will beAnd JavaScript for initializing datatables will be

(it will dynamically get the sorting information from table iteself ;)columnDefs now accepts a class. I'd say this is the preferred method if you'd like to specify columns to disable in your markup:Then, in your JS:Here is what you can use to disable certain column to be disabled:So all you have to do is add the "orderable": false to the column you don't want to be sortable.For Single column sorting disable try this example :For Multiple columns try this example: you just need to add column number. By default it's starting from 0Here only Column 3 worksAs of 1.10.5, simply includein columnDefs and target your column with Table should like like: If you set the FIRST column orderable property to false, you must also set the default order column otherwise it won't work since first column is the default ordering column. Example below disables sorting on first column but sets second column as default order column (remember dataTables' indexes are zero based).Here 0 is the index of the column, if you want multiple columns to be not sorted, mention column index values seperated by comma(,)To update Bhavish's answer (which I think is for an older version of DataTables and didn't work for me).  I think they changed the attribute name.  Try this:Using class:This works for me for a single columnIf you already have to hide Some columns, like I hide last name column. I just had to concatenate fname , lname , So i made query but hide that column from front end. The modifications in Disable sorting in such situation are : Notice that I had Hiding functionality hereThen I merged it into "aoColumnDefs"You can directry use .notsortable() method on column There are two ways, one is defined in html when you define table headersAnother way is using javascript, for example, you have tablethen,you can also use negative index like this:The code will look like this:Here is the answer !targets is the column number, it starts from 0set class "no-sort" in th of the table

then add css 

.no-sort { pointer-events: none !important; cursor: default !important;background-image: none !important; }

by this it will hide the arrow updown and disble event in the head.

Converting any string into camel case

Scott Klarenbach

[Converting any string into camel case](https://stackoverflow.com/questions/2970525/converting-any-string-into-camel-case)

How can I convert a string into camel case using javascript regex?EquipmentClass name or

 Equipment className or equipment class name or Equipment Class Nameshould all become: equipmentClassName.

2010-06-03 23:30:08Z

How can I convert a string into camel case using javascript regex?EquipmentClass name or

 Equipment className or equipment class name or Equipment Class Nameshould all become: equipmentClassName.Looking at your code,  you can achieve it with only two replace calls:Edit: Or in with a single replace call, capturing the white spaces also in the RegExp.If anyone is using lodash, there is a _.camelCase() function.I just ended up doing this:I was trying to avoid chaining together multiple replace statements.  Something where I'd have $1, $2, $3 in my function.  But that type of grouping is hard to understand, and your mention about cross browser problems is something I never thought about as well.You can use this solution : ES5ES6Note : 

For those language with accents. Do include À-ÖØ-öø-ÿ with the regex as following 

.replace(/[^a-zA-ZÀ-ÖØ-öø-ÿ0-9]+(.)/gIn Scott’s specific case I’d go with something like:The regex will match the first character if it starts with a capital letter, and any alphabetic character following a space, i.e. 2 or 3 times in the specified strings.By spicing up the regex to /^([A-Z])|[\s-_](\w)/g it will also camelize hyphen and underscore type names.I was trying to find a JavaScript function to camelCase a string, and wanted to make sure special characters would be removed (and I had trouble understanding what some of the answers above were doing). This is based on c c young's answer, with added comments and the removal of $peci&l characters. If regexp isn't required, you might want to look at following code I made a long time ago for Twinkle:I haven't made any performance tests, and regexp versions might or might not be faster.My ES6 approach:lodash can do the trick sure and well:Although lodash may be a "big" library (~4kB), it contains a lot of functions that you'd normally use a snippet for, or build yourself.Here is a one liner doing the work:It splits the lower-cased string based on the list of characters provided in the RegExp [.\-_\s] (add more inside the []!) and returns a word array . Then, it reduces the array of strings to one concatenated string of words with uppercased first letters. Because the reduce has no initial value, it will start uppercasing first letters starting with the second word. If you want PascalCase, just add an initial empty string ,'') to the reduce method.Reliable working example that I've been using for years:Case-changing characters include:following @Scott's readable approach, a little bit of fine tuningAll 14 permutations below produce the same result of "equipmentClassName".you can use this solution:Because this question needed yet another answer...I tried several of the previous solutions, and all of them had one flaw or another.  Some didn't remove punctuation; some didn't handle cases with numbers; some didn't handle multiple punctuations in a row.None of them handled a string like a1 2b.  There's no explicitly defined convention for this case, but some other stackoverflow questions suggested separating the numbers with an underscore.I doubt this is the most performant answer (three regex passes through the string, rather than one or two), but it passes all the tests I can think of.  To be honest, though, I really can't imagine a case where you're doing so many camel-case conversions that performance would matter.(I added this as an npm package.  It also includes an optional boolean parameter to return Pascal Case instead of Camel Case.)Test cases (Jest)little modified Scott's answer:now it replaces '-' and '_' too.There is my solution:This method seems to outperform most answers on here, it's a little bit hacky though, no replaces, no regex, simply building up a new string that's camelCase.This builds on the answer by CMS by removing any non-alphabetic characters including underscores, which \w does not remove. Upper camel case ("TestString") to lower camel case ("testString") without using regex (let's face it, regex is evil):I ended up crafting a slightly more aggressive solution:This one, above, will remove all non-alphanumeric characters and lowercase parts of words that would otherwise remain uppercased, e.g.Here's my suggestion:orTest cases:I know this is an old answer, but this handles both whitespace and _ (lodash)Basic approach would be to split the string with a regex matching upper-case or spaces. Then you'd glue the pieces back together. Trick will be dealing with the various ways regex splits are broken/weird across browsers. There's a library or something that somebody wrote to fix those problems; I'll look for it.here's the link: http://blog.stevenlevithan.com/archives/cross-browser-splitEDIT: Now working in IE8 without changes. EDIT: I was in the minority about what camelCase actually is (Leading character lowercase vs. uppercase.). The community at large believes a leading lowercase is camel case and a leading capital is pascal case.  I have created two functions that use regex patterns only. :)  So we use a unified vocabulary I have changed my stance to match the majority. All I believe you need is a single regex in either case: orIn functions: You will notice that in these functions the replace is swapping any non a-z with a space vs an empty string. This is to create word boundaries for capitalization. "hello-MY#world" -> "HelloMyWorld" Notes:EnjoyI think this should work..

How to get unique values in an array

Astronaut

[How to get unique values in an array](https://stackoverflow.com/questions/11246758/how-to-get-unique-values-in-an-array)

How can I get a list of unique values in an array? Do I always have to use a second array or is there something similar to java's hashmap in JavaScript?I am going to be using JavaScript and jQuery only. No additional libraries can be used.

2012-06-28 14:22:05Z

How can I get a list of unique values in an array? Do I always have to use a second array or is there something similar to java's hashmap in JavaScript?I am going to be using JavaScript and jQuery only. No additional libraries can be used.Since I went on about it in the comments for @Rocket's answer, I may as well provide an example that uses no libraries. This requires two new prototype functions, contains and uniqueFor more reliability, you can replace contains with MDN's indexOf shim and check if each element's indexOf is equal to -1: documentationOr for those looking for a one-liner (simple and functional), compatible with current browsers:Update 18-04-2017It appears as though 'Array.prototype.includes' now has widespread support in the latest versions of the mainline browsers (compatibility)Update 29-07-2015:There are plans in the works for browsers to support a standardized 'Array.prototype.includes' method, which although does not directly answer this question; is often related. Usage:Pollyfill (browser support, source from mozilla):Here's a much cleaner solution for ES6 that I see isn't included here. It uses the Set and the spread operator: ...Which returns [1, 2]With ES6 syntaxlist = list.filter((x, i, a) => a.indexOf(x) == i)With ES5 syntaxBrowser Compatibility: IE9+Using EcmaScript 2016 you can simply do it like this.Sets are always unique, and using Array.from() you can convert a Set to an array. For reference have a look at the documentations.https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SetIf you want to leave the original array intact, you need a second array to contain the uniqe elements of the first-Most browsers have Array.prototype.filter:Now in ES6 we can use the newly introduced ES6 functionIt will return the unique result.These days, you can use ES6's Set data type to convert your array to a unique Set. Then, if you need to use array methods, you can turn it back into an Array:Not native in Javascript, but plenty of libraries have this method.Underscore.js's _.uniq(array) (link) works quite well (source).Using jQuery, here's an Array unique function I made:Short and sweet solution using second array;You only need vanilla JS to find uniques with Array.some and Array.reduce. With ES2015 syntax it's only 62 characters. Array.some and Array.reduce are supported in IE9+ and other browsers. Just change the fat arrow functions for regular functions to support in browsers that don't support ES2015 syntax.https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceMajority of the solutions above have a high run time complexity. Here is the solution that uses reduce and can do the job in O(n) time. Note:This solution is not dependent on reduce. The idea is to create an object map and push unique ones into the array.Fast, compact, no nested loops, works with any object not just strings and numbers, takes a predicate, and only 5 lines of code!!Example: To find unique items by type:If you want it to find the first unique item instead of the last add a found.hasOwnPropery() check in there.ES6 way:you can use,it will give you unique elements,**> but there is a catch,second option is to use filter method on the array.You can enter array with duplicates and below method will return array with unique elements.The only problem with the solutions given so far is efficiency. If you are concerned about that (and you probably should) you need to avoid nested loops: for * for, filter * indexOf, grep * inArray, they all iterate the array multiple times. You can implement a single loop with solutions like this or thisI have tried this problem in pure JS.

I have followed following steps 1. Sort the given array, 2. loop through the sorted array, 3. Verify previous value and next value with current valueDemoHaving in mind that indexOf will return the first occurence of an element, you can do something like this:If you don't need to worry so much about older browsers, this is exactly what Sets are designed for.https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SetAnother thought of this question. Here is what I did to achieve this with fewer code.Here is an approach with customizable equals function which can be used for primitives as well as for custom objects:usage:I was just thinking if we can use linear search to eliminate the duplicates:}HTML:Here is the one liner solution to the problem:Copy paste this to browsers console and get the results, yo :-)i have inbuilt JQuery Unique function.For more you can refer to the jquery API Documentations.http://api.jquery.com/jquery.unique/

How to remove an item from scope in AngularJS?

Bye

[How to remove an item from scope in AngularJS?](https://stackoverflow.com/questions/14250642/how-to-remove-an-item-from-scope-in-angularjs)

Simple to-do list, but with a delete button on list page for each item:Relevant template HTML:Relevant controller method:I tried $scope.persons.pull(person) and $scope.persons.remove(person).Although the database deleted successfully, I can not pull this item from scope and I do not want to make a method call to the server for data the client already has, I just want to remove this one person from scope.Any ideas?

2013-01-10 04:04:10Z

Simple to-do list, but with a delete button on list page for each item:Relevant template HTML:Relevant controller method:I tried $scope.persons.pull(person) and $scope.persons.remove(person).Although the database deleted successfully, I can not pull this item from scope and I do not want to make a method call to the server for data the client already has, I just want to remove this one person from scope.Any ideas?Your issue is not really with Angular, but with Array methods. The proper way to remove a particularly item from an array is with Array.splice. Also, when using ng-repeat, you have access to the special $index property, which is the current index of the array you passed in.The solution is actually pretty straightforward:View:Controller:You'll have to find the index of the person in your persons array, then use the array's splice method:I would use the Underscore.js library that has a list of useful functions.See Demo in JSFiddle.See Demo in Fiddle.this works for me!If you have any function associated to list ,when you make the splice function, the association is deleted too. My solution:The list param is named items.

The param x.done indicate if the item will be deleted.Another references: Another exampleHope help you. Greetings.For the the accepted answer of @Joseph Silber is not working, because indexOf returns -1. This is probably because Angular adds an hashkey, which is different for my $scope.items[0] and my item. I tried to resolve this with the angular.toJson() function, but it did not work :(Ah, I found out the reason... I use a chunk method to create two columns in my table by watching my $scope.items. Sorry!You can also use this Angular have a built-in function called arrayRemove, in your case the method can simply be:To remove a element from scope use:From enter link description here

Custom navigation with Navigator component in React-Native

Kosmetika

[Custom navigation with Navigator component in React-Native](https://stackoverflow.com/questions/29335523/custom-navigation-with-navigator-component-in-react-native)

I’m exploring possibilities of React Native while developing a demo app with custom navigation between views with the help of Navigator component.The main app class renders navigator and inside renderScene returns passed component:For now app contains two views:What I want to figure out is:What I want to achieve is something similar to NavigatorIOS but without the navigation bar (however some views will have their own custom navigation bar).

2015-03-29 22:11:18Z

I’m exploring possibilities of React Native while developing a demo app with custom navigation between views with the help of Navigator component.The main app class renders navigator and inside renderScene returns passed component:For now app contains two views:What I want to figure out is:What I want to achieve is something similar to NavigatorIOS but without the navigation bar (however some views will have their own custom navigation bar).Your approach should work great. In big apps at Fb, we avoid calling the require() for the scene component until we render it, which can save a bit of start-up time.The renderScene function should be called when the scene is first pushed to the Navigator. It will also be called for the active scene when the Navigator gets re-rendered. If you see renderScene get called multiple times after a push, then it is probably a bug.The navigator is still a work in progress, but if you find any problems with it please file on github and tag me! (@ericvicenti)Navigator is deprecated now in RN 0.44.0 you can use react-native-deprecated-custom-components instead to support your existing application that is using Navigator.Navigator component is deprecated now. You could use react-native-router-flux by askonov, it has a huge variety and supports many different animations and is efficientAs others have previously mentioned, Navigator has been deprecated since v0.44, but can still be imported to support older applications: As per the docs (React Native v0.54) Navigating Between Screens. It is now recommended to use React Navigation if you are just getting started, or NavigatorIOS for non-Android applicationsNB: At the time of providing this answer, React Native was at version 0.54

Map Tiling Algorithm

Dan Prince

[Map Tiling Algorithm](https://stackoverflow.com/questions/8901987/map-tiling-algorithm)

I'm making a tile based RPG with Javascript, using perlin noise heightmaps, then assigning a tile type based on the height of the noise.The maps end up looking something like this (in the minimap view).I have a fairly simple algorithm which extracts the color value from each pixel on the image and converts it into a integer (0-5) depending on its postion between (0-255) which corresponds to a tile in tile dictionary. This 200x200 array is then passed to the client.The engine then determines the tiles from the values in the array and draws them to the canvas. So, I end up with interesting worlds that have realistic looking features: mountains, seas etc.Now the next thing I wanted to do was to apply some kind of blending algorithm that would cause tiles to seamlessly blend into their neighbours, if the neighbour is not of the same type. The example map above is what the player sees in their minimap. Onscreen they see a rendered version of the section marked by the white rectangle; where the tiles are rendered with their images rather than as single color pixels.This is an example of what the user would see in the map but it is not the same location as the viewport above shows!It is in this view that I want the transitioning to occur.I came up with a simple algorithm that would traverse the map within the viewport and render another image over the top of each tile, providing it was next to a tile of different type. (Not changing the map! Just rendering some extra images.) The idea of the algorithm was to profile the current tile's neighbors:This is an example scenario of what the engine might have to render, with the current tile being the one marked with the X.A 3x3 array is created and the values around it are read in. So for this example the array would look like.My idea was then to work out a series of cases for the possible tile configurations. On a very simple level:Which gives this result:Which works as a transition from [0][1] to [1][1], but not from [1][1] to [2][1], where a hard edge remains. So I figured that in that instance a corner tile would have to be used. I created two 3x3 sprite sheets that I thought would hold all the possible combinations of tiles that could be needed. Then I replicated this for all of the tiles that there are in the game (The white areas are transparent). This ends up being 16 tiles for each type of tile (The center tiles on each spritesheet are not used.) So, with these new tiles and the correct algorithm, the example section would look like this:Every attempt I have made has failed though, there is always some flaw in the algorithm and the patterns end up strange. I can't seem to get all the cases right and overall it seems like a poor way of doing it.So, if anyone could provide an alternative solution as to how I could create this effect, or what direction to go for writing the profiling algorithm, then I would be very grateful!

2012-01-17 21:29:49Z

I'm making a tile based RPG with Javascript, using perlin noise heightmaps, then assigning a tile type based on the height of the noise.The maps end up looking something like this (in the minimap view).I have a fairly simple algorithm which extracts the color value from each pixel on the image and converts it into a integer (0-5) depending on its postion between (0-255) which corresponds to a tile in tile dictionary. This 200x200 array is then passed to the client.The engine then determines the tiles from the values in the array and draws them to the canvas. So, I end up with interesting worlds that have realistic looking features: mountains, seas etc.Now the next thing I wanted to do was to apply some kind of blending algorithm that would cause tiles to seamlessly blend into their neighbours, if the neighbour is not of the same type. The example map above is what the player sees in their minimap. Onscreen they see a rendered version of the section marked by the white rectangle; where the tiles are rendered with their images rather than as single color pixels.This is an example of what the user would see in the map but it is not the same location as the viewport above shows!It is in this view that I want the transitioning to occur.I came up with a simple algorithm that would traverse the map within the viewport and render another image over the top of each tile, providing it was next to a tile of different type. (Not changing the map! Just rendering some extra images.) The idea of the algorithm was to profile the current tile's neighbors:This is an example scenario of what the engine might have to render, with the current tile being the one marked with the X.A 3x3 array is created and the values around it are read in. So for this example the array would look like.My idea was then to work out a series of cases for the possible tile configurations. On a very simple level:Which gives this result:Which works as a transition from [0][1] to [1][1], but not from [1][1] to [2][1], where a hard edge remains. So I figured that in that instance a corner tile would have to be used. I created two 3x3 sprite sheets that I thought would hold all the possible combinations of tiles that could be needed. Then I replicated this for all of the tiles that there are in the game (The white areas are transparent). This ends up being 16 tiles for each type of tile (The center tiles on each spritesheet are not used.) So, with these new tiles and the correct algorithm, the example section would look like this:Every attempt I have made has failed though, there is always some flaw in the algorithm and the patterns end up strange. I can't seem to get all the cases right and overall it seems like a poor way of doing it.So, if anyone could provide an alternative solution as to how I could create this effect, or what direction to go for writing the profiling algorithm, then I would be very grateful!The basic idea of this algorithm is to use a pre-processing step to find all edges and then select the correct smoothing tile according to the shape of the edge.The first step would be to find all edges. In the example below the edge tiles marked with an X are all green tiles with a tan tile as one or more of their eight neighbouring tiles. With different types of terrain this condition could translate to a tile being an edge tile if it has neighbours of lower terrain-number.Once all edge tiles are detected the next thing to do is to select the right smoothing tile for each edge tile. Here is my representation of your smoothing tiles.Note that there are actually not that many different types of tiles. We need the eight outer tiles from one of the 3x3 squares but only the four corner squares from the other since the straight-edge tiles are already found in the first square. This means that there in total are 12 different cases we must distinguish between.Now, looking at one edge tile we can determine which way the boundary turns by looking at its four closest neighbour tiles. Marking an edge tile with X just as above we have the following six different cases.These cases are used to determine the corresponding smoothing tile and we can number the smoothing tiles accordingly.There is still a choice of a or b for each case. This depends on which side the grass is on. One way to determine this could be to keep track of the orientation of the boundary but probably the simplest way to do it is to pick one tile next to the edge and see what colour it has. The image below shows the two cases 5a) and 5b) which can be distinguished between by for example checking the colour of the top right tile. The final enumeration for the original example would then look like this.And after selecting the corresponding edge tile the border would look something like this.As a final note I might say that this would work as long as the boundary is somewhat regular. More precisely, edge tiles that do not have exactly two edge tiles as their neighbours will have to be treated separately. This will occur for edge tiles on the edge of the map which will have a single edge neighbour and for very narrow pieces of terrain where the number of neighbouring edge tiles could be three or even four.The following square represents a metal plate. There is a "heat vent" by the top right corner. We can see how as the temperature of this point remains constant, the metal plate converges to a constant temperature at each point, being naturally hotter near the top:The problem of finding the temperature at each point can be solved as a "Boundary value problem". However the simplest way to work out the heat at each point is to model the plate as a grid. We know the points on the grid at constant temperature. We set the temperature of all unknown points to be room temperature (as if the vent had only just been turned on). We then let the heat spread through the plate until we reach convergence. This is done by iteration: we iterate through each (i,j) point. We set point(i,j) = (point(i+1, j)+point(i-1,j)+point(i, j+1)+point(i,j-1))/4 [unless point(i,j) has a heat vent of constant temperature]If you apply this to your problem, it is very similar, just average colors instead of temperatures. You would probably need about 5 iterations. I suggest using a 400x400 grid. Thats 400x400x5 = less than 1 million iterations which will be fast. If you only use 5 iterations you probably won't need to worry about holding any points constant color, as they wont shift too much from their original (in fact only points within distance 5 from the color can be effected by the color).

Pseudo code:Ok, so first thoughts are that automating a perfect solution to the problem requires some rather meaty interpolation maths.  Based on the fact that you mention pre-rendered tile images, I assume that the full interpolation solution is not warranted here. On the other hand as you said, finishing off the map by hand will lead to a good result...

but I also assume that any manual process to fix glitches is also not an option.Here's a simple algorithm that does not give a perfect result, but that is very rewarding based on the low effort it takes.Instead of trying to blend EVERY edge tile, (which means that you need to either know the result of blending the adjacent tiles first - interpolation, or you need to refine the whole map several times and can't rely on pre-generated tiles) why not blend tiles in a alternating checker-board pattern?I.e. only blending the tiles starred in the matrix above?Assuming that the only permitted steps in value are one-at-a-time, you only have a few tiles to design...There will be 16 patterns in total.  If you take advantage of rotational and reflectional symmetry there will be even fewer.'A' would be a plain [1] style tile. 'D' would be a diagonal.  There will be small discontinuities at the corners of the tiles, but these will be minor compared to the example you gave.If I can I'll update this post with images later.I was playing around with something similar to this, it wasn't finished off for a number of reasons; but basically it would take a matrix of 0 and 1, 0 being the ground and 1 being a wall for a maze generator application in Flash. Since AS3 is similar to JavaScript it wouldn't be difficult to rewrite in JS.Basically this checks every tile around it going from left to right, top to bottom and assumes that edge tiles are always 1. I've also taken the liberty of exporting the images as a file to use as a key:This is incomplete and probably a hacky way to achieve this, but I thought it might be of some benefit.Edit: Screenshot of the result of that code.I would suggest a few things:edges[N][E][S][W][NE][SE][SW][NW] = whatever offset into spriteso in your case, [2][2][1][1][2][2][1][1] = 4 (the 5th sprite).in this case, [1][1][1][1] would be 1, [2][2][2][2] would be 2, and the rest would have to be worked out.  But the lookup for a particular tile would be trivial.

Most efficient way to concatenate strings in JavaScript?

omega

[Most efficient way to concatenate strings in JavaScript?](https://stackoverflow.com/questions/16696632/most-efficient-way-to-concatenate-strings-in-javascript)

In JavaScript, I have a loop that has many iterations, and in each iteration, I am creating a huge string with many += operators. Is there a more efficient way to create a string? I was thinking about creating a dynamic array where I keep adding strings to it and then do a join. Can anyone explain and give an example of the fastest way to do this?

2013-05-22 16:08:42Z

In JavaScript, I have a loop that has many iterations, and in each iteration, I am creating a huge string with many += operators. Is there a more efficient way to create a string? I was thinking about creating a dynamic array where I keep adding strings to it and then do a join. Can anyone explain and give an example of the fastest way to do this?Seems based on benchmarks at JSPerf that using += is the fastest method, though not necessarily in every browser.For building strings in the DOM, it seems to be better to concatenate the string first and then add to the DOM, rather then iteratively add it to the dom. You should benchmark your own case though.(Thanks @zAlbee for correction)I have no comment on the concatenation itself, but I'd like to point out that @Jakub Hampl's suggestion:is wrong, because it's based on a flawed test. That test never actually appends into the DOM.This fixed test shows that creating the string all at once before rendering it is much, MUCH faster. It's not even a contest.(Sorry this is a separate answer, but I don't have enough rep to comment on answers yet.)Three years past since this question was answered but I will provide my answer anyway :)Actually, accepted answer is not fully correct. Jakub's test uses hardcoded string which allows JS engine to optimize code execution (Google's V8 is really good in this stuff!). 

But as soon as you use completely random strings (here is JSPerf) then string concatenation will be on a second place.You can also do string concat with template literals.  I updated the other posters' JSPerf tests to include it.

How to resize images proportionally / keeping the aspect ratio?

kobe

[How to resize images proportionally / keeping the aspect ratio?](https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio)

I have images that will be quite big in dimension and I want to shrink them down with jQuery while keeping the proportions constrained, i.e. the same aspect ratio.Can someone point me to some code, or explain the logic?

2010-10-19 19:13:11Z

I have images that will be quite big in dimension and I want to shrink them down with jQuery while keeping the proportions constrained, i.e. the same aspect ratio.Can someone point me to some code, or explain the logic?Have a look at this piece of code from http://ericjuden.com/2009/07/jquery-image-resize/I think this is a really cool method:If I understand the question correctly, you don't even need jQuery for this. Shrinking the image proportionally on the client can be done with CSS alone: just set its max-width and max-height to 100%. Here's the fiddle: http://jsfiddle.net/9EQ5c/In order to determine the aspect ratio, you need to have a ratio to aim for. In this example I use 16:10 since this the typical monitor aspect ratio.Results from above would be 147 and 300actually i have just run into this problem and the solution I found was strangely simple and weirdand miraculously the image is resized to the new height and conserving the same ratio!There are 4 parameters to this problemAnd there are 3 different conditional parameterssolutionthat's all you need to do.This is a mature forum, I am not giving you code for that :)Does <img src="/path/to/pic.jpg" style="max-width:XXXpx; max-height:YYYpx;" > help?Browser will take care of keeping aspect ratio intact. i.e max-width kicks in when image width is greater than height and its height will be calculated proportionally. Similarly max-height will be in effect when height is greater than width.You don't need any jQuery or javascript for this.Supported by ie7+ and other browsers (http://caniuse.com/minmaxwh).This should work for images with all possible proportionsHere's a correction to Mehdiway's answer. The new width and/or height were not being set to the max value. A good test case is the following (1768 x 1075 pixels): http://spacecoastsports.com/wp-content/uploads/2014/06/sportsballs1.png. (I wasn't able to comment on it above due to lack of reputation points.)If the image is proportionate then this code will fill the wrapper with image. If image is not in proportion then extra width/height will get cropped.Without additional temp-vars or brackets.Keep in Mind: Search engines don't like it, if width and height attribute does not fit the image, but they don't know JS. After some trial and error I came to this solution:The resize can be achieved(maintaining aspect ratio) using CSS. 

This is a further simplified answer inspired by Dan Dascalescu's post.http://jsbin.com/viqare2 Steps:Step 1) calculate the ratio of the original width / original height of Image.Step 2) multiply the original_width/original_height ratio by the new desired height to get the new width corresponding to the new height.This issue can be solved by CSS.This totally worked for me for a draggable item - aspectRatio:true

jQuery get html of container including the container itself

Pinkie

[jQuery get html of container including the container itself](https://stackoverflow.com/questions/6459398/jquery-get-html-of-container-including-the-container-itself)

How do i get the html on '#container' including '#container' and not just what's inside it. I have this which gets the html inside #container. it does not include the #container element itself. That's what i'm looking to doCheck http://jsfiddle.net/rzfPP/58/

2011-06-23 19:12:02Z

How do i get the html on '#container' including '#container' and not just what's inside it. I have this which gets the html inside #container. it does not include the #container element itself. That's what i'm looking to doCheck http://jsfiddle.net/rzfPP/58/If you wrap the container in a dummy P tag you will get the container HTML also.All you need to do is Check working example at http://jsfiddle.net/rzfPP/68/To unwrap()the <p> tag when done, you can add UPDATE :  This is now supported by Firefox as of FireFox 11 (March 2012)As others have pointed out, this will not work in FireFox.  If you need it to work in FireFox, then you might want to take a look at the answer to this question : 

In jQuery, are there any function that similar to html() or text() but return the whole content of matched component?I like to use this;Update: outerHTML works on firefox now so use the other answer unless you need to support very old versions of firefoxOldie but goldie...Since user is asking for jQuery, I'm going to keep it simple:Fiddle here.from http://forum.jquery.com/topic/jquery-getting-html-and-the-container-element-12-1-2010Firefox doesn't support outerHTML, so you need to define a function to help support it:Then, you can use outerHTML:Simple solution with an example :Move this DIV to other DIV with id = "other_div_id"Finish

What is define([ , function ]) in JavaScript? [duplicate]

vinzzz

[What is define([ , function ]) in JavaScript? [duplicate]](https://stackoverflow.com/questions/16950560/what-is-define-function-in-javascript)

I see this being used all the time in JavaScript:What is the define function?

2013-06-05 21:54:48Z

I see this being used all the time in JavaScript:What is the define function?define() is part of the AMD spec of js See:Edit: Also see Claudio's answer below. Likely the more relevant explanation.That's probably a requireJS module definitionCheck here for more details

Do you need text/javascript specified in your <script> tags?

cmcculloh

[Do you need text/javascript specified in your <script> tags?](https://stackoverflow.com/questions/5265202/do-you-need-text-javascript-specified-in-your-script-tags)

I read somewhere that you no longer need things like type="text/javascript" and the weird CDATA and <!-- things in your script tags. So, instead of:You would just do:I can't remember where I read this though. It was from a Google or Yahoo engineer I think, and they specifically mentioned which browsers required these archaic constructs and why. Anyone know what blog post/article this was talked about, or have a good resource talking about this?

2011-03-10 20:00:37Z

I read somewhere that you no longer need things like type="text/javascript" and the weird CDATA and <!-- things in your script tags. So, instead of:You would just do:I can't remember where I read this though. It was from a Google or Yahoo engineer I think, and they specifically mentioned which browsers required these archaic constructs and why. Anyone know what blog post/article this was talked about, or have a good resource talking about this?See Crockford's write-up on the <script> tag, most notably:...It's a Crockford recommendation. I know I've seen it echoed elsewhere (ppk maybe?).  The HTML5 spec does not require it.Oddly, it's become somewhat au courant to use the "type" attribute to mark <script> blocks that you don't want to be evaluated:By giving a weird non-JavaScript type, you get a way to stuff raw text into the page for use by other JavaScript code (which is presumably in script block that can be evaluated).HTML5 doesn't need the type="text/javascript" (it's the default).CDATA is only neeed for XHTML pages, if the script has any HTML characters (like '<' and '>') in it.<!-- should only be needed for OLD browsers.Well, I am tempted to say that nobody is using text/javascript any more, and that even minification tools would probably remove it...

Indeed, Facebook SDK documentation specifies just <script>. However,

Google SDK documentation still has text/javascript.Amazon SDK documentation still has text/javascript. Linkedin API documentation still has text/javascript. Instagram is still using text/javascript.The type attribute identifies the scripting language of code embedded within a script element or referenced via the element’s src attribute. This is specified as a MIME type; examples of supported MIME types include text/javascript, text/ecmascript, application/javascript, and application/ecmascript.According to HTML 4.01 SpecificationBut in HTML5 text/javascript is the default type, so you can omityou may be thinking of this article here with the dependency being that scripts default to text/javascript in HTML5 automatically, while non-HTML5 browsers still expect that you define the type specifically spec-wise even though they will almost always guess text/javascript anyways.it's up to the browser to interpret the script block correctly based on the headers, i believe, and not the type attribute.  So to answer your question, no it is not required for modern browsers (i'm talking IE7+, FF, Webkit).  If you are supporting older browsers than that...I feel sorry for you =)If you're putting a script tag inside SVG you must specify the type attribute. And it should be "text/ecmascript" rather than "text/javascript". If your script is inline (not linked) you will need to wrap the script body in a CDATA declaration too. The inline script boilerplate for SVG (and other XML variants) is thusThese might be special cases 'in the wild', but they are real enough, and SVG use is growing, so it's incorrect for anyone else to suggest that the type attribute and CDATA are entirely obsolete in modern browsers. The use cases are narrow, yes, but not unheard of.The MIME Sniffing Standard lets JavaScript be served using any MIME type (Multipurpose Internet Mail Extensions) that matches the following:Well i keep seeing more examples without the text/javascript but for some reason my scripts wont work in FF when i do so. I would recommend keeping the text/javascript declaration. The CDATA tag prevents javascript from being shown as plain text in your website if your browser has javascript turned off. Personally i don't use those tags anymore don't think there's allot of users out there without and if they are out there they might wanna grow some brains :Ptype="text/javascript" : Required in HTML 4 and XHTML, but optional in HTML5.CDATA : Required in XHTML.<!-- : Used to hide the JavaScript from very old browsers. Eg: Netscape 1 and Internet Explorer 2, neither of which anyone uses any more.

Backbone.js fetch with parameters

Shawn Mclean

[Backbone.js fetch with parameters](https://stackoverflow.com/questions/6659283/backbone-js-fetch-with-parameters)

Following the documentation, I did:the url turned out to be: http://localhost:1273/Items?[object%20Object]I was expecting something like http://localhost:1273/Items?page=1So how do I pass params in the fetch method?

2011-07-12 03:48:53Z

Following the documentation, I did:the url turned out to be: http://localhost:1273/Items?[object%20Object]I was expecting something like http://localhost:1273/Items?page=1So how do I pass params in the fetch method?changing: to: So with out over doing it, this is called with your {data: {page:1}} object as optionsSo it sends the 'data' to jQuery.ajax which will do its best to append whatever params.data is to the URL.You can also set processData to true:Jquery will auto process data object into param string,but in Backbone.sync function,

Backbone turn the processData off because Backbone will use other method to process data

in POST,UPDATE...in Backbone source:Another example if you are using Titanium Alloy: 

How do I change an HTML selected option using JavaScript?

breq

[How do I change an HTML selected option using JavaScript?](https://stackoverflow.com/questions/10911526/how-do-i-change-an-html-selected-option-using-javascript)

I have option menu like this:And now I want to change the selected option by using an href. For example:But I want to select the option with value=11 (Person1), not Person12.How do I change this code?

2012-06-06 09:29:09Z

I have option menu like this:And now I want to change the selected option by using an href. For example:But I want to select the option with value=11 (Person1), not Person12.How do I change this code?ChangetoTools as pure JavaScript code for handling Selectbox:Graphical Understanding:Updated - 25-June-2019 | Fiddler DEMOJavaScript Code:I believe that the blog post JavaScript Beginners – Select a dropdown option by value might help you.You could also change select.options.selectedIndex DOM attribute like this:Where mySelect is your selection box, and myValue is the value you want to change it to.You can use JQuery alsoAn array Index will start from 0. If you want value=11 (Person1), you will get it with position getElementsByTagName('option')[10].selected.If you are adding the option with javascript

How can I close a Twitter Bootstrap popover with a click from anywhere (else) on the page?

Travis Northcutt

[How can I close a Twitter Bootstrap popover with a click from anywhere (else) on the page?](https://stackoverflow.com/questions/8947749/how-can-i-close-a-twitter-bootstrap-popover-with-a-click-from-anywhere-else-on)

I'm currently using popovers with Twitter Bootstrap, initiated like this:As you can see, they're triggered manually, and clicking on .popup-marker (which is a div with a background image) toggles a popover. This works great, but I'd like to also be able to close the popover with a click anywhere else on the page (but not on the popover itself!).I've tried a few different things, including the following, but with no results to show for it:How can I close the popover with a click anywhere else on the page, but not with a click onthe popover itself?

2012-01-20 20:54:49Z

I'm currently using popovers with Twitter Bootstrap, initiated like this:As you can see, they're triggered manually, and clicking on .popup-marker (which is a div with a background image) toggles a popover. This works great, but I'd like to also be able to close the popover with a click anywhere else on the page (but not on the popover itself!).I've tried a few different things, including the following, but with no results to show for it:How can I close the popover with a click anywhere else on the page, but not with a click onthe popover itself?Presuming that only one popover can be visible at any time, you can use a set of flags to mark when there's a popover visible, and only then hide them.If you set the event listener on the document body, it will trigger when you click the element marked with 'popup-marker'. So you'll have to call stopPropagation() on the event object. And apply the same trick when clicking on the popover itself.Below is a working JavaScript code that does this. It uses jQuery >= 1.7http://jsfiddle.net/AFffL/539/The only caveat is that you won't be able to open 2 popovers at the same time. But I think that would be confusing for the user, anyway :-)This is even easier : I had a similar need, and found this great little extension of the Twitter Bootstrap Popover by Lee Carmichael, called BootstrapX - clickover. He also has some usage examples here. Basically it will change the popover into an interactive component which will close when you click elsewhere on the page, or on a close button within the popover. This will also allow multiple popovers open at once and a bunch of other nice features.Plugin can be found here.Usage examplejavascript: The accepted solution gave me some issues (clicking on the '.popup-marker' element of the opened popover made the popovers not work afterwards). I came up with this other solution that works perfectly for me and it's quite simple (I'm using Bootstrap 2.3.1):UPDATE: This code works with Bootstrap 3 as well!read "Dismiss on next click"

here http://getbootstrap.com/javascript/#popoversYou can use the focus trigger to dismiss popovers on the next click, but you have to use use the <a> tag, not the <button> tag, and you also must include a tabindex attribute...Example:All of the existing answers are fairly weak, as they rely on capturing all document events then finding active popovers, or modifying the call to .popover().A much better approach is to listen for show.bs.popover events on the document's body then react accordingly. Below is code which will close popovers when the document is clicked or esc is pressed, only binding event listeners when popovers are shown:https://github.com/lecar-red/bootstrapx-clickoverIt's an extension of twitter bootstrap popover and will solve the problem very simply.For some reason none of the other solutions here worked for me. However, after a lot of troubleshooting, I finally arrived at this method which works perfectly (for me at least).In my case I was adding a popover to a table and absolutely positioning it above/below the td that was clicked. The table selection was handled by jQuery-UI Selectable so I'm not sure if that was interfering. However whenever I clicked inside the popover my click handler which targeted $('.popover') never worked and the event handling was always delegated to the $(html) click handler. I'm fairly new to JS so perhaps I'm just missing something?Anyways I hope this helps someone!I give all my popovers anchors the class activate_popover. I activate them all at once onload$('body').popover({selector: '.activate-popover', html : true, container: 'body'})to get the click away functionality working I use (in coffee script):Which works perfectly fine with bootstrap 2.3.1Even though there are a lot of solutions here, i'd like to propose mine as well, i don't know if there is some solution up there that solves it all, but i tried 3 of them and they had issues, like clicking on the popover it self makes it hide, others that if i had another popover buttons clicked both/multiple popovers would still appear (like in the selected solution), How ever, This one fixed it allHere is the solution which worked very fine for me, if it can help :Here's my solution, for what it's worth:I had some problem to get it working on bootstrap 2.3.2.

But i sloved it this way:tweaked @David Wolever solution slightly:This question was also asked here and my answer provides not only a way to understand jQuery DOM traversal methods but 2 options for handling the closing of popovers by clicking outside.Open multiple popovers at once or one popover at a time.Plus these small code snippets can handle the closing of buttons containing icons!https://stackoverflow.com/a/14857326/1060487This one works like a charm and I use it.It will open the popover when you click and if you click again it will close, also if you click outside of the popover the popover will be closed.This also works with more than 1 popover.I would set the focus to the newly created pop-over and remove it on blur. That way it's not needed to check which element of the DOM has been clicked and the pop-over can be clicked, and selected too: it will not lose its focus and will not disappear.The code:Another solution, it covered the problem I had with clicking descendants of the popover:I do it as belowHope this helps!If you're trying to use twitter bootstrap popover with pjax, this worked for me:@RayOnAir, I have same issue with previous solutions. I come close to @RayOnAir solution too. One thing that improved is close already opened popover when click on other popover marker. So my code is:I found this to be a modified solution of pbaron's suggestion above, because his solution activated the popover('hide') on all elements with class 'popup-marker'.  However, when you're using popover() for html content instead of the data-content, as I'm doing below, any clicks inside that html popup actually activate the popover('hide'), which promptly closes the window.  This method below iterates through each .popup-marker element and discovers first if the parent is related to the .popup-marker's id that was clicked, and if so then does not hide it.  All other divs are hidden...I came up with this:My scenario included more popovers on the same page, and hiding them just made them invisible and because of that, clicking on items behind the popover was not possible.

The idea is to mark the specific popover-link as 'active' and then you can simply 'toggle' the active popover. Doing so will close the popover completely.I was trying to make a simple solution for a simple issue. Above posts are good but so complicated for a simple issue. So i made a simple thing. Just added a close button. Its perfect for me.I like this, simple yet effective..Add btn-popover class to your popover button/link that opens the popover. This code will close the popovers when clicking outside of it.An even easier solution, just iterate through all popovers and hide if not this. To be clear, just trigger the popoverThis should work in Bootstrap 4:Explanation:Try data-trigger="focus" instead of "click". This solved the problem for me.

How to get datetime in JavaScript?

nimi

[How to get datetime in JavaScript?](https://stackoverflow.com/questions/4744299/how-to-get-datetime-in-javascript)

How to get date time in JavaScript with format 31/12/2010 03:55 AM?

2011-01-20 06:56:14Z

How to get date time in JavaScript with format 31/12/2010 03:55 AM?Semantically, you're probably looking for the one-linerwhich formats the date in the locale of the user.If you're really looking for a specific way to format dates, I recommend the moment.js library.If the format is "fixed" meaning you don't have to use other format you can have pure JavaScript instead of using whole library to format the date:The variable strDateTime will hold the date/time in the format you desire and you should be able to tweak it pretty easily if you need.I'm using join as good practice, nothing more, it's better than adding strings together.Get full details here: Flagrant Badassery » JavaScript Date FormatDate().toLocaleString() returns this: 7/31/2018, 12:58:03 PMPretty close - just drop the comma and the seconds:new Date().toLocaleString().replace(",","").replace(/:.. /," ");Results: 7/31/2018 12:58 PMCode corrected as of Sep 3 '12 at 10:11You can convert Date to almost any format using the Snippet I have added below.Code:Other examplesSnippet:Add following code taken from this link into your code.@Shadow Wizard's code should return 02:45 PM instead of 14:45 PM. So I modified his code a bit:

Difference between jQuery’s .hide() and setting CSS to display: none

benhowdle89

[Difference between jQuery’s .hide() and setting CSS to display: none](https://stackoverflow.com/questions/4396983/difference-between-jquery-s-hide-and-setting-css-to-display-none)

Which am I better off doing? .hide() is quicker than writing out .css("display", "none"), but what’s the difference and what are both of them actually doing to the HTML element?

2010-12-09 10:06:35Z

Which am I better off doing? .hide() is quicker than writing out .css("display", "none"), but what’s the difference and what are both of them actually doing to the HTML element?From the jQuery page about .hide():So if it's important that you're able to revert to the previous value of display, you'd better use hide() because that way the previous state is remembered. Apart from that there's no difference..hide() stores the previous display property just before setting it to none, so if it wasn't the standard display property for the element you're a bit safer, .show() will use that stored property as what to go back to.  So...it does some extra work, but unless you're doing tons of elements, the speed difference should be negligible.Looking at the jQuery code, this is what happens: They are the same thing. .hide() calls a jQuery function and allows you to add a callback function to it. So, with .hide() you can add an animation for instance. .css("display","none") changes the attribute of the element to display:none. It is the same as if you do the following in JavaScript:The .hide() function obviously takes more time to run as it checks for callback functions, speed, etc...To use both is a nice answer; it's not a question of either or. The advantage of using both is that the CSS will hide the element immediately when the page loads. The jQuery .hide will flash the element for a quarter of a second then hide it.  In the case when we want to have the element not shown when the page loads we can use CSS and set display:none & use the jQuery .hide(). If we plan to toggle the element we can use jQuery toggle. Both do the same on all browsers, AFAIK. Checked on Chrome and Firefox, both append display:none to the style attribute of the element.See there is no difference if you use basic hide method.

But jquery provides various hide method which give effects to the element.

Refer below link for detailed explanation:

Effects for Hide in Jquery

Fastest way to flatten / un-flatten nested JSON objects

Louis Ricci

[Fastest way to flatten / un-flatten nested JSON objects](https://stackoverflow.com/questions/19098797/fastest-way-to-flatten-un-flatten-nested-json-objects)

I threw some code together to flatten and un-flatten complex/nested JSON objects. It works, but it's a bit slow (triggers the 'long script' warning).For the flattened names I want "." as the delimiter and [INDEX] for arrays.Examples:I created a benchmark that ~simulates my use case http://jsfiddle.net/WSzec/I would like faster code: For clarification, code that completes the JSFiddle benchmark (http://jsfiddle.net/WSzec/) significantly faster (~20%+ would be nice) in IE 9+, FF 24+, and Chrome 29+.Here's the relevant JavaScript code: Current Fastest: http://jsfiddle.net/WSzec/6/EDIT 1 Modified the above to @Bergi 's implementation which is currently the fastest. As an aside, using ".indexOf" instead of "regex.exec" is around 20% faster in FF but 20% slower in Chrome; so I'll stick with the regex since it's simpler (here's my attempt at using indexOf to replace the regex http://jsfiddle.net/WSzec/2/).EDIT 2 Building on @Bergi 's idea I managed to created a faster non-regex version (3x faster in FF and ~10% faster in Chrome). http://jsfiddle.net/WSzec/6/ In the this (the current) implementation the rules for key names are simply, keys cannot start with an integer or contain a period.Example: EDIT 3 Adding @AaditMShah 's inline path parsing approach (rather than String.split) helped to improve the unflatten performance. I'm very happy with the overall performance improvement reached.The latest jsfiddle and jsperf:http://jsfiddle.net/WSzec/14/http://jsperf.com/flatten-un-flatten/4

2013-09-30 16:05:46Z

I threw some code together to flatten and un-flatten complex/nested JSON objects. It works, but it's a bit slow (triggers the 'long script' warning).For the flattened names I want "." as the delimiter and [INDEX] for arrays.Examples:I created a benchmark that ~simulates my use case http://jsfiddle.net/WSzec/I would like faster code: For clarification, code that completes the JSFiddle benchmark (http://jsfiddle.net/WSzec/) significantly faster (~20%+ would be nice) in IE 9+, FF 24+, and Chrome 29+.Here's the relevant JavaScript code: Current Fastest: http://jsfiddle.net/WSzec/6/EDIT 1 Modified the above to @Bergi 's implementation which is currently the fastest. As an aside, using ".indexOf" instead of "regex.exec" is around 20% faster in FF but 20% slower in Chrome; so I'll stick with the regex since it's simpler (here's my attempt at using indexOf to replace the regex http://jsfiddle.net/WSzec/2/).EDIT 2 Building on @Bergi 's idea I managed to created a faster non-regex version (3x faster in FF and ~10% faster in Chrome). http://jsfiddle.net/WSzec/6/ In the this (the current) implementation the rules for key names are simply, keys cannot start with an integer or contain a period.Example: EDIT 3 Adding @AaditMShah 's inline path parsing approach (rather than String.split) helped to improve the unflatten performance. I'm very happy with the overall performance improvement reached.The latest jsfiddle and jsperf:http://jsfiddle.net/WSzec/14/http://jsperf.com/flatten-un-flatten/4Here's my much shorter implementation:flatten hasn't changed much (and I'm not sure whether you really need those isEmpty cases):Together, they run your benchmark in about the half of the time (Opera 12.16: ~900ms instead of ~ 1900ms, Chrome 29: ~800ms instead of ~1600ms).Note: This and most other solutions answered here focus on speed and are susceptible to prototype pollution and shold not be used on untrusted objects. I wrote two functions to flatten and unflatten a JSON object.Flatten a JSON object:Performance:Unflatten a JSON object:Performance:Flatten and unflatten a JSON object:Overall my solution performs either equally well or even better than the current solution.Performance:Output format:A flattened object uses the dot notation for object properties and the bracket notation for array indices:In my opinion this format is better than only using the dot notation:Advantages:Disadvantages:The current JSFiddle demo gave the following values as output:My updated JSFiddle demo gave the following values as output:I'm not really sure what that means, so I'll stick with the jsPerf results. After all jsPerf is a performance benchmarking utility. JSFiddle is not.3 ½ Years later...For my own project I wanted to flatten JSON objects in mongoDB dot notation and came up with a simple solution:Features and/or caveatsES6 version:Example:Here's another approach that runs slower (about 1000ms) than the above answer, but has an interesting idea :-)Instead of iterating through each property chain, it just picks the last property and uses a look-up-table for the rest to store the intermediate results. This look-up-table will be iterated until there are no property chains left and all values reside on uncocatenated properties.It currently uses the data input parameter for the table, and puts lots of properties on it - a non-destructive version should be possible as well. Maybe a clever lastIndexOf usage performs better than the regex (depends on the regex engine).See it in action here.You can use https://github.com/hughsk/flatThis code recursively flattens out JSON objects.I included my timing mechanism in the code and it gives me 1ms but I'm not sure if that's the most accurate one.Output:I added +/- 10-15% efficiency to the selected answer by minor code refactoring and moving the recursive function outside of the function namespace.See my question: Are namespaced functions reevaluated on every call? for why this slows nested functions down.See benchmark.Here's mine. It runs in <2ms in Google Apps Script on a sizable object. It uses dashes instead of dots for separators, and it doesn't handle arrays specially like in the asker's question, but this is what I wanted for my use.Example:Example output:I'd like to add a new version of flatten case (this is what i needed :)) which, according to my probes with the above jsFiddler, is slightly faster then the currently selected one.

Moreover, me personally see this snippet a bit more readable, which is of course important for multi-developer projects.Use this library:Usage (from https://www.npmjs.com/package/flat):Flatten:Un-flatten:

How do I mock a service that returns promise in AngularJS Jasmine unit test?

Georgii Oleinikov

[How do I mock a service that returns promise in AngularJS Jasmine unit test?](https://stackoverflow.com/questions/23705051/how-do-i-mock-a-service-that-returns-promise-in-angularjs-jasmine-unit-test)

I have myService that uses myOtherService, which makes a remote call, returning promise:To make a unit test for myService I need to mock myOtherService, such that its makeRemoteCallReturningPromise method returns a promise. This is how I do it:As you can see from the above, the definition of my mock depends on $q, which I have to load using inject(). Furthermore, injecting the mock should be happening in module(), which should be coming before inject(). However, the value for the mock is not updated once I change it.What is the proper way to do this?

2014-05-16 21:47:05Z

I have myService that uses myOtherService, which makes a remote call, returning promise:To make a unit test for myService I need to mock myOtherService, such that its makeRemoteCallReturningPromise method returns a promise. This is how I do it:As you can see from the above, the definition of my mock depends on $q, which I have to load using inject(). Furthermore, injecting the mock should be happening in module(), which should be coming before inject(). However, the value for the mock is not updated once I change it.What is the proper way to do this?I'm not sure why the way you did it doesn't work, but I usually do it with the spyOn function. Something like this:Also remember that you will need to make a $digest call for the then function to be called. See the Testing section of the $q documentation.------EDIT------After looking closer at what you're doing, I think I see the problem in your code. In the beforeEach, you're setting myOtherServiceMock to a whole new object. The $provide will never see this reference. You just need to update the existing reference:We can also write jasmine's implementation of returning promise directly by spy.For Jasmine 2:(copied from comments, thanks to ccnokes)You can use a stubbing library like sinon to mock your service. You can then return $q.when() as your promise. If your scope object's value comes from the promise result, you will need to call scope.$root.$digest().using sinon : Known that, httpPromise can be : Honestly.. you are going about this the wrong way by relying on inject to mock a service instead of module. Also, calling inject in a beforeEach is an anti-pattern as it makes mocking difficult on a per test basis.Here is how I would do this...Now when you inject your service it will have a properly mocked method for usage.I found that useful, stabbing service function as sinon.stub().returns($q.when({})):controller:and testThe code snippet:Can be written in a more concise form:

How do I get a UTC Timestamp in JavaScript?

Merc

[How do I get a UTC Timestamp in JavaScript?](https://stackoverflow.com/questions/9756120/how-do-i-get-a-utc-timestamp-in-javascript)

While writing a web application, it makes sense to store (server side) all datetimes in the DB as UTC timestamps.I was astonished when I noticed that you couldn't natively do much in terms of Timezone manipulation in JavaScript.I extended the Date object a little. Does this function make sense? Basically, every time I send anything to the server, it's going to be a timestamp formatted with this function...Can you see any major problems here? Or maybe a solution from a different angle?It just seems a little convoluted to me. And I am not so sure about performance either.

2012-03-18 04:57:16Z

While writing a web application, it makes sense to store (server side) all datetimes in the DB as UTC timestamps.I was astonished when I noticed that you couldn't natively do much in terms of Timezone manipulation in JavaScript.I extended the Date object a little. Does this function make sense? Basically, every time I send anything to the server, it's going to be a timestamp formatted with this function...Can you see any major problems here? Or maybe a solution from a different angle?It just seems a little convoluted to me. And I am not so sure about performance either.For a UTC/Unix timestamp, the following should suffice:It will factor the current timezone offset into the result. For a string representation, David Ellis' answer works.To clarify:That input is treated as local time. If UTC time is passed in, the results will differ. Observe (I'm in GMT +02:00 right now, and it's 07:50):Also note that getUTCDate() cannot be substituted for getUTCDay(). This is because getUTCDate() returns the day of the month; whereas, getUTCDay() returns the day of the week.You could also do it utilizing getTimezoneOffset and getTime,The easiest way of getting UTC time in a conventional format is as follows:You generally don't need to do much of "Timezone manipulation" on the client side. As a rule I try to store and work with UTC dates, in the form of ticks or "number of milliseconds since midnight of January 1, 1970." This really simplifies storage, sorting, calculation of offsets, and most of all, rids you of the headache of the "Daylight Saving Time" adjustments. Here's a little JavaScript code that I use.To get the current UTC time:Then what you'd generally need is to format date/time for the end-user for their local timezone and format. The following takes care of all the complexities of date and time formats on the client computer:So the following example:Returns the following (for my U.S. English locale):I actually think Date values in js are far better than say the C# DateTime objects. The C# DateTime objects have a Kind property, but no strict underlying time zone as such, and time zone conversions are difficult to track if you are converting between two non UTC and non local times. In js, all Date values have an underlying UTC value which is passed around and known regardless of the offest or time zone conversions that you do. My biggest complaint about the Date object is the amount of undefined behaviour that browser implementers have chosen to include, which can confuse people who attack dates in js with trial and error than reading the spec. Using something like iso8601.js solves this varying behaviour by defining a single implementation of the Date object.By default, the spec says you can create dates with an extended ISO 8601 date format likeSo you can infer the exact UTC time this way. When you want to pass the Date value back to the server you would callor if you would rather work with a millisecond timestamp (number of milliseconds from the 1st January 1970 UTC)ISO 8601 is a standard. You can't be confused about what a date string means if you include the date offset. What this means for you as a developer is that you never have to deal with local time conversions yourself. The local time values exist purely for the benefit of the user, and date values by default display in their local time. All the local time manipulations allow you to display something sensible to the user and to convert strings from user input. It's good practice to convert to UTC as soon as you can, and the js Date object makes this fairly trivial.On the downside there is not a lot of scope for forcing the time zone or locale for the client (that I am aware of), which can be annoying for website-specific settings, but I guess the reasoning behind this is that it's a user configuration that shouldn't be touched.So, in short, the reason there isn't a lot of native support for time zone manipulation is because you simply don't want to be doing it.If you want a one liner, The UTC Unix Timestamp can be created in JavaScript as:This will take in account the timezone of the system. It is basically time elapsed in Seconds since epoch.I use the following:Once defined this method you can do:I think this is a better solutionI want to make clear that new Date().getTime() does in fact return a UTC value, so it is a really helpful way to store and manage dates in a way that is agnostic to localized times.In other words, don't bother with all the UTC javascript functions. Instead, just use Date.getTime().More info on the explanation is here:

If javascript "(new Date()).getTime()" is run from 2 different Timezones.Since new Date().toUTCString()returns a string like "Wed, 11 Oct 2017 09:24:41 GMT" you can slice the last 3 characters and pass the sliced string to new Date():EDIT: The code below does NOT work. I was always assuming that new Date().getTime() returned the number of seconds since the 1st of January 1970 IN THE CURRENT TIMEZONE. This is not the case: getTime() returns the number of seconds in UTC. So, the code below does gross over-adjusting. Thank you everybody!]First of all, thank you for your fantastic insights.

I guess my question had the wrong title... it should have been "Get the UTC Unix Timestamp for an existing date".So, if I have a date object:I was after a function that would tell me "The UTC Unix Timestamp".This function seems to be the real trick:Note that it works on "this"  This means that I can do:And get the number of seconds since the 1st of Jan 1970 in Unix time.

Right?It's a little insane, to me, that Javascript stores everything in UTC times, but then in order to get that number I have to create a new Date object passing the individual UTC getters and then finally call getTime() for that...Merc.I am amazed at how complex this question has become.These are all identical, and their integer values all === EPOCH time :DDo not believe me, checkout:

http://www.epochconverter.com/I think this what you are expecting...Now,This will return the timestamp in UTC:

Serialize object to query string in JavaScript/jQuery [duplicate]

Tomas Aschan

[Serialize object to query string in JavaScript/jQuery [duplicate]](https://stackoverflow.com/questions/3308846/serialize-object-to-query-string-in-javascript-jquery)

I'm trying to find information on how to serialize an object to query string format, but all my searches are drowning in results on how to go the other way (string/form/whatever to JSON).I haveand I wantIs there a good way to do this? I don't mind plugins or whatnots - if the code I find is not a plugin, I'll probably re-write it to one anyway...

2010-07-22 12:33:33Z

I'm trying to find information on how to serialize an object to query string format, but all my searches are drowning in results on how to go the other way (string/form/whatever to JSON).I haveand I wantIs there a good way to do this? I don't mind plugins or whatnots - if the code I find is not a plugin, I'll probably re-write it to one anyway...You want $.param(): http://api.jquery.com/jQuery.param/Specifically, you want this:When given something like this:$.param will return this:For a quick non-JQuery function...Note this doesn't handle arrays or nested objects.Another option might be node-querystring.It's available in both npm and bower, which is why I have been using it.Alternatively YUI has http://yuilibrary.com/yui/docs/api/classes/QueryString.html#method_stringify.For example:

Appending to an object

Steve Gattuso

[Appending to an object](https://stackoverflow.com/questions/617036/appending-to-an-object)

I have an object that holds alerts and some information about them:In addition to this, I have a variable that says how many alerts there are, alertNo. My question is, when I go to add a new alert, is there a way to append the alert onto the alerts object?

2009-03-05 22:47:48Z

I have an object that holds alerts and some information about them:In addition to this, I have a variable that says how many alerts there are, alertNo. My question is, when I go to add a new alert, is there a way to append the alert onto the alerts object?How about storing the alerts as records in an array instead of properties of a single object  ?And then to add one, just use push:jQuery $.extend(obj1, obj2) would merge 2 objects for you, but you should really be using an array.You can do this with Object.assign(). Sometimes you need an array, but when working with functions that expect a single JSON object -- such as an OData call -- I've found this method simpler than creating an array only to unpack it.EDIT: To address the comment regarding getting the next key, you can get an array of the keys with the Object.keys() function -- see Vadi's answer for an example of incrementing the key. Similarly, you can get all the values with Object.values() and key-values pairs with Object.entries().Like other answers pointed out, you might find it easier to work with an array. If not:try it:https://jsbin.com/yogimo/edit?js,consoleYou can use spread syntax as follows..You should really go with the array of alerts suggestions, but otherwise adding to the object you mentioned would look like this:But since you shouldn't use literal numbers as names quote everything and go withor you can make it an array of objects.Accessing it looks likeDo you have the ability to change the outer-most structure to an array?  So it would look like thisSo when you needed to add one, you can just push it onto the arrayThen you have a built-in zero-based index for how the errors are enumerated.Now with ES6 we have a very powerful spread operator (...Object) which can make this job very easy. It can be done as follows:Thats it. It will add the key you want. Hope this helps!!As an alternative, in ES6, spread syntax might be used. ${Object.keys(alerts).length + 1} returns next id for alert. Way easier with ES6:I'm sorry but i can't comment your answers already due my reputation!...so, if you wanna modify the structure of your object, you must do like Thane Plummer says, but a little trick if you do not care where to put the item: it will be inserted on first position if you don't specify the number for the insertion.This is wonderful if you want to pass a Json object for instance to a mongoDB function call and insert a new key inside the conditions you receive. In this case I gonna insert a item myUid with some info from a variable inside my code:[Javascript] After a bit of jiggery pokery, this worked for me:The problem I needed to solve was that I might have any number of events and they would all have the same name: LastPostedDateTime all that is different is the date and time.   Try this:Works pretty well, it'll add it to the start of the array.

Set CSS property in Javascript?

Skizit

[Set CSS property in Javascript?](https://stackoverflow.com/questions/5195303/set-css-property-in-javascript)

I've created the following...How would I now set CSS attributes e.g width: 100px?

2011-03-04 14:55:41Z

I've created the following...How would I now set CSS attributes e.g width: 100px?Use element.style:Just set the style:Or if you like, you can use jQuery:For most styles do this:For styles that have hyphens in the name do this instead:That's actually quite simple with vanilla JavaScript:All of the answers tell you correctly how to do what you asked but I would advise using JavaScript to set a class on the element and style it by using CSS.  That way you are keeping the correct separation between behaviour and style.  Imagine if you got a designer in to re-style the site... they should be able to work purely in CSS without having to work with your JavaScript.In prototype I would do:if you want to add a global property, you can use:Just for people who want to doing the same thing in 2018You can assign a CSS custom property to your element (through CSS or JS) and change it:Assigment through CSS:Assignment through JSGet property value through JSHere useful links:When debugging, I like to be able to add a bunch of css attributes in one line:Getting used to this style you can add a bunch of css in one line like so:This works well with most CSS properties if there are no hyphens in them.For properties with hyphens in them like max-width, you should convert the sausage-case to camelCaseI just want to point out that you can't actually change the CSS StyleSheet, it is only possible to change the style of an Mark-Up element. When you use the codeYou are actually changing the computed value of a CSS property, which is the value that is transferred from parent to child during inheritance. So I don't confuse anyone, I want to be clear when I say that it is completely possible to change the style of an element dynamically after the page has loaded, but the style-sheet will always be static during run time of the website or application. This is important to note, and understand because if you try to obtain values that were not written directly into the element itself, like so......you will return an undefined value that will be stored in the code example's 'propertyValue' variable. If you are working with getting and setting properties that were written inside a CSS style-sheet and you want a SINGLE FUNCTION that gets, as well as sets style-property-values in this situation, which is a very common situation to be in, then you have got to use JQuery.The only downside is you got to know JQuery, but this is honestly one of the very many good reasons that every Javascript Developer should learn JQuery. If you want to get a CSS property that was computed from a style-sheet in pure JavaScript then you need to use. The downside to this method is that the getComputedValue method only gets, it does not set. 

Mozilla's Take on Computed Values  This link goes more into depth about what I have addressed here. Hope This Helps Someone!!!

Are braces necessary in one-line statements in JavaScript?

Tower

[Are braces necessary in one-line statements in JavaScript?](https://stackoverflow.com/questions/4797286/are-braces-necessary-in-one-line-statements-in-javascript)

I once heard that leaving the curly braces in one-line statements could be harmful in JavaScript. I don't remember the reasoning anymore and a Google search did not help much. Is there anything that makes it a good idea to surround all statements within curly braces in JavaScript?I am asking, because everyone seems to do so.

2011-01-25 18:17:14Z

I once heard that leaving the curly braces in one-line statements could be harmful in JavaScript. I don't remember the reasoning anymore and a Google search did not help much. Is there anything that makes it a good idea to surround all statements within curly braces in JavaScript?I am asking, because everyone seems to do so.But they are recommended. If you ever expand the statement you will need them.This is perfectly validHowever it is highly recommended that you always use braces because if you (or someone else) ever expands the statement it will be required.This same practice follows in all C syntax style languages with bracing. C, C++, Java, even PHP all support one line statement without braces. You have to realize that you are only saving two characters and with some people's bracing styles you aren't even saving a line. I prefer a full brace style (like follows) so it tends to be a bit longer. The tradeoff is met very well with the fact you have extremely clear code readability.There's a readability aspect - in that when you have compound statements it can get very confusing.  Indenting helps but doesn't mean anything to the compiler/interpreter.And then there's an extensibility aspect:The thinking goes that if you always have the brackets then you know to insert other statements inside that block.The question asks about statements on one line. Yet, the many examples provided show reasons not to leave out braces based on multiple line statements. It is completely safe to not use brackets on one line, if that is the coding style you prefer.For example, the question asks if this is ok:It does not ask if this is ok:I think leaving brackets out is preferable because it makes the code more readable with less superfluous syntax.My coding style is to never use brackets unless the code is a block. And to never use multiple statements on a single line (separated by semicolons). I find this easy to read and clear and never have scoping issues on 'if' statements. As a result, using brackets on a single if condition statement would require 3 lines. Like this:Using a one line if statement is preferable because it uses less vertical space and the code is more compact.I wouldn’t force others to use this method, but it works for me and I could not disagree more with the examples provided on how leaving out brackets leads to coding/scoping errors.Technically no but otherwise absolutely Yes!!!Forget about "It's personal preference","the code will run just fine","it has been working fine for me","it's more readable" yada yada BS. This could easily lead to very serious problems if you make a mistake and believe me it is very easy to make a mistake when you are coding(Don't belive?, check out the famous Apple go to fail bug).Argument: "It's personal preference"No it is not. Unless you are a one man team leaving on mars, no. Most of the time there will be other people reading/modifying your code. In any serious coding team this will be the recommended way, so it is not a 'personal preference'.Argument: "the code will run just fine"So does the spaghetti code! Does it mean it's ok to create it?Argument: "it has been working fine for me"In my career I have seen so many bugs created because of this problem. You probably don't remember how many times you commented out 'DoSomething()' and baffled by why 'SomethingElse()' is called:Or added 'SomethingMore' and didn't notice it won't be called(even though the indentation implies otherwise):Here is a real life example I had. Someone wanted to turn of all the logging so they run find&replace "console.log" => //"console.log":See the problem?Even if you think, "these are so trivial, I would never do that"; remember that there will always be a team member with inferior programming skills than you(hopefully you are not the worst in the team!)Argument: "it's more readable"If I've learned anything about programming, it is that the simple things become very complex very quickly. It is very common that this:turns into the following after it has been tested with different browsers/environments/use cases or new features are added:And compare it with this:PS: Bonus points go to who noticed the bug in the example above.There is no maintainability problem!The problem with all of you is that you Put semicolons everywhere. You don't need curly braces for multiple statements. If you want to add a statement, just use commas.This is valid code that will run like you expect!There is no programming reason to use the curly braces on one line statements.This only comes down to coders preferences and readability.Your code won't break because of it.In addition to the reason mentioned by @Josh K (which also applies to Java, C etc.), one special problem in JavaScript is automatic semicolon insertion. From the Wikipedia example:So, this may also yield unexpected results, if used like this:It's not really much better to writebut maybe here the error is a little bit easier to detect (?)It's a matter of style, but curly braces are good for preventing possible dangling else's.Here is why it's recommended Let's say I writeThen the next developer comes and says "Oh, I need to do something else", so they writeNow as you can see "AlsoTrue" will always be true, because the first developer didn't use braces.I'm currently working on a minifier. Even now I check it on two huge scripts. Experimentally I found out:

You may remove the curly braces behind for,if,else,while,function* if the curly braces don't include ';','return','for','if','else','while','do','function'. Irrespective line breaks.Of course you need to replace the closing brace with a semicolon if it's not followed by on other closing brace.A function must not end in a comma.Tested on Chrome and FF. There are lots of good answers, so I won’t repeat, except as to say my「rule」when braces can be omitted: on conditions that ‘return’ or ‘throw’ (eg.) as their only statement. In this case the flow-control is already clear that it’s terminating:Even the「bad case」can be quickly identified (and fixed) due to the terminating flow-control. This concept/structure「rule」also applies to a number of languages.Of course, this is also why one might use a linter..There are many problems in javascript. Take a look at JavaScript architect Douglas Crockford talking about it The if statement seems to be fine but the return statement may introduce a problem.I found this answer searching about a similar experience so I decided to answer it with my experience.Bracketless statements do work in most browsers, however, I tested that bracketless methods in fact do not work in some browser.As of February 26th 2018, this statement works in Pale Moon, but not Google Chrome.Not responding the question directly, but below is a short syntax about if condition on one lineEx: Can be written like this:Sometimes they seem to be needed!  I couldn't believe it myself, but yesterday it occurred to me in a Firebug session (recent Firefox 22.0) thatexecuted do something despite my.condition.key was true.  Adding braces:fixed that matter.  There are myriards of examples where it apparently works without the braces, but in this case it definitely didn't.People who tend to put more than one statement on a line should very definitely always use braces, of course, because things likeare difficult to find.I would just like to note that you can also leave the curly braces off of just the else. As seen in this article by John Resig's.There is a way to achieve multiple line non curly braces if statements.. (Wow what english..) but it is kinda tedius:The beginning indentation level of a statement should be equal to the number of open braces above it. (excluding quoted or commented braces or ones in preprocessor directives)Otherwise K&R would be good indentation style. To fix their style, I recommend placing short simple if statements on one line.instead ofIf I were writing an editor, I'd make its auto format button suck the bar up to the same line as foo, and I'd make it insert braces around bar if you press return before it like this:Then it's easy and consistent to add new statements above or below bar within the body of the if statementAlways found thatis easier on my eye than also conditional such as are easier to read (my personal opinion) rather thanbut i guess it comes down to coding style

How to get the <html> tag HTML with JavaScript / jQuery?

Justin Stayton

[How to get the <html> tag HTML with JavaScript / jQuery?](https://stackoverflow.com/questions/4196971/how-to-get-the-html-tag-html-with-javascript-jquery)

Using $('html').html() I can get the HTML within the <html> tag (<head>, <body>, etc.). But how can I get the actual HTML of the <html> tag (with attributes)?Alternatively, is it possible to get the entire HTML of the page (including doctype, <html>, etc.) with jQuery (or plain old JavaScript)?

2010-11-16 17:20:16Z

Using $('html').html() I can get the HTML within the <html> tag (<head>, <body>, etc.). But how can I get the actual HTML of the <html> tag (with attributes)?Alternatively, is it possible to get the entire HTML of the page (including doctype, <html>, etc.) with jQuery (or plain old JavaScript)?The simplest way to get the html element natively is:Here's the reference: https://developer.mozilla.org/en-US/docs/Web/API/Document.documentElement.UPDATE: To then grab the html element as a string you would do:This is how to get the html DOM element purely with JS:orAnd if you want to use jQuery to get attributes from it...In addition to some of the other answers, you could also access the HTML element via:Then you could get the inner HTML content:Doing so this way seems to be marginally faster.  If you are just obtaining the HTML element, however, document.body.parentNode seems to be quite a bit faster.After you have the HTML element, you can mess with the attributes with the getAttribute and setAttribute methods.For the DOCTYPE, you could use document.doctype, which was elaborated upon in this question.In jQuery:In plain Javascript:if you want to get an attribute of an HTML element with jQuery you can use .attr();so $('html').attr('someAttribute'); will give you the value of someAttribute of the element htmlhttp://api.jquery.com/attr/there is a jQuery plugin here: http://plugins.jquery.com/project/getAttributesthat allows you to get all attributes from an HTML element

Render HTML to an image

Martin Delille

[Render HTML to an image](https://stackoverflow.com/questions/10721884/render-html-to-an-image)

Is there a way to render html to image like PNG? I know that it is possible with canvas but I would like to render standard html element like div for example.

2012-05-23 14:19:05Z

Is there a way to render html to image like PNG? I know that it is possible with canvas but I would like to render standard html element like div for example.I know this is quite an old question which already has a lot of answers, yet I still spent hours trying to actually do what I wanted:Using Chrome headless (version 74.0.3729.157 as of this response), it is actually easy:Explanation of the command:Yes. HTML2Canvas exists to render HTML onto <canvas> (which you can then use as an image).NOTE: There is a known issue, that this will not work with SVGMay I recommend dom-to-image library, that was written solely to address this problem (I'm the maintainer).

Here is how you use it (some more here):There is a lot of options and they all have their pro and cons. ProsConsProsConsProsConsProsConsDisclosure: I'm the founder of ApiFlash. I did my best to provide an honest and useful answer.All the answers here use third party libraries while rendering HTML to an image can be relatively simple in pure Javascript. There is was even an article about it on the canvas section on MDN.The trick is this:Some things to noteYou could use PhantomJS, which is a headless webkit (the rendering engine in safari and (up until recently) chrome) driver. You can learn how to do screen capture of pages here. Hope that helps!You can use an HTML to PDF tool like wkhtmltopdf.  And then you can use a PDF to image tool like imagemagick. Admittedly this is server side and a very convoluted process...The only library that I got to work for Chrome, Firefox and MS Edge was rasterizeHTML. It outputs better quality that HTML2Canvas and is still supported unlike HTML2Canvas.Getting Element and Downloading as PNGI don't expect this to be the best answer, but it seemed interesting enough to post.Write an app that opens up your favorite browser to the desired HTML document, sizes the window properly, and takes a screen shot.  Then, remove the borders of the image.Use html2canvas just include plugin and call method to convert HTML to Canvas then download as image PNGSource: http://www.freakyjolly.com/convert-html-document-into-image-jpg-png-from-canvas/Use this code, it will surely work:Just do not forget to include Html2CanvasJS file in your program.

https://html2canvas.hertzen.com/dist/html2canvas.jsYou can't do this 100% accurately with JavaScript alone.There's a Qt Webkit tool out there, and a python version. If you want to do it yourself, I've had success with Cocoa:Hope this helps!Install phantomjsCreate a file github.js with following codePass the file as argument to phantomjsYou certainly can. GrabzIt's JavaScript API allows you to capture a div from a webpage like this:Where #features is the ID of the div to capture. If you wanted to convert HTML to a image. You could use this technique:Disclaimer I built this API!HtmlToImage.jar will be the simplest way to convert a html into an image Converting HTML to image using javaYou can add reference HtmlRenderer to your project and do the following,

How do I load an HTML page in a <div> using JavaScript?

Giliweed

[How do I load an HTML page in a <div> using JavaScript?](https://stackoverflow.com/questions/17636528/how-do-i-load-an-html-page-in-a-div-using-javascript)

I want home.html to load in <div id="content">.   This works fine when I use Firefox. When I use Google Chrome, it asks for plug-in. How do I get it working in Google Chrome?

2013-07-14 04:30:07Z

I want home.html to load in <div id="content">.   This works fine when I use Firefox. When I use Google Chrome, it asks for plug-in. How do I get it working in Google Chrome?I finally found the answer to my problem. The solution is You can use the jQuery load function:Sorry.  Edited for the on click instead of on load.Fetch APIXHR APIbased on your constraints you should use ajax and make sure that your javascript is loaded before the markup that calls the load_home() functionReference - davidwalshMDN - Using FetchJSFIDDLE demoI saw this and thought it looked quite nice so I ran some tests on it.It may seem like a clean approach, but in terms of performance it is lagging by 50% compared by the time it took to load a page with jQuery load function or using the vanilla javascript approach of XMLHttpRequest which were roughly similar to each other. I imagine this is because under the hood it gets the page in the exact same fashion but it also has to deal with constructing a whole new HTMLElement object as well. In summary I suggest using jQuery. The syntax is about as easy to use as it can be and it has a nicely structured call back for you to use. It is also relatively fast. The vanilla approach may be faster by an unnoticeable few milliseconds, but the syntax is confusing. I would only use this in an environment where I didn't have access to jQuery.Here is the code I used to test - it is fairly rudimentary but the times came back very consistent across multiple tries so I would say precise to around +- 5ms in each case. Tests were run in Chrome from my own home server:This approach makes use of modern Javascript features like async/await and the fetch API. It downloads HTML as text and then feeds it to the innerHTML of your container element.The await (await fetch(url)).text() may seem a bit tricky, but it's easy to explain. It has two asynchronous steps and you could rewrite that function like this:See the fetch API documentation for more details.When using Then remember that you can not "debug" in chrome locally, because XMLHttpRequest cannot load -- This does NOT mean that it does not work, it just means that you need to test your code on same domain aka. your serverYou can use the jQuery :   or tryThere is this plugin on github that load content into an element. Here is the repohttps://github.com/abdi0987/ViaJSThis is usually needed when you want to include header.php or whatever page. In Java it's easy especially if you have HTML page and don't want to use php include function but at all you should write php function and add it as Java function in script tag.In this case you should write it without function followed by name  Just. Script rage the function word and start  the include header.php

I.e convert the php include function to Java function in script tag and place all your content in that included file.Use this simple codeshowhide.htmlshowhide_embedded.htmlIf your html file resides locally then go for iframe instead of the  tag.  tags do not work cross-browser, and are mostly used for Flash For ex : <iframe src="home.html" width="100" height="100"/> 

After submitting a POST form open a new window showing the result

liggett78

[After submitting a POST form open a new window showing the result](https://stackoverflow.com/questions/178964/after-submitting-a-post-form-open-a-new-window-showing-the-result)

JavaScript post request like a form submit shows you how to submit a form that you create via POST in JavaScript. Below is my modified code.What I would like to do is open the results in a new window. I am currently using something like this to open a page in a new window:

2008-10-07 15:16:01Z

JavaScript post request like a form submit shows you how to submit a form that you create via POST in JavaScript. Below is my modified code.What I would like to do is open the results in a new window. I am currently using something like this to open a page in a new window:Add orto your form's definition.If you want to create and submit your form from Javascript as is in your question and you want to create popup window with custom features I propose this solution (I put comments above the lines i added):I know this basic method:1)2)3)Works!Simplest working solution for flow window (tested at Chrome):

jQuery check if an input is type checkbox?

Rio

[jQuery check if an input is type checkbox?](https://stackoverflow.com/questions/1488694/jquery-check-if-an-input-is-type-checkbox)

I'd like to find out if an input is a checkbox or not, and the following doesn't work:Thank you once again!

2009-09-28 18:46:37Z

I'd like to find out if an input is a checkbox or not, and the following doesn't work:Thank you once again!You can use the pseudo-selector :checkbox with a call to jQuery's is function:Or, more of the style of jQuery:A non-jQuery solution is much like a jQuery solution:Use this function:Or this jquery plugin:

Failed to execute 'postMessage' on 'DOMWindow': https://www.youtube.com !== http://localhost:9000

Adam Zerner

[Failed to execute 'postMessage' on 'DOMWindow': https://www.youtube.com !== http://localhost:9000](https://stackoverflow.com/questions/27573017/failed-to-execute-postmessage-on-domwindow-https-www-youtube-com-http)

This is the error message that I get:I've seen other similar problems where the target origin is http://www.youtube.com and the recipient origin is https://www.youtube.com, but none like mine where the target is https://www.youtube.com and the origin is http://localhost:9000.

2014-12-19 19:53:18Z

This is the error message that I get:I've seen other similar problems where the target origin is http://www.youtube.com and the recipient origin is https://www.youtube.com, but none like mine where the target is https://www.youtube.com and the origin is http://localhost:9000.I believe this is an issue with the target origin being https. I suspect it is because your iFrame url is using http instead of https. Try changing the url of the file you are trying to embed to be https.For instance:to be:Just add the parameter "origin" with the URL of your site in the paramVars attribute of the player, like this:Setting this seems to fix it:You can save the JavaScript into local files:Into the first file, player_api put this code:Into the second file, find the code: this.a.contentWindow.postMessage(a,b[c]); and replace it with:Of course, you can concatenate into one file - will be more efficient.

This is not a perfect solution, but it's works!My Source : yt_api-concatMake sure you are loading from a URL such as:https://www.youtube.com/embed/HIbAz29L-FA?modestbranding=1&playsinline=0&showinfo=0&enablejsapi=1&origin=https%3A%2F%2Fintercoin.org&widgetid=1Note the "origin" component, as well as "enablejsapi=1". The origin must match what your domain is, and then it will be whitelisted and work.Try using window.location.href for the url to match the window's origin.I got the same error. My mistake was that the enablejsapi=1 parameter was not present in the iframe src.I think the description of the error is misleading and has originally to do with wrong usage of the player object.I had the same issue when switching to new Videos in a Slider.When simply using the player.destroy() function described here the problem is gone.I had this same problem and it turns out it was because I had the Chrome extension "HTTPS Everywhere" running. Disabling the extension solved my problem.This exact error was related to a content block by Youtube when "playbacked on certain sites or applications". More specifically by WMG (Warner Music Group).The error message did however suggest that a https iframe import to a http site was the issue, which it wasn't in this case.Remove DNS Prefetch will solve this issue.If you're using WordPress, add this line in your theme's functions.phpYou could change your iframe to be like this and add origin to be your current website. It resolves error on my browser.ref: https://developers.google.com/youtube/iframe_api_reference#Loading_a_Video_PlayerThere could be any of the following, but all of them lead into DOM not loaded before its accessed by the javascript.So here is what you have to ensure before actually calling JS code:

* Make sure the container has loaded before any javascript is called

* Make sure the target URL is loaded in whatever container it has toI came across the similar issue but on my local when I am trying to have my Javascript run well before onLoad of the main page which causes the error message. I have fixed it by simply waiting for whole page to load and then call the required function. You could simply do this by adding a timeout function when page has loaded and call your onload event like:window.onload = new function() {

setTimeout(function() {

// some onload event

}, 10);

}that will ensure what you are trying will execute well after onLoad is trigger.You can try : mine was:I just removed the line with playerVars, and it worked without errors on console. I was also facing the same issue then I visit official Youtube Iframe Api where i found this:and wander to see that official page was also facing this issue. Just Visit official Youtube Iframe Api and see console logs. My Chrome version is 79.0.3945.88.

What does「./bin/www」do in Express 4.x?

Blaszard

[What does「./bin/www」do in Express 4.x?](https://stackoverflow.com/questions/23169941/what-does-bin-www-do-in-express-4-x)

I just started to learn about Express 4.0 in my Node.js app, and I found that it generated ./bin/www file, on which only the application server and port settings are written and everything others like middleware and routing is defined in ./app.js file.However, I'm not sure what this ./bin/www does. I've used Express 3.x and I have always defined server and port settings as well as routing and middleware on the identical ./app.js file, and launched my node app with node app.js. So what's the point of using the ./bin/www? Does it only separate the server and port definition from others?Right now, when I create the package using express-generator, the package.json includes the following definition:However, I wonder whether I should launch my app using node ./bin/www, or npm start. Which command should I run to start my app?And also, when I deploy my app to heroku, what should I write in the Procfile file? Is web: node app.js enough?

2014-04-19 12:15:12Z

I just started to learn about Express 4.0 in my Node.js app, and I found that it generated ./bin/www file, on which only the application server and port settings are written and everything others like middleware and routing is defined in ./app.js file.However, I'm not sure what this ./bin/www does. I've used Express 3.x and I have always defined server and port settings as well as routing and middleware on the identical ./app.js file, and launched my node app with node app.js. So what's the point of using the ./bin/www? Does it only separate the server and port definition from others?Right now, when I create the package using express-generator, the package.json includes the following definition:However, I wonder whether I should launch my app using node ./bin/www, or npm start. Which command should I run to start my app?And also, when I deploy my app to heroku, what should I write in the Procfile file? Is web: node app.js enough?In Express 3.0, you normally would use app.configure() (or app.use()) to set up the required middleware you need. Those middleware you specified are bundled together with Express 3.0.Example:In Express 4.0 however, all middleware have been removed so that they can be maintained and updated independently from the core Express (except the static middleware), thus they need to be called separately (what you see in app.js).The bin/ directory serves as a location where you can define your various startup scripts. The www is an example to start the express app as a web server.Ultimately, you could have different scripts like test, stop, or restart, etc. Having this structure allows you to have different startup configurations, without cramming everything into app.js.The correct way to start your Express app is: To deploy an Express 4.x app to Heroku, add this to your Procfile: Or if you can just use the start script in your package.json, heroku will automatically uses that, read more hereNode apps like the Express 3.x  use non-standard startup files app.js, but it's the wrong file to run. package.json haswhich states the startup command line. It’s non-trivial because that potentially contains a full command line, and not just a path to the starter file.if you are using express-generator, just look at your local file, ./bin, there is www file inside of the ./bin. So when you run node ./bin/www, node.js will execute the code at www file. Nothing fancy.On Windows, use this command:put this to Procfile web: node ./bin/www

and check if it works with foreman start.

The app should be available on port 5000

Get list of data-* attributes using javascript / jQuery

Shawn Chin

[Get list of data-* attributes using javascript / jQuery](https://stackoverflow.com/questions/4187032/get-list-of-data-attributes-using-javascript-jquery)

Given an arbitrary HTML element with zero or more data-* attributes, how can one retrieve a list of key-value pairs for the data.E.g. given this:I would like to be able to programmatically retrieve this:Using jQuery (v1.4.3), accessing the individual bits of data using $.data() is simple if the keys are known in advance, but it is not obvious how one can do so with arbitrary sets of data.I'm looking for a 'simple' jQuery solution if one exists, but would not mind a lower level approach otherwise. I had a go at trying to to parse $('#prod').attributes but my lack of javascript-fu is letting me down.customdata does what I need. However, including a jQuery plugin just for a fraction of its functionality seemed like an overkill. Eyeballing the source helped me fix my own code (and improved my javascript-fu).Here's the solution I came up with:As demonstrated in the accepted answer, the solution is trivial with jQuery (>=1.4.4). $('#prod').data() would return the required data dict.

2010-11-15 17:19:32Z

Given an arbitrary HTML element with zero or more data-* attributes, how can one retrieve a list of key-value pairs for the data.E.g. given this:I would like to be able to programmatically retrieve this:Using jQuery (v1.4.3), accessing the individual bits of data using $.data() is simple if the keys are known in advance, but it is not obvious how one can do so with arbitrary sets of data.I'm looking for a 'simple' jQuery solution if one exists, but would not mind a lower level approach otherwise. I had a go at trying to to parse $('#prod').attributes but my lack of javascript-fu is letting me down.customdata does what I need. However, including a jQuery plugin just for a fraction of its functionality seemed like an overkill. Eyeballing the source helped me fix my own code (and improved my javascript-fu).Here's the solution I came up with:As demonstrated in the accepted answer, the solution is trivial with jQuery (>=1.4.4). $('#prod').data() would return the required data dict.Actually, if you're working with jQuery, as of version 1.4.3 1.4.4 (because of the bug as mentioned in the comments below), data-* attributes are supported through .data(): The jQuery.fn.data function will return all of the data- attribute inside an object as key-value pairs, with the key being the part of the attribute name after data- and the value being the value of that attribute after being converted following the rules stated above. I've also created a simple demo if that doesn't convince you: http://jsfiddle.net/yijiang/WVfSg/A pure JavaScript solution ought to be offered as well, as the solution is not difficult:This gives an array of attribute objects, which have name and value properties:Edit: To take it a step further, you can get a dictionary by iterating the attributes and populating a data object:You could then access the value of, for example, data-my-value="2" as data.myValue;jsfiddle.net/3KFYf/33Edit: If you wanted to set data attributes on your element programmatically from an object, you could:jsfiddle.net/3KFYf/34EDIT: If you are using babel or TypeScript, or coding only for es6 browsers, this is a nice place to use es6 arrow functions, and shorten the code a bit:Have a look here:If the browser also supports the HTML5 JavaScript API, you should be able to get the data with:orOh, but I also read:It is from May 2010.If you use jQuery anyway, you might want to have a look at the customdata plugin. I have no experience with it though.As mentioned above modern browsers have the The HTMLElement.dataset API.

That API gives you a DOMStringMap, and you can retrieve the list of data-* attributes simply doing:you can also retrieve a array with the data- property's key names likeor map its values byand like this you can iterate those and use them without the need of filtering between all attributes of the element like we needed to do before.or convert gilly3's excellent answer to a jQuery method:Using: $('.foo').info();You should be get the data through the dataset attributesdataset is useful tool for get data-attributeYou can just iterate over the data attributes like any other object to get keys and values, here's how to do it with $.each:One way of finding all data attributes is using element.attributes. Using .attributes, you can loop through all of the element attributes, filtering out the items which include the string "data-". I use nested each - for me this is the easiest solution (Easy to control/change "what you do with the values - in my example output data-attributes as ul-list) (Jquery Code)Codepen: https://codepen.io/ezra_siton/pen/GRgRwNw?editors=1111

Using Jasmine to spy on a function without an object

Chetter Hummin

[Using Jasmine to spy on a function without an object](https://stackoverflow.com/questions/9510148/using-jasmine-to-spy-on-a-function-without-an-object)

I'm new to Jasmine and have just started using it. I have a library js file with lots of functions which are not associated with any object (i.e. are global). How do I go about spying on these functions?I tried using window/document as the object, but the spy did not work even though the function was called. I also tried wrapping it in a fake object as follows :and test withThis does not work either as the spy did not work

2012-03-01 03:17:37Z

I'm new to Jasmine and have just started using it. I have a library js file with lots of functions which are not associated with any object (i.e. are global). How do I go about spying on these functions?I tried using window/document as the object, but the spy did not work even though the function was called. I also tried wrapping it in a fake object as follows :and test withThis does not work either as the spy did not workIf you are defining your function:Then, this is equivalent to:So spyOn(window, 'test') should work.If that is not, you should also be able to:If none of those are working, something else is going on with your setup.I don't think your fakeElement technique works because of what is going on behind the scenes. The original globalMethod still points to the same code. What spying does is proxy it, but only in the context of an object. If you can get your test code to call through the fakeElement it would work, but then you'd be able to give up global fns.TypeScript users:I know the OP asked about javascript, but for any TypeScript users who come across this who want to spy on an imported function, here's what you can do.In the test file, convert the import of the function from this:To this:Then you can spy on FooFunctions.foo :)There is  2 alternative which I use (for jasmine 2)This one is not quite explicit because it seems that the function is actually a fake.The second more verbose, more explicit, and "cleaner":-> jasmine source code to see the second argument A very simple way:This worked for me.

nginx: send all requests to a single html page

prismofeverything

[nginx: send all requests to a single html page](https://stackoverflow.com/questions/7027636/nginx-send-all-requests-to-a-single-html-page)

Using nginx, I want to preserve the url, but actually load the same page no matter what.  I will use the url with History.getState() to route the requests in my javascript app.  It seems like it should be a simple thing to do?works, but redirects the url?  I still need the url, I just want to always use the same page.

2011-08-11 14:27:10Z

Using nginx, I want to preserve the url, but actually load the same page no matter what.  I will use the url with History.getState() to route the requests in my javascript app.  It seems like it should be a simple thing to do?works, but redirects the url?  I still need the url, I just want to always use the same page.I think this will do it for you:Using just try_files didn't work for me - it caused a rewrite or internal redirection cycle error in my logs.The Nginx docs had some additional details:http://nginx.org/en/docs/http/ngx_http_core_module.html#try_filesSo I ended up using the following:Your original rewrite should almost work.  I'm not sure why it would be redirecting, but I think what you really want is justYou should be able to put that in a location or directly in the server.This worked for me:This allowed me to create a catch-all URL for a javascript single-page app.  All static files like css, fonts, and javascript built by npm run build  will be found if they are in the same directory as index.html.   If the static files were in another directory, for some reason, you'd also need something like:This worked for me:The correct way would be:Using last will make nginx find a new suitable location block according to the result of rewriting.try_files is also a perfectly valid approach to this problem.

jQuery AJAX file upload PHP

user2355509

[jQuery AJAX file upload PHP](https://stackoverflow.com/questions/23980733/jquery-ajax-file-upload-php)

I want to implement a simple file upload in my intranet-page, with the smallest setup possible.This is my HTML part:and this is my JS jquery script:There is a folder named "uploads" in the root directory of the website, with change permissions for "users" and "IIS_users".When I select a file with the file-form and press the upload button, the first alert returns "[object FormData]". the second alert doesn't get called and the"uploads" folder is empty too!?Can someone help my finding out whats wrong?Also the next step should be, to rename the file with a server side generated name. Maybe someone can give me a solution for this, too.

2014-06-01 14:11:23Z

I want to implement a simple file upload in my intranet-page, with the smallest setup possible.This is my HTML part:and this is my JS jquery script:There is a folder named "uploads" in the root directory of the website, with change permissions for "users" and "IIS_users".When I select a file with the file-form and press the upload button, the first alert returns "[object FormData]". the second alert doesn't get called and the"uploads" folder is empty too!?Can someone help my finding out whats wrong?Also the next step should be, to rename the file with a server side generated name. Maybe someone can give me a solution for this, too.You need a script that runs on the server to move the file to the uploads directory. The jQuery ajax method (running in the browser) sends the form data to the server, then a script on the server handles the upload. Here's an example using PHP.Your HTML is fine, but update your JS jQuery script to look like this:And now for the server-side script, using PHP in this case.upload.php: a PHP script that runs on the server and directs the file to the uploads directory:Also, a couple things about the destination directory: And a little bit about the PHP function move_uploaded_file, used in the upload.php script:$_FILES['file']['name'] is the name of the file as it is uploaded. You don't have to use that. You can give the file any name (server filesystem compatible) you want:And finally, be aware of your PHP upload_max_filesize AND post_max_size configuration values, and be sure your test files do not exceed either. Here's some help how you check PHP configuration and how you set max filesize and post settings.and this is the php file to receive the uplaoded filesUse pure jsThe filename is automatically included to request and server can read it, the 'content-type' is automatically set to 'multipart/form-data'. Here is more developed example with error handling and additional json sendingBest File Upload Using Jquery Ajax With Materialise

Click Here to DownloadWhen you select image the image will be Converted in base 64 and you can store this in to database so it will be light weight also.

Adding options to select with javascript

jacktheripper

[Adding options to select with javascript](https://stackoverflow.com/questions/8674618/adding-options-to-select-with-javascript)

I want this javascript to create options from 12 to 100 in a select with id="mainSelect", because I do not want to create all of the option tags manually. Can you give me some pointers? Thanks

2011-12-29 23:18:26Z

I want this javascript to create options from 12 to 100 in a select with id="mainSelect", because I do not want to create all of the option tags manually. Can you give me some pointers? ThanksYou could achieve this with a simple for loop:JS Fiddle demo.JS Perf comparison of both mine and Sime Vidas' answer, run because I thought his looked a little more understandable/intuitive than mine and I wondered how that would translate into implementation. According to Chromium 14/Ubuntu 11.04 mine is somewhat faster, other browsers/platforms are likely to have differing results though.Edited in response to comment from OP:JS Fiddle demo.And, finally (after quite a delay...), an approach extending the prototype of the HTMLSelectElement in order to chain the populate() function, as a method, to the DOM node:JS Fiddle demo.References:Here you go:Live demo: http://jsfiddle.net/mwPb5/Update: Since you want to reuse this code, here's the function for it:Usage:Live demo: http://jsfiddle.net/mwPb5/1/I don't recommend doing DOM manipulations inside a loop -- that can get expensive in large datasets. Instead, I would do something like this:You can read more about DocumentFragment on MDN, but here's the gist of it:The most concise and intuitive way would be:You can also differentiate the name and the value or add items at the start of the list with additional parameters to the used functions:

HTMLSelect​Element​.add(item[, before]);

new Option(text, value, defaultSelected, selected);The one thing I'd avoid is doing DOM operations in a loop to avoid repeated re-renderings of the page.Edit: removed the function to show how you can just assign the html you've built up to another select element - thus avoiding the unnecessary looping by repeating the function call.See: What is the best way to add options to a select from an array with jQuery?When you create a new Option object, there are two parameters to pass: The first is the text you want to

appear in the list, and the second the value to be assigned to the option.You then simply assign this Option object to an empty array element, for example:None of the above solutions worked for me. Append method didn't give error when i tried but it didn't solve my problem. In the end i solved my problem with data property of select2. I used json and got the array and then give it in select2 element initialize. For more detail you can see my answer at below post.https://stackoverflow.com/a/41297283/4928277 Often you have an array of related records, I find it easy and fairly declarative to fill select this way:This will replace existing options.

You can use selectEl.insertAdjacentHTML('afterbegin', str); to add them to the top instead.

And selectEl.insertAdjacentHTML('beforeend', str); to add them to the bottom of the list.IE11 compatible syntax:

How do you clear the focus in javascript?

Andres

[How do you clear the focus in javascript?](https://stackoverflow.com/questions/2520650/how-do-you-clear-the-focus-in-javascript)

I know this shouldn't be that hard, but I couldn't find the answer on Google.I want to execute a piece of javascript that will clear the focus from whatever element it is on without knowing ahead of time which element the focus is on. It has to work on firefox 2 as well as more modern browsers.Is there a good way to do this?

2010-03-26 01:35:12Z

I know this shouldn't be that hard, but I couldn't find the answer on Google.I want to execute a piece of javascript that will clear the focus from whatever element it is on without knowing ahead of time which element the focus is on. It has to work on firefox 2 as well as more modern browsers.Is there a good way to do this?Answer: document.activeElement---edit----Technically: document.activeElement.blur()----edit 2----.focus() and then .blur() something else arbitrary on your page. Since only one element can have the focus, it is transferred to that element and then removed.Works wrong on IE9 - it blurs the whole browser window if active element is document body. Better to check for this case:None of the answers provided here are completely correct when using TypeScript, as you may not know the kind of element that is selected.This would therefore be preferred:I would furthermore discourage using the solution provided in the accepted answer, as the resulting blurring is not part of the official spec, and could break at any moment.dummyElem.focus() where dummyElem is a hidden object (e.g. has negative zIndex)?You can call window.focus();but moving or losing the focus is bound to interfere with anyone using the tab key to get around the page.you could listen for keycode 13, and forego the effect if the tab key is pressed.if you have a top menu with "active" class in a element, you can use it: it works for menu style like this: With jQuery its just: $(this).blur();

Hiding the legend in Google Chart

jamesatha

[Hiding the legend in Google Chart](https://stackoverflow.com/questions/5202029/hiding-the-legend-in-google-chart)

I am using the Google charts API. Is there a way to hide the legend for a scatter plot?

2011-03-05 05:58:09Z

I am using the Google charts API. Is there a way to hide the legend for a scatter plot?You can disable the legend by using 'none' as the position:legend: {position: 'none'}A bit cleaner way isIn drawChart() function, Add legend: none property in your chart options objectIn my case I use:library: {legend:{position:'none'}} It doesn't appear so from the API, you can only set a position, with no option for "none". You could probably remove it with javascript though, if you can identify the containing element.Edit: it actually appears as though you can omit the chdl= parameter to get a scatter without a legend.

How to build query string with Javascript

hasen

[How to build query string with Javascript](https://stackoverflow.com/questions/316781/how-to-build-query-string-with-javascript)

Just wondering if there is anything built-in to Javascript that can take a Form and return the query parameters, eg: "var1=value&var2=value2&arr[]=foo&arr[]=bar..."I've been wondering this for years.

2008-11-25 09:13:34Z

Just wondering if there is anything built-in to Javascript that can take a Form and return the query parameters, eg: "var1=value&var2=value2&arr[]=foo&arr[]=bar..."I've been wondering this for years.I tried to search for an answer to this question some while ago, but I ended up writing my own function that extracts the values from the form ..it's not perfect but it fits my needs.form_params returns a (key -> value) mapping of the parameters.

the input is the form element (DOM Element)It doesn't handle fields that allow multiple selection.2k20 update: use Josh's solution with URLSearchParams.toString().Old answer:Without jQueryFor browsers that don't support arrow function syntax which requires ES5, change the .map... line toIf you're using jQuery you might want to check out jQuery.param() http://api.jquery.com/jQuery.param/Example:The URLSearchParams API is available in all modern browsers. For example:This doesn't directly answer your question, but here's a generic function which will create a URL that contains query string parameters.  The parameters (names and values) are safely escaped for inclusion in a URL.With jQuery you can do this by $.paramMaking use of Object.entries(), which returns an array of object's [key, value] pairs. For example, for {a: 1, b: 2} it would return [['a', 1], ['b', 2]]. It is not supported (and won't be) only by IE.No, I don't think standard JavaScript has that built in, but Prototype JS has that function (surely most other JS frameworks have too, but I don't know them), they call it serialize. I can reccomend Prototype JS, it works quite okay. The only drawback I've really noticed it it's size (a few hundred kb) and scope (lots of code for ajax, dom, etc.). Thus if you only want a form serializer it's overkill, and strictly speaking if you only want it's Ajax functionality (wich is mainly what I used it for) it's overkill. Unless you're careful you may find that it does a little too much "magic" (like extending every dom element it touches with Prototype JS functions just to find elements) making it slow on extreme cases.querystring can help.So, you canIf you don't want to use a library, this should cover most/all of the same form element types.You don't actually need a form to do this with Prototype. Just use Object.toQueryString function:You can do that nowadays with FormData and URLSearchParams without the need to loop over anything.Older browsers will need a polyfill, though.I'm not entirely certain myself, I recall seeing jQuery did it to an extent, but it doesn't handle hierarchical records at all, let alone in a php friendly way. One thing I do know for certain, is when building URLs and sticking the product into the dom, don't just use string-glue to do it, or you'll be opening yourself to a handy page breaker. For instance, certain advertising software in-lines the version string from whatever runs your flash. This is fine when its adobes generic simple string, but however, that's very naive, and blows up in an embarrasing mess for people whom have installed Gnash, as gnash'es version string happens to contain a full blown GPL copyright licences, complete with URLs and <a href> tags. Using this in your string-glue advertiser generator, results in the page blowing open and having imbalanced HTML turning up in the dom.The moral of the story: Not: Google need to learn this trick. I tried to report the problem, they appear not to care.As Stein says, you can use the prototype javascript library from http://www.prototypejs.org.

Include the JS and it is very simple then, $('formName').serialize() will return what you want!For those of us who prefer jQuery, you would use the form plugin: http://plugins.jquery.com/project/form, which contains a formSerialize method.These answers are very helpful, but i want to add another answer, that may help you build full URL. 

This can help you concat base url, path, hash and parameters.You can download via npm https://www.npmjs.com/package/build-urlDemo:Is is probably too late to answer your question. 

I had the same question and I didn't like to keep appending strings to create a URL. So, I started using $.param as techhouse explained. 

I also found a URI.js library that creates the URLs easily for you. There are several examples that will help you: URI.js Documentation.

Here is one of them:I know this is very late answer but works very well...note: object.entries will return key,values pairs   Hope its helps someone.Happy Coding...

How to generate unique ID with node.js

owl

[How to generate unique ID with node.js](https://stackoverflow.com/questions/23327010/how-to-generate-unique-id-with-node-js)

How to set a variable value with database query callback? How I can do it?

2014-04-27 18:04:41Z

How to set a variable value with database query callback? How I can do it?It's been some time since I used node.js, but I think I might be able to help.Firstly, in node, you only have a single thread and are supposed to use callbacks. What will happen with your code, is that base.getID query will get queued up by for execution, but the while loop will continusouly run as a busy loop pointlessly.You should be able to solve your issue with a callback as follows:And use it as suchI haven't coded any node/js in around 2 years and haven't tested this, but the basic idea should hold – don't use a busy loop, and use callbacks. You might want to have a look at the node async package.Install NPM uuid package (sources: https://github.com/kelektiv/node-uuid):and use it in your code:Then create some ids ...** UPDATE 3.1.0

The above usage is deprecated, so use this package like this:  The fastest possible way to create random 32-char string in Node is by using native crypto module:Another approach is using the shortid package from npm.It is very easy to use:and has some compelling features:node-uuid is deprecated so please use uuidNpm linkSimple, time based, without dependencies:Output: jzlatihlplus random number (Thanks to @Yaroslav Gaponov's answer)Output jzlavejjperpituuteMore easy and without addition modulesIf some one needs cryptographic-strong UUID, there is solution for that as well.https://www.npmjs.com/package/generate-safe-idI am using the following and it is working fine plus without any third-party dependencies.

Javascript - sort array based on another array

user1448892

[Javascript - sort array based on another array](https://stackoverflow.com/questions/13304543/javascript-sort-array-based-on-another-array)

Is it possible to sort and rearrange an array that looks like this:to match the arrangement of this array:Unfortunately, I don’t have any IDs to keep track on. I would need to priority the items-array to match the sortingArr as close as possible.Update:Here is the output I’m looking for:Any idea how this can be done?

2012-11-09 08:29:02Z

Is it possible to sort and rearrange an array that looks like this:to match the arrangement of this array:Unfortunately, I don’t have any IDs to keep track on. I would need to priority the items-array to match the sortingArr as close as possible.Update:Here is the output I’m looking for:Any idea how this can be done?Something like:Here's a shorter code, but it destroys the sorting array:One Line answer.If you use the native array sort function, you can pass in a custom comparator to be used when sorting the array. The comparator should return a negative number if the first value is less than the second, zero if they're equal, and a positive number if the first value is greater.So if I understand the example you're giving correctly, you could do something like:Plenty of other answers that work. :)I'm guessing that most people came here looking for an equivalent to PHP's array_multisort (I did) so I thought I'd post that answer as well. There are a couple options:1. There's an existing JS implementation of array_multisort(). Thanks to @Adnan for pointing it out in the comments. It is pretty large, though.2. Write your own. (JSFiddle demo)3. Lodash.js or Underscore.js (both popular, smaller libraries that focus on performance) offer helper functions that allow you to do this:...Which will (1) group the sortArray into [index, value] pairs, (2) sort them by the value (you can also provide a callback here), (3) replace each of the pairs with the item from the itemArray at the index the pair originated from.this is probably too late but, you could also use some modified version of the code below in ES6 style. This code is for arrays like:The actual operation :The actual operation in ES5 :Should result in arrayToBeSorted = [3,5]Does not destroy the reference array.I would use an intermediary object (itemsMap), thus avoiding quadratic complexity:See http://jsfiddle.net/eUskE/http://jsfiddle.net/s7b2P/Resulting order: Bob,Jason,Henry,Thomas,Anne,AndrewThis is what I was looking for and I did for sorting an Array of Arrays based on another Array:I had to do this for a JSON payload I receive from an API, but it wasn't in the order I wanted it.Array to be the reference array, the one you want the second array sorted by:I did these as objects because these will have other properties eventually.  Created array:Used this with result set from database.  I don't know how efficient it is but with the few number of columns I used, it worked fine.Why not something likeThe map function may not be available on all versions of JavascriptThis solution will append the objects at the end if the sorting key is not present in reference arrayFor getting a new ordered array, you could take a Map and collect all items with the wanted key in an array and map the wanted ordered keys by taking sifted element of the wanted group.this should works:You could try this method. ES6 More examples with different input arraysUse the $.inArray() method from jQuery. You then could do something like thisUse intersection of two arrays.Ex: => ['a', 'b', 'e']if 'z and 's' are out of range of first array,  append it at the end of resultYou can do something like this:You can test it out here.Note: this assumes the arrays you pass in are equivalent in size, you'd need to add some additional checks if this may not be the case.refer linkrefer

JavaScript - get the first day of the week from current date

INs

[JavaScript - get the first day of the week from current date](https://stackoverflow.com/questions/4156434/javascript-get-the-first-day-of-the-week-from-current-date)

I need the fastest way to get the first day of the week. For example: today is the 11th of November, and a Thursday; and I want the first day of this week, which is the 8th of November, and a Monday. I need the fastest method for MongoDB map function, any ideas? 

2010-11-11 16:06:27Z

I need the fastest way to get the first day of the week. For example: today is the 11th of November, and a Thursday; and I want the first day of this week, which is the 8th of November, and a Monday. I need the fastest method for MongoDB map function, any ideas? Using the getDay method of Date objects, you can know the number of day of the week (being 0=Sunday, 1=Monday, etc).You can then subtract that number of days plus one, for example:Not sure how it compares for performance, but this works.Or as a function:Check out Date.jsCMS's answer is correct but assumes that Monday is the first day of the week.

Chandler Zwolle's answer is correct but fiddles with the Date prototype.

Other answers that play with hour/minutes/seconds/milliseconds are wrong.The function below is correct and takes a date as first parameter and the desired first day of the week as second parameter (0 for Sunday, 1 for Monday, etc.). Note: the hour, minutes and seconds are set to 0 to have the beginning of the day.This will work well.I'm using thisThis function uses the current millisecond time to subtract the current week, and then subtracts one more week if the current date is on a monday (javascript counts from sunday).I have tested it when week spans over from one month to another (and also years), and it seems to work properly.Good evening,I prefer to just have a simple extension method:You'll notice this actually utilizes another extension method that I use:Now, if your weeks start on Sunday, pass in a "0" for the pStartOfWeek parameter, like so: var mThisSunday = new Date().startOfWeek(0);Similarly, if your weeks start on Monday, pass in a "1" for the pStartOfWeek parameter:var mThisMonday = new Date().startOfWeek(1);Regards,setDate() has issues with month boundaries that are noted in comments above. A clean workaround is to find the date difference using epoch timestamps rather than the (surprisingly counterintuitive) methods on the Date object. I.e.Here is my solution:Now you can pick date by returned array index.Check out: moment.jsExample:Bonus: works with node.js tooTo get the date of the first day of the week from today, you can use something like so:Or to get the last day of the week from today:* Depending on your time zone, the beginning of the week doesn't has to start on Sunday, it can start on Friday, Saturday, Monday or any other day your machine is set to. Those methods will account for that.* You can also format it using toISOString method like so: getLastSunday().toISOString()

How can I strip all punctuation from a string in JavaScript using regex?

Quentin Fisk

[How can I strip all punctuation from a string in JavaScript using regex?](https://stackoverflow.com/questions/4328500/how-can-i-strip-all-punctuation-from-a-string-in-javascript-using-regex)

If I have a string with any type of non-alphanumeric character in it: How would I get a no-punctuation version of it in JavaScript:

2010-12-01 19:58:27Z

If I have a string with any type of non-alphanumeric character in it: How would I get a no-punctuation version of it in JavaScript:If you want to remove specific punctuation from a string, it will probably be best to explicitly remove exactly what you want likeDoing the above still doesn't return the string as you have specified it. If you want to remove any extra spaces that were left over from removing crazy punctuation, then you are going to want to do something likeMy full example:Results of running code in firebug console:Removes everything except alphanumeric characters and whitespace, then collapses multiple adjacent characters to single spaces.Detailed explanation:Here are the standard punctuation characters for US-ASCII: !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~For Unicode punctuation (such as curly quotes, em-dashes, etc), you can easily match on specific block ranges. The General Punctuation block is \u2000-\u206F, and the Supplemental Punctuation block is \u2E00-\u2E7F.Put together, and properly escaped, you get the following RegExp:That should match pretty much any punctuation you encounter. So, to answer the original question:US-ASCII source: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#posixUnicode source: http://kourge.net/projects/regexp-unicode-block/[^A-Za-z0-9\s]/g should match all punctuation but keep the spaces.

So you can use .replace(/\s{2,}/g, " ") to replace extra spaces if you need to do so. You can test the regex in http://rubular.com/Update: Will only work if the input is ANSI English.I ran across the same issue, this solution did the trick and was very readable: Result: The trick was to create a negated set. This means that it matches anything that is not within the set i.e. [^abc] - not a, b or c\W is any non-word, so [^\W]+ will negate anything that is not a word char. By adding in the _ (underscore) you can negate that as well. Make it apply globally /g, then you can run any string through it and clear out the punctuation: Nice and clean ;)I'll just put it here for others.Match all punctuation chars for for all languages:Constructed from Unicode punctuation category and added some common keyboard symbols like $ and brackets and \-=_http://www.fileformat.info/info/unicode/category/Po/list.htmbasic replace:added \s as spaceadded ^ to invert patternt to match not punctuation but the words them selvesfor language like Hebrew maybe to remove " ' the single and the double quote. and do more thinking on it.using this script:step 1: select in Firefox holding control a column of U+1234 numbers and copy it, do not copy U+12456 they replace Englishstep 2 (i did in chrome)find some textarea and paste it into it then rightclick and click inspect.  then you can access the selected element with $0.step 3 copied over the first letters the ascii as separate chars not ranges because someone might add or remove individual charsIn a Unicode-aware language, the Unicode Punctuation character property is \p{P} — which you can usually abbreviate \pP and sometimes expand to \p{Punctuation} for readability. Are you using a Perl Compatible Regular Expression library?If you want to remove punctuation from any string you should use the P Unicode class.But, because classes are not accepted in the JavaScript RegEx, you could try this RegEx that should match all the punctuation. It matches the following categories: Pc Pd Pe Pf Pi Po Ps Sc Sk Sm So GeneralPunctuation SupplementalPunctuation CJKSymbolsAndPunctuation CuneiformNumbersAndPunctuation.I created it using this online tool that generates Regular Expressions specifically for JavaScript.

That's the code to reach your goal:For en-US ( American English ) strings this should suffice:Be aware that if you support UTF-8 and characters like chinese/russian and all, this will replace them as well, so you really have to specify what you want.if you are using lodash This Example As per Wikipedia's list of punctuations I had to build the following regex which detects punctuations :[\.’'\[\](){}⟨⟩:,،、‒–—―…!.‹›«»‐\-?‘’「」'";/⁄·\&*@\•^†‡°」¡¿※#№÷×ºª%‰+−=‱¶′″‴§~_|‖¦©℗®℠™¤₳฿₵¢₡₢$₫₯֏₠€ƒ₣₲₴₭₺₾ℳ₥₦₧₱₰£៛₽₹₨₪৳₸₮₩¥]If you want to retain only alphabets and spaces, you can do:It depends on what you are trying to return. I used this recently:

Limiting number of displayed results when using ngRepeat

Captain Stack

[Limiting number of displayed results when using ngRepeat](https://stackoverflow.com/questions/17643361/limiting-number-of-displayed-results-when-using-ngrepeat)

I find the AngularJS tutorials hard to understand; this one is walking me through building an app that displays phones. I’m on step 5 and I thought as an experiment I’d try to allow users to specify how many they’d like to be shown. The view looks like this:I’ve added this line where users can enter how many results they want shown:Here’s my controller:The important line is:I can hard-code in a number to represent how many phones should be shown. If I put 5 in, 5 will be shown. All I want to do is read the number in that input from the view, and put that in the data.splice line. I’ve tried with and without quotes, and neither work. How do I do this?

2013-07-14 20:18:32Z

I find the AngularJS tutorials hard to understand; this one is walking me through building an app that displays phones. I’m on step 5 and I thought as an experiment I’d try to allow users to specify how many they’d like to be shown. The view looks like this:I’ve added this line where users can enter how many results they want shown:Here’s my controller:The important line is:I can hard-code in a number to represent how many phones should be shown. If I put 5 in, 5 will be shown. All I want to do is read the number in that input from the view, and put that in the data.splice line. I’ve tried with and without quotes, and neither work. How do I do this?Slightly more "Angular way" would be to use the straightforward limitTo filter, as natively provided by Angular:PLUNKERA little late to the party, but this worked for me. Hopefully someone else finds it useful.store all your data initiallyEDIT had accidentally put the watch outside the controller it should have been inside.here is anaother way to limit your filter on html, for example I want to display 3 list at time than i will use limitTo:3This works better in my case if you have object or multi-dimensional array. It will shows only first items, other will be just ignored in loop.Change 5 on what you want.Use limitTo filter to display a limited number of results in ng-repeat.Another (and I think better) way to achieve this is to actually intercept the data. limitTo is okay but what if you're limiting to 10 when your array actually contains thousands?When calling my service I simply did this:This limits what is sent to the view, so should be much better for performance than doing this on the front-end.

simulate background-size:cover on <video> or <img>

seron

[simulate background-size:cover on <video> or <img>](https://stackoverflow.com/questions/10797632/simulate-background-sizecover-on-video-or-img)

How can I simulate the functionality of background-size:cover on an html element like <video> or <img>?I'd like it to work like

2012-05-29 10:48:57Z

How can I simulate the functionality of background-size:cover on an html element like <video> or <img>?I'd like it to work likeThis is something I pulled my hair out over for a while, but I came across a great solution that doesn't use any script, and can achieve a perfect cover simulation on video with 5 lines of CSS (9 if you count selectors and brackets). This has 0 edge-cases in which it doesn't work perfectly, short of CSS3-compatibility.You can see an example hereThe problem with Timothy's solution, is that it doesn't handle scaling correctly. If the surrounding element is smaller than the video file, it isn't scaled down. Even if you give the video tag a tiny initial size, like 16px by 9px, auto ends up forcing it to a minimum of its native file-size. With the current top-voted solution on this page, it was impossible for me to have the video file scale down resulting in a drastic zoom effect.If the aspect ratio of your video is known, however, such as 16:9, you can do the following:If the video's parent element is set to cover the entire page (such as position: fixed; width: 100%; height: 100vh;), then the video will, too.If you want the video centered as well, you can use the surefire centering approach:Of course, vw, vh, and transform are CSS3, so if you need compatibility with much older browsers, you'll need to use script. Using background cover is fine for images, and so is width 100%. These are not optimal for <video>, and these answers are overly complicated. You do not need jQuery or JavaScript to accomplish a full width video background.Keep in mind that my code will not cover a background completely with a video like cover will, but instead it will make the video as big as it needs to be to maintain aspect ratio and still cover the whole background. Any excess video will bleed off the page edge, which sides depend on where you anchor the video.         The answer is quite simple.Just use this HTML5 video code, or something along these lines: (test in Full Page)The min-height and min-width will allow the video to maintain the aspect ratio of the video, which is usually the aspect ratio of any normal browser at a normal resolution. Any excess video bleeds off the side of the page.For some browsers you can usehttp://caniuse.com/object-fitHere's how I did this. A working example is in this jsFiddle.The other answers were good but they involve javascript or they doesn't center the video horizontally AND vertically.You can use this full CSS solution to have a video that simulate the background-size: cover property:M-Pixel's solution is great in that it solves the scaling problem of Timothy's answer (the video will scale up but not down, so if your video is really large there are good chances you will only see a small zoomed in part of it). However, that solution is based on false assumptions related to the size of the video container, namely that it is necessarily 100% of the viewport's width and height. I have found a few cases where it didn't work for me, so I decided to tackle the problem myself, and I believe I came up with the ultimate solution.HTMLCSSIt is also based on the ratio of the video, so if your video has a ratio other than 16 / 9 you will want to change the padding-bottom %. Other than that, it works out of the box. Tested in IE9+, Safari 9.0.1, Chrome 46, and Firefox 41.Since I posted this answer I've written a small CSS module to simulate both background-size: cover and background-size: contain on <video> elements: http://codepen.io/benface/pen/NNdBMjIt supports different alignments for the video (similar to background-position). Also note that the contain implementation is not perfect. Unlike background-size: contain, it won't scale the video past its actual size if the container's width and height are bigger, but I think it can still be useful in some cases. I've also added special fill-width and fill-height classes that you can use together with contain to get a special mix of contain and cover... try it out, and feel free to improve it!Based on Daniel de Wit's answer and comments, I searched a bit more. Thanks to him for the solution.The solution is to use object-fit: cover; which has a great support (every modern browser support it). If you really want to support IE, you can use a polyfill like object-fit-images or object-fit.Demos :and with a parent:object-fit: cover is the best answer with this IE, Safari polyfill.https://github.com/constancecchen/object-fit-polyfillIt is supporting img, video and picture elements.CSS and little js can make the video cover the background and horizontally centered.CSS:JS: (bind this with window resize and call once seperately)Right after our long comment section, I think this is what you're looking for, it's jQuery based:HTML:JS:CSS:​The code above is using the browsers width and height if you where doing this within a div, you would have to change it to something like this:For Div:HTML:JS:CSS:I should also state that I've only tested this is Google Chrome... here is a jsfiddle:

http://jsfiddle.net/ADCKk/The top answer doesn't scale down the video when you're at browser widths of less than your video's width. Try using this CSS (with #bgvid being your video's id):i'm gunna post this solution as well, since i had this problem but the other solutions did not work for my situation...i think to properly simulate the background-size:cover; css property on an element instead of an elements background-image property, you'd have to compare the images aspect ratio to the current windows aspect ratio, so no matter what size (and also in case the image is taller than wider) the window is the element is filling the window (and also centering it, though i don't know if that was a requirement)....using an image, just for simplicity's sake, i'm sure a video element would work fine too.first get the elements aspect ratio (once it's loaded), then attach the window resize handler, trigger it once for initial sizing:then in your resize handler you should first determine whether to fill width or fill height by comparing the window's current aspect ratio to the image's original aspect ratio.}This approach just uses css and html. You can actually stack a divs below the video easily. It is cover but not centered while you resize.HTML:  CCS:@Hidden HobbesYou opened a bounty on this question for a CSS only solution, so I will give it a try. My solution to a problem like this is to use a fixed ratio to decide the height and width of the video. I usually use Bootstrap, but I extracted the necessary CSS from there to make it work without. This is a code I have used earlier to among other things center an embeded video with the correct ratio. It should work for <video> and <img> elements too It's the top one that is relevant here, but I gave you the other two as well since I already had them laying around. Best of luck! :)jsfiddle fullscreen exampleTo answer the comment from weotch that Timothy Ryan Carpenter's answer doesn't account for cover's centering of the background, I offer this quick CSS fix:CSS:Adding these two lines will center any element. Even better, all browsers that can handle HTML5 video also support CSS3 transformations, so this will always work.The complete CSS looks like this.I'd have commented directly on Timothy's answer, but I don't have enough reputation to do so.Guys I have a better solution its short and works perfectly to me. I used it to video. And its perfectly emulates the cover option in css.JavascriptIf you flip the if, else you will get contain.And here is the css. (You don't need to use it if you don't want center positioning, the parent div must be "position:relative")CSSI just solved this and wanted to share. This works with Bootstrap 4. It works with img but I didn't test it with video. Here is the HAML and SCSSOld question, but in case anyone sees this, the best answer in my opinion is to convert the video into an animated GIF. This gives you much more control and you can just treat it like an image. It's also the only way for it to work on mobile, since you can't autoplay videos. I know the question is asking to do it in an <img> tag, but I don't really see the downside of using a <div> and doing background-size: cover

AngularJS: Understanding design pattern

Artem Platonov

[AngularJS: Understanding design pattern](https://stackoverflow.com/questions/20286917/angularjs-understanding-design-pattern)

In the context of this post by Igor Minar, lead of AngularJS: Are there any recommendations or guidelines for implementing AngularJS MVW (Model-View-Whatever) design pattern in client-side applications?

2013-11-29 13:27:37Z

In the context of this post by Igor Minar, lead of AngularJS: Are there any recommendations or guidelines for implementing AngularJS MVW (Model-View-Whatever) design pattern in client-side applications?Thanks to a huge amount of valuable sources I've got some general recommendations for implementing components in AngularJS apps:Treat scope as read-only in templates and write-only in controllers. The purpose of the scope is to refer to model, not to be the model.When doing bidirectional binding (ng-model) make sure you don't bind directly to the scope properties.Model in AngularJS is a singleton defined by service.Model provides an excellent way to separate data and display.Models are prime candidates for unit testing, as they typically have exactly one dependency (some form of event emitter, in common case the $rootScope) and contain highly testable domain logic.As model should encapsulate some logic in terms of data and state, it should architecturally restrict access to its members thus we can guarantee loose coupling.The way to do it in AngularJS application is to define it using factory service type. This will allow us to define private properties and methods very easy and also return publically accessible ones in single place that will make it really readable for developer.An example:Try to avoid having a factory that returns a new able function as this begins to break down dependency injection and the library will behave awkwardly, especially for third parties.A better way to accomplish the same thing is to use the factory as an API to return a collection of objects with getter and setter methods attached to them.In general try to avoid such situations and design your models properly thus it can be injected into controller and used in your view. In particular case some methods require global accessibility within application.

To make it possible you can define ‘common’ property in $rootScope and bind it to commonModel during application bootstrap:All your global methods will live within ‘common’ property. This is some kind of namespace.But do not define any methods directly in your $rootScope. This can lead to unexpected behavior when used with ngModel directive within your view scope, generally littering your scope and leads to scope methods overriding issues.Resource lets you interact with different data sources. Should be implemented using single-responsibility-principle.In particular case it is a reusable proxy to HTTP/JSON endpoints.Resources are injected in models and provide possibility to send/retrieve data.A factory which creates a resource object that lets you interact with RESTful server-side data sources.The returned resource object has action methods which provide high-level behaviors without the need to interact with the low level $http service.Both model and resource are services.Services are unassociated, loosely coupled units of functionality that are self-contained.Services are a feature that Angular brings to client-side web apps from the server side, where services have been commonly used for a long time.Services in Angular apps are substitutable objects that are wired together using dependency injection.Angular comes with different types of services. Each one with its own use cases. Please read Understanding Service Types for details.Try to consider main principles of service architecture in your application.In general according to Web Services Glossary:In general client side of the application is splitted into modules. Each module should be testable as a unit.Try to define modules depending on feature/functionality or view, not by type. 

See Misko’s presentation for details.Module components may be conventionally grouped by types such as controllers, models, views, filters, directives etc.But module itself remains reusable, transferable and testable.It is also much easier for developers to find some parts of code and all its dependencies. Please refer to Code Organization in Large AngularJS and JavaScript Applications for details.An example of folders structuring:Good example of angular application structuring is implemented by angular-app - https://github.com/angular-app/angular-app/tree/master/client/srcThis is also considered by modern application generators - https://github.com/yeoman/generator-angular/issues/109I believe Igor's take on this, as seen in the quote you have provided, is just the iceberg tip of a far greater problem.MVC and its derivatives (MVP, PM, MVVM) are all good and dandy within a single agent, but  a server-client architecture is for all purposes a two-agent system, and people are often so obsessed with these patterns that they forget that the problem at hand is far more complex. By trying to adhere to these principles they actually end up with a flawed architecture.Let's do this bit by bit.Within Angular context, the view is the DOM. The guidelines are:Do:Don't:As tempting, short, and harmless this looks:It pretty much signify any developer that now to understand how the system work they need to inspect both the Javascript files, and the HTML ones.Do:Don't:The reason for the last guideline is that controllers are sisters to views, not entities; nor they are reusable.You could argue that directives are reusable, but directives too are sisters to views (DOM) - they were never intended to correspond to entities.Sure, sometimes views represent entities, but that's a rather specific case.In other words, controllers shall focus on presentation - if you throw business logic in, not only you are likely to end up with an inflated, little-manageable controller, but you also violate the separation of concern principle.As such, controllers in Angular are really more of Presentation Model or MVVM.And so, if controllers shouldn't deal with business logic, who should?Unless you are writing an offline web application, or an application that is terribly simple (few entities), you client model is highly likely to be:In traditional MCV, the model is the only thing being persisted. Whenever we talk about models, these must be persisted at some point. Your client may manipulate models at will, but until the roundtrip to the server was completed successfully, the job ain't done.The two points above should serve as a caution - the model your client holds can only involve a partial, mostly simple business logic.As such, it is perhaps wise, within client context, to use lowercase M - so it's really mVC, mVP, and mVVm. The big M is for the server.Perhaps one of the most important concepts about business models is that you can subdivide them to 2 types (I omit the third view-business one as that's a story for another day):It is important to stress that both of these within a client context are not 'real' business logic - they only deal with the portion of it that is important for the client. Application logic (not domain logic) should have the responsibility of facilitating communication with the server and most user interaction; while the domain logic is largely small-scale, entity-specific, and presentation-driven.The question still remains - where do you throw them within an angular application?All these MVW frameworks use 3 layers:But there are two fundamental issues with this when it comes to clients:An alternative to this strategy is the 4 layer strategy:The real deal here is the application business rules layer (Use cases), which often goes amiss on clients.This layer is realised by interactors (Uncle Bob), which is pretty much what Martin Fowler calls an operation script service layer.Consider the following web application:A few things should happen now:Where do we throw all of this?If your architecture involves a controller that calls $resource, all of this will happen within the controller. But there is a better strategy.The following diagram shows how the problem above can be solve by adding another application logic layer in Angular clients:So we add a layer between controller to $resource, this layer (lets call it interactor):And so, with the requirements of the concrete example above:A minor issue comparing to the great advices in Artem's answer, but in terms of code readability, I found best to define the API completely inside the return object, to minimize going back and forth in code to look wheverer variables are defined: If the return object becomes looking "too crowded", that is a sign that the Service is doing too much.AngularJS doest not implement MVC in traditional way, rather it implements something closer to MVVM(Model-View-ViewModel), ViewModel can also be referred as binder(in angular case it can be $scope).

The Model-->  As we know model in angular can be just plain old JS objects or the data in our applicationThe View--> the view in angularJS is the HTML which has been parsed and compiled by angularJS by applying the directives or instructions or bindings, Main point here is in angular the input is not just the plain HTML string(innerHTML), rather it is DOM created by browser.The ViewModel--> ViewModel is actually the binder/bridge between your view and model in angularJS case it is $scope, to initialize and augment the $scope we use Controller.If i wanna summarize the answer: In angularJS application $scope has reference to the data, Controller controls the behaviour, and View handles the layout by interacting with controller to behave accordingly.To be crisp about the question, Angular uses different design patterns which we already encountered in our regular programming.

1) When we registers our controllers or directives, factory, services etc with respect to our module. Here it is hiding the data from the global space. Which is Module pattern.

2) When angular uses its dirty checking for comparing the scope variables, here it uses Observer Pattern.

3) All the parent child scopes in our controllers uses Prototypal pattern.

4) In case of injecting the services it uses Factory Pattern.Overall it uses different known design patterns to solve the problems.

difference between offsetHeight and clientHeight

steve

[difference between offsetHeight and clientHeight](https://stackoverflow.com/questions/4106538/difference-between-offsetheight-and-clientheight)

In the javascript dom  - what is the difference between offsetHeight and clientHeight of an element?

2010-11-05 14:00:38Z

In the javascript dom  - what is the difference between offsetHeight and clientHeight of an element?clientHeight:offsetHeight:So, offsetHeight includes scrollbar and border, clientHeight doesn't.The answer from Oded is the theory. But the theory and the reality are not always the same, at least not for the <BODY> or the <HTML> elements which may be important for scrolling operations in javascript.Microsoft has a nice image in the MSDN:If you have a HTML page which shows a vertical scrollbar one would expect that either the <BODY> or the <HTML> element has a ScrollHeight geater than OffsetHeight as this image shows. This is true for all older versions of Internet Explorer.But it is not true for Internet Explorer 11 and not for Firefox 36.

At least in these browsers OffsetHeight is nearly the same as ScrollHeight which is wrong.And while OffsetHeight may be wrong, ClientHeight is always correct.Try the following code on different browsers and you will see:While older Internet Explorer shows correctly:The output from Firefox and Internet Explorer 11 is:which shows clearly that offsetHeight is wrong here. OffsetHeight and ClientHeight should differ only a few pixels or be the same.Please note that ClientHeight and OffsetHeight may also differ extremely for elements that are not visible like for example a <FORM> where OffsetHeight may be the real size of the FORM while ClientHeight may be zero.

When should I use `return` in es6 Arrow Functions?

Jess Telford

[When should I use `return` in es6 Arrow Functions?](https://stackoverflow.com/questions/28889450/when-should-i-use-return-in-es6-arrow-functions)

The new es6 arrow functions say return is implicit under some circumstances:In what cases do I need to use return with es6 arrow functions?

2015-03-05 22:56:42Z

The new es6 arrow functions say return is implicit under some circumstances:In what cases do I need to use return with es6 arrow functions?Jackson has partially answered this in a similar question:I would add to this the definition of a block:Examples:

I understand this rule-of-thumb ... Candidates are:For other operations (more than one-liners that require a block, return has to be explicitThere's another case here.When writing a functional component in React, you can use parentheses to wrap implicitly returned JSX.Arrow functions allow you to have an implicit return: values are returned without having to use the return keyword.It works when there is a on-line statement in the function body:Another example, returning an object (remember to wrap the curly brackets in parentheses to avoid it being considered the wrapping function body brackets):Here's another case that gave me some trouble. Here we define a function returning an anonymous function.The "tricky" bit is that the function body for the outer function (the part begining with (bar) => ...) visually looks like a "block", but it's not. Since it's not, implicit return kicks in.Here's how wrap would execute:The way I unpacked this to make sure I understood it was to "unarrowify" the functions.Here's the semantic equivalent of the first code block, simply making the body of wrap() do an explicit return. This definition produces the same results as above.  This is where the dots connect. Compare the first code block above with the one below, and it's clear that an arrow function itself is treated as an expression, not a block, and has the implied return.The fully unarrowified version of wrap would be like this, which while not as compact as the fat arrowed up version, seems a lot easier to comprehend.In the end, for others that may have to read my code, and future me, I think I'd prefer to go the non arrow version which can be comprehended visually at first glance, rather than the arrow one which takes a fair bit of thought (and in my case experimentation) to grok.

Clone Object without reference javascript [duplicate]

EnZo

[Clone Object without reference javascript [duplicate]](https://stackoverflow.com/questions/12690107/clone-object-without-reference-javascript)

I have a big object with much data. And i want to clone this in other variable. When i set some param of the instance B has the same result in the original object:My output should be 25 30 40.

Any ideas?EDITThanks Everyone. I change the code of dystroy and this is my result:

2012-10-02 12:19:53Z

I have a big object with much data. And i want to clone this in other variable. When i set some param of the instance B has the same result in the original object:My output should be 25 30 40.

Any ideas?EDITThanks Everyone. I change the code of dystroy and this is my result:If you use an = statement to assign a value to a var with an object on the right side, javascript will not copy but reference the object.You can use lodash's clone methodOr lodash's cloneDeep method if your object has multiple object levelsOr lodash's merge method if you mean to extend the source objectOr you can use jQuerys extend method:Here is jQuery 1.11 extend method's source code :While this isn't cloning, one simple way to get your result is to use the original object as the prototype of a new one.You can do this using Object.create:This creates a new object in A and B that inherits from obj. This means that you can add properties without affecting the original.To support legacy implementations, you can create a (partial) shim that will work for this simple task.It doesn't emulate all the functionality  of Object.create, but it'll fit your needs here.You could define a clone function.I use this one :It doesn't copy the prototype, functions, and so on. But you should adapt it (and maybe simplify it) for you own need.A and B reference the same object, so A.a and B.a reference the same property of the same object.Here's a "copy" function that may do the job, it can do both shallow and deep clones. Note the caveats. It copies all enumerable properties of an object (not inherited properties), including those with falsey values (I don't understand why other approaches ignore them), it also doesn't copy non–existent properties of sparse arrays. There is no general copy or clone function because there are many different ideas on what a copy or clone should do in every case. Most rule out host objects, or anything other than Objects or Arrays. This one also copies primitives. What should happen with functions?So have a look at the following, it's a slightly different approach to others.

Resetting a setTimeout

Jason

[Resetting a setTimeout](https://stackoverflow.com/questions/1472705/resetting-a-settimeout)

I have the following:How can I, via a .click function, reset the counter midway through the countdown?

2009-09-24 16:12:11Z

I have the following:How can I, via a .click function, reset the counter midway through the countdown?You can store a reference to that timeout, and then call clearTimeout on that reference.clearTimeout() and feed the reference of the setTimeout, which will be a number. Then re-invoke it:In this example, if you don't click on the body element in 5 seconds the background color will be black.Reference: Note: setTimeout and clearTimeout are not ECMAScript native methods, but Javascript methods of the global window namespace.You will have to remember the timeout "Timer", cancel it, then restart it:Something along those lines!This timer will fire a "Hello" alertbox after 30 seconds. However, everytime you click the reset timer button it clears the timerHandle then re-sets it again. Once it's fired, the game ends.To reset the timer, you would need to set and clear out the timer variablei know this is an old thread but i came up with this todayand you invoke using

Get the class name of ES6 class instance

Estus Flask

[Get the class name of ES6 class instance](https://stackoverflow.com/questions/29310530/get-the-class-name-of-es6-class-instance)

Are there any 'harmonious' ways to get the class name from ES6 class instance? Other thanCurrently I'm counting on Traceur implementation. And it seems that Babel has a polyfill for Function.name while Traceur doesn't.To sum it all up: there was no other way in ES6/ES2015/Harmony, and nothing is expected ATM in ES.Next.It may provide useful patterns for unminified server-side applications but is unwanted in applications meant for browser/desktop/mobile.Babel uses core-js to polyfill Function.name, it should be loaded manually for Traceur and TypeScript applications as appropriate.

2015-03-27 21:31:28Z

Are there any 'harmonious' ways to get the class name from ES6 class instance? Other thanCurrently I'm counting on Traceur implementation. And it seems that Babel has a polyfill for Function.name while Traceur doesn't.To sum it all up: there was no other way in ES6/ES2015/Harmony, and nothing is expected ATM in ES.Next.It may provide useful patterns for unminified server-side applications but is unwanted in applications meant for browser/desktop/mobile.Babel uses core-js to polyfill Function.name, it should be loaded manually for Traceur and TypeScript applications as appropriate.someClassInstance.constructor.name is exactly the correct way to do this. Transpilers may not support this, but it is the standard way per the specification. (The name property of functions declared via ClassDeclaration productions is set in 14.5.15, step 6.)As @Domenic says, use someClassInstance.constructor.name. @Esteban mentions in the comments that Thus, to access the class name statically, do the following (this works with my Babel version BTW. According to the comments on @Domenic your mileage may vary).UpdateBabel was fine, but uglify/minification did end up causing me problems. I am making a game, and am creating a hash of pooled Sprite resources (where the key is the  function name). After minification, every function/class was named t. This kills the hash. I am using Gulp in this project, and after reading the gulp-uglify docs I discovered there is a parameter to prevent this local variable/function name mangling from happening. So, in my gulpfile I changed.pipe($.uglify()) to .pipe($.uglify({ mangle: false }))There is a trade-off of performance vs readability here. Not mangling the names will result in a (slightly) larger build file (more network resources) and potentially slower code execution (citation needed - may be BS). On the other hand, if I kept it the same I would have to manually define getClassName on every ES6 class - at a static and instance level. No thanks!UpdateAfter the discussion in the comments, it seems like avoiding the .name convention in favor of defining those functions is a good paradigm. It only takes a few lines of code, and will allow full minification and generality of your code (if used in a library). So I guess I change my mind and will manually define getClassName on my classes. Thanks @estus!. Getter/Setters are usually a good idea compared to direct variable access anyways, especially in a client based application.Previous answers explained that someClassInstance.constructor.name works just fine, but if you need to programmatically convert class name into a string and don't want to create an instance just for that, remember that:And, since every function has a name property, another nice way to get a string with your class name is to just do:What follows is a good example of why this is useful.As the MDN documentation teaches us, this is how you load a web component:Where YourComponent is a class extending from HTMLElement. Since it is considered good practice to name your component's class after the component tag itself, it would be nice to write a helper function that all your components could use to register themselves. So here's is that function:So all you need to do is:Which is nice because it's less error-prone than writing the component tag yourself. To wrap it up, this is the upperCamelCaseToSnakeCase() function:

Does return stop a loop?

frenchie

[Does return stop a loop?](https://stackoverflow.com/questions/11714503/does-return-stop-a-loop)

Suppose I have a loop like this:Quick question: does the return stop the execution of the loop in and of itself?

2012-07-30 01:39:49Z

Suppose I have a loop like this:Quick question: does the return stop the execution of the loop in and of itself?Yes, return stops execution and exits the function. return always** exits its function immediately, with no further execution if it's inside a for loop.It is easily verified for yourself:** Notes: See this other answer about the special case of try/catch/finally  and this answer about how forEach loops has its own function scope will not break out of the containing function.In most cases (including this one), return will exit immediately.  However, if the return is in a try block with an accompanying finally block, the finally always executes and can "override" the return in the try.The return statement stops a loop only if it's inside the function. Otherwise, you will get this error:Yes, once the return statement is executed, the entire function is exited at that very point.Just imagine what would happen if it did not and continued looping, and executing that return statement each time? It would invalidate it's meaning of returning a value when you think about it.This code will exit the loop after the first iteration in a for of loop:the below code will jump on the condition and continue on a for of loop:The answer is yes, if you write return statement the controls goes back to to the caller method immediately. 

With an exception of finally block, which gets executed after the return statement.and finally can also override the value you have returned, if you return inside of finally block.

LINK: Try-catch-finally-return clarificationReturn Statement definition as per: Java Docs:MSDN Documentation: Wikipedia:"return" does exit the function but if you want to return large sums of data, you can store it in an array and then return it instead of trying to returning each piece of data 1 by 1 in the loop.

How to enable CORS in AngularJs

ankitr

[How to enable CORS in AngularJs](https://stackoverflow.com/questions/23823010/how-to-enable-cors-in-angularjs)

I have created a demo using JavaScript for Flickr photo search API. 

Now I am converting it to the AngularJs.

I have searched on internet and found below configuration. Configuration:Service:Controller:But still I got the same error.

Here are some links I tried:XMLHttpRequest cannot load URL. Origin not allowed by Access-Control-Allow-Originhttp://goo.gl/JuS5B1

2014-05-23 07:05:39Z

I have created a demo using JavaScript for Flickr photo search API. 

Now I am converting it to the AngularJs.

I have searched on internet and found below configuration. Configuration:Service:Controller:But still I got the same error.

Here are some links I tried:XMLHttpRequest cannot load URL. Origin not allowed by Access-Control-Allow-Originhttp://goo.gl/JuS5B1You don't. The server you are making the request to has to implement CORS to grant JavaScript from your website access. Your JavaScript can't grant itself permission to access another website.I had a similar problem and for me it boiled down to adding the following HTTP headers at the response of the receiving end:You may prefer not to use the * at the end, but only the domainname of the host sending the data. Like *.example.comBut this is only feasible when you have access to the configuration of the server.Try using the resource service to consume flickr jsonp:Template:This issue occurs because of web application security model policy that is Same Origin Policy Under the policy, a web browser permits scripts contained in a first web page to access data in a second web page, but only if both web pages have the same origin. That means requester must match the exact host, protocol, and port of requesting site.We have multiple options to over come this CORS header issue.I encountered a similar problem like this, problem was with the backend . I was using node server(Express). I had a get request from the frontend(angular) as shown belowBut it gave the following errorThis is the backend code written using express without the headersAfter adding a header to the method problem was solvedYou can get more details about Enabling CORS on Node JSAnswered by myself. CORS angular js + restEasy on POSTWell finally I came to this workaround:

The reason it worked with IE is because IE sends directly a POST instead of first a preflight request to ask for permission.

But I still don't know why the filter wasn't able to manage an OPTIONS request and sends by default headers that aren't described in the filter (seems like an override for that only case ... maybe a restEasy thing ...)So I created an OPTIONS path in my rest service that rewrites the reponse and includes the headers in the response using response headerI'm still looking for the clean way to do it if anybody faced this before.Apache/HTTPD tends to be around in most enterprises or if you're using Centos/etc at home.  So, if you have that around, you can do a proxy very easily to add the necessary CORS headers.I have a blog post on this here as I suffered with it quite a few times recently.  But the important bit is just adding this to your /etc/httpd/conf/httpd.conf file and ensuring you are already doing "Listen 80":This ensures that all requests to URLs under your-server-ip:80/SomePath route to http://target-ip:8080/SomePath (the API without CORS support) and that they return with the correct Access-Control-Allow-Origin header to allow them to work with your web-app.Of course you can change the ports and target the whole server rather than SomePath if you like.This answer outlines two ways to workaround APIs that don't support CORS:One workaround is to use a CORS PROXY:For more information, seeThe DEMO on PLNKR    For more information, seewe can enable CORS in the frontend by using the ngResourse module.

    But most importantly, we should have this piece of code while making the ajax 

    request in the controller,Also, you must add ngResourse CDN in the script part and add as a dependency 

    in the app module.Then use "ngResourse" in the app module dependency sectionvar routerApp = angular.module("routerApp", ["ui.router", 'ngResource']);

Detect all Firefox versions in JS

Mirgorod

[Detect all Firefox versions in JS](https://stackoverflow.com/questions/7000190/detect-all-firefox-versions-in-js)

How to detect Firefox in JavaScript?

I want to detect all versions of Firefox.

2011-08-09 17:21:34Z

How to detect Firefox in JavaScript?

I want to detect all versions of Firefox.This will detect any version of Firefox:more specifically:You may want to consider using feature-detection ala Modernizr, or a related tool, to accomplish what you need.If you'd like to know what is the numeric version of FireFox you can use the following snippet:This script detects all versions of Firefox, for Desktop, from version 1 to 46. It's the third time I've tried to answer this question on StackOverflow because I kept finding new ways to break my script. However, I think it's working now. It's a great exercise to learn about Firefox features and interesting to see how things have evolved. The script can be rewritten with different features, I chose ones I thought would be most useful, I would love for someone else to rewrite with other more useful features and post here, and compare results.I placed the script in a try statement in case the user has any disabled settings in about.config. Otherwise I tested on every version of Firefox and it detects each one. I gave a brief description of what each feature is used for in the comments. I would like to do this for Webkit too but find the documentation not as good. Mozilla has easy to download previous versions and detailed releases.For a long time I have used the alternative:because I don't trust user agent strings. Some bugs are not detectable using feature detection, so detecting the browser is required for some workarounds.Also if you are working around a bug in Gecko, then the bug is probably also in derivatives of Firefox, and this code should work with derivatives too (Do Waterfox and Pale Moon have 'Firefox' in the user agent string?).This works perfect for IE,Firefox and Chrome.here it itthe best solution for me: 

vue.js 2 how to watch store values from vuex

raffffffff

[vue.js 2 how to watch store values from vuex](https://stackoverflow.com/questions/43270159/vue-js-2-how-to-watch-store-values-from-vuex)

I am using vuex and vuejs 2 together.I am new to vuex, I want to watch a store variable change.I want to add the watch function in my vue componentThis is what I have so far:I want to know if there are any changes in the my_stateHow do I watch store.my_state in my vuejs component?

2017-04-07 05:13:22Z

I am using vuex and vuejs 2 together.I am new to vuex, I want to watch a store variable change.I want to add the watch function in my vue componentThis is what I have so far:I want to know if there are any changes in the my_stateHow do I watch store.my_state in my vuejs component?Let's say, for example, that you have a basket of fruits,

and each time you add or remove a fruit from the basket, you

want to (1) display info about fruit count, but you also (2) want to be notified of the count of the fruits in some fancy fashion...fruit-count-component.vuePlease note, that the name of the function in the watch object, must match the name of the function in the computed object. In the example above the name is count.New and old values of a watched property will be passed into watch callback (the count function) as parameters.The basket store could look like this:fruit-basket.jsYou can read more in the following resources:You should not use component's watchers to listen to state change. I recommend you to use getters functions and then map them inside your component.In your store:You should be able to listen to any changes made to your store by using this.myState in your component.https://vuex.vuejs.org/en/getters.html#the-mapgetters-helperAs mentioned above it is not good idea to watch changes directly in storeBut in some very rare cases it may be useful for someone, so i will leave this answer. For others cases, please see @gabriel-robert answerYou can do this through state.$watch. Add this in your created (or where u need this to be executed) method in componentMore details: https://vuex.vuejs.org/api/#watchIt's as simple as:I think the asker wants to use watch with Vuex. This is for all the people that cannot solve their problem with getters and actually really need a watcher, e.g. to talk to non-vue third party stuff (see Vue Watchers on when to use watchers).Vue component's watchers and computed values both also work on computed values. So it's no different with vuex:if it's only about combining local and global state, the mapState's doc also provides an example:Create a Local state of your store variable by watching and setting on value changes.

Such that the local variable changes for form-input v-model does not directly mutate the store variable.The best way to watch store changes is to use mapGetters as Gabriel said.

But there is a case when you can't do it through mapGetters e.g. you want to get something from store using parameter:in that case you can't use mapGetters. You may try to do something like this instead:But unfortunately todoById will be updated only if this.id is changed If you want you component update in such case use this.$store.watch solution provided by Gong. Or handle your component consciously and update this.id when you need to update todoById.You can use a combination of Vuex actions, getters, computed properties and watchers to listen to changes on a Vuex state value.HTML Code:JavaScript Code:See JSFiddle demo.When you want to watch on state level, it can be done this way:if you use typescript then you can :If you simply want to watch a state property and then act within the competent accordingly to the changes of that property then see the example below.In store.js:In this scenario, I am creating a boolean state property that I am going to change in different places in the application like so:Now, if I need to watch that state property in some other component and then change the local property I would write the following in the mounted hook:Firstly, I am setting a watcher on the state property and then in the callback function I use the value of that property to change the localProperty.I hope it helps!You could also subscribe to the store mutations:https://vuex.vuejs.org/api/#subscribeYou can also use mapState in your vue component to direct getting state from store.In your component:Where my_state is a variable from the store.I used this way and it works:store.js:mutations.jsactions.jsgetters.jsAnd in your component where you use state from store:When user submit form, action STORE will be call, after created success, CREATE_SUCCESS mutation is committed after that. Turn createSuccess is true, and in component, watcher will see value has changed and trigger notification.isSuccess should be match with the name you declare in getters.js

Secret copy to clipboard JavaScript function in Chrome and Firefox?

Mike Grace

[Secret copy to clipboard JavaScript function in Chrome and Firefox?](https://stackoverflow.com/questions/4559180/secret-copy-to-clipboard-javascript-function-in-chrome-and-firefox)

UpdateLooks like browsers are starting to support copy natively in JSIn the console windows of both Chrome and Firefox on Mac I can executeand the text gets copied to my clipboard. I have searched SO and Google and can't seem to find anything on this. Browser versions:

JavaScript returned from Chrome console when executing 'copy'Here are 2 screenshots of executing copy function in Chrome console with all chrome extensions disabled

2010-12-30 00:53:26Z

UpdateLooks like browsers are starting to support copy natively in JSIn the console windows of both Chrome and Firefox on Mac I can executeand the text gets copied to my clipboard. I have searched SO and Google and can't seem to find anything on this. Browser versions:

JavaScript returned from Chrome console when executing 'copy'Here are 2 screenshots of executing copy function in Chrome console with all chrome extensions disabledI believe these are predefined Firebug console functions - at least that seems to be the case for Firebug. If you try calling window.copy for instance, you'll get a warning about function not defined, so it's definitely not a browser function, and cannot be used in normal JavaScript files. The following functions also seems to work in the JavaScript console, after playing around with it a bit: Running these in the Chrome console reveals the source behind these functions in the Webkit console: While the Firebug source also defines a list of functions: Here you can see the reference copy command of Chrome Dev tools:

https://developers.google.com/web/tools/chrome-devtools/console/command-line-reference#copyobjectYou shouldn't use this commands on real JS cross-browsers (just for debugging on the console so-to-speak).

How can I let a table's body scroll but keep its head fixed in place?

minty

[How can I let a table's body scroll but keep its head fixed in place?](https://stackoverflow.com/questions/130564/how-can-i-let-a-tables-body-scroll-but-keep-its-head-fixed-in-place)

I am writing a page where I need an HTML table to maintain a set size. I need the headers at the top of the table to stay there at all times but I also need the body of the table to scroll no matter how many rows are added to the table. Think a mini version of excel. This seems like a simple task but almost every solution I have found on the web has some drawback. How can I solve this?

2008-09-24 23:21:48Z

I am writing a page where I need an HTML table to maintain a set size. I need the headers at the top of the table to stay there at all times but I also need the body of the table to scroll no matter how many rows are added to the table. Think a mini version of excel. This seems like a simple task but almost every solution I have found on the web has some drawback. How can I solve this?I had to find the same answer. The best example I found is http://www.cssplay.co.uk/menu/tablescroll.html - I found example #2 worked well for me. You will have to set the height of the inner table with Java Script, the rest is CSS.I found DataTables to be quite flexible. While its default version is based on jquery, there is also an AngularJs plugin.I saw Sean Haddy's excellent solution to a similar question and took the liberty of making some edits:Sean did the heavy lifting, though. Thanks to Matt Burland, too, for pointing out need to support tfoot.Please see for yourself at http://jsfiddle.net/jhfrench/eNP2N/Have you tried using thead and tbody, and setting a fixed height on tbody with overflow:scroll?What are your target browsers?EDIT: It worked well (almost) in firefox - the addition of the vertical scrollbar caused the need for a horizontal scrollbar as well - yuck.  IE just set the height of each td to what I had specifed the height of tbody to be.  Here's the best I could come up with:What you need is :1) have a table body of limited height as scroll occurs only when contents is bigger than the scrolling window. However tbody cannot be sized, and you have to display it as a block to do so:2) Re-sync table header and table body columns widths as making the latter a block made it an unrelated element. The only way to do so is to simulate synchronization by enforcing the same columns width to both. However, since tbody itself is a block now, it can no longer behave like a table. Since you still need a table behavior to display you columns correctly, the solution is to ask for each of your rows to display as individual tables:(Note that, using this technique, you won't be able to span across rows anymore).Once that done, you can enforce column widths to have the same width in both thead and tbody. You could not that:I prefer the last option, which requires adding:See a demo here, forked from the answer to this question.Edit:   This is a very old answer and is here for prosperity just to show that it was supported once back in the 2000's but dropped because browsers strategy in the 2010's was to respect W3C specifications even if some features were removed: Scrollable table with fixed header/footer was clumsily specified before HTML5.Unfortunately there is no elegant way to handle scrollable table with fixed thead/tfoot 

because HTML/CSS specifications are not very clear about that feature.Although HTML 4.01 Specification says thead/tfoot/tbody are used (introduced?) to scroll table body: But the working scrollable table feature on FF 3.6 has been removed in FF 3.7 because considered as a bug because not compliant with HTML/CSS specifications. See this and that comments on FF bugs.Below is a simplified version of the MDN useful tips for scrollable table

see this archived page or the current French versionHowever MDN also says this does not work any more on FF :-( 

I have also tested on IE8 => table is not scrollable either :-((Not sure if anyone is still looking at this but they way I have done this previously is to use two tables to display the single original table - the first just the original table title line and no table body rows (or an empty body row to make it validate).The second is in a separate div and has no title and just the original table body rows. The separate div is then made scrollable.The second table in it's div is placed just below the first table in the HTML and it looks like a single table with a fixed header and a scrollable lower section. I have only tested this in Safari, Firefox and IE (latest versions of each in Spring 2010) but it worked in all of them.The only issue it had was that the first table would not validate without a body (W3.org validator - XHTML 1.0 strict), and when I added one with no content it causes a blank row. You can use CSS to make this not visible but it still eats up space on the page.This solution works in Chrome 35, Firefox 30 and IE 11 (not tested other versions)Its pure CSS: 

http://jsfiddle.net/ffabreti/d4sope1u/Everything is set to display:block, table needs a height:This caused me huge headaches trying to implement such a grid for an application of ours. I tried all the various techniques out there but they each had problems. The closest I came was using a jQuery plugin such as Flexigrid (look on http://www.ajaxrain.com for alternatives), but this doesn't seem to support 100% wide tables which is what I needed.What I ended up doing was rolling my own; Firefox supports scrolling tbody elements so I browser sniffed and used appropriate CSS (setting height, overflow etc... ask if you want more details) to make that scroll, and then for other browsers I used two separate tables set to use table-layout: fixed which uses a sizing algorithm that is guarenteed not to overflow the stated size (normal tables will expand when content is too wide to fit). By giving both tables identical widths I was able to get their columns to line up. I wrapped the second one in a div set to scroll and with a bit of jiggery pokery with margins etc managed to get the look and feel I wanted.Sorry if this answer sounds a bit vague in places; I'm writing quickly as I don't have much time. Leave a comment if you want me to expand any further!Here's a code that really works for IE and FF (at least):I've changed the original code to make it clearer and also to put it working fine in IE and also FF.. Original code HEREHere's my alternative. It also uses different DIVs for the header, body and footer but synchronised for window resizing and with searching, scrolling, sorting, filtering and positioning:My CD listsClick on the Jazz, Classical... buttons to see the tables. It's set up so that it's adequate even if JavaScript is turned off.Seems OK on IE, FF and WebKit (Chrome, Safari).Sorry I haven.t read all replies to your question.Yeah here the thing you want (I have done already)You can use two tables, with same class name for similar styling, one only with table head and another with your rows.

Now put this table inside a div having fixed height with overflow-y:auto OR scroll.The main problem I had with the suggestions above was being able to plug in tablesorter.js AND being able to float the headers for a table constrained to a specific max size.  I eventually stumbled across the plugin jQuery.floatThead which provided the floating headers and allowed sorting to continue to work. It also has a nice comparison page showing itself vs similar plugins.  Live JsFiddleIt is possible with only HTML & CSSIf its ok to use JavaScript here is my solution

Create a table set fixed width on all columns (pixels!) add the class Scrollify to the table and add this javascript + jquery 1.4.x set height in css or style!Tested in: Opera, Chrome, Safari, FF, IE5.5(Epic script fail), IE6, IE7, IE8, IE9Edit: Fixed height.I do this with javascript (no library) and CSS - the table body scrolls with the page, and the table does not have to be fixed width or height, although each column must have a width. You can also keep sorting functionality.Basically:Here's the javascript and a jsFiddle DEMO.For me, nothing related to scrolling really worked until I removed the width from the table CSS. Originally, the table CSS looked like this:As soon as I removed the width:100%; all scrolling features started working. If you have low enough standards ;) you could place a table that contains only a header directly above a table that has only a body. It won't scroll horizontally, but if you don't need that...

How to get notified about changes of the history via history.pushState?

Felix Kling

[How to get notified about changes of the history via history.pushState?](https://stackoverflow.com/questions/4570093/how-to-get-notified-about-changes-of-the-history-via-history-pushstate)

So now that HTML5 introduces history.pushState to change the browsers history, websites start using this in combination with Ajax instead of changing the fragment identifier of the URL.Sadly that means that those calls cannot be detect anymore by onhashchange.My question is: Is there a reliable way (hack? ;)) to detect when a website uses history.pushState? The specification does not state anything about events that are raised (at least I couldn't find anything).

I tried to create a facade and replaced window.history with my own JavaScript object, but it didn't have any effect at all.Further explanation: I'm developing a Firefox add-on that needs to detect these changes and act accordingly.

I know there was a similar question a few days ago that asked whether listening to some DOM events would be efficient but I would rather not rely on that because these events can be generated for a lot of different reasons.Update:Here is a jsfiddle (use Firefox 4 or Chrome 8) that shows that onpopstate is not triggered when pushState is called (or am I doing something wrong? Feel free to improve it!).Update 2:Another (side) problem is that window.location is not updated when using pushState (but I read about this already here on SO I think).

2010-12-31 12:31:42Z

So now that HTML5 introduces history.pushState to change the browsers history, websites start using this in combination with Ajax instead of changing the fragment identifier of the URL.Sadly that means that those calls cannot be detect anymore by onhashchange.My question is: Is there a reliable way (hack? ;)) to detect when a website uses history.pushState? The specification does not state anything about events that are raised (at least I couldn't find anything).

I tried to create a facade and replaced window.history with my own JavaScript object, but it didn't have any effect at all.Further explanation: I'm developing a Firefox add-on that needs to detect these changes and act accordingly.

I know there was a similar question a few days ago that asked whether listening to some DOM events would be efficient but I would rather not rely on that because these events can be generated for a lot of different reasons.Update:Here is a jsfiddle (use Firefox 4 or Chrome 8) that shows that onpopstate is not triggered when pushState is called (or am I doing something wrong? Feel free to improve it!).Update 2:Another (side) problem is that window.location is not updated when using pushState (but I read about this already here on SO I think).According to this, there is no reason for popstate to be fired when you use pushState. But an event such as pushstate would come in handy. Because history is a host object, you should be careful with it, but Firefox seems to be nice in this case. This code works just fine:Your jsfiddle becomes:You can monkey-patch window.history.replaceState in the same way.Note: of course you can add onpushstate simply to the global object, and you can even make it handle more events via add/removeListenerI used to use this:It's almost the same as galambalazs did.It's usually overkill though. And it might not work in all browsers. (I only care about my version of my browser.)(And it leaves a var _wr, so you might want to wrap it or something. I didn't care about that.)You could bind to the window.onpopstate event?https://developer.mozilla.org/en/DOM%3awindow.onpopstateFrom the docs:Finally found the "correct" way to do this! It requires adding a privilege to your extension and using the background page (not just a content script), but it does work.The event you want is browser.webNavigation.onHistoryStateUpdated, which is fired when a page uses the history API to change the URL. It only fires for sites that you have permission to access, and you can also use a URL filter to further cut down on the spam if you need to. It requires the webNavigation permission (and of course host permission for the relevant domain(s)).The event callback gets the tab ID, the URL that is being "navigated" to, and other such details. If you need to take an action in the content script on that page when the event fires, either inject the relevant script directly from the background page, or have the content script open a port to the background page when it loads, have the background page save that port in a collection indexed by tab ID, and send a message across the relevant port (from the background script to the content script) when the event fires.galambalazs's answer monkey patches window.history.pushState and window.history.replaceState, but for some reason it stopped working for me. Here's an alternative that's not as nice because it uses polling:Since you're asking about a Firefox addon, here's the code that I got to work. Using unsafeWindow is no longer recommended, and errors out when pushState is called from a client script after being modified:Instead, there's an API called exportFunction which allows the function to be injected into window.history like this:I think this topic needs a more modern solution.I'm sure nsIWebProgressListener was around back then I'm surprised no one mentioned it.From a framescript (for e10s compatability):Then listening in the onLoacationChangeThat will apparently catch all pushState's. But there is a comment warning that it "ALSO triggers for pushState". So we need to do some more filtering here to ensure it's just pushstate stuff.Based on: https://github.com/jgraham/gecko/blob/55d8d9aa7311386ee2dabfccb481684c8920a527/toolkit/modules/addons/WebNavigation.jsm#L18And: resource://gre/modules/WebNavigationContent.jsWell, I see many examples of replacing the pushState property of history but I'm not sure that's a good idea, I'd prefer to create a service event based with a similar API to history that way you can control not only push state but replace state as well and it open doors for many other implementations not relying on global history API. Please check the following example:If you need the EventEmitter definition, the code above is based on the NodeJS event emitter: https://github.com/nodejs/node/blob/36732084db9d0ff59b6ce31e839450cd91a156be/lib/events.js. utils.inherits implementation can be found here: https://github.com/nodejs/node/blob/36732084db9d0ff59b6ce31e839450cd91a156be/lib/util.js#L970I'd rather not overwrite the native history method so this simple implementation creates my own function called eventedPush state which just dispatches an event and returns history.pushState(). Either way works fine but I find this implementation a bit cleaner as native methods will continue to perform as future developers expect.As standard states:we need to call history.back() to trigeer WindowEventHandlers.onpopstateSo insted of:do:

Javascript communication between browser tabs/windows [duplicate]

adamJLev

[Javascript communication between browser tabs/windows [duplicate]](https://stackoverflow.com/questions/4079280/javascript-communication-between-browser-tabs-windows)

What's the most reliable way to have Javascript communicate between tabs/windows of the same browser? For example, when Tab 2 starts audio playback, Tab 1 somehow knows about this and can pause it's player.I'm building a site with a music player... so at the moment if you open two tabs to the site, you could start music on both.

This is obviously bad, so I'm trying to find a solution. Any ideas?

Thanks 

2010-11-02 15:36:26Z

What's the most reliable way to have Javascript communicate between tabs/windows of the same browser? For example, when Tab 2 starts audio playback, Tab 1 somehow knows about this and can pause it's player.I'm building a site with a music player... so at the moment if you open two tabs to the site, you could start music on both.

This is obviously bad, so I'm trying to find a solution. Any ideas?

Thanks This is an old answer, I suggest to use modern version described here: Javascript; communication between tabs/windows with same originYou can communicate between browser windows (and tabs too) using cookies. Here is an example of sender and receiver: sender.htmlreceiver.html: For a more modern solution check out https://stackoverflow.com/a/12514384/270274Quote:I don't think you need cookies. Each document's js code can access the other document elements. So you can use them directly to share data.

Your first window w1 opens w2 and save the referenceIn w2 you can access w1 using the opener property of window.There is also an experimental technology called Broadcast Channel API that is designed specifically for communication between different browser contexts with same origin. You can post messages to and recieve messages from another browser context without having a reference to it:Obviously this is experiental technology and is not supported accross all browsers yet.You can do this via local storage API. Note that this works only between 2 tabs. you can't put both sender and receiver on the same page:On sender page:On the receiver pageBelow window(w1) opens another window(w2). Any window can send/receive message to/from another window. So we should ideally verify that the message originated from the window(w2) we opened.In w1In w2(abc.do)You can communicate between windows (tabbed or not) if they have a child-parent relationship. Create and update a child window:Child windows can use the parent object to communicate with the parent that spawned it, so you could control the music player from either window.See it in action here: https://jsbin.com/cokipotajo/edit?html,js,outputCommunicating between different JavaScript execution context was supported even before HTML5 if the documents was of the same origin. If not or you have no reference to the other Window object, then you could use the new postMessage API introduced with HTML5. I elaborated a bit on both approaches in this stackoverflow answer.Found different way using HTML5 localstorage, I've create a library with events like API:it will send messages to all other pages but not for current one.edit:

With Flash you can communicate between any window, ANY browser (yes, from FF to IE at runtime ) ..ANY form of instance of flash (ShockWave/activeX) 

How does this milw0rm heap spraying exploit work?

Patrick Desjardins

[How does this milw0rm heap spraying exploit work?](https://stackoverflow.com/questions/381171/how-does-this-milw0rm-heap-spraying-exploit-work)

I usually do not have difficulty to read JavaScript code but for this one I can’t figure out the logic. The code is from an exploit that has been published 4 days ago. You can find it at milw0rm.Here is the code:Here is what I believe it does and I would like you to help me for the part that I misunderstand.The variable shellcode contains the code to open the calc.exe. I do not get how they have found that weird string. Any idea?The second thing is the variable spray. I do not understand this weird loop.The third thing is the variable memory that is never used anywhere. Why do they create it?Last thing: what does the XML tag do in the page?For the moment I have good answers but mostly very general ones. I would like more explanations of the value of the code. An example is unescape("%u0a0a%u0a0a");. What does it mean? Same thing for the loop: why did the developer write: length < 0xd0000? I would like a deeper understanding, not only the theory of this code.

2008-12-19 14:56:32Z

I usually do not have difficulty to read JavaScript code but for this one I can’t figure out the logic. The code is from an exploit that has been published 4 days ago. You can find it at milw0rm.Here is the code:Here is what I believe it does and I would like you to help me for the part that I misunderstand.The variable shellcode contains the code to open the calc.exe. I do not get how they have found that weird string. Any idea?The second thing is the variable spray. I do not understand this weird loop.The third thing is the variable memory that is never used anywhere. Why do they create it?Last thing: what does the XML tag do in the page?For the moment I have good answers but mostly very general ones. I would like more explanations of the value of the code. An example is unescape("%u0a0a%u0a0a");. What does it mean? Same thing for the loop: why did the developer write: length < 0xd0000? I would like a deeper understanding, not only the theory of this code.The shellcode contains some x86 assembly instructions that will do the actual exploit. spray creates a long sequence of instructions that will be put in memory. Since we can't usually find out the exact location of our shellcode in memory, we put a lot of nop instructions before it and jump to somewhere there. The memory array will hold the actual x86 code along with the jumping mechanism. We'll feed the crafted XML to the library which has a bug. When it's being parsed, the bug will cause the instruction pointer register to be assigned to somewhere in our exploit, leading to arbitrary code execution.To understand more deeply, you should actually figure out what is in the x86 code. unscape will be used to put the sequence of bytes represented of the string in the spray variable. It's valid x86 code that fills a large chunk of the heap and jumps to the start of shellcode. The reason for the ending condition is string length limitations of the scripting engine. You can't have strings larger than a specific length.In x86 assembly, 0a0a represents or cl, [edx]. This is effectively equivalent to nop instruction for the purposes of our exploit. Wherever we jump to in the spray, we'll get to the next instruction until we reach the shellcode which is the code we actually want to execute.If you look at the XML, you'll see 0x0a0a is there too. Exactly describing what happens requires specific knowledge of the exploit (you have to know where the bug is and how it's exploited, which I don't know). However, it seems that we force Internet Explorer to trigger the buggy code by setting the innerHtml to that malicious XML string. Internet Explorer tries to parse it and the buggy code somehow gives control to a location of memory where the array exists (since it's a large chunk, the probability of jumping there is high). When we jump there the CPU will keep executing or cl, [edx] instructions until in reaches the beginning of shellcode that's put in memory.I've disassembled the shellcode:Understanding this shellcode requires x86 assembly knowledge and the problem in the MS library itself (to know what the system state is when we reach here), not JavaScript! This code will in turn execute calc.exe.This looks like an exploit of the recent Internet Explorer bug that Microsoft released the emergency patch for.  It uses a flaw in the databinding feature of Microsoft's XML handler, that causes heap memory to be deallocated incorrectly.Shellcode is machine code that will run when the bug occurs.  Spray and memory are just some space allocated on the heap to help the exploitable condition occur.Heap Spraying is common way to exploit browser stuff, if you are into it you can find several posts like this : http://sf-freedom.blogspot.com/2006/06/heap-spraying-introduction.htmlAny time I see memory that doesn't get addressed in an exploit discussion, my first thought is that the exploit is some sort of buffer overflow, in which case the memory is either causing the buffer to overflow or is being accessed once the buffer overflows.This is from metasploit, that means it's using one of metasploit shell codes. It's open source so you can go and grab it : http://www.metasploit.com/See Character encodings in HTML.It's binary data encoded as a string, which JavaScript is decoding.Common form of XSS also.You can see all the encoding tricks here:http://www.owasp.org/index.php/Category:OWASP_CAL9000_ProjectSimple shellcode exampleHello world in assembly at&t syntax x86 I believe (Wizard in Training).set up the file:vim shellcodeExample.scompile like so:as -o shellcodeExample.o shellcodeExample.s ; ld -s -o shellcode shellcodeExample.oNow you have a binary that prints out hello world.

to convert the binary into shell code type in: objdump -D shellcodeyou will get the output: Now if you look on the 4th line with text you will see: 400078:   eb 1a                   jmp    0x400094the part that says eb 1a is the hexadecimal representation of the assembly instruction jmp one where "one" is the memory address of your string.to prep your shellcode for execution open up another text file and store the hex values in a character array. To format the shell code correctly you type in a \x before every hex value.the upcoming shell code example will look like the following according to the objdump command output:This example uses C for the array.

Now you have working shellcode that will write to stdout "hello world"you can test the shell code by placing it in a vulnerability or you can write the following c program to test it:To compile the program type in: run with ./run

You know have a working example of simple shellcode development that was tested in linux mint/debian.

Calling JavaScript Function From CodeBehind

ssmsnet

[Calling JavaScript Function From CodeBehind](https://stackoverflow.com/questions/5731224/calling-javascript-function-from-codebehind)

Can someone provide good examples of calling a JavaScript function From CodeBehind and Vice-versa?

2011-04-20 13:37:54Z

Can someone provide good examples of calling a JavaScript function From CodeBehind and Vice-versa?You may try this :C# to JavaScript: you can register script block to run on page like following:replace alert() part with your function name.For calling C# method from JavaScript you can use ScriptManager or jQuery. I personally use jQuery. You need to decorate the method that you want to call from JavaScript with WebMethod attribute. For more information regarding calling C# method (called PageMethod) from jQuery you can refer to Dave Ward's post.Calling a JavaScript function from code behindStep 1 Add your Javascript codeStep 2 Add 1 Script Manager in your webForm and Add 1 button tooStep 3 Add this code in your button click event You can not do this directly. In standard WebForms JavaScript is interpreted by browser and C# by server. What you can do to call a method from server using JavaScript is.Like this:Take a look at this link.To call a JavaScript function from server you can use RegisterStartupScript:If you need to send a value as a parameter.Another thing you could do is to create a session variable that gets set in the code behind and then check the state of that variable and then run your javascript. The good thing is this will allow you to run your script right where you want to instead of having to figure out if you want it to run in the DOM or globally. Something like this:

Code behind:In javascriptYou cannot. Codebehind is running on the server while JavaScript is running on the client.However, you can add <script type="text/javascript">someFunction();</script> to your output and thus cause the JS function to be called when the browser is parsing your markup.You can use literal:IIRC Code Behind is compiled serverside and javascript is interpreted client side. This means there is no direct link between the two.What you can do on the other hand is have the client and server communicate through a nifty tool called AJAX. http://en.wikipedia.org/wiki/Asynchronous_JavaScript_and_XMLWorking Example :_Code BehindPossible pitfalls:- I've been noticing a lot of the answers here are using ScriptManager.RegisterStartupScript and if you are going to do that, that isn't the right way to do it.  The right way is to use ScriptManager.RegisterScriptBlock([my list of args here]).  The reason being is you should only be using RegisterStartupScript when your page loads (hence the name RegisterStartupScript).In VB.NET:in C#: Of course, I hope it goes without saying that you need to replace key with your key identifier and should probably move all of this into a sub/function/method and pass in key and someJavascriptObject (if your javascript method requires that your arg is a javascript object).MSDN docs:https://msdn.microsoft.com/en-us/library/bb338357(v=vs.110).aspxThis is how I've done it.HTML markup showing a label and button control is as follows.JavaScript function is here.Code behind to trigger the JavaScript function is here.using your function is enoughthis works for me Since I couldn't find a solution that was code behind, which includes trying the ClientScript and ScriptManager like mutanic and Orlando Herrera said in this question (they both somehow failed), I'll offer a front-end solution that utilizes button clicks to others if they're in the same position as me. This worked for me:HTML Markup:JavaScript:I am simply using an ASP.NET button which utilizes the OnClientClick property, which fires client-side scripting functions, that being JavaScript. The key things to note here are the uses of the return keyword in the function call and in the function itself. I've read docs that don't use return but still get the button click to work - somehow it didn't work for me. The return false; statement in the function specifies a postback should NOT happen. You could also use that statement in the OnClientClick property: OnClientClick="myFunction() return false;"I used ScriptManager in Code Behind and it worked fine.If you are using UpdatePanel in ASP Frontend.

Then, enter UpdatePanel name and 'function name' defined with script tags.Try This in Code Behind and it will worked 100%Thank "Liko", just add a comment to his answer.Added single quotes (') to variable, otherwise it will give error message:You can't call a Javascript function from the CodeBehind, because the CodeBehind file contains the code that executes server side on the web server. Javascript code executes in the web browser on the client side.You can expose C# methods on codebehind pages to be callable via JavaScript by using the ScriptMethod attribute.You cannot call JavaScript from a CodeBehind - that code exists solely on the client.

How to create multidimensional array

SpitFire

[How to create multidimensional array](https://stackoverflow.com/questions/7545641/how-to-create-multidimensional-array)

Can anyone give me a sample/example of JavaScript with a multidimensional array of inputs? Hope you could help because I'm still new to the JavaScript.Like when you input 2 rows and 2 columns the output of it will be 2 rows of input and 2 columns of input.Like this:

2011-09-25 13:01:18Z

Can anyone give me a sample/example of JavaScript with a multidimensional array of inputs? Hope you could help because I'm still new to the JavaScript.Like when you input 2 rows and 2 columns the output of it will be 2 rows of input and 2 columns of input.Like this:http://jsfiddle.net/z4Un3/And if you're wanting to store DOM elements:Not real sure how useful the above is until you attach the elements. The below may be more what you're looking for:http://jsfiddle.net/z4Un3/3/Or, maybe this:Which gives:In the console. If you want to output that to text, you can result.join(' ');, which would give you 2 0.http://jsfiddle.net/z4Un3/6/EDITAnd a working demonstration:http://jsfiddle.net/z4Un3/8/Quote taken from Data Structures and Algorithms with JavaScript Here is some code to test the definition:We can also create a two-dimensional array and initialize it to a set of values in one line:Declared without value assignment.2 dimensions...3 dimensions...I know this is ancient but what about...4x4 example (actually 4x<anything>):which can filled by:very simple.

.

.Hope the following code suits your requirementincrease size var after your function.you can create array follow the code below:Result: 

 [v1][v2] position 0 

 [v3][v4] position 1 

 [v5][v6] position 2For add to array dinamically, use the method below:Hope this helps. :)So here's my solution.A simple example for a 3x3 Array. You can keep chaining this to go deeperOr the following function will generate any level deep you likehttp://www.binaryoverdose.com/2017/02/07/Generating-Multidimensional-Arrays-in-JavaScript/I've created an npm module to do this with some added flexibility:You can also initialize the positions with any value:Or more advanced:Get and set values at positions:I've written a one linear for this:I feel however I can spend more time to make a JSON.parse(JSON.stringify())-free version which is used for cloning here.Btw, have a look at my another answer here.I know this is an old question but here is something to try:

Make your multidimensional array, and place it inside an html tag.

This way you can precisely aim your array'd input:Its simply a neater way to write your code and easier to invoke.  You can check my demo here!

how to stop browser back button using javascript

Sawant Akshay

[how to stop browser back button using javascript](https://stackoverflow.com/questions/12381563/how-to-stop-browser-back-button-using-javascript)

I am doing an online quiz app in php. I want to restrict the user from going back in an exam.

I have tried the following script but it stops my timer.

What should I do?I have included the source code.

The timer is stored in cdtimer.jsI have the exam timer which takes a duration for the exam from a mysql value. The timer starts accordingly but it stops when I put the code in for disabling the back button. What is my problem?

2012-09-12 05:09:11Z

I am doing an online quiz app in php. I want to restrict the user from going back in an exam.

I have tried the following script but it stops my timer.

What should I do?I have included the source code.

The timer is stored in cdtimer.jsI have the exam timer which takes a duration for the exam from a mysql value. The timer starts accordingly but it stops when I put the code in for disabling the back button. What is my problem?There are numerous reasons why disabling the back button will not really work. Your best bet is to warn the user:This page does list a number of ways you could try to disable the back button, but none are guaranteed:http://www.irt.org/script/311.htmIt is generally a bad idea overriding the default behavior of web browser. Client side script does not have the sufficient privilege to do this for security reason.There are few similar questions asked as well,You can-not actually disable browser back button. However you can do magic using your logic to prevent user from navigating back which will create an impression like it is disabled. Here is how, check out the following snippet.This is in pure JavaScript so it would work in most of the browsers. It would also disable backspace key but key will work normally inside input fields and textarea.Place this snippet in a separate script and include it on a page where you want this behavior. In current setup it will execute onload event of DOM which is the ideal entry point for this code.Working DEMO!Tested and verified in following browsers,I came across this, needing a solution which worked correctly and "nicely" on a variety of browsers, including Mobile Safari (iOS9 at time of posting). None of the solutions were quite right. I offer the following (tested on IE11, FireFox, Chrome & Safari):Note the following:This code will disable the back button for modern browsers which support the HTML5 History API. Under normal circumstances, pushing the back button goes back one step, to the previous page. If you use history.pushState(), you start adding extra sub-steps to the current page. The way it works is, if you were to use history.pushState() three times, then start pushing the back button, the first three times it would navigate back in these sub-steps, and then the fourth time it would go back to the previous page. If you combine this behaviour with an event listener on the popstate event, you can essentially set up an infinite loop of sub-states. So, you load the page, push a sub-state, then hit the back button, which pops a sub-state and also pushes another one, so if you push the back button again it will never run out of sub-states to push. If you feel that it's necessary to disable the back button, this will get you there.For Restrict Browser back eventThis is the way I could it accomplish it.

Weirdly changing the window.location didn't worked out fine in chrome and safari.

Happens that the location.hash doesn't create an entry in the history for chrome and safari. So you will have to use the pushstate.

This is working for me in all browsers.This article on jordanhollinger.com is the best option I feel. Similar to Razor's answer but a bit clearer. Code below; full credits to Jordan Hollinger:Page before:Page of no return's JavaScript:This javascript does not allow any user to go back (works in Chrome, FF, IE, Edge)Try it with ease :Very simple and clean function to break the back arrow without interfering with the page afterward.Benefits:Note: some of the other solutions use onbeforeunload. Please do not use onbeforeunload for this purpose, which pops up a dialog whenever users try to close the window, hit backarrow, etc. Modals like onbeforeunload are usually only appropriate in rare circumstances, such as when they've actually made changes on screen and haven't saved them, not for this purpose.How It WorksThat's it. No further messing around, no background event monitoring, nothing else.Use It In One SecondTo deploy, just add this anywhere on your page or in your JS:This seems to have worked for us in disabling the back button on the browser, as well as the backspace button taking you back. You simply cannot and should not do this. However, but this might be helpful Works in my chrome and firefoxTry this to prevent backspace button in IE which by default act as "Back":I believe the perfect yet solution is actually pretty straightforward, which I used for many years now.It's basically assigning the window's "onbeforeunload" event along with the ongoing document 'mouseenter' / 'mouseleave' events so the alert only triggers when clicks are outside the document scope (which then could be either the back or forward button of the browser)This code tested with latest Chrome and Firefox browsers.I create one HTML page ( index.html ). I also create a one ( mechanism.js ) inside a ( script ) folder / directory. Then, I lay all my content inside of ( index.html ) using form, table, span, and div tags as needed. Now, here's the trick that will make back / forward do nothing!First, the fact that you have only one page! Second, the use of JavaScript with span / div tags to hide and display content on the same page when needed via regular links!Inside ' index.html ' :Inside ' mechanism.js ' :It looks hairy, but note the function names and calls, embedded HTML, and the span tag id calls. This was to show how you can inject different HTML into same span tag on same page! How can Back/Forward affect this design? It cannot, because you are hiding objects and replacing others all on the same page!How to hide and display? Here goes:

Inside functions in ' mechanism.js ' as needed, use:Inside ' index.html ' call functions through links:andI hope I did not give you a headache. Sorry if I did :-)In my case this was a shopping order. So what I did was disable the button. When the user clicked back, the button was disabled still. When they clicked back one more time, and then clicked a page button to go forward. I knew their order was submitted and skipped to another page.In the case when the page actually refreshed which would make the button (theoretically), available; I was then able to react in the page load that the order is already submitted and redirect then too.In a modern browser this seems to work:You can just put a small script and then check. It won't allow you to visit previous page.

This is done in javascript.The window.onunload function fires when you try to visit back or previous page through browser.Hope this helps.None of the most-upvoted answers worked for me in Chrome 79. It looks like Chrome changed its behavior with respect to the Back button after Version 75, see here: https://support.google.com/chrome/thread/8721521?hl=enHowever, in that Google thread, the answer provided by Azrulmukmin Azmi at the very end did work. This is his solution.I don't entirely understand what he wrote, but apparently an additional history.back() / history.forward() is now required for blocking Back in Chrome 75+.

Converting a string to JSON object

Zer0

[Converting a string to JSON object](https://stackoverflow.com/questions/10976897/converting-a-string-to-json-object)

How do you make JS think that a string is JSON ?I have a function which only works if JSON object is passed to it. If I pass a string to it, with same format as JSON, it doesn't work. So I want to make that function think that the string passed to it is a JSON. The string is indeed in the JSON format.I also tried the following. I inputted the string through Ajax , with "handle as" parameter as "JSON", and then when  I passed the result to the function it works.So I deduced the problem is not with the string. How do I convert this string to JSON? If i get same string through ajax request and then passing it to function works, whereas directly passing it doesn't work. The string is as follows:

2012-06-11 08:49:10Z

How do you make JS think that a string is JSON ?I have a function which only works if JSON object is passed to it. If I pass a string to it, with same format as JSON, it doesn't work. So I want to make that function think that the string passed to it is a JSON. The string is indeed in the JSON format.I also tried the following. I inputted the string through Ajax , with "handle as" parameter as "JSON", and then when  I passed the result to the function it works.So I deduced the problem is not with the string. How do I convert this string to JSON? If i get same string through ajax request and then passing it to function works, whereas directly passing it doesn't work. The string is as follows:Where string is your json string.You can use the JSON.parse() for that.See docs at MDNExample:I had the same problem with a similar string like yoursThe problem here is the structure of the string. The json parser wasn't recognizing that it needs to create 2 objects in this case. So what I did is kind of silly, I just re-structured my string and added the [] with this the parser recognized Hope it helps,If anyone has a more elegant approach please share.link:-http://api.jquery.com/jQuery.parseJSON/convert the string to HashMap using Object Mapper ...new ObjectMapper().readValue(string, Map.class);Internally Map will behave as JSON ObjectPass the string variable into Json parse :Simply use eval function.JSON.parse() function will do.orUsing Jquery,Let's us consider you have string like example : "name:lucy,age:21,gender:female"`

Is there a way to add/remove several classes in one single instruction with classList?

Enrique Moreno Tent

[Is there a way to add/remove several classes in one single instruction with classList?](https://stackoverflow.com/questions/11115998/is-there-a-way-to-add-remove-several-classes-in-one-single-instruction-with-clas)

So far I have to do this:While this is doable in jQuery, like thisI'd like to know if there's any native way to add or remove.

2012-06-20 08:54:28Z

So far I have to do this:While this is doable in jQuery, like thisI'd like to know if there's any native way to add or remove.is equalThe new spread operator makes it even easier to apply multiple CSS classes as array:The classList property ensures that duplicate classes are not unnecessarily added to the element. In order to keep this functionality, if you dislike the longhand versions or jQuery version, I'd suggest adding an addMany function and removeMany to DOMTokenList (the type of classList):These would then be useable like so:UpdateAs per your comments, if you wish to only write a custom method for these in the event they are not defined, try the following:Since the add() method from the classList just allows to pass separate arguments and not a single array, you need to invoque add() using apply. For the first argument you will need to pass the classList reference from the same DOM node and as a second argument the array of classes that you want to add:To add class to a elementRemove a classNewer versions of the DOMTokenList spec allow for multiple arguments to add() and remove(), as well as a second argument to toggle() to force state.At the time of writing, Chrome supports multiple arguments to add() and remove(), but none of the other browsers do.  IE 10 and lower, Firefox 23 and lower, Chrome 23 and lower and other browsers do not support the second argument to toggle().  I wrote the following small polyfill to tide me over until support expands:A modern browser with ES5 compliance and DOMTokenList are expected, but I'm using this polyfill in several specifically targeted environments, so it works great for me, but it might need tweaking for scripts that will run in legacy browser environments such as IE 8 and lower.Here is a work around for IE 10 and 11 users that seemed pretty straight forward.OrThe standard definiton allows only for adding or deleting a single class. A couple of small wrapper functions can do what you ask :These wrappers allow you to specify the list of classes as separate arguments, as strings with space or comma separated items, or a combination. For an example see http://jsfiddle.net/jstoolsmith/eCqy7A very simple, non fancy, but working solution that I would have to believe is very cross browser:Create this functionCall it like this:

removeAddClasses(node.classList,arrayToRemove,arrayToAdd);...where arrayToRemove is an array of class names to remove:

['myClass1','myClass2'] etcetera...and arrayToAdd is an array of class names to add:

['myClass3','myClass4'] etceteraYou can do like belowAddRemoveReferenceTLDR;In straight forward case above removal should work. But in case of removal, you should make sure class exists before you remove themAssume that you have an array of classes to being added, you can use ES6 spread syntax:

let classes = ['first', 'second', 'third'];

elem.classList.add(...classes);

I liked @rich.kelly's answer, but I wanted to use the same nomenclature as classList.add() (comma seperated strings), so a slight deviation.So you can then use:I need to test all browsers, but this worked for Chrome.

 Should we be checking for something more specific than the existence of DOMTokenList.prototype.addMany? What exactly causes classList.add() to fail in IE11?Another polyfill for element.classList is here. I found it via MDN.I include that script and use element.classList.add("first","second","third") as it's intended.

How can I find the length of a number?

Code Junkie

[How can I find the length of a number?](https://stackoverflow.com/questions/10952615/how-can-i-find-the-length-of-a-number)

I'm looking to get the length of a number in JavaScript or jQuery?I've tried value.length without any success, do I need to convert this to a string first?

2012-06-08 16:24:57Z

I'm looking to get the length of a number in JavaScript or jQuery?I've tried value.length without any success, do I need to convert this to a string first?This process will also work forFloat Number and for Exponential number also.Ok, so many answers, but this is a pure math one, just for the fun or for remembering that Math is Important:This actually gives the "length" of the number even if it's in exponential form. num is supposed to be a non negative integer here: if it's negative, take its absolute value and adjust the sign afterwards.Now that Math.log10 is a thing, you can simply writeYou have to make the number to string in order to take lengthor I've been using this functionality in node.js, this is my fastest implementation so far:It should handle positive and negative integers (also in exponential form) and should return the length of integer part in floats.The following reference should provide some insight into the method:

Weisstein, Eric W. "Number Length." From MathWorld--A Wolfram Web Resource.I believe that some bitwise operation can replace the Math.abs, but jsperf shows that Math.abs works just fine in the majority of js engines.Update: As noted in the comments, this solution has some issues :(Update2 (workaround) : I believe that at some point precision issues kick in and the Math.log(...)*0.434... just behaves unexpectedly. However, if Internet Explorer or Mobile devices are not your cup of tea, you can replace this operation with the Math.log10 function. In Node.js I wrote a quick basic test with the function nLength = (n) => 1 + Math.log10(Math.abs(n) + 1) | 0; and with Math.log10 it worked as expected. Please note that Math.log10 is not universally supported.Well without converting the integer to a string you could make a funky loop:Demo: http://jsfiddle.net/maniator/G8tQE/Could also use a template string:First convert it to a string:Adding an empty string to it will implicitly cause mynumber to turn into a string.There are three way to do it.better performance one (best performance in ie11)Math (best performance in Chrome, firefox but slowest in ie11)there is a jspref here

http://jsperf.com/fastest-way-to-get-the-first-in-a-number/2You should go for the simplest one (stringLength), readability always beats speed. But if you care about speed here are some below.Three different methods all with varying speed.I would like to correct the @Neal answer which was pretty good for integers, but the number 1 would return a length of 0 in the previous case.Try this:Example of it in useYes you need to convert to string in order to find the length.For exampleI got asked a similar question in a test.Negative numbers were added to complicate it a little more, hence the Math.abs().

jQuery post() with serialize and extra data

Vitaliy Isikov

[jQuery post() with serialize and extra data](https://stackoverflow.com/questions/6627936/jquery-post-with-serialize-and-extra-data)

Okay, so I'm trying to find out if it's possible to post serialize() and other data that's outside the form.Here's what I though would work, but it only sends 'wordlist' and not the form data.Anyone have any ideas?

2011-07-08 17:10:32Z

Okay, so I'm trying to find out if it's possible to post serialize() and other data that's outside the form.Here's what I though would work, but it only sends 'wordlist' and not the form data.Anyone have any ideas?You can use serializeArray [docs] and add the additional data:Try $.paramAn alternative solution, in case you are needing to do this on an ajax file upload:OR even simpler.When you want to add a javascript object to the form data, you can use the following codeOr if you add the method serializeObject(), you can do the followingIn new version of jquery, could done it via following steps:Example code:You could have the form contain the additional data as hidden fields which you would set right before sending the AJAX request to the corresponding values.Another possibility consists into using this little gem to serialize your form into a javascript object (instead of string) and add the missing data:You can use thisI like to keep objects as objects and not do any crazy type-shifting. Here's my wayif you can't see from above I used the .concat function and passed in an object with the post variable as 'name' and the value as 'value'!Hope this helps.

How to scroll to an element inside a div?

Amr Elgarhy

[How to scroll to an element inside a div?](https://stackoverflow.com/questions/635706/how-to-scroll-to-an-element-inside-a-div)

I have a scrolled div and I want to have a link when I click on it it will force this div to scroll to view an element inside.

I wrote its JavasSript like this: but this scrolls all the page while scrolling the div itself.

How to fix that?I want to say it like that

2009-03-11 18:12:20Z

I have a scrolled div and I want to have a link when I click on it it will force this div to scroll to view an element inside.

I wrote its JavasSript like this: but this scrolls all the page while scrolling the div itself.

How to fix that?I want to say it like thatYou need to get the top offset of the element you'd like to scroll into view, relative to its parent (the scrolling div container):The variable topPos is now set to the distance between the top of the scrolling div and the element you wish to have visible (in pixels).Now we tell the div to scroll to that position using scrollTop:If you're using the prototype JS framework, you'd do the same thing like this:Again, this will scroll the div so that the element you wish to see is exactly at the top (or if that's not possible, scrolled as far down as it can so it's visible).You would have to find the position of the element in the DIV you want to scroll to, and set the scrollTop property.Update:Sample code to move up or downCode should be:You want to scroll the difference between child top position and div's top position. Get access to child elements using:and so on....To scroll an element into view of a div, only if needed, you can use this scrollIfNeeded function:If you are using jQuery, you could scroll with an animation using the following:The animation is optional: you could also take the scrollTop value calculated above and put it directly in the container's scrollTop property.Setting ScrollTop does give the desired result but the scroll is very abrupt. Using jquery to have smooth scroll was not an option. So here's a native way to get the job done that supports all major browsers. Reference - caniuseThat's it!And here's a working snippet for the doubtful - 

Update: As you can perceive in the comments, it seems that Element.scrollTo() is not supported in IE. So if you don't care about IE (you really shouldn't), feel free to use this in all your projects.ReferenceThere are two facts : 1) Component scrollIntoView is not supported by safari.2) JS framework jQuery can do the job like this:Here's a simple pure JavaScript solution that works for a target Number (value for scrollTop), target DOM element, or some special String cases:And here are some examples of usage:ororAnother example of using jQuery and animate. User Animated ScrollingHere's an example of how to programmatically scroll a <div> horizontally, without JQuery. To scroll vertically, you would replace JavaScript's writes to scrollLeft with scrollTop, instead.JSFiddlehttps://jsfiddle.net/fNPvf/38536/HTMLJavaScriptCredit to Dux.Auto Animated ScrollingIn addition, here are functions for scrolling a <div> fully to the left and right. The only thing we change here is we make a check to see if the full extension of the scroll has been utilised before making a recursive call to scroll again.JSFiddlehttps://jsfiddle.net/0nLc2fhh/1/HTMLJavaScriptThis is what has finally served mebrowser does scrolling automatically to an element that gets focus, so what you can also do it to wrap the element that you need to be scrolled to into <a>...</a> and then when you need scroll just set the focus on that aAfter selecting the element just use scrollIntoView function with the below option:So the answer for this post is:

Is this a good way to clone an object in ES6?

Dmitry Fadeev

[Is this a good way to clone an object in ES6?](https://stackoverflow.com/questions/39736397/is-this-a-good-way-to-clone-an-object-in-es6)

Googling for "javascript clone object" brings some really weird results, some of them are hopelessly outdated and some are just too complex, isn't it as easy as just:Is there anything wrong with this?

2016-09-28 00:50:56Z

Googling for "javascript clone object" brings some really weird results, some of them are hopelessly outdated and some are just too complex, isn't it as easy as just:Is there anything wrong with this?This is good for shallow cloning. The object spread is a standard part of ECMAScript 2018.For deep cloning you'll need a different solution.const clone = {...original} to shallow cloneconst newobj = {...original, prop: newOne} to immutably add another prop to the original and store as a new object. EDIT: When this answer was posted, {...obj} syntax was not available in most browsers. Nowadays, you should be fine using it (unless you need to support IE 11).Use Object.assign.https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assignHowever, this won't make a deep clone. There is no native way of deep cloning as of yet.EDIT: As @Mike 'Pomax' Kamermans mentioned in the comments, you can deep clone simple objects (ie. no prototypes, functions or circular references) using JSON.parse(JSON.stringify(input))if you don't want to use json.parse(json.stringify(object)) you could create recursively key-value copies:But the best way is to create a class that can return a clone of it selfIf the methods you used isn't working well with objects involving data types like Date, try thisImport _Deep clone objectFollowing on from the answer by @marcel I found some functions were still missing on the cloned object. e.g.where on MyObject I could clone methodA but methodB was excluded. This occurred because it is missingwhich meant it did not show up inInstead I switched over towhich will include non-enumerable keys.I also found that the prototype (proto) was not cloned. For that I ended up usingPS: Frustrating that I could not find a built in function to do this.But Object.assign() not create a deep clone To fix that, we should use the cloning loop that examines each value of user[key] and, if it’s an object, then replicate its structure as well. That is called a「deep cloning」.There’s a standard algorithm for deep cloning that handles the case above and more complex cases, called the Structured cloning algorithm. 

In order not to reinvent the wheel, we can use a working implementation of it from the JavaScript library lodash the method is called _.cloneDeep(obj).All the methods above do not handle deep cloning of objects where it is nested to n levels. I did not check its performance over others but it is short and simple.The first example below shows object cloning using Object.assign which clones just till first level.Using the below approach deep clones object

ESRI : Failed to parse source map

AhammadaliPK

[ESRI : Failed to parse source map](https://stackoverflow.com/questions/36051891/esri-failed-to-parse-source-map)

I am getting this error in the Google chrome developer console.How do I fix it?

2016-03-17 04:48:41Z

I am getting this error in the Google chrome developer console.How do I fix it?Chrome recently added support for source maps in the developer tools.  If you go under settings on the chrome developer toolbar you can see the following two options:If you disable those two options, and refresh the browser, it should no longer ask for source maps.These settings can be found here:While the chosen answer is a good answer to hide the error, it doesn't make the error go away, it's just that you can't see it in the inspector. The other way would be to download the missing map file and put it in the assets/lib directory. So, for example, I was missing angular-route.min.js.map file and I went here https://code.angularjs.org/1.5.3/ (to the correct version of angular) and downloaded the missing file. The error didn't disappear right away, possibly because of caching, but once I went to the actual file in the browser it worked. http://sitename.localhost/assets/lib/angular-route.min.js.map. Now the inspector no longer displays the error even with source maps enabled.Further to just simply turning off Source Maps in Chrome - I've done a little digging and found that using Web Essentials to create the source maps seems to be the issue.For whatever reason, if I use an external compiler (Koala) I can successfully create working source maps in Chrome (no errors). Whereas if I use Web Essentials, the source maps fail to parse.Hope this helps someone.Source code of CSS/JS we usually minified/compress. Now if we want to debug those minified files then we have to add following line at the end of minified file This tells compiler where is source file actually mapped.   In the case of JS its make sense

but in the case of CSS, its actually debugging of SCSS.To Remove Warning: remove /*# sourceMappingURL=bootstrap.min.css.map */ from the end of minified file, . I had the same problem because .htaccess has incorrect settings:

I solved this by modifying the file:When I had this issue the cause was a relative reference to template files when using the ui.bootstrap.modal module.templateUrl: 'js/templates/modal.html'This works from a root domain (www.example.com) but when a path is added (www.example.com/path/) the reference breaks. The answer in my case was simply to making the reference absolute (js/ -> /js/).templateUrl: '/js/templates/modal.html'This may sometimes be caused by Chrome extensions you've installed. For example, AdBlock.Unfortunately the best solution I could find was to disable the offending extension.Check if you're using some Chrome extension (Night mode or something else). Disable that and see if the 'inject' gone.

Modifying location.hash without page scrolling

CBarr

[Modifying location.hash without page scrolling](https://stackoverflow.com/questions/1489624/modifying-location-hash-without-page-scrolling)

We've got a few pages using ajax to load in content and there's a few occasions where we need to deep link into a page. Instead of having a link to "Users" and telling people to click "settings" it's helpful to be able to link people to user.aspx#settingsTo allow people to provide us with correct links to sections (for tech support, etc.) I've got it set up to automatically modify the hash in the URL whenever a button is clicked.  The only issue of course is that when this happens, it also scrolls the page to this element.Is there a way to disable this?  Below is how I'm doing this so far.I had hoped the return false; would stop the page from scrolling - but it just makes the link not work at all. So that's just commented out for now so I can navigate.Any ideas?

2009-09-28 22:08:25Z

We've got a few pages using ajax to load in content and there's a few occasions where we need to deep link into a page. Instead of having a link to "Users" and telling people to click "settings" it's helpful to be able to link people to user.aspx#settingsTo allow people to provide us with correct links to sections (for tech support, etc.) I've got it set up to automatically modify the hash in the URL whenever a button is clicked.  The only issue of course is that when this happens, it also scrolls the page to this element.Is there a way to disable this?  Below is how I'm doing this so far.I had hoped the return false; would stop the page from scrolling - but it just makes the link not work at all. So that's just commented out for now so I can navigate.Any ideas?Step 1: You need to defuse the node ID, until the hash has been set. This is done by removing the ID off the node while the hash is being set, and then adding it back on.Step 2: Some browsers will trigger the scroll based on where the ID'd node was last seen so you need to help them a little. You need to add an extra div to the top of the viewport, set its ID to the hash, and then roll everything back:Step 3: Wrap it in a plugin and use that instead of writing to location.hash... Use history.replaceState or history.pushState*  to change the hash. This will not trigger the jump to the associated element.Demo on JSFiddle* If you want history forward and backward supportIf you are using history.pushState and you don't want page scrolling when the user uses the history buttons of the browser (forward/backward) check out the experimental scrollRestoration setting (Chrome 46+ only).I think I may have found a fairly simple solution.  The problem is that the hash in the URL is also an element on the page that you get scrolled to.  if I just prepend some text to the hash, now it no longer references an existing element!Now the URL appears as page.aspx#btn_elementID which is not a real ID on the page. I just remove "btn_" and get the actual element IDA snippet of your original code:Change this to:I was recently building a carousel which relies on window.location.hash to maintain state and made the discovery that Chrome and webkit browsers will force scrolling (even to a non visible target) with an awkward jerk when the window.onhashchange event is fired.Even attempting to register a handler which stops propogation:Did nothing to stop the default browser behavior.

The solution I found was using window.history.pushState to change the hash without triggering the undesirable side-effects.You can then listen for both the normal hashchange event and my.hashchange:Okay, this is a rather old topic but I thought I'd chip in as the 'correct' answer doesn't work well with CSS. This solution basically prevents the click event from moving the page so we can get the scroll position first. Then we manually add the hash and the browser automatically triggers a hashchange event. We capture the hashchange event and scroll back to the correct position. A callback separates and prevents your code causing a delay by keeping your hash hacking in one place. Erm I have a somewhat crude but definitely working method.

Just store the current scroll position in a temp variable and then reset it after changing the hash. :)So for the original example:I don't think this is possible. As far as I know, the only time a browser doesn't scroll to a changed document.location.hash is if the hash doesn't exist within the page.This article isn't directly related to your question, but it discusses typical browser behavior of changing document.location.hash if you use hashchange event with hash parser, you can prevent default action on links and change location.hash adding one character to have difference with id property of an elementAdding this here because the more relevant questions have all been marked as duplicates pointing here…My situation is simpler:This way, the scroll occurs, and there's no jump when the location is updated.The other way to do this is to add a div that's hidden at the top of the viewport. This div is then assigned the id of the hash before the hash is added to the url....so then you don't get a scroll.Here's my solution for history-enabled tabs:And to show the last-selected tab:Note the *= on the filter call.  This is a jQuery-specific thing, and without it, your history-enabled tabs will fail.This solution creates a div at the actual scrollTop and removes it after changing hash:optional, triggering anchor event at page load:I have a simpler method that works for me. Basically, remember what the hash actually is in HTML. It's an anchor link to a Name tag. That's why it scrolls...the browser is attempting to scroll to an anchor link. So, give it one! Finally, remove element.preventDefault or return: false and allow the nav to happen. The window will stay at the top, the hash will be appended to the address bar url, and the correct panel will open.I think you need to reset scroll to its position before hashchange.If on your page you use id as sort of an anchor point, and you have scenarios where you want to have users to append #something to the end of the url and have the page scroll to that #something section by using your own defined animated javascript function, hashchange event listener will not be able to do that.If you simply put a debugger immediate after hashchange event, for example, something like this(well, I use jquery, but you get the point):You will notice that as soon as you change your url and hit the enter button, the page stops at the corresponding section immediately, only after that, your own defined scrolling function will get triggered, and it sort of scrolls to that section, which looks very bad.My suggestion is:Finally you need to do a bit trick in your own defined scrolling function:delete id on your tag and reset it.This should do the trick.Only add this code into jQuery on document readyRef : http://css-tricks.com/snippets/jquery/smooth-scrolling/

Concrete Javascript Regex for Accented Characters (Diacritics)

Chris Cirefice

[Concrete Javascript Regex for Accented Characters (Diacritics)](https://stackoverflow.com/questions/20690499/concrete-javascript-regex-for-accented-characters-diacritics)

I've looked on Stack Overflow (replacing characters.. eh, how JavaScript doesn't follow the Unicode standard concerning RegExp, etc.) and haven't really found a concrete answer to the question:How can JavaScript match for accented characters (those with diacritical marks)?I'm forcing a field in a UI to match the format: last_name, first_name (last [comma space] first), and I want to provide support for diacritics, but evidently in JavaScript it's a bit more difficult than other languages/platforms.This was my original version, until I wanted to add diacritic support:/^[a-zA-Z]+,\s[a-zA-Z]+$/Currently I'm debating one of three methods to add support, all of which I have tested and work (at least to some extent, I don't really know what the "extent" is of the second approach). Here they are:Here are my concerns:So the real question(s): Which of these three approaches is most suited for the task? Or are there better solutions?

2013-12-19 19:54:43Z

I've looked on Stack Overflow (replacing characters.. eh, how JavaScript doesn't follow the Unicode standard concerning RegExp, etc.) and haven't really found a concrete answer to the question:How can JavaScript match for accented characters (those with diacritical marks)?I'm forcing a field in a UI to match the format: last_name, first_name (last [comma space] first), and I want to provide support for diacritics, but evidently in JavaScript it's a bit more difficult than other languages/platforms.This was my original version, until I wanted to add diacritic support:/^[a-zA-Z]+,\s[a-zA-Z]+$/Currently I'm debating one of three methods to add support, all of which I have tested and work (at least to some extent, I don't really know what the "extent" is of the second approach). Here they are:Here are my concerns:So the real question(s): Which of these three approaches is most suited for the task? Or are there better solutions?The easier way to accept all accents is this: See https://unicode-table.com/en/ for characters listed in numeric order.The accented Latin range \u00C0-\u017F was not quite enough for my database of names, so I extended the regex to I added these code blocks (\u00C0-\u024F includes three adjacent blocks at once):Note that \u00C0-\u00FF is actually just a part of Latin-1 Supplement. That range skips unprintable control signals and all symbols except for the awkwardly-placed multiply × \u00D7 and divide &div; \u00F7.If you need more code points, you can find more ranges on Wikipedia's List of Unicode characters. For example, you could also add Latin Extended-C, D, and E, but I left them out because only historians seem interested in them now, and the D and E sets don't even render correctly in my browser.The original regex stopping at \u017F borked on the name "Șenol". According to FontSpace's Unicode Analyzer, that first character is \u0218, LATIN CAPITAL LETTER S WITH COMMA BELOW. (Yeah, it's usually spelled with a cedilla-S \u015E, "Şenol." But I'm not flying to Turkey to go tell him, "You're spelling your name wrong!")Depends on the task :-) To match exactly all Latin characters and their accented versions, the Unicode ranges probably provide the best solution. They might be extended to all non-whitespace characters, which could be done using the \S character class.The most basic problem I'm seeing here are not diacritics, but whitespaces. There are a few names that consist of multiple words, e.g. for titles. So you should go with the most generic, that is allowing everything but the comma that distinguishes first from last name:But your second solution with the . character class is just as fine, you only might need to care about multiple commata then.The XRegExp library has a plugin named Unicode that helps solve tasks like this.It's mentioned in the comments to the question, but it's easy to miss. I've noticed it only after I submitted this answer.How about this?What about this?It will match every word with accented characters or not.from this wiki : https://en.wikipedia.org/wiki/List_of_Unicode_characters#Basic_Latinfor latin letters, I use it avoids hyphens and specials charsExplanation:Unlike other proposed regex (such as [A-Za-zÀ-ÖØ-öø-ÿ]), this will work with all language specific characters, e.g. Šš is matched by this rule, but not matched by others on this page.Unfortunately, natively JavaScript does not support these classes. However, you can use xregexp, e.g.

How do I get a value of a <span> using jQuery?

Felipe Barreiros

[How do I get a value of a <span> using jQuery?](https://stackoverflow.com/questions/1921342/how-do-i-get-a-value-of-a-span-using-jquery)

This is basic.How do I get the value 'This is my name' of the above span?

2009-12-17 12:10:23Z

This is basic.How do I get the value 'This is my name' of the above span?I think this should be a simple example:or Assuming you intended it to read id="item1", you need$('#item1').text(); or $('#item1').html(); works fine for id="item1"Since you did not provide an attribute for the 'item' value, I am assuming a class is being used:Make sure you wait for the DOM to load to use your code, in jQuery you use the ready() function for that:In javascript wouldn't you use getelementbyid('item1').innertext?$('#id span').text() is the answer!$('#item1 span').html(); Its working with my codeVERY IMPORTANT Additional info on difference between .text() and .html():If your selector selects more than one item, e.g you have two spans like so

<span class="foo">bar1</span>

<span class="foo">bar2</span>

,then$('.foo').text(); appends the two texts and give you that; whereas$('.foo').html(); gives you only one of those.

Uncaught ReferenceError: ytcfg is not defined (also __ytRIL is not defined)

Thomas Vanier

[Uncaught ReferenceError: ytcfg is not defined (also __ytRIL is not defined)](https://stackoverflow.com/questions/40622204/uncaught-referenceerror-ytcfg-is-not-defined-also-ytril-is-not-defined)

I have been using the YouTube IFrame Player API without problem for months and started to see this exception recently when the player loads:

Uncaught ReferenceError: ytcfg is not defined

Inspecting the iframe, I see a successful call to yt.setConfig, but ytcfg.set fails later. Was the API changed recently? Any player parameter could cause this problem?There several variations of this issue:  https://issuetracker.google.com/issues/35178202 "ytcfg is not defined"

https://issuetracker.google.com/issues/35177930 "__ytRIL is not defined"

2016-11-16 00:39:45Z

I have been using the YouTube IFrame Player API without problem for months and started to see this exception recently when the player loads:

Uncaught ReferenceError: ytcfg is not defined

Inspecting the iframe, I see a successful call to yt.setConfig, but ytcfg.set fails later. Was the API changed recently? Any player parameter could cause this problem?There several variations of this issue:  https://issuetracker.google.com/issues/35178202 "ytcfg is not defined"

https://issuetracker.google.com/issues/35177930 "__ytRIL is not defined"This is a Google bug. It also happens on Youtube's developer page. https://developers.google.com/youtube/youtube_subscribe_buttonThe following bugs tracks this issue.https://code.google.com/p/gdata-issues/issues/detail?id=8569  (Still active -as of Jan 5h 2017)Please up vote on this bug using the links below so that it gets their attention. They have been sitting on it since Sep 9, 2016!!. It looks like the bug is on youtube's side. You can see the same JS error here: https://www.youtube.com/embed/U-xetxYwyakThis started happening even on youtube.com when you click the "Share" button under any video and then the "Embed" tab to copy paste the embedding html code. Definitely their fault.I had the same issue. Temporary fix was using objects instead of iframes. It worked for me.

How can I rethrow an exception in Javascript, but preserve the stack?

Geoff

[How can I rethrow an exception in Javascript, but preserve the stack?](https://stackoverflow.com/questions/3734236/how-can-i-rethrow-an-exception-in-javascript-but-preserve-the-stack)

In Javascript, suppose I want to perform some cleanup when an exception happens, but let the exception continue to propagate up the stack, eg:The problem with this code is that catching and rethrowing the exception causes the stack trace information up to that point to be lost, so that if the exception is subsequently caught again, higher up on the stack, the stack trace only goes down to the re-throw. This sucks because it means it doesn't contain the function that actually threw the exception.As it turns out, try..finally has the same behavior, in at least Chrome (that is, it is not the re-throw that is the problem precisely, but the presence of any exception handler block at all.)Does anyone know of a way to rethrow an exception in Javascript but preserve the stack trace associated with it? Failing that, how about suggestions for other ways to add exception-safe cleanup handlers, while also capturing complete stack traces when an exception happens?Thanks for any pointers :)

2010-09-17 09:46:17Z

In Javascript, suppose I want to perform some cleanup when an exception happens, but let the exception continue to propagate up the stack, eg:The problem with this code is that catching and rethrowing the exception causes the stack trace information up to that point to be lost, so that if the exception is subsequently caught again, higher up on the stack, the stack trace only goes down to the re-throw. This sucks because it means it doesn't contain the function that actually threw the exception.As it turns out, try..finally has the same behavior, in at least Chrome (that is, it is not the re-throw that is the problem precisely, but the presence of any exception handler block at all.)Does anyone know of a way to rethrow an exception in Javascript but preserve the stack trace associated with it? Failing that, how about suggestions for other ways to add exception-safe cleanup handlers, while also capturing complete stack traces when an exception happens?Thanks for any pointers :)This is a bug in Chrome.  Rethrowing an exception should preserve the call trace.http://code.google.com/p/chromium/issues/detail?id=60240I don't know of any workaround.I don't see the problem with finally.  I do see exceptions silently not showing up on the error console in some cases after a finally, but that one seems to be fixed in development builds.The stack property of an Error object is created at the same time as the Error object itself, not at the point it's thrown.  They're often the same because of the idiomand if you use the code just as you've written it, the stack property will not be changed when you rethrow the error.

Is JSON Hijacking still an issue in modern browsers?

Rocketman

[Is JSON Hijacking still an issue in modern browsers?](https://stackoverflow.com/questions/16289894/is-json-hijacking-still-an-issue-in-modern-browsers)

I am using Backbone.js and the Tornado web server.  The standard behavior for receiving collection data in Backbone is to send as a JSON Array.On the other hand, Tornado's standard behavior is to not allow JSON Array's due to the following vulnerability:http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspxA related one is:

http://haacked.com/archive/2009/06/25/json-hijacking.aspxIt feels more natural for me to not have to wrap up my JSON in an object when it really is a list of objects.I was unable to reproduce these attacks in modern browsers (i.e. current Chrome, Firefox, Safari, and IE9).  At the same time I was unable to confirm anywhere that modern browsers had addressed these issues.To ensure that I am mislead neither by any possible poor programming-skills nor poor googling-skills:Are these JSON Hijacking attacks still an issue today in modern browsers?(Note:  Sorry for the possible duplicate to: Is it possible to do 'JSON hijacking' on modern browser?  but since the accepted answer does not seem to answer the question - I thought it was time to ask it again and get some clearer explanations.)

2013-04-29 23:28:45Z

I am using Backbone.js and the Tornado web server.  The standard behavior for receiving collection data in Backbone is to send as a JSON Array.On the other hand, Tornado's standard behavior is to not allow JSON Array's due to the following vulnerability:http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspxA related one is:

http://haacked.com/archive/2009/06/25/json-hijacking.aspxIt feels more natural for me to not have to wrap up my JSON in an object when it really is a list of objects.I was unable to reproduce these attacks in modern browsers (i.e. current Chrome, Firefox, Safari, and IE9).  At the same time I was unable to confirm anywhere that modern browsers had addressed these issues.To ensure that I am mislead neither by any possible poor programming-skills nor poor googling-skills:Are these JSON Hijacking attacks still an issue today in modern browsers?(Note:  Sorry for the possible duplicate to: Is it possible to do 'JSON hijacking' on modern browser?  but since the accepted answer does not seem to answer the question - I thought it was time to ask it again and get some clearer explanations.)No, it is no longer possible to capture values passed to the [] or {} constructors in Firefox 21, Chrome 27, or IE 10. Here's a little test page, based on the main attacks described in http://www.thespanner.co.uk/2011/05/30/json-hijacking/:(http://jsfiddle.net/ph3Uv/2/)It overrides window.Array and adds a setter to Object.prototype.foo and tests initializing arrays and objects via the short and long forms.The ES4 spec, in section 1.5, "requires the global, standard bindings of Object and Array to be used to construct new objects for object and array initializers" and notes in Implementation Precedent that "Internet Explorer 6, Opera 9.20, and Safari 3 do not respect either local or global rebindings of Object and Array, but use the original Object and Array constructors." This is retained in ES5, section 11.1.4.Allen Wirfs-Brock explained that ES5 also specifies that object initialization should not trigger setters, as it uses DefineOwnProperty. MDN: Working with Objects notes that "Starting in JavaScript 1.8.1, setters are no longer called when setting properties in object and array initializers." This was addressed in V8 issue 1015.

Chrome refuses to execute an AJAX script due to wrong MIME type

Paul Nelligan

[Chrome refuses to execute an AJAX script due to wrong MIME type](https://stackoverflow.com/questions/24528211/chrome-refuses-to-execute-an-ajax-script-due-to-wrong-mime-type)

I'm trying to access a script as JSON via AJAX, which works fine on Safari and other browsers but unfortunately will not execute in Chrome. It's coming with the following error:Here's the request:Does anyone have a workaround for this?

2014-07-02 09:59:53Z

