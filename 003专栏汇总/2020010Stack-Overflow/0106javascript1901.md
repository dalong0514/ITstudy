I have a large amount of numeric values y in javascript.  I want to group them by rounding them down to the nearest multiple of x and convert the result to a string. How do I get around the annoying floating point precision?  For example:Two things I have tried:and:From this post: How to deal with floating point number precision in JavaScript?You have a few options:You could do something like this:Quick solution:You can check the full explanation here.Check out this link.. It helped me a lot.http://www.w3schools.com/jsref/jsref_toprecision.aspThe toPrecision(no_of_digits_required) function returns a string so don't forget to use the parseFloat() function to convert to decimal point of required precision.Tackling this task, I'd first find the number of decimal places in x, then round y accordingly. I'd use:It should convert x to a string, split it over the decimal point, find the length of the right part, and then y.toFixed(length) should round y based on that length.

What is the difference between JavaScript promises and async await?

bozzmob

[What is the difference between JavaScript promises and async await?](https://stackoverflow.com/questions/34401389/what-is-the-difference-between-javascript-promises-and-async-await)

I have been using ECMAScript 6 and ECMAScript 7 features already (thanks to Babel) in my applications - both mobile and web.The first step obviously was to ECMAScript 6 levels. I learnt many async patterns, the promises (which are really promising), generators (not sure why the * symbol), etc.

Out of these, promises suited my purpose pretty well. And I have been using them in my applications quite a lot.Here is an example/pseudocode of how I have implemented a basic promise-As time passed, I came across ECMAScript 7 features, and one of them being ASYNC and AWAIT keywords/functions. These in conjunction do great wonders. I have started to replace some of my promises with async & await. They seem to add great value to programming style.Again, here is a pseudocode of how my async, await function looks like-Keeping the syntax errors (if any) aside, both of them do the exact same thing is what I feel. I have almost been able to replace most of my promises with async,awaits.Why is async,await needed when promises do a similar job?Does async,await solve a bigger problem? Or was it just a different solution to callback hell?As I said earlier, I am able to use promises and async,await to solve the same problem. Is there anything specific that async await solved?Additional notes:I have been using async,awaits and promises in my React projects and Node.js modules extensively.

React especially have been an early bird and adopted a lot of ECMAScript 6 and ECMAScript 7 features.

2015-12-21 17:37:54Z

I have been using ECMAScript 6 and ECMAScript 7 features already (thanks to Babel) in my applications - both mobile and web.The first step obviously was to ECMAScript 6 levels. I learnt many async patterns, the promises (which are really promising), generators (not sure why the * symbol), etc.

Out of these, promises suited my purpose pretty well. And I have been using them in my applications quite a lot.Here is an example/pseudocode of how I have implemented a basic promise-As time passed, I came across ECMAScript 7 features, and one of them being ASYNC and AWAIT keywords/functions. These in conjunction do great wonders. I have started to replace some of my promises with async & await. They seem to add great value to programming style.Again, here is a pseudocode of how my async, await function looks like-Keeping the syntax errors (if any) aside, both of them do the exact same thing is what I feel. I have almost been able to replace most of my promises with async,awaits.Why is async,await needed when promises do a similar job?Does async,await solve a bigger problem? Or was it just a different solution to callback hell?As I said earlier, I am able to use promises and async,await to solve the same problem. Is there anything specific that async await solved?Additional notes:I have been using async,awaits and promises in my React projects and Node.js modules extensively.

React especially have been an early bird and adopted a lot of ECMAScript 6 and ECMAScript 7 features.async/await simply gives you a synchronous feel to asynchronous code. It's a very elegant form of syntactical sugar.For simple queries and data manipulation, Promises can be simple, but if you run into scenarios where there's complex data manipulation and whatnot involved, it's easier to understand what's going on if the code simply looks as though it's synchronous (to put it another way, syntax in and of itself is a form of "incidental complexity" that async/await can get around).If you're interested to know, you can use a library like co (alongside generators) to give the same sort of feel. Things like this have been developed to solve the problem that async/await ultimately solves (natively).Async/Await provide a much nicer syntax in more complex scenarios. In particular, anything dealing with loops or certain other constructs like try/catch.For example:This example would be considerably more convoluted just using Promises.The first things you have to understand that async/await syntax is just syntactic sugar which is meant to augment promises. In fact the return value of an async function is a promise. async/await syntax gives us the possibility of writing asynchronous in a synchronous manner. Here is an example:Promise chaining:Async function:In the above example the await waits for the promise (fetch(url)) to be either resolved or rejected. If the promise is resolved the value is stored in the response variable, and if the promise is rejected it would throw an error and thus enter the catch block.We can already see that using async/await might be more readable than promise chaining. This is especially true when the amount of promises which we are using increases. Both Promise chaining and async/await solve the problem of callback hell and which method you choose is matter of personal preference.Full comparison with pros and cons.Plain JavaScript Async (library)PromisesGeneratorsAsync awaitAsync/await can help make your code cleaner and more readable in cases where you need complicated control flow. It also produces more debug-friendly code. And makes it possible to handle both synchronous and asynchronous errors with just try/catch.I recently wrote this post showing the advantages of async/await over promises in some common use cases with code examples: 6 Reasons Why JavaScript Async/Await Blows Promises Away (Tutorial)

webpack --watch isn't compiling changed files

alcedo

[webpack --watch isn't compiling changed files](https://stackoverflow.com/questions/26708205/webpack-watch-isnt-compiling-changed-files)

I tried running webpack --watch and after editing my JS files, it doesn't trigger an auto-recompilation. I've tried reinstalling webpack using npm uninstall but it's still not working.Any ideas?

2014-11-03 05:17:25Z

I tried running webpack --watch and after editing my JS files, it doesn't trigger an auto-recompilation. I've tried reinstalling webpack using npm uninstall but it's still not working.Any ideas?FYI: it seems OS X can have a folder get corrupted and no longer send fsevents (which watchpack/chokidar/Finder uses) for itself and any child folders. I can't be sure this is what happened to you, but it was very frustrating for me and a colleague.We were able to rename the corrupt parent folder and then watch events immediately came through as expected. See this blog post for more info: http://feedback.livereload.com/knowledgebase/articles/86239-os-x-fsevents-bug-may-prevent-monitoring-of-certaiThe recommended fixes from the above link are:First two did not work for us, didn't try the Spotlight suggestion, and the re-creation did not prove necessary.We were able to find the root problem folder by opening Finder and creating files in each successive parent folder until one showed up immediately (since Finder will get hosed by this bug as well). The root-most folder that does not update is the culprit. We just mv'd it and mv'd it back to its original name, and then the watcher worked.No idea what causes the corruption, but I'm just glad to have a fix.If your code isn't being recompiled, try increasing the number of watchers (in Ubuntu):Source: https://webpack.github.io/docs/troubleshooting.htmlAdding the following code to my webpack configuration file fixed the issue for me, hope this helps.

Don't forget to ignore your node_modules folder, as that would kill performance for HMR (Hot Module Replacement):I have had this problem when working with WebStorm.  Disabling Settings -> System Settings -> "safe write" resolved it for me.Found the recommendation to do so in: WebPack TroubleshootingJust to add to possible solutions: 

I had my project folder inside a Dropbox folder, moving it out solved the problem for me. (OS X)One issue is that if your path names aren't absolute then things like this will happen. I had accidentally set resolve.root to ./ instead of __dirname and this caused me to waste a lot of time deleting and re-creating files like the guys above me.If changing fs.inotify.max_user_watches as pointend out by César still doesn't work try to use polling instead of native watchers by creating your script as shown in the docs or running webpack with --watch --watch-poll options.Work for me in Laravel HomesteadFolder case sensitivity was my issue. My code calls to require() had all lowercase path names BUT the actually directories had an uppercase letter in them. I renamed all my directories to lowercase and webpack watching worked instantly.Updates: deleting the entire directory and git cloning afresh from repo fixes my problem. If you are using Vim you should try setting backupcopy to yes rather than the default auto. Otherwise Vim will sometimes rename the original file and create a new one, which will mess up with webpack watch:https://github.com/webpack/webpack/issues/781Just add this to your vim settings if this is the case:set backupcopy=yesNote that if you run webpack within a virtual machine (Vagrant / Virtualbox) and you change your files on the host platform, file updates in the shared folder may not trigger inotify on Ubuntu. That will cause the changes to not be picked up by webpack.see: Virtualbox ticket #10660In my case, editing and saving the file on de guest (in vi) did trigger webpack. Editing it on the host (in PhpStorm, Notepad or any other application) dit NOT trigger webpack whatever I did.I solved it by using vagrant-fsnotify. I was having the same issue on a .vue file.

When the server restarted all worked fine, but on the next save it didn't recompiled anymore. 

The issue was  on the import file path that had one letter capitalized. It's very hard to figure this issue because everything works on a server reboot. Check the case of your paths.It wasn't recompiling for me but then I realized / remembered that webpack watches the dependency graph and not just a folder (or files). Sure enough the files I was changing weren't part of that graph yet.For me, creating folders and files in VS Code was the issue. To fix, I re-cloned my repo and this time, created new folders and files through the command line instead of Code. I think Code was corrupting the files for some reason. I saw the application just updated so maybe it's a new bug.The way I resolved the issue was finding a capitalization error in an import path. Folder on file system had lower case first letter, import path was upper case. Everything compiled fine, so this was just a webpack watch include issue.I have the same issue. And I notice it's not compiling because my folder contains some character(*). And using the old watcher plugin seems to resolve the issue.

Add this line to your webpack config file.I had similar issue, neither webpack or rollup in watch mode ware catching the changes I made. I found out that it was basically my fault as I was changing module (.tsx file) which wasn't yet imported anywhere in the application (for example App.ts which is entry point) and I was expecting build tools to report errors I made there.For me deleting node_modules and doing npm install or yarn again to install all the packages solved the problemAlso had this issue inside a VirtualBox (5.2.18) Ubuntu (18.04) VM using Vagrant (2.1.15) with rsync synchronization. Suddenly, first build runs great but Webpack does not take the changes into consideration afterwards, even with fs.inotify.max_user_watches=524288 set. Adding poll: true in Webpack config didn't help either.Only vagrant-notify-forwarder worked (vagrant-fsnotify didn't, for some reason), but then the rebuild happened too quickly after saving the file on the host and I suppose that rsync didn't have enough time to finish its task (maybe due to the amount of synced directories inside my Vagrantfile?).Finally I made the watch work again by also increasing the aggregateTimeout in my Webpack config:If this solution works for you, try lowering this value again, otherwise you'll have to wait 10 seconds until the build restarts each time you hit save. The default value is 300 ms.An easy solution on MacOS is the following :Open two terminal windows in the same directory that your project resides.In the first terminal window run : webpack --watchIn the second terminal windows run : webpack-dev-serverI have tried many possible solutions and this seems to be the most reliablePossible solution: changing context to the app directory.I had all my webpack config files in a sub folder:In webpack/development.js, set context: path.join(__dirname, '../') solved my problem.After trying a handful of strategies for fixing this problem I ended up just giving up but then while solving another issue I tried again and all of sudden the --watch flag was finally working.To be honest I do not know what specifically made it work but after performing the following steps it just started working:It might have happened that while installing these packages some dependency just added the missing piece of the puzzle, who knows ...Hope this help anyone struggling out there to make it working.I am adding another answer because I believe that this is the best solution so far.

I am using it every day and it rocks!

Just install this library :https://github.com/gajus/write-file-webpack-pluginDescription :

Forces webpack-dev-server program to write bundle files to the file system.How to install :Try changing --watch to -d --watch worked for meIf this happened suddenly in your project, then this could fix the issue.Maybe somehow the files which were tracking your project changes which webpack looks for got corrupted.

You can create them again just by following simple steps.I came across this question when I was having a similar issue-- it appeared that webpack was not rebundling, even when running webpack --config. I even deleted bundle.js and the webpage was still displaying as before my edits.For those of you who get this same problem, I finally did the 'empty cache and hard reload' option in chrome (right click the reload button with the devtools open) and that did that trickI met the same issue, tried many things, finally Chrome Clear Browsing Data on Mac worked for me.These modules have been installed:"browser-sync": "^2.26.7","browser-sync-webpack-plugin": "^2.2.2","webpack": "^4.41.2","webpack-cli": "^3.3.9"The thing is: webpack loads script from some weird url: webpack:/// which is cached.

You should add version at the end of your script to prevent caching: 

main-compiled.js?v=<?php echo time()?>"

Using socket.io in Express 4 and express-generator's /bin/www

user1576978

[Using socket.io in Express 4 and express-generator's /bin/www](https://stackoverflow.com/questions/24609991/using-socket-io-in-express-4-and-express-generators-bin-www)

So here is the deal: I'm trying to use socket.io in an express project. After Express Js 4 was lauched, i've updated my express-generator and now the app initial functions goes into ./bin/www file, including those vars (www file contents: http://jsfiddle.net/avMa5/ )(check it by npm install -g express-generator and then express myAppthat being said, let's remember how socket.io docs ask us to fire it:Ok but i can't do it inside app.js, like recommended. This should be done in ./bin/www in order to work. in ./bin/www this is what i can do to get it working:Ok this works, but i can't use the io var anywhere else, and i really don't want to put my socket.io functions on www file. I guess this is just basic syntax, but I can't get this to work, not even using module.exports = server or server.exports = server nor module.exports.io = app(io) on www fileSo the question is: how can i use socket.io having this /bin/www file as starting point of my app?

2014-07-07 11:54:33Z

So here is the deal: I'm trying to use socket.io in an express project. After Express Js 4 was lauched, i've updated my express-generator and now the app initial functions goes into ./bin/www file, including those vars (www file contents: http://jsfiddle.net/avMa5/ )(check it by npm install -g express-generator and then express myAppthat being said, let's remember how socket.io docs ask us to fire it:Ok but i can't do it inside app.js, like recommended. This should be done in ./bin/www in order to work. in ./bin/www this is what i can do to get it working:Ok this works, but i can't use the io var anywhere else, and i really don't want to put my socket.io functions on www file. I guess this is just basic syntax, but I can't get this to work, not even using module.exports = server or server.exports = server nor module.exports.io = app(io) on www fileSo the question is: how can i use socket.io having this /bin/www file as starting point of my app?I have a solution for making socket.io available in app.js.app.js:bin/www:This way, you can access the io variable in your app.js, and even make it available to your routes by defining module.exports as a function which accepts io as a parameter.index.jsThen, pass io into the module after it is setup:app.jsA little different approach to initiate socket.io, it groups all related code in one place:bin/wwwsocketApi.jsapp.jsIn this way all socket.io related code in one module and function from it I can invoke from anywhere in application.It turns out it really was some basic sintax problem.... I got these lines from  this socket.io chat tutorial...on ./bin/www, just after var server = app.listen(.....)so now I create the ../sockets/base.js file and put this little fellow inside it:Yeah! Now it works... So i guess i really had no option other than starting socket.io inside /bin/www , because that is where my http server was started. 

The goal is that now i can build socket functionality in other file(s), keeping the thing modular, by require('fileHere')(io);<3The old "expressjs", everything is happening in the file "app.js". So the socket.io binding to server also happens in that file. (BTW, one can still do it the old way, and remove bin/www)Now with the new expressjs, it needs to happen in the "bin/www" file. Fortunately, javascript/requirejs made it easy to pass objects around. As Gabriel Hautclocq pointed out, socket.io is still "imported" in "app.js" and it gets attached to "app" object via a propertyThe socket.io is made live by attaching to it the server in "bin/www"because "app" object is passed into "bin/www" earlierIt's really just as simple as But doing it the "difficult" way ensures that app.io now holds the socke.io object. Now if you need this socket.io object also in "routes/index.js" for example, just use the same principle to pass that object around.First in "app.js", doThen in "routes/index.js"So "io" gets injected into "index.js".Update to Gabriel Hautclocq's response:In www file, the code should appear as the following due to updates with Socket.io. Attach is now Listen.Additionally getting that connection to work requires implementing the client side API as well. This isn't Express specific but without it the connect call won't work. The API is included in Include this file on the front end and test with the following:After reading through all of the comments, I came up with the following using Socket.io Server Version: 1.5.0Issues that I ran into:StepsA tutorial for beginners from Cedric Pabst

here are the short basics form the link for an app chat:using express-generate 

and the ejs engine

usable in every .ejs file standard routing in express-generateedit the file bin\www and add this app.io.attach(server); like thisedit in app.js edit in index.ejsHave fun :)

and thanks many to  Cedric PabstSome previous answers are not working and others are overly complicated. Try the following solution instead...Install server-side and client-side socket.io node modules:Add the following code to bin/www after the server definition, var server = http.createServer(app);:If using webpack, add the following code to your webpack entry.js file:Done. Visit your site and check the browser's js developer console.

Generate random password string with requirements in javascript

ffffff01

[Generate random password string with requirements in javascript](https://stackoverflow.com/questions/9719570/generate-random-password-string-with-requirements-in-javascript)

I want to generate a random string that has to have 5 letters from a-z and 3 numbers. How can I do this with JavaScript?I've got the following script, but it doesn't meet my requirements.

2012-03-15 12:21:02Z

I want to generate a random string that has to have 5 letters from a-z and 3 numbers. How can I do this with JavaScript?I've got the following script, but it doesn't meet my requirements.Forcing a fixed number of characters is a bad idea. It doesn't improve the quality of the password. Worse, it reduces the number of possible passwords, so that hacking by bruteforcing becomes easier.To generate a random word consisting of alphanumeric characters, use:Documentation for the Number.prototype.toString and string.prototype.slice methods.A little more maintainable and secure approach.Many answers (including the original of this one) don't address the letter- and number-count requirements of the OP. Below are two solutions: general (no min letters/numbers), and with rules.I believe this is better general solution than the above, because:Note thatThree-liner:Or, as one-liner:Now, a variation on the above. This will generate three random strings from the given charsets (letter, number, either) and then scramble the result. Please note the below uses sort() for illustrative purposes only. For production use, replace the below sort() function with a shuffle function such as Durstenfeld.First, as a function:Same thing, as a 2-liner (admittedly, very long and ugly lines-- and won't be a 1-liner if you use a proper shuffle function. Not recommended but sometimes it's fun anyway) :This isn't exactly optimized, but it should work.​

​

​Here's a jsfiddle for you to test on: http://jsfiddle.net/sJGW4/3/I have written a small one inspired from your answer:This function returns the password and can be used in bookmarklet like:In case you need a password generated with at least 1 number, 1 upper case character, and 1 lower case character:Here's the fiddle if you want to play/test: http://jsfiddle.net/sJGW4/155/Props to @mwag for giving me the start to create this.As @RobW notes, restricting the password to a fixed number of characters as proposed in the OP scheme is a bad idea. But worse, answers that propose code based on Math.random are, well, a really bad idea.Let's start with the bad idea. The OP code is randomly selecting a string of 8 characters from a set of 62. Restricting the random string to 5 letters and 3 numbers means the resulting passwords will have, at best, 28.5 bits of entropy (as opposed to a potential of 47.6 bits if the distribution restriction of 5 letters and 3 numbers were removed). That's not very good. But in reality, the situation is even worse. The at best aspect of the code is destroyed by the use of Math.random as the means of generating entropy for the passwords. Math.random is a pseudo random number generator. Due to the deterministic nature of pseudo random number generators the entropy of the resulting passwords is really bad , rendering any such proposed solution a really bad idea. Assuming these passwords are being doled out to end users (o/w what's the point), an active adversary that receives such a password has very good chance of predicting future passwords doled out to other users, and that's probably not a good thing.But back to the just bad idea. Assume a cryptographically strong pseudo random number generator is used instead of Math.random. Why would you restrict the passwords to 28.5 bits? As noted, that's not very good. Presumably the 5 letters, 3 numbers scheme is to assist users in managing randomly doled out passwords. But let's face it, you have to balance ease of use against value of use, and 28.5 bits of entropy isn't much value in defense against an active adversary.But enough of the bad. Let's propose a path forward. I'll use the JavaScript EntropyString library which "efficiently generates cryptographically strong random strings of specified entropy from various character sets". Rather than the OP 62 characters, I'll use a character set with 32 characters chosen to reduce the use of easily confused characters or the formation of English words. And rather than the 5 letter, 3 number scheme (which has too little entropy), I'll proclaim the password will have 60 bits of entropy (this is the balance of ease versus value). Note the argument to random.string is the desired bits of entropy as opposed to more commonly seen solutions to random string generation that specify passing in a string length (which is both misguided and typically underspecified, but that's another story).For someone who is looking for a simplest script. No while (true), no if/else, no declaration.Base on mwag's answer, but this one uses crypto.getRandomValues, a stronger random than Math.random.See this for the magic of 0xffffffff.Open the console and test yourself:If you consider the performance, you might try this:I wouldn't recommend using a forced password as it restricts the User's Security but any way, there are a few ways of doing it -Install random string:Using it in App.js -The Value of your password is being hold in the variable yourString.Forced Password can harm your security as all the passwords would be under the same character set, which might easily be breached!And finally, without using floating point hacks:Secure password with one upperCase char.My Crypto based take on the problem. Using ES6 and omitting any browser feature checks. Any comments on security or performance?Try this, it works.

Download script to your javascript application and call function randomPassword()

https://gist.github.com/enishant/4ba920c71f338e83c7089dc5d6f33a64There is a random password string generator with selected length

Hide header in stack navigator React navigation

Avijit Dutta

[Hide header in stack navigator React navigation](https://stackoverflow.com/questions/44701245/hide-header-in-stack-navigator-react-navigation)

I'm trying to switch screen using both stack and tab navigator.In this case stacknavigator is used first and then tabnavigator. and i want to hide headers of stack navigator. WIt is not working properly when i use navigationoptions like::i'm trying this code on first two components which are using in stacknavigator.

if i use this line then getting some error like:: 

2017-06-22 13:45:25Z

I'm trying to switch screen using both stack and tab navigator.In this case stacknavigator is used first and then tabnavigator. and i want to hide headers of stack navigator. WIt is not working properly when i use navigationoptions like::i'm trying this code on first two components which are using in stacknavigator.

if i use this line then getting some error like:: UPDATE as of version 5As of version 5 it is the option headerShown in screenOptionsExample of usage:See also the blog about version 5 UPDATE

As of version 2.0.0-alpha.36 (2019-11-07),

there is a new navigationOption: headershown  https://reactnavigation.org/docs/en/next/native-stack-navigator.html#headershown

https://github.com/react-navigation/stack/commit/0375864e5a838f984b9fe04a81ab18a0744ac474Old answerI use this to hide the stack bar (notice this is the value of the second param):When you use the this method it will be hidden on all screens. In your case it will look like this:Simply use below code in the page you want to hide the headerrefer to Stack NavigatorJust add this into your class/component code snippet and Header will be hiddenIf your screen is a class componentcode this in your targeted screen as the first method (function).If you want to hide on specific screen than do like this:I am using header : null instead of header : { visible : true } i am using react-native cli. this is the example :If someone searching how to toggle header so in componentDidMount write something like:When And somewhere when event finish job:Add new navigationOptions object in the stackNavigator.Try this : Hope it helps.This worked for me:Usein class/component likeAll the answer are showing how to do it with class components, but for functional components you do:If you remove the header your component may be on places where you can't see it (when the phone don't have square screen) so it's important to use it when removing the header.You can hide header like this:options={{ headerShown: false }} works for me.** "@react-navigation/native": "^5.0.7",

   "@react-navigation/stack": "^5.0.8",In react navigation 5.x you can hide the header for all screens by setting the headerMode prop of the Navigator to false.If you only want to remove it from one screen in react-native-navigation then:In the given solution Header is hidden for HomeScreen by-

 options={{headerShown:false}}I've the same problem but I've done my header work in the individual classes using navigationOptions and I'm using createBottomTabNavigator whose header is visible and the header of classes is not visible. I've tried everything like headerMode: none, header: null and so on, but couldn't hide the header of bottomTabNavigator.

Why do we need to use flatMap?

user233232

[Why do we need to use flatMap?](https://stackoverflow.com/questions/33471526/why-do-we-need-to-use-flatmap)

I am starting to use RxJS and I don't understand why in this example we need to use a function like flatMap or concatAll; where is the array of arrays here?If someone can visually explain what is happening, it will be very helpful. 

2015-11-02 05:54:05Z

I am starting to use RxJS and I don't understand why in this example we need to use a function like flatMap or concatAll; where is the array of arrays here?If someone can visually explain what is happening, it will be very helpful. When I started to have a look at Rxjs I also stumbled on that stone. What helped me is the following:You use flatMap when you have an Observable whose results are more Observables.  If you have an observable which is produced by an another observable you can not filter, reduce, or map it directly because you have an Observable not the data. If you produce an observable choose flatMap over map; then you are okay.As in second snippet, if you are doing async operation you need to use flatMap.flatMap transform the items emitted by an Observable into new Observables, then flattens the emissions from those into a single Observable. Check out the scenario below where get("posts") returns an Observable that is "flattened" by flatMap.People tend to over complicate things by giving the definition which says: I swear this definition still confuses me but I am going to explain it in the simplest way which is by using an exampleOur Situation: we have an observable which returns data(simple URL) that we are going to use to make an HTTP call that will return an observable containing the data we need so you can visualize the situation like this:so as you can see we can't reach the data we need directly so the first way to retrieve the data we can use just normal subscriptions like this:this works but as you can see we have to nest subscriptions to get our data this currently does not look bad but imagine we have 10 nested subscriptions that would become unmaintainable.so a better way to handle this is just to use the operator flatMap which will do the same thing but makes us avoid that nested subscription:Simple:It's not an array of arrays. It's an observable of observable(s).The following returns an observable stream of string.While this returns an observable stream of observable stream of jsonflatMap flattens the observable automatically for us so we can observe the json stream directlyAn Observable is an object that emits a stream of events: Next, Error and Completed. When your function returns an Observable, it is not returning a stream, but an instance of Observable. The flatMap operator simply maps that instance to a stream.That is the behaviour of flatMap when compared to map: Execute the given function and flatten the resulting object into a stream.Here to show equivalent implementation of a flatMap using subscribes.Without flatMap: With flatMap:http://plnkr.co/edit/BHGmEcdS5eQGX703eRRE?p=previewHope it could help.Olivier.With flatMapWithout flatMap

How to join two JavaScript Objects, without using JQUERY [duplicate]

Manu

[How to join two JavaScript Objects, without using JQUERY [duplicate]](https://stackoverflow.com/questions/21450060/how-to-join-two-javascript-objects-without-using-jquery)

I have two json objects obj1 and obj2, i want to merge them and crete a single json object.

The resultant json should have all the values from obj2 and the values from obj1 which is not present in obj2.

2014-01-30 07:16:03Z

I have two json objects obj1 and obj2, i want to merge them and crete a single json object.

The resultant json should have all the values from obj2 and the values from obj1 which is not present in obj2.There are couple of different solutions to achieve this:  1 - Native javascript for-in loop:2 - Object.keys():3 - Object.assign():

(Browser compatibility: Chrome: 45, Firefox (Gecko): 34, Internet Explorer: No support, Edge: (Yes), Opera: 32, Safari: 9)  4 - Spread Operator:

Standardised from ECMAScript 2015 (6th Edition, ECMA-262):Using this new syntax you could join/merge different objects into one object like this:5 - jQuery.extend(target, obj1, obj2):Merge the contents of two or more objects together into the first object.6 - jQuery.extend(true, target, obj1, obj2):Run a deep merge of the contents of two or more objects together into the target. Passing false for the first argument is not supported.7 - Lodash _.assignIn(object, [sources]): also named as _.extend:8 - Lodash _.merge(object, [sources]):There are a couple of important differences between lodash's merge function and Object.assign:1- Although they both receive any number of objects but lodash's merge apply a deep merge of those objects but Object.assign only merges the first level. For instance:BUT:2- Another difference has to do with how Object.assign and _.merge interpret the undefined value:BUT:Update 1:When using for in loop in JavaScript, we should be aware of our environment specially the possible prototype changes in the JavaScript types. For instance some of the older JavaScript libraries add new stuff to Array.prototype or even Object.prototype.

To safeguard your iterations over from the added stuff we could use object.hasOwnProperty(key) to mke sure the key is actually part of the object you are iterating over.Update 2:   I updated my answer and added the solution number 4, which is a new JavaScript feature but not completely standardized yet. I am using it with Babeljs which is a compiler for writing next generation JavaScript.Update 3:

I added the difference between Object.assign and _.merge. WORKING FIDDLESimplest Way with Jquery -Without Jquery -Just another solution using underscore.js:1) 2)3) Simplest way:I've used this function to merge objects in the past, I use it to add or update existing properties on obj1 with values from obj2:It will handle multiple levels of hierarchy as well as single level objects. I used it as part of a utility library for manipulating JSON objects. You can find it here.This simple function recursively merges JSON objects, please notice that this function merges all JSON into first param (target), if you need new object modify this code.BTW instead of isObject() function may be used condition like this:but this is not good solution, because it's will take a lot of resources if we have large JSON objects.

Render value without data-binding

Blowsie

[Render value without data-binding](https://stackoverflow.com/questions/18790333/render-value-without-data-binding)

In AngularJS, how can I render a value without 2-way data binding? One may want to do this for performance reasons, or even rendering a value at a given point in time.The following examples both use data binding:<div>{{value}}</div><div data-ng-bind="value"></div>How do I render value without any data binding?

2013-09-13 15:44:20Z

In AngularJS, how can I render a value without 2-way data binding? One may want to do this for performance reasons, or even rendering a value at a given point in time.The following examples both use data binding:<div>{{value}}</div><div data-ng-bind="value"></div>How do I render value without any data binding?Angular 1.3+In 1.3, Angular has supported this using the following syntax.As mentioned in this answer.Angular 1.2 and belowThis is simple and doesn't need a plugin. Check this out.This small directive will easily accomplish what you are trying to achieve You can bind once like this You can bind like normal Demo: http://jsfiddle.net/fffnb/Some of you may be using angular batarang, and as mentioned in the comments if you use this directive the element still shows as binding when it is not, I am pretty sure this has something to do with the classes that are attached to the element so try this, it should work (not tested). Let me know in the comments if it worked for you.@x0b: If you have OCD and you want to remove the empty class attribute do this It looks like Angular 1.3 (starting with beta 10) has one-time binding built in:https://docs.angularjs.org/guide/expression#one-time-bindingUse the bindonce module.  You'll need to include the JS file and add it as a dependency to your app module:This library allows you to render items that are bound only once — when they are first initialized.  Any further updates to those values will be ignored.  It's a great way to reduce the number of watches on the page for things that won't change after they are rendered.Usage example:When used like this, the property under value will be set once it is available, but then the watch will be disabled.Comparison between @OverZealous and @Connor answers :With the traditional ngRepeat of angular : 15s for 2000 rows and 420mo of RAM (Plunker)With ngRepeat and the module of @OverZealous : 7s for 2000 rows and 240mo of RAM(Plunker)With ngRepeat and the directive of @Connor : 8s for 2000 rows and 500mo of RAM (Plunker)I made my tests with Google Chrome 32.As an alternative, there is angular-once package:angular-once was actually inspired by bindonce and provides similar once-* attributes:

How to sort an array based on the length of each element?

ramesh kumar

[How to sort an array based on the length of each element?](https://stackoverflow.com/questions/10630766/how-to-sort-an-array-based-on-the-length-of-each-element)

I have an array like this:   After sorting, the output array should be:I mean, I want in the descending order of the length of each element.

2012-05-17 06:17:09Z

I have an array like this:   After sorting, the output array should be:I mean, I want in the descending order of the length of each element.You can use Array.sort method to sort the array. A sorting function that considers the length of string as the sorting criteria can be used as follows:Note: sorting ["a", "b", "c"] by length of string is not guaranteed to return ["a", "b", "c"]. According to the specs:If the objective is to sort by length then by dictionary order you must specify additional criteria:Here is the sort, depending on the length of a string with javascript as you asked:[the solution of the problem by bubble sort][1][1]: http://jsfiddle.net/sssonline2/vcme3/2/enter code hereWe can use Array.sort method to sort this array.Attention: not all browsers can understand ES6 code!In ES6 we can use an arrow function expressions.Based on Salman's answer, I've written a small function to encapsulate it: then just call it withNote that unfortunately, functions can/should not be added to the Array prototype, as explained on this page.Also, it modified the array passed as a parameter and doesn't return anything. This would force the duplication of the array and wouldn't be great for large arrays. If someone has a better idea, please do comment!I adapted @shareef's answer to make it concise. I use,.sort(function(arg1, arg2) { return arg1.length - arg2.length })The anonymous function that you pass to sort tells it how to sort the given array.hope this helps.I know this is confusing but you can tell the sort function how to sort the elements of the array by passing it a function as a parameter telling it what to do

How to check with javascript if connection is local host?

chobo2

[How to check with javascript if connection is local host?](https://stackoverflow.com/questions/3162457/how-to-check-with-javascript-if-connection-is-local-host)

I want to have a check in my javascript if the page loading up is on my local machine.The reason why I want to do that is that when I developing I like to make sure that both my server side(C#) validation is working correctly. So I like to see both the client side and server sides errors to show up.So while I am testing I have a flag in my jquery validate stuff that just always lets invalid data go through. This way I see the client side and server errors at one go.However right now I have to manually go and change back and forth when going from development to production.

2010-07-01 23:50:43Z

I want to have a check in my javascript if the page loading up is on my local machine.The reason why I want to do that is that when I developing I like to make sure that both my server side(C#) validation is working correctly. So I like to see both the client side and server sides errors to show up.So while I am testing I have a flag in my jquery validate stuff that just always lets invalid data go through. This way I see the client side and server errors at one go.However right now I have to manually go and change back and forth when going from development to production.The location.hostname variable gives you the current host. That should be enough for you to determine which environment you are in.if launching static html in browser, eg from location like file:///C:/Documents and Settings/Administrator/Desktop/ detecting "localhost" will not work. location.hostname will return empty string. soStill not a catch all but it might be a little improvement.

You can now create an array of domains and use .includesAn easy way to do this would be to just check the hostname against localhost or check your custom domain name against a substring, in this case ".local" urls, such as http://testsite.localShortest form using same mechanic as other scripts:That's how it get checked in React, register service worker, good way to check if you are on localhost by checking hostname, including  localhost and IPv6, and matching start with 127:You could detect in one of your code behind pages with c#, like this:Or if you want to do it from client script, you could check the value of window.location.host.Hope this helps.The above answers mostly solve the problem but...One solution is to set the location hash and check it.http://myname.foo.com/form.html#devValidationYou could add unlimited options with a switchRegular expression is slower*, but short and neat. Also, nobody here checks for IPv6 localhost (::1)It checks for general localhost, .local domain and file: (empty hostname).*) In Chrome, performance of [].includes(...) is the best (42 ms), followed by simple loop (for, while) with array item checking (119 ms), then [].indexOf(...) > -1 (289 ms) and finally the regexp (566 ms).

But those measurements are somehow relative, because different browsers are optimized differently. In FF 52 ESR includes and indexOf have similar results, regexp is 2× slower and loop 6× slower.Based on the above comments th following regular expression has helped me to verify 

if the url is 'localhost', any IP adress IPv4 or IPv6.

JQuery Datatables : Cannot read property 'aDataSort' of undefined

swateek

[JQuery Datatables : Cannot read property 'aDataSort' of undefined](https://stackoverflow.com/questions/28454203/jquery-datatables-cannot-read-property-adatasort-of-undefined)

I created this fiddle to and it works well as per my requirements: FiddleHowever, when I use the same in my application I get an error in the browser console saying Cannot read property 'aDataSort' of undefinedIn my application, the javascript reads something like as below: I have checked the controller output...it works well and is printed on the console too.

2015-02-11 12:18:52Z

I created this fiddle to and it works well as per my requirements: FiddleHowever, when I use the same in my application I get an error in the browser console saying Cannot read property 'aDataSort' of undefinedIn my application, the javascript reads something like as below: I have checked the controller output...it works well and is printed on the console too.It's important that your THEAD not be empty in table.As dataTable requires you to specify the number of columns of the expected data .

As per your data it should beAlso had this issue,

This array was out of range:For me, the bug was in DataTables itself; The code for sorting in DataTables 1.10.9 will not check for bounds; thus if you use something likewith an empty table, there is no row idx 1 -> this exception ensures.

This happened as the data for the table was being fetched asynchronously. Initially, on page loading the dataTable gets initialized without data. It should be updated later as soon as the result data is fetched.My solution:In my case I had Where it should have been Note: in my case I had to empty the table since i had data that I wanted gone before inserting new data.Just thought of sharing where it "might" help someone in the future!I faced the same problem, the following changes solved my problem.the aoColumns array describes the width of each column and its sortable properties.I had this problem and it was because another script was deleting all of the tables and recreating them, but my table wasn't being recreated. I spent ages on this issue before I noticed that my table wasn't even visible on the page.  Can you see your table before you initialize DataTables?Essentially, the other script was doing:And it should have been doing:

How do I create formatted javascript console log messages

Anders Kjeldsen

[How do I create formatted javascript console log messages](https://stackoverflow.com/questions/22155879/how-do-i-create-formatted-javascript-console-log-messages)

I 'waddled' by the Console in Chrome on Facebook today. 

Surprisingly I got this message in the console. 

Now my question is:How is this possible?

I know that there are a few 'exploit' methods for the console, but how can you make such font formatting in the console? (and is it console.log?)

2014-03-03 19:45:56Z

I 'waddled' by the Console in Chrome on Facebook today. 

Surprisingly I got this message in the console. 

Now my question is:How is this possible?

I know that there are a few 'exploit' methods for the console, but how can you make such font formatting in the console? (and is it console.log?)Yes, you can format the console.log() with something like this:Note the %c preceding the text in the first argument and the style specifications in the second argument. The text will look like your example.See Google's "Styling Console Output with CSS" or FireBug's Console Documentation for more details.The documentation links also include some other neat tricks like including object links in a console log as well.Try this:Quoting the docs, Source:

https://developers.google.com/web/tools/chrome-devtools/console/console-write#styling_console_output_with_cssYou can also format substrings.From Google's website: site

JSON.stringify() array bizarreness with Prototype.js

morgancodes

[JSON.stringify() array bizarreness with Prototype.js](https://stackoverflow.com/questions/710586/json-stringify-array-bizarreness-with-prototype-js)

I'm trying to figure out what's gone wrong with my json serializing, have the current version of my app with and old one and am finding some surprising differences in the way JSON.stringify() works (Using the JSON library from json.org).In the old version of my app:gives me this;in the new version, gives me this;any idea what could have changed to make the same library put quotes around the array brackets in the new version?

2009-04-02 16:48:12Z

I'm trying to figure out what's gone wrong with my json serializing, have the current version of my app with and old one and am finding some surprising differences in the way JSON.stringify() works (Using the JSON library from json.org).In the old version of my app:gives me this;in the new version, gives me this;any idea what could have changed to make the same library put quotes around the array brackets in the new version?Since JSON.stringify has been shipping with some browsers lately, I would suggest using it instead of Prototype’s toJSON. You would then check for window.JSON && window.JSON.stringify and only include the json.org library otherwise (via document.createElement('script')…). To resolve the incompatibilities, use:The function JSON.stringify() defined in ECMAScript 5 and above (Page 201 - the JSON Object, pseudo-code Page 205), uses the function toJSON() when available on objects.Because Prototype.js (or another library that you are using) defines an Array.prototype.toJSON() function, arrays are first converted to strings using Array.prototype.toJSON() then string quoted by JSON.stringify(), hence the incorrect extra quotes around the arrays.The solution is therefore straight-forward and trivial (this is a simplified version of Raphael Schweikert's answer):This produces of course side effects on libraries that rely on a toJSON() function property for arrays. But I find this a minor inconvenience considering the incompatibility with ECMAScript 5.It must be noted that the JSON Object defined in ECMAScript 5 is efficiently implemented in modern browsers and therefore the best solution is to conform to the standard and modify existing libraries.A possible solution which will not affect other Prototype dependencies would be:This takes care of the Array toJSON incompatibility with JSON.stringify and also retains toJSON functionality as other Prototype libraries may depend on it.Edit to make a bit more accurate:The problem key bit of code is in the JSON library from JSON.org (and other implementations of ECMAScript 5's JSON object):The problem is that the Prototype library extends Array to include a toJSON method, which the JSON object will call in the code above. When the JSON object hits the array value it calls toJSON on the array which is defined in Prototype, and that method returns a string version of the array. Hence, the quotes around the array brackets.If you delete toJSON from the Array object the JSON library should work properly. Or, just use the JSON library.I think a better solution would be to include this just after prototype has been loadedThis makes the prototype function available as the standard JSON.stringify() and JSON.parse(), but keeps the native JSON.parse() if it is available, so this makes things more compatible with older browsers.I'm not that fluent with Prototype, but I saw this in its docs:I'm not sure if this would have the same problem the current encoding has, though.There's also a longer tutorial about using JSON with Prototype.This is the code I used for the same issue:You check if Prototype exists, then you check the version. If old version use Object.toJSON (if is defined) in all other cases fallback to JSON.stringify()Here's how I'm dealing with it.My tolerant solution checks whether Array.prototype.toJSON is harmful for JSON stringify and keeps it when possible to let the surrounding code work as expected:As people have pointed out, this is due to Prototype.js - specifically versions prior to 1.7. I had a similar situation but had to have code that operated whether Prototype.js was there or not; this means I can't just delete the Array.prototype.toJSON as I'm not sure what relies on it. For that situation this is the best solution I came up with:Hopefully it will help someone.If you don't want to kill everything, and have a code that would be okay on most browsers, you could do it this way :This seems complex, but this is complex only to handle most use cases.

The main idea is overriding JSON.stringify to remove toJSON from the object passed as an argument, then call the old JSON.stringify, and finally restore it.

Looping through localStorage in HTML5 and JavaScript

Oscar Godson

[Looping through localStorage in HTML5 and JavaScript](https://stackoverflow.com/questions/3138564/looping-through-localstorage-in-html5-and-javascript)

So, I was thinking I could just loop through localStorage like a normal object as it has a length. How can I loop through this?If I do a localStorage.length it returns 3 which is correct. So I'd assume a for...in loop would work.I was thinking something like:But no avail. Any ideas?The other idea I had was something likeIn which the for...in does work.

2010-06-29 07:09:34Z

So, I was thinking I could just loop through localStorage like a normal object as it has a length. How can I loop through this?If I do a localStorage.length it returns 3 which is correct. So I'd assume a for...in loop would work.I was thinking something like:But no avail. Any ideas?The other idea I had was something likeIn which the for...in does work.You can use the key method.  localStorage.key(index) returns the indexth key (the order is implementation-defined but constant until you add or remove keys).If the order matters, you could store a JSON-serialized array:The draft spec claims that any object that supports structured clone can be a value.  But this doesn't seem to be supported yet.EDIT: To load the array, add to it, then store:The simplest way is:In addition to all the other answers, you can use $.each function from the jQuery library:Eventually, get the object with:This works for me in Chrome:Building on the previous answer here is a function that will loop through the local storage by key without knowing the key values. If you examine the console output you will see the items added by your code all have a typeof string. Whereas the built-in items are either functions { [native code] } or in the case of the length property a number. You could use the typeofKey variable to filter just on the strings so only your items are displayed.Note this works even if you store a number or boolean as the value as they are both stored as strings.All of these answers ignore the differences between the implementations of localStorage across browsers.

Contributors in this domain should heavily qualify their responses with the platforms they are describing.

One browser-wide implementation is documented at 

https://developer.mozilla.org/en/docs/Web/API/Window/localStorage and, whilst very powerful, only contains a few core methods. Looping through the contents requires an understanding of the implementation specific to individual browsers.localStorage is an Object.We can loop through it with JavaScript for/in Statement just like any other Object.And we will use .getItem() to access the value of each key (x).

SyntaxError: Unexpected token o in JSON at position 1

Soniya Mohan

[SyntaxError: Unexpected token o in JSON at position 1](https://stackoverflow.com/questions/38380462/syntaxerror-unexpected-token-o-in-json-at-position-1)

I parse few data using a type class in my controller I'm getting data as follows:I tried to store the data like thisHow can I extract the user list to a new variable?

2016-07-14 17:21:28Z

I parse few data using a type class in my controller I'm getting data as follows:I tried to store the data like thisHow can I extract the user list to a new variable?The JSON you posted looks fine, however in your code, it is most likely not a JSON string anymore, but already a JavaScript object. This means, no more parsing is necessary.You can test this yourself, e.g. in Chrome's console:JSON.parse() converts the input into a string. The toString() method of JavaScript objects by default returns [object Object], resulting in the observed behavior.Try the following instead:the first parameters of function JSON.parse should be a String, and your data is a JavaScript object, so it will convert to a String [object object], you should use JSON.stringify before pass the dataJust above JSON.parse, use:Don't ever use JSON.parse without wrapping it in try-catch block:Well, I meant that I need to parse object like this: var jsonObj = {"first name" : "fname"}. But, I don't actually. Because it's already an JSON. Unexpected 'O' error is thrown when JSON data or String happens to get parsed.If it's string, it's already stringfied. Parsing ends up with Unexpected 'O' error.I faced similar( although in different context), I solved the following error by removing JSON Producer.The response contains "OK" string return. 

The annotation marked as @Produces({ **MediaType.APPLICATION_JSON})** tries to parse the string to JSON format which results in Unexpected 'O'.Removing @Produces({ MediaType.APPLICATION_JSON}) works fine.

Output : OKBeware:

Also, on client side, if you make ajax request and use JSON.parse("OK"), it throws Unexpected token 'O'O is the first letter of the stringJSON.parse(object) compares with jQuery.parseJSON(object);JSON.parse('{ "name":"Yergalem", "city":"Dover"}');   --- Works Fine

JavaScript: Can I detect IE9 if it's in IE7 or IE8 compatibility mode?

Dee2000

[JavaScript: Can I detect IE9 if it's in IE7 or IE8 compatibility mode?](https://stackoverflow.com/questions/5825385/javascript-can-i-detect-ie9-if-its-in-ie7-or-ie8-compatibility-mode)

I need to know if the browser that's identifying itself via user agent string as being IE7 or IE8 is really those browsers, or whether it's IE9 in 7 or 8 compatibility mode.From what I can see in the user agent string, an IE9 in IE7 compatibility mode, provides an identical string to a real IE7. Is there an extra property/element/object that I can test to see if it's "really" IE9 in disguise?I assume the document mode won't help as the page my script is loaded into could either be forcing quirks or forcing a specific setting.I'm hoping that IE9 will have some property that exists and is testable regardless of whether it's in 7, 8 or 9 mode.Edited to add…OK, I see where I was going wrong now. I was using the "Browser Mode" dropdown and switching it to IE8 and IE7 and thinking this was "IE8 compatibility mode" and "IE7 compatibility mode" respectively. This is of course not true. The developer tools' Browser mode really is switching it to "be like" those old browsers, so it's only right that the original useragent strings be reported.If I leave the browser mode in IE9 or IE9 compatibility and try the document mode dropdown variants instead, then I do in fact get "Trident/5.0" present in all 8 combinations (two browser modes and 4 document modes). I just need to steer clear of choosing browser mode IE7 and IE8 because they really are (simulated) IE7 and IE8.So there's no way a page, a non-developer user, a meta tag, or Microsoft's compatibility list will be able to put IE9 into this unidentifiable state.Just using if(navigator.userAgent.indexOf("Trident/5")>-1) will be sufficient.Don't worry, this isn't for styles, formatting, logic or page content. I use feature detection for those things. I just need to detect IE9 (regardless of what mode it's in) and make a non-page content decision on that.Thanks for steering me towards the answer with your suggestions and links.

2011-04-28 21:40:49Z

I need to know if the browser that's identifying itself via user agent string as being IE7 or IE8 is really those browsers, or whether it's IE9 in 7 or 8 compatibility mode.From what I can see in the user agent string, an IE9 in IE7 compatibility mode, provides an identical string to a real IE7. Is there an extra property/element/object that I can test to see if it's "really" IE9 in disguise?I assume the document mode won't help as the page my script is loaded into could either be forcing quirks or forcing a specific setting.I'm hoping that IE9 will have some property that exists and is testable regardless of whether it's in 7, 8 or 9 mode.Edited to add…OK, I see where I was going wrong now. I was using the "Browser Mode" dropdown and switching it to IE8 and IE7 and thinking this was "IE8 compatibility mode" and "IE7 compatibility mode" respectively. This is of course not true. The developer tools' Browser mode really is switching it to "be like" those old browsers, so it's only right that the original useragent strings be reported.If I leave the browser mode in IE9 or IE9 compatibility and try the document mode dropdown variants instead, then I do in fact get "Trident/5.0" present in all 8 combinations (two browser modes and 4 document modes). I just need to steer clear of choosing browser mode IE7 and IE8 because they really are (simulated) IE7 and IE8.So there's no way a page, a non-developer user, a meta tag, or Microsoft's compatibility list will be able to put IE9 into this unidentifiable state.Just using if(navigator.userAgent.indexOf("Trident/5")>-1) will be sufficient.Don't worry, this isn't for styles, formatting, logic or page content. I use feature detection for those things. I just need to detect IE9 (regardless of what mode it's in) and make a non-page content decision on that.Thanks for steering me towards the answer with your suggestions and links.Actually the user agent string is different for IE9 when being run in IE7 compatibility mode, so this would be one of the best ways to distinguish between different IE versions.Introducing IE9’s User Agent String:(emphasis added by me). So the user agent string is the same as it reports itself being "Mozilla/4.0" and MSIE 7.0, but IE9 will always be Trident/5.0 - no matter whether it says MSIE 7.0, MSIE 8.0 or MSIE 9.0.Actually you should check out this great compilation: Browser ID (User-Agent) Strings or even better useragentstrings.comdocument.documentMode is the best way for document mode. IE7 doesn't contain any information on TridentIE8 contains this string: "Trident/4.0"IE9 contains this string: "Trident/5.0"IE9 in compatability mode:IE9 in normal mode:Here is a table of all Browser and Document modes for IE9:I'm hoping that IE9 will have some property that exists and is testable regardless of whether it's in 7, 8 or 9 mode.Check e.g. for style.opacity, it was introduced in IE9 and is available regardless of the compatibility-mode:It is sometimes necessary to read the user Agent string from server Variable, not from javascript navigator object.Compare the differences:From https://stackoverflow.com/a/29288153/2879498Assuming you have a hidden element with the ID compat-warning:Javascript w/ jQuery:Detection and warnings, your first and last lines of defense against compatibility hell.

Using npm to install or update required packages just like bundler for rubygems

Daniel Beardsley

[Using npm to install or update required packages just like bundler for rubygems](https://stackoverflow.com/questions/4871932/using-npm-to-install-or-update-required-packages-just-like-bundler-for-rubygems)

I love Bundler, it's great at dependency management.  I love npm, installing node packages is easy!  I have a nodejs app and would love to be able to specify my apps dependencies and easily install / update them wherever I deploy my app. This isn't a library I'm releasing, it's a full fledged web-app.I'm aware of the npm bundle command, but that just seems to simply override the directory where packages are installed.I'm used to using bundler in this fashion:Installs rails v3.0.3 and any other required gems on the host machine only if it doesn't already existHow can I achieve something similar with npm?

2011-02-02 07:49:04Z

I love Bundler, it's great at dependency management.  I love npm, installing node packages is easy!  I have a nodejs app and would love to be able to specify my apps dependencies and easily install / update them wherever I deploy my app. This isn't a library I'm releasing, it's a full fledged web-app.I'm aware of the npm bundle command, but that just seems to simply override the directory where packages are installed.I'm used to using bundler in this fashion:Installs rails v3.0.3 and any other required gems on the host machine only if it doesn't already existHow can I achieve something similar with npm?As of npm 1.0 (which is now what you get by default if you follow the steps in the README file), "bundle" is no longer a segregated thing -- it's just "how it works".So:It was quite difficult to figure this out, but NPM makes this possible.Imagine that express is your only dependencynote: Increment the version # each time you modify the dependenciesNow you should be able to install your dependencies using npm.  You could even make this part of your deployment processThen within your app code you can get access to your specific version of express like this:You should read these two articles from Isaacs(author npm) blog. I think they are really good, and I believe tell you how to achieve your goal:I believe link #1(point #11) explains this:As of Npm version 1.1.2 , there's a new command npm shrinkwrap which creates an npm-shrinkwrapped.json file, analogous to Gemfile.lock. It's important to make one, to prevent software rot (see Bundler's rationale). Particularly as Nodejs has such a fast moving community.While bundle install creates a Gemfile.lock automatically, npm install won't create npm-shrinkwrapped.json (but will use it when it exists). Hence you need to remember to use npm shrinkwrap.Read a full guide at http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/ It seems to me that the simplest solution is to use a package.json file with the private flag (added to npm just last month) set to true. That way, you can run npm install or npm bundle to grab your project's dependencies, but you prevent anyone from accidentally publishing your non-public project.Here's an example package.json:Running npm install will install express on the local system if it doesn't already exist; running npm publish gives an error because of the "private": true.You and your team can use the version tag internally to track dependency changes over time—each time you change a dependency, bump the version. To see which version you've installed, use npm ls installed.Publish your app with npm as well, and list its dependencies in your package.json file.When someone uses npm to install your package, npm will take care of resolving its dependencies.Packages spec: http://wiki.commonjs.org/wiki/Packages/1.0

How to exclude a Javascript file from Javascript Validation in Eclipse

Matthieu Napoli

[How to exclude a Javascript file from Javascript Validation in Eclipse](https://stackoverflow.com/questions/4867885/how-to-exclude-a-javascript-file-from-javascript-validation-in-eclipse)

I have the javascript validation working good for my own code. I want to keep the validation. But when it comes to open source library, like jquery for example, the validation creates warnings.I don't want warnings over a downloaded library. But I want to keep warnings for my code.I know you can exclude files from validation in the "Preferences > Validation" window, but the javascript validation is not there ! I've looked each validator, the javascript validator is not there.So how can I exclude specific files from the validation ?Here is the list of validators I have :

ScreenshotThanks !PS : I use Eclipse PDT.!

2011-02-01 21:02:09Z

I have the javascript validation working good for my own code. I want to keep the validation. But when it comes to open source library, like jquery for example, the validation creates warnings.I don't want warnings over a downloaded library. But I want to keep warnings for my code.I know you can exclude files from validation in the "Preferences > Validation" window, but the javascript validation is not there ! I've looked each validator, the javascript validator is not there.So how can I exclude specific files from the validation ?Here is the list of validators I have :

ScreenshotThanks !PS : I use Eclipse PDT.!well, probably I've managed to do what you need ;) It is a bit tricky. So my steps:ScreenShot:

Really hope that it helps!Following from Maxym's excellent answer: since I usually keep all my JavaScript libraries in one place and the Eclipse validator tends to find unusual errors (perhaps entirely false positives), I used the Add Multiple option and selected the folders that contained those libraries. No need to update each time you add a file!

Conditional build based on environment using Webpack

Dominic

[Conditional build based on environment using Webpack](https://stackoverflow.com/questions/28572380/conditional-build-based-on-environment-using-webpack)

I have some things for development - e.g mocks which I would like to not bloat my distributed build file with.In RequireJS you can pass a config in a plugin file and conditonally require things in based on that.For webpack there doesn't seem to be a way of doing this. Firstly to create a runtime config for an environment I have used resolve.alias to repoint a require depending on the environment, e.g:Then when creating the webpack config I can dynamically assign which file envsettings points to (i.e. webpackConfig.resolve.alias.envsettings = './' + env).However I would like to do something like:But obviously I don't want to build in those mock files if the environment isn't mock.I could possibly manually repoint all those requires to a stub file using resolve.alias again - but is there a way that feels less hacky?Any ideas how I can do that? Thanks.

2015-02-17 22:29:27Z

I have some things for development - e.g mocks which I would like to not bloat my distributed build file with.In RequireJS you can pass a config in a plugin file and conditonally require things in based on that.For webpack there doesn't seem to be a way of doing this. Firstly to create a runtime config for an environment I have used resolve.alias to repoint a require depending on the environment, e.g:Then when creating the webpack config I can dynamically assign which file envsettings points to (i.e. webpackConfig.resolve.alias.envsettings = './' + env).However I would like to do something like:But obviously I don't want to build in those mock files if the environment isn't mock.I could possibly manually repoint all those requires to a stub file using resolve.alias again - but is there a way that feels less hacky?Any ideas how I can do that? Thanks.You can use the define plugin.I use it by doing something as simple as this in your webpack build file where env is the path to a file that exports an object of settings:and then this in your codeIt will strip this code out of your build file if the condition is false. You can see a working Webpack build example here.Not sure why the "webpack.DefinePlugin" answer is the top one everywhere for defining Environment based imports/requires.The problem with that approach is that you are still delivering all those modules to the client -> check with webpack-bundle-analyezer for instance. And not reducing your bundle.js's size at all :)So what really works well and much more logical is: NormalModuleReplacementPluginSo rather than do a on_client conditional require -> just not include not needed files to the bundle in the first placeHope that helpsUse ifdef-loader. In your source files you can do stuff likeThe relevant webpack configuration isI ended up using something similar to Matt Derrick' Answer, but was worried about two points:What I came up with is a simple composer which builds a config object and injects it to a config module.

Here is the file structure, Iam using for this:The main.js holds all default config stuff:The dev.js and production.js only hold config stuff which overrides the main config:The important part is the webpack.config.js which composes the config and uses the DefinePlugin to generate a environment variable __APP_CONFIG__ which holds the composed config object:The last step is now the config.js, it looks like this (Using es6 import export syntax here because its under webpack):In your app.js you could now use import config from './config'; to get the config object.another way is using a JS file as a proxy, and let that file load the module of interest in commonjs, and export it as es2015 module, like this:Then you can use ES2015 module in your app normally:Faced with the same problem as the OP and required, because of licensing,  not to include certain code in certain builds, I adopted the webpack-conditional-loader as follows:In my build command I set an environment variable appropriately for my build. For example 'demo' in package.json:The confusing bit that is missing from the documentation I read is that I have to make this visible throughout the build processing by ensuring my env variable gets injected into the process global thus in my webpack.config/demo.js:With this in place, I can conditionally exclude anything, ensuring that any related code is properly shaken out of the resulting JavaScript. For example in my routes.js the demo content is kept out of other builds thus:This works with webpack 4.29.6.I've struggled with setting env in my webpack configs. What I usually want is to set env so that it can be reached inside webpack.config.js, postcss.config.js and inside the entry point application itself (index.js usually). I hope that my findings can help someone. The solution that I've come up with is to pass in --env production or --env development, and then set mode inside webpack.config.js. 

However, that doesn't help me with making env accessible where I want it (see above), so I also need to set process.env.NODE_ENV explicitly, as recommended here. 

Most relevant part that I have in webpack.config.js follow below. Use envirnment variables to create dev and prod deployments:https://webpack.js.org/guides/environment-variables/While this is not the best solution, it may work for some of your needs. If you want to run different code in node and browser using this worked for me:

Can I install a NPM package from javascript running in Node.js?

Justin

[Can I install a NPM package from javascript running in Node.js?](https://stackoverflow.com/questions/15957529/can-i-install-a-npm-package-from-javascript-running-in-node-js)

Can I install a NPM package from a javascript file running in Node.js?  For example, I'd like to have a script, let's call it "script.js" that somehow (...using NPM or not...) install a package usually available through NPM.  In this example, I'd like to install "FFI".  (npm install ffi)  

2013-04-11 19:45:30Z

Can I install a NPM package from a javascript file running in Node.js?  For example, I'd like to have a script, let's call it "script.js" that somehow (...using NPM or not...) install a package usually available through NPM.  In this example, I'd like to install "FFI".  (npm install ffi)  It is indeed possible to use npm programmatically, and it was outlined in older revisions of the documentation. It has since been removed from the official documentation, but still exists on source control with the following statement:In the original documentation, the following is the code sample that was provided:Since npm exists in the node_modules folder, you can use require('npm') to load it like any other module. To install a module, you will want to use npm.commands.install().If you need to look in the source then it's also on GitHub. Here's a complete working example of the code, which is the equivalent of running npm install without any command-line arguments:Note that the first argument to the install function is an array. Each element of the array is a module that npm will attempt to install.More advanced use can be found in the npm-cli.js file on source control.yes. you can use child_process to execute a system commandin order to see the output as well you can use:this way you can watch the installation like you do it manualy and avoid surprises like full buffer, etc.it can actually be a bit easyI had a heck of a time trying to get the first example to work inside a project directory, posting here in case anyone else finds this.  As far as I can tell, NPM still works fine loaded directly, but because it assumes CLI, we have to repeat ourselves a little setting it up:pacote is the package that npm uses to fetch package metadata and tarballs. It has a stable, public API.I'm the author of a module that allow to do exactly what you have in mind.

See live-plugin-manager.You can install and run virtually any package from NPM, Github or from a folder.Here an example:In the above code I install moment package at runtime, load and execute it. At the end I uninstall it.Internally I don't run npm cli but actually download packages and run inside a node VM sandbox.A great solution by @hexacyanide, but it turned out that NPM doesn't emit "log" event anymore (at least as of version 6.4.1). Instead they rely on a standalone  module https://github.com/npm/npmlog. Fortunately it's a singleton, so we can reach the very same instance NPM uses for logs and subscribe for log events:As you can see from the code, NPM also emits performance metrics on the process, so we can also use it to monitor the progress.Another option, which wasn't mentioned here, is to do fork and run CLI right from ./node_modules/npm/bin/npm-cli.jsFor example you want to be able to install node modules from running script on machine, which do not have NPM installed. And you DO want to do it with CLI. In this case just install NPM in your node_modules locally while building your program (npm i npm).Then use it like this:Then your program could be even packed to binary file, for example with PKG package. In this case you need to use --ignore-scripts npm option, because node-gyp required to run preinstall scripts

HTML Drag And Drop On Mobile Devices

Fenton

[HTML Drag And Drop On Mobile Devices](https://stackoverflow.com/questions/3172100/html-drag-and-drop-on-mobile-devices)

When you add drag and drop to a web page using JavaScript, such as jQuery UI draggable and droppable, how do you get this to work when viewed via a browser on a mobile device - where the touch-screen actions for dragging are intercepted by the phone for scrolling around the page etc?All solutions welcome... my initial thoughts are:

2010-07-03 16:36:07Z

When you add drag and drop to a web page using JavaScript, such as jQuery UI draggable and droppable, how do you get this to work when viewed via a browser on a mobile device - where the touch-screen actions for dragging are intercepted by the phone for scrolling around the page etc?All solutions welcome... my initial thoughts are:jQuery UI Touch Punch just solves it all. It's a Touch Event Support for jQuery UI. Basically, it just wires touch event back to jQuery UI.

Tested on iPad, iPhone, Android and other touch-enabled mobile devices.

I used jQuery UI sortable and it works like a charm.http://touchpunch.furf.com/There is a new polyfill for translating touch events to drag-and-drop, such that HTML5 Drag And Drop is utilizable on mobile.The polyfill was introduced by Bernardo Castilho on this post.Here's a demo from that post.The post also presents several considerations of the folyfill design.The beta version of Sencha Touch has drag and drop support.You can refer to their DnD Example. This only works on webkit browsers by the way.Retrofitting that logic into a web page is probably going to be difficult. As I understand it they disable all browser panning and implement panning events entirely in javascript, allowing correct interpretation of drag and drop.Update: the original example link is dead, but I found this alternative:

https://github.com/kostysh/Drag-Drop-example-for-Sencha-TouchI needed to create a drag and drop + rotation that works on desktop, mobile, tablet including windows phone. The last one made it more complicated (mspointer vs. touch events).The solution came from The great Greensock libraryIt took some jumping through hoops to make the same object draggable and rotatable but it works perfectlyYou might as well give a try to Tim Ruffle's drag-n-drop polyfill, certainly similar to Bernardo Castilho's one (see @remdevtec answer).Simply do npm install mobile-drag-drop --save (other installation methods available, e.g. with bower)Then, any element interface relying on touch detection should work on mobile (e.g. dragging only an element, instead of scrolling + dragging at the same time).Jquery Touch Punch is great but what it also does is disable all the controls on the draggable div so to prevent this you have to alter the lines... (at the time of writing - line 75)changeto readadd as many ors as you want for each of the elements you want to 'unlock'Hope that helps someonehere is my solution:The Sortable JS library is compatible with touch screens and does not require jQuery.The way it handles touch screens it that you need to touch the screen for about 1 second to start dragging an item.Also, they present a video test showing that this library is running faster than JQuery UI Sortable.

Eliminate 300ms delay on click events in mobile Safari

tim peterson

[Eliminate 300ms delay on click events in mobile Safari](https://stackoverflow.com/questions/12238587/eliminate-300ms-delay-on-click-events-in-mobile-safari)

I've read that  mobile Safari has a 300ms delay on click events from the time the link/button is clicked to the time the event fires. The reason for the delay is to wait to see if the user intends to double-click, but from a UX perspective waiting 300ms is often undesirable.One solution to eliminate this 300ms delay is to use jQuery Mobile "tap" handling. Unfortunately I'm not familiar with this framework and don't want to load some big framework if all I need is a line or two of code applying touchend in the right way.Like many sites, my site has many click events like this: and what I'd like to do is to get rid of the 300ms delay on ALL those click events using a single code snippet like this:Is that a bad/good idea? 

2012-09-02 18:25:10Z

I've read that  mobile Safari has a 300ms delay on click events from the time the link/button is clicked to the time the event fires. The reason for the delay is to wait to see if the user intends to double-click, but from a UX perspective waiting 300ms is often undesirable.One solution to eliminate this 300ms delay is to use jQuery Mobile "tap" handling. Unfortunately I'm not familiar with this framework and don't want to load some big framework if all I need is a line or two of code applying touchend in the right way.Like many sites, my site has many click events like this: and what I'd like to do is to get rid of the 300ms delay on ALL those click events using a single code snippet like this:Is that a bad/good idea? Now some mobile browsers eliminate 300 ms click delay if you set the viewport. You don't need to use workarounds anymore.This is currently supported Chrome for Android, Firefox for Android and Safari for iOS However on iOS Safari, double-tap is a scroll gesture on unzoomable pages. For that reason they can't remove the 300ms delay. If they can't remove the delay on unzoomable pages, they're unlikely to remove it on zoomable pages.  Windows Phones also retain the 300ms delay on unzoomable pages, but they don't have an alternative gesture like iOS so it's possible for them to remove this delay as Chrome has. You can remove the delay on Windows Phone using:Source: http://updates.html5rocks.com/2013/12/300ms-tap-delay-gone-awayUPDATE 2015 DecemberUntil now, WebKit and Safari on iOS had a 350ms delay before single taps activate links or buttons to allow people to zoom into pages with a double tap. Chrome changed this a couple of months ago already by using a smarter algorithm to detect that and WebKit will follow with a similar approach. The article gives some great insights how browsers work with touch gestures and how browsers can still get so much smarter than they are today.UPDATE 2016 MarchOn Safari for iOS, the 350 ms wait time to detect a second tap has been removed to create a「fast-tap」response. This is enabled for pages that declare a viewport with either width=device-width or user-scalable=no. Authors can also opt in to fast-tap behavior on specific elements by using the CSS touch-action: manipulation as documented here  (scroll down to the 'Styling Fast-Tap Behavior' heading) and here.This plugin -FastClick developed by Financial Times  does it perfectly for you! Make sure though to add event.stopPropagation(); and/or event.preventDefault(); directly after the click function, otherwise it might run twice as it did for me, i.e.:i know this is old but can't you just test to see if "touch" is supported in the browser? Then create a variable that's either "touchend" or "click" and use that variable as the event that gets bound to your element?So that code sample checks to see if the "touchend" event is supported in the browser and if not then we use the "click" event.(Edit: changed "touchend" to "ontouchend")I've come across a hugely popular alternative called Hammer.js (Github page) which I think is the best approach.Hammer.js is a more full-featured touch library (has many swipe commands) than Fastclick.js (most upvoted answer).Beware though: scrolling fast on mobile devices tends to really lock up the UI when you use either Hammer.js or Fastclick.js. This is a major problem if your site has a newsfeed or an interface where users will be scrolling a lot (would seem like most web apps). For this reason, I'm using neither of these plugins at the moment. Somehow, disabling zoom seems to disable this small delay. Makes sense, as double-tap isn't needed anymore then.How can I "disable" zoom on a mobile web page?But please be aware of the usability impact this will have. It may be useful for webpages designed as apps, but shouldn't be used for more general-purpose 'static' pages IMHO. I use it for a pet project that needs low latency.Unfortunately there is no easy way to do this. So just using touchstart or touchend will leave you with other problems like someone starts scrolling when click on on a button for example. We use zepto for a while, and even with this really good framework there are some issues that came up over the time. A lot of them are closed, but it seems is not a field of simple solution.We have this solution to globally handle clicks on links:I searched for an easy way without jquery and without fastclick library. This works for me:Just to provide some extra information.On iOS 10, <button>s on my page could not be triggered continuously. There was always a lag.I tried fastclick / Hammer / tapjs / replacing click with touchstart, all failed.UPDATE: the reason seems to be that the button is too close to the edge! move it to near the center and lag gone!You're supposed to explicitly declare passive mode :In jQuery you can bind "touchend" event, witch trigger code inmediatly after tap (is like a keydown in keyboard). Tested on current Chrome and Firefox tablet versions. Don't forget "click" also, for your touch screen laptops and desktop devices.

Why does a return in `finally` override `try`?

bonfo

[Why does a return in `finally` override `try`?](https://stackoverflow.com/questions/3837994/why-does-a-return-in-finally-override-try)

How does a return statement inside a try/catch block work?I'm expecting the output of this function to be true, but instead it is false!

2010-10-01 09:36:41Z

How does a return statement inside a try/catch block work?I'm expecting the output of this function to be true, but instead it is false!Finally always executes. That's what it's for, which means it's return gets used in your case.You'll want to change your code so it's more like this:Generally speaking you never want to have more than one return statement in a function, things like this are why.According to ECMA-262 (5ed, December 2009), in pp. 96:And from pp. 36:It's clear that return false would set completion type of finally as return, which cause try ... finally to do 4. Return F.When you use finally, any code within that block fires before the method exits. Because you're using a return in the finally block, it calls return false and overrides the previous return true in the try block. (Terminology might not be quite right.)why you are getting false is you returned in a finally block. finally block should execute always. so your return true changes to return falseThe finally block rewrites try block return (figuratively speaking).Just wanted to point out, that if you return something from finally, then it will be returned from the function. But if in finally there is no 'return' word - it will be returned the value from try block;So -finally- return rewrites the return of -try- return.As far as I know, the finally block always executes, irrespective of whether you have a return statement inside try or not. Ergo, you get the value returned by the return statement inside finally block. I tested this with Firefox 3.6.10 and Chrome 6.0.472.63 both in Ubuntu. It is possible that this code may behave differently in other browsers. Finally is supposed to ALWAYS run at the end of a try catch block so that (by specification) is why you are getting false returned. Keep in mind that it is entirely possible that different browsers have different implementations.What about this?

enabling cross-origin resource sharing on IIS7

Andrew

[enabling cross-origin resource sharing on IIS7](https://stackoverflow.com/questions/12458444/enabling-cross-origin-resource-sharing-on-iis7)

I recently ran into with posting Javascript requests to another domain.  By default XHR  posting to other domains is not allowed.Following the instructions from http://enable-cors.org/, I enabled this on the other domain.Everything works fine now, however it is still return a 405 response before sending back the working 200 response.Update: 3/02/2014There is a recently updated article in MSDN magazine. Detailing CORS Support in ASP.NET Web API 2.http://msdn.microsoft.com/en-us/magazine/dn532203.aspx

2012-09-17 11:40:53Z

I recently ran into with posting Javascript requests to another domain.  By default XHR  posting to other domains is not allowed.Following the instructions from http://enable-cors.org/, I enabled this on the other domain.Everything works fine now, however it is still return a 405 response before sending back the working 200 response.Update: 3/02/2014There is a recently updated article in MSDN magazine. Detailing CORS Support in ASP.NET Web API 2.http://msdn.microsoft.com/en-us/magazine/dn532203.aspxIt is likely a case of IIS 7 'handling' the HTTP OPTIONS response instead of your application specifying it.  To determine this, in IIS7, Now, your config entries above should kick in when an HTTP OPTIONS verb is sent.Alternatively you can respond to the HTTP OPTIONS verb in your BeginRequest method.I can't post comments so I have to put this in a separate answer, but it's related to the accepted answer by Shah.I initially followed Shahs answer (thank you!) by re configuring the OPTIONSVerbHandler in IIS, but my settings were restored when I redeployed my application.I ended up removing the OPTIONSVerbHandler in my Web.config instead.I found the information found at http://help.infragistics.com/Help/NetAdvantage/jQuery/2013.1/CLR4.0/html/igOlapXmlaDataSource_Configuring_IIS_for_Cross_Domain_OLAP_Data.html to be very helpful in setting up HTTP OPTIONS for a WCF service in IIS 7.I added the following to my web.config and then moved the OPTIONSVerbHandler in the IIS 7 'hander mappings' list to the top of the list. I also gave the OPTIONSVerbHander read access by double clicking the hander in the handler mappings section then on 'Request Restrictions' and then clicking on the access tab.Unfortunately I quickly found that IE doesn't seem to support adding headers to their XDomainRequest object (setting the Content-Type to text/xml and adding a SOAPAction header).Just wanted to share this as I spent the better part of a day looking for how to handle it.The 405 response is a "Method not allowed" response. It sounds like your server isn't properly configured to handle CORS preflight requests. You need to do two things:1) Enable IIS7 to respond to HTTP OPTIONS requests. You are getting the 405 because IIS7 is rejecting the OPTIONS request. I don't know how to do this as I'm not familiar with IIS7, but there are probably others on Stack Overflow who do.2) Configure your application to respond to CORS preflight requests. You can do this by adding the following two lines underneath the Access-Control-Allow-Origin line in the <customHeaders> section:You may have to add other values to the Access-Control-Allow-Headers section based on what headers your request is asking for. Do you have the sample code for making a request?You can learn more about CORS and CORS preflight here: http://www.html5rocks.com/en/tutorials/cors/Elaborating from DavidG answer which is really near of what is required for a basic solution:This is a basic solution since it will send cors headers even on request which does not requires it. But with WCF, it looks like being the simpliest one.With MVC or webapi, we could instead handle OPTIONS verb and cors headers by code (either "manually" or with built-in support available in latest version of webapi).With ASP.net Web API 2 install Microsoft ASP.NET Cross Origin support via nuget.http://enable-cors.org/server_aspnet.htmlThe solution for me was to add :To my web.configAlsalaam Aleykum.The first way is to follow the instructions in this link:http://help.infragistics.com/Help/NetAdvantage/jQuery/2013.1/CLR4.0/html/igOlapXmlaDataSource_Configuring_IIS_for_Cross_Domain_OLAP_Data.htmlWhich corresponds to these configuration: The second way is as to respond to the HTTP OPTIONS verb in your BeginRequest method.One thing that has not been mentioned in these answers is that if you are using IIS and have sub applications with their own separate web.config, you may need to have a web.config in the parent directory containing the following code.

Best dynamic JavaScript/JQuery Grid [closed]

Somnath

[Best dynamic JavaScript/JQuery Grid [closed]](https://stackoverflow.com/questions/8677298/best-dynamic-javascript-jquery-grid)

I'm working with JavaScript, JQuery and HTML. UI Of my project is completely dynamic. I am looking for a dynamic JavaScript/JQuery Grid which supports following features.Can anybody tell me is there any good looking open sources Grid which supports the following features?

2011-12-30 07:42:04Z

I'm working with JavaScript, JQuery and HTML. UI Of my project is completely dynamic. I am looking for a dynamic JavaScript/JQuery Grid which supports following features.Can anybody tell me is there any good looking open sources Grid which supports the following features?Some useful are:Free:Paid:The best entries in my opinion are Flexigrid and jQuery Grid.you can try http://datatables.net/DataTables is a plug-in for the jQuery Javascript library. It is a highly flexible tool, based upon the foundations of progressive enhancement, which will add advanced interaction controls to any HTML table. Key features:My suggestion for dynamic JQuery Grid are below. http://reconstrukt.com/ingrid/https://github.com/mleibman/SlickGridhttp://www.datatables.net/indexBest one is :DataTables is a plug-in for the jQuery Javascript library. It is a highly flexible tool, based upon the foundations of progressive enhancement, which will add advanced interaction controls to any HTML table.Variable length paginationOn-the-fly filteringMulti-column sorting with data type detectionSmart handling of column widthsDisplay data from almost any data sourceDOM, Javascript array, Ajax file and server-side processing (PHP, C#, Perl, Ruby, AIR, Gears etc)Scrolling options for table viewportFully internationalisablejQuery UI ThemeRoller supportRock solid - backed by a suite of 2600+ unit testsWide variety of plug-ins inc. TableTools, FixedColumns, KeyTable and moreDynamic creation of tablesAjax auto loading of dataCustom DOM positioningSingle column filteringAlternative pagination typesNon-destructive DOM interactionSorting column(s) highlightingAdvanced data source optionsExtensive plug-in supportSorting, type detection, API functions, pagination and filteringFully themeable by CSSSolid documentation110+ pre-built examplesFull support for Adobe AIRHave a look at agiletoolkit.org as this has a simple to use CRUD which supports 2,4,6,7,9,10 and 12 out of the box (uses Ajax to defender the grid when adding,deleting data and it integrates with jquery.I would post some examples but on an iPad at the moment.

Javascript fuzzy search that makes sense

willlma

[Javascript fuzzy search that makes sense](https://stackoverflow.com/questions/23305000/javascript-fuzzy-search-that-makes-sense)

I'm looking for a fuzzy search JavaScript library to filter an array. I've tried using fuzzyset.js and fuse.js, but the results are terrible (there are demos you can try on the linked pages).After doing some reading on Levenshtein distance, it strikes me as a poor approximation of what users are looking for when they type. For those who don't know, the system calculates how many insertions, deletions, and substitutions are needed to make two strings match.One obvious flaw, which is fixed in the Levenshtein-Demerau model, is that both blub and boob are considered equally similar to bulb (each requiring two substitutions). It is clear, however, that bulb is more similar to blub than boob is, and the model I just mentioned recognizes that by allowing for transpositions.I want to use this in the context of text completion, so if I have an array ['international', 'splint', 'tinder'], and my query is int, I think international ought to rank more highly than splint, even though the former has a score (higher=worse) of 10 versus the latter's 3.So what I'm looking for (and will create if it doesn't exist), is a library that does the following:Has anyone come across anything like this? I realize that StackOverflow isn't the place to be asking for software recommendations, but implicit (not anymore!) in the above is: am I thinking about this the right way?I found a good paper (pdf) on the subject. Some notes and excerpts: For the Smith-Waterman distance (wikipedia), "Instead of looking at the total sequence, the Smith–Waterman algorithm compares segments of all possible lengths and optimizes the similarity measure." It's the n-gram approach.For text completion purposes, the Monger-Elkan and Jaro-Winkler approaches seem to make the most sense. Winkler's addition to the Jaro metric effectively weights the beginnings of words more heavily. And the affine aspect of Monger-Elkan means that the necessity to complete a word (which is simply a sequence of additions) won't disfavor it too heavily. Conclusion:

2014-04-26 00:11:34Z

I'm looking for a fuzzy search JavaScript library to filter an array. I've tried using fuzzyset.js and fuse.js, but the results are terrible (there are demos you can try on the linked pages).After doing some reading on Levenshtein distance, it strikes me as a poor approximation of what users are looking for when they type. For those who don't know, the system calculates how many insertions, deletions, and substitutions are needed to make two strings match.One obvious flaw, which is fixed in the Levenshtein-Demerau model, is that both blub and boob are considered equally similar to bulb (each requiring two substitutions). It is clear, however, that bulb is more similar to blub than boob is, and the model I just mentioned recognizes that by allowing for transpositions.I want to use this in the context of text completion, so if I have an array ['international', 'splint', 'tinder'], and my query is int, I think international ought to rank more highly than splint, even though the former has a score (higher=worse) of 10 versus the latter's 3.So what I'm looking for (and will create if it doesn't exist), is a library that does the following:Has anyone come across anything like this? I realize that StackOverflow isn't the place to be asking for software recommendations, but implicit (not anymore!) in the above is: am I thinking about this the right way?I found a good paper (pdf) on the subject. Some notes and excerpts: For the Smith-Waterman distance (wikipedia), "Instead of looking at the total sequence, the Smith–Waterman algorithm compares segments of all possible lengths and optimizes the similarity measure." It's the n-gram approach.For text completion purposes, the Monger-Elkan and Jaro-Winkler approaches seem to make the most sense. Winkler's addition to the Jaro metric effectively weights the beginnings of words more heavily. And the affine aspect of Monger-Elkan means that the necessity to complete a word (which is simply a sequence of additions) won't disfavor it too heavily. Conclusion:Good question! But my thought is that, rather than trying to modify Levenshtein-Demerau, you might be better to try a different algorithm or combine/ weight the results from two algorithms.It strikes me that exact or close matches to the "starting prefix" are something Levenshtein-Demerau gives no particular weight to -- but your apparent user expectations would.I searched for "better than Levenshtein" and, among other things, found this:http://www.joyofdata.de/blog/comparison-of-string-distance-algorithms/This mentions a number of "string distance" measures. Three which looked particularly relevant to your requirement, would be:Maybe you could use a weighted combination (or minimum) of these metrics, with Levenshtein -- common substring, common N-gram or Jaccard will all strongly prefer similar strings -- or perhaps try just using Jaccard?Depending on the size of your list/ database, these algorithms can be moderately expensive. For a fuzzy search I implemented, I used a configurable number of N-grams as "retrieval keys" from the DB then ran the expensive string-distance measure to sort them in preference order.I wrote some notes on Fuzzy String Search in SQL. See:I tried using existing fuzzy libraries like fuse.js and also found them to be terrible, so I wrote one which behaves basically like sublime's search. https://github.com/farzher/fuzzysortThe only typo it allows is a transpose. It's pretty solid (1k stars, 0 issues), very fast, and handles your case easily:Here is a technique I have used a few times...It gives pretty good results. Does not do everything you asked for though. Also, this can be expensive if the list is massive.Pass two strings to string_similarity which will return a number between 0 and 1.0 depending on how similar they are. This example uses Lo-DashUsage Example....Also....have a fiddleMake sure your console is open or you wont see anything :)you may take a look at Atom's https://github.com/atom/fuzzaldrin/ lib.it is available on npm, has simple API, and worked ok for me.this is my short and compact function for fuzzy match:November 2019 Update.  I found fuse to have some pretty decent upgrades.  However, I could not get it to use bool's (i.e. OR, AND, etc operators) nor could I use the API search interface to filter results.I discovered nextapps-de/flexsearch: https://github.com/nextapps-de/flexsearch and I believe it by far surpasses a lot of the other javascript search libraries that I've tried, and it has support bool's, filtering searches & pagination.You can input a list of javascript objects for your search data (i.e. storage), and the API is fairly well documented:  https://github.com/nextapps-de/flexsearch#api-overviewSo far I've indexed close to 10,000 records, and my searches are next to immediate; i.e. unnoticeable amount of time for each search.jsfiddle http://jsfiddle.net/guest271314/QP7z5/Check out my Google Sheets add-on called Flookup and use this function:The parameter details are:This should do satisfy your requirements... although I'm not sure about point number 2.Find out more at the official website.here is the solution provided by @InternalFX, but in JS (I used it so sharing):

list every font a user's browser can display

mattsh

[list every font a user's browser can display](https://stackoverflow.com/questions/3368837/list-every-font-a-users-browser-can-display)

Is there a way in javascript to obtain the names of all fonts (or font-families) that the browser can show?  (I want to give the user a dropdown with a list of all available fonts, and allow the user to choose a font.)

I'd prefer not to have to hardcode this list ahead of time or send it down from the server.  (Intuitively, it seems like the browser should know what fonts it has and this should be exposed to javascript somehow.)

2010-07-30 05:11:43Z

Is there a way in javascript to obtain the names of all fonts (or font-families) that the browser can show?  (I want to give the user a dropdown with a list of all available fonts, and allow the user to choose a font.)

I'd prefer not to have to hardcode this list ahead of time or send it down from the server.  (Intuitively, it seems like the browser should know what fonts it has and this should be exposed to javascript somehow.)The JavaScript version is a bit flaky. It gets fonts by iterating through known fonts and testing. The most accurate way (albeit having to use a propriety plugin) is to use Flash. Here you can get the list of fonts without having to test for them individually using dimensions.You are going have to decide whether to have an exact list at the expense of not working on some devices ( iDevices, browsers without Flash plugin, etc), or a partial list with better support via JavaScript only.Yes there is! I'm so glad you asked this question because I now want to use this too.+1 for question, and here's your answer :)http://www.lalit.org/lab/javascript-css-font-detectCode from http://www.lalit.org/wordpress/wp-content/uploads/2008/05/fontdetect.js?ver=0.3SummaryIn my search for this, I also found Font.js, which adds a Font object much like Image, so it's possible to check when a font is actually ready to use. Also works on installed/system fonts. Downside is IE9+ only due to needing Object.defineProperty (other browsers have it), but if you are doing modern web, this seems like an even better option. (I will, sadly, have to go with the answer above, upvoted and moving on for now. :))I added two methods to Lalit Patel's Detector above :With this you can do:code:Go to deviceinfo.me and click on the font detection button.Maybe this could be done in a completely different way, using a spritesheet with known font images for a specific character and comparing that with snapshots of a canvas element on which the same character is drawn with what the browser reports as the same font. The comparison may be done with something like resemble.js. This is slower, but should also allow us to detect when the browser is lying.I have recently noticed that if I set the context.font value for an HTML5 canvas, to something invalid, such as "junk", the change is ignored by the canvas.  I do not know if this is browser specific, but it seems to work this way on Chrome.  I have also seen other posts (HTML 5 canvas font being ignored) that indicate it happens in other browsers. One could then write a string out with the default value, which I believe is "10px sans serif" (https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font), set the font to one you are testing and write the string again.  If it is the same as the first drawing, then the font is not available.  

angularjs newline filter with no other html

MegaHit

[angularjs newline filter with no other html](https://stackoverflow.com/questions/13964735/angularjs-newline-filter-with-no-other-html)

I'm trying to convert newline characters (\n) to html br's.

As per this discussion in the Google Group, here's what I've got:The discussion there also advises to use the following in the view:This seems to be using the old html filter, whereas now we're supposed to use the ng-bind-html attribute.Regardless, this poses a problem: I don't want any HTML from the original string (dataFromModel) to be rendered as HTML; only the br's.For example, given the following string:I'd want it to output:Is there any way to accomplish this?

2012-12-20 03:12:31Z

I'm trying to convert newline characters (\n) to html br's.

As per this discussion in the Google Group, here's what I've got:The discussion there also advises to use the following in the view:This seems to be using the old html filter, whereas now we're supposed to use the ng-bind-html attribute.Regardless, this poses a problem: I don't want any HTML from the original string (dataFromModel) to be rendered as HTML; only the br's.For example, given the following string:I'd want it to output:Is there any way to accomplish this?Maybe you can achieve this only with html, a <preformated text> way ? It will avoid from using filters or do any kind of processing.All you have to do is display the text within an element that has this CSS:This will parse and display \n as new lines. Works great for me.Here, a jsFiddle example.Instead of messing with new directives, I decided to just use 2 filters:Then, in my view, I pipe one into the other:A simpler way to do this is to make a filter that splits the text at each \n into a list, and then to use `ng-repeat.The filter:and in the html:If you do not want to destroy the layout with endless strings, use pre-line:I'm not aware if Angular has a service to strip html, but it seems you need to remove html before passing your newlines custom filter. The way I would do it is through a custom no-html directive, which would be passed a scope property and the name of a filter to apply after removing the html Here's the implementationThe important bit is the text variable. Here I create an intermediate DOM element and append it the HTML using the html method and then retrieve only the text with the text method. Both methods are provided by Angular's lite version of jQuery.The following part is applying the newline filter, which is done using the $filter service.Check the plunker here: http://plnkr.co/edit/SEtHH5eUgFEtC92Czq7T?p=previewAn update to the filter with ng-bind-html currently would be:and the noHTML filter is no longer required.white-space solution is having low browser support: 

http://caniuse.com/#search=tab-sizeBit late to the party on this but I would suggest a small improvement to check for undefined / null strings.Something like:Or (bit tighter)

How do I determine scrollHeight?

Brian

[How do I determine scrollHeight?](https://stackoverflow.com/questions/7381817/how-do-i-determine-scrollheight)

How do I determine scrollHeight of a division use css overflow:auto?I've tried:Ultimately, I'm trying to create a chat and always have the scroll bar to the current message on the screen.So I was thinking something like the following:Thank you,Brian 

2011-09-11 22:48:05Z

How do I determine scrollHeight of a division use css overflow:auto?I've tried:Ultimately, I'm trying to create a chat and always have the scroll bar to the current message on the screen.So I was thinking something like the following:Thank you,Brian scrollHeight is a regular javascript property so you don't need jQuery.Correct ways in jQuery are -Hope it helps.

Split array into chunks of N length [duplicate]

mrdaliri

[Split array into chunks of N length [duplicate]](https://stackoverflow.com/questions/11318680/split-array-into-chunks-of-n-length)

How to split an array (which has 10 items) into 4 chunks, which contain a maximum of n items.And it prints:The above assumes n = 3, however, the value should be dynamic.Thanks

2012-07-03 20:27:43Z

How to split an array (which has 10 items) into 4 chunks, which contain a maximum of n items.And it prints:The above assumes n = 3, however, the value should be dynamic.ThanksIt could be something like that:See splice Array's method.Maybe this code helps:

How to check if a query string value is present via JavaScript?

mrblah

[How to check if a query string value is present via JavaScript?](https://stackoverflow.com/questions/1314383/how-to-check-if-a-query-string-value-is-present-via-javascript)

How can I check if the query string contains a q= in it using JavaScript or jQuery?

2009-08-21 21:52:24Z

How can I check if the query string contains a q= in it using JavaScript or jQuery?You could also use a regular expression:Using URL:EDIT: if you're sad about compatibility, I'd highly suggest https://github.com/medialize/URI.js/.The plain javascript code sample which answers your question literally:The plain javascript code sample which attempts to find if the q parameter exists and if it has a value:one more variant, but almost the same as Gumbos solution:this function help you to get parameter from URL in JSTry thisJSFiddle: https://jsfiddle.net/codemirror/zj4qyao2/I've used this library before which does a pretty good job of what you're after. Specifically:-This should help:

Implement a loading indicator for a jQuery AJAX call

devcoder

[Implement a loading indicator for a jQuery AJAX call](https://stackoverflow.com/questions/11961438/implement-a-loading-indicator-for-a-jquery-ajax-call)

I have a Bootstrap modal which is launched from a link. For about 3 seconds it just sits there blank, while the AJAX query fetches the data from the database. How can I implement some sort of a loading indicator? Does twitter bootstrap provide this functionality by default?EDIT: JS code for modal

2012-08-14 21:58:39Z

I have a Bootstrap modal which is launched from a link. For about 3 seconds it just sits there blank, while the AJAX query fetches the data from the database. How can I implement some sort of a loading indicator? Does twitter bootstrap provide this functionality by default?EDIT: JS code for modalI'm guessing you're using jQuery.get or some other jQuery ajax function to load the modal. You can show the indicator before the ajax call, and hide it when the ajax completes. Something likeI solved the same problem following this example:  This example uses the jQuery JavaScript library.  First, create an Ajax icon using the AjaxLoad site.

Then add the following to your HTML : And the following to your CSS file: Lastly, you need to hook into the Ajax events that jQuery provides; one event handler for when the Ajax request begins, and one for when it ends:This solution is from the following link.

How to display an animated icon during Ajax request processingThere is a global configuration using jQuery. This code runs on every global ajax request.Here is a demo: http://jsfiddle.net/sd01fdcm/A loading indicator is simply an animated image (.gif) that is displayed until the completed event is called on the AJAX request. http://ajaxload.info/ offers many options for generating loading images that you can overlay on your modals. To my knowledge, Bootstrap does not provide the functionality built-in.This is how I got it working with loading remote content that needs to be refreshed:Basically, just replace the modal content while it's loading with a loading message. The content will then be replaced once it's finished loading.This is how I realised the loading indicator by an Glyphicon:

Javascript roundoff number to nearest 0.5

Johnydep

[Javascript roundoff number to nearest 0.5](https://stackoverflow.com/questions/6137986/javascript-roundoff-number-to-nearest-0-5)

Can someone give me an idea how can i round off a number to the nearest 0.5.

I have to scale elements in a web page according to screen resolution and for that i can only assign font size in pts to 1, 1.5 or 2 and onwards etc.  If i round off it rounds either to 1 decimal place or none. 

How can i accomplish this job?

2011-05-26 11:49:45Z

Can someone give me an idea how can i round off a number to the nearest 0.5.

I have to scale elements in a web page according to screen resolution and for that i can only assign font size in pts to 1, 1.5 or 2 and onwards etc.  If i round off it rounds either to 1 decimal place or none. 

How can i accomplish this job?Write your own function that multiplies by 2, rounds, then divides by 2, e.g.Here's a more generic solution that may be useful to you:round(2.74, 0.1) = 2.7round(2.74, 0.25) = 2.75round(2.74, 0.5) = 2.5round(2.74, 1.0) = 3.0Math.round(-0.5) returns 0, but it should be -1 according to the math rules.More info: Math.round()

and Number.prototype.toFixed() I wrote this before seeing Tunaki's better response ;) To extend the top answer by newtron for rounding on more than only 0.5

Javascript .querySelector find <div> by innerTEXT

passwd

[Javascript .querySelector find <div> by innerTEXT](https://stackoverflow.com/questions/37098405/javascript-queryselector-find-div-by-innertext)

How can I find DIV with certain text? For example:Trying to use something like this:But ofcourse it will not work. How can I do it?

2016-05-08 09:41:48Z

How can I find DIV with certain text? For example:Trying to use something like this:But ofcourse it will not work. How can I do it?OP's question is about plain JavaScript and not jQuery.

Although there are plenty of answers and I like @Pawan Nogariya answer, please check this alternative out.You can use XPATH in JavaScript. More info on the MDN article here.The document.evaluate() method evaluates an XPATH query/expression. So you can pass XPATH expressions there, traverse into the HTML document and locate the desired element.In XPATH you can select an element, by the text node like the following, whch gets the div that has the following text node.To get an element that contains some text use the following:The contains() method in XPATH takes a node as first parameter and the text to search for as second parameter.Check this plunk here, this is an example use of XPATH in JavaScriptHere is a code snippet:As you can see, I can grab the HTML element and modify it as I like.You could use this pretty simple solution:Note that Array.from and Array.find are ES2015 features. Te be compatible with older browsers like IE10 without a transpiler:Since you have asked it in javascript so you can have something like thisAnd then call it like thisThis solution does the following:You best see if you have a parent element of the div you are querying. If so get the parent element and perform an element.querySelectorAll("div"). Once you get the nodeList apply a filter on it over the innerText property. Assume that a parent element of the div that we are querying has an id of container. You can normally access container directly from the id but let's do it the proper way.So that's it.If you don't want to use jquery or something like that then you can try this:Once you have the nodes in an array that contain the text you can do something with them. Like alert each one or print to console. One caveat is that this may not necessarily grab divs per se, this will grab the parent of the textnode that has the text you are looking for.Google has this as a top result for For those who need to find a node with certain text.

By way of update, a nodelist is now iterable in modern browsers without having to convert it to an array.The solution can use forEach like so.This worked for me to do a find/replace text inside a nodelist when a normal selector could not choose just one node so I had to filter each node one by one to check it for the needle.Use XPath and document.evaluate(), and make sure to use text() and not . for the contains() argument, or else you will have the entire HTML, or outermost div element matched.or ignore leading and trailing whitespaceor match all tag types (div, h1, p, etc.)Then iterateHere's the XPath approach but with a minimum of XPath jargon.Regular selection based on element attribute values (for comparison):XPath selection based on text within element.And here's with case-insensitivity since text is more volatile:I had similar problem. Function that return all element which include text from arg. This works for me:}Since there are no limits to the length of text in a data attribute, use data attributes! And then you can use regular css selectors to select your element(s) like the OP wants.Ideally you do the data attribute setting part on document load and narrow down the querySelectorAll selector a bit for performance.

Recommended way of making React component/div draggable

Andrew Fleenor

[Recommended way of making React component/div draggable](https://stackoverflow.com/questions/20926551/recommended-way-of-making-react-component-div-draggable)

I want to make a draggable (that is, repositionable by mouse) React component, which seems to necessarily involve global state and scattered event handlers. I can do it the dirty way, with a global variable in my JS file, and could probably even wrap it in a nice closure interface, but I want to know if there's a way that meshes with React better.Also, since I've never done this in raw JavaScript before, I'd like to see how an expert does it, to make sure I've got all the corner cases handled, especially as they relate to React.Thanks.

2014-01-04 20:46:40Z

I want to make a draggable (that is, repositionable by mouse) React component, which seems to necessarily involve global state and scattered event handlers. I can do it the dirty way, with a global variable in my JS file, and could probably even wrap it in a nice closure interface, but I want to know if there's a way that meshes with React better.Also, since I've never done this in raw JavaScript before, I'd like to see how an expert does it, to make sure I've got all the corner cases handled, especially as they relate to React.Thanks.I should probably turn this into a blog post, but here's pretty solid example.The comments should explain things pretty well, but let me know if you have questions.And here's the fiddle to play with: http://jsfiddle.net/Af9Jt/2/"Who should own what state" is an important question to answer, right from the start. In the case of a "draggable" component, I could see a few different scenarios.the parent should own the current position of the draggable. In this case, the draggable would still own the "am I dragging" state, but would call this.props.onChange(x, y) whenever a mousemove event occurs. the parent only needs to own the "non-moving position", and so the draggable would own it's "dragging position" but onmouseup it would call this.props.onChange(x, y) and defer the final decision to the parent. If the parent doesn't like where the draggable ended up, it would just not update it's state, and the draggable would "snap back" to it's initial position before dragging.@ssorallen pointed out that, because "draggable" is more an attribute than a thing in itself, it might serve better as a mixin. My experience with mixins is limited, so I haven't seen how they might help or get in the way in complicated situations. This might well be the best option.I implemented react-dnd, a flexible HTML5 drag-and-drop mixin for React with full DOM control.Existing drag-and-drop libraries didn't fit my use case so I wrote my own. It's similar to the code we've been running for about a year on Stampsy.com, but rewritten to take advantage of React and Flux.Key requirements I had:If these sound familiar to you, read on.First, declare types of data that can be dragged.These are used to check「compatibility」of drag sources and drop targets:(If you don't have multiple data types, this libary may not be for you.)Then, let's make a very simple draggable component that, when dragged, represents IMAGE:By specifying configureDragDrop, we tell DragDropMixin the drag-drop behavior of this component. Both draggable and droppable components use the same mixin.Inside configureDragDrop, we need to call registerType for each of our custom ItemTypes that component supports. For example, there might be several representations of images in your app, and each would provide a dragSource for ItemTypes.IMAGE.A dragSource is just an object specifying how the drag source works. You must implement beginDrag to return item that represents the data you're dragging and, optionally, a few options that adjust the dragging UI. You can optionally implement canDrag to forbid dragging, or endDrag(didDrop) to execute some logic when the drop has (or has not) occured. And you can share this logic between components by letting a shared mixin generate dragSource for them.Finally, you must use {...this.dragSourceFor(itemType)} on some (one or more) elements in render to attach drag handlers. This means you can have several「drag handles」in one element, and they may even correspond to different item types. (If you're not familiar with JSX Spread Attributes syntax, check it out).Let's say we want ImageBlock to be a drop target for IMAGEs. It's pretty much the same, except that we need to give registerType a dropTarget implementation:Say we now want the user to be able to drag out an image out of ImageBlock. We just need to add appropriate dragSource to it and a few handlers:I have not covered everything but it's possible to use this API in a few more ways:For up-to-date documentation and installation instructions, head to react-dnd repo on Github.The answer by Jared Forsyth is horribly wrong and outdated. It follows a whole set of antipatterns such as usage of stopPropagation, initializing state from props, usage of jQuery, nested objects in state and has some odd dragging state field. If being rewritten, the solution will be the following, but it still forces virtual DOM reconciliation on every mouse move tick and is not very performant.UPD. My answer was horribly wrong and outdated. Now the code alleviates issues of slow React component lifecycle by using native event handlers and style updates, uses transform as it doesn't lead to reflows, and throttles DOM changes through requestAnimationFrame. Now it's consistently 60 FPS for me in every browser I tried.and a bit of CSSExample on JSFiddle.I've updated polkovnikov.ph solution to React 16 / ES6 with enhancements like touch handling and snapping to a grid which is what I need for a game. Snapping to a grid alleviates the performance issues.react-draggable is also easy to use. Github:https://github.com/mzabriskie/react-draggableAnd my index.html:You need their styles, which is short, or you don't get quite the expected behavior. I like the behavior more than some of the other possible choices, but there's also something called react-resizable-and-movable. I'm trying to get resize working with draggable, but no joy so far.I would like to add a 3rd ScenarioThe moving position is not saved in any way. Think of it as a mouse movement - your cursor is not a React-component, right?All you do, is to add a prop like "draggable" to your component and a stream of the dragging events that will manipulate the dom.In this case, a DOM manipulation is an elegant thing (I never thought I'd say this)

Coffeescript — How to create a self-initiating anonymous function?

user537339

[Coffeescript — How to create a self-initiating anonymous function?](https://stackoverflow.com/questions/5605284/coffeescript-how-to-create-a-self-initiating-anonymous-function)

How to write this in coffeescript?Thanks for any tips :)

2011-04-09 13:23:07Z

How to write this in coffeescript?Thanks for any tips :)While you can just use parentheses (e.g. (-> foo)(), you can avoid them by using the do keyword:The most common use of do is capturing variables in a loop. For instance,Without the do, you'd just be printing the value of x after the loop 3 times.If you want to "alias" the arguments passed to self-invoking function in CoffeeScript, and let's say this is what you are trying to achieve:Then do (window, document) -> won't let you do that. The way to go is with parens then:it's ridiculous easy in coffee:will return You can also combine the do keyword with default function parameters to seed recursive "self-initiating functions" with an initial value. Example:try to use This will create a self executing closure, which is useful for scoping.Apologies, I solved it:It should be 

object destructuring without var

alawatthe

[object destructuring without var](https://stackoverflow.com/questions/27386234/object-destructuring-without-var)

Why does object destructuring throw an error if there is no var keyword in front of it?throws SyntaxError: expected expression, got '='The following three examples work without problemsBonus question: Why do we not need a var for array destructuring?I ran into the problem doing something like

2014-12-09 18:32:05Z

Why does object destructuring throw an error if there is no var keyword in front of it?throws SyntaxError: expected expression, got '='The following three examples work without problemsBonus question: Why do we not need a var for array destructuring?I ran into the problem doing something likeThe issue stems from the {...} operators having multiple meanings in JavaScript.When { appears at the start of a Statement, it'll always represent a block, which can't be assigned to. If it appears later in the Statement as an Expression, then it'll represent an Object.The var helps make this distinction, since it can't be followed by a Statement, as will grouping parenthesis:From their docs: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Assignment_without_declarationIf you write JavaScript without semicolons, then the 'assignment without declaration' syntax should be preceded with a semicolon for it to work predictablyJust wanted to highlight this as it caught me out, and hopefully can save others some time figuring out why it doesn't work and/or produces weird results with code formatters etc.Indeed, it's actually right there in the accepted answer (last line of the quoted docs) but easy to miss, especially without seeing an example!

Convert blob URL to normal URL

Jacob

[Convert blob URL to normal URL](https://stackoverflow.com/questions/14952052/convert-blob-url-to-normal-url)

My page generates a URL like this: "blob:http%3A//localhost%3A8383/568233a1-8b13-48b3-84d5-cca045ae384f" How can I convert it to a normal address?I'm using it as an <img>'s src attribute.

2013-02-19 07:29:49Z

My page generates a URL like this: "blob:http%3A//localhost%3A8383/568233a1-8b13-48b3-84d5-cca045ae384f" How can I convert it to a normal address?I'm using it as an <img>'s src attribute.A URL that was created from a JavaScript Blob can not be converted to a "normal" URL.A blob: URL does not refer to data the exists on the server, it refers to data that your browser currently has in memory, for the current page. It will not be available on other pages, it will not be available in other browsers, and it will not be available from other computers.Therefore it does not make sense, in general, to convert a Blob URL to a "normal" URL. If you wanted an ordinary URL, you would have to send the data from the browser to a server and have the server make it available like an ordinary file.It is possible convert a blob: URL into a data: URL, at least in Chrome. You can use an AJAX request to "fetch" the data from the blob: URL (even though it's really just pulling it out of your browser's memory, not making an HTTP request).Here's an example:data: URLs are probably not what you mean by "normal" and can be problematically large. However they do work like normal URLs in that they can be shared; they're not specific to the current browser or session.another way to create a data url from blob url may be using canvas.as what i saw in mdn, canvas.toDataURL is supported well by browsers. (except ie<9, always ie<9)For those who came here looking for a way to download a blob url video / audio, this answer worked for me. In short, you would need to find an *.m3u8 file on the desired web page through Chrome -> Network tab and paste it into a VLC player. Another guide shows you how to save a stream with the VLC Player.As the previous answer have said, there is no way to decode it back to url, even when you try to see it from the chrome devtools panel, the url may be still encoded as blob. However, it's possible to get the data, another way to obtain the data is to put it into an anchor and directly download it.Insert this to the page containing blob url and click the button, you get the content.Another way is to intercept the ajax call via a proxy server, then you could view the true image url.

Replace words in the body text

Wahtever

[Replace words in the body text](https://stackoverflow.com/questions/5558613/replace-words-in-the-body-text)

Is there a way to replace the normal text within a table element that is placed within the body of the HTML?Like replacing "hello" with "hi"?Please only use JavaScript without jQuery.

2011-04-05 21:14:26Z

Is there a way to replace the normal text within a table element that is placed within the body of the HTML?Like replacing "hello" with "hi"?Please only use JavaScript without jQuery.To replace a string in your HTML with another use the replace method on innerHTML:Note that this will replace the first instance of hello throughout the body, including any instances in your HTML code (e.g. class names etc..), so use with caution - for better results, try restricting the scope of your replacement by targeting your code using document.getElementById or similar.To replace all instances of the target string, use a simple regular expression with the global flag:The function below works perfectly for me:Here's a usage example:You can also use do a direct replacement like so:But be careful with it since it may affect the tags, css and scripts as well.EDIT:

As for a pure JavaScript solution use this method instead:I had the same problem. I wrote my own function using replace on innerHTML, but it would screw up anchor links and such.To make it work correctly I used a library to get this done.The library has an awesome API. After including the script I called it like this:I ended up with this function to safely replace text without side effects (so far):It's for cases where the 16kB of findAndReplaceDOMText are a bit too heavy.Use the default javascript string replace functionI was trying to replace a really large string and for some reason regular expressions were throwing some errors/exceptions. So I found this alternative to regular expressions which also runs pretty fast. At least it was fast enough for me: src: How to replace all occurrences of a string in JavaScript?Try to apply the above suggested solution on pretty big document, replacing pretty short strings which might be present in innerHTML or even innerText, and your html design becomes broken at bestTherefore I firstly pickup only  text node elements via HTML DOM nodes, like this`and followingly I applied the replacement on all of them in cycleWanted to add an example to funky-future's answer as I kept getting this error:use like this:it didn't work for me with jQuery selectors.I am new to Javascript and just started learning these skills. Please check if the below method is useful to replace the text.

React-Redux: Should all component states be kept in Redux Store

l2silver

[React-Redux: Should all component states be kept in Redux Store](https://stackoverflow.com/questions/35328056/react-redux-should-all-component-states-be-kept-in-redux-store)

Say I have a simple toggle:

When I click the button, the Color component changes between red and blueI might achieve this result by doing something like this.index.jscontainer.jsaction_creator.jsreducer.jsbut this is a hell of a lot of code to write for something that I could have achieved in 5 seconds with jQuery, some classes, and some css...So I guess what I'm really asking is, what am I doing wrong here?

2016-02-10 23:30:24Z

Say I have a simple toggle:

When I click the button, the Color component changes between red and blueI might achieve this result by doing something like this.index.jscontainer.jsaction_creator.jsreducer.jsbut this is a hell of a lot of code to write for something that I could have achieved in 5 seconds with jQuery, some classes, and some css...So I guess what I'm really asking is, what am I doing wrong here?Redux is primarily intended for "application state." That is, anything related to your application logic. The view built on top of it is a reflection of that state, but does not have to exclusively use that state container for everything it does.Simply ask these questions: Is this state important to the rest of the application? Will other parts of the application behave differently based on that state? In many minor cases, that will not be the case. Take a drop down menu: The fact that it's open or closed probably won't have an effect on other parts of the app. So, wiring it up to your store is probably overkill. It's certainly a valid option, but doesn't really net you any benefits. You're better off using this.state and calling it a day. In your particular example, does the color that button is toggled to make any difference in other parts of the application? If it's some sort of global on/off toggle for a major part of your application, it definitely belongs in the store. But if you're just toggling a button color when you click the button, you can leave the color state locally-defined. The action of clicking the button might have other effects that require an action dispatch, but that is separate from the simple question of what color it should be.In general, try to keep your application state as small as possible. You don't have to shove everything in there. Do it when you have to or it makes a lot of sense to keep something there. Or if it makes your life easier when using Dev Tools. But don't overload its importance too much.Redux FAQ: Organizing State

this part of redux official doc well answered your question.For the purpose of highlighting the great link provided by @AR7, and because that link moved a while back:Yes, it's worth striving to store all component state in Redux. If you do, you will benefit from many features of Redux like time travel debugging and  replayable bug reports. If you don't, those features could be completely unusable.Any time you do not store a component state change in Redux, that change is completely lost from the stack of Redux changes and your application UI will be out of sync with the store. If this is not important to you then ask yourself why use Redux at all? Your application will be less complex without it!For performance reasons, you may wish to fall back to this.setState() for anything that would dispatch many actions repeatedly. For example: storing the state of an input field in Redux each time the user types a key may result in poor performance. You can solve this by treating it like a transaction: once the user action is "committed," save the final state in Redux.Your original post mentions how the Redux way is a "hell of a lot of code to write." Yes but you can use abstractions for common patterns such as local component state.

What is the DOM and BOM in JavaScript?

Imran

[What is the DOM and BOM in JavaScript?](https://stackoverflow.com/questions/4416317/what-is-the-dom-and-bom-in-javascript)

What is the DOM and BOM in JavaScript? If someone could explain these in layman terms it would be great! I like to get a deeper understanding of these.

2010-12-11 10:39:27Z

What is the DOM and BOM in JavaScript? If someone could explain these in layman terms it would be great! I like to get a deeper understanding of these.The BOM (Browser Object Model) consists of the objects navigator, history, screen, location and document which are children of window. In the document node is the DOM (Document Object Model), the document object model, which represents the contents of the page. You can manipulate it using javascript.This article explains relationship between Javascript, DOM and BOM.They're just different objects you're dealing with:DOM means Document Object model..when the webpage is loaded the browser creates a document object model for the page..All the  objects are arranged as tree structure...BOM means Browser Object Model.window object is supported by all browsers it represents the window browser..All global JavaScript objects, functions, and variables automatically become members of the window object.DOM :

The document object represents the whole html document. When html document is loaded in the browser, it becomes a document object.BOM :

The window object represents a window in browser. An object of window is created automatically by the browser.You can find more information about Javascript on Mozilla Foundation. DOMhttps://developer.mozilla.org/en-US/docs/DOM/DOM_Reference/IntroductionBOMhttps://developer.mozilla.org/en-US/docs/WebAPI/BrowserBOM means Browser Object Model . These are objects that you can use to manipulate the browser. they are navigatorthey are all children of the Window Object.

DOM is Document Object Model is part of the BOM and it helps you manipulate the content of the loaded page file. this include the HTML and CSSDOM -> Document Object Model in JavaScript is the API to access the elements inside the document. It maps the entire Document into an hierarchy of parent and child tree. Each node can hold number of children element or can inherit to other parent element in some or the other way.BOM ->  Browser Object Model is a larger representation of everything provided by the browser including the current document, location, history, frames, and any other functionality the browser may expose to JavaScript. The Browser Object Model is not standardized and can change based on different browsers.

Playing sound notifications using Javascript?

Click Upvote

[Playing sound notifications using Javascript?](https://stackoverflow.com/questions/450033/playing-sound-notifications-using-javascript)

How can I do that, so whenever a user clicks a link we play a sound? Using javascript and jquery here.

2009-01-16 10:41:47Z

How can I do that, so whenever a user clicks a link we play a sound? Using javascript and jquery here.https://github.com/admsev/jquery-play-sound$.playSound('http://example.org/sound.mp3');Put an <audio> element on your page.

Get your audio element and call the play() method:Check out this example: http://www.storiesinflight.com/html5/audio.htmlThis site uncovers some of the other cool things you can do such as load(), pause(), and a few other properties of the audio element.When exactly you want to play this audio element is up to you. Read the text of the button and compare it to "no" if you like.http://www.schillmania.com/projects/soundmanager2/SoundManager 2 provides a easy to use API that allows sound to be played in any modern browser, including IE 6+. If the browser doesn't support HTML5, then it gets help from flash. If you want stricly HTML5 and no flash, there's a setting for that, preferFlash=falseIt supports 100% Flash-free audio on iPad, iPhone (iOS4) and other HTML5-enabled devices + browsersUse is as simple as:Here's a demo of it in action: http://www.schillmania.com/projects/soundmanager2/demo/christmas-lights/Found something like that:Using the html5 audio tag and jquery:Code from here.In my implementation I added the audio embed directly into the HTML without jquery append.JavaScript Sound Manager:http://www.schillmania.com/projects/soundmanager2/I wrote a small function that can do it, with the Web Audio API...New emerger... seems to be compatible with IE, Gecko browsers and iPhone so far...http://www.jplayer.org/Following code might help you to play sound in a web page using javascript only. You can see further details at http://sourcecodemania.com/playing-sound-javascript-flash-player/First things first, i'd not like that as a user.The best way to do is probably using a small flash applet that plays your sound in the background.Also answered here: Cross-platform, cross-browser way to play sound from Javascript?

How to removeEventListener that is addEventListener with anonymous function?

Japboy

[How to removeEventListener that is addEventListener with anonymous function?](https://stackoverflow.com/questions/5660131/how-to-removeeventlistener-that-is-addeventlistener-with-anonymous-function)

2011-04-14 07:51:02Z

You can't. You have to use a named function or store the reference somehow.The best would be to do this in a structured way, so that you can identify different handlers and remove them. In the example above, you obviously could only remove the last handler.Update:You could create your own handler handler (:)) :Then you can use it with:DEMOYou can't, you need a reference to the function:You could also do this like that:Then you can remove the event listener like this:if you dont have to support IE, you can use the once option

Async function in mocha before() is alway finished before it() spec?

Nicolas S.Xu

[Async function in mocha before() is alway finished before it() spec?](https://stackoverflow.com/questions/24723374/async-function-in-mocha-before-is-alway-finished-before-it-spec)

I have a callback function in before() which is for cleaning database. 

Is everything in before() guaranteed to finish before it() starts? 

2014-07-13 13:53:09Z

I have a callback function in before() which is for cleaning database. 

Is everything in before() guaranteed to finish before it() starts? For new mocha versions :You can now return a promise to mocha, and mocha will wait for it to complete before proceeding. For example, the following test will pass :You can find the documentation hereFor older mocha versions :If you want your asynchronous request to be completed before everything else happens, you need to use the done parameter in your before request, and call it in the callback.Mocha will then wait until done is called to start processing the following blocks.You should be careful though, as not stubbing the database for unit testing may strongly slow the execution, as requests in a database may be pretty long compared to simple code execution.For more information, see the Mocha documentation.Hopefully your db.collection() should return a promise. If yes then you can also use async keyword in before()

Event handlers for Twitter Bootstrap dropdowns?

Richard

[Event handlers for Twitter Bootstrap dropdowns?](https://stackoverflow.com/questions/11989146/event-handlers-for-twitter-bootstrap-dropdowns)

I'd like to use a Twitter Bootstrap dropdown button:When the user changes the value of the button to 'Another action', instead of simply navigating to #, I'd actually like to handle the action in a custom way. But I can't see any event handlers in the dropdown plugin for doing this.Is it actually possible to use Bootstrap dropdown buttons to handle user actions? I'm starting to wonder if they're only intended for navigation - it's confusing that the example gives a list of actions. 

2012-08-16 14:17:30Z

I'd like to use a Twitter Bootstrap dropdown button:When the user changes the value of the button to 'Another action', instead of simply navigating to #, I'd actually like to handle the action in a custom way. But I can't see any event handlers in the dropdown plugin for doing this.Is it actually possible to use Bootstrap dropdown buttons to handle user actions? I'm starting to wonder if they're only intended for navigation - it's confusing that the example gives a list of actions. Twitter bootstrap is meant to give a baseline functionality, and provides only basic javascript plugins that do something on screen.  Any additional content or functionality, you'll have to do yourself.and then with jQueryTry this:In Bootstrap 3 'dropdown.js' provides us with the various events that are triggered.etcHere is a working example of how you could implement custom functions for your anchors.http://jsfiddle.net/CH2NZ/43/You can attach an id to your anchor:And then use jQuery's click event listener to listen for the click action and fire you function:I have been looking at this. On populating the drop down anchors, I have given them a class and data attributes, so when needing to do an action you can do: and then in the jQuery doing something like:So if you have dynamically generated list items in your dropdown and need to use the data that isn't just the text value of the item, you can use the data attributes when creating the dropdown listitem and then just give each item with the class the event, rather than referring to the id's of each item and generating a click event. Anyone here looking for Knockout JS integration.Given the following HTML (Standard Bootstrap dropdown button):Use the following JS:For those looking to generate dropdown options based on knockout observable array, the code would look something like:Without having to change your button group at all, you can do the following. Below, I assume your dropdown button has an id of fldCategory.Now, if you set the .btn-group of this item itself to have the id of fldCategory, that's actually more efficient jQuery and runs a little faster:

Cross origin requests are only supported for HTTP but it's not cross-domain

siannone

[Cross origin requests are only supported for HTTP but it's not cross-domain](https://stackoverflow.com/questions/8449716/cross-origin-requests-are-only-supported-for-http-but-its-not-cross-domain)

I'm using this code to make an AJAX request:But from the Google Chrome JavaScript console I keep receiving this error:The problem is that the signup.php file is hosted on my local web server that's where all the website is run from so it's not cross-domain.How can I solve this problem?

2011-12-09 17:57:16Z

I'm using this code to make an AJAX request:But from the Google Chrome JavaScript console I keep receiving this error:The problem is that the signup.php file is hosted on my local web server that's where all the website is run from so it's not cross-domain.How can I solve this problem?You need to actually run a webserver, and make the get request to a URI on that server, rather than making the get request to a file; e.g. change the line:to read something like:and the initial request page needs to be made over http as well.I've had luck starting chrome with the following switch:On os x try (re-type the dashes if you copy paste):On other *nix run (not tested)or on windows edit the properties of the chrome shortcut and add the switch, e.g.to the end of the "target" pathIf you’re working on a little front-end project and want to test it locally, you’d typically open it by pointing your local directory in the web browser, for instance entering file:///home/erick/mysuperproject/index.html in your URL bar. However, if your site is trying to load resources, even if they’re placed in your local directory, you might see warnings like this:XMLHttpRequest cannot load  file:///home/erick/mysuperproject/mylibrary.js. Cross origin requests are only supported for HTTP. Chrome and other modern browsers have implemented security restrictions for Cross Origin Requests, which means that you cannot load anything through  file:/// , you need to use http:// protocol at all times, even locally -due Same Origin policies. Simple as that, you’d need to mount a webserver to run your project there.This is not the end of the world and there are many solutions out there, including the good old Apache (with VirtualHosts if you’re running several other projects), node.js with  express, a Ruby server, etc. or simply modifying your browser settings.However there’s a simpler and lightweight solution for the lazy ones. You can use Python’s SimpleHTTPServer. It comes already bundled with python so you don’t need to install or configure anything at all!So cd to your project directory, for instance1

cd /home/erick/mysuperproject

and then simply use1

python -m SimpleHTTPServer

And that’s it, you’ll see this message in your terminal1

Serving HTTP on 0.0.0.0 port 8000 ...

So now you can go back to your browser and visit http://0.0.0.0:8000 with all your directory files served there. You can configure the port and other things, just see the documentation. But this simply trick works for me when I’m in a rush to test a new library or work out a new idea.There you go, happy coding!EDIT:

In Python 3+, SimpleHTTPServer has been replaced with http.server. So In Python 3.3, for example, the following command is equivalent:I was getting the same error while trying to load simply HTML files that used JSON data to populate the page, so I used used node.js and express to solve the problem. If you do not have node installed, you need to install node first.node server.jsIf you have nodejs installed, you can download and install the server using command line:Change directories to the directory where you want to serve files from: Run the server:which will produce the message Starting up http-server, serving on: Available on:

  http://your_ip:8080 and 

  http://127.0.0.1:8080That allows you to use urls in your browser like It works best this way. Make sure that both files are on the server. When calling the html page, make use of the web address like: http:://localhost/myhtmlfile.html, and not, C::///users/myhtmlfile.html. Make usre as well that the url passed to the json is a web address as denoted below:You can also start a server without python using php interpreter.E.g:This can be useful if you want an alternative to npm, as php utility comes preinstalled on many systems.

Copy a variable's value into another

Rutwick Gangurde

[Copy a variable's value into another](https://stackoverflow.com/questions/18829099/copy-a-variables-value-into-another)

I have a variable which has a JSON object as its value. I directly assign this variable to some other variable so that they share the same value. This is how it works:This works and both have the same value. I use a mousemove event handler to update b through out my app. On a button click, I want to revert b to the original value, meaning the value stored in a.After this if I use the same mousemove event handler, it updates both a and b, when earlier it was updating only b as expected.I'm stumped over this issue! What is wrong here?

2013-09-16 13:21:59Z

I have a variable which has a JSON object as its value. I directly assign this variable to some other variable so that they share the same value. This is how it works:This works and both have the same value. I use a mousemove event handler to update b through out my app. On a button click, I want to revert b to the original value, meaning the value stored in a.After this if I use the same mousemove event handler, it updates both a and b, when earlier it was updating only b as expected.I'm stumped over this issue! What is wrong here?It's important to understand what the = operator in JavaScript does and does not do.The = operator does not make a copy of the data.The = operator creates a new reference to the same data.After you run your original code:a and b are now two different names for the same object.Any change you make to the contents of this object will be seen identically whether you reference it through the a variable or the b variable. They are the same object.So, when you later try to "revert" b to the original a object with this code:The code actually does nothing at all, because a and b are the exact same thing. The code is the same as if you'd written:which obviously won't do anything.Why does your new code work?Here you are creating a brand new object with the {...} object literal. This new object is not the same as your old object. So you are now setting b as a reference to this new object, which does what you want.To handle any arbitrary object, you can use an object cloning function such as the one listed in Armand's answer, or since you're using jQuery just use the $.extend() function. This function will make either a shallow copy or a deep copy of an object. (Don't confuse this with the $().clone() method which is for copying DOM elements, not objects.)For a shallow copy:Or a deep copy:What's the difference between a shallow copy and a deep copy? A shallow copy is similar to your code that creates a new object with an object literal. It creates a new top-level object containing references to the same properties as the original object.If your object contains only primitive types like numbers and strings, a deep copy and shallow copy will do exactly the same thing. But if your object contains other objects or arrays nested inside it, then a shallow copy doesn't copy those nested objects, it merely creates references to them. So you could have the same problem with nested objects that you had with your top-level object. For example, given this object:If you do a shallow copy of that object, then the x property of your new object is the same x object from the original:Now your objects will look like this:You can avoid this with a deep copy. The deep copy recurses into every nested object and array (and Date in Armand's code) to make copies of those objects in the same way it made a copy of the top-level object. So changing copy.x.y wouldn't affect obj.x.y.Short answer: If in doubt, you probably want a deep copy.I found using JSON works but watch our for circular referencesthe question is already solved since quite a long time, but for future reference a possible solution isBe careful, this works correctly only if a is a non-nested array of numbers and stringsnewVariable = originalVariable.valueOf();for objects you can use,

 b = Object.assign({},a);The reason for this is simple. JavaScript uses refereces, so when you assign b = a you are assigning a reference to b thus when updating a you are also updating bI found this on stackoverflow and will help prevent things like this in the future by just calling this method if you want to do a deep copy of an object.I do not understand why the answers are so complex.  In Javascript, primitives (strings, numbers, etc) are passed by value, and copied.  Objects, including arrays, are passed by reference.  In any case, assignment of a new value or object reference to 'a' will not change 'b'.  But changing the contents of 'a' will change the contents of 'b'.Paste any of the above lines (one at a time) into node or any browser javascript console.  Then type any variable and the console will show it's value.For strings or input values you could simply use this:Most of the answers here are using built-in methods or using libraries/frameworks. This simple method should work fine:I solved it myself for the time being. The original value has only 2 sub-properties. I reformed a new object with the properties from a and then assigned it to b. Now my event handler updates only b, and my original a stays as it is.This works fine. I have not changed a single line anywhere in my code except for the above, and it works just how I wanted it to. So, trust me, nothing else was updating a.A solution for AngularJS:

Javascript Thousand Separator / string format

LostLord

[Javascript Thousand Separator / string format](https://stackoverflow.com/questions/3753483/javascript-thousand-separator-string-format)

Is there any function in Javascript for formatting number and strings ?I am looking for a way for thousand separator for string or numbers...

(Like String.Format In c#)

2010-09-20 16:35:04Z

Is there any function in Javascript for formatting number and strings ?I am looking for a way for thousand separator for string or numbers...

(Like String.Format In c#)Update (7 years later)The reference cited in the original answer below was wrong.  There is a built in function for this, which is exactly what kaiser suggests below: toLocaleStringSo you can do:The function implemented below works, too, but simply isn't necessary.(I thought perhaps I'd get lucky and find out that it was necessary back in 2010, but no.  According to this more reliable reference, toLocaleString has been part of the standard since ECMAScript 3rd Edition [1999], which I believe means it would have been supported as far back as IE 5.5.)Original AnswerAccording to this reference there isn't a built in function for adding commas to a number.  But that page includes an example of how to code it yourself:Edit:

To go the other way (convert string with commas to number), you could do something like this:If is about localizing thousands separators, delimiters and decimal separators, go with the following:There are several options you can use (and even locales with fallbacks):Details on the MDN info page.Edit: Commentor @I like Serena adds the following:A regular expression may be used - notably useful in dealing with big numbers stored as strings. » Verbose regex explanation (regex101.com)

Attempting to handle this with a single regular expression (without callback) my current ability fails me for lack of a negative look-behind in Javascript... never the less here's another concise alternative that works in most general cases - accounting for any decimal point by ignoring matches where the index of the match appears after the index of a period.» Verbose regex explanation (regex101.com)There's a nice jQuery number plugin: https://github.com/teamdf/jquery-numberIt allows you to change any number in the format you like, with options for decimal digits and separator characters for decimal and thousand:You can use it inside input fields directly, which is nicer, using same options like above:Or you can apply to a whole set of DOM elements using selector:I use this:source: linkfor the reference you can check here

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleStringYou can use javascript. below are the code, it will only accept numeric and one dotDEMO JSFIDDLEPHP.js has a function to do this called number_format. If you are familiar with PHP it works exactly the same way.All you need to do is just really this:Combination of solutions for reactYou can use ngx-format-field. It is a directive to format the input value which will appear in the view. It will not manipulate the Input value which will be saved in the backend. See link here!Example:To see the demo: here!I did not like any of the answers here, so I created a function that worked for me.  Just want to share in case anyone else finds it useful.

Bootstrap close responsive menu「on click」

user1040259

[Bootstrap close responsive menu「on click」](https://stackoverflow.com/questions/14203279/bootstrap-close-responsive-menu-on-click)

On "PRODUCTS" click I slide up a white div (as seen in attached).  When in responsive (mobile and tablet), I would like to automaticly close the responsive navbar and only show the white bar. I tried:also tried:And it does work. However in desktop size, it is also called and does something funky to the menu where it shrinks for a second.  Any ideas?

2013-01-07 20:10:37Z

On "PRODUCTS" click I slide up a white div (as seen in attached).  When in responsive (mobile and tablet), I would like to automaticly close the responsive navbar and only show the white bar. I tried:also tried:And it does work. However in desktop size, it is also called and does something funky to the menu where it shrinks for a second.  Any ideas?I've got it to work with animation!Menu in html:Binding click event on all a elements in navigation to collapse menu (Bootstrap collapse plugin):EDIT

To make it more generic we can use following code snippetYou don't have to add any extra javascript to what's already included with bootstraps collapse option.  Instead simply include data-toggle and data-target selectors on your menu list items just as you do with your navbar-toggle button.  So for your Products menu item it would look like thisThen you would need to repeat the data-toggle and data-target selectors for each menu itemEDIT!!!

In order to fix overflow issues and flickering on this fix I'm adding some more code that will fix this and still not have any extra javascript.  Here is the new code:Here it is at work http://jsfiddle.net/jaketaylor/84mqazgq/This will make your toggle and target selectors specific to screen size and eliminate glitches on the larger menu.  If anyone is still having issues with glitches please let me know and I'll find a fix. 

ThanksEDIT: In the bootstrap v4.1.3 I couldnt use visible/hidden classes. Instead of hidden-xs use d-none d-sm-block and instead of visible-xs use d-block d-sm-none.I think you are all over engineering..EDIT: To take care of sub menus, make sure their toggle anchor has the dropdown-toggle class on it.EDIT 2: Add support for phone touch.I really liked Jake Taylor's idea of doing it without additional JavaScript and taking advantage of Bootstrap's collapse toggle.  I found you can fix the "flickering" issue present when the menu isn't in collapsed mode by modifying the data-target selector slightly to include the in class.  So it looks like this:I didn't test it with nested dropdowns/menus, so YMMV.just to be complete, in Bootstrap 4.0.0-beta using .show worked for me...This works, but does not animate.I'm assuming you have a line like this defining the nav area, based on Bootstrap examples and allSimply add the properties as such, like on the MENU buttonI've added to <body> as well, worked.  Can't say I've profiled it or anything, but seems a treat to me...until you click on a random spot of the UI to open the menu, so not so good that.  DKIn the HTML I added a class of nav-link to the a tag of each navigation link.this solution have a fine work, on desktop and mobile.Just to spell out user1040259's solution, add this code to your $(document).ready(function() {}); As they mention, this doesn't animate the move... but it does close the nav bar on item selectionFor those using AngularJS and Angular UI Router with this, here is my solution (using mollwe's toggle).

Where ".navbar-main-collapse" is my "data-target".Create directive:Use Directive:I'm using the mollwe function, although I added 2 improvements:a) Avoid the dropdown closing if the link clicked is collapsed (including other links)b) Hide the dropdown too, if you are clicking the visible web content.Not the newest thread but i searched for a solution for the same Problem and found one (a mix of some others).I gave the NavButton:an id / Identifier like:Not the finest "Idea" - but: Works for me!

Now you can check up the visibility of your button (with jquery) like:(NOTE: This is just a Code snipped ! I used a "onclick" Event on my Nav Links! (Starting a AJAX Reguest.)The result is: If the Button is "visible" it got "clicked" ... So: No Bug if you use the "Fullscreen view" of Bootstrap (width of over 940px).Greetings

RalphPS: It works fine with IE9, IE10 and Firefox 25. Didnt checked up others - But i can't see a Problem :-)This should do the trick.Requires bootstrap.js.Example => http://getbootstrap.com/javascript/#collapseThis does the same thing as adding 'data-toggle="collapse"' and 'href="yournavigationID"' attributes to navigation menus  tags.This worked for me. I have done like, when i click on the menu button, im adding or removing the class 'in' because by adding or removing that class the toggle is working by default. 'e.stopPropagation()' is to stop the default animation by bootstrap(i guess) you can also use the 'toggleClass' in place of add or remove class.$('#ChangeToggle').on('click', function (e) {You cau use This will by default close the navbar.

Please let me know anybody finds this usefullIf for example your toggle-able icon is visible only for extra small devices, then you could do something like this:Clicking [data-toggle="offcanvas"] will add bootstrap's .hidden-xs to my #side-menu which will hide the side-menu content, but will become visible again if you increase the window size.if menu html is on nav toggle 'in' class is added and removed from the toggle. check if responsive menu is opened then perform the close toggle.Tuggle Nav Close, IE browser compatible answer, without any console error.

If you are using bootstrap, use thisBootstrap 4 solution without any JavascriptAdd attributes data-toggle="collapse" data-target="#navbarSupportedContent.show"  to the div <div class="collapse navbar-collapse"> Make sure you provide the correct id in data-target

JavaScript/regex: Remove text between parentheses

jack moore

[JavaScript/regex: Remove text between parentheses](https://stackoverflow.com/questions/4292468/javascript-regex-remove-text-between-parentheses)

Would it be possible to changetousing JavaScript with Regex?

2010-11-27 15:52:03Z

Would it be possible to changetousing JavaScript with Regex?Result:That'll also replace excess whitespace before and after the parentheses.Try / \([\s\S]*?\)/gWhere  (space) matches the character  (space) literally\( matches the character ( literally[\S\s] matches any character (\S matches any non-whitespace character and 

\s matches any whitespace character)*? matches between zero and unlimited times\) matches the character ) literallyg matches globallyCode Example:I found this version most suitable for all cases. It doesn't remove all whitespaces. For example "a (test)   b" -> "a b" "Hello, this is Mike (example)".replace(/ *\([^)]*\) */g, " ").trim();

 "Hello, this is (example) Mike ".replace(/ *\([^)]*\) */g, " ").trim();If you need to remove text inside nested parentheses, too, then:

Uncaught Error: Module did not self-register

Alexis Schad

[Uncaught Error: Module did not self-register](https://stackoverflow.com/questions/28486891/uncaught-error-module-did-not-self-register)

I try to use node-vlc with nw.js (v0.12.0-alpha2). When i launch my app without nw.js it works, but when i launch it with nw.js i got an error:I tried some commands with nw-gyp but it couldn't help me.

I am on Ubuntu 14, 64-bit.

2015-02-12 20:13:12Z

I try to use node-vlc with nw.js (v0.12.0-alpha2). When i launch my app without nw.js it works, but when i launch it with nw.js i got an error:I tried some commands with nw-gyp but it couldn't help me.

I am on Ubuntu 14, 64-bit.If you've upgraded node then npm rebuild might fix this for youFor me: 

rm -r node_modules then

npm install I had a similar issue with another product and my fix was to change the version of node I was using. I was using 0.12.0 and changed back to 0.10.26.Personally, I use NVM to handle node version changing. With NVM installed it's as simple as runningOr setting the default version to 0.10.26Hopefully this helps you out - our issues came from different products but the solution may be the same.I had similar problem. In my case I was doing a C/C++ Add-on, and I had forgotten to export the add-on, in my main.cc was missing the code below: Hope this helps others! 

Thanks :)For me, running npm update workedI once had this problem when creating a multi-file c++ addon. In my binding.gyp file I had:And my project contained several *.cc files. However, the NODE_MODULE() macro was called only on one file which imported the rest of the files. But node expects that it is called on the frist *.cc file listed in sources. So I had to change sources to explicitly add that file to the beginningI had this same issue with 0.12 and io.js 1.3.0, reverting to Node.js 0.10 fixed the issue.I've add the same issue because I installed to modules as sudo...

Removing the node modules folder and reinstalling as normal user fixed it.For me npm rebuild or npm update didn't work. I had to remove the node_modules folder and run npm install to install them again.i was also facing the same issue and this one worked for me.you need to go in the node_module/ and configure the nw-gyp target by following commandthen and this worked for me. If you get nw-gyp command not found then use I had the same problem. My script that was referencing a global reference script had an invalid reference. I took off that invalid reference and the error was gone. My error message had no indication of that particular invalid reference which made it harder to debug. But 'Uncaught Error: Module did not self-register' was the message I was getting.This also happen in my other project. For some reason, it wouldn't recognize the reference path if one of the characters are uppercase. Even thought, the upper-casing was the correct spelling of the path.

Toggle HTML radio button by clicking its label

Alexander Farber

[Toggle HTML radio button by clicking its label](https://stackoverflow.com/questions/4213172/toggle-html-radio-button-by-clicking-its-label)

Is there please a simple way to make a radio button toggle - when a text near it is clicked - without introducing any big Javascript Framework into my smal PHP project?The web form looks like this:

2010-11-18 09:13:21Z

Is there please a simple way to make a radio button toggle - when a text near it is clicked - without introducing any big Javascript Framework into my smal PHP project?The web form looks like this:You can also wrap your elements without giving them each an ID, since a <label> is implicitly for the input it contains, like this:You can use <label> elements, which are designed to do exactly that:Wrapping the input under the label should work.I had trouble finding the value of the radio button using this method, an alternative is to use a hit area increasing clickable area of a button.

Confirmation dialog on ng-click - AngularJS

poiuytrez

[Confirmation dialog on ng-click - AngularJS](https://stackoverflow.com/questions/18313576/confirmation-dialog-on-ng-click-angularjs)

I am trying to setup a confirmation dialog on an ng-click using a custom angularjs directive:This works great but unfortunately, expressions inside the tag using my directive are not evaluated:(name is not evaluated is this case). It seems to be due to the terminal parameter of my directive. Do you have any ideas of workaround? To test my code:

http://plnkr.co/edit/EHmRpfwsgSfEFVMgRLgj?p=preview

2013-08-19 12:15:09Z

I am trying to setup a confirmation dialog on an ng-click using a custom angularjs directive:This works great but unfortunately, expressions inside the tag using my directive are not evaluated:(name is not evaluated is this case). It seems to be due to the terminal parameter of my directive. Do you have any ideas of workaround? To test my code:

http://plnkr.co/edit/EHmRpfwsgSfEFVMgRLgj?p=previewIf you don't mind not using ng-click, it works OK. You can just rename it to something else and still read the attribute, while avoiding the click handler being triggered twice problem there is at the moment.http://plnkr.co/edit/YWr6o2?p=previewI think the problem is terminal instructs other directives not to run. Data-binding with {{ }} is just an alias for the ng-bind directive, which is presumably cancelled by terminal.  Update: Old Answer (2014)It basically intercepts the ng-click event, displays the message contained in the ng-confirm-click="message" directive and asks the user to confirm. If confirm is clicked the normal ng-click executes, if not the script terminates and ng-click is not run.Code credit to Zach Snow: http://zachsnow.com/#!/blog/2013/confirming-ng-click/Update: New Answer (2016)1) Changed prefix from 'ng' to 'mw' as the former ('ng') is reserved for native angular directives.2) Modified directive to pass a function and message instead of intercepting ng-click event.3) Added default "Are you sure?" message in the case that a custom message is not provided to mw-confirm-click-message="".For me, https://www.w3schools.com/js/js_popup.asp, the default confirmation dialog box of the browser worked a great deal. just tried out this:Simple.. :)

But I think you can't customize it. It will appear with "Cancel" or "Ok" button.EDIT:In case you are using ionic framework, you need to use the ionicPopup dialog as in:For more details, refer: $ionicPopupIts so simple using core javascript + angular js:If you click OK, then delete operation will take, otherwise not.

* id is the parameter, record that you want to delete.You don't want to use terminal: false since that's what's blocking the processing of inside the button.  Instead, in your link clear the attr.ngClick to prevent the default behavior.http://plnkr.co/edit/EySy8wpeQ02UHGPBAIvg?p=previewIn today's date this solution works for me:Credits:https://gist.github.com/asafge/7430497#file-ng-really-jsI created a module for this very thing that relies on the Angular-UI $modal service.https://github.com/Schlogen/angular-confirmAn angular-only solution that works alongside ng-click is possible by using compile to wrap the ng-click expression.Directive:HTML:Code says everythingHTML 5 Code SampleAngularJs Custom Directive code-sampleConfirmation dialog can implemented using AngularJS Material:Implementation example: Angular Material - DialogsIf you use ui-router, the cancel or accept button replace the url. To prevent this you can return false in each case of the conditional sentence like this:You can use id with a message or without. Without message the default message will show.DirectiveControllerHTMLWith a messageWithout a messsageHere is a clean and simple solution using angular promises $q, $window and native .confirm() modal:Here I'm using controllerAs syntax and ES6 arrow functions but it's also working in plain ol' ES5.very simple.. I have one solution for this with using bootstrap conformation popup.

Here i am provided in bootstrap model popup:jswhen i click delete button bootstrap delete conformation popup will open and when i click yes button row will deleted. I wish AngularJS had a built in confirmation dialog.  Often, it is nicer to have a customized dialog than using the built in browser one.I briefly used the twitter bootstrap until it was discontinued with version 6.  I looked around for alternatives, but the ones I found were complicated.   I decided to try the JQuery UI one.Here is my sample that I call when I am about to remove something from ng-grid;I hope this helps someone.  I was pulling my hair out when I needed to upgrade ui-bootstrap-tpls.js but it broke my existing dialog.  I came into work this morning, tried a few things and then realized I was over complicating.

What's the difference between ES6 Map and WeakMap?

Dmitrii Sorin

[What's the difference between ES6 Map and WeakMap?](https://stackoverflow.com/questions/15604168/whats-the-difference-between-es6-map-and-weakmap)

Looking this and this MDN pages it seems like the only difference between Maps and WeakMaps is a missing "size" property for WeakMaps. But is this true? What's the difference between them?

2013-03-24 21:22:29Z

Looking this and this MDN pages it seems like the only difference between Maps and WeakMaps is a missing "size" property for WeakMaps. But is this true? What's the difference between them?From the very same page, section "Why Weak Map?":[And that's why they have no size property as well]‐ which would be the "normal" Maps. Not mentioned at MDN, but in the harmony proposal, those also have items, keys and values generator methods and implement the Iterator interface.They both behave differently when a object referenced by their keys/values gets deleted. Lets take the below example code:The above IIFE is executed there is no way we can reference {x: 12} and {y: 12} anymore. Garbage collector goes ahead and deletes the key b pointer from「WeakMap」and also removes {y: 12} from memory. But in case of「Map」, the garbage collector doesn’t remove a pointer from「Map」and also doesn’t remove {x: 12} from memory.Summary: WeakMap allows garbage collector to do its task but not Map. References: http://qnimate.com/difference-between-map-and-weakmap-in-javascript/Maybe the next explanation will be more clear for someone.As you see, after removing k1 key from the memory we can still access it inside the map. At the same time removing k2 key of WeakMap removes it from wm as well by reference.That's why WeakMap hasn't enumerable methods like forEach, because there is no such thing as list of WeakMap keys, they are just references to another objects.Another difference (source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap):Nor can a string, number, or boolean be used as a WeakMap key. A Map can use primitive values for keys.WeapMap in javascript does not hold any keys or values, it just manipulate key value using a unique id and define property to key object. because it define property to key by method Object.definePropert(), key must not be primitive type.and also because WeapMap does not contain actually key value pairs,  we cannot get length property of weakmap.and also manipulated value is assigned back to key, garbage collector easily can collect key if it in no use.Sample code for implementation.reference of implementationWeakMap keys must be objects, not primitive values.Why????Let's see below example.WeakMap does not support iteration and methods keys(), values(), entries(), so there’s no way to get all keys or values from it.WeakMap has only the following methods:That is obvious as if an object has lost all other references (like 'user' in the code above), then it is to be garbage-collected automatically. But technically it’s not exactly specified when the cleanup happens.The JavaScript engine decides that. It may choose to perform the memory cleanup immediately or to wait and do the cleaning later when more deletions happen. So, technically the current element count of a WeakMap is not known. The engine may have cleaned it up or not or did it partially. For that reason, methods that access all keys/values are not supported.

How can I send the「&」(ampersand) character via AJAX?

candino

[How can I send the「&」(ampersand) character via AJAX?](https://stackoverflow.com/questions/11294107/how-can-i-send-the-ampersand-character-via-ajax)

I want to send a few variables and a string with the POST method from JavaScript. I get the string from the database, and then send it to a PHP page. I am using an XMLHttpRequest object.The problem is that the string contains the character & a few times, and the $_POST array in PHP sees it like multiple keys.I tried replacing the & with \& with the replace() function, but it doesn't seem to do anything.Can anyone help?The javascript code and the string looks like this:The String is:

2012-07-02 12:54:21Z

I want to send a few variables and a string with the POST method from JavaScript. I get the string from the database, and then send it to a PHP page. I am using an XMLHttpRequest object.The problem is that the string contains the character & a few times, and the $_POST array in PHP sees it like multiple keys.I tried replacing the & with \& with the replace() function, but it doesn't seem to do anything.Can anyone help?The javascript code and the string looks like this:The String is:You can use encodeURIComponent().It will escape all the characters that cannot occur verbatim in URLs:In this example, the ampersand character & will be replaced by the escape sequence %26, which is valid in URLs.You might want to use encodeURIComponent().You need to url-escape the ampersand.  Use:As Wolfram points out, this is nicely handled (along with all the other special characters) by encodeURIComponent.Ramil Amr's answer works only for the & character. If you have some other special characters, you should use PHP's htmlspecialchars() and JS's encodeURIComponent().You can write:And on the server side:This will make sure that AJAX will pass the data as expected, and that PHP (in case your'e insreting the data to a database) will make sure the data works as expected.The preferred way is to use a JavaScript library such as jQuery and set your data option as an object, then let jQuery do the encoding, like this:If you can't use jQuery (which is pretty much the standard these days), use encodeURIComponent.You could encode your string using Base64 encoding on the JavaScript side and then decoding it on the server side with PHP (?).JavaScript (Docu)PHP (Docu): This will truncate special characters.You can pass your arguments using this encodeURIComponent function so you don't have to worry about passing any special characters.ORhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent

Have just one InfoWindow open in Google Maps API v3

leo

[Have just one InfoWindow open in Google Maps API v3](https://stackoverflow.com/questions/1875596/have-just-one-infowindow-open-in-google-maps-api-v3)

I need to have only one InfoWindow open on my Google Map. I need to close all other InfoWindows before I open a new one.Can someone show me how to do this?

2009-12-09 17:46:16Z

I need to have only one InfoWindow open on my Google Map. I need to close all other InfoWindows before I open a new one.Can someone show me how to do this?You need to create just one InfoWindow object, keep a reference to it, and reuse if for all the markers. Quoting from the Google Maps API Docs:Therefore, you may simply want to create the InfoWindow object just after you initialize your map, and then handle the click event handlers of your markers as follows. Let's say you have a marker called someMarker:Then the InfoWindow should automatically close when you click on a new marker without having to call the close() method.Create your infowindow out of the scope so that you can share it. Here is a simple example:I had the same problem but the best answer didn't solve it completely, what I had to do in my for statement was using the this relating to my current marker. Maybe this helps someone.a tad late, but I managed to have only one infowindow open by maken infowindow a global variable. then inside the listnerDeclare a globar var selectedInfoWindow; and use it to hold the opened info window:You need to keep track of your previous InfoWindow object and call the close method on it when you handle the click event on a new marker.N.B It is not necessary to call close on the shared info window object, calling open with a different marker will automatically close the original. See Daniel's answer for details.Basically you want one function that keeps reference to one new InfoBox() => delegate the onclick event.

While creating your markers (in a loop) use bindInfoBox(xhr, map, marker);var infoBox is assigned asynchronously and kept in memory. Every time you call bindInfoBox() the return function will be called instead. Also handy to pass the infoBoxOptions only once!In my example I've had to add an extra param to the map as my initialization is delayed by tab events.InfoBoxOptionsHere is a solution that doesn't need to create only one infoWindow to reuse it. You can continue creating many infoWindows, the only thing you need is to build a closeAllInfoWindows function, and call it before open a new infowindow.

So, keeping your code, you just need to:Regards,Solved it this way:Google Maps allows you to only have one info window open. So if you open a new window, then the other one closes automatically.

How to stop default link click behavior with jQuery

smartcaveman

[How to stop default link click behavior with jQuery](https://stackoverflow.com/questions/5632031/how-to-stop-default-link-click-behavior-with-jquery)

I have a link on a web page.  When a user clicks it, a widget on the page should update.  However, I am doing something, because the default functionality (navigating to a different page) occurs before the event fires.  This is what the link looks like:This is what the jQuery looks like:What is the problem?

2011-04-12 07:52:15Z

I have a link on a web page.  When a user clicks it, a widget on the page should update.  However, I am doing something, because the default functionality (navigating to a different page) occurs before the event fires.  This is what the link looks like:This is what the jQuery looks like:What is the problem?from https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefaultThe following methods achieve the exact same thing.You want e.preventDefault() to prevent the default functionality from occurring.Or have return false from your method.preventDefault prevents the default functionality and stopPropagation prevents the event from bubbling up to container elements.You can use e.preventDefault(); instead of e.stopPropagation();This code strip all event listeners

Moment JS start and end of given month

Fabio B.

[Moment JS start and end of given month](https://stackoverflow.com/questions/26131003/moment-js-start-and-end-of-given-month)

I need to calculate a JS date given year=2014 and month=9 (September 2014).I tried this:Both of logs show:End date is correct but... why the start date is not?

2014-09-30 22:12:22Z

I need to calculate a JS date given year=2014 and month=9 (September 2014).I tried this:Both of logs show:End date is correct but... why the start date is not?That's because endOf mutates the original value.Relevant quote:Here's an example function that gives you the output you want:References:When you use .endOf() you are mutating the object it's called on, so startDate becomes Sep 30You should use .clone() to make a copy of it instead of changing ityou can use this directly for the end or start date of the monthyou can change the format by defining a new formatTry the following code:Don't really think there is some direct method to get the last day but you could do something like this:your startDate is first-day-of-month, In this case we can useHope this helps!!docPlease note, .clone() is essential in momentjs else it'll override the value. It seems in your case. It's more generic, to get bunch of dates that fall between dates.The following code should work:Try the following code:

What is Angular.noop used for?

Harsh

[What is Angular.noop used for?](https://stackoverflow.com/questions/22348253/what-is-angular-noop-used-for)

I have tried searching it everywhere even on Angular.org documentation but couldn't find any detailed explanation with implementation. It would be hugely helpful if any could explain it.

2014-03-12 10:15:46Z

I have tried searching it everywhere even on Angular.org documentation but couldn't find any detailed explanation with implementation. It would be hugely helpful if any could explain it.angular.noop is an empty function that can be used as a placeholder when you need to pass some function as a param.I find it extremely helpful when writing a function that expects a callback.Example:The function above will return an error, when it gets called without specifying the third argument. myFunction(1, 'a');Example (using angular.noop):It is a function that performs no operations. This is useful in situation like this:It is useful when writing code in the functional style*this answer assumes that u are not a beginner in angularAngular.noop is an empty function that can be used as placeholder in some casesfor example:Imagine you are using q.all which do multiple calls to the api and return one promise.

If some of these calls fail but u still need to handle the ones that didnt fail, use angular noop as a callback to the api calls when u catch the calls.

If u dont use angular noop, q.all will reject everthing if one call fails.Q.all( somecall.catch(angular.noop), anothercall).then( resolve result[0] and result[1]) If a call fails, Angular will ignore that and perform another call (but u will still will undefined for the first resolved result) I Hope that I helpedIts a shortest way to doTaking into account that callback var will be a functionIf you want official documentation here is the link. It is pretty simple. I have also pasted the current documentation from link.A function that performs no operations. This function can be useful when writing code in the functional style.Trick: You can also use it to add a ternary to an ng-click attribute:Until I found out you could use ng-click="variable && doSomething()"`

Protovis vs D3.js

By Richard Powell

[Protovis vs D3.js](https://stackoverflow.com/questions/6212104/protovis-vs-d3-js)

TLDR: Does anyone have experience of both protovis & D3.js to illuminate the differences between the two?I've been playing with protovis for the last 2 weeks and it's been great so far. Except now I seem to have hit a bit of a brick wall with animation.protovis: http://vis.stanford.edu/protovis/I want to do some quite simple animation but with protovis it feels less than intuitive - I'm starting to think that protovis was never really meant for animation.  So, I started looking at D3.js:http://mbostock.github.com/d3/ex/stack.htmlIt looks very similar, but:Can anyone illuminate any other differences?I'd be very grateful for any and all input

2011-06-02 08:22:26Z

TLDR: Does anyone have experience of both protovis & D3.js to illuminate the differences between the two?I've been playing with protovis for the last 2 weeks and it's been great so far. Except now I seem to have hit a bit of a brick wall with animation.protovis: http://vis.stanford.edu/protovis/I want to do some quite simple animation but with protovis it feels less than intuitive - I'm starting to think that protovis was never really meant for animation.  So, I started looking at D3.js:http://mbostock.github.com/d3/ex/stack.htmlIt looks very similar, but:Can anyone illuminate any other differences?I'd be very grateful for any and all inputI've done a fair amount of work with Protovis and a few things with D3. In addition to the points you mention, I think the following differences stand out for me:Edit (7/12/11): It looks like there's a new major difference - as of June 28, 2011, Protovis is no longer under active development, and the Protovis team is pushing D3.js instead. The last release is quite stable, so this shouldn't prevent you from using it, but it's definitely a point to consider.There's a tutorial that covers the differences between D3 and Protovis in some detail. I agree with @nrabinowitz's description, though I will point out that we recently added extensive API documentation.There is a recent paper from the Authors of Protovis/d3.js published 2011 http://vis.stanford.edu/files/2011-D3-InfoVis.pdf mainly about d3.js but containing some of the reasons why they changed certain things on the way from Protovis to d3.js.

Timestamp to human readable format

georgevich

[Timestamp to human readable format](https://stackoverflow.com/questions/5416920/timestamp-to-human-readable-format)

Well I have a strange problem while convert from unix timestamp to human representation using javascriptHere is timestampThis is my javascriptI expected results to be 2011 2, 25 22 00 00. But it is 2011, 2, 6, 0, 0, 0

What I miss ?

2011-03-24 09:12:47Z

Well I have a strange problem while convert from unix timestamp to human representation using javascriptHere is timestampThis is my javascriptI expected results to be 2011 2, 25 22 00 00. But it is 2011, 2, 6, 0, 0, 0

What I miss ?getDay() returns the day of the week. To get the date, use date.getDate(). getMonth() retrieves the month, but month is zero based, so using getMonth()+1 should give you the right month. Time value seems to be ok here, albeit the hour is 23 here (GMT+1). If you want universal values, add UTC to the methods (e.g. date.getUTCFullYear(), date.getUTCHours())Where unixtime is the time returned by your sql db. Here is a fiddle if it helps.For example, using it for the current time: here is kooilnc's answer w/ padded 0'sHours, minutes and seconds depend on the time zone of your operating system. In GMT (UST) it's 22:00:00 but in different timezones it can be anything. So add the timezone offset to the time to create the GMT date:use Date.prototype.toLocaleTimeString() as documented hereplease note the locale example en-US in the url.

How do I get the Back Button to work with an AngularJS ui-router state machine?

biofractal

[How do I get the Back Button to work with an AngularJS ui-router state machine?](https://stackoverflow.com/questions/22247294/how-do-i-get-the-back-button-to-work-with-an-angularjs-ui-router-state-machine)

I have implemented an angularjs single page application using ui-router. Originally I identified each state using a distinct url however this made for unfriendly, GUID packed urls.So I have now defined my site as a much simpler state-machine. The states are not identified by urls but are simply transitioned to as required, like this:Define Nested StatesTransition to a Defined StateThis system works very well and I love its clean syntax. However, as I am not using urls the back button does not work. How do I keep my neat ui-router state-machine but enable the back button functionality? 

2014-03-07 10:16:44Z

I have implemented an angularjs single page application using ui-router. Originally I identified each state using a distinct url however this made for unfriendly, GUID packed urls.So I have now defined my site as a much simpler state-machine. The states are not identified by urls but are simply transitioned to as required, like this:Define Nested StatesTransition to a Defined StateThis system works very well and I love its clean syntax. However, as I am not using urls the back button does not work. How do I keep my neat ui-router state-machine but enable the back button functionality? The answers that suggest using variations of $window.history.back() have all missed a crucial part of the question: How to restore the application's state to the correct state-location as the history jumps (back/forward/refresh). With that in mind; please, read on.Yes, it is possible to have the browser back/forward (history) and refresh whilst running a pure ui-router state-machine but it takes a bit of doing. You need several components:Here is my implementation of each of these requirements. I have bundled everything up into three services:The Session ServiceThis is a wrapper for the javascript sessionStorage object. I have cut it down for clarity here. For a full explanation of this please see: How do I handle page refreshing with an AngularJS Single Page ApplicationThe State History ServiceThe StateHistoryService looks after the storage and retrieval of historical states keyed by generated, unique urls. It is really just a convenience wrapper for a dictionary style object.The State Location ServiceThe StateLocationService handles two events:The big problem with this technique is that calling @location.url url in the stateChange method will trigger the $locationChangeSuccess event and so call the locationChange method. Equally calling the @state.go from locationChange will trigger the $stateChangeSuccess event and so the stateChange method. This gets very confusing and messes up the browser history no end.The solution is very simple. You can see the preventCall array being used as a stack (pop and push). Each time one of the methods is called it prevents the other method being called one-time-only. This technique does not interfere with the correct triggering of the $ events and keeps everything straight.Now all we need to do is call the HistoryService methods at the appropriate time in the state transition life-cycle. This is done in the AngularJS Apps .run method, like this:Angular app.runGenerate a GuidWith all this in place, the forward / back buttons and the refresh button all work as expected.After testing different proposals, I found that the easiest way is often the best.If you use angular ui-router and that you need a button to go back best is this:or// Warning don't set the href or the path will be broken.Explanation:

Suppose a standard management application.

Search object -> View object -> Edit objectUsing the angular solutions

From this state :To :Well that's what we wanted except if now you click the browser back button you'll be there again :And that is not logicalHowever using the simple solutionfrom :after click on button :after click on browser back button :Consistency is respected. :-)If you are looking for the simplest "back" button, then you could set up a directive like so:Keep in mind this is a fairly unintelligent "back" button because it is using the browser's history. If you include it on your landing page, it will send a user back to any url they came from prior to landing on yours.browser's back/forward button solution

I encountered the same problem and I solved it using the popstate event from the $window object and ui-router's $state object. A popstate event is dispatched to the window every time the active history entry changes.

The $stateChangeSuccess and $locationChangeSuccess events are not triggered on browser's button click even though the address bar indicates the new location.

So, assuming you've navigated from states main to folder to main again, when you hit back on the browser, you should be back to the folder route. The path is updated but the view is not and still displays whatever you have on main. try this:back/forward buttons should work smoothly after that.note: check browser compatibility for window.onpopstate() to be sureCan be solved using a simple directive "go-back-history", this one is also closing window in case of no previous history.Directive usageAngular directive declarationNote: Working using ui-router or not.The Back button wasn't working for me as well, but I figured out that the problem was that I had html content inside my main page, in the ui-view element.i.e. So I moved the content into a new .html file, and marked it as a template in the .js file with the routes. i.e.history.back() and switch to previous state often give effect not that you want. For example, if you have form with tabs and each tab has own state, this  just switched previous tab selected, not return from form. In case nested states, you usually need so think about witch of parent states you want to rollback. This directive solves problemIt returns to state, that was active before button has displayed. Optional defaultState is state name that used when no previous state in memory. Also it restores scroll positionCode 

Javascript (ES6) const with curly braces [duplicate]

tralston

[Javascript (ES6) const with curly braces [duplicate]](https://stackoverflow.com/questions/33798717/javascript-es6-const-with-curly-braces)

I'm new to ECMAScript 6, and while trying to learn Ember, I've seen the following code style occassionally:I've searched Google and many sites explaining the new ES6 specifications. I know this is not the current implementation, because my console gives an error when I input that.What does this code mean?UPDATEI pasted this snippet into Babel's transpiler, and this is what it returned:I'm still confused as to what this is trying to accomplish.

2015-11-19 08:32:12Z

I'm new to ECMAScript 6, and while trying to learn Ember, I've seen the following code style occassionally:I've searched Google and many sites explaining the new ES6 specifications. I know this is not the current implementation, because my console gives an error when I input that.What does this code mean?UPDATEI pasted this snippet into Babel's transpiler, and this is what it returned:I'm still confused as to what this is trying to accomplish.It is an ES2015 destructuring assignment.  More specifically, it's Object DestructuringIt might help to see it rewritten in a more verbose way.It's a syntatically terse way of extracting properties from objects, into variables.Browser vendors are still implementing the ES2015 specification which is probably why it didn't work in your browser. However, there's a project called Babel which allows you to convert future specifications of Javascript back into ES5. You can try out ES2015 code in their REPL. 

Server polling with AngularJS

Dave

[Server polling with AngularJS](https://stackoverflow.com/questions/13671031/server-polling-with-angularjs)

I'm trying to learn AngularJS.  My first attempt to get new data every second worked:When I simulate a slow server by sleeping the thread for 5 seconds it waits for the response before updating the UI and setting another timeout.  The problem is when I rewrote the above to use Angular modules and DI for module creation:This only works if the server response is fast. If there's any delay it spams out 1 request a second without waiting for a response and seems to clear the UI. I think I need to use a callback function. I tried:but got an error: "Error: destination.push is not a function"  This was based on the docs for $resource but I didn't really understand the examples there.How do I make the second approach work?

2012-12-02 16:07:03Z

I'm trying to learn AngularJS.  My first attempt to get new data every second worked:When I simulate a slow server by sleeping the thread for 5 seconds it waits for the response before updating the UI and setting another timeout.  The problem is when I rewrote the above to use Angular modules and DI for module creation:This only works if the server response is fast. If there's any delay it spams out 1 request a second without waiting for a response and seems to clear the UI. I think I need to use a callback function. I tried:but got an error: "Error: destination.push is not a function"  This was based on the docs for $resource but I didn't really understand the examples there.How do I make the second approach work?You should be calling the tick function in the callback for query.More recent versions of angular have introduced $interval which works even better than $timeout for server polling.Here is my version using recursive polling. Which means it'll wait for the server response before initiating the next timeout. 

Also, when an error occur it'll continue polling but in a more relaxed manor and according to the duration of the error.Demo is hereWritten more about it in hereWe can do it polling easily using $interval service. 

here is detail document about $interval 

https://docs.angularjs.org/api/ng/service/$interval

Problem using $interval is that if you are doing $http service calling or server interaction and if delayed more than $interval time then before your one request completes, it starts another request.

Solution:

1. Polling should be simple status getting from server like a single bit or lightweight json so should not take longer then your defined interval time. You should also define time of interval appropriately to avoid this issue.

2. Somehow it is still happening due any reason, you should check a global flag that previous request finished or not before sending any other requests. It will miss that time interval but it won't send request prematurely.

Also if you wanted to set threshold value that after some value anyhow polling should be set then you can do it following way.

Here is working example. explained in detail here

Javascript exception stack trace

ujh

[Javascript exception stack trace](https://stackoverflow.com/questions/147891/javascript-exception-stack-trace)

In Firefox I can get the stack trace of an exception by using exception.stack.Is there a way to get that in other browsers, too?Edit: I actually want to save the stack trace automatically (if possible) and not debug it at the time (i.e. I know how to get the stack trace in a debugger).

2008-09-29 08:11:04Z

In Firefox I can get the stack trace of an exception by using exception.stack.Is there a way to get that in other browsers, too?Edit: I actually want to save the stack trace automatically (if possible) and not debug it at the time (i.e. I know how to get the stack trace in a debugger).Place this line where you want to print the stack trace:Note: tested by me on Chrome 24 and Firefox 18May be worth taking a look at this tool as well.Webkit now has functionality that provides stack traces:Web Inspector: Understanding Stack Traces, posted by Yury Semikhatsky on Wednesday, April 20th, 2011 at 7:32 am (webkit.org)From that post:If you want the string stack trace, I'd go with insin's answer: stacktrace.js. If you want to access the pieces of a stacktrace (line numbers, file names, etc) stackinfo, which actually uses stacktrace.js under the hood.Not really, at least not easily.In IE, you can debug the browser process with MS Script Debugger (which for some reason is an Office component) or Visual Studio, and then you can see the stack on breakpoints.You must try good open source library TraceKit which attempts to create stack traces for unhandled JavaScript exceptions in all major browsers. You can read more about Tracekithttps://github.com/csnover/TraceKit/PS: If you are looking for a service(using Tracekit) with good UI, you can try Atatus

How to check whether dynamically attached event listener exists or not?

Stano

[How to check whether dynamically attached event listener exists or not?](https://stackoverflow.com/questions/11455515/how-to-check-whether-dynamically-attached-event-listener-exists-or-not)

Here is my problem: is it possible somehow to check for existence of dynamically attached event listener? Or how can I check the status of the "onclick" (?) property in DOM? I have searched internet just like Stack Overflow for a solution, but no luck. Here is my html:Then in Javascript I attach dynamically created event listener to the 2nd link:The code runs well, but all my attempts to detect that attached listener fail:jsFiddle is here.

If you click "Add onclick for 2" and then "[link 2]", event fires well, 

but the "Test link 2" always reports false.

Can somebody help?

2012-07-12 15:42:01Z

Here is my problem: is it possible somehow to check for existence of dynamically attached event listener? Or how can I check the status of the "onclick" (?) property in DOM? I have searched internet just like Stack Overflow for a solution, but no luck. Here is my html:Then in Javascript I attach dynamically created event listener to the 2nd link:The code runs well, but all my attempts to detect that attached listener fail:jsFiddle is here.

If you click "Add onclick for 2" and then "[link 2]", event fires well, 

but the "Test link 2" always reports false.

Can somebody help?There is no way to check whether dynamically attached event listeners exist or not.  The only way you can see if an event listener is attached is by attaching event listeners like this:You can then test if an event listener was attached to onclick by returning !!elem.onclick (or something similar).I did something like that:Creating special attribute for an element when listener is attached and then checking if it exist. What I would do is create a Boolean outside your function that starts out as FALSE and gets set to TRUE when you attach the event. This would serve as some sort of flag for you before you attach the event again. Here's an example of the idea.tl;dr: No, you cannot do this in any natively supported way.The only way I know to achieve this would be to create a custom storage object where you keep a record of the listeners added. Something along the following lines:Step 1: First, you will need a function that can traverse the storage object and return the record of an element given the element (or false).Step 2: Then, you will need a function that can add an event listener but also insert the listener to the storage object.Step 3: As regards the actual requirement of your question, you will need the following function to check whether an element has been added an event listener for a specified event.Step 4: Finally, you will need a function that can delete a listener from the storage object.Snippet:Although more than 5 years have passed since the OP posted the question, I believe people who stumble upon it in the future will benefit from this answer, so feel free to make suggestions or improvements to it. 😊You could always check manually if your EventListener exist using Chrome inspector for example.

In Element tab you have the traditional "Styles" subtab and close to it another one : "Event Listeners".

Which will give you the list of all EventListeners with their linked elements.Possible duplicate: Check if an element has event listener on it. no jquery. 

Please find my answer there.Basically here is the trick for Chromium  (Chrome) browser: Here's a script I used to check for the existence of a dynamically attached event listener. I used jQuery to attach an event handler to an element, then trigger that event (in this case the 'click' event). This way I can retrieve and capture event properties that will only exist if the event handler is attached.There doesn't appear to be a cross browser function that searches for events registered under a given element.However, it is possible to view the call back functions for elements in some browsers using their development tools. This can be useful when attempting to determine how a web page functions or for debugging code.FirefoxFirst, view the element in the Inspector tab within the developer tools. This can be done:If any events were registered to the element, you will see a button containing the word Event beside the element. Clicking it will allow you to see the events that have been registered with the element. Clicking the arrow beside an event allows you to view the callback function for it.ChromeFirst, view the element in the Elements tab within the developer tools. This can be done:Near the section of the window that shows the tree containing the web page elements, there should be another section with a tab entitled "Event Listeners". Select it to see events that were registered to the element. To see the code for a given event, click the link to the right of it.In Chrome, events for an element can also be found using the getEventListeners function. However, based on my tests, the getEventListeners function doesn't list events when multiple elements are passed to it. If you want to find all of the elements on the page that have listeners and view the callback functions for those listeners, you can use the following code in the console to do this:Please edit this answer if you know of ways to do this in the given browsers or in other browsers.It seems odd that this method doesn't exist. Is it time to add it finally? If you wanted to you could something like the following (untested): If I understand well you can only check if a listener has been checked but not which listener is presenter specifically. So some ad hoc code would fill the gap to handle your coding flow. A practical method would be to create a state using variables. For example, attach a listener's checker as following: then if you set a listener just change the value:then inside your eventListener 's callback you can assign specific functionalities inside and in this same way, distribute the access to functionalities depending of some state as variable for example:Just remove the event before adding it :I just found this out by trying to see if my event was attached.... if you do :it will return "null"but if you do: then it is "TRUE"so I think that when you use "addEventListener" to add event handlers, the only way to access it is through "hasOwnProperty". I wish I knew why or how but alas, after researching, I haven't found an explanation.I just wrote a script that lets you achieve this. It gives you two global functions: hasEvent(Node elm, String event) and getEvents(Node elm) which you can utilize. Be aware that it modifies the EventTarget prototype method add/RemoveEventListener, and does not work for events added through HTML markup or javascript syntax of elm.on_event = ...More info at GitHubLive DemoScript:You could in theory piggyback addEventListener and removeEventListener to add remove a flag to the 'this' object. Ugly and I haven't tested ...

What's the correct way to pass props as initial data in Vue.js 2?

Dominik Serafin

[What's the correct way to pass props as initial data in Vue.js 2?](https://stackoverflow.com/questions/40408096/whats-the-correct-way-to-pass-props-as-initial-data-in-vue-js-2)

So I want to pass props to an Vue component, but I expect these props to change in future from inside that component e.g. when I update that Vue component from inside using AJAX. So they are only for initialization of component.My cars-list Vue component element where I pass props with initial properties to single-car:The way I do it right now it that inside my single-car component I'm assigning  this.initialProperties to my this.data.properties on created() initialization hook. And it works and is reactive.But my problem with that is that I don't know if that's a correct way to do it? Won't it cause me some troubles along the road? Or is there a better way to do it?

2016-11-03 17:46:53Z

So I want to pass props to an Vue component, but I expect these props to change in future from inside that component e.g. when I update that Vue component from inside using AJAX. So they are only for initialization of component.My cars-list Vue component element where I pass props with initial properties to single-car:The way I do it right now it that inside my single-car component I'm assigning  this.initialProperties to my this.data.properties on created() initialization hook. And it works and is reactive.But my problem with that is that I don't know if that's a correct way to do it? Won't it cause me some troubles along the road? Or is there a better way to do it?Thanks to this https://github.com/vuejs/vuejs.org/pull/567 I know the answer now.Pass initial prop directly to the data. Like the example in updated docs:But have in mind if the passed prop is an object or array that is used in the parent component state any modification to that prop will result in the change in that parent component state. Warning: this method is not recommended. It will make your components unpredictable. If you need to set parent data from child components either use state management like Vuex or use "v-model". https://vuejs.org/v2/guide/components.html#Using-v-model-on-ComponentsIf your initial prop is an object or array and if you don't want changes in children state propagate to parent state then just use e.g. Vue.util.extend [1] to make a copy of the props instead pointing it directly to children data, like this:You can also use spread operator to clone the props. More details in the Igor answer: https://stackoverflow.com/a/51911118/3143704But have in mind that spread operators are not supported in older browsers and for better compatibility you'll need to transpile the code e.g. using babel.[1] Have in mind this is an internal Vue utility and it may change with new versions. You might want to use other methods to copy that prop, see "How do I correctly clone a JavaScript object?".My fiddle where I was testing it:

https://jsfiddle.net/sm4kx7p9/3/In companion to @dominik-serafin's answer:In case you are passing an object, you can easily clone it using spread operator(ES6 Syntax):But the most important is to remember to use opt. 2 in case you are passing a computed value, or more than that an asynchronous value. Otherwise the local value will not update.Demo: https://jsfiddle.net/nomikos3/eywraw8t/281070/I believe you are doing it right because it is what's stated in the docs.https://vuejs.org/guide/components.html#One-Way-Data-Flow

How dangerous is it in JavaScript, really, to assume undefined is not overwritten?

Cosmologicon

[How dangerous is it in JavaScript, really, to assume undefined is not overwritten?](https://stackoverflow.com/questions/8783510/how-dangerous-is-it-in-javascript-really-to-assume-undefined-is-not-overwritte)

Every time anyone mentions testing against undefined, it's pointed out that undefined is not a keyword so it could be set to "hello", so you should use typeof x == "undefined" instead. This seems ridiculous to me. Nobody would ever do that, and if they did it would be reason enough to never use any code they wrote... right?I found one example of someone who accidentally set undefined to null, and this was given as a reason to avoid assuming that undefined isn't overwritten. But if they'd done that, the bug would have gone undetected, and I fail to see how that's better.In C++ everyone is well aware that it's legal to say #define true false, but nobody ever advises you avoid true and use 0 == 0 instead. You just assume that nobody would ever be a big enough jerk to do that, and if they do, never trust their code again.Has this ever actually bitten somebody where someone else assigned to undefined (on purpose) and it broke your code, or is this more of a hypothetical threat? I'm willing to take my chances to make my code marginally more readable. Is this a really bad idea?To reiterate, I am not asking for how to protect against reassigned undefined. I've seen those tricks written 100 times already. I'm asking how dangerous it is to not use those tricks.

2012-01-09 03:06:58Z

Every time anyone mentions testing against undefined, it's pointed out that undefined is not a keyword so it could be set to "hello", so you should use typeof x == "undefined" instead. This seems ridiculous to me. Nobody would ever do that, and if they did it would be reason enough to never use any code they wrote... right?I found one example of someone who accidentally set undefined to null, and this was given as a reason to avoid assuming that undefined isn't overwritten. But if they'd done that, the bug would have gone undetected, and I fail to see how that's better.In C++ everyone is well aware that it's legal to say #define true false, but nobody ever advises you avoid true and use 0 == 0 instead. You just assume that nobody would ever be a big enough jerk to do that, and if they do, never trust their code again.Has this ever actually bitten somebody where someone else assigned to undefined (on purpose) and it broke your code, or is this more of a hypothetical threat? I'm willing to take my chances to make my code marginally more readable. Is this a really bad idea?To reiterate, I am not asking for how to protect against reassigned undefined. I've seen those tricks written 100 times already. I'm asking how dangerous it is to not use those tricks.No, I never have. This is mostly because I develop on modern browsers, which are mostly ECMAScript 5 compliant. The ES5 standard dictates that undefined is now readonly. If you use strict mode (you should), an error will be thrown if you accidentally try to modify it.What you should not do is create your own scoped, mutable undefined:Constant is fine. Still unnecessary, but fine.No proper code will do such a thing. But you can never know what some wannabe-smart developer or a plugin/library/script you are using did. On the other side, it's extremely unlikely and modern browsers will not allow overwriting undefined at all, so if you are using such a browser for development you'll quickly notice if any code tries to overwrite it.And even though you did not ask for it - many people will probably find this question when looking for the more common "how to protect against redefined undefined" issue, so I'll answer that anyway:There's a very good way to get a truly undefined undefined no matter how old the browser is:This works because an argument that is not specified is always undefined. You can also do it with a function that accepts some real arguments, e.g. like this when you are using jQuery. It's usually a good idea to ensure a sane environment in this way:Then you can be sure that inside that anonymous function the following things are true:However, note that sometimes typeof x === 'undefined' is actually necessary: If the variable x has never been set to a value (contrary to being set to undefined), reading x in a different way such as if(x === undefined) will throw an error. This does not apply to object properties though, so if you know that y is always an object, if(y.x === undefined) is perfectly safe.There's a simple solution to that: compare against void 0 which is always undefined.Note that you should avoid == as it may coerce the values. Use === (and !==) instead.That said, the undefined variable may be set by error if someone writes = instead of == when comparing something against undefined.Only you know what code you use, and therefore how dangerous it is. This question can't be answered in the way you've clarified you want it answered.1) Create a team policy, disallow redefining undefined, reserving it for its more popular usage. Scan your existing code for undefined left assignment.2) If you don't control all the scenarios, if your code is used outside situations you or your policies control, then obviously your answer is different. Scan the code that does use your scripts. Heck, scan web for statistics of undefined left assignment if you wish, but I doubt that's been done for you, because it's easier to just pursue answer #1 or #3 here instead.3) And if that answer isn't good enough, it's probably because, again, you require a different answer. Maybe you are writing a popular library that will be used inside corporate firewalls, and you don't have access to the calling code. Then use one of the other fine answers here. Note the popular jQuery library practices sound encapsulation, and begins:Only you can answer your question in the specific way you seek. What more is there to say?edit: p.s. if you really want my opinion, I'll tell you it's not dangerous at all.  Anything that would be so likely to cause defects (such as assigning to undefined, which is obviously a well-documented risky behaviour) is itself a defect. It's the defect that is the risk. But that's just in my scenarios, where I can afford to hold that perspective. As I'd recommend you do, I answered the question for my use-cases.It's safe to test against undefined. As you already mention. If you get to some code that overrides it (which is highly improvable), just don't use it anymore.Maybe if you are creating a library for public use, you can use some of the techniques to avoid the user change it. But even in this case, it's their problem, not your library.You can use undefined in your code when coding for browsers supporting ECMAScript 5.1 as it is immutable according to the language specification.Also see this compatibility table or this caniuse ECMAScript 5 to see that all modern browsers (IE 9+) have implemented immutable undefined.It's not dangerous at all. It can only be overwritten when running on an ES3 engine and that's not likely to be used any more.First of all, if your code breaks it's probably not because some other developer out there "is trying to be a jerk" as you put it.It's true that undefined is not a keyword. But it is a global level primitive. It was intended to be used like this (see "undefined" at  developer.mozilla.org):The common alternative to that (also from MDN) and in my opinion the better way is:Which has a couple of advantages, the obvious one (from the comments) is that it does not trigger an exception when x is not declared. It's also worth noting that MDN also points out that it is important to use === over == in the first case because:This is another often overlooked reason why it is probably better to just use the second alternative in all cases.Conclusion: It's not wrong to code it the first way, and certainly not dangerous. The argument you've seen that you use as an example against it (that it can be overwritten) is not the strongest argument for coding the alternative with typeof. But using typeof is stronger for one reason specifically: it doesn't throw an exception when your var is not declared. It could also be argued that using == instead of === is a common mistake in which case it's not doing what you expected it to. So why not use typeof?

JavaScript variable definition: Commas vs. Semicolons

Collin Klopfenstein

[JavaScript variable definition: Commas vs. Semicolons](https://stackoverflow.com/questions/3781406/javascript-variable-definition-commas-vs-semicolons)

What are the differences and/or advantages, if any, of using commas when declaring a group of variables rather than semicolons.For example:versusI know that if you specify the var keyword on the first variable in the first example it persists across all of the variables, so they both produce the same end result regarding scope.  Is it just personal preference, or is there a performance benefit to doing it either way?

2010-09-23 18:29:42Z

What are the differences and/or advantages, if any, of using commas when declaring a group of variables rather than semicolons.For example:versusI know that if you specify the var keyword on the first variable in the first example it persists across all of the variables, so they both produce the same end result regarding scope.  Is it just personal preference, or is there a performance benefit to doing it either way?No performance benefit, just a matter of personal choice and style.The first version is just more succinct.Update:In terms of the amount of data going over the wire, of course less is better, however you would need a hell of a lot of removed var declarations in order to see a real impact.Minification has been mentioned as something that the first example will help with for better minification, however, as Daniel Vassallo points out in the comments, a good minifier will automatically do that for you anyways, so in that respect no impact whatsoever.After reading Crockford and others, I started to chain my variables with comma exclusively. Then later, I really got annoyed by the Chrome DevTools debugger that wouldn't stop at variable definitions with comma. For the debugger, variable definitions chained with comma are a single statement, while multiple var statements are multiple statements at which the debugger can stop. Therefore, I switched back from:To:By now, I find the second variant much cleaner, not to mention its advantage of solving the debugger issue.The "less code through the wire" argument is not persuasive, as there are minifiers.I prefer the var-per-variable notation:because the other comma-instead-of-another-var notation have these three shortcomings:1. Hard to maintain

Consider this code:But hey, what does the mogrify do? Let's print b to find out:breaks stuff2. Hard to readThe var in the begging of the line clearly communicates that there will be a new variable initiated.What the hell is the c = 3 doing there right?3. Not consistentConsider this:With var-per-variable every declaration follow the same structure. With comma-instead-of-another-var the first variable is declared in different way than others. If you decide to, say, move the first variable inside a for cycle, you will have to add var to the middle of declarationsOther than preference, it seems like majority of notable projects use the var-per-variable notationI agree with the other answerers that this is mainly a matter of personal style. But to bring an "Authoritative" opinion into the discussion, this is what Douglas Crockford says on the website of the popular JSLint tool:As others have noted, it is a style preference. JSLint might tell you to only have one var per function (if you use the "Good Parts"). Thus if using JSLint to check your code (not a bad idea, IMHO), you'll end up using the first format more than the latter. On the other hand, the same author, Douglas Crockford, says to put each variable in its own line in his coding conventions. So you may want to uncheck the "All one var per function" checkbox in JSLint if you use it. ;-)I don't think there's any noticeable difference, as far as I'm concerned it's just personal preference.I hate having multiple var declarations so I usually do:As it's shorter and arguably more readable, no var noise to look at.Since I don't see any references to it, here is a link to the ECMA-262 specification, which is the underlying spec for JavaScript.  The grammar from that page says:What you can glean from this is using commas or not doesn't matter.  Either way, it ends up being parsed as a VariableDeclaration and is treated exactly the same.  There should be no difference to how the script engine treats the two declarations.  The only differences would be ones already mentioned in other answers - saving more space and practically immeasurable differences in the amount of time it takes to apply the grammar to find all the VariableDeclarations when the script is compiled.The first saves a few characters--so there is a very small saving in terms of the JS filesize and therefore bandwidth consumption.  The only time this would become noticable would be in extreme cases.I prefer the second version (each has its own var).  I think that's because I come from a C++ background.  In C++, you can declare variables like you do in your first example, but it is frowned upon (it easily leads to mistakes when you're trying to create pointers that way).If you are minifying your javascript, there is a fairly large benefit:becomesWhere asbecomesThat's an additional three instances of var, which can add up over time.See The "A List Apart" article series "Better Javascript Minification" Part 1 and Part 2

Electron require() is not defined

Mari Selvan

[Electron require() is not defined](https://stackoverflow.com/questions/44391448/electron-require-is-not-defined)

I'm creating an Electron app for my own purpose. My problem is when I'm using node functions inside my HTML page it throws an error of:Is there any way to use Node functionalities in all my HTML pages? If it is possible please give me an example of how to do this or provide a link. Here are the variables I'm trying to use in my HTML page:and these are the values I'm using in all my HTML windows within Electron.

2017-06-06 13:32:19Z

I'm creating an Electron app for my own purpose. My problem is when I'm using node functions inside my HTML page it throws an error of:Is there any way to use Node functionalities in all my HTML pages? If it is possible please give me an example of how to do this or provide a link. Here are the variables I'm trying to use in my HTML page:and these are the values I'm using in all my HTML windows within Electron.As of version 5, the default for nodeIntegration changed from true to false.

You can enable it when creating the Browser Window:For security reasons, you should keep nodeIntegration: false and use a preload script to expose just what you need from Node/Electron API to the renderer process (view) via window variable. From the Electron docs:main.jspreload.jsrenderer.jsAre you using nodeIntegration: false while BrowserWindow initialization? If so, set it to true (defaults value is true).And include your external scripts in the HTML like this (not as <script> src="./index.js" </script>):I hope this answer gets some attention, because a large majority of answers here leave large security holes in your electron app. In fact this answer is essentially what you should be doing to use require() in your electron apps. (There is just a new electron API that makes it a little bit cleaner in v7).I wrote a detailed explanation/solution in github using the most current electron apis of how you can require() something, but I'll explain briefly here why you should follow an approach using a preload script, contextBridge and ipc.Electron apps are great because we get to use node, but this power is a double-edged sword. If we are not careful, we give someone access to node through our app, and with node a bad actor can corrupt your machine or delete your operating system files (among other things, I imagine).This problem manifests when you (any one of the below):All of these problems give uninterrupted access to node from your renderer process. If your renderer process is ever hijacked, you can consider all is lost.The solution is to not give the renderer direct access to node (ie. require()), but to give our electron main process access to require, and anytime our renderer process needs to use require, marshal a request to the main process.The way this works in the latest versions (7+) of Electron is on the renderer side we set up ipcRenderer bindings, and on the main side we set up ipcMain bindings. In the ipcMain bindings we set up listener methods that use modules we require(). This is fine and well because our main process can require all it wants. We use the contextBridge to pass the ipcRenderer bindings to our app code (to use), and so when our app needs to use the required modules in main, it sends a message via IPC (inter-process-communication) and the main process runs some code, and we then send a message back with our result.Roughly, here's what you want to do.main.jspreload.jsindex.htmlI'm the author of secure-electron-template, a secure template to build electron apps. I care about this topic, and have been working on this for a few weeks (at this point in time).First off, @Sathiraumesh solution leaves your electron application with huge security issue. Imagine that your app is adding some extra features to messenger.com, for example toolbar's icon will change or blink when you've have unread message. So in your main.js file, you create new BrowserWindow like so (notice I intentionally misspelled messenger.com):What if messengre.com is a malicious website, that wants to harm your computer. If you set nodeIntegration: true this site has access to your local file system and can execute this:And your home directory is gone.Solution

Expose only what you need, instead of everything. This is achived by preloading javascript code with require statements.Now awful messengre.com cannot delete your entire file system.Finally, I made it work.Add this code to your HTML document Script Element.Sorry for the late Reply.I use the below code to do this thing.And use nodeRequire instead of using require.It works Fine.You have to enable the nodeIntegration in webPreferences to use it. see below,There was a breaking api changes in electron 5.0(Announcement on Repository). In recent versions nodeIntegration is by default set to false.But if you want to keep the abilities to use Node.js and Electron APIs, you have to rename the symbols in the page before including other libraries:

Scroll to element on click in Angular 4

Frank Modica

[Scroll to element on click in Angular 4](https://stackoverflow.com/questions/43945548/scroll-to-element-on-click-in-angular-4)

I want to be able to scroll to a target when a button is pressed. I was thinking something like this.And in my component.ts a method like.I know that the code above is not valid but just to show what I was thinking. I've just started to learn Angular 4 with no previous experience of Angular. I've been searching around for something like this but all the examples are in AngularJs which differs alot to Angular 4

2017-05-12 19:55:22Z

I want to be able to scroll to a target when a button is pressed. I was thinking something like this.And in my component.ts a method like.I know that the code above is not valid but just to show what I was thinking. I've just started to learn Angular 4 with no previous experience of Angular. I've been searching around for something like this but all the examples are in AngularJs which differs alot to Angular 4You could do it like this:and then in your component:Edit: I see comments stating that this no longer works due to the element being undefined. I created a StackBlitz example in Angular 7 and it still works. Can someone please provide an example where it does not work?There is actually a pure javascript way to accomplish this without using setTimeout or requestAnimationFrame or jQuery.In short, find the element in the scrollView that you want to scroll to, and use scrollIntoView.el.scrollIntoView({behavior:"smooth"});Here is a plunkr.here is how I did it using angular 4.Templateadd this function to the Component.In angular 7 works perfectHTMLIn component Jon has the right answer and this works in my angular 5 and 6 projects.If I wanted to click to smoothly scroll from navbar to footer:Because I wanted to scroll back to the header from the footer, I created a service that this function is located in and injected it into the navbar and footer components and passed in 'header' or 'footer' where needed. just remember to actually give the component declarations the class names used:Little late to this party, but I've written a plugin for Angular 4+ that does just this. It covers other issues you may bump into, like Server-Side Rendering. You can also animate to scrolling to your likings. Full disclosure, I'm the author.NPM: @nicky-lenaers/ngx-scroll-toGitHub: @nicky-lenaers/ngx-scroll-toHope this helps you out!Another way to do it in Angular:Markup:Add ViewChild() property:Scroll anywhere you want inside of the component using scrollIntoView() function:in angular you can use ViewChild and ElementRef:

give your html element a refand inside your component:you can use this.myDivRef.nativeElement to get to your elementYou can scroll to any element ref on your view by using the code block below.

Note that the target (elementref id) could be on any valid html tag.On the view(html file)on the .ts file,You can achieve that by using the reference to an angular DOM element as follows:Here is the example in stackblitzthe component template:I have done something like what you're asking just by using jQuery to find the element (such as document.getElementById(...)) and using the .focus() call.You can do this by using jquery :ts code :html code :Apply this on elements you want to scroll :Here is a stackblitz sample.

Keyword 'const' does not make the value immutable. What does it mean?

Mukund Kumar

[Keyword 'const' does not make the value immutable. What does it mean?](https://stackoverflow.com/questions/42833540/keyword-const-does-not-make-the-value-immutable-what-does-it-mean)

There's the const definition in Exploring ES6 by Dr. Axel Rauschmayer:and then he writesI am little confused with this pitfall. Can any one clearly define the const with this pitfall?

2017-03-16 12:02:07Z

There's the const definition in Exploring ES6 by Dr. Axel Rauschmayer:and then he writesI am little confused with this pitfall. Can any one clearly define the const with this pitfall?MDN sums it up nicely:More succinctly: const creates an immutable binding. In other words: const, like var, gives you a mutable chunk of memory in which you're storing something. However, const dictates that you must keep referring to that same chunk of memory – you can't reassign the variable to a different chunk of memory, because the variable reference is constant.To really make something constant and unchanging after you've declared it, you need to use something like Object.freeze(). However, that's shallow and only works on key/value pairs. Freezing an entire object takes a bit more effort. To do so repeatedly in a performant way is yet more challenging. If you really have a need for that, I'd recommend checking out something like Immutable.jsWhen you make something const in JavaScript, you can't reassign the variable itself to reference something else.  However, the variable can still reference a mutable object.In the case of primitives such as strings and numbers, const is simpler to understand, since you don't mutate the values but instead assign a new value to the variable.const and let declarations control whether rebindings (aka reassignments) between identifiers and values are allowed:Immutability is controlled at the type level. Object is a mutable type, whereas String is an immutable type:First, define, what is a value in js. Value can be: Booleans, strings, numbers, objects, functions, and undefined values.Like: People are calling you with your name, it's not changing. However, you change your clothes. The binding between the people and you is your name. The rest can change. Sorry for the weird example.So, let me give you some examples:As you can see, unless you're not changing the "first" assigned value to a const, no error. Whenever you try to change the first assigned value to something else, it gets angry, and it gives an error.So, this is the second thing you might know when using const. Which is, it should be initialized to a value on its declaration or it will be angry.The const keyword is used to declare a block scoped variable (like declaring with let). The difference between declaring a variable with const and let is the following:In the above example we can  observe the following:A variable declared with const just can't be reassigned, it is still mutable. Being mutable means that the data structure (object, array, map, etc) which was assigned to the const variable still can be altered (i.e. mutated). Examples of mutation are:If really want an object to be not mutable you will have to use something like Object.freeze(). This is a method which freezes an object. A frozen object can no longer be changed and no new properties can be added.

How can I parse a string with a comma thousand separator to a number?

user1540714

[How can I parse a string with a comma thousand separator to a number?](https://stackoverflow.com/questions/11665884/how-can-i-parse-a-string-with-a-comma-thousand-separator-to-a-number)

I have 2,299.00 as a string and I am trying to parse it to a number. I tried using parseFloat, which results in 2. I guess the comma is the problem, but how would I solve this issue the right way? Just remove the comma?

2012-07-26 09:04:36Z

I have 2,299.00 as a string and I am trying to parse it to a number. I tried using parseFloat, which results in 2. I guess the comma is the problem, but how would I solve this issue the right way? Just remove the comma?Yes remove the commas:Removing commas is potentially dangerous because, as others have mentioned in the comments, many locales use a comma to mean something different (like a decimal place).I don't know where you got your string from, but in some places in the world "2,299.00" = 2.299The Intl object could have been a nice way to tackle this problem, but somehow they managed to ship the spec with only a Intl.NumberFormat.format() API and no parse counterpart :(The only way to parse a string with cultural numeric characters in it to a machine recognisable number in any i18n sane way is to use a library that leverages CLDR data to cover off all possible ways of formatting number strings http://cldr.unicode.org/The two best JS options I've come across for this so far:On modern browsers you can use the built in Intl.NumberFormat to detect the browser's number formatting and normalize the input to match.Their's obviously room for some optimization and caching but this works reliably in all languages.Remove anything that isn't a digit, decimal point, or minus sign (-):Updated fiddleNote that it won't work for numbers in scientific notation. If you want it to, change the replace line to add e, E, and + to the list of acceptable characters:Usually you should consider to use input fields which don't allow free text input for numeric values. But there might be cases, when you need to guess the input format. For example 1.234,56 in Germany means 1,234.56 in US. See https://salesforce.stackexchange.com/a/21404 for a list of countries which use comma as decimal.I use the following function to do a best guess and strip off all non-numeric characters:Try it here: https://plnkr.co/edit/9p5Y6H?p=previewExamples:The function has one weak point: It is not possible to guess the format if you have 1,123 or 1.123 - because depending on the locale format both might be a comma or a thousands-separator. In this special case the function will treat separator as a thousands-separator and return 1123.It's baffling that they included a toLocaleString but not a parse method. At least toLocaleString without arguments is well supported in IE6+.For a i18n solution, I came up with this:First detect the user's locale decimal separator:Then normalize the number if there's more than one decimal separator in the String:Finally, remove anything that is not a number or a decimal separator:This is a simplistic unobtrusive wrapper around the parseFloat function.If you want to avoid the problem that David Meister posted and you are sure about the number of decimal places, you can replace all dots and commas and divide by 100, ex.:or if you have 3 decimalsIt's up to you if you want to use parseInt, parseFloat or Number. Also If you want to keep the number of decimal places you can use the function .toFixed(...).All of these answers fail if you have a number in the millions.3,456,789 would simply return 3456 with the replace method.The most correct answer for simply removing the commas would have to be.Or simply written. This converts a number in whatever locale to normal number.

Works for decimals points too:If you want a l10n answer do it this way.  Example uses currency, but you don't need that.  Intl library will need to be polyfilled if you have to support older browsers.Replace the comma with an empty string: If you have a small set of locales to support you'd probably be better off by just hardcoding a couple of simple rules:

Node.js Port 3000 already in use but it actually isn't?

user2573690

[Node.js Port 3000 already in use but it actually isn't?](https://stackoverflow.com/questions/39322089/node-js-port-3000-already-in-use-but-it-actually-isnt)

I have been working with a node.js project for a few weeks and it has been working great. Usually I use 'npm start' to run my app and view it in a browser at on localhost, port 3000.Today, I started to get the following error while using npm start:I have checked the resource monitor and I have no other process running on port 3000. Why would I be getting this error message?In my app.js I have the following code to set the port...is this incorrect? It worked fine before so I'm not sure what I am doing wrong.Thanks for the help! EDIT:

I have tried running netstat and TCPView to check what process is using the port, but there is nothing using that port. I also tried restarting my laptop but I still get the same error. 

2016-09-04 22:38:24Z

I have been working with a node.js project for a few weeks and it has been working great. Usually I use 'npm start' to run my app and view it in a browser at on localhost, port 3000.Today, I started to get the following error while using npm start:I have checked the resource monitor and I have no other process running on port 3000. Why would I be getting this error message?In my app.js I have the following code to set the port...is this incorrect? It worked fine before so I'm not sure what I am doing wrong.Thanks for the help! EDIT:

I have tried running netstat and TCPView to check what process is using the port, but there is nothing using that port. I also tried restarting my laptop but I still get the same error. You can search on how to kill that process.For Linux/Mac OS search (sudo) run this in the terminal:On Windows:change tskill for taskkill in git bashSometimes it happens, as @sova proposed This happens to me sometimes, EADDR in use. Typically there is a terminal window hiding out in the background that is still running the app. And that's also right with me.It happens, when you have opened terminal for long time, yeah you have right, you have stop the process. But sometimes it didn't stop in the background. So best solution is that you close the terminal and start it again. It will solves your problem. becuase in my case it works.Also, close the instance for present time but unable to stop the process in background. So for one time, works, but again when we update our code and save, this problem occurs again as with Nodemon.So exit the terminal will solve the problem. OR For windows, 

The Task Manager would definitely show a node process running.

Try to kill the process, it will solve the problem.I had the same problem.

(The below steps work fine on Windows 10):Now you can run npm start.Hope it helps you.I've seen the same thing and tried all the suggestions above without success. Here are steps that resolve it for me:

- turn off wifi

- npm start     (this should work)

- turn on wifiI'm not exactly sure what the root issue is but that resolved it for me.Killing a process that owns port 3000First, let’s take a look at how we can kill a process that has a port open.Using the lsof command, we can retrieve the PID that has the given port:Then we can kill this process just by doing:Let’s turn this into a one-liner:If you’re using an environment variable to set the server port, we can specify that instead of hardcoding our values:Lastly, we can default to port 3000 if the environment variable isn’t set:Getting nodemon to execute hooksNodemon lets you set up event hooks through nodemon.json configuration file:This will cause nodemon to execute sh -c 'lsof -i :${PORT:-3000} -t | xargs kill command whenever your app crashes, thereby killing the child process it spawned that’s keeping the port open.Open Task Manager (press Ctrl+Alt+Del

Select the 'Processes Tab'

Search for 'Node.js: Server-side JavaScript'

Select it and click on 'End task' buttonI was using express server with nodemon on NodeJS.

I got the following message and it seems an error:There is a general solution that if you terminate all node server connections, you can add this code in your package.json file:In addition, I've found several solutions windows command and bash on Win 10 x64.All my notes are here:# Terminate all NodeJS Server Connections# Example: Open the Windows Task Manager and see "node.exe" PID number on Windows# Kill a process in Windows by Port Number (Example)For Help:Code 1:Code 2:Code 3:# Command line for looking at specific portin cmd:in bash:# Find node.exe using "tasklist" commandin cmd:in bash:This happens to me sometimes, EADDR in use.  Typically there is a terminal window hiding out in the background that is still running the app. You can stop process with ctrl+C in the terminal window.  Or, perhaps you are listening to the port multiple times due to copy/pasta =)Came from Google here with a solution for High Sierra.Something changed in the networking setup of macos and some apps (including ping) cannot resolve localhost.Editing /etc/hosts seems like a fix:cmd: sudo nano /etc/hosts/

content 127.0.0.1 localhostOr simply (if you're sure your /etc/hosts is empty)

sudo echo '127.0.0.1 localhost' > /etc/hostsI have spent 2h on finding out why EADDRINUSE wasn't allowing me to sart an app (other node-express servers were ok)... it started working after adding 

    lazyConnect: true,

to datasource configuration. Don't ask me why it helped. I do not know. I am putting this info here just for people having the same issue. I got this problem using Git Bash on Windows. I run npm start, or node app.js. After terminating it with Ctrl+C shortly and trying to start the server again using npm start or node app.js then I get this error message.When I do this with the regular Windows Command Prompt, however, it works fine.Or You can do it in another way. Open the Task Manager and Find the "Node.js:Server-side JavaScript" row. Select that and end task. It should work now.Thanks.If you want to close only one port, just run this command. 

kill -9 $(lsof -t -i:3000)The difference between pkill and kill is someone process clay. In kill you apply a filter. you just stop the port you want.The pkill command closes all node processes.

pkill -9 nodeUse pkill to avoid memory leaks that occur occasionally during development. if there is more than one node, it kills them all.The use of scripts in package.json is also exemplified.Simple in linuxFor windows users, you can use CurrPorts tool to kill ports under usage easilyIt may be an admin process running in the background and netstat doesn't show this.

Use tasklist | grep node to find the PID of this admin process and then kill PIDif you are using webstorm just make sure your default port is not 3000

from 

file -> settings -> Build, Execution, Deployment -> Debugger

And there changeand set it to "63342"

or see this answer 

Change WebStorm LiveEdit Port (63342)Try opening the localhost in your browser. Just type: localhost:3000 in the address bar.

If the app opens-up, it means your previous npm run is still active. Now, you can just make changes to the code and see the effects if you are designing the same app, or if you wanna run another app, just tweak the code (in index.js of previously running app) a little-bit and (probably refresh the browser tab) to make it crash ;)..... Now go run npm run start again from your new app directory. Hope this helps! :)orYou can open the Task Manager (WINDOWS_KEY+X > Task Manager) and you'll see the "Node.js:Server-side JavaScript" row. Select that and end task....It should work now!!If not, change the .env file of your app to include port:3002 and run the new app. This will allow you to run two separate apps on different ports. Cheers!!In package.json scripts inlcude:I believe the issue was for me the time that the old port was not shutting down in time by nodemon for the restart. I experienced the issue using multer.server or app listen() methods might be added at 2 places.

Search for listen() methods in the for the application startups

thats why its returning as Server started at Port XXXX and Port XXXX already in use message coming side by sideIn my circumstance I had just started using VS Code and had followed a tutorial using Sequelize. 

In the end I had a bin/www file that had the listen() in there.

I didn't know about this and I was running my app by running node app.js, when it didn't work I then added in the express server stuff with .listen() (which worked fine). But when starting to use nodemon and VSCode it was pointed at bin/www and that required my app.js. Long story short I had added .listen() to my app.js and was running app.js directly when I should have not added that and run bin/www.Hope it will helpFor Mac users, force close the process using activity monitor app.

Select the npm from the process and click X button to quit or force quit the process.I ran into this problem while updating and restarting the code editor and fix it using activity monitornpm process in activity monitor appcheck for any process running on the same port by entering the command:You can find the process running on the respective node port, then kill the node by If the problem still remains then just kill all the nodeKills all the running ports (mac):

Google Maps API Multiple Markers with Infowindows

stacktraceyo

[Google Maps API Multiple Markers with Infowindows](https://stackoverflow.com/questions/11106671/google-maps-api-multiple-markers-with-infowindows)

I am trying to add multiple markers each with its own infowindow that comes up when clicked on. I am having trouble with getting the infowindows coming up, when I try it either shows up only one marker without an infowindow. Thanks, let me know if you need some more information

2012-06-19 18:01:43Z

I am trying to add multiple markers each with its own infowindow that comes up when clicked on. I am having trouble with getting the infowindows coming up, when I try it either shows up only one marker without an infowindow. Thanks, let me know if you need some more informationYou could use a closure. Just modify your code like this:Here is the DEMOHere is the code snippet which will work for sure. You can visit below link for working jsFiddle and explainantion in detail.

How to locate multiple addresses on google maps with perfect zoomSource LinkDemo LinkThe following code will show Multiple Markers with InfoWindow. You can Uncomment code to show Info on Hover as wellIf you also want to bind closing of infowindow to some event, try something like thisThen move var infowindow = new google.maps.InfoWindow() to the initialize() function:

How do I make a「public static field」in an ES6 class?

aebabis

[How do I make a「public static field」in an ES6 class?](https://stackoverflow.com/questions/28445693/how-do-i-make-a-public-static-field-in-an-es6-class)

I'm making a Javascript class and I'd like to have a public static field like in Java. This is the relevant code:This is the error I get:It looks like ES6 modules don't allow this. Is there a way to get the desired behavior or do I have to write a getter?

2015-02-11 02:42:03Z

I'm making a Javascript class and I'd like to have a public static field like in Java. This is the relevant code:This is the error I get:It looks like ES6 modules don't allow this. Is there a way to get the desired behavior or do I have to write a getter?You make "public static field" using accessor and a "static" keyword:Looking at a spec, 14.5 — Class Definitions — you'd see something suspiciously relevant :)So from there you can follow to 14.5.14 — Runtime Semantics: ClassDefinitionEvaluation — to double check if it really does what it looks like it does. Specifically, step 20:IsStatic is defined earlier in 14.5.9So PropertyMethodDefinition is called with "F" (constructor, function object) as an argument, which in its turn creates an accessor method on that object.This already works in at least IETP (tech preview), as well as 6to5 and Traceur compilers.There is a Stage 3 ECMAScript proposal called "Static Class Features" by Daniel Ehrenberg and Jeff Morrison that aims to solve this problem. Along with the Stage 3 "Class Fields" proposal, future code will look like this:The above is equivalent to:Babel supports transpiling class fields through @babel/plugin-proposal-class-properties (included in the stage-3 preset), so that you can use this feature even if your JavaScript runtime doesn't support it.Compared to @kangax's solution of declaring a getter, this solution can  also be more performant, since here the property is accessed directly instead of through calling a function.If this proposal gets accepted, then it will be possible to write JavaScript code in a way that's more similar to traditional object-oriented languages like Java and C♯.Edit: A unified class fields proposal is now at stage 3; update to Babel v7.x packages.Edit (Feb 2020): The static class features have been split out into a different proposal. Thanks @GOTO0!In current drafts of ECMAScript 6 (as of February 2015), all class properties must be methods, not values (note in ECMAScript a "property" is similar in concept to an OOP field, except the field value must be a Function object, not any other value such as a Number or Object).You can still specify these using traditional ECMAScript constructor property specifiers:To get full advantage of static variable I followed this approach. To be more specific, we can use it to use private variable or having only public getter, or having both getter or setter. In the last case it's same as one of the solution posted above.I could create another class extending Url and it worked.I used babel to convert my ES6 code to ES5@kangax 's answer does not imitate the whole static behaviour of traditional OOP language's, because you cannot access the static property by it's instance like const agent = new Agent; agent.CIRCLE; // UndefinedIf you want to access static property just like OOP's, here is my solution:Test code as follows.

Make view 80% width of parent in React Native

Mark Amery

[Make view 80% width of parent in React Native](https://stackoverflow.com/questions/33939974/make-view-80-width-of-parent-in-react-native)

I'm creating a form in React Native and would like to make my TextInputs 80% of the screen width.With HTML and ordinary CSS, this would be straightforward:Except that React Native doesn't support the display property, percentage widths, or auto margins.So what should I do instead? There's some discussion of this problem in React Native's issue tracker, but the proposed solutions seem like nasty hacks.

2015-11-26 13:29:42Z

I'm creating a form in React Native and would like to make my TextInputs 80% of the screen width.With HTML and ordinary CSS, this would be straightforward:Except that React Native doesn't support the display property, percentage widths, or auto margins.So what should I do instead? There's some discussion of this problem in React Native's issue tracker, but the proposed solutions seem like nasty hacks.That should fit your needs:As of React Native 0.42 height: and width: accept percentages.  Use width: 80% in your stylesheets and it just works.If you are simply looking to make the input relative to the screen width, an easy way would be to use Dimensions:I've set up a working project here. Code is also below. https://rnplay.org/apps/rqQPCQIn your StyleSheet, simply put: instead of: Keep Coding........ :)You can also try react-native-extended-stylesheet that supports percentage for single-orientation apps:The technique I use for having percentage width of the parent is adding an extra spacer view in combination with some flexbox. This will not apply to all scenarios but it can be very helpful.So here we go:Basically the flex property is the width relative to the "total" flex of all items in the flex container. So if all items sum to 100 you have a percentage. In the example I could have used flex values 6 & 4 for the same result, so it's even more FLEXible.If you want to center the percentage width view: add two spacers with half the width. So in the example it would be 2-6-2. Of course adding the extra views is not the nicest thing in the world, but in a real world app I can image the spacer will contain different content.This is the way I got the solution. Simple and Sweet. Independent of Screen density:I have an updated solution (late 2019) , to get 80% width of parent Responsively with Hooks it work's even if the device rotate.You can use Dimensions.get('window').width to get Device Width in this example you can see how you can do it Responsively 

How do I set textarea scroll bar to bottom as a default?

moesef

[How do I set textarea scroll bar to bottom as a default?](https://stackoverflow.com/questions/9170670/how-do-i-set-textarea-scroll-bar-to-bottom-as-a-default)

I have a textarea that is being dynamically reloaded as user input is being sent in. It refreshes itself every couple seconds. When the amount of text in this textarea exceeds the size of the textarea, a scroll bar appears. However the scroll bar isn't really usable because if you start scrolling down, a couple seconds later the textarea refreshes and brings the scroll bar right back up to the top. I want to set the scroll bar to by default show the bottom most text. Anyone have an idea of how to do so?

2012-02-07 03:37:25Z

I have a textarea that is being dynamically reloaded as user input is being sent in. It refreshes itself every couple seconds. When the amount of text in this textarea exceeds the size of the textarea, a scroll bar appears. However the scroll bar isn't really usable because if you start scrolling down, a couple seconds later the textarea refreshes and brings the scroll bar right back up to the top. I want to set the scroll bar to by default show the bottom most text. Anyone have an idea of how to do so?pretty simple, in vanilla javascript:You can use this with jQuery

