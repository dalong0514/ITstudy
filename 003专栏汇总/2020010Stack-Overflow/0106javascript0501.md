https://github.com/nilzona/path2d-polyfillNice description:

http://ramblings.mcpher.com/Home/excelquirks/gassnips/svgtopngNote that in ie you will get exception on stage of canvas.toDataURL(); It is because IE has too high security restriction and treats canvas as readonly after drawing image there. All other browsers restrict only if image is cross origin.Like:I recently discovered a couple of image tracing libraries for JavaScript that indeed are able to build an acceptable approximation to the bitmap, both size and quality. I'm developing this JavaScript library and CLI :https://www.npmjs.com/package/svg-png-converterWhich provides unified API for all of them, supporting browser and node, non depending on DOM, and a Command line tool. For converting logos/cartoon/like images it does excellent job. For photos / realism some tweaking is needed since the output size can grow a lot.It has a playground although right now I'm working on a better one, easier to use, since more features has been added:https://cancerberosgx.github.io/demos/svg-png-converter/playground/#

How may I reference the script tag that loaded the currently-executing script?

brice

[How may I reference the script tag that loaded the currently-executing script?](https://stackoverflow.com/questions/403967/how-may-i-reference-the-script-tag-that-loaded-the-currently-executing-script)

How can I reference the script element that loaded the javascript that is currently running?Here's the situation. I have a "master" script being loaded high in the page, first thing under the HEAD tag.There is a script in "scripts.js" which needs to be able to do on-demand loading of other scripts. The normal method doesn't quite work for me because I need to add new scripts without referencing the HEAD tag, because the HEAD element hasn't finished rendering:What I want to do is reference the script element that loaded the current script so that I can then append my new dynamically loaded script tags into the DOM after it.

2008-12-31 20:22:12Z

How can I reference the script element that loaded the javascript that is currently running?Here's the situation. I have a "master" script being loaded high in the page, first thing under the HEAD tag.There is a script in "scripts.js" which needs to be able to do on-demand loading of other scripts. The normal method doesn't quite work for me because I need to add new scripts without referencing the HEAD tag, because the HEAD element hasn't finished rendering:What I want to do is reference the script element that loaded the current script so that I can then append my new dynamically loaded script tags into the DOM after it.document.currentScript will return the <script> element whose script is currently being processed. Giving the script an id attribute will let you easily select it by id from within using document.getElementById(). Giving the script a data-* attribute will let you easily select it from within. This has few benefits over the previous option. Instead of using the data attributes, you can use the selector to choose the script by source:In embed.js:We can also loop over every script element and check each individually to select the one we want:This lets us use both previous techniques in older browsers that don't support querySelector() well with attributes. For example:This inherits the benefits and problems of whatever approach is taken, but does not rely on querySelector() so will work in older browsers.Since the scripts are executed sequentially, the last script element will very often be the currently running script: Since scripts are executed sequentially, the currently executed script tag is always the last script tag on the page until then. So, to get the script tag, you can do:Probably the easiest thing to do would be to give your scrip tag an id attribute.Script are executed sequentially only if they do not have either a "defer" or an "async" attribute. Knowing one of the possible ID/SRC/TITLE attributes of the script tag could work also in those cases. So both Greg and Justin suggestions are correct.There is already a proposal for a document.currentScript on the WHATWG lists.EDIT: Firefox > 4 already implement this very useful property but it is not available in IE11 last I checked and only available in Chrome 29 and Safari 8.EDIT: Nobody mentioned the "document.scripts" collection but I believe that the following may be a good cross browser alternative to get the currently running script:Here's a bit of a polyfill that leverages document.CurrentScript if it exists and falls back to finding the script by ID.If you include this at the top of every script tag I believe you'll be able to consistently know which script tag is being fired, and you'll also be able to reference the script tag in the context of an asynchronous callback.Untested, so leave feedback for others if you try it.It must works at page load and when an script tag is added with javascript (ex. with ajax)Follow these simple steps to obtain reference to current executing script block:Example (ABCDE345678 is the unique ID):btw, for your case, you can simply use old fashioned document.write() method to include another script.

As you mentioned that DOM is not rendered yet, you can take advantage from the fact that browser always execute script in linear sequence (except for deferred one that will be rendered later), so the rest of your document is still "not exists".

Anything you write through document.write() will be placed right after the caller script.Example of original HTML page:Content of script.js:After rendered, the DOM structure will become:An approach for dealing with async & deferred scripts is to leverage the onload handler- set an onload handler for all script tags and the first one which executes should be yours.To get the script, that currently loaded the script you can useYou need to keep a reference at the beginning of your script, so you can call laterConsider this algorithm. When your script loads (if there are multiple identical scripts), look through document.scripts, find the first script with the correct "src" attribute, and save it and mark it as 'visited' with a data-attribute or unique className.When the next script loads, scan through document.scripts again, passing over any script already marked as visited. Take the first unvisited instance of that script.This assumes that identical scripts will likely execute in the order in which they are loaded, from head to body, from top to bottom, from synchronous to asynchronous.This will scan through all the script for the first matching script that isn't marked with the special attribute.Then mark that node, if found, with a data-attribute so subsequent scans won't choose it. This is similar to graph traversal BFS and DFS algorithms where nodes may be marked as 'visited' to prevent revisitng.I've got this, which is working in FF3, IE6 & 7. The methods in the on-demand loaded scripts aren't available until page load is complete, but this is still very useful.If you can assume the file name of the script, you can find it.  I've only really tested the following function in Firefox so far. I have found the following code to be the most consistent, performant, and simple.

How to round float numbers in javascript?

Vitalii Ponomar

[How to round float numbers in javascript?](https://stackoverflow.com/questions/9453421/how-to-round-float-numbers-in-javascript)

I need to round for example 6.688689 to 6.7, but it always shows me 7.My method:But result always is the same 7... What am I doing wrong?

2012-02-26 13:21:38Z

I need to round for example 6.688689 to 6.7, but it always shows me 7.My method:But result always is the same 7... What am I doing wrong?Use toFixed() function.Upd (2019-10). Thanks to Reece Daniels code below now available as a set of functions packed in npm-package expected-round (take a look).You can use helper function from MDN example. Than you'll have more flexibility:Upd (2019-01-15). Seems like MDN docs no longer have this helper funcs. Here's a backup with examples:Usage examples:A Number object in JavaScript has a method that does exactly what you need. That method is Number.toPrecision([precision]). Just like with .toFixed(1) it converts the result into a string, and it needs to be converted back into a number. Done using the + prefix here.simple benchmark on my laptop:If you not only want to use toFixed() but also ceil() and floor() on a float then you can use the following function:Produces:UPD:The other possible way is this:Produces:My extended round function:Example Output:See belowvar original = 28.59; var result=Math.round(original*10)/10  will return you returns 28.6Hope this is what you want..I think this function can help.I think below function can help usage : roundOff(600.23458,2); will return 600.23if you're under node.js context, you can try mathjsThere is the alternative .toLocaleString() to format numbers, with a lot options regarding locales, grouping, currency formating, notations. Some examples:Round to 1 decimal, return a float:Round to 2 decimals, format as currency with specified symbol, use comma grouping for thousands:Format as locale currency:Round to minimum 3 decimal, force zeros to display:Percent style for ratios. Input * 100 with % sign I have very good solution with if toFixed() is not working.ExampleIf you're using Browserify today, you're going to have to try: roundTo a very useful NPM libMinor tweak to this answer:

Create an array with same element repeated multiple times

Curious2learn

[Create an array with same element repeated multiple times](https://stackoverflow.com/questions/12503146/create-an-array-with-same-element-repeated-multiple-times)

In Python, where [2] is a list, the following code gives this output:Does there exist an easy way to do this with an array in JavaScript?I wrote the following function to do it, but is there something shorter or better?

2012-09-19 21:26:23Z

In Python, where [2] is a list, the following code gives this output:Does there exist an easy way to do this with an array in JavaScript?I wrote the following function to do it, but is there something shorter or better?You can do it like this:It doubles the array in each iteration, so it can create a really large array with few iterations.Note: You can also improve your function a lot by using push instead of concat, as concat will create a new array each iteration. Like this (shown just as an example of how you can work with arrays):In ES6 using Array fill() methodyou can try:Update (01/06/2018):Now you can have a set of characters repeating.Note: Check more about fill(...) and from(...) for compatibility and browser support.Update (05/11/2019):Another way, without using fill or from, that works for string of any length:Array.from({length:5}, i => 1) // [1, 1, 1, 1, 1]or create array with increasing value Array.from({length:5}, (e, i)=>i) // [0, 1, 2, 3, 4]In lodash it's not so bad:EDIT: Even better:EDIT: Even better:[c] * n can be written as:so for [2] * 5You can also extend the functionality of Array like so:I should note that extending the functionality of built-in objects can cause problems if you are working with 3rd-party libraries. Always weigh this into your decisions. In case you need to repeat an array several times:inspired by this answerUse this function:Or for a more compact version:Or for a curry-able version:You can use this function with a list:No easier way. You need to make a loop and push elements into the array.In the Node.js REPL:Another one-liner:This function creates an array of (length) elements where each element equals (value) as long as (value) is an integer or string of an integer. Any decimal numbers will be truncated. If you do want decimal numbers, replace "parseInt(" with "parseFloat("Examples:I had problems with the mentioned methods when I use an array likeTo get this I'm using:I discovered this today while trying to make a 2D array without using loops. In retrospect, joining a new array is neat; I tried mapping a new array, which doesn't work as map skips empty slots.The "#" char can be any valid single character.

The 5 would be a variable for the number of elements you want.

The 7 would be the value you want to fill your array with.The new fill method is better, and when I coded this I didn't know it existed, nor did I know repeat is es6; I'm going to write a blog post about using this trick in tandem with reduce to do cool things.http://jburger.us.to/2016/07/14/functionally-create-a-2d-array/Try This:If you are using a utlity belt like lodash/underscore you can do it like this :)Can be used as a one-liner too:Improving on Vivek's answer, this works for strings of any length, to populate an array of length n: Array(n+1).join('[string to be repeated][separator]').split('[separator]').slice(0, n)I needed a way to repeat/loop an array (with n items) m times.For example, distributing a list (of persons) to a week/month. Let's say I have 3 names, and I want to them to repeat in a week:

How do you display JavaScript datetime in 12 hour AM/PM format?

bbrame

[How do you display JavaScript datetime in 12 hour AM/PM format?](https://stackoverflow.com/questions/8888491/how-do-you-display-javascript-datetime-in-12-hour-am-pm-format)

How do you display a JavaScript datetime object in the 12 hour format (AM/PM)?

2012-01-17 01:07:59Z

How do you display a JavaScript datetime object in the 12 hour format (AM/PM)?If you just want to show the hours then..Output : 7 AMIf you wish to show the minutes as well then...Output : 7:23 AMYou can also consider using something like date.js:Here's a way using regex:This creates 3 matching groups:Then it displays the 1st and 3rd groups.WARNING: toLocaleTimeString() may behave differently based on region / location.If you don't need to print the am/pm, I found the following nice and concise: This is based off @bbrame's answer. As far as I know, the best way to achieve that without extensions and complex coding is like this:Javascript AM/PM FormatI found this checking this question out.How do I use .toLocaleTimeString() without displaying seconds?My suggestion is use moment js for date and time operation.https://momentjs.com/docs/#/displaying/format/use dateObj.toLocaleString([locales[, options]])Option 1 - Using localesOption 2 - Using optionsNote: supported on all browsers but safari atmPlease find the solution belowShort RegExp for en-US:Check out Datejs. Their built in formatters can do this: http://code.google.com/p/datejs/wiki/APIDocumentation#toStringIt's a really handy library, especially if you are planning on doing other things with date objects.I fount it's here it working fine.and plunker example hereUse Moment.js for this Use below codes in JavaScript when using moment.jsThe format() method returns the date in specific format.In modern browsers, use Intl.DateTimeFormat and force 12hr format with options:Using default will honor browser's default locale if you add more options, yet will still output 12hr format.Here is another way that is simple, and very effective:you can determine am or pm with this simple codetry thisHere my solutionOr just simply do the following code:A short and sweet implementation:

Wait 5 seconds before executing next line

copyflake

[Wait 5 seconds before executing next line](https://stackoverflow.com/questions/14226803/wait-5-seconds-before-executing-next-line)

This function below doesn’t work like I want it to; being a JS novice I can’t figure out why.I need it to wait 5 seconds before checking whether the newState is -1.Currently, it doesn’t wait, it just checks straight away.

2013-01-09 01:11:08Z

This function below doesn’t work like I want it to; being a JS novice I can’t figure out why.I need it to wait 5 seconds before checking whether the newState is -1.Currently, it doesn’t wait, it just checks straight away.You have to put your code in the callback function you supply to setTimeout:Any other code will execute immediately.You really shouldn't be doing this, the correct use of timeout is the right tool for the OP's problem and any other occasion where you just want to run something after a period of time. Joseph Silber has demonstrated that well in his answer. However, if in some non-production case you really want to hang the main thread for a period of time, this will do it.With execution in the form:I've arrived here because I was building a simple test case for sequencing a mix of asynchronous operations around long-running blocking operations (i.e. expensive DOM manipulation) and this is my simulated blocking operation. It suits that job fine, so I thought I post it for anyone else who arrives here with a similar use case. Even so, it's creating a Date() object in a while loop, which might very overwhelm the GC if it runs long enough. But I can't emphasize enough, this is only suitable for testing, for building any actual functionality you should refer to Joseph Silber's answer.Here's a solution using the new async/await syntax.Be sure to check browser support as this is a new feature introduced with ECMAScript 6.Utility function:Usage:The advantage of this approach is that it makes your code look and behave like synchronous code.You should not just try to pause 5 seconds in javascript.  It doesn't work that way.  You can schedule a function of code to run 5 seconds from now, but you have to put the code that you want to run later into a function and the rest of your code after that function will continue to run immediately.For example:But, if you have code like this:The console.log() statement will run immediately.  It will not wait until after the timeout fires in the stateChange() function.  You cannot just pause javascript execution for a predetermined amount of time.Instead, any code that you want to run delays must be inside the setTimeout() callback function (or called from that function).If you did try to "pause" by looping, then you'd essentially "hang" the Javascript interpreter for a period of time.  Because Javascript runs your code in only a single thread, when you're looping nothing else can run (no other event handlers can get called).  So, looping waiting for some variable to change will never work because no other code can run to change that variable.Use a delay function like this:Usage: Credits go to user CMS, see How to delay the .keyup() handler until the user stops typing?If you're in an async function you can simply do it in one line:Notice, if target is NodeJS it will be more efficient to use this (it's a predefined promisified setTimeout function):Best way to create a function like this for wait in milli seconds, this function will wait for milliseconds provided in the argument:Try this:Based on Joseph Silber's answer, I would do it like that, a bit more generic.You would have your function (let's create one based on the question):And you could have a wait function:At the end you would have:That's a solution, I would rather not use arguments in the wait function (to have only foo(); instead of foo(arg);) but that's for the example.This solution comes from React Native's documentation for a refresh control:To apply this to the OP's question, you could use this function in coordination with await:You can add delay by making small changes to your function ( async and await ).using angularjs:Create new Js functionCall the function when you want to delay execution. Use milliseconds in int for delay value.I used it to run PC games from edge or IE. And it selfclose IE Edge after 7 seconds.Firefox and Google Chrome cant be used to start games this way.

Difference between Node object and Element object?

P K

[Difference between Node object and Element object?](https://stackoverflow.com/questions/9979172/difference-between-node-object-and-element-object)

I am totally confused between Node object and Element object.

document.getElementById() returns Element object while document.getElementsByClassName()

returns NodeList object(Collection of Elements or Nodes?)If a div is an Element Object then what about div Node object?What is a Node Object?Are document object, Element object and Text Object are also Node object?As per David Flanagan's book 'The Document object, Its Element Objects and text objects are all Node objects'.So How come an object can inherit properties/methods of Element object as well as Node object?If yes, I guess Node Class and Element Class are related in prototypal tree of inheritance.

2012-04-02 15:28:14Z

I am totally confused between Node object and Element object.

document.getElementById() returns Element object while document.getElementsByClassName()

returns NodeList object(Collection of Elements or Nodes?)If a div is an Element Object then what about div Node object?What is a Node Object?Are document object, Element object and Text Object are also Node object?As per David Flanagan's book 'The Document object, Its Element Objects and text objects are all Node objects'.So How come an object can inherit properties/methods of Element object as well as Node object?If yes, I guess Node Class and Element Class are related in prototypal tree of inheritance.A node is the generic name for any type of object in the DOM hierarchy.  A node could be one of the built-in DOM elements such as document or document.body, it could be an HTML tag specified in the HTML such as <input> or <p> or it could be a text node that is created by the system to hold a block of text inside another element.  So, in a nutshell, a node is any DOM object.An element is one specific type of node as there are many other types of nodes (text nodes, comment nodes, document nodes, etc...).The DOM consists of a hierarchy of nodes where each node can have a parent, a list of child nodes and a nextSibling and previousSibling.  That structure forms a tree-like hierarchy.  The document node would have its list of child nodes (the head node and the body node).  The body node would have its list of child nodes (the top level elements in your HTML page) and so on.So, a nodeList is simply an array-like list of nodes.An element is a specific type of node, one that can be directly specified in the HTML with an HTML tag and can have properties like an id or a class. can have children, etc...  There are other types of nodes such as comment nodes, text nodes, etc... with different characteristics.  Each node has a property .nodeType which reports what type of node it is.  You can see the various types of nodes here (diagram from MDN):You can see an ELEMENT_NODE is one particular type of node where the nodeType property has a value of 1.So document.getElementById("test") can only return one node and it's guaranteed to be an element (a specific type of node).  Because of that it just returns the element rather than a list.Since document.getElementsByClassName("para") can return more than one object, the designers chose to return a nodeList because that's the data type they created for a list of more than one node.  Since these can only be elements (only elements typically have a class name), it's technically a nodeList that only has nodes of type element in it and the designers could have made a differently named collection that was an elementList, but they chose to use just one type of collection whether it had only elements in it or not.EDIT:  HTML5 defines an HTMLCollection which is a list of HTML Elements (not any node, only Elements).  A number of properties or methods in HTML5 now return an HTMLCollection.  While it is very similar in interface to a nodeList, a distinction is now made in that it only contains Elements, not any type of node.The distinction between a nodeList and an HTMLCollection has little impact on how you use one (as far as I can tell), but the designers of HTML5 have now made that distinction.For example, the element.children property returns a live HTMLCollection.Node is for implementing a tree structure, so its methods are for firstChild, lastChild, childNodes, etc.  It is more of a class for a generic tree structure.And then, some Node objects are also Element objects.  Element inherits from Node.  Element objects actually represents the objects as specified in the HTML file by the tags such as <div id="content"></div>.  The Element class define properties and methods such as attributes, id, innerHTML, clientWidth, blur(), and focus().Some Node objects are text nodes and they are not Element objects.  Each Node object has a nodeType property that indicates what type of node it is, for HTML documents:We can see some examples in the console:The last line above shows that Element inherits from Node. (that line won't work in IE due to __proto__.  Will need to use Chrome, Firefox, or Safari).By the way, the document object is the top of the node tree, and document is a Document object, and Document inherits from Node as well:Here are some docs for the Node and Element classes:

https://developer.mozilla.org/en-US/docs/DOM/Node

https://developer.mozilla.org/en-US/docs/DOM/ElementBest source of information for all of your DOM woeshttp://www.w3.org/TR/dom/#nodes"Objects implementing the Document, DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, or Comment interface (simply called nodes) participate in a tree."http://www.w3.org/TR/dom/#element"Element nodes are simply known as elements."Node : http://www.w3schools.com/js/js_htmldom_nodes.aspThe Node object represents a single node in the document tree.

A node can be an element node, an attribute node, a text node, or any other of the node types explained in the Node Types chapter.Element : http://www.w3schools.com/js/js_htmldom_elements.aspThe Element object represents an element in an XML document. Elements may contain attributes, other elements, or text. If an element contains text, the text is represented in a text-node.duplicate : Node is used to represent tags in general. Divided to 3 types: Attribute Note: is node which inside its has attributes. 

Exp: <p id=」123」></p>Text Node: is node which between the opening and closing its have contian text content.

Exp: <p>Hello</p>Element Node : is node which inside its has other tags.

Exp: <p><b></b></p>Each node may be types simultaneously, not necessarily only of a single type.Element is simply a element node.

Detect HTTP or HTTPS then force HTTPS in JavaScript

Registered User

[Detect HTTP or HTTPS then force HTTPS in JavaScript](https://stackoverflow.com/questions/4723213/detect-http-or-https-then-force-https-in-javascript)

Is there any way to detect HTTP or HTTPS and then force usage of HTTPS with JavaScript?I have some codes for detecting the HTTP or HTTPS but I can't force it to use https: .I'm using the window.location.protocol property to set whatever the site is to https: then refresh the page to hopefully reload a new https'ed URL loaded into the browser.

2011-01-18 10:52:49Z

Is there any way to detect HTTP or HTTPS and then force usage of HTTPS with JavaScript?I have some codes for detecting the HTTP or HTTPS but I can't force it to use https: .I'm using the window.location.protocol property to set whatever the site is to https: then refresh the page to hopefully reload a new https'ed URL loaded into the browser.Try thislocation.href = blah adds this redirect to the browser history. If the user hits the back button, they will be redirected back to the the same page. It is better to use location.replace as it doesn't add this redirect to the browser history.Setting location.protocol navigates to a new URL. No need to parse/slice anything.Firefox 49 has a bug where https works but https: does not. Said to be fixed in Firefox 54.It is not good idea because you just temporary redirect user to https and browser doesn't save this redirect.You describe task for web-server (apache, nginx etc) http 301, http 302 How about this?Ideally you'd do it on the server side, though.Not a Javascript way to answer this but if you use CloudFlare you can write page rules that redirect the user much faster to HTTPS and it's free. Looks like this in CloudFlare's Page Rules:You can do:Functional wayI like the answers for this question. But to be creative, I would like to share one more way:You should check this:

https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/upgrade-insecure-requestsAdd this meta tag to your index.html inside headHope it helped.Hi i used this solution works perfectly.No Need to check, just use https.I have just had all the script variations tested by Pui Cdm,  included answers above and many others using php, htaccess, server configuration, and Javascript, the results are that the script provided by vivek-srivastava

works best and you can add further security in java script.  

Omitting the second expression when using the if-else shorthand

Nikki

[Omitting the second expression when using the if-else shorthand](https://stackoverflow.com/questions/11069278/omitting-the-second-expression-when-using-the-if-else-shorthand)

Can I write the if else shorthand without the else? I've noticed putting null for the else works (but I have no idea why or if that's a good idea). Edit: Some of you seem bemused why I'd bother trying this. Rest assured it's purely out of curiosity. I like messing around with JavaScript.  

2012-06-17 06:00:36Z

Can I write the if else shorthand without the else? I've noticed putting null for the else works (but I have no idea why or if that's a good idea). Edit: Some of you seem bemused why I'd bother trying this. Rest assured it's purely out of curiosity. I like messing around with JavaScript.  This is also an option:dosomething() will only be called if x==2 is evaluated to true. This is called Short-circuiting.It is not commonly used in cases like this and you really shouldn't write code like this. I encourage this simpler approach:You should write readable code at all times; if you are worried about file size, just create a minified version of it with help of one of the many JS compressors. (e.g Google's Closure Compiler)What you have is a fairly unusual use of the ternary operator. Usually it is used as an expression, not a statement, inside of some other operation, e.g.:So, for readability (because what you are doing is unusual), and because it avoids the "else" that you don't want, I would suggest:Another option:If you're not doing the else, why not do:Using null is fine for one of the branches of a ternary expression. And a ternary expression  is fine as a statement in Javascript.As a matter of style, though, if you have in mind invoking a procedure, it's clearer to write this using if..else:or, in your case,A tiny addition to this very, very old thread..Let's say your'e inside a for loop and need to evaluate a variable for a truthy/falsy value with a ternary operator, while in case it's falsy you want to continue - you gonna have a problem because your'e not returning an expression ,you return instead a statement without any value.This will produce Uncaught SyntaxError: Unexpected token continueSo, if you do want to return a statement and still use one line for your code, while it may seem kinda weird at first glance and may not follow strict language usage, you can do this instead:Technically, putting null or 0, or just some random value there works (since you are not using the return value). However, why are you using this construct instead of the if construct? It is less obvious what you are trying to do when you write code this way, as you may confuse people with the no-op (null in your case).Probably shortest

JavaScript: Passing parameters to a callback function

vitto

[JavaScript: Passing parameters to a callback function](https://stackoverflow.com/questions/3458553/javascript-passing-parameters-to-a-callback-function)

I'm trying to pass some parameter to a function used as callback, how can I do that?

2010-08-11 13:05:49Z

I'm trying to pass some parameter to a function used as callback, how can I do that?If you want something slightly more general, you can use the arguments variable like so:But otherwise, your example works fine (arguments[0] can be used in place of callback in the tester)This would also work:Another Scenario :Your question is unclear.  If you're asking how you can do this in a simpler way, you should take a look at the ECMAScript 5th edition method .bind(), which is a member of Function.prototype.  Using it, you can do something like this:You can also use the following code, which adds the method if it isn't available in the current browser:Examplebind() - PrototypeJS Documentation When you have a callback that will be called by something other than your code with a specific number of params and you want to pass in additional params you can pass a wrapper function as the callback and inside the wrapper pass the additional param(s). If you are not sure how many parameters are you going to be passed into callback functions, use apply function.Wrap the 'child' function(s) being passed as/with arguments within function wrappers to prevent them being evaluated when the 'parent' function is called.Code from a question with any number of parameters and a callback context:Use curried function as in this simple example.A new version for the scenario where the callback will be called by some other function, not your own code, and you want to add additional parameters.For example, let's pretend that you have a lot of nested calls with success and error callbacks. I will use angular promises for this example but any javascript code with callbacks would be the same for the purpose.Now you may want to unclutter your code by defining a function to log errors, keeping the origin of the error for debugging purposes. This is how you would proceed to refactor your code:The calling function will still add the error parameter after your callback function parameters.I was looking for the same thing and end up with the solution and here it's a simple example if anybody wants to go through this.Also posted on the other question hereLet me give you a very plain Node.js style example of using a callback:and the HTML that will render the result:You can play with it here: https://jsfiddle.net/q8gnvcts/ - for example try to pass string instead of number: myTest('some string', 6, function(err, result).. and see the result.I hope this example helps because it represents the very basic idea of callback functions.read more about the spread syntax

How do I work around JavaScript's parseInt octal behavior?

Portman

[How do I work around JavaScript's parseInt octal behavior?](https://stackoverflow.com/questions/850341/how-do-i-work-around-javascripts-parseint-octal-behavior)

Try executing the following in JavaScript:I just learned the hard way that JavaScript thinks the leading zero indicates an octal integer, and since there is no "8" or "9" in base-8, the function returns zero. Like it or not, this is by design.What are the workarounds?Note: For sake of completeness, I'm about to post a solution, but it's a solution that I hate, so please post other/better answers.Update: The 5th Edition of the JavaScript standard (ECMA-262) introduces a breaking change that eliminates this behavior. Mozilla has a good write-up. 

2009-05-11 22:14:11Z

Try executing the following in JavaScript:I just learned the hard way that JavaScript thinks the leading zero indicates an octal integer, and since there is no "8" or "9" in base-8, the function returns zero. Like it or not, this is by design.What are the workarounds?Note: For sake of completeness, I'm about to post a solution, but it's a solution that I hate, so please post other/better answers.Update: The 5th Edition of the JavaScript standard (ECMA-262) introduces a breaking change that eliminates this behavior. Mozilla has a good write-up. This is a common Javascript gotcha with a simple solution:Just specify the base, or 'radix', like so:You could also use Number:If you know your value will be in the signed 32 bit integer range, then ~~x will do the correct thing in all scenarios.If you look up binary not (~), the spec requires a "ToInt32" conversion for the argument which does the obvious conversion to an Int32 and is specified to coerce NaN values to zero.Yes, this is incredibly hackish but is so convenient...From the parseInt documentation, use the optional radix argument to specify base-10:This strikes me as pedantic, confusing, and verbose (really, an extra argument in every single parseInt?) so I'm hoping there is a Better Way.edit: making your own function, to do what you really want, is just an option if you don't like adding the ",10" all the time to the parseInt() call. It has the disadvantage of being a nonstandard function: more convenient for you if you use it a lot, but perhaps more confusing for others.Specify the base:Would it be very naughty to replace parseInt with a version that assumes decimal if it has no second parameter? (note - not tested)and for good measureMDN LinkHow about this for decimal:If you've done a bunch of coding already with parseInt and don't want to add ",10" to everything, you can just override the function to make base 10 the default:That may confuse a later reader, so making a parseInt10() function might be more self-explanatory. Personally I prefer using a simple function than having to add ",10" all the time - just creates more opportunity for mistakes.This issue cannot be replicated in latest Chrome nor Firefox (2019).

Why should I use a semicolon after every function in javascript?

macca1

[Why should I use a semicolon after every function in javascript?](https://stackoverflow.com/questions/1834642/why-should-i-use-a-semicolon-after-every-function-in-javascript)

I've seen different developers include semicolons after functions in javascript and some haven't. Which is best practice?or

2009-12-02 17:51:50Z

I've seen different developers include semicolons after functions in javascript and some haven't. Which is best practice?orSemicolons after function declarations are not necessary.The grammar of a FunctionDeclaration is described in the specification as this:There's no semicolon grammatically required, but might wonder why?Semicolons serve to separate statements from each other, and a FunctionDeclaration is not a statement.FunctionDeclarations are evaluated before the code enters into execution, hoisting is a common word used to explain this behaviour.The terms "function declaration" and "function statement" are often wrongly used interchangeably, because there is no function statement described in the ECMAScript Specification, however there are some implementations that include a function statement in their grammar, -notably Mozilla- but again this is non-standard.However semicolons are always recommended where you use FunctionExpressions, for example:If you omit the semicolon after the first function in the above example, you will get completely undesired results:The first function will be executed immediately, because the parentheses surrounding the second one, will be interpreted as the Arguments of a function call.Recommended lectures:I use them after function-as-variable declarations:but not after classical-style definitions:JS Lint is de-facto convention, and it says no semicolon after function body. See the "Semicolon" section.Just stay consistent!  They are not needed, but I personally use them because most minification techniques rely on the semi-colon (for instance, Packer).Really just depends on your preference.  I like to end lines of code with semi colons because I'm used to Java, C++, C#, etc, so I use the same standards for coding in javascript.  I don't typically end function declarations in semi colons though, but that is just my preference.The browsers will run it either way, but maybe some day they'll come up with some stricter standards governing this.Example of code I would write:It's actually more than an issue of convention or consistency.I'm fairly certain that not placing semicolons after every statement slows down the internal parser because it has to figure out where the end of the statement is. I wish I had some handy numbers for you to positively confirm that, but maybe you can google it yourself. :)Also, when you are compressing or minifying code, a lack of semi-colons can lead to a minified version of your script that doesn't do what you wanted because all the white space goes away.When I minified my scripts I realized that I need to use semicolon for functions which starts with equals mark. if you define a function as var, yes you need to use semicolon.need semicolonno need semicolonSIMPLE:It is a good practice to leave the semicolons ; after the end of function braces. They have been considered a best practice for years.One advantage of always using them is if you want to minify your JavaScript.As minifying the Javascript, helps to reduce the file size a bit.But as for the best practise and answer above, not recommended to use it after a function tag.If you DON'T use semicolons, and if you want to minify (like a lot of developers like to do if their site serves a lot of JavaScript) you could get all sorts of Errors/Warnings.the semicolon after a function is not necessary

using it or not, does not cause errors in your program.

however, if you plan to minify your code, then using semicolons after functions is a good idea.

say for example you have code like the one below andwhen you minify the both, you will get the following as outputand 

Web workers without a separate Javascript file?

Ben Dilts

[Web workers without a separate Javascript file?](https://stackoverflow.com/questions/5408406/web-workers-without-a-separate-javascript-file)

As far as I can tell, web workers need to be written in a separate JavaScript file, and called like this: I'm using the closure compiler to combine and minify all my JavaScript source code, and I'd rather not have to have my workers in separate files for distribution. Is there some way to do this?Given that first-class functions are so crucial to JavaScript, why does the standard way to do background work have to load a whole other JavaScript file from the web server?

2011-03-23 16:20:38Z

As far as I can tell, web workers need to be written in a separate JavaScript file, and called like this: I'm using the closure compiler to combine and minify all my JavaScript source code, and I'd rather not have to have my workers in separate files for distribution. Is there some way to do this?Given that first-class functions are so crucial to JavaScript, why does the standard way to do background work have to load a whole other JavaScript file from the web server?http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkersThe html5rocks solution of embedding the web worker code in HTML is fairly horrible.

And a blob of escaped JavaScript-as-a-string is no better, not least because it complicates work-flow (Closure compiler can't operate on strings).Personally I really like the toString methods, but @dan-man THAT regex!  My preferred approach:Support is the intersection of these three tables:This won't work for a SharedWorker however, because the URL must be an exact match, even if the optional 'name' parameter matches. For a SharedWorker, you'll need a separate JavaScript file.Now there's an even more powerful way of solving this problem.

Again, store the worker code as a function, (rather than a static string) and convert using .toString(), then insert the code into CacheStorage under a static URL of your choice.There are two possible fall-backs. ObjectURL as above, or more seamlessly, put a real JavaScript file at /my_workers/worker1.jsAdvantages of this approach are:You can create a single JavaScript file that is aware of its execution context and can act as both a parent script and a worker. Let's start off with a basic structure for a file like this:As you can see, the script contains all code for both the parent's and the worker's point of view, checking if its own individual instance is a worker with !document. The somewhat unwieldy script_path computation is used to accurately calculate the script's path relative to the parent page, as the path supplied to new Worker is relative to the parent page, not the script.Using the Blob method, how about this for a worker factory:So you could use it like this...EDIT:I've just extended this idea further to make it easier to do cross-thread communication: bridged-worker.js.EDIT 2: The above link is to a gist I created. Someone else later turned it into an actual repo.Web workers operate in entirely separate contexts as individual Program's.This means that code cannot be moved from one context to another in object form, as they would then be able to reference objects via closures belonging to the other context.

This is especially crucial as ECMAScript is designed to be a single threaded language, and since web workers operate in separate threads, you would then have the risk of non-thread-safe operations being performed. This again means that web workers need to be initialized with code in source form.The spec from WHATWG saysbut unfortunately it doesn't really explain why one couldn't have allowed passing a string with source code to the constructor.a better to read way for a inline worker..Taking Adria's response and putting it in a copy-pastable function which works with current Chrome and FF but not IE10 (worker from blob causes a security error).And here's a working example http://jsfiddle.net/ubershmekel/YYzvr/You can use Greenlet:Example:Depending on your use case you can use something likeA example would beTake a look at the vkThread plugin. With htis plugin you can take any function in your main code and execute it in a  thread (web worker). So, you don't need to create a special "web-worker file".http://www.eslinstructor.net/vkthread/--VadimYou can use web workers in same javascript fie using inline webworkers.The below article will address you to easily understand the webworkers and their limitations and debugging of webworkers.Mastering in webworkersI think the better way to do this is using a Blob object, below you can see a simple example.Try to use jThread. https://github.com/cheprasov/jThreadhere console:https://developer.mozilla.org/es/docs/Web/Guide/Performance/Using_web_workersUse my tiny plugin https://github.com/zevero/worker-createSo I think we have another cool option for this now, thanks to template literals in ES6. That allows us to dispense with the extra worker function (and its weird scope) and just write the code that's intended for the worker as multiline text, much like the case where we were using  to store text, but without actually needing a document or DOM to do that in. Example: Here's a gist of the rest of that approach.Note that we can pull in any extra function dependencies we want into the worker just by collecting them into an array and running .toString on each of them to reduce them down into strings as well (should work as long as they are function declarations) and then just prepending that to the script string. That way we don't have to importScripts that we might already have bundled into the scope of the code we're writing.The only real downside to this particular version is that linters won't be able to lint the service worker code (since it's just a string), which is an advantage for the "separate worker function approach." This is just an addition to above - I have a nice templates for testing web workers in jsFiddle. Rather than Blob it uses jsFiddles ?js api:Normal web worker and shared worker templates are available.I discovered that CodePen currently does not syntax-highlight inline <script> tags that are not type="text/javascript" (or which have no type attribute).So I devised a similar but slightly different solution using labeled blocks with break, which is the only way you can bail from a <script> tag without creating a wrapper function (which is unnecessary).A simple promisified version, Function#callAsWorker, that takes a thisArg and arguments (just like call), and returns a promise:I use code like this, you can define your onmessage as a function other than plain text, so the editor can highlight your code and jshint works.Yes, it is possible, I did it using Blob files and passing a callbackI'll show you what a class I wrote does and how it manages the execution of callbacks in the background.First you instantiate the GenericWebWorker with whatever data you'd like to pass to callback that'll be executing in the Web Worker, that includes functions you want to use, in this case a number, a date and a function called blockerThis blocker function will execute an infinite while for n milisecondsand then you use it like thisYou can place the contents of your worker.js file inside backticks (which allows a multiline string constant) and create the worker from a blob like this:This is handy if for whatever reason you don't want to have separate script tags for the worker.Another solution is just to wrap the Worker in a function, then creating a blob invoking the function like so:One-liner for running functions in workers:Example usage:

How can you detect the version of a browser?

odle

[How can you detect the version of a browser?](https://stackoverflow.com/questions/5916900/how-can-you-detect-the-version-of-a-browser)

I've been searching around for code that would let me detect if the user visiting the website has Firefox 3 or 4. All I have found is code to detect the type of browser but not the version.How can I detect the version of a browser like this?

2011-05-06 20:53:01Z

I've been searching around for code that would let me detect if the user visiting the website has Firefox 3 or 4. All I have found is code to detect the type of browser but not the version.How can I detect the version of a browser like this?You can see what the browser says, and use that information for logging or testing multiple browsers.This is an improvement on Kennebec's answer.And then you just run:This way you can shield yourself from the obscurity of the code.This combines kennebec's (K) answer with Hermann Ingjaldsson's (H) answer: Here are several prominent libraries that handle browser detection as of May 2019.*supports Edge based on ChromiumThe bowser JavaScript library offers this functionality.  It seems to be well maintained.Use this: http://www.quirksmode.org/js/detect.htmlI was looking for a solution for myself, since jQuery 1.9.1 and above have removed the $.browser functionality. I came up with this little function that works for me.

It does need a global variable (I've called mine _browser) in order to check which browser it is. I've written a jsfiddle to illustrate how it can be used, of course it can be expanded for other browsers by just adding a test for _browser.foo, where foo is the name of the browser. I did just the popular ones.detectBrowser()To check if the current browser is Opera you would doEdit Fixed the formatting, fixed the detection for IE11 and Opera/Chrome, changed to browserResult from result. Now the order of the _browser keys doesn't matter. Updated jsFiddle link.2015/08/11 Edit Added new testcase for Internet Explorer 12 (EDGE), fixed a small regexp problem. Updated jsFiddle link.This will return an array, first element is the browser name, second element is the complete version number in string format.jQuery can handle this quite nice (jQuery.browser)EDIT: As Joshua wrote in his comment below, jQuery.browser property is no longer supported in jQuery since version 1.9 (read jQuery 1.9 release notes for more details).

jQuery development team recommends using more complete approach like adapting UI with Modernizr library.In pure Javascript you can do a RegExp match on the navigator.userAgent to find the Firefox version:ffVersion will be undefined if not a Firefox browser.See working example → Look at navigator.userAgent - Firefox/xxx.xxx.xxx is specified right at the end.See the demo here..http://jsfiddle.net/hw4jM/3/I wrote a version detector based on Hermann Ingjaldsson's answer, but more robust and which returns an object with name/version data in it.  It covers the major browsers but I don't bother with the plethora of mobile ones and minor ones:It can then be used like this:I have made a script in ASP code to detect browser, browser version, OS and OS version.

The reason for me to do this in ASP was because i want to store the data in a log-database.

So I had to detect the browser serverside.Here is the code:This page seems to have a pretty nice snippet which only uses the appString and appVersion property as a last resort as it claims them to be unreliable with certain browsers.

The code on the page is as follows:Adding my own implementation of Hermann's answer. I needed OS detection so that's been added. Also includes some ES6 code (because we have a transpiler) that you might need to ES5-ify.Returns: Object {browser: "Chrome", version: "50", os: "UNIX"}I want to share this code I wrote for the issue I had to resolve. It was tested in most of the major browsers and works like a charm, for me!It may seems that this code is very similar to the other answers but it modifyed so that I can use it insted of the browser object in jquery which missed for me recently, of course it is a combination from the above codes, with little improvements from my part I made:I use this to get de Name and number (int) of the version of the actual browser:This run in Chrome ; Firefox ; Safari ; Internet Explorer (>= 9) ; Opera ; EdgeFor me.I wrote this for my needs.It get info like if is a mobile device or if has a retina displaytry itFor any PWA application using angular you can put the code to check if browser is supported or not in body section of index.html -Here this has better compatibility then @kennebec snippet;

will return browser name and version (returns 72 instead of 72.0.3626.96).Tested on Safari, Chrome, Opera, Firefox, IE, Edge, UCBrowser, also on mobile.Here is the java version for somemone who whould like to do it on server side using the String returned by HttpServletRequest.getHeader("User-Agent");It is working on the 70 different browser configuration I used for testing.

What browsers support HTML5 WebSocket API?

Sareuon

[What browsers support HTML5 WebSocket API?](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)

I am going to develop an instant messaging application that runs in the browser.What browsers support the WebSocket API?

2009-08-10 08:19:53Z

I am going to develop an instant messaging application that runs in the browser.What browsers support the WebSocket API?Any browser with Flash can support WebSocket using the web-socket-js shim/polyfill.See caniuse for the current status of WebSockets support in desktop and mobile browsers.See the test reports from the WS testsuite included in Autobahn WebSockets for feature/protocol conformance tests.It depends on which language you use.In Java/Java EE:Some other Java implementations:In C#:In PHP:In Python:In C:In Node.js:Vert.x (also known as Node.x) : A node like polyglot implementation running on a Java 7 JVM and based on Netty with :Pusher.com is a Websocket cloud service accessible through a REST API.DotCloud cloud platform supports Websockets, and Java (Jetty Servlet Container), NodeJS, Python, Ruby, PHP and Perl programming languages.Openshift cloud platform supports websockets, and Java (Jboss, Spring, Tomcat & Vertx), PHP (ZendServer & CodeIgniter), Ruby (ROR), Node.js, Python (Django & Flask) plateforms.For other language implementations, see the Wikipedia article for more information.The RFC for Websockets : RFC6455

Why does instanceof return false for some literals?

Jonathan Lonowski

[Why does instanceof return false for some literals?](https://stackoverflow.com/questions/203739/why-does-instanceof-return-false-for-some-literals)

Array literals and Object literals match...Why don't all of them? Or, why don't they all not?

And, what are they an instance of, then?It's the same in FF3, IE7, Opera, and Chrome. So, at least it's consistent.Missed a few.

2008-10-15 04:44:20Z

Array literals and Object literals match...Why don't all of them? Or, why don't they all not?

And, what are they an instance of, then?It's the same in FF3, IE7, Opera, and Chrome. So, at least it's consistent.Missed a few.Primitives are a different kind of type than objects created from within Javascript. From the Mozilla API docs:I can't find any way to construct primitive types with code, perhaps it's not possible. This is probably why people use typeof "foo" === "string" instead of instanceof.An easy way to remember things like this is asking yourself "I wonder what would be sane and easy to learn"? Whatever the answer is, Javascript does the other thing.I use:Because in JavaScript strings can be literals or objects.In JavaScript everything is an object (or may at least be treated as an object), except primitives (booleans, null, numbers, strings and the value undefined (and symbol in ES6)):As you can see objects, arrays and the value null are all considered objects (null is a reference to an object which doesn't exist). Functions are distinguished because they are a special type of callable objects. However they are still objects.On the other hand the literals true, 0, "" and undefined are not objects. They are primitive values in JavaScript. However booleans, numbers and strings also have constructors Boolean, Number and String respectively which wrap their respective primitives to provide added functionality:As you can see when primitive values are wrapped within the Boolean, Number and String constructors respectively they become objects. The instanceof operator only works for objects (which is why it returns false for primitive values):As you can see both typeof and instanceof are insufficient to test whether a value is a boolean, a number or a string - typeof only works for primitive booleans, numbers and strings; and instanceof doesn't work for primitive booleans, numbers and strings.Fortunately there's a simple solution to this problem. The default implementation of toString (i.e. as it's natively defined on Object.prototype.toString) returns the internal [[Class]] property of both primitive values and objects:The internal [[Class]] property of a value is much more useful than the typeof the value. We can use Object.prototype.toString to create our own (more useful) version of the typeof operator as follows:Hope this article helped. To know more about the differences between primitives and wrapped objects read the following blog post: The Secret Life of JavaScript PrimitivesYou can use constructor property:you can use this, it will work for both case as This is defined in the ECMAScript specification Section 7.3.19 Step 3: If Type(O) is not Object, return false.In other word, if the Obj in Obj instanceof Callable is not an object, the instanceof will short-circuit to false directly.I believe I have come up with a viable solution:https://www.npmjs.com/package/typeofReturns a string-representation of instanceof (the constructors name)For me the confusion caused by So "str" istanceof String should return true because how istanceof works as below:Results of expression #1 and #2 conflict each other, so there should be one of them wrong.#1 is wrongI figure out that it caused by the __proto__ is non standard property, so use the standard one:Object.getPrototypeOfNow there's no confusion between expression #2 and #3Or you can just make your own function like so:usage:These should both return true.

How to run a single test with Mocha?

Misha Moroshko

[How to run a single test with Mocha?](https://stackoverflow.com/questions/10832031/how-to-run-a-single-test-with-mocha)

I use Mocha to test my JavaScript stuff. My test file contains 5 tests. Is that possible to run a specific test (or set of tests) rather than all the tests in the file?

2012-05-31 10:43:19Z

I use Mocha to test my JavaScript stuff. My test file contains 5 tests. Is that possible to run a specific test (or set of tests) rather than all the tests in the file?Try using mocha's --grep option:You can use any valid JavaScript regex as <pattern>.  For instance, if we have test/mytest.js:Then:To run a single test. Note that this greps across the names of all describe(name, fn) and it(name, fn) invocations.Consider using nested describe() calls for namespacing in order to make it easy to locate and select particular sets.Depending on your usage pattern, you might just like to use only. We use the TDD style; it looks like this:Only this test will run from all the files/suites.If you are using npm test (using package.json scripts) use an extra -- to pass the param through to mochae.g. npm test -- --grep "my second test"EDIT: Looks like --grep can be a little fussy (probably depending on the other arguments). You can:Modify the package.json:Or alternatively use --bail which seems to be less fussyActually, one can also run a single mocha test by filename (not just by „it()-string-grepping「) if you remove the glob pattern (e.g. ./test/**/*.spec.js) from your mocha.opts, respectively create a copy, without:Here's my mocha.single.opts (it's only different in missing the aforementioned glob line)Background: While you can override the various switches from the opts-File (starting with --) you can't override the glob. That link also has 

some explanations.Hint: if node_modules/.bin/mocha confuses you, to use the local package mocha. You can also write just mocha, if you have it installed globally.And if you want the comforts of package.json: Still: remove the **/*-ish glob from your mocha.opts, insert them here, for the all-testing, leave them away for the single testing:usage:respectively(mind the --!)Hi above solutions didn't work for me. 

The other way of running a single test isThis helps to run a test case from a single file and with specific name.eg : here 'test/api/controllers/test.js' is filepath.Just use .only before 'describe', 'it' or 'context'. I run using "$npm run test:unit", and it executes only units with .only.You can try "it.only"in this the first one only will execute     Looking into https://mochajs.org/#usage

we see that simply use will work. You can omit the '.js' at the end.Not sure why the grep method is not working for me when using npm test. This works though. I also need to specify the test folder also for some reason.npm test -- test/sometest.jsConsolidate all your tests in one test.js file & your package json add scripts as:Type command on your test directory: 

$on and $broadcast in angular

Alice Polansky

[$on and $broadcast in angular](https://stackoverflow.com/questions/19446755/on-and-broadcast-in-angular)

I have a footerController and codeScannerController with different views.When I click on a <li> in footer.html I should get this event in codeScannerController.I think it can be realised with $on and $broadcast, but I don't know how and can't find examples anywhere.

2013-10-18 09:55:48Z

I have a footerController and codeScannerController with different views.When I click on a <li> in footer.html I should get this event in codeScannerController.I think it can be realised with $on and $broadcast, but I don't know how and can't find examples anywhere.If you want to $broadcast use the $rootScope:And then to receive, use the $scope of your controller:If you want you can pass arguments when you $broadcast:And then receive them:Documentation for this inside the Scope docs.First, a short description of $on(), $broadcast() and $emit():Based on the following HTML (see full example here):The fired events will traverse the $scopes as follows:JavaScript to trigger events (again, you can see a working example here):One thing you should know is $ prefix refers to an Angular Method, $$ prefixes refers to angular methods that you should avoid using.below is an example template and its controllers, we'll explore how $broadcast/$on can help us achieve what we want.The controllers areMy question to you is how do you pass the name to the second controller when a user clicks register?  You may come up with multiple solutions but the one we're going to use is using $broadcast and $on.$broadcast vs $emitWhich should we use?  $broadcast will channel down to all the children dom elements and $emit will channel the opposite direction to all the ancestor dom elements.  The best way to avoid deciding between $emit or $broadcast is to channel from the $rootScope and use $broadcast to all its children.  Which makes our case much easier since our dom elements are siblings.Adding $rootScope and lets $broadcastNote we added $rootScope and now we're using $broadcast(broadcastName, arguments).  For broadcastName, we want to give it a unique name so we can catch that name in our secondCtrl.  I've chosen BOOM! just for fun.  The second arguments 'arguments' allows us to pass values to the listeners.Receiving our broadcastIn our second controller, we need to set up code to listen to our broadcastIt's really that simple. Live ExampleOther ways to achieve similar resultsTry to avoid using this suite of methods as it is neither efficient nor easy to maintain but it's a simple way to fix issues you might have.  You can usually do the same thing by using a service or by simplifying your controllers.  We won't discuss this in detail but I thought I'd just mention it for completeness.Lastly, keep in mind a really useful broadcast to listen to is '$destroy' again you can see the $ means it's a method or object created by the vendor codes.  Anyways $destroy is broadcasted when a controller gets destroyed, you may want to listen to this to know when your controller is removed.

Can you pass parameters to an AngularJS controller on creation?

nickponline

[Can you pass parameters to an AngularJS controller on creation?](https://stackoverflow.com/questions/14523679/can-you-pass-parameters-to-an-angularjs-controller-on-creation)

I have a controller responsible for communicating with an API to update properties of a user, name, email, etc. Each user has an 'id' which is passed from the server when the profile page is viewed. I would like to pass this value to the AngularJS controller so it knows what the API entry point is for the current user. I've tried passing the value in ng-controller. For example:and in the HTMLwhere {% id %} print the id sent from the server. but I get errors. What is the correct way to pass a value into a controller on its creation?

2013-01-25 14:21:28Z

I have a controller responsible for communicating with an API to update properties of a user, name, email, etc. Each user has an 'id' which is passed from the server when the profile page is viewed. I would like to pass this value to the AngularJS controller so it knows what the API entry point is for the current user. I've tried passing the value in ng-controller. For example:and in the HTMLwhere {% id %} print the id sent from the server. but I get errors. What is the correct way to pass a value into a controller on its creation?Notes:This answer is old. This is just a proof of concept on how the desired outcome can be achieved. However, it may not be the best solution as per some comments below. I don't have any documentation to support or reject the following approach. Please refer to some of the comments below for further discussion on this topic.Original Answer:I answered this to 

Yes you absolutely can do so using ng-init and a simple init function.Here is the example of it on plunkerHTML JavaScriptI'm very late to this and I have no idea if this is a good idea, but you can include the $attrs injectable in the controller function allowing the controller to be initialized using "arguments" provided on an element, e.g.Again, no idea if this is a good idea, but it seems to work and is another alternative.This also works.Javascript:Html:Like @akonsu and Nigel Findlater suggest, you can read the url where url is index.html#/user/:id with $routeParams.id and use it inside the controller. your app: the resource servicethe controller then, elm is accessible in the view depending on the id. The view should not dictate configIn Angular, the template should never dictate configuration, which is inherently what people desire when they want to pass arguments to controllers from a template file. This becomes a slippery slope. If config settings are hard-coded in templates (such as by a directive or controller argument attribute), you can no longer re-use that template for anything but that single use. Soon you'll want to re-use that template, but with different config and now in order to do so you'll either be pre-processing the templates to inject variables before it gets passed to angular or using massive directives to spit out giant blocks of HTML so you re-use all of the controller HTML except for the wrapper div and it's arguments. For small projects it's no big deal. For something big (what angular excels at), it gets ugly quick.The Alternative: ModulesThis type of configuration is what modules were designed to handle. In many angular tutorials people have a single module for their entire application, but really the system is designed and fully supports many small modules each which wrap small pieces of the total application. Ideally, controllers, modules etc would be declared in separate files and stitched together in specific re-usable chunks. When your application is designed this way, you get a lot of re-use in addition to easy controller arguments.The example below has 2 modules, re-using the same controller, but each with their own config settings. That config settings are passed in via dependency injection using module.value. This adheres to the angular way because we have the following: constructor dependency injection, reusable controller code, reusable controller templates (the controller div could easily be included with ng-include), easily unit-testable system without HTML, and lastly re-usable modules as the vehicle for stitching the pieces together.Here's an example:See it in action: jsFiddle.If ng-init is not for passing objects into $scope, you can always write your own directive. So here is what I got:http://jsfiddle.net/goliney/89bLj/Javasript:Html:But my approach can only modify objects, which are already defined at controller.It looks like the best solution for you is actually a directive.  This allows you to still have your controller, but define custom properties for it.Use this if you need access to variables in the wrapping scope:Use this if you don't need access to variables in the wrapping scope:I found passing variables from $routeProvider usefull.For example, you use one controller MyController for multiple screens, passing some very important variable "mySuperConstant" inside.Use that simple structure:You can do it when setting up the routes for e.g.And later use it as So here when we set up the route we sent :itemType and retrive it later from $routeParams.There is another way to pass parameters to a controller by injecting $routeParams into your controller and then using url parameters described here What's the most concise way to read query parameters in AngularJS?This question is old but I struggled for a long time trying to get an answer to this problem that would work for my needs and did not easily find it.  I believe my following solution is much better than the currently accepted one, perhaps because angular has added functionality since this question was originally posed.  Short answer, using the Module.value method allows you to pass data into a controller constructor.See my plunker hereI create a model object, then associate it with the module's controller, referencing it with the name 'model'HTML / JSThe constructor in my controller then accepts a parameter with that same identifier 'model' which it can then access.  ControllerNotes: I'm using manual initialization of bootstrapping, which allows me to initialize my model before sending it over to angular.  This plays much more nicely with existing code, as you can wait to set up your relevant data and only compile the angular subset of your app on demand when you want to.In the plunker I've added a button to alert the values of the model object that was initially defined in javascript and passed to angular, just to confirm that angular is truly referencing the model object, rather than copying it and working with a copy.  On this line:I'm passing the MyController object into the Module.controller function, rather than declaring as a function inline.  I think this allows us to far more clearly define our controller object, but Angular documentation tends to do it inline so I thought it bears clarification.I'm using the "controller as" syntax and assigning values to the "this" property of MyController, rather than using the "$scope" variable.  I believe this would work fine using $scope just as well, the controller assignment would then look something like this:and the controller constructor would have a signature like this:If for whatever reason you wanted to, you could also attach this model as a value of a second module, which you then attach as a dependency to your primary module.I believe his solution is much better than the currently accepted one becauseThe way Angular seems to work in most all other examples I've seen has the controller defining the data of the model, which never made sense to me, there is no separation between the model and the controller, that doesn't really seem like MVC to me.  This solution allows you to really have a completely separate model object which you pass into the controller.  Also of note, if you use the ng-include directive you can put all your angular html in a separate file, fully separating your model view and controller into separate modular pieces.If using angular-ui-router, then this is the correct solution: https://github.com/angular-ui/ui-router/wiki#resolveBasically, you declare a set of dependecies to "resolve" before the controller is instantiated. You may declare dependencies for each of your "states". These dependencies are then passed in the controller's "constructor".One way of doing that would be having a separate service that can be used as a 'vessel' for those arguments where they're public data members.I didn't really like any of the solutions here for my particular use case, so I figured I'd post what I did because I didn't see it here.  I simply wanted to use a controller more like a directive, within a ng-repeat loop:Now, in order to access the objParameter on creation within each DirectiveLikeController (or to get the up-to-date objParameter at ANY time), all I need to do is inject $scope and call $scope.$eval('objParameter'):The only real downside that I see is that it requires the parent controller to know that the parameter is named objParameter.No, It is not possible. I think you can use ng-init as hack http://docs.angularjs.org/api/ng.directive:ngInit.Here is a solution (based on Marcin Wyszynski's suggestion) which works where you want to pass a value into your controller but you aren't explicitly declaring the controller in your html (which ng-init seems to require) - if, for example, you are rendering your templates with ng-view and declaring each controller for the corresponding route via routeProvider.JShtmlIn this solution, CurrentUser is a service which can be injected into any controller, with the .name property then available. Two notes:This is an expansion of @Michael Tiller's excellent answer. His answer works for initializing variables from the view by injecting the $attrs object into the controller. The problem occurs if the same controller is called from $routeProvider when you navigate by routing. Then you get injector error Unknown provider : $attrsProvider because $attrs is only available for injection when the view is compiled. The solution is to pass the variable (foo) through $routeParams when initializing controller from route and by $attrs when initializing controller from view. Here's my solution.From RouteThis handles a url such as '/mypage/bar'. As you can see foo is passed by url param and we provide the $injector with a blank object for $attrs so no injector errors.From ViewNow the controller

Calling a parent window function from an iframe

Arjun Singh

[Calling a parent window function from an iframe](https://stackoverflow.com/questions/2161388/calling-a-parent-window-function-from-an-iframe)

I want to call a parent window JavaScript function from an iframe.  

2010-01-29 10:53:42Z

I want to call a parent window JavaScript function from an iframe.  See window.parentReturns a reference to the parent of the current window or subframe.If a window does not have a parent, its parent property is a reference to itself.When a window is loaded in an <iframe>, <object>, or <frame>, its parent is the window with the element embedding the window.I recently had to find out why this didn't work too.The javascript you want to call from the child iframe needs to be in the head of the parent. If it is in the body, the script is not available in the global scope.Hope this helps anyone that stumbles upon this issue again.This method safely enables cross-origin communication. And if you have access to parent page code then any parent method can be called as well as any data can be passed directly from Iframe. Here is a small example:Parent page:Iframe code:UPDATES:Security note:Always provide a specific targetOrigin, NOT *, if you know where the other window's document should be located. Failing to provide a specific target discloses the data you send to any interested malicious site (comment by ZalemCitizen).References:I have posted this as a separate answer as it is unrelated to my existing answer.This issue recently cropped up again for accessing a parent from an iframe referencing a subdomain and the existing fixes did not work.This time the answer was to modify the document.domain of the parent page and the iframe to be the same. This will fool the same origin policy checks into thinking they co-exist on exactly the same domain (subdomains are considered a different host and fail the same origin policy check).Insert the following to the <head> of the page in the iframe to match the parent domain (adjust for your doctype).Please note that this will throw an error on localhost development, so use a check like the following to avoid the error:You can use see the following.Another addition for those who need it.  Ash Clarke's solution does not work if they are using different protocols so be sure that if you are using SSL, your iframe is using SSL as well or it will break the function.  His solution did work for the domains itself though, so thanks for that.The solution given by Ash Clarke for subdomains works great, but please note that you need to include the document.domain = "mydomain.com"; in both the head of the iframe page and the head of the parent page, as stated in the link same origin policy checksparent.abc() will only work on same domain due to security purposes.  i tried this workaround and mine worked perfectly.Hope this helps. :)With Firefox and Chrome you can use :If myfunction is present both in iframe and in parent, the parent one will be called.While some of these solutions may work, none of them follow best practices. Many assign global variables and you may find yourself making calls to multiple parent variables or functions, leading to a cluttered, vulnerable namespace. To avoid this, use a module pattern. In the parent window:Then, in the iframe: This is similar to patterns described in the Inheritance chapter of Crockford's seminal text, "Javascript: The Good Parts." You can also learn more at w3's page for Javascript's best practices. https://www.w3.org/wiki/JavaScript_best_practices#Avoid_globals

How do I do string replace in JavaScript to convert ‘9.61’ to ‘9:61’?

Nisanth Kumar

[How do I do string replace in JavaScript to convert ‘9.61’ to ‘9:61’?](https://stackoverflow.com/questions/2145988/how-do-i-do-string-replace-in-javascript-to-convert-9-61-to-961)

Given the code lineand value = 9.61, I need to convert 9.61 to 9:61. How can I use the JavaScript replace function here?

2010-01-27 10:16:58Z

Given the code lineand value = 9.61, I need to convert 9.61 to 9:61. How can I use the JavaScript replace function here?Do it like this:Updated to reflect to current version of jQuery. And also there are a lot of answers here that would best fit to any same situation as this. You, as a developer, need to know which is which.To replace multiple characters at a time use some thing like this: name.replace(/&/g, "-"). Here I am replacing all & chars with -. g means "global"Note - you may need to add square brackets to avoid an error - title.replace(/[+]/g, " ")Probably the most elegant way of doing this is to do it in one step. See val().compared to:From the docs:This requires jQuery 1.4+.I love jQuery's method chaining. Simply do...A simple one liner:It can be done with the regular JavaScript function replace().You can use JavaScript functions like replace, and you can wrap the jQuery code in brackets:Or if your 9.61 is already a string:

How to get a URL parameter in Express?

user2834795

[How to get a URL parameter in Express?](https://stackoverflow.com/questions/20089582/how-to-get-a-url-parameter-in-express)

I am facing an issue on getting the value of tagid from my URL: localhost:8888/p?tagid=1234.Help me out to correct my controller code. I am not able to get the tagid value.My code is as follows:app.js:Controller/index.js:routes/index.js:

2013-11-20 07:09:12Z

I am facing an issue on getting the value of tagid from my URL: localhost:8888/p?tagid=1234.Help me out to correct my controller code. I am not able to get the tagid value.My code is as follows:app.js:Controller/index.js:routes/index.js:Express 4.xTo get a URL parameter's value, use req.paramsIf you want to get a query parameter ?tagId=5, then use req.queryExpress 3.xURL parameterQuery parameterYou can do something like req.param('tagId')If you want to grab the query parameter value in the URL, follow below code piecesIf you want to grab the URL parameter using Express param functionExpress param function to grab a specific parameter. This is considered middleware and will run before the route is called.This can be used for validations  or grabbing important information about item.An example for this would be:This will work if your route looks like this: localhost:8888/p?tagid=1234Otherwise use the following code if your route looks like this: localhost:8888/p/1234

How to hide Bootstrap modal with javascript?

jvillian

[How to hide Bootstrap modal with javascript?](https://stackoverflow.com/questions/10466129/how-to-hide-bootstrap-modal-with-javascript)

I've read the posts here, the Bootstrap site, and Googled like mad - but can't find what I'm sure is an easy answer...I have a Bootstrap modal that I open from a link_to helper like this:In my ContactsController.create action, I have code that creates Contact then passes off to create.js.erb. In create.js.erb, I have some error handling code (a mix of ruby and javascript). If everything goes well, I want to close the modal.This is where I'm having trouble. I can't seem to dismiss the modal when all goes well. I've tried $('#myModal').modal('hide'); and this has no effect. I've also tried $('#myModal').hide(); which causes the modal to dismiss but leaves the backdrop. Any guidance on how to close the modal and/or dismiss the backdrop from within create.js.erb?EditHere's the markup for myModal:

2012-05-05 21:26:19Z

I've read the posts here, the Bootstrap site, and Googled like mad - but can't find what I'm sure is an easy answer...I have a Bootstrap modal that I open from a link_to helper like this:In my ContactsController.create action, I have code that creates Contact then passes off to create.js.erb. In create.js.erb, I have some error handling code (a mix of ruby and javascript). If everything goes well, I want to close the modal.This is where I'm having trouble. I can't seem to dismiss the modal when all goes well. I've tried $('#myModal').modal('hide'); and this has no effect. I've also tried $('#myModal').hide(); which causes the modal to dismiss but leaves the backdrop. Any guidance on how to close the modal and/or dismiss the backdrop from within create.js.erb?EditHere's the markup for myModal:With the modal open in the browser window, use the browser's console to try If it works (and the modal closes) then you know that your close Javascript is not being sent from the server to the browser correctly.If it doesn't work then you need to investigate further on the client what is happening. Eg make sure that there aren't two elements with the same id. Eg does it work the first time after page load but not the second time?Browser's console: firebug for firefox, the debugging console for Chrome or Safari, etc.to close bootstrap modal you can pass 'hide' as option to modal method as followPlease take a look at working fiddle herebootstrap also provide events that you can hook into modal functionality, like if you want to fire a event when the modal has finished being hidden from the user you can use hidden.bs.modal event you can read more about modal methods and events here in DocumentationIf non of the above method work, give a id to your close button and trigger click on close button.I use Bootstrap 3.4

For me this does not work $('#myModal').modal('hide')In desperation,I did this:Maybe it's not elegant, but it worksI was experiencing with that same error and this line of code really helps me.The Best form to hide and show a modal with bootstrap it'sI found the correct solution you can use this code (Referring to Bootstrap 3), To hide the modal use: $('#modal').modal('hide'). But the reason the backdrop hung around (for me) was because I was destroying the DOM for the modal before 'hide' finished. To resolve this, I chained the hidden event with the DOM removal. In my case: this.render()I ran into what I believe was a similar issue.  The $('#myModal').modal('hide'); is likely running through that function and hits the line The issue is that the value isShown may be undefined even if the modal is displayed and the value should be true.  I've modified the bootstrap code slightly to the followingThis seemed to resolve the issue for the most part.  If the backdrop still remains you could always add a call to manually remove it after the hide call $('.modal-backdrop').remove();.  Not ideal at all but does work.I had better luck making the call after the "shown" callback occurred:This ensured the modal was done loading before the hide() call was made.What we found was that there was just a slight delay between the call to our server code and the return to the success call back.  If we wrapped the call to the server in the $("#myModal").on('hidden.bs.modal', function (e) handler and then called the $("#myModal").modal("hide"); method, the browser would hide the modal and then invoke the server side code.Again, not elegant but functional.As you can see, when myFunc is invoked, it will hide the modal and then invoke the server side code.I was experiencing the same problem, and after a bit of experimentation I found a solution. In my click handler, I needed to stop the event from bubbling up, like so:Here is the doc:

http://getbootstrap.com/javascript/#modals-methodsHere is the method:

    $('#myModal').modal('hide')If you need to open several times the modal with different content, I suggest to add (in you main js):So you will clean the content for the next opening and avoid a kind of cachingEven I have the same kind of issues. This helped me a lot$('#modal').modal('hide'); and its variants did not work for me unless I had data-dismiss="modal" as an attribute on the Cancel button. Like you, my needs were to possibly close / possibly-not close based on some additional logic so clicking a link with data-dismiss="modal" outright would not do. I ended up having a hidden button with data-dismiss="modal" that I could programmatically invoke the click handler from, soand then inside the click handlers for cancel when you need to close the modal you can haveI used this simple code:We need to take care of event bubbling. Need to add one line of codeI realize this is an old question, but I found that none of these were really what I was looking for exactly. It seems to be caused by trying to close the modal before it's finished showing.My solution was based on @schoonie23's answer but I had to change a few things.First, I declared a global variable at the top of my script:Then in my modal code:Then this: (Note the name 'shown.bs.modal' indicating that the modal has shown completely as opposed to 'show' that triggers when the show event is called. (I originally tried just 'shown' but it did not work.)Hope this saves someone the extra research some day. I spent a bit looking for a solution before I came up with this.I used this code -Hide modal with smooth effect using Fade Out.If you're using the close class in your modals, the following will work. Depending on your use case, I generally recommend filtering to only the visible modal if there are more than one modals with the close class. This is the bad practice but you can use this technique to close modal by calling close button in javascript.

This will close modal after 3 seconds.this can be done in just HTML:

Unusual shape of a textarea?

Paranoid

[Unusual shape of a textarea?](https://stackoverflow.com/questions/20728150/unusual-shape-of-a-textarea)

Usually textareas are rectangular or square, like this: But I want a custom-shaped textarea, like this, for example: How is this possible?

2013-12-22 09:53:51Z

Usually textareas are rectangular or square, like this: But I want a custom-shaped textarea, like this, for example: How is this possible?First, there are many solutions, proposed in other posts. I think this one is currently (in 2013) the one which can be compatible with the largest number of browsers, because it doesn't need any CSS3 properties. However, the method will not work on browsers which doesn't support contentdeditable, be careful.As proposed by @Getz, you can use a div with contenteditable and then shape it with some div on it. Here is an example, with two blocks which float at the upper left and the upper right of the main div:As you can see, you have to play a little with the borders if you want the same result as you requested in your post. The main div has the blue border on every side. Next, red blocks has to be sticked to hide top borders of the main div, and you need to apply border to them only on particular sides (bottom and left for the right block, bottom and right for the left).After that, you can get the content via Javascript, when the "Submit" button is triggered for example. And I think you can also handle the rest of the CSS (font-size, color, etc.) :)In the near future we can use so called css-shapes to achieve this. A div with the contenteditable attribute set to true combined with css-shapes can make a text area any kind of shape.Currently Chrome Canary already supports css-shapes. An example what is possible with css-shapes is:Here they are using a polygon shape to define the text-flow. It should be possible to create two polygons to match the shape you want for your textarea.More information about css-shapes has been written at: http://sarasoueidan.com/blog/css-shapes/Polygon created with: http://betravis.github.io/shape-tools/polygon-drawing/Resulthttp://jsfiddle.net/A8cPj/1/Maybe it's possible with Content Editable ?It's not a textarea, but if you succeed to create a div with this shape, it could work.I think it's not possible with just textarea...A little example: http://jsfiddle.net/qgfP6/5/You could work with a contenteditable div, with two corners divs:You could also do this with CSS Regions(Web Platform)[Currently supported in WebKit Nightly, Safari 6.1+ and iOS7 and already usable in chrome and opera after enabling the flag: enable-experimental-web-platform-features - caniuse, Web Platform ]So you could make that textarea shape by flowing the text through 2 regions, and edit it by adding contenteditable on the content.The result:For more info about regions - here's a good aricle: CSS3 regions: Rich page layout with HTML and CSS3A long line of text in the box will drop the cursor down past the middle edges and I can't seem to fix that.That's not possible sire! A textarea is generally a rect or square box, where you can type in.However, to make something like that you can use 2 textarea's and then give them a specified width and height. Otherwise I don't think its gonna happen!Second method would be to make an editable element. http://jsfiddle.net/afzaal_ahmad_zeeshan/at2ke/The code is: Using this, you can make any element editable! You can give dimensions to it, and it will work! You will get it just as a textarea.Reference: https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_EditableIf you combine CSS shapes with contenteditable this can be done in webkit browsers.First you have to enable the flag: enable-experimental-web-platform-featuresThen restart your webkit browser and then check this FIDDLE out !This method will work for non-standard shapes as well.So how on earth did I get that polygon shape?Go to this site and make your own custom shape!Notes about enabling the flag:

(from here)You can use Google web designer tool for creating complex shapes using HTML5-canvas and CSS.More over you will get other tools like typing tools to enter texts inside these shapes.As the output file contains much code, providing a fiddle of a sample demo created using Google Web Designer toolFIDDLE DEMO>>If, for whatever reason, you really need to support browsers that don't have contenteditable, you could probably do the same thing in JavaScript, by using events, although this is a very messy workaround.Pseudocode:

Pass Variables by Reference in Javascript

BFTrick

[Pass Variables by Reference in Javascript](https://stackoverflow.com/questions/7744611/pass-variables-by-reference-in-javascript)

How do I pass variables by reference in JavaScript? I have 3 variables that I want to perform several operations to, so I want to put them in a for loop and perform the operations to each one.pseudo code:What is the best way to do this?

2011-10-12 18:18:08Z

How do I pass variables by reference in JavaScript? I have 3 variables that I want to perform several operations to, so I want to put them in a for loop and perform the operations to each one.pseudo code:What is the best way to do this?There is no "pass by reference" available in JavaScript. You can pass an object (which is to say, you can pass-by-value a reference to an object) and then have a function modify the object contents:You can iterate over the properties of an array with a numeric index and modify each cell of the array, if you want.It's important to note that "pass-by-reference" is a very specific term. It does not mean simply that it's possible to pass a reference to a modifiable object. Instead, it means that it's possible to pass a simple variable in such a way as to allow a function to modify that value in the calling context.  So:In a language like C++, it's possible to do that because that language does (sort-of) have pass-by-reference.edit — this recently (March 2015) blew up on Reddit again over a blog post similar to mine mentioned below, though in this case about Java. It occurred to me while reading the back-and-forth in the Reddit comments that a big part of the confusion stems from the unfortunate collision involving the word "reference". The terminology "pass by reference" and "pass by value" predates the concept of having "objects" to work with in programming languages. It's really not about objects at all; it's about function parameters, and specifically how function parameters are "connected" (or not) to the calling environment. In particular, note that in a true pass-by-reference language — one that does involve objects — one would still have the ability to modify object contents, and it would look pretty much exactly like it does in JavaScript. However, one would also be able to modify the object reference in the calling environment, and that's the key thing that you can't do in JavaScript. A pass-by-reference language would pass not the reference itself, but a reference to the reference.edit — here is a blog post on the topic. (Note the comment to that post that explains that C++ doesn't really have pass-by-reference.  That is true. What C++ does have, however, is the ability to create references to plain variables, either explicitly at the point of function invocation to create a pointer, or implicitly when calling functions whose argument type signature calls for that to be done. Those are the key things JavaScript doesn't support.)CodeWorkaround to pass variable like by reference:

EDITyup, actually you can do it without access globalOr:Yet another approach to pass any (local, primitive) variables by reference is by wrapping variable with closure "on the fly" by eval. This also works with "use strict". (Note: be aware that eval is not friendly to JS optimizers, also missing quotes around variable name may cause unpredictive results)Live sample https://jsfiddle.net/t3k4403w/There's actually a pretty sollution:I've been playing around with syntax to do this sort of thing, but it requires some helpers that are a little unusual.  It starts with not using 'var' at all, but a simple 'DECLARE' helper that creates a local variable and defines a scope for it via an anonymous callback. By controlling how variables are declared, we can choose to wrap them into objects so that they can always be passed by reference, essentially. This is similar to one of the Eduardo Cuomo's answer above, but the solution below does not require using strings as variable identifiers.  Here's some minimal code to show the concept.the problem is understanding that once passing classic arguments, you are scoped into another, read-only zone.it is the same as putting the args in a global/scoped variable, but better...you can also promise stuff up to enjoy the well-known chain:

here is the whole thing, with promise-like structureor better yet..

action.setArg(["empty-array"],"some string",0x100,"last argument").call()I personally dislike the "pass by reference" functionality offered by various programming languages. Perhaps that's because I am just discovering the concepts of functional programming, but I always get goosebumps when I see functions that cause side effects (like manipulating parameters passed by reference). I personally strongly embrace the "single responsibility" principle.IMHO, a function should return just one result/value using the return keyword. Instead of modifying a parameter/argument, I would just return the modified parameter/argument value and leave any desired reassignments up to the calling code.But sometimes (hopefully very rarely), it is necessary to return two or more result values from the same function. In that case, I would opt to include all those resulting values in a single structure or object. Again, processing any reassignments should be up to the calling code.Example:Suppose passing parameters would be supported by using a special keyword like 'ref' in the argument list. My code might look something like this:Instead, I would actually prefer to do something like this:When I would need to write a function that returns multiple values, I would not use parameters passed by reference either. So I would avoid code like this:Instead, I would actually prefer to return both new values inside an object, like this:These code examples are quite simplified, but it roughly demonstrates how I personally would handle such stuff. It helps me to keep various responsibilities in the correct place.Happy coding. :)I know exactly what you mean. Same thing in Swift will be no problem.

Bottom line is use let not var.The fact that primitives are passed by value but the fact that the value of var i at the point of iteration is not copied into the anonymous function is quite surprising to say the least.Javascript can modify array items inside a function (it is passed as a reference to the object/array).Here's another example:JS not being strong type,  it allows you to resolve  problems in many different ways, as seem in this tread.However, for maintainability point of view, I would have to agree with Bart Hofland.  Function should get args to do something with and return the result.  Making them easily reusable. If you feel that variables need to be passed by reference you may be better served Building them into objects IMHO.Putting aside the pass-by-reference discussion, those still looking for a solution to the stated question could use:

How to disable all div content

juan

[How to disable all div content](https://stackoverflow.com/questions/639815/how-to-disable-all-div-content)

I was under the assumption that if I disabled a div, all content got disabled too.However, the content is grayed but I can still interact with it.Is there a way to do that? (disable a div and get all content disabled also)

2009-03-12 18:07:25Z

I was under the assumption that if I disabled a div, all content got disabled too.However, the content is grayed but I can still interact with it.Is there a way to do that? (disable a div and get all content disabled also)Many of the above answers only work on form elements. A simple way to disable any DIV including its contents is to just disable mouse interaction. For example:cssUse a framework like JQuery to do things like:Disable And Enable Input Elements In A Div Block Using jQuery should help you!As of jQuery 1.6, you should use .prop instead of .attr for disabling. I just wanted to mention this extension method for enabling and disabling elements.  I think it's a much cleaner way than adding and removing attributes directly.Then you simply do:Here is a quick comment for people who don't need a div but just a blockelement. In HTML5 <fieldset disabled="disabled"></fieldset> got the disabled attribute. Every form element in a disabled fieldset is disabled.The disabled attribute is not part of the W3C spec for DIV elements, only for form elements.The jQuery approach suggested by Martin is the only foolproof way you're going to accomplish this.similar to cletu's solution, but i got an error using that solution, this is the workaround:works fine on meYou can use this simple CSS statement to disable eventsBrowsers tested: IE 9, Chrome, Firefox and jquery-1.7.1.min.jsHTML input controls can be disabled using 'disabled' attribute as you know. Once 'disabled' attribute for an input control is set, event handlers associated with such control are not invoked.You have to simulate above behavior for HTML elements that don't support 'disabled' attribute like div, if you wish.If you have a div, and you want to support click or a key event on that div, then you have to do two things:

1) When you want to disable the div, set its disabled attribute as usual (just to comply with the convention)

2) In your div's click and/or key handlers, check if disabled attribute is set on the div. If it is, then just disregard the click or key event (e.g. just return immediately). If disabled attribute is not set, then do your div's click and/or key event logic.Above steps are browser independent as well.One way to achieve this is by adding the disabled prop to all children of the div. You can achieve this very easily:$("#myDiv") finds the div, .find("*") gets you all child nodes in all levels and .prop('disabled', true) disables each one.This way all content is disabled and you can't click them, tab to them, scroll them, etc. Also, you don't need to add any css classes.Wrap the div within a fieldset tag:I thought I'd chip in a couple of notes.This is for the searchers, The best I did is,As mentioned in comments, you are still able to access element by navigating between elements by using tab key. so I recommend this :If you wanted to keep the semantics of disabled as followsyou could add the following CSSthe benefit here is that you're not working with classes on the div that you want to work withI would use an improved version of Cletus' function: Which stores the original 'disabled' property of the element.The CSS pointer-events property alone doesn't disable child elements from scrolling, and it's not supported by IE10 and under for DIV elements (only for SVG).

http://caniuse.com/#feat=pointer-eventsTo disable the contents of a DIV on all browsers.Javascript:Css:To disable the contents of a DIV on all browsers, except IE10 and under.Javascript:Css:Below is a more comprehensive solution to masking divs enablingAlso included is hourglassOn and hourglassOff which can be used separatelyWith this you can do for example:see jsfiddleOr just use css and a "disabled" class.

Note: don't use the disabled attribute.

No need to mess with jQuery on/off.

This is much easier and works cross browser:Then you can shut it on and off when initializing your page, or toggling a buttonAnother way, in jQuery, would be to get the inner height, inner width and positioning of the containing DIV, and simply overlay another DIV, transparent, over the top the same size. This will work on all elements inside that container, instead of only the inputs.Remember though, with JS disabled, you'll still be able to use the DIVs inputs/content. The same goes with the above answers too.This css only/noscript solution adds an overlay above a fieldset (or a div or any other element), preventing interaction:If you want an invisible i.e. transparent overlay, set the background to e.g. rgba(128,128,128,0), as it won't work without a background.

The above works for IE9+. The following much simpler css will work on IE11+Chrome If you are simply trying to stop people clicking and are not horrifically worried about security - I have found an absolute placed div with a z-index of 99999 sorts it fine. You can't click or access any of the content because the div is placed over it. Might be a bit simpler and is a CSS only solution until you need to remove it.EDIT: 

Below I've used .on() method, instead use .bind() methodto remove your setting, you can use .unbind() method. Whereas the .off() method doesn't work as expected.After researching hundreds of solutions! learning about pointer-events, below is what I did.As @Kokodoko mentioned in his solution which is apt for all browsers except IE. pointer-events work in IE11 and not in the lower versions. I also noticed in IE11, pointer-events do not work on the child elements. And hence if we have something like belowwhere span -is the child element, setting pointer-events: nonewont work  To overcome this problem I wrote a function which could act as pointer-events for IE and will work in the lower versions.In JS FileIn CSS FileIn HTMLThis faked the pointer-events scenario where pointer-events doesnt work and when the above condition of child elements occur.JS Fiddle for the samelook at my selector the fieldsetUserInfo is div contains all inputs I want to disabled or Enablehope this helps you

Calculate age given the birth date in the format YYYYMMDD

Francisc

[Calculate age given the birth date in the format YYYYMMDD](https://stackoverflow.com/questions/4060004/calculate-age-given-the-birth-date-in-the-format-yyyymmdd)

How can I calculate an age in years, given a birth date of format YYYYMMDD? Is it possible using the Date() function?I am looking for a better solution than the one I am using now:

2010-10-30 18:07:39Z

How can I calculate an age in years, given a birth date of format YYYYMMDD? Is it possible using the Date() function?I am looking for a better solution than the one I am using now:I would go for readability:Disclaimer: This also has precision issues, so this cannot be completely trusted either. It can be off by a few hours, on some years, or during daylight saving (depending on timezone).Instead I would recommend using a library for this, if precision is very important. Also @Naveens post, is probably the most accurate, as it doesn't rely on the time of day.Benchmarks: http://jsperf.com/birthday-calculation/15Try this.I believe the only thing that looked crude on your code was the substr part.Fiddle: http://jsfiddle.net/codeandcloud/n33RJ/Important: This answer doesn't provide an 100% accurate answer, it is off by around 10-20 hours depending on the date. I of course couldn't resist the urge to take up the challenge and make a faster and shorter birthday calculator than the current accepted solution.

The main point for my solution, is that math is fast, so instead of using branching, and the date model javascript provides to calculate a solution we use the wonderful mathThe answer looks like this, and runs ~65% faster than naveen's plus it's much shorter:The magic number: 31557600000 is 24 * 3600 * 365.25 * 1000

Which is the length of a year, the length of a year is 365 days and 6 hours which is 0.25 day. In the end i floor the result which gives us the final age.Here is the benchmarks: http://jsperf.com/birthday-calculationTo support OP's data format you can replace +new Date(dateString); 

 with +new Date(d.substr(0, 4), d.substr(4, 2)-1, d.substr(6, 2));If you can come up with a better solution please share! :-)With momentjs:Clean one-liner solution using ES6:I am using a year of 365.25 days (0.25 because of leap years) which are 3.15576e+10 milliseconds (365.25 * 24 * 60 * 60 * 1000) respectively.Some time ago I made a function with that purpose:It takes a Date object as input, so you need to parse the 'YYYYMMDD' formatted date string:Here's my solution, just pass in a parseable date:Alternate solution, because why not:To test whether the birthday already passed or not, I define a helper function Date.prototype.getDoY, which effectively returns the day number of the year. The rest is pretty self-explanatory.I just had to write this function for myself - the accepted answer is fairly good but IMO could use some cleanup. This takes a unix timestamp for dob because that was my requirement but could be quickly adapted to use a string: Notice I've used a flat value of 31 in my measureDays function.  All the calculation cares about is that the "day-of-year" be a monotonically increasing measure of the timestamp.If using a javascript timestamp or string, obviously you'll want to remove the factor of 1000.To get the age when european date has entered:I think that could be simply like that:Works also with a timestampOne more possible solution with moment.js:I've checked the examples showed before and they didn't worked in all cases, and because of this i made a script of my own. I tested this, and it works perfectly.That's the most elegant way for me:Get the age (years, months and days) from the date of birth with javascriptFunction calcularEdad (years, months and days)Function esNumeroWorks perfect for me, guys.I know this is a very old thread but I wanted to put in this implementation that I wrote for finding the age which I believe is much more accurate. Ofcourse you could adapt this to fit in other formats of getting the parameters. Hope this helps someone looking for a better solution.I used this approach using logic instead of math.

It's precise and quick.

The parameters are the year, month and day of the person's birthday.

It returns the person's age as an integer.Adopting from naveen's and original OP's posts I ended up with a reusable method stub that accepts both strings and / or JS Date objects.I named it gregorianAge() because this calculation gives exactly how we denote age using Gregorian calendar. i.e. Not counting the end year if month and day is before the month and day of the birth year.Two more options:I've did some updated to one previous answer.I hope that helps :Dhere is a simple way of calculating age: You may use this for age restriction in your form -I am a bit too late but I found this to be the simplest way to calculate a birth date.The HTML tag:Hopefully this will help.Here's the simplest, most accurate solution I could come up with:And here is a sample that will consider Feb 29 -> Feb 28 a year.It even works with negative age!Yet another solution:With momentjs "fromNow" method, 

This allows you to work with formatted date, ie: 03/15/1968var dob = document.getElementByID("dob");

var age = moment(dob.value).fromNow(true).replace(" years", "");

//fromNow(true) => suffix "ago" is not displayed

//but we still have to get rid of "years";

As a prototype version}

Map vs Object in JavaScript

Dave

[Map vs Object in JavaScript](https://stackoverflow.com/questions/18541940/map-vs-object-in-javascript)

I just discovered chromestatus.com and, after losing several hours of my day, found this feature entry:That confused me. Regular JavaScript objects are dictionaries, so how is a Map different from a dictionary? Conceptually, they're identical (according to  What is the difference between a Map and a Dictionary?)The documentation chromestatus references doesn't help either:…still sounds like an object to me, so clearly I've missed something.Why is JavaScript gaining a (well-supported) Map object? What does it do?

2013-08-30 21:47:42Z

I just discovered chromestatus.com and, after losing several hours of my day, found this feature entry:That confused me. Regular JavaScript objects are dictionaries, so how is a Map different from a dictionary? Conceptually, they're identical (according to  What is the difference between a Map and a Dictionary?)The documentation chromestatus references doesn't help either:…still sounds like an object to me, so clearly I've missed something.Why is JavaScript gaining a (well-supported) Map object? What does it do?According to mozilla:andhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/MapThe iterability-in-order is a feature that has long been wanted by developers, in part because it ensures the same performance in all browsers. So to me that's a big one.The myMap.has(key) method will be especially handy, and also the myMap.size property.The key difference is that Objects only support string keys where as Maps support more or less any key type.If I do obj[123] = true and then Object.keys(obj) then I will get ["123"] rather than [123]. A Map would preserve the type of the key and return [123] which is great. Maps also allow you to use Objects as keys. Traditionally to do this you would have to give objects some kind of unique identifier to hash them (I don't think I've ever seen anything like getObjectId in JS as part of the standard). Maps also guarantee preservation of order so are all round better for preservation and can sometimes save you needing to do a few sorts.Between maps and objects in practice very are several pros and cons. Objects gain both advantages and disadvantages being very tightly integrated into the core of JS which sets them apart from significantly Map beyond the difference in key support.An immediate advantage is that you have syntactical support for Objects making it easy to access elements. You also have direct support for it with JSON. When used as a hash it's annoying to get an object without any properties at all. By default if you want to use Objects as a hash table they will be polluted and you will often have to call hasOwnProperty on them when accessing properties. You can see here how by default Objects are polluted and how to create hopefully unpolluted objects for use as hashes:Pollution on objects is not only something that makes code more annoying, slower, etc but can also have potential consequences for security.Objects are not pure hash tables but are trying to do more. You have headaches like hasOwnProperty, not being able to get the length easily (Object.keys(obj).length) and so on. Objects are not meant to purely be used as hash maps but as dynamic extendible Objects as well and so when you use them as pure hash tables problems arise.Comparison/List of various common operations:There are a few other options, approached, methodologies, etc with varying ups and downs (performance, terse, portable, extendable, etc). Objects are a bit strange being core to the language so you have a lot of static methods for working with them.Besides the advantage of Maps preserving key types as well as being able to support things like objects as keys they are isolated from the side effects that objects much have. A Map is a pure hash, there's no confusion about trying to be an object at the same time. Maps can also be easily extended with proxy functions. Object's currently have a Proxy class however performance and memory usage is grim, in fact creating your own proxy that looks like Map for Objects currently performs better than Proxy.A substantial disadvantage for Maps is that they are not supported with JSON directly. Parsing is possible but has several hangups:The above will introduce a serious performance hit and will also not support any string keys. JSON encoding is even more difficult and problematic (this is one of many approaches):This is not so bad if you're purely using Maps but will have problems when you are mixing types or using non-scalar values as keys (not that JSON is perfect with that kind of issue as it is, IE circular object reference). I haven't tested it but chances are that it will severely hurt performance compared to stringify.Other scripting languages often don't have such problems as they have explicit non-scalar types for Map, Object and Array. Web development is often a pain with non-scalar types where you have to deal with things like PHP merges Array/Map with Object using A/M for properties and JS merges Map/Object with Array extending M/O. Merging complex types is the devil's bane of high level scripting languages.So far these are largely issues around implementation but performance for basic operations is important as well. Performance is also complex because it depends on engine and usage. Take my tests with a grain of salt as I cannot rule out any mistake (I have to rush this). You should also run your own tests to confirm as mine examine only very specific simple scenarios to give a rough indication only. According to tests in Chrome for very large objects/maps the performance for objects is worse because of delete which is apparently somehow proportionate to the number of keys rather than O(1):Chrome clearly has a strong advantage with getting and updating but the delete performance is horrific. Maps use a tiny amount more memory in this case (overhead) but with only one Object/Map being tested with millions of keys the impact of overhead for maps is not expressed well. With memory management objects also do seem to free earlier if I am reading the profile correctly which might be one benefit in favour of objects.In FireFox for this particular benchmark it is a different story:I should immediately point out that in this particular benchmark deleting from objects in FireFox is not causing any problems, however in other benchmarks it has caused problems especially when there are many keys just as in Chrome. Maps are clearly superior in FireFox for large collections.However this is not the end of the story, what about many small objects or maps? I have done a quick benchmark of this but not an exhaustive one (setting/getting) of which performs best with a small number of keys in the above operations. This test is more about memory and initialisation.Again these figures vary but basically Object has a good lead. In some cases the lead for Objects over maps is extreme (~10 times better) but on average it was around 2-3 times better. It seems extreme performance spikes can work both ways. I only tested this in Chrome and creation to profile memory usage and overhead. I was quite surprised to see that in Chrome it appears that Maps with one key use around 30 times more memory than Objects with one key.For testing many small objects with all the above operations (4 keys):In terms of memory allocation these behaved the same in terms of freeing/GC but Map used 5 times more memory. This test used 4 keys where as in the last test I only set one key so this would explain the reduction in memory overhead. I ran this test a few times and Map/Object are more or less neck and neck overall for Chrome in terms of overall speed. In FireFox for small Objects there is a definite performance advantage over maps overall.This of course doesn't include the individual options which could vary wildly. I would not advice micro-optimising with these figures. What you can get out of this is that as a rule of thumb, consider Maps more strongly for very large key value stores and objects for small key value stores.Beyond that the best strategy with these two it to implement it and just make it work first. When profiling it is important to keep in mind that sometimes things that you wouldn't think would be slow when looking at them can be incredibly slow because of engine quirks as seen with the object key deletion case.I don't think the following points have been mentioned in the answers so far, and I thought they'd be worth mentioning.In chrome I can get 16.7 million key/value pairs with Map vs. 11.1 million with a regular object. Almost exactly 50% more pairs with a Map. They both take up about 2GB of memory before they crash, and so I think may be to do with memory limiting by chrome (Edit: Yep, try filling 2 Maps and you only get to 8.3 million pairs each before it crashes). You can test it yourself with this code (run them separately and not at the same time, obviously):This one has tripped me up before. Regular objects have toString, constructor, valueOf, hasOwnProperty, isPrototypeOf and a bunch of other pre-existing properties. This may not be a big problem for most use cases, but it has caused problems for me before.Due to the .get function call overhead and lack of internal optimisation, Map can be considerably slower than a plain old JavaScript object for some tasks.Objects can behave like dictionaries because Javascript is dynamically typed but they really aren't meant to be.The new Map() functionality is much nicer because it has normal get/set/has/delete methods, accepts any type for the keys instead of just strings, easier to use when iterating, and it doesn't have edge cases with prototypes and other properties showing up. It's also very fast and keeps getting faster as engines get better. 99% of the time you should just use a Map().However if you're only using string-based keys and need maximum read performance, then objects can be a better choice. The detail is that (almost all) javascript engines compile objects down to C++ classes in the background. These types are cached and reused by their "outline", so when you make a new object with the same exact properties the engine will reuse an existing background class. The access path for properties on these classes is very optimized and much faster than the lookup of a Map().Adding or removing a property causes the cached backing class to be re-compiled which is why using an object as a dictionary with lots of key additions and deletions is very slow, but reads and assignment of existing keys without changing the object are very fast. So if you have a write-once read-heavy workload with string keys then use an object as a specialized high-performance dictionary, but for everything else use a Map().Key differences:object:Map:source: MDNIn addition to the other answers, I've found that Maps are more unwieldy and verbose to operate with than objects.This is important, because shorter code is faster to read, more directly expressive, and better kept in the programmer's head.Another aspect: because set() returns the map, not the value, it's impossible to chain assignments.Debugging maps is also more painful. Below, you can't actually see what keys are in the map. You'd have to write code to do that.Objects can be evaluated by any IDE:Additionally to being iterable in a well-defined order, and the ability to use arbitrary values as keys (except -0), maps can be useful because of the following reasons:These two tips can help you to decide whether to use a Map or an Object:Source:

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Keyed_Collections#Object_and_Map_comparedWhen to use Maps instead of plain JavaScript Objects ?The plain JavaScript Object { key: 'value' } holds structured data. But plain JS object has its limitations : These limitations of Objects are solved by Maps but we must consider Maps as complement for Objects instead of replacement. Basically Map is just array of arrays but we must pass that array of arrays to the Map object as argument with new keyword otherwise only for array of arrays the useful properties and methods of Map aren't available. And remember key-value pairs inside the array of arrays or the Map must be separated by commas only, no colons like in plain objects.3 tips to decide whether to use a Map or an Object :Benefits of using Maps are :1. Map accepts any key type and preserves the type of key :We know that if the object's key is not a string or symbol then JS implicitly transforms it into a string. On the contrary, Map accepts any type of keys : string, number, boolean, symbol etc. and Map preserves the original key type. Here we will use number as key inside a Map and it will remain a number :Inside a Map we can even use an entire object as a key. There may be times when we want to store some object related data, without attaching this data inside the object itself so that we can work with lean objects but want to store some information about the object. In those cases we need to use Map so that we can make Object as key and related data of the object as value. But the downside of this approach is the complexity of accessing the value by key, as we have to loop through the entire array to get the desired value. We can solve this problem of not getting direct access to the value by using a proper Map. We could have done this using WeakMap, just have to write, const myMap= new WeakMap( ). The differences between Map and WeakMap are that WeakMap allows for garbage collection of keys (here objects) so it prevents memory leaks, WeakMap accepts only objects as keys, and WeakMap has reduced set of methods. 2. Map has no restriction over key names :For plain JS objects we can accidentally overwrite property inherited from the prototype and it can be dangerous. Here we will overwrite the toString( ) property of the actor object :Now let's define a fn isPlainObject( ) to determine if the supplied argument is a plain object and this fn uses toString( ) method to check it : The Map does not have any restrictions on the key names, we can use key names like toString, constructor etc. Here although actorMap object has a property named toString but the method toString( ) inherited from prototype of actorMap object works perfectly.If we have a situation where user input creates keys then we must take those keys inside a Map instead of a plain object. This is because user may choose a custom field name like, toString, constructor etc. then such key names in a plain object can potentially break the code that later uses this object. So the right solution is to bind the user interface state to a map, there is no way to break the Map :3. Map is iterable :To iterate a plain object's properties we need Object.entries( ) or Object.keys( ). The Object.entries(plainObject) returns an array of key value pairs extracted from the object, we can then destructure those keys and values and can get normal keys and values output. As Maps are iterable that's why we do not need entries( ) methods to iterate over a Map and destructuring of key, value array can be done directly on the Map as inside a Map each element lives as an array of key value pairs separated by commas. Also map.keys( ) returns an iterator over keys and map.values( ) returns an iterator over values.4. We can easily know the size of a MapWe cannot directly determine the number of properties in a plain object. We need a helper fn like, Object.keys( ) which returns an array with keys of the object then using length property we can get the number of keys or the size of the plain object. But in the case of Maps we can have direct access to the size of the Map using map.size property.This is a short way for me to remember it: KOIAccording to MozillaObject vs Map in JavaScript in short way with examples.Object- follows the same concept as that of map i.e. using key-value pair for storing data. But there are slight differences which makes map a better performer in certain situations.Map- is a data structure which helps in storing the data in the form of pairs. The pair consists of a unique key and a value mapped to the key. It helps prevent duplicity.Key differences

No visible cause for「Unexpected token ILLEGAL」

bfavaretto

[No visible cause for「Unexpected token ILLEGAL」](https://stackoverflow.com/questions/12719859/no-visible-cause-for-unexpected-token-illegal)

I'm getting this JavaScript error on my console:This is my code:It's super simple, as you can see. How could it be causing a syntax error?

2012-10-04 03:23:35Z

I'm getting this JavaScript error on my console:This is my code:It's super simple, as you can see. How could it be causing a syntax error?When code is parsed by the JavaScript interpreter, it gets broken into pieces called "tokens".  When a token cannot be classified into one of the four basic token types, it gets labelled "ILLEGAL" on most implementations, and this error is thrown. The same error is raised if, for example, you try to run a js file with a rogue @ character, a misplaced curly brace, bracket, "smart quotes", single quotes not enclosed properly (e.g. this.run('dev1)) and so on.There is an invisible character in the code, right after the semicolon. It's the Unicode U+200B Zero-width space character (a.k.a. ZWSP, HTML entity &#8203;). That character is known to cause the Unexpected token ILLEGAL JavaScript syntax error.I can't tell for sure, but my bet is on jsfiddle. If you paste code from there, it's very likely to include one or more U+200B characters. It seems the tool uses that character to control word-wrapping on long strings.It's also been reported that code pasted from the Chrome developer tools may include that character, but I was unable to reproduce that with the current version (22.0.1229.79 on OSX).The character is invisible, do how do we know it's there? You can ask your editor to show invisible characters. Most text editors have this feature. Vim, for example, displays them by default, and the ZWSP shows as <u200b>. You can also debug it online: jsbin displays the character as a red dot on its code panes (but seems to remove it after saving and reloading the page). CodePen.io also displays it as a dot, and keeps it even after saving. That character is not something bad, it can actually be quite useful. This example on Wikipedia demonstrates how it can be used to control where a long string should be wrapped to the next line. However, if you are unaware of the character's presence on your markup, it may become a problem. If you have it inside of a string (e.g., the nodeValue of a DOM element that has no visible content), you might expect such string to be empty, when in fact it's not (even after applying String.trim). ZWSP can also cause extra whitespace to be displayed on an HTML page, for example when it's found between two <div> elements (as seen on this question). This case is not even reproducible on jsfiddle, since the character is ignored there.Another potential problem: if the web page's encoding is not recognized as UTF-8, the character may actually be displayed (as â€‹ in latin1, for example).If ZWSP is present on CSS code (inline code, or an external stylesheet), styles can also not be parsed properly, so some styles don't get applied (as seen on this question).I couldn't find any mention to that specific character on the ECMAScript Specification (versions 3 and 5.1). The current version mentions similar characters (U+200C and U+200D) on Section 7.1, which says they should be treated as IdentifierParts when "outside of comments, string literals, and regular expression literals". Those characters may, for example, be part of a variable name (and var x\u200c; indeed works). Section 7.2 lists the valid White space characters (such as tab, space, no-break space, etc.), and vaguely mentions that any other Unicode「space separator」(category「Zs」) should be treated as white space. I'm probably not the best person to discuss the specs in this regard, but it seems to me that U+200B should be considered white space according to that, when in fact the implementations (at least Chrome and Firefox) appear to treat them as an unexpected token (or part of one), causing the syntax error.why you looking for this problem into your code? Even, if it's copypasted. If you can see, what exactly happening after save file in synced folder - you will see something like ***** at the end of file. It's not related to your code at all. Solution.If you are using nginx in vagrant box - add to server config: If you are using apache in vagrant box - add to server config:Source of problem: VirtualBox BugThis also could be happening if you're copying code from another document (like a PDF) into your console and trying to run it.I was trying to run some example code out of a Javascript book I'm reading and was surprised it didn't run in the console.Apparently, copying from the PDF introduces some unexpected, illegal, and invisible characters into the code.I had the same problem on my mac and found it was because the Mac was replacing the standard quotes with curly quotes which are illegal javascript characters.To fix this I had to change the settings on my mac System Preferences=>Keyboard=>Text(tab) uncheck use smart quotes and dashes (default was checked).I got this error in chrome when I had an unterminated string after the line that the error pointed to. After closing the string the error went away.Example with error:Example without error:If you are running a nginx + uwsgi setup vagrant then the main problem is the Virtual box bug with send file as mentioned in some of the answers. However to resolve it you have to disable sendfile in both nginx and uwsgi.When running OS X, the filesystem creates hidden forks of basically all your files, if they are on a hard drive that doesn't support HFS+. This can sometimes (happened to me just now) lead to your JavaScript engine tries to run the data-fork instead of the code you intend it to run. When this happens, you will also receive because the data fork of your file will contain the Unicode U+200B character. Removing the data fork file will make your script run your actual, intended code, instead of a binary data fork of your code.Here is my reason:before:which \u is a escape, I figured it out by using Codepen's analyze JS.after: and the error fixedI had this same problem and it occurred because I had hit the enter key when adding code in a text string. Because it was a long string of text I wanted to see it all without having to scroll in my text editor, however hitting enter added an invisible character to the string which was illegal. I was using Sublime Text as my editor. I changed all space areas to &nbsp, just like that and it worked without problem.I hope it helps someone.I am going to add one more answer to the pile. THis problem could happen also because of encoding. You want utf8 encoding to be on safe side. Some editors by default use utf16 which can cause issue. One quick way to test this, is, for example in VS code, simply recreate the same content but use the local editor of vscode to create the file.

Hope this helps some.

How can I clone a JavaScript object except for one key?

fox

[How can I clone a JavaScript object except for one key?](https://stackoverflow.com/questions/34698905/how-can-i-clone-a-javascript-object-except-for-one-key)

I have a flat JS object:I want to clone the object except for one element:What's the easiest way to do this (preferring to use es6/7 if possible)?

2016-01-09 21:03:29Z

I have a flat JS object:I want to clone the object except for one element:What's the easiest way to do this (preferring to use es6/7 if possible)?If you use Babel you can use the following syntax to copy property b from x into variable b and then copy rest of properties into variable y:and it will be transpiled into:or if you accept property to be undefined:To add to Ilya Palkin's answer: you can even dynamically remove keys:Demo in Babel REPLSource:For those who can't use ES6, you can use lodash or underscore.Or ramda.I use this ESNext one linerIf you need a general purpose function :You can write a simple helper function for it. Lodash has a similar function with the same name: omitAlso, note that it is faster than Object.assign and delete then: http://jsperf.com/omit-keyMaybe something like this:Is this good enough? Or can't c actually get copied?Using Object DestructuringHey seems like you run in to reference issues when you're trying to copy an object then deleting a property. Somewhere you have to assign primitive variables so javascript makes a new value.Simple trick (may be horrendous) I used was thisHere's an option for omitting dynamic keys that I believe has not been mentioned yet:removeMe is aliased as removedKey and ignored. newObj becomes { 2: 2, 3: 3, 4: 4 }. Note that the removed key does not exist, the value was not just set to undefined.Lodash omitThe solutions above using structuring do suffer from the fact that you have an used variable, which might cause complaints from ESLint if you're using that.So here are my solutions:On most platforms (except IE unless using Babel), you could also do:If you're dealing with a huge variable, you don't want to copy it and then delete it, as this would be inefficient.A simple for-loop with a hasOwnProperty check should work, and it is much more adaptable to future needs :You also can use spread operator to do thisI recently did it this very simple way:just using spread operator to separate the unwanted property:...and object.assign to take only the 'rest' part:What about this?

I never found this patter around but I was just trying to exclude one or more properties without the need of creating an extra object. This seems to do the job but there are some side effects I'm not able to see. For sure is not very readable.I accomplished it this way, as an example from my Redux reducer:In other words:How about this:

Repeat String - Javascript

brad

[Repeat String - Javascript](https://stackoverflow.com/questions/202605/repeat-string-javascript)

What is the best or most concise method for returning a string repeated an arbitrary amount of times?The following is my best shot so far:

2008-10-14 20:10:18Z

What is the best or most concise method for returning a string repeated an arbitrary amount of times?The following is my best shot so far:I'd put this function onto the String object directly.  Instead of creating an array, filling it, and joining it with an empty char, just create an array of the proper length, and join it with your desired string.  Same result, less process!I've tested the performance of all the proposed approaches.Here is the fastest variant I've got.Or as stand-alone function:It is based on artistoex algorithm.

It is really fast. And the bigger the count, the faster it goes compared with the traditional new Array(count + 1).join(string) approach.  I've only changed 2 things:UPDCreated a little performance-testing playground here for those who interested.variable count ~ 0 .. 100:  constant count = 1024:  Use it and make it even faster if you can :)This problem is a well-known / "classic" optimization issue for JavaScript, caused by the fact that JavaScript strings are "immutable" and addition by concatenation of even a single character to a string requires creation of, including memory allocation for and copying to, an entire new string.Unfortunately, the accepted answer on this page is wrong, where "wrong" means by a performance factor of 3x for simple one-character strings, and 8x-97x for short strings repeated more times, to 300x for repeating sentences, and infinitely wrong when taking the limit of the ratios of complexity of the algorithms as n goes to infinity. Also, there is another answer on this page which is almost right (based on one of the many generations and variations of the correct solution circulating throughout the Internet in the past 13 years). However, this "almost right" solution misses a key point of the correct algorithm causing a 50% performance degradation.JS Performance Results for the accepted answer, the top-performing other answer (based on a degraded version of the original algorithm in this answer), and this answer using my algorithm created 13 years ago~ October 2000 I published an algorithm for this exact problem which was widely adapted, modified, then eventually poorly understood and forgotten. To remedy this issue, in August, 2008 I published an article http://www.webreference.com/programming/javascript/jkm3/3.html explaining the algorithm and using it as an example of simple of general-purpose JavaScript optimizations. By now, Web Reference has scrubbed my contact information and even my name from this article. And once again, the algorithm has been widely adapted, modified, then poorly understood and largely forgotten.Within two months after publication of that article, this same question was posted to Stack Overflow and flew under my radar until now, when apparently the original algorithm for this problem has once again been forgotten. The best solution available on this Stack Overflow page is a modified version of my solution, possibly separated by several generations. Unfortunately, the modifications ruined the solution's optimality. In fact, by changing the structure of the loop from my original, the modified solution performs a completely unneeded extra step of exponential duplicating (thus joining the largest string used in the proper answer with itself an extra time and then discarding it).Below ensues a discussion of some JavaScript optimizations related to all of the answers to this problem and for the benefit of all.To illustrate how this technique works, we use a real-life JavaScript function which creates strings of whatever length is needed. And as we'll see, more optimizations can be added!A function like the one used here is to create padding to align columns of text, for formatting money, or for filling block data up to the boundary. A text generation function also allows variable length input for testing any other function that operates on text. This function is one of the important components of the JavaScript text processing module.As we proceed, we will be covering two more of the most important optimization techniques while developing the original code into an optimized algorithm for creating strings. The final result is an industrial-strength, high-performance function that I've used everywhere--aligning item prices and totals in JavaScript order forms, data formatting and email / text message formatting and many other uses.Original code for creating strings stringFill1()The syntax is here is clear. As you can see, we've used local function variables already, before going on to more optimizations.Be aware that there's one innocent reference to an object property s.length in the code that hurts its performance. Even worse, the use of this object property reduces the simplicity of the program by making the assumption that the reader knows about the properties of JavaScript string objects.The use of this object property destroys the generality of the computer program. The program assumes that x must be a string of length one. This limits the application of the stringFill1() function to anything except repetition of single characters. Even single characters cannot be used if they contain multiple bytes like the HTML entity &nbsp;.The worst problem caused by this unnecessary use of an object property is that the function creates an infinite loop if tested on an empty input string x. To check generality, apply a program to the smallest possible amount of input. A program which crashes when asked to exceed the amount of available memory has an excuse. A program like this one which crashes when asked to produce nothing is unacceptable. Sometimes pretty code is poisonous code.Simplicity may be an ambiguous goal of computer programming, but generally it's not. When a program lacks any reasonable level of generality, it's not valid to say, "The program is good enough as far as it goes." As you can see, using the string.length property prevents this program from working in a general setting, and in fact, the incorrect program is ready to cause a browser or system crash.Is there a way to improve the performance of this JavaScript as well as take care of these two serious problems?Of course. Just use integers.Optimized code for creating strings stringFill2()Timing code to compare stringFill1() and stringFill2()The success so far of stringFill2()stringFill1() takes 47.297 microseconds (millionths of a second) to fill a 100-byte string, and stringFill2() takes 27.68 microseconds to do the same thing. That's almost a doubling in performance by avoiding a reference to an object property.Our previous result looked good--very good, in fact. The improved function stringFill2() is much faster due to the use of our first two optimizations. Would you believe it if I told you that it can be improved to be many times faster than it is now?Yes, we can accomplish that goal. Right now we need to explain how we avoid appending short strings to long strings.The short-term behavior appears to be quite good, in comparison to our original function. Computer scientists like to analyze the "asymptotic behavior" of a function or computer program algorithm, which means to study its long-term behavior by testing it with larger inputs. Sometimes without doing further tests, one never becomes aware of ways that a computer program could be improved. To see what will happen, we're going to create a 200-byte string.The problem that shows up with stringFill2()Using our timing function, we find that the time increases to 62.54 microseconds for a 200-byte string, compared to 27.68 for a 100-byte string. It seems like the time should be doubled for doing twice as much work, but instead it's tripled or quadrupled. From programming experience, this result seems strange, because if anything, the function should be slightly faster since work is being done more efficiently (200 bytes per function call rather than 100 bytes per function call). This issue has to do with an insidious property of JavaScript strings: JavaScript strings are "immutable."Immutable means that you cannot change a string once it's created. By adding on one byte at a time, we're not using up one more byte of effort. We're actually recreating the entire string plus one more byte.In effect, to add one more byte to a 100-byte string, it takes 101 bytes worth of work. Let's briefly analyze the computational cost for creating a string of N bytes. The cost of adding the first byte is 1 unit of computational effort. The cost of adding the second byte isn't one unit but 2 units (copying the first byte to a new string object as well as adding the second byte). The third byte requires a cost of 3 units, etc.C(N) = 1 + 2 + 3 + ... + N = N(N+1)/2 = O(N^2). The symbol O(N^2) is pronounced Big O of N squared, and it means that the computational cost in the long run is proportional to the square of the string length. To create 100 characters takes 10,000 units of work, and to create 200 characters takes 40,000 units of work.This is why it took more than twice as long to create 200 characters than 100 characters. In fact, it should have taken four times as long. Our programming experience was correct in that the work is being done slightly more efficiently for longer strings, and hence it took only about three times as long. Once the overhead of the function call becomes negligible as to how long of a string we're creating, it will actually take four times as much time to create a string twice as long.(Historical note: This analysis doesn't necessarily apply to strings in source code, such as html = 'abcd\n' + 'efgh\n' + ... + 'xyz.\n', since the JavaScript source code compiler can join the strings together before making them into a JavaScript string object. Just a few years ago, the KJS implementation of JavaScript would freeze or crash when loading long strings of source code joined by plus signs. Since the computational time was O(N^2) it wasn't difficult to make Web pages which overloaded the Konqueror Web browser or Safari, which used the KJS JavaScript engine core. I first came across this issue when I was developing a markup language and JavaScript markup language parser, and then I discovered what was causing the problem when I wrote my script for JavaScript Includes.)Clearly this rapid degradation of performance is a huge problem. How can we deal with it, given that we cannot change JavaScript's way of handling strings as immutable objects? The solution is to use an algorithm which recreates the string as few times as possible.To clarify, our goal is to avoid adding short strings to long strings, since in order to add the short string, the entire long string also must be duplicated.How the algorithm works to avoid adding short strings to long stringsHere's a good way to reduce the number of times new string objects are created. Concatenate longer lengths of string together so that more than one byte at a time is added to the output.For instance, to make a string of length N = 9:Doing this required creating a string of length 1, creating a string of length 2, creating a string of length 4, creating a string of length 8, and finally, creating a string of length 9. How much cost have we saved?Old cost C(9) = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 9 = 45.New cost C(9) = 1 + 2 + 4 + 8 + 9 = 24.Note that we had to add a string of length 1 to a string of length 0, then a string of length 1 to a string of length 1, then a string of length 2 to a string of length 2, then a string of length 4 to a string of length 4, then a string of length 8 to a string of length 1, in order to obtain a string of length 9. What we're doing can be summarized as avoiding adding short strings to long strings, or in other words, trying to concatenate strings together that are of equal or nearly equal length.For the old computational cost we found a formula N(N+1)/2. Is there a formula for the new cost? Yes, but it's complicated. The important thing is that it is O(N), and so doubling the string length will approximately double the amount of work rather than quadrupling it.The code that implements this new idea is nearly as complicated as the formula for the computational cost. When you read it, remember that >>= 1 means to shift right by 1 byte. So if n = 10011 is a binary number, then n >>= 1 results in the value n = 1001.The other part of the code you might not recognize is the bitwise and operator, written &. The expression n & 1 evaluates true if the last binary digit of n is 1, and false if the last binary digit of n is 0.New highly-efficient stringFill3() functionIt looks ugly to the untrained eye, but it's performance is nothing less than lovely.Let's see just how well this function performs. After seeing the results, it's likely that you'll never forget the difference between an O(N^2) algorithm and an O(N) algorithm.stringFill1() takes 88.7 microseconds (millionths of a second) to create a 200-byte string, stringFill2() takes 62.54, and stringFill3() takes only 4.608. What made this algorithm so much better? All of the functions took advantage of using local function variables, but taking advantage of the second and third optimization techniques added a twenty-fold improvement to performance of stringFill3().Deeper analysisWhat makes this particular function blow the competition out of the water?As I've mentioned, the reason that both of these functions, stringFill1() and stringFill2(), run so slowly is that JavaScript strings are immutable. Memory cannot be reallocated to allow one more byte at a time to be appended to the string data stored by JavaScript. Every time one more byte is added to the end of the string, the entire string is regenerated from beginning to end.Thus, in order to improve the script's performance, one must precompute longer length strings by concatenating two strings together ahead of time, and then recursively building up the desired string length.For instance, to create a 16-letter byte string, first a two byte string would be precomputed. Then the two byte string would be reused to precompute a four-byte string. Then the four-byte string would be reused to precompute an eight byte string. Finally, two eight-byte strings would be reused to create the desired new string of 16 bytes. Altogether four new strings had to be created, one of length 2, one of length 4, one of length 8 and one of length 16. The total cost is 2 + 4 + 8 + 16 = 30.In the long run this efficiency can be computed by adding in reverse order and using a geometric series starting with a first term a1 = N and having a common ratio of r = 1/2. The sum of a geometric series is given by a_1 / (1-r) = 2N.This is more efficient than adding one character to create a new string of length 2, creating a new string of length 3, 4, 5, and so on, until 16. The previous algorithm used that process of adding a single byte at a time, and the total cost of it would be n (n + 1) / 2 = 16 (17) / 2 = 8 (17) = 136.Obviously, 136 is a much greater number than 30, and so the previous algorithm takes much, much more time to build up a string.To compare the two methods you can see how much faster the recursive algorithm (also called "divide and conquer") is on a string of length 123,457. On my FreeBSD computer this algorithm, implemented in the stringFill3() function, creates the string in 0.001058 seconds, while the original stringFill1() function creates the string in 0.0808 seconds. The new function is 76 times faster.The difference in performance grows as the length of the string becomes larger. In the limit as larger and larger strings are created, the original function behaves roughly like C1 (constant) times N^2, and the new function behaves like C2 (constant) times N.From our experiment we can determine the value of C1 to be C1 = 0.0808 / (123457)2 = .00000000000530126997, and the value of C2 to be C2 = 0.001058 / 123457 = .00000000856978543136. In 10 seconds, the new function could create a string containing 1,166,890,359 characters. In order to create this same string, the old function would need 7,218,384 seconds of time.This is almost three months compared to ten seconds!I'm only answering (several years late) because my original solution to this problem has been floating around the Internet for more than 10 years, and apparently is still poorly-understood by the few who do remember it. I thought that by writing an article about it here I would help:Performance Optimizations for High Speed JavaScript / Page 3Unfortunately, some of the other solutions presented here are still some of those that would take three months to produce the same amount of output that a proper solution creates in 10 seconds.I want to take the time to reproduce part of the article here as a canonical answer on Stack Overflow.Note that the best-performing algorithm here is clearly based on my algorithm and was probably inherited from someone else's 3rd or 4th generation adaptation. Unfortunately, the modifications resulted in reducing its performance. The variation of my solution presented here perhaps did not understand my confusing for (;;) expression which looks like the main infinite loop of a server written in C, and which was simply designed to allow a carefully-positioned break statement for loop control, the most compact way to avoid exponentially replicating the string one extra unnecessary time.This one is pretty efficientGood news! String.prototype.repeat is now a part of JavaScript.The method is supported by all major browsers, except Internet Explorer and Android Webview. For an up to date list, see MDN: String.prototype.repeat > Browser compatibility.MDN has a polyfill  for browsers without support.String.prototype.repeat is now ES6 Standard.Expanding P.Bailey's solution:This way you should be safe from unexpected argument types:EDIT: Credits to jerone for his elegant ++num idea!Use Array(N+1).join("string_to_repeat")this is how to repeat string several times using delimeter.Here's a 5-7% improvement on disfated's answer.Unroll the loop by stopping at count > 1 and perform an additional result += pattnern concat after the loop. This will avoid the loops final previously unused pattern += pattern without having to use an expensive if-check.

The final result would look like this:And here's disfated's fiddle forked for the unrolled version: http://jsfiddle.net/wsdfg/Tests of the various methods:Here's the JSLint safe versionThis is about as concise as it gets :If you also care about performance, this is a much better approach :If you want to compare the performance of both options, see this Fiddle and this Fiddle for benchmark tests. During my own tests, the second option was about 2 times faster in Firefox and about 4 times faster in Chrome!In modern browsers, you can now also do this :This option is not only shorter than both other options, but it's even faster than the second option.Unfortunately, it doesn't work in any version of Internet explorer. The numbers in the table specify the first browser version that fully supports the method :You can test it at JSFiddle. Benchmarked against the hacky Array.join and mine is, roughly speaking, 10 (Chrome) to 100 (Safari) to 200 (Firefox) times faster (depending on the browser).Just another repeat function:http://www.ecma-international.org/ecma-262/6.0/#sec-string.prototype.repeat

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat

http://www.w3schools.com/jsref/jsref_repeat.asp  This may be the smallest recursive one:-Fiddle: http://jsfiddle.net/3Y9v2/I just wanted to give it a bash, and made this:I can't say I gave it much thought, and it probably shows :-)And it's a lot like an answer already posted - I know this.And how about a little default behaviour too?Because, although the non recursive method will handle arbitrarily large repeats without hitting call stack limits, it's a lot slower.Partly for my own amusement, and partly to point out in the simplest way I know that there are many ways to skin a cat, and depending on the situation, it's quite possible that the apparently best method isn't ideal.A relatively fast and sophisticated method may effectively crash and burn under certain circumstances, whilst a slower, simpler method may get the job done - eventually.Some methods may be little more than exploits, and as such prone to being fixed out of existence, and other methods may work beautifully in all conditions, but are so constructed that one simply has no idea how it works."So what if I dunno how it works?!"Seriously?JavaScript suffers from one of its greatest strengths; it's highly tolerant of bad behaviour, and so flexible it'll bend over backwards to return results, when it might have been better for everyone if it'd snapped!"With great power, comes great responsibility" ;-)But more seriously and importantly, although general questions like this do lead to awesomeness in the form of clever answers that if nothing else, expand one's knowledge and horizons, in the end, the task at hand - the practical script that uses the resulting method - may require a little less, or a little more clever than is suggested.These "perfect" algorithms are fun and all, but "one size fits all" will rarely if ever be better than tailor made.This sermon was brought to you courtesy of a lack of sleep and a passing interest.

Go forth and code!Firstly, the OP's questions seems to be about conciseness - which I understand to mean "simple and easy to read", while most answers seem to be about efficiency - which is obviously not the same thing and also I think that unless you implement some very specific large data manipulating algorithms, shouldn't worry you when you come to implement basic data manipulation Javascript functions. Conciseness is much more important.Secondly, as André Laszlo noted, String.repeat is part of ECMAScript 6 and already available in several popular implementations - so the most concise implementation of String.repeat is not to implement it ;-)Lastly, if you need to support hosts that don't offer the ECMAScript 6 implementation, MDN's polyfill mentioned by André Laszlo is anything but concise. So, without further ado - here is my concise polyfill:Yes, this is a recursion. I like recursions - they are simple and if done correctly are easy to understand. Regarding efficiency, if the language supports it they can be very efficient if written correctly.From my tests, this method is ~60% faster than the Array.join approach. Although it obviously comes nowhere close disfated's implementation, it is much simpler than both. My test setup is node v0.10, using "Strict mode" (I think it enables some sort of TCO), calling repeat(1000) on a 10 character string a million times.If you think all those prototype definitions, array creations, and join operations are overkill, just use a single line code where you need it. String S repeating N times:Use Lodash for Javascript utility functionality, like repeating strings.Lodash provides nice performance and ECMAScript compatibility.I highly recommend it for UI development and it works well server side, too.Here's how to repeat the string "yo" 2 times using Lodash:Recursive solution using divide and conquer:I came here randomly and never had a reason to repeat a char in javascript before.I was impressed by artistoex's way of doing it and disfated's results. I noticed that the last string concat was unnecessary, as Dennis also pointed out.I noticed a few more things when playing with the sampling disfated put together.The results varied a fair amount often favoring the last run and similar algorithms would often jockey for position. One of the things I changed was instead of using the JSLitmus generated count as the seed for the calls; as count was generated different for the various methods, I put in an index. This made the thing much more reliable. I then looked at ensuring that varying sized strings were passed to the functions. This prevented some of the variations I saw, where some algorithms did better at the single chars or smaller strings. However the top 3 methods all did well regardless of the string size. Forked test sethttp://jsfiddle.net/schmide/fCqp3/134/I then included Dennis' fix and decided to see if I could find a way to eek out a bit more.Since javascript can't really optimize things, the best way to improve performance is to manually avoid things. If I took the first 4 trivial results out of the loop, I could avoid 2-4 string stores and write the final store directly to the result.This resulted in a 1-2% improvement on average over Dennis' fix. However, different runs and different browsers would show a fair enough variance that this extra code probably isn't worth the effort over the 2 previous algorithms.A chartEdit: I did this mostly under chrome. Firefox and IE will often favor Dennis by a couple %.Simple method:People overcomplicate this to a ridiculous extent or waste performance. Arrays? Recursion? You've got to be kidding me.Edit. I ran some simple tests to compare with the bitwise version posted by artistoex / disfated and a bunch of other people. The latter was only marginally faster, but orders of magnitude more memory-efficient. For 1000000 repeats of the word 'blah', the Node process went up to 46 megabytes with the simple concatenation algorithm (above), but only 5.5 megabytes with the logarithmic algorithm. The latter is definitely the way to go. Reposting it for the sake of clarity:Concatenating strings based on an number.Hope that helps!With ES8 you could also use padStart or padEnd for this. eg.

Check if a number has a decimal place/is a whole number

Hans

[Check if a number has a decimal place/is a whole number](https://stackoverflow.com/questions/2304052/check-if-a-number-has-a-decimal-place-is-a-whole-number)

I am looking for an easy way in JavaScript to check if a number has a decimal place in it (in order to determine if it is an integer).  For instance,

2010-02-20 22:48:10Z

I am looking for an easy way in JavaScript to check if a number has a decimal place in it (in order to determine if it is an integer).  For instance,Using modulus will work:Note that this is based on the numerical value of the number, regardless of format. It treats numerical strings containing whole numbers with a fixed decimal point the same as integers:Number.isInteger() is part of the ES6 standard and not supported in IE11.It returns false for NaN, Infinity and non-numeric arguments while x % 1 != 0 returns true.Or you could just use this to find out if it is NOT a decimal:The most common solution is to strip the integer portion of the number and compare it to zero like so:Simple, but effective!//How about byte-ing it?I always feel kind of bad for bit operators in javascript- they hardly get any exercise.Pretty cool and works for things like XX.0 too!

It works because Math.floor() chops off any decimal if it has one so if the floor is different from the original number we know it is a decimal! And no string conversions :)Number.isInteger() is probably the most concise. It returns true if it is an integer, and false if it isn't.when passed a number, parseInt() just returns the number as int:convert number string to array, split by decimal point. Then, if the array has only one value, that means no decimal in string.This way you can also know what the integer and decimal actually are. a more advanced example would be.Here's an excerpt from my guard library (inspired by Effective JavaScript by David Herman):You can multiply it by 10 and then do a "modulo" operation/divison with 10, and check if result of that two operations is zero. Result of that two operations will give you first digit after the decimal point.

If result is equal to zero then the number is a whole number.You can use the following function to check if a number has decimal places:So apparently some users want explanations.

I'll break it into pieces: (num % 1)Parenthesis mean perform those operations first. num - a variable passed in by the function. % - a modulus symbol which attempts to divide the left number by the right. If there is a remainder it returns it as a decimal. If it divides evenly it returns 0.So, sum up what we have so far., (num % 1) will return:0 when divided evenly OR #.##### if not0 == false. [ANY_NUMBER_NOT_ZERO] == true.Examples: new Boolean(0) is false new Boolean(12312.1231) is trueOther alternatives: A user could have tried to return the value of (num % 1)., which would basically achieve the same thing. Since return (0) is false and return (1.213113) is true.But I wanted to return a boolean value. So as a shortcut to force a value into a boolean I added a ! symbol before it.As many as might know., ! means NOT. But it also forces a value into a boolean. Since the ! symobol forces the value into a boolean and it inverses its value. I use !! to force the value into a boolean and invert its value back to its original boolean value.Function for check number is Decimal or whole numberYou can use the bitwise operations that do not change the value (^ 0 or ~~) to discard the decimal part, which can be used for rounding. After rounding the number, it is compared to the original value:Perhaps this works for you?It uses regex to check if there is a comma in the number, and if there is not, then it will add the comma and stripe.

Interface type check with Typescript

lhk

[Interface type check with Typescript](https://stackoverflow.com/questions/14425568/interface-type-check-with-typescript)

This question is the direct analogon to Class type check with TypeScriptI need to find out at runtime if a variable of type any implements an interface. Here's my code:If you enter this code in the typescript playground, the last line will be marked as an error, "The name A does not exist in the current scope". But that isn't true, the name does exist in the current scope. I can even change the variable declaration to var a:A={member:"foobar"}; without complaints from the editor. After browsing the web and finding the other question on SO I changed the interface to a class but then I can't use object literals to create instances.I wondered how the type A could vanish like that but a look at the generated javascript explains the problem:There is no representation of A as an interface, therefore no runtime type checks are possible.I understand that javascript as a dynamic language has no concept of interfaces. Is there any way to type check for interfaces? The typescript playground's autocompletion reveals that typescript even offers a method implements. How can I use it ?

2013-01-20 14:37:38Z

This question is the direct analogon to Class type check with TypeScriptI need to find out at runtime if a variable of type any implements an interface. Here's my code:If you enter this code in the typescript playground, the last line will be marked as an error, "The name A does not exist in the current scope". But that isn't true, the name does exist in the current scope. I can even change the variable declaration to var a:A={member:"foobar"}; without complaints from the editor. After browsing the web and finding the other question on SO I changed the interface to a class but then I can't use object literals to create instances.I wondered how the type A could vanish like that but a look at the generated javascript explains the problem:There is no representation of A as an interface, therefore no runtime type checks are possible.I understand that javascript as a dynamic language has no concept of interfaces. Is there any way to type check for interfaces? The typescript playground's autocompletion reveals that typescript even offers a method implements. How can I use it ?You can achieve what you want without the instanceof keyword as you can write custom type guards now:If you need to check a lot of members to determine whether an object matches your type, you could instead add a discriminator. The below is the most basic example, and requires you to manage your own discriminators... you'd need to get deeper into the patterns to ensure you avoid duplicate discriminators.In TypeScript 1.6, user-defined type guard will do the job.And just as Joe Yang mentioned: since TypeScript 2.0, you can even take the advantage of tagged union type.And it works with switch too.typescript 2.0 introduce tagged unionTypescript 2.0 featuresHow about User-Defined Type Guards? https://www.typescriptlang.org/docs/handbook/advanced-types.htmlIt's now possible, I just released an enhanced version of the TypeScript compiler that provides full reflection capabilities. You can instantiate classes from their metadata objects, retrieve metadata from class constructors and inspect interface/classes at runtime. You can check it out hereUsage example:In one of your typescript files, create an interface and a class that implements it like the following:now let's print some the list of implemented interfaces.compile with reflec-ts and launch it:See reflection.d.ts for Interface meta-type details.UPDATE:

You can find a full working example hereHere's another option: the module ts-interface-builder provides a build-time tool that converts a TypeScript interface into a runtime descriptor, and ts-interface-checker can check if an object satisfies it.For OP's example,

You'd first run ts-interface-builder which produces a new concise file with a descriptor, say, foo-ti.ts, which you can use like this:You can create a one-liner type-guard function:same as above where user-defined guards were used but this time with an arrow function predicateI would like to point out that TypeScript does not provide a direct mechanism for dynamically testing whether an object implements a particular interface. Instead, TypeScript code can use the JavaScript technique of checking whether an appropriate set of members are present on the object. For example:TypeGuardsBased on Fenton's answer, here's my implementation of a function to verify if a given object has the keys an interface has, both fully or partially.Depending on your use case, you may also need to check the types of each of the interface's properties. The code below doesn't do that.Example of usage:Because the type is unknown at run-time, I wrote code as follows to compare the unknown object, not against a type, but against an object of known type:Here's the (interface-agnostic) code I use for the deep compare:Below is an example of how I use it.In this example I expect the JSON contains an array of tuples, of which the second element is an instance of an interface called User (which has two optional elements).TypeScript's type-checking will ensure that my sample object is correct, then the assertTypeT function checks that the unknown (loaded from JSON) object matches the sample object.You could invoke a check like this in the implementation of a user-defined type guard.

How do I get the coordinates of a mouse click on a canvas element?

Tom

[How do I get the coordinates of a mouse click on a canvas element?](https://stackoverflow.com/questions/55677/how-do-i-get-the-coordinates-of-a-mouse-click-on-a-canvas-element)

What's the simplest way to add a click event handler to a canvas element that will return the x and y coordinates of the click (relative to the canvas element)?No legacy browser compatibility required, Safari, Opera and Firefox will do.

2008-09-11 02:07:45Z

What's the simplest way to add a click event handler to a canvas element that will return the x and y coordinates of the click (relative to the canvas element)?No legacy browser compatibility required, Safari, Opera and Firefox will do.Edit 2018: This answer is pretty old and it uses checks for old browsers that are not necessary anymore, as the clientX and clientY properties work in all current browsers. You might want to check out Patriques Answer for a simpler, more recent solution.Original Answer:

As described in an article i found back then but exists no longer:Worked perfectly fine for me.If you like simplicity but still want cross-browser functionality I found this solution worked best for me. This is a simplification of @Aldekein´s solution but without jQuery.Update (5/5/16): patriques' answer should be used instead, as it's both simpler and more reliable.Since the canvas isn't always styled relative to the entire page, the canvas.offsetLeft/Top doesn't always return what you need. It will return the number of pixels it is offset relative to its offsetParent element, which can be something like a div element containing the canvas with a position: relative style applied. To account for this you need to loop through the chain of offsetParents, beginning with the canvas element itself. This code works perfectly for me, tested in Firefox and Safari but should work for all. The last line makes things convenient for getting the mouse coordinates relative to a canvas element. All that's needed to get the useful coordinates isModern browser's now handle this for you. Chrome, IE9, and Firefox support the offsetX/Y like this, passing in the event from the click handler.Most modern browsers also support layerX/Y, however Chrome and IE use layerX/Y for  the absolute offset of the click on the page including margin, padding, etc. In Firefox, layerX/Y and offsetX/Y are equivalent, but offset didn't previously exist. So, for compatibility with slightly older browsers, you can use:According to fresh Quirksmode the clientX and clientY methods are supported in all major browsers.

So, here it goes - the good, working code that works in a scrolling div on a page with scrollbars:This also requires jQuery for $(canvas).offset().I made a full demostration that works in every browser with the full source code of the solution of this problem: Coordinates of a mouse click on Canvas in Javascript. To try the demo, copy the code and paste it into a text editor. Then save it as example.html and, finally, open the file with a browser.Here is a small modification to Ryan Artecona's answer for canvases with a variable (%) width:Be wary while doing the coordinate conversion; there are multiple non-cross-browser values returned in a click event. Using clientX and clientY alone are not sufficient if the browser window is scrolled (verified in Firefox 3.5 and Chrome 3.0). This quirks mode article provides a more correct function that can use either pageX or pageY or a combination of clientX with document.body.scrollLeft and clientY with document.body.scrollTop to calculate the click coordinate relative to the document origin. UPDATE: Additionally, offsetLeft and offsetTop are relative to the padded size of the element, not the interior size. A canvas with the padding: style applied will not report the top-left of its content region as offsetLeft. There are various solutions to this problem; the simplest one may be to clear all border, padding, etc. styles on the canvas itself and instead apply them to a box containing the canvas.I'm not sure what's the point of all these answers that loop through parent elements and do all kinds of weird stuff.The HTMLElement.getBoundingClientRect method is designed to to handle actual screen position of any element. This includes scrolling, so stuff like scrollTop is not needed:The very simplest approach was already posted here. This is correct as long as no wild CSS rules are involved.When image pixel width isn't matched by it's CSS width, you'll need to apply some ratio on pixel values:As long as the canvas has no border, it works for stretched images (jsFiddle).If the canvas has thick border, the things get little complicated. You'll literally need to subtract the border from the bounding rectangle. This can be done using .getComputedStyle. This answer describes the process.The function then grows up a little:I can't think of anything that would confuse this final function. See yourself at JsFiddle.If you don't like modifying the native prototypes, just change the function and call it with (canvas, event) (and replace any this with canvas).Here is a very nice tutorial-http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/hope this helps!Using jQuery in 2016, to get click coordinates relative to the canvas, I do:This works since both canvas offset() and jqEvent.pageX/Y are relative to the document regardless of scroll position.Note that if your canvas is scaled then these coordinates are not the same as canvas logical coordinates.  To get those, you would also do:So this is both simple but a slightly more complicated topic than it seems.First off there are usually to conflated questions hereso, answersWhether or not the element is a canvas getting element relative mouse coordinates is the same for all elements.There are 2 simple answers to the question "How to get canvas relative mouse coordinates"This answer works in Chrome, Firefox, and Safari. Unlike all the other event values offsetX and offsetY take CSS transforms into account.The biggest problem with offsetX and offsetY is as of 2019/05 they don't exist on touch events and so can't be used with iOS Safari. They do exist on Pointer Events which exist in Chrome and Firefox but not Safari although apparently Safari is working on it.Another issue is the events must be on the canvas itself. If you put them on some other element or the window you can not later choose the canvas to be your point of reference.If you don't care about CSS transforms the next simplest answer is to call canvas. getBoundingClientRect() and subtract the left from clientX and top from clientY as inThis will work as long as there are no CSS transforms. It also works with touch events and so will work with Safari iOSFor this we need to take the values we got above and convert from the size the canvas is displayed to the number of pixels in the canvas itselfwith canvas.getBoundingClientRect and clientX and clientYor with offsetX and offsetYWorking example using event.offsetX, event.offsetYWorking example using canvas.getBoundingClientRect and event.clientX and event.clientYI recommend this link-

http://miloq.blogspot.in/2011/05/coordinates-mouse-click-canvas.htmlIn Prototype, use cumulativeOffset() to do the recursive summation as mentioned by Ryan Artecona above.http://www.prototypejs.org/api/element/cumulativeoffsetYou could just do: This will give you the exact position of the mouse pointer.See demo at http://jsbin.com/ApuJOSA/1/edit?html,output .Here is some modifications of the above Ryan Artecona's solution.First, as others have said, you need a function to get the position of the canvas element. Here's a method that's a little more elegant than some of the others on this page (IMHO). You can pass it any element and get its position in the document:Now calculate the current position of the cursor relative to that:Notice that I've separated the generic findPos function from the event handling code. (As it should be. We should try to keep our functions to one task each.)The values of offsetLeft and offsetTop are relative to offsetParent, which could be some wrapper div node (or anything else, for that matter). When there is no element wrapping the canvas they're relative to the body, so there is no offset to subtract. This is why we need to determine the position of the canvas before we can do anything else.Similary, e.pageX and e.pageY give the position of the cursor relative to the document. That's why we subtract the canvas's offset from those values to arrive at the true position.An alternative for positioned elements is to directly use the values of e.layerX and e.layerY. This is less reliable than the method above for two reasons:ThreeJS r77After trying many solutions. This worked for me. Might help someone else hence posting. Got it from hereHere is a simplified solution (this doesn't work with borders/scrolling):I was creating an application having a canvas over a pdf, that involved a lot of resizes of canvas like Zooming the pdf-in and out, and in turn on every zoom-in/out of PDF I had to resize the canvas to adapt the size of the pdf,  I went through lot of answers in stackOverflow, and didn't found a perfect solution that will eventually solve the problem.I was using rxjs and angular 6, and didn't found any answer specific to the newest version.Here is the entire code snippet that would be helpful, to anyone leveraging rxjs to draw on top of canvas.And here is the snippet that fixes, mouse coordinates relative to size of the canvas, irrespective of how you zoom-in/out the canvas.Hey, this is in dojo, just cause it's what I had the code in already for a project.It should be fairly Obvious how to convert it back to non dojo vanilla JavaScript. Hope that helps. 

Benefits of prototypal inheritance over classical?

Pierreten

[Benefits of prototypal inheritance over classical?](https://stackoverflow.com/questions/2800964/benefits-of-prototypal-inheritance-over-classical)

So I finally stopped dragging my feet all these years and decided to learn JavaScript "properly".  One of the most head-scratching elements of the languages design is it's implementation of inheritance.  Having experience in Ruby, I was really happy to see closures and dynamic typing; but for the life of me can't figure out what benefits are to be had from object instances using other instances for inheritance.

2010-05-10 07:22:04Z

So I finally stopped dragging my feet all these years and decided to learn JavaScript "properly".  One of the most head-scratching elements of the languages design is it's implementation of inheritance.  Having experience in Ruby, I was really happy to see closures and dynamic typing; but for the life of me can't figure out what benefits are to be had from object instances using other instances for inheritance.I know that this answer is 3 years late but I really think the current answers do not provide enough information about how prototypal inheritance is better than classical inheritance.First let's see the most common arguments JavaScript programmers state in defence of prototypal inheritance (I'm taking these arguments from the current pool of answers):Now these arguments are all valid, but nobody has bothered explaining why. It's like telling a child that studying Maths is important. Sure it is, but the child certainly doesn't care; and you can't make a child like Maths by saying that it's important.I think the problem with prototypal inheritance is that it's explained from the perspective of JavaScript. I love JavaScript, but prototypal inheritance in JavaScript is wrong. Unlike classical inheritance there are two patterns of prototypal inheritance:Unfortunately JavaScript uses the constructor pattern of prototypal inheritance. This is because when JavaScript was created, Brendan Eich (the creator of JS) wanted it to look like Java (which has classical inheritance):This is bad because when people use constructors in JavaScript they think of constructors inheriting from other constructors. This is wrong. In prototypal inheritance objects inherit from other objects. Constructors never come into the picture. This is what confuses most people.People from languages like Java, which has classical inheritance, get even more confused because although constructors look like classes they don't behave like classes. As Douglas Crockford stated:There you have it. Straight from the horse's mouth.Prototypal inheritance is all about objects. Objects inherit properties from other objects. That's all there is to it. There are two ways of creating objects using prototypal inheritance:Note: JavaScript offers two ways to clone an object - delegation and concatenation. Henceforth I'll use the word "clone" to exclusively refer to inheritance via delegation, and the word "copy" to exclusively refer to inheritance via concatenation.Enough talk. Let's see some examples. Say I have a circle of radius 5:We can calculate the area and the circumference of the circle from its radius:Now I want to create another circle of radius 10. One way to do this would be:However JavaScript provides a better way - delegation. The Object.create function is used to do this:That's all. You just did prototypal inheritance in JavaScript. Wasn't that simple? You take an object, clone it, change whatever you need to, and hey presto - you got yourself a brand new object.Now you might ask, "How is this simple? Every time I want to create a new circle I need to clone circle and manually assign it a radius". Well the solution is to use a function to do the heavy lifting for you:In fact you can combine all of this into a single object literal as follows:If you notice in the above program the create function creates a clone of circle, assigns a new radius to it and then returns it. This is exactly what a constructor does in JavaScript:The constructor pattern in JavaScript is the prototypal pattern inverted. Instead of creating an object you create a constructor. The new keyword binds the this pointer inside the constructor to a clone of the prototype of the constructor.Sounds confusing? It's because the constructor pattern in JavaScript unnecessarily complicates things. This is what most programmers find difficult to understand.Instead of thinking of objects inheriting from other objects they think of constructors inheriting from other constructors and then become utterly confused.There's a whole bunch of other reasons why the constructor pattern in JavaScript should be avoided. You can read about them in my blog post here: Constructors vs PrototypesSo what are the benefits of prototypal inheritance over classical inheritance? Let's go through the most common arguments again, and explain why. CMS states in his answer:Let's consider what we just did. We created an object circle which had a radius of 5. Then we cloned it and gave the clone a radius of 10.Hence we only need two things to make prototypal inheritance work:In contrast classical inheritance is much more complicated. In classical inheritance you have:You get the idea. The point is that prototypal inheritance is easier to understand, easier to implement, and easier to reason about.As Steve Yegge puts it in his classical blog post "Portrait of a N00b":In the same sense classes are just meta-data. Classes aren't strictly required for inheritance. However some people (usually n00bs) find classes more comfortable to work with. It gives them a false sense of security.As I stated earlier, classes give people a false sense of security. For example you get too many NullPointerExceptions in Java even when your code is perfectly legible. I find classical inheritance usually gets in the way of programming, but maybe that's just Java. Python has an amazing classical inheritance system.Most programmers who come from a classical background argue that classical inheritance is more powerful than prototypal inheritance because it has:This claim is false. We already know that JavaScript supports private variables via closures, but what about multiple inheritance? Objects in JavaScript only have one prototype.The truth is that prototypal inheritance supports inheriting from multiple prototypes. Prototypal inheritance simply means one object inheriting from another object. There are actually two ways to implement prototypal inheritance:Yes JavaScript only allows objects to delegate to one other object. However it allows you to copy the properties of an arbitrary number of objects. For example _.extend does just this.Of course many programmers don't consider this to be true inheritance because instanceof and isPrototypeOf say otherwise. However this can be easily remedied by storing an array of prototypes on every object which inherits from a prototype via concatenation:Hence prototypal inheritance is just as powerful as classical inheritance. In fact it's much more powerful than classical inheritance because in prototypal inheritance you can hand pick which properties to copy and which properties to omit from different prototypes.In classical inheritance it's impossible (or at least very difficult) to choose which properties you want to inherit. They use virtual base classes and interfaces to solve the diamond problem.In JavaScript however you'll most likely never hear of the diamond problem because you can control exactly which properties you wish to inherit and from which prototypes.This point is a little more difficult to explain because classical inheritance doesn't necessarily lead to more redundant code. In fact inheritance, whether classical or prototypal, is used to reduce the redundancy in code.One argument could be that most programming languages with classical inheritance are statically typed and require the user to explicitly declare types (unlike Haskell which has implicit static typing). Hence this leads to more verbose code.Java is notorious for this behavior. I distinctly remember Bob Nystrom mentioning the following anecdote in his blog post about Pratt Parsers:Again, I think that's only because Java sucks so much.One valid argument is that not all languages which have classical inheritance support multiple inheritance. Again Java comes to mind. Yes Java has interfaces, but that's not sufficient. Sometimes you really need multiple inheritance.Since prototypal inheritance allows for multiple inheritance, code which requires multiple inheritance is less redundant if written using prototypal inheritance rather than in a language which has classical inheritance but no multiple inheritance.One of the most important advantages of prototypal inheritance is that you can add new properties to prototypes after they are created. This allows you to add new methods to a prototype which will be automatically made available to all the objects which delegate to that prototype.This is not possible in classical inheritance because once a class is created you can't modify it at runtime. This is probably the single biggest advantage of prototypal inheritance over classical inheritance, and it should have been at the top. However I like saving the best for the end.Prototypal inheritance matters. It's important to educate JavaScript programmers on why to abandon the constructor pattern of prototypal inheritance in favor of the prototypal pattern of prototypal inheritance.We need to start teaching JavaScript correctly and that means showing new programmers how to write code using the prototypal pattern instead of the constructor pattern.Not only will it be it easier to explain prototypal inheritance using the prototypal pattern, but it will also make better programmers.If you liked this answer then you should also read my blog post on "Why Prototypal Inheritance Matters". Trust me, you will not be disappointed.Allow me to actually answer the question inline.Prototype inheritance has the following virtues:It has the following disadvantages however:I think you can read between the lines above and come up with the corresponding advantages and disadvantages of traditional class/object schemes.  There are, of course, more in each area so I'll leave the rest up to other people answering.IMO the major benefit of prototypal inheritance is its simplicity.The prototypal nature of the language can confuse people who are classically trained, but it turns out that actually this is a really simple and powerful concept, differential inheritance.You don't need to make classification, your code is smaller, less redundant, objects inherit from other, more general objects.If you think prototypically you will soon notice that you don't need classes...Prototypal inheritance will be much more popular in the near future, the ECMAScript 5th Edition specification introduced the Object.create method, which allows you to produce a new object instance that inherits from another one in a really simple way:This new version of the standard is being implemented by all browser vendors, and I think we will start to see more pure prototypal inheritance...There is really not a lot to choose between the two methods. The basic idea to grasp is that when the JavaScript engine is given a property of an object to read, it first checks the instance and if that property is missing, it checks up the prototype chain.  Here is an example that shows the difference between prototypal and classical:PrototypalClassical with instance methods  (Inefficient because each instance stores it's own property)Efficient classicalAs you can see, since it is possible to manipulate the prototype of "classes" declared in the classical style, there is really no benefit to using prototypal inheritance. It is a subset of the classical method.Web Development: Prototypal Inheritance vs. Classical Inheritancehttp://chamnapchhorn.blogspot.com/2009/05/prototypal-inheritance-vs-classical.htmlClassical Vs prototypal inheritance - Stack OverflowClassical Vs prototypal inheritance

Removing an item from a select box

Teifion

[Removing an item from a select box](https://stackoverflow.com/questions/375508/removing-an-item-from-a-select-box)

How do I remove items from, or add items to, a select box? I'm running jQuery, should that make the task easier. Below is an example select box.

2008-12-17 18:18:58Z

How do I remove items from, or add items to, a select box? I'm running jQuery, should that make the task easier. Below is an example select box.Remove an option:Add an option:You can delete the selected item with this:This is useful if you have a list and not a dropdown.To add the item I would create second select box and:Not jQuery though.To Remove an ItemTo Add an itemTo Check for an optionTo remove a selected optionThis should do it:I find the jQuery select box manipulation plugin useful for this type of thing.You can easily remove an item by index, value, or regex.To remove all options, you can do $("#myselect").removeOption(/./);.Adding/Removing value dynamically without hard-code:// remove value from select dynamically// Add dynamic value to selectI found two pages that seem helpful, it's written for ASP.Net, but the same stuff should apply:The following links will be helpful-http://api.jquery.com/remove/http://api.jquery.com/append/Just to augment this for anyone looking, you are also able to just:andI had to remove the first option from a select, with no ID, only a class, so I used this code successfully:I just want to suggest another way to add an option.

Instead of setting the value and text as a string one can also do:This is a less error-prone solution when adding options' values and texts dynamically. If somebody need  delete ALL options inside a select, i did a litle function.I hope you find it usefulOnly have to run this is select box htmlwhen you want to totally remove and add option from select box then you can use this codesometime we need to hide and show option from select box , but not remove then you can use this codesometime need to remove selected option from select box thenwhen you need to remove all option then this codewhen need to first option or last then this code

Are loops really faster in reverse?

djdd87

[Are loops really faster in reverse?](https://stackoverflow.com/questions/1340589/are-loops-really-faster-in-reverse)

I've heard this quite a few times. Are JavaScript loops really faster when counting backward? If so, why? I've seen a few test suite examples showing that reversed loops are quicker, but I can't find any explanation as to why!I'm assuming it's because the loop no longer has to evaluate a property each time it checks to see if it's finished and it just checks against the final numeric value.I.e. 

2009-08-27 11:53:10Z

I've heard this quite a few times. Are JavaScript loops really faster when counting backward? If so, why? I've seen a few test suite examples showing that reversed loops are quicker, but I can't find any explanation as to why!I'm assuming it's because the loop no longer has to evaluate a property each time it checks to see if it's finished and it just checks against the final numeric value.I.e. It's not that i-- is faster than i++. Actually, they're both equally fast.What takes time in ascending loops is evaluating, for each i, the size of your array. In this loop:You evaluate .length only once, when you declare i, whereas for this loopyou evaluate .length each time you increment i, when you check if i <= array.length.In most cases you shouldn't even worry about this kind of optimization.This guy compared a lot of loops in javascript, in a lot of browsers.  He also has a test suite so you can run them yourself.In all cases (unless I missed one in my read) the fastest loop was:I try to give a broad picture with this answer.The following thoughts in brackets was my belief until I have just recently tested the issue:[[In terms of low level languages like C/C++, the code is compiled so that the processor has a special conditional jump command when a variable is zero (or non-zero).

Also, if you care about this much optimization, you could go ++i instead of i++, because ++i is a single processor command whereas i++ means j=i+1, i=j.]]  Really fast loops can be done by unrolling them: It can be way slower thanbut the reasons for this can be quite complicated (just to mention, there are the issues of processor command preprocessing and cache handling in the game).In terms of high level languages, like JavaScript as you asked, you can optimize things if you rely on libraries, built-in functions for looping. Let them decide how it is best done.Consequently, in JavaScript, I would suggest using something likeIt is also less error-prone and browsers have a chance to optimize your code. [REMARK: not only the browsers, but you too have a space to optimize easily, just redefine the forEach function (browser dependently) so that it uses the latest best trickery! :) @A.M.K. says in special cases it is worth rather using array.pop or array.shift. If you do that, put it behind the curtain. The utmost overkill is to add options to forEach to select the looping algorithm.]Moreover, also for low level languages, the best practice is to use some smart library function for complex, looped operations if it is possible. Those libraries can also put things (multi-threaded) behind your back and also specialized programmers keep them up-to-date.I did a bit more scrutiny and it turns out that in C/C++,

even for 5e9 = (50,000x100,000) operations, there is no difference between going up and down if the testing is done against a constant like @alestanis says. (JsPerf results are sometimes inconsistent but by and large say the same: you can't make a big difference.)

So --i happens to be rather a "posh" thing. It only makes you look like a better programmer. :)On the other hand, for-unrolling in this 5e9 situation, it has brought me down from 12 sec to 2.5 sec when I went by 10s, and to 2.1 sec when I went by 20s. It was without optimization, and optimization has brought things down to unmeasureable little time. :) (Unrolling can be done in my way above or using i++, but that does not bring things ahead in JavaScript. )All in all: keep i--/i++ and ++i/i++ differences to the job interviews, stick to array.forEach or other complex library functions when available. ;) i-- is as fast as i++This code below is as fast as yours, but uses an extra variable:The recommendation is to NOT evaluate the size of the array each time. For big arrays one can see the performance degradation.Since, you are interested in the subject, take a look at Greg Reimer's weblog post about a  JavaScript loop benchmark, What's the Fastest Way to Code a Loop in JavaScript?:You can also do a performance test on a loop by opening https://blogs.oracle.com/greimer/resource/loop-test.html (does not work if JavaScript is blocked in the browser by, for example, NoScript).EDIT:A more recent benchmark created by Milan Adamovsky can be performed in run-time here for different browsers.as the fastest preceded by:It's not the -- or ++, it is the compare operation. With -- you can use a compare with 0, while with ++ you need to compare it with the length. On the processor, compare with zero is normally available, while compare with a finite integer requires a subtraction.a++ < lengthis actually compiled asSo it takes longer on the processor when compiled.For normal code, especially in a high level language like JavaScript, there is no performance  difference in i++ and i--.The performance criteria is the use in the for loop and the compare statement.This applies to all high level languages and is mostly independent from the use of JavaScript. The explanation is the resulting assembler code at the bottom line.A performance difference may occur in a loop. The background is that on the assembler code level you can see that a compare with 0 is just one statement which doesn't need an additional register.This compare is issued on every pass of the loop and may result in a measurable performance improvement.will be evaluated to a pseudo code like this:Note that 0 is a literal, or in other words, a constant value.will be evaluated to a pseudo code like this (normal interpreter optimisation supposed):Note that end is a variable which needs a CPU register. This may invoke an additional register swapping in the code and needs a more expensive compare statement in the if statement.For a high level language, readability, which facilitates maintainability, is more important as a minor performance improvement.Normally the classic iteration from array start to end is better.The quicker iteration from array end to start results in the possibly unwanted reversed sequence.As asked in a comment: The difference of --i and i-- is in the evaluation of i before or after the decrementing.The best explanation is to try it out ;-) Here is a Bash example.I've seen the same recommendation in Sublime Text 2.Like it was already said, the main improvement is not evaluating the array's length at each iteration in the for loop. This a well-known optimization technique and particularly efficient in JavaScript when the array is part of the HTML document (doing a for for the all the li elements).For example, for (var i = 0; i < document.getElementsByTagName('li').length; i++) is much slower than for (var i = 0, len = document.getElementsByTagName('li').length; i < len; i++)From where I'm standing, the main improvement in the form in your question is the fact that it doesn't declare an extra variable (len in my example)But if you ask me, the whole point is not about the i++ vs i-- optimization, but about not having to evaluate the length of the array at each iteration (you can see a benchmark test on jsperf).I don't think that it makes sense to say that i-- is faster that i++ in JavaScript.First of all, it totally depends on JavaScript engine implementation. Secondly, provided that simplest constructs JIT'ed and translated to native instructions, then i++ vs i-- will totally depend on the CPU that executes it. That is, on ARMs (mobile phones) it's faster to go down to 0 since decrement and compare to zero are executed in a single instruction.Probably, you thought that one was waster than the other because suggested way isbut suggested way is not because one faster then the other, but simply because if you writethen on every iteration array.length had to be evaluated (smarter JavaScript engine perhaps could figure out that loop won't change length of the array). Even though it looks like a simple statement, it's actually some function that gets called under the hood by the JavaScript engine.The other reason, why i-- could be considered "faster" is because JavaScript engine needs to allocate only one internal variable to control the loop (variable to the var i). If you compared to array.length or to some other variable then there had to be more than one internal variable to control the loop, and the number of internal variables are limited asset of a JavaScript engine. The less variables are used in a loop the more chance JIT has for optimization. That's why i-- could be considered faster...Since none of the other answers seem to answer your specific question (more than half of them show C examples and discuss lower-level languages, your question is for JavaScript) I decided to write my own. So, here you go:Simple answer: i-- is generally faster because it doesn't have to run a comparison to 0 each time it runs, test results on various methods are below:Test results: As "proven" by this jsPerf, arr.pop() is actually the fastest loop by far. But, focusing on --i, i--, i++ and ++i as you asked in your question, here are jsPerf (they are from multiple jsPerf's, please see sources below) results summarized:--i and i-- are the same in Firefox while i-- is faster in Chrome.In Chrome a basic for loop (for (var i = 0; i < arr.length; i++)) is faster than i-- and --i while in Firefox it's slower.In Both Chrome and Firefox a cached arr.length is significantly faster with Chrome ahead by about 170,000 ops/sec.Without a significant difference, ++i is faster than i++ in most browsers, AFAIK, it's never the other way around in any browser.Shorter summary: arr.pop() is the fastest loop by far; for the specifically mentioned loops, i-- is the fastest loop.Sources: http://jsperf.com/fastest-array-loops-in-javascript/15, http://jsperf.com/ipp-vs-ppi-2I hope this answers your question.It depends on placement of your array in memory and the hit ratio of memory pages while you are accessing that array. In some cases accessing array members in column order is faster than row order because of the increase in hit ratio.The last time I bothered about it was when writing 6502 assembly (8-bit, yeah!). The big gain is that most arithmetic operations (especially decrements) updated a set of flags, one of them was Z, the 'reached zero' indicator.So, at the end of the loop you just did two instructions: DEC (decrement) and JNZ (jump if not zero), no comparison needed!It can be explained by JavaScript (and all languages) eventually being turned into opcodes to run on the CPU.  CPUs always have a single instruction for comparing against zero, which is damn fast.As an aside, if you can guarantee count is always >= 0, you could simplify to:This is not dependent on the -- or ++ sign, but it depends on conditions you apply in the loop.For example: Your loop is faster if the variable has a static value than if your loop check conditions every time, like the length of an array or other conditions.But don't worry about this optimization, because this time its effect is measured in nanoseconds.for(var i = array.length; i--; ) is not much faster. But when you replace array.length with super_puper_function(), that may be significantly faster (since it's called in every iteration). That's the difference.If you are going to change it in 2014, you don't need to think about optimization. If you are going to change it with "Search & Replace", you don't need to think about optimization. If you have no time, you don't need to think about optimization. But now, you've got time to think about it.P.S.: i-- is not faster than i++.To cut it short: There is absolutely no difference in doing this in JavaScript.First of all, you can test it yourself:Not only can you test and run any script in any JavaScript library, but you also have access to the whole bunch of previously written scripts, as well as the abilty to see differences between execution time in different browsers on different platforms.So as far as you can see, there is no difference between performance in any environment.If you want to improve performance of your script, things you can try to do:But you have to understand that the improvement you can gain will be so insignificant, that mostly you should not even care about it.A long, long time ago there was a common machine instruction, DSZ (Decrement and Skip on Zero). People who programmed in assembly language used this instruction to implement loops in order to save a register. Now this ancient facts are obsolete, and I am pretty sure you will not get any performance improvement in any language using this pseudo improvement.I think the only way such knowledge can propagate in our time is when you read another's person code. See such a construction and ask why was it implemented and here the answer: "it improves performance because it compares to zero". You became bewildered of higher knowledge of your colleague and think to use it to be much smarter :-) I made a comparison on jsbench.As alestani pointed out, one thing that takes time in ascending loops, is to evaluate, for each iteration, the size of your array. In this loop:you evaluate .length each time you increment i. In this one:you evaluate .length only once, when you declare i. In this one:the comparison is implicit, it happens just before decrementing i, and the code is very readable. However, what can make a terrific difference, is what you put inside the loop. Loop with call to function (defined elsewhere):Loop with inlined code:If you can inline your code, instead of calling a function, without sacrificing legibility, you can have a loop an order of magnitude faster!Note: as browser are becoming good at inlining simple functions, it really depends on how complex your code is. So, profile before optimizing, becauseBut remember: The way you're doing it now isn't faster (apart from it being an indefinite loop, I guess you meant to do i--.If you want to make it faster do:of course you wouldn't notice it on such a small loop. The reason it's faster is because you're decrementing i while checking that it's "true" (it evaluates to "false" when it reaches 0)Sometimes making some very minor changes to the way that we write our code can make a big difference to how quickly our code actually runs. One area where a minor code change can make a big difference to execution times is where we have a for loop that is processing an array. Where the array is of elements on the web page (such as radio buttons) the change has the biggest effect but it is still worth applying this change even where the array is internal to the Javascript code.The conventional way of coding a for loop to process an array lis like this:The problem with this is that evaluating the length of the array using myArray.length takes time and the way that we have coded the loop means that this evaluation has to be performed every time around the loop. If the array contains 1000 elements then the length of the array will be evaluated 1001 times. If we were looking at radio buttons and had myForm.myButtons.length then it will take even longer to evaluate since the appropriate group of buttons within the specified form must first be located before the length can be evaluated each time around the loop.Obviously we don't expect the length of the array to change while we are processing it so all of these recalculations of the length are just adding unnecessarily to the processing time. (Of course if you have code inside the loop that adds or removes array entries then the array size can change between iterations and so we can't change the code that tests for it)What we can do to correct this for a loop where the size is fixed is to evaluate the length once at the start of the loop and save it in a variable. We can then test the variable to decide when to terminate the loop. This is much faster than evaluating the array length each time particularly when the array contains more than just a few entries or is part of the web page.The code to do this is:So now we only evaluate the size of the array once and test our loop counter against the variable that holds that value each time around the loop. This extra variable can be accessed much faster than evaluating the size of the array and so our code will run much faster than before. We just have one extra variable in our script.Often it doesn't matter what order we process the array in as long as all of the entries in the array get processed. Where this is the case we can make our code slightly faster by doing away with the extra variable that we just added and processing the array in reverse order.The final code that processes our array in the most efficient way possible is:This code still only evaluates the size of the array once at the start but instead of comparing the loop counter with a variable we compare it with a constant. Since a constant is even more effective to access than a variable and since we have one fewer assignment statement than before our third version of the code is now slightly more efficient than the second version and vastly more efficient than the first.++ vs. -- does not matter because JavaScript is an interpreted language, not a compiled language. Each instruction translates to more than one machine language and you should not care about the gory details.People who are talking about using -- (or ++) to make efficient use of assembly instructions are wrong. These instruction apply to integer arithmetic and there are no integers in JavaScript, just numbers.You should write readable code.In many cases, this has essentially nothing to do with the fact that processors can compare to zero faster than other comparisons.This is because only a few Javascript engines (the ones in the JIT list) actually generate machine language code.Most Javascript engines build an internal representation of the source code which they then interpret (to get an idea of what this is like, have a look near the bottom of this page on Firefox's SpiderMonkey). Generally if a piece of code does practically the same thing but leads to a simpler internal representation, it will run faster.Bear in mind that with simple tasks like adding/subtracting one from a variable, or comparing a variable to something, the overhead of the interpreter moving from one internal "instruction" to the next is quite high, so the less "instructions" that are used internally by the JS engine, the better.Well, I don't know about JavaScript, it should really be just a matter of re-evaluation array length and maybe something to do with the associative arrays (if you only decrement, it is unlikely new entries would need to be allocated - if the array is dense, that is. someone may optimize for that).In low-level assembly, there is a looping instruction, called DJNZ (decrement and jump if non-zero). So the decrement and jump is all in one instruction, making it possibly ever-so-slightly faster than INC and JL / JB (increment, jump if less than / jump if below). Also, comparing against zero is simpler than comparing against another number. But all that is really marginal and also depends on target architecture (could make difference e.g. on Arm in a smartphone).I wouldn't expect this low-level differences to have so great impact on interpreted languages, I just haven't seen DJNZ among the responses so I thought I would share an interesting thought.It used to be said that --i was faster (in C++) because there is only one result, the decremented value. i-- needs to store the decremented value back to i and also retain the original value as the result (j = i--;). In most compilers this used up two registers rather than one which could cause another variable to have to be written to memory rather than retained as a register variable.I agree with those others that have said it makes no difference these days.In very simple words"i-- and i++. Actually, they're both takes the same time".but in this case when you have incremental operation.. processor evaluate the .length every time variable is incremented by 1 and in case of decrement.. particularly in this case, it will evaluate .length only once till we get 0.     First, i++ and i-- take exactly the same time on any programming language, including JavaScript.The following code take much different time.Fast:Slow:Therefore the following code take different time too.Fast:Slow:P.S. Slow is slow only for a few languages (JavaScript engines) because of compiler's optimization. The best way is to use '<' instead '<=' (or '=') and '--i' instead 'i--'. Not a lot of time is consumed by i-- or i++. If you go deep inside the CPU architecture the ++ is more speedy than the --, since the -- operation will do the 2's complement, but it happend inside the hardware so this will make it speedy and no major difference between the ++ and -- also these operations are considered of the least time consumed in the CPU.  The for loop runs like this:So,  will calculate the array length only once at the start and this is not a lot of time, butwill calculate the length at each loop, so it will consume a lot of time.The best approach to answering this sort of question is to actually try it. Set up a loop that counts a million iterations or whatever, and do it both ways. Time both loops, and compare the results.The answer will probably depend on which browser you are using. Some will have different results than others.Love it,  lots of marks up but no answer :DSimply put a comparison against zero is always the fastest comparisonSo (a==0) is actually quicker at returning True than (a==5)It's small and insignificant and with 100 million rows in a collection it's measurable.i.e on a loop up you might be saying   where i <= array.length and be incrementing ion a down loop you might be saying where i >= 0 and be decrementing i instead.The comparison is quicker. Not the 'direction' of the loop.HELP OTHERS AVOID A HEADACHE --- VOTE THIS UP!!!The most popular answer on this page does not work for Firefox 14 and does not pass the jsLinter.   "while" loops need a comparison operator, not an assignment.  It does work on chrome, safari, and even ie. But dies in firefox.THIS IS BROKEN!THIS WILL WORK! (works on firefox, passes the jsLinter)This is just a guess, but maybe it's because it's easier for the processor to compare something with 0 ( i >= 0 ) instead of with another value ( i < Things.length).

window.location.href and window.open () methods in JavaScript

masif

[window.location.href and window.open () methods in JavaScript](https://stackoverflow.com/questions/7077770/window-location-href-and-window-open-methods-in-javascript)

What is the difference between window.location.href and window.open () methods in JavaScript?

2011-08-16 11:51:00Z

What is the difference between window.location.href and window.open () methods in JavaScript?window.location.href is not a method, it's a property that will tell you the current URL location of the browser. Changing the value of the property will redirect the page.window.open() is a method that you can pass a URL to that you want to open in a new window. For example:window.location.href example:window.open() example:window.open() can be passed additional parameters. See: window.open tutorialNote also that window.open() is a function on the window object itself whereas window.location is an object that exposes a variety of other methods and properties. window.open is a method; you can open new window, and can customize it.

window.location.href is just a property of the current window. There are already answers which describes about window.location.href property and window.open() method.I will go by Objective use:Use window.location.href. Set href property to the href of another page.Use window.open(). Pass parameters as per your goal.Use window.location.href. Get value of window.location.href property. You can also get specific protocol, hostname, hashstring from window.location object. See Location Object for more information. window.open () will open a new window, whereas window.location.href will open the new URL in your current window.The window.open will open url in new browser TabThe window.location.href will open url in current Tab (instead you can use location)Here is example fiddle (in SO snippets window.open doesn't work)

how to access iFrame parent page using jquery?

Amr Elgarhy

[how to access iFrame parent page using jquery?](https://stackoverflow.com/questions/726816/how-to-access-iframe-parent-page-using-jquery)

I have an iframe and in order to access parent element I implemented following code:How to get the same result using jquery?

UPDATE: Or how to access iFrame parent page using jquery?

2009-04-07 17:35:18Z

I have an iframe and in order to access parent element I implemented following code:How to get the same result using jquery?

UPDATE: Or how to access iFrame parent page using jquery?To find in the parent of the iFrame use:The second parameter for the $() wrapper is the context in which to search. This defaults to document.window.parent.document.jQuery is a library on top of JavaScript, not a complete replacement for it. You don't have to replace every last JavaScript expression with something involving $.If you need to find the jQuery instance in the parent document (e.g., to call an utility function provided by a plug-in) use one of these syntaxes:Example:jQuery gets attached to the window object and that's what window.parent is.You can access elements of parent window from within an iframe by using window.parent like this:Which is the same as: And if you have more than one nested iframes and you want to access the topmost iframe, then you can use window.top like this:Which is the same as: in parent window put :and in iframe src file put :yeah it works for me as well.Note : we need to use window.parent.documentIt's working for me with little twist. 

In my case I have to populate value from POPUP JS to PARENT WINDOW form.So I have used $('#ee_id',window.opener.document).val(eeID);Excellent!!!Might be a little late to the game here, but I just discovered this fantastic jQuery plugin https://github.com/mkdynamic/jquery-popupwindow. It basically uses an onUnload callback event, so it basically listens out for the closing of the child window, and will perform any necessary stuff at that point. SO there's really no need to write any JS in the child window to pass back to the parent.There are multiple ways to do these.I) Get main parent directly.for exa. i want to replace my child page to iframe thenhere top.location gets parent directly.II) get parent one by one,here if you have more then one iframe, then specify active or visible one.you also can do like these for getting further parents,III) get parent by Identifier.

「elseif」syntax in JavaScript

Hari Gillala

[「elseif」syntax in JavaScript](https://stackoverflow.com/questions/4005614/elseif-syntax-in-javascript)

Is this correct?

2010-10-23 19:06:15Z

Is this correct?JavaScript's elseif is in the format "else if", e.g.:Just add a space:You could use this syntax which is functionally equivalent:This works because each condition is fully evaluated before comparison with the switch value, so the first one that evaluates to true will match and its branch will execute. Subsequent branches will not execute, provided you remember to use break.Note that strict comparison is used, so a branch whose condition is merely "truthy" will not be executed. You can cast a truthy value to true with double negation: !!condition.Actually, technically when indented properly, it would be: There is no else if, strictly speaking. (Update: Of course, as pointed out, the above is not considered good style.)Easy, use spaceConditional statements are used to perform different actions based on different conditions.Use if to specify a block of code to be executed, if a specified condition is trueUse else to specify a block of code to be executed, if the same condition is falseUse else if to specify a new condition to test, if the first condition is falseYou are missing a space between else and if It should be else if instead of elseif

How can I check whether a radio button is selected with JavaScript?

noob

[How can I check whether a radio button is selected with JavaScript?](https://stackoverflow.com/questions/1423777/how-can-i-check-whether-a-radio-button-is-selected-with-javascript)

I have two radio buttons within an HTML form. A dialog box appears when one of the fields is null.  How can I check whether a radio button is selected?

2009-09-14 20:35:10Z

I have two radio buttons within an HTML form. A dialog box appears when one of the fields is null.  How can I check whether a radio button is selected?Let's pretend you have HTML like thisFor client-side validation, here's some Javascript to check which one is selected:The above could be made more efficient depending on the exact nature of your markup but that should be enough to get you started.If you're just looking to see if any radio button is selected anywhere on the page, PrototypeJS makes it very easy.Here's a function that will return true if at least one radio button is selected somewhere on the page.  Again, this might need to be tweaked depending on your specific HTML.For server-side validation (remember, you can't depend entirely on Javascript for validation!), it would depend on your language of choice, but you'd but checking the gender value of the request string.With jQuery, it'd be something likeLet me break that down into pieces to cover it more clearly.

jQuery processes things from left to right.If you want to avoid this altogether, mark one of the radio buttons as checked (checked="checked") in the HTML code, which would guarantee that one radio button is always selected.A vanilla JavaScript wayJust trying to improve on Russ Cam's solution with some CSS selector sugar thrown in with the vanilla JavaScript.No real need for jQuery here, querySelectorAll is widely supported enough now.Edit: fixed a bug with the css selector, I've included the quotes, although you can omit them, in some cases you can't so it's better to leave them in.HTML CodeJavascript Code:

You can use this simple script.

You may have multiple radio buttons with same names and different values.The scripts in this page helped me come up with the script below, which I think is more complete and universal. Basically it will validate any number of radio buttons in a form, meaning that it will make sure that a radio option has been selected for each one of the different radio groups within the form. e.g in the test form below: The RadioValidator script will make sure that an answer has been given for both 'test1' and 'test2' before it submits. You can have as many radio groups in the form, and it will ignore any other form elements. All missing radio answers will show inside a single alert popup. Here it goes, I hope it helps people. Any bug fixings or helpful modifications welcome :)Note this behavior wit jQuery when getting radio input values:So $('input[name="myRadio"]').val() does not return the checked value of the radio input, as you might expect -- it returns the first radio button's value.this is a utility function I've created to solve this problemThis would be valid for radio buttons sharing the same name, no JQuery needed.     If we are talking about checkboxes and we want a list with the checkboxes checked sharing a name:With mootools (http://mootools.net/docs/core/Element/Element)html:js:There is very sophisticated way you can validate whether any of the radio buttons are checked with ECMA6 and method .some().Html:And javascript:isAnyRadioButtonChecked will be true if some of the radio buttons are checked and false if neither of them are checked.http://www.somacon.com/p143.php/With JQuery, another way to check the current status of the radio buttons is to get the attribute 'checked'.For Example:In this case you can check the buttons using:This code will alert the selected radio button when the form is submitted. It used jQuery to get the selected value.just a lil bit modification to Mark Biek ;HTML CODE and Javascript code to check if radio button is selectedHere is the solution which is expanded upon to not go ahead with submission and send an alert if the radio buttons are not checked. Of course this would mean you have to have them unchecked to begin with!Just remember to set the id ('radio1','radio2' or whatever you called it) in the form for each of the radio buttons or the script will not work.An example:The formThe scriptThe fiddle: http://jsfiddle.net/PNpUS/I just want to ensure something gets selected (using jQuery):If you want vanilla JavaScript, don't want to clutter your markup by adding IDs on each radio button, and only care about modern browsers, the following functional approach is a little more tasteful to me than a for loop:If neither is checked, it will return undefined (though you could change the line above to return something else, e.g., to get false returned, you could change the relevant line above to: }).pop() || {value:false}).value;).There is also the forward-looking polyfill approach since the RadioNodeList interface should make it easy to just use a value property on the list of form child radio elements (found in the above code as formElement[radioName]), but that has its own problems: How to polyfill RadioNodeList?This is also working, avoiding to call for an element id but calling it using as an array element.The following code is based on the fact that an array, named as the radiobuttons group, is composed by radiobuttons elements in the same order as they where declared in the html document:HTML:JAVAScript:Give radio buttons, same name but different IDs.

Bundler not including .min files

Fatal

[Bundler not including .min files](https://stackoverflow.com/questions/11980458/bundler-not-including-min-files)

I have a weird issue with the mvc4 bundler not including files with extension .min.jsIn my BundleConfig class, I declareIn my view, I declareAnd when it renders, it only rendersIf I rename the jquery.tmpl.min.js to jquery.tmpl.js (and update the path in the bundle accordingly), both scripts are rendered correctly.Is there some config setting that is causing it to ignore '.min.js' files?

2012-08-16 03:46:48Z

I have a weird issue with the mvc4 bundler not including files with extension .min.jsIn my BundleConfig class, I declareIn my view, I declareAnd when it renders, it only rendersIf I rename the jquery.tmpl.min.js to jquery.tmpl.js (and update the path in the bundle accordingly), both scripts are rendered correctly.Is there some config setting that is causing it to ignore '.min.js' files?The solution I originally posted is questionable (is a dirty hack). The tweaked behaviour has changed in Microsoft.AspNet.Web.Optimization package and the tweak does not work anymore, as pointed out by many commenters. Right now I cannot reproduce the issue at all with the version 1.1.3 of the package.Please see sources of System.Web.Optimization.BundleCollection (you can use dotPeek for example) for better understanding of what you are about to do. 

Also read Max Shmelev's answer.Original answer: Either rename .min.js to .js or do something like Microsoft implies the following behavior (and I prefer to follow it in my projects):As a result you will automatically have the script.js included in DEBUG mode and script.min.js in RELEASE mode.You can have also .debug.js version. In that case the file is included in the following priority in DEBUG:in RELEASE:And by the way, the only reason to have a .min versions of your scripts in MVC4 is the case when the minified version can not be processed automatically. For example the following code can not be obfuscated automatically:In all the other cases you can go with just a debug version of your script.If all you have is a minified version of a file, the simplest solution I've found is to copy the minified file, remove .min from the copied file's name, then reference the non-minified file name in your bundle.For example, let's say you purchased a js component and they gave you a file called some-lib-3.2.1.min.js. To use this file in a bundle, do the following:Just because the file without 'min' in the name is actually minified shouldn't cause any issues (other than the fact it's essentially unreadable). It's only used in debug mode and gets written out as a separate script. When not in debug mode the pre-compiled min file should be included in your bundle.I have found a good solution that works at least in MVC5, you can just use Bundle instead of ScriptBundle. It does not have the smart behavior of ScriptBundle that we don't like (ignoring .min, etc.) in this case. In my solution I use Bundle for 3d party scripts with .min and .map files and I use ScriptBundle for our code. I have not noticed any drawbacks of doing it. To make it work this way you will need to add original file e.g. angular.js, and it will load angular.js in debug and it will bundle the angular.min.js in release mode.To render *.min.js files, you must disable BundleTable.EnableOptimizations, which is a global setting that applies to all bundles.If you want to enable optimizations for specific bundles only, you can create your own ScriptBundle type that temporarily enables optimizations when enumerating files in the bundle.Use OptimizedScriptBundle instead of ScriptBundle for bundles whose minified file should always be used, regardless of whether a non-minified file exists.Example for Kendo UI for ASP.NET MVC, which is distributed as a collection of only minified files.For my case, I was using the (wonderful!) Knockout.js library which comes as Debug/Non versions:To make this work, I included "Knockout-{Version}.js" (non-debug) in my Bundle and got the .debug. js file in Debug mode.An easy way just Rename the .min file for example you have abc.min.css than just rename this file to abc_min.css and add this to your bundle. I know its not the right way to do it, but just a temporary solution. thanks and happy coding.Bundler have a lot of benefits check this page BUT:The Microsoft MVC4 Platform Considers that you have at least both minified version & unminified version for each Script or Style Bundle(another files like Debug and vsdoc are available too). So We have trouble in situations that there is only one of these files.You can change debug state in web.config file permanently to handle output:See the output changes! File filtering changed. To meet the purpose we must change ignore case filtration that will change application logic! Folks

I would just keep it simply until Microsoft gets it act togetherTry thisIn RegisterBundles create this bundle for KendoIn _Layout.cshtml put this:This way we get best of bundles in Production and a reference in Debug Fix it up when Microsoft fixes their MVC 4 Code

Not class selector in jQuery

Zardoz

[Not class selector in jQuery](https://stackoverflow.com/questions/4614120/not-class-selector-in-jquery)

Is there a simple selector expression to not select elements with a specific class?I just want to get the first three divs and triedBut this receives all as the last div contains more than first-bar. Is there a way to use a placeholder in such an expression? Something like thatAny other selectors that may help?

2011-01-06 10:51:48Z

Is there a simple selector expression to not select elements with a specific class?I just want to get the first three divs and triedBut this receives all as the last div contains more than first-bar. Is there a way to use a placeholder in such an expression? Something like thatAny other selectors that may help?You need the :not() selector:or, alternatively, the .not() method:You can use the :not filter selector:Or not() method:More Info:

JavaScript regex multiline flag doesn't work

molf

[JavaScript regex multiline flag doesn't work](https://stackoverflow.com/questions/1068280/javascript-regex-multiline-flag-doesnt-work)

I wrote a regex to fetch string from HTML, but it seems the multiline flag doesn't work.This is my pattern and I want to get the text in h1 tag.I created a string to test it. When the string contains "\n", the result is always null. If I removed all the "\n"s, it gave me the right result, no matter with or without the /m flag.What's wrong with my regex?

2009-07-01 09:52:34Z

I wrote a regex to fetch string from HTML, but it seems the multiline flag doesn't work.This is my pattern and I want to get the text in h1 tag.I created a string to test it. When the string contains "\n", the result is always null. If I removed all the "\n"s, it gave me the right result, no matter with or without the /m flag.What's wrong with my regex?You are looking for the /.../s modifier, also known as the dotall modifier. It forces the dot . to also match newlines, which it does not do by default.The bad news is that it does not exist in JavaScript (it does as of ES2018, see below). The good news is that you can work around it by using a character class (e.g. \s) and its negation (\S) together, like this:So in your case the regex would become:As of ES2018, JavaScript supports the s (dotAll) flag, so in a modern environment your regular expression could be as you wrote it, but with an s flag at the end (rather than m; m changes how ^ and $ work, not .):You want the s (dotall) modifier, which apparently doesn't exist in Javascript - you can replace . with [\s\S] as suggested by @molf.

The m (multiline) modifier makes ^ and $ match lines rather than the whole string.[\s\S] did not work for me in nodejs 6.11.3.  Based on the RegExp documentation, it says to use [^] which does work for me.  For example:/This is on line 1[^]*?This is on line 3/mwhere the *? is the non-greedy grab of 0 or more occurrences of [^].The dotall modifier has actually made it into JavaScript in June 2018, that is ECMAScript 2018.

https://github.com/tc39/proposal-regexp-dotall-flag

Is there any method to get the URL without query string?

saint

[Is there any method to get the URL without query string?](https://stackoverflow.com/questions/5817505/is-there-any-method-to-get-the-url-without-query-string)

I have a URL like http://localhost/dms/mduserSecurity/UIL/index.php?menu=true&submenu=true&pcode=1235.I want to get the URL without the query string: http://localhost/dms/mduserSecurity/UIL/index.php.Is there any method for this in JavaScript? Currently I am using document.location.href, but it returns the complete URL.

2011-04-28 10:58:31Z

I have a URL like http://localhost/dms/mduserSecurity/UIL/index.php?menu=true&submenu=true&pcode=1235.I want to get the URL without the query string: http://localhost/dms/mduserSecurity/UIL/index.php.Is there any method for this in JavaScript? Currently I am using document.location.href, but it returns the complete URL.Try this: window.location.href.split('?')[0]Read about Window.location and the Location interface:If you also want to remove hash, try this one: window.location.href.split(/[?#]/)[0]Try:(NB: .host rather than .hostname so that the port gets included too, if necessary)Here's an approach using the URL() interface:just cut the string using split (the easy way):To get every part of the URL except for the query:Note that this includes the hash as well, if there is one (I'm aware there's no hash in your example URL, but I included that aspect for completeness). To eliminate the hash, simply exclude .concat(location.hash).It's better practice to use concat to join Javascript strings together (rather than +): in some situations it avoids problems such as type confusion.Use properties of window.locationYou can see more properties at https://developer.mozilla.org/en/DOM/window.locationHere are two methods:How about this: location.href.slice(0, - ((location.search + location.hash).length))

How to turn a String into a JavaScript function call? [duplicate]

SpoiledTechie.com

[How to turn a String into a JavaScript function call? [duplicate]](https://stackoverflow.com/questions/912596/how-to-turn-a-string-into-a-javascript-function-call)

I got a string like:that I want to translate into a function call like so:This of course will have to be done in JavaScript.  When I do an alert on settings.functionName + '(' + t.parentNode.id + ')'; it seems to get everything correct.  I just need to call the function that it would translate into.Legend:

2009-05-26 20:31:03Z

I got a string like:that I want to translate into a function call like so:This of course will have to be done in JavaScript.  When I do an alert on settings.functionName + '(' + t.parentNode.id + ')'; it seems to get everything correct.  I just need to call the function that it would translate into.Legend:Seeing as I hate eval, and I am not alone:Edit: In reply to @Mahan's comment:

In this particular case, settings.functionName would be "clickedOnItem". This would, at runtime translate var fn = window[settings.functionName]; into var fn = window["clickedOnItem"], which would obtain a reference to function clickedOnItem (nodeId) {}. Once we have a reference to a function inside a variable, we can call this function by "calling the variable", i.e. fn(t.parentNode.id), which equals clickedOnItem(t.parentNode.id), which was what the OP wanted.More full example:No need for an eval()Here is a more generic way to do the same, while supporting scopes :Hope it can help some people out.JavaScript has an eval function that evaluates a string and executes it as code:eval() is the function you need to do that, but I'd advise trying one of these things to minimize the use of eval. Hopefully one of them will make sense to you.Store the functionStore the function as a function, not as a string, and use it as a function later. Where you actually store the function is up to you.orStore function nameEven if you have to store the function name as a string, you can minimize complexity by doingwhich minimizes the amount of Javascript you have to construct and eval.Dictionary of handlersPut all of the action functions you might need into an object, and call them dictionary-style using the string.(Minor note: If instead here you used syntax itemActions[actionName](t.parentNode.id); then the function would be called as a method of itemActions.)While I like the first answer and I hate eval, I'd like to add that there's another way (similar to eval) so if you can go around it and not use it, you better do. But in some cases you may want to call some javascript code before or after some ajax call and if you have this code in a custom attribute instead of ajax you could use this:Or eventually store this in a function cache if you may need to call it multiple times. Again - don't use eval or this method if you have another way to do that.If settings.functionName is already a function, you could do this:Otherwise this should also work if settings.functionName is just the name of the function:I wanted to be able to take a function name as a string, call it, AND pass an argument to the function. I couldn't get the selected answer for this question to do that, but this answer explained it exactly, and here is a short demo.This also works with multiple arguments.This took me a while to figure out, as the conventional window['someFunctionName']() did not work for me at first.  The names of my functions were being pulled as an AJAX response from a database.  Also, for whatever reason, my functions were declared outside of the scope of the window, so in order to fix this I had to rewrite the functions I was calling fromtoand from there I could call window['someFunctionName']() with ease.  I hope this helps someone!I prefer to use something like this:Based on Nicolas Gauthier answer:In javascript that uses the CommonJS spec, like node.js for instance you can do what I show below. Which is pretty handy for accessing a variable by a string even if its not defined on the window object. If there is a class named MyClass, defined within a CommonJS module named MyClass.jsYou can then do this nice bit o witchcraft from another file called MyOtherFile.jsOne more reason why CommonJS is such a pleasure.it is extensively used when dealing with JSON.

Best way to disable button in Twitter's Bootstrap [duplicate]

Samuel Robert

[Best way to disable button in Twitter's Bootstrap [duplicate]](https://stackoverflow.com/questions/17327668/best-way-to-disable-button-in-twitters-bootstrap)

I am confused when it comes to disabling a <button>, <input> or an <a> element with classes: .btn or .btn-primary, with JavaScript/jQuery.I have used a following snippet to do that:So, if I just provide the $('button').addClass('btn-disabled'); to my element, it will appear as disabled, visually, but the functionality will remain the same and it will be clickable nontheless, so that it the reason why I added the attr and prop settings to the element.Has anyone expirenced this same issue out there? Is this the right way of doing this - while using Twitter's Bootstrap?

2013-06-26 18:23:25Z

I am confused when it comes to disabling a <button>, <input> or an <a> element with classes: .btn or .btn-primary, with JavaScript/jQuery.I have used a following snippet to do that:So, if I just provide the $('button').addClass('btn-disabled'); to my element, it will appear as disabled, visually, but the functionality will remain the same and it will be clickable nontheless, so that it the reason why I added the attr and prop settings to the element.Has anyone expirenced this same issue out there? Is this the right way of doing this - while using Twitter's Bootstrap?You just need the $('button').prop('disabled', true); part, the button will automatically take the disabled class.For input and button:For anchor:Checked in firefox, chrome.See http://jsfiddle.net/czL54/2/Building off jeroenk's answer, here's the rundown:See fiddleThe easiest way to do this, is to use the disabled attribute, as you had done in your original question:<button class="btn btn-disabled" disabled>Content of Button</button>As of now, Twitter Bootstrap doesn't have a method to disable a button's functionality without using the disabled attribute.Nonetheless, this would be an excellent feature for them to implement into their javascript library.What ever attribute is added to the button/anchor/link to disable it, bootstrap is just adding style to it and user will still be able to click it while there is still onclick event. So my simple solution is to check if it is disabled and remove/add onclick event:

How to use JavaScript regex over multiple lines?

akauppi

[How to use JavaScript regex over multiple lines?](https://stackoverflow.com/questions/1979884/how-to-use-javascript-regex-over-multiple-lines)

I'd want the PRE block be picked up, even though it spans over newline characters. I thought the 'm' flag does it. Does not.Found the answer here before posting. SInce I thought I knew JavaScript (read three books, worked hours) and there wasn't an existing solution at SO, I'll dare to post anyways. throw stones hereSo the solution is:Does anyone have a less cryptic way?Edit: this is a duplicate but since it's harder to find than mine, I don't remove.It proposes [^] as a "multiline dot". What I still don't understand is why [.\n] does not work. Guess this is one of the sad parts of JavaScript..

2009-12-30 12:13:41Z

I'd want the PRE block be picked up, even though it spans over newline characters. I thought the 'm' flag does it. Does not.Found the answer here before posting. SInce I thought I knew JavaScript (read three books, worked hours) and there wasn't an existing solution at SO, I'll dare to post anyways. throw stones hereSo the solution is:Does anyone have a less cryptic way?Edit: this is a duplicate but since it's harder to find than mine, I don't remove.It proposes [^] as a "multiline dot". What I still don't understand is why [.\n] does not work. Guess this is one of the sad parts of JavaScript..[.\n] does not work because . has no special meaning inside of [], it just means a literal .. (.|\n) would be a way to specify "any character, including a newline". If you want to match all newlines, you would need to add \r as well to include Windows and classic Mac OS style line endings: (.|[\r\n]).That turns out to be somewhat cumbersome, as well as slow, (see KrisWebDev's answer for details), so a better approach would be to match all whitespace characters and all non-whitespace characters, with [\s\S], which will match everything, and is faster and simpler.In general, you shouldn't try to use a regexp to match the actual HTML tags. See, for instance, these questions for more information on why.Instead, try actually searching the DOM for the tag you need (using jQuery makes this easier, but you can always do document.getElementsByTagName("pre") with the standard DOM), and then  search the text content of those results with a regexp if you need to match against the contents.DON'T use (.|[\r\n]) instead of . for multiline matching.DO use [\s\S] instead of . for multiline matchingAlso, avoid greediness where not needed by using *? or +? quantifier instead of * or +. This can have a huge performance impact.See the benchmark I have made: http://jsperf.com/javascript-multiline-regexp-workaroundsNB: You can also use [^] but it is deprecated in the below comment.You do not specify your environment and version of Javascript (ECMAscript), and I realise this post was from 2009, but just for completeness, with the release of ECMA2018 we can now use the s flag to cause . to match '\n', see https://stackoverflow.com/a/36006948/141801Thus:This is a recent addition and will not work in many current environments, for example Node v8.7.0 does not seem to recognise it, but it works in Chromium, and I'm using it in a Typescript test I'm writing and presumably it will become more mainstream as time goes by.[.\n] doesn't work, because dot in [] (by regex definition; not javascript only) means the dot-character. You can use (.|\n) (or (.|[\n\r])) instead.I have tested it (Chrome) and it working for me( both [^] and [^\0]), by changing the dot (.) by either [^\0] or [^] , because dot doesn't match line break (See here: http://www.regular-expressions.info/dot.html).

In addition to above-said examples, it is an alternate.Where \w is for words and \s is for white spaces

Calculate the date yesterday in JavaScript

Omega

[Calculate the date yesterday in JavaScript](https://stackoverflow.com/questions/5511323/calculate-the-date-yesterday-in-javascript)

How can I calculate yesterday as a date in JavaScript?

2011-04-01 09:11:08Z

How can I calculate yesterday as a date in JavaScript?Not very efficient, but as oneliner:The above creates three Date objects which is needlessly wasteful. This can be reduced to a single instantiation with:Or, if you prefer:Or, if you prefer ES6 with arrow function:Try this Surprisingly no answer point to the easiest cross browser solutionTo find exactly the same time yesterday:That is if you wanna go dependency free, otherwise I'd recommend using http://momentjs.comTo generalize the question and make other diff calculations use:this creates a new date object based on the value of "now" as an integer which represents the unix epoch in milliseconds subtracting one day.Two days ago:An hour ago:I use moment library, it is very flexible and easy to use.In your case:====== UPDATE ======This will produce yesterday at 00:00 with minutes precisionwill do the trickGive this a try, works for me:This got me a date object back for yesterdayHere is a one liner that is used to get yesterdays date in format YYYY-MM-DD in text and handle the timezone offset.It can obviusly changed to return date, x days back in time. To include time etc.If you want to both get the date for yesterday and format that date in a human readable format, consider creating a custom DateHelper object that looks something like this :(see also this Fiddle)You can use momentjs it is very helpful you can achieve a lot of things with this library.Get yesterday date with current timing

moment().subtract(1, 'days').toString()Get yesterday date with a start of the date

moment().subtract(1, 'days').startOf('day').toString()solve boundary date problem (2020, 01, 01) -> 2019, 12, 31"Date.now() - 86400000" won't work on the Daylight Saving end day (which has 25 hours that day)Another option is to use Closure:

load and execute order of scripts

Bergi

[load and execute order of scripts](https://stackoverflow.com/questions/8996852/load-and-execute-order-of-scripts)

There are so many different ways to include JavaScript in a html page. I know about the following options:Not counting browserscripts from the harddisk, javascript:URIs and onEvent-attributes [3], there are already 16 alternatives to get JS executed and I'm sure I forgot something.I'm not so concerned with fast (parallel) loading, I'm more curious about the execution order (which may depend on loading order and document order). Is there a good (cross-browser) reference that covers really all cases? E.g. http://www.websiteoptimization.com/speed/tweak/defer/ only deals with 6 of them, and tests mostly old browsers.As I fear there's not, here is my specific question: I've got some (external) head scripts for initialisation and script loading. Then I've got two static, inline scripts in the end of the body. The first one lets the script loader dynamically append another script element (referencing external js) to the body. The second of the static, inline scripts wants to use js from the added, external script. Can it rely on the other having been executed (and why :-)?

2012-01-25 01:33:10Z

There are so many different ways to include JavaScript in a html page. I know about the following options:Not counting browserscripts from the harddisk, javascript:URIs and onEvent-attributes [3], there are already 16 alternatives to get JS executed and I'm sure I forgot something.I'm not so concerned with fast (parallel) loading, I'm more curious about the execution order (which may depend on loading order and document order). Is there a good (cross-browser) reference that covers really all cases? E.g. http://www.websiteoptimization.com/speed/tweak/defer/ only deals with 6 of them, and tests mostly old browsers.As I fear there's not, here is my specific question: I've got some (external) head scripts for initialisation and script loading. Then I've got two static, inline scripts in the end of the body. The first one lets the script loader dynamically append another script element (referencing external js) to the body. The second of the static, inline scripts wants to use js from the added, external script. Can it rely on the other having been executed (and why :-)?If you aren't dynamically loading scripts or marking them as defer or async, then scripts are loaded in the order encountered in the page.  It doesn't matter whether it's an external script or an inline script - they are executed in the order they are encountered in the page.  Inline scripts that come after external scripts are held until all external scripts that came before them have loaded and run.Async scripts (regardless of how they are specified as async) load and run in an unpredictable order.  The browser loads them in parallel and it is free to run them in whatever order it wants.There is no predictable order among multiple async things.  If one needed a predictable order, then it would have to be coded in by registering for load notifications from the async scripts and manually sequencing javascript calls when the appropriate things are loaded.When a script tag is inserted dynamically, how the execution order behaves will depend upon the browser.  You can see how Firefox behaves in this reference article.  In a nutshell, the newer versions of Firefox default a dynamically added script tag to async unless the script tag has been set otherwise.  A script tag with async may be run as soon as it is loaded.  In fact, the browser may pause the parser from whatever else it was doing and run that script.  So, it really can run at almost any time.  If the script was cached, it might run almost immediately.  If the script takes awhile to load, it might run after the parser is done.  The one thing to remember with async is that it can run anytime and that time is not predictable.A script tag with defer waits until the entire parser is done and then runs all scripts marked with defer in the order they were encountered.  This allows you to mark several scripts that depend upon one another as defer.  They will all get postponed until after the document parser is done, but they will execute in the order they were encountered preserving their dependencies.  I think of defer like the scripts are dropped into a queue that will be processed after the parser is done.  Technically, the browser may be downloading the scripts in the background at any time, but they won't execute or block the parser until after the parser is done parsing the page and parsing and running any inline scripts that are not marked defer or async.Here's a quote from that article:The relevant part of the HTML5 spec (for newer compliant browsers) is here.  There is a lot written in there about async behavior.  Obviously, this spec doesn't apply to older browsers (or mal-conforming browsers) whose behavior you would probably have to test to determine.A quote from the HTML5 spec:What about Javascript module scripts, type="module"?Javascript now has support for module loading with syntax like this:Or, with src attribute:All scripts with type="module" are automatically given the defer attribute.  This downloads them in parallel (if not inline) with other loading of the page and then runs them in order, but after the parser is done.Module scripts can also be given the async attribute which will run inline module scripts as soon as possible, not waiting until the parser is done and not waiting to run the async script in any particular order relative to other scripts.There's a pretty useful timeline chart that shows fetch and execution of different combinations of scripts, including module scripts here in this article: Javascript Module Loading.The browser will execute the scripts in the order it finds them. If you call an external script, it will block the page until the script has been loaded and executed.To test this fact:Dynamically added scripts are executed as soon as they are appended to the document.To test this fact:Order of alerts is "appended" -> "hello!" -> "final"If in a script you attempt to access an element that hasn't been reached yet (example: <script>do something with #blah</script><div id="blah"></div>) then you will get an error.Overall, yes you can include external scripts and then access their functions and variables, but only if you exit the current <script> tag and start a new one.A great summary by @addyosmaniShamelessly copied from https://addyosmani.com/blog/script-priorities/After testing many options I've found that the following simple solution is loading the dynamically loaded scripts in the order in which they are added in all modern browsers

JavaScript: Create and save file

user1756980

[JavaScript: Create and save file](https://stackoverflow.com/questions/13405129/javascript-create-and-save-file)

I have data that I want to write to a file, and open a file dialog for the user to choose where to save the file.  It would be great if it worked in all browsers, but it has to work in Chrome.  I want to do this all client-side.Basically I want to know what to put in this function:Where the function takes in data, has the user select a location to save the file, and creates a file in that location with that data.Using HTML is fine too, if that helps.

2012-11-15 19:56:09Z

I have data that I want to write to a file, and open a file dialog for the user to choose where to save the file.  It would be great if it worked in all browsers, but it has to work in Chrome.  I want to do this all client-side.Basically I want to know what to put in this function:Where the function takes in data, has the user select a location to save the file, and creates a file in that location with that data.Using HTML is fine too, if that helps.A very minor improvement of the code by Awesomeness01 (no need for anchor tag) with addition as suggested by trueimage (support for IE):Tested to be working properly in Chrome, FireFox and IE10.In Safari, the data gets opened in a new tab and one would have to manually save this file.This project on github looks promising: https://github.com/eligrey/FileSaver.jsAlso have a look at the demo here: http://eligrey.com/demos/FileSaver.js/And you would then download the file by putting the download attribute on the anchor tag.The reason I like this better than creating a data url is that you don't have to make a big long url, you can just generate a temporary url.Choosing the location to save the file before creating it is not possible. But it is possible, at least in Chrome, to generate files using just JavaScript. Here is an old example of mine of creating a CSV file. The user will be prompted to download it. This, unfortunately, does not work well in other browsers, especially IE.Try using this it downloads the file and all you have to do is edit the onclick attributes.For latest browser, like Chrome, you can use the File API as in this tutorial:Tried this in the console, and it works.You cannot do this purely in Javascript. Javascript running on browsers does not have enough permission yet (there have been proposals) due to security reasons.Instead, I would recommend using Downloadify:You can see a simple demo here where you supply the content and can test out saving/cancelling/error handling functionality. For Chrome and Firefox, I have been using a purely JavaScript method.(My application cannot make use of a package such as Blob.js because it is served from a special engine: a DSP with a WWWeb server crammed in and little room for anything at all.)Notes, caveats, and weasel-words:Javascript has a FileSystem API. If you can deal with having the feature only work in Chrome, a good starting point would be: http://www.html5rocks.com/en/tutorials/file/filesystem/.StreamSaver is an alternative to save very large files without having to keep all data in the memory.In fact it emulates everything the server dose when saving a file but all client side with service worker.You can either get the writer and manually write Uint8Array's to it or pipe a binary readableStream to the writable streamThere is a few example showcasing:Here is an example in it's simplest form:If you want to save a blob you would just convert that to a readableStreamI think this is gonna work with json files

Get first and last date of current month with JavaScript or jQuery [duplicate]

Moozy

[Get first and last date of current month with JavaScript or jQuery [duplicate]](https://stackoverflow.com/questions/13571700/get-first-and-last-date-of-current-month-with-javascript-or-jquery)

As title says, I'm stuck on finding a way to get the first and last date of the current month with JavaScript or jQuery, and format it as:For example, for November it should be :

2012-11-26 19:27:47Z

As title says, I'm stuck on finding a way to get the first and last date of the current month with JavaScript or jQuery, and format it as:For example, for November it should be :Very simple, no library required:or you might prefer:Some browsers will treat two digit years as being in the 20th century, so that:gives 1 January, 1914. To avoid that, create a Date then set its values using setFullYear:I fixed it with DatejsThis is alerting the first day:  This is for the last day:

Eslint: How to disable「unexpected console statement」in Node.js?

Jean Y.C. Yang

[Eslint: How to disable「unexpected console statement」in Node.js?](https://stackoverflow.com/questions/34215526/eslint-how-to-disable-unexpected-console-statement-in-node-js)

I'm using eslint with Sublime Text 3 and I am writing gulpfile.js.But eslint keeps showing error : "Error: Unexpected console statement. (no-console)"

I found official document here, but I still don't know how to disable it.doesn't work, either.My Sublime Text 3 plugins: SublimeLinter and SublimeLinter-contrib-eslint.Here's my .eslintrc.js file:

2015-12-11 03:15:27Z

I'm using eslint with Sublime Text 3 and I am writing gulpfile.js.But eslint keeps showing error : "Error: Unexpected console statement. (no-console)"

I found official document here, but I still don't know how to disable it.doesn't work, either.My Sublime Text 3 plugins: SublimeLinter and SublimeLinter-contrib-eslint.Here's my .eslintrc.js file:Create a .eslintrc.js in the directory of your file, and put the following contents in it:You should update eslint config file to fix this permanently. Else you can temporarily enable or disable eslint check for console like below  For vue-cli 3 open package.json and under section eslintConfig put no-console under rules and restart dev server (npm run serve or yarn serve)A nicer option is to make the display of console.log and debugger statements conditional based on the node environment.The following works with ESLint in VSCode if you want to disable the rule for just one line.To disable the next line:To disable the current line:If you install eslint under your local project, you should have a directory /node_modules/eslint/conf/ and under that directory a file eslint.json. You could edit the file and modify "no-console" entry with the value "off" (although 0 value is supported too):I hope this "configuration" could help you.I'm using Ember.js which generates a file named .eslintrc.js. Adding "no-console": 0 to the rules object did the job for me. The updated file looks like this:If you just want to disable the rule once, you want to look at Exception's answer.You can improve this by only disabling the rule for one line only:... on the current line:... or on the next line:in my vue project i fixed this problem like this :ps :  package.json is a configfile in the vue project dir, finally the content shown like this：In package.json you will find an eslintConfig line. Your 'rules' line can go in there like this:If you're still having trouble even after configuring your package.json according to the documentation (if you've opted to use package.json to track rather than separate config files):And it still isn't working for you, don't forget you need to go back to the command line and do npm install again. :) You should add one rule and add your env:you can add other envs.Putting this in the .eslintrc.js file that is at the project location worked for me2018 October, just do:the anothers answer with does not work !Use Window Objectwindow.console.log("..")

How do I accomplish an if/else in mustache.js?

egervari

[How do I accomplish an if/else in mustache.js?](https://stackoverflow.com/questions/6027525/how-do-i-accomplish-an-if-else-in-mustache-js)

It seems rather odd that I can't figure how to do this in mustache. Is it supported?This is my sad attempt at trying:This obviously isn't right, but the documentation doesn't mention anything like this. The word "else" isn't even mentioned :(Also, why is mustache designed this way? Is this sort of thing considered bad? Is it trying to force me to set the default value in the model itself? What about the cases where that isn't possible?

2011-05-17 07:19:25Z

It seems rather odd that I can't figure how to do this in mustache. Is it supported?This is my sad attempt at trying:This obviously isn't right, but the documentation doesn't mention anything like this. The word "else" isn't even mentioned :(Also, why is mustache designed this way? Is this sort of thing considered bad? Is it trying to force me to set the default value in the model itself? What about the cases where that isn't possible?This is how you do if/else in Mustache (perfectly supported):Or in your case:Look for inverted sections in the docs: https://github.com/janl/mustache.jsThis is something you solve in the "controller", which is the point of logicless templating.This is actually a LOT better then maintaining image url's or other media that might or might not change in your templates, but takes some getting used to. The point is to unlearn template tunnel vision, an avatar img url is bound to be used in other templates, are you going to maintain that url on X templates or a single DEFAULTS settings object? ;)Another option is to do the following:And in the template:But that's going against the whole meaning of logicless templating. If that's what you want to do, you want logical templating and you should not use Mustache, though do give it yourself a fair chance of learning this concept ;)Your else statement should look like this (note the ^):In mustache this is called 'Inverted sections'.You can define a helper in the view. However, the conditional logic is somewhat limited. Moxy-Stencil (https://github.com/dcmox/moxyscript-stencil) seems to address this with "parameterized" helpers, eg:{{isActive param}}and in the view:view.isActive = function (path: string){ return path === this.path ? "class='active'" : '' }

「Submit is not a function」error in JavaScript

Jin Yong

[「Submit is not a function」error in JavaScript](https://stackoverflow.com/questions/833032/submit-is-not-a-function-error-in-javascript)

Can anyone tell me what is going wrong with this code? I tried to submit a form with JavaScript, but an error ".submit is not a function" shown. See below for more details of the code:I also tried this:Both show me the same error  :(

2009-05-07 05:41:20Z

Can anyone tell me what is going wrong with this code? I tried to submit a form with JavaScript, but an error ".submit is not a function" shown. See below for more details of the code:I also tried this:Both show me the same error  :(means that you named your submit button or some other element submit. Rename the button to btnSubmit and your call will magically work. When you name the button submit, you override the submit() function on the form. EDIT: I accidentally swapped the id's aroundIf you have no opportunity to change name="submit" you can also submit form this way:Make sure that there is no another form with the same name and make sure that there is no name="submit" or id="submit" in the form.I had the same issue when i was creating a MVC application using with master pages.

Tried looking for element with 'submit' as names as mentioned above but it wasn't the case. For my case it created multiple  tags on my page so there were some issues referencing the correct form.To work around this i'll let the button handle which form object to use:and with the js:This topic has a lot of answers already, but the one that worked best (and simplest - one line!) for me was a modification of the comment made by Neil E. Pearson from Apr 21 2013:My modification to his method, and what worked for me:document.createElement('form').submit.call(document.getElementById(frmProduct));giving a form element a name of submit will simple shadow the submit property .

make sure you don't have a form element with the name submit and you should be able to access the submit function just fine . In fact, the solution is very easy...Original:Solution:You should use this code :

What I used is Just because everything else didn´t work.Solution for me was to set the "form" attribute of buttonor is js:Possible solutions -

1.Make sure that you don't have any other element with name/id as submit.

2.Try to call the function as onClick = "return submitAction();"

3.document.getElementById("form-name").submit();  You can try Don't you have more than one form with the same name ?Use getElementById:

split string only on first instance of specified character

Ofeargall

[split string only on first instance of specified character](https://stackoverflow.com/questions/4607745/split-string-only-on-first-instance-of-specified-character)

In my code I split a string based on _ and grab the second item in the array.Takes good_luck and provides me with luck. Works great!But, now I have a class that looks like good_luck_buddy. How do I get my javascript to ignore the second _ and give me luck_buddy?I found this var field = element.split(new char [] {'_'}, 2); in a c# stackoverflow answer but it doesn't work. I tried it over at jsFiddle...

2011-01-05 18:26:08Z

In my code I split a string based on _ and grab the second item in the array.Takes good_luck and provides me with luck. Works great!But, now I have a class that looks like good_luck_buddy. How do I get my javascript to ignore the second _ and give me luck_buddy?I found this var field = element.split(new char [] {'_'}, 2); in a c# stackoverflow answer but it doesn't work. I tried it over at jsFiddle...Use capturing parentheses:They are defined asSo in this case we want to split at _.+ (i.e. split separator being a sub string starting with _) but also let the result contain some part of our separator (i.e. everything after _).In this example our separator (matching _(.+)) is _luck_buddy and the captured group (within the separator) is lucky_buddy. Without the capturing parenthesis the luck_buddy (matching .+) would've not been included in the result array as it is the case with simple split that separators are not included in the result.What do you need regular expressions and arrays for?I avoid RegExp at all costs. Here is another thing you can do:Replace the first instance with a unique placeholder then split from there.This is more useful when both sides of the split are needed.You can use the regular expression like:Javascript's String.split unfortunately has no way of limiting the actual number of splits. It has a second argument that specifies how many of the actual split items are returned, which isn't useful in your case. The solution would be to split the string, shift the first item off, then rejoin the remaining items::I need the two parts of string, so, regex lookbehind help me with this.Nowadays String.prototype.split does indeed allow you to limit the number of splits.It might not work the way you expect. I was hoping it would just ignore the rest of the delimiters, but instead, when it reaches the limit, it splits the remaining string again, omitting the part after the split from the return results.I was hoping for:This solution worked for meORI ran some benchmarks, and this solution won hugely:1The only close contender was the same line of code, except using substr instead of slice.Other solutions I tried involving split or RegExps took a big performance hit and were about 2 orders of magnitude slower. Using join on the results of split, of course, adds an additional performance penalty.Why are they slower? Any time a new object or array has to be created, JS has to request a chunk of memory from the OS. This process is very slow. Here are some general guidelines, in case you are chasing benchmarks:Here's a solution that will slice up to and including the nth instance. It's not quite as fast, but on the OP's question, gobble(element, '_', 1) is still >2x faster than a RegExp or split solution and can do more:With the above definition, gobble('path/to/file.txt', '/') would give the name of the file, and gobble('prefix_category_item', '_', 1) would remove the prefix like the first solution in this answer.Mark F's solution is awesome but it's not supported by old browsers. Kennebec's solution is awesome and supported by old browsers but doesn't support regex.So, if you're looking for a solution that splits your string only once, that is supported by old browsers and supports regex, here's my solution:For beginner like me who are not used to Regular Expression, this workaround solution worked:    slice() method extracts a part of a string and returns a new string and indexOf() method returns the position of the first found occurrence of a specified value in a string.This worked for me on Chrome + FF:If you also need the key try this:Here's one RegExp that does the trick.First it forces the match to start from the

start with the '^'. Then it matches any number

of characters which are not '_', in other words

all characters before the first '_'.The '?' means a minimal number of chars 

that make the whole pattern match are 

matched by the '.*?' because it is followed

by '_', which is then included in the match 

as its last character. Therefore this split() uses such a matching

part as its 'splitter' and removes it from

the results. So it removes everything

up till and including the first '_' and 

gives you the rest as the 2nd element of 

the result. The first element is "" representing 

the part before the matched part. It is

"" because the match starts from the beginning.There are other RegExps that work as

well like /_(.*)/ given by Chandu

in a previous answer. The /^.*?_/ has the benefit that you 

can understand what  it does without 

having to know about the special role 

capturing groups play with replace().Use the string replace() method with a regex:This regex matches 0 or more characters before the first _, and the _ itself. The match is then replaced by an empty string.

How to scroll HTML page to given anchor?

Juha Syrjälä

[How to scroll HTML page to given anchor?](https://stackoverflow.com/questions/3163615/how-to-scroll-html-page-to-given-anchor)

I’d like to make the browser to scroll the page to a given anchor, just by using JavaScript.I have specified a name or id attribute in my HTML code:orI’d like to get the same effect as you’d get by navigating to http://server.com/path#anchorName. The page should be scrolled so that the anchor is near the top of the visible part of the page.

2010-07-02 06:18:50Z

I’d like to make the browser to scroll the page to a given anchor, just by using JavaScript.I have specified a name or id attribute in my HTML code:orI’d like to get the same effect as you’d get by navigating to http://server.com/path#anchorName. The page should be scrolled so that the anchor is near the top of the visible part of the page.No jQuery required at all!Way simpler:You can use jQuerys .animate(), .offset() and scrollTop. Likeexample link: http://jsbin.com/unasi3/editIf you don't want to animate use .scrollTop() likeor javascripts native location.hash likeGreat solution by jAndy, but the smooth scroll seems to be having issues working in firefox.Writing it this way works in Firefox as well.A pure javascript solution without JQuery. Tested on Chrome & I.e, not tested on IOSdemo: https://jsfiddle.net/jd7q25hg/12/But as far as I understand he does not have such good support as the options below.Learn more about the method.Demonstration example on CodepenDemonstration example on CodepenSupport:They write that scroll is the same method as scrollTo, but support shows better in scrollTo.More about the methodIn 2018, you don't need jQuery for something simple like this. The built in [scrollIntoView()][1] method supports a "behavior" property to smoothly scroll to any element on the page. You can even update the browser URL with a hash to make it bookmarkable.From this tutorial on scrolling HTML Bookmarks, here is a native way to add smooth scrolling to all anchor links on your page automatically:Get correct y coordinate and use window.scrollTo({top: y, behavior: 'smooth'})scrollIntoView is a good option too but it may not works perfectly in some cases. For example when you need additional offset. With scrollTo you just need to add that offset like this:The solution from CSS-Tricks no longer works in jQuery 2.2.0. It will throw a selector error:I fixed it by changing the selector.  The full snippet is this:Most answers are unnecessarily complicated.If you just want to jump to the target element, you don't need JavaScript:If you want to scroll to the target animatedly, please refer to @Shahil's answer.This works: https://jsfiddle.net/68pnkfgd/Just add the class 'scroll' to any links you wish to animateThis is a working script that will scroll the page to the anchor.

To setup just give the anchor link an id that matches the name attribute of the anchor that you want to scroll to.I know this is question is really old, but I found an easy and simple jQuery solution in css-tricks. That's the one I'm using now.a vue2 solution ... add simple data property to simply force the update

How can I mock an ES6 module import using Jest?

Cam Jackson

[How can I mock an ES6 module import using Jest?](https://stackoverflow.com/questions/40465047/how-can-i-mock-an-es6-module-import-using-jest)

I'm beginning to think this isn't possible, but I want to ask anyway.I want to test that one of my ES6 modules calls another ES6 module in a particular way. With Jasmine this is super easy --The app code:And the test code:What's the equivalent with Jest? I feel like this is such a simple thing to want to do, but I've been tearing my hair out trying to figure it out.The closest I've come is by replacing the imports with requires, and moving them inside the tests/functions. Neither of which are things I want to do.For bonus points, I'd love to make the whole thing work when the function inside dependency.js is a default export. However, I know that spying on default exports doesn't work in Jasmine (or at least I could never get it to work), so I'm not holding out hope that it's possible in Jest either.

2016-11-07 12:19:32Z

I'm beginning to think this isn't possible, but I want to ask anyway.I want to test that one of my ES6 modules calls another ES6 module in a particular way. With Jasmine this is super easy --The app code:And the test code:What's the equivalent with Jest? I feel like this is such a simple thing to want to do, but I've been tearing my hair out trying to figure it out.The closest I've come is by replacing the imports with requires, and moving them inside the tests/functions. Neither of which are things I want to do.For bonus points, I'd love to make the whole thing work when the function inside dependency.js is a default export. However, I know that spying on default exports doesn't work in Jasmine (or at least I could never get it to work), so I'm not holding out hope that it's possible in Jest either.I've been able to solve this by using a hack involving import *. It even works for both named and default exports!For a named export:Or for a default export:As Mihai Damian quite rightly pointed out below, this is mutating the module object of dependency, and so it will 'leak' across to other tests. So if you use this approach you should store the original value and then set it back again after each test.

To do this easily with Jest, use spyOn() method instead of jest.fn() because it supports easily restoring its original value, therefore avoiding before mentioned 'leaking'.You have to mock the module and set the spy by yourself: To mock an ES6 dependency module default export using jest:The other options didn't work for my case.Adding more to Andreas answer. I had the same problem with ES6 code but did not want to mutate the imports. That looked hacky. So I did thisAnd added dependency.js in " __ mocks __" folder parallel to dependency.js. This worked for me. Also, this gave me option to return suitable data from mock implementation. Make sure you give the correct path to the module you want to mock.I solved this another way. Let's say you have your dependency.jsI create a depdency.mock.js file besides it with the following content:and in the test, before I import the file that has the depedency I use:The question is already answered but you can resolve it like this:dependency.jsmyModule.js:myModule.spec.js:

Usage of the backtick character (`) in JavaScript

caesarwang

[Usage of the backtick character (`) in JavaScript](https://stackoverflow.com/questions/27678052/usage-of-the-backtick-character-in-javascript)

In JavaScript, a backtick† seems to work the same as a single quote. For instance, I can use a backtick to define a string like this:Is there a way in which the behavior of the backtick actually differs from that of a single quote?† Note that among programmers, "backtick" is one name for what is more generally called the grave accent. Programmers also sometimes use the alternate names "backquote" and "backgrave". Also, on Stack Overflow and elsewhere, other common spellings for "backtick" are "back-tick" and "back tick".

2014-12-28 15:59:46Z

In JavaScript, a backtick† seems to work the same as a single quote. For instance, I can use a backtick to define a string like this:Is there a way in which the behavior of the backtick actually differs from that of a single quote?† Note that among programmers, "backtick" is one name for what is more generally called the grave accent. Programmers also sometimes use the alternate names "backquote" and "backgrave". Also, on Stack Overflow and elsewhere, other common spellings for "backtick" are "back-tick" and "back tick".This is a feature called template literals.They were called "template strings" in prior editions of the ECMAScript 2015 specification.Template literals are supported by Firefox 34, Chrome 41, and Edge 12 and above, but not by Internet Explorer.Template literals can be used to represent multi-line strings and may use "interpolation" to insert variables:Output:What is more important, they can contain not just a variable name, but any JavaScript expression:ECMAScript 6 comes up with a new type of string literal, using the backtick as the delimiter. These literals do allow basic string interpolation expressions to be embedded, which are then automatically parsed and evaluated.As you can see, we used the ` around a series of characters, which are interpreted  as a string literal, but any expressions of the form ${..} are parsed and evaluated inline immediately.One really nice benefit of interpolated string literals is they are allowed to split across multiple lines:Interpolated ExpressionsAny valid expression is allowed to appear inside ${..} in an interpolated string literal, including function calls, inline function expression calls, and even other interpolated string literals!Here, the inner `${who}s` interpolated string literal was a little bit nicer convenience for us when combining the who variable with the "s" string, as opposed to who  + "s". Also to keep an note is an interpolated string literal is just lexically scoped where it appears, not dynamically scoped in any way:Using the template literal for the HTML is definitely more readable by reducing the annoyance.The plain old way:With ECMAScript 6:Tagged Template LiteralsWe can also tag a template string, when a template string is tagged, the literals and substitutions are passed to function which returns the resulting value.We can use the spread operator here to pass multiple values. The first argument—we called it strings—is an array of all the plain strings (the  stuff between any interpolated expressions).We then gather up all subsequent arguments into an array called values using the ... gather/rest operator, though you could of course have left them as individual named parameters following the strings parameter like we did above (value1, value2, etc.).The argument(s) gathered into our values array are the results of the already evaluated interpolation expressions found in the string literal. A tagged string literal is like a processing step after the interpolations are evaluated, but before the final string value is compiled, allowing you more control over generating the string from the literal. Let's look at an example of creating reusable templates.Raw StringsOur tag functions receive a first argument we called strings, which is an array. But there’s an additional bit of data included: the raw unprocessed versions of all the strings. You can access those raw string values using the .raw property, like this:As you can see, the raw version of the string preserves the escaped \n sequence, while the processed version of the string treats it like an unescaped real new-line. ECMAScript 6 comes with a built-in function that can be used as a string literal tag: String.raw(..). It simply passes through the raw versions of the strings:Backticks (`) are used to define template literals. Template literals are a new feature in ECMAScript 6  to make working with strings easier.Features:Note: we can easily use single quotes (') and double quotes (") inside the backticks (`).Example:To interpolate the variables or expression we can use the ${expression} notation for that.Multi-line strings means that you no longer have to use \n for new lines anymore.Example:Output:Backticks enclose template literals, previously known as template strings. Template literals are string literals that allow embedded expressions and string interpolation features.Template literals have expressions embedded in placeholders, denoted by the dollar sign and curly brackets around an expression, i.e. ${expression}. The placeholder / expressions get passed to a function. The default function just concatenates the string.To escape a backtick, put a backslash before it:Use backticks to more easily write multi-line string:orvs. vanilla JavaScript:orEscape sequences:Backticks in JavaScript is a feature which is introduced in ECMAScript 6 // ECMAScript 2015 for making easy dynamic strings. This ECMAScript 6 feature is also named template string literal. It offers the following advantages when compared to normal strings:Template string literal are natively supported by all major browser vendors (except Internet Explorer). So it is pretty save to use in your production code. A more detailed list of the browser compatibilities can be found here.Apart from string interpolation, you can also call a function using back-tick.Check styled component. They use it heavily.The good part is we can make basic maths directly:It became really useful in a factory function:

Setting a backgroundImage With React Inline Styles

Kris

[Setting a backgroundImage With React Inline Styles](https://stackoverflow.com/questions/39195687/setting-a-backgroundimage-with-react-inline-styles)

I'm trying to access a static image to use within an inline backgroundImage property within React. Unfortunately, I've run up dry on how to do this.Generally, I thought you just did as follows:This works for <img> tags. Can someone explain the difference between the the two?Example:<img src={ Background } /> works just fine.Thank you!

2016-08-28 20:54:15Z

I'm trying to access a static image to use within an inline backgroundImage property within React. Unfortunately, I've run up dry on how to do this.Generally, I thought you just did as follows:This works for <img> tags. Can someone explain the difference between the the two?Example:<img src={ Background } /> works just fine.Thank you!The curly braces inside backgroundImage property are wrong. Probably you are using webpack along with image files loader, so Background should be already a String:

backgroundImage: "url(" + Background + ")"You can also use ES6 string templates as below to achieve the same effect:If you are using ES5 -If you are using ES6 -Basically removing unnecessary curly braces while adding value to backgroundImage property works will work.Inline style to set any image full screen:You can also bring the image into the component by using the require() function.<div style={{ backgroundImage: `url(require("images/img.svg"))` }}>Note the two sets of curly brackets. The first set is for entering react mode and the second is for denoting objecttry this:You can use Template Literals (enclosed with back-tick: `...`) instead for backgroundImage property like this:You Can try usimg

How to run function in AngularJS controller on document ready?

foreyez

[How to run function in AngularJS controller on document ready?](https://stackoverflow.com/questions/18646756/how-to-run-function-in-angularjs-controller-on-document-ready)

I have a function within my angular controller, I'd like this function to be run on document ready but I noticed that angular runs it as the dom is created.Anyone know how I can go about this?

2013-09-05 22:09:20Z

I have a function within my angular controller, I'd like this function to be run on document ready but I noticed that angular runs it as the dom is created.Anyone know how I can go about this?We can use the angular.element(document).ready() method to attach callbacks for when the document is ready.  We can simply attach the callback in the controller like so:http://jsfiddle.net/jgentes/stwyvq38/1/See this post How to execute angular controller function on page load?

For fast lookup:This way, You don't have to wait till document is ready. https://docs.angularjs.org/guide/bootstrapThis means that the controller code will run after the DOM is ready.Thus it's just $scope.init().Angular has several timepoints to start executing functions. If you seek for something like jQuery's You may find this analog in angular to be very useful:This one is helpful when you want to manipulate the DOM elements. It will start executing only after all te elements are loaded.UPD: What is said above works when you want to change css properties. However, sometimes it doesn't work when you want to measure the element properties, such as width, height, etc. In this case you may want to try this:I had a similar situation where I needed to execute a controller function after the view was loaded and also after a particular 3rd-party component within the view was loaded, initialized, and had placed a reference to itself on $scope. What ended up working for me was to setup a watch on this scope property and firing my function only after it was initialized.The watcher is called a couple of times with undefined values. Then when the grid is created and has the expected property, the initialization function may be safely called. The first time the watcher is called with a non-undefined newValue, oldValue will still be undefined.Here's my attempt inside of an outer controller using coffeescript. It works rather well. Please note that settings.screen.xs|sm|md|lg are static values defined in a non-uglified file I include with the app. The values are per the Bootstrap 3 official breakpoints for the eponymous media query sizes:The answer is the only one that works in most scenarios I tested. In a sample page with 4 components all of which build HTML from a template, the order of events wasSo a $document.ready() is useless in most cases since the DOM being constructed in angular may be nowhere near ready.But more interesting, even after $viewContentLoaded fired, the element of interest still could not be found.Only after the $timeout executed was it found. Note that even though the $timeout was a value of 0, nearly 200 milliseconds elapsed before it executed, indicating that this thread was held off for quite a while, presumably while the DOM had angular templates added on a main thread. The total time from the first $document.ready() to the last $timeout execution was nearly 500 milliseconds.In one extraordinary case where the value of a component was set and then the text() value was changed later in the $timeout, the $timeout value had to be increased until it worked (even though the element could be found during the $timeout). Something async within the 3rd party component caused a value to take precedence over the text until sufficient time passed. Another possibility is $scope.$evalAsync, but was not tried.I am still looking for that one event that tells me the DOM has completely settled down and can be manipulated so that all cases work. So far an arbitrary timeout value is necessary, meaning at best this is a kludge that may not work on a slow browser. I have not tried JQuery options like liveQuery and publish/subscribe which may work, but certainly aren't pure angular.If you're getting something like getElementById call returns null, it's probably because the function is running, but the ID hasn't had time to load in the DOM.Try using Will's answer (towards the top) with a delay.  Example:Why not try with what angular docs mention https://docs.angularjs.org/api/ng/function/angular.element. I've used this inside my $onInit(){...} function.This worked for me.

Importing lodash into angular2 + typescript application

Davy

[Importing lodash into angular2 + typescript application](https://stackoverflow.com/questions/34660265/importing-lodash-into-angular2-typescript-application)

I am having a hard time trying to get the lodash modules imported. I've setup my project using npm+gulp, and keep hitting the same wall. I've tried the regular lodash, but also lodash-es.The lodash npm package: (has an index.js file in the package root folder)   Results in:The lodash-es npm package: (has a defaut export in lodash.js i the package root folder)Results in:Both the gulp task and webstorm report the same issue.Funny fact, this returns no error:... but of course there is no "_" ...My tsconfig.json file:  My gulpfile.js:If i understand correctly, moduleResolution:'node' in my tsconfig should point the import statements to the node_modules folder, where lodash and lodash-es are installed. I've also tried lots of different ways to import: absolute paths, relative paths, but nothing seems to work. Any ideas? If necessary i can provide a small zip file to illustrate the problem.

2016-01-07 16:28:17Z

I am having a hard time trying to get the lodash modules imported. I've setup my project using npm+gulp, and keep hitting the same wall. I've tried the regular lodash, but also lodash-es.The lodash npm package: (has an index.js file in the package root folder)   Results in:The lodash-es npm package: (has a defaut export in lodash.js i the package root folder)Results in:Both the gulp task and webstorm report the same issue.Funny fact, this returns no error:... but of course there is no "_" ...My tsconfig.json file:  My gulpfile.js:If i understand correctly, moduleResolution:'node' in my tsconfig should point the import statements to the node_modules folder, where lodash and lodash-es are installed. I've also tried lots of different ways to import: absolute paths, relative paths, but nothing seems to work. Any ideas? If necessary i can provide a small zip file to illustrate the problem.Here is how to do this as of Typescript 2.0:

(tsd and typings are being deprecated in favor of the following):Then, in your .ts file: Either:Or (as suggested by @Naitik):I'm not positive what the difference is. We use and prefer the first syntax. However, some report that the first syntax doesn't work for them, and someone else has commented that the latter syntax is incompatible with lazy loaded webpack modules. YMMV.Edit on Feb 27th, 2017:According to @Koert below, import * as _ from "lodash"; is the only working syntax as of Typescript 2.2.1, lodash 4.17.4, and @types/lodash 4.14.53. He says that the other suggested import syntax gives the error "has no default export".Update September 26, 2016:As @Taytay's answer says, instead of the 'typings' installations that we used a few months ago, we can now use:Here are some additional references supporting that answer:If still using the typings installation, see the comments below (by others) regarding '''--ambient''' and '''--global'''.Also, in the new Quick Start, config is no longer in index.html; it's now in systemjs.config.ts (if using SystemJS).Original Answer:This worked on my mac (after installing Angular 2 as per Quick Start):You will find various files affected, e.g.Angular 2 Quickstart uses System.js, so I added 'map' to the config in index.html as follows:Then in my .ts code I was able to do:Edits from mid-2016: As @tibbus mentions, in some contexts, you need:If starting from angular2-seed, and if you don't want to import every time, you can skip the map and import steps and just uncomment the lodash line in tools/config/project.config.ts.To get my tests working with lodash, I also had to add a line to the files array in karma.conf.js:Step 1: Modify package.json file to include lodash in the dependencies.Step 2:I am using SystemJs module loader in my angular2 application. So I would be modifying the systemjs.config.js file to map lodash.Step 3: Now  do npm installStep 4: To use lodash in your file. npm install --save lodashnpm install -D @types/lodashI'm currently working with ES6 modules, and recently i was able to work with lodash like so:NOTE - the difference being * as is not required in the syntax

Good Luck.Since Typescript 2.0, @types npm modules are used to import typings.Now since this question has been answered I'll go into how to efficiently import lodashThe failsafe way to import the entire library (in main.ts)Implementing a lighter lodash with the functions you requiresource: https://medium.com/making-internets/why-using-chain-is-a-mistake-9bc1f80d51ba#.kg6azugbdPS: The above article is an interesting read on improving build time and reducing app sizeI successfully imported lodash in my project with the following commands:Then i imported it in the following way:import * as _ from 'lodash';and in systemjs.config.js i defined this:map: { 'lodash' : 'node_modules/lodash/lodash.js' }I had exactly the same problem, but in an Angular2 app, and this article just solve it: https://medium.com/@s_eschweiler/using-external-libraries-with-angular-2-87e06db8e5d1#.p6gra5eli Summary of the article:I hope it can be useful for your case tooAnother elegant solution is to get only what you need, not import all the lodashand then use it in your codeIf anyone else runs into this issue and none of the above solutions work due to "Duplicate identifier" issues, run this:With older versions of typings things mess up and you'll get a bunch of "Duplicate identifier" issues. Also you don't need to use --ambient anymore as far as I could tell.So once typings is up to date, this should work (using the Angular 2 quickstart).Run:First, add this to systemjs.config.js:Now you can use this in any file: import * as _ from 'lodash';Delete your typings folder and run npm install if you're still having issues.Please note that npm install --save will foster whatever dependency your app requires in production code.

As for "typings", it is only required by TypeScript, which is eventually transpiled in JavaScript. Therefore, you probably do not want to have them in production code. I suggest to put it in your project's devDependencies instead, by usingor (see Akash post for example). By the way, it's the way it is done in ng2 tuto.Alternatively, here is how your package.json could look like:just a tipThe nice thing about npm is that you can start by simply do an npm install --save or --save-dev if you are not sure about the latest available version of the dependency you are looking for, and it will automatically set it for you in your package.json for further use.I had created typings for lodash-es also, so now you can actually do the followingif you use rollup, i suggest using this instead of the lodash as it will be treeshaken properly.Partial import from lodash should work in angular 4.1.x using following notation:Or use 'lodash-es' and import in module:Install via npm.Now, import in the file:ENV:sudo npm install typings --global

npm install lodash --save 

typings install lodash --ambient --saveSystem.config({

    packages: {

      app: {

        format: 'register',

        defaultExtension: 'js'

      }

    },

    map: {

      lodash: 'node_modules/lodash/index.js'

    }

  });import _ from 'lodash';I am using ng2 with webpack, not system JS. Steps need for me were:and then in the file I wish to import underscore into:Managing types via typings and tsd commands is ultimately deprecated in favor of using npm via npm install @types/lodash.However, I struggled with "Cannot find module lodash" in import statement for a long time:Ultimately I realized Typescript will only load types from node_modules/@types start version 2, and my VsCode Language service was still using 1.8, so the editor was reporting errors. If you're using VSCode you'll want to include in your VSCode settings.json file (for workspace settings) and make sure you have typescript version >= 2.0.0 installed via npm install typescript@2.0.2 --save-devAfter that my editor wouldn't complain about the import statement.if dosen't work after you try this and import lodashInstall all thru terminal:Add paths in index.htmlImport lodash at the top of the .ts fileI'm on Angular 4.0.0 using the preboot/angular-webpack, and had to go a slightly different route.The solution provided by @Taytay mostly worked for me:and importing the functions into a given .component.ts file using:This works because there's no "default" exported class. The difference in mine was I needed to find the way that was provided to load in 3rd party libraries: vendor.ts which sat at: My vendor.ts file looks like this now:Maybe it is too strange, but none of the above helped me, first of all, because I had properly installed the lodash (also re-installed via above suggestions).So long story short the issue was connected with using _.has method from lodash.I fixed it by simply using JS in operator.npm install --save @types/lodashhttps://www.npmjs.com/package/@types/lodashtry >> tsd install lodash --saveYou can also go ahead and import via good old require, ie:This is the only thing that worked for us. Of course, make sure any require() calls come after imports.

Object Oriented Javascript best practices? [closed]

e-satis

[Object Oriented Javascript best practices? [closed]](https://stackoverflow.com/questions/907225/object-oriented-javascript-best-practices)

I'm finding myself coding a big project in Javascript. I remember the last one was quite an adventure because hacky JS can quickly becomes unreadable and I want this code to be clean.Well, I'm using objects to construct a lib, but there are several ways to define things in JS, implying important consequences in the scope, the memory management, the name space, etc. E.G :So what are really the best practices when coding in OO in JS ?Academic explanations really expected here. Link to books warmly welcome, as long as they deal with quality and robustness.EDIT :Got some readings, but I'm still very interested in answers to the questions above and any best practices.

2009-05-25 15:52:51Z

I'm finding myself coding a big project in Javascript. I remember the last one was quite an adventure because hacky JS can quickly becomes unreadable and I want this code to be clean.Well, I'm using objects to construct a lib, but there are several ways to define things in JS, implying important consequences in the scope, the memory management, the name space, etc. E.G :So what are really the best practices when coding in OO in JS ?Academic explanations really expected here. Link to books warmly welcome, as long as they deal with quality and robustness.EDIT :Got some readings, but I'm still very interested in answers to the questions above and any best practices.You should introduce any variable with the var statement, otherwise it gets to the global scope.It's worth mentioning that in strict mode ("use strict";) undeclared variable assignments throws ReferenceError.At present JavaScript does not have a block scope. The Crockford school teaches you to put var statements at the beginning of the function body, while Dojo's Style Guide reads that all variables should be declared in the smallest scope possible. (The let statement and definition introduced in JavaScript 1.7 is not part of the ECMAScript standard.)It is good practice to bind regularly-used objects' properties to local variables as it is faster than looking up the whole scope chain. (See Optimizing JavaScript for extreme performance and low memory consumption.)If you don't need to reach your objects outside your code, you can wrap your whole code in a function expression—-it's called the module pattern. It has performance advantages, and also allows your code to be minified and obscured at a high level. You can also ensure it won't pollute the global namespace. Wrapping Functions in JavaScript also allows you to add aspect-oriented behaviour. Ben Cherry has an in-depth article on module pattern.If you use pseudo-classical inheritance in JavaScript, you can hardly avoid using this. It's a matter of taste which inheritance pattern you use. For other cases, check Peter Michaux's article on JavaScript Widgets Without "this".function myname() is a function declaration and myname = function(); is a function expression assigned to variable myname. The latter form indicates that functions are first-class objects, and you can do anything with them, as with a variable. The only difference between them is that all function declarations are hoisted to the top of the scope, which may matter in certain cases. Otherwise they are equal. function foo() is a shorthand form. Further details on hoisting can be found in the JavaScript Scoping and Hoisting article.It's up to you. JavaScript has four object-creation patterns: pseudo-classical, prototypical, functional, and parts (Crockford, 2008). Each has its pros and cons, see Crockford in his video talks or get his book The Good Parts as Anon already suggested.I suggest you pick up some JavaScript frameworks, study their conventions and style, and find those practices and patterns that best fit you. For instance, the Dojo Toolkit provides a robust framework to write object-oriented JavaScript code which even supports multiple inheritance. Lastly, there is a blog dedicated to explore common JavaScript patterns and anti-patterns. Also check out the question Are there any coding standards for JavaScript? in Stack Overflow.I am going to write down some stuffs that I read or put in application since I asked this question. So people reading it won't get frustrated, as most of the answers are RTMF's in disguise (even if I must admit, suggested books ARE good).Any variable is supposed to be already declared at the higher scope in JS. So when ever you want a new variable, declare it to avoid bad surprises like manipulating a global var without noticing it. Therefore, always use the var keyword.In an object make, var the variable private. If you want to just declare a public variable, use this.my_var = my_value to do so.In JS, they are numerous way of declaring methods. For an OO programmer, the most natural and yet efficient way is to use the following syntax:Inside the object bodyThere is a drawback: inner functions won't be able to access "this" because of the funny JS scope. Douglas Crockford recommends to bypass this limitation using a conventional local variable named "that". So it becomesJS tries to automatically add ; at the end of the line if you forget it. Don't rely on this behavior, as you'll get errors that are a mess to debug.First ought to read about the prototype-based programming so you know what kind of beast you're dealing with and then take a look at JavaScript style guide at MDC and JavaScript page at MDC. I also find best to force the code quality with a tool, ie. JavaScript Lint or other variants.Best practices with OO sounds more like you want to find patterns than concentrate on code quality, so look at Google search: javascript patterns and jQuery patterns.You might want to check out Secrets of the JavaScript Ninja by John Resig (jQuery). "This book is intended to take an intermediate JavaScript developer and give him the knowledge he needs to create a cross-browser JavaScript library, from the ground, up."The draft is available through the publisher:

http://www.manning.com/resig/Douglas Crockford also has some nice JavaScript articles on his homepage:

http://www.crockford.com/I often feel like the only guy here who uses MooTools for my javascript.  It stands for My Object Oriented Tools, mootools.I really like their take on OOP in javascript.  You can use their class implementation along with jquery too, so you don't have to ditch jquery (though mootools does it all just as well).  Anyway, give the first link a good read and see what you think, the second link is to the mootools docs.MooTools & InheritanceMooTools ClassesHere's a book that covers most of the bases:Object Oriented Javascript for high quality applicatons and libraries

How to disable input conditionally in vue.js

Zaffar Saffee

[How to disable input conditionally in vue.js](https://stackoverflow.com/questions/38085180/how-to-disable-input-conditionally-in-vue-js)

I have an input:and in my Vue.js component, I have:validated being a boolean, it can be either 0 or 1, but no matter what value is stored in the database, my input is always disabled.I need the input to be disabled if false, otherwise it should be enabled and editable.Update:Doing this always enables the input (no matter I have 0 or 1 in the database):Doing this always disabled the input (no matter I have 0 or 1 in  the database):

2016-06-28 19:54:36Z

I have an input:and in my Vue.js component, I have:validated being a boolean, it can be either 0 or 1, but no matter what value is stored in the database, my input is always disabled.I need the input to be disabled if false, otherwise it should be enabled and editable.Update:Doing this always enables the input (no matter I have 0 or 1 in the database):Doing this always disabled the input (no matter I have 0 or 1 in  the database):To remove the disabled prop, you should set its value to false. This needs to be the boolean value for false, not the string 'false'. So, if the value for validated is either a 1 or a 0, then conditionally set the disabled prop based off that value. E.g.:Here is an example.you could have a computed property that returns a boolean dependent on whatever criteria you need.then put your logic in a computed property...Not difficult, check this.jsfiddleYour disabled attribute requires a boolean value:<input :disabled="validated" />Notice how i've only checked if validated - This should work as 0 is falsey ...e.g0 is considered to be false in JS (like undefined or null)1 is in fact considered to be trueTo be extra careful try:

<input :disabled="!!validated" />This double negation turns the falsey or truthy value of 0 or 1 to false or truedon't believe me? go into your console and type !!0 or !!1 :-)Also, to make sure your number 1 or 0 are definitely coming through as a Number and not the String '1' or '0' pre-pend the value you are checking with a + e.g <input :disabled="!!+validated"/> this turns a string of a number into a Number e.g+1 = 1

+'1' = 1

Like David Morrow said above you could put your conditional logic into a method - this gives you more readable code - just return out of the method the condition you wish to check. You can manipulate :disabled attribute in vue.js.It will accept a boolean, if it's true, then the input gets disabled, otherwise it will be enabled...Something like structured like below in your case for example:Also read this below:You may make a computed property and enable/disable any form type according to its value.Try thisvue jsTo toggle the input's disabled attribute was surprisingly complex.  The issue for me was twofold:(1)  Remember: the input's "disabled" attribute is NOT a Boolean attribute.

The mere presence of the attribute means that the input is disabled.However, the Vue.js creators have prepared this...

https://vuejs.org/v2/guide/syntax.html#Attributes (Thanks to @connexo for this... How to add disabled attribute in input text in vuejs?)(2) In addition, there was a DOM timing re-rendering issue that I was having.  The DOM was not updating when I tried to toggle back.Upon certain situations, "the component will not re-render immediately. It will update in the next 'tick.'"From Vue.js docs: https://vuejs.org/v2/guide/reactivity.htmlThe solution was to use:Fuller example workflow:Can use this add condition.Bear in mind that ES6 Sets/Maps don't appear to be reactive as far as i can tell, at time of writing.

Angular IE Caching issue for $http

Rahul

[Angular IE Caching issue for $http](https://stackoverflow.com/questions/16098430/angular-ie-caching-issue-for-http)

All the ajax calls that are sent from the IE are cached by Angular and I get a 304 response for all the subsequent calls. Although the request is the same, the response is not going be the same in my case. I want to disable this cache. I tried adding the cache attribute to $http.get but still it didn't help. How can this issue be resolved?

2013-04-19 06:17:12Z

All the ajax calls that are sent from the IE are cached by Angular and I get a 304 response for all the subsequent calls. Although the request is the same, the response is not going be the same in my case. I want to disable this cache. I tried adding the cache attribute to $http.get but still it didn't help. How can this issue be resolved?Instead of disabling caching for each single GET-request, I disable it globally in the $httpProvider: You can either append a unique querystring (I believe this is what jQuery does with the cache: false option) to the request.A perhaps better solution is if you have access to the server, then you can make sure that necessary headers are set to prevent caching. If you're using ASP.NET MVC this answer might help.you may add an interceptor .you should remove console.log lines after verifying.I simply added three meta tags into index.html on angular project, and cache issue was solved on IE.Duplicating my answer in another thread.For Angular 2 and newer, the easiest way to add no-cache headers by overriding RequestOptions:And reference it in your module:The guaranteed one that I had working was something along these lines:I had to merge 2 of the above solutions in order to guarantee the correct usage for all methods, but you can replace common with get or other method i.e. put, post, delete to make this work for different cases.This only line helped me (Angular 1.4.8):UPD: The problem is IE11 does aggressive caching. When I was looking into Fiddler I noticed that in F12 mode requests are sending "Pragma=no-cache" and endpoint is requested every time I visit a page. But in normal mode endpoint was requested only once at the first time when I visited the page.To avoid caching, one option is to give different URL for the same resource or data. To generate different URL, you can add a random query string to the end of the URL.  This technique works for JQuery, Angular or other type ajax requests.   I get it resolved appending datetime as an random number:Solution above will work (make the url unique by adding in the querystring a new param) but I prefer the solution propose [here]: Better Way to Prevent IE Cache in AngularJS?, which handle this at server level as it's not specific to IE. I mean, if that resource should not be cached, do it on the server (this as nothing to do with the browser used; it's intrisic to the resource).For example in java with JAX-RS do it programatically for JAX-RS v1 or  declativly for JAX-RS v2.I'm sure anyone will figure out how to do it This is a little bit to old but: Solutions like  is obsolete. Let the server handle the cache or not cache (in the response). The only way to guarantee no caching (thinking about new versions in production) is to change the js or css file with a version number. I do this with webpack. also you can try in your servce to set headers like for example:The correct, server-side, solution: Better Way to Prevent IE Cache in AngularJS?This issue is due to the IE caching problem as you said, you can test it in IE debug mode by pressing f12 (this will work fine in debug mode).IE will not take the server data in each time the page calls, it takes the data from cache. To disable this do either of the following://Before (issued one)this.httpService.get(this.serviceUrl + "/eAMobileService.svc/ValidateEngagmentName/" + engagementName , {})//After (working fine)this.httpService.get(this.serviceUrl + "/eAMobileService.svc/ValidateEngagmentName/" + engagementName + "?DateTime=" + new Date().getTime() + '', { cache: false })$httpProvider.defaults.headers.common['Pragma'] = 'no-cache';I just added this to View and it started working on IE. Confirmed to work on Angular 2.An option is to use the simple approach of adding a Timestamp with each request no need to clear cache.Try this, it worked for me in a similar case:-

How can I remove time from date with Moment.js?

Obsivus

[How can I remove time from date with Moment.js?](https://stackoverflow.com/questions/15130735/how-can-i-remove-time-from-date-with-moment-js)

It displays: "28 februari 2013 09:24"But I would like to remove the time at the end. How can I do that?I'm using Moment.js.

2013-02-28 08:25:31Z

It displays: "28 februari 2013 09:24"But I would like to remove the time at the end. How can I do that?I'm using Moment.js.Sorry to jump in so late, but if you want to remove the time portion of a moment() rather than formatting it, then the code is:Ref: http://momentjs.com/docs/#/manipulating/start-of/ Depending on what you're trying to do with it, format('LL') could do the trick. It produces something like this: The correct way would be to specify the input as per your requirement which will give you more flexibility.The present definition includes the following LTS  : 'h:mm:ss A',

 LT   : 'h:mm A',

 L    : 'MM/DD/YYYY',

 LL   : 'MMMM D, YYYY',

 LLL  : 'MMMM D, YYYY h:mm A',

 LLLL : 'dddd, MMMM D, YYYY h:mm A'

You can use any of these or change the input passed into moment().format().

For example, for your case you can pass moment.utc(dateTime).format('MMMM D, YYYY').You can also use this format:moment().format('ddd, ll'); // Wed, Jan 4, 2017With newer versions of moment.js you can also do this:See: http://momentjs.com/docs/#/parsing/object/.Whenever I use the moment.js library I specify the desired format this way:or... etc I hope you get the ideaInside the format function, you put the desired format. The example above will get rid of all unwanted elements from the date such as minutes and secondsYou can use this constructorhttp://momentjs.com/docs/#/parsing/object/Okay, so I know I'm way late to the party. Like 6 years late but this was something I needed to figure out and have it formatted YYYY-MM-DD.You can also pass in a parameter like, 2019-11-08T17:44:56.144.https://momentjs.com/docs/#/parsing/special-formats/Try this: For people like me want the long date format (LLLL) but without the time of day, there's a GitHub issue for that: https://github.com/moment/moment/issues/2505. For now, there's a workaround:

How to get start and end of day in Javascript?

Bdfy

[How to get start and end of day in Javascript?](https://stackoverflow.com/questions/8636617/how-to-get-start-and-end-of-day-in-javascript)

How to get start ( 00:00:00 ) and end ( 23:59:59 ) of today in timestamp ( GMT )? Computer use a local time.

2011-12-26 14:28:37Z

How to get start ( 00:00:00 ) and end ( 23:59:59 ) of today in timestamp ( GMT )? Computer use a local time.If you need to get the UTC time from those, you can use UTC().Using the momentjs library, this can be achieved with the startOf() and endOf() methods on the moment's current date object, passing the string 'day' as arguments:Local GMT:For UTC:Using the luxon.js library, same can be achieved using startOf and endOf methods by passing the 'day' as parameter and you may ask why not moment.js, answer is here for that.If you're just interested in timestamps in GMT you can also do this, which can be conveniently adapted for different intervals (hour: 1000 * 60 * 60, 12 hours: 1000 * 60 * 60 * 12, etc.)FYI (merged version of Tvanfosson)// how to use* it is applicable for Instant time type on Java8 which convert your local time automatically depending on your region.(if you are planning write global app)In MomentJs We can declare it like :I prefer to use date-fns library for date manipulating. It is really great modular and consistent tool. You can get start and end of the day this way:

Why were Javascript `atob()` and `btoa()` named like that?

Константин Ван

[Why were Javascript `atob()` and `btoa()` named like that?](https://stackoverflow.com/questions/33854103/why-were-javascript-atob-and-btoa-named-like-that)

In Javascript, window.atob() method decodes a base64 string and window.btoa() method encodes a string into base64.Then why weren't they named like base64Decode() and base64Encode()?

atob() and btoa() don't make sense because they're not semantic at all.I want to know the reason.

2015-11-22 11:11:59Z

In Javascript, window.atob() method decodes a base64 string and window.btoa() method encodes a string into base64.Then why weren't they named like base64Decode() and base64Encode()?

atob() and btoa() don't make sense because they're not semantic at all.I want to know the reason.The atob() and btoa() methods allow authors to transform content to and from the base64 encoding.From : http://www.w3.org/TR/html/webappapis.html#atobTo sum up the already given answers:Why ASCII and binary:(*) in base64 these are limited to: A-Z, a-z, 0-9, +, / and = (padding, only at the end) https://en.wikipedia.org/wiki/Base64P.S. I must admit I myself was initially confused by the naming and thought the names were swapped. I thought that b stand for "base64 encoded string" and a for "any string" :D.I know this is old, but it recently came up on Twitter, and I thought I'd share it as it is authoritative.Me:Him:In case the Minix link breaks, here's the man page content:Source: Brendan Eich, the creator of JavaScript. https://twitter.com/BrendanEich/status/998618208725684224I can't locate a source at the moment, but it is common knowledge that in this case, the b stands for 'binary', and the a for 'ASCII'.Therefore, the functions are actually named:ASCII to Binary for atob(), and

Binary to ASCII for btoa().Note this is browser implementation, and was left for legacy / backwards-compatibility purposes. In Node.js for example, these don't exist.

jQuery: Get height of hidden element in jQuery

mkoryak

[jQuery: Get height of hidden element in jQuery](https://stackoverflow.com/questions/2345784/jquery-get-height-of-hidden-element-in-jquery)

I need to get height of an element that is within a div that is hidden. Right now I show the div, get the height, and hide the parent div. This seems a bit silly. Is there a better way?I'm using jQuery 1.4.2:

2010-02-27 00:52:43Z

I need to get height of an element that is within a div that is hidden. Right now I show the div, get the height, and hide the parent div. This seems a bit silly. Is there a better way?I'm using jQuery 1.4.2:You could do something like this, a bit hacky though, forget position if it's already absolute:I ran into the same problem with getting hidden element width, so I wrote this plugin call jQuery Actual to fix it. Instead of using use will give you the right value for hidden element or element has a hidden parent.Hope this help :)You are confuising two CSS styles, the display style and the visibility style.If the element is hidden by setting the visibility css style, then you should be able to get the height regardless of whether or not the element is visible or not as the element still takes space on the page.If the element is hidden by changing the display css style to "none", then the element doesn't take space on the page, and you will have to give it a display style which will cause the element to render in some space, at which point, you can get the height.I've actually resorted to a bit of trickery to deal with this at times.  I developed a jQuery scrollbar widget where I encountered the problem that I don't know ahead of time if the scrollable content is a part of a hidden piece of markup or not.  Here's what I did:This works for the most part, but there's an obvious problem that can potentially come up.  If the content you are cloning is styled with CSS that includes references to parent markup in their rules, the cloned content will not contain the appropriate styling, and will likely have slightly different measurements.  To get around this, you can make sure that the markup you are cloning has CSS rules applied to it that do not include references to parent markup.Also, this didn't come up for me with my scroller widget, but to get the appropriate height of the cloned element, you'll need to set the width to the same width of the parent element.  In my case, a CSS width was always applied to the actual element, so I didn't have to worry about this, however, if the element doesn't have a width applied to it, you may need to do some kind of recursive traversal of the element's DOM ancestry to find the appropriate parent element's width.   Building further on user Nick's answer and user hitautodestruct's plugin on JSBin, I've created a similar jQuery plugin which retrieves both width and height and returns an object containing these values.It can be found here:

http://jsbin.com/ikogez/3/I've completely redesigned this tiny little plugin as it turned out that the previous version (mentioned above) wasn't really usable in real life environments where a lot of DOM manipulation was happening. This is working perfectly:Building further on Nick's answer:I found it's better to do this:Setting CSS attributes will insert them inline, which will overwrite any other attributes you have in your CSS file. By removing the style attribute on the HTML element, everything is back to normal and still hidden, since it was hidden in the first place.You could also position the hidden div off the screen with a negative margin rather than using display:none, much like a the text indent image replacement technique.eg.This way the height() is still available.I try to find working function for hidden element but I realize that CSS is much complex than everyone think. There are a lot of new layout techniques in CSS3 that might not work for all previous answers like flexible box, grid, column or even element inside complex parent element.flexibox example

I think the only sustainable & simple solution is real-time rendering. At that time, browser should give you that correct element size. Sadly, JavaScript does not provide any direct event to notify when element is showed or hidden. However, I create some function based on DOM Attribute Modified API that will execute callback function when visibility of element is changed.For more information, Please visit at my project GitHub.https://github.com/Soul-Master/visible.event.jsdemo: http://jsbin.com/ETiGIre/7Following Nick Craver's solution, setting the element's visibility allows it to get accurate dimensions. I've used this solution very very often. However, having to reset the styles manually, I've come to find this cumbersome, given that modifying the element's initial positioning/display in my css through development, I often forget to update the related javascript code. The following code doesn't reset the styles per say, but removes the inline styles added by javascript:The only assumption here is that there can't be other inline styles or else they will be removed aswell. The benefit here, however, is that the element's styles are returned to what they were in the css stylesheet. As a consequence, you can write this up as a function where an element is passed through, and a height or width is returned.Another issue I've found of setting the styles inline via js is that when dealing with transitions through css3, you become forced to adapt your style rules' weights to be stronger than an inline style, which can be frustrating sometimes.By definition, an element only has height if it's visible.Just curious: why do you need the height of a hidden element?One alternative is to effectively hide an element by putting it behind (using z-index) an overlay of some kind).In my circumstance I also had a hidden element stopping me from getting the height value, but it wasn't the element itself but rather one of it's parents... so I just put in a check for one of my plugins to see if it's hidden, else find the closest hidden element. Here's an example:In fact, this is an amalgamation of Nick, Gregory and Eyelidlessness's responses to give you the use of Gregory's improved method, but utilises both methods in case there is supposed to be something in the style attribute that you want to put back, and looks for a parent element.My only gripe with my solution is that the loop through the parents isn't entirely efficient. One workaround is to create a parent div outside the element you want to get the height of, apply a height of '0' and hide any overflow. Next, take the height of the child element and remove the overflow property of the parent.Here's a script I wrote to handle all of jQuery's dimension methods for hidden elements, even descendants of hidden parents. Note that, of course, there's a performance hit using this.If you've already displayed the element on the page previously, you can simply take the height directly from the DOM element (reachable in jQuery with .get(0)), since it is set even when the element is hidden:same for the width:(thanks to Skeets O'Reilly for correction)

Base64 encoding and decoding in client-side Javascript

Mo.

[Base64 encoding and decoding in client-side Javascript](https://stackoverflow.com/questions/2820249/base64-encoding-and-decoding-in-client-side-javascript)

Are there any methods in JavaScript that could be used to encode and decode a string using base64 encoding?

2010-05-12 15:25:00Z

Are there any methods in JavaScript that could be used to encode and decode a string using base64 encoding?Some browsers such as Firefox, Chrome, Safari, Opera and IE10+ can handle Base64 natively. Take a look at this Stackoverflow question. It's using btoa() and atob() functions.For server-side JavaScript (Node), you can use Buffers to decode.If you are going for a cross-browser solution, there are existing libraries like CryptoJS or code like:http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.htmlWith the latter, you need to thoroughly test the function for cross browser compatibility. And error has already been reported.In Gecko/WebKit-based browsers (Firefox, Chrome and Safari) and Opera, you can use btoa() and atob().Original answer: How can you encode a string to Base64 in JavaScript?Re-written and modularized UTF-8 and Base64 Javascript Encoding and Decoding Libraries / Modules for AMD, CommonJS, Nodejs and Browsers. Cross-browser compatible.Here is how you encode normal text to base64 in Node.js:And here is how you decode base64 encoded strings:To encode an array of bytes using dojox.encoding.base64:To decode a base64-encoded string:If you would like to learn more about how base64 is encoded in general, and in JavaScript in-particular, I would recommend this article:  Computer science in JavaScript: Base64 encodingHere is a tightened up version of Sniper's post. It presumes well formed base64 string with no carriage returns. This version eliminates a couple of loops, adds the &0xff fix from Yaroslav, eliminates trailing nulls, plus a bit of code golf.Short and fast Base64 JavaScript Decode Function without Failsafe:https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_.22Unicode_Problem.22The php.js project has JavaScript implementations of many of PHP's functions. base64_encode and base64_decode are included.Did someone say code golf? =)The following is my attempt at improving my handicap while catching up with the times. Supplied for your convenience.What I was actually after was an asynchronous implementation and to my surprise it turns out forEach as opposed to JQuery's $([]).each method implementation is very much synchronous.If you also had such crazy notions in mind a 0 delay window.setTimeout will run the base64 decode asynchronously and execute the callback function with the result when done.@Toothbrush suggested "index a string like an array", and get rid of the split. This routine seems really odd and not sure how compatible it will be, but it does hit another birdie so lets have it.While trying to find more information on JavaScript string as array I stumbled on this pro tip using a /./g regex to step through a string. This reduces the code size even more by replacing the string in place and eliminating the need of keeping a return variable.If however you were looking for something a little more traditional perhaps the following is more to your taste.I didn't have the trailing null issue so this was removed to remain under par but it should easily be resolved with a trim() or a trimRight() if you'd prefer, should this pose a problem for you.ie.The result is an ascii byte string, if you need unicode the easiest is to escape the byte string which can then be decoded with decodeURIComponent to produce the unicode string.Since escape is being deprecated we could change our function to support unicode directly without the need for escape or String.fromCharCode we can produce a % escaped string ready for URI decoding.nJoy!I have tried the Javascript routines at phpjs.org and they have worked well.I first tried the routines suggested in the chosen answer by Ranhiru Cooray -  http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.htmlI found that they did not work in all circumstances.   I wrote up a test case where these routines fail and posted them to GitHub at:https://github.com/scottcarter/base64_javascript_test_data.gitI also posted a comment to the blog post at ntt.cc to alert the author (awaiting moderation - the article is old so not sure if comment will get posted).I'd rather use the bas64 encode/decode methods from CryptoJS, the most popular library for standard and secure cryptographic algorithms implemented in JavaScript using best practices and patterns.In Node.js we can do it in simple way 

Check if a JavaScript string is a URL

Bruno

[Check if a JavaScript string is a URL](https://stackoverflow.com/questions/5717093/check-if-a-javascript-string-is-a-url)

Is there a way in JavaScript to check if a string is a URL?RegExes are excluded because the URL is most likely written like stackoverflow; that is to say that it might not have a .com, www or http.

2011-04-19 13:26:55Z

Is there a way in JavaScript to check if a string is a URL?RegExes are excluded because the URL is most likely written like stackoverflow; that is to say that it might not have a .com, www or http.A related question with an answer:Javascript regex URL matchingOr this Regexp from Devshed:You can try to use URL constructor: if it doesn't throw, the string is a valid URL:The term 'URL' is defined in RFC 3886 (as URI); it must begin with a scheme name, and the scheme name is not limited to http/https.Notable examples:Rather than using a regular expression, I would recommend making use of an anchor element. when you set the href property of an anchor, various other properties are set. sourceHowever, if the value href is bound to is not a valid url, then the value of those auxiliary properties will be the empty string.Edit: as pointed out in the comments: if an invalid url is used, the properties of the current URL may be substituted.So, as long as you're not passing in the URL of the current page, you can do something like:I am using below function to validate URL with or without http/https:To Validate Url using javascript is shown belowRely on a library:

https://www.npmjs.com/package/valid-urlImprovement on the accepted answer...Here is yet another method.You can use the URL native API:(I don't have reps to comment on ValidURL example; hence post this as an answer.)While use of protocol relative URLs is not encouraged (The Protocol-relative URL), they do get employed sometimes. To validate such an URL with a regular expression the protocol part could be optional, e.g.:As others noted, regular expression does not seem to be the best suited approach for validating URLs, though. As has been noted the perfect regex is elusive but still seems to be a reasonable approach (alternatives are server side tests or the new experimental URL API). However the high ranking answers are often returning false for common URLs but even worse will freeze your app/page for minutes on even as simple a string as isURL('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'). It's been pointed out in some of the comments, but most probably haven't entered a bad value to see it. Hanging like that makes that code unusable in any serious application. I think it's due to the repeated case insensitive sets in code like ((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|' .... Take out the 'i' and it doesn't hang but will of course not work as desired. But even with the ignore case flag those tests reject high unicode values that are allowed.The best already mentioned is:That comes from Github segmentio/is-url. The good thing about a code repository is you can see the testing and any issues and also the test strings run through it. There's a branch that would allow strings missing protocol like google.com, though you're probably making too many assumptions then. The repository has been updated and I'm not planning on trying to keep up a mirror here. It's been broken up into separate tests to avoid RegEx redos which can be exploited for DOS attacks (I don't think you have to worry about that with client side js, but you do have to worry about your page hanging for so long that your visitor leaves your site).There is one other repository I've seen that may even be better for isURL at dperini/regex-weburl.js, but it is highly complex. It has a bigger test list of valid and invalid URLs. The simple one above still passes all the positives and only fails to block a few odd negatives like http://a.b--c.de/ as well as the special ips.Whichever you choose, run it through this function which I've adapted from the tests on dperini/regex-weburl.js, while using your browser's Developer Tools inpector.And then test that string of 'a's.See this comparison of isURL regex by Mathias Bynens for more info before you post a seemingly great regex.I can't comment on the post that is the closest #5717133, but below is the way I figured out how to get @tom-gullen regex working.One function that I have been using to validate a URL "string" is:This function will return a boolean whether the string is a URL.Examples:Use validator.jsES6No ES6You can also fine tune this function's behavior by passing optional options object as the second argument of isURLHere is the default options object:host_whitelist and host_blacklist can be arrays of hosts. They also support regular expressions.This is quite difficult to do with pure regex because URLs have many 'inconveniences'.Nevertheless, here is a function that handles pretty much everything except:The question asks a validation method for an url such as stackoverflow, without the protocol or any dot in the hostname. So, it's not a matter of validating url sintax, but checking if it's a valid url, by actually calling it.I tried several methods for knowing if the url true exists and is callable from within the browser, but did not find any way to test with javascript the response header of the call:So, the best solution I can think of is getting some tool to perform CURL using javascript trying something like curl -I <url>. Unfortunately I did not find any and in appereance it's not possible. I will appreciate any comments on this.But, in the end, I have a server running PHP and as I use Ajax for almost all my requests, I wrote a function on the server side to perform the curl request there and return to the browser. Regarding the single word url on the question 'stackoverflow' it will lead me to https://daniserver.com.ar/stackoverflow, where daniserver.com.ar is my own domain. This seems to be one of the hardest problems in CS ;)Here's another incomplete solution that works well enough for me and better than the others I've seen here. I'm using a input[type=url] for this in order to support IE11, otherwise it would be much simpler using window.URL to perform the validation instead:In order to accept incomplete inputs such as "www.mydomain.com" it will also make it valid assuming the protocol is "http" in those cases and returning the valid URL if the address is valid. It returns false when invalid.It also supports IPv4 domains, but not IPv6.In my case my only requirement is that the user input won't be interpreted as a relative link when placed in the href of an a tag and the answers here were either a bit OTT for that or allowed URLs not meeting my requirements, so this is what I'm going with:The same thing could be achieved pretty easily without regex.this working with meIf you can change the input type, I think this solution would be much easier:You can simple use type="url" in your input and the check it with checkValidity() in jsE.g:your.htmlyour.jsThis is defiantly not the most effective approach, but it is readable and easy to form to whatever you need. And it's easier to add regex/complexity from here. So here is a very pragmatic approachTEST:I think using the native URL API is better than a complex regex patterns as @pavlo suggested. It has some drawbacks though which we can fix by some extra code. This approach fails for the following valid url.We can add the missing protocol beforehand to avoid that. It also fails to detect following invalid url.So why check the whole url? we can just check the domain. I borrowed the regex to verify domain from here. The hostname attribute is empty string for javascript:void(0), so it works for that too, and you can also add IP address verifier too. I'd like to stick to native API's most, and hope it starts to support everything in near future. Here's just a very simple check to make sure there's a valid protocol, and the domain extension must be two or more characters.If you need to also support https://localhost:3000 then use this modified version of [Devshed]s regex.Mathias Bynens has compiled a list of well-known URL regexes with test URLs.  There is little reason to write a new regular expression; just pick an existing one that suits you best.But the comparison table for those regexes also shows that it is next to impossible to do URL validation with a single regular expression.  All of the regexes in Bynens' list produce false positives and false negatives.I suggest that you use an existing URL parser (for example new URL('http://www.example.com/') in JavaScript) and then apply the checks you want to perform against the parsed and normalized form of the URL resp. its components.  Using the JavaScript URL interface has the additional benefit that it will only accept such URLs that are really accepted by the browser.You should also keep in mind that technically incorrect URLs may still work. For example http://w_w_w.example.com/, http://www..example.com/, http://123.example.com/ all have an invalid hostname part but every browser I know will try to open them without complaints, and when you specify IP addresses for those invalid names in /etc/hosts/ such URLs will even work but only on your computer.The question is, therefore, not so much whether a URL is valid, but rather which URLs work and should be allowed in a particular context.If you want to do URL validation there are a lot of details and edge cases that are easy to overlook:Which of these limitations and rules apply is a question of project requirements and taste.I have recently written a URL validator for a web app that is suitable for user-supplied URLs in forums, social networks, or the like.  Feel free to use it as a base for your own one:I have also written a blog post The Gory Details of URL Validation with more in-depth information.I change the function to Match + make a change here with the slashes and its work: (http:// and https) bothThere are a couple of tests using the URL constructor which do not delineate whether the input is a string or URL object.

Onclick javascript to make browser go back to previous page?

Doc Holiday

[Onclick javascript to make browser go back to previous page?](https://stackoverflow.com/questions/8067510/onclick-javascript-to-make-browser-go-back-to-previous-page)

Is there a function I can attach as a click event of a button to make the browser go back to previous page?

2011-11-09 15:43:05Z

Is there a function I can attach as a click event of a button to make the browser go back to previous page?Add this in your input elementorPut this to the button onclick handle. It should look like this:For Going to previous pageFirst MethodSecond Methodif we want to more than one step back then increase You just need to call the following:Shortest Yet!http://jsfiddle.net/qXrbx/I prefer the .go(-number) method as then, for 1 or many 'backs' there's only 1 method to use/remember/update/search for, etc.Also, using a  tag for a back button seems more appropriate than tags with names and types...Simple. One line.Like Wim's and Malik's answer, but just in one line.This is the only thing that works on all current browsers:Works for me everytime

What is the purpose of a plus symbol before a variable?

goh

[What is the purpose of a plus symbol before a variable?](https://stackoverflow.com/questions/6682997/what-is-the-purpose-of-a-plus-symbol-before-a-variable)

this really sounds like a simple question but I had no luck searching. what does the +d in means?

2011-07-13 17:24:19Z

this really sounds like a simple question but I had no luck searching. what does the +d in means?The + operator returns the numeric representation of the object.  So in your particular case, it would appear to be predicating the if on whether or not d is a non-zero number.Reference here.  And, as pointed out in comments, here.It is a unary "+" operator which yields a numeric expression. It would be the same as d*1, I believe.As explained in other answers it converts the variable to a number. Specially useful when d can be either a number or a string  function that evaluates to a number. Example (using the addMonths function in the question): then the +d will evaluate to a number in all cases. Thus avoiding the need to check for the type and take different code paths depending on whether d is a number, a function or a string that can be converted to a number.

How to save an HTML5 Canvas as an image on a server?

nathan lachenmyer

[How to save an HTML5 Canvas as an image on a server?](https://stackoverflow.com/questions/13198131/how-to-save-an-html5-canvas-as-an-image-on-a-server)

I'm working on a generative art project where I would like to allow users to save the resulting images from an algorithm. The general idea is:However, I’m stuck on the second step. After some help from Google, I found this blog post, which seemed to be exactly what I wanted:Which led to the JavaScript code:and corresponding PHP (testSave.php):But this doesn’t seem to do anything at all.More Googling turns up this blog post which is based off of the previous tutorial. Not very different, but perhaps worth a try:This one creates a file (yay) but it’s corrupted and doesn’t seem to contain anything. It also appears to be empty (file size of 0).Is there anything really obvious that I’m doing wrong? The path where I’m storing my file is writable, so that isn’t an issue, but nothing seems to be happening and I’m not really sure how to debug this.Following Salvidor Dali’s link I changed the AJAX request to be:And now the image file is created and isn’t empty! It seems as if the content type matters and that changing it to x-www-form-urlencoded allowed the image data to be sent.The console returns the (rather large) string of base64 code and the datafile is ~140 kB. However, I still can’t open it and it seems to not be formatted as an image.

2012-11-02 15:18:46Z

I'm working on a generative art project where I would like to allow users to save the resulting images from an algorithm. The general idea is:However, I’m stuck on the second step. After some help from Google, I found this blog post, which seemed to be exactly what I wanted:Which led to the JavaScript code:and corresponding PHP (testSave.php):But this doesn’t seem to do anything at all.More Googling turns up this blog post which is based off of the previous tutorial. Not very different, but perhaps worth a try:This one creates a file (yay) but it’s corrupted and doesn’t seem to contain anything. It also appears to be empty (file size of 0).Is there anything really obvious that I’m doing wrong? The path where I’m storing my file is writable, so that isn’t an issue, but nothing seems to be happening and I’m not really sure how to debug this.Following Salvidor Dali’s link I changed the AJAX request to be:And now the image file is created and isn’t empty! It seems as if the content type matters and that changing it to x-www-form-urlencoded allowed the image data to be sent.The console returns the (rather large) string of base64 code and the datafile is ~140 kB. However, I still can’t open it and it seems to not be formatted as an image.Here is an example how to achieve what you need:1) Draw something (taken from canvas tutorial)2) Convert canvas image to URL format (base64)3) Send it to your server via Ajax3) Save base64 on your server as an image (here is how to do this in PHP, the same ideas is in every language. Server side in PHP can be found here):I played with this two weeks ago, it's very simple. The only problem is that all the tutorials just talk about saving the image locally. This is how I did it:1) I set up a form so I can use a POST method.2) When the user is done drawing, he can click the "Save" button.3) When the button is clicked I take the image data and put it into a hidden field. After that I submit the form.4) When the form is submited I have this small php script:I think you should tranfer image in base64 to image with blob, because when you use base64 image, it take a lot of log lines or a lot of line will send to server. With blob, it only the file.

You can use this code bellow:And canvas code here:After that you can use ajax with Form:This code using CoffeeScript syntax.if you want to use javascript, please paste the code to http://js2.coffeeSend canvas image to PHP:Here's PHP script:

photo_upload.phpIf you want to save data that is derived from a Javascript canvas.toDataURL() function, you have to convert blanks into plusses. If you do not do that, the decoded data is corrupted:http://php.net/manual/ro/function.base64-decode.phpI've worked on something similar.

Had to convert canvas Base64-encoded image to Uint8Array Blob.In addition to Salvador Dali's answer: on the server side don't forget that the data comes in base64 string format. It's important because in some programming languages you need to explisitely say that this string should be regarded as bytes not simple Unicode string. Otherwise decoding won't work: the image will be saved but it will be an unreadable file.

Get a UTC timestamp [duplicate]

bgcode

[Get a UTC timestamp [duplicate]](https://stackoverflow.com/questions/8047616/get-a-utc-timestamp)

How can I get the current UTC timestamp in JavaScript?  I want to do this so I can send timestamps from the client-side that are independent of their timezone.

2011-11-08 08:18:22Z

How can I get the current UTC timestamp in JavaScript?  I want to do this so I can send timestamps from the client-side that are independent of their timezone.For more information, see @James McMahon's answer.As wizzard pointed out, the correct method is,or under Javascript 1.5, justFrom the documentation,If you wanted to make a time stamp without milliseconds you can use, I wanted to make this an answer so the correct method is more visible. You can compare ExpExc's and Narendra Yadala's results to the method above at http://jsfiddle.net/JamesFM/bxEJd/, and verify with http://www.unixtimestamp.com/ or by running date +%s on a Unix terminal.You can use Date.UTC method to get the time stamp at the UTC timezone.Usage:Live demo here http://jsfiddle.net/naryad/uU7FH/1/"... that are independent of their timezone"

Determine if string is in list in JavaScript

ErikE

[Determine if string is in list in JavaScript](https://stackoverflow.com/questions/2430000/determine-if-string-is-in-list-in-javascript)

In SQL we can see if a string is in a list like so:What's a good way to do this in JavaScript? It's so clunky to do this:And I'm not sure about the performance or clarity of this:Or one could use the switch function:But that is a horrible mess. Any ideas?In this case, I have to use Internet Explorer 7 as it's for a corporate intranet page. So ['a', 'b', 'c'].indexOf(str) !== -1 won't work natively without some syntax sugar.

2010-03-12 01:53:45Z

In SQL we can see if a string is in a list like so:What's a good way to do this in JavaScript? It's so clunky to do this:And I'm not sure about the performance or clarity of this:Or one could use the switch function:But that is a horrible mess. Any ideas?In this case, I have to use Internet Explorer 7 as it's for a corporate intranet page. So ['a', 'b', 'c'].indexOf(str) !== -1 won't work natively without some syntax sugar.You can call indexOf:If you're using ES6, you can construct an array of the items, and use includes:This has some inherent benefits over indexOf because it can properly test for the presence of NaN in the list, and can match missing array elements such as the middle one in [1, , 2] to undefined. includes also works on JavaScript typed arrays such as Uint8Array.If you're concerned about browser support (such as for IE or Edge), you can check Array.includes at CanIUse.Com, and if you want to target a browser or browser version that's missing include, I recommend polyfill.io for polyfilling.You could add a new isInList property to strings as follows:Then use it like so:You can do the same thing for Number.prototype.If you are using a modern browser, indexOf always works. However, for IE8 and earlier you'll need a polyfill.If indexOf returns -1, the item is not in the list. Be mindful though, that this method will not properly check for NaN, and while it can match an explicit undefined, it can’t match a missing element to undefined as in the array [1, , 2].If you don't want to use a service like polyfill.io as mentioned above, you can always include in your own source code standards-compliant custom polyfills. For example, Mozilla Developer Network has one for indexOf.In this situation where I had to make a solution for Internet Explorer 7, I "rolled my own" simpler version of the indexOf() function that is not standards-compliant:However, I don't think modifying Array.prototype is the best answer in the long term. Modifying Object and Array prototypes in JavaScript can lead to serious bugs. You need to decide whether doing so is safe in your own environment. Of primary note is that iterating an array (when Array.prototype has added properties) with for ... in will return the new function name as one of the keys:Your code may work now, but the moment someone in the future adds a third-party JavaScript library or plugin that isn't zealously guarding against inherited keys, everything can break.The old way to avoid that breakage is, during enumeration, to check each value to see if the object actually has it as a non-inherited property with if (arr.hasOwnProperty(x)) and only then work with that x.The new ES6 way to avoid this extra-key problem is to use of instead of in, for (let x of arr). However, unless you can guarantee that all of your code and third-party libraries strictly stick to this method, then for the purposes of this question you'll probably just want to use includes as stated above.Most of the answers suggest the Array.prototype.indexOf method, the only problem is that it will not work on any IE version before IE9.As an alternative I leave you two more options that will work on all browsers:Arrays have an indexOf method which can be used to search for strings:A trick I've used isYou could do something likeHere's mine:This one is faster if you're OK with passing an array:Here's the jsperf: http://jsperf.com/bmcgin-inlsitRegExp is universal, but I understand that you're working with arrays. So, check out this approach. I use to use it, and it's very effective and blazing fast!You can also apply some modifications, i.e.:Using indexOf(it doesn’t work with IE8).To support IE8, you could implement Mozilla’s indexOf.Regular Expressions via String.prototype.match (docs).Looks like you need to use in_array function.jQuery -> inArray Prototype -> Array.indexOfOr, see these examples if you are not using jQuery or Prototype:Stylistic note: variables named thisthing thatthing, should be named to tell you something about what they contain (noun).In addition to indexOf (which other posters have suggested), using prototype's Enumerable.include() can make this more neat and concise:Thanks for the question, and the solution using the Array.indexOf method.I used the code from this solution to create a inList() function that would, IMO, make the writing simpler and the reading clearer:USAGE:I'm surprised no one had mentioned a simple function that takes a string and a list.My solution results in a syntax like this:And I implement this by extending the basic Object prototype, like this:We might alternatively name the method isInArray (but probably not inArray) or simply isIn.Advantages: Simple, straightforward, and self-documenting.This checks for '.' in list.A simplified version of SLaks' answer also works:....since strings are sort of arrays themselves. :)If needed, implement the indexof function for Internet Explorer as described before me.

How to quickly and conveniently disable all console.log statements in my code?

Zack Burt

[How to quickly and conveniently disable all console.log statements in my code?](https://stackoverflow.com/questions/1215392/how-to-quickly-and-conveniently-disable-all-console-log-statements-in-my-code)

Is there any way to turn off all console.log statements in my JavaScript code, for testing purposes?

2009-07-31 23:50:31Z

Is there any way to turn off all console.log statements in my JavaScript code, for testing purposes?Redefine the console.log function in your script. That's it, no more messages to console.EDIT:Expanding on Cide's idea. A custom logger which you can use to toggle logging on/off from your code.From my Firefox console:How to use the above 'logger'? In your ready event, call logger.disableLogger so that console messages are not logged. Add calls to logger.enableLogger and logger.disableLogger inside the method for which you want to log messages to the console. The following is more thorough:This will zero out the common methods in the console if it exists, and they can be called without error and virtually no performance overhead. In the case of a browser like IE6 with no console, the dummy methods will be created to prevent errors. Of course there are many more functions in Firebug, like trace, profile, time, etc. They can be added to the list if you use them in your code. You can also check if the debugger has those special methods or not (ie, IE) and zero out the ones it does not support:As far as I can tell from the documentation, Firebug doesn't supply any variable to toggle debug state. Instead, wrap console.log() in a wrapper that conditionally calls it, i.e.:To not have to change all the existing calls, you can use this instead:It is not a good practice to overwrite built-in functions. There is also no guarantee that you will suppress all output, other libraries you use may revert your changes and there are other functions that may write to the console; .dir(), .warning(), .error(), .debug(), .assert() etc.As some suggested, you could define a DEBUG_MODE variable and log conditionally. Depending on the complexity and nature of your code, it may be a good idea to write your own logger object/function that wraps around the console object and has this capability built-in. That would be the right place to do deal with instrumentation.That said, for 'testing' purposes you can write tests instead of printing to the console. If you are not doing any testing, and those console.log() lines were just an aid to write your code, simply delete them.I realize this is an old post but it still pops up at the top of Google results, so here is a more elegant non-jQuery solution that works in the latest Chrome, FF, and IE.I know you asked how to disable console.log, but this might be what you're really after.  This way you don't have to explicitly enable or disable the console.  It simply prevents those pesky console errors for people who don't have it open or installed.Just change the flag DEBUG to override the console.log function. This should do the trick. I am surprised that of all those answers no one combines:I'd go for this:After I searched for this issue aswell and tried it within my cordova app, I just want to warn every developer for windows phone to not overwritebecause the app will crash on startup.It won't crash if you're developing local if you're lucky, but submitting in store it will result in crashing the app.Just overwrite if you need to.This works in my app:If you're using IE7, console won't be defined. So a more IE friendly version would be:This a hybrid of answers from SolutionYogi and Chris S. It maintains the console.log line numbers and file name. Example jsFiddle. If you use Grunt you can add a task in order to remove/comment the console.log statements. Therefore the console.log are no longer called.https://www.npmjs.org/package/grunt-remove-logging-callsIve been using the following to deal with he problem:-Set debug to 1 to enable debugging. Then use the logger function when outputting debug text. It's also set up to accept two parameters.So, instead ofuseI have used winston logger earlier.  Nowadays I am using below simpler code from experience:Or, you could have a variable in your code if you like, but above is better.Now, based on your LOG_LEVEL settings made in the point 1 (like, setx LOG_LEVEL log and restart command line), some of the above will print, others won't printHope that helped.Warning: Shameless plug!You could also use something like my JsTrace object to have modular tracing with module-level "switching" capability to only turn on what you want to see at the time.http://jstrace.codeplex.com(Also has a NuGet package, for those who care)All levels default to "error", though you can shut them "off".

Though, I can't think of why you would NOT want to see errorsYou can change them like this:Fore more docs, check out the DocumentationTI found a little more advanced piece of code in this url JavaScript Tip: Bust and Disable console.log:I developed a library for this usecase: https://github.com/sunnykgupta/jsLoggerFeatures:Is open for modifications and will be updated whenever new suggestions come up.This should override all methods of window.console. You can put it on the very top of your scripts section, and if you are on a PHP framework you can only print this code when your app environment is production, or if some kind of debug flag is disabled. Then you would have all your logs in your code working on development environments or in debug mode.I wrote this:Unfortunately it doesn't work on use strict mode.So using console.fn.setEnabled = setEnabled and then console.fn.setEnabled(false) where fn could be almost any console function.

For your case would be:I wrote this too:so then you just need to put in the FLAGS the default value (before execute the above code), like FLAGS.LOG = false and the log function would be disabled by default, and still you could enabled it calling console.log.setEnabled(true)My comprehensive solution to disable/override all console.* functions is here.Of course, please make sure you are including it after checking necessary context. For example, only including in production release, it's not bombing any other crucial components etc.Quoting it here:If you're using gulp, then you can use this plugin:A simplification of https://stackoverflow.com/a/46189791/871166You could use javascript AOP (e.g. jquery-aop) to intercept all calls to console.debug/log (around) and do not proceed with the actual invocation if some global variable is set to false. You could even do an ajax call (now and then) so you can change the log enabled/disabled behavior on the server which can be very interesting to enable debugging when facing an issue in a staging environment or such.You can use logeek, It allows you to control your log messages visibility. Here is how you do that:You can also logeek.show('nothing') to totally disable every log message.After doing some research and development for this problem, I came across this solution which will hide warnings/Errors/Logs as per your choice.Add this code before JQuery plugin (e.g /../jquery.min.js) even as this is JavaScript code that does not require JQuery. Because some warnings are in JQuery itself. Thanks!!I wrote a ES2015 solution ( use only with Webpack ).Description:

What does「publicPath」in Webpack do?

Misha Moroshko

[What does「publicPath」in Webpack do?](https://stackoverflow.com/questions/28846814/what-does-publicpath-in-webpack-do)

Webpack docs state that output.publicPath is:Could you please elaborate on what this actually means?I use output.path and output.filename to specify where Webpack should output the result, but I’m not sure what to put in output.publicPath and whether it is required.

2015-03-04 04:46:14Z

Webpack docs state that output.publicPath is:Could you please elaborate on what this actually means?I use output.path and output.filename to specify where Webpack should output the result, but I’m not sure what to put in output.publicPath and whether it is required.Local disk directory to store all your output files (Absolute path).Example: path.join(__dirname, "build/")Webpack will output everything into localdisk/path-to-your-project/build/Where you uploaded your bundled files. (Relative to server root)Example: /assets/Assumed you deployed the app at server root http://server/.By using /assets/, the app will find webpack assets at: http://server/assets/. Under the hood, every urls that webpack encounters will be re-written to begin with "/assets/".When executed in the browser, webpack needs to know where you'll host the generated bundle. Thus it is able to request additional chunks (when using code splitting) or referenced files loaded via the file-loader or url-loader respectively.For example: If you configure your http server to host the generated bundle under /assets/ you should write: publicPath: "/assets/"   the publicPath is just used for dev purpose, I was confused at first time I saw this config property, but it makes sense now that I've used webpack for a whilesuppose you put all your js source file under src folder, and you config your webpack to build the source file to dist folder with output.path.But you want to serve your static assets under a more meaningful location like webroot/public/assets, this time you can use out.publicPath='/webroot/public/assets', so that in your html, you can reference your js with <script src="/webroot/public/assets/bundle.js"></script>.when you request webroot/public/assets/bundle.js the webpack-dev-server will find the js under the dist folderUpdate: thanks for Charlie Martin to correct my answeroriginal: the publicPath is just used for dev purpose, this is not just for dev purposeYou can use publicPath to point to the location where you want webpack-dev-server to serve its "virtual" files. The publicPath option will be the same location of the content-build option for webpack-dev-server.  webpack-dev-server creates virtual files that it will use when you start it. These virtual files resemble the actual bundled files webpack creates. Basically you will want the --content-base option to point to the  directory your index.html is in. Here is an example setup:webpack-dev-server has created a virtual assets folder along with a virtual bundle.js file that it refers to. You can test this by going to localhost:8080/assets/bundle.js then check in your application for these files. They are only generated when you run the webpack-dev-server.in my case,

i have a cdn,and i am going to place all my processed static files (js,imgs,fonts...) into my cdn,suppose the url is http://my.cdn.com/so if there is a js file which is the orginal refer url in html is './js/my.js'

it should became http://my.cdn.com/js/my.js in production environmentin that case,what i need to do is just set publicpath equals http://my.cdn.com/

and webpack will automatic add that prefixfilename specifies the name of file into which all your bundled code is going to get accumulated after going through build step. path specifies the output directory where the app.js(filename) is going to get saved in the disk. If there is no output directory, webpack is going to create that directory for you.

for example: This will create a directory myproject/examples/dist and under that directory it creates app.js, /myproject/examples/dist/app.js. After building, you can browse to myproject/examples/dist/app.js to see the bundled codepublicPath: "What should I put here?"publicPath specifies the virtual directory in web server from where bundled file, app.js is going to get served up from. Keep in mind, the word server when using publicPath can be either webpack-dev-server or express server or other server that you can use with webpack.for examplethis configuration tells webpack to bundle all your js files into examples/dist/app.js and write into that file. publicPath tells webpack-dev-server or express server to serve this bundled file ie examples/dist/app.js from specified virtual location in server ie /public/assets/js. So in your html file, you have to reference this file as So in summary, publicPath is like mapping between virtual directory in your server and output directory specified by output.path configuration, Whenever request for file public/assets/js/app.js comes, /examples/dist/app.js file will be servedThe webpack2 documentation explains this in a much cleaner way:

https://webpack.js.org/guides/public-path/#use-casespublicPath is used by webpack for the replacing relative path defined in your css for refering image and font file. 

How to test valid UUID/GUID?

Marek Sebera

[How to test valid UUID/GUID?](https://stackoverflow.com/questions/7905929/how-to-test-valid-uuid-guid)

How to check if variable contains valid UUID/GUID identifier?I'm currently interested only in validating types 1 and 4, but it should not be a limitation to your answers.

2011-10-26 16:40:49Z

How to check if variable contains valid UUID/GUID identifier?I'm currently interested only in validating types 1 and 4, but it should not be a limitation to your answers.Currently, UUID's are as specified in RFC4122. An often neglected edge case is the NIL UUID, noted here. The following regex takes this into account and will return a match for a NIL UUID. See below for a UUID which only accepts non-NIL UUIDs. Both of these solutions are for versions 1 to 5 (see the first character of the third block).Therefore to validate a UUID......ensures you have a canonically formatted UUID that is Version 1 through 5 and is the appropriate Variant as per RFC4122.NOTE: Braces { and } are not canonical. They are an artifact of some systems and usages.Easy to modify the above regex to meet the requirements of the original question.HINT: regex group/capturesTo avoid matching NIL UUID:regex to the rescueor with bracketsIf you are using Node.js for development, it is recommended to use a package called Validator. It includes all the regexes required to validate different versions of UUID's plus you get various other functions for validation.Here is the npm link: ValidatorIf you want to check or validate a specific UUID version, here are the corresponding regexes.The version number is the first character of the third group : [VERSION_NUMBER][0-9A-F]{3} :Beside Gambol's answer that will do the job in nearly all cases, all answers given so far missed that the grouped formatting (8-4-4-4-12) is not mandatory to encode GUIDs in text. It's used extremely often but obviously also a plain chain of 32 hexadecimal digits can be valid.[1] regexenh:[1] The question is about checking variables, so we should include the user-unfriendly form as well.All type-specific regexes posted so far are failing on the "type 0" Nil UUID, defined in 4.1.7 of the RFC as:To modify Wolf's answer:Or, to properly exclude a "type 0" without all zeros, we have the following (thanks to Luke):thanks to @usertatha with some modificationI think Gambol's answer is almost perfect, but it misinterprets the RFC 4122 § 4.1.1. Variant section a bit.It covers Variant-1 UUIDs (10xx = 8..b), but does not cover Variant-0 (0xxx = 0..7) and Variant-2 (110x = c..d) variants which are reserved for backward compatibility, so they are technically valid UUIDs. Variant-4 (111x = e..f) is indeed reserved for future use, so they are not valid currently.Also, 0 type is not valid, that "digit" is only allowed to be 0 if it's a NIL UUID (like mentioned in Evan's answer).So I think the most accurate regex that complies with current RFC 4122 specification is (including hyphens):Use the .match() method to check whether String is UUID.A slightly modified version of the above answers written in a more concise way. This will validate any GUID with hyphens (however easily modified to make hyphens optional). This will also support upper and lower case characters which has become the convention regardless of the specification:The key here is the repeating part belowWhich simply repeats the 4 char patterns 3 timesA good way to do it in Node is to use the ajv package (https://github.com/epoberezkin/ajv).I think a better way is using the static method fromString to avoid those regular expressions. On the other hand throws java.lang.IllegalArgumentException: Invalid UUID string: x

Fastest way to convert JavaScript NodeList to Array?

jairajs89

[Fastest way to convert JavaScript NodeList to Array?](https://stackoverflow.com/questions/3199588/fastest-way-to-convert-javascript-nodelist-to-array)

Previously answered questions here said that this was the fastest way:In benchmarking on my browser I have found that it is more than 3 times slower than this:They both produce the same output, but I find it hard to believe that my second version is the fastest possible way, especially since people have said otherwise here.Is this a quirk in my browser (Chromium 6)? Or is there a faster way?EDIT: For anyone who cares, I settled on the following (which seems to be the fastest in every browser that I tested):EDIT2: I found an even faster way

2010-07-07 23:04:49Z

Previously answered questions here said that this was the fastest way:In benchmarking on my browser I have found that it is more than 3 times slower than this:They both produce the same output, but I find it hard to believe that my second version is the fastest possible way, especially since people have said otherwise here.Is this a quirk in my browser (Chromium 6)? Or is there a faster way?EDIT: For anyone who cares, I settled on the following (which seems to be the fastest in every browser that I tested):EDIT2: I found an even faster wayThe second one tends to be faster in some browsers, but the main point is that you have to use it because the first one is just not cross-browser. Even though The Times They Are a-Changin'@kangax (IE 9 preview)Example:With ES6, we now have a simple way to create an Array from a NodeList: the Array.from() function.Here's a new cool way to do it using the ES6 spread operator:Some optimizations:Code (jsPerf):The results will completely depend on the browser, to give an objective verdict, we have to make some performance tests, here are some results, you can run them here:Chrome 6:Firefox 3.6:Firefox 4.0b2:Safari 5:IE9 Platform Preview 3:The most fast and cross browser isAs I compared inhttp://jsbin.com/oqeda/98/edit*Thanks @CMS for the idea!

Now you can do document.querySelectorAll('div').forEach(function()...)In ES6 you can either use:faster and shorter : Check out this blog post here that talks about the same thing. From what I gather, the extra time might have to do with walking up the scope chain.This is the function I use in my JS:Here are charts updated as of the date of this posting ("unknown platform" chart is Internet Explorer 11.15.16299.0):

From these results, it seems that the preallocate 1 method is the safest cross-browser bet.Assuming nodeList = document.querySelectorAll("div"), this is a concise form of converting nodelist to array.See me use it here.

How do you get the length of a string?

RubbleFord

[How do you get the length of a string?](https://stackoverflow.com/questions/1044105/how-do-you-get-the-length-of-a-string)

How do you get the length of a string in jQuery?

2009-06-25 13:59:52Z

How do you get the length of a string in jQuery?You don't need jquery, just use yourstring.length. See reference here and also here.Update:To support unicode strings, length need to be computed as following:or create an auxiliary function The easiest way: jQuery is a JavaScript library. You don't need to use jQuery to get the length of a string because it is a basic JavaScript string object property.HTMLSCRIPTRESULT10You don't need to use jquery.  n will be 3.A somewhat important distinction is if the element is an input or not. If an input you can use:otherwise if the element is a different html element like a paragraph or list item div etc, you must useIt's not jquery you need, it's JS:same way you do it in javascript:"something".lengthIn jQuery :ORIn JS :In some cases String.length might return a value which is different from the actual number of characters visible on the screen (e.g. some emojis are encoded by 2 UTF-16 units):MDN says:

This property returns the number of code units in the string. UTF-16, the string format used by JavaScript, uses a single 16-bit code unit to represent the most common characters, but needs to use two code units for less commonly-used characters, so it's possible for the value returned by length to not match the actual number of characters in the string.

Preloading images with JavaScript

Francisc

[Preloading images with JavaScript](https://stackoverflow.com/questions/3646036/preloading-images-with-javascript)

Is the function I wrote below enough to preload images in most, if not all, browsers commonly used today?I have an array of image URLs that I loop over and call the preloadImage function for each URL.

2010-09-05 12:25:12Z

Is the function I wrote below enough to preload images in most, if not all, browsers commonly used today?I have an array of image URLs that I loop over and call the preloadImage function for each URL.Yes. This should work on all major browsers.  Try this I think this is better.Source: http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/In my case it was useful to add a callback to your function for onload event:And then wrap it for case of an array of URLs to images to be preloaded with callback on all is done:

https://jsfiddle.net/4r0Luoy7/CSS2 Alternative: http://www.thecssninja.com/css/even-better-image-preloading-with-css2CSS3 Alternative: https://perishablepress.com/preload-images-css3/

(H/T Linh Dam)NOTE: Images in a container with display:none might not preload.

Perhaps visibility:hidden will work better but I have not tested this. Thanks Marco Del Valle for pointing this outI recommend you use a try/catch to prevent some possible issues:OOP:Standard:Also, while I love DOM, old stupid browsers may have problems with you using DOM, so avoid it altogether IMHO contrary to freedev's contribution. Image() has better support in old trash browsers.This approach is a little more elaborate. Here you store all preloaded images in a container, may be a div. And after you could show the images or move it within the DOM to the correct position.Try it here, I have also added few commentsYes this will work, however browsers will limit(between 4-8) the actual calls and thus not cache/preload all desired images.A better way to do this is to call onload before using the image like so:Here is my approach:Note: this will also work if you are using a transpiler like Babel.You could also have waited for all images to load.Or use Promise.all to load them in parallel.More about Promises.More about "Async" functions.More about the destructuring assignment.More about ECMAScript 2015.More about ECMAScript 2017.I can confirm that the approach in the question is sufficient to trigger the images to be downloaded and cached (unless you have forbidden the browser from doing so via your response headers) in, at least:To test this, I made a small webapp with several endpoints that each sleep for 10 seconds before serving a picture of a kitten. Then I added two webpages, one of which contained a <script> tag in which each of the kittens is preloaded using the preloadImage function from the question, and the other of which includes all the kittens on the page using <img> tags.In all the browsers above, I found that if I visited the preloader page first, waited a while, and then went to the page with the <img> tags, my kittens rendered instantly. This demonstrates that the preloader successfully loaded the kittens into the cache in all browsers tested.You can see or try out the application I used to test this at https://github.com/ExplodingCabbage/preloadImage-test.Note in particular that this technique works in the browsers above even if the number of images being looped over exceeds the number of parallel requests that the browser is willing to make at a time, contrary to what Robin's answer suggests. The rate at which your images preload will of course be limited by how many parallel requests the browser is willing to send, but it will eventually request each image URL you call preloadImage() on.You can move this code to index.html for preload images from any url

How to resolve the C:\fakepath?

e_maxm

