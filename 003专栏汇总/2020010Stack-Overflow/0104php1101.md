If on windows use: rd c:\dir /S /QIn the post above (John Kugelman) I suppose the PHP parser will optimize that scandir in the foreach but it just seems wrong to me to have the scandir in the foreach condition statement.

You could also just do two array_shift commands to remove the . and .. instead of always checking in the loop. Here what I used:My case had quite a few tricky directories (names containing special characters, deep nesting, etc) and hidden files that produced "Directory not empty" errors with other suggested solutions. Since a Unix-only solution was unacceptable, I tested until I arrived at the following solution (which worked well in my case):Can't think of an easier and more efficient way to do that than thisI didn't arrive to delete a folder because PHP said me it was not empty. But it was. The function by Naman was the good solution to complete mine. So this is what I use :So, to delete a directory and recursively its content : From http://php.net/manual/en/function.rmdir.php#91797Glob function doesn't return the hidden files, therefore scandir can be more useful, when trying to delete recursively a tree. Try the following handy function:With this function, you will be able to delete any file or folder

Why is PDO better for escaping MySQL queries/querystrings than mysql_real_escape_string?

BlissC

[Why is PDO better for escaping MySQL queries/querystrings than mysql_real_escape_string?](https://stackoverflow.com/questions/1742066/why-is-pdo-better-for-escaping-mysql-queries-querystrings-than-mysql-real-escape)

I've been told that I'd be better using PDO for MySQL escaping, rather than mysql_real_escape_string.Maybe I'm having a brain-dead day (or it may be the fact I'm by no stretch of the imagination a natural programmer, and I'm still very much at the newbie stage when it comes to PHP), but having checked out the PHP manual and read the entry on PDO, I'm still no clearer as to what PDO actually is and why it's better than using mysql_real_escape_string. This may be because I've not really got to grips with the complexities of OOP yet (I'm assuming it's something to do with OOP), but other than the fact that variables and array values seem to have a colon infront of them, I'm still not sure what it actually is and how you use it (and why it's better than mysql_real_escape_string. (It also may have something to do with the fact that I don't really have a clear understanding of what 'classes' are, so when I read "PDO class" I'm none the wiser really).Having read an article or two on the 'Developer Zone' bit of the MySQL website, I'm still no clearer. As I can't even figure out what it is at the moment, I think probably using it is a bit beyond me right now, but I'm still interested in broadening my education and finding out how I could improve things.  Could anyone explain to me in 'plain English' what PDO is (or point me in the direction of something on the subject written in plain English), and how you'd go about using it?

2009-11-16 13:01:12Z

I've been told that I'd be better using PDO for MySQL escaping, rather than mysql_real_escape_string.Maybe I'm having a brain-dead day (or it may be the fact I'm by no stretch of the imagination a natural programmer, and I'm still very much at the newbie stage when it comes to PHP), but having checked out the PHP manual and read the entry on PDO, I'm still no clearer as to what PDO actually is and why it's better than using mysql_real_escape_string. This may be because I've not really got to grips with the complexities of OOP yet (I'm assuming it's something to do with OOP), but other than the fact that variables and array values seem to have a colon infront of them, I'm still not sure what it actually is and how you use it (and why it's better than mysql_real_escape_string. (It also may have something to do with the fact that I don't really have a clear understanding of what 'classes' are, so when I read "PDO class" I'm none the wiser really).Having read an article or two on the 'Developer Zone' bit of the MySQL website, I'm still no clearer. As I can't even figure out what it is at the moment, I think probably using it is a bit beyond me right now, but I'm still interested in broadening my education and finding out how I could improve things.  Could anyone explain to me in 'plain English' what PDO is (or point me in the direction of something on the subject written in plain English), and how you'd go about using it?As the current answers go into details while your question is more aimed at a general overview, I'll give it a try:The PDO classes aim to encapsulate all the functionality needed to interact with a database. They do this by defining 'methods' (OO parlor for functions) and 'properties' (OO parlor for variables). You'd use them as a complete replacement for all the 'standard' functions you are using now for talking to a database.So instead of calling a series of the 'mysql_doSomething()' functions, storing their results in your own variables, you would 'instantiate' an object from the PDO class ('class' = abstract definition, 'object' = concrete, usable instance of a class) and call methods on that object to do the same.As an example, without PDO, you'd do something like this:while this would be the equivalent using PDO:So on first glance, there is not much difference, except in syntax. But the PDO version has some advantages, the biggest one being database independence:If you need to talk to a PostgreSQL database instead, you'd only change mysql:to pgsql: in the instantiating call new PDO(). With the old method, you'd have to go through all your code, replacing all 'mysql_doSomething()' functions with their 'pg_doSomthing()' counterpart (always checking for potential differences in parameter handling). The same would be the case for many other supported database engines.So to get back to your question, PDO basically just gives you a different way to achieve the same things, while offering some shortcuts/improvements/advantages. For example, escaping would happen automatically in the proper way needed for the database engine you are using. Also parameter substitution (prevents SQL Injections, not shown in example) is much easier, making it less error prone.You should read up on some OOP basics to get an idea of other advantages.I'm not super familiar with PDO, but there is a distinction between "prepared statements" and escaped strings. Escaping is about removing disallowed character strings from the query, but prepared statements are about telling the database what kind of query to expect.Think of it this way: when you give a query to the database, you're telling it several separate things. One thing might be, for example, "I want you to do a select." Another might be "limit it to rows WHERE the user name is the following value."If you build up a query as a string and hand it to the database, it doesn't know about either part until it gets the completed string. You might do this:When it gets that string, it has to parse it and decide "this is a SELECT with a WHERE".Suppose a malicious user inputs their user name as billysmith OR 1=1. If you're not careful, you might put that into your string, resulting in:...which would return all the transactions for all users, because 1 always equals 1. Whoops, you've been hacked!See what happened? The database didn't know what parts to expect in your query, so it just parsed the string. It wasn't surprised that the WHERE had an OR, with two conditions that could satisfy it.If only it had known what to expect, namely, a SELECT whose WHERE had only one condition, the malicious user couldn't have tricked it.With a prepared statement, you can give it that correct expectation. You you can tell the database "I'm about to send you a SELECT, and it's going to be limited to rows WHERE username = a string that I'm about to give you. That's all - there are no other parts to the query. Are you ready? OK, here comes the string to compare to the username."With that expectation, the database wouldn't be fooled: it would only return rows where the username column contains the actual string 'billysmith OR 1=1.' If nobody has that user name, it would return nothing.In addition to security benefits, prepared statements have a couple of speed benefits:For another explanation, see Theo's answer here.Unlike mysql_real_escape_string, PDO allows you to enforce a datatype.Note that in the example above, the first parameter, calories, is required to be an integer (PDO::PARAM_INT). Second, to me, PDO parameterized queries are easier to read. I'd rather read:thanThird, you don't have to make sure you quote parameters properly. PDO takes care of that. For example, mysql_real_query_string:vsFinally, PDO allows you to port your app to a different db without changing your PHP data calls.imagine you write something along the lines of:this will not save you from injections, because $id could be 1 OR 1=1 and you will get all the records from the table. you’d have to cast $id to the right datatype (int in that case)pdo has another advantage, and that is the interchangability of database backends.In addition to preventing SQL injection, PDO allows you to prepare a query once and execute it multiple times.  If your query is executed multiple times (within a loop, for instance), this method should be more efficient (I say "should be", because it looks like that is not always the case on older versions of MySQL).  The prepare/bind method is also more in line with other languages I have worked with.Simply because "escaping" alone makes no sense.

Moreover, it's different incomparable matters.The only problem with escaping is that everyone takes it wrong, assuming it as some sort of "protection".

Everyone says "I escaped my variables" with the meaning "I protected my query".

While escaping alone has nothing to do with protection at all.   Protection can be roughly achieved in case of I escaped and quoted my data, but it is not applicable everywhere, for the identifiers for example (As well as PDO, by the way).So, the answer is:   

How to set a default attribute value for a Laravel / Eloquent model?

J. Bruni

[How to set a default attribute value for a Laravel / Eloquent model?](https://stackoverflow.com/questions/18747500/how-to-set-a-default-attribute-value-for-a-laravel-eloquent-model)

If I try declaring a property, like this:...it doesn't work, because it is not considered an "attribute", but merely a property of the model class. Not only this, but also I am blocking access to the actually real and existent "quantity" attribute.What should I do, then?

2013-09-11 17:22:11Z

If I try declaring a property, like this:...it doesn't work, because it is not considered an "attribute", but merely a property of the model class. Not only this, but also I am blocking access to the actually real and existent "quantity" attribute.What should I do, then?An update to this...@j-bruni submitted a proposal and Laravel 4.0.x is now supporting using the following:Which will automatically set your attribute subject to A Post when you construct. You do not need to use the custom constructor he has mentioned in his answer.However, if you do end up using the constructor like he has (which I needed to do in order to use Carbon::now()) be careful that $this->setRawAttributes() will override whatever you have set using the $attributes array above. For example:See the Github thread for more info.This is what I'm doing now:I will suggest this as a PR so we don't need to declare this constructor at every Model, and can easily apply by simply declaring the $defaults array in our models...UPDATE:As pointed by cmfolio, the actual ANSWER is quite simple: Just override the $attributes property! Like this:The issue was discussed here.I know this is really old, but I just had this issue and was able to resolve this using this site.Add this code to your modelUpdate/DisclaimerThis code works, but it will override the regular Eloquent Model creating Event

How to store an array into mysql?

King Julien

[How to store an array into mysql?](https://stackoverflow.com/questions/3413291/how-to-store-an-array-into-mysql)

Is there a way to store an array into mysql field? I'm creating a comment rating system so I want to store the arrays of user ids to prevent multiple votings. I'm going to create new table that holds the comment id and the array of user ids who have voted on this comment. Than I'll join comments table and this table and check whether the current user id exists in the voters array or note. If it does than the voting icons would be disabled. I think I'll prevent to use mysql query in loop in this way.Do you happen to know any better ways?

2010-08-05 09:16:23Z

Is there a way to store an array into mysql field? I'm creating a comment rating system so I want to store the arrays of user ids to prevent multiple votings. I'm going to create new table that holds the comment id and the array of user ids who have voted on this comment. Than I'll join comments table and this table and check whether the current user id exists in the voters array or note. If it does than the voting icons would be disabled. I think I'll prevent to use mysql query in loop in this way.Do you happen to know any better ways?You can always serialize the array and store that in the database.

PHP SerializeYou can then unserialize the array when needed.You may want to tackle this as follows:The composite primary key (comment_id, user_id) on the intersection table comments_votes will prevent users from voting multiple times on the same comments.Let's insert some data in the above schema:Now let's add some votes for user 1:The above means that user 1 gave a vote of type 1 on comments 1 and 2.If the same user tries to vote again on one of those comments, the database will reject it:If you will be using the InnoDB storage engine, it will also be wise to use foreign key constraints on the comment_id and user_id fields of the intersection table. However note that MyISAM, the default storage engine in MySQL, does not enforce foreign key constraints:These foreign keys guarantee that a row in comments_votes will never have a comment_id or user_id value that doesn't exist in the comments and users tables, respectively. Foreign keys aren't required to have a working relational database, but they are definitely essential to avoid broken relationships and orphan rows (ie. referential integrity).In fact, referential integrity is something that would have been very difficult to enforce if you were to store serialized arrays into a single database field.Consider normalizing the table structure into a comments, and a separate votes table.Table "comments":Table "votes":this would allow an unlimited number of votes without having to deal with the limits of a database field. Also, you may have future needs for operations like "show all votes a user has cast", removing specific votes or limiting the maximum number of votes per day. These operations are dead easy and fast to implement with a normalized structure, and horribly slow and complex in a serialized array.you should have three tables: users, comments and comment_users.comment_users has just two fields: fk_user_id and fk_comment_idThat way you can keep your performance up to a maximum :)I'd prefer to normalize your table structure more, something like;Now it's easier to maintain! And MySQL only accept one vote per user and comment.create table like this,In this way you can check whether the user posted the comments are not..

Apart from this there should be tables for Comments and Users with respective id'sIf you just store the data in a database as you would if you were manually putting it into an arrayThen when you are pulling from the database, use the explode() functionLike so!Storing with json or serialized array is the best solution for now.

With some situations (trimming " ' characters) json might be getting trouble but serialize should be great choice.Note: If you change serialized data manually, you need to be careful about character count.You can save your array as a json.

there is documentation for json data type: https://dev.mysql.com/doc/refman/5.7/en/json.htmlYou can use the php serialize function to store array in MySQL.It’s output will be : And then you can use the php unserialize function to decode the data.I think you should visit this page on storing array in mysql.

Save image from url with curl PHP

David

[Save image from url with curl PHP](https://stackoverflow.com/questions/6476212/save-image-from-url-with-curl-php)

I need to save an image from a url using CURL and save it to a folder on my server.  I've been battling with this code to no avail.  Ideally I'd like to grab the image and save it as "photo1" or something.  Help!  

2011-06-25 06:10:40Z

I need to save an image from a url using CURL and save it to a folder on my server.  I've been battling with this code to no avail.  Ideally I'd like to grab the image and save it as "photo1" or something.  Help!  try this:and ensure that in php.ini allow_url_fopen is enableOption #1Instead of picking the binary/raw data into a variable and then writing, you can use CURLOPT_FILE option to directly show a file to the curl for the downloading.Here is the function:And here is how you should call it:Option #2Now, If you want to download a very large file, that case above function may not become handy. You can use the below function this time for handling a big file. Also, you can print progress(in % or in any other format) if you want. Below function is implemented using a callback function that writes a chunk of data in to the file in to the progress of downloading.And here is how to call this function:If you want to download an image from https:Improved version of Komang answer (add referer and user agent, check if you can write the file), return true if it's ok, false if there is an error :This is easiest implement.

How do I save value in my own session variable in Magento?

Ali

[How do I save value in my own session variable in Magento?](https://stackoverflow.com/questions/3340982/how-do-i-save-value-in-my-own-session-variable-in-magento)

I am using Magento and trying to save a value in the session as follows in its index.php file, but the value is not being retained.How do I do it?Thanks

2010-07-27 05:29:24Z

I am using Magento and trying to save a value in the session as follows in its index.php file, but the value is not being retained.How do I do it?ThanksLet's say you want to save the value "Hello world" to the "welcome message" variable in the session. The code would be : Now you want to echo the "welcome message" somewhere else in your code/site.Following the example given by Ali Nasrullah, I would do:Make sure you include [Mage-root]/app/Mage.php befor calling the code above!@Ali Nasrullah: Pass the value of device:id as second parameter of the setData function.Here are code to Get, Set, and Unset Session in MagentoHere are code to Get, Set, and Unset Session in Magento

CakePHP: Find where field is not null

DanCake

[CakePHP: Find where field is not null](https://stackoverflow.com/questions/1196969/cakephp-find-where-field-is-not-null)

I need to select all rows where User.site_url is not null. It's simple enough to do this in a regular MySQL query but how is this done in CakePHP?The manual mentions the following:I have tried the following but it's still returning everything

2009-07-28 21:54:01Z

I need to select all rows where User.site_url is not null. It's simple enough to do this in a regular MySQL query but how is this done in CakePHP?The manual mentions the following:I have tried the following but it's still returning everythingI think this is what you mean:Your just missing the nullIn Cake, a WHERE condition is constructed from 'conditions' element by joining keys and values. That means that you can actually skip providing the keys if you like. E.g.:is completely equivalent to Essentially, you can solve your problem by just this:You can also try this,This works fine for me..For simple query:For cakephp 3.XThis work fine for me:Please try '' rather than null:this scope is correct! (ctlockey)However I using with different versions of MySql and MariaDb returned inconstant results.

I believe that a little bit of direct sql is not that bad so to ensure the integrity of the return.Therefore, I did the following:Its working for me

Why is json_encode adding backslashes?

Steven

[Why is json_encode adding backslashes?](https://stackoverflow.com/questions/10314715/why-is-json-encode-adding-backslashes)

I've been using json_encode for a long time, and I've not had any problems so far.

Now I'm working with a upload script and I try to return some JSON data after file upload.I have the following code:This gives me the following  results:Can anyone tell me why json_encode adds slashes?update  @Quentin said that something is happening between json_encode and .parseJSON and he's right.Doing a alert(data.toSource()); gives me the dollowing result:And this is not valid JSON. It also adds the status:200 and I have no idea where this comes from.Could it be that the Plupload bind does something to my returned data?This is my js script:

2012-04-25 11:31:47Z

I've been using json_encode for a long time, and I've not had any problems so far.

Now I'm working with a upload script and I try to return some JSON data after file upload.I have the following code:This gives me the following  results:Can anyone tell me why json_encode adds slashes?update  @Quentin said that something is happening between json_encode and .parseJSON and he's right.Doing a alert(data.toSource()); gives me the dollowing result:And this is not valid JSON. It also adds the status:200 and I have no idea where this comes from.Could it be that the Plupload bind does something to my returned data?This is my js script:Forward slash characters can cause issues (when preceded by a < it triggers the SGML rules for "end of script element") when embedded in an HTML script element. They are escaped as a precaution.It doesn't. In JSON "/" and "\/" are equivalent. The JSON you list in the question is valid (you can test it with jsonlint). Your problem is likely to do with what happens to it between json_encode and parseJSON.Just use the "JSON_UNESCAPED_SLASHES" Option (added after version 5.4).I just came across this issue in some of my scripts too, and it seemed to be happening because I was applying json_encode to an array wrapped inside another array which was also json encoded. It's easy to do if you have multiple foreach loops in a script that create the data. Always apply json_encode at the end.Here is what was happening. If you do:The result is:So, what you actually need to do is:And this will returnThis happens because the JSON format uses ""(Quotes) and anything in between these quotes is useful information (either key or the data).Suppose your data was : He said "This is how it is done".

Then the actual data should look like "He said \"This is how it is done\".". This ensures that the \" is treated as "(Quotation mark) and not as JSON formatting. This is called escape character.This usually happens when one tries to encode an already JSON encoded data, which is a common way I have seen this happen.Try this$arr = ['This is a sample','This is also a "sample"'];

echo json_encode($arr);OUTPUT:I had a very similar problem, I had an array ready to be posted. in my post function I had this:the detail here is that I'm using blade inside laravel to build a three view form, so I can go back and forward, I have in between every back and forward button validations and when I go back in the form without reloading the page my json get filled by backslashes. I console.log(json) in every validation and realized that the json was treated as a string instead of an object. In conclution i shouldn't have assinged json = JSON.stringfy(json) instead i assigned it to another variable. This way i keep json as an object, and not a string.json_encode will always add slashes.Check some examples on the manual HEREThis is because if there are some characters which needs to escaped then they will create problem.To use the json please Parse your json to ensure that the slashes are removedWell whether or not you remove slashesthe json will be parsed without any problem by eval.This is my code and i m able to parse the JSON.Check your code May be you are missing something while parsing the JSON

How can I use in_array if the needle is an array?

Donny Kurnia

[How can I use in_array if the needle is an array?](https://stackoverflow.com/questions/2304436/how-can-i-use-in-array-if-the-needle-is-an-array)

I have 2 arrays, the value will be loaded from database, below is an example:What I want to do is to check if all the values in $arr1 exist in $arr2. The above example should be a TRUE while:comparing $arr1 with $arr3 will return a FALSE.Normally I use in_array because I only need to check single value into an array. But in this case, in_array cannot be used. I'd like to see if there is a simple way to do the checking with a minimum looping.UPDATE for clarification.First array will be a set that contains unique values. Second array can contain duplicated values. They are both guaranteed an array before processing.

2010-02-21 01:25:26Z

I have 2 arrays, the value will be loaded from database, below is an example:What I want to do is to check if all the values in $arr1 exist in $arr2. The above example should be a TRUE while:comparing $arr1 with $arr3 will return a FALSE.Normally I use in_array because I only need to check single value into an array. But in this case, in_array cannot be used. I'd like to see if there is a simple way to do the checking with a minimum looping.UPDATE for clarification.First array will be a set that contains unique values. Second array can contain duplicated values. They are both guaranteed an array before processing.Use array_diff():You can use array_intersect or array_diff:However, if you don't need to use the result of the intersection (which seems to be your case), it is more space and time efficient to use array_diff:You can try use the array_diff() function to find the difference between the two arrays, this might help you. I think to clarify you mean, all the values in the first array must be in the second array, but not the other way around.In my particular case I needed to check if a pair of ids was processed before or not. So simple array_diff() did not work for me.Instead I generated keys from ids sorted alphabetically and used them with in_array:This is probably not an optimum solution at all but I just needed it for a dirty script to be executed once.

Installing GD in Docker

evilscary

[Installing GD in Docker](https://stackoverflow.com/questions/39657058/installing-gd-in-docker)

I am a complete Docker novice but am having to maintain an existing system. The Dockerfile I am using is as below:When I run 'docker build [sitename]' everything seems ok until I get the error:What is the cause of this error?

2016-09-23 09:16:13Z

I am a complete Docker novice but am having to maintain an existing system. The Dockerfile I am using is as below:When I run 'docker build [sitename]' everything seems ok until I get the error:What is the cause of this error?You should add the libpng-dev package to your Dockerfile:Then go to directory with Dockerfile and run:docker build -t sitename .It worked in my case:Let me know if you get any errors.EDIT:You should see something like this:EDIT2:Just to double check everything:Please run the docker build command this way:docker build -t sitename:1.0 .(adding :1.0 should not change anything, I added it just to have additional row in docker images output)Then start the container:docker run --name sitename_test -p 80:80 sitename:1.0It should work just fine.I assumed that apache is using standard port (80) - maybe you need to adjust that. If you have other services/containers listening on port 80 you can make your container listening on other port:docker run --name sitename_test -p 8080:80 sitename:1.0That will redirect the traffic from port 8080 to port 80 "inside" the container.Normally you run container in the background. To do this add the -d option to the docker run command (but for testing purposes you can omit -d to see output in the console).If you decide to run container in the background you can check logs using docker logs sitename_test. To follow the logs (and see updates in logs) use -f option: docker logs -f sitename_testHope that helps.This Dockerfile worked with Php7

https://hub.docker.com/r/giapnh/php7-gdUnfortunately, some php extensions have dependencies to other programs. There is a project called docker-php-extension-installer that you can use to install PHP extensions. It will make sure that the required dependencies are present as well.Since I need that external script in multiple containers, I've put it in a shared script that I then include in the required Dockerfile.Script (at .shared/scripts/install_php_extensions.sh)DockerfileCaution: Make sure to use the correct build context in this case.

PHP: How to get referrer URL?

sorinu26

[PHP: How to get referrer URL?](https://stackoverflow.com/questions/16374704/php-how-to-get-referrer-url)

I have a page (only index) where customers can send me emails and I want to see from what website that visitor is coming from? How can I get Referrer URL with PHP? I tried with 

$_SERVER['HTTP_REFERER'] but it's empty all the time. How can I do this? Thank you!Here is what my $_SERVER contains ("---- CENSORED ----" is censored by me)

2013-05-04 13:17:11Z

I have a page (only index) where customers can send me emails and I want to see from what website that visitor is coming from? How can I get Referrer URL with PHP? I tried with 

$_SERVER['HTTP_REFERER'] but it's empty all the time. How can I do this? Thank you!Here is what my $_SERVER contains ("---- CENSORED ----" is censored by me)$_SERVER['HTTP_REFERER'] will give you the referrer page's URL if there exists any. If users use a bookmark or directly visit your site by manually typing in the URL, http_referer will be empty. Also if the users are posting to your page programatically (CURL) then they're not obliged to set the http_referer as well. You're missing all _, is that a typo?Underscore. Not space.$_SERVER['HTTP_REFERER']If $_SERVER['HTTP_REFERER'] variable doesn't seems to work, then you can either use Google Analytics or AddThis Analytics.But if you run a file (that contains the above code) by directly hitting the URL in the browser then you get the following error.

Getting the screen resolution using PHP

Elitmiar

[Getting the screen resolution using PHP](https://stackoverflow.com/questions/1504459/getting-the-screen-resolution-using-php)

I need to find the screen resolution of a users screen who visits my website?

2009-10-01 14:57:47Z

I need to find the screen resolution of a users screen who visits my website?You can't do it with pure PHP. You must do it with JavaScript. There are several articles written on how to do this.Essentially, you can set a cookie or you can even do some Ajax to send the info to a PHP script. If you use jQuery, you can do it something like this:jquery:PHP (some_script.php)All that is really basic but it should get you somewhere. Normally screen resolution is not what you really want though. You may be more interested in the size of the actual browser's view port since that is actually where the page is rendered...Directly with PHP is not possible but...I write this simple code to save screen resolution on a PHP session to use on a image gallery.PHP is a server side language - it's executed on the server only, and the resultant program output is sent to the client. As such, there's no "client screen" information available.That said, you can have the client tell you what their screen resolution is via JavaScript. Write a small scriptlet to send you screen.width and screen.height - possibly via AJAX, or more likely with an initial "jump page" that finds it, then redirects to http://example.net/index.php?size=AxBThough speaking as a user, I'd much prefer you to design a site to fluidly handle any screen resolution. I browse in different sized windows, mostly not maximized.I found using CSS inside my html inside my php did the trick for me.This will output a smaller sized headline if the screen is 480px or less.

So no need to pass any vars using JS or similar.This is a very simple process. Yes, you cannot get the width and height in PHP. It is true that JQuery can provide the screen's width and height. First go to https://github.com/carhartl/jquery-cookie and get jquery.cookie.js. Here is example using php to get the screen width and height:I have a test that you can execute: http://rw-wrd.net/test.phpUse JavaScript (screen.width and screen.height IIRC, but I may be wrong, haven't done JS in a while). PHP cannot do it.You can try RESS (RESponsive design + Server side components), see this tutorial:http://www.lukew.com/ff/entry.asp?1392I don't think you can detect the screen size purely with PHP but you can detect the user-agent..Here's a link to a more detailed script:  PHP Mobile Detect I couldn't find an actual working PHP example to "invisibly" (without URL parameters) return client screen size, and other properties, to server-side PHP, so I put this example together.JS populates and submits a hidden form (scripted by PHP from an array of JS properties), POSTing to itself (the data now available in PHP) and returns the data in a table.(Tested in "several" browsers.)

The returned data is extract'd into variables. For example:  The only way is to use javascript, then get the javascript to post to it to your php(if you really need there res server side). This will however completly fall flat on its face, if they turn javascript off.JS:ajax.phpThis can be done easily using cookies.  This method allows the page to check the stored cookie values against the screen height and width (or browser view port height and width values), and if they are different it will reset the cookie and reload the page.  The code needs to allow for user preferences. If persistant cookies are turned off, use a session cookie.  If that doesn't work you have to go with a default setting.E.g., I am using some common cookie functions found on the web. Make sure setCookie returns the correct values.

I put this code immediately after the head tag.  Obviously the function should be in a a source file. PHP works only on server side, not on user host. Use JavaScript or jQuery to get this info and send via AJAX or URL (?x=1024&y=640).You can set window width in cookies using JS in front end and you can get it in PHP:The quick answer is no, then you are probably asking why can't I do that with php. OK here is a longer answer. PHP is a serverside scripting language and therefor has nothing to do with the type of a specific client. Then you might ask "why can I then get the browser agent from php?", thats because that information is sent with the initial HTTP headers upon request to the server. So if you want client information that's not sent with the HTTP header you must you a client scripting language like javascript.Here is the Javascript Code: (index.php)Here is the PHP Code: (sqldb.php)I hope that you know how to get the $userid from the Session,

and for that you need an Database with the Table called users, and an Table inside users called screen ;=)

Regards KSPIn PHP there is no standard way to get this information. However, it is possible if you are using a 3rd party solution. 51Degrees device detector for PHP has the properties you need:Gives you Width and Height of user's screen in pixels. In order to use these properties you need to download the detector from sourceforge. Then you need to include the following 2 lines in your file/files where it's necessary to detect screen height and width:Where path/to/core is path to 'Core' directory which you downloaded from sourceforge. Finally, to use the properties:Keep in mind these variables can contain 'Unknown' value some times, when the device could not be identified.solution: make scalable web design ... ( our should i say proper web design)  formating should be done client side and i did wish the info would be passed down to server but the info is still usefull ( how many object per rows kind of deal )  but still web design should be fluid thus each row elements should not be put into tables unless its an actual table ( and the data will scale to it's individual cells) if you use a div you can stack each elements next to each other and your window should "break" the row at the proper spot. ( just need proper css) Easiest way

PHP is_null() and ==null [duplicate]

kel_ff0080

[PHP is_null() and ==null [duplicate]](https://stackoverflow.com/questions/9671659/php-is-null-and-null)

In PHP, what is the difference between is_null and ==null in PHP? What are the qualifications for both to return true?

2012-03-12 17:16:20Z

In PHP, what is the difference between is_null and ==null in PHP? What are the qualifications for both to return true?is_null is the same as === null.  Both return true when a variable is null (or unset).Note that I'm using === and not ==.  === compares type as well as value.So you can understand it better:There are a couple really good charts on the php.net site that show how different values react:Type Comparison - php.netYou can check the comparison between is_null() and null === $varGood comparison between two===null is recommended by Rasmus Lerdorf, the inventor of PHP. 

Rasmus says the test for null is faster than the test of isset. His recommendation is sufficient reason to look at the difference seriously. The difference would be significant if you had a small loop going through the same code thousands of times in the one Web page request.UPD: Some speed test for is_null and strict comparison:== doesn't check the type, so somehow, somewhere, something like the string '' or the string 'null' may come up as equal to null.Use triple equals sign, ===, to not only check two values are equal but also that they are of the same type.

In PHP, what does「<<<」represent?

Chrish

[In PHP, what does「<<<」represent?](https://stackoverflow.com/questions/3700042/in-php-what-does-represent)

For example:

2010-09-13 11:40:50Z

For example:That's heredoc syntax. You start a heredoc string by putting <<< plus a token of your choice, and terminate it by putting only the token (and nothing else!) on a new line. As a convenience, there is one exception: you are allowed to add a single semicolon after the end delimiter.Example:It is the start of a string that uses the HEREDOC syntax.This is called a heredoc, and it lets you do a long piece of text that goes over several lines. You can put PHP variables in there and they will replace with the value. The word CHART can be anything. It just needs to be the same to start and stop where the quoted text begins.You could do the same thing by appending multiple quoted strings, but this is cleaner most of the time for extended documents like this HTML text. There is also something called a nowdoc which is like a single quote string in PHP, but these won't let you use variables inside them.It's PHP's heredoc.Example:It's a heredoc, for long strings that you don't have to worry about quotation marks and whatnot. If you notice the word CHART and then there's a line that says CHART;, that indicates the end of the string.The important thing to remember when using this format is that whatever string you use to define the end of the string (such as CHART in this case), that word has to appear on a line on its own, followed by a semicolon, and NO characters can occur after the semicolon on the same line, even whitespace, otherwise PHP thinks it's part of the string.It's the heredoc syntax.

How to clear previously echoed items in PHP

edt

[How to clear previously echoed items in PHP](https://stackoverflow.com/questions/1057986/how-to-clear-previously-echoed-items-in-php)

In php, is there any way to clear/remove all previously echoed or printed items?For example:My script uses the include function. The included files are not supposed to echo anything. Just in case someone (ex = hacker) tries, I need a way to remove.

2009-06-29 12:15:59Z

In php, is there any way to clear/remove all previously echoed or printed items?For example:My script uses the include function. The included files are not supposed to echo anything. Just in case someone (ex = hacker) tries, I need a way to remove.Output buffering functionsThe output buffering functions are also useful in hackery to coerce functions that only print to return strings, ie.while @monoxide is right, its better to find more intuitive ways of doing the same. e.g.:Cheers,jrhIdeally, you shouldn't output anything that you don't ultimately want printed. Keep your logic separate from your presentation for less frustration.That being said,  you can consult the Output Buffering options within PHP.If it is debug output and program status information you are worried about maybe trigger_error may be nearer to what you need, such as:When your script is in production it wont show up any errors as generally they are disabled or logged.  It's also best to do fatal errors this way with E_USER_ERROR rather than using die ().The above will also include a file and give you its contents as a string.Caveat: Ditching the buffer will also ditch any error messages thrown up, making debugging (potentially) a nightmare.If a hacker let's say has access to your PHP file, he will also be able to remove the statement clearing the output buffer.If you are doing this because you are letting your users upload PHP scripts, let me tell you that this is an extremely bad idea.In both cases, doing what you are asking for adds 0 security.

PHP - Redirect and send data via POST

Robinicks

[PHP - Redirect and send data via POST](https://stackoverflow.com/questions/3045097/php-redirect-and-send-data-via-post)

I have an online gateway which requires an HTML form to be submitted with hidden fields. I need to do this via a PHP script without any HTML forms (I have the data for the hidden fields in a DB)To do this sending data via GET:And to do this sending data via POST?

2010-06-15 12:31:55Z

I have an online gateway which requires an HTML form to be submitted with hidden fields. I need to do this via a PHP script without any HTML forms (I have the data for the hidden fields in a DB)To do this sending data via GET:And to do this sending data via POST?You can't do this using PHP.As others have said, you could use cURL - but then the PHP code becomes the client rather than the browser.If you must use POST, then the only way to do it would be to generate the populated form using PHP and use the window.onload hook to call javascript to submit the form.C.here is the workaround sample.Another solution if you would like to avoid a curl call and have the browser redirect like normal and mimic a POST call:save the post and do a temporary redirect:Then always check for the session variable post_data:There will be some missing components such as the apache_request_headers() will not show a POST Content header,  etc..It would involve the cURL PHP extension.I found a better and neater solution so I thought that I should share it:Use the session:and for the redirect header request you should use:307 is the htttp_response_code you could use for the redirection request with submitted POST values.Use curl for this. Google for "curl php post" and you'll find this: http://www.askapache.com/htaccess/sending-post-form-data-with-php-curl.html.Note that you could also use an array for the CURLOPT_POSTFIELDS option. From php.net docs:Your going to need CURL for that task I'm afraid. Nice easy way to do it here: http://davidwalsh.name/execute-http-post-php-curlHope that helpsAlternatively, setting a session variable before the redirect and test it in the destination url, can solve this problem for me.You have to open a socket to the site with fsockopen and simulate a HTTP-Post-Request.

Google will show you many snippets how to simulate the request.I used the following code to capture POST data that was submitted from form.php and then concatenate it onto a URL to send it BACK to the form for validation corrections. Works like a charm, and in effect converts POST data into GET data.An old post but here is how I handled it. Using newms87's method:Yes, you can do this in PHP e.g. in using subrequestA workaround wich works perfectly : In the source page,, start opening a session and assign as many values as you might want.

Then do the relocation with "header" :And then, in the targe page :No need of Javascript nor JQuery..

Good luck !

The behaviour of the or operator in PHP

Daric

[The behaviour of the or operator in PHP](https://stackoverflow.com/questions/12213283/the-behaviour-of-the-or-operator-in-php)

I'm trying to understand the behavior of or operator. Please see the below examples: Output is as expected: bool(true);Output is as expected: bool(false). I understood this in a way that the = has a higher precedence than the Or, so that's why the $f is assigned to false.But the below code works quite opposite of what I thought. I thought that the $foo will be assigned to 5 and then compared to itself.

But the $foo is getting assigned only when if the $foo is set that means it is checking if the $foo is assigned to anything before, assign 5 to it.Can anyone explain why this is so?

2012-08-31 10:12:28Z

I'm trying to understand the behavior of or operator. Please see the below examples: Output is as expected: bool(true);Output is as expected: bool(false). I understood this in a way that the = has a higher precedence than the Or, so that's why the $f is assigned to false.But the below code works quite opposite of what I thought. I thought that the $foo will be assigned to 5 and then compared to itself.

But the $foo is getting assigned only when if the $foo is set that means it is checking if the $foo is assigned to anything before, assign 5 to it.Can anyone explain why this is so?The basics:Therefore:false || true is being evaluated, which results in the value true, which is assigned to $e. The || operator has a higher precedence than =, therefore false || true is grouped into an expression (as opposed to ($e = false) || true).Here now or has a lower precedence than =, which means the assignment operation is grouped into one expression before or. So first the $f = false expression is evaluated, the result of which is false (see above). So then you have the simple expression false or true which is evaluated next and results in true, but which nobody cares about.The evaluation works like this:Now:Here, again, $foo = 5 has a higher precedence and is treated as one expression. Since it occurs on the right side of the or operator, the expression is only evaluated if necessary. It depends on what $foo is initially. If $foo is true, the right hand side will not be evaluated at all, since true or ($foo = 5) must be true overall. If $foo has a falsey value initially though, the right hand side is evaluated and 5 is assigned to $foo, which results in 5, which is true-ish, which means the overall expression is true, which nobody cares about.As per the php.net webpage about Logical Operators:This: Acts like this:This:Would act like this:This:Would act like this:For the last one, undefined is basically like false, therefore foo equals 5.Also, here's the link for the operator precedence order: http://www.php.net/manual/en/language.operators.precedence.phpUPDATE:Ok, now let's get to the main point. Like how we all know when using a fetched query:And we all know while loops only execute on true, therefore $row = @mysql_fetch_assoc($result) returns true.Same with Daric's question.Is basically:Which is basically:Which is alsoAnd as I have previously mentioned, undefined = false, so therefore $foo = 5 (as that is the true statement).I hope everyone can understand.here it will not evaluate after or operator expresion so output will be $foo=1

      Now the expression is$foo=false or $foo=5;Here it will evaluate after or as = higher precedence so $foo as of which of which it will evaluate $foo=5so output will be 5

 But when we evaluate $foo=false or true so here it will consider = higher precedence so the output will be $foo=false but whole expression will evaluate as true because false or true becomes falseCheck this you can assign the value "5" for $foo.Compare than or = has high priority.. Thats the fact.... :)

Why does datetime->days always returns a positive number

JonoB

[Why does datetime->days always returns a positive number](https://stackoverflow.com/questions/15421132/why-does-datetime-days-always-returns-a-positive-number)

Why do both of these functions return positive 4?

How do I return a negative number if a date is in the past?

2013-03-14 22:07:58Z

Why do both of these functions return positive 4?

How do I return a negative number if a date is in the past?You could use DateInterval::format.return $interval->format("%r%a");Cast to int if needed:return (int)$interval->format("%r%a");If Date is in past then invert will 1.

If Date is in future then invert will 0.Here is your answer:Test it here When you are diffing two DateTime objects, the following rule applies:As an example:you can use timestamp like this.$diff will return negative or positive.

The date/time format used in HTTP headers

Desmond Hume

[The date/time format used in HTTP headers](https://stackoverflow.com/questions/21120882/the-date-time-format-used-in-http-headers)

Which RFC describes the format used for date/time in the modern time HTTP headers, like "Last-Modified" and "If-Modified-Since", and how to generate a date/time string in PHP according to such format?Some sources point to RFC 2822, which, as indicated by DateTime class, is using D, d M Y H:i:s O format, but from my tests, this format produces +0000 instead of GMT at the end. I tried other timezone specifiers but none of them seems to put GMT at the end, the closest result I got was with UTC. However, as was shown by Firebug, all sites are using GMT in HTTP headers and not +0000 or UTC.So what format is really used and how do I format date/time in the same way as other sites do?

2014-01-14 18:13:30Z

Which RFC describes the format used for date/time in the modern time HTTP headers, like "Last-Modified" and "If-Modified-Since", and how to generate a date/time string in PHP according to such format?Some sources point to RFC 2822, which, as indicated by DateTime class, is using D, d M Y H:i:s O format, but from my tests, this format produces +0000 instead of GMT at the end. I tried other timezone specifiers but none of them seems to put GMT at the end, the closest result I got was with UTC. However, as was shown by Firebug, all sites are using GMT in HTTP headers and not +0000 or UTC.So what format is really used and how do I format date/time in the same way as other sites do?As you can see here, Last-Modified header has datetimes in RFC2616 format.In section 14.29 Last-Modified you can see that date format should be:An example of its use isAnother quote from RFC2616 read more :In PHP you can use format D, d M Y H:i:s T if you use function gmdate() which always returns datetime in GMT offset/timeszone:If you wish to use DateTime extension:Well, let's have a look at RFC 2616 which defines HTTP 1.1:

http://tools.ietf.org/html/rfc2616#section-3.3So DateTime::COOKIE or Datetime::RFC850 use a valid format. The preferred one according to the RFC would be D, d M Y H:i:s T which is not defined by any constant in the DateTime class.To make sure that GMT is used, the following code should suffice:I'm pretty sure the (now) correct answer here is rfc7231 - section 7.1.1.1 It specifies Date/Time Formats and is where the HTTP-date semantics are defined.Also we can see thatSo for a server sending a "modern time HTTP header"- where the value is a HTTP-date the format is equivalent to the IMF-fixdate format.So to answer the actual question. You need to know the definition of  IMF-fixdate - which is in rfc7231.

It also give the definition of obs-date too i.e rfc850-date / asctime-date

Arrays with NULL keys

FaddishWorm

[Arrays with NULL keys](https://stackoverflow.com/questions/18247412/arrays-with-null-keys)

PHP trivia here.If we declare an array like this:We can access it like thisThis will print hello. Why is this useful, relevant or necessary? Is it a PHP bug or a feature?My only idea was that you could declare array with the NULL key being equal to an error message to explain to anyone who uses a NULL key that their key is null:Has anyone found this useful? Seems to be something to cause more harm than good.

2013-08-15 06:27:17Z

PHP trivia here.If we declare an array like this:We can access it like thisThis will print hello. Why is this useful, relevant or necessary? Is it a PHP bug or a feature?My only idea was that you could declare array with the NULL key being equal to an error message to explain to anyone who uses a NULL key that their key is null:Has anyone found this useful? Seems to be something to cause more harm than good.Quote from the manual:Additional details about how keys are cast are as follows:As for this being useful or necessary, this is debatable. You are asked to use integer or string keys and you have been warned about implicit key casting.I have found the possibility to have Null keys useful, when accessing db, using a class, which can use one of the column values as the key to the returned array. Some column values could be null.Given a form API populated by an associative php array, I have found it useful to use a null-keyed value to indicate the NULL value in a database. E.g.:In this case, null maps to a NULL (default) value in the database column foreignkey_id, and 0 to a row with key 0.Outside this particular usecase however, I tend to think DCoder's comment is authoritative here...

Calling non-static method with double-colon(::)

NakaBr

[Calling non-static method with double-colon(::)](https://stackoverflow.com/questions/3754786/calling-non-static-method-with-double-colon)

Why can't I use a method non-static with the syntax of the methods static(class::method) ? Is it some kind of configuration issue?

2010-09-20 19:24:05Z

Why can't I use a method non-static with the syntax of the methods static(class::method) ? Is it some kind of configuration issue?PHP is very loose with static vs. non-static methods. One thing I don't see noted here is that if you call a non-static method, ns statically from within a non-static method of class C, $this inside ns will refer to your instance of C.This is actually an error of some kind if you have strict error reporting on, but not otherwise.This is a known "quirk" of PHP. It's by design to prevent back-propagation for figuring out if some time ago we actually instantiated an object or not (remember, PHP is interpreted, not compiled). However, accessing any non-static member the via scope resolution operator if the object is not instantiated will issue a fatal error.Courtesy of PHP.net:

    

This is PHP 4 backwards compatibility. In PHP 4 you could not differ between an object method and the global function written as a static class method. Therefore both did work.However with the changes in the object model with PHP 5 - http://php.net/oop5 - the static keyword has been introduced.And then since PHP 5.1.3 you get proper strict standard warnings about those like:And/Or:which you should have enabled for your development setup. So it's merely backwards compatibility to a time where the language couldn't differ enough so this was "defined" at run-time.Nowadays you can define it already in the code, however the code will not break if you still call it "wrong". Some Demo to trigger the error messages and to show the changed behavior over different PHP versions: http://3v4l.org/8WRQHPHP 4 did not have a static keyword (in function declaration context) but still allowed methods to be called statically with ::. This continued in PHP 5 for backwards compatibility purposes.You can do this, but your code will error if you use $this in the function called fun1()Warning

In PHP 7, calling non-static methods statically is deprecated, and will generate an E_DEPRECATED warning. Support for calling non-static methods statically may be removed in the future.LinkIn most languages you will need to have an instance of the class in order to perform instance methods. It appears that PHP will create a temporary instance when you call an instance method with the scope resolution operator.Not sure why PHP allows this, but you do not want to get into the habit of doing it. Your example only works because it does not try to access non-static properties of the class. Something as simple as:would result in a fatal errorI have noticed that if you call non-static method self::test() from within a class, no warning for strict standard will be issued, like when you call Class::test(). I believe that this is not related to LSB, since my class was not extended (tested on php 5.5)?

PHP Xdebug on OS X 10.9 Mavericks

greyfox

[PHP Xdebug on OS X 10.9 Mavericks](https://stackoverflow.com/questions/19579401/php-xdebug-on-os-x-10-9-mavericks)

I'm having issues setting up my PHP development environment on OS X after installing OS X 10.9 Mavericks.Here is the command I am using to install.Anyone have a solution or a workaround?

2013-10-25 01:04:20Z

I'm having issues setting up my PHP development environment on OS X after installing OS X 10.9 Mavericks.Here is the command I am using to install.Anyone have a solution or a workaround?The fast copy-paste wayThis command do the following :Compatible with Sierra, El Capitan & Yosemite with the bundeled apache, but untested with MAMP & XAMPP.Before launching the command, make sure Xcode command line tools are installed : xcode-select --installDon't know about using pecl. Getting Xdebug after an OS X install is pretty straightforward without pecl. You've got two easy options:Your built xdebug.so is now at modules/xdebug.so. The phpize is critical to do with XCode CLI tools installed, because phpize sets up the build parameters for your version of PHP.With your xdebug.so in hand from (1) or (2) above, you can add this block to the php.ini being used by your php or php-fpm:There are two issues here. The first is that you need to install Xcode command line tools with the command:This will mean that the files previously not found in /usr/include/php/ will be available.The next step is to install autoconf in the same way as Ares shows in his answer.I would cd into your download folder firstnow you can run the pecl install commandIf you are using Mac Yosemite 10.10 and none of the above answers solved the problem. Do the following:(When finished, type control+o to save and control+x to close the file)(Don't forget to replace the value in zend_extension for whatever you got from the first terminal command)For anyone who is facing this issue I had to build autoconf from source. I followed this answer from another StackOverflow question.https://stackoverflow.com/a/12333230/2272004For the issue phpize error,try this will solve your problem:

sudo ln -s /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk/usr/include /usr/includeI had to brew install xdebug and choose for my version of PHP and it worked! 

For example,For a PHP version 5.6 variant.

php date validation

Pablo Lopez

[php date validation](https://stackoverflow.com/questions/12030810/php-date-validation)

Im trying to to set up a php date validation (MM/DD/YYYY) but I'm having issues. Here is a sample of what I got:

2012-08-19 23:30:54Z

Im trying to to set up a php date validation (MM/DD/YYYY) but I'm having issues. Here is a sample of what I got:You could use checkdate. For example, something like this:A more paranoid approach, that doesn't blindly believe the input:You can use some methods of the DateTime class, which might be handy; namely, DateTime::createFromFormat() in conjunction with DateTime::getLastErrors().This even allows us to see what actually caused the date parsing warnings/errors (look at the warnings and errors arrays in $date_errors).Though checkdate is good, this seems much concise function to validate and also you can give formats. [Source]function was copied from this answer or php.net

The extra ->format() is needed for cases where the date is invalid but createFromFormat still manages to create a DateTime object. For example:Instead of the bulky DateTime object .. just use the core date() functionREGEX should be a last resort. PHP has a few functions that will validate for you. In your case, checkdate is the best option. http://php.net/manual/en/function.checkdate.phpNicolas solution is best.  If you want in regex,try this,this will validate for, 01/01/1900 through 12/31/2099  Matches invalid dates such as February 31st Accepts dashes, spaces, forward slashes and dots as date separatorsUse it:I know this is an older post, but I've developed the following function for validating a date:Not sure if this answer the question or going to help....We can use simple "date" input type, like below:Then we can link DateTime interface with built-in function 'explode':I tested it on Google Chrome and IE, everything works correctly. Furthemore, Chrome display simple additional interface. If you don't write anything in input or write it in bad format (correctly is following: '1919-12-23'), you will get the first statement. If you write everything in good format, but you type wrong date (I assumed that nobody could born before XX century), your controller will send the second statement.Try Thisthis regular expression valid for :Remember that this will be cover all case of date and date time with (-) characterI think it will help somebody.

How to check if a file exists from a url

David

[How to check if a file exists from a url](https://stackoverflow.com/questions/7684771/how-to-check-if-a-file-exists-from-a-url)

I need to check if a particular file exists on a remote server. Using is_file() and file_exists() doesn't work. Any ideas how to do this quickly and easily?

2011-10-07 08:32:10Z

I need to check if a particular file exists on a remote server. Using is_file() and file_exists() doesn't work. Any ideas how to do this quickly and easily?You have to use CURLYou don't need CURL for that... Too much overhead for just wanting to check if a file exists or not... Use PHP's get_header. Then check if $result[0] contains 200 OK (which means the file is there)A function to check if a URL works could be this:I've just found this solution:Source: http://www.dreamincode.net/forums/topic/11197-checking-if-file-exists-on-remote-server/Hi according to our test between 2 different servers the results are as follows:using curl for checking 10 .png files (each about 5 mb) was on average 5.7 secs.

using header check for the same thing took average of 7.8 seconds!So in our test curl was much faster if you have to check larger files!our curl function is:here is our header check sample:Do a request with curl and see if it returns a 404 status code. Do the request using the HEAD request method so it only returns the headers without a body.You can use the function file_get_contents();

Error handling with PHPMailer

Stomped

[Error handling with PHPMailer](https://stackoverflow.com/questions/2386544/error-handling-with-phpmailer)

I'm trying to use PHPMailer for a small project, but I'm a bit confused about error handling with this software. Hoping someone has experience with it. When I've set up an email and I use:Which works fine, more or less. The problem is when there's an error, PHPMailer also seems to echo the error out, so if there's a problem, it just sends that info directly to the browser, essentially breaking any error handling I"m trying to do.Is there a way to silence these messages? Its not throwing an exception, its just printing out the error, which in my test case is:Its meant to be an error, but it should be residing in $mail->ErrorInfo; not being echo'd out by the software.

2010-03-05 12:11:57Z

I'm trying to use PHPMailer for a small project, but I'm a bit confused about error handling with this software. Hoping someone has experience with it. When I've set up an email and I use:Which works fine, more or less. The problem is when there's an error, PHPMailer also seems to echo the error out, so if there's a problem, it just sends that info directly to the browser, essentially breaking any error handling I"m trying to do.Is there a way to silence these messages? Its not throwing an exception, its just printing out the error, which in my test case is:Its meant to be an error, but it should be residing in $mail->ErrorInfo; not being echo'd out by the software.PHPMAiler uses Exceptions. Try to adopt the following code:You can get more info about the error with the method $mail->ErrorInfo. For example:This is an alternative to the exception model that you need to active with new PHPMailer(true). But if can use exception model, use it as @Phil Rykoff answer.This comes from the main page of PHPMailer on github https://github.com/PHPMailer/PHPMailer.Please note!!!  You must use the following format when instantiating PHPMailer!If you don't exceptions are ignored and the only thing you'll get is an echo from the routine!  I know this is well after this was created but hopefully it will help someone.Just had to fix this myself. The above answers don't seem to take into account the 

$mail->SMTPDebug = 0; option. It may not have been available when the question was first asked.If you got your code from the PHPMail site, the default will be 

$mail->SMTPDebug = 2; // enables SMTP debug information (for testing)https://github.com/Synchro/PHPMailer/blob/master/examples/test_smtp_gmail_advanced.phpSet the value to 0 to suppress the errors and edit the 'catch' part of your code as explained above.We wrote a wrapper class that captures the buffer and converts the printed output to an exception.  this lets us upgrade the phpmailer file without having to remember to comment out the echo statements each time we upgrade.The wrapper class has methods something along the lines of:Even if you use exceptions, it still output errors.You have to set $MailerDebug to False wich should look like thisThis one works fine Then add thisIn PHPMailer.php, there are lines as below:Just comment these lines and you will be good to go.the simplest way to handle email sending successful or failed...

Phpunit tests gives warning no tests found in class

ytsejam

[Phpunit tests gives warning no tests found in class](https://stackoverflow.com/questions/27599100/phpunit-tests-gives-warning-no-tests-found-in-class)

I am trying to learn how to test with phpunit and laravel. When start the test using phpunit command, I am getting a warning :My test classname and filename matches. I have read other problems about unmatching names. my filename is PostsTest.php and my test file :if necessary my ApiTester :I dont have any clue where the error is. Laravel or my local phpunit settings or anything else. Any helps is appreciated.Thanks.

2014-12-22 08:33:30Z

I am trying to learn how to test with phpunit and laravel. When start the test using phpunit command, I am getting a warning :My test classname and filename matches. I have read other problems about unmatching names. my filename is PostsTest.php and my test file :if necessary my ApiTester :I dont have any clue where the error is. Laravel or my local phpunit settings or anything else. Any helps is appreciated.Thanks.Annotations are the answer.Adding that @test tells phpunit to treat the function as a test, regardless of the name.The only methods that PHPUnit will recognize as tests are those with names starting with test.So you should rename the it_fetches_posts() method to test_it_fetches_posts or  testItFetchesPosts. The camel case naming is optional but useful if you use the --testdox option later.Also, as stated in other answer you can also add the @test annotation to any method and it will be considered a test by PHPUnit.Either begin its name with word 'test' like test_something_should_work or update the test docs with this annotation /** @test */Additionally, consider a case where you are testing a class A that requires a class B (that you will mock). When $a->someMethod($mocked_B_class) is called, make sure you don't have any warnings in it such as trying to access a property of an array like you would access the property of a class ($array = ['one','two']; $array->one). In this case it wont give you any information about the test or the error

How to get the PHP Version?

Bob

[How to get the PHP Version?](https://stackoverflow.com/questions/2113955/how-to-get-the-php-version)

Is there a way to check the version of PHP that executed a particular script from within that script? So for example, the following snippetwould print 5.3.0 on one machine, and 5.3.1 on another machine.

2010-01-22 00:01:22Z

Is there a way to check the version of PHP that executed a particular script from within that script? So for example, the following snippetwould print 5.3.0 on one machine, and 5.3.1 on another machine.DocumentationHowever, for best practice, I would use the constant PHP_VERSION. No function overhead, and cleaner IMO.Also, be sure to use version_compare() if you are comparing PHP versions for compatibility.Technically the best way to do it is with the constant PHP_VERSION as it requires no function call and the overhead that comes with it.constants are always faster then function calls.You can either use the phpversion() function or the PHP_VERSION constant.To compare versions you should always rely on version_compare().Take a look at phpversion()..........http://us.php.net/manual/en/function.phpversion.phpReturns exactly the "5.3.0".phpversion() will tell you the currently running PHP version.phpversion() is one way.   As John conde said, PHP_VERSION is another (that I didn't know about 'till now).You may also be interested in function_exists()If you typecast the output of phpversion() to a floating point number, it will give you the major and minor version parts. This way you can implement PHP compatibility easily.

why should one prefer call_user_func_array over regular calling of function?

codepixlabs

[why should one prefer call_user_func_array over regular calling of function?](https://stackoverflow.com/questions/18526060/why-should-one-prefer-call-user-func-array-over-regular-calling-of-function)

As I can see both regular one and  call_user_func_array method both outputs same, then why should one prefer it?In which scenario regular calling method will fail but call_user_func_array will not?Can I get any such example? Thank you 

2013-08-30 06:04:27Z

As I can see both regular one and  call_user_func_array method both outputs same, then why should one prefer it?In which scenario regular calling method will fail but call_user_func_array will not?Can I get any such example? Thank you The use case for this may be rare, but when you come across it you need it.If you don't know beforehand how many arguments you're going to pass to your function, it would be advisable to use call_user_func_array(); the only alternative is a switch statement or a bunch of conditions to accomplish a predefined subset of possibilities.Another scenario is where the function to be called is not known beforehand, e.g. array($obj, 'method'); this is also where you could use call_user_func().Note that using call_user_func_* functions can't be used to call private or protected methods.The alternative to all of this is to make your functions accept an array as its only argument:However, this eliminates the possibility to type-hint each argument in your function declaration and is generally considered a code smell.You should prefer calling the function as you'd do regularly. Use call_user_func_array with dynamic arguments. For example:call_user_func_array performs "uncurrying", which is the opposite of "currying".The following applies to all of PHP's "callables" (named functions, closures, methods, __invoke, etc.), so for simplicity let's ignore the differences and just focus on closures.If we want to accept multiple arguments, PHP lets us do that with 3 different APIs. The usual way is this:Another way is called curried form:The advantage is that all curried functions can be called in the same way: give them one argument.If more arguments are required, more curried functions are returned, which 'remember' the previous arguments. This allows us to pass in some arguments now and the rest later.There are some problems with this:We can fix all of these issues by using a conversion function (disclaimer: that's my blog). This lets us write and call our functions in the usual way, but gives them the same 'memory' ability as if they were curried:The third way is called uncurried and takes all of its arguments in one:Just like with curried functions, uncurried functions can all be called with one argument, although this time it's an array. We still face the same compatibility problems as curried functions: if we choose to use uncurried functions, we can't rely on everyone else choosing the same. Hence we also need a conversion function for uncurrying. That's what call_user_func_array does:Interestingly, we can get rid of that extra function($args) wrapper (a process known as "eta-reduction") by currying call_user_func_array:Unfortunately call_user_func_array isn't as smart as curry; it won't automatically convert between the two. We can write our own uncurry function which has that ability:These conversion functions show that PHP's "usual" way of defining functions is actually redundant: if we replaced PHP's "usual" functions with 'smart' curried or uncurried ones, lots of code would carry on working. If we did that, it's better to curry everything and selectively uncurry as needed, since that's easier than going the other way around.Unfortunately, some things which expect a variable number of arguments using func_get_args would break, as well as functions with default argument values.Interestingly, default values are just a special form of currying. We could mostly do without them if we put those arguments first instead of last, and provided a bunch of alternative definitions which curry in the defaults. For example:As of php 5.6, to pass an array instead of an argument list to a function simply precede the array with an ellipsis (this is called "argument unpacking").The difference between call_user_func_array() and variable functions as of php 5.6 is that variable functions do not allow you to call a static method:Php 7 adds the ability to call static methods via a variable function, so as of php 7 this difference no longer exists.  In conclusion, call_user_func_array() gives your code greater compatibility.

Laravel Eloquent inner join with multiple conditions

Wouter Neuteboom

[Laravel Eloquent inner join with multiple conditions](https://stackoverflow.com/questions/20731606/laravel-eloquent-inner-join-with-multiple-conditions)

I have a question about inner joins with multiple on values.

I did build my code like this in laravel.Only problem is, it gives this outcome:As you can see, the multiple conditions in the join go fine, but it thinks the 1 is a column instead of a string. Is this even possible, or do I have to fix it in the where.Thanks in advance! 

2013-12-22 16:40:22Z

I have a question about inner joins with multiple on values.

I did build my code like this in laravel.Only problem is, it gives this outcome:As you can see, the multiple conditions in the join go fine, but it thinks the 1 is a column instead of a string. Is this even possible, or do I have to fix it in the where.Thanks in advance! You can see the following code to solved the problemOr another way to solved itBecause you did it in such a way that it thinks both are join conditions in your code given below:So,you should remove the second line:Now, you should add a where clause and it should be like this:More with where in (list_of_items):Hope it helpful ;)You can simply add multiple conditions by adding them as where() inside the join closureThis is not politically correct but works

How to get the last dir from a path in a string

Rickstar

[How to get the last dir from a path in a string](https://stackoverflow.com/questions/4733851/how-to-get-the-last-dir-from-a-path-in-a-string)

I am trying to get the last folder name from a path that i store in a string.e.g: Home/new_folder/test

2011-01-19 09:57:11Z

I am trying to get the last folder name from a path that i store in a string.e.g: Home/new_folder/testUse basenameAs a side note to those who answered explode: To get the trailing name component of a path you should use basename! 

In case your path is something like $str = "this/is/something/" the end(explode($str)); combo will fail.You can use basename() function:You can use pathinfo - pathinfoThis will also make sure that a trailing slash doesn't mean a blank string is returned.I know it's an old question, but this automatically gets the last folder without confusing the last item on the list - that could be the script - and not the actual last folder.Explode turns the string into an array, you can then choose the last value in that array to be your result.So, you want something dynamic that will work most of the time as is-- maybe a reusable function or something.Get the URI from the data the webserver gave you in the request via the $_SERVER data: $_SERVER('REQUEST_URI')From that URI, get the path: parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH))basename() is the right tool to get the last directory once you've distilled a path from the full URI: basename(parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH))Try thisor thisYou can do Incase your URL has '/' at the end you can do:This works on windows environtment too, and also works if the path given ends with a slash.

Short unique id in php

Antti

[Short unique id in php](https://stackoverflow.com/questions/307486/short-unique-id-in-php)

I want to create a unique id but uniqid() is giving something like '492607b0ee414'. What i would like is something similar to what tinyurl gives: '64k8ra'. The shorter, the better. The only requirements are that it should not have an obvious order and that it should look prettier than a seemingly random sequence of numbers. Letters are preferred over numbers and ideally it would not be mixed case. As the number of entries will not be that many (up to 10000 or so) the risk of collision isn't a huge factor.Any suggestions appreciated.

2008-11-21 01:05:57Z

I want to create a unique id but uniqid() is giving something like '492607b0ee414'. What i would like is something similar to what tinyurl gives: '64k8ra'. The shorter, the better. The only requirements are that it should not have an obvious order and that it should look prettier than a seemingly random sequence of numbers. Letters are preferred over numbers and ideally it would not be mixed case. As the number of entries will not be that many (up to 10000 or so) the risk of collision isn't a huge factor.Any suggestions appreciated.Make a small function that returns random letters for a given length:Then you'll want to call that until it's unique, in pseudo-code depending on where you'd store that information:You might also want to make sure the letters do not form a word in a dictionnary. May it be the whole english dictionnary or just a bad-word dictionnary to avoid things a customer would find of bad-taste.EDIT: I would also add this only make sense if, as you intend to use it, it's not for a big amount of items because this could get pretty slow the more collisions you get (getting an ID already in the table). Of course, you'll want an indexed table and you'll want to tweak the number of letters in the ID to avoid collision. In this case, with 6 letters, you'd have 26^6 = 308915776 possible unique IDs (minus bad words) which should be enough for your need of 10000.EDIT:

If you want a combinations of letters and numbers you can use the following code:@gen_uuid() by gord.preg_replace got some nasty utf-8 problems, which causes the uid somtimes to contain "+" or "/".

To get around this, you have to explicitly make the pattern utf-8Took me quite a while to find that, perhaps it's saves somebody else a headacheYou can achieve that with less code:Result (examples):There are two ways to obtain a reliably unique ID: Make it so long and variable that the chances of a collision are spectacularly small (as with a GUID) or store all generated IDs in a table for lookup (either in memory or in a DB or a file) to verify uniqueness upon generation.If you're really asking how you can generate such a short key and guarantee its uniqueness without some kind of duplicate check, the answer is, you can't.Here's the routine I use for random base62s of any length...Calling gen_uuid() returns strings like WJX0u0jV, E9EMaZ3P etc.By default this returns 8 digits, hence a space of 64^8 or roughly 10^14,

this is often enough to make collisions quite rare.For a larger or smaller string, pass in $len as desired.  No limit in length, as I append until satisfied [up to safety limit of 128 chars, which can be removed].Note, use a random salt inside the md5 [or sha1 if you prefer], so it cant easily be reverse-engineered.I didn't find any reliable base62 conversions on the web, hence this approach of stripping chars from the base64 result.Use freely under BSD licence, 

enjoy,gordReally simple solution:Make the unique ID with:Get the original value again:Can't take credit for this as it's from another stack overflow page, but I thought the solution was so elegant and awesome that it was worth copying over to this thread for people referencing this.You could use the Id and just convert it to base-36 number if you want to convert it back and forth. Can be used for any table with an integer id. Smart people can probably figure it out with enough id examples. Dont let this obscurity replace security.I came up with what I think is a pretty cool solution doing this without a uniqueness check. I thought I'd share for any future visitors.A counter is a really easy way to guarantee uniqueness or if you're using a database a primary key also guarantees uniqueness. The problem is it looks bad and and might be vulnerable. So I took the sequence and jumbled it up with a cipher. Since the cipher can be reversed, I know each id is unique while still appearing random.It's python not php, but I uploaded the code here:

https://github.com/adecker89/Tiny-Unique-IdentifiersLetters are pretty, digits are ugly.

You want random strings, but don't want "ugly" random strings?Create a random number and print it in alpha-style (base-26), like the reservation "numbers" that airlines give.There's no general-purpose base conversion functions built into PHP, as far as I know, so you'd need to code that bit yourself.Another alternative: use uniqid() and get rid of the digits.Or replace them with letters:You can also do it like tihs:You can do that without unclean/costy stuff like loops, String concatenations or multiple calls to rand(), in a clean and easy to read way. Also, it is better to use mt_rand():If you need the String to have the exact length in any case, just pad the hex number with zeros:The "theoretical backdraw" is, that you are limited to PHPs capabilities - but this is more a philosophical issue in that case ;) Let's go through it anyways:Coming back to the topic - the intuitive do { (generate ID) } while { (id is not uniqe) } (insert id) has one drawback and one possible flaw that might drive you straight to darkness...Drawback: The validation is pessimistic. Doing it like this always requires a check at the database. Having enough keyspace (for example length of 5 for your 10k entries) will quite unlikely cause collisions as often, as it might be comparably less resource consuming to just try to store the data and retry only in case of a UNIQUE KEY error.Flaw: User A retrieves an ID that gets verified as not taken yet. Then the code will try to insert the data. But in the meantime, User B entered the same loop and unfortunately retrieves the same random number, because User A is not stored yet and this ID was still free. Now the system stores either User B or User A, and when attempting to store the second User, there already is the other one in the meantime - having the same ID.You would need to handle that exception in any case and need to re-try the insertion with a newly created ID. Adding this whilst keeping the pessimistic checking loop (that you would need to re-enter) will result in quite ugly and hard to follow code. Fortunately the solution to this is the same like the one to the drawback: Just go for it in the first place and try to store the data. In case of a UNIQUE KEY error just retry with a new ID.Take a lookt at this article It explains how to generate short unique ids from your bdd ids, like youtube does.Actually, the function in the article is very related to php function base_convert which converts a number from a base to another (but is only up to base 36).If you do like a longer version of unique Id use this:

$uniqueid = sha1(md5(time()));Best Answer Yet: Smallest Unique "Hash Like" String Given Unique Database ID - PHP Solution, No Third Party Libraries Required.Here's the code:

Increase days to php current Date()

nickf

[Increase days to php current Date()](https://stackoverflow.com/questions/277247/increase-days-to-php-current-date)

How do I add a certain number of days to the current date in PHP?I already got the current date with:Just need to add x number of days to it

2008-11-10 06:59:24Z

How do I add a certain number of days to the current date in PHP?I already got the current date with:Just need to add x number of days to itphp supports c style date functions.  You can add or substract date-periods with English-language style phrases via the strtotime function.  examples...or a day is 86400 seconds.The simplest way to add x no. of days..OR from specified date...The date_add() function should do what you want. In addition, check out the docs (unofficial, but the official ones are a bit sparse) for the DateTime object, it's much nicer to work with than the procedural functions in PHP.With php 5.3 will output 2012-12-242012-12-252012-12-26If you need this code in several places then I'd suggest that you add a short function to keep your code simpler and easier to test.Then you can use it anywhere like this:Add 15 day to a select element (using "Alive to Die" suggestion)$NewTime = mktime(date('G'), date('i'), date('s'), date('n'), date('j') + $DaysToAdd, date('Y'));From mktime documentation:The advantage of this method is that you can add or subtract any time interval (hours, minutes, seconds, days, months, or years) in an easy to read line of code.  Beware there is a tradeoff in performance, as this code is about 2.5x slower than strtotime("+1 day") due to all the calls to the date() function.  Consider re-using those values if you are in a loop.

PHP Error: Function name must be a string

RKh

[PHP Error: Function name must be a string](https://stackoverflow.com/questions/1611709/php-error-function-name-must-be-a-string)

I added the following lines to the top of my PHP code, but it throws an error:I tried: $_COOKIE("CaptchaResponseValue"). The cookie is successfully set and is available. Why is it giving me an error when I am using $_COOKIE?

2009-10-23 06:38:29Z

I added the following lines to the top of my PHP code, but it throws an error:I tried: $_COOKIE("CaptchaResponseValue"). The cookie is successfully set and is available. Why is it giving me an error when I am using $_COOKIE?It should be $_COOKIE['name'], not $_COOKIE('name')$_COOKIE is an array, not a function.Using parenthesis in a programming language or a scripting language usually means that it is a function.However $_COOKIE in php is not a function, it is an Array. To access data in arrays you use square braces ('[' and ']') which symbolize which index to get the data from.  So by doing $_COOKIE['test'] you are basically saying: "Give me the data from the index 'test'.Now, in your case, you have two possibilities: (1) either you want to see if it is false--by looking inside the cookie or (2) see if it is not even there.For this, you use the isset function which basically checks if the variable is set or not.ExampleAnd if you want to check if the value is false and it is set you can do the following:One thing that you can keep in mind is that if the first test fails, it wont even bother checking the next statement if it is AND ( && ).And to explain why you actually get the error "Function must be a string", look at this page. It's about basic creation of functions in PHP, what you must remember is that a function in PHP can only contain certain types of characters, where $ is not one of these. Since in PHP $ represents a variable.A function could look like this: _myFunction  _myFunction123 myFunction and in many other patterns as well, but mixing it with characters like $ and % will not work.Try square braces with your $_COOKIE, not parenthesis. Like this:I also corrected your location header call a little too.If you wanna ascertain if cookie is set...useIt will be $_COOKIE['CaptchaResponseValue'], not $_COOKIE('CaptchaResponseValue')In PHP.js, $_COOKIE is a function ;-)  via http://phpjs.org/functions/setcookie:509A useful explanation to how braces are used (in addition to Filip Ekberg's useful answer, above) can be found in the short paper Parenthesis in Programming Languages.

How can I check if request was a POST or GET request in Symfony2 or Symfony3

Gottlieb Notschnabel

[How can I check if request was a POST or GET request in Symfony2 or Symfony3](https://stackoverflow.com/questions/22852305/how-can-i-check-if-request-was-a-post-or-get-request-in-symfony2-or-symfony3)

I just wondered if there is a very easy way (best: a simple $this->container->isGet() I can call) to determine whether the request is a $_POST or a $_GET request.According to the docs,But I won't be able to use if($request->request) or if($request->query) to check, because both are existing attributes in the Request class.So I was wondering of Symfony offers something like thementioned above?

2014-04-04 02:13:56Z

I just wondered if there is a very easy way (best: a simple $this->container->isGet() I can call) to determine whether the request is a $_POST or a $_GET request.According to the docs,But I won't be able to use if($request->request) or if($request->query) to check, because both are existing attributes in the Request class.So I was wondering of Symfony offers something like thementioned above?If you want to do it in controller,or in your model (service), inject or pass the Request object to your model first, then do the same like the above.Edit: for Symfony 3 use this codeOr this:Since the answer suggested to use getRequest() which is now deprecated,

You can do it by this:Or this:You could do:Just read a bit about request object on Symfony API page.

How to write file in UTF-8 format?

Starmaster

[How to write file in UTF-8 format?](https://stackoverflow.com/questions/4839402/how-to-write-file-in-utf-8-format)

I have bunch of files that are not in UTF-8 encoding and I'm converting a site to UTF-8 encoding.I'm using simple script for files that I want to save in utf-8, but the files are saved in old encoding:How can I save files in utf-8 encoding?

2011-01-29 21:01:01Z

I have bunch of files that are not in UTF-8 encoding and I'm converting a site to UTF-8 encoding.I'm using simple script for files that I want to save in utf-8, but the files are saved in old encoding:How can I save files in utf-8 encoding?file_get_contents / file_put_contents will not magically convert encoding.You have to convert the string explicitly; for example with iconv() or mb_convert_encoding().Try this:Or alternatively, with PHP's stream filters:Add BOM: UTF-8Iconv to the rescue.On Unix/Linux a simple shell command could be used alternatively to convert all files from a given directory:Could be started via PHPs exec() as well.I got this line from CoolIf you want to use recode recursively, and filter for type, try this:This works for me. :)I put all together and got easy way to convert ANSI text files to "UTF-8 No Mark":Usage: filesToUTF8('C:/Temp/','C:/Temp/conv_files/','php,txt');

Insert current date/time using now() in a field using MySQL/PHP

user1260310

[Insert current date/time using now() in a field using MySQL/PHP](https://stackoverflow.com/questions/9841336/insert-current-date-time-using-now-in-a-field-using-mysql-php)

Since MySQL evidently cannot automatically insert the function now() in a datetime field in adding new records like some other databases, based on comments, I'm explicitly trying to insert it using an SQL statement. (People seem to think timestamp with curdate() is not the answer due to the various limitations of timestamp.) There are numerous articles on the web suggesting inserting now() using SQL should work.When I try to insert the date time using the SQL statement, however, the field does not populate with the current time/date, but it only gives me the default 0000-00-, etc. This is probably a syntax error, but it's driving me crazy, so I am posting it. It inserts first and last, but nothing for when added, leaving 0000-00-00, etc. in the whenadded field.The field type is datetime, it has no collation, attributes, null default or extra. BTW, I tried putting now() in single quotes... It threw an error.

2012-03-23 14:52:10Z

Since MySQL evidently cannot automatically insert the function now() in a datetime field in adding new records like some other databases, based on comments, I'm explicitly trying to insert it using an SQL statement. (People seem to think timestamp with curdate() is not the answer due to the various limitations of timestamp.) There are numerous articles on the web suggesting inserting now() using SQL should work.When I try to insert the date time using the SQL statement, however, the field does not populate with the current time/date, but it only gives me the default 0000-00-, etc. This is probably a syntax error, but it's driving me crazy, so I am posting it. It inserts first and last, but nothing for when added, leaving 0000-00-00, etc. in the whenadded field.The field type is datetime, it has no collation, attributes, null default or extra. BTW, I tried putting now() in single quotes... It threw an error.NOW() normally works in SQL statements and returns the date and time. Check if your database field has the correct type (datetime). Otherwise, you can always use the PHP date() function and insert:But I wouldn't recommend this.You forgot to close the mysql_query command:mysql_query("INSERT INTO users (first, last, whenadded) VALUES ('$first', '$last', now())");Note that last parentheses.Like Pekka said, it should work this way. I can't reproduce the problem with this self-contained example:Which (currently) printsAnd here's (almost) the same script using a TIMESTAMP field and DEFAULT CURRENT_TIMESTAMP:Conveniently, the timestamp is converted to the same datetime string representation as in the first example - at least with my PHP/PDO/mysqlnd version.The only reason I can think of is you are adding it as string 'now()', not function call now().

Or whatever else typo.to see if it returns correct value?What about SYSDATE() ?Look at Difference between NOW(), SYSDATE() & CURRENT_DATE() in MySQL for more info about NOW() and SYSDATE().worked for me .

but my field type is date only and yours is datetime. i am not sure if this is the caseThese both work fine for me...Side note: mysql_query() is not the best way to connect to MySQL in current versions of PHP.

Compiling php with curl, where is curl installed?

HyderA

[Compiling php with curl, where is curl installed?](https://stackoverflow.com/questions/4976971/compiling-php-with-curl-where-is-curl-installed)

I need to specify a directory when compiling php with --with-curl=The curl binary is located at /usr/bin/curlcurl -V gives melocate curl gives meremoved /usr/share/... and other irrelevant filesUPDATETried --with-curl=/usr/lib64 and --with-curl=/usr/lib although I'm pretty sure it's 64 bit.SOLUTIONPHP requires curl-devel

2011-02-12 07:41:56Z

I need to specify a directory when compiling php with --with-curl=The curl binary is located at /usr/bin/curlcurl -V gives melocate curl gives meremoved /usr/share/... and other irrelevant filesUPDATETried --with-curl=/usr/lib64 and --with-curl=/usr/lib although I'm pretty sure it's 64 bit.SOLUTIONPHP requires curl-develNone of these will allow you to compile PHP with cURL enabled.In order to compile with cURL, you need libcurl header files (.h files). They are usually found in /usr/include/curl. They generally are bundled in a separate development package.Per example, to install libcurl in Ubuntu:Or CentOS:Then you can just do:If you compile cURL manually, you can specify the path to the files without the lib or include suffix. (e.g.: /usr/local if cURL headers are in /usr/local/include/curl).Adding to @netcoder answer above, 

If you are using Ubuntu 17+, installing libcurl header files is half of the solution. The installation path in ubuntu 17.0+ is different than the installation path in older Ubuntu version. After installing libcurl, you will still get the "cURL not found" error. You need to perform one extra step (as suggested by @minhajul in the OP comment section).Add a symlink in /usr/include of the cURL installation folder (cURL installation path in Ubuntu 17.0.4 is /usr/include/x86_64-linux-gnu/curl). My server was running Ubuntu 17.0.4, the commands to enable cURL support wereThen create a link to cURL installationTry just --with-curl, without specifying a location, and see if it'll find it by itself.If you're going to compile a 64bit version(x86_64) of php use:  /usr/lib64/For architectures (i386 ... i686) use /usr/lib/I recommend compiling php to the same architecture as apache. As you're using a 64bit linux i asume your apache is also compiled for x86_64.php curl lib is just a wrapper of cUrl, so, first of all, you should install cUrl.

Download the cUrl source to your linux server. Then, use the follow commands to install:Then, copy the head files in the "/curl/install/home/include/" to "/usr/local/include".   After all above steps done, the php curl extension configuration could find the original curl, and you can use the standard php extension method to install php curl.

Hope it helps you, :)

How to install PHP intl extension in Ubuntu 14.04

Hiranya Sarma

[How to install PHP intl extension in Ubuntu 14.04](https://stackoverflow.com/questions/42243461/how-to-install-php-intl-extension-in-ubuntu-14-04)

I have a hard time to find exact method to install PHP intl extension in Ubuntu 14.04.I tried with sudo apt-get install php5-intl but displays error Unable to locate package.I really need this extension for Zend Framework 2 , because of above missing extension I am getting error like thisERROR: Zend\I18n\Validator component requires the intl PHP extensionI am using PHP 5.5.9.How can I install PHP-intl extension in a correct way ?

2017-02-15 07:50:52Z

I have a hard time to find exact method to install PHP intl extension in Ubuntu 14.04.I tried with sudo apt-get install php5-intl but displays error Unable to locate package.I really need this extension for Zend Framework 2 , because of above missing extension I am getting error like thisERROR: Zend\I18n\Validator component requires the intl PHP extensionI am using PHP 5.5.9.How can I install PHP-intl extension in a correct way ?For php5 on Ubuntu 14.04For php7 on Ubuntu 16.04For php7.2 on Ubuntu 18.04Anyway restart your apache afterIf the extension is already installed you should try to enable it. Either in the php.ini file or from command line.Syntax:php:apache:install it from terminal May be universe repository is disabled, here is your package in itEnable it UpdateAnd installFor php 5.6 on ubuntu 16.04 you could search with 

aptitude search intl

after you can choose the right one, for example

sudo aptitude install php-intl

and finally

sudo service apache2 restartgood Luck! then restart your server

Get WordPress Post ID from Post title

Aaron

[Get WordPress Post ID from Post title](https://stackoverflow.com/questions/1536682/get-wordpress-post-id-from-post-title)

I have an issue with a custom WordPress theme I'm developing. It's a bit convoluted, but essentially, what I need to do is get a Post Id by it's Post Title. In pseudo-code it would ideally be something like:The title mentioned is a static reference not being pulled in from WordPress, it's already present on the page.Thanks in advance.

2009-10-08 09:33:11Z

I have an issue with a custom WordPress theme I'm developing. It's a bit convoluted, but essentially, what I need to do is get a Post Id by it's Post Title. In pseudo-code it would ideally be something like:The title mentioned is a static reference not being pulled in from WordPress, it's already present on the page.Thanks in advance.Just a quick note for anyone who stumbles across this:

get_page_by_title() can now handle any post type.

The $post_type parameter has been added in WP 3.0.Found a solution if anyone else struggles with this. Only posted the question out of desperation after 4 hours testing/Googling!Found at: http://sudarmuthu.com/blog/2009/09/18/retrieving-posts-and-pages-based-on-title-in-wordpress.htmlLike Michal Mau mentioned:UseIt's ( $page_title, $output, $post_type ) to easily receive a post instead of a page.May this will help you more by creating function so that you need not to repeat the codeyou can use the following code as per [a link][http://codex.wordpress.org/Function_Reference/get_page_by_title]1 )!Another way to get the post and page ID, is to use a plugin..there is a plugin, that what it simply does, is just add a column to your all pages, all posts, all categories tables, and have a column title of ID...and right below, you will see all the page/post id listed in that column..I think that should be very useful..I use this plugin very frequently and it is very lightweight.http://getyourblogready.com/?p=758No need to use any type of SQL querys or plugin, use Wordpress standard functions for thisit is easy to get the post id from post title using wp query:1) differ post_title and post_name from each other. post_name maybe is the slug. post_title is the title of post.2) 

PHP switch case more than 1 value in the case

Alex Pliutau

[PHP switch case more than 1 value in the case](https://stackoverflow.com/questions/4163188/php-switch-case-more-than-1-value-in-the-case)

I have a variable that holds the values ('Weekly', 'Monthly', 'Quarterly', 'Annual'), and I have another variable that holds the values from 1 to 10.It isn't beautiful, because my code has a lot of duplicates. What I want:How can I do it in PHP? Thank you in advance. Sorry for my english.

2010-11-12 09:29:21Z

I have a variable that holds the values ('Weekly', 'Monthly', 'Quarterly', 'Annual'), and I have another variable that holds the values from 1 to 10.It isn't beautiful, because my code has a lot of duplicates. What I want:How can I do it in PHP? Thank you in advance. Sorry for my english.the simplest and probably best way performance wise would be:also, possibile for more complex situations:in this scenario, $var2 must be set and can not be null or 0Everything after the first matching case will be executed until a break statement is found. So it just falls through to the next case, which allows you to "group" cases.Switch is also very handy for AB testing. Here the code for randomly testing 4 different versions of something:

PHPExcel how to set cell value dynamically

Asif

[PHPExcel how to set cell value dynamically](https://stackoverflow.com/questions/2584954/phpexcel-how-to-set-cell-value-dynamically)

How to set cell/column value dynamically using PHPExcel library?I am fetching result set from MySQL database and I want to write data in excel format using PHPExcel library. Looking at example indicates that we have to hard code cell/column reference As 'A1', then it writes to cell/column A1. How I can increment cell/column and/or row reference based on rows and corresponding column values from result set?Please guide.

2010-04-06 13:05:26Z

How to set cell/column value dynamically using PHPExcel library?I am fetching result set from MySQL database and I want to write data in excel format using PHPExcel library. Looking at example indicates that we have to hard code cell/column reference As 'A1', then it writes to cell/column A1. How I can increment cell/column and/or row reference based on rows and corresponding column values from result set?Please guide.I asume you have connected to your database already.I don't have much experience working with php but from a logic standpoint this is what I would do.Below is some pseudocode illustrating this technique:

Stripe Payment: Getting Error as Customer cus_***** does not have a linked card with ID tok_*****

Sree

[Stripe Payment: Getting Error as Customer cus_***** does not have a linked card with ID tok_*****](https://stackoverflow.com/questions/34415987/stripe-payment-getting-error-as-customer-cus-does-not-have-a-linked-card)

In testing mode when I create a new customer and tries for payment, i got this error. Im using card number : 4242424242424242

exp_month :12

exp_year 2016The return response is,Input Charge Data is,

2015-12-22 12:30:53Z

In testing mode when I create a new customer and tries for payment, i got this error. Im using card number : 4242424242424242

exp_month :12

exp_year 2016The return response is,Input Charge Data is,There are three different ways to create a charge:In your case, you're passing a token ID in the source parameter along with a customer ID in the customer parameter.If this is a new card, you should first use the token to create a card on the customer, then create the charge with the card ID. If the card was already saved for this customer, then you don't need to collect the card information again (and thus don't need to create a token at all).

Symfony2 - Twig - How can I send parameters to the parent template?

Germán Lena

[Symfony2 - Twig - How can I send parameters to the parent template?](https://stackoverflow.com/questions/17244162/symfony2-twig-how-can-i-send-parameters-to-the-parent-template)

I am working on a PHP project using Symfony2 with Twig templating, and I can't find a solution for this problem.I have an admin bundle and all the templates extend from admin base which has a master template with a menu.I need to set the current tab of the menu in the base template of the page to selected when the user is on that page. Is there any way to pass parameter to the base template through extends?

2013-06-21 20:54:08Z

I am working on a PHP project using Symfony2 with Twig templating, and I can't find a solution for this problem.I have an admin bundle and all the templates extend from admin base which has a master template with a menu.I need to set the current tab of the menu in the base template of the page to selected when the user is on that page. Is there any way to pass parameter to the base template through extends?Here is a simple example:base.html.twig:page2.html.twig:Output from rendering page2.html.twig:A better way that I just discovered is the basic approach by checking the route for the shortcut route name:Or another way is to name all your route shortcut names according to the group it belongs to. For example all the routes from your products controller start with "product_...." and then in the template you can do this:

Unit Testing with items that need to send headers

Mez

[Unit Testing with items that need to send headers](https://stackoverflow.com/questions/190292/unit-testing-with-items-that-need-to-send-headers)

I'm currently working with PHPUnit to try and develop tests alongside what I'm writing, however, I'm currently working on writing the Session Manager, and am having issues doing so...The constructor for the Session handling class isHowever, as PHPUnit sends out text before it starts the testing, any testing on this Object returns a failed test, as the HTTP "Headers" have been sent...

2008-10-10 06:01:46Z

I'm currently working with PHPUnit to try and develop tests alongside what I'm writing, however, I'm currently working on writing the Session Manager, and am having issues doing so...The constructor for the Session handling class isHowever, as PHPUnit sends out text before it starts the testing, any testing on this Object returns a failed test, as the HTTP "Headers" have been sent...Well, your session manager is basically broken by design. To be able to test something, it must be possible to isolate it from side effects. Unfortunately, PHP is designed in such a way, that it encourages liberal use of global state (echo, header, exit, session_start etc. etc.).The best thing you can do, is to isolate the side-effects in a component, that can be swapped at runtime. That way, your tests can use mocked objects, while the live code uses adapters, that have real side-effects. You'll find that this doesn't play well with singletons, which I presume you're using. So you'll have to use some other mechanism for getting shared objects distributed to your code. You can start with a static registry, but there are even better solutions if you don't mind a bit of learning.If you can't do that, you always have the option of writing integration-tests. Eg. use the PHPUnit's equivalent of WebTestCase.Create a bootstrap file for phpunit, which calls:Then start phpunit like this:The bootstrap file gets called before everything else, so the header hasn't been sent and everything should work fine.phpUnit prints output as the tests run thus causing headers_sent() to return true even in your first test.To overcome this issue for an entire test suite you simply need to use ob_start() in your setup script.For example, say you have a file named AllTests.php that is the first thing loaded by phpUnit. That script might look like the following:I had the same issue and I solved it by calling phpunit with --stderr flag just like this:Hope it helps someone!I think the "right" solution is to create a very simple class (so simple it doesn't need to be tested) that's a wrapper for PHP's session-related functions, and use it instead of calling session_start(), etc. directly.In the test pass mock object instead of a real stateful, untestable session class.I'm wondering why nobody have listed XDebug option:Can't you use output buffering before starting the test? If you buffer everything that is output, you shouldn't have problems setting any headers as no output would have yet been sent to client at that point.Even if OB is used somewhere inside your classes, it is stackable and OB shouldn't affect what's going on inside.As far as I know Zend Framework uses the same output buffering for their Zend_Session package tests. You can take a look at their test cases to get you started.The creation of the bootstrap file, pointed out 4 posts back seems the cleanest way around this.Often with PHP we are having to maintain, and try to add some kind of engineering discipline to legacy projects that are abysmally put together. We don't have the time (or the authority) to ditch the whole pile of rubbish and start again, so the first anwer by troelskn isn't always possible as a way forward.

( If we could go back to the initial design, then we could ditch PHP altogether and use something more modern, such as ruby or python, rather than help perpetuate this COBOL of the web development world. )If you are trying to write unit tests for modules that use session_start or setcookie throughout them, than starting the session in a boostrap file gets your round these issues.As I'm unittesting my bootstrap right now (yes I know most of you don't do that), I'm running in to the same problem (both header() and session_start()).

The solution I found is rather simple, in your unittest bootstrap define a constant and simply check it before sending the header or starting the session:I agree that this is not perfect by design, but I'm unittesting an existing application, rewriting large parts is not desired. I also using the same logic to test private methods using the __call() and __set() magic methods.It seems that you need to inject the session so that you can test your code. The best option I have used is Aura.Auth for the authentication process and using NullSession and NullSegment for testing. Aura testing with null sessionsThe Aura framework is beautifully written and you can use Aura.Auth on its own without any other Aura framework dependencies.

WordPress: get author info from post id

superUntitled

[WordPress: get author info from post id](https://stackoverflow.com/questions/3188901/wordpress-get-author-info-from-post-id)

Or even the author id from the post id. I am trying to return the author meta (author page link and avatar) in the sidebar of a single post page (outside of the post loop). What is the best way to do this? I am using a custom function (see below) to return the post id, but am not sure what function to call next.

2010-07-06 17:59:57Z

Or even the author id from the post id. I am trying to return the author meta (author page link and avatar) in the sidebar of a single post page (outside of the post loop). What is the best way to do this? I am using a custom function (see below) to return the post id, but am not sure what function to call next.I figured it out. If you want it outside of loop then use the below code.

Set default value on Datetime field in symfony2 form

i.am.michiel

[Set default value on Datetime field in symfony2 form](https://stackoverflow.com/questions/8713200/set-default-value-on-datetime-field-in-symfony2-form)

I have a form containing several fields. One of them is a Datetime field. How to define a default value for that field? I've tried setting a value on the related entity, in controller, in constructor and __construct :Not working. Tried to define the $data variable in the buildForm : Not working either. 

Any ideas, Symfony2 community?EDIT : Adding entity on demand of faost. 

2012-01-03 13:44:47Z

I have a form containing several fields. One of them is a Datetime field. How to define a default value for that field? I've tried setting a value on the related entity, in controller, in constructor and __construct :Not working. Tried to define the $data variable in the buildForm : Not working either. 

Any ideas, Symfony2 community?EDIT : Adding entity on demand of faost. Set it in the entity constructor:Elnur's answer is correct and is perhaps the recommended one. But for completeness, an alternative way to set the default value for a date widget in a form is to specify the data key in the options array argument with an instance of DateTime.Note: This will overwrite the previously set datetime on every edit.This solution doesn't require modifying your entity object.This solution applies the behaviour to just this form, it does not couple this behaviour to the entity itself. You might have several forms that modify an entity with different required behaviours. Some require a default date, others don't.You can set the attributes to on update CURRENT_TIMESTAMP and defualt to current time stamp will update the current time stamp automatically without updating through query

PHPUnit Mock Objects and Static Methods

rr.

[PHPUnit Mock Objects and Static Methods](https://stackoverflow.com/questions/2357001/phpunit-mock-objects-and-static-methods)

I am looking for the best way to go about testing the following static method (specifically using a Doctrine Model):Ideally, I would use a mock object to ensure that "fromArray" (with the supplied user data) and "save" were called, but that's not possible as the method is static.Any suggestions?

2010-03-01 15:49:00Z

I am looking for the best way to go about testing the following static method (specifically using a Doctrine Model):Ideally, I would use a mock object to ensure that "fromArray" (with the supplied user data) and "save" were called, but that's not possible as the method is static.Any suggestions?Sebastian Bergmann, the author of PHPUnit, recently had a blog post about Stubbing and Mocking Static Methods. With PHPUnit 3.5 and PHP 5.3 as well as consistent use of late static binding, you can doUpdate: staticExpects is deprecated as of PHPUnit 3.8 and will be removed completely with later versions.There is now the AspectMock library to help with this:https://github.com/Codeception/AspectMockI would make a new class in the unit test namespace that extends the Model_User and test that. Here's an example:Original class:Mock Class to call in unit test(s):In your unit test:Testing static methods is generally considered as a bit hard (as you probably already noticed), especially before PHP 5.3.Could you not modify your code to not use static a method ? I don't really see why you're using a static method here, in fact ; this could probably be re-written to some non-static code, could it not ?

For instance, could something like this not do the trick :Not sure what you'll be testing ; but, at least, no static method anymore...Another possible approach is with the Moka library: The doublit library could also help you to test static methods :

Where do PEAR packages normally get installed?

rlandster

[Where do PEAR packages normally get installed?](https://stackoverflow.com/questions/5334251/where-do-pear-packages-normally-get-installed)

I am using a Debian squeeze server. I have installed PEAR using aptitude install php-pear. This created a directory /usr/share/php/PEAR. I installed some PEAR packages including Phing. I installed the Phing files using pear install --alldeps phing/phing and the files showed up in /usr/share/php/phing. But shouldn't PEAR packages (under normal circumstances) be put in /usr/share/php/PEAR? When I runI get "/usr/share/php". Have I got something configured wrong? 

2011-03-17 02:33:37Z

I am using a Debian squeeze server. I have installed PEAR using aptitude install php-pear. This created a directory /usr/share/php/PEAR. I installed some PEAR packages including Phing. I installed the Phing files using pear install --alldeps phing/phing and the files showed up in /usr/share/php/phing. But shouldn't PEAR packages (under normal circumstances) be put in /usr/share/php/PEAR? When I runI get "/usr/share/php". Have I got something configured wrong? is correct for Debian.itself contains classes for PEAR itself.The reason for using /usr/share/php is that the pear CLI tool is an installer that installs libraries (or applications) for PHP - choosing php is thus correct.Whatever O/S you are using it doesn't matter.You just need to use the pear config-get php_dir via a console. And you get full directory path.For XAMPP application on Microsoft Window you have to go to XAMPP installation directory path <<XAMPP Installation folder path>>/bin and use ./pear config-get php_dir which lead to execute the binary file using current location and do the same job.in case php is installed in /usr/local/phppear is here:/usr/local/php/lib/phpI am using Mac OSX Lion.

I installed pear in /usr/lib/php/pearSo the data also be installed there.On my installation of Debian PEAR is located here:Just throwing this out there, in case you have pear installed in a round-about way:For example, I was using MAMP on one of my local machines and it was in a really weird place.On my 64-bit Ubuntu system, the pear packages are installed to /usr/share/php/PEAR/,

but I do not know how to change the pear install path. Maybe you can configure this somewhere.If you're using CPanel to install them they're much likely to be located in 

Filling PDF Forms with PHP [closed]

mno

[Filling PDF Forms with PHP [closed]](https://stackoverflow.com/questions/77873/filling-pdf-forms-with-php)

Are there PHP libraries which can be used to fill PDF forms and then save (flatten) them to PDF files?

2008-09-16 22:19:08Z

Are there PHP libraries which can be used to fill PDF forms and then save (flatten) them to PDF files?The libraries and frameworks mentioned here are good, but if all you want to do is fill in a form and flatten it, I recommend the command line tool called pdftk (PDF Toolkit).See https://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/You can call the command line from php, and the command ispdftk formfile.pdf fill_form fieldinfo.fdf output outputfile.pdf flattenYou will need to find the format of an FDF file in order to generate the info to fill in the fields. Here's a good link for that:http://www.tgreer.com/fdfServe.html[Edit: The above link seems to be out of commission. Here is some more info...]The pdftk command can generate an FDF file from a PDF form file. You can then use the generated FDF file as a sample. The form fields are the portion of the FDF file that looks likeYou might also check out php-pdftk, which is a library specific to PHP. I have not used it, but commenter Álvaro (below) recommends it.A big +1 to the accepted answer, and a little tip if you run into encoding issues with the fdf file. If you generate the fields.fdf and upon runningyou get then you've most likely run into a UTF-16 character set issue.

Try converting the ftf by means ofI was then able to edit and import the better.fdf file into my PDF form.Hopefully this saves someone some Google-ingI've had plenty of success with using a form that submits to a php script that uses fpdf and passes in the form fields as get variables (maybe not a great best-practice, but it works). and the you could have something like this.This skeletal example ought to help ya get started. generating fdf File with php:

see http://www.php.net/manual/en/book.fdf.phpthen fill it into a pdf with pdftk (see above)For:Feel free to check my PdfFormFillerUTF-8.Looks like this has been covered before.  Click through for relevant code using Zend Framework PDF library.We use PDFLib at work.  The paid version isn't very expensive, and there is a more limited open source edition, if you are unable to shell out for the paid version.I wrote a Perl library, CAM::PDF, with a command-line interface that can solve this.  I tried using an FDF solution years ago, but found it way too complicated which is why I wrote CAM::PDF in the first place.  My library uses a few heuristics to replace the form with the desired text, so it's not perfect.  But it works most of the time, and it's fast, free and quite straightforward to use.

completely deleting a file from server

Amar Banerjee

[completely deleting a file from server](https://stackoverflow.com/questions/17548906/completely-deleting-a-file-from-server)

I want to delete a file by using PHP. I have used the unlink() function, but I was wondering about the security of unlink. Is the file completely deleted from the server? I want to make sure that there is no way to get the file back and the file is completely removed from the server.

2013-07-09 13:04:45Z

I want to delete a file by using PHP. I have used the unlink() function, but I was wondering about the security of unlink. Is the file completely deleted from the server? I want to make sure that there is no way to get the file back and the file is completely removed from the server.open the file in binary mode for writing, write 1's over the entire file, close the file, and then unlink it. overwrites any data within the file so it cannot be recovered.Personally i would say use 1's instead of 0's as 1's are actual data and will always write, where as 0's may not write, depending on several factors.Edit: After some thought, and reading of comments, i would go with a hybrid approach, depending on "how deleted" you want the file to be, if you simply wish to make it so the data cannot be recovered, overwrite the entire files length with 1's as this is fast, and destroys the data, the problem with this, is it leaves a set length of uniform data on the disk which infers a file USED to be there and gives away the files length, giving vital pieces of forensic information. Simply writing random data will not avoid this also, as if all the drive sectors around this file are untouched, this will also leave a forensic trace.The best solution factoring in forensic deletion, obfuscation and plausible deniability (again, this is overkill, but im adding it for the sake of adding it), overwrite the entire length of the file with 1's and then, for HALF the length of the file in bytes, write from mt_rand in random length sizes, from random starting points, leaving the impression that many files of varying lengths used to be in this area, thus creating a false trail. (again, this is completely overkill and is generally only needed by serial killers and the CIA, but im adding it for the sake of doing so).the US government used to recommend a seven step wipe, for disks.

1) all '1's

2) all '0's

3) the pattern '01'

4) the pattern '10'

5) a random pattern

6) all '1'

7) a random pattern,re the code sample, using a language like PHP is wrong for this type of wipe as your relaying on the OS really wipeing the file and not doing something cleaver like only wipeing it the last time or just unlinking it, however...(untested)This might not answer HOW to perfectly delete a file "with PHP", but it answers your question: "Is the file completely deleted from the server ?"According to the highest voted comment on the offical PHP unlink() manual page, the unlink function does not really delete the file, it's deleting the system link to the file's content ! As files can have several files names (!) [symlinks?] the file will only be deleted when ALL file names are unlinked. So, if your file has 2 names, then unlink() will not really delete the file unless you unlink() both file names. Dear linux guys, please correct me here if necessary.Here a full quote of the excellent comment:Have a look on unlink()'s sister function link() here.The way to go to really delete a file with PHP (in linux) is to use the exec() function, which executes real bash commands (doing things with linux bash feel correct btw). In this case, the file test.jpg would be deleted by doing:More info on how to use rm (remove) correctly can be found for example here. Please note: PHP needs the right to delete the file! UPDATE: Unfortunatly, the linux rm command ALSO does not really delete the file if it has two names/links. Look here for more info.

I'll have a deeper research on that and give feedback...It is possible that because of some fragmentation on the disk some parts of file will stay, even if the file is totally overwritten.The other way is to run (by shell_exec()) external program, that is system specific. Here is an example (for Windows), however I have not tested it.You should do multiple passes of overwriting to deminish traces. For instance using the US DoD 5220-22.M : "Overwrite all addressable locations with a character, its complement, then a random character and verify" (from killdisk site)Here's what the EFF recommends to permanently remove a file http://ssd.eff.org/tech/deletion.In my embedded Ubuntu device, I use: echo exec('rm /usr/share/subdirectory/subdirectory/filename'); This works for me.if you use rm -f (--force) then linux will If you enter rm --help at the prompt you get the help screen. The last lines read:Since my system is a "closed" system then I'm not concerned about violating security issues. My logic being that one must have the system password to SSH into the OS and the only user interface is via web pages.@Sliq's comments are still true to date. You need to decide for your case.

Replace deprecated preg_replace /e with preg_replace_callback [duplicate]

dima.h

[Replace deprecated preg_replace /e with preg_replace_callback [duplicate]](https://stackoverflow.com/questions/19245205/replace-deprecated-preg-replace-e-with-preg-replace-callback)

The above code gives a deprecation warning after upgrading to PHP 5.5:How can I replace the code with preg_replace_callback()?

2013-10-08 10:27:40Z

The above code gives a deprecation warning after upgrading to PHP 5.5:How can I replace the code with preg_replace_callback()?You can use an anonymous function to pass the matches to your function:Apart from being faster, this will also properly handle double quotes in your string. Your current code using /e would convert a double quote " into \".

Storing and displaying unicode string (हिन्दी) using PHP and MySQL

Anirudh Goel

[Storing and displaying unicode string (हिन्दी) using PHP and MySQL](https://stackoverflow.com/questions/1198701/storing-and-displaying-unicode-string-%e0%a4%b9%e0%a4%bf%e0%a4%a8%e0%a5%8d%e0%a4%a6%e0%a5%80-using-php-and-mysql)

I have to store hindi text in a MySQL database, fetch it using a PHP script and display it on a webpage. I did the following:I created a database and set its encoding to UTF-8 and also the collation to utf8_bin. 

I added a varchar field in the table and set it to accept UTF-8 text in the charset property.Then I set about adding data to it. Here I had to copy data from an existing site.

The hindi text looks like this:  सूर्योदय:05:30 I directly copied this text into my database and used the PHP code echo(utf8_encode($string)) to display the data. Upon doing so the browser showed me "??????".When I inserted the UTF equivalent of the text by going to "view source" in the browser, however, सूर्योदय translates into &#2360;&#2370;&#2352;&#2381;&#2351;&#2379;&#2342;&#2351;.If I enter and store &#2360;&#2370;&#2352;&#2381;&#2351;&#2379;&#2342;&#2351; in the database, it converts perfectly.So what I want to know is how I can directly store सूर्योदय into my database and fetch it and display it in my webpage using PHP.Also, can anyone help me understand if there's a script which when I type in सूर्योदय, gives me &#2360;&#2370;&#2352;&#2381;&#2351;&#2379;&#2342;&#2351;?Solution FoundI wrote the following sample script which worked for me. Hope it helps someone else tooThe dump for my database storing hindi utf strings isNow my question is, how did it work without specifying "META" or header info?Thanks!

2009-07-29 08:05:39Z

I have to store hindi text in a MySQL database, fetch it using a PHP script and display it on a webpage. I did the following:I created a database and set its encoding to UTF-8 and also the collation to utf8_bin. 

I added a varchar field in the table and set it to accept UTF-8 text in the charset property.Then I set about adding data to it. Here I had to copy data from an existing site.

The hindi text looks like this:  सूर्योदय:05:30 I directly copied this text into my database and used the PHP code echo(utf8_encode($string)) to display the data. Upon doing so the browser showed me "??????".When I inserted the UTF equivalent of the text by going to "view source" in the browser, however, सूर्योदय translates into &#2360;&#2370;&#2352;&#2381;&#2351;&#2379;&#2342;&#2351;.If I enter and store &#2360;&#2370;&#2352;&#2381;&#2351;&#2379;&#2342;&#2351; in the database, it converts perfectly.So what I want to know is how I can directly store सूर्योदय into my database and fetch it and display it in my webpage using PHP.Also, can anyone help me understand if there's a script which when I type in सूर्योदय, gives me &#2360;&#2370;&#2352;&#2381;&#2351;&#2379;&#2342;&#2351;?Solution FoundI wrote the following sample script which worked for me. Hope it helps someone else tooThe dump for my database storing hindi utf strings isNow my question is, how did it work without specifying "META" or header info?Thanks!Did you set proper charset in the HTML Head section?or you can set content type in your php script using - There are already some discussions here on StackOverflow - please have a lookHow to make MySQL handle UTF-8 properly

setting utf8 with mysql through phpPHP/MySQL with encoding problemsI am not sure what you mean by "directly storing in the database" .. did you mean entering data using PhpMyAdmin or any other similar tool? If yes, I have tried using PhpMyAdmin to input unicode data, so it has worked fine for me - You could try inputting data using phpmyadmin and retrieve it using a php script to confirm. If you need to submit data via a Php script just set the NAMES and CHARACTER SET when you create mysql connection, before execute insert queries, and when you select data. Have a look at the above posts to find the syntax. Hope it helps.** UPDATE **

Just fixed some typos etcFor those who are looking for PHP ( >5.3.5 ) PDO statement, we can set charset as per below:For Those who are facing difficulty just got to php admin and change collation to utf8_general_ci

Select Table go to Operations>> table options>> collations should be there 

How to sanitze user input in PHP before mailing?

Matt Hampel

[How to sanitze user input in PHP before mailing?](https://stackoverflow.com/questions/1055460/how-to-sanitze-user-input-in-php-before-mailing)

I have a simple PHP mailer script that takes values from a form submitted via POST and mails them to me:How can I sanitize the input?

2009-06-28 18:34:29Z

I have a simple PHP mailer script that takes values from a form submitted via POST and mails them to me:How can I sanitize the input?Sanitize the post variable with filter_var().Example here. Like:Since you're not building an SQL query or anything here, the only relevant validation that I can see for those inputs is an email validation for $_POST["email"], and maybe an alphanumeric filter on the other fields if you really want to limit the scope of what the message can contain.To filter the email address, simply use filter_var:As per Frank Farmer's suggestion, you can also filter out newlines in the email subject:As others have noted, filter_var is great. If it's not available, add this to your toolchest.The $headers variable is particularly bad security-wise. It can be appended to and cause spoofed headers to be added. This post called Email Injection discusses it pretty well.filter_var is great, but another way to assure that something is an email address and not something bad is to use an isMail() function. Here's one:So to use this, you could do:In terms of manual validation, limiting the length using substr(), running strip_tags() and otherwise limiting what can be put in.You need to remove any newlines from input provided by users in $headers, which gets passed to mail() ($email in your case)! See Email injection.PHP should take care of sanitizing $to and $subject, but there are versions of PHP with bugs (Affected are PHP 4 <= 4.4.6 and PHP 5 <= 5.2.1, see MOPB-34-2007).You can use the code from artlung's answer above to validate email..I use this kind of code to prevent header injection ..The mail()'s header filtering above is too strict, since some users may be using the filtered strings in their message without any intention to hijack your email form, so redirect it to a page that is explaining what kind of strings that is not allowed in the form or explain it on your form page.

When should I declare variables in a PHP class?

Andrew

[When should I declare variables in a PHP class?](https://stackoverflow.com/questions/1086494/when-should-i-declare-variables-in-a-php-class)

I'm new to the OOP paradigm, so there's probably a simple explanation for this question...Do you always need to declare public object-wide variables in a class? For example:In this code, even though $declaredVar is the only declared variable, $undeclaredVar is just as accessible and useable--it seems to act as if I had declared it as public. If undeclared class variables are always accessible like that, what's the point of declaring them all up front? 

2009-07-06 11:16:21Z

I'm new to the OOP paradigm, so there's probably a simple explanation for this question...Do you always need to declare public object-wide variables in a class? For example:In this code, even though $declaredVar is the only declared variable, $undeclaredVar is just as accessible and useable--it seems to act as if I had declared it as public. If undeclared class variables are always accessible like that, what's the point of declaring them all up front? That variable isn't uninitialized, it's just undeclared.Declaring variables in a class definition is a point of style for readability.

Plus you can set accessibility (private or public).Anyway, declaring variables explicitly has nothing to do with OOP, it's programming-language-specific. In Java you can't do that because variables must be declared explicitly.If you declare a member inside the class you can set its accessibility e.gYou should always declare your member variables and specify their accessibility within your classes.  I like to put this information at the end of the class after my functions.You should define them as soon as you have enough information to do so.  Possibly in the constructor or via setter functions.It is important to do this because it makes life much easier for people working with your code.  They don't have to guess where different properties are coming from or why they're there.  Also, most (if not all) IDEs will not pick up on class variables unless you've declared them somewhere.  Code completion/hints are one of the many benefits of IDEs and without declaring your variables, you will render that functionality useless.General OOP paradigm of encapsulation says you should not expose your inner state variables out side that means they should be private, that allows you to change an implementation of your class without need to change the code where you make use of it. It's better practice to initialize variables via constructors and getters and setters method of the class.In general variables should be initialized as soon as you have enough info to do it properly.If a class variable needs certain info to be sensibly initialized then that info should be passed to the constructor.Using PHP's syntax to implicitly declare variables at the point of definition is, IMHO a surefire way to introduce bugs - if your class needs a variable then declare it, and use all of the information hiding that OOP affords you.As Federico Culloca said "That variable isn't uninitialized, it's just undeclared". Also you didn't define any access modifiers for them so that they behaving like public modifier applied to them. You may already have known. PHP is a loosely typed language. But a programmer should always follow the best practices (but not to use primitive data types in php). You should use private modifier for class level variables and provide accessor and mutator methods (Getters and Setters) for them.

Speed difference in using inline strings vs concatenation in php5?

Uberfuzzy

[Speed difference in using inline strings vs concatenation in php5?](https://stackoverflow.com/questions/13620/speed-difference-in-using-inline-strings-vs-concatenation-in-php5)

(assume php5) considerIs there much of a difference between 1 and 2?If not, what about between 1/2 and 3?

2008-08-17 13:19:32Z

(assume php5) considerIs there much of a difference between 1 and 2?If not, what about between 1/2 and 3?Well, as with all "What might be faster in real life" questions, you can't beat a real life test.Give it a few runs to page everything in, then...0.00355680.00353880.0025394So, as expected, the interpolation are virtually identical (noise level differences, probably due to the extra characters the interpolation engine needs to handle). Straight up concatenation is about 66% of the speed, which is no great shock. The interpolation parser will look, find nothing to do, then finish with a simple internal string concat. Even if the concat were expensive, the interpolator will still have to do it, after all the work to parse out the variable and trim/copy up the original string.Updates By Somnath:I added Method4() to above real time logic.When you are just declaring a string only and no need to parse that string too, then why to confuse PHP debugger to parse. I hope you got my point.The performance difference has been irrelevant since at least January 2012, and likely earlier:Earlier versions of PHP may have had a difference - I personally prefer single quotes to double quotes, so it was a convenient difference. The conclusion of the article makes an excellent point:(Although the article quotes the phrase, the original quip was likely falsely attributed to Winston Churchill, invented by Joseph Goebbels' propaganda ministry to portray Churchill as a liar:This loosely translates to, "I do not trust a statistic that I did not fake myself.")Live benchmarks:http://phpbench.com/There is actually a subtle difference when concatenating variables with single vs double quotes.  @Adam's test usednote that the following is even faster:this is due to the fact, that a double quoted "string" gets evaluated, where a single quoted 'string' is just taken as is...Don't get too caught up on trying to optimize string operations in PHP. Concatenation vs. interpolation is meaningless (in real world performance) if your database queries are poorly written or you aren't using any kind of caching scheme. Write your string operations in such a way that debugging your code later will be easy, the performance differences are negligible.@uberfuzzy Assuming this is just a question about language minutia, I suppose it's fine. I'm just trying to add to the conversation that comparing performance between single-quote, double-quote and heredoc in real world applications in meaningless when compared to the real performance sinks, such as poor database queries.Any differences in execution time are completely negligible.Please seeDon't waste time on micro-optimizations like this. Use a profiler to measure the performance of your application in a real world scenario and then optimize where it is really needed. Optimising a single sloppy DB query is likely to make a bigger performance improvement than applying micro-optimisations all over your code.I seem to remember that the developer of the forum software, Vanilla replaced all the double quotes in his code with single quotes and noticed a reasonable amount of performance increase. I can't seem to track down a link to the discussion at the moment though.there is a difference when concatenating variables... and what you are doing with the result... and if what you are doing is dumping it to output, is or isn't output buffering on.also, what is the memory situation of the server?  typically memory management on a higher level platform is worse than that at lower platforms... is managing memory at the user code platform level...is managing memory at the php system code platform level...so these benchmarks as related to CPU don't tell the full story.  running the benchmark 1000 times vs running the benchmark 1000 times on a server that is attempting to run that same simulation 1000 times concurrently... you might get drastically different results depending on the scope of the application.Double quotes can be much slower. I read from several places that that it is better to do thisthanAlthough I'd say the second one gave you more readable code.Just to add something else to the mix, if you are using a variable inside a double quoted string syntax:is faster thanand both of these are faster thanPractically there is no difference at all! See the timings: http://micro-optimization.com/single-vs-double-quotes It should be noted that, when using a modified version of the example by Adam Wright with 3 variables, the results are reversed and the first two functions are actually faster, consistently. This is with PHP 7.1 on CLI:I've also tried with '3' instead of just the integer 3, but I get the same kind of results.With $bas = 3:With $bas = '3':It should be noted that these results vary highly (I get variations of about 300%), but the averages seem relatively steady and almost (9 out of 10 cases) always show a faster execution for the 2 first methods, with Method 2 always being slightly faster than method 1.In conclusion: what is true for 1 single operation (be it interpolation or concatenation) is not always true for combined operations.

How do you convert between 12 hour time and 24 hour time in PHP?

sugesh

[How do you convert between 12 hour time and 24 hour time in PHP?](https://stackoverflow.com/questions/8742191/how-do-you-convert-between-12-hour-time-and-24-hour-time-in-php)

I have a time as a string, for example:I require this to be in 24 hour format (i.e. 17:36), however I don't know which functions I need to use to convert it. Please help.

2012-01-05 12:04:13Z

I have a time as a string, for example:I require this to be in 24 hour format (i.e. 17:36), however I don't know which functions I need to use to convert it. Please help.

Get each line from textarea

James

[Get each line from textarea](https://stackoverflow.com/questions/3702400/get-each-line-from-textarea)

How to:1) Get each line from this textarea ($text) and work with them using foreach()?2) Add <br /> to the end of each line, except the last one?3) Throw each line to an array.Important - text inside textarea can be multilanguage.Have tried to use:But it doesn't work.Thanks.

2010-09-13 16:29:56Z

How to:1) Get each line from this textarea ($text) and work with them using foreach()?2) Add <br /> to the end of each line, except the last one?3) Throw each line to an array.Important - text inside textarea can be multilanguage.Have tried to use:But it doesn't work.Thanks.You will want to look into the nl2br() function along with the trim().The nl2br() will insert <br /> before the newline character (\n) and the trim() will remove any ending \n or whitespace characters. That should do what you want. UPDATEThe reason the following code will not work is because in order for \n to be recognized, it needs to be inside double quotes since double quotes parse data inside of them, where as single quotes takes it literally, IE "\n"To fix it, it would be:But it is still better to use the builtin nl2br() function, PHP provides. EDITSorry, I figured the first question was so you could add the linebreaks in, indeed this will change the answer quite a bit, as anytype of explode() will remove the line breaks, but here it is:If you do it this way, you will need to append the <br /> onto the end of the line before the processing is done on your own, as the explode() function will remove the \n characters. Added the array_filter() to trim() off any extra \r characters that may have been lingering.You could use PHP constant:additional notes:

1. For me this is the easiest and the safest way because it is cross platform compatible (Windows/Linux etc.)

2. It is better to use PHP CONSTANT whenever you can for faster executionOld tread...? Well, someone may bump into this...Please check out http://telamenta.com/techarticle/php-explode-newlines-and-youRather than using:Use a safer method like:Use PHP DOM to parse and add <br/> in it. Like this:This outputs:It works for me:now, my $array will have all the lines I need(make sure to close the if block with another curly brace)For a <br> on each line, useYou will get \ns in the value of the textarea. Then, use the nl2br() function to create <br>s, or you can explode() it for <br> or \n.Hope this helps

limit text length in php and provide 'Read more' link

Scorpion King

[limit text length in php and provide 'Read more' link](https://stackoverflow.com/questions/4258557/limit-text-length-in-php-and-provide-read-more-link)

I have text stored in the php variable $text. This text can be 100 or 1000 or 10000 words. As currently implemented, my page extends based on the text, but if the text is too long the page looks ugly.I want to get the length of the text and limit the number of characters to maybe 500, and if the text exceeds this limit I want to provide a link saying, "Read more." If the "Read More" link is clicked, it will show a pop with all the text in $text.

2010-11-23 16:50:22Z

I have text stored in the php variable $text. This text can be 100 or 1000 or 10000 words. As currently implemented, my page extends based on the text, but if the text is too long the page looks ugly.I want to get the length of the text and limit the number of characters to maybe 500, and if the text exceeds this limit I want to provide a link saying, "Read more." If the "Read More" link is clicked, it will show a pop with all the text in $text.This is what I use:You can tweak it further but it gets the job done in production.I have combine two different answers:Simple use this to strip the text :Edit and finally :Here separator is the href link to read more ;)This method will not truncate a word in the middle.Limit words in text:Limit chars in text:Use:There is an appropriate PHP function: substr_replace($text, $replacement, $start).For your case, because you already know all the possibilities of the text length (100, 1000 or 10000 words), you can simply use that PHP function like this:PHP will automatically return a 20 character only text with ....Se the documentation by clicking here.Basically, you need to integrate a word limiter (e.g. something like this) and use something like shadowbox.  Your read more link should link to a PHP script that displays the entire article. Just setup Shadowbox on those links and you're set.  (See instructions on their site.  Its easy.)Another method: insert the following in your theme's function.php file.You can use this.I Guess this will help you fix your problem please check under given Function : trims text to a space then adds ellipses if desiredThis worked for me.Thanks @webbiedave

regexp in switch statement

Toto

[regexp in switch statement](https://stackoverflow.com/questions/4043741/regexp-in-switch-statement)

Are regex's allowed in PHP switch/case statements and how to use them ?

2010-10-28 14:13:31Z

Are regex's allowed in PHP switch/case statements and how to use them ?Switch-case statement works like if-elseif.

As well as you can use regex for if-elseif, you can also use it in switch-case.can be coded as Hope this helps.No or only limited. You could for example switch for true:This basically gives you an if-elseif-else statement, but with syntax and might of switch (for example fall-through.)Yes, but you should use this technique to avoid issues when the switch argument evals to false:

PHP explode the string, but treat words in quotes as a single word

timofey

[PHP explode the string, but treat words in quotes as a single word](https://stackoverflow.com/questions/2202435/php-explode-the-string-but-treat-words-in-quotes-as-a-single-word)

How can I explode the following string:intoSo that the text in quotation is treated as a single word.Here's what I have for now:but my code divides each word into an array. How do I make words inside quotation marks treated as one word?

2010-02-04 19:08:43Z

How can I explode the following string:intoSo that the text in quotation is treated as a single word.Here's what I have for now:but my code divides each word into an array. How do I make words inside quotation marks treated as one word?You could use a preg_match_all(...):which will produce:And as you can see, it also accounts for escaped quotes inside quoted strings.EDITA short explanation:And in case of matching %22 instead of double quotes, you'd do:This would have been much easier with str_getcsv().Gives you You can also try this multiple explode functionI came here with a complex string splitting problem similar to this, but none of the answers here did exactly what I wanted - so I wrote my own.I am posting it here just in case it is helpful to someone else.This is probably a very slow and inefficient way to do it - but it works for me.Usage is as follows. explode_adv takes 5 arguments:This method probably has flaws - edits are welcome.In some situations the little known token_get_all() might prove useful:Results:

PHP: Express Number in Words [duplicate]

anita.kcx

[PHP: Express Number in Words [duplicate]](https://stackoverflow.com/questions/11500088/php-express-number-in-words)

Is there a function that will express any given number in words?For example:If a number is 1432, then this function will return "One thousand four hundred and thirty two".

2012-07-16 07:48:37Z

Is there a function that will express any given number in words?For example:If a number is 1432, then this function will return "One thousand four hundred and thirty two".Use the NumberFormatter class that are in php ;)That would output "one thousand four hundred thirty-two"You can do this in many ways I am mentioning here two ways by using The NumberFormatter class as mentioned in Martindilling answer (if you have php version 5.3.0 or higher and also PECL extension 1.0.0 or higher) or by using the following custom function.In case of using Yii2 you can do this as simple as the following:This prints spelled out $sum in your app's language.Docs reference

How do I embed PHP code in JavaScript?

Amit Sharma

[How do I embed PHP code in JavaScript?](https://stackoverflow.com/questions/3352576/how-do-i-embed-php-code-in-javascript)

How can we use PHP code in JavaScript?LikePlease suggest a better way.

2010-07-28 11:59:45Z

How can we use PHP code in JavaScript?LikePlease suggest a better way.If your whole JavaScript code gets processed by PHP, then you can do it just like that.If you have individual .js files, and you don't want PHP to process them (for example, for caching reasons), then you can just pass variables around in JavaScript.For example, in your index.php (or wherever you specify your layout), you'd do something like this:You could then use my_var in your JavaScript files.This method also lets you pass other than just simple integer values, as json_encode() also deals with arrays, strings, etc. correctly, serialising them into a format that JavaScript can use.If you put your JavaScript code in the PHP file, you can, but not otherwise. For example:page.php (this will work)page.js (this won't work)PHP has to be parsed on the server. JavaScript is working in the client's browser.Having PHP code in a .js file will not work, except you can tell the server to parse the file you want to have as .js before it sends it to the client. And telling the server is the easiest thing in the world: just add .php at the end of the filename.So, you could name it javascript.php. Or, so you know what this file is PRIMARILY, you could name it javascript.js.php - the server will recognize it as .php and parse it.This is the bit of code you need at the top of your JavaScript file:Yes, you can, provided your JavaScript code is embedded into a PHP file.You're pretty much on the ball. The only difference is I'd separate out the JavaScript code so the majority was in an external static file. Then you just define variables or call a function from the actual PHP page:A small demo may help you:

In abc.php file:Here is an example:OrWe can't use "PHP in between JavaScript", because PHP runs on the server and JavaScript - on the client.However we can generate JavaScript code as well as HTML, using all PHP features, including the escaping from HTML one.

PHP display image BLOB from MySQL [duplicate]

user2732663

[PHP display image BLOB from MySQL [duplicate]](https://stackoverflow.com/questions/20556773/php-display-image-blob-from-mysql)

I'm attempting to display an image stored in the BLOB column in the database;I fetch the data from the database with a SELECT perform no transformations on the data and display it with the following (from a script whose only output is the following):Please note chrome is displaying the content size as the correct size for the image as well as the correct mime type (image/jpeg). nothing is echoing out before the header and ive checked the blob in the database is correct. There is also no trailing whitespace before or after the <?php ?> tags.chrome/IE displays an image icon but not the image itself. any ideas?EDIT: image is got the from the database as such: var_dump($image) gives: 

2013-12-13 00:05:58Z

I'm attempting to display an image stored in the BLOB column in the database;I fetch the data from the database with a SELECT perform no transformations on the data and display it with the following (from a script whose only output is the following):Please note chrome is displaying the content size as the correct size for the image as well as the correct mime type (image/jpeg). nothing is echoing out before the header and ive checked the blob in the database is correct. There is also no trailing whitespace before or after the <?php ?> tags.chrome/IE displays an image icon but not the image itself. any ideas?EDIT: image is got the from the database as such: var_dump($image) gives: Try Like this.For Inserting into DBFor Accessing image From BlobHope It will help you.Thanks.This is what I use to display images from blob:Since I have to store varius types of content in my blob field/column, suppose to update my code like this:where: 

mime can be an image of any kind, text, word document, text document, pdf document, e.t.c...

data is blob's column content

Log the actual SQL query using ActiveRecord with Yii2?

diabetesjones

[Log the actual SQL query using ActiveRecord with Yii2?](https://stackoverflow.com/questions/27389146/log-the-actual-sql-query-using-activerecord-with-yii2)

I'm doing this:and then this in the view:i would like to see the sql query being performed. a student "has many" quiz activities, and the query performs perfectly, but i need to see the raw SQL. is this possible?

2014-12-09 21:27:36Z

I'm doing this:and then this in the view:i would like to see the sql query being performed. a student "has many" quiz activities, and the query performs perfectly, but i need to see the raw SQL. is this possible?Method 1With relations that return yii\db\ActiveQuery instance it's possible to extract the raw SQL query directly in code for example with var_dump().For example if we have user relation:You can then var_dump() the raw SQL like that:Note that you should call it like that and not $model->user->... (the latter returns User instance).But in your case it's not possible because count() immediately returns int. You can var_dump() partial query without count(), but I think it's not convenient.Note that you can use this method for dumping generated SQL of any ActiveQuery instances (not only those that were returned by relation), for example:Method 2This is much simpler in my opinion and I personally prefer this one when debugging SQL queries.Yii 2 has built-in debug module. Just add this to your config:Make sure you only have it locally and not on production. If needed, also change allowedIPs property.This gives you functional panel at the bottom of the page. Find the DB word and click on either count or time. On this page you can view all executed queries and filter them.

I usually don't filter them in Grid and use standard browser search to quickly navigate through and find the necessary query (using the table name as keyword for example).Method 3Just make an error in query, for example in column name - cityy instead of city. This will result as database exception and then you can instantly see the generated query in error message.you can try this, assume you have a query given like:or to get the SQL with all parameters included try:If you want to log all relational queries of ActiveRecord in console application all proposed methods doesn't help. They show only main SQL on active record's table, \yii\debug\Module works only in browser.Alternative method to get all executed SQL queries is to log them by adding specific FileTarget to configuration:UPDATEIn order to log insert/update/delete queries one should also add yii\db\Command::execute category:In addition to arogachev answer, when you already work with an ActiveQuery object, here is the line I search to view the rawsql.when you have a query object you can also useto return the Raw SQL with the parameters included orwhich will output the Sql with parameters separately.In order to log/track every/all queries:extend \yii\db\Connection and override createCommand method, like below:Then, simply change your db connection in your db config like below:Now, you can track/read/... all queries executed by db connection.Try like,Output: 

PHP Session timeout

user342391

[PHP Session timeout](https://stackoverflow.com/questions/3068744/php-session-timeout)

I am creating a session when a user logs in like so:How can I specify a timeout on that session of X minutes and then have it perform a function or a page redirect once it has reached X minutes??EDIT: I forgot to mention that I need the session to timeout due to inactivity.

2010-06-18 10:13:09Z

I am creating a session when a user logs in like so:How can I specify a timeout on that session of X minutes and then have it perform a function or a page redirect once it has reached X minutes??EDIT: I forgot to mention that I need the session to timeout due to inactivity.first, store the last time the user made a requestin subsequent request, check how long ago they made their previous request (10 minutes in this example)When the session expires the data is no longer present, so something likewill redirect whenever the session is no longer active.You can set how long the session cookie is alive using session.cookie_lifetimeEDIT: If you are timing sessions out due to security concern (instead of convenience,) use the accepted answer, as the comments below show, this is controlled by the client and thus not secure. I never thought of this as a security measure.Just check first the session is not already created and if not create one. Here i am setting it for 1 minute only.In the header of every page has been working for me during site tests(the site is not yet in production). The HTML page it falls to ends the session and just informs the user of the need to log in again. This seems an easier way than playing with PHP logic.

I'd love some comments on the idea. Any traps I havent seen in it ?Byterbit solution is problematic because:for cookies, setting expiration via session.cookie_lifetime is the right solution design-wise and security-wise! for expiring the session, you can use session.gc_maxlifetime.expiring the cookies by calling session_destroy might yield unpredictable results because they might have already been expired.making the change in php.ini is also a valid solution but it makes the expiration global for the entire domain which might not be what you really want - some pages might choose to keep some cookies more than others.source: http://www.daniweb.com/web-development/php/threads/124500

PHP #region for code folding?

mattdwen

[PHP #region for code folding?](https://stackoverflow.com/questions/5615447/php-region-for-code-folding)

Is there an equivilent of c#'s #region in PHP?

2011-04-10 23:31:28Z

Is there an equivilent of c#'s #region in PHP?No.The thing is, C# is sort of designed to be written by only one IDE, because Microsoft need you to always use their tools. So, built into the language (sort of) are things that affect the IDE.PHP, on the other hand, is just a language. It's not supposed to have a symbiotic relationship with some specific editor, so it doesn't. So, no, it has nothing to control your editor.Still, all proper programming text editors support folding class definitions, function definitions, and most scope blocks. Some editors may allow certain extensions to go beyond this.No, there's nothing directly in the language.But every decent editors allow some kind of markup to allow this.For example in Netbeans :This syntax also works in all the Intellij IDEA editor family, see http://blog.jetbrains.com/webide/2012/03/new-in-4-0-custom-code-folding-regions/You can also emulate the feature in Eclipse via a plugin : Code folding plugin for Eclipse?Visual Studio Code includes it since version 1.19 :As everybody has said before, the #region in .Net is actually a Visual Studio feature, not a C# one, but the fact that the C# grammar supports the syntax, allows its usage by any IDE that wants to implement it. Since in PHP, the '#' character is also used for comments, the same can be done by the IDEs. In fact, JetBrains' PhpStorm does it:

https://blog.jetbrains.com/phpstorm/2012/03/new-in-4-0-custom-code-folding-regions/There is no equivalent (the other answers explain why), but let me show you how I do it:The curly braces allow me to fold the block of code (your editor will need to support cold folding, but almost all of them do), while I still see the region name and have a simple visual divider.Folded Result: PhpStorm supports code folding similar to C#:If you are using notepad++ you can define that sort of thing with the ide in user defined language dialog, and since good old region starts with the pound sign, it works great because the pound "#" is actually one way to mark in php a comment. But, I tried it in version 6.6.6 of notepad++ and it already has #region #endregion functionality already no need to do anything.You might be able to just use curly brackets {}, but it really depends on your editor.I know some editors might pick that up as a code block, allowing you to collapse it, but it probably won't allow you to name the section that you're collapsing purely because that function isn't native to the language.I'm using Geany in Linux to do my PHP Programming, and it DO support the #region and #endregion to mark regions of code, and it works just like the MS Visual Studio to in C# language.PHP Comments can be done using //, /* and */, and # too, so the PHP will just bypass these lines started with # and it's up to your text editor/IDE to make use of this... And Geany does!I know it's an old thread, but in case you are interested.I have successfully achieved #region / #endregion code folding in emacs, by adapting this code sample to php mode: http://blogs.msdn.com/b/dotnetinterop/archive/2008/04/14/making-hideshow-el-work-with-csharp-mode-el-and-region-endregion.aspxThe result is here:In Sublime Text there's a package called SyntaxFold.If you are just interested in folding comment blocks then with Fold Comments package you can press Ctrl+Shift+C to hide and show all comments (it may hide tags of SyntaxFold though).In Visual Studio Code, you can "feel at home" with c# style regions like this:Technically, the region Constants isn't required, all it needs is the # sign. But for c# developers who are used to seeing this (because Visual Studio insists on it being this way), it's not really noisy. And it's actually self-documenting. A PHP maintenance programmer would not by stymied by this.Having said that, these ways also work, but it would be confusing (or just less clear) and might not work in another editor:Now you can use #region on VSCode

https://twitter.com/daviwil/status/914925309220106241Workaroundso you can click on dash to collapse the section.

Another possibility: Although this is an old thread, but if one is still interested one can set a shortcut to code folding in NetBeans. This answer extends @krtek 's answer. To achieve this follow the steps:Now, if you select multiple lines of text in the editor, you will get the "light bulb" icon in the margin. Click it, and you'll get the option "Surround with Code folding". Select it, enter a description and you're done.For reference see this link: reference

PHP reading shell_exec live output

Palumbo Software

[PHP reading shell_exec live output](https://stackoverflow.com/questions/20107147/php-reading-shell-exec-live-output)

I'm just experimenting with PHP and shell_exec on my Linux server. It's a really cool function to use and I am really enjoying it so far. Is there a way to view the live output that is going on while the command is running?For example, if ping stackoverflow.com was run, while it is pinging the target address, every time it pings, show the results with PHP? Is that possible?I would love to see the live update of the buffer as it's running. Maybe it's not possible but it sure would be nice.This is the code I am trying and every way I have tried it always displays the results after the command is finished.I've tried putting the echo part in a loop but still no luck. Anyone have any suggestions on making it show the live output to the screen instead of waiting until the command is complete?I've tried exec, shell_exec, system, and passthru. Everyone of them displays the content after it's finished. Unless I'm using the wrong syntax or I'm not setting up the loop correctly.

2013-11-20 21:12:57Z

I'm just experimenting with PHP and shell_exec on my Linux server. It's a really cool function to use and I am really enjoying it so far. Is there a way to view the live output that is going on while the command is running?For example, if ping stackoverflow.com was run, while it is pinging the target address, every time it pings, show the results with PHP? Is that possible?I would love to see the live update of the buffer as it's running. Maybe it's not possible but it sure would be nice.This is the code I am trying and every way I have tried it always displays the results after the command is finished.I've tried putting the echo part in a loop but still no luck. Anyone have any suggestions on making it show the live output to the screen instead of waiting until the command is complete?I've tried exec, shell_exec, system, and passthru. Everyone of them displays the content after it's finished. Unless I'm using the wrong syntax or I'm not setting up the loop correctly.To read the output of a process, popen() is the way to go. Your script will run in parallel with the program and you can interact with it by reading and writing it's output/input as if it was a file.But if you just want to dump it's result straight to the user you can cut to the chase and use passthru():If you want to display the output at run time as the program goes, you can do this:This code should run the command and push the output straight to the end user at run time.First of all, thanks Havenard for your snippet - it helped a lot!A slightly modified version of Havenard's code which i found useful.Sample Usage :If you're willing to download a dependency, Symfony's processor component does this. I found the interface to working with this cleaner than reinventing anything myself with popen() or passthru().This was provided by the Symfony documentation:As a warning, I've run into some problems PHP and Nginx trying to buffer the output before sending it to the browser. You can disable output buffering in PHP by turning it off in php.ini: output_buffering = off. There's apparently a way to disable it in Nginx, but I ended up using the PHP built in server for my testing to avoid the hassle.I put up a full example of this on Gitlab: https://gitlab.com/hpierce1102/web-shell-output-streaming

Call method by string?

dynamic

[Call method by string?](https://stackoverflow.com/questions/5451394/call-method-by-string)

This doens't work:only possibilites is to use call_user_func(); ?

2011-03-27 18:37:17Z

This doens't work:only possibilites is to use call_user_func(); ?Try:You can do it safely by checking if it is callable first:Reemphasizing what the OP mentioned, call_user_func() and call_user_func_array() are also good options.  In particular, call_user_func_array() does a better job at passing parameters when the list of parameters might be different for each function.

How do you strip out the domain name from a URL in php?

Robert Elwell

[How do you strip out the domain name from a URL in php?](https://stackoverflow.com/questions/176284/how-do-you-strip-out-the-domain-name-from-a-url-in-php)

Im looking for a method (or function) to strip out the domain.ext part of any URL thats fed into the function. The domain extension can be anything (.com, .co.uk, .nl, .whatever), and the URL thats fed into it can be anything from http://www.domain.com to www.domain.com/path/script.php?=whateverWhats the best way to go about doing this?

2008-10-06 21:31:27Z

Im looking for a method (or function) to strip out the domain.ext part of any URL thats fed into the function. The domain extension can be anything (.com, .co.uk, .nl, .whatever), and the URL thats fed into it can be anything from http://www.domain.com to www.domain.com/path/script.php?=whateverWhats the best way to go about doing this?parse_url turns a URL into an associative array:You can use parse_url() to do this:In this example, $domain should contain example.com, irrespective of it having www or not. It also works for a domain such as .co.ukYou can also write a regular expression to get exactly what you want.Here is my attempt at it:The output is:This pattern also takes into consideration domains such as 'example.com.au'.Note: I have not consulted the relevant RFC.Here are a couple simple functions to get the root domain (example.com) from a normal or long domain (test.sub.domain.com) or url (http://www.example.com).Solved this... Say we're calling dev.mysite.com and we want to extract 'mysite.com'Works with mysite.co.uk too so should work everywhere :)I spent some time thinking about whether it makes sense to use a regular expression for this, but in the end I think not. firstresponder's regexp came close to convincing me it was the best way, but it didn't work on anything missing a trailing slash (so http://example.com, for instance). I fixed that with the following: '/\w+\..{2,3}(?:\..{2,3})?(?=[\/\W])/i', but then I realized that matches twice for urls like 'http://example.com/index.htm'. Oops. That wouldn't be so bad (just use the first one), but it also matches twice on something like this: 'http://abc.ed.fg.hij.kl.mn/', and the first match isn't the right one.  :(A co-worker suggested just getting the host (via parse_url()), and then just taking the last two or three array bits (split() on '.') The two or three would be based on a list of domains, like 'co.uk', etc. Making up that list becomes the hard part.There is only one correct way to extract domain parts, it's use Public Suffix List (database of TLDs). I recomend TLDExtract package, here is sample code:This function should work:To use it:

Magento - Passing data between a controller and a block

Drew Hunter

[Magento - Passing data between a controller and a block](https://stackoverflow.com/questions/4006183/magento-passing-data-between-a-controller-and-a-block)

Really quick and simple question but I can't find a decent answer to this - What is the best way to pass data from a controller to a block in Magento.Incase it makes a difference, I am loading the layout as follows:I should add, that I have been using the registry as follows:In the controller:In the block:Not sure if this is the best way to do it though.

2010-10-23 21:34:28Z

Really quick and simple question but I can't find a decent answer to this - What is the best way to pass data from a controller to a block in Magento.Incase it makes a difference, I am loading the layout as follows:I should add, that I have been using the registry as follows:In the controller:In the block:Not sure if this is the best way to do it though.You don't. In Magento's MVC approach, it's not the responsibility of the controller to set variables for the view (in Magento's case, the view is Layout and blocks).  Controllers set values on Models, and then Blocks read from those same models.  In Magento's view of the world, having a Block relying on the controller doing a specific thing is tight coupling, and should be avoided.  Your controller's job is to do certain things to Models, and then tell the system it's layout rendering time.  That's it.  It's your Layout/Blocks job to display an HTML page in a certain way depending on the state of the system's Models.So, if I wanted to emulate traditional PHP MVC behaviors I'dWhen you instantiate a Model with Mage::getSingleton(...) Magento will instantiate the object as a singleton.  So, if you re-instantiate an object (again with Mage::getSingleton('foo/bar')) you're getting back the same object. If you are using blocks that inherit Mage_Core_Block_Template (i.e. that use a template to display) you can assign data using the assign() method, once the blocks have been instanciated by loadLayout()Then, in the .phtml template, you can simply useThis is not used very often in magento, but since it's implemented as public methods and thus declared stable, I believe it's fine do so.

Thats also the reason for the convention to start variables declared in a template with an underscore (e.g. $_product = $this->getProduct()), so they can be distinguished from assigned variables.What has worked for me in the is to set the variable in the controller by doing:And then in the view you would retrieve the value using the following code:You're on the right track using the Mage::registry() approach.  The other option is to use automatic getters and setters, e.g. $this->setRandomVariableName($data) in the controller and then in the block use $this->getRandomVariableName().  I haven't investigated whether they end up in the same location in the stack (I assume in the session as they are request-specific), but they achieve the same aim in the code. Using the getters and setters can occasionally get confusing as it may look like you are accessing the data through the ORM rather than a "temporary" session variable, so you might make a coding-style consistency decision to use Mage::registry for those types of variables.  Your choice really.You can use setData / getData pair for some values.

I used setData in controller and getData in block.@Drew With some background in JavaServer Faces and rather new in PHP/Magento I would like to state that the"'share nothing' architecture of PHP", see PHP is not Java: Session Management Whitepaper",  leads to the fact that all objects (and even classes) in PHP have the scope "request".If I got Alans point then he advises to use And since a tool like MTool reduces the time to create a new model this really seems to make sense.

PHP 7.2 Function create_function() is deprecated

Saly

[PHP 7.2 Function create_function() is deprecated](https://stackoverflow.com/questions/48161526/php-7-2-function-create-function-is-deprecated)

I have used create_function in my application below.But for PHP 7.2.0, the create_function() is deprecated.Any idea, how to fix my codes above on PHP 7.2.0.Thanks for your help,

2018-01-09 04:39:25Z

I have used create_function in my application below.But for PHP 7.2.0, the create_function() is deprecated.Any idea, how to fix my codes above on PHP 7.2.0.Thanks for your help,You should be able to use an Anonymous Function (aka Closure) with a call to the parent scoped $delimiter variable, like so:I would like to contribute with a very simple case I found in a Wordpress Theme and seems to work properly:Having the following add_filter statement:Replace it for:We can see the usage of function(), very typical function creation instead of a deprecated create_function() to create functions. Hope it helps.If anyone needs to upgrade dozens of create_function() cases in their code to anonymous functions, I work on a tool called Rector. It goes through the code and replaces the create_function with anonymous functions 1:1. It's tested on 30 various cases.InstallSetupRun on your codeThis Array of Anonymous functions worked for me, see code below:Just copy this into your script file and you will see the output from the echo statements, then simply remap the function to your own will!Happy coding =)

How can i get phpunit to run tests from all files in a folder?

jsdalton

[How can i get phpunit to run tests from all files in a folder?](https://stackoverflow.com/questions/4047199/how-can-i-get-phpunit-to-run-tests-from-all-files-in-a-folder)

From what I've read, it seems like I should be able to set up a folder, e.g. tests/ , put a few files in it with unit test classes, and then run phpunit on that file and have it find and run the tests.For whatever reason, in my installation (on OS X), it thinks the folder tests/ is a file, or so it would seem:I have what I hope is a fairly standard installation of phpunit via PEAR, following these instructions http://www.newmediacampaigns.com/page/install-pear-phpunit-xdebug-on-macosx-snow-leopard, on OS X Snow Leopard.I'm hoping someone else out there ran into this issue and it's just a simple fix, or else I'm just doing something wrong?

2010-10-28 21:13:08Z

From what I've read, it seems like I should be able to set up a folder, e.g. tests/ , put a few files in it with unit test classes, and then run phpunit on that file and have it find and run the tests.For whatever reason, in my installation (on OS X), it thinks the folder tests/ is a file, or so it would seem:I have what I hope is a fairly standard installation of phpunit via PEAR, following these instructions http://www.newmediacampaigns.com/page/install-pear-phpunit-xdebug-on-macosx-snow-leopard, on OS X Snow Leopard.I'm hoping someone else out there ran into this issue and it's just a simple fix, or else I'm just doing something wrong?It is not a bug, it is a feature.You have a directory full of .php files, in your case they all contain testcases. But as your testsuite grows, you will likely want to have other php files inside tests directory, files that do not contains tests, that exist solely to support tests. Those files should never be executed by PHPUnit itself. This is a very common scenario.So how would PHPUnit know which files it needs to run and which ones not? 

Checking the file name suffix is one option for doing it - by default PHPUnit considers everything with name ending with Test.php as being a test and ignores everything else.You can change that behaviour if you really want to - by creating a file named phpunit.xml in your tests directory with the following contentOnce you have done that, PHPUnit will run all files with '.php' at the end of the file name

(in this context file extension is considered to be part of the file name)But it really is better to get used to the convention and name your tests accordingly.The simpler way to running test on folder is to add "Test.php" at the end all of your tests and run phpunit specifing your folder like thisorAnnoying little quirk, but I figured it out.At least with the default configuration, test files have to end with "Test.php", eg. fooTest.php, or they are not found by the test runner.

PHP not displaying errors even though display_errors = On

wowpatrick

[PHP not displaying errors even though display_errors = On](https://stackoverflow.com/questions/6480425/php-not-displaying-errors-even-though-display-errors-on)

I have a Ubuntu server running Apache2 with PHP 5. In the php.ini I set error_reporting =  E_ALL | E_STRICT and error_reporting =  E_ALL | E_STRICT, but PHP is still not displaying error messages. I'm also using Apache virtual hosts.Also, what is the most strict error reporting PHP5.3 has to offer? I want my code to as up-to-date and future-proof as possible.

2011-06-25 20:46:13Z

I have a Ubuntu server running Apache2 with PHP 5. In the php.ini I set error_reporting =  E_ALL | E_STRICT and error_reporting =  E_ALL | E_STRICT, but PHP is still not displaying error messages. I'm also using Apache virtual hosts.Also, what is the most strict error reporting PHP5.3 has to offer? I want my code to as up-to-date and future-proof as possible.You also need to make sure you have your php.ini file include the following set or errors will go only to the log that is set by default or specified in the virtual host's configuration.The php.ini file is where base settings for all PHP on your server, however these can easily be overridden and altered any place in the PHP code and effect everything following that change. A good check is to add the display_errors directive to your php.ini file.  If you don't see an error, but one is being logged, insert this at the top of the file causing the error:If this works then something earlier in your code is disabling error display.I had the same issue and finally solved it. My mistake was that I tried to change /etc/php5/cli/php.ini, but then I found another php.ini here: /etc/php5/apache2/php.ini, changed display_errors = On, restarted the web-server and it worked!May be it would be helpful for someone absent-minded like me.I had the same problem on my virtual server with Parallels Plesk Panel 10.4.4. The solution was (thanks to Zappa for the idea) setting error_reporting value to 32767 instead of E_ALL.

In Plesk:

Home > Subscriptions > (Select domain) > Customize > PHP Settings > error_reporting - Enter custom value - 32767When you update the configuration in the php.ini file, you might have to restart apache.  Try running apachectl restart or apache2ctl restart, or something like that.Also, in you ini file, make sure you have display_errors = on, but only in a development environment, never in a production machine.Also, the strictest error reporting is exactly what you have cited, E_ALL | E_STRICT.  You can find more information on error levels at the php docs.Although this is old post...

i had similar situation that gave me headache. 

Finally, i figured that i was including sub pages in index.php with "@include ..." 

"@" hides all errors even if display_errors is ONCheck the error_reporting flag, must be E_ALL, but in some release of Plesk there are quotes ("E_ALL") instead of (E_ALL)I solved this issue deleting the quotes (") in php.ini from this:to this:Make sure the php.ini that you're modifying is on the /etc/php5/apache2 folder, or else it won't have any efect...Just want to add another pitfall here in case someone finds this question with a problem similar to mine.When you are using Chrome (Or Chromium) and PHP triggers an error in PHP code which is located inside of a HTML attribute then Chrome removes the whole HTML element so you can't see the PHP error in your browser.Here is an example:When calling this code in Chrome you only get a HTML document with the starting <p> tag. The rest is missing. No error message and no other HTML code after this <p>. This is not a PHP issue. When you open this page in Firefox then you can see the error message (When viewing the HTML code). So this is a Chrome issue. Don't know if there is a workaround somewhere. When this happens to you then you have to test the page in Firefox or check the Apache error log.I had the same problem but I used ini_set('display_errors', '1'); inside the faulty script itself so it never fires on fatal / syntax errors. Finally I solved it by adding this to my .htaccess:display_errors.php:By that I was not forced to change the php.ini, use it for specific subfolders and could easily disable it again.I have encountered also the problem. Finally I found the solution. I am using UBUNTU 16.04 LTS.1) Open the /ect/php/7.0/apache2/php.ini file (under the /etc/php one might have different version of PHP but apache2/php.ini will be under the version file), find ERROR HANDLING AND LOGGING section and set the following value {display_error = On, error_reporting = E_ALL}.NOTE - Under the QUICK REFERENCE section also one can find these values directives but don't change there just change in Section I told.2) Restart Apache server sudo systemctl restart apache2I know this thread is old but I just solved a similar problem with my Ubuntu server and thought I would add a note here to help others as this thread was first page in Google for the topic of PHP not displaying errors.I tried several configuration settings for the error_reporting value in php.ini. From E_ALL | E_STRICT to E_ALL & E_NOTICE and none worked. I was not getting any syntax errors displayed in the browser (which is rather annoying on a development server). After changing the error_reporting setting to "E_ALL" it all started working. Not sure if it is an Ubuntu Oneric specific issue but after restarting Apache errors started showing in the HTML pages the server was serving. Seems the extra options confusing things and all error reporting stops. HTH somone else.I just experienced this same problem and it turned out that my problem was not in the php.ini files, but simply, that I was starting the apache server as a regular user. As soon as i did a "sudo /etc/init.d/apache2 restart", my errors were shown. I had the same problem with Apache and PHP 5.5.

In php.ini, I had the following lines:instead of the following:(the =sign was missing)Though this thread is old but still, I feel I should post a good answer from this stackoverflow answer.This sure saved me after hours of trying to get things to work. I hope this helps someone.When running PHP on windows with ISS there are some configuration settings in ISS that need to be set to prevent generic default pages from being shown.1) Double click on FastCGISettings, click on PHP then Edit. Set StandardErrorMode to ReturnStdErrLn500.StandardErrorMode2) Go the the site, double click on the Error Pages, click on the 500 status, click Edit Feature Settings, Change Error Responses to Detailed Errors, click okChange Error Responses to Detailed ErrorsFor me I solved it by deleting the file of php_errors.txt in the relative folder. Then the file is created automatically again when the code runs next time, and with the errors printed this time.I also face the same issue, I have the following settings in my php.inni fileBut still, PHP errors are not displaying on the webpage. I just restart my apache server and this problem was fixed.

PDO error:「 SQLSTATE[HY000]: General error 」When updating database

loxyboi

[PDO error:「 SQLSTATE[HY000]: General error 」When updating database](https://stackoverflow.com/questions/12979510/pdo-error-sqlstatehy000-general-error-when-updating-database)

I am getting an error when updating a database using PDO.

I am new to PDO so maybe the problem is a small one and I just don't understand.

Funny thing about the error, the command works fine and the database does actually get updated.

But it still returns an error back at me.Code:Error:

ERROR UPDATING CONTENT: SQLSTATE[HY000]: General errorI literally have no idea where the problem could be because its very vaque and I haven't been able to find anyone with the same problem. 

2012-10-19 17:37:25Z

I am getting an error when updating a database using PDO.

I am new to PDO so maybe the problem is a small one and I just don't understand.

Funny thing about the error, the command works fine and the database does actually get updated.

But it still returns an error back at me.Code:Error:

ERROR UPDATING CONTENT: SQLSTATE[HY000]: General errorI literally have no idea where the problem could be because its very vaque and I haven't been able to find anyone with the same problem. You do not use fetchAll(),as inwith update or insert queries. Removing this statement should rectify the problem.Just to note, another possible reason for this error is if you make a second database call with the variable $stmt inside of an existing  parent $stmt loop.

How to define a Laravel route with a parameter that contains a slash character

hserusv

[How to define a Laravel route with a parameter that contains a slash character](https://stackoverflow.com/questions/21552604/how-to-define-a-laravel-route-with-a-parameter-that-contains-a-slash-character)

I want to define a route with a parameter that will contain a slash / character like so example.com/view/abc/02 where abc/02 is the parameter. How can I prevent Laravel from reading the slash as a separator for the next route parameter? Because of that I'm getting a 404 not found error now.

2014-02-04 12:28:59Z

I want to define a route with a parameter that will contain a slash / character like so example.com/view/abc/02 where abc/02 is the parameter. How can I prevent Laravel from reading the slash as a separator for the next route parameter? Because of that I'm getting a 404 not found error now.Add the below catch-all route to the bottom of your routes.php and remember to run composer dump-autoload afterwards. Notice the use of "->where" that specifies the possible content of params, enabling you to use a param containing a slash. And than in your controller you just handle the data as you'd normally do (like it didnt contain the slash). This should work for you. Additionally, here you have detailed Laravel docs on route parameters: [ docs ] urlencoded slashes do not work in Laravel due to what I consider a bug.

https://github.com/laravel/framework/pull/4323

This pull request will resolve that bug.Update.Note that the change allows the route to be parsed BEFORE decoding the values in the path.I have a similar issue but my URL contains several route parameters :And here is how I managed that case :Hope it can help.

Fatal error: Call to undefined function mb_detect_encoding()

Louis93

[Fatal error: Call to undefined function mb_detect_encoding()](https://stackoverflow.com/questions/17204437/fatal-error-call-to-undefined-function-mb-detect-encoding)

I receive this error after trying to set up LAMP by following this tutorial, and I find myself receiving the above error after trying to set up phpmyadmin.I followed the advice over here: PHP Fatal error when trying to access phpmyadmin mb_detect_encoding, and made those changes. When I run phpinfo(), I see that support for MySQL and mb_string are enabled as shown below: 

2013-06-20 02:36:17Z

I receive this error after trying to set up LAMP by following this tutorial, and I find myself receiving the above error after trying to set up phpmyadmin.I followed the advice over here: PHP Fatal error when trying to access phpmyadmin mb_detect_encoding, and made those changes. When I run phpinfo(), I see that support for MySQL and mb_string are enabled as shown below: Install the gd library also.check this link

http://www.php.net/manual/en/mbstring.installation.phpThere's a much easier way than recompiling PHP. Just yum install the required mbstring library:Example: How to install PHP mbstring on CentOS 6.2Oh, and don't forget to restart apache afterward.Mbstring is a non-default extension. This means it is not enabled by default. You must explicitly enable the module with the configure option.In case your php version is 7.0:In case your php version is 5.6:On Windows open the file php.ini and make this changes:Remove the comment and point to the ext directory; extension_dir = "./" -> extension_dir = "C:/Php/ext"Remove the comment of this extensionsRestart apache servicehttpd -k restartWhen I opened my php.ini file, "extension_dir" line looked like following :which i changed to:and it worked.Under Windows / WAMP there doesn't seem to be any php_mbstring.dll dependencies on the GD2 extension, the MySQL extensions, nor on external dlls/libs:deplister.exe ext\php_mbstring.dlldeplister.exe ext\php_gd2.dllWhatever php_mbstring already needs, it's built-in (statically compiled right into the DLL).This error is also very specific and deterministic...The function mb_detect_encoding() didn't fail because php_gd, php_mysql, php_mysqli, or another extension was not loaded; it simply was NOT found.I'm guessing that all the answers that are reported as valid (for Windows / WAMP), that say to load other extensions, to change php.ini extension_dir paths (if this one was wrong to begin with, NO extensions would load), etc, work more due to a) un-commenting the extension = php_mbstring.dll line, or b) restarting Apache or the computer (for changes to take effect).On Windows, most of the time the problem is that php_mbstring.dll is either:More in-depth answer here: Call to undefined function mb_detect_encodingyou should use only english version of phpmyadmin if you are using all languages you should enable all languages mbstring in php.in file.....just search for mbstring in php.inThe problem could also be that Apache can't find php.ini

If you set PHPIniDir incorrectly.

Mine was set to: PHPIniDir "c:/php7"

But, the folder is actually just "php"

The clue was viewing phpinfo()

Which showed:

Configuration File (php.ini) Path C:\windows I had the same problem with Ubuntu 17, Ispconfig was not processing the operations queued of any kind and also the server.sh command was not working.

I checked and the running PHP version after the OS upgrade was 7.1 so the solution was to type:and now is everything okHope this helps some ppl, I got this error when i added the path and extension to "docref_root" "docref_ext" in my php.ini file, I then commented it out and it was ok, but cant get my help to work now.For fedora:yum install php-mbstringThen restart apache

How to run a PHP file in a scheduled task (Windows Task Scheduler)

praveenjayapal

[How to run a PHP file in a scheduled task (Windows Task Scheduler)](https://stackoverflow.com/questions/295386/how-to-run-a-php-file-in-a-scheduled-task-windows-task-scheduler)

How can I create a scheduled task to run a PHP file?

Yes, I filled out everything in the scheduled task, but it still doesn't work.It just opens the PHP file in Notepad.I gave the correct user name and pwd.Please help me..

2008-11-17 11:45:10Z

How can I create a scheduled task to run a PHP file?

Yes, I filled out everything in the scheduled task, but it still doesn't work.It just opens the PHP file in Notepad.I gave the correct user name and pwd.Please help me..The Run command should beFrom the command line help of php.exe:I just wrote a .bat file that does the work file.batAnd put it in the Schedule Tasks like this:Run: C:\code\file.batStart in: C:\code\If you running php scripts, in most of cases script awaiting to be runned in current folder.

That mean you must set up folder each your action, use field "Start In".Example:Do not forget:Sounds like you don't have PHP files associated with the EXE.You can do this My Computer > Tools > Folder Options > File Types. If nothing else, this can also help you verify your settings for them.Otherwise, you can specify "C:\path\to\php.exe [file]" in the task.This is what I did:Check if there are spaces () in your directory. If it does, you need to enclose them with ".And if it still did not work, check your file.php if there are included files in it.Remove it. And if the included file in your file.php is really needed, try to move the code/script from that included file to your main file.I think, you must execute your PHP script via URL.

you can write batch script for execute URL.

Why you don't write backend script in other language such as batch script, vbscript or etc.

Returning a value in constructor function of a class

Anoosh Ravan

[Returning a value in constructor function of a class](https://stackoverflow.com/questions/6849572/returning-a-value-in-constructor-function-of-a-class)

So far I have a PHP class with the constructorthe functionality of loadUser is to look up the database for a particular email address. 

When i set the identifier to some email that i'm sure it's not in the database; the first IF is get passed, and goes to the first ELSE. here the constructor should return FALSE; but instead, it returns an object of the class with all NULL values ! how do i prevent this? thanks EDIT:thank you all for the answers. that was quite fast ! I see that the OOP way is to throw an Exception. So a throw one, my question changes that what should i do with the exception?? 

php.net's manual is pretty confusing ! 

2011-07-27 18:47:09Z

So far I have a PHP class with the constructorthe functionality of loadUser is to look up the database for a particular email address. 

When i set the identifier to some email that i'm sure it's not in the database; the first IF is get passed, and goes to the first ELSE. here the constructor should return FALSE; but instead, it returns an object of the class with all NULL values ! how do i prevent this? thanks EDIT:thank you all for the answers. that was quite fast ! I see that the OOP way is to throw an Exception. So a throw one, my question changes that what should i do with the exception?? 

php.net's manual is pretty confusing ! Constructors don't get return values; they serve entirely to instantiate the class.Without restructuring what you are already doing, you may consider using an exception here.Now, you can create a new user in this fashion.The constructor is suppose to create an object. Since in php booleans are not considered to be objects the only option is null. Otherwise use a workaround i.e. write a static method which creates the actual object.The best you can do is what Steve has suggested.

Never create constructors that do any job other then assigning constructor parameters to the object properties, maybe create some default ones, but nothing else.

Constructors are meant to create a fully functional object. Such an object must always work as expected after its instantiation.

A user has email, name and probably some other properties. When you want to instantiate a user object, give all those properties to its constructor.

Throwing exceptions is not a good way either. An exception is meant to be thrown under exceptional conditions. Asking for a user by email is nothing exceptional, even if you eventualy figure out that no such user exists. Exception could be for example if you ask for a user by email = '' (unless that is a regular state in your system, but id rather suggest emails to be null in those cases).

To get all those properties for a user object you should have a factory (or a repository if you prefer) object (yes, an object - it is a bad practice to use static whatever)

Private constructor is a bad practice either (you'll need a static method anyway and as i already stated, statics are very bad)so the result should be something like this:See? no statics, no exception, simple constructors and very readable, testable and modificableA constructor cannot return anything but the object it is attempting to create.  If the instantiation doesn't complete properly, you'll be left with a class instance full of NULL properties as you've discovered.If the object loads in an incomplete or error state, I would suggest setting a property to indicate that.When instantiating the object then, you can check if it has an error status:Another (perhaps better) alternative is to throw an exception in the constructor, and wrap the instantiation in a try/catch.Why not simply pass the results into the constructor needed to build the object, rather than try to make the constructor fail sometimes? Even if you could make it fail sometimes, you will still need to check after calling the constructor to ensure it actually did construct, and in those lines, you could just call the ->loadUser() and pass the results into the constructor. A good hint someone one told me, "always give the constructor what it needs to build the object, don't make it go looking for it."I'm really surprised that for 4 years none of the 22k viewers suggested creating private constructor and a method that attempts to create an object like this:This way you get either an object or false (you can also make it return null). Catching both situations is now very easy:You can test it right here: http://ideone.com/TDqSyiI find my solution more convenient to use than throwing and catching exceptions.thanks for all the comments and solutions. here is what i done to fix the problem: (i hope it helps others)I wouldn't put too much in the construct. You should consider a static functin that create the User (factory) instead of putting everything in the constructor. Thus, you can still use your user object without having to call implicitly the load function. This will save you pain. Sample usage:

PHP: Real world OOP example

BDuelz

[PHP: Real world OOP example](https://stackoverflow.com/questions/1343619/php-real-world-oop-example)

I am trying to learn OOP.  The so called 'real world' examples in the books I am reading aren't helping. All the examples like Pet, Car, Human aren't helping me anymore.  I need REAL LIFE examples that like registration, user profile pages, etc.An example:I've also seen:where :Holds all the information in an array.And within that same class liesAre there any real world examples implementing OOP in the many different php applications (registration, login, user account, etc)?

2009-08-27 20:37:18Z

I am trying to learn OOP.  The so called 'real world' examples in the books I am reading aren't helping. All the examples like Pet, Car, Human aren't helping me anymore.  I need REAL LIFE examples that like registration, user profile pages, etc.An example:I've also seen:where :Holds all the information in an array.And within that same class liesAre there any real world examples implementing OOP in the many different php applications (registration, login, user account, etc)?OOP is not only about how a single class looks and operates.  It's also about how instances of one or more classes work together.That's why you see so many examples based on "Cars" and "People" because they actually do a really good job of illustrating this principle.In my opinion, the most important lessons in OOP are encapsulation and polymorphism.Encapsulation: Coupling data and the logic which acts on that data together in a concise, logical manner

Polymorphism: The ability for one object to look-like and/or behave-like another.A good real-world example of this would be something like a directory iterator.  Where is this directory?  Maybe it's a local folder, maybe it's remote like an FTP server. Who knows!Here's a basic class tree that demonstrates encapsulation:Each class/object is responsible for its own method of retrieving a directory listing.  The data (variables) are coupled to the logic (class functions i.e, methods) that use the data.But the story is not over - remember how I said OOP is about how instances of classes work together, and not any single class or object?Ok, so let's do something with this data - print it to the screen? Sure. But how? HTML? Plain-text?  RSS?  Let's address that.Ok, now we have a couple class trees for traversing and rendering directory lists.  How do we use them?Now, I know what you're thinking, "But Peter, I don't need these big class trees to do this!" but if you think that then you're missing the point, much like I suspect you have been with the "Car" and "People" examples.  Don't focus on the minutiae of the example - instead try to understand what's happening here.We've created two class trees where one (*DirectoryRenderer) uses the other (*DirectoryIterator) in an expected way - this is often referred to as a contract.  An instance of *DirectoryRenderer doesn't care which type of instance of *DirectoryIterator it receives, nor do instances of *DirectoryIterator care about how they're being rendered.Why? Because we've designed them that way. They just plug into each other and work. This is OOP in action.Purchase a book like "PHP and Mysql everyday apps for Dummies".Its old I know [2005] but it shows concepts of User Logins, Forum, Shopping Carts, etc in both Procedural and Object Oriented with Mysqli.It helped me learn Object Oriented PHP, I studied it a lot. Well worth the money.OOP is much like grouping bits of your program into reuseable pieces. Its not that hard to be honest with you its just the idea of packing your functions into classes. Real world mini example of OOP stuff below:CLASS DATABASE

CLASS SESSIONS

CLASS WEBFORMS

CLASS EMAILCLASS ACCOUNTS (Example Functions below)

FUNCTION SELECTACCOUNT

FUNCTION CHECKPASSWORD

FUNCTION CHECKUSERNAME

FUNCTION CREATEACCOUNTI hope you keep at it, PHP 6 will be re-engineered to support OOP more than ever.Good Luck!Whilst I know that this question has been answered already, I feel as though I can add value here.I don't believe that you should use PHP as a programming language to learn OOP. If you wish to learn OOP for web applications, you should really be looking at C# or Java. Once you have learned OOP, then you can apply this knowledge to PHP. One example of a book I used to learn OOP was Big Java by Cay S. HorstmannWhy do I say this??? Because there are literally millions of examples on PHP of how to do stuff, however not many are examples of how to program properly. Further to this, PHP allows you to take many shortcuts, which would not be acceptable with the likes of Java. As such, if you program PHP with a Java head, then I believe that you will be a stronger programmer. OOP is not language specific, it is a programming paradigm.If you must learn OOP using PHP, then I would recommend that you take a look at some real source code in public repositories of github. You can search them in packagist.org. If they are a decent public repository, they will contain a readme.md file which would show you how to use the composer packages. e.g https://github.com/moltin/laravel-cart is an example of a shopping cart package which you would be able to use in your application. Notice how you don't need to look at the package source code to understand what the packages do. The package has been written, and you don't care about how they work, but you use them so you only need to know how to use them. This is exactly what OOP is about.What you are doing however is diving into the source code as a tool to understand how OOP works.Further to this, and probably more importantly, for web application development, I would research the MVC design pattern.The MVC design Pattern stands for Model, View, Controller. Where in the case of a web application, The Model is responsible for modelling the database, the view is responsible for displaying content to the user. The controller is responsible for interacting with the model and handling user input.I then think you should try to install the Laravel Framework or other "decent modern framework" on your local machine. Why do I say modern, because modern frameworks require a minumum PHP version of 5.3+ which mean that the PHP on your machine would support real OOP similar to that which you would get from the likes of Java.There are many tutorials which will show you how to build web applications in laravel. Immediately, you will see that when you create a controller, you extend a BaseController. When you create a Model, you extend Eloquent. This means that you will already be using Polymorphism in your code. You will see that by using classes, they are being encapsulated, and you will see that each class has a specific role.When you would like to interact with the database, you will initially create a new Model object within the controller methods. As you start to learn more, you will start learning how to inject dependencies into the controller, then learning how to dump your models and create repositories and program to interfaces instead.A decent book on learning Laravel for beginners would be https://leanpub.com/codebright by Dale Rees. I met Dale at a Laravel meetup about 2 weeks ago.Further to this, as you become more proficient building web applications, you will start to learn how to apply the following principles to your programming:As astropanic said, you could take a look at the source code of a good PHP framework or library. I recommend Zend Framework, it's very modular and has a great, professional design. I would say it is a very good piece of object-oriented PHP code.Still, I think it's not that easy to learn from a huge piece of production code, since it wasn't really made to teach you anything. But if you want real-world object-oriented PHP code, the Zend Framework (or Symfony, or maybe CakePHP) is probably the way to go.I'd advise you to stay away from any framework at this moment, if you do not know OOP, digging into zend or any other framework would be too much.PHP OOP is quit funny... like ha ha funny, because it's supported, but PHP is not an OOP language like java or c#.Short example just to underline my statement:but if you want to do OOP "on the fly" you can do the following:and thenbut you can use OOP like you would in java or c# but not to the same extend - and have in mind, popular systems like wordpress and drupal are not pure OOP! but you can do inheritance and other classing OOP stuff in PHP as well.I haven't gone far in PHP OOP, but the more i get into it the more easier it becomes. The objects examples are just there for you to understand how OOP works. I understand and been through this before, OOP is just about properties and methods ( normal variables and functions). I programed in real OOP myself applying the examples from my tutorials and didn't necessarily have to be in real world. That is just like been spoon fed and you would never understand OOP and would be easy to forget. My advice learn to understand. If you understand, you can do anything and would realize the power of OOP. I downloaded this book and i think you should too. But that is just like someone building your apps for you... Here a link to the book PHP and Mysql everyday Apps For Dummies I suggest also to see my wrapper Arrayzy. It's a native PHP arrays easy manipulation library in OOP way.So if you work with native PHP array functions - you could do the same things in OOP and Arrayzy helps you with it, for example:andIn both cases the result array will be:Check how does this mergeWith method (or other) works under the hood.I think this is a nice example which shows that almost everything functional code you could replace with OOP code like in this library. But with OOP you get much more and you could also check Functional programming vs OOP question to learn more details what's a cons and props of it.

PHP PDO vs normal mysql_connect

Imrul

[PHP PDO vs normal mysql_connect](https://stackoverflow.com/questions/1402017/php-pdo-vs-normal-mysql-connect)

Should I use php PDO or normal mysql_connect to execute database queries in PHP?Which one is faster?One of the big benefits of PDO is that the interface is consistent across multiple databases.

There are some cool functions for prepared statements too, which take some of the hassle out of escaping all your query strings. The portability of PDO is greater than mysql_connect.So, should I use PDO for those reasons or stick to the traditional mysql_connect?

2009-09-09 20:52:06Z

Should I use php PDO or normal mysql_connect to execute database queries in PHP?Which one is faster?One of the big benefits of PDO is that the interface is consistent across multiple databases.

There are some cool functions for prepared statements too, which take some of the hassle out of escaping all your query strings. The portability of PDO is greater than mysql_connect.So, should I use PDO for those reasons or stick to the traditional mysql_connect?PDO is a bit slower than the mysql_*

But it has great portability. PDO provides single interface across multiple databases. That means you can use multiple DB without using mysql_query for mysql, mssql_query for MS sql etc. Just use something like $db->query("INSERT INTO...") always. No matter what DB driver you are using.So, for larger or portable project PDO is preferable. Even zend framework use PDO.Some quick timings indicate PDO is slightly faster at connecting.Gives results like The speed difference will be negligible anyway; establishing a network connection will likely take a LOT longer than any overhead incurred by PDO, especially if the mysql server is on another host.You mentioned all the reasons to use PDO yourself. Really, never use the mysql_* functions directly, either use PDO, or use some other library.I don't think speed is what people are looking for when they are using PDO -- I don't know if there is a difference, and I honnestly don't care : as long as I'm doing a couple of queries to a database when generating a page, a couple of milliseconds on the PHP side will not change anything.There are two/three great things with PDO, compared to mysql_* :BTW : I'm generally using PDO -- either "by hand", or as it's integrated in / used by Zend Framework and/or Doctrine.

As a sidenote : Even if you are not going to use PDO, note that using mysqli instead of mysql is recommended.See this page of the PHP manual, about that.I did some performance testing to compare Mysqli functions to PDO functions using both prepared statements and regular direct queries (tested using select statements on Mysqlnd and MyISAM tables).  I found that PDO queries are just slightly slower than Mysqli, but only slightly.  This makes sense since PDO used for this purpose mostly just a wrapper that calls Mysqli functions.  The advantage to using PDO is that it makes it a little easier to migrate to a different database because the function names aren't specific to MySQL.The real performance difference is in whether you use prepared queries.  There is a large and significant performance penalty to using prepared queries.  Other people who have tested them have found the same results.  The only time prepared queries are faster is if you are preparing a query once and then submitting it thousands of times with different data values.  Otherwise, it's always faster to use mysqli::query() or PDO::query().  But it's important to be aware that those functions don't escape data values for you, so you need to remember to use mysqli::real_ escape_ string() or PDO::quote() on data variables.I would generally recommend using PDO unless there is a specific reason you cannot. If there is no little difference between the two and you have no reason not to use PDO, I believe it would be better to get into the practice of using DB abstraction in your applications than going with mysql_* simply because it is there. I would say let best practice win.In both cases, you call the same mySQL server from the same Php server ... so you cannot notice a lot of difference.If you want good performance, think about cache (memcache or simple Php file ...) and make a good data base structure (INDEX ...)both the same functionality but you compare for codes 

PDO is more Humanly Readable :) 

So what you think? If performance isn't a "real problem" for you, you should use PDO. The performance differs by small margins, and PDO has a very nice and portable cross-database interface wich can save you some headaches in case you need to use several database drivers.The mysql_connect function is deprecated as of PHP 5.5.0 and, as with most deprecated features, will be removed. Therefore, prefer using PDO_MySQL (or another alternative MySQLi ) over mysql_connect.Source: http://php.net/manual/en/function.mysql-connect.phpSome Advantages of PDO:PDO database connection code:Normal MySQL database connection code:orMySQL database connection code easy but PDO has many advantage.

PHP vs. Java are there energy consumption differences?

Thomaschaaf

[PHP vs. Java are there energy consumption differences?](https://stackoverflow.com/questions/1318851/php-vs-java-are-there-energy-consumption-differences)

I heard a rumor, that Java consumes less energy than PHP and was wondering if and how this would be true. I'm currently working in a company where we base most of our apps on PHP. Power consumption has never been the problem for us, but we are working on bigger projects where it might matter. We love PHP for web developing and are wondering how such a rumor can spread and if it is true at all.The example I heard was that Facebook is switching for exactly that reason to Java (I can't seem to find any of this stuff on google though).Since a customer of mine is asking me this question I would love proof if it is true.

2009-08-23 15:49:40Z

I heard a rumor, that Java consumes less energy than PHP and was wondering if and how this would be true. I'm currently working in a company where we base most of our apps on PHP. Power consumption has never been the problem for us, but we are working on bigger projects where it might matter. We love PHP for web developing and are wondering how such a rumor can spread and if it is true at all.The example I heard was that Facebook is switching for exactly that reason to Java (I can't seem to find any of this stuff on google though).Since a customer of mine is asking me this question I would love proof if it is true.Computers don't particularly care if they're executing Java or PHP. Power consumption is pretty much the same. The question then becomes a question of performance - if you can serve more requests with one server you'll need less servers and consume less power. Or alternatively, if you're not doing web scale applications, serve your requests quicker and spend more time idling, which consumes less power.Given pure Java and pure PHP, Java as a statically typed JIT'ed language is of course faster. The question is rather which one can you make faster given the team members and development effort available to you.My take is that the best way is to mix languages, use existing Java based infrastructural tools, such as Terracotta to build the performance critical parts and something more nimble to build complex but not that heavy business and presentation logic.I really really doubt it is a language only issue.The platforms in question have so much variability to render any generic comparison moot. To name a few variability points.I really doubt you can isolate so many variables into a useful metric. At most you can pick two equivalent applications (noting all the platform's choices) using the same hardware and compare them. Then improve the worst until it tops the better one. The proper measurement would be both the watts per hour and requests per second, I think. What's noted in Ants' answer (upvote him) is the crucial point though: the better performing  platform will always be more power efficient, given enough demand, because it'll be able to serve the same amount of requests with less hardware.But which platform is better performing is not merely language dependent, depends on the things noted above (and some more).I was surprised by this question until I did a Google search, which turned this up.  It's a serious issue, one that I wouldn't have thought of.Now that I am thinking about it, I think it becomes an issue of who pays the electric bill.  Sun's Java strategy was about selling servers: big iron for the back, thin clients for the front end.  Perhaps technologies like Flex move more of the work back to the client and leave them with a greater percentage of the electric bill.But I'd be surprised to see a ranking of languages by energy use.  A very interesting question.  I'm voting it up.What a fascinating problem.  Wouldn't it be interesting to write an application in a number of languages, deploy them on identical hardware, and measure the power consumption?  I'd love to see it.If you really get crazy, what about a performance monitoring tool that, in addition to showing you where memory and CPU were consumed in each part of your app, would also show you where the most energy was being used?Now I wish I could vote this question up again.Like many comparative questions here, you'll probably need to come up with a benchmark to really determine whether that's true.lesswatts.org has a bit of information on applications power management, as well as several other aspects of power consumption on Linux systems.  As a side note, they seem to be using PHP, so that might be worth something in itself :)They keep repeating that you should use PowerTOP to  determine which applications are causing the most power consumption, and you can see from the screenshot that they are checking wakeups from idle, at least.Most of the time, a web server is sitting idle, then it "serves" for a very brief moment, then it goes back to waiting for the next connection to serve.  In that regard, PHP would contribute very little to the entire process: only the serving portion.  So I wonder if the actual benchmark was a comparison of a particular Java-based web server vs. Apache/PHP serving similar pages.  If that was the case, it's not really a fair comparison of PHP and Java -- either of the two considered as serving an actual page is only active for milliseconds at a time, typically.  I would think the actual web server, the one who's selecting or polling connections, is the one that would be hogging power.By energy consumption do you mean Watts power consumption?I'm not 100% sure, but even if this is true, I think this is similar to optimizing a part of your code, which is executed in 0.01% of your program's runtime.The problems that will be caused by the switching (changing production/release platforms, learning curve time loss, new business software costs, etc) will be pretty drastic. I can't see such an important decision being made, except after serious and company-specific business analysis task and the corresponding results of it.However, this should make for an interesting discussion.I understand that many large companies have difficulty with growth in demands for resouces in their data centres. These include both floor space and power consumption. So I can well believe that rationalisation of applciations, favouring low resource consumption is a strategy that is being adopted.Whether the use of Java, PHP or any other implementation technology is likely to be the determinant of power consumption is less obvious to me.If we implemented a particular piece of function optimising for resource consumption in, say, Interpreted Basic, Java and C, which would we expect to need most execution resources.I would need to see some hard evidence, but I could believe that a pure interpreted language might consume more than, Java, and even with JIT etc. it in turn might consume more than C.Now just suppose (purely hypothetically, I'm not saying this is the case) that it was more effort to develop in C than in Java, and more effort to develop in Java than in Basic. How Would you trade off development and maintenance effort against that resource consumption?Really tricky to do. If someone told me they were moving to Java soleley on the basis of power consumption I'd really want to know more. What are the costs in doing so? Where was the break-even point? [BTW - I work almost exclusively in Java, I'd love to be able to say "we win, see how low power we are!"]This is a difficult question to answer unless, as was mentioned about benchmarks, you set some rules for comparison.For example, comparing a Java3D first-person shooter to a PHP webpage would be unfair, as Java would lose.If you look at Java frameworks, then you may want to compare these three:

Tomcat + JDK 6 + JSP

Apache + PHP

Scala + Lift frameworkI included Scala as it compiles to java bytecode and I expect it will be cheapest for power.I am not certain what would be the winner, I would bet on Scala, but you would want to ensure that you have the same application implemented and then just compare the power usage.PHP will probably win as apache and PHP seems to be lower on memory usage than Java, but I can't really compare Scala and PHP.  The big unknown for me is that if you call the same java code then it has already been turned into native code and so will run more quickly, but JSP should be precompiled to take advantage of Java.But, if you use Web2.0 technologies then it changes, as you put most of the load on the browser, if you have a large javascript application, then you are just making server calls, which will reduce power usage on the server as the render work is passed onto the browser.  At that point the JIT for Java should come into play, and Java or Scala I would expect to be lower on power usage.A big test, IMO, would be to see if we can get the same performance as we reduce the size of the machine, so, if you need 3 computers for PHP or Java, that are load balanced, and 1 Scala machine can have the same performance, then scala (using Lift) will win.Power efficiency is an entire field in itself. Measuring performance is usually the best way to go (given the same hardware).  If different hardware is being compared, then that's a whole 'nother ball game.So given the same hardware, if a software stack can perform better than another software stack, then it means that the better performing software stack will use less power "per request" than the other. If the performance difference is great enough for you to consolidate your servers into less, then it's a even bigger win!There's a lot of other considerations:Data Centers

Consider that servers are housed in data centers that are cooled. Servers generate heat and the heat needs to be removed to protect the hardware. A/C units do not have infinite granularity. Their efficiency usually comes with volume. So if I reduce my number of servers from 2 to 1, I may have saved the power consumption of one server, but probably not much in cooling costs.  But if changing my architecture allows me to cut out 100 servers... that's big savings!Hardware and Peripheral Devices

Using the most power efficient SW stack and running it on a Pentium 4 server = stupidity ;)

The most energy efficient software cannot make up for inefficient hardware. One interesting lesson here is: "let the hardware guys worry about power". You worry about getting your application to market. When your application can generate revenue, you can always buy the latest 16-core Core 5 hexa-deca CPU and instantly get your energy efficiency ;)Virtualizaton

If your application is low volume, consolidating it into a virtual machine running on multi-core system would probably save you more energy than rewriting it in your most energy efficient SW stack and running it on standalone server.Programmer Time

You need programmers knowledgeable in the "most power efficient" software stack. You must consider if that is the right tools. Programmers use computers to develop the software and the more time they need to develop (if they're constrained to the wrong tools), the more power is consumed. Not to mention you will have to pay them for more hours. This usually overrides any energy consumption concerns because the costs here are magnitudes higher.If your only concern is energy efficiency, yes, use all the tools in the bag to get you there. But most of the time, that is only one small variable in the overall scheme of things, and also the least of your cost. More efficient code does consume less resources, including power.  Java in general has a faster, more efficient implementation, so all other factors being constant, Java will probably consume less energy running on a server.But all other factors are not constant.  There's no telling what changes based on your decision to use PHP or Java.  For example, Java takes longer to develop, which means that Java programmers have their computers on for longer, and their power usage from that may surpass your savings on the server.If you are Google, Amazon, or some other company who serves literally billions of requests each day from thousands of servers, I would worry about this.  Otherwise, your scale isn't large enough to make any positive assertions about energy consumption, so any decision you make is just as likely to be counterproductive as it is to be productive because it's impossible to include all the relevant factors.A relevant example is a few months back when a rumor went around that you could save energy by setting your desktop background to black.  The thinking was that black == no light, so you weren't using as much light.  Google (one of the few companies with enough power usage to make this kind of research productive) ran some experiments and did some research, and discovered that LCD screens produce white light no matter what, and filter it by passing a second current through the pixels in a different way.  So by setting a pixel to black, you are setting its filtration to the maximum, actually using the most energy possible.  The most energy-saving desktop background (at least on an LCD screen) is a white background.  However, since white backgrounds hurt people's eyes, few people set their desktop backgrounds to white and the rumor that black backgrounds save energy is still prevalent.So, to make a long story short, worrying about this is likely to do more harm than good.This is the same question as what language has the best performance. Now then, for just about every project most programmers ever get in contact with. How you write the system by far outweighs the technologies used (given that the system is speced ok).The choice of language wrt performance is imho for embedded systems and scientists. You choose language according to what problem to solve, extremely seldom for how cpu efficient it is.Again, it is how you design and write the system that determines how efficient it will be.Obviously modern computing techniques use a lot more resources than they used to, and this directly equates to power consumption. Once we'd use a plain old socket to transfer binary data over the network and a 100Mhz processor would handle it, now we have a software stack where the data is converted to XML text, then passed over a web service over http over that same socket, and we wonder why we need a 3Ghz processor with spods of RAM to get decent performance :)So that's the issue, the only thing you can do about it is to make your code more efficient. Typically this means use a lower level language, and less reliance of general-purpose frameworks or libraries. Definitely don't try to layer software stacks if you can't help it.Modern programming doesn't like this - there's a push toward programmer productivity, employing cheaper programmers, and re-engineering code all the time (ie rewriting it) so code needs to be easy to create (and sometimes maintain). As a result, to get the best you'll need to trade off these factors. The industry standard way of doing this is simply to mix systems according to their use.Currently the ultimate performance is C/C++ code, and the ultimate programmer productivity seems to be scripting languages. So, the ideal best of both is to write your main business logic in a script language like Python, and use it to call dedicated 'power helpers' written in C/C++. If you need more performance, you can write more of your code in the underlying C/C++. If you need more RAD fast development, write more in the script language.My advice for the OP is not to rewrite in Java, it may be better performing overall, but you'll cost so much it might not be worth it. Instead, take the intensive bits of your app and rewrite those as efficiently as you can and call them from your existing PHP. then take a look at your overall architecture and reduce reliance of inefficient protocols and data structures. For example: if you replace XML with JSON, you'll find you have the same functionality but at a fraction of the data size and resources required to parse and reformat the data.While many of the facets concerning this questions have been already explored in depth here, there is at least one more to look into.A typical PHP web application duplicates a lot of effort from one request to the next, simply because the PHP execution environment (or context) is not persistent across requests. Since a typical Java web application does have the ability to persist state directly, without extra steps or cache invalidation, it doesn't need to, for example, perform PHP-style duplicative SQL queries to fetch the same information for each request. Instead, a Java web application often stores the complex information for the current analysis in a native data structure on heap, which is accessed in nanoseconds, rather in milliseconds. Since the processor has to do significantly less work to perform these basic data access functions, the work requires less power per unit of customer value.

What is an appropriate content-type header for JavaScript files?

Umair Jabbar

[What is an appropriate content-type header for JavaScript files?](https://stackoverflow.com/questions/3987384/what-is-an-appropriate-content-type-header-for-javascript-files)

I am delivering a JS response from a PHP file. When setting the Content-Type header which value should I use, application/javascript or text/javascript?What’s the difference between the two?

2010-10-21 12:25:11Z

I am delivering a JS response from a PHP file. When setting the Content-Type header which value should I use, application/javascript or text/javascript?What’s the difference between the two?According to the IANA Registered MIME media type list, JS has two registered MIME types; the obsolete text/javascript and the now official application/javascript.Thus, use application/javascript.From Wikipedia on Internet Media TypesThere is also the deprecated text/javascript (which IE will probably not choke on).

ini_set(「memory_limit」) in PHP 5.3.3 is not working at all

Ant

[ini_set(「memory_limit」) in PHP 5.3.3 is not working at all](https://stackoverflow.com/questions/5061917/ini-setmemory-limit-in-php-5-3-3-is-not-working-at-all)

I had this working before : That would input this : on a php script executed by command line.

I updated from 5.2 to 5.3, and from now, this directive is not working at all  : this gives me : and then make my script fail with a fatal Error...I checked the php documentation, and googled it, and I didn't find anywhere that "memory_limit" had been deprecated. Does anyone have a solution?

2011-02-21 03:16:19Z

I had this working before : That would input this : on a php script executed by command line.

I updated from 5.2 to 5.3, and from now, this directive is not working at all  : this gives me : and then make my script fail with a fatal Error...I checked the php documentation, and googled it, and I didn't find anywhere that "memory_limit" had been deprecated. Does anyone have a solution?Most likely your sushosin updated, which changed the default of suhosin.memory_limit from disabled to 0 (which won't allow any updates to memory_limit).On Debian, change /etc/php5/conf.d/suhosin.ini to Or whichever value you are comfortable with. You can find the changelog of Sushosin at http://www.hardened-php.net/hphp/changelog.html, which says:If you have the suhosin extension enabled, it can prevent scripts from setting the memory limit beyond what it started with or some defined cap.http://www.hardened-php.net/suhosin/configuration.html#suhosin.memory_limitHere's a list of things that are worth checking:Is Suhosin installed?ini_sethttp://php.net/manual/en/ini.core.php#ini.memory-limithttp://php.net/manual/en/configuration.changes.phpWorks for me, has nothing to do with PHP 5.3. Just like many such options it cannot be overriden via ini_set() when safe_mode is enabled. Check your updated php.ini (and better yet: change the memory_limit there too).Ubuntu 10.04 comes with the Suhosin patch only, which does not give you configuration options. But you can install php5-suhosin to solve this:Now you can edit /etc/php5/conf.d/suhosin.ini and set:Then using ini_set will work in a script:Let's do a test with 2 examples:The above example doesn't work for overriding the memory_limit value.

But This will work:You have to place the ini_set('memory_limit','128M'); at the top of the file or at least before any echo.As for me, suhosin wasn't the solution because it doesn't even appear in my phpinfo(), but this worked:

How to display「git blame」in PhpStorm after opening file by default

NH_j

[How to display「git blame」in PhpStorm after opening file by default](https://stackoverflow.com/questions/27559063/how-to-display-git-blame-in-phpstorm-after-opening-file-by-default)

How to display "git blame" after opening a file by default in PhpStorm.Without "right-click the left gutter, and select the Annotate option", 

I want to display "git blame" by default after just opening files.

2014-12-19 02:51:05Z

How to display "git blame" after opening a file by default in PhpStorm.Without "right-click the left gutter, and select the Annotate option", 

I want to display "git blame" by default after just opening files.'git blame' is supported - the command is called annotate in PhpStorm.You can set a hotkey for almost anything in PHPStorm.Click Preferences > Keymap. Search for Annotate. You can then set a hotkey to toggle Annotations in PHPStorm. This doesn't exactly solve the problem of showing annotations when a file is opened but does eliminate the need for lots of fiddly clicking.It's not exactly an solution, but can help if you're tired of creating new shortcuts for every little functionality that you need.You right click the file, press G, release, and press Nit's the same as pointing to the GIT, waiting for the window to popup and selecting the annotate function, only faster.That's the way I do.Hope it helps somebodyIt is possible with the GitToolbox plugin. These settings are enabled by default i think and it also displays the blame in the status bar.

If you want to edit the settings, you go to File-> settings-> other settings-> GitToolbox Global and you can see the checkboxes there.

Serialize or json in PHP?

datasn.io

[Serialize or json in PHP?](https://stackoverflow.com/questions/2574728/serialize-or-json-in-php)

So I need to encode an array in PHP and store it in plain text in MySQL database, my question is should I use serialize() or json_encode()? What are the advantages and disadvantages of each of them?I think either of them would do in this situation. But which one would you prefer and why? If it is for something other than an array?

2010-04-04 14:35:20Z

So I need to encode an array in PHP and store it in plain text in MySQL database, my question is should I use serialize() or json_encode()? What are the advantages and disadvantages of each of them?I think either of them would do in this situation. But which one would you prefer and why? If it is for something other than an array?Main advantage of serialize : it's specific to PHP, which means it can represent PHP types, including instances of your own classes -- and you'll get your objects back, still instances of your classes, when unserializing your data.

Main advantage of json_encode : JSON is not specific to PHP : there are libraries to read/write it in several languages -- which means it's better if you want something that can be manipulated with another language than PHP.A JSON string is also easier to read/write/modify by hand than a serialized one.On the other hand, as JSON is not specific to PHP, it's not aware of the stuff that's specific to PHP -- like data-types.

As a couple of sidenotes :I did some analysis on Json Encoding vs Serialization in PHP. And I found that Json is best for plain and simple data like array.See the results of my experiments at https://www.shozab.com/php-serialization-vs-json-encoding-for-an-array/Another advantage of json_encode over serialize is the size. I noticed that as I was trying to figure out why our memcache used memory was getting so big, and was trying to find ways to reduce is:Which gives you:Obviously I've taken the most extreme example, as the shorter the array, the more important the overhead with serialize (relative to the initial object size, due to formatting which imposes a minimum number of characters no matter how small the content). Still from a production website I see serialized array that are 20% bigger than their json equivalent.Well firstly serializing an array or object and storing it in a database is typically a code smell. Sometimes people end up putting a comma separated list into a column and then get into all sorts of trouble when they later find out they need to query on it.So think very carefully about that if this is that kind of situation.As for the differences. PHP serialize is probably more compact but only usable with PHP. JSON is cross-platform and possibly slower to encode and decode (although I doubt meaningfully so).First, thanks to Shozab Hasan and user359650 for these tests. I was wondering which choice was the best and now i know:To encode a simple array, JSON which is OK with both PHP AND javascript, maybe other languages.To encode a PHP object, serialize is a better choice because of specificity of PHP Objects only instanciable with PHP.To store datas, either store encoded datas in a file or use MySQL with standard format. It would be much easier to get your datas back. MySQL has great functions to get datas the way you'd like to get them without PHP treatment.I've never made any test but i think that file storage is the best way to store your datas if system file sorting is enough to get back your files in alphabetical/numeral order.

MySQL is to greedy for this kind of treatment and uses file system too...If you data will never has to leave your PHP application, I recommend serialize() because it offers a lot of extra functionality like __sleep() and __wakeup() methods for your objects. It also restores objects as instances of the correct classes.If you will pass the serialized data to another application, you should use JSON or XML for compatibility.But storing a serialized objet into a database? Maybe you should think about that again. It can be real trouble later.

SSL error SSL3_GET_SERVER_CERTIFICATE:certificate verify failed

clarkk

[SSL error SSL3_GET_SERVER_CERTIFICATE:certificate verify failed](https://stackoverflow.com/questions/32211301/ssl-error-ssl3-get-server-certificatecertificate-verify-failed)

After upgrading to PHP 5.6 I get an error when trying to connect to a server via fsockopen()..The certificate on the server (host) is self-signedphp.iniBut the script still fails to workThis workserror

2015-08-25 18:19:53Z

After upgrading to PHP 5.6 I get an error when trying to connect to a server via fsockopen()..The certificate on the server (host) is self-signedphp.iniBut the script still fails to workThis workserrorThe file that you downloaded (http://curl.haxx.se/ca/cacert.pem) is a bundle of the root certificates from the major trusted certificate authorities. You said that the remote host has a self-signed SSL certificate, so it didn't use a trusted certificate. The openssl.cafile setting needs to point to the CA certificate that was used to sign the SSL certificate on the remote host. PHP 5.6 has been improved over previous versions of PHP to now verify peer certificates and host names by default (http://php.net/manual/en/migration56.openssl.php)You'll need to locate the CA certificate that was generated on the server that signed the SSL certificate and copy it to this server. The only other option is to disable verifying the peer, but that defeats the SSL security. If you DO want to try disabling verification, try this array with the code from my previous answer:Either way, if you're using self-signed certificates, you'll need to add the CA cert that was used to sign the remote host's SSL certificate to the trusted store on the server you're connecting from OR use stream contexts to use that certificate for each individual request. Adding it to the trusted certificates is the simplest solution. Just add the contents of the remote host's CA cert to the end of the cacert.pem file you downloaded.Previous:fsockopen doesn't support stream contexts, so use stream_socket_client instead. It returns a resource that can be used with all the commands that fsockopen resources can. This should be a drop in replacement for the snippet you have in your question:The problem is in new PHP Version in macOS SierraPlease add I faced a similar issue during work with Ubuntu 16.04 by using Docker. In my case that was a problem with Composer, but error message (and thus the problem) was the same.Because of minimalist Docker-oriented base image I had missing ca-certificates package and simple apt-get install ca-certificates helped me.Add beforeand replacewithFirstable, make sure that you Antivirus software doesn't block SSL2. 

Because I could not solve a problem for a long time and only disabling the antivirus helped meYou mention the certificate is self-signed (by you)? Then you have two choices:Here's a list of SSL context options in PHP:

https://secure.php.net/manual/en/context.ssl.phpSet allow_self_signed if you import your certificate into your trust store, or set verify_peer to false to skip verification.The reason why we trust a specific certificate is because we trust its issuer. Since your certificate is self-signed, no client will trust the certificate as the signer (you) is not trusted. If you created your own CA when signing the certificate, you can add the CA to your trust store. If your certificate doesn't contain any CA, then you can't expect anyone to connect to your server.In my case, I was on CentOS 7 and my php installation was pointing to a certificate that was being generated through update-ca-trust. The symlink was /etc/pki/tls/cert.pem pointing to /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem. This was just a test server and I wanted my self signed cert to work properly. So in my case...Then some of my api calls started working as my cert was now trusted. Also if your ca-trust gets updated through yum or something, this will rebuild your root certificates and still include your self signed cert. Run man update-ca-trust for more info on what to do and how to do it. :)If you are using macOS sierra there is a update in PHP version. you need to have Entrust.net Certificate Authority (2048) file added to the PHP code. more info check accepted answer here Push Notification in PHP using PEM fileHave you tried using the stream_context_set_option() method ?In addition, try file_get_contents() for the pem file, to make sure you have permissions to access it, and make sure the host name matches the certificate.

Composer - The requested package exists as but these are rejected by your constraint

Antoine Bourlart

[Composer - The requested package exists as but these are rejected by your constraint](https://stackoverflow.com/questions/39974833/composer-the-requested-package-exists-as-but-these-are-rejected-by-your-constr)

When I run my install from composer, I have this error : Error :My composer.json

2016-10-11 10:02:54Z

When I run my install from composer, I have this error : Error :My composer.jsonThe version constraint "1.0" is interpreted internally as "1.0.0.0-stable" version.But the only version available is:So you could change the specified version to either one of the following depending on what version is suitable for you:See the composer schema for reference.The comment by @Guillaume below this answer deserves a larger presentation.It seems that composer wants a git release that has a v in it.So it should be v1.1.0 and not 1.1.0.I spent about 90 minutes looking at 

mikeill/my_repo 3.3.10 requires composer/installers 1.0.*@dev -> satisfiable by composer/installers[1.0.x-dev, v1.0.0, ...] but these conflict with your requirements or minimum-stability.

And a lot of github issues as well as an SO post or two before finally discovering this thread.I lost a significant amount of hair, time and sanity over this question for a while - it turned out that the problem in my case was that I was specifying a version in the composer.json within the package itself as "dev-master".Refer to: https://getcomposer.org/doc/04-schema.md#versionWhere it states:(emphasis mine)I removed this version element and it worked perfectly :)I came across this question, and found another issue, which I had completely forgotten about, which someone may find useful to have to check.  In my case I had a very old git project, which had been forked some time back, and I had to merge them together (albeit the forked project hadn't had many changes).  So I identified the split point on the old project, and tagged it as version for composer, so I could use that in place of the new project.  What I had forgotten though, was that originally we didn't use composer.  So the file structure at the tag point was missing composer.json.  I couldn't figure out why my new tags weren't appearing on the 'exists as' list of things which were 'rejected by your contraint'.  Eventually I realised I had to create a branch on the old tag, cherry-pick the commit which created the composer.json for the project, and retag that, and then it all worked.  Hopefully this will jog someones memory, if they come hunting with this error message in mind.  

Is it possible to pass parameters by reference using call_user_func_array()?

Steven Oxley

[Is it possible to pass parameters by reference using call_user_func_array()?](https://stackoverflow.com/questions/295016/is-it-possible-to-pass-parameters-by-reference-using-call-user-func-array)

When using call_user_func_array() I want to pass a parameter by reference.  How would I do this.  For example

2008-11-17 06:43:03Z

When using call_user_func_array() I want to pass a parameter by reference.  How would I do this.  For exampleTo pass by reference using call_user_func_array(), the parameter in the array must be a reference - it does not depend on the function definition whether or not it is passed by reference.  For example, this would work:See the notes on the call_user_func_array() function documentation for more information.Directly, it may be impossible -- however, if you have control both over the function you are implementing and of the code that calls it - then there is one work-around that you might find suitable.Would you be okay with having to embed the variable in question into an object? The code would look (somewhat) like this if you did so.You see, an object variable in PHP is merely a reference to the contents of the object --- so if you pass an object to a function, any changes that the function makes to the content of the object will be reflected in what the calling function has access to as well.Just make sure that the calling function never does an assignment to the object variable itself - or that will cause the function to, basically, lose the reference. Any assignment statement the function makes must be strictly to the contents of the object.This works by double referencing,the original variable is modified when the $parameter variable is modified.Except you are using deprecated functionality here. You'll generate a warning in PHP5 making it less than perfect.Unfortunately, there doesn't appear to be any other option as far as I can discover.

Should I use curly brackets or concatenate variables within strings?

Michael Irigoyen

[Should I use curly brackets or concatenate variables within strings?](https://stackoverflow.com/questions/4676417/should-i-use-curly-brackets-or-concatenate-variables-within-strings)

Is there an advantage or disadvantage to concatenating variables within strings or using curly braces instead?Concatenated:Curly braces:Personally, I've always concatenated my strings, because I use UEStudio, and it highlights PHP variables with a different color when concatenated. However, when the variable is not broken out, it does not. It just makes it easier for my eyes to find PHP variables in long strings, etc.People are confusing this about being about SQL. This is not what this question is about. I've updated my examples to avoid confusion.

2011-01-13 03:07:38Z

Is there an advantage or disadvantage to concatenating variables within strings or using curly braces instead?Concatenated:Curly braces:Personally, I've always concatenated my strings, because I use UEStudio, and it highlights PHP variables with a different color when concatenated. However, when the variable is not broken out, it does not. It just makes it easier for my eyes to find PHP variables in long strings, etc.People are confusing this about being about SQL. This is not what this question is about. I've updated my examples to avoid confusion.All of the following does the same if you look at the output.You should not be using option 1, use option 2 instead. Both option 3 and 4 are the same. For a simple variable, braces are optional. But if you are using array elements, you must use braces; e.g.: $greeting = "Welcome, {$user['name']}!";. Therefore as a standard, braces are used if variable interpolation is used, instead of concatenation.But if characters such as tab (\t), new-line (\n) are used, they must be within double quotations.Generally variable interpolation is slow, but concatenation may also be slower if you have too many variables to concatenate. Therefore decide depending on how many variables among other characters.Although not dealing with injection attacks (including SQLi), it should at least be noted -- especially for PHP devs -- that using any of the above techniques without first encoding and validating all inputs will lead you to an injection-based attack.It is important to remember security at the beginning of coding -- not the end when all of the code needs to be redone to comply with security requirements. Or, when you finally get this dang " vs. ' war down and realize that it doesn't matter because you are susceptible to XSS using either technique without properly encoding and validating all inputs. With pre-comiled PHP (Bytecode Cache) it makes no difference.This feature come with PHP 5.5 (Zend Optimizer+).

Route [login] not defined

inkd

[Route [login] not defined](https://stackoverflow.com/questions/29303783/route-login-not-defined)

Trying to play with Laravel today for the first time. I am getting the following error when I attempt to visit localhost/project/public:app/routes.php:app/controllers/HomeController.php:app/controllers/LoginContoller.php:app/controllers/DashboardController.php:Why am I getting this error?

2015-03-27 15:00:12Z

Trying to play with Laravel today for the first time. I am getting the following error when I attempt to visit localhost/project/public:app/routes.php:app/controllers/HomeController.php:app/controllers/LoginContoller.php:app/controllers/DashboardController.php:Why am I getting this error?You're trying to redirect to a named route whose name is login, but you have no routes with that name:The 'as' portion of the second parameter defines the name of the route. The first string parameter defines its route.In app\Exceptions\Handler.phpLaravel has introduced Named Routes in Laravel 4.2.METHOD 1:METHOD 2:How we use in views?Hence laravel 'middleware'=>'auth' has already predefined for redirect as login page if user has not yet logged in.Hence we should use as keywordYou need to add the following line to your web.php routes file:In case you have custom auth routes, make sure you /login route has 'as' => 'login'Try to add this at Header of your request: Accept=application/json postman or insomnia add headerIn case of API , or let say while implementing JWT . JWT middleware throws this exception when it couldn't find the token and will try to redirect to the log in route.

Since it couldn't find any log in route specified it throws this exception .

You can change the route in "app\Exceptions\Handler.php"use Illuminate\Auth\AuthenticationException;Try this method: look for this file update the following as you would prefer$guard as an arg will take in the name of the custom guard you have set eg. "admin" then it should be like this.I ran into this error recently after using Laravel's built-in authentication routing using php artisan make:auth. When you run that command, these new routes are added to your web.php file:I must have accidentally deleted these routes.  Running php artisan make:auth again restored the routes and solved the problem.  I'm running Laravel 5.5.28.Am late to the party. if your expectation is some sort of json returned other than being redirected, then edit the exception handler so do just that.Go to go to App\Exceptions\Handler.php

Then edit this code:toReplace in your views (blade files) all {{route('/')}}  ----- by ----> {{url('/')}}works very well and it is clean and self-explanatory Laravel ^5.7 includes new middleware to handle and redirect unauthenticated users.It works well with "web" guard... of course the "login" route (or whatever you name your login route) should be defined in web.php.the problem is when your are  using custom guard. Different guard would redirect unauthenticated users to different route.here's a quick workaround based on John's response (it works for me).app/Http/Middleware/Authenticate.phpSource : Issue #26292If someone getting this from a rest client (ex. Postman) - You need to set the Header to Accept application/json. To do this on postman, click on the Headers tab, and add a new key 'Accept' and type the value 'application/json'.**Adding this for the future me.**

I encountered this because I was reusing Laravel's "HomeController", and adding my custom functions to it. Note that this controller calls the auth middleware in its __construct() method as shown below, which means that all functions must be authenticated. No wonder it tries to take you to login page first. So, if you are not using Laravel's authentication scafffolding, you will be in a mess. Disable the constructor, or do as you seem fit, now that you know what is happening.

What is the best practice for adding constants in laravel? (Long List)

Faran Khan

[What is the best practice for adding constants in laravel? (Long List)](https://stackoverflow.com/questions/42155536/what-is-the-best-practice-for-adding-constants-in-laravel-long-list)

I am rather new to laravel. I have a basic question, What is the best way to add constants in laravel. 

I know the .env method that we use to add the constants. 

Also I have made one constants file to use them for my project. 

For example:And so on. It can reach upto 100 or more records. So What should be the best approach to write the constants. The .env method. Or adding the constant.php file?Thanks 

2017-02-10 09:13:26Z

I am rather new to laravel. I have a basic question, What is the best way to add constants in laravel. 

I know the .env method that we use to add the constants. 

Also I have made one constants file to use them for my project. 

For example:And so on. It can reach upto 100 or more records. So What should be the best approach to write the constants. The .env method. Or adding the constant.php file?Thanks For most constants used globally across the application, storing them in config files is sufficient. It is also pretty simpleCreate a new file in the config directory. Let's call it constants.phpIn there you have to return an array of config values.And you can access them as followsI use aliased class constants : First, create your class that contain your constants : App/MyApp.php for exempleThen add it to the aliased classes in the config/app.phpFinally use them wherever you like (controllers or even blades) : Your question was about the 'best practices' and you asked about the '.env method'..env is only for variables that change because the environment changes. Examples of different environments: test, acceptance, production. So the .env contains database credentials, API keys, etc.The .env should (imho) never contain constants which are the same over all environments. Just use the suggested config files for that.First you make Constants folder inside your app directory.And then you make Constants.php. Define your constants in this fileFor Example : And you modify the composer.jsonAlternatively, you can use composer.json to load the bootstrap/constants.php file by adding the following code to the「autoload」section, like so:And update your composer !You can create a file named paths.php in root directory/config/paths.phpInsert this data into paths.phpNote : make sure to run command : php artisan config:clearIn addition to Arun Singh's answer I would recommend you to use helpers.Inside your helper.php you may defineThus instead of you may callAnother way as following:You can define constants at the top of the web.php file located in routes and can be access the constants anywhere in project  with just constant nameor  -And use it like before:You can simply do this:

php checking if the last character is a '/' if not then tack it on

Eli

[php checking if the last character is a '/' if not then tack it on](https://stackoverflow.com/questions/9339619/php-checking-if-the-last-character-is-a-if-not-then-tack-it-on)

I have these 2 snippets of code that I have been playing with, but can't seem to get the logic to stick in either of them.I am trying to see if a given string has a '/' at the end, if not then add it.$path = '.';andthe issue im having is that if i make $path equal to './ then I get this as the output .//this is the snippet of where i am having the issue

2012-02-18 07:55:51Z

I have these 2 snippets of code that I have been playing with, but can't seem to get the logic to stick in either of them.I am trying to see if a given string has a '/' at the end, if not then add it.$path = '.';andthe issue im having is that if i make $path equal to './ then I get this as the output .//this is the snippet of where i am having the issueYou might be overthinking it. While the substr() method will work perfectly it might be simpler to use rtrim() to remove any trailing slashes and then add one on. Caution: this will trim multiple trailing forward slashes. so .////// becomes ./My solution: simple and even converts back slashes, useful for windows developers:You are just using substr wrong. To get the last character you have just use negative offset: substr($path,-1)Your code lacks 2 fundamental things, essential for the programming:Debugging is as simple as just echoing your variables.

by echoing substr($path, 0, -1) you can make yourself aware that your code is somewhat wrong and by reading documentation you can see the right usage. you can try to use this functiontaken from by blog post then use it likeand offcourse if you do not want to use above function to siplify things then you should change the way you are using substrcorrect way to get last char is substr($path,-1)

php - add + 7 days to date format mm dd, YYYY

Michael 

[php - add + 7 days to date format mm dd, YYYY](https://stackoverflow.com/questions/5174789/php-add-7-days-to-date-format-mm-dd-yyyy)

I have date of this format March 3, 2011 in database and I need to extend it with 7 days. I mean

2011-03-02 23:22:56Z

I have date of this format March 3, 2011 in database and I need to extend it with 7 days. I meanAs noted in several blogs, strtotime() solves the "+1 month" ("next month") issue on days that do not exist in the subsequent month differently than other implementations like for example MySQL.Another more recent and object style way to do it :php doc of datetime addecho date('d/m/Y', strtotime('+7 days'));yeson another note, why do you have your date in the database like that?

PHP how to get the base domain/url?

