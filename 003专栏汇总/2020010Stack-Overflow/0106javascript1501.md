I know I'm not supposed to mutate the input and should clone the object to mutate it. I was following the convention used on a redux starter project which used: for adding an item - I get the use of spread to append the item in the array.for deleting I used: but this is mutating the input state object - is this forbidden even though I am returning a new object?

2016-01-03 23:07:16Z

I know I'm not supposed to mutate the input and should clone the object to mutate it. I was following the convention used on a redux starter project which used: for adding an item - I get the use of spread to append the item in the array.for deleting I used: but this is mutating the input state object - is this forbidden even though I am returning a new object?No. Never mutate your state.Even though you're returning a new object, you're still polluting the old object, which you never want to do. This makes it problematic when doing comparisons between the old and the new state. For instance in shouldComponentUpdate which react-redux uses under the hood. It also makes time travel impossible (i.e. undo and redo).Instead, use immutable methods. Always use Array#slice and never Array#splice.I assume from your code that action.payload is the index of the item being removed. A better way would be as follows:You can use the array filter method to remove a specific element from an array without mutating the original state. In the context of your code, it would look something like this:The ES6 Array.prototype.filter method returns a new array with the items that match the criteria. Therefore, in the context of the original question, this would be:Another one variation of the immutable "DELETED" reducer for the array with objects:

How to get an array of unique values from an array containing duplicates in JavaScript? [duplicate]

NaveenDAlmeida

[How to get an array of unique values from an array containing duplicates in JavaScript? [duplicate]](https://stackoverflow.com/questions/13486479/how-to-get-an-array-of-unique-values-from-an-array-containing-duplicates-in-java)

Given a ['0','1','1','2','3','3','3'] array, the result should be ['0','1','2','3'].

2012-11-21 04:44:39Z

Given a ['0','1','1','2','3','3','3'] array, the result should be ['0','1','2','3'].EditedES6 solution:Alternative:Old response. O(n^2) (do not use it with large arrays!)If you want to maintain order:Since there's no built-in reverse indexof, I reverse the array, filter out duplicates, then re-reverse it.The filter function looks for any occurence of the element after the current index (before in the original array). If one is found, it throws out this element.Edit:Alternatively, you could use lastindexOf (if you don't care about order):This will keep unique elements, but only the last occurrence. This means that ['0', '1', '0'] becomes ['1', '0'], not ['0', '1'].Here is an Array Prototype function:With underscorejsIt's 2014 now guys, and time complexity still matters!http://jsperf.com/array-filter-unique/13Not a built in function. If the product list does not contain the item, add it to unique list and return unique list.There you go! You are welcome!You can find all kinds of array unique implementations here: http://jsperf.com/distinct-hash-vs-comparison/12http://jsperf.com/array-unique-functionalI prefer functional styles such as:This will work. Try it.I like to use this. There is nothing wrong with using the for loop, I just like using the build-in functions. You could even pass in a boolean argument for typecast or non typecast matching, which in that case you would use a for loop (the filter() method/function does typecast matching (===))No redundant "return" array, no ECMA5 (I'm pretty sure!) and simple to read.Here is the way you can do remove duplicate values from the Array.Another approach is to use an object for initial storage of the array information.  Then convert back.  For example:Variable "arr" now contains ["0", "1", "2", "3", "4", "5", "6"]Those of you who work with google closure library, have at their disposal goog.array.removeDuplicates, which is the same as unique. It changes the array itself, though.

Retrieve data from a ReadableStream object?

noob

[Retrieve data from a ReadableStream object?](https://stackoverflow.com/questions/40385133/retrieve-data-from-a-readablestream-object)

How may I get information from a ReadableStream object? I am using the Fetch API and I don't see this to be clear from the documentation. The body is being returned as a ReadableStream and I would simply like to access a property within this stream. Under Response in the browser dev tools, I appear to have this information organised into properties, in the form of a JavaScript object. 

2016-11-02 16:35:25Z

How may I get information from a ReadableStream object? I am using the Fetch API and I don't see this to be clear from the documentation. The body is being returned as a ReadableStream and I would simply like to access a property within this stream. Under Response in the browser dev tools, I appear to have this information organised into properties, in the form of a JavaScript object. In order to access the data from a ReadableStream you need to call one of the conversion methods (docs available here).As an example:EDIT: If your data return type is not JSON or you don't want JSON then use text()As an example: Hope this helps clear things up.Some people may find an async example useful:json() converts the response's body from a ReadableStream to a json object.The await statements must be wrapped in an async function, however you can run await statements directly in the console of Chrome (as of version 62).res.json() returns a promise. Try ...Little bit late to the party but had some problems with getting something useful out from a ReadableStream produced from a Odata $batch request using the Sharepoint Framework. Had similar issues as OP, but the solution in my case was to use a different conversion method than .json(). In my case .text() worked like a charm. Some fiddling was however necessary to get some useful JSON from the textfile.If you just want the response as text and don't want to convert it into JSON, use https://developer.mozilla.org/en-US/docs/Web/API/Body/text and then then it to get the actual result of the promise:orI dislike the chaining thens. The second then does not have access to status. As stated before 'response.json()' returns a promise. Returning the then result of 'response.json()' in a acts similar to a second then. It has the added bonus of being in scope of the response.

How to use componentWillMount() in React Hooks?

Abrar

[How to use componentWillMount() in React Hooks?](https://stackoverflow.com/questions/53464595/how-to-use-componentwillmount-in-react-hooks)

In the official docs of React it mentions -  My question is - how can we use the componentWillMount() lifecyle method in a hook?

2018-11-25 04:13:08Z

In the official docs of React it mentions -  My question is - how can we use the componentWillMount() lifecyle method in a hook?You cannot use any of the existing lifecycle methods (componentDidMount, componentDidUpdate, componentWillUnmount etc.) in a hook. They can only be used in class components. And with Hooks you can only use in functional components. The line below comes from the React doc:suggest is, you can mimic these lifecycle method from class component in a functional components.Code inside componentDidMount run once when the component is mounted. useEffect hook equivalent for this behaviour is Notice the second parameter here (empty array). This will run only once.Without the second parameter the useEffect hook will be called on every render of the component which can be dangerous.componentWillUnmount is use for cleanup (like removing event listeners, cancel the timer etc). Say you are adding a event listener in componentDidMount and removing it in componentWillUnmount as below.Hook equivalent of above code will be as followsAccording to reactjs.org, componentWillMount will not be supported in the future.

https://reactjs.org/docs/react-component.html#unsafe_componentwillmountThere is no need to use componentWillMount.If you want to do something before the component mounted, just do it in the constructor().If you want to do network requests, do not do it in componentWillMount. It is because doing this will lead to unexpected bugs. Network requests can be done in componentDidMount.Hope it helps.updated on 08/03/2019The reason why you ask for componentWillMount is probably because you want to initialize the state before renders.Just do it in useState.or maybe You want to run a function in componentWillMount, for example, if your original code looks like this:with hook, all you need to do is to remove the lifecycle method:I just want to add something to the first answer about useEffect.useEffect runs on every render, it is a combination of componentDidUpdate, componentDidMount and ComponentWillUnmount.If we add an empty array in useEffect it runs just when the component mounted. It is because useEffect will compare the array you passed to it.

So it does not have to be an empty array.It can be array that is not changing. For example, it can be [1,2,3] or ['1,2']. useEffect still only runs when component mounted.It depends on you whether you want it to run just once or runs after every render. It is not dangerous if you forgot to add an array as long as you know what you are doing.I created a sample for hook. Please check it out.https://codesandbox.io/s/kw6xj153wrupdated on 21/08/2019It has been a white since I wrote the above answer. There is something that I think you need to pay attention to.

When you use When react compares the values you passed to the array [], it uses Object.is() to compare.

If you pass a object to it, such asThis is exactly the same as:It will re-render every time because when Object.is() compares an object, it compares its reference not the value itself. It is the same as why {}==={} returns false because their references are different.

If you still want to compare the object itself not the reference, you can do something like this:In most cases useComponentDidMount is the tool to use. It will run only once, after component has mounted(initial render). It is important to note that in class components componentWillMount is considered legacy. If you need code to run only once before component has mounted, you can use the constructor. More about it here. Since functional component doesn't have the equivelant of a constructor, using a hook to run code only once before component mounts might make sense in certain cases. You can achieve it with a custom hook. However, there is a pitfall. Don't use it to asynchronously set your state (e.x following a server request. As you might expect it to affect the initial rendering which it won't). Such cases should be handled with useComponentDidMount. Full DemouseLayoutEffect could accomplish this with an empty set of observers ([]) if the functionality is actually similar to componentWillMount -- it will run before the first content gets to the DOM -- though there are actually two updates but they are synchronous before drawing to the screen.for example:The benefit over useState with an initializer/setter or useEffect is though it may compute a render pass, there are no actual re-renders to the DOM that a user will notice, and it is run before the first noticable render, which is not the case for useEffect. The downside is of course a slight delay in your first render since a check/update has to happen before painting to screen. It really does depend on your use-case, though. I think personally, useMemo is fine in some niche cases where you need to do something heavy -- as long as you keep in mind it is the exception vs the norm.I wrote a custom hook that will run a function once before first render.useBeforeFirstRender.jsUsage:https://reactjs.org/docs/hooks-reference.html#usememoThere is a nice workaround to implement componentDidMount and componentWillUnmount with useEffect.Based on the documentation, useEffect can return a "cleanup" function. this function will not be invoked on the first useEffect call, only on subsequent calls.Therefore, if we use the useEffect hook with no dependencies at all, the hook will be called only when the component is mounted and the "cleanup" function is called when the component is unmounted.The cleanup return function call is invoked only when the component is unmounted.Hope this helps.Ben Carp's answer seems like only valid one to me.But since we are using functional ways just another approach can be benefiting from closure and HoC: Then use it :Short answer to your original question, how componentWillMount can be used with React Hooks:componentWillMount is deprecated and considered legacy. React recommendation:Now in the Hook FAQ you find  out, what the equivalent of a class constructor  for function components is:So a usage example of componentWillMount looks like this:

Get local href value from anchor (a) tag

Michael Plautz

[Get local href value from anchor (a) tag](https://stackoverflow.com/questions/15439853/get-local-href-value-from-anchor-a-tag)

I have an anchor tag that has a local href value, and a JavaScript function that uses the href value but directs it to a slightly different place than it would normally go.  The tag looks likeand a JavaScript function that looks likeI would expect that item.href would just return a short string of "sec/IF00.html", but instead it returns the full href, "http://www.thecurrentdomain.com/sec/IF00.html".  Is there a way that I can pull out just the short href as put in the anchor <a> tag?  Or do I lose that by natural HTML behavior?I suppose I could use a string manipulation to do this, but it gets tricky because my local page may actually be "http://www.thecurrentdomain.com/somedir/somepath/sec/IF00.html", and my href field may or may not have a subdirectory in it (for ex href="page.html" vs. href="sub/page.html"), so I cannot always just remove every thing before the last slash.You may wonder why I am requesting this, and it is because it will just make the page a lot cleaner.  If it is not possible to get just the short href (as put in the anchor <a> tag), then I could probably just insert an extra field into the tag, like link="sec/IF00.html", but again, that would be a little messier.

2013-03-15 18:39:23Z

I have an anchor tag that has a local href value, and a JavaScript function that uses the href value but directs it to a slightly different place than it would normally go.  The tag looks likeand a JavaScript function that looks likeI would expect that item.href would just return a short string of "sec/IF00.html", but instead it returns the full href, "http://www.thecurrentdomain.com/sec/IF00.html".  Is there a way that I can pull out just the short href as put in the anchor <a> tag?  Or do I lose that by natural HTML behavior?I suppose I could use a string manipulation to do this, but it gets tricky because my local page may actually be "http://www.thecurrentdomain.com/somedir/somepath/sec/IF00.html", and my href field may or may not have a subdirectory in it (for ex href="page.html" vs. href="sub/page.html"), so I cannot always just remove every thing before the last slash.You may wonder why I am requesting this, and it is because it will just make the page a lot cleaner.  If it is not possible to get just the short href (as put in the anchor <a> tag), then I could probably just insert an extra field into the tag, like link="sec/IF00.html", but again, that would be a little messier.The below code gets the full path, where the anchor points:while the one below gets the value of the href attribute:document.getElementById("link").getAttribute("href");

If you have more than one <a> tag, for example:You can do it like this: document.getElementById("link")[0].getAttribute("href"); to access the first array of <a> tags, or depends on the condition you make.This code works for me to get all links of the document The href property sets or returns the value of the href attribute of a link.Sad to see how many people gave such uncomfortable and inconvenient answers. 

Here is the easiest way to retrieve href:All done in just one line of code. This is flexible and doesn't rely on getting elementId like previous answers.

Syntax highlighting code with Javascript [closed]

mlambie

[Syntax highlighting code with Javascript [closed]](https://stackoverflow.com/questions/160694/syntax-highlighting-code-with-javascript)

What Javascript libraries can you recommend for syntax highlighting <code> blocks in HTML?(One suggestion per answer please).

2008-10-02 02:57:33Z

What Javascript libraries can you recommend for syntax highlighting <code> blocks in HTML?(One suggestion per answer please).StackOverflow uses the Prettify library.I recently developed one called rainbow. The main design goal was to make the core library really small and make it really easy for developers to extend. See http://rainbowco.de.SyntaxHighlighter is available as a GitHub project.jQuery Syntax Highlighter is a new one based on Google's Prettify - a really really really popular plain javascript syntax highlighter.It supports such things as code and pre blocks, able to use classnames like language-javascript to indicate we want it to highlight, as well as wordwrap. You can copy and paste code by selecting it normally instead of having to open a raw view like many others. It can be further customised by using the HTML5 data attribute data-sh or via specifying options at initialisation. A great stable choice which is updated regularly.What about Prism by Lea Verou. From her blog post announcement in June (2012):How about:syntaxhighlighterhighlight.jsJSHighlighterIf you're using jQuery there's Chilli:http://code.google.com/p/jquery-chili-js/All you have to do is include the jquery-chili.js and recipes.js, and do the highlight with It should figure out the language by itself.I'm very happy with SHJS. It supports a bevy of languages and seems pretty fast and accurate.Here's an example where I use it on my blog. I'm using my own custom CSS file that simulates Coda's syntax highlighting. Email me if you'd like to use it.jQuery.Syntax is an extremely fast and lightweight syntax highlighter. It has dynamic loading of syntax source files and integrates cleanly using CSS or modelines.It was developed specifically to fill a gap - that is: a fast, clean, client-side syntax parser.If you are looking for syntax highlighting in an in-browser editor, try CodeMirror.I'm not being argumentative but just thought it worth mentioning that if you're using a CMS or blog platform then using a backend highlighter is better for obvious reasons — Have a look at Geshi(http://qbnz.com/highlighter/) if you're interested. Actually you could set up your server to parse HTML content through a backend technology — so there is no need for the JS highlighters at all. (The only functionality they add is the ability to print/copy[using swf].)SyntaxHighlighterThis article at the Web Resources Depot lists a bunch of options for highlighting code, some of which use Javascript. It was published on 4th May 2009.

ReCaptcha API v2 Styling

jhawes

[ReCaptcha API v2 Styling](https://stackoverflow.com/questions/27713505/recaptcha-api-v2-styling)

I have not had much success finding how to style Google's new recaptcha (v2). The eventual goal is to make it responsive, but I am having difficulty applying styling for even simple things like width.Their API documentation does not appear to give any specifics on how to control styling at all other than the theme parameter, and simple CSS & JavaScript solutions haven't worked for me.Basically, I need to be able to apply CSS to Google's new version of reCaptcha. Using JavaScript with it is acceptable.

2014-12-30 22:28:38Z

I have not had much success finding how to style Google's new recaptcha (v2). The eventual goal is to make it responsive, but I am having difficulty applying styling for even simple things like width.Their API documentation does not appear to give any specifics on how to control styling at all other than the theme parameter, and simple CSS & JavaScript solutions haven't worked for me.Basically, I need to be able to apply CSS to Google's new version of reCaptcha. Using JavaScript with it is acceptable.Sorry to be the answerer of bad news, but after research and debugging, it's pretty clear that there is no way to customize the styling of the new reCAPTCHA controls. The controls are wrapped in an iframe, which prevents the use of CSS to style them, and Same-Origin Policy prevents JavaScript from accessing the contents, ruling out even a hacky solution.Unlike reCAPTCHA API Version 1.0, there are no customize options in API Version 2.0. If we consider how this new API works, it's no surprise why.If you were able to directly manipulate the styling of the control elements, you could easily interfere with the user-profiling logic that makes the new reCAPTCHA possible.Now the new API does offer a theme option, by which you can choose a preset theme such as light and dark. However there is not presently a way to create a custom theme. If we inspect the iframe, we will find the theme name is passed in the query string of the src attribute. This URL looks something like the following.This parameter determines what CSS class name is used on the wrapper element in the iframe and determines the preset theme to use.Digging through the minified source, I found that there are actually 4 valid theme values, which is more than the 2 listed in the documentation, but default and standard are the same as light.We can see the code that selects the class name from this object here.There is no code for a custom theme, and if any other theme value is specified, it will use the standard theme.At present, there is no way to fully style the new reCAPTCHA elements, only the wrapper elements around the iframe can be stylized. This was almost-certainly done intentionally, to prevent users from breaking the user profiling logic that makes the new captcha-free checkbox possible. It is possible that Google could implement a limited custom theme API, perhaps allowing you to choose custom colors for existing elements, but I would not expect Google to implement full CSS styling.As guys mentioned above, there is no way ATM. but still if anyone interested, then by adding in just two lines you can at least make it look reasonable, if it break on any screen. you can assign different value in @media query.Hope this helps anyone :-).Unfortunately we cant style reCaptcha v2, but it is possible to make it look better, here is the code:Click here to previewAdd a data-size property to the google recaptcha element and make it equal to "compact" in case of mobile.Refer: google recaptcha docsWhat you can do is to hide the ReCaptcha Control behind a div. Then make your styling on this div. And set the css "pointer-events: none" on it, so you can click through the div (Click through a DIV to underlying elements).The checkbox should be in a place where the user is clicking.You can recreate recaptcha , wrap it in a container and only let the checkbox visible. My main problem was that I couldn't take the full width so now it expands to the container width. The only problem is the expiration you can see a flick but as soon it happens I reset it.See this demo http://codepen.io/alejandrolechuga/pen/YpmOJXI use below trick to make it responsive and remove borders. this tricks maybe hide recaptcha message/error.This style is for rtl lang but you can change it easy.Just adding a hack-ish solution to make it responsive.Wrap the recaptcha in an extra div:Add styles. This assumes the dark theme.This yields the following:It will now resize horizontally, and doesn't have a border. The recaptcha logo would get cut off on the right, so I am hiding it with a border-right. It's also hiding the privacy and terms links, so you may want to add those back in.I attempted to set a height on the wrapper element, and then vertically center the recaptcha to reduce the height. Unfortunately, any combo of overflow:hidden and a smaller height seems to kill the iframe.in the V2.0 it's not possible. The iframe blocks all styling out of this. It's difficult to add a custom theme instead of the dark or light one.With the integration of the invisible reCAPTCHA you can do the following:Great!

Now here is styling available for reCaptcha..

I just use inline styling like: whatever you wanna to do small customize in inline styling...Hope it will help you!!In case someone struggling with the recaptcha of contact form 7 (wordpress) here is a solution working for me Late to the party, but maybe my solution will help somebody. I haven't found any solution that works on a responsive website when the viewport changes or the layout is fluid.So I've created a jQuery script for django-cms that is dynamically adapting to a changing viewport. 

I'm going to update this response as soon as I have the need for a modern variant of it that is more modular and has no jQuery dependency.

html

css

js

If someone is still interested, there is a simple javascript library (no jQuery dependency), named custom recaptcha. It lets you customize the button with css and implement some js events (ready/checked). The idea is to make the default recaptcha "invisible" and put a button over it. Just change the id of the recaptcha and that's it.See https://azentreprise.org/read.php?id=1 for more information.I am just adding this kind of solution / quick fix so it won't get lost in case of a broken link.  Link to this solution "Want to add link How to resize the Google noCAPTCHA reCAPTCHA | The Geek Goddess" was provided by Vikram Singh Saini and simply outlines that you could use inline CSS to enforce framing of the iframe.You can also choose between a dark or light ReCaptcha theme. 

I used this in one of my Angular 8 AppsYou can use some CSS for Google reCAPTCHA v2 styling on your website:– Change background, color of Google reCAPTCHA v2 widget:or– Resize the Google reCAPTCHA v2 widget by using this snippet:– Responsive your Google reCAPTCHA v2:All elements, property of CSS above that’s just for your reference. You can change them by yourself (only using CSS class selector).Refer on OIW Blog - How To Edit CSS of Google reCAPTCHA (Re-style, Change Position, Resize reCAPTCHA Badge) You can also find out Google reCAPTCHA v3's styling there.

Best way to store JSON in an HTML attribute?

BadHorsie

[Best way to store JSON in an HTML attribute?](https://stackoverflow.com/questions/7322682/best-way-to-store-json-in-an-html-attribute)

I need to put a JSON object into an attribute on an HTML element.EDIT - Example solution using PHP and jQueryWriting the JSON into the HTML attribute:Retrieving the JSON using jQuery:

2011-09-06 15:52:56Z

I need to put a JSON object into an attribute on an HTML element.EDIT - Example solution using PHP and jQueryWriting the JSON into the HTML attribute:Retrieving the JSON using jQuery:Why not? Validation is really easy QA that catches lots of mistakes. Use an HTML 5 data-* attribute.I've not seen any documentation on browser limits to attribute sizes.If you do run into them, then store the data in a <script>. Define an object and map element ids to property names in that object.Just follow the normal rules for including untrusted data in attribute values. Use &amp; and &quot; (if you’re wrapping the attribute value in double quotes) or &#x27; (if you’re wrapping the attribute value in single quotes).Note, however, that that is not JSON (which requires that property names be strings and strings be delimited only with double quotes).Depending on where you put it,For the first two cases (and for old JSON parsers) you should encode U+2028 and U+2029 since those are newline characters in JavaScript even though they are allowed in strings unencoded in JSON.For correctness, you need to escape \ and JSON quote characters and it's never a bad idea to always encode NUL.If the HTML might be served without a content encoding, you should encode + to prevent UTF-7 attacks.In any case, the following escaping table will work:So the JSON string value for the text Hello, <World>! with a newline at the end would be "Hello, \u003cWorld\u003e!\r\n".Another way you can do it – is put json data inside <script> tag, but not with type="text/javascript", but with type="text/bootstrap" or type="text/json" type, to avoid javascript execution.Then, in some place of your program, you can ask for it in this way:On server side, you can do something like this (this example with php and twig):Another option is to base64 encode the JSON string and if you need to use it in your javascript decode it with the atob() function.You can use knockoutjs,knockout.jsOutputFirst name: Jayson

Last name: MonterrosoCheck this:

http://learn.knockoutjs.com/Nothing fancy here. From PHP, give the JSON string a run through htmlspecialchars to make sure no special characters can be interpreted as HTML. From Javascript, no escaping necessary; just set the attribute and you're good to go.What you can do is use  cdata around your element/s like this where mydata is a raw json string. Hope this helps you and others.Another thought that could be used is store the JSON data as a base64 string in the attribute and then using window.atob or window.btoa to restore it to usable JSON data.For simple JSON objects, the code below would work.Encode:Decode:

Webpack 4 - How to configure minimize?

csvan

[Webpack 4 - How to configure minimize?](https://stackoverflow.com/questions/49053215/webpack-4-how-to-configure-minimize)

Webpack 4 comes with the following statement:Fair enough, but I cannot find any information about configuring the UglifyJsPlugin instance running under the hood, for example to change the cache directory. Can this be done?

2018-03-01 15:35:04Z

Webpack 4 comes with the following statement:Fair enough, but I cannot find any information about configuring the UglifyJsPlugin instance running under the hood, for example to change the cache directory. Can this be done?It's not possible to modify the default configuration.You can use the optimization.minimizer setting to instantiate your own UglifyJsPlugin, however. Using 4.0 we used this example to get source maps even when mode is set to 'production' for example (no longer necessary as of 4.1.1):Just run:Reference: Alfonso Pérez answerFor those coming behind me, realized this misleading error was not related to my correct webpack config, but actually, the offline-plugin was out of date and causing this issue. It needed to be upgraded. See github issue: https://github.com/webpack-contrib/uglifyjs-webpack-plugin/issues/234#issuecomment-369134047You can try thiswebpack.config.jswebpack documentationWithout adding uglifyjs-webpack-plugin, you can just add this to the end of your webpack.prod.config.js file:You should check p option: https://webpack.js.org/guides/production/#cli-alternatives : this flag tells Webpack to optimize your build for production environment. You can use it with the new "production" mode for a smaller build.

How to bind function arguments without binding this?

Imbue

[How to bind function arguments without binding this?](https://stackoverflow.com/questions/13851088/how-to-bind-function-arguments-without-binding-this)

In Javascript, how can I bind arguments to a function without binding the this parameter?For example:How can I avoid the side-effect of having to bind the function's scope (e.g. setting this = null) as well?Edit:Sorry for the confusion. I want to bind arguments, then be able to call the bound function later and have it behave exactly as if I called the original function and passed it the bound arguments:I'm still new at this, sorry for the confusion.Thanks!

2012-12-13 00:29:07Z

In Javascript, how can I bind arguments to a function without binding the this parameter?For example:How can I avoid the side-effect of having to bind the function's scope (e.g. setting this = null) as well?Edit:Sorry for the confusion. I want to bind arguments, then be able to call the bound function later and have it behave exactly as if I called the original function and passed it the bound arguments:I'm still new at this, sorry for the confusion.Thanks!You can do this, but best to avoid thinking of it as "binding" since that is the term used for setting the "this" value.  Perhaps think of it as "wrapping" the arguments into a function?What you do is create a function that has the desired arguments built into it via closures:Hope I got the syntax right there.  What it does is create a function called withWrappedArguments() (to be pedantic it is an anonymous function assigned to the variable) that you can call any time any where and will always act with actualArg1Value and actualArg2Value, and anything else you want to put in there.  You can also have it accept further arguments at the time of the call if you want.  The secret is the parentheses after the final closing brace.  These cause the outer function to be immediately executed, with the passed values, and to generate the inner function that can be called later.  The passed values are then frozen at the time the function is generated.This is effectively what bind does, but this way it is explicit that the wrapped arguments are simply closures on local variables, and there is no need to change the behaviour of this.In ES6, this is easily done using rest parameters in conjunction with the spread operator.So we can define a function bindArgs that works like bind, except that only arguments are bound, but not the context (this).Then, for a specified function foo and an object obj, the statementis equivalent towhere only the first and second arguments are bound to bar, while the context obj specified in the invocation is used and extra arguments are appended after the bound arguments. The return value is simply forwarded.In the native bind method the this value in the result function is lost. However, you can easily recode the common shim not to use an argument for the context:One more tiny implementation just for fun:How to use:It's a bit hard to tell exactly what you ultimately want to do because the example is sort of arbitrary, but you may want to look into partials (or currying): http://jsbin.com/ifoqoj/1/editLink to John Resig's article: http://ejohn.org/blog/partial-functions-in-javascript/Use a protagonist!Basically, the function you want to pass params to becomes a proxy which you can call to pass a variable, and it returns the function you actually want to do stuff.Hope this helps!An anonymous user posted this additional info:Well for the exemple you gave, this will doIf you want to guarenty enclosure of the parameters :But if so you should just stick to your solution:It's the better way.More general solution:

Using LoDash you can use the _.partial function.May be you want to bind reference of this in last but your code:-Already applied binding for instance this and later you can not change it.

What I will suggest that use reference also as a parameter like this:-Why not use a wrapper around the function to save this as mythis ?jQuery 1.9 brought exactly that feature with the proxy function.Example:Jquery use case:instead:use this:

How to generate range of numbers from 0 to n in ES2015 only?

Aditya Singh

[How to generate range of numbers from 0 to n in ES2015 only?](https://stackoverflow.com/questions/36947847/how-to-generate-range-of-numbers-from-0-to-n-in-es2015-only)

I have always found the range function missing from JavaScript as it is available in python and others? Is there any concise way to generate range of numbers in ES2015 ?EDIT: MY question is different from the mentioned duplicate as it is specific to ES2015 and not ECMASCRIPT-5. Also I need the range to be starting from 0 and not specific starting number (though it would be good if that is there)

2016-04-29 21:39:18Z

I have always found the range function missing from JavaScript as it is available in python and others? Is there any concise way to generate range of numbers in ES2015 ?EDIT: MY question is different from the mentioned duplicate as it is specific to ES2015 and not ECMASCRIPT-5. Also I need the range to be starting from 0 and not specific starting number (though it would be good if that is there)You can use the spread operator on the keys of a freshly created array.[...Array(n).keys()]orArray.from(Array(n).keys())The Array.from() syntax is necessary if working with TypeScriptI also found one more intuitive way using Array.from:Now this range function will return all the numbers starting from 0 to n-1 A modified version of the range to support start and end is:EDIT

As suggested by @marco6, you can put this as a static method if it suits your use caseand use it asWith DeltaFor javascriptFor TypescriptUpdateEdit For numbers 0 to 5A lot of these solutions build on instantiating real Array objects, which can get the job done for a lot of cases but can't support cases like range(Infinity). You could use a simple generator to avoid these problems and support infinite sequences:Examples:So, in this case, it would be nice if Number object would behave like an Array object with the spread operator.For instance Array object used with the spread operator:It works like this because Array object has a built-in iterator.

In our case, we need a Number object to have a similar functionality:To do that we can simply create Number iterator for that purpose.Now it is possible to create ranges from 0 to N with the spread operator.http://jsfiddle.net/01e4xdv5/4/Cheers.To support deltaYou can use a generator function, which creates the range lazily only when needed:You can use a higher order generator function to map over the range generator:If you are fearless you can even generalize the generator approach to address a much wider range (pun intended):Keep in mind that generators/iterators are inherently stateful that is, there is an implicit state change with each invocation of next. State is a mixed blessing.You can also do it with a one liner with step support like this one:((from, to, step) => ((add, arr, v) => add(arr, v, add))((arr, v, add) => v < to ? add(arr.concat([v]), v + step, add) : arr, [], from))(0, 10, 1)The result is [0, 1, 2, 3, 4, 5, 6 ,7 ,8 ,9].Range with step ES6, that works similar to python list(range(start, stop[, step])):Examples:in TypescriptHere's another variation that doesn't use Array.This function will return an integer sequence.Generators now allow you to generate the number sequence lazily and using less memory for large ranges. While the question specifically states ES2015, I expect a lot of Typescript users will end up here and the conversion to ES is straightforward...The first two function declarations are just to provide more informative completion suggestions in your IDE.

Trees in Twitter Bootstrap [closed]

kumarharsh

[Trees in Twitter Bootstrap [closed]](https://stackoverflow.com/questions/11167628/trees-in-twitter-bootstrap)

I have been trying to work on creating a tree (like a directory tree) that uses as much CSS and as little JS as possible (only for states, etc), and I want to know if there are some good existing tree plugins for bootstrap or jquery-ui bootstrap.For reference or for people confused about this question, I am looking for something like dynatree for bootstrap.

2012-06-23 07:08:04Z

I have been trying to work on creating a tree (like a directory tree) that uses as much CSS and as little JS as possible (only for states, etc), and I want to know if there are some good existing tree plugins for bootstrap or jquery-ui bootstrap.For reference or for people confused about this question, I am looking for something like dynatree for bootstrap.Building on Vitaliy's CSS and Mehmet's jQuery, I  changed the a tags to span tags and incorporated some Glyphicons and badging into my take on a Bootstrap tree widget.Example:

For extra credit, I've created a GitHub project to host the jQuery and LESS code that goes into adding this tree component to Bootstrap. Please see the project documentation at http://jhfrench.github.io/bootstrap-tree/docs/example.html.Alternately, here is the LESS source to generate that CSS (the JS can be picked up from the jsFiddle):You can get more info about this here http://acidmartin.wordpress.com/2011/09/26/css3-treevew-no-javascript/.If someone wants vertical version of the treeview from Harsh's answer, you can save some time:http://jsfiddle.net/Fh47n/ For those still searching for a tree with CSS3, this is a fantastic piece of code I found on the net:http://thecodeplayer.com/walkthrough/css3-family-treePS: apart from the code, I also like the way the site shows it in action... really innovative.If someone wants expandable/collapsible version of the treeview from Vitaliy Bychik's answer, you can save some time :)http://jsfiddle.net/mehmetatas/fXzHS/2/Another great Treeview jquery plugin is http://www.jstree.com/

For an advance view you should check jquery-treetable http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/

Using jQuery how to get click coordinates on the target element

Roman

[Using jQuery how to get click coordinates on the target element](https://stackoverflow.com/questions/3234977/using-jquery-how-to-get-click-coordinates-on-the-target-element)

I have the following event handler for my html elementI need to find the position of the mouse on the #seek-bar at the time of clicking. I would have thought the above code should work, but it gives incorrect result 

2010-07-13 07:26:04Z

I have the following event handler for my html elementI need to find the position of the mouse on the #seek-bar at the time of clicking. I would have thought the above code should work, but it gives incorrect result Are you trying to get the  position of mouse pointer relative to element ( or ) simply the mouse pointer location

Try this Demo : http://jsfiddle.net/AMsK9/1) event.pageX, event.pageY gives you the mouse position relative document !Ref : http://api.jquery.com/event.pageX/

       http://api.jquery.com/event.pageY/2) offset() : It gives the offset position of an elementRef :  http://api.jquery.com/offset/3) position() : It gives you the relative Position of an element i.e.,consider an element is embedded inside another element example : Ref : http://api.jquery.com/position/HTMLJavaScriptTry this:Here you can find more info with DEMOIn percentage :If MouseEvent.offsetX is supported by your browser (all major browsers actually support it),  The jQuery Event object will contain this property.see here enter link description herehtmlcssjquery

How do I do a Date comparison in Javascript? [duplicate]

matt b

[How do I do a Date comparison in Javascript? [duplicate]](https://stackoverflow.com/questions/338463/how-do-i-do-a-date-comparison-in-javascript)

I would like to compare two dates in javascript.  I have been doing some research, but all I can find is how to return the current date.  I want to compare 2 separate dates, not related to today.  How do I do that. 

2008-12-03 19:43:31Z

I would like to compare two dates in javascript.  I have been doing some research, but all I can find is how to return the current date.  I want to compare 2 separate dates, not related to today.  How do I do that. Reference to Date objectJavaScript's dates can be compared using the same comparison operators the rest of the data types use: >, <, <=, >=, ==, !=, ===, !==. If you have two dates A and B, then A < B if A is further back into the past than B.But it sounds like what you're having trouble with is turning a string into a date. You do that by simply passing the string as an argument for a new Date:or, if the string you want is the value of a form field, as it seems it might be:Should that string not be something that JavaScript recognizes as a date, you will still get a Date object, but it will be "invalid". Any comparison with another date will return false. When converted to a string it will become "Invalid Date". Its getTime() function will return NaN, and calling isNaN() on the date itself will return true; that's the easy way to check if a string is a valid date.You can use the getTime() method on a Date object to get the timestamp (in milliseconds) relative to January 1, 1970.  If you convert your two dates into integer timestamps, you can then compare the difference by subtracting them.  The result will be in milliseconds so you just divide by 1000 for seconds, then 60 for minutes, etc.I would rather use the Date valueOf method instead of === or !==Seems like === is comparing internal Object's references and nothing concerning date.You can try this code for checking which date value is the highest from two dates with a format MM/DD/YYYY:/*for checking this....create a form and give id's to two date inputs.The date format should be mm/dd/yyyy or mm-dd-yyyy or mm:dd:yyyy or mm.dd.yyyy like this. */You could try adding the following script code to implement this:

How to change the style of alert box?

Jay

[How to change the style of alert box?](https://stackoverflow.com/questions/7853130/how-to-change-the-style-of-alert-box)

I need to change the style of the "OK" Button in an alert box.

2011-10-21 17:38:18Z

I need to change the style of the "OK" Button in an alert box.The alert box is a system object, and not subject to CSS. To do this style of thing you would need to create an HTML element and mimic the alert() functionality. The jQuery UI Dialogue does a lot of the work for you, working basically as I have described: Link.I tried to use script for   alert() boxes styles using java-script.Here i used those JS and CSS.Refer this coding JS functionality.And CSS for alert() BoxAnd HTML file: And also View this DEMO: JSFIDDLE and DEMO RESULT IMAGEI use SweetAlert, It's Awesome, You will get lots of customization option as well as all callbacksNot possible. If you want to customize the dialog's visual appearance, you need to use a JS-based solution like jQuery.UI dialog.Option1. you can use AlertifyJS , this is good for alertOption2. you start up or just join a project based on webapplications, the design of interface is maybe good. Otherwise this should be changed. In order to Web 2.0 applications you will work with dynamic contents, many effects and other stuff. All these things are fine, but no one thought about to style up the JavaScript alert and confirm boxes.

Here is the they way    create simple js file name jsConfirmStyle.js. Here is simple js codeCreate simple html file

    One option is to use altertify, this gives a nice looking alert box.Simply include the required libraries from here, and use the following piece of code to display the alert box.The output will look like this. To see it in action here is the demoYou need to create your own alert box like this:The js portion gets the element in the HTML to create the alert box, then deletes it after the user clicks ok.You can call the alert using jAlert("Custom Text", "Ok!");I know this is an older post but I was looking for something similar this morning.

I feel that my solution was much simpler after looking over some of the other solutions. 

One thing is that I use font awesome in the anchor tag.I wanted to display an event on my calendar when the user clicked the event. So I coded a separate <div> tag like so:I find it easier to use class names in my jquery since I am using asp.net.Below is the jquery for my fullcalendar app.You must have your own google calendar id and api keys.I hope this helps when you need a simple popup display.Styling alert()-boxes ist not possible. You could use a javascript modal overlay instead.I don't think you could change the style of browsers' default alert boxes. You need to create your own or use a simple and customizable library like xdialog. Following is a example to customize the alert box. More demos can be found here.I use sweetalert2 library. It's really simple, a lot of customization, modern, animated windows, eye-catching, and also nice design. Check this linkI use AlertifyJS to style my dialogues.

Change text color based on brightness of the covered background area?

James Cazzetta

[Change text color based on brightness of the covered background area?](https://stackoverflow.com/questions/11867545/change-text-color-based-on-brightness-of-the-covered-background-area)

I've thought about the following for a while already, so now I want to know your opinions, possible solutions, and so on.I am looking for a plugin or technique that changes a text's color or switches between predefined images/icons depending on the average brightness of the covered pixels of it's parent's background-image or -color.If the covered area of it's background is rather dark, make the text white or switch the icons. Additionally, it'd be great if the script would notice if the parent has no defined background-color or -image and then continue to search for the most nearest (from parent element to it's parent element..).What do you think, know about this idea? Is there something similar out there already? script-examples?Cheers, J.

2012-08-08 15:08:05Z

I've thought about the following for a while already, so now I want to know your opinions, possible solutions, and so on.I am looking for a plugin or technique that changes a text's color or switches between predefined images/icons depending on the average brightness of the covered pixels of it's parent's background-image or -color.If the covered area of it's background is rather dark, make the text white or switch the icons. Additionally, it'd be great if the script would notice if the parent has no defined background-color or -image and then continue to search for the most nearest (from parent element to it's parent element..).What do you think, know about this idea? Is there something similar out there already? script-examples?Cheers, J.Interesting resources for this:Here's the W3C algorithm (with JSFiddle demo too):This article on 24 ways about Calculating Color Contrast might be of interest to you. Ignore the first set of functions because they're wrong, but the YIQ formula will help you determine whether or not to use a light or dark foreground color.Once you obtain the element's (or ancestor's) background color, you can use this function from the article to determine a suitable foreground color:Interesting question. My immediate thought was to invert the color of the background as the text. This involves simply parsing the background and inverting its RGB value.Something like this: http://jsfiddle.net/2VTnZ/2/mix-blend-mode does the trick:Addition (March 2018):

Following, a nice tutorial explaining all different types of modes/implementations: https://css-tricks.com/css-techniques-and-effects-for-knockout-text/I've found the BackgroundCheck script to be very useful.It detects the overal brightness of the background (be it a background image or a color), and applies a class to the assigned text-element (background--light or background--dark), dependent on the brightness of the background.It can be applied to still and moving elements.(Source)If you are using ES6, convert hex to RGB then can use this:Here's my attempt:Then to use it:This will straight away, make the text either black or white as appropriate. To do the icons:Then each icon could look like 'save' + iconSuffix + '.jpg'.Note that this won't work where any container overflows its parent (for example, if the CSS height is 0, and overflow isn't hidden). To get that working would be a lot more complex.

Check whether HTML element has scrollbars

Robert Koritnik

[Check whether HTML element has scrollbars](https://stackoverflow.com/questions/4880381/check-whether-html-element-has-scrollbars)

What's the fastest way of checking whether an element has scroll bars?One thing of course is checking whether element is larger than its viewport, which can easily be done by checking these two values:but that doesn't mean that it has scrollbars as well (so it can actually be scrolled by humans).How do I check for scrollbars in a 1 cross browser and 2 javascript only (as in no jQuery) way?Javascript only, because I need as small overhead as possible, because I'd like to write a very fast jQuery selector filterI suppose I'd have to check for overflow style settings but how do I do that in a cross browser way?Not only overflow style settings. Checking whether an element has a scrollbar isn't as trivial as it seems. The first formula I've written above works fine when element doesn't have a border, but when it does (especially when border is of considerable width), offset dimension can be larger than scroll dimension but the element can still be scrollable. We actually have to subtract borders from offset dimension to get the actual scrollable viewport of the element and compare that to scroll dimension.:scrollable jQuery selector filter is included in my .scrollintoview() jQuery plugin. Complete code can be found in my blog post if anybody needs it. Even though it didn't provide the actual solution Soumya's code considerably helped me solve the problem. It pointed me in the right direction.

2011-02-02 21:59:25Z

What's the fastest way of checking whether an element has scroll bars?One thing of course is checking whether element is larger than its viewport, which can easily be done by checking these two values:but that doesn't mean that it has scrollbars as well (so it can actually be scrolled by humans).How do I check for scrollbars in a 1 cross browser and 2 javascript only (as in no jQuery) way?Javascript only, because I need as small overhead as possible, because I'd like to write a very fast jQuery selector filterI suppose I'd have to check for overflow style settings but how do I do that in a cross browser way?Not only overflow style settings. Checking whether an element has a scrollbar isn't as trivial as it seems. The first formula I've written above works fine when element doesn't have a border, but when it does (especially when border is of considerable width), offset dimension can be larger than scroll dimension but the element can still be scrollable. We actually have to subtract borders from offset dimension to get the actual scrollable viewport of the element and compare that to scroll dimension.:scrollable jQuery selector filter is included in my .scrollintoview() jQuery plugin. Complete code can be found in my blog post if anybody needs it. Even though it didn't provide the actual solution Soumya's code considerably helped me solve the problem. It pointed me in the right direction.I found this somewhere a couple of weeks ago. It worked for me.Try:For vertical scroll bar For horizontal scrollbarI know this works for IE8 and Firefox 3.6+ at least.This may seem (or be) a little hackish, but you could test the scrollTop and scrollLeft properties.If they're greater than 0, you know there are scrollbars. If they're 0, then set them to 1, and test them again to see if you get a result of 1. Then set them back to 0.Example: http://jsfiddle.net/MxpR6/1/I believe there's a different property for IE, so I'll update in a minute with that.EDIT: Appears as though IE may support this property. (I can't test IE right now.)http://msdn.microsoft.com/en-us/library/ms534618(VS.85).aspxHere is yet another solution:As a few people pointed out, simply comparing offsetHeight and scrollHeight is not enough since they differ on elements with overflow hidden, etc., that still don't have scrollbars. So here I'm also checking if overflow is scroll or auto on the computed styles for the element:I maybe a little late to the party, but...I believe you can detect for scrollbars with e.offsetWidth vs. e.clientWidth. Offset width includes borders and scrollbars, padding and width. Client width includes padding and width. Please see:https://developer.mozilla.org/en/DOM/element.offsetWidth (second image)

https://developer.mozilla.org/en/DOM/element.clientWidth (second image)You need to check:Do the same for the vertical (offset/clientHeight).IE7 reports a clientHeight of 0 for some elements (I haven't checked why), therefore you always need the first overflow check.Hope this helps!There are several problems in case of checking the existence of scrollbars one of which is that in mac you don't have any visible scrollbar so both all the solutions above wouldn't give you an accurate answer.So because the browser's rendering isn't very frequent you can check the having scroll with changing scroll and then setting it back:Just messing around here as none of the above solutions worked out for me (so far).

I have found some success with comparing a Div's scrollheight against its offsetHeightIt seems to give me an acurate comparison...so far. Does someone know if this is legitimate?For IE11 (Internet Explorer 11) I had to change the logic to:This is because IE reports scrollHeight as 1 larger than clientHeight when no scrollbar is present but approx 9 larger when a scrollbar is presentnone of this answers are correct. you have to use this :Add an 100% wide element inside it. Then set overflow to hidden. If the element's computed style (from jQ) changes, the parent had a scrollbar.EDIT: It seems you want a cross browser method like getComputedStyle. Try:

Javascript AES encryption [closed]

coder

[Javascript AES encryption [closed]](https://stackoverflow.com/questions/793812/javascript-aes-encryption)

Is there a library available for AES 256-bits encryption in Javascript?

2009-04-27 14:40:00Z

Is there a library available for AES 256-bits encryption in Javascript?JSAES is a powerful implementation of AES in JavaScript.

http://point-at-infinity.org/jsaes/Here's a demonstration page that uses slowAES. slowAES was easy to use. Logically designed.  Reasonable OO packaging.  Supports knobs and levers like IV and Encryption mode.  Good compatibility with .NET/C#.  The name is tongue-in-cheek; it's called "slow AES" because it's not implemented in C++.  But in my tests it was not impractically slow.It lacks an ECB mode. Also lacks a CTR mode, although you could build one pretty easily given an ECB mode, I guess.It is solely focused on encryption. A nice complementary class that does RFC2898-compliant password-based key derivation, in Javascript, is available from Anandam.  This pair of libraries works well with the analogous .NET classes.  Good interop. Though, in contrast to SlowAES, the Javascript PBKDF2 is noticeably slower than the Rfc2898DeriveBytes class when generating keys.  It's not surprising that technically there is good interop, but the key point for me was the model adopted by SlowAES is familiar and easy to use. I found some of the other Javascript libraries for AES to be hard to understand and use.  For example, in some of them I couldn't find the place to set the IV, or the mode (CBC, ECB, etc).  Things were not where I expected them to be.   SlowAES was not like that. The properties were right where I expected them to be. It was easy for me to pick up, having been familiar with the Java and .NET crypto programming models.Anandam's PBKDF2 was not quite on that level. It supported only a single call to DeriveBytes function, so if you need to derive both a key and an IV from a password, this library won't work, unchanged.  Some slight modification, and it is working just fine for that purpose.  EDIT: I put together an example of packaging SlowAES and a modified version of Anandam's PBKDF2 into Windows Script Components.  Using this AES with a password-derived key shows good interop with the .NET RijndaelManaged class. EDIT2: the demo page shows how to use this AES encryption from a web page.  Using the same inputs (iv, key, mode, etc) supported in .NET gives you good interop with the .NET Rijndael class. You can do a "view source" to get the javascript for that page.EDIT3

a late addition: Javascript Cryptography considered harmful. Worth the read.In my searches for AES encryption i found this from some Standford students.  Claims to be fastest out there. Supports CCM, OCB, GCM and Block encryption.

http://crypto.stanford.edu/sjcl/Googling "JavaScript AES" has found several examples. The first one that popped up is designed to explain the algorithm as well as provide a solution:Movable Type Scripts: AESThis post is now old, but the crypto-js, may be now the most complete javascript encryption library.CryptoJS is a collection of cryptographic algorithms implemented in JavaScript. 

It includes the following cyphers: AES-128, AES-192, AES-256, DES, Triple DES, Rabbit, RC4, RC4Drop and hashers: MD5, RIPEMD-160, SHA-1, SHA-256, SHA-512, SHA-3 with 224, 256, 384, or 512 bits. You may want to look at their Quick-start Guide which is also the reference for the following node.js port.node-cryptojs-aes is a node.js port of crypto-jsRecently I had the need to perform some encryption/decryption interoperability between javascript and python.Specifically... 1) Using AES to encrypt in javascript and decrypt in python (Google App Engine)

2) Using RSA to encrypt in javascript and decrypt in python (Google App Engine)

3) Using pycryptoI found lots and lots of different versions of RSA and AES floating around the web and 

they were all different in their approach but I did not find a good example of end to end javascript and python interoperability.Eventually I managed to cobble together something that suited my needs after a lot of trial and error.Anyhow I knocked up an example of a js/webapp talking to a google app engine hosted python server that uses AES and public key and private key RSA stuff.I though I'd include it here by link in case it will be of some use to others who need to accomplish the same thing.http://www.ipowow.com/files/aesrsademo.tar.gzand see demo at rsa-aes-demo DOT appspot DOT comedit: look at the browser console output and also view source to get some hints and useful messages as to what's going on in the demoedit: updated very old and defunct link to source to now point tohttps://sestertii.com/files/aesrsademo.tar.gzJudging from my own experience, asmcrypto.js provides the fastest AES implementation in JavaScript (especially in Firefox since it can fully leverage asm.js there).From the readme:Edit: The Web Cryptography API is now implemented in most browsers and should be used as the primary solution if you care about performance. Be aware that IE11 implemented an earlier draft version of the standard which did not use promises.Some examples can be found here:Try asmcrypto.js — it's really fast.PS: I'm an author and I can answer your questions if any.

Also I'd be glad to get some feedback :)Use CryptoJSHere's the code:

https://github.com/odedhb/AES-encryptAnd here's an online working example:

https://odedhb.github.io/AES-encrypt/http://www.movable-type.co.uk/scripts/aes.html library may be of some help.http://www.movable-type.co.uk/scripts/aes.htmlIf you are trying to use javascript to avoid using SSL, think again. There are many half-way measures, but only SSL provides secure communication. Javascript encryption libraries can help against a certain set of attacks, but not a true man-in-the-middle attack.If you are looking for SSL for google app engine on a custom domain, take a look at wwwizer.com.The following post explains how to create attempt secure communication with javascript and how to get it wrong:

Use JavaScript encryption module instead of SSL/HTTPSThere is also a Stanford free lib as an alternative to Cryptojshttp://crypto.stanford.edu/sjcl/Another solution w/AES-256 support: https://github.com/digitalbazaar/forgeHere is the only solution that worked for me:http://www.hanewin.net/encrypt/aes/aes.htmIt's pretty basic, but simple to use and seems to work well.

Chrome/jQuery Uncaught RangeError: Maximum call stack size exceeded

Andy

[Chrome/jQuery Uncaught RangeError: Maximum call stack size exceeded](https://stackoverflow.com/questions/7658775/chrome-jquery-uncaught-rangeerror-maximum-call-stack-size-exceeded)

I am getting the error "Uncaught RangeError: Maximum call stack size exceeded" on chrome. here is my jQuery functionNote that there are tens of thousands of cells in the page. However, I generally associate stack overflows with recursion and in this case as far as I can see there is none.Does creating a lambda like this automatically generate a load of stuff on the stack? is there any way round it?At the moment the only workaround I have is to generate the onclick events explicitly on each cell when rendering the HTML, which makes the HTML much larger.

2011-10-05 08:48:06Z

I am getting the error "Uncaught RangeError: Maximum call stack size exceeded" on chrome. here is my jQuery functionNote that there are tens of thousands of cells in the page. However, I generally associate stack overflows with recursion and in this case as far as I can see there is none.Does creating a lambda like this automatically generate a load of stuff on the stack? is there any way round it?At the moment the only workaround I have is to generate the onclick events explicitly on each cell when rendering the HTML, which makes the HTML much larger.As "there are tens of thousands of cells in the page" binding the click-event to every single cell will cause a terrible performance problem. There's a better way to do this, that is binding a click event to the body & then finding out if the cell element was the target of the click. Like this:This method will not only do your task with native "td" tag but also with later appended "td". I think you'll be interested in this article about event binding & delegateOr you can simply use the ".on()" method of jQuery with the same effect:You can also get this error when you have an infinite loop.  Make sure that you don't have any unending, recursive self references.Mine was more of a mistake, what happened was loop click(i guess) basically by clicking on the login the parent was also clicked which ended up causing Maximum call stack size exceeded.  This problem happened with me when I used jQUery Fancybox inside a website with many others jQuery plugins.

When I used the LightBox (site here) instead of Fancybox, the problem is gone.U can useI recently just ran into this issue as well.  I had a very large table in the dialog div.  It was >15,000 rows.  When the .empty() was called on the dialog div, I was getting the error above.I found a round-about solution where before I call cleaning the dialog box, I would remove every other row from the very large table, then call the .empty().  It seemed to have worked though.  It seems that my old version of JQuery can't handle such large elements.

Javascript split regex question

Craig

[Javascript split regex question](https://stackoverflow.com/questions/3559883/javascript-split-regex-question)

hello I am trying what I thought would be a rather easy regex in Javascript but is giving me lots of trouble. 

I want the ability to split a date via javascript splitting either by a '-','.','/' and ' '.What is the correct regex for this any and all help would be great. 

2010-08-24 18:44:13Z

hello I am trying what I thought would be a rather easy regex in Javascript but is giving me lots of trouble. 

I want the ability to split a date via javascript splitting either by a '-','.','/' and ' '.What is the correct regex for this any and all help would be great. You need the put the characters you wish to split on in a character class, which tells the regular expression engine "any of these characters is a match". For your purposes, this would look like:Although dashes have special meaning in character classes as a range specifier (ie [a-z] means the same as [abcdefghijklmnopqrstuvwxyz]), if you put it as the last thing in the class it is taken to mean a literal dash and does not need to be escaped.To explain why your pattern didn't work, /-./ tells the regular expression engine to match a literal dash character followed by any character (dots are wildcard characters in regular expressions). With "02-25-2010", it would split each time "-2" is encountered, because the dash matches and the dot matches "2".or just (anything but numbers):you could just use orThen split it on anything but numbers:Say your string is:You want to split the string by the following delimiters:You could split the string like this:Finally, you may need to trim the elements in the array:or just use for date strings 2015-05-20 or 2015.05.20try this insteaddate.split(/\W+/)

What are the differences between JSON and JavaScript object? [duplicate]

Pheap

[What are the differences between JSON and JavaScript object? [duplicate]](https://stackoverflow.com/questions/3975859/what-are-the-differences-between-json-and-javascript-object)

I am new to JSON and JavaScript objects.

2010-10-20 08:08:36Z

I am new to JSON and JavaScript objects.First you should know what JSON is:The syntax of JSON was inspired by the JavaScript Object Literal notation, but there are differences between them.For example, in JSON all keys must be quoted, while in object literals this is not necessary:The quotes are mandatory on JSON because in JavaScript (more exactly in ECMAScript 3rd. Edition), the usage of reserved words as property names is disallowed, for example:While, using a string literal as a property name (quoting the property name) gives no problems:So for "compatibility" (and easy eval'ing maybe?) the quotes are mandatory.The data types in JSON are also restricted to the following values:The grammar of Strings changes. They have to be delimited by double quotes, while in JavaScript, you can use single or double quotes interchangeably.The accepted JSON grammar of Numbers also changes, in JavaScript you can use Hexadecimal Literals, for example 0xFF, or (the infamous) Octal Literals e.g. 010. In JSON you can use only Decimal Literals.There are some buggy implementations (Firefox 3.5+, IE8+, json2.js) where octal literals are wrongly allowed, e.g. JSON.parse('01') should produce a SyntaxError.JSON is a string representation of an object. It is an interoperable serialization format. It is not tied only to javascript. For example there are JSON serializers for .NET allowing you to serialize/deserialize .NET objects. So it's just a format allowing you to convert from objects to string and back which is convenient if you want to transfer them over the wire.It is very close to javascript object representation and if you simply eval() a JSON string you will get the corresponding object.JSON is a data interchange format, which just happens to look like a subset of YAML or JavaScript code you can execute and get an object back. A JavaScript object is just an object in JavaScript.With JSON being a data interchange format you can exchange structured data in a textual form with it. It is pretty decoupled from JavaScript by now. JavaScript object allow you to create and work with structured data during the execution of a JavaScript program.

Google Maps: Auto close open InfoWindows?

Ted

[Google Maps: Auto close open InfoWindows?](https://stackoverflow.com/questions/2223574/google-maps-auto-close-open-infowindows)

On my site, I'm using Google Maps API v3 to place house markers on the map.The InfoWindows stay open unless you explicitly click the close icon. Meaning, you can have 2+ InfoWindows open at a time if you hover over the map marker.Question: How do I make it so that only the current active InfoWindow is open and all other InfoWindows are closed? Meaning, no more than 1 InfoWindow will be open at a time?

2010-02-08 17:37:55Z

On my site, I'm using Google Maps API v3 to place house markers on the map.The InfoWindows stay open unless you explicitly click the close icon. Meaning, you can have 2+ InfoWindows open at a time if you hover over the map marker.Question: How do I make it so that only the current active InfoWindow is open and all other InfoWindows are closed? Meaning, no more than 1 InfoWindow will be open at a time?There is a close() function for InfoWindows.  Just keep track of the last opened window, and call the close function on it when a new window is created.This demo has the functionality you're looking for.  I found it in the Maps API V3 demo gallery.alternative solution for this with using many infowindows:

save prev opened infowindow in a variable and then close it when new window openedThis will "move" the info window around to each clicked marker, in effect closing itself, then reopening (and panning to fit the viewport) in its new location. It changes its contents before opening to give the desired effect. Works for n markers.My solution.From this link http://www.svennerberg.com/2009/09/google-maps-api-3-infowindows/:There is a easier way besides using the close() function. if you create a variable with the InfoWindow property it closes automatically when you open another. How about -    Then you can just hover over it and it will close itself. I stored a variable at the top to keep track of which info window is currently open, see below.

Can mustache iterate a top-level array?

greim

[Can mustache iterate a top-level array?](https://stackoverflow.com/questions/6516297/can-mustache-iterate-a-top-level-array)

My object looks like this:And I want to use a mustache template to produce from it something like this:But how? Do I really have to munge it into something like this first?

2011-06-29 05:53:55Z

My object looks like this:And I want to use a mustache template to produce from it something like this:But how? Do I really have to munge it into something like this first?You can do it like this...It also works for things like this...I had the same problem this morning and after a little experimentation I discovered you can use the {{.}} to refer to the current element of an array:Building on @danjordan's answer, this will do what you want:returning:Following are the examples to render multi-dimensional array in a template: Example 1Example 2For test run, save above examples in file called 'test.js', run following command in commandlineI don't think mustache can do this!  (surprisingly)

You can iterate over a list of objects, and then access the attributes of each object, but you can't seem to iterate over a simple list of values!So, you have to transform your list into:and then your template would be:To me, this seems like a severe problem with Mustache -- any template system should be able to loop over a list of simple values!

How to convert a plain object into an ES6 Map?

callum

[How to convert a plain object into an ES6 Map?](https://stackoverflow.com/questions/36644438/how-to-convert-a-plain-object-into-an-es6-map)

For some reason I can't find this simple thing in the MDN docs (maybe I'm just missing it).I expected this to work:...but the first line throws TypeError: (var)[Symbol.iterator] is not a functionHow do I make a Map from a plain object? Do I really have to first convert it into an array of arrays of key-value pairs?

2016-04-15 10:18:23Z

For some reason I can't find this simple thing in the MDN docs (maybe I'm just missing it).I expected this to work:...but the first line throws TypeError: (var)[Symbol.iterator] is not a functionHow do I make a Map from a plain object? Do I really have to first convert it into an array of arrays of key-value pairs?Yes, the Map constructor takes an array of key-value pairs.Object.entries is a new Object static method available in ES2017 (19.1.2.5).It's currently implemented in Firefox 46+ and Edge 14+ and newer versions of ChromeIf you need to support older environments and transpilation is not an option for you, use a polyfill, such as the one recommended by georg:Please see nils' answer using Object.entries and/or bergi's answer using a generator function. Although Object.entries wasn't in the spec yet when the question was asked, it was at Stage 4, so  safe to polyfill and use on even back in April 2016 (just). (More on the stages here.) And generator functions were in ES2015. The OP specifically asked to avoid intermediaries, and while the generator doesn't completely avoid that, it does a better job than the below or (slightly) Object.enties.FWIW, using Object.entries:Using the generator:So: One fewer intermediary (the array from Object.entries).However, using Object.entries is simpler and creating that array isn't an issue 99.999% of the time. So really, either one. But they're both better than the below. :-)Original answer:To initialize a Map, you can use any iterator that returns key/value pairs as arrays, such as an array of arrays:There's no built-in conversion from object to map, but it's easily done with Object.keys:You can, of course, give yourself a worker function to handle that:ThenOr here's a more l33t-looking (is that still a thing?) version:(Yes, Map#set returns the map reference. Some would argue this is an abusage of reduce.)Or we can really go over-the-top on obscurity:No, I would never do that for real. :-)No, an iterator of key-value pair arrays is enough. You can use the following to avoid creating the intermediate array:The answer by Nils describes how to convert objects to maps, which I found very useful. However, the OP was also wondering where this information is in the MDN docs. While it may not have been there when the question was originally asked, it is now on the MDN page for Object.entries() under the heading Converting an Object to a Map which states:Alternatively you can use the lodash toPairs method:ES6convert object to map:convert map to object:Note: the mapToObj function assumes map keys are strings (will fail otherwise)With the help of some JQuery, 

jQuery convert line breaks to br (nl2br equivalent)

gbhall

[jQuery convert line breaks to br (nl2br equivalent)](https://stackoverflow.com/questions/2919337/jquery-convert-line-breaks-to-br-nl2br-equivalent)

I'm having jQuery take some textarea content and insert it into an li.I want it to visually retain the line breaks.There must be a really simple way to do this...

2010-05-27 07:51:33Z

I'm having jQuery take some textarea content and insert it into an li.I want it to visually retain the line breaks.There must be a really simple way to do this...you can simply do:Put this in your code (preferably in a general js functions library):Usage:creating a string prototype function allows you to use this on any string.In the spirit of changing the rendering instead of changing the content, the following CSS makes each newline behave like a <br>:Why two rules: pre-line only affects newlines (thanks for the clue, @KevinPauli). IE6-7 and other old browsers fall back to the more extreme pre which also includes nowrap and renders multiple spaces. Details on these and other settings (pre-wrap) at mozilla and css-tricks (thanks @Sablefoste).While I'm generally averse to the S.O. predilection for second-guessing the question rather than answering it, in this case replacing newlines with <br> markup may increase vulnerability to injection attack with unwashed user input.  You're crossing a bright red line whenever you find yourself changing .text() calls to .html() which the literal question implies would have to be done.  (Thanks @AlexS for highlighting this point.)  Even if you rule out a security risk at the time, future changes could unwittingly introduce it.  Instead, this CSS allows you to get hard line breaks without markup using the safer .text().SolutionUse this codeThis JavaScript function considers whether to use insert or replace to handle the swap. (Insert or replace HTML line breaks)Demo - JSFiddleI wrote a little jQuery extension for this:to improve @Luca Filosofi's accepted answer,if needed, changing the beginning clause of this regex to be /([^>[\s]?\r\n]?) will also ingore the cases where the newline comes after a tag AND some whitespace, instead of just a tag immediately followed by a newlineAnother way to insert text from a textarea in the DOM keeping the line breaks is to use the Node.innerText property that represents the rendered text content of a node and its descendants.As a getter, it approximates the text the user would get if they highlighted the contents of the element with the cursor and then copied to the clipboard.The property became standard in 2016 and is well supported by modern browsers. Can I Use: 97% global coverage when I posted this answer.

AngularJS HTTP post to PHP and undefined

Ronnie

[AngularJS HTTP post to PHP and undefined](https://stackoverflow.com/questions/15485354/angularjs-http-post-to-php-and-undefined)

I have a form with the tag ng-submit="login()The function gets called fine in javascript.I am getting a 200 OK response back from the PHP file, however, the returned data is saying that email and password are undefined. This is all the php I haveAny idea why I am getting undefined POST values?EDITI wanted to point out since this seems to be a popular question (yet it is old), .success and .error have been deprecated and you should use .then as @James Gentes pointed out in the commments

2013-03-18 19:35:06Z

I have a form with the tag ng-submit="login()The function gets called fine in javascript.I am getting a 200 OK response back from the PHP file, however, the returned data is saying that email and password are undefined. This is all the php I haveAny idea why I am getting undefined POST values?EDITI wanted to point out since this seems to be a popular question (yet it is old), .success and .error have been deprecated and you should use .then as @James Gentes pointed out in the commmentsangularjs .post() defaults the Content-type header to application/json. You are overriding this to pass form-encoded data, however you are not changing your data value to pass an appropriate query string, so PHP is not populating $_POST as you expect.My suggestion would be to just use the default angularjs setting of application/json as header, read the raw input in PHP, and then deserialize the JSON.That can be achieved in PHP like this:Alternately, if you are heavily relying on $_POST functionality, you can form a query string like email=someemail@email.com&password=somepassword and send that as data. Make sure that this query string is URL encoded. If manually built (as opposed to using something like jQuery.serialize()), Javascript's encodeURIComponent() should do the trick for you.I do it on the server side, at the begining of my init file, works like a charm and you don't have to do anything in angular or existing php code:In the API I am developing I have a base controller and inside its __construct() method I have the following:This allows me to simply reference the json data as $_POST["var"] when needed. Works great. That way if an authenticated user connects with a library such a jQuery that sends post data with a default of Content-Type: application/x-www-form-urlencoded or Content-Type: application/json the API will respond without error and will make the API a little more developer friendly.Hope this helps.Because PHP does not natively accept JSON 'application/json' One approach is to update your headers and parameters from angular so that your api can use the data directly. First, Parameterize your data:Then, add the following to your $httpIf all of your requests are going to PHP the parameters can be set globaly in the configuration as follows:Angular Js Demo Code :- Server Side Code :-Due to angular behaviour there is no direct method for normal post behaviour at PHP server, so you have to manage it in json objects.You need to deserialize your form data before passing it as the second parameter to .post (). You can achieve this using jQuery's  $.param (data) method.

Then you will be able to on server side to reference it like $.POST ['email'];This is the best solution (IMO) as it requires no jQuery and no JSON decode: Source:

https://wordpress.stackexchange.com/a/179373

and: https://stackoverflow.com/a/1714899/196507Summary:Example:PHP code:It's an old question but it worth to mention that in Angular 1.4 $httpParamSerializer is added and when using $http.post, if we use $httpParamSerializer(params) to pass the parameters, everything works like a regular post request and no JSON deserializing is needed on server side.https://docs.angularjs.org/api/ng/service/$httpParamSerializerIt took me hours to understand that while working with Angular and PHP.

Post data was not going to PHP in $_POSTin PHP code do the following. 

- Create a variable $angular_post_params

- Then do the following 

$angular_http_params = (array)json_decode(trim(file_get_contents('php://input')));now you can access your parameters like you do from $_POST$angular_http_params["key"]in case you were wondering about javascript....this is what i used

What is the current state of the art in HTML canvas JavaScript libraries and frameworks? [closed]

Toby Hede

[What is the current state of the art in HTML canvas JavaScript libraries and frameworks? [closed]](https://stackoverflow.com/questions/3474608/what-is-the-current-state-of-the-art-in-html-canvas-javascript-libraries-and-fra)

I am currently investigating options for working with the canvas in a new HTML 5 application, and was wondering what is the current state of the art in HTML canvas JavaScript libraries and frameworks?In particular, are there frameworks that support the kind of things needed for game development - complex animation, managing scene graphs, handling events and user interactions?Also willing to consider both commercial and open source products. 

2010-08-13 07:01:02Z

I am currently investigating options for working with the canvas in a new HTML 5 application, and was wondering what is the current state of the art in HTML canvas JavaScript libraries and frameworks?In particular, are there frameworks that support the kind of things needed for game development - complex animation, managing scene graphs, handling events and user interactions?Also willing to consider both commercial and open source products. I've been working on fabric.js — a canvas library to help with exactly that — manipulating objects on canvas, by handling events and user interactions. It's not released yet, but take a look at a simple preview demo.You can also see it in action in this design editor, which it was originally created for.Edit: The project is now available on github (open-sourced under MIT License)To get started, check out:How does Fabric compare to other Javascript canvas libraries? Here's a comparison table.I'm surprised no one has mentioned WebGL, and frameworks built on it. I would consider it high on the list for state-of-the-art for 3D GPU-accelerated graphics and complex animation on HTML canvas / javascript.WebGL is very solid in its support for GPU-accelerated graphics. Check out these GLSL shader demos. :-) And see ChemDoodle as an example of user interaction.I've been working on an app using Google's O3D framework, which manages the scene graph, and uses WebGL for rendering (it used to use its own plug-in). O3D is a work in progress, and its documentation is not completely up to date, but it is under active development, and there are some good demos out there. 3D Pool may be most up your alley. The Google developers are very responsive to questions in the discussion group.There are a number of other frameworks built on WebGL; see here. Ones that mention game development and scene graphs include Copperlicht, SceneJS, X3DOM.WebGL runs in recent development builds of several browsers, but not IE. I've been using Firefox ("Minefield") and Chromium with good results. You will need one of these to run the above demos.However if your requirements are that it must have no dependencies beyond HTML 5 canvas / js, WebGL may not be the right choice. It doesn't look like IE will support it anytime soon.Update: after putting up a lot of resistance, MS decided to support WebGL in IE 11.three.js, by mr. doob, is a fantastic 3d engine for javascript that includes scenegraph (both software and WebGL/hardware accelerated versions), shading, particles, skinned animation (i think), and lighting effects. Check it out, he is a super-talented fellow.I should add that you are going to need the newest Google Chrome or equivalent to view most of the demos, one of my favorites is: http://mrdoob.github.com/three.js/examples/webgl_materials_cars.htmlKineticJS is an up-and-coming library that boasts creating and animating individual "layers" on the canvas for high performance.http://www.kineticjs.com/CAKE.js is no longer being maintained but is a fairly powerful framework - http://code.google.com/p/cakejs/Demos here - http://glimr.rubyforge.org/cake/canvas.html, http://glimr.rubyforge.org/cake/missile_fleet.htmlTake a look at the processingjs framework. Also the upcoming mootools version 2.0 has the art projekt to work with canvasRaphael seems a pretty good canvas library; it's SVG-based (or VML-based in Internet Explorer), and thus supports a lot of user input events. It's fairly small (60kb gzipped), so isn't too large a dependency.

It seems to have a nice tweener too: http://raphaeljs.com/reference.html#animate (see here and here for examples).For an example of what it can do, have a look at this clever little demo. Hope this helps!I have found two libraries to be extremely competitive and much better then fabric. Kinetic.js and easel.js both have extremely good event handling, grouping and general shape abstraction. You'll find a lot to love in both of these; easel seems to have more image oriented and filtering.Fabric's event handlins is MUCH worse than either of these - basically it treats the whole canvas as one big event rrapper and tells you when "Something" has been clicked on. It doesn't attach events to individual shapes or groups of shapes. There is an interesting library that aims to improve some of the fundamentals of working with the canvas API called canto.js by David Flanagan, author of Javascript: The Definitive Guide.Also, young, but not bad, Javascript framework, and it (complex animation, managing scene graphs, handling events and user interactions) all about it - jCanvaScript. May be, except 'managing scene graphs'.Been working with bHive to produce graphs and moving site headers, seems impressive and powerful, unlike the others seems to be being developed. Adobe Edge is also worth a gander though strictly not Canvas.http://www.bhivecanvas.comandhttp://labs.adobe.com/technologies/edge/Aves Engine is really really great: http://www.dextrose.com/en/projects/aves-engineAlso, Akihabara seems good: http://www.kesiev.com/akihabara/If you want to use Javascript, Dojo is a great way to go.  It has a compact, cross-platform (SVG, VML, Canvas, Silverlight) vector graphics API that is very powerful.  You can find it in dojo.gfx and dojox.gfx.We've used this to build an interactive physics tutor that allows students to draw vectors, ellipses, etc (even append images) and perform all sorts of transformations on them.  You can see what we've done at http://gideon.eas.asu.edu/web-UI/login.html --just login with any username.I've taken a look at fabric.js and dojox.drawing does a lot of the same things.  If you look at the tests in the toolkit (once you've got it its dojox/drawing/tests/) you find examples of everything from vector graphics to images to programmatically created shadows.I am impressed with Akihabara as a game engine.  It has fantastic documentation in the form of tutorials and an api. I've even seen on some message boards talk of an akihabara 2 release.  Unfortunately, all that talk is about one year or more old. I really hope this engine is still being developed.I just released the first iteration of a new drawing & tweening library geared towards folks with an AS3/Flash development background. While my lib doesn't yet support complex drawing paths or graphs per say I'm hoping it'll help folks quickly draw & animate basic primitives in a familiar way. Feedback and comments are welcome.

http://www.quietless.com/kitchen/introducing-js3/

What is「callback hell」and how and why does RX solve it?

jhegedus

[What is「callback hell」and how and why does RX solve it?](https://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-does-rx-solve-it)

Can someone give a clear definition together with a simple example that explains what is a "callback hell" for someone who does not know JavaScript and node.js ?When (in what kind of settings) does the "callback hell problem" occur? Why does it occur?Is "callback hell" always related to asynchronous computations? Or can "callback hell" occur also in a single threaded application? I took the Reactive Course at Coursera and Erik Meijer said in one of his lectures that RX solves the problem of "callback hell". I asked what is a "callback hell" on the Coursera forum but I got no clear answer.  After explaining "callback hell" on a simple example, could you also show how RX solves the "callback hell problem" on that simple example?

2014-08-02 18:18:51Z

Can someone give a clear definition together with a simple example that explains what is a "callback hell" for someone who does not know JavaScript and node.js ?When (in what kind of settings) does the "callback hell problem" occur? Why does it occur?Is "callback hell" always related to asynchronous computations? Or can "callback hell" occur also in a single threaded application? I took the Reactive Course at Coursera and Erik Meijer said in one of his lectures that RX solves the problem of "callback hell". I asked what is a "callback hell" on the Coursera forum but I got no clear answer.  After explaining "callback hell" on a simple example, could you also show how RX solves the "callback hell problem" on that simple example?This other question has some examples of Javascript callback hell: How to avoid long nesting of asynchronous functions in Node.jsThe problem in Javascript is that the only way to "freeze" a computation and have the "rest of it" execute latter (asynchronously) is to put "the rest of it" inside a callback.For example, say I want to run code that looks like this:What happens if now I want to make the getData functions asynchronous, meaning that I get a chance to run some other code while I am waiting for them to return their values? In Javascript, the only way would be to rewrite everything that touches an async computation using continuation passing style:I don't think I need to convince anyone that this version is uglier than the previous one. :-)When you have lots of callback functions in your code! It gets harder to work with them the more of them you have in your code and it gets particularly bad when you need to do loops, try-catch blocks and things like that.For example, as far as I know, in JavaScript the only way to execute a series of asynchronous functions where one is run after the previous returns is using a recursive function. You can't use a for loop.Instead, we might need to end up writing:The number of questions we get here on StackOverflow asking how to do this kind of thing is a testament to how confusing it is :)It occurs because in JavaScript the only way to delay a computation so that it runs after the asynchronous call returns is to put the delayed code inside a callback function. You cannot delay code that was written in traditional synchronous style so you end up with nested callbacks everywhere.Asynchronous programming has to do with concurrency while a single-thread has to do with parallelism. The two concepts are actually not the same thing.You can still have concurrent code in a single threaded context. In fact, JavaScript, the queen of callback hell, is single threaded.What is the difference between concurrency and parallelism?I don't know anything about RX in particular, but usually this problem gets solved by adding native support for asynchronous computation in the programming language. The implementations can vary and include: async, generators, coroutines, and callcc. In Python we can implement that previous loop example with something along the lines of:This is not the full code but the idea is that the "yield" pauses our for loop until someone calls myGen.next(). The important thing is that we could still write the code using a for loop, without needing to turn out logic "inside out" like we had to do in that recursive loop function.Just answer the question: could you please also show how RX solves the "callback hell problem" on that simple example?The magic is flatMap. We can write the following code in Rx for @hugomg's example:It's like you are writing some synchronous FP codes, but actually you can make them asynchronous by Scheduler.To address the question of how Rx solves callback hell:First let's describe callback hell again.Imagine a case were we must do http to get three resources - person, planet and galaxy. Our objective is to find the galaxy the person lives in. First we must get the person, then the planet, then the galaxy. That's three callbacks for three asynchronous operations.Each callback is nested. Each inner callback is dependent on its parent. This leads to the "pyramid of doom" style of callback hell. The code looks like a > sign.To solve this in RxJs you could do something like so:With the mergeMap AKA flatMap operator you could make it more succinct:As you can see, the code is flattened and contains a single chain of method calls. We have no "pyramid of doom".Hence, callback hell is avoided.In case you were wondering, promises are another way to avoid callback hell, but promises are eager, not lazy like observables and (generally speaking) you cannot cancel them as easily.Callback hell is any code where the use of function callbacks in async code becomes obscure or difficult to follow. Generally, when there is more than one level of indirection, code using callbacks can become harder to follow, harder to refactor, and harder to test. A code smell is multiple levels of indentation due to passing multiple layers of function literals.This often happens when behaviour has dependencies, i.e. when A must happen before B must happen before C. Then you get code like this:If you have lots of behavioural dependencies in your code like this, it can get troublesome fast. Especially if it branches...This won't do. How can we make asynchronous code execute in a determined order without having to pass all these callbacks around?RX is short for 'reactive extensions'. I haven't used it, but Googling suggests it's an event-based framework, which makes sense. Events are a common pattern to make code execute in order without creating brittle coupling. You can make C listen to the event 'bFinished' which only happens after B is called listening to 'aFinished'. You can then easily add extra steps or extend this kind of behaviour, and can easily test that your code executes in order by merely broadcasting events in your test case.One way Callback hell can be avoided is to use FRP which is an "enhanced version" of RX. I started to use FRP recently because I have found a good implementation of it called Sodium ( http://sodium.nz/ ). A typical code looks like this ( Scala.js ) : selectedNote.updates() is a Stream which fires if selectedNode (which is a Cell) changes, the NodeEditorWidget then updates correspondingly.So, depending on the content of the selectedNode Cell, the currently edited Note will change.This code avoids Callback-s entirely, almost, Cacllback-s are pushed to the "outer layer"/"surface" of the app, where the state handling logic interfaces with the external world. There are no Callbacks needed to propagate data within the internal state handling logic (which implements a state machine).The full source code is hereThe code snippet above corrosponds to the following simple Create / Display / Update example :This code also sends updates to the server, so changes to the updated Entities are saved to the server automatically.All the event handling is taken care by using Streams and Cells. These are FRP concepts. Callbacks are only needed where the FRP logic interfaces with the external world, such as user input, editing text, pressing a button, AJAX call returns. Data flow is explicitly described, in a declarative manner using FRP (implemented by the Sodium library), so no event handling / callback logic is needed to describe data flow.FRP (which is a more "strict" version of RX) is a way to describe a data flow graph, which can contain nodes that contain state. Events trigger state changes in the state containing nodes (called Cells). Sodium is a higher order FRP library, meaning that using the flatMap/switch primitive one can rearrange the data flow graph at runtime.I recommend to have a look into the Sodium book, it explains in detail how FRP gets rid of all Callbacks which are not essential for describing dataflow logic that has to do with updating the applications state in response to some external stimuli. Using FRP, only those Callbacks need to be kept which describe interaction with the external world. In other words, the dataflow is described in a functional / declarative manner when one uses an FRP framework (such as Sodium), or when one uses an "FRP like" framework (such as RX).Sodium is also available for Javascript/Typescript.If you don't have a knowledge about callback and hell callback there is no problem.Ist thing is that call back and call back hell.For example:hell call back is like a we can store a class inside a class.As you heard about that nested in C, C++ language.Nested Means that a class inside a another class.Use jazz.js

https://github.com/Javanile/Jazz.jsit simplify like this:

Can JavaScript connect with MySQL?

Anonymous the Great

[Can JavaScript connect with MySQL?](https://stackoverflow.com/questions/3020751/can-javascript-connect-with-mysql)

Can JavaScript connect with MySQL? If so, how?

2010-06-11 06:55:04Z

Can JavaScript connect with MySQL? If so, how?No, JavaScript can not directly connect to MySQL. But you can mix JS with PHP to do so.JavaScript is a client-side language and your MySQL database is going to be running on a serverClient-side JavaScript cannot access MySQL without some kind of bridge. But the above bold statements that JavaScript is just a client-side language are incorrect -- JavaScript can run client-side and server-side, as with Node.js.Node.js can access MySQL through something like https://github.com/sidorares/node-mysql2You might also develop something using Socket.IODid you mean to ask whether a client-side JS app can access MySQL? I am not sure if such libraries exist, but they are possible.EDIT: Since writing, we now have MySQL Cluster:If you want to connect to a MySQL database using JavaScript, you can use Node.js and a library called mysql. You can create queries, and get results as an array of registers. If you want to try it, you can use my project generator to create a backend and choose MySQL as the database to connect. Then, just expose your new REST API or GraphQL endpoint to your front and start working with your MySQL database.OLD ANSWER LEFT BY NOSTALGIATHENAs I understand the question and correct me if I am wrong, it refers to the classic server model with JavaScript only on the client-side. In this classic model, with LAMP servers (Linux, Apache, MySQL, PHP) the language in contact with the database was PHP, so to request data to the database you need to write PHP scripts and echo the returning data to the client. Basically, the distribution of the languages according to physical machines was:This answered to an MVC model (Model, View, Controller) where we had the following functionality:For the controller, we have really interesting tools like jQuery, as "low-level" library to control the HTML structure (DOM), and then new, more high-level ones as Knockout.js that allow us to create observers that connect different DOM elements updating them when events occur. There is also Angular.js by Google that works in a similar way, but seems to be a complete environment. To help you to choose among them, here you have two excellent analyses of the two tools: Knockout vs. Angular.js and Knockout.js vs. Angular.js. I am still reading. Hope they help you.NOWIn modern servers based in Node.js, we use JavaScript for everything. Node.js is a JavaScript environment with many libraries that work with Google V8, Chrome JavaScript engine. The way we work with these new servers is:Then we have a lot of packages we can install using the NPM (Node.js package manager) and use them directly in our Node.js server just requiring it (for those of you that want to learn Node.js, try this beginner tutorial for an overview). And among these packages, you have some of them to access databases. Using this you can use JavaScript on the server-side to access My SQL databases.But the best you can do if you are going to work with Node.js is to use the new NoSQL databases like MongoDB, based on JSON files. Instead of storing tables like MySQL, it stores the data in JSON structures, so you can put different data inside each structure like long numeric vectors instead of creating huge tables for the size of the biggest one.I hope this brief explanation becomes useful to you, and if you want to learn more about this, here you have some resources you can use:I hope it helps you to start.Have fun!I think you would need to add something like PHP into the equation. PHP to interact with the database and then you could make AJAX calls with Javascript.Bit late but recently I have found out that MySql 5.7 got http plugin throuh which user can directly connect to mysql now.Look for Http Client for mysql 5.7Simple answer is: no.JavaScript is a client-side language that runs in the browser (node.js notwithstanding) and MySQL is a server-side technology that runs on the server.That means you typically use a server-side language like ASP.NET or PHP to connect to the database.YES? Have a look a meteor. Links:http://meteor.com/screencast and http://net.tutsplus.com/tutorials/javascript-ajax/whats-this-meteor-thing/ I don't understand how it is done. But Nettuts+ put this thing in the javascript-ajax section, maybe magic happens.It also shows some way to connect and insert to MongoDB with JS, like this:Depending on your environment, you could use Rhino to do this, see Rhino website. This gives you access to all of the Java libraries from within JavaScript. Yes. There is an HTTP plugin for MySQL. http://blog.ulf-wendel.de/2014/mysql-5-7-http-plugin-mysql/I'm just googling about it now, which led me to this stackoverflow question. You should be able to AJAX a MySQL database now or in the near future (they claim it's not ready for production).You can send AJAX requests to some server-side RESTful wrappers for MySQL, such as DBSlayer, PhpRestSQL or AlsoSQL (for Drizzle, a fork of MySQL).Typically, you need a server side scripting language like PHP to connect to MySQL, however, if you're just doing a quick mockup, then you can use http://www.mysqljs.com to connect to MySQL from Javascript using code as follows:It has to be mentioned that this is not a secure way of accessing MySql, and is only suitable for private demos, or scenarios where the source code cannot be accessed by end users, such as within Phonegap iOS apps.Yes you can. MySQL connectors use TCP for connection, and in JS there is an little modified version of TCP client called Websocket. But you can't directly connect to MySQL server with websocket. You will need some 3rd party bridge between websocket and mysql. It receive query from websocket, send it to mysql, response result and resend to JS.And this is my example bridge written in C# with websocket-sharp library:

JS side:

No.You need to write a wrapper in PHP, and then export the returned data (probably as Json). NEVER, get from your "_GET" the SQL code, as this is called an SQL injection (people who learn this will have full control over your database).This is an example I wrote:Do learn about SQL injections please.You can connect to MySQL from Javascript through a JAVA applet. The JAVA applet would embed the JDBC driver for MySQL that will allow you to connect to MySQL. Remember that if you want to connect to a remote MySQL server (other than the one you downloaded the applet from) you will need to ask users to grant extended permissions to applet. By default, applet can only connect to the server they are downloaded from. JavaScript can't connect directly to DB to get needed data but you can use AJAX. To make easy AJAX request to server you can use jQuery JS framework http://jquery.com. Here is a small exampleJS:PHP:If you're not locked on MySQL you can switch to PostgreSQL. It supports JavaScript procedures (PL/V8) inside the database. It is very fast and powerful. Checkout this post.I understood your question I think you are confusing it with languages like dot.net and java where you can open DB connection within your code. No, JavaScript can not directly connect to MySQL as JavaScript is a client side scripting language(Exception Node.js).You need a middle layer like RESTful API to access data.You can add mysql connection using PHP file. Below is the example of PHP file.  

Change working directory in my current shell context when running Node script

Jonovono

[Change working directory in my current shell context when running Node script](https://stackoverflow.com/questions/19803748/change-working-directory-in-my-current-shell-context-when-running-node-script)

I am trying to change the working directory of my Node.js script when it is run from a bin script. I have something like the following:When I then run this file with ./bin/nodefile, it exits, but the working directory of the current shell context has not changed. I have also tried shelljs, but that does not work either.What is the best way to do this? I understand it's working but it's just in a separate process.

2013-11-06 03:50:03Z

I am trying to change the working directory of my Node.js script when it is run from a bin script. I have something like the following:When I then run this file with ./bin/nodefile, it exits, but the working directory of the current shell context has not changed. I have also tried shelljs, but that does not work either.What is the best way to do this? I understand it's working but it's just in a separate process.The correct way to change directories is actually with process.chdir(directory). Here's an example from the documentation:This is also testable in the Node.js REPL:There is no built-in method for Node to change the CWD of the underlying shell running the Node process.You can change the current working directory of the Node process through the command process.chdir().When the Node process exists, you will find yourself back in the CWD you started the process in.What you are trying to do is not possible. The reason for this is that in a POSIX system (Linux, OSX, etc), a child process cannot modify the environment of a parent process. This includes modifying the parent process's working directory and environment variables.When you are on the commandline and you go to execute your Node script, your current process (bash, zsh, whatever) spawns a new process which has it's own environment, typically a copy of your current environment (it is possible to change this via system calls; but that's beyond the scope of this reply), allowing that process to do whatever it needs to do in complete isolation. When the subprocess exits, control is handed back to your shell's process, where the environment hasn't been affected.There are a lot of reasons for this, but for one, imagine that you executed a script in the background (via ./foo.js &) and as it ran, it started changing your working directory or overriding your PATH. That would be a nightmare.If you need to perform some actions that require changing your working directory of your shell, you'll need to write a function in your shell. For example, if you're running Bash, you could put this in your ~/.bash_profile:and then this cool thing is doable:If you need to do more complex things in addition, you could always call out to your nodejs script from that function.This is the only way you can accomplish what you're trying to do.Short answer: no (easy?) way, but you can do something that serves your purpose.I've done a similar tool (a small command that, given a description of a project, sets environment, paths, directories, etc.). What I do is set-up everything and then spawn a shell with:After execution, you'll be on a shell with the new directory (and, in my case, environment). Of course you can change bash for whatever shell you prefer. The main differences with what you originally asked for are:However, for me, that differences are desirable.

Javascript regex returning true.. then false.. then true.. etc [duplicate]

betamax

[Javascript regex returning true.. then false.. then true.. etc [duplicate]](https://stackoverflow.com/questions/2630418/javascript-regex-returning-true-then-false-then-true-etc)

I have a strange problem with the validation I am writing on a form. It is a 'Check Username' button next to an input. The input default value is the username for example 'betamax'. When I press 'Check Username' it passes the regex and sends the username to the server. The server behaves as expected and returns '2' to tell the javascript that they are submitting their own username.Then, when I click the button again, the regex fails. Nothing is sent to the server obviously because the regex has failed. If I press the button again, the regex passes and then the username is sent to the server.I literally cannot figure out what would be making it do this! It makes no sense to me!Edit: I've tested the problem in Firefox and Chrome (mac)This is my code: The HTML:

2010-04-13 14:40:32Z

I have a strange problem with the validation I am writing on a form. It is a 'Check Username' button next to an input. The input default value is the username for example 'betamax'. When I press 'Check Username' it passes the regex and sends the username to the server. The server behaves as expected and returns '2' to tell the javascript that they are submitting their own username.Then, when I click the button again, the regex fails. Nothing is sent to the server obviously because the regex has failed. If I press the button again, the regex passes and then the username is sent to the server.I literally cannot figure out what would be making it do this! It makes no sense to me!Edit: I've tested the problem in Firefox and Chrome (mac)This is my code: The HTML:You're using a g (global) RegExp. In JavaScript, global regexen have state: you call them (with exec, test etc.) the first time, you get the first match in a given string. Call them again and you get the next match, and so on until you get no match and it resets to the start of the next string. You can also write regex.lastIndex= 0 to reset this state.(This is of course an absolutely terrible piece of design, guaranteed to confuse and cause weird errors. Welcome to JavaScript!)You can omit the g from your RegExp, since you're only testing for one match.Also, I don't think you want [^-_] at the front and back. That will allow any character at each end, ie. *plop! would be valid. You're probably thinking of lookahead/lookbehind assertions, but they're not available in JavaScript. (Well, lookahead is supposed to be, but it's broken in IE.) Suggest instead:This is wrong,  The last - must be at the beginning or end.Whether that would cause this problem or not, I don't know.Additional notes:The first and last characters are allowed to be any character that isn't - or _ rather than being restricted to a-z0-9a-z0-9 doesn't include uppercase characters.  You need a-zA-Z0-9 for that.

a-zA-Z0-9_ can be shortened to \w in most RegEx engines.  I haven't tried it in JavaScript.

Where am I wrong about my project and these Javascript Frameworks?

funkyeah

[Where am I wrong about my project and these Javascript Frameworks?](https://stackoverflow.com/questions/5186542/where-am-i-wrong-about-my-project-and-these-javascript-frameworks)

First off, the barest bones of the project I wish to create is a wiki engine implemented as a single page web app. I plan on having a set of features available from the  get-go with plenty of feature additions down the road.Basic FeaturesAdvanced FeaturesThe engine would originally consist of the most basic page creation, markup and WYSIWYG editing, and saving. I would eventually like to extend this basic engine with drag and drop image support, file uploads, live data graphs, and a sidebar for customizing views.I have done a fairly extensive search for a decent project from which to base my project off, but other than TiddlyWiki there does not seem to be any good javascript based wiki engines. I also considered applying Jquery on top of existing wiki engines but I believe I would end up rewriting it eventually anyway (Plus its just more exciting to add the features I want as I go). Either way I have arrived at implementing this beast with a javascript library + framework. I know that one cannot really compare some of these frameworks against each other as they are very much not apples to apples. I have tried to frame any comparison comments/questions against comparable pieces of the respective frameworks but I am open to being corrected.So here we go:Based on my own research and opinions I have narrowed the list down to the items below. I intentionally left out things such as SproutCore, corMVC, YUI, and others as I, in my limited capacity, thought the below items would be a better fit.My OptionsOverallUIOverallUIOverallUIBlank at the momentOverallUIOverallUII apologize for writing so much but hey, at least its not a x vs y vs z question hoping for tons of cheap answers. So what do you think? What should be the basis for my desktop like wiki engine, that will hopefully become more feature rich (read complex) over time?

2011-03-03 21:06:26Z

First off, the barest bones of the project I wish to create is a wiki engine implemented as a single page web app. I plan on having a set of features available from the  get-go with plenty of feature additions down the road.Basic FeaturesAdvanced FeaturesThe engine would originally consist of the most basic page creation, markup and WYSIWYG editing, and saving. I would eventually like to extend this basic engine with drag and drop image support, file uploads, live data graphs, and a sidebar for customizing views.I have done a fairly extensive search for a decent project from which to base my project off, but other than TiddlyWiki there does not seem to be any good javascript based wiki engines. I also considered applying Jquery on top of existing wiki engines but I believe I would end up rewriting it eventually anyway (Plus its just more exciting to add the features I want as I go). Either way I have arrived at implementing this beast with a javascript library + framework. I know that one cannot really compare some of these frameworks against each other as they are very much not apples to apples. I have tried to frame any comparison comments/questions against comparable pieces of the respective frameworks but I am open to being corrected.So here we go:Based on my own research and opinions I have narrowed the list down to the items below. I intentionally left out things such as SproutCore, corMVC, YUI, and others as I, in my limited capacity, thought the below items would be a better fit.My OptionsOverallUIOverallUIOverallUIBlank at the momentOverallUIOverallUII apologize for writing so much but hey, at least its not a x vs y vs z question hoping for tons of cheap answers. So what do you think? What should be the basis for my desktop like wiki engine, that will hopefully become more feature rich (read complex) over time?I would suggest first coming up with specific UI requirements for your project.  Which of the frameworks you've tried have you taken for a spin?  Personally, I got into ExtJS development because the projects I work on require a lot of customization of controls/widgets.  ExtJS has a ton of them right out of the box and can always be extended, combined, or munged into whatever monstrosity your business requires.ExtJS 4 also allows you to "skin" your UI's to further customize the look and feel.If you are new to JavaScript, and are comfortable with Java, you might even look into a server-side solution such as GWT, JSF, or even VaadinNot sure about your timeline and resources, but when I'm trying to decide between multiple frameworks/environments, I just go ahead and try to quickly build a prototype. Even if it's just one or two major functions, I find that all the research and documentation in the world won't ever match actually trying to build something with the tools. I say take a day with each and see how far you get. That'll give you a pretty good indication of which tools are up to the task and feel most comfortable for you.meteor is all the rage nowadays (the most starred full-stack JavaScript framework on GitHub and Meteorpedia is a wiki engine written in Meteor.The launch video will get you hooked by 1:28.It's agnostic with regards to the UI, and has been tested extensively with Bootstrap and Famo.us. It also generates mobile apps from the same codebase.Your choice of framework might not constrain your UI choices as much as you may be imagining. This recent Henri Bergius article about decoupling content management illustrates the point much better than I could -- and, incidentally, links to a pretty sweet looking pure-JavaScript (framework-independent) in-place content editor.You are not alone! VanillaJS and

Ampersand

.. are great examples of the serious drive for simpler, more modular JavaScript.There's even a Book about it.Simplicity is being driven by an under-rated es6 feature: Modules and the SystemJS implementation standard.  It even can be used on non-es6 systems.How cool is that!I would say you are wrong in your overall choice of candidates as you are omitting Angular and Ember both of which are better suited than any of the other frameworks listed.Much of what you are talking about (several sidebars for navigation, a single page app) are functions of routing, or how the front end interprets the text in your URL navigation bar.Both Angular.js and Ember have excellent routers that allow you to accomplish everything you require without additional code.For your benefit, here is a quick breakdown of the features in Angular that can be used to create your single page wikiThe Structure of the Site ItselfAngular has an amazing library called UI router allows you both to create custom navigation and to set up an SEO friendly structure of revealing your content. Multiple views would allow a top toolbar as well.Ui router tutorial:

http://cacodaemon.de/index.php?id=57WYSIWYG EditorAngular is built on live two-way binding (when you change something somewhere, it automatically changes everywhere else.) Therefore it comes packaged with a lot of features that work well with this kind of editor. A few good ones have already been made and you only need to implement them.http://textangular.com/Graphs and Other Neat StuffAngular directives are designed to do things like create Chart components that are reusable. They are not totally different than Wordpress Widgets. Many of these have already been developed and can be dropped into your Angular project.http://www.sitepoint.com/creating-charting-directives-using-angularjs-d3-js/Regarding Ember, I do not know much about it so I cannot speak to its particular features.One suggestion about Backbone, if you decide to use it you should go for Marionnete since it's Backbone but with a better architectural structure and more opinionated ( i personally feel that Backbone doesn't set any guidelines and that's feels like a downside in large apps ). I worked with it for a few months combining different js libs and doesn't get in your way like other frameworks and the message pipeline is a really good way to connect components through out the app but keep them decouple.Here you have a great talk that made me decide for it : https://www.youtube.com/watch?v=qWr7x9wk6_cAnd here you have a demo prototype that also has the drag and drop element plus other js libs connected. Would love to heard what you think about my code since i have 1.5 years working on web development... i'm still a newbie : https://github.com/Drasky-Vanderhoff/marionette-demo/About Knockout, is really good if you want interaction with the content you already have and  you won't be connecting constantly with the backend. I worked with it for 6 months and i end up needing to use a lot of other js libs for routing; plus i end up repeating a lot of the structures that Backbone and other JS Frameworks end up having. What i will say is that it won't get in your way at all and be a tool rather than a constrain. Also this was almost a year ago so a few things have changed.One thing, if you find Knockback ( Knockout + Backbone )... avoid it, the documentation is not as good as it should be and it will take you a lot more time to learn it. If you want to go for it make a fast prototype first to see if is what you want.

How to intercept all AJAX requests made by different JS libraries

mettjus

[How to intercept all AJAX requests made by different JS libraries](https://stackoverflow.com/questions/25335648/how-to-intercept-all-ajax-requests-made-by-different-js-libraries)

I am building a web app with different JS libraries (AngularJS, OpenLayers,...) and need a way to intercept all AJAX responses to be able, in case the logged user session expired (response gets back with 401 Unauthorized status), to redirect him to the login page.I know AngularJS offers interceptors to manage such scenarios, but wasn't able to find a way to achieve such injection into OpenLayers requests. So I opted for a vanilla JS approach.Here I found this piece of code......which I adapted and looks like it behaves as expected (only tested it on last Google Chrome).As it modifies the prototype of XMLHTTPRequest I am wondering how dangerous this could result or if it could produce serious performance issues. And by the way would there be any valid alternative?The previous trick works ok. But what if in the same scenarion you want to inject some headers before the request gets sent? Do the following:

2014-08-15 23:44:58Z

I am building a web app with different JS libraries (AngularJS, OpenLayers,...) and need a way to intercept all AJAX responses to be able, in case the logged user session expired (response gets back with 401 Unauthorized status), to redirect him to the login page.I know AngularJS offers interceptors to manage such scenarios, but wasn't able to find a way to achieve such injection into OpenLayers requests. So I opted for a vanilla JS approach.Here I found this piece of code......which I adapted and looks like it behaves as expected (only tested it on last Google Chrome).As it modifies the prototype of XMLHTTPRequest I am wondering how dangerous this could result or if it could produce serious performance issues. And by the way would there be any valid alternative?The previous trick works ok. But what if in the same scenarion you want to inject some headers before the request gets sent? Do the following:This type of function hooking is perfectly safe and is done regularly on other methods for other reasons.  And, the only performance impact is really only one extra function call for each .open() plus whatever code you execute yourself which is probably immaterial when a networking call is involved.In IE, this won't catch any code that tries to use the ActiveXObject control method of doing Ajax.  Well written code looks first for the XMLHttpRequest object and uses that if available and that has been available since IE 7.  But, there could be some code that uses the ActiveXObject method if it's available which would be true through much later versions of IE.In modern browsers, there are other ways to issue Ajax calls such as the fetch() interface so if one is looking to hook all Ajax calls, you have to hook more than just XMLHttpRequest.This won't catch XMLHttpRequests for some versions of IE (9 and below).  Depending upon the library, they may look for IE's proprietary ActiveX control first.And, of course, all bets are off if you are using a non-strict DOCTYPE under IE, but I'm sure you knew that.Reference: CanIuseAs kindly pointed out by by Firefox AMO Editor Rob W, ... And here is a reference link:https://xhr.spec.whatwg.org/#the-open()-method

How can I get selector from jQuery object

Fidilip

[How can I get selector from jQuery object](https://stackoverflow.com/questions/2420970/how-can-i-get-selector-from-jquery-object)

Is there an easy way to get selector from $(this)? There is a way to select an element by its selector, but what about getting the selector from element?

2010-03-10 22:04:06Z

Is there an easy way to get selector from $(this)? There is a way to select an element by its selector, but what about getting the selector from element?Ok, so in a comment above the question asker Fidilip said that what he/she's really after is to get the path to the current element.Here's a script that will "climb" the DOM ancestor tree and then build fairly specific selector including any id or class attributes on the item clicked.See it working on jsFiddle: http://jsfiddle.net/Jkj2n/209/For example, if you were to click the 2nd list nested list item in the HTML below, you would get the following result:HTML>BODY>UL>LI>UL>LI#sub2.subitem.otherclassThe jQuery object has a selector property I saw when digging in its code yesterday. Don't know if it's defined in the docs are how reliable it is (for future proofing). But it works!Edit: If you were to find the selector inside the event, that information should ideally be part of the event itself and not the element because an element could have multiple click events assigned through various selectors. A solution would be to use a wrapper to around bind(), click() etc. to add events instead of adding it directly.The selector is being passed as an object's property named selector. Access it as event.data.selector.Let's try it on some markup (http://jsfiddle.net/DFh7z/):Disclaimer: Remember that just as with live() events, the selector property may be invalid if DOM traversal methods are used.The code below will NOT work, as live relies on the selector property

which in this case is a.parent() - an invalid selector.Our addEvent method will fire, but you too will see the wrong selector - a.parent().In collaboration with @drzaus we've come up with the following jQuery plugin.http://jsfiddle.net/CALY5/5/Did you try this ?  I've released a jQuery plugin: jQuery Selectorator, you can get selector like this.Try this:Just add a layer over the $ function this way:Now you can do things like http://www.selectorgadget.com/ is a bookmarklet designed explicitly for this use case.That said, I agree with most other people in that you should just learn CSS selectors yourself, trying to generate them with code is not sustainable. :)I added some fixes to @jessegavin's fix.This will return right away if there is an ID on the element. I also added a name attribute check and a nth-child selector in case a element has no id, class, or name.The name might need scoping in case there a multiple forms on the page and have similar inputs, but I didn't handle that yet.I was getting multiple elements even after above solutions, so i extended dds1024 work, for even more pin-pointing dom element.e.g. DIV:nth-child(1) DIV:nth-child(3) DIV:nth-child(1) ARTICLE:nth-child(1) DIV:nth-child(1) DIV:nth-child(8) DIV:nth-child(2) DIV:nth-child(1) DIV:nth-child(2) DIV:nth-child(1) H4:nth-child(2)Code:This can get you selector path of clicked HTML element-Well, I wrote this simple jQuery plugin.This checkes id or class name, and try to give as much exact selector as possible.Are you trying to get the name of the current tag that was clicked?If so, do this..You can't really get the "selector", the "selector" in your case is *.Javascript code for the same, in case any one needs, as i needed it. This just the translation only of the above selected answer.Taking in account some answers read here I'd like to propose this:Maybe useful to create a jQuery plugin?Thank you p1nox!My problem was to put focus back on an ajax call that was modifying part of the form.I just needed to encapsulate your function in a jQuery plugin:This won't show you the DOM path, but it will output a string representation of what you see in eg chrome debugger, when viewing an object.https://developer.chrome.com/devtools/docs/console-api#consolelogobject-objectHow about:I don't believe jQuery store the selector text that was used. After all, how would that work if you did something like this:The best answer would be

Moment.js: Date between dates

Joel A. Villarreal Bertoldi

[Moment.js: Date between dates](https://stackoverflow.com/questions/14897571/moment-js-date-between-dates)

I'm trying to detect with Moment.js if a given date is between two dates. Since version 2.0.0, Tim added isBefore() and isAfter() for date comparison.Since there's no isBetween() method, I thought this would work:I'm convinced there's got to be a better way to do this. Any ideas?

2013-02-15 15:09:37Z

I'm trying to detect with Moment.js if a given date is between two dates. Since version 2.0.0, Tim added isBefore() and isAfter() for date comparison.Since there's no isBetween() method, I thought this would work:I'm convinced there's got to be a better way to do this. Any ideas?You can use one of the moment plugin -> moment-range to deal with date range:In versions 2.9+ there is an isBetween function, but it's exclusive:There is an inclusive workaround ...

x.isBetween(a, b) || x.isSame(a) || x.isSame(b)... which is logically equivalent to

!(x.isBefore(a) || x.isAfter(b))

In version 2.13 the isBetween function has a fourth optional parameter, inclusivity. Use it like this:More units to consider: years, months, days, hours, minutes, seconds, millisecondsNote: units are still optional. Use null as the third argument to disregard units in which case milliseconds is the default granularity.Visit the Official DocsYou can use orSee here : http://momentjs.com/docs/#/query/I do believe thatworks too...Good news everyone, there's an isBetween function!

Update your library ;)http://momentjs.com/docs/#/query/is-between/Please use the 4th parameter of moment.isBetween function (inclusivity). Example:is logically the same aswhich saves you a couple of lines of code and (in some cases) method calls.Might be easier than pulling in a whole plugin if you only want to do this once or twice.As Per documentation of moment js,There is Precise Range plugin, written by Rob Dawson, can be used to display exact, human-readable representations of date/time ranges, url :http://codebox.org.uk/pages/moment-date-range-plugin

Regex to get string between curly braces「{I want what's between the curly braces}」

ChrisInCambo

[Regex to get string between curly braces「{I want what's between the curly braces}」](https://stackoverflow.com/questions/413071/regex-to-get-string-between-curly-braces-i-want-whats-between-the-curly-brace)

Unfortunately, despite having tried to learn regex at least one time a year for as many years as I can remember, I always forget as I use them so infrequently. This year my new year's resolution is to not try and learn regex again - So this year to save me from tears I'll give it to Stack Overflow. (Last Christmas remix).I want to pass in a string in this format {getThis}, and be returned the string getThis. Could anyone be of assistance in helping to stick to my new year's resolution?Related questions on Stack Overflow:

2009-01-05 13:21:34Z

Unfortunately, despite having tried to learn regex at least one time a year for as many years as I can remember, I always forget as I use them so infrequently. This year my new year's resolution is to not try and learn regex again - So this year to save me from tears I'll give it to Stack Overflow. (Last Christmas remix).I want to pass in a string in this format {getThis}, and be returned the string getThis. Could anyone be of assistance in helping to stick to my new year's resolution?Related questions on Stack Overflow:If your string will always be of that format, a regex is overkill:substring(1 means to start one character in (just past the first {) and ,g.length-1) means to take characters until (but not including) the character at the string length minus one. This works because the position is zero-based, i.e. g.length-1 is the last position.For readers other than the original poster: If it has to be a regex, use /{([^}]*)}/ if you want to allow empty strings, or /{([^}]+)}/ if you want to only match when there is at least one character between the curly braces.  Breakdown:TryThat means, match any character between { and }, but don't be greedy - match the shortest string which ends with } (the ? stops * being greedy). The parentheses let you extract the matched portion.Another way would beThis matches any character except a } char (another way of not being greedy)Try this:For example will return gskinner.com, ssd.sd.Here's a simple solution using javascript replaceAs the accepted answer above points out the original problem is easily solved with substring, but using replace can solve the more complicated use casesIf you have a string like "randomstring999[fieldname]"

You use a slightly different pattern to get fieldnameThis one works in Textmate and it matches everything in a CSS file between the curly brackets.

selector {.

.

matches here

including white space.

.

.}

If you want to further be able to return the content, then wrap it all in one more set of parentheses like so:and you can access the contents via $1.This also works for functions, but I haven't tested it with nested curly brackets.You want to use regex lookahead and lookbehind. This will give you only what is inside the curly braces:  Try thisRegex for getting arrays of string with curly braces enclosed occurs in string, rather than just finding first occurrence.The simpler .replace(/.*{(.*)}.*/, '$1') unfortunately returns the entire string if the regex does not match. The above code snippet can more easily detect a match.Try this one, according to http://www.regextester.com it works for js normaly.([^{]*?)(?=\})i have looked into the other answers, and a vital logic seems to be missing from them . ie, select everything between two CONSECUTIVE brackets,but NOT the bracketsso, here is my answerYou can use this regex recursion to match everythin between, even another {} (like a JSON text) :

How to differentiate single click event and double click event?

user426795

[How to differentiate single click event and double click event?](https://stackoverflow.com/questions/5497073/how-to-differentiate-single-click-event-and-double-click-event)

I have a single button in li with id "my_id". I attached  two jQuery events with this element1.2.But every times it gives me the single click

2011-03-31 08:24:17Z

I have a single button in li with id "my_id". I attached  two jQuery events with this element1.2.But every times it gives me the single clickYou need to use a timeout to check if there is an another click after the first click.Here is the trick:Usage:EDIT:As stated below, prefer using the native dblclick event: http://www.quirksmode.org/dom/events/click.htmlOr the one provided by jQuery: http://api.jquery.com/dblclick/The behavior of the dblclick event is explained at Quirksmode.The order of events for a dblclick is:The one exception to this rule is (of course) Internet Explorer with their custom order of:As you can see, listening to both events together on the same element will result in extra calls to your click handler.A simple function. No jquery or other framework is required. Pass your functions as parametersInstead of utilizing more ad-hoc states and setTimeout, turns out there is a native property called detail that you can access from the event object!Modern browsers and even IE-9 supports it :) Source: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detailI'm afraid that the behaviour is browser dependent:http://api.jquery.com/dblclick/Running your code in Firefox, the alert() in the click() handler prevents you from clicking a second time. If you remove such alert, you get both events.Well in order to double click (click twice) you must first click once. The click() handler fires on your first click, and since the alert pops up, you don't have a chance to make the second click to fire the dblclick() handler.Change your handlers to do something other than an alert() and you'll see the behaviour. (perhaps change the background color of the element):This answer is made obsolete through time, check @kyw's solution.I created a solution inspired by the gist posted by @AdrienSchuler. Use this solution only when you want to bind a single click AND a double click to an element. Otherwise I recommend using the native click and dblclick listeners.These are the differences:Javascript:Usage:Below is the usage in a jsfiddle, the jQuery button is the behavior of the accepted answer.Another simple Vanilla solution based on the A1rPun answer (see his fiddle for the jQuery solution, and both are in this one).It seems that to NOT trigger a single-click handler when the user double-clicks, the single-click handler is necessarily triggered after a delay...Use the excellent jQuery Sparkle plugin. The plugin gives you the option to detect first and last click. You can use it to differentiate between click and dblclick by detecting if another click was followed by the first click. Check it out at http://balupton.com/sandbox/jquery-sparkle/demo/Here's an alternative of jeum's code for an arbitrary number of events:Needed this for a cytoscape.js app.How to differentiate between single clicks and double clicks on one and the same element?If you don't need to mix them, you can rely on click and dblclick and each will do the job just fine.A problem arises when trying to mix them: a dblclick event will actually trigger a click event as well, so you need to determine whether a single click is a "stand-alone" single click, or part of a double click.In addition: you shouldn't use both click and dblclick on one and the same element:Now on to the good news:You can use the event's detail property to detect the number of clicks related to the event. This makes double clicks inside of click fairly easy to detect.The problem remains of detecting single clicks and whether or not they're part of a double click. For that, we're back to using a timer and setTimeout.Wrapping it all together, with use of a data attribute (to avoid a global variable) and without the need to count clicks ourselves, we get:JSfiddleIt took a while to find a satisfying solution, I hope this helps!I wrote a simple jQuery plugin that lets you use a custom 'singleclick' event to differentiate a single-click from a double-click:https://github.com/omriyariv/jquery-singleclickI like to avoid jquery (and other 90-140k libs), and as noted browsers handle onclick first, so here is what I did on a website I created  (this example also covers getting a clicked location local x y )hope that helpsThe modern correct answer is a mix between the accepted answer and @kyw 's solution.

You need a timeout to prevent that first single click and the event.detail check to prevent the second click.this worked for me–usage–Just posting the native HTML answer just in case the need is to be easy and HTML.This of course has native Jquery options. ie... $('#id').attr('ondblclick',function(){...}) or, as stated previously, $('#id').dblclick(function(){...});I know this is old, but below is a JS only example of a basic loop counter with a single timer to determine a single vs double click. Hopefully this helps someone.

Image Get Requests with AngularJS

ssb

[Image Get Requests with AngularJS](https://stackoverflow.com/questions/12922509/image-get-requests-with-angularjs)

I am storing the the source string of an image to be rendered in HTML in the AngularJS controller, however it yields a 404 before the Angular controller is initialized.Here is the HTML:Angular controller:And the error I get (%7D%7D corresponds to the {{ in the template).How can I prevent this from happening? That is, only load the image when the Angular controller has been initialized?

2012-10-16 19:57:38Z

I am storing the the source string of an image to be rendered in HTML in the AngularJS controller, however it yields a 404 before the Angular controller is initialized.Here is the HTML:Angular controller:And the error I get (%7D%7D corresponds to the {{ in the template).How can I prevent this from happening? That is, only load the image when the Angular controller has been initialized?Try replacing your src with ng-src for more info see the documentation: If someone is searching the solution for styling background-image then use this: 

What does $.when.apply($, someArray) do?

manafire

[What does $.when.apply($, someArray) do?](https://stackoverflow.com/questions/14777031/what-does-when-apply-somearray-do)

I'm reading about Deferreds and Promises and keep coming across $.when.apply($, someArray).  I'm a little unclear on what this does exactly, looking for an explanation that one line works exactly (not the entire code snippet).  Here's some context: 

2013-02-08 16:27:55Z

I'm reading about Deferreds and Promises and keep coming across $.when.apply($, someArray).  I'm a little unclear on what this does exactly, looking for an explanation that one line works exactly (not the entire code snippet).  Here's some context: .apply is used to call a function with an array of arguments.  It takes each element in the array, and uses each as a parameter to the function.  .apply can also change the context (this) inside a function.So, let's take $.when.  It's used to say "when all these promises are resolved... do something".  It takes an infinite (variable) number of parameters.In your case, you have an array of promises; you don't know how many parameters you're passing to $.when.  Passing the array itself to $.when wouldn't work, because it expects its parameters to be promises, not an array.That's where .apply comes in.  It takes the array, and calls $.when with each element as a parameter (and makes sure the this is set to jQuery/$), so then it all works :-)$.when takes any number of parameters and resolves when all of these have resolved.anyFunction.apply(thisValue, arrayParameters) calls the function anyFunction setting its context (thisValue will be the this within that function call) and passes all the objects in arrayParameters as individual parameters.For example:Is the same as:But the apply way of calling allows you to pass an array of unknown number of parameters. (In your code, you are saying that you data comes from a service, then that is the only way to call $.when)Here, the code fully documented.Unfortunately I can not agree with you guys.Will call everythingDone as soon as one deferred gets rejected, even if there are other deferreds that are pending.Heres the full script (I recommend http://jsfiddle.net/):It this a bug? I would like to use this like the gentleman above described it.Maybe someone can find this useful:everythingDone isn't called in case of any reject$.when alone makes it possible for a callback to be called when every promises passed to it are resolved/rejected. Normally, $.when takes a variable number of arguments, using .apply makes it possible to pass it an array of arguments, it's very powerful. For more info on .apply: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/applyThanks for your elegant solution: Just one point: When using resolveWith to get some parameters, it breaks because of the initial promise set to undefined. What i did to make it work:

What do curly braces inside of function parameter lists do in es6?

Nathan

[What do curly braces inside of function parameter lists do in es6?](https://stackoverflow.com/questions/37661166/what-do-curly-braces-inside-of-function-parameter-lists-do-in-es6)

I keep seeing functions that look like this in a codebase I'm working on:What exactly is this doing? I'm having a hard time finding it on google, because I'm not even sure what this is called, or how to describe it in a google search.

2016-06-06 15:24:19Z

I keep seeing functions that look like this in a codebase I'm working on:What exactly is this doing? I'm having a hard time finding it on google, because I'm not even sure what this is called, or how to describe it in a google search.It is destructuring, but contained within the parameters.  The equivalent without the destructuring would be:This is passing an object as a property. It is basically shorthand forAnother way of using this technique without parameters is the following, let's consider then for a second that someObject does contain those properties.It is an object destructuring assignment. Like me, you may have found it surprising because ES6 object destructuring syntax looks like, but does NOT behave like object literal construction. It supports the very terse form you ran into, as well as renaming the fields and default arguments:Essentially, it's {oldkeyname:newkeyname=defaultvalue,...}. ':' is NOT the key/value separator; '=' is.Some fallout of this language design decision is that you might have to do things like The extra parens prevent the left curly braces parsing as a block, and the leading semicolon prevents the parens from getting parsed as a function call to a function on the previous line.For more info see:

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignmentBeware, key errors during object destructuring assignment do NOT throw; you just end up with "undefined" values, whether it's a key error or some other error that got silently propagated as 'undefined'.

Call Javascript function from URL/address bar

DazManCat

[Call Javascript function from URL/address bar](https://stackoverflow.com/questions/4163879/call-javascript-function-from-url-address-bar)

Is it possible to call a javascript function from the URL? I am basically trying to leverage JS methods in a page I don't have access to the source.Something like: http://www.example.com/mypage.aspx?javascript:printHelloWorld()I know if you put javascript:alert("Hello World"); into the address bar it will work.I suspect the answer to this is no but, just wondered if there was a way to do it.

2010-11-12 10:51:28Z

Is it possible to call a javascript function from the URL? I am basically trying to leverage JS methods in a page I don't have access to the source.Something like: http://www.example.com/mypage.aspx?javascript:printHelloWorld()I know if you put javascript:alert("Hello World"); into the address bar it will work.I suspect the answer to this is no but, just wondered if there was a way to do it.There isn't from a hyperlink, no.  Not unless the page has script inside specifically for this and it's checking for some parameter....but for your question, no, there's no built-in support in browsers for this.There are however bookmarklets you can bookmark to quickly run JavaScript functions from your address bar; not sure if that meets your needs, but it's as close as it gets.Write in address bar  Make sure you write in the beginning: javascript:  You can use Data URIs.

For example:

data:text/html,<script>alert('hi');</script>For more information visit: https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs/test.html#alert('heello')you may also place the followinngto your html-code, and when you click on 'Click me' hyperlink, javascript will appear in url-bar and Alert dialog will showAbout the window.location.hash property:

Return the anchor part of a URL.

Exmaple 2:Example 3:you can use like this situation: 

for example, you have a page:  http://www.example.com/page.php

then in that page.php, insert this code:then, whenever you visit this url: http://www.example.com/page.php?doaction=blablathen the alert will be automatically called.Using Eddy's answer worked very well as I had kind of the same problem.

Just call your url with the parameters : "www.mypage.html#myAnchor"Then, in mypage.html :

(![]+[])[+[]]… Explain why this works

cdxf

[(![]+[])[+[]]… Explain why this works](https://stackoverflow.com/questions/4170978/explain-why-this-works)

The output of this code is: fail. Why?  By the way, (![]+[])[+!+[]] == 'false'[1], right?. But why ![]+[] == "false" and why +!+[] == 1 ?

2010-11-13 04:29:53Z

The output of this code is: fail. Why?  By the way, (![]+[])[+!+[]] == 'false'[1], right?. But why ![]+[] == "false" and why +!+[] == 1 ?As @Mauricio commented (![]+[])[+[]] is "f" (the first char of "false"), (![]+[])[+!+[]]) is "a", etc...How does it work?Let's examine the first character, 'f':The first part of the expression—between parentheses—is composed by ![]+[], the first operand of the Addition operator is ![] and it will produce false, because an array object—as any other Object instance—is truthy, and applying the Logical (!) NOT unary operator, it produces the value false, for example.After it, we have the second operand of the addition, an empty Array, [], this is made just to convert the false value to String, because the string representation of an empty array is just an empty string, is equivalent to:The last part, the pair of square brackets after the parentheses, they are the property accessor, and they receive an expression, which is formed by the Unary Plus Operator applied to an empty array again.What the Unary Plus Operator does is type conversion, to Number, for example:One more time, this is applied to an empty Array, and as I said before, the String representation of an Array is an empty string, and when you convert an empty string to Number, it is converted to zero:Therefore we can "decode" the expression to in some steps:Note that accessing characters by using the bracket notation on String values was not part of the ECMAScript 3rd. Edition Specification, (that's why the charAt method existed).However this kind of "index properties" that represent the characters of a string were standardized on ECMAScript 5, and even before the standardization the feature was available in a good number of browsers (even in IE8 (standards mode)).

How do I create an abstract base class in JavaScript?

Sabya

[How do I create an abstract base class in JavaScript?](https://stackoverflow.com/questions/597769/how-do-i-create-an-abstract-base-class-in-javascript)

Is it possible to simulate abstract base class in JavaScript? What is the most elegant way to do it?Say, I want to do something like: -It should output: 'bark', 'meow'

2009-02-28 09:06:19Z

Is it possible to simulate abstract base class in JavaScript? What is the most elegant way to do it?Say, I want to do something like: -It should output: 'bark', 'meow'One simple way to create an abstract class is this:The Animal "class" and the say method are abstract.Creating an instance would throw an error: This is how you "inherit" from it:Dog looks just like it.And this is how your scenario plays out:Fiddle here (look at the console output).According to ES6, you can use JavaScript classes and inheritance to accomplish what you need.Reference: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/ClassesFirst of all, we define our abstract class. This class can't be instantiated, but can be extended.

We can also define functions that must be implemented in all classes that extends this one.After that, we can create our concrete Classes. These classes will inherit all functions and behaviour from abstract class.And the results...Do you mean something like this:You might want to check out Dean Edwards' Base Class: http://dean.edwards.name/weblog/2006/03/base/Alternatively, there is this example / article by Douglas Crockford on classical inheritance in JavaScript: http://www.crockford.com/javascript/inheritance.htmlCertainly. There are about a thousand ways to implement class/instance systems in JavaScript. Here is one:That's not really an abstract base class of course. Do you mean something like:This isn't guaranteed to work as __proto__ isn't a standard variable, but it works at least in Firefox and Safari.If you don't understand how it works, read about the prototype chain.You can create abstract classes by using object prototypes, a simple example can be as follows : You can change above method or not, it is up to you when you implement it. For a detailed observation, you may want to visit here.Question is quite old, but I created some possible solution how to create abstract "class" and block creation of object that type.As You can see last object give us error, it is because Animal in prototype has property abstract. To be sure it is Animal not something which has Animal.prototype in prototype chain I do:So I check that my closest prototype object has abstract property, only object created directly from Animal prototype will have this condition on true. Function hasOwnProperty checks only properties of current object not his prototypes, so this gives us 100% sure that property is declared here not in prototype chain.In my proposition we not have to change constructor every time after Object.create like it is in current best answer by @Jordão.Solution also enables to create many abstract classes in hierarchy, we need only to create abstract property in prototype.Another thing you might want to enforce is making sure your abstract class is not instantiated. You can do that by defining a function that acts as FLAG ones set as the Abstract class constructor. This will then try to construct the FLAG which will call its constructor containing exception to be thrown. Example below:})()Javascript can have inheritance, check out the URL below:http://www.webreference.com/js/column79/AndrewWe can use Factory design pattern in this case. Javascript use prototype to inherit the parent's members.Define the parent class constructor.And then create children class.Then define the children class constructor.Test it.Here's the Codepen link for the full example coding.I think All Those answers specially first two (by  some and jordão) answer the question clearly with conventional prototype base JS concept.

Now as you want the animal class constructor to behave  according to the passed parameter to the construction, I think this is very much similar to basic behavior of  Creational Patterns for example Factory Pattern. Here i made a little approach to make it work that way.If you want to make sure that your base classes and their members are strictly abstract here is a base class that does this for you:Strict mode makes it impossible to log the caller in the throwAbstract method but the error should occur in a debug environment that would show the stack trace.

Difference between jQuery vs. AngularJS vs. Node.js [closed]

K Split X

[Difference between jQuery vs. AngularJS vs. Node.js [closed]](https://stackoverflow.com/questions/41234070/difference-between-jquery-vs-angularjs-vs-node-js)

I'm just starting web development, and so far I know:Then what is jQuery, AngularJS, and Node.js?After doing a quick search, I found jQuery is a "JavaScript library", 

AngularJS is "JavaScript-based open-source front-end web application framework", and Node.js is "JavaScript runtime environment".They seem to all be related to JavaScript, so are they new languages? What does 'framework/library' mean?A simple answer would be appreciated. (I just starting web programming, but I am familiar with programming).

2016-12-20 02:43:03Z

I'm just starting web development, and so far I know:Then what is jQuery, AngularJS, and Node.js?After doing a quick search, I found jQuery is a "JavaScript library", 

AngularJS is "JavaScript-based open-source front-end web application framework", and Node.js is "JavaScript runtime environment".They seem to all be related to JavaScript, so are they new languages? What does 'framework/library' mean?A simple answer would be appreciated. (I just starting web programming, but I am familiar with programming).jQuery is a library (client side)It makes things like HTML document traversal and manipulation, event handling, animation, and Ajax much simpler with an easy-to-use API that works across a multitude of browsers.AngularJS is an MVC framework (client side)It lets you use HTML as your template language and lets you extend HTML's syntax to express your application's components clearly and succinctly. AngularJS's data binding and dependency injection eliminate much of the code you would otherwise have to write. And it all happens within the browser, making it an ideal partner with any server technology. AngularJS was originally started as a project in Google, but now it is an open source framework.Node.js is a platform and runtime environment (server side)Node.js also provides a rich library of various JavaScript modules which simplifies the development of web applications using Node.js to a great extent. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient, perfect for data-intensive real-time applications that run across distributed devices.Library vs. FrameworkLibraryA collection of functions which are useful when writing web applications. Your code is in charge and it calls into the library when it sees fit. E.g., jQuery.FrameworkA particular implementation of a web application, where your code fills in the details. The framework is in charge, and it calls into your code when it needs something application-specific. E.g., AngularJS, Durandal, Ember.js, etc.In simple words,The major difference of library vs. framework in simple words:

Framework imposes certain architecture and expects application to follow its expectations

Library is a collection of low-level building blocks often providing granular functions aimed to solve very specific problems (i.e jquery.post() function)*jQueryjQuery is a library that does a lot of things for you. It contains a lot of handy, commonly-used functions so that you don't have to write this code yourself. It's sort of the difference between being a carpenter in the stone age, or having an array of power tools at your disposal.AngularJSAngularJS is a framework used to build front-end, graphical user interfaces (GUIs) for interactive web sites and web applications. It makes a powerful combination when used alongside Node.jsNode.jsNode is a framework used to build back-end web services, such as API REST endpoints that pull data for you in the background. You can hook up buttons and GUI elements to these endpoints using AngularJS to build rich, data-driven web applications and web reports. Being RESTful, these services wait around until the front end sends them a request (the user clicks a button) and they execute a database query or read a file and spit some data back out, which the web application can then display to the user.Frameworks in generalFrameworks in the earlier carpenter analogy are like contracting a team of professional builders to do the work for you. You describe the job in sufficient detail, and they take over and actually get it done. Thus, your task is reduced to coming up with the job specifications in the correct language for the team of builders to understand, rather than doing the job yourself.AngularJS would be like the interior design team along with electric, and Node.js would be everything else. Oversimplified? Maybe. But you asked for a simple explanation.So you could think of AngularJS and Node.js as opposites, but they can be used together in the same application or project. They fill different purposes, but they both use JavaScript (and jQuery to some extent) to do it.Look here for more information.Here are why they are getting more popular day by day:jQueryAngularJSNode.jsYou use HTML, CSS, and JavaScript to create interactive web sites.jQuery is a tool written in JavaScript.AngularJS is a tool written in JavaScript.React is a tool written in JavaScript.These tools help you manage the interactions between the HTML, CSS, and JavaScript according to their own rules. Once a tool becomes really large, it might take on a name like "library" or "framework" depending on its characteristics.We often run JavaScript in a web browser. But as of a few years ago, this thing called Node.js came along that allowed us to easily run JavaScript outside of the browser. I like to think of it as "a program that runs JavaScript outside of the browser" (which means... there's no HTML or CSS to look at).

Getting query parameters from react-router hash fragment

Christopher Robin

[Getting query parameters from react-router hash fragment](https://stackoverflow.com/questions/29852998/getting-query-parameters-from-react-router-hash-fragment)

I'm using react and react-router for my application on the client side. I can't seem to figure out how to get the following query parameters from a url like:My routes look like this (the path is totally wrong I know):My route is working fine but I'm just not sure how to format the path to get the parameters I want. Appreciate any help on this!

2015-04-24 16:42:02Z

I'm using react and react-router for my application on the client side. I can't seem to figure out how to get the following query parameters from a url like:My routes look like this (the path is totally wrong I know):My route is working fine but I'm just not sure how to format the path to get the parameters I want. Appreciate any help on this!Note: Copy / Pasted from comment. Be sure to like the original post! Writing in es6 and using react 0.14.6 / react-router 2.0.0-rc5. I use this command to lookup the query params in my components:It creates a hash of all available query params in the url.For React-Router v4, see this answer. Basically, use this.props.location.search to get the query string and parse with the query-string package or URLSearchParams:OLD (pre v4):Writing in es6 and using react 0.14.6 / react-router 2.0.0-rc5. I use this command to lookup the query params in my components:It creates a hash of all available query params in the url.UPDATE (React Router v4+): this.props.location.query in React Router 4 has been removed (currently using v4.1.1) more about the issue here: https://github.com/ReactTraining/react-router/issues/4410Looks like they want you to use your own method to parse the query params, currently using this library to fill the gap: https://github.com/sindresorhus/query-stringThe above answers won't work in react-router v4. Here's what I did to solve the problem - First Install query-string which will be required for parsing. npm install -save query-stringNow in the routed component you can access the un-parsed query string like this this.props.location.search You can cross check it by logging in the console.  Finally parse to access the query parameters So if query is like ?hello=worldconsole.log(parsed.hello) will log worldupdate 2017.12.25"react-router-dom": "^4.2.2"url like BrowserHistory: http://localhost:3000/demo-7/detail/2?sort=nameHashHistory: http://localhost:3000/demo-7/#/detail/2?sort=namewith query-string dependency:results:2 {sort: "name"} home"react-router": "^2.4.1"Url like http://localhost:8080/react-router01/1?name=novaline&age=26const queryParams = this.props.location.query;queryParams is a object contains the query params: {name: novaline, age: 26}Hope that helps :)Happy coding!After reading the other answers (First by @duncan-finney and then by @Marrs) I set out to find the change log that explains the idiomatic react-router 2.x way of solving this. The documentation on using location (which you need for queries) in components is actually contradicted by the actual code. So if you follow their advice, you get big angry warnings like this:It turns out that you cannot have a context property called location that uses the location type. But you can use a context property called loc that uses the location type. So the solution is a small modification on their source as follows:You could also pass down only the parts of the location object you want in your children get the same benefit. It didn't change the warning to change to the object type. Hope that helps.you do not need to add any additional module just in your component that has a url address like this:http://localhost:3000/#/?authority'you can try the following simple code:Simple js solution:And you can call it from anywhere using:Hope this helps.You may get the following error while creating an optimized production build when using query-string module.To overcome this, kindly use the alternative module called stringquery which does the same process well without any issues while running the build.

How to change the pop-up position of the jQuery DatePicker control

gfrizzle

[How to change the pop-up position of the jQuery DatePicker control](https://stackoverflow.com/questions/662220/how-to-change-the-pop-up-position-of-the-jquery-datepicker-control)

Any idea how to get the DatePicker to appear at the end of the associated text box instead of directly below it? What tends to happen is that the text box is towards the bottom of the page and the DatePicker shifts up to account for it and totally covers the text box. If the user wants to type the date instead of pick it, they can't. I'd rather have it appear just after the text box so it doesn't matter how it adjusts vertically.Any idea how to control the positioning? I didn't see any settings for the widget, and I haven't had any luck tweaking the CSS settings, but I could easily be missing something.

2009-03-19 13:36:27Z

Any idea how to get the DatePicker to appear at the end of the associated text box instead of directly below it? What tends to happen is that the text box is towards the bottom of the page and the DatePicker shifts up to account for it and totally covers the text box. If the user wants to type the date instead of pick it, they can't. I'd rather have it appear just after the text box so it doesn't matter how it adjusts vertically.Any idea how to control the positioning? I didn't see any settings for the widget, and I haven't had any luck tweaking the CSS settings, but I could easily be missing something.The accepted answer for this question is actually not for the jQuery UI Datepicker.  To change the position of the jQuery UI Datepicker just modify .ui-datepicker in the css file.  The size of the Datepicker can also be changed in this way, just adjust the font size.Here's what I'm using:You may also want to add a bit more to the left margin so it's not right up against the input field.I do it directly in the CSS:My date input fields are all 100px wide. I also added the z-index so the calendar also appears above AJAX popups.I don't modify the jquery-ui CSS file; I overload the class in my main CSS file, so I can change the theme or update the widget without having to re-enter my specific mods.Here is my variation of Datepicker calendar aligning. I think that it's pretty nice, because you can control positioning via jQuery UI Position util.One restriction: jquery.ui.position.js required.Code:Here is another variation that works well for me, adjust the rect.top + 40, rect.left + 0 to suit your needs:This works for me:First I think there should be a afterShowing method in the datepicker object, where you could change the position after jquery has done all its voodoo in the _showDatepicker method. Additionally, a parameter called preferedPosition would be also desirable, so you could set it and jquery modify it in case the dialog is rendered outside the viewport.There's a "trick" to do this last thing. If you study the _showDatepicker method, you will see the use of a private variable $.datepikcer._pos. That variable will be setup if nobody has set it up before. If you modify that variable before showing the dialog, Jquery will take it and will try to allocate the dialog in that position, and if it renders out of the screen, it will adjust it to make sure it is visible. Sounds good, eh?Problem is; _pos is private, but if you don't mind that. You can:But be careful of Jquery-ui updates, because a change in the internal implementation of the _showDatepicker might break your code.I needed to position the datepicker according to a parent div within which my borderless input control resided. To do it, I used the "position" utility included in jquery UI core. I did this in the beforeShow event. As others commented above, you can't set the position directly in beforeShow, as the datepicker code will reset the location after finishing the beforeShow function. To get around that, simply set the position using setInterval. The current script will complete, showing the datepicker, and then the repositioning code will run immediately after the datepicker is visible.  Though it should never happen, if the datepicker isn't visible after .5 seconds, the code has a fail-safe to give up and clear the interval.bind focusin after using datepicker

change css of datepicker`s widget

wish helpi fixed it with my custom jquery code.here is my code.here "40" is my expected pixel, you may change with yours.fix show position problem daterangepicker.jQuery.jsA very simple jquery function.I spent a ridiculous amount of time trying to figure this problem out for several pages of a new site I'm developing and nothing seemed to work (including any of the various solutions presented above that I implemented.  I'm guessing jQuery has just changed things up enough since they were suggested that the solutions dont' work any longer.  I don't know.  Honestly, I don't understand why there isn't something simple implemented into the jQuery ui to configure this, as it seems to be a fairly large issue with the calendar always popping up at some position considerably far down the page from the input to which it is attached.Anyhow, I wanted an end solution that was generic enough that I could use it anywhere and it would work. I seem to have finally come to a conclusion that avoids some of the more complicated and jQuery-code-specific answers above:jsFiddle:  http://jsfiddle.net/mu27tLen/HTML:JS:Essentially I attach a new style tag to the head prior to every datepicker "show" event (deleting the previous one, if present).  This method of doing things gets around a large majority of the issues that I ran into during development.Tested on Chrome, Firefox, Safari, and IE>8 (as IE8 doesn't work well with jsFiddle and I'm losing my gusto for caring about 

I know that this is a mix of jQuery and javascript contexts, but at this point I just don't want to put the effort into converting it to jQuery.  Would be simple, I know.  I'm so done with this thing right now.  Hope someone else can benefit from this solution.They changed the classname to ui-datepicker-triggerSo this works in jquery 1.11.xI took it from

((How to control positioning of jQueryUI datepicker))$.extend($.datepicker, { _checkOffset: function(inst, offset, isFixed) { return offset } });it works !!!It's also worth noting that if IE falls into quirks mode, your jQuery UI components, and other elements, will be positioned incorrectly.To make sure you don't fall into quirks mode, make sure you set your doctype correctly to the latest HTML5.Using transitional makes a mess of things. Hopefully this will save someone some time in the future.This puts the functionality into a method named function, allowing for your code to encapsulate it or for the method to be made a jquery extension. Just used on my code, works perfectlyWithin Jquery.UI, just update the _checkOffset function, so that viewHeight is added to offset.top, before offset is returned.  Or you can use the focus event on your dateSelect object and position api together. You can swap top and bottom and left for right or center (or really anything you want from the position api). This way you don't need an interval or any insanely complex solution and you can configure the layout to suit your needs depending on where the input is.

What is the performance of Objects/Arrays in JavaScript? (specifically for Google V8)

BMiner

[What is the performance of Objects/Arrays in JavaScript? (specifically for Google V8)](https://stackoverflow.com/questions/8423493/what-is-the-performance-of-objects-arrays-in-javascript-specifically-for-googl)

Performance associated with Arrays and Objects in JavaScript (especially Google V8) would be very interesting to document.  I find no comprehensive article on this topic anywhere on the Internet.I understand that some Objects use classes as their underlying data structure. If there are a lot of properties, it is sometimes treated as a hash table?I also understand that Arrays are sometimes treated like C++ Arrays (i.e. fast random indexing, slow deletion and resizing).  And, other times, they are treated more like Objects (fast indexing, fast insertion/removal, more memory).  And, maybe sometimes they are stored as linked lists (i.e. slow random indexing, fast removal/insertion at the beginning/end)What is the precise performance of Array/Object retrievals and manipulations in JavaScript? (specifically for Google V8)More specifically, what it the performance impact of:Any articles or links for more details would be appreciated, as well.  :)EDIT: I am really wondering how JavaScript arrays and objects work under the hood.  Also, in what context does the V8 engine "know" to "switch-over" to another data structure?For example, suppose I create an array with...What's really going on here?Or... what about this...???For conventional arrays, the performance would be terrible; whereas, if a LinkedList was used... not so bad.

2011-12-07 22:26:14Z

Performance associated with Arrays and Objects in JavaScript (especially Google V8) would be very interesting to document.  I find no comprehensive article on this topic anywhere on the Internet.I understand that some Objects use classes as their underlying data structure. If there are a lot of properties, it is sometimes treated as a hash table?I also understand that Arrays are sometimes treated like C++ Arrays (i.e. fast random indexing, slow deletion and resizing).  And, other times, they are treated more like Objects (fast indexing, fast insertion/removal, more memory).  And, maybe sometimes they are stored as linked lists (i.e. slow random indexing, fast removal/insertion at the beginning/end)What is the precise performance of Array/Object retrievals and manipulations in JavaScript? (specifically for Google V8)More specifically, what it the performance impact of:Any articles or links for more details would be appreciated, as well.  :)EDIT: I am really wondering how JavaScript arrays and objects work under the hood.  Also, in what context does the V8 engine "know" to "switch-over" to another data structure?For example, suppose I create an array with...What's really going on here?Or... what about this...???For conventional arrays, the performance would be terrible; whereas, if a LinkedList was used... not so bad.UPDATE: Note that JSPref is currently down(i have saved a copy of the test case, and will update the answer once JSPref is fixed / a successor is found)Hmm... maybe an overkill for the answer... but I created a test suite, precisely to explore these issues (and more) (archived copy).And in that sense, you can see the performance issues in this 50+ test case tester (it will take a long time).Also as its name suggest, it explores the usage of using the native linked list nature of the DOM structure.(Currently down, rebuilt in progress) More details on my blog regarding this.The summary is as followedNote: These metrics applies only to large array/objects which v8 does not "entirely optimise out". There can be very isolated optimised performance cases for array/object size less then an arbitrary size (24?). More details can be seen extensively across several google IO videos.Note 2: These wonderful performance results are not shared across browsers, especially 

*cough* IE. Also the test is huge, hence i yet to fully analyze and evaluate the results : please edit it in =)Updated Note (dec 2012): Google representatives have videos on youtubes describing the inner workings of chrome itself (like when it switches from a linkedlist array to a fixed array, etc), and how to optimize them. See GDC 2012: From Console to Chrome for more.Updated Note (feb 2013): Thx @badunk, for providing the video link at the exact pointUpdated Note (june 2016): Thx @Benedikt, regarding array push performance difference in fixed / dynamic arrays.At a basic level that stays within the realms of JavaScript, properties on objects are much more complex entities. You can create properties with setters/getters, with differing enumerability, writability, and configurability. An item in an array isn't able to be customized in this way: it either exists or it doesn't. At the underlying engine level this allows for a lot more optimization in terms of organizing the memory that represents the structure.In terms of identifying an array from an object (dictionary), JS engines have always made explicit lines between the two. That's why there's a multitude of articles on methods of trying to make a semi-fake Array-like object that behaves like one but allows other functionality. The reason this separation even exists is because the JS engines themselves store the two differently.Properties can be stored on an array object but this simply demonstrates how JavaScript insists on making everything an object. The indexed values in an array are stored differently from any properties you decide to set on the array object that represents the underlying array data.Whenever you're using a legit array object and using one of the standard methods of manipulating that array you're going to be hitting the underlying array data. In V8 specifically, these are essentially the same as a C++ array so those rules will apply. If for some reason you're working with an array that the engine isn't able to determine with confidence is an array, then you're on much shakier ground. With recent versions of V8 there's more room to work though. For example, it's possible to create a class that has Array.prototype as its prototype and still gain efficient access to the various native array manipulation methods. But this is a recent change.Specific links to recent changes to array manipulation may come in handy here:As a bit of extra, here's Array Pop and Array Push directly from V8's source, both implemented in JS itself:I'd like to complement existing answers with an investigation to the question of how implementations behave regarding growing arrays: If they implement them the "usual" way, one would see many quick pushes with rare, interspersed slow pushes at which point the implementation copies the internal representation of the array from one buffer to a larger one.You can see this effect very nicely, this is from Chrome:Even though each push is profiled, the output contains only those that take time above a certain threshold. For each test I customized the threshold to exclude all the pushes that appear to be representing the fast pushes.So the first number represents which element has been inserted (the first line is for the 17th element), the second is how long it took (for many arrays the benchmark is done for in parallel), and the last value is the division of the first number by that of the one in the former line.All lines that have less than 2ms execution time are excluded for Chrome.You can see that Chrome increases array size in powers of 1.5, plus some offset to account for small arrays.For Firefox, it's a power of two:I had to put the threshold up quite a bit in Firefox, that's why we start at #126.With IE, we get a mix:It's a power of two at first and then it moves to powers of five thirds.So all common implementations use the "normal" way for arrays (instead of going crazy with ropes, for example).Here's the benchmark code and here's the fiddle it's in.While running under node.js 0.10 (built on v8) I was seeing CPU usage that seemed excessive for the workload. I traced one performance problem to a function that was checking for the existence of a string in an array. So I ran some tests.Loading 91k entries into an array (with validate & push) is faster than setting obj[key]=value.In the next test, I looked up every hostname in the list one time (91k iterations, to average the lookup time):The application here is Haraka (a SMTP server) and it loads the host_list once at startup (and after changes) and subsequently performs this lookup millions of times during operation. Switching to an object was a huge performance win.

JavaScript query string [closed]

core

[JavaScript query string [closed]](https://stackoverflow.com/questions/647259/javascript-query-string)

Is there any JavaScript library that makes a dictionary out of the query string, ASP.NET style?Something which can be used like:Is "query string" called something else outside the .NET realm? Why isn't location.search broken into a key/value collection ?EDIT: I have written my own function, but does any major JavaScript library do this?

2009-03-15 03:50:41Z

Is there any JavaScript library that makes a dictionary out of the query string, ASP.NET style?Something which can be used like:Is "query string" called something else outside the .NET realm? Why isn't location.search broken into a key/value collection ?EDIT: I have written my own function, but does any major JavaScript library do this?Maybe http://plugins.jquery.com/query-object/?This is the fork of it https://github.com/sousk/jquery.parsequery#readme.You can extract the key/value pairs from the location.search property, this property has the part of the URL that follows the ? symbol, including the ? symbol.For querystring ?a=1&b=2&c=3&d&eit returns:See the original answer at How can I get query string values in JavaScript?After finding this post, when looking myself I thought I should add that I don't think the most up-voted solution is the best. It doesn't handle array values (such as ?a=foo&a=bar - in this case I would expect getting a to return ['foo', 'bar']). It also as far as I can tell doesn't take into account encoded values - such as hex character encoding where %20 represents a space (example: ?a=Hello%20World) or the plus symbol being used to represent a space (example: ?a=Hello+World).Node.js offers what looks like a very complete solutions to querystring parsing. It would be easy to take out and use in your own project as its fairly well isolated and under a permissive licence.The code for it can be viewed here: https://github.com/joyent/node/blob/master/lib/querystring.jsThe tests that Node has can be seen here:

https://github.com/joyent/node/blob/master/test/simple/test-querystring.js I would suggest trying some of these with the popular answer to see how it handles them.There is also a project that I was involved in to specifically add this functionality. It is a port of the Python standard lib query string parsing module. My fork can be found here: https://github.com/d0ugal/jquery.qeereeOr you could use the library sugar.js.From sugarjs.com:Example:If you have the querystring on hand, use this:It is worth noting, the library that John Slegers mentioned does have a jQuery dependency, however here is a version that is vanilla Javascript.https://github.com/EldonMcGuinness/querystring.jsI would have simply commented on his post, but I lack the reputation to do so. :/The example below process the following, albeit irregular, query string:This Gist by Eldon McGuinness is by far the most complete implementation of a JavaScript query string parser that I've seen so far.Unfortunately, it's written as a jQuery plugin. I rewrote it to vanilla JS and made a few improvements :See also this Fiddle.I like to keep it simple, readable and small.Example:Function I wrote for a requirement similar to this with pure javascript string manipulationUsage:If you are using lodash + ES6, here is a one line solution:

_.object(window.location.search.replace(/(^\?)/, '').split('&').map(keyVal => keyVal.split('=')));

Okay, since everyone is ignoring my actual question, heh, I'll post mine too! Here's what I have:And the tests:Mind you thought, JavaScript isn't my native tongue. Anyway, I'm looking for a JavaScript library (e.g. jQuery, Prototype) that already has one written. :)Building on the answer by @CMS I have the following (in CoffeeScript which can easily be converted to JavaScript):You can easily grab what you need with:The win here is an object-oriented interface (instead of functional) and it can be done on any string (not just location.search).If you are already using a JavaScript library this function make already exist. For example here is Prototype's version

How to transform black into any given color using only CSS filters

glebm

[How to transform black into any given color using only CSS filters](https://stackoverflow.com/questions/42966641/how-to-transform-black-into-any-given-color-using-only-css-filters)

My question is: given a target RGB color, what is the formula to recolor black (#000) into that color using only CSS filters?For an answer to be accepted, it would need to provide a function (in any language) that would accept the target color as an argument and return the corresponding CSS filter string.The context for this is the need to recolor an SVG inside a background-image. In this case, it is to support certain TeX math features in KaTeX:  https://github.com/Khan/KaTeX/issues/587.If the target color is #ffff00 (yellow), one correct solution is:(demo)You can still get an Accepted answer by submitting a non brute-force solution!

2017-03-23 03:18:44Z

My question is: given a target RGB color, what is the formula to recolor black (#000) into that color using only CSS filters?For an answer to be accepted, it would need to provide a function (in any language) that would accept the target color as an argument and return the corresponding CSS filter string.The context for this is the need to recolor an SVG inside a background-image. In this case, it is to support certain TeX math features in KaTeX:  https://github.com/Khan/KaTeX/issues/587.If the target color is #ffff00 (yellow), one correct solution is:(demo)You can still get an Accepted answer by submitting a non brute-force solution!@Dave was the first to post an answer to this (with working code), and his answer has been an invaluable source of shameless copy and pasting inspiration to me. This post began as an attempt to explain and refine @Dave's 

answer, but it has since evolved into an answer of its own.My method is significantly faster. According to a jsPerf benchmark on randomly generated RGB colors, @Dave's algorithm runs in 600 ms, while mine runs in 30 ms. This can definitely matter, for instance in load time, where speed is critical.Furthermore, for some colors, my algorithm performs better:We'll begin by writing some Javascript.Explanation:The heart of CSS/SVG filters are filter primitives, which represent low-level modifications to an image.The filters grayscale(), sepia(), and saturate() are implemented by the filter primative <feColorMatrix>, which performs matrix multiplication between a matrix specified by the filter (often dynamically generated), and a matrix created from the color. Diagram:There are some optimizations we can make here:Implementation:(We use temporary variables to hold the results of each row multiplication, because we do not want changes to this.r, etc. affecting subsequent calculations.)Now that we have implemented <feColorMatrix>, we can implement grayscale(), sepia(), and saturate(), which simply invoke it with a given filter matrix:The hue-rotate() filter is implemented by <feColorMatrix type="hueRotate" />.The filter matrix is calculated as shown below:For instance, element a00 would be calculated like so:Some notes:Implementation:The brightness() and contrast() filters are implemented by <feComponentTransfer> with <feFuncX type="linear" />.Each <feFuncX type="linear" /> element accepts a slope and intercept attribute. It then calculates each new color value through a simple formula:This is easy to implement:Once this is implemented, brightness() and contrast() can be implemented as well:The invert() filter is implemented by <feComponentTransfer> with <feFuncX type="table" />.The spec states:An explanation of this formula:Thus, we can simplify the formula to:Inlining the table's values, we are left with:One more simplification:The spec defines C and C' to be RGB values, within the bounds 0-1 (as opposed to 0-255). As a result, we must scale down the values before computation, and scale them back up after.Thus we arrive at our implementation:@Dave's code generates 176,660 filter combinations, including:It calculates filters in the following order:It then iterates through all computed colors. It stops once it has found a generated color within tolerance (all RGB values are within 5 units from the target color).However, this is slow and inefficient. Thus, I present my own answer.First, we must define a loss function, that returns the difference between the color produced by a filter combination, and the target color. If the filters are perfect, the loss function should return 0.We will measure color difference as the sum of two metrics:The loss function will take one argument – an array of filter percentages.We will use the following filter order:Implementation:We will try to minimize the loss function, such that:The SPSA algorithm (website, more info, paper, implementation paper, reference code) is very good at this. It was designed to optimize complex systems with local minima, noisy/nonlinear/ multivariate loss functions, etc. It has been used to tune chess engines. And unlike many other algorithms, the papers describing it are actually comprehensible (albeit with great effort).Implementation:I made some modifications/optimizations to SPSA:I use SPSA in a two-stage process:Implementation:Warning: Do not mess with the SPSA code, especially with its constants, unless you are sure you know what you are doing.The important constants are A, a, c, the initial values, the retry thresholds, the values of max in fix(), and the number of iterations of each stage. All of these values were carefully tuned to produce good results, and randomly screwing with them will almost definitely reduce the usefulness of the algorithm.If you insist on altering it, you must measure before you "optimize".First, apply this patch.Then run the code in Node.js. After quite some time, the result should be something like this:Now tune the constants to your heart's content.Some tips:This was quite a trip down the rabbit hole but here it is!EDIT: This solution is not intended for production use and only illustrates an approach that can be taken to achieve what OP is asking for. As is, it is weak in some areas of the color spectrum. Better results can be achieved by more granularity in the step iterations or by implementing more filter functions for reasons described in detail in @MultiplyByZer0's answer.EDIT2: OP is looking for a non brute force solution. In that case it's pretty simple, just solve this equation:whereNote : OP asked me to undelete, but the bounty shall go to Dave's answer.I know it's not what was asked in the body of the question, and certainly not what we were all waiting for, but there is one CSS filter which does exactly this : 

drop-shadow()Caveats : You can make this all very simple by just using a SVG filter referenced from CSS. You only need a single feColorMatrix to do a recolor. This one recolors to yellow. The fifth column in the feColorMatrix holds the RGB target values on the unit scale. (for yellow - it's 1,1,0)I noticed that the example of the treatment via an SVG filter was incomplete, I wrote mine (which works perfectly): (see Michael Mullany answer) 

so here is the way to get any color you want :Here is a  second solution, by using SVG Filter only in code => URL.createObjectURLjust useThe fill property in CSS is for filling in the color of a SVG shape.

The fill property can accept any CSS color value.

How can I replace a regex substring match in Javascript?

dave

[How can I replace a regex substring match in Javascript?](https://stackoverflow.com/questions/3598042/how-can-i-replace-a-regex-substring-match-in-javascript)

That replaces the entire string str with 1. I want it to replace the matched substring instead of the whole string. Is this possible in Javascript?

2010-08-30 05:20:03Z

That replaces the entire string str with 1. I want it to replace the matched substring instead of the whole string. Is this possible in Javascript?Or if you're sure there won't be any other digits in the string:using str.replace(regex, $1);:Edit: adaptation regarding the commentI would get the part before and after what you want to replace and put them either side.Like:I think the simplest way to achieve your goal is this:

Google Maps API v3: How do I dynamically change the marker icon?

TedK

[Google Maps API v3: How do I dynamically change the marker icon?](https://stackoverflow.com/questions/1941260/google-maps-api-v3-how-do-i-dynamically-change-the-marker-icon)

Using Google Maps API v3, how do I programmatically change the marker icon?What I would like to do is, when someone hovers over a link - to have the corresponding marker icon on the map change colors to denote the marker in question.Essentially, the same function as what Roost does.When you hover over a home listing on the left, the corresponding marker on the right changes color

2009-12-21 16:51:53Z

Using Google Maps API v3, how do I programmatically change the marker icon?What I would like to do is, when someone hovers over a link - to have the corresponding marker icon on the map change colors to denote the marker in question.Essentially, the same function as what Roost does.When you hover over a home listing on the left, the corresponding marker on the right changes colorCall the marker.setIcon('newImage.png')... Look here for the docs.Are you asking about the actual way to do it? You could just create each div, and a add a mouseover and mouseout listener that would change the icon and back for the markers. You can also use a circle as a marker icon, for example:  and then, if you want to change the marker dynamically (like on mouseover), you can, for example:  This thread might be dead, but StyledMarker is available for API v3. Just bind the color change you want to the correct DOM event using the addDomListener() method. This example is pretty close to what you want to do. If you look at the page source, change:to something like:That should be enough to get you moving along.The Wikipedia page on DOM Events will also help you target the event that you want to capture on the client-side.Good luck (if you still need it)The GMaps Utility Library has a plugin called MapIconMaker that makes it easy to generate different marker styles on the fly.  It uses Google Charts to draw the markers. There's a good demo here that shows what kind of markers you can make with it.You can try this code

How to get something from the state / store inside a redux-saga function?

Adam Tal

[How to get something from the state / store inside a redux-saga function?](https://stackoverflow.com/questions/37772877/how-to-get-something-from-the-state-store-inside-a-redux-saga-function)

How do I access the redux state inside a saga function?Short answer:

2016-06-12 09:53:13Z

How do I access the redux state inside a saga function?Short answer:As @markerikson already says, redux-saga exposes a very useful API select() to invoke a selector on the state for getting some part of it available inside the saga. For your example a simple implementation could be:In addition to the suggested doc by @markerikson, there is a very good video tutorial by D. Abramov which explains how to use selectors with Redux. Check also this interesting thread on Twitter. This is what "selector" functions are for.  You pass them the entire state tree, and they return some piece of the state.  The code that calls the selector doesn't need to know where in the state that data was, just that it was returned.  See http://redux.js.org/docs/recipes/ComputingDerivedData.html for some examples.Within a saga, the select() API can be used to execute a selector.I used an eventChannel to dispatch an action from a callback within the generator function

Redux & RxJS, any similarities?

Oswaldo

[Redux & RxJS, any similarities?](https://stackoverflow.com/questions/34497343/redux-rxjs-any-similarities)

I know Redux is a better "implementation" of Flux, or better saying it's a redesign to simplify things (application state management).I have heard a lot about reactive programming (RxJS), but I haven't dived to learn it yet.So my question is: are there any intersection (anything in common) between this two technologies or they are complementary? ...or totally different?

2015-12-28 16:44:54Z

I know Redux is a better "implementation" of Flux, or better saying it's a redesign to simplify things (application state management).I have heard a lot about reactive programming (RxJS), but I haven't dived to learn it yet.So my question is: are there any intersection (anything in common) between this two technologies or they are complementary? ...or totally different?In short, they are very different libraries for very different purposes, but yes there are some vague similarities.Redux is a tool for managing state throughout the application. It is usually used as an architecture for UIs. Think of it as an alternative to (half of) Angular.RxJS is a reactive programming library. It is usually used as a tool to accomplish asynchronous tasks in JavaScript. Think of it as an alternative to Promises.Reactive programming is a paradigm (way of working and thinking) where data changes are observed from a distance. Data is not changed from a distance.Here is an example of changed from a distance:The Model is changed from the Controller.Here is an example of observed from a distance:In the Logger, we observe the data changes that happen in Store (from a distance), and write to the console.Redux uses the Reactive paradigm just a little bit: the Store is reactive. You do not set its content from a distance. That's why there is no store.set() in Redux. The Store observes actions from a distance, and changes itself. And the Store allows others to observe its data from a distance.RxJS also uses the Reactive paradigm, but instead of being an architecture, it gives you basic building blocks, Observables, to accomplish this "observing from a distance" pattern.To conclude, very different things for different purposes, but share some ideas.They are very different things.RxJS can be used to do Reactive Programming and is a very thorough library with 250+ operators.And Redux is as described on the github repo "Redux is a predictable state container for JavaScript apps".Redux is just a tool to handle state in apps. But in comparison you could build a full app in just RxJS.Hope this helps :)Redux is a just a state management library coming with well defined standards for update operations. As far as you stick with the standards you can keep your data flow sane and easy to reason. It also brings the ability to enhance the data flow with middlewares and store enhancers.RxJS is a toolkit for reactive programming. You can actually think of every thing happening in your app as a stream. RxJS gives a very rich tool set to manage those streams.Where RxJS and Redux intercepts? In redux you update your state with actions and obviously these actions can be treated as streams. Using a middleware like redux-observable (you don't have to) you can implement your so called "business logic" in a reactive way. Another thing is that you can create an observable from your redux store which sometimes might be easier than using an enhancer.To put it in short:Redux: Flux inspired Library used for State Management.RxJS: It is another Javascript library based on the reactive programming philosophy, used to deal with "Streams" (Observables, etc.) [Read about Reactive Programming to understand the Stream concepts].I just wanted to add some pragmatic differences from when I did Redux-inspired RxJS-code.I mapped each action type to a Subject instance.

Each stateful component will have a Subject that is then mapped into a reducer function.

All reducer streams are combined with merge and then scan outputs the state.

The default value is set with startWith just before the scan. I used publishReplay(1) for states, but might remove it later on.The react pure render function will be to only place where you produce event data by sending in all the producers/Subjects.If you have child components, you need to describe how those states are combined into yours. combineLatest might be a good starting point for that.Notable differences in implementation:I'm also working on much bigger benefits where the child components are described as streams. This means that we don't have to complect parent and child state in the reducers, since we can just ("just") recursively combine the states based on the component structure.I also think about skipping react and go with snabbdom or something else until React handles reactive states better. Why should we build our state upwards just to break it down via props again? So I will try to make a version 2 of this pattern with Snabbdom.Here's a more advanced but small snippet where the state.ts file builds the state stream. This is the ajax-form component's state which gets an object of fields (inputs) with validation rules and css styles. In this file we just use the field names (object keys) to combine all the children's states into the form state.While the code might not say much in isolation, it shows how you can build state upwards, and how you can produce dynamic events with ease. The price to pay is that you need to understand a different style of code. And I love to pay that price.

Location of parenthesis for auto-executing anonymous JavaScript functions?

Kevin Hakanson

[Location of parenthesis for auto-executing anonymous JavaScript functions?](https://stackoverflow.com/questions/3384504/location-of-parenthesis-for-auto-executing-anonymous-javascript-functions)

I was recently comparing the current version of json2.js with the version I had in my project and noticed a difference in how the function expression was created and self executed.The code used to wrap an anonymous function in parenthesis and then execute it,but now it wraps the auto-executed function in parenthesis.There is a comment by CMS in the accepted answer of Explain JavaScript’s encapsulated anonymous function syntax that「both: (function(){})(); and (function(){}()); are valid.」I was wondering what the difference is?  Does the former take up memory by leaving around a global, anonymous function?  Where should the parenthesis be located?

2010-08-02 01:39:39Z

I was recently comparing the current version of json2.js with the version I had in my project and noticed a difference in how the function expression was created and self executed.The code used to wrap an anonymous function in parenthesis and then execute it,but now it wraps the auto-executed function in parenthesis.There is a comment by CMS in the accepted answer of Explain JavaScript’s encapsulated anonymous function syntax that「both: (function(){})(); and (function(){}()); are valid.」I was wondering what the difference is?  Does the former take up memory by leaving around a global, anonymous function?  Where should the parenthesis be located?They're virtually the same. The first wraps parentheses around a function to make it a valid expression and invokes it. The result of the expression is undefined.The second executes the function and the parentheses around the automatic invocation make it a valid expression. It also evaluates to undefined.I don't think there's a "right" way of doing it, since the result of the expression is the same. In that case it doesn't matter. You are invoking an expression that resolves to a function in the first definition, and defining and immediately invoking a function in the second example. They're similar because the function expression in the first example is just the function definition.There are other more obviously useful cases for invoking expressions that resolve to functions: There isn't any difference beyond the syntax.Regarding your concerns about the second method of doing it:Consider:(function namedfunc () { ... }())namedfunc will still not be in the global scope even though you provided the name. The same goes for anonymous functions. The only way to get it in that scope would be to assign it to a variable inside the parens.The outer parens are unnecessary:But you didn't want that global declaration anyways, did you?So it it boils down to:And you can reduce it even further: the name is unnecessary since it will never be used (unless your function is recursive.. and even then you could use arguments.callee)That's the way I think about it (may be incorrect, I haven't read the ECMAScript specification yet). Hope it helps.The difference just exist because Douglas Crockford doesn't like the first style for IIFEs! (seriuosly) As you can see in this video!!.The only reason for the existence of the extra wrapping () {in both styles} is to help make that section of code Function Expression, because Function Declaration cannot be immediately called. Some scripts / minify-ers just use +, !, - & ~ instead of too parentheses. Like this:And all these are exactly the same as your alternatives. Choosing among these cases is completely on your own & makes no difference. { The ones with () produce 1 Byte larger File ;-) }

How to handle file downloads with JWT based authentication?

Marco Righele

[How to handle file downloads with JWT based authentication?](https://stackoverflow.com/questions/29452031/how-to-handle-file-downloads-with-jwt-based-authentication)

I'm writing a webapp in Angular where authentication is handled by a JWT token, meaning that every request has an "Authentication" header with all the necessary information.This works nicely for REST calls, but I don't understand how I should handle download links for files hosted on the backend (the files reside on the same server where the webservices are hosted).I can't use regular <a href='...'/> links since they won't carry any header and the authentication will fail. Same for the various incantations of window.open(...).Some solutions I thought of:All of the above are less than satisfactory. 1 is the solution I am using right now. I don't like it for two reasons: first it is not ideal security-wise, second it works but it requires quite a lot of work especially on the server: to download something I need to call a service that generates a new "random" url, stores it somewhere (possibly on the DB) for a some time, and returns it to the client. The client gets the url, and use window.open or similar with it. When requested, the new url should check if it is still valid, and then return the data.2 seems at least as much work.3 seems a lot of work, even using available libraries, and lot of potential issues. (I would need to provide my own download status bar, load the whole file in memory and then ask the user to save the file locally).The task seems a pretty basic one though, so I'm wondering if there is anything much simpler that I can use.I'm not necessarily looking for a solution "the Angular way". Regular Javascript would be fine.

2015-04-04 22:21:04Z

I'm writing a webapp in Angular where authentication is handled by a JWT token, meaning that every request has an "Authentication" header with all the necessary information.This works nicely for REST calls, but I don't understand how I should handle download links for files hosted on the backend (the files reside on the same server where the webservices are hosted).I can't use regular <a href='...'/> links since they won't carry any header and the authentication will fail. Same for the various incantations of window.open(...).Some solutions I thought of:All of the above are less than satisfactory. 1 is the solution I am using right now. I don't like it for two reasons: first it is not ideal security-wise, second it works but it requires quite a lot of work especially on the server: to download something I need to call a service that generates a new "random" url, stores it somewhere (possibly on the DB) for a some time, and returns it to the client. The client gets the url, and use window.open or similar with it. When requested, the new url should check if it is still valid, and then return the data.2 seems at least as much work.3 seems a lot of work, even using available libraries, and lot of potential issues. (I would need to provide my own download status bar, load the whole file in memory and then ask the user to save the file locally).The task seems a pretty basic one though, so I'm wondering if there is anything much simpler that I can use.I'm not necessarily looking for a solution "the Angular way". Regular Javascript would be fine.Here's a way to download it on the client using the download attribute, the fetch API, and URL.createObjectURL. You would fetch the file using your JWT, convert the payload into a blob, put the blob into an objectURL, set the source of an anchor tag to that objectURL, and click that objectURL in javascript.The value of the download attribute will be the eventual file name. If desired, you can mine an intended filename out of the content disposition response header as described in other answers.Based on this advice of Matias Woloski from Auth0, known JWT evangelist, I solved it by generating a signed request with Hawk.Quoting Woloski:Here you have an example of this technique, used for activation links.I created an API to sign my download urls:Request:Response:With a signed URL, we can get the fileRequest:Response: This way you can do it all on a single user click:I would generate tokens for download. Within angular make an authenticated request to obtain a temporary token (say an hour) then add it to the url as a get parameter. This way you can download files in any way you like (window.open ...)An additional solution: using basic authentication. Although it requires a bit of work on the backend, tokens won't be visible in logs and no URL signing will have to be implemented.An example URL could be:http://jwt:<user jwt token>@some.url/file/35/downloadExample with dummy token:http://jwt:eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIwIiwibmFtZSI6IiIsImlhdCI6MH0.KsKmQOZM-jcy4l_7NFsv1lWfpH8ofniVCv75ZRQrWno@some.url/file/35/downloadYou can then shove this in <a href="..."> or window.open("...") - the browser handles the rest.Implementation here is up to you, and is dependent on your server setup - it's not too much different from using the ?token= query parameter.Using Laravel, I went the easy route and transformed the basic authentication password into the JWT Authorization: Bearer <...> header, letting the normal authentication middleware handle the rest:An alternative to the existing "fetch/createObjectURL" and "download-token" approaches already mentioned is a standard Form POST that targets a new window.  Once the browser reads the attachment header on the server response, it will close the new tab and begin the download.  This same approach also happens to work nicely for displaying a resource like a PDF in a new tab.This has better support for older browsers and avoids having to manage a new type of token.  This will also have better long-term support than basic auth on the URL, since support for username/password on the url is being removed by browsers.On the client-side we use target="_blank" to avoid navigation even in failure cases, which is particularly important for SPAs (single page apps).The major caveat is that the server-side JWT validation has to get the token from the POST data and not from the header.  If your framework manages access to route handlers automatically using the Authentication header, you may need to mark your handler as unauthenticated/anonymous so that you can manually validate the JWT to ensure proper authorization.The form can be dynamically created and immediately destroyed so that it is properly cleaned up (note: this can be done in plain JS, but JQuery is used here for clarity) -Just add any extra data you need to submit as hidden inputs and make sure they are appended to the form.

Connecting to TCP Socket from browser using javascript

swordfish

[Connecting to TCP Socket from browser using javascript](https://stackoverflow.com/questions/12407778/connecting-to-tcp-socket-from-browser-using-javascript)

I have a vb.net application that opens a socket and listens on it. I need to communicate via this socket to that application using a javascript running on a browser. That is i need to send some data on this socket so that the app which is listening on this socket can take that data, do some stuff using some remote calls and get some more data and put it back on the socket that my javascript needs to read and print it in the browser.Ive tried, socket.io, websockify but none have proved to be useful.Hence the question, is what i am trying even possible? Is there a way that a javascript running in a browser can connect to a tcp socket and send some data and listen on it for some more data response on the socket and print it to the browser.If this is possible can some one point me in the right direction as to which would help me establish the goal.

2012-09-13 13:47:54Z

I have a vb.net application that opens a socket and listens on it. I need to communicate via this socket to that application using a javascript running on a browser. That is i need to send some data on this socket so that the app which is listening on this socket can take that data, do some stuff using some remote calls and get some more data and put it back on the socket that my javascript needs to read and print it in the browser.Ive tried, socket.io, websockify but none have proved to be useful.Hence the question, is what i am trying even possible? Is there a way that a javascript running in a browser can connect to a tcp socket and send some data and listen on it for some more data response on the socket and print it to the browser.If this is possible can some one point me in the right direction as to which would help me establish the goal.As for your problem, currently you will have to depend on XHR or websockets for this.Currently no popular browser has implemented any such raw sockets api for javascript that lets you create and access raw sockets, but a draft for the implementation of raw sockets api in JavaScript is under-way. Have a look at these links:

http://www.w3.org/TR/raw-sockets/

https://developer.mozilla.org/en-US/docs/Web/API/TCPSocketChrome now has support for raw TCP and UDP sockets in its ‘experimental’ APIs. These features are only available for extensions and, although documented, are hidden for the moment. Having said that, some developers are already creating interesting projects using it, such as this IRC client.To access this API, you’ll need to enable the experimental flag in your extension’s manifest. Using sockets is pretty straightforward, for example:This will be possible via the navigator interface as shown below:More details are outlined in the w3.org tcp-udp-sockets documentation.http://raw-sockets.sysapps.org/#interface-tcpsockethttps://www.w3.org/TR/tcp-udp-sockets/Another alternative is to use Chrome SocketsCreating connectionsSending dataReceiving dataYou can use also attempt to use HTML5 Web Sockets (Although this is not direct TCP communication):http://www.html5rocks.com/en/tutorials/websockets/basics/Your server must also be listening with a WebSocket server such as pywebsocket, alternatively you can write your own as outlined at Mozillaws2s project is aimed at bring socket to browser-side js. It is a websocket server which transform websocket to socket.ws2s schematic diagramcode sample:See jsocket. Haven't used it myself. Been more than 3 years since last update (as of 26/6/2014).* Uses flash :(From the documentation:The solution you are really looking for is web sockets.  However, the chromium project has developed some new technologies that are direct TCP connections TCP chromiumIn order to achieve what you want, you would have to write two applications (in either Java or Python, for example):It should work like thisNote 1: The above steps are a vast simplification and do not include information about error handling and keepAlive requests, in the event that either client disconnects prematurely or the server needs to inform clients that it is shutting down/restarting.Note 2: Depending on your needs, it might be possible to merge these components into one if the TCP/IP socket server in question (to which the bridge talks) is on the same machine as the server app.

Configuring region in Node.js AWS SDK

Anejah Daniels

[Configuring region in Node.js AWS SDK](https://stackoverflow.com/questions/31039948/configuring-region-in-node-js-aws-sdk)

Can someone explain how to fix a missing config error with Node.js? I've followed all the examples from the aws doc page but I still get this error no matter what.Here is my code:

2015-06-25 01:54:31Z

Can someone explain how to fix a missing config error with Node.js? I've followed all the examples from the aws doc page but I still get this error no matter what.Here is my code:How about changing the order of statements?

Update AWS config before instantiating s3 and ddI had the same issue "Missing region in config" and in my case it was that, unlike in the CLI or Python SDK, the Node SDK won't read from the ~\.aws\config file.To solve this, you have three options:JSON format:If you work with AWS CLI, you probably have a default region defined in ~/.aws/config. Unfortunately AWS SDK for JavaScript does not load it by default. To load it define env var See https://github.com/aws/aws-sdk-js/pull/1391You can specify the region when creating the dynamodb connection (haven't tried s3 but that should work too).// assign AWS credentials here in following way:I have gone through your code and here you are connecting to AWS services before setting the region, so i suggest you to update the region first and then connect to services or create instance of those as below - Same error for me:After doing a lot of trials I have settled on the below:  OPTION 1For Linux:For Windows

see: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.htmlIn a rare case if somewhere some defaults are assumed in code and you are forced to send region, then use {'region': process.env.AWS_REGION})OPTION 2Instead of environment variables, another way is AWS CONFIG file:On Linux you can create below files:See https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.htmlThis may not be the right way to do it, but I have all my configs in a separate JSON file. And this does fix the issue for meTo load the AWS config, i do this:config.aws is just a JSON file.You could create a common module and use it based on the region you want toand consume it as,the idea is to Update AWS config before instantiating s3  

How to write a ternary operator (aka if) expression without repeating yourself

user1354934

[How to write a ternary operator (aka if) expression without repeating yourself](https://stackoverflow.com/questions/43359734/how-to-write-a-ternary-operator-aka-if-expression-without-repeating-yourself)

For example, something like this:Is there a better way to write that? Again, I am not seeking an answer to the exact question above, just an example of when you might have repeated operands in ternary operator expressions...

2017-04-12 03:27:06Z

For example, something like this:Is there a better way to write that? Again, I am not seeking an answer to the exact question above, just an example of when you might have repeated operands in ternary operator expressions...Personally I find the best way to do this is still the good old if statement:Code should be readable, so being succinct should not mean being terse whatever the cost - for that you should repost to https://codegolf.stackexchange.com/ - so instead I would recommend using a second local variable named index to maximize reading comprehensibility (with minimal runtime cost too, I note):But if you really want to cut this expression down, because you're a cruel sadist to your coworkers or project collaborators, then here are 4 approaches you could use:You can use the var statement's ability to define (and assign) a second temporary variable index when separated with commas:Another option is an self-executing anonymous function:There is also the infamous "comma operator" which JavaScript supports, which is also present in C and C++.https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_OperatorYou can use it to introduce side-effects, in this case by reassigning to value:This works because var value is interpreted first (as it's a statement), and then the left-most, inner-most value assignment, and then the right-hand of the comma operator, and then the ternary operator - all legal JavaScript.Commentator @IllusiveBrian pointed out that the use of the comma-operator (in the previous example) is unneeded if the assignment to value is used as a parenthesized subexpression:Note that the use of negatives in logical expressions can be harder for humans to follow - so all of the above examples can be simplified for reading by changing idx !== -1 ? x : y to idx == -1 ? y : x:For numbersYou can use the Math.max() function.It will keep the boundaries of the result from 0 until the first result greater than 0 if that's the case. And if the result from indexOf is -1 it will return 0 as is greater than -1.For booleans and boolean-y valuesFor JS there is no general rule AFAIK specially because how falsy values are evaluated.But if something can help you most of the time is the or operator (||):You have to be very careful with this, because in your first example, indexOf can return 0 and if you evaluate 0 || -1 it will return -1 because 0 is a falsy value.Not really, just use another variable. Your example generalizes to something like this.You're testing a computed value, then assigning that value to a variable if it passes some predicate. The way to avoid re-calculating the computed value is obvious: use a variable to store the result.I get what you mean - it seems like there ought to be some way to do this that looks a little cleaner. But I think that's the best way (idiomatically) to do this. If you were repeating this pattern a lot in your code for some reason, you might write a little helper function:Use ||const result = a ? a : 'fallback value';is equivalent toconst result = a || 'fallback value';If casting a to Boolean returns false, result will be assigned 'fallback value', otherwise the value of a.Be aware of the edge case a === 0, which casts to false and result will (incorrectly) take 'fallback value' . Use tricks like this at your own risk.PS. Languages such as Swift have nil-coalescing operator (??), which serves similar purpose. For instance, in Swift you would write result = a ?? "fallback value" which is pretty close to JavaScript's const result = a || 'fallback value';Use an extract variable refactoring:It is even better with const instead of var. You could also do an additional extraction:In practice, use more meaningful names than index, condition, and value.You're probably looking for a coalescing operator. Luckily, we can leverage the Array prototype to create one:This could be further generalized to your case, by adding a parameter to the function:I personally prefer two variants:I like @slebetman's answer.  The comment under it express concern about the variable being in an "intermediate state".  if this is a big concern for you then I suggest encapsulating it in a function:Then just callYou could do more generic functions if you have uses for them in other places, but don't over-engineer if it's a very specific case.But to be honest I would just do as @slebetman unless I needed to re-use from several places.There are two ways I can see of looking at your question: you either want to reduce line length, or you specifically want to avoid repeating a variable in a ternary. The first is trivial (and many other users have posted examples):can be (and should be, given the function calls) shortened like so:If you are looking for a more generic solution that prevents the repetition of a variable in a ternary, like so:where foo only appears once. Discarding solutions of the form:as technically correct but missing the point, then you are out of luck. There are operators, functions, and methods that possesses the terse syntax you seek, but such constructs, by definition, aren't ternary operators.Examples:javascript, using || to return the RHS when the LHS is falsey:Use a helper function:Now your code is very readable, and there's no repetition.The hierarchy of coding concerns is:All the answers on the page so far appear to be correct, but I think my version has the highest clarity, which is more important than conciseness. If you don't count the helper function—as it can be reused—it is the most concise as well. The somewhat similar suggestion to use a helper function unfortunately uses a lambda that, to me, just obscures what it's doing. A simpler function with one purpose that doesn't take a lambda, just values, is to me much better.P.S. If you like ES6 syntax:I think the || operator can be tailored to indexOf:The returned value is shifted up by 1, making 0 from -1, which is falsey and therefore gets replaced by the second 1. Then it is shifted back.However, please keep in mind that readability is superior to avoiding repetition.This is a simple solution with bitwise NOT and a default value of -1 which results later to zero.It works basically with a double bitwise NOT, which returns the original value or a default value, which after applying bitwise NOT returns zero.Let's have a look to the table of truth:You could use re-assignment:Ex.Given the example code at Question it is not clear how it would be determined that 3 is or is not set at index 0 of someArray. -1 returned from .indexOf() would be valuable in this instance, for the purpose of excluding a presumed non-match which could be a match.If 3 is not included in array, -1 will be returned. We can add 1 to result of .indexOf() to evaluate as false for result being -1, where followed by || OR operator and 0. When value is referenced, subtract 1 to get index of element of array or -1. Which leads back to simply using .indexOf() and checking for -1 at an if condition. Or, defining value as undefined to avoid possible confusion as to actual result of evaluated condition relating to original reference.A ternary is like an if-else, if you don't need the else part, why not just a single if instead..For this particular case, you could use short-circuiting with the logical || operator. As 0 is considered falsy, you can add 1 to your index, thus, if index+1 is 0 then you'll get the right-hand side of the logical-or as your result, otherwise, you'll get your index+1. As your wanted result is offset by 1, you can then subtract 1 from it to get your index:

How to go from Blob to ArrayBuffer

Jeanluca Scaljeri

[How to go from Blob to ArrayBuffer](https://stackoverflow.com/questions/15341912/how-to-go-from-blob-to-arraybuffer)

I was studying Blobs, and I noticed that when you have an ArrayBuffer, you can easily convert this to a Blob as follows:The question I have now is, is it possible to go from a Blob to an ArrayBuffer?

2013-03-11 15:05:17Z

I was studying Blobs, and I noticed that when you have an ArrayBuffer, you can easily convert this to a Blob as follows:The question I have now is, is it possible to go from a Blob to an ArrayBuffer?The Response API consumes a (immutable) Blob from which the data can be retrieved in several ways. The OP only asked for ArrayBuffer, and here's a demonstration of it.alternatively you could use this:You can use FileReader to read the Blob as an ArrayBuffer.Here's a short example:Here's a longer example:This was tested out in the console of Chrome 27—69, Firefox 20—60, and Safari 6—11.Here's also a live demonstration which you can play with: https://jsfiddle.net/potatosalad/FbaM6/Update 2018-06-23: Thanks to Klaus Klein for the tip about event.target.result versus this.resultReference:Just to complement Mr @potatosalad answer.You don't actually need to access the function scope to get the result on the onload callback, you can freely do the following on the event parameter:Why this is better? Because then we may use arrow function without losing the contextOr you can use the fetch APII don't know what the performance difference is, and this will show up on your network tab in DevTools as well.There is now (Chrome 76+ & FF 69+) a Blob.prototype.arrayBuffer() method which will return a Promise resolving with an ArrayBuffer representing the Blob's data.

How to show a loading indicator in React Redux app while fetching the data? [closed]

企业应用架构模式大师

[How to show a loading indicator in React Redux app while fetching the data? [closed]](https://stackoverflow.com/questions/35456935/how-to-show-a-loading-indicator-in-react-redux-app-while-fetching-the-data)

I'm new to React/Redux. I use a fetch api middleware in Redux app to process the APIs. It's (redux-api-middleware). I think it's the good way to process async api actions. But I find some cases which can't be resolve by myself.As the homepage (Lifecycle) say, a fetch API lifecycle begins with dispatching a CALL_API action ends with dispatching a FSA action.So my first case is showing/hiding a preloader when fetching APIs. The middleware will dispatch a FSA action at the beginning and dispatch a FSA action at the end. Both the actions are received by reducers which should be only doing some normal data processing. No UI operations, no more operations. Maybe I should save the processing status in state then render them when store updating.But how to do this? A react component flow over the whole page? what happen with store updating from other actions? I mean they are more like events than state!Even a worse case, what should I do when I have to use the native confirm dialog or alert dialog in redux/react apps? Where should they be put, actions or reducers?Best wishes! Wish for replying.

2016-02-17 12:36:47Z

I'm new to React/Redux. I use a fetch api middleware in Redux app to process the APIs. It's (redux-api-middleware). I think it's the good way to process async api actions. But I find some cases which can't be resolve by myself.As the homepage (Lifecycle) say, a fetch API lifecycle begins with dispatching a CALL_API action ends with dispatching a FSA action.So my first case is showing/hiding a preloader when fetching APIs. The middleware will dispatch a FSA action at the beginning and dispatch a FSA action at the end. Both the actions are received by reducers which should be only doing some normal data processing. No UI operations, no more operations. Maybe I should save the processing status in state then render them when store updating.But how to do this? A react component flow over the whole page? what happen with store updating from other actions? I mean they are more like events than state!Even a worse case, what should I do when I have to use the native confirm dialog or alert dialog in redux/react apps? Where should they be put, actions or reducers?Best wishes! Wish for replying.I would not say so. I think loading indicators are a great case of UI that is easily described as a function of state: in this case, of a boolean variable. While this answer is correct, I would like to provide some code to go along with it.In the async example in Redux repo, reducer updates a field called isFetching:The component uses connect() from React Redux to subscribe to the store’s state and returns isFetching as part of the mapStateToProps() return value so it is available in the connected component’s props:Finally, the component uses isFetching prop in the render() function to render a「Loading...」label (which could conceivably be a spinner instead):Any side effects (and showing a dialog is most certainly a side effect) do not belong in reducers. Think of reducers as passive「builders of state」. They don’t really「do」things.If you wish to show an alert, either do this from a component before dispatching an action, or do this from an action creator. By the time an action is dispatched, it is too late to perform side effects in response to it.For every rule, there is an exception. Sometimes your side effect logic is so complicated you actually want to couple them either to specific action types or to specific reducers. In this case check out advanced projects like Redux Saga and Redux Loop. Only do this when you are comfortable with vanilla Redux and have a real problem of scattered side effects you’d like to make more manageable.Great answer Dan Abramov!

Just want to add that I was doing more or less exactly that in one of my apps (keeping isFetching as a boolean) and ended up having to make it an integer (which ends up reading as the number of outstanding requests) to support multiple simultaneous requests.with boolean:request 1 starts -> spinner on -> request 2 starts -> request 1 ends -> spinner off -> request 2 endswith integer:request 1 starts -> spinner on -> request 2 starts -> request 1 ends -> request 2 ends -> spinner offI'd like to add something. The real world example uses a field isFetching in the store to represent when a collection of items is being fetched. Any collection is generalized to a pagination reducer that can be connected to your components to track the state and show if a collection is loading.It happened to me that I wanted to fetch details for an specific entity that doesn't fit in the pagination pattern. I wanted to have a state representing if the details are being fetched from the server but also I didn't want to have a reducer just for that.To solve this I added another generic reducer called fetching. It works in a similar fashion to the pagination reducer and it's responsibility is just to watch a set of actions and generate new state with pairs [entity, isFetching]. That allows to connect the reducer to any component and to know if the app is currently fetching data not just for a collection but for an specific entity.I didn't happen upon this question until now, but since no answer is accepted I'll throw in my hat. I wrote a tool for this very job: react-loader-factory. It's got slightly more going on than Abramov's solution, but is more modular and convenient, since I didn't want to have to think after I wrote it.There are four big pieces:The module itself is independent of redux-api-middleware, but that's what I use it with, so here's some sample code from the README:A component with a Loader wrapping it:A reducer for the Loader to monitor (although you can wire it differently if you want):I expect in the near future I'll add things like timeout and error to the module, but the pattern's not going to be very different.The short answer to your question is:You can add change listeners to your stores, using either connect() from React Redux or the low-level store.subscribe() method. You should have the loading indicator in your store, which the store change handler can then check and update the component state. The component then renders the preloader if needed, based on the state.alert and confirm shouldn't be a problem. They are blocking and alert doesn't even take any input from the user. With confirm, you can set state based on what the user has clicked if the user choice should affect component rendering. If not, you can store the choice as component member variable for later use.We have three types of notifications in our app, all of which are designed as aspects:All three of these are at the top level of our app (Main), and wired through Redux as shown in the below code snippet. These props control display of their corresponding aspects.I designed a proxy that handles all our API calls, thus all isFetching and (api) errors are mediated with actionCreators I import in the proxy. (As an aside, I also use webpack to inject a mock of the backing service for dev so we can work without server dependencies.)Any other place in the app that needs to provide any type of notification simply imports the appropriate action. Snackbar & Error have params for messages to be displayed.)

export default class Main extends React.Component{Am I the only one thinking that loading indicators don't belong in a Redux store? I mean, I don't think it's part of an application's state per se..Now, I work with Angular2, and what I do is that I have a "Loading" service which exposes different loading indicators via RxJS BehaviourSubjects.. I guess the mechanism is the same, I just don't store the information in Redux.Users of the LoadingService just subscribe to those events they want to listen to..  My Redux action creators call the LoadingService whenever things need to change. UX components subscribe to the exposed observables... I'm saving the urls such as::And then I have a memorised selector (via reselect).To make the url unique in case of POST, I pass some variable as query.And where I want to show an indicator, I simply use the getFetchCount variable 

How to detect my browser version and operating system using JavaScript?

capri

[How to detect my browser version and operating system using JavaScript?](https://stackoverflow.com/questions/11219582/how-to-detect-my-browser-version-and-operating-system-using-javascript)

I have tried using the code below but it only display results in Chrome and Mozilla not working in IE6. Output:I need to get the version "Firefox/12.0" only.

2012-06-27 04:47:56Z

I have tried using the code below but it only display results in Chrome and Mozilla not working in IE6. Output:I need to get the version "Firefox/12.0" only.Detecting browser's details:Source JavaScript: browser name.

See JSFiddle to detect Browser Details.  Detecting OS:source JavaScript: OS detection.

See JSFiddle to detect OS Details.I'm sad to say: We are sh*t out of luck on this one.I'd like to refer you to the author of WhichBrowser: Everybody lies.Basically, no browser is being honest. No matter if you use Chrome or IE, they both will tell you that they are "Mozilla Netscape" with Gecko and Safari support. Try it yourself on any of the fiddles flying around in this thread:hims056's fiddleHariharan's fiddleor any other... Try it with Chrome (which might still succeed), then try it with a recent version of IE, and you will cry. Of course, there are heuristics, to get it all right, but it will be tedious to grasp all the edge cases, and they will very likely not work anymore in a year's time.Take your code, for example:Chrome says:IE says:At least Chrome still has a string that contains "Chrome" with the exact version number. But, for IE you must extrapolate from the things it supports to actually figure it out (who else would boast that they support .NET or Media Center :P), and then match it against the rv: at the very end to get the version number. Of course, even such sophisticated heuristics might very likely fail as soon as IE 12 (or whatever they want to call it) comes out.There is a library for this purpose: https://github.com/bestiejs/platform.js#readmeThen you can use it this wayPPK's script is THE authority for this kind of things, as @Jalpesh said, this might point you in the right wayTaken from https://github.com/leopic/jquery.detectBrowser.js/blob/sans-jquery/jquery.detectBrowser.sansjQuery.jsTo detect operating system using JavaScript it is better to use

navigator.userAgent instead of navigator.appVersion Try this one..check out the working fiddle ( here )For Firefox, Chrome, Opera, Internet Explorer and SafariI wasn't able to get some of the other answers to work on Chrome, Firefox, IE11, and Edge with the same code.

I came up with the below and it appears to work for those browsers listed above. I also wanted to see what OS the user was on. I haven't tested this against a browser with user overridden User-Agent settings, so mileage may vary. The order of the IFs is important for this to work correctly.Code to detect the operating system of an user

Remove json element

Hitesh Prajapati

[Remove json element](https://stackoverflow.com/questions/5310304/remove-json-element)

I want to remove JSON element or one whole row from JSON.I have following JSON string:

2011-03-15 10:20:55Z

I want to remove JSON element or one whole row from JSON.I have following JSON string:You can use splice to remove elements from an array.Do NOT have trailing commas in your JSONUPDATE: you need to use array.splice and not delete if you want to remove items from the array in the objectYou can try to delete the JSON as follows: Alternatively, you can also pass in the index to delete an attribute: However, to understand some of the repercussions of using deletes, have a look hereTry this following All the answers are great, and it will do what you ask it too, but I believe the best way to delete this, and the best way for the garbage collector (if you are running node.js) is like this:This way the garbage collector for node.js will know that json['somekey'] is no longer required, and will delete it.I recommend splice method to remove an object from JSON objects array.I use this because when I use delete method, I get null object after I do JSON.stringify(json) As described by @mplungjan, I though it was right. Then right away I click the up rate button. But by following it, I finally got an error.Delete is just remove the data, but the 'place' is still there as undefined.I did this and it works like a charm :meaning : delete 1 item at position 3 ( because array is counted form 0, then item at no 3 is counted as no 2  ) try this

Regex to replace everything except numbers and a decimal point

guildsbounty

[Regex to replace everything except numbers and a decimal point](https://stackoverflow.com/questions/4572194/regex-to-replace-everything-except-numbers-and-a-decimal-point)

I have a text field that needs to remain only text or decimal. Here is the code that I'm currently using to replace everything except numbers and a decimal point. Issue is, I can't figure out a regex that will identify everything elseThe \D works fine, but I've tried (?!.), (?!\.), [^.], [^\.] and so on...Any suggestions for a regular expression that identifies positively with anything except a number or a decimal?Thanks for the help

2010-12-31 20:32:22Z

I have a text field that needs to remain only text or decimal. Here is the code that I'm currently using to replace everything except numbers and a decimal point. Issue is, I can't figure out a regex that will identify everything elseThe \D works fine, but I've tried (?!.), (?!\.), [^.], [^\.] and so on...Any suggestions for a regular expression that identifies positively with anything except a number or a decimal?Thanks for the helpUse this:Removing only decimal part can be done as follows:This would convert 13.6667px into 13px (leaving units px untouched).Try this:document.getElementById(target).value = newVal.replace(/^\d+(\.\d{0,2})?$/, "");Check the link Regular Expression Demouse the below reg exp [a-z] + [^0-9\s.]+|.(?!\d)

Storing Image Data for offline web application (client-side storage database)

Dr.YSG

[Storing Image Data for offline web application (client-side storage database)](https://stackoverflow.com/questions/14113278/storing-image-data-for-offline-web-application-client-side-storage-database)

I have an offline web application using appcaching. I need to provide it about 10MB - 20MB of data that it will save (client-side) consisting mainly of PNG image files. The operation is as follows:Here is my current analysis of client-based "databases" that handle binary blob storageNOTE: to see a data:uri encoding of PNG I created an example at: http://jsbin.com/ivefak/1/editDesired/Usefull/Uneeded FeaturesIndexedDB ImplementationsMy Current ResultsFINAL Results posted below as answerPouchDB now supports binary blobs for all recent browsers (IE, Chrome, Firefox, Chrome on mobile, etc.) as well as many older browsers. That was not the case when I first did this post.

2013-01-01 18:56:52Z

I have an offline web application using appcaching. I need to provide it about 10MB - 20MB of data that it will save (client-side) consisting mainly of PNG image files. The operation is as follows:Here is my current analysis of client-based "databases" that handle binary blob storageNOTE: to see a data:uri encoding of PNG I created an example at: http://jsbin.com/ivefak/1/editDesired/Usefull/Uneeded FeaturesIndexedDB ImplementationsMy Current ResultsFINAL Results posted below as answerPouchDB now supports binary blobs for all recent browsers (IE, Chrome, Firefox, Chrome on mobile, etc.) as well as many older browsers. That was not the case when I first did this post.Results Offline blob cache for PNG slippy mapsTestingFetch from web serverStorageDisplayResultsFor your requirements I suggest that developing a new polyfill based on two others: 

FileSystem API to IndexedDB and IndexedDB to WebSQL — is the best option. The former one will enable support for storing blobs in Chrome (FileSystem API) and Firefox (IndexedDB), while the latter should provide the support for Android and iOS (WebSQL). What is needed is just making these polyfills work together, and I suppose it's not hard.NB: Since I couldn't find any information on the web about this, you should test if storing blobs using the WebSQL polyfill will work on iOS and Android. It looks like it should work though:SourceI have map caching examples(open example, discover regions and zooms, switch offline and discovered regions will availaible).There are map.js - map layer for offline tiles, storage.js - storage implementation based on IndexedDb and WebSQL (but this just test implementation with poor performance).Additional information about sizes for 2 billion city (Minsk):A few years back (not exactly the stone age), I was using a signed java applet that would query its server for syncing/updating requirements, download appropriate files from the server and save them on the user's filesystem (not a database). That solution might work for you, although you will need someone to write the applet and sign it. For database solutions, such an applet can use the jdbc available for most databases using localhost on a suitable port (e.g., 3306 for MySQL). I believe the applet tag is deprecated in Html5 but it still works. No experience on Android tablets, so can't comment on that part.

Executing <script> elements inserted with .innerHTML

phidah

[Executing <script> elements inserted with .innerHTML](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)

I've got a script that inserts some content into an element using innerHTML.The content could for example be:Problem is that the code inside the <script> tag doesn't get executed.

I googled it a bit but there were no apparent solutions. If I inserted the content using jQuery $(element).append(content);the script parts got eval'd before being injected into the DOM.Has anyone got a snippet of code that executes all the <script> elements? The jQuery code was a bit complex so I couldn't really figure out how it was done.Edit:By peeking into the jQuery code I've managed to figure out how jQuery does it, which resulted in the following code:

2010-04-07 11:48:39Z

I've got a script that inserts some content into an element using innerHTML.The content could for example be:Problem is that the code inside the <script> tag doesn't get executed.

I googled it a bit but there were no apparent solutions. If I inserted the content using jQuery $(element).append(content);the script parts got eval'd before being injected into the DOM.Has anyone got a snippet of code that executes all the <script> elements? The jQuery code was a bit complex so I couldn't really figure out how it was done.Edit:By peeking into the jQuery code I've managed to figure out how jQuery does it, which resulted in the following code:The OP's script doesn't work in IE 7. With help from SO, here's a script that does:@phidah... Here is a very interesting solution to your problem:

http://24ways.org/2005/have-your-dom-and-script-it-tooSo it would look like this instead:<img src="empty.gif" onload="alert('test');this.parentNode.removeChild(this);" />Here's a shorter, more efficient script that also works for scripts with the src property:Note: whilst eval may cause a security vulnerability if not used properly, it is much faster than creating a script tag on the fly.You should not use the innerHTML property but rather the appendChild method of the Node: a node in a document tree  [HTML DOM]. This way you are able to later call your injected code.Make sure that you understand that node.innerHTML is not the same as node.appendChild. You might want to spend some time on the Javascript Client Reference for more details and the DOM.  Hope the following helps...Sample injection works:regards,Simplified ES6 version of @joshcomley's answer with an example.No JQuery, No library, No eval, No DOM change, Just pure Javascript.http://plnkr.co/edit/MMegiu?p=previewUsageTry this snippet:It works in Chrome in my projectA solution without using "eval":This essentially clones the script tag and then replaces the blocked script tag with the newly generated one, thus allowing execution.scriptNode.innerHTML = code didn't work for IE. The only thing to do is replace with scriptNode.text = code and it work fineIt's easier to use jquery $(parent).html(code) instead of parent.innerHTML = code:This also works with scripts that use document.write and scripts loaded via src attribute. Unfortunately even this doesn't work with Google AdSense scripts.Just do:You may take a look at this post. The code might look like this:Thanks to Larry's script, which worked perfectly well in IE10, this is what I've used:Try function eval().This is a real example from a project that i am developing.

Thanks to this postExtending off of Larry's.  I made it recursively search the entire block and children nodes.

The script now will also call external scripts that are specified with src parameter.

Scripts are appended to the head instead of inserted and placed in the order they are found. So specifically order scripts are preserved.  And each script is executed synchronously similar to how the browser handles the initial DOM loading.  So if you have a script block that calls jQuery from a CDN and than the next script node uses jQuery... No prob!  Oh and I tagged the appended scripts with a serialized id based off of what you set in the tag parameter so you can find what was added by this script.Try this, it works for me on Chrome, Safari & Firefox:One thing to note though, is that the following div-nested script will NOT run:For a script to run it has to be created as a node then appended as a child. You can even append a script inside a previously injected div & it will run (I've run into this before when trying to get ad server code to work):Expending the answer of LambderYou can use base64 image to create and load your scriptOr if you have a Iframe you can use it instead I needed something similar, but needed the script to remain or be re-created in the same spot as the original script, since my script targets the location of the script tag in the DOM to create/target elements. I also made the script recursive to make sure it also works if it is more than one level down.NOTE: I use const here, if you have a older browser, just use var.Here is my solution in a recent project.

how to display data values on Chart.js

FuSsA

[how to display data values on Chart.js](https://stackoverflow.com/questions/31631354/how-to-display-data-values-on-chart-js)

I would like to ask if it's possible using Chart.js  to display data values?

I want to print the graph.Thanks for any advice.

2015-07-25 21:33:35Z

I would like to ask if it's possible using Chart.js  to display data values?

I want to print the graph.Thanks for any advice.Late edit: there is an official plugin for Chart.js 2.7.0+ to do this: https://github.com/chartjs/chartjs-plugin-datalabelsOriginal answer:You can loop through the points / bars onAnimationComplete and display the valuesPreviewHTMLScriptFiddle - http://jsfiddle.net/uh9vw0ao/Here is an updated version for Chart.js 2.3Sep 23, 2016: Edited my code to work with v2.3 for both line/bar type.Important: Even if you don't need the animation, don't change the duration option to 0, otherwise you will get chartInstance.controller is undefined error.This animation option works for 2.1.3 on a bar chart.Slightly modified @Ross answer Based on @Ross's answer answer for Chart.js 2.0 and up, I had to include a little tweak to guard against the case when the bar's heights comes too chose to the scale boundary.The animation attribute of the bar chart's option:I think the nicest option to do this in chartJS v2.x is by using a plugin, so you don't have a large block of code in the options. In addition, it prevents the data from disappearing when hovering over a bar.I.e. simply use this code, which registers a plugin that adds the text after the chart is drawn.If you are using the plugin chartjs-plugin-datalabels then the following code options object will helpMake sure you import import 'chartjs-plugin-datalabels'; in your typescript file or add reference to <script src="chartjs-plugin-datalabels.js"></script> in your javascript file.Following this good answer, I'd use these options for a bar chart:This still uses the tooltip system and his advantages (automatic positionning, templating, ...) but hiding the decorations (background color, caret, ...)I'd recommend using this plugin: https://github.com/chartjs/chartjs-plugin-datalabelsLabels can be added to your charts simply by importing the plugin to the js file e.g.:And can be fine tuned using these docs: https://chartjs-plugin-datalabels.netlify.com/options.htmlFrom chart.js samples (file Chart.js-2.4.0/samples/data_labelling.html) :```

        // Define a plugin to provide data labels ```Edited @ajhuddy's answer a little. Only for bar charts. My version adds:Downside: When hovering over a bar that has value inside it the value might look a little jagged. I have not found a solution do disable hover effects. It might also need tweaking depending on your own settings.Configuration:Helpers:From my experience, once you include the chartjs-plugin-datalabels plugin (make sure to place the <script> tag after the chart.js tag on your page), your charts begin to display values.If you then choose you can customize it to fit your needs. The customization is clearly documented here but basically, the format is like this hypothetical example:

In JavaScript, does it make a difference if I call a function with parentheses?

Dean

[In JavaScript, does it make a difference if I call a function with parentheses?](https://stackoverflow.com/questions/3246928/in-javascript-does-it-make-a-difference-if-i-call-a-function-with-parentheses)

I noticed a difference when calling a function with empty parentheses, or without any parentheses at all. However, I am not passing any arguments to the function so I wondered, what would be the difference between:andPlease explain the principle behind it.

2010-07-14 14:06:39Z

I noticed a difference when calling a function with empty parentheses, or without any parentheses at all. However, I am not passing any arguments to the function so I wondered, what would be the difference between:andPlease explain the principle behind it.This executes initAll() straight away and assigns the function's return value to window.onload. This is usually not what you want. initAll() would have to return a function for this to make sense.this assigns the actual function to window.onload - this is possible because in JavaScript, as @Felix says, functions are first class objects - without executing it. initAll will be executed by the load event.What Pekka says is correct, but I want to elaborate a little with an example that will help explain to someone who doesn't fully understand function pointers or delegates.I won't use window.onload because that's a bit contrived to demonstrate. I'll use a simple multiply function to demo instead:This could equally be written:While in the first example, the implication may not be obvious, the second example shows more clearly that we're assigning a function which has 2 parameters to a variable called Multiply, and this concept of functions as assignments is common throughout JavaScript. This is a small demonstration of the fact that functions are "first class citizens", that is, they can be passed around exactly as if we were passing around values.So now to the difference of assignment:At the point of defining the ret variable, Multiply is executed and the return value is assigned - ret becomes equal to 12.Let's try that again a different way:Now, at the point of defining ret, ret becomes your Multiply function as opposed to being the result obtained from your Multiply function. Calls to ret() will cause your Multiply function to be executed, and you can call it exactly as if you'd called Multiply(operator, operand):is the same asYou have effectively said that you are going to use ret as a delegate for Multiply(). When calling ret, we're really referring to the Multiply function.Back to your window.onload. Think of this as:So as you can see, window.onload is a function just like any other function, there's nothing special about it.  You can assign it a value, assign it a function, null it out if you wish - the point is that there's nothing any more special about window.onload than there is about your own function.  The only slightly different thing is that it gets called by the window when it's loaded. [Disclaimer: I've never actually nulled out window functions, so I'm not sure if this will cause negative repercussions.  One would hope they check to see if a function is assigned before calling it i.e. if (window.onload) window.onload();].Now calling initAll() what we're saying is:which might as well say:But when we say initAll without the parentheses, what we're really saying is: I want to replace whatever my window.onload function is, with a new function - i.e. I want to replace it with my initAll function, so that any calls to window.onload runs my initAll code.So:is replaced with:So any call to window.onload will execute your initAll function instead of whatever window.onload was originally.  You have replaced the original function with your new function.In fact, you could equally write:Another example that may demonstrate better is this:Whatever the time was at the time d is defined ends up assigned to currentTime.  Great, but that's only useful if we want to find out what time the function containing that code was called - i.e. at page load time.  What if we want the current time any time that currentTime is called?Notice how we call b() in our c and d assignments exactly as we could call currentTime()?Functions in javascript are first-class citizens, and as such, can be assigned to other variables or passed around as arguments.So, when you doYou are setting the onload property of the window object to reference the initAll function itself.When you doYou are setting the onload property to hold the return value of initAll, since it will execute in place on that line.initAll is a reference to a function value and the brackets operator appended to the function name RUNS this function object.So if you do something likethen a will become the same as initAll - for example you can do a() - but withthe variable a will get the return value of the executed initAll functionI'm 6 years late but I feel this could have been explained a lot simpler than the above answers.So here is the TLDR; or bird's eye view when calling functions using and not using ()'sLets take this function for example:Using no () means to fetch the function itself. You would do this if you want it to be passed along as a callback.Using () after a function means to execute the function and return it's value.

Finding element's position relative to the document

einstein

[Finding element's position relative to the document](https://stackoverflow.com/questions/5598743/finding-elements-position-relative-to-the-document)

What's the easiest way to determine an elements position relative to the document/body/browser window? Right now I'm using .offsetLeft/offsetTop, but this method only gives you the position relative to the parent element, so you need to determine how many parents to the body element, to know the position relaltive to the body/browser window/document position. This method is also to cumbersome.

2011-04-08 17:37:11Z

What's the easiest way to determine an elements position relative to the document/body/browser window? Right now I'm using .offsetLeft/offsetTop, but this method only gives you the position relative to the parent element, so you need to determine how many parents to the body element, to know the position relaltive to the body/browser window/document position. This method is also to cumbersome.You can traverse the offsetParent up to the top level of the DOM.You can get top and left without traversing DOM like this:You can use element.getBoundingClientRect() to retrieve element position relative to the viewport.Then use document.documentElement.scrollTop to calculate the viewport offset.The sum of the two will give the element position relative to the document:document-offset (3rd-party script) is interesting and it seems to leverage approaches from the other answers here. I suggest usingas proposed here

instead of manual offset calculation through offsetLeft, offsetTop and offsetParent. as proposed here

Under some circumstances*  the manual traversal produces invalid results. See this Plunker: http://plnkr.co/pC8Kgj*When element is inside of a scrollable parent with static (=default) positioning.I've found the following method to be the most reliable when dealing with edge cases that trip up offsetTop/offsetLeft.For those that want to get the x and y coordinates of various positions of an element, relative to the document.http://www.quirksmode.org/js/findpos.html Explains the best way to do it, all in all, you are on the right track you have to find the offsets and traverse up the tree of parents.If you don't mind using jQuery, then you can use offset() function. Refer to documentation if you want to read up more about this function.

What does immutable mean?

alex

[What does immutable mean?](https://stackoverflow.com/questions/3200211/what-does-immutable-mean)

If a string is immutable, does that mean that....

(let's assume JavaScript)Does it mean, when calling methods on a string, it will return the modified string, but it won't change the initial string?If the string was mutable, does that mean the 2nd alert() would return oo as well?

2010-07-08 01:54:27Z

If a string is immutable, does that mean that....

(let's assume JavaScript)Does it mean, when calling methods on a string, it will return the modified string, but it won't change the initial string?If the string was mutable, does that mean the 2nd alert() would return oo as well?It means that once you instantiate the object, you can't change its properties.  In your first alert you aren't changing foo.  You're creating a new string.  This is why in your second alert it will show "foo" instead of oo.Yes.  Nothing can change the string once it is created.  Now this doesn't mean that you can't assign a new string object to the str variable.  You just can't change the current object that str references.Technically, no, because the substring method returns a new string.  Making an object mutable, wouldn't change the method.  Making it mutable means that technically, you could make it so that substring would change the original string instead of creating a new one.On a lower level, immutability means that the memory the string is stored in will not be modified. Once you create a string "foo", some memory is allocated to store the value "foo". This memory will not be altered. If you modify the string with, say, substr(1), a new string is created and a different part of memory is allocated which will store "oo". Now you have two strings in memory, "foo" and "oo". Even if you're not going to use "foo" anymore, it'll stick around until it's garbage collected.One reason why string operations are comparatively expensive.Immutable means that which cannot be changed or modified. So when you assign a value to a string, this value is created from scratch as opposed to being replaced. So everytime a new value is assigned to the same string, a copy is created. So in reality, you are never changing the original value.I'm not certain about JavaScript, but in Java, strings take an additional step to immutability, with the "String Constant Pool". Strings can be constructed with string literals ("foo") or with a String class constructor. Strings constructed with string literals are a part of the String Constant Pool, and the same string literal will always be the same memory address from the pool.Example:In the above, both lit1 and lit2 are constructed using the same string literal, so they're pointing at the same memory address; lit1 == lit2 results in true, because they are exactly the same object.However, cons is constructed using the class constructor. Although the parameter is the same string constant, the constructor allocates new memory for cons, meaning cons is not the same object as lit1 and lit2, despite containing the same data.Of course, since the three strings all contain the same character data, using the equals method will return true.(Both types of string construction are immutable, of course)Immutable means the value can not be changed. Once created a string object can not be modified as its immutable. If you request a substring of a string a new String with the requested part is created.Using StringBuffer while manipulating Strings instead makes the operation more efficient as StringBuffer stores the string in a character array with variables to hold the capacity of the character array and the length of the array(String in a char array form)The text-book definition of mutability is liable or subject to change or alteration. 

In programming, we use the word to mean objects whose state is allowed to change over time. An immutable value is the exact opposite – after it has been created, it can never change.If this seems strange, allow me to remind you that many of the values we use all the time are in fact immutable.I think no one will be surprised to learn that the second line in no way changes the string in statement. 

In fact, no string methods change the string they operate on, they all return new strings. The reason is that strings are immutable – they cannot change, we can only ever make new strings.Strings are not the only immutable values built into JavaScript. Numbers are immutable too. Can you even imagine an environment where evaluating the expression 2 + 3 changes the meaning of the number 2? It sounds absurd, yet we do this with our objects and arrays all the time.From strings to stacks... a simple to understand example taken from Eric Lippert's blog:Path Finding Using A* in C# 3.0, Part Two...To go deep on understaning immutability, read Eric's posts starting with this one:Immutability in C# Part One: Kinds of ImmutabilityOne way to get a grasp of this concept is to look at how javascript treats all objects, which is by reference. Meaning that all objects are mutable after being instantiated, this means that you can add an object with new methods and properties. This matters because if you want an object to be immutable the object can not change after being instantiated.

Setting up a JavaScript variable from Spring model by using Thymeleaf

Matteo

[Setting up a JavaScript variable from Spring model by using Thymeleaf](https://stackoverflow.com/questions/25687816/setting-up-a-javascript-variable-from-spring-model-by-using-thymeleaf)

I am using Thymeleaf as template engine. How I pass a variable from Spring model to JavaScript variable?Spring-side:Client-side:

2014-09-05 14:08:15Z

I am using Thymeleaf as template engine. How I pass a variable from Spring model to JavaScript variable?Spring-side:Client-side:According to the official documentation:Thymeleaf 3 now:More info: http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#javascript-inliningAccording to the documentation there are several ways to do the inlining.

The right way you must choose based on the situation.  1) Simply put the variable from server to javascript :  2) Combine javascript variables with server side variables, e.g. you need to create link for requesting inside the javascript:    The one situation I can't resolve - then I need to pass javascript variable inside the Java method calling inside the template (it's impossible I guess).MAKE sure you have thymleaf on page alreadyI've seen this kind of thing work in the wild:

Does this 'for' loop stop, and why/why not? for (var i=0; 1/i > 0; i++) { }

Maxim Koretskyi

[Does this 'for' loop stop, and why/why not? for (var i=0; 1/i > 0; i++) { }](https://stackoverflow.com/questions/37827073/does-this-for-loop-stop-and-why-why-not-for-var-i-0-1-i-0-i)

Does this for loop ever stop?If so, when and why? I was told that it stops, but I was given no reason for that.As part of the investigation I've written quite lengthy and detailed article that explains everything what's going on under the hood - Here is what you need to know about JavaScript’s Number type

2016-06-15 05:48:26Z

Does this for loop ever stop?If so, when and why? I was told that it stops, but I was given no reason for that.As part of the investigation I've written quite lengthy and detailed article that explains everything what's going on under the hood - Here is what you need to know about JavaScript’s Number type(I'm not a fan of meta-content, but: gotnull's and le_m's answers are both correct and useful. They were originally, and are even more so with the edits made after this Community Wiki was posted. The original motivation for this CW is largely gone as a result of those edits, but it remains useful, so... Also: While there are only a couple of authors listed, many other community members have helped greatly with comments which have been folded in and cleaned up. This isn't just a CW in name.)The loop won't stop in a correctly-implemented JavaScript engine. (The engine's host environment might eventually terminate it because it's endless, but that's another thing.)Here's why:Here are the various relevant calculations:The condition 1/i > 0 will always evaluate to true:Why does i++ never reach Infinity? Due to the limited precision of the Number datatype, there is a value for which i + 1 == i:Once i reaches that value (which corresponds to Number.MAX_SAFE_INTEGER+ 1), it will stay the same even after i++.We therefore have an infinite loop.Why is 9007199254740992 + 1 == 9007199254740992?JavaScript's Number datatype is actually an 64-bit IEEE 754 double precision float. Each Number is disassembled and stored as three parts: 1-bit sign, 11-bit exponent, and 52-bit mantissa. Its value is -1 sign × mantissa × 2 exponent.How is 9007199254740992 represented? As 1.0 × 2 53, or in binary:Incrementing the mantissa's least significant bit, we get the next higher number:The value of that number is 1.00000000000000022… × 2 53 = 9007199254740994What does that mean? Number can either be 9007199254740992 or 9007199254740994, but nothing in between.Now, which one shall we chose to represent 9007199254740992 + 1? The IEEE 754 rounding rules give the answer: 9007199254740992.The Number.MAX_SAFE_INTEGER constant represents the maximum safe integer in JavaScript. The MAX_SAFE_INTEGER constant has a value of 9007199254740991. The reasoning behind that number is that JavaScript uses double-precision floating-point format numbers as specified in IEEE 754 and can only safely represent numbers between -(253 - 1) and 253 - 1.Safe in this context refers to the ability to represent integers exactly and to correctly compare them. For example, Number.MAX_SAFE_INTEGER + 1 === Number.MAX_SAFE_INTEGER + 2 will evaluate to true, which is mathematically incorrect. See Number.isSafeInteger() for more information.Because MAX_SAFE_INTEGER is a static property of Number, you always use it as Number.MAX_SAFE_INTEGER, rather than as a property of a Number object you created.UPDATE:Someone in an answer that was deleted mentioned: i will never reach infinity. Once it reaches Number.MAX_SAFE_INTEGER, i++ doesn't increment the variable anymore. This is in fact not correct.@T.J. Crowder comments that i = Number.MAX_SAFE_INTEGER; i++; i == Number.MAX_SAFE_INTEGER; is false. But the next iteration reaches an unchanging state, so the answer in main is correct.i in the example never reaches Infinity.

Upgrade to Babel 7: Cannot read property 'bindings' of null

rap-2-h

[Upgrade to Babel 7: Cannot read property 'bindings' of null](https://stackoverflow.com/questions/52092739/upgrade-to-babel-7-cannot-read-property-bindings-of-null)

I just upgraded to Babel 7 (from 6) by running these commands:Here is my .babelrc file:Then I ran:And it results in:What did I do wrong?

2018-08-30 08:45:34Z

I just upgraded to Babel 7 (from 6) by running these commands:Here is my .babelrc file:Then I ran:And it results in:What did I do wrong?In your .babelrc file, change to (and install that package if you haven't already).In your .babelrc you are still referencing the package babel-preset-env (which is for 6.x), you want to reference @babel/preset-env instead (which is for 7.x).Note: you should also make this change in webpack.config.js if it is there as well.

How is a non-breaking space represented in a JavaScript string?

Phillip Senn

[How is a non-breaking space represented in a JavaScript string?](https://stackoverflow.com/questions/5237989/how-is-a-non-breaking-space-represented-in-a-javascript-string)

This apparently is not working:Is there something about a non-breaking space or the ampersand that JavaScript doesn't like?

2011-03-08 20:32:13Z

This apparently is not working:Is there something about a non-breaking space or the ampersand that JavaScript doesn't like?&nbsp; is a HTML entity. When doing .text(), all HTML entities are decoded to their character values.Instead of comparing using the entity, compare using the actual raw character:Or you can also create the character from the character code manually it in its Javascript escaped form:More information about String.fromCharCode is available here:More information about character codes for different charsets are available here:Remember that .text() strips out markup, thus I don't believe you're going to find &nbsp; in a non-markup result. Made in to an answer....Shows an alert, as the ASCII equivalent of the markup is returned instead.That entity is converted to the char it represents when the browser renders the page. JS (jQuery) reads the rendered page, thus it will not encounter such a text sequence. The only way it could encounter such a thing is if you're double encoding entities.The jQuery docs for text() saysI'd use $td.html() instead.

AngularJS : automatically detect change in model

Alec

[AngularJS : automatically detect change in model](https://stackoverflow.com/questions/15423927/angularjs-automatically-detect-change-in-model)

Suppose I wanted to do something like automatically run some code (like saving data to a server) whenever a model's values change. Is the only way to do this by setting something like ng-change on each control that could possibly alter the model?Ie, with views, things change right as the model is changed without having to explicitly hook anything up. Is there an analog to being able to run code that saves to a server? Something likelike you might see with something like backbone.

2013-03-15 02:59:07Z

Suppose I wanted to do something like automatically run some code (like saving data to a server) whenever a model's values change. Is the only way to do this by setting something like ng-change on each control that could possibly alter the model?Ie, with views, things change right as the model is changed without having to explicitly hook anything up. Is there an analog to being able to run code that saves to a server? Something likelike you might see with something like backbone.In views with {{}} and/or ng-model, Angular is setting up $watch()es for you behind the scenes.By default $watch compares by reference.  If you set the third parameter to $watch to true, Angular will instead "shallow" watch the object for changes.  For arrays this means comparing the array items, for object maps this means watching the properties.  So this should do what you want:Update: Angular v1.2 added a new method for this, `$watchCollection():Note that the word "shallow" is used to describe the comparison rather than "deep" because references are not followed -- e.g., if the watched object contains a property value that is a reference to another object, that reference is not followed to compare the other object.And if you need to style your form elements according to it's state (modified/not modified) dynamically or to test whether some values has actually changed, you can use the following module, developed by myself:

https://github.com/betsol/angular-input-modifiedIt adds additional properties and methods to the form and it's child elements. With it, you can test whether some element contains new data or even test if entire form has new unsaved data.You can setup the following watch: $scope.$watch('myForm.modified', handler) and your handler will be called if some form elements actually contains new data or if it reversed to initial state.Also, you can use modified property of individual form elements to actually reduce amount of data sent to a server via AJAX call. There is no need to send unchanged data.As a bonus, you can revert your form to initial state via call to form's reset() method.You can find the module's demo here:

http://plnkr.co/edit/g2MDXv81OOBuGo6ORvdt?p=previewCheers!

Why is my asynchronous function returning Promise { <pending> } instead of a value?

Src

[Why is my asynchronous function returning Promise { <pending> } instead of a value?](https://stackoverflow.com/questions/38884522/why-is-my-asynchronous-function-returning-promise-pending-instead-of-a-val)

My code:And when i try to run something like this:I'm getting:But why?My main goal is to get token from google.login(data.username, data.password) which returns a promise, into a variable. And only then preform some actions.

2016-08-10 22:24:25Z

My code:And when i try to run something like this:I'm getting:But why?My main goal is to get token from google.login(data.username, data.password) which returns a promise, into a variable. And only then preform some actions.The promise will always log pending as long as its results are not resolved yet. You must call .then on the promise to capture the results regardless of the promise state (resolved or still pending):Why is that?Promises are forward direction only; You can only resolve them once. The resolved value of a Promise is passed to its .then or .catch methods.According to the Promises/A+ spec:This spec is a little hard to parse, so let's break it down. The rule is:If the function in the .then handler returns a value, then the Promise resolves with that value. If the handler returns another Promise, then the original Promise resolves with the resolved value of the chained Promise. The next .then handler will always contain the resolved value of the chained promise returned in the preceding .then.The way it actually works is described below in more detail:1. The return of the .then function will be the resolved value of the promise.2. If the .then function returns a Promise, then the resolved value of that chained promise is passed to the following .then.I know this question was asked 2 years ago but i run into the same issue and the answer for the problem is since ES6, that you can simply await the functions return value, like: The then method returns a pending promise which can be resolved asynchronously by the return value of a result handler registered in the call to then, or rejected by throwing an error inside the handler called.So calling AuthUser will not suddenly log the user in synchronously, but returns a promise whose then registered handlers will be called after the login succeeds ( or fails). I would suggest triggering all login processing by a then clause of the login promise. E.G. using named functions to highlight the sequence of flow:See the MDN section on Promises. In particular, look at the return type of then().To log in, the user-agent has to submit a request to the server and wait to receive a response. Since making your application totally stop execution during a request round-trip usually makes for a bad user experience, practically every JS function that logs you in (or performs any other form of server interaction) will use a Promise, or something very much like it, to deliver results asynchronously.Now, also notice that return statements are always evaluated in the context of the function they appear in. So when you wrote:the statement return token; meant that the anonymous function being passed into then() should return the token, not that the AuthUser function should. What AuthUser returns is the result of calling google.login(username, password).then(callback);, which happens to be a Promise.Ultimately your callback token => { return token; } does nothing; instead, your input to then() needs to be a function that actually handles the token in some way.Your Promise is pending, complete it byafter your remaining code.

All this code does is that .then() completes your promise & captures the end result in result variable & print result in console.

Keep in mind, you cannot store the result in global variable.

Hope that explanation might help you.

SVG get text element width

Stephen Sorensen

[SVG get text element width](https://stackoverflow.com/questions/1636842/svg-get-text-element-width)

I'm working on some ECMAScript/JavaScript for an SVG file and need to get the width and height of a text element so I can resize a rectangle that surrounds it. In HTML I would be able to use the offsetWidth and offsetHeight attributes on the element but it appears that those properties are unavailable.Here's a fragment that I need to work with. I need to change the width of the rectangle whenever I change the text but I don't know how to get the actual width (in pixels) of the text element.Any ideas?

2009-10-28 12:04:53Z

I'm working on some ECMAScript/JavaScript for an SVG file and need to get the width and height of a text element so I can resize a rectangle that surrounds it. In HTML I would be able to use the offsetWidth and offsetHeight attributes on the element but it appears that those properties are unavailable.Here's a fragment that I need to work with. I need to change the width of the rectangle whenever I change the text but I don't know how to get the actual width (in pixels) of the text element.Any ideas?and then set the rect's attributes accordingly.Link: getBBox() in the SVG v1.1 standard.Regarding the length of text the link seems to indicate BBox and getComputedTextLength() may return slightly different values, but ones that are fairly close to each other.http://bl.ocks.org/MSCAU/58bba77cdcae42fc2f44worked for me inHow about something like this for compatibility:This returns the average of any valid results of the three methods. You could improve it to cast out outliers or to favor getComputedTextLength if the element is a text element.Warning: As the comment says, getBoundingClientRect is tricky. Either remove it from the methods or use this only on elements where getBoundingClientRect will return good results, so no rotation and probably no scaling(?)Not sure why, but none of the above methods work for me. I had some success with the canvas method, but I had to apply all kinds of scale factors. Even with the scale factors I still had inconsistent results between Safari, Chrome, and Firefox.So, I tried the following:Worked awesome and super precise, but only in Firefox. Scale factors to the rescue for Chrome and Safari, but no joy. Turns out that Safari and Chrome errors are not linear with either string length or font size.So, approach number two. I don't much care for the brute force approach, but after struggling with this on and off for years I decided to give it a try. I decided to generate constant values for each individual printable character. Normally this would be kind of tedious, but luckily Firefox happens to be super accurate. Here is my two part brute force solution:Note: The above snippet has to executed in Firefox to generate an accurate array of values. Also, you do have to replace array item 32 with the space width value  in the console log.I simply copy the Firefox on screen text, and paste it into my javascript code. Now that I have the array of printable character lengths, I can implement a get width function. Here is the code:Well, that is it. Brute force, but it is super accurate in all three browsers, and my frustration level has gone to zero. Not sure how long it will last as the browsers evolve, but it should be long enough for me to develop a robust font metrics technique for my SVG text.SVG spec has a specific method to return this info: getComputedTextLength()

Cannot set boolean values in LocalStorage?

Jiew Meng

[Cannot set boolean values in LocalStorage?](https://stackoverflow.com/questions/3263161/cannot-set-boolean-values-in-localstorage)

I noticed that I cannot set boolean values in localStorage?Always alerts true | false when I try to test localStorage.getItem("item1") == "true" it alerts true ... How can I set an item in localStorage to true?Even if it's a string, I thought only === would check the type? So 

2010-07-16 08:33:05Z

I noticed that I cannot set boolean values in localStorage?Always alerts true | false when I try to test localStorage.getItem("item1") == "true" it alerts true ... How can I set an item in localStorage to true?Even if it's a string, I thought only === would check the type? So Firefox's implementation of Storage can only store strings, but on 2009 September, W3C modified the draft to accept any data. The implementation (still) isn't caught up yet (see Edit below).So in your case the boolean is converted to a string.As for why "true" != true, as written in the description of Equal (==) in MDC*:Note that the string is converted to a Number instead of a Boolean. Since "true" converted to a number is NaN, it will not be equal to anything, so false is returned.(*: For the actual standard, see ECMA-262 §11.9.3「The Abstract Equality Comparison Algorithm」)Edit: The setItem interface was reverted to accept strings only on the 2011 Sept 1st draft to match the behavior of existing implementations, as none of the vendors are interested in supporting storing non-strings. See https://www.w3.org/Bugs/Public/show_bug.cgi?id=12111 for detail. For the moment, all the implementations Safari, WebKit, Chrome, Firefox and IE, are following an old version of the WebStorage standard, where the value of the storage items can be only a string.An option would be to use JSON parse and stringify method to serialize and deserialize the data, as I suggested some time ago in another question, for example:My solutions:This is related to CMS’s answer.Here’s a little function I’ve been using to handle the parsing part of this issue (the function will keep doing the Right Thing after the browser implementations catch up with the spec, so no need to remember to change out code later):Use store.js:↓I'm not sure if LocalStorage can save boolean values but I can tell you that when you do alert("true" == true); it will never evaluate to true because you are implicitly comparing a string to a boolean. That is why to set boolean values you use true instead of "true".eval can also be used carefully under some cases.What I usually do is just save the value in LocalStore as a Boolean, and then retrieve with a parsing method, just to be sure for all browsers. My method below is customized for my business logic. Sometimes I might store smth as 'no' and still need false in return 

Reading file contents on the client-side in javascript in various browsers

Damovisa

[Reading file contents on the client-side in javascript in various browsers](https://stackoverflow.com/questions/750032/reading-file-contents-on-the-client-side-in-javascript-in-various-browsers)

I'm attempting to provide a script-only solution for reading the contents of a file on a client machine through a browser.I have a solution that works with Firefox and Internet Explorer.  It's not pretty, but I'm only trying things at the moment:I can call getFileContents() and it will write the contents into the fileContents text area.Is there a way to do this in other browsers?I'm most concerned with Safari and Chrome at the moment, but I'm open to suggestions for any other browser.Edit: In response to the question, "Why do you want to do this?":Basically, I want to hash the file contents together with a one-time-password on the client side so I can send this information back as a verification.

2009-04-15 02:06:14Z

I'm attempting to provide a script-only solution for reading the contents of a file on a client machine through a browser.I have a solution that works with Firefox and Internet Explorer.  It's not pretty, but I'm only trying things at the moment:I can call getFileContents() and it will write the contents into the fileContents text area.Is there a way to do this in other browsers?I'm most concerned with Safari and Chrome at the moment, but I'm open to suggestions for any other browser.Edit: In response to the question, "Why do you want to do this?":Basically, I want to hash the file contents together with a one-time-password on the client side so I can send this information back as a verification.Edited to add information about the File APISince I originally wrote this answer, the File API has been proposed as a standard and implemented in most browsers (as of IE 10, which added support for FileReader API described here, though not yet the File API). The API is a bit more complicated than the older Mozilla API, as it is designed to support asynchronous reading of files, better support for binary files and decoding of different text encodings. There is some documentation available on the Mozilla Developer Network as well as various examples online. You would use it as follows:Original answerThere does not appear to be a way to do this in WebKit (thus, Safari and Chrome). The only keys that a File object has are fileName and fileSize. According to the commit message for the File and FileList support, these are inspired by Mozilla's File object, but they appear to support only a subset of the features.If you would like to change this, you could always send a patch to the WebKit project. Another possibility would be to propose the Mozilla API for inclusion in HTML 5; the WHATWG mailing list is probably the best place to do that. If you do that, then it is much more likely that there will be a cross-browser way to do this, at least in a couple years time. Of course, submitting either a patch or a proposal for inclusion to HTML 5 does mean some work defending the idea, but the fact that Firefox already implements it gives you something to start with.In order to read a file chosen by the user, using a file open dialog, you can use the <input type="file"> tag. You can find information on it from MSDN. When the file is chosen you can use the FileReader API to read the contents. Happy coding!

If you get an error on Internet Explorer, Change the security settings to allow ActiveX

ExecJS::RuntimeError on Windows trying to follow rubytutorial

user1687078

[ExecJS::RuntimeError on Windows trying to follow rubytutorial](https://stackoverflow.com/questions/12520456/execjsruntimeerror-on-windows-trying-to-follow-rubytutorial)

UPDATE: Colin's suggestion of removing the line //= require_tree . has fixed the issue.I have wasted over 2 days trying to follow every suggestion out there and fix my issue. I am trying to follow the http://ruby.railstutorial.org book on windows machine and cannot for the life of me get past the following nasty error.I have tried every suggestion including installing nodejs with the msi, using execjs 1.3.0 and other things which I can't even remember any more. Here is the gem file and here is the sessions.js.coffeeapplication.jsapplication.html.erbHere is console contentI have installed Devkit and have tried various gems but please suggest changes which can help me develop on windows. I used rubyinstaller for everything.What am I missing?

2012-09-20 20:29:43Z

UPDATE: Colin's suggestion of removing the line //= require_tree . has fixed the issue.I have wasted over 2 days trying to follow every suggestion out there and fix my issue. I am trying to follow the http://ruby.railstutorial.org book on windows machine and cannot for the life of me get past the following nasty error.I have tried every suggestion including installing nodejs with the msi, using execjs 1.3.0 and other things which I can't even remember any more. Here is the gem file and here is the sessions.js.coffeeapplication.jsapplication.html.erbHere is console contentI have installed Devkit and have tried various gems but please suggest changes which can help me develop on windows. I used rubyinstaller for everything.What am I missing?My friend was attempting a Rails tutorial on Win 8 RTM a few months ago and ran into this error.  Not sure if this issue exists in Windows 7 as well, but this may help.Options:1) Removing  //= require_tree . / Ignoring the issue - As ColinR stated above, this line should not be causing an issue in the first place.  There is an actual problem with ExecJS working properly with the JavaScript runtime on your system and removing this line is just ignoring that fact.2) Installing Node.js / Running away -  Many people seem to just end up installing Node.js and using that instead of the JavaScript runtime already on their system.  While that is a valid option, it also requires additional software and only avoids the original issue, which is that ExecJS is not working properly with the JavaScript runtime already on your system.  If the existing JavaScript runtime on your system is supposed to work, why not make it work instead of installing more software?  According to the ExecJS creator, the runtime already built into Windows is in fact supported...3) Actually fixing the issue / Learning - Use the knowledge of options 1 and 2 to search for other solutions.  I can't tell you how many webpages I closed upon seeing options 1 or 2 was the accepted solution before actually finding information about the root issue we were having.  The only reason we kept looking was that we couldn't believe the Rails team would (1) insert a line of code in every scaffold generated project that caused an issue, or (2) require that we install additional software just to run that default line of code.  And so we eventually arrived at a fix for our root issue (your miles may vary).The Fix that worked for us:

On the system having issues, find ExecJS's runtimes.rb file.  It looks like this. Make a copy of the found file for backup. Open the original runtimes.rb for editing.  Find the section that starts with the line JScript = ExternalRuntime.new(. In that section, on the line containing :command     => "cscript //E:jscript //Nologo //U", - remove the //U only.  Then on the line containing :encoding    => 'UTF-16LE' # CScript with //U returns UTF-16LE - change UTF-16LE to UTF-8 .  Save the changes to the file.  This section of the file should now read:Next, stop then restart your Rails server and refresh the page in your browser that produced the original error. Hopefully the page loads without error now.  Here's the ExecJS issue thread where we originally posted our results: https://github.com/sstephenson/execjs/issues/81#issuecomment-9892952If this did not fix the issue, you can always overwrite the modified runtimes.rb with the backup copy you (hopefully) made and everything will be back to square one.  In that case, consider option 3 and keep searching.  Let us know what eventually works for you.. unless it's removing the require_tree or installing node.js, there's plenty of that going around already. :)Had the same issue

OS- Windows 8

Error- 'ExecJS::RuntimeError...'

Solution- missing Node.jsI had this problem and was scowering the internet I am running Windows 8 with this rails gem fileWent to http://nodejs.org/download/  installed - restarted the machine and everything worked.I favoured the Learning route. It seems the problem stems from returning an empty string in execjs\external_runtine.rb (line 173 in version 1.4.0). This is why the error message contains no text. The changes suggested did not work for me. I changed UTF-16LE to UTF-8, but it still returned an empty string. I removed \\U from the command - this at least returned text, but it was in the wrong encoding - in the browser it displayed as Chinese characters.According to this MSDN blog post, using the //U flag and redirecting to a file causes cscript to return the result using UTF-16.And then, magically, it worked (@#%$&^@$%!!!?!?!) using command as "cscript //E:jscript //Nologo" and encoding as "UTF-8". Oh well.I had to add my nodejs folder to my Windows Path environment variable.  In Windows 8 open the Control Panel, go to System, Advanced system settings (on the left), click Environment Variables on the left, and edit the Path variable to include the directory to your nodejs folder (probably in Program Files).Of course you have to have Node.js installed (use the Windows installer) and have installed CoffeeScript through NPM.I know this is a very late answer for this issue, but I got on something similar and went down the full path to understand what was really causing the issue.Turned out that the default windows jscript engine is still on es3, and many gems are taking advantage of es5 or es6 features.

Unfortunately if this happen (you are using a gem or a piece of code that leverage es5 or es6 features), there is no way to let it work on windows with the native js engine.This is the reason why installing node.js solves the problem (node is at least es5).Hope this can help some folks struggling with a runtime error of jsexec.My 2 cents advise is to install node(very easy) or install v8, and not removing the //=require_tree.Note execjs will automatically use node if detected. Otherwise force its use, adding in boot something like: To set the env to node.For windows users, this may work. There is a problem with coffee-script-source >1.9.0 running on windows.It seems you have to add this to your gemfile:gem 'coffee-script-source', '1.8.0'then dobundle update coffee-script-sourceI tried all the above options, and also mixed up a few combinations of them, till I found this Rails-4, ExecJS::ProgramError in Pages#welcome and had done multiple system gem updates and bundle installs and updates.I reverted all my trials and downgraded my coffee-script-source and it works. Posting here to help out anyone else, who may have a similar issue.Updating files in vendor/cachecoffee-script-source-1.8.0.gem Removing outdated .gem files from vendor/cache

coffee-script-source-1.9.1.1.gem Bundle updated!For beginners like me:toSource from tutorial to fix hereQuick and dirty solution: remove //= require_tree . from application.js.As I explain in the comments for the question, this doesn't actually solve the underlying issue that is causing the error, but merely sidesteps it.I used the solution number 2 because previously i had have this mistake, but in this ocation didn't work, then I added the gem 'coffee-script-source', '1.8.0'and run and my problem was fixedHere's a less complicated solution, for beginners:If you are just working through the tutorial, you are probably working with the default Gemfile (or very nearly). You can open it up in your text editor, and remove the pound sign from the front of this line:You will need to re-run bundle install, which will likely download a few things. But once it does, you should be able to start the server without any problem.At least, that worked for me.This also works on Ubuntu 12.04, by the way.Running Win 8 64 bit

rails 4.2.5

ruby 2.1.7This one worked for meDid you change the location of your code from C:\Users\this-user\yo-app?When I was young in rails I have created an app and the default location of my app was C:\Users\Duncan\my-app and then, when I changed my-app and placed it in D:\All-my-Apps-folder i had that error....I scratched my head, tried 1,2,3 and more .....nothing! Until I returned all code to default folder location and to my amazement, I was rolling again :)In case someone may find this useful (I can't explain why that happened, maybe someone may without speculation)

How to properly export an ES6 class in Node 4?

Jérôme Verstrynge

[How to properly export an ES6 class in Node 4?](https://stackoverflow.com/questions/32657516/how-to-properly-export-an-es6-class-in-node-4)

I defined a class in a module:But I get the following error message:How should I export this class and use it in another module? I have seen other SO questions, but I get other error messages when I try to implement their solutions.

2015-09-18 17:08:24Z

I defined a class in a module:But I get the following error message:How should I export this class and use it in another module? I have seen other SO questions, but I get other error messages when I try to implement their solutions.If you are using ES6 in Node 4, you cannot use ES6 module syntax without a transpiler, but CommonJS modules (Node's standard modules) work the same.should behence the error message "Cannot set property 'AspectType' of undefined" because module.export === undefined.Also, forcan you just writeand get essentially the same behavior. With ECMAScript 2015 you can export and import multiple classes like this then where you use them:In case of name collisions, or you prefer other names you can rename them like this:UseThen to import itRead http://babeljs.io/docs/learn-es2015/#modules for more detailsclass expression can be used for simplicity.-I simply write it this wayin the AspectType file:and import it like this:Several of the other answers come close, but honestly, I think you're better off going with the cleanest, simplest syntax. The OP requested a means of exporting a class in ES6 / ES2015. I don't think you can get much cleaner than this:I had the same problem.

What i found was i called my recieving object the same name as the class name. example: this screwed things up that way...

hope this helpsSometimes I need to declare multiple classes in one file, or I want to export base classes and keep their names exported because of my JetBrains editor understands that better. I just useAnd somewhere else:

How to obtain the query string from the current URL with JavaScript?

AbdulAziz

[How to obtain the query string from the current URL with JavaScript?](https://stackoverflow.com/questions/9870512/how-to-obtain-the-query-string-from-the-current-url-with-javascript)

I have URL like this:What I need to do is to get the details after the ? sign (query string) - that is ProjectID=462. How can I get that using JavaScript?What I've done so far is this:I don't know what to do next.

2012-03-26 10:30:43Z

I have URL like this:What I need to do is to get the details after the ? sign (query string) - that is ProjectID=462. How can I get that using JavaScript?What I've done so far is this:I don't know what to do next.Have a look at the MDN article about window.location.The QueryString is available in window.location.search.Solution that work in legacy browsers as wellMDN provide an example (no longer available in the above referenced article) of how to the get value of a single key available in the QueryString. Something like this:In modern browsersIn modern browsers you have the searchParams property of the URL interface, which returns a URLSearchParams object. The returned object has a number of convenient methods, including a get-method. So the equivalent of the above example would be:The URLSearchParams interface can also be used to parse strings in a querystring format, and turn them into a handy URLSearchParams object.Notice that the browser support is still limited on this interface, so if you need to support legacy browsers, stick with the first example or use a polyfill.Use window.location.search to get everything after ? including ?Example:This will add a global function to access to the queryString variables as a map.Enjoy.You can use this function, for split string from ?id= here is the fiddle If you happened to use Typescript and have dom in your the lib of tsconfig.json, you can do:

You can use the search property of the window.location object to obtain the query part of the URL. Note that it includes the question mark (?) at the beginning, just in case that affects how you intend to parse it.You should take a look at the URL API that has helper methods to achieve this in it as the URLSearchParams: https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParamsThis is not currently supported by all modern browsers, so don't forget to polyfill it (Polyfill available using https://qa.polyfill.io/).now you have the query part in queryStringFirst replace will remove all the white spaces, second will replace all the '&' part with "," and finally the third replace will put ":" in place of '=' signs.So let say you had a query like abc=123&efg=456. Now before parsing, your query is being converted into something like {"abc":"123","efg":"456"}. Now when you will parse this, it will give you your query in json object.Convert that into array then split with '?'You can use this for direct find value via params name.Try this oneLet’s say your URL is http://example.com&this=chicken&that=sandwich. You want to get the value of this, that, and another.If you want to use a URL other than the one in the window, you can pass one in as a second argument.Reference

How do I remove a file from the FileList

Heilemann

[How do I remove a file from the FileList](https://stackoverflow.com/questions/3144419/how-do-i-remove-a-file-from-the-filelist)

I'm building a drag-and-drop-to-upload web application using HTML5, and I'm dropping the files onto a div and of course fetching the dataTransfer object, which gives me the FileList.Now I want to remove some of the files, but I don't know how, or if it's even possible. Preferably I'd like to just delete them from the FileList; I've got no use for them. But if that's not possible, should I instead write in checks in code that interacts with the FileList? That seems cumbersome.

2010-06-29 20:20:01Z

I'm building a drag-and-drop-to-upload web application using HTML5, and I'm dropping the files onto a div and of course fetching the dataTransfer object, which gives me the FileList.Now I want to remove some of the files, but I don't know how, or if it's even possible. Preferably I'd like to just delete them from the FileList; I've got no use for them. But if that's not possible, should I instead write in checks in code that interacts with the FileList? That seems cumbersome.If you want to delete only several of the selected files: you can't. The File API Working Draft you linked to contains a note:Reading a bit of the HTML 5 Working Draft, I came across the Common input element APIs. It appears you can delete the entire file list by setting the value property of the input object to an empty string, like:BTW, the article Using files from web applications might also be of interest.This question has already been marked answered, but I'd like to share some information that might help others with using FileList.It would be convenient to treat a FileList as an array, but methods like sort, shift, pop, and slice don't work. As others have suggested, you can copy the FileList to an array. However, rather than using a loop, there's a simple one line solution to handle this conversion.Tested OK in FF, Chrome, and IE10+If you are targeting evergreen browsers (Chrome, Firefox, Edge, but also works in Safari 9+) or you can afford a polyfill, you can turn the FileList into an array by using Array.from() like this:Then it's easy to handle the array of Files like any other array.Since we are in the HTML5 realm, this is my solution. The gist is that you push the files to an Array instead of leaving them in a FileList, then using XHR2, you push the files to a FormData object. Example below.I have found very quick & short workaround for this. Tested in many popular browsers (Chrome, Firefox, Safari);First, you have to convert FileList to an Arrayto delete the particular element use thisI know this is an old question but it's ranking high on search engines in regards to this issue.properties in the FileList object cannot be deleted but at least on Firefox they can be changed. My workaround this issue was to add a property IsValid=true to those files that passed check and IsValid=false to those that didn't.then I just loop through the list to make sure that only the properties with IsValid=true are added to FormData.There might be a more elegant way to do this but here is my solution. With JqueryBasically you cleat the value of the input. Clone it and put the clone in place of the old one.This is extemporary, but I had the same problem which I solved this way. In my case I was uploading the files via XMLHttp request, so I was able to post the FileList cloned data through formdata appending. Functionality is that you can drag and drop or select multiple files as many times as you want (selecting files again won't reset the cloned FileList), remove any file you want from the (cloned) file list, and submit via xmlhttprequest whatever was left there. This is what I did. It is my first post here so code is a little messy. Sorry. Ah, and I had to use jQuery instead of $ as it was in Joomla script.Now the html and styles for this. I'm quite a newbie but all this actually worked for me and took me a while to figure it out.The styles for that. I had to mark some of them !important to override Joomla behavior.I hope this helps.Thanks @Nicholas Anderson simple and straight , here is your code applied and working at my code using jquery.HTML .JS CODEIf you have the luck to be sending a post request to the database with the files and you have the files you want to send in your DOMyou can simply check if the file in the file list is present in your DOM, and of course if it's not you just don't send that element to de DB.You may wish to create an array and use that instead of the read-only filelist.After that point do your uploading against your list instead of the built in list. I am not sure of the context you are working in but I am working with a jquery plugin I found and what I had to do was take the plugin's source and put it in the page using <script> tags. Then above the source I added my array so that it can act as a global variable and the plugin could reference it.Then it was just a matter of swapping out the references.I think this would allow you to also add drag & drop as again, if the built in list is read-only then how else could you get the dropped files into the list? :))I just change the type of input to the text and back to the file :D

What algorithm does Readability use for extracting text from URLs?

user300981

[What algorithm does Readability use for extracting text from URLs?](https://stackoverflow.com/questions/3652657/what-algorithm-does-readability-use-for-extracting-text-from-urls)

For a while, I've been trying to find a way of intelligently extracting the "relevant" text from a URL by eliminating the text related to ads and all the other clutter.After several months of researching, I gave it up as a problem that cannot be accurately determined. (I've tried different ways but none were reliable)A week back, I stumbled across Readability - a plugin that converts any URL into readable text. It looks pretty accurate to me. My guess is that they somehow have an algorithm that's smart enough to extract the relevant text.Does anyone know how they do it? Or how I could do it reliably?

2010-09-06 15:37:24Z

For a while, I've been trying to find a way of intelligently extracting the "relevant" text from a URL by eliminating the text related to ads and all the other clutter.After several months of researching, I gave it up as a problem that cannot be accurately determined. (I've tried different ways but none were reliable)A week back, I stumbled across Readability - a plugin that converts any URL into readable text. It looks pretty accurate to me. My guess is that they somehow have an algorithm that's smart enough to extract the relevant text.Does anyone know how they do it? Or how I could do it reliably?Readability mainly consists of heuristics that "just somehow work well" in many cases.I have written some research papers about this topic and I would like to explain the background of why it is easy to come up with a solution that works well and when it gets hard to get close to 100% accuracy.There seems to be a linguistic law underlying in human language that is also (but not exclusively) manifest in Web page content, which already quite clearly separates two types of text (full-text vs. non-full-text or, roughly, "main content" vs. "boilerplate").To get the main content from HTML, it is in many cases sufficient to keep only the HTML text elements (i.e. blocks of text that are not interrupted by markup) which have more than about 10 words. It appears that humans choose from two types of text ("short" and "long", measured by the number of words they emit) for two different motivations of writing text. I would call them "navigational" and "informational" motivations.If an author wants you to quickly get what is written, he/she uses "navigational" text, i.e. few words (like "STOP", "Read this", "Click here"). This is the mostly prominent type of text in navigational elements (menus etc.)If an author wants you to deeply understand what he/she means, he/she uses many words. This way, ambiguity is removed at the cost of an increase in redundancy. Article-like content usually falls into this class as it has more than only a few words.While this separation seems to work in a plethora of cases, it is getting tricky with headlines, short sentences, disclaimers, copyright footers etc.There are more sophisticated strategies, and features, that help separating main content from boilerplate. For example the link density (number of words in a block that are linked versus the overall number of words in the block), the features of the previous/next blocks, the frequency of a particular block text in the "whole" Web, the DOM structure of HTML document, the visual image of the page etc.You can read my latest article "Boilerplate Detection using Shallow Text Features" to get some insight from a theoretical perspective. You may also watch the video of my paper presentation on VideoLectures.net."Readability" uses some of these features. If you carefully watch the SVN changelog, you will see that the number of strategies varied over time, and so did the extraction quality of Readability. For example, the introduction of link density in December 2009 very much helped improving.In my opinion, it therefore makes no sense in saying "Readability does it like that", without mentioning the exact version number.I have published an Open Source HTML content extraction library called boilerpipe, which provides several different extraction strategies. Depending on the use case, one or the other extractor works better. You can try these extractors on pages on your choice using the companion boilerpipe-web app on Google AppEngine.To let numbers speak, see the "Benchmarks" page on the boilerpipe wiki which compares some extraction strategies, including boilerpipe, Readability and Apple Safari.I should mention that these algorithms assume that the main content is actually full text. There are cases where the "main content" is something else, e.g. an image, a table, a video etc. The algorithms won't work well for such cases.Cheers,Christianreadability is a javascript bookmarklet. meaning its client side code that manipulates the DOM. Look at the javascript and you should be able to see whats going on. Readability's workflow and code:And if you follow the JS and CSS files that the above code pulls in you'll get the whole picture:http://lab.arc90.com/experiments/readability/js/readability.js (this is pretty well commented, interesting reading)http://lab.arc90.com/experiments/readability/css/readability.cssThere's no 100% reliable way to do this, of course. You can have a look at the Readability source code hereBasically, what they're doing is trying to identify positive and negative blocks of text. Positive identifiers (i.e. div IDs) would be something like:Negative identifiers would be:And then they have unlikely and maybe candidates.

What they would do is determine what is most likely to be the main content of the site, see line 678 in the readability source. This is done by analyzing mostly the length of paragraphs, their identifiers (see above), the DOM tree (i.e. if the paragraph is a last child node),  strip out everything unnecessary, remove formatting, etc.The code has 1792 lines. It does seem like a non trivial problem, so maybe you can get your inspirations from there.Interesting. I have developed a similar PHP script. It basically scans articles and attaches parts of speech to all text (Brill Tagger). Then, grammatically invalid sentences are instantly eliminated. Then, sudden shifts in pronouns or past tense indicate the article is over, or hasn't started yet. Repeated phrases are searched for and eliminated, like "Yahoo news sports finance" appears ten times in the page. You can also get statistics on the tone with a plethora of word banks relating to various emotions. Sudden changes in tone, from active/negative/financial, to passive/positive/political indicates a boundary. It's endless really, however dig you want to deep.The major issues are links, embedded anomalies, scripting styles and updates. 

How to add image to canvas

PeeHaa

[How to add image to canvas](https://stackoverflow.com/questions/6011378/how-to-add-image-to-canvas)

I'm experimenting a bit with the new canvas element in HTML.I simply want to add an image to the canvas but it doesn't work for some reason.I have the following code:HTMLCSSJSThe image exists and I get no JavaScript errors. The image just doesn't display.It must be something really simple I've missed...

2011-05-15 21:28:52Z

I'm experimenting a bit with the new canvas element in HTML.I simply want to add an image to the canvas but it doesn't work for some reason.I have the following code:HTMLCSSJSThe image exists and I get no JavaScript errors. The image just doesn't display.It must be something really simple I've missed...Maybe you should have to wait until the image is loaded before you draw it. Try this instead:I.e. draw the image in the onload callback of the image.here is the sample code to draw image on canvas-In the above code selectedImage is an input control which can be used to browse image on system.

For more details of sample code to draw image on canvas while maintaining the aspect ratio:http://newapputil.blogspot.in/2016/09/show-image-on-canvas-html5.htmlIn my case, I was mistaken the function parameters, which are:If you expect them to beyou will place the image just outside the canvas with the same effects as described in the question.

How to make tinymce paste in plain text by default

Ryan

[How to make tinymce paste in plain text by default](https://stackoverflow.com/questions/2695731/how-to-make-tinymce-paste-in-plain-text-by-default)

Googled it thousands of times, No one gives a complete solution of how to make Tinymce paste in plain text by default and strip out any formatting without clicking the "paste as text" button.Any Ideas of how to implement that? or how to enable the "paste as text" button automatically?Thank you

2010-04-23 02:03:40Z

Googled it thousands of times, No one gives a complete solution of how to make Tinymce paste in plain text by default and strip out any formatting without clicking the "paste as text" button.Any Ideas of how to implement that? or how to enable the "paste as text" button automatically?Thank youEDIT: this solution is for version 3.x, for 4.x version read the answer from @Paulo NevesThe problem is that Paste plugin automatically resets plain text paste on every paste. So all we need to do - set it back. The following code should help.The definition of  setPlainTextSo now it always will be plain. For the tinyMCE 3X or 4X things have change a little.

now you can do this and it works fine.I have solved this problem with this codeJust ran into this one myself and discovered that as of TinyMCE 3.4.2 you can simply:...which was nice.I think the easiest way would be this:Isn't it better to use:instead of:FYI, TinyMCE has improved this by implementing it as a default option in the paste plugin.

More info: http://www.tinymce.com/wiki.php/Plugin:pasteHowever, it's still not perfect.

So here is a script that also trips off all HTML:Source:

http://www.tinymce.com/forum/viewtopic.php?pid=60121#p60121If you cannot use or do not want to use a plug-in for whatever reason, you can create your own "paste as plain text" callback function like so:Note: This was created for TinyMCE 3.5.x. Compatibility may vary by version.if you use a .yml file, add the plugin paste and paste_as_text: trueI'm not sure this is possible, since "paste as plaintext" actually performs cleanup on the text before it adds it to the window. If you just paste data into the window, no operations can be done. (Unless you hooked into the onChange or something), but they you might end up fixing code that had already been pasted and thus, 'double fixing' it.I did as follows:And then:    

How to spyOn a value property (rather than a method) with Jasmine

Shuping

[How to spyOn a value property (rather than a method) with Jasmine](https://stackoverflow.com/questions/20879990/how-to-spyon-a-value-property-rather-than-a-method-with-jasmine)

Jasmine's spyOn is good to change a method's behavior, but is there any way to change a value property (rather than a method) for an object? the code could be like below:

2014-01-02 09:38:19Z

