How to clear all <div>s’ contents inside a parent <div>?

Prasad

[How to clear all <div>s’ contents inside a parent <div>?](https://stackoverflow.com/questions/1701973/how-to-clear-all-divs-contents-inside-a-parent-div)

I have a div <div id="masterdiv"> which has several child <div>s.Example:How to clear the contents of all child <div>s inside the master <div> using jQuery?

2009-11-09 16:03:39Z

I have a div <div id="masterdiv"> which has several child <div>s.Example:How to clear the contents of all child <div>s inside the master <div> using jQuery?jQuery's empty() function does just that:clears the master div.clears all the child divs, but leaves the master intact.Use jQuery's CSS selector syntax to select all div elements inside the element with id masterdiv.  Then call empty() to clear the contents.Using text('') or html('') will cause some string parsing to take place, which generally is a bad idea when working with the DOM.  Try and use DOM manipulation methods that do not involve string representations of DOM objects wherever possible.if you needed delete all element in element, use this code :if you needed delete all element, Use this code:ref :https://learn.jquery.com/using-jquery-core/manipulating-elements/If all the divs inside that masterdiv needs to be cleared, it this.else, you need to iterate on all the div children of #masterdiv, and check if the id starts with childdiv.The better way is :  oror Works Fine to remove contents inside a divYou can use .empty() function to clear all the child elementsTo see the comparison between jquery .empty(), .hide(), .remove() and .detach() follow here http://www.voidtricks.com/jquery-empty-hide-remove-detach/When you are appending data into div by id using any service or database, first try it empty, like this:or try them if it help.$('.div_parent .div_child').empty();$('#div_parent #div_child').empty();I know this is a jQuery related question, but I believe someone might get here expecting a pure Javascript solution. So, if you were trying to do this using js, you could use the innerHTML property and set it to an empty string.

Convert seconds to HH-MM-SS with JavaScript?

Hannoun Yassir

[Convert seconds to HH-MM-SS with JavaScript?](https://stackoverflow.com/questions/1322732/convert-seconds-to-hh-mm-ss-with-javascript)

How can I convert seconds to an HH-MM-SS string using JavaScript?

2009-08-24 14:26:56Z

How can I convert seconds to an HH-MM-SS string using JavaScript?Don't you know datejs? it is a must know.Using datejs, just write something like:--updateNowadays date.js is outdated and not maintained, so use "Moment.js", which is much better as pointed out by T.J. Crowder.You can manage to do this without any external JavaScript library with the help of JavaScript Date method like following:Or, as per @Frank's comment; a one liner:I don't think any built-in feature of the standard Date object will do this for you in a way that's more convenient than just doing the math yourself.Example:I know this is kinda old, but...ES2015:It will output:As Cleiton pointed out in his answer, moment.js can be used for this:This does the trick:(Sourced from here)we can make this function lot shorter and crisp but that decreases the readability, so we will write it as simple as possible and as stable as possible. or you can check this working here: Try this:Here is an extension to Number class. toHHMMSS() converts seconds to an hh:mm:ss string.

Easy to follow version for noobies:This function should do it :Without passing a separator, it uses : as the (default) separator :If you want to use - as a separator, just pass it as the second parameter:See also this Fiddle.below is the given code which will convert seconds into hh-mm-ss format:Get alternative method from Convert seconds to HH-MM-SS format in JavaScriptI just wanted to give a little explanation to the nice answer above:On the second line, since there are 3600 seconds in 1 hour, we divide the total number of seconds by 3600 to get the total number of hours. We use parseInt to strip off any decimal. If totalSec was 12600 (3 and half hours), then parseInt( totalSec / 3600 ) would return 3, since we will have 3 full hours. Why do we need the % 24 in this case? If we exceed 24 hours, let's say we have 25 hours (90000 seconds), then the modulo here will take us back to 1 again, rather than returning 25. It is confining the result within a 24 hour limit, since there are 24 hours in one day. When you see something like this:Think of it like this:Chiming in on this old thread -- the OP stated HH:MM:SS, and many of the solutions work, until you realize you need more than 24 hours listed.  And maybe you don't want more than a single line of code.  Here you go:It returns H+:MM:SS.  To use it, simply use:...I tried to get it to  use the least amount of code possible, for a nice one-liner approach.Have you tried adding seconds to a Date object?A sample:

https://jsfiddle.net/j5g2p0dc/5/Updated:

Sample link was missing so I created a new one.Here is a function to convert seconds to hh-mm-ss format based on powtac's answer herejsfiddleExample useAfter looking at all the answers and not being happy with most of them, this is what I came up with.  I know I am very late to the conversation, but here it is anyway.I create a new Date object, change the time to my parameters, convert the Date Object to a time string, and removed the additional stuff by splitting the string and returning only the part that need.I thought I would share this approach, since it removes the need for regex, logic and math acrobatics to get the results in "HH:mm:ss" format, and instead it relies on built in methods.You may want to take a look at the documentation here:  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateThere are lots of options of solve this problem, and obvious there are good option suggested about, But I wants to add one more optimized code hereif you don't wants formatted zero with less then 10 number, you can use}Sample Code http://fiddly.org/1c476/1In one line, using T.J. Crowder's solution :In one line, another solution that also count days :Source : https://gist.github.com/martinbean/2bf88c446be8048814cf02b2641ba276For the special case of HH:MM:SS.MS (eq: "00:04:33.637") as used by FFMPEG to specify milliseconds. Example usage, a milliseconds transport timer:Example usage, binded to a media elementYou can also use below code:new Date().toString().split(" ")[4];result 15:08:03For anyone using AngularJS, a simple solution is to filter the value with the date API, which converts milliseconds to a string based on the requested format. Example:Note that this expects milliseconds, so you may want to multiply timeRemaining by 1000 if you are converting from seconds (as the original question was formulated).I ran into the case some have mentioned where the number of seconds is more than a day. Here's an adapted version of @Harish Anchu's top-rated answer that accounts for longer periods of time:Example:Usage Example None of the answers here satisfies my requirements as I want to be able to handleAlthough those are not required by the OP, it's good practice to cover edge cases, especially when it takes little effort.It's pretty obvious is that the OP means a NUMBER of seconds when he says seconds. Why would peg your function on String?I've used this code before to create a simple timespan object:

JavaScript equivalent of PHP's in_array()

roflwaffle

[JavaScript equivalent of PHP's in_array()](https://stackoverflow.com/questions/784012/javascript-equivalent-of-phps-in-array)

Is there a way in JavaScript to compare values from one array and see if it is in another array? Similar to PHP's in_array function?

2009-04-23 23:45:57Z

Is there a way in JavaScript to compare values from one array and see if it is in another array? Similar to PHP's in_array function?No, it doesn't have one. For this reason most popular libraries come with one in their utility packages. Check out jQuery's inArray and Prototype's Array.indexOf for examples. jQuery's implementation of it is as simple as you might expect:If you are dealing with a sane amount of array elements the above will do the trick nicely.EDIT: Whoops. I didn't even notice you wanted to see if an array was inside another. According to the PHP documentation this is the expected behavior of PHP's in_array:The code posted by Chris and Alex does not follow this behavior. Alex's is the official version of Prototype's indexOf, and Chris's is more like PHP's array_intersect. This does what you want:And this my test of the above on it:Note that I intentionally did not extend the Array prototype as it is generally a bad idea to do so.Array.indexOf was introduced in JavaScript 1.6, but it is not supported in older browsers. Thankfully the chaps over at Mozilla have done all the hard work for you, and provided you with this for compatibility:There are even some handy usage snippets for your scripting pleasure.There is now Array.prototype.includes:If the indexes are not in sequence, or if the indexes are not consecutive, the code in the other solutions listed here will break.  A solution that would work somewhat better might be:And, as a bonus, here's the equivalent to PHP's array_search (for finding the key of the element in the array:There is a project called Locutus, it implements PHP functions in Javascript and in_array() is included, you can use it exactly as you use in PHP.Examples of use:jQuery solution is available, check the ducumentation here:

http://api.jquery.com/jquery.inarray/There is an equivalent function:Look here: 

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includesYou can simply use the "includes" function as explained in this lesson on w3schoolsit looks likeIf you only want to check if a single value is in an array, then Paolo's code will do the job. If you want to check which values are common to both arrays, then you'll want something like this (using Paolo's inArray function):This wil return an array of values that are in both a and b. (Mathematically, this is an intersection of the two arrays.)EDIT: See Paolo's Edited Code for the solution to your problem. :)If you need all the PHP available parameters, use this:Add this code to you project and use the object-style inArray methodsWith Dojo Toolkit, you would use dojo.indexOf(). See dojo.indexOf for the documentation, and Arrays Made Easy by Bryan Forbes for some examples.where haystack is an array and needle is an element in array. If element not found will be returned undefined else the same element.I found a great jQuery solution here on SO.I wish someone would post an example of how to do this in underscore.An equivalent of in_array with underscore is _.indexOf   Examples:_.indexOf([3, 5, 8], 8);   // returns 2, the index of 8

_.indexOf([3, 5, 8], 10);   // returns -1, not foundIf you are going to use it in a class, and if you prefer it to be functional (and work in all browsers):Hope it helps someone :-)

Lodash remove duplicates from array

ChrisRich

[Lodash remove duplicates from array](https://stackoverflow.com/questions/31740155/lodash-remove-duplicates-from-array)

This is my data:With Lodash, how could I remove objects with duplicate id keys?

Something with filter, map and unique, but not quite sure.My real data set is much larger and has more keys, but the concept should be the same.

2015-07-31 07:10:58Z

This is my data:With Lodash, how could I remove objects with duplicate id keys?

Something with filter, map and unique, but not quite sure.My real data set is much larger and has more keys, but the concept should be the same._.unique no longer work for the current version as lodash 4.0.0 has this breaking change. The functionally was splitted into _.uniq, _.sortedUniq, _.sortedUniqBy, & _.uniqByYou could use _.uniqBy either byorDocumentation: https://lodash.com/docs#uniqByFor older versions of lodash( < 4.0.0 )Assuming that the data should be unique by id and your data is stored in data variable, you can use unique() function like this:Or simplyYou could use lodash method _.uniqWith, it is available in the current version of lodash 4.17.2.Example:More info:

https://lodash.com/docs/#uniqWithOr simply Use union, for simple array.Simply use _.uniqBy(). It creates duplicate-free version of an array. This is a new way and available from 4.0.0 version.orYou can also use unionBy for 4.0.0 and later, as follows:

let uniques = _.unionBy(data, 'id')With lodash version 4+, you would remove duplicate objects either by specific property or by the entire object like so:Source:https://www.codegrepper.com/?search_term=Lodash+remove+duplicates+from+array

Remove not alphanumeric characters from string. Having trouble with the [\] character

Bobby Cannon

[Remove not alphanumeric characters from string. Having trouble with the [\] character](https://stackoverflow.com/questions/9364400/remove-not-alphanumeric-characters-from-string-having-trouble-with-the-char)

I want to convert the following string to the provided output. I've not found any solution that will handle special characters like \r, \n, \b, etc.Basically I just want to get rid of anything that is not alphanumeric. Here is what I've tried...One other attempt with multiple stepswith resultsAny help would be appreciated.Working Solution:

2012-02-20 16:14:30Z

I want to convert the following string to the provided output. I've not found any solution that will handle special characters like \r, \n, \b, etc.Basically I just want to get rid of anything that is not alphanumeric. Here is what I've tried...One other attempt with multiple stepswith resultsAny help would be appreciated.Working Solution:The following is the/a correct regex to strip non-alphanumeric chars from an input string:Note that \W is the equivalent of [^0-9a-zA-Z_] - it includes the underscore character. To also remove underscores use e.g.:Since the test string contains various escaped chars, which are not alphanumeric, it will remove them.A backslash in the string needs escaping if it's to be taken literally:If you're not able to escape the input string correctly (why not?), or it's coming from some kind of untrusted/misconfigured source - you can do something like this:Note that the json representation of a string includes the quotes:But they are also removed by the replacement regex.All of the current answers still have quirks, the best thing i could come up with was:Heres an example that captures every key i could find on the keyboard:Outputs: '123abcABC'The problem is not with how you replace the characters, the problem is with how you input the string.It's only the first backslash in the input that is a backslash character, the others are part of the control characters \r, \b, \f and \n.As those backslashes are not separate characters, but part of the notation to write a single control characters, they can't be removed separately. I.e. you can't remove the backslash from \n as it's not two separate characters, it's the way that you write the control character LF, or line feed.If you acutally want to turn that input into the desired output, you would need to replace each control character with the corresponding letter, e.g. replace the character \n with the character n.To replace a control character you need to use a character set like [\r], as \r has a special meaning in a regular expression:Demo: http://jsfiddle.net/SAp4W/you can try this regex:This removes all non-alphanumeric characters, preserves capitalization, and preserves spaces between words.If you want to have this \\test\red\bob\fred\new string, you should escape all backslashes (\). When you write \\test\\red\\bob\\fred\\new your string actually contains single backslashes. You can be sure of this printing your string.

So if backslashes in your string are escaped myString.replace(/\W/g,'') will work normally.

How to make Regular expression into non-greedy?

Rueta

[How to make Regular expression into non-greedy?](https://stackoverflow.com/questions/2824302/how-to-make-regular-expression-into-non-greedy)

I'm using jQuery. I have a string with a block of special characters (begin and end). I want get the text from that special characters block. I used a regular expression object for in-string finding. But how can I tell jQuery to find multiple results when have two special character or more?My HTML:and my JavaScript code:My result is: [|cơ thử|nghiệm|] thị trường [|test2|đây là test lần 2|] chứng khoán [|Mỹ|day la nuoc my|] . But this isn't the result I want :(. How to get [text] for times 1 and [demo] for times 2 ?I've just done my work after searching info on internet ^^. I make code like this:

2010-05-13 03:46:30Z

I'm using jQuery. I have a string with a block of special characters (begin and end). I want get the text from that special characters block. I used a regular expression object for in-string finding. But how can I tell jQuery to find multiple results when have two special character or more?My HTML:and my JavaScript code:My result is: [|cơ thử|nghiệm|] thị trường [|test2|đây là test lần 2|] chứng khoán [|Mỹ|day la nuoc my|] . But this isn't the result I want :(. How to get [text] for times 1 and [demo] for times 2 ?I've just done my work after searching info on internet ^^. I make code like this:The non-greedy regex modifiers are like their greedy counter-parts but with a ? immediately following them:You are right that greediness is an issue:If you want to match both A--Z, you'd have to use A.*?Z (the ? makes the * "reluctant", or lazy).There are sometimes better ways to do this, though, e.g.This uses negated character class and possessive quantifier, to reduce backtracking, and is likely to be more efficient.In your case, the regex would be:Unfortunately Javascript regex doesn't support possessive quantifier, so you'd just have to do with:Note that the reluctant and possessive quantifiers are also applicable to the finite repetition {n,m} constructs.Examples in Java:I believe it would be like thisthe g at the end means global, so it doesn't stop at the first match.

Detecting when user scrolls to bottom of div with jQuery

Eax

[Detecting when user scrolls to bottom of div with jQuery](https://stackoverflow.com/questions/6271237/detecting-when-user-scrolls-to-bottom-of-div-with-jquery)

I have a div box (called flux) with a variable amount of content inside.

This divbox has overflow set to auto.Now, what I am trying to do, is, when the use scroll to the bottom of this DIV-box, load more content into the page, I know how to do this (load the content) but I don't know how to detect when the user has scrolled to the bottom of the div tag?

If I wanted to do it for the entire page, I'd take .scrollTop and subtract that from .height.But I can't seem to do that here?I've tried taking .scrollTop from flux, and then wrapping all the content inside a div called inner, but if I take the innerHeight of flux it returns 564px (the div is set to 500 as height) and the height of 'innner' it returns 1064, and the scrolltop, when at the bottom of the div says 564.What can I do?

2011-06-07 20:29:37Z

I have a div box (called flux) with a variable amount of content inside.

This divbox has overflow set to auto.Now, what I am trying to do, is, when the use scroll to the bottom of this DIV-box, load more content into the page, I know how to do this (load the content) but I don't know how to detect when the user has scrolled to the bottom of the div tag?

If I wanted to do it for the entire page, I'd take .scrollTop and subtract that from .height.But I can't seem to do that here?I've tried taking .scrollTop from flux, and then wrapping all the content inside a div called inner, but if I take the innerHeight of flux it returns 564px (the div is set to 500 as height) and the height of 'innner' it returns 1064, and the scrolltop, when at the bottom of the div says 564.What can I do?There are some properties/methods you can use:So you can take the sum of the first two properties, and when it equals to the last property, you've reached the end:http://jsfiddle.net/doktormolle/w7X9N/Edit: I've updated 'bind' to 'on' as per:I found a solution that when you scroll your window and end of a div shown from bottom gives you an alert.In this example if you scroll down when div (.posts) finish its give you an alert.Though the question was asked 5.5 years ago, still it is more than relevant in today's UI/UX context. And I would like to add my two cents.Source: https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Determine_if_an_element_has_been_totally_scrolledSome elements won't allow you to scroll the full height of the element. In those cases you can use:Just an additional note here as I found this when looking for a solution for a fixed div that I want to scroll. For my scenario I found that its preferable to take into account the padding on the div so I can hit the end exactly. So expanding on @Dr.Molle's answer I add the followingThat'll give you the precise location, including padding and bordersthis worked for me thoughIf you are not using Math.round() function the solution suggested by Dr.Molle will not work in some cases when a browser window has a zoom.For example 

$(this).scrollTop() + $(this).innerHeight() = 600 $(this)[0].scrollHeight yields = 599.99998 600 >= 599.99998 fails.Here is the correct code:You may also add some extra margin pixels if you do not need a strict conditionIf you need to use this on a div that has overflow-y as hidden or scroll, something like this may be what you need.I found ceil was needed because prop scrollHeight seems to round, or perhaps some other reason causing this to be off by less than 1.If anyone gets scrollHeight as undefined, then select elements' 1st subelement: mob_top_menu[0].scrollHeightnot sure if it is any help but this is how I do it.I have an index panel that is larger that the window and I let it scroll until the end  this index is reached. Then I fix it in position. The process is reversed once you scroll toward the top of the page.Regards.Though this was asked almost 6 years, ago still hot topic in UX design, here is demo snippet if any newbie wanted to useIn simple DOM usage you can check the conditionif true then you have reached the end.Guys this is the solution to the zoom issue, it works with all zoom levels, in case you need it:This is the code on github.Here's another version.The key code is function scroller() which takes input as the height of the div containing the scrolling section, using overflow:scroll. It approximates 5px from the top or 10px from the bottom as at the top or bottom. Otherwise it's too sensitive. It seems 10px is about the minimum. You'll see it adds 10 to the div height to get the bottom height. I assume 5px might work, I didn't test extensively. YMMV. scrollHeight returns the height of the inner scrolling area, not the displayed height of the div, which in this case is 400px.

Call An Asynchronous Javascript Function Synchronously

Robert C. Barth

[Call An Asynchronous Javascript Function Synchronously](https://stackoverflow.com/questions/9121902/call-an-asynchronous-javascript-function-synchronously)

First, this is a very specific case of doing it the wrong way on-purpose to retrofit an asynchronous call into a very synchronous codebase that is many thousands of lines long and time doesn't currently afford the ability to make the changes to "do it right." It hurts every fiber of my being, but reality and ideals often do not mesh. I know this sucks.OK, that out of the way, how do I make it so that I could:The examples (or lack thereof) all use libraries and/or compilers, both of which are not viable for this solution. I need a concrete example of how to make it block (e.g. NOT leave the doSomething function until the callback is called) WITHOUT freezing the UI. If such a thing is possible in JS.

2012-02-03 00:03:01Z

First, this is a very specific case of doing it the wrong way on-purpose to retrofit an asynchronous call into a very synchronous codebase that is many thousands of lines long and time doesn't currently afford the ability to make the changes to "do it right." It hurts every fiber of my being, but reality and ideals often do not mesh. I know this sucks.OK, that out of the way, how do I make it so that I could:The examples (or lack thereof) all use libraries and/or compilers, both of which are not viable for this solution. I need a concrete example of how to make it block (e.g. NOT leave the doSomething function until the callback is called) WITHOUT freezing the UI. If such a thing is possible in JS.OK. but you should really do it the right way... or whateverNo, it is impossible to block the running JavaScript without blocking the UI.Given the lack of information, it's tough to offer a solution, but one option may be to have the calling function do some polling to check a global variable, then have the callback set data to the global.All of this assumes that you can modify doSomething(). I don't know if that's in the cards.If it can be modified, then I don't know why you wouldn't just pass a callback to doSomething() to be called from the other callback, but I better stop before I get into trouble. ;)Oh, what the heck. You gave an example that suggests it can be done correctly, so I'm going to show that solution...Because your example includes a callback that is passed to the async call, the right way would be to pass a function to doSomething() to be invoked from the callback.Of course if that's the only thing the callback is doing, you'd just pass func directly...Async functions, a feature in ES2017, make async code look sync by using promises (a particular form of async code) and the await keyword. Also notice in the code examples below the keyword async in front of the function keyword that signifies an async/await function. The await keyword won't work without being in a function pre-fixed with the async keyword. Since currently there is no exception to this that means no top level awaits will work (top level awaits meaning an await outside of any function). Though there is a proposal for top-level await.ES2017 was ratified (i.e. finalized) as the standard for JavaScript on June 27th, 2017. Async await may already work in your browser, but if not you can still use the functionality using a javascript transpiler like babel or traceur. Chrome 55 has full support of async functions. So if you have a newer browser you may be able to try out the code below.See kangax's es2017 compatibility table for browser compatibility.Here's an example async await function called doAsync which takes three one second pauses and prints the time difference after each pause from the start time:When the await keyword is placed before a promise value (in this case the promise value is the value returned by the function doSomethingAsync) the await keyword will pause execution of the function call, but it won't pause any other functions and it will continue executing other code until the promise resolves. After the promise resolves it will unwrap the value of the promise and you can think of the await and promise expression as now being replaced by that unwrapped value. So, since await just pauses waits for then unwraps a value before executing the rest of the line you can use it in for loops and inside function calls like in the below example which collects time differences awaited in an array and prints out the array. The async function itself returns a promise so you can use that as a promise with chaining like I do above or within another async await function.The function above would wait for each response before sending another request if you would like to send the requests concurrently you can use Promise.all.If the promise possibly rejects you can wrap it in a try catch or skip the try catch and let the error propagate to the async/await functions catch call. You should be careful not to leave promise errors unhandled especially in Node.js. Below are some examples that show off how errors work.If you go here you can see the finished proposals for upcoming ECMAScript versions.An alternative to this that can be used with just ES2015 (ES6) is to use a special function which wraps a generator function. Generator functions have a yield keyword which may be used to replicate the await keyword with a surrounding function. The yield keyword and generator function are a lot more general purpose and can do many more things then just what the async await function does. If you want a generator function wrapper that can be used to replicate async await I would check out co.js. By the way co's function much like async await functions return a promise. Honestly though at this point browser compatibility is about the same for both generator functions and async functions so if you just want the async await functionality you should use Async functions without co.js.Browser support is actually pretty good now for Async functions (as of 2017) in all major current browsers (Chrome, Safari, and Edge) except IE.Take a look at JQuery Promises:http://api.jquery.com/promise/http://api.jquery.com/jQuery.when/http://api.jquery.com/deferred.promise/Refactor the code:There is one nice workaround at http://taskjs.org/It uses generators which are new to javascript. So it's currently not implemented by most browsers. I tested it in firefox, and for me it is nice way to wrap asynchronous function.Here is example code from project GitHubYou can force asynchronous JavaScript in NodeJS to be synchronous with sync-rpc.It will definitely freeze your UI though, so I'm still a naysayer when it comes to whether what it's possible to take the shortcut you need to take. It's not possible to suspend the One And Only Thread in JavaScript, even if NodeJS lets you block it sometimes. No callbacks, events, anything asynchronous at all will be able to process until your promise resolves. So unless you the reader have an unavoidable situation like the OP (or, in my case, are writing a glorified shell script with no callbacks, events, etc.), DO NOT DO THIS!But here's how you can do this:./calling-file.js./my-asynchronous-call.jsLIMITATIONS:These are both a consequence of how sync-rpc is implemented, which is by abusing require('child_process').spawnSync:You can also convert it into callbacks.The idea that you hope to achieve can be made possible if you tweak the requirement a little bit The below code is possible if your runtime supports the ES6 specification. More about async functions

Force DOM redraw/refresh on Chrome/Mac

Jason Kester

[Force DOM redraw/refresh on Chrome/Mac](https://stackoverflow.com/questions/8840580/force-dom-redraw-refresh-on-chrome-mac)

Every once in a while, Chrome will render perfectly valid HTML/CSS incorrectly or not at all.   Digging in through the DOM inspector is often enough to get it to realize the error of its ways and redraw correctly, so it's provably the case that the markup is good.  This happens frequently (and predictably) enough in a project I'm working on that I've put code in place to force a redraw in certain circumstances.This works in most browser/os combinations:As in, tweak some unused CSS property, then ask for some information that forces a redraw, then untweak the property.  Unfortunately, the bright team behind Chrome for the Mac seem to have found a way to get that offsetHeight without redrawing.  Thus killing an otherwise useful hack.Thus far, the best I've come up with to get the same effect on Chrome/Mac is this piece of ugliness:As in, actually force the element to jump a bit, then chill a second and jump it back.  Making it worse, if you drop that timeout below 500ms (to where it would be less noticeable), it often won't have the desired effect, since the browser won't get around to redrawing before it goes back to its original state.Anybody care to offer a better version of this redraw/refresh hack (preferably based on the first example above)  that works on Chrome/Mac?

2012-01-12 18:47:30Z

Every once in a while, Chrome will render perfectly valid HTML/CSS incorrectly or not at all.   Digging in through the DOM inspector is often enough to get it to realize the error of its ways and redraw correctly, so it's provably the case that the markup is good.  This happens frequently (and predictably) enough in a project I'm working on that I've put code in place to force a redraw in certain circumstances.This works in most browser/os combinations:As in, tweak some unused CSS property, then ask for some information that forces a redraw, then untweak the property.  Unfortunately, the bright team behind Chrome for the Mac seem to have found a way to get that offsetHeight without redrawing.  Thus killing an otherwise useful hack.Thus far, the best I've come up with to get the same effect on Chrome/Mac is this piece of ugliness:As in, actually force the element to jump a bit, then chill a second and jump it back.  Making it worse, if you drop that timeout below 500ms (to where it would be less noticeable), it often won't have the desired effect, since the browser won't get around to redrawing before it goes back to its original state.Anybody care to offer a better version of this redraw/refresh hack (preferably based on the first example above)  that works on Chrome/Mac?Not sure exactly what you're trying to achieve but this is a method I have used in the past with success to force the browser to redraw, maybe it will work for you.If this simple redraw doesn't work you can try this one. It inserts an empty text node into the element which guarantees a redraw.EDIT: In response to Šime Vidas what we are achieving here would be a forced reflow. You can find out more from the master himself http://paulirish.com/2011/dom-html5-css3-performance/ None of the above answers worked for me. I did notice that resizing my window did cause a redraw. So this did it for me:This solution without timeouts! Real force redraw! For Android and iOS.We recently encountered this and discovered that promoting the affected element to a composite layer with translateZ fixed the issue without needing extra javascript.As these painting issues show up mostly in Webkit/Blink, and this fix mostly targets Webkit/Blink, it's preferable in some cases.  Especially since many JavaScript solutions cause a reflow and repaint, not just a repaint.This works for me. Kudos go here.Hiding an element and then showing it again within a setTimeout of 0 will force a redraw.This seems to do the trick for me. Plus, it really doesn't show at all.call window.getComputedStyle() should force a reflowI ran into this challenge today in OSX El Capitan with Chrome v51. The page in question worked fine in Safari.  I tried nearly every suggestion on this page - none worked right - all had side-effects...  I ended up implementing the code below - super simple - no side-effects (still works as before in Safari).Solution: Toggle a class on the problematic element as needed.  Each toggle will force a redraw. (I used jQuery for convenience, but vanilla JavaScript should be no problem...)jQuery Class ToggleCSS ClassAnd that's it...NOTE: You have to run the snippet below "Full Page" in order to see the effect.call this function after 500 milliseconds.If you want to preserve the styles declared into your stylesheets, better to use something like:NB: with latest webkit/blink, storing the value of offsetHeight is mandatory in order to trigger the repaint, otherwise the VM (for optimizations purposes) will probably skip that instruction.Update: added the second offsetHeight reading, it is necessary to prevent browser from queueing/caching a following CSS property/class change with the restore of the display value (this way a CSS transition that can follow should be rendered)$('article.child').redraw();    //<==bad ideaAn approach that worked for me on IE (I couldn't use the display technique because there was an input that must not loose focus)It works if you have 0 margin (changing the padding works as well)CSS only. This works for situations where a child element is removed or added. In these situations, borders and rounded corners can leave artifacts.My fix for IE10 + IE11. Basically what happens is that you add a DIV within an wrapping-element that has to be recalculated. Then just remove it and voila; works like a charm :)Most answers require the use of an asynchroneous timeout, which causes an annoying blink. But I came up with this one, which works smoothly because it is synchroneous:This is my solution that worked for disappearing content...I ran into a similar issue and this simple line of JS helped to fix it:In my case it was a bug with a Chrome extension not redrawing the page after changing its CSS from within the extension.I wanted to return all the states to the previous state (without reloading) including the elements added by jquery. The above implementation not gonna works. and I did as follows.I had a react component list which when scrolled, then opened another page, then when returning back the list was not rendered on Safari iOS until page was scrolled. So this is the fix.Below css works for me on IE 11 and Edge, no JS needed.

scaleY(1) does the trick here. Seems the simplest solution.It helped me

Javascript + Unicode regexes

Tomalak

[Javascript + Unicode regexes](https://stackoverflow.com/questions/280712/javascript-unicode-regexes)

How can I use Unicode-aware regular expressions in JavaScript? For example, there should be something akin to \w that can match any code-point in Letters or Marks category (not just the ASCII ones), and hopefully have filters like [[P*]] for punctuation etc.

2008-11-11 12:00:33Z

How can I use Unicode-aware regular expressions in JavaScript? For example, there should be something akin to \w that can match any code-point in Letters or Marks category (not just the ASCII ones), and hopefully have filters like [[P*]] for punctuation etc.The upcoming ECMAScript language specification, edition 6, includes Unicode-aware regular expressions. Support must be enabled with the u modifier on the regex. See Unicode-aware regular expressions in ES6.Until ES 6 is finished and widely adopted among browser vendors you're still on your own, though. Update: There is now a transpiler named regexpu that translates ES6 Unicode regular expressions into equivalent ES5. It can be used as part of your build process. Try it out online.Even though JavaScript operates on Unicode strings, it does not implement Unicode-aware character classes and has no concept of POSIX character classes or Unicode blocks/sub-ranges.Personally, I would rather not install another library just to get this functionality. My answer does not require any external libraries, and it may also work with little modification for regex flavors besides JavaScript.Unicode's website provides a way to translate Unicode categories into a set of code points. Since it's Unicode's website, the information from it should be accurate.Note that you will need to exclude the high-end characters, as JavaScript can only handle characters less than FFFF (hex). I suggest checking the Abbreviate    Collate, and Escape check boxes, which strike a balance between avoiding unprintable characters and minimizing the size of the regex.Here are some common expansions of different Unicode properties:\p{L} (Letters):\p{Nd} (Number decimal digits):\p{P} (Punctuation):The page also recognizes a number of obscure character classes, such as \p{Hira}, which is just the (Japanese) Hiragana characters:Lastly, it's possible to plug a char class with more than one Unicode property to get a shorter regex than you would get by just combining them (as long as certain settings are checked).Having also not found a good solution, I wrote a small script a long time ago, by downloading data from the unicode specification (v.5.0.0) and generating intervals for each unicode category and subcategory in the BMP (lately replaced by a small Java program that uses its own native Unicode support).Basically it converts \p{...} to a range of values, much like the output of the tool mentioned by Tomalak, but the intervals can end up quite large (since it's not dealing with blocks, but with characters scattered through many different places).For instance, a Regex written like this:Will be converted to something like this:Haven't used it a lot in practice, but it seems to work fine from my tests, so I'm posting here in case someone find it useful. Despite the length of the resulting regexes (the example above has 3591 characters when expanded), the performance seems to be acceptable (see the tests at jsFiddle; thanks to @modiX and @Lwangaman for the improvements).Here's the source (raw, 27.5KB; minified, 24.9KB, not much better...). It might be made smaller by unescaping the unicode characters, but OTOH will run the risk of encoding issues, so I'm leaving as it is. Hopefully with ES6 this kind of thing won't be necessary anymore.Update: this looks like the same strategy adopted in the XRegExp Unicode plug-in mentioned by Tim Down, except that in this case regular JavaScript regexes are being used.As mentioned in other answers, JavaScript regexes have no support for Unicode character classes. However, there is a library that does provide this: Steven Levithan's excellent XRegExp and its Unicode plug-in.[^\u0000-\u007F]+ for any characters which is not included ASCII characters.For example:Here are some perfect references:Unicode range RegExp generator Unicode Regular Expressions Unicode 10.0 Character Code ChartsMatch Unicode Block RangeFebruary 2019: It seems that regexp /\p{L}/u for match letters (as unicode categories) Here is a working exampleI report this bug here.This will do it:It explicitly selects a range of unicode characters.

It will work for latin characters, but other strange characters may be out of this range.In JavaScript, \w and \d are ASCII, while \s is Unicode.  Don't ask me why.  JavaScript does support \p with Unicode categories, which you can use to emulate a Unicode-aware \w and \d.For \d use \p{N} (numbers)For \w use [\p{L}\p{N}\p{Pc}\p{M}] (letters, numbers, underscores, marks)Update: Unfortunately, I was wrong about this.  JavaScript does does not officially support \p either, though some implementations may still support this.  The only Unicode support in JavaScript regexes is matching specific code points with \uFFFF.  You can use those in ranges in character classes.If you are using Babel then unicode support is already available.I also released a plugin which transforms your source code such that you can write regular expressions like /^\p{L}+$/. These will then be transformed into something that browsers understand.Here is the project page of the plugin: https://github.com/danielberndt/babel-plugin-utf-8-regexI'm answering this question

What would be the equivalent for \p{Lu} or \p{Ll} in regExp for js?

since it was marked as an exact duplicate of the current old question.Querying the UCD Database of Unicode 12, \p{Lu} generates 1,788 code points.  Converting to UTF-16 yields the class construct equivalency.

It's only a 4k character string and is easily doable in any regex engines.  Querying the UCD database of Unicode 12, \p{Ll} generates 2,151 code points.  Converting to UTF-16 yields the class construct equivalency.  Note that a regex implementation of \p{Lu} or \p{Pl} actually calls a

non standard function to test the value.  The character classes shown here are done differently and are linear, standard

and pretty slow, when jammed into mostly a single class. Some insight on how a Regex engine (in general) implements Unicode Property Classes: Examine these performance characteristics between the property

and the class block (like above)  Wow what a difference !!Lets see how Properties might be implementedArray of Pointers [ 10FFFF ] where each index is is a Code Point  When a regex is parsed with something like this \p{Lu} it

is translated directly into  Another example, when a regex is parsed with punctuation property \p{P} it

is translated into  The offset and bit or bit(mask) are stored as a regex step for that property.  The lookup table is created once for all Unicode Code Points using this array. When a character is checked, it is as simple as using the CP as an index into

this array and checking the Classification Structure's specific element for that bit(mask).  This structure is expandable and indirect to provide much more complex look ups. This is just a simple example.Compare that direct lookup with a character class search :  All classes are a linear list of items searched from left to right.

In this comparison, given our target string contains only the complete

Upper Case Unicode Letters only, the law of averages would predict that 

half of the items in the class would have to be ranged checked

to find a match. This is a huge disadvantage in performance.  However, if the lookup tables are not there or are not up to date

with the latest Unicode release (12 as of this date)

then  this would be the only way.  In fact, it is mostly the only way to get the complete Emoji

characters as there is no specific property (or reasoning) to their assignment.You can also use:

Find the closest ancestor element that has a specific class

rvighne

[Find the closest ancestor element that has a specific class](https://stackoverflow.com/questions/22119673/find-the-closest-ancestor-element-that-has-a-specific-class)

How can I find an element's ancestor that is closest up the tree that has a particular class, in pure JavaScript? For example, in a tree like so:Then I want div.near.ancestor if I try this on the p and search for ancestor.

2014-03-01 20:05:25Z

How can I find an element's ancestor that is closest up the tree that has a particular class, in pure JavaScript? For example, in a tree like so:Then I want div.near.ancestor if I try this on the p and search for ancestor.Update: Now supported in most major browsersNote that this can match selectors, not just classeshttps://developer.mozilla.org/en-US/docs/Web/API/Element.closestFor legacy browsers that do not support closest() but have matches() one can build selector-matching similar to @rvighne's class matching:This does the trick:The while loop waits until el has the desired class, and it sets el to el's parent every iteration so in the end, you have the ancestor with that class or null.Here's a fiddle, if anyone wants to improve it. It won't work on old browsers (i.e. IE); see this compatibility table for classList. parentElement is used here because parentNode would involve more work to make sure that the node is an element.Use element.closest()https://developer.mozilla.org/en-US/docs/Web/API/Element/closestSee this example DOM:This is how you would use element.closest:Based on the the8472 answer and https://developer.mozilla.org/en-US/docs/Web/API/Element/matches here is cross-platform 2017 solution:@rvighne solution works well, but as identified in the comments ParentElement and ClassList both have compatibility issues. To make it more compatible, I have used:Of course, indexOf is simply looking for the presence of that string, it does not care if it is the whole string or not. So if you had another element with class 'ancestor-type' it would still return as having found 'ancestor', if this is a problem for you, perhaps you can use regexp to find an exact match.

Why aren't my ball (objects) shrinking/disappearing?

MattO

[Why aren't my ball (objects) shrinking/disappearing?](https://stackoverflow.com/questions/20550930/why-arent-my-ball-objects-shrinking-disappearing)

http://jsfiddle.net/goldrunt/jGL84/42/

this is from line 84 in this JS fiddle. There are 3 different effects which can be applied to the balls by uncommenting lines 141-146. The 'bounce' effect works as it should, but the 'asplode' effect does nothing. Should I include the 'shrink' function inside the asplode function?

2013-12-12 18:07:20Z

http://jsfiddle.net/goldrunt/jGL84/42/

this is from line 84 in this JS fiddle. There are 3 different effects which can be applied to the balls by uncommenting lines 141-146. The 'bounce' effect works as it should, but the 'asplode' effect does nothing. Should I include the 'shrink' function inside the asplode function?Your code has a few problems.First, in your definition:asplode is local to the scope inside shrink and therefore not accessible to the code in update where you are attempting to call it. JavaScript scope is function-based, so update cannot see asplode because it is not inside shrink. (In your console, you'll see an error like: Uncaught ReferenceError: asplode is not defined.)You might first try instead moving asplode outside of shrink: However, your code has several more problems that are outside the scope of this question:This doesn't do what you think it does.  This calls shrink, passes it p, and then passes the result to setInterval.  shrink(p) returns undefined, so this line doesn't actually put anything on an interval.You probably want:

Have Grunt generate index.html for different setups

Dmitry Pashkevich

[Have Grunt generate index.html for different setups](https://stackoverflow.com/questions/12401998/have-grunt-generate-index-html-for-different-setups)

I'm trying to use Grunt as a build tool for my webapp.I want to have at least two setups: I. Development setup - load scripts from separate files, without concatenation,so my index.html would look something like:II. Production setup - load my scripts minified & concatenated in one file,with index.html accordingly:The question is, how can I make grunt make these index.html's depending on the configuration when I run grunt dev or grunt prod?Or maybe I'm digging in the wrong direction and it would be easier to always generate MyApp-all.min.js but put inside it either all my scripts (concatenated) or a loader script that asynchronously loads those scripts from separate files?How do you do it, guys?

2012-09-13 08:08:55Z

I'm trying to use Grunt as a build tool for my webapp.I want to have at least two setups: I. Development setup - load scripts from separate files, without concatenation,so my index.html would look something like:II. Production setup - load my scripts minified & concatenated in one file,with index.html accordingly:The question is, how can I make grunt make these index.html's depending on the configuration when I run grunt dev or grunt prod?Or maybe I'm digging in the wrong direction and it would be easier to always generate MyApp-all.min.js but put inside it either all my scripts (concatenated) or a loader script that asynchronously loads those scripts from separate files?How do you do it, guys?I recently discovered these Grunt v0.4.0 compatible tasks:Below are snippets from my Gruntfile.js.ENV setup:Preprocess:Tasks:And in the /src/tmpl/index.html template file (for example):I'm sure my setup is different than most people, and the usefulness of the above will depend on your situation. For me, while it's an awesome bit of code, the Yeoman grunt-usemin is a more robust than I personally need.NOTE: I just discovered the above listed tasks today, so I might be missing a feature and/or my process may change down the road. For now, I'm loving the simplicity and features that grunt-preprocess and grunt-env have to offer. :)Motivated by a down vote ...When I posted this answer there weren't many options for Grunt 0.4.x that offered a solution that worked for my needs. Now, months later, I would guess that there are more options out there that could be better than what I have posted here. While I still personally use, and enjoy using, this technique for my builds, I ask that future readers take the time to read the other answers given and to research all the options. If you find a better solution, please post your answer here.I'm not sure if it will be of any help to anyone, but I've created this demo repository on GitHub that shows a complete (and more complex setup) using the technique(s) I've outlined above.I've come up with my own solution. Not polished yet but I think I'm going to move in that direction.In essense, I'm using grunt.template.process() to generate my index.html from a template that analyzes current configuration and produces either a list of my original source files or links to a single file with minified code. The below example is for js files but the same approach can be extended to css and any other possible text files.grunt.js:index.js (the index task):Finally, index.tmpl, with generation logic baked in:UPD. Found out that Yeoman, which is based on grunt, has a built-in usemin task that integrates with Yeoman's build system. It generates a production version of index.html from information in development version of index.html as well as other environment settings. A bit sophisticated but interesting to look at.I dislike the solutions here (including the one I previously gave) and here's why:I've figured out how to solve both of these issues.  I've set up my grunt task so that every time a file is added or deleted, the script tags automatically get generated to reflect that.  This way, you don't need to modify your html file or your grunt file when you add/remove/rename your JS files.To summarize how that works, I have a html template with a variable for the script tags.  I use https://github.com/alanshaw/grunt-include-replace to populate that variable.  In dev mode, that variable comes from a globbing pattern of all my JS files.  The watch task recalculates this value when a JS file is added or removed.  Now, to get different results in dev or prod mode, you simply populate that variable with a different value.  Here's some code:jsSrcFileArray is your typical grunt file-globbing pattern.  jsScriptTags takes the jsSrcFileArray and concatenates them together with script tags on both sides.  destPath is the prefix I want on each file.  And here's what the HTML looks like:Now, as you can see in the config, I generate the value of that variable as a hard coded script tag when it's run in prod mode.  In dev mode, this variable will expand to a value like this:Let me know if you have any questions.  PS: This is a crazy amount of code for something I'd want to do in every client-side JS app.  I hope someone can turn this into a reusable plugin.  Maybe I will some day.  I have been asking myself the same question for a while, and I think this grunt plugin could be configured to do what you want: https://npmjs.org/package/grunt-targethtml. It implements conditional html tags, that depend on the grunt target.I was looking for a more simple, straight forward solution so I combined the answer from this question:How to place if else block in gruntfile.jsand came up with following simple steps:No new plugins to add  or configure and no new grunt tasks.This grunt task named scriptlinker looks like an easy way to add the scripts in dev mode.  You could probably run a concat task first and then point it to your concatenated file in prod mode.  grunt-dom-munger reads and manipulates HTML with CSS selectors. Ex. read  tags from your html. Remove nodes, add nodes, and more.You can use grunt-dom-munger to read all your JS files that are linked by your index.html, uglify them and then use grunt-dom-munger again to modify your index.html to only link the minified JSI found a grunt plugin called grunt-dev-prod-switch. All it does is comment out certain blocks it looks for based on an --env option you pass to grunt (although it limits you to dev, prod, and test).Once you set it up as it explains here, you can run for example:grunt serve --env=dev, and all it does is comment out the blocks which are wrapped byand it will uncomment out blocks which are wrapped byIt also works on javascript, I use it for setting up the right IP address to connect to for my backend API. The blocks just change toIn your case, it would be as simple as this:grunt-bake is a fantastic grunt script that would work great here. I use it in my JQM auto build script.https://github.com/imaginethepoet/autojqmphonegapTake a look at my grunt.coffee file: This looks at all the files in base.html and sucks them in to create index.html works fantastic for multipage apps (phonegap). This allows for easier development as all devs are not working on one long single page app (preventing lots of conflict checkins). Instead you can break up the pages and work on smaller chunks of code and compile to the full page using a watch command.Bake reads the template from base.html and injects the component html pages on watch.

  

  

  jQuery Mobile Demos

  

  

  

  

  

  

  

  

  

      app.initialize();

    

  You can take this a step further and add injections in your pages for "menus" "popups" etc so you can really break pages into smaller manageable components.Use a combination of wiredep https://github.com/taptapship/wiredep and usemin https://github.com/yeoman/grunt-usemin in order to have grunt take care of these tasks. Wiredep will add your dependencies one script file at a time, and usemin will concatenate them all into a single file for production. This can then be accomplished with just some html comments. For instance, my bower packages are automatically included and added to the html when I run bower install && grunt bowerInstall:This answer is not for noobs!Use Jade templating ... passing variables to a Jade template is a bog standard use caseI am using grunt (grunt-contrib-jade) but you don't have to use grunt. Just use the standard npm jade module.If using grunt then your gruntfile would like something like ...We can now easily access the data passed by grunt in the Jade template.Much like the approach used by Modernizr, I set a CSS class on the HTML tag according to the value of the variable passed and can use JavaScript logic from there based on whether the CSS class is present or not.This is great if using Angular since you can do ng-if's to include elements in the page based on whether the class is present.For example, I might include a script if the class is present ...(For example, I might include the live reload script in dev but not in production)Consider processhtml. It allows definition of multiple "targets" for builds. Comments are used to conditionally include or exclude material from the HTML: becomesIt even purports to do nifty stuff like this (see the README): 

Node.js and CPU intensive requests

Olivier Lalonde

[Node.js and CPU intensive requests](https://stackoverflow.com/questions/3491811/node-js-and-cpu-intensive-requests)

I've started tinkering with Node.js HTTP server and really like to write server side Javascript but something is keeping me from starting to use Node.js for my web application.I understand the whole async I/O concept but I'm somewhat concerned about the edge cases where procedural code is very CPU intensive such as image manipulation or sorting large data sets.As I understand it, the server will be very fast for simple web page requests such as viewing a listing of users or viewing a blog post. However, if I want to write very CPU intensive code (in the admin back end for example) that generates graphics or resizes thousands of images, the request will be very slow (a few seconds). Since this code is not async, every requests coming to the server during those few seconds will be blocked until my slow request is done. One suggestion was to use Web Workers for CPU intensive tasks. However, I'm afraid web workers will make it hard to write clean code since it works by including a separate JS file. What if the CPU intensive code is located in an object's method? It kind of sucks to write a JS file for every method that is CPU intensive.Another suggestion was to spawn a child process, but that makes the code even less maintainable.Any suggestions to overcome this (perceived) obstacle? How do you write clean object oriented code with Node.js while making sure CPU heavy tasks are executed async? 

2010-08-16 09:04:31Z

I've started tinkering with Node.js HTTP server and really like to write server side Javascript but something is keeping me from starting to use Node.js for my web application.I understand the whole async I/O concept but I'm somewhat concerned about the edge cases where procedural code is very CPU intensive such as image manipulation or sorting large data sets.As I understand it, the server will be very fast for simple web page requests such as viewing a listing of users or viewing a blog post. However, if I want to write very CPU intensive code (in the admin back end for example) that generates graphics or resizes thousands of images, the request will be very slow (a few seconds). Since this code is not async, every requests coming to the server during those few seconds will be blocked until my slow request is done. One suggestion was to use Web Workers for CPU intensive tasks. However, I'm afraid web workers will make it hard to write clean code since it works by including a separate JS file. What if the CPU intensive code is located in an object's method? It kind of sucks to write a JS file for every method that is CPU intensive.Another suggestion was to spawn a child process, but that makes the code even less maintainable.Any suggestions to overcome this (perceived) obstacle? How do you write clean object oriented code with Node.js while making sure CPU heavy tasks are executed async? What you need is a task queue! Moving your long running tasks out of the web-server is a GOOD thing. Keeping each task in "separate" js file promotes modularity and code reuse. It forces you to think about how to structure your program in a way that will make it easier to debug and maintain in the long run. Another benefit of a task queue is the workers can be written in a different language. Just pop a task, do the work, and write the response back.something like this https://github.com/resque/resqueHere is an article from github about why they built it http://github.com/blog/542-introducing-resqueThis is misunderstanding of the definition of web server -- it should only be used to "talk" with clients. Heavy load tasks should be delegated to standalone programs (that of course can be also written in JS).

You'd probably say that it is dirty, but I assure you that a web server process stuck in resizing images is just worse (even for lets say Apache, when it does not block other queries). Still, you may use a common library to avoid code redundancy.    EDIT: I have come up with an analogy; web application should be as a restaurant. You have waiters (web server) and cooks (workers). Waiters are in contact with clients and do simple tasks like providing menu or explaining if some dish is vegetarian. On the other hand they delegate harder tasks to the kitchen. Because waiters are doing only simple things they respond quick, and cooks can concentrate on their job.Node.js here would be a single but very talented waiter that can process many requests at a time, and Apache would be a gang of dumb waiters that just process one request each. If this one Node.js waiter would begin to cook, it would be an immediate catastrophe. Still, cooking could also exhaust even a large supply of Apache waiters, not mentioning the chaos in the kitchen and the progressive decrease of responsitivity.You don't want your CPU intensive code to execute async, you want it to execute in parallel. You need to get the processing work out of the thread that's serving HTTP requests. It's the only way to solve this problem. With NodeJS the answer is the cluster module, for spawning child processes to do the heavy lifting. (AFAIK Node doesn't have any concept of threads/shared memory; it's processes or nothing). You have two options for how you structure your application. You can get the 80/20 solution by spawning 8 HTTP servers and handling compute-intensive tasks synchronously on the child processes. Doing that is fairly simple. You could take an hour to read about it at that link. In fact, if you just rip off the example code at the top of that link you will get yourself 95% of the way there.The other way to structure this is to set up a job queue and send big compute tasks over the queue. Note that there is a lot of overhead associated with the IPC for a job queue, so this is only useful when the tasks are appreciably larger than the overhead.I'm surprised that none of these other answers even mention cluster.Background:

Asynchronous code is code that suspends until something happens somewhere else, at which point the code wakes up and continues execution. One very common case where something slow must happen somewhere else is I/O. Asynchronous code isn't useful if it's your processor that is responsible for doing the work. That is precisely the case with "compute intensive" tasks. Now, it might seem that asynchronous code is niche, but in fact it's very common. It just happens not to be useful for compute intensive tasks.Waiting on I/O is a pattern that always happens in web servers, for example. Every client who connects to your sever gets a socket. Most of the time the sockets are empty. You don't want to do anything until a socket receives some data, at which point you want to handle the request. Under the hood an HTTP server like Node is using an eventing library (libev) to keep track of the thousands of open sockets. The OS notifies libev, and then libev notifies NodeJS when one of the sockets gets data, and then NodeJS puts an event on the event queue, and your http code kicks in at this point and handles the events one after the other. Events don't get put on the queue until the socket has some data, so events are never waiting on data - it's already there for them.Single threaded event-based web servers makes sense as a paradigm when the bottleneck is waiting on a bunch of mostly empty socket connections and you don't want a whole thread or process for every idle connection and you don't want to poll your 250k sockets to find the next one that has data on it.Couple of approaches you can use.As @Tim notes, you can create an asynchronous task that sits outside or parallel to your main serving logic. Depends on your exact requirements, but even cron can act as a queueing mechanism. WebWorkers can work for your async processes but they are currently not supported by node.js. There are a couple of extensions that provide support, for example: http://github.com/cramforce/node-workerYou still get you can still reuse modules and code through the standard "requires" mechanism. You just need to ensure that the initial dispatch to the worker passes all the information needed to process the results. Use child_process is one solution. But each child process spawned may consume a lot of memory compared to Go goroutinesYou can also use queue based solution such as kue

How to watch for a route change in AngularJS?

Robert Christian

[How to watch for a route change in AngularJS?](https://stackoverflow.com/questions/14765719/how-to-watch-for-a-route-change-in-angularjs)

How would one watch/trigger an event on a route change?

2013-02-08 04:33:14Z

How would one watch/trigger an event on a route change?Note: This is a proper answer for a legacy version of AngularJS. See this question for updated versions.The following events are also available (their callback functions take different arguments):See the $route docs.There are two other undocumented events: See What's the difference between $locationChangeSuccess and $locationChangeStart?If you don't want to place the watch inside a specific controller, you can add the watch for the whole aplication in Angular app run()This is for the total beginner... like me:HTML:

    

    Angular:Hope this helps a total beginner like me. Here is the full working sample:

How can you sort an array without mutating the original array?

Peter Olson

[How can you sort an array without mutating the original array?](https://stackoverflow.com/questions/9592740/how-can-you-sort-an-array-without-mutating-the-original-array)

Let's suppose I wanted a sort function that returns a sorted copy of the inputted array. I naively tried thisand I tested it with this, which shows that my sort method is mutating the array.I also tried this approachbut it doesn't work at all.Is there a straightforward way around this, prefereably a way that doesn't require hand-rolling my own sorting algorithm or copying every element of the array into a new one?

2012-03-06 22:11:21Z

Let's suppose I wanted a sort function that returns a sorted copy of the inputted array. I naively tried thisand I tested it with this, which shows that my sort method is mutating the array.I also tried this approachbut it doesn't work at all.Is there a straightforward way around this, prefereably a way that doesn't require hand-rolling my own sorting algorithm or copying every element of the array into a new one?Just copy the array. There are many ways to do that:Another way with es6 (non-deep copy):the spread-syntax as array literal (copied from mdn): https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operatorTry the followingThe slice(0) expression creates a copy of the array starting at element 0. You can use slice with no arguments to copy an array:You can also do this This way d will not get mutated. I use Object.assign() for most of my copies:However, after looking through the OP comments, I researched a bit of deep copying and turns out Object.assign not only performs a shallow copy, but also only selects enumerable and own properties (as answered in this post).Anyone who wants to do a deep copy (e.g. if your array contains objects) can use:Then you can sort arrCopy without changing arr.Please note: this can be slow for very large arrays.

Is there an onSelect event or equivalent for HTML <select>?

ePharaoh

[Is there an onSelect event or equivalent for HTML <select>?](https://stackoverflow.com/questions/647282/is-there-an-onselect-event-or-equivalent-for-html-select)

I have an input form that lets me select from multiple options, and do something when the user changes the selection. Eg,Now, doSomething() only gets triggered when the selection changes.I want to trigger doSomething() when the user selects any option, possibly the same one again.I have tried using an "onClick" handler, but that gets triggered before the user starts the selection process.So, is there a way to trigger a function on every select by the user?Update:The answer suggested by Darryl seemed to work, but it doesn't work consistently. Sometimes the event gets triggered as soon as user clicks the drop-down menu, even before the user has finished the selection process!

2009-03-15 04:13:47Z

I have an input form that lets me select from multiple options, and do something when the user changes the selection. Eg,Now, doSomething() only gets triggered when the selection changes.I want to trigger doSomething() when the user selects any option, possibly the same one again.I have tried using an "onClick" handler, but that gets triggered before the user starts the selection process.So, is there a way to trigger a function on every select by the user?Update:The answer suggested by Darryl seemed to work, but it doesn't work consistently. Sometimes the event gets triggered as soon as user clicks the drop-down menu, even before the user has finished the selection process!Here is the simplest way:Works both with mouse selection and keyboard Up/Down keys whes select is focused.I needed something exactly the same. This is what worked for me:Supports this:I had the same problem when I was creating a design a few months back. The solution I found was to use .live("change", function()) in combination with .blur() on the element you are using. If you wish to have it do something when the user simply clicks, instead of changing, just replace change with click.I assigned my dropdown an ID, selected, and used the following:I saw this one didn't have a selected answer, so I figured I'd give my input. This worked excellently for me, so hopefully someone else can use this code when they get stuck.http://api.jquery.com/live/Edit: Use the on selector as opposed to .live. See jQuery .on()Just an idea, but is it possible to put an onclick on each of the <option> elements?Another option could be to use onblur on the select. This will fire anytime the user clicks away from the select. At this point you could determine what option was selected. To have this even trigger at the correct time, the onclick of the option's could blur the field (make something else active or just .blur() in jQuery).The onclick approach is not entirely bad but as said, it will not be triggered when the value isn't changed by a mouse-click.

It is however possible to trigger the onclick event in the onchange event.Going to expand on jitbit's answer.  I found it weird when you clicked the drop down and then clicked off the drop down without selecting anything.  Ended up with something along the lines of:This makes a little more sense for the user and allows JavaScript to run every time they select any option including an earlier option.The downside to this approach is that it breaks the ability to tab onto a drop down and use the arrow keys to select the value.  This was acceptable for me since all the users click everything all the time until the end of eternity.If you really need this to work like this, I would do this (to ensure it works by keyboard and mouse)Unfortunately the onclick will run multiple times (e.g. on onpening the select... and on selection/close) and the onkeypress may fire when nothing changes...To properly fire an event every time the user selects something(even the same option), you just need to trick the select box.Like others have said, specify a negative selectedIndex on focus to force the change event. While this does allow you to trick the select box, it won't work after that as long as it still has focus. The simple fix is to force the select box to blur, shown below.You can see a working demo here.Actually, the onclick events will NOT fire when the user uses the keyboard to change the selection in the select control. You might have to use a combination of onChange and onClick to get the behavior you're looking for.This may not directly answer your question, but this problem could be solved by simple design level adjustments. I understand this may not be 100% applicable to all use-cases, but I strongly urge you to consider re-thinking your user flow of your application and if the following design suggestion can be implemented.I decided to do something simple than hacking alternatives for onChange() using other events that were not really meant for this purpose (blur, click, etc.)The way I solved it:Simply pre-pend a placeholder option tag such as select that has no value to it.So, instead of just using the following structure, which requires hack-y alternatives:Consider using this:So, this way, your code is a LOT more simplified and the onChange will work as expected, every time the user decides to select something other than the default value. You could even add the disabled attribute to the first option if you don't want them to select it again and force them to select something from the options, thus triggering an onChange() fire.At the time of this answer, I'm writing a complex Vue application and I found that this design choice has simplified my code a lot. I spent hours on this problem before I settled down with this solution and I didn't have to re-write a lot of my code. However, if I went with the hacky alternatives, I would have needed to account for the edge cases, to prevent double firing of ajax requests, etc. This also doesn't mess up the default browser behaviour as a nice bonus (tested on mobile browsers as well).Sometimes, you just need to take a step back and think about the big picture for the simplest solution.What I did when faced with a similar Problem is I added an 'onFocus' to the select box which appends a new generic option ('select an option'or something similar) and default it as the selected option.So my goal was to be able to select the same value multiple times which essentially overwrites the the onchange() function and turn it into a useful onclick() method. Based on the suggestions above I came up with this which works for me.http://jsfiddle.net/dR9tH/19/Add an extra option as the first, like the header of a column, which will be the default value of the dropdown button before click it and reset at the end of doSomething(), so when choose A/B/C, the onchange event always trigs, when the selection is State, do nothing and return. onclick is very unstable as many people mentioned before. So all we need to do is to make an initial button label which is different as your true options so the onchange will work on any option.The wonderful thing about the select tag (in this scenario) is that it will grab its value from the option tags.Try:Worked decent for me.use jquery:Here's my solution, completely different to any else on here. It uses the mouse position to figure out if an option was clicked as oppose to clicking on the select box to open the dropdown. It makes use of the event.screenY position as this is the only reliable cross browser variable. A hover event has to be attached first so it can figure out the controls position relative to the screen before the click event.Here is my jsFiddle

http://jsfiddle.net/sU7EV/4/you should try using option:selectedWhat works for me:In that way, onchange calls 'doSomething()' when the option changes, and 

onclick calls 'doSomething()' when onchange event is false, in other words, when you select the same option        Try this (event triggered exactly when you select option, without option changing):http://jsbin.com/dowoloka/4Here you have the index returned, and in the js code you can use this return with one switch or anything you want.first of all u use onChange as an event handler and then use flag variable to make it do the function u want every time u make a change Try this:A long while ago now but in reply to the original question, would this help ?

Just put onClick into the SELECT line.

Then put what you want each OPTION to do in the OPTION lines.

ie:I had faced a similar need and ended up writing a angularjs directive for the same -guthub link - angular selectUsed element[0].blur(); to remove the focus off the select tag. Logic is to trigger this blur on second click of the dropdown.as-select gets triggered even when user selects the same value in the dropdown.DEMO - linkThe one True answer is to not use the select field (if you need to do something when you re-select same answer.)Create a dropdown menu with conventional div, button, show/hide menu. Link: https://www.w3schools.com/howto/howto_js_dropdown.aspCould have been avoided had one been able to add event listeners to options. If there had been an onSelect listener for select element. And if clicking on the select field didn't aggravatingly fire off mousedown, mouseup, and click all at the same time on mousedown.Kindly note that Event Handlers are not supported for the OPTION tag on IE, with a quick thinking..I came up with this solution, try it and give me your feedback:What I'm doing here actually is resetting the select index so that the onchange event will be triggered always, true that you we lose the selected item when you click and it maybe annoying if your list is long, but it may help you in someway..what about changing the value of the select when the element gains focus, e.g (with jquery):I found out this solution .set the selectedIndex of select element to 0 initiallycall this method onChange eventYou can use onChange: http://www.w3schools.com/TAGS/tag_Select.aspCopied from http://www.faqs.org/docs/htmltut/forms/_SELECT_onChange.html

onChange designates a JavaScript to run when the user chooses one of the options. This means that an action is initiated immediately when the user chooses an item, not when a "submit" button is pressed.

JavaScript implementation of Gzip [closed]

David Citron

[JavaScript implementation of Gzip [closed]](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)

I'm writing a Web application that needs to store JSON data in a small, fixed-size server-side cache via AJAX (think: Opensocial quotas). I do not have control over the server.I need to reduce the size of the stored data to stay within a server-side quota, and was hoping to be able to gzip the stringified JSON in the browser before sending it up to the server.However, I cannot find much in the way of JavaScript implementations of Gzip. Any suggestions for how I can compress the data on the client side before sending it up?

2008-11-16 19:54:38Z

I'm writing a Web application that needs to store JSON data in a small, fixed-size server-side cache via AJAX (think: Opensocial quotas). I do not have control over the server.I need to reduce the size of the stored data to stay within a server-side quota, and was hoping to be able to gzip the stringified JSON in the browser before sending it up to the server.However, I cannot find much in the way of JavaScript implementations of Gzip. Any suggestions for how I can compress the data on the client side before sending it up?Edit There appears to be a better LZW solution that handles Unicode strings correctly at http://pieroxy.net/blog/pages/lz-string/index.html (Thanks to pieroxy in the comments).I don't know of any gzip implementations, but the jsolait library (the site seems to have gone away) has functions for LZW compression/decompression. The code is covered under the LGPL.I had another problem, I did not want to encode data in gzip but to decode gzipped data. 

I am running javascript code outside of the browser so I need to decode it using pure javascript.It took me some time but i found that in the JSXGraph library there is a way to read gzipped data.Here is where I found the library: http://jsxgraph.uni-bayreuth.de/wp/2009/09/29/jsxcompressor-zlib-compressed-javascript-code/

There is even a standalone utility that can do that, JSXCompressor, and the code is LGPL licencied.Just include the jsxcompressor.js file in your project and then you will be able to read a base 64 encoded gzipped data:I understand it is not what you wanted but I still reply here because I suspect it will help some people.We just released pako https://github.com/nodeca/pako , port of zlib to javascript. I think that's now the fastest js implementation of deflate / inflate / gzip / ungzip. Also, it has democratic MIT licence. Pako supports all zlib options and it's results are binary equal.Example:I ported an implementation of LZMA from a GWT module into standalone JavaScript.  It's called LZMA-JS.Here are some other compression algorithms implemented in Javascript:I did not test, but there's a javascript implementation of ZIP, called JSZip:http://jszip.stuartk.co.uk/https://stuk.github.io/jszip/I guess a generic client-side JavaScript compression implementation would be a very expensive operation in terms of processing time as opposed to transfer time of a few more HTTP packets with uncompressed payload.Have you done any testing that would give you an idea how much time there is to save? I mean, bandwidth savings can't be what you're after, or can it?Most browsers can decompress gzip on the fly. That might be a better option than a javascript implementation.You can use a 1 pixel per 1 pixel Java applet embedded in the page and use that for compression.It's not JavaScript and the clients will need a Java runtime but it will do what you need.

Redux - multiple stores, why not?

Sebastien Daniel

[Redux - multiple stores, why not?](https://stackoverflow.com/questions/33619775/redux-multiple-stores-why-not)

As a note: I've read the docs for Redux (Baobab, too), and I've done a fair share of Googling & testing.Why is it so strongly suggested that a Redux app have only one store?I understand the pros/cons of a single-store setup vs a multiple store setup (There are many Q&A on SO on this subject). IMO, this architectural decision belongs to the app developers based on their projects' needs. So why is it so strongly suggested for Redux, almost to the point of sounding mandatory (though nothing is stopping us from making multiple stores)?EDIT: feedback after converting to single-storeAfter a few months working with redux on what many would consider a complex SPA, I can say that the single store structure has been a pure delight to work with.A few points that might help others understand why single store vs many store is a moot question in many, many use-cases:a few pointersThe true challenge in building your redux store is when deciding how to structure it. Firstly, because changing structure down the road is just a major pain. Secondly, because it largely determines how you'll be using, and querying your app data for any process. There are many suggestions on how to structure a store. In our case we found the following to be ideal:Hopefully this feedback will help others.For those of you who have been wondering how to "easily" manage a single store, which can quickly get complex. There are a tools that help isolate the structural dependencies/logic of your store.There is Normalizr which normalizes your data based on a schema. It then provides an interface to work with your data and fetch other parts of your data by id, much like a Dictionary.Not knowing Normalizr at the time, I built something along the same lines. relational-json takes a schema, and returns a Table-based interface (a little like a database). The advantage of relational-json is that your data structure dynamically references other parts of your data (essentially, you can traverse your data in any direction, just like normal JS objects). It's not as mature as Normalizr, but I've been using it successfully in production for a few months now.

2015-11-09 22:47:35Z

As a note: I've read the docs for Redux (Baobab, too), and I've done a fair share of Googling & testing.Why is it so strongly suggested that a Redux app have only one store?I understand the pros/cons of a single-store setup vs a multiple store setup (There are many Q&A on SO on this subject). IMO, this architectural decision belongs to the app developers based on their projects' needs. So why is it so strongly suggested for Redux, almost to the point of sounding mandatory (though nothing is stopping us from making multiple stores)?EDIT: feedback after converting to single-storeAfter a few months working with redux on what many would consider a complex SPA, I can say that the single store structure has been a pure delight to work with.A few points that might help others understand why single store vs many store is a moot question in many, many use-cases:a few pointersThe true challenge in building your redux store is when deciding how to structure it. Firstly, because changing structure down the road is just a major pain. Secondly, because it largely determines how you'll be using, and querying your app data for any process. There are many suggestions on how to structure a store. In our case we found the following to be ideal:Hopefully this feedback will help others.For those of you who have been wondering how to "easily" manage a single store, which can quickly get complex. There are a tools that help isolate the structural dependencies/logic of your store.There is Normalizr which normalizes your data based on a schema. It then provides an interface to work with your data and fetch other parts of your data by id, much like a Dictionary.Not knowing Normalizr at the time, I built something along the same lines. relational-json takes a schema, and returns a Table-based interface (a little like a database). The advantage of relational-json is that your data structure dynamically references other parts of your data (essentially, you can traverse your data in any direction, just like normal JS objects). It's not as mature as Normalizr, but I've been using it successfully in production for a few months now.There are edge cases when you might use multiple stores (e.g. if you have performance problems with updating lists of thousands of items that are on screen at the same time many times per second). That said it's an exception and in most apps you never need more than a single store.Why do we stress this in the docs? Because most people coming from Flux background will assume multiple stores is the solution to making update code modular. However Redux has a different solution for this: reducer composition.Having multiple reducers that are further split into a reducer tree is how you keep updates modular in Redux. If you don't recognize this and go for multiple stores without fully understanding reducer composition first, you will miss many benefits of Redux single store architecture:In some very large enterprise apps with hundreds or thousands of reducers, it's often useful to think of different areas of the app as entirely separate apps. In those cases (where it really is multiple apps that share a domain name), I use multiple stores.For example, I tend to treat the following common functionality areas as separate apps:If any of those things are small, just keep them as part of the main app. If they grow very large (as some enterprise account management & analytics tools do), split them out.The best way to manage very large apps is to treat them like a composition of many smaller apps.If your app is less than say ~50k LOC, you should probably ignore this advice and follow Dan's advice, instead.If your app is more than 1 Million LOC, you should probably be splitting out mini-apps, even if you maintain them in a mono repo.You are living in your own world. I am meeting with people that uses redux, because it is popular, everyday. You couldn't even imagine how much projects was started reduxing without any decisioning. I hate redux approaches but had to use it, because other developers knows nothing else. It's just an epic bubble inflated by facebook.Let's imagine that you have several redux stores. You will break unidirectional data flow. You will immediately realize how much connections between stores you have. You can suffer from these connections, fighting with circular deps, etc.Single immutable store with unidirectional flow is not an elixir for every disease. If you don't want to maintain project architecture you will suffer anyway.Multiple stores can be helpful in the following use cases

1. If you have large components that are independent of each other in terms of  data structure, behavior, application context. Isolating these components make it easier to manage your data and application flow. It also helps independent development and maintenance of your components.

2. Performance problems: not a typical use case, but if some of your components are updating very frequently and does not have any impact on other components, probably you can go for different stores.For all other cases, you may not need to have multiple stores. As Dan says, creating thoughtful reducer compositions can prove to be better solution.why we can't use multiple store using redux????Can or should I create multiple stores? Can I import my store directly, and use it in components myself?The original Flux pattern describes having multiple「stores」in an app, each one holding a different area of domain data. This can introduce issues such as needing to have one store「waitFor」another store to update. As with several other questions, it is possible to create multiple distinct Redux stores in a page, but the intended pattern is to have only a single store. Having a single store enables using the Redux DevTools, makes persisting and rehydrating data simpler, and simplifies the subscription logic.Some valid reasons for using multiple stores in Redux might include:Solving a performance issue caused by too frequent updates of some part of the state, when confirmed by profiling the app.

Isolating a Redux app as a component in a bigger application, in which case you might want to create a store per root component instance.

However, creating new stores shouldn't be your first instinct, especially if you come from a Flux background. Try reducer composition first, and only use multiple stores if it doesn't solve your problem.Similarly, while you can reference your store instance by importing it directly, this is not a recommended pattern in Redux. If you create a store instance and export it from a module, it will become a singleton. This means it will be harder to isolate a Redux app as a component of a larger app, if this is ever necessary, or to enable server rendering, because on the server you want to create separate store instances for every request.official doc by reduxHaving one store in Redux is really what we need in many cases, I both used Redux and Flux and believe Redux does the job better!Don't forget the store is in a JavaScript Object, so while you have only one store, it can be easily extended and reused, to me, having one store make it much easier to traversing using Redux dev tools and not be mixed up in big applications...Also the concept of one store is mimicking the database for us, one source of truth which you can change it and you can access it in the browser memory...If the whole application be well-managed, one store can be enough to manage the whole application status...

JavaScript get window X/Y position for scroll

Xeoncross

[JavaScript get window X/Y position for scroll](https://stackoverflow.com/questions/3464876/javascript-get-window-x-y-position-for-scroll)

I'm hoping to find a way to get the current viewable window's position (relative to the total page width/height) so I can use it to force a scroll from one section to another. However, there seems to be a tremendous amount of options when it comes to guessing which object holds the true X/Y for your browser.Which of these do I need to make sure IE 6+, FF 2+, and Chrome/Safari work?And are there any others? Once I know where the window is I can set an event chain that will slowly call window.scrollBy(x,y); until it reaches my desired point.

2010-08-12 05:03:28Z

I'm hoping to find a way to get the current viewable window's position (relative to the total page width/height) so I can use it to force a scroll from one section to another. However, there seems to be a tremendous amount of options when it comes to guessing which object holds the true X/Y for your browser.Which of these do I need to make sure IE 6+, FF 2+, and Chrome/Safari work?And are there any others? Once I know where the window is I can set an event chain that will slowly call window.scrollBy(x,y); until it reaches my desired point.The method jQuery (v1.10) uses to find this is:That is:The subtraction of document.documentElement.clientLeft / Top only appears to be required to correct for situations where you have applied a border (not padding or margin, but actual border) to the root element, and at that, possibly only in certain browsers.Maybe more simple;Credits: so.dom.js#L492Using pure javascript you can use Window.scrollX and Window.scrollYNotesHere is a quick demo 

How do I make an HTML text box show a hint when empty?

Michael L Perry

[How do I make an HTML text box show a hint when empty?](https://stackoverflow.com/questions/108207/how-do-i-make-an-html-text-box-show-a-hint-when-empty)

I want the search box on my web page to display the word "Search" in gray italics. When the box receives focus, it should look just like an empty text box. If there is already text in it, it should display the text normally (black, non-italics). This will help me avoid clutter by removing the label.BTW, this is an on-page Ajax search, so it has no button.

2008-09-20 13:55:10Z

I want the search box on my web page to display the word "Search" in gray italics. When the box receives focus, it should look just like an empty text box. If there is already text in it, it should display the text normally (black, non-italics). This will help me avoid clutter by removing the label.BTW, this is an on-page Ajax search, so it has no button.Another option, if you're happy to have this feature only for newer browsers, is to use the support offered by HTML 5's placeholder attribute:In the absence of any styles, in Chrome this looks like:You can try demos out here and in HTML5 Placeholder Styling with CSS.Be sure to check the browser compatibility of this feature. Support in Firefox was added in 3.7. Chrome is fine. Internet Explorer only added support in 10. If you target a browser that does not support input placeholders, you can use a jQuery plugin called jQuery HTML5 Placeholder, and then just add the following JavaScript code to enable it.That is known as a textbox watermark, and it is done via JavaScript.or if you use jQuery, a much better approach:You can set the placeholder using the placeholder attribute in HTML (browser support). The font-style and color can be changed with CSS (although browser support is limited).You can add and remove a special CSS class and modify the input value onfocus/onblur with JavaScript:Then specify a hint class with the styling you want in your CSS for example:The best way is to wire up your JavaScript events using some kind of JavaScript library like jQuery or YUI and put your code in an external .js-file.But if you want a quick-and-dirty solution this is your inline HTML-solution:Updated: Added the requested coloring-stuff.I posted a solution for this on my website some time ago.  To use it, import a single .js file:Then annotate whatever inputs you want to have hints with the CSS class hintTextbox:More information and example are available here.Here's a functional example with Google Ajax library cache and some jQuery magic.This would be the CSS:This would would be the JavaScript code:And this would be the HTML:I hope it's enough to make you interested in both the GAJAXLibs and in jQuery.Now it become very easy.

In html we can give the placeholder attribute for input elements.e.g.check for more details :http://www.w3schools.com/tags/att_input_placeholder.aspFor jQuery users: naspinski's jQuery link seems broken, but try this one:

http://remysharp.com/2007/01/25/jquery-tutorial-text-box-hints/You get a free jQuery plugin tutorial as a bonus. :)I found the jQuery plugin jQuery Watermark to be better than the one listed in the top answer. Why better? Because it supports password input fields. Also, setting the color of the watermark (or other attributes) is as easy as creating a .watermark reference in your CSS file.This is called "watermark".I found the jQuery plugin jQuery watermark which, unlike the first answer, does not require extra setup (the original answer also needs a special call to before the form is submitted).Use jQuery Form Notifier - it is one of the most popular jQuery plugins and doesn't suffer from the bugs some of the other jQuery suggestions here do (for example, you can freely style the watermark, without worrying if it will get saved to the database).jQuery Watermark uses a single CSS style directly on the form elements (I noticed that CSS font-size properties applied to the watermark also affected the text boxes -- not what I wanted). The plus with jQuery Watermark is you can drag-drop text into fields (jQuery Form Notifier doesn't allow this).Another one suggested by some others (the one at digitalbrush.com), will accidentally submit the watermark value to your form, so I strongly recommend against it.Use a background image to render the text:Then all you have to do is detect value == 0 and apply the right class:And the jQuery JavaScript code looks like this:You could easily have a box read "Search" then when the focus is changed to it have the text be removed.  Something like this:<input onfocus="this.value=''" type="text" value="Search" />Of course if you do that the user's own text will disappear when they click.  So you probably want to use something more robust:When the page first loads, have Search appear in the text box, colored gray if you want it to be.When the input box receives focus, select all of the text in the search box so that the user can just start typing, which will delete the selected text in the process. This will also work nicely if the user wants to use the search box a second time since they won't have to manually highlight the previous text to delete it.I like the solution of "Knowledge Chikuse" - simple and clear. Only need to add a call to blur when the page load is ready which will set the initial state:You want to assign something like this to onfocus:and this to onblur:(You can use something a bit cleverer, like a framework function, to do the classname switching if you want.)With some CSS like this:Simple Html 'required' tag is useful.User AJAXToolkit from http://asp.net

            

            

Javascript code to parse CSV data

Pierre-Gilles Levallois

[Javascript code to parse CSV data](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)

Does someone have an idea on where I could find some javascript code to parse CSV data ?

2009-08-18 10:54:37Z

Does someone have an idea on where I could find some javascript code to parse CSV data ?You can use the CSVToArray() function mentioned in this blog entry.jQuery-CSVIt's a jquery plugin designed to work as an end-to-end solution for parsing CSV into Javascript data. It handles every single edge case presented in RFC 4180, as well as some that pop up for Excel/Google Spreadsheed exports (ie mostly involving null values) that the spec is missing.Example:Update:Oh yeah, I should also probably mention that it's completely configurable.Update 2:It now works with jQuery on Node.js too. So you have the option of doing either client-side or server-side parsing with the same lib.Update 3:Since Google Code shutdown, jquery-csv has been migrated to GitHub.Disclaimer: I am also the author of jQuery-CSV.I have an implementation as part of a spreadsheet project.This code is not yet tested thoroughly, but anyone is welcome to use it.As some of the answers noted though, your implementation can be much simpler if you actually have DSV or TSV file, as they disallow the use of the record and field separators in the values. CSV, on the other hand can actually have commas and newlines inside a field, which breaks most regex and split-based approaches.Here's an extremely simple CSV parser that handles quoted fields with commas, new lines, and escaped double quotation marks. There's no splitting or RegEx. It scans the input string 1-2 characters at a time and builds an array.Test it at http://jsfiddle.net/vHKYH/.Here's my PEG(.js) grammar that seems to do ok at RFC 4180 (i.e. it handles the examples at http://en.wikipedia.org/wiki/Comma-separated_values):Try it out at http://jsfiddle.net/knvzk/10 or http://pegjs.majda.cz/online. Download the generated parser at https://gist.github.com/3362830.csvToArray v1.3A compact (645 bytes) but compliant function to convert a CSV string into a 2D array, conforming to the RFC4180 standard.https://code.google.com/archive/p/csv-to-array/downloadsCommon Usage: jQueryCommon usage: JavascriptOverride field separatorOverride record separatorOverride Skip HeaderOverride allIm not sure why I couldn't kirtans ex. to work for me. It seemed to be failing on empty fields or maybe fields with trailing commas...This one seems to handle both. I did not write the parser code, just a wrapper around the parser function to make this work for a file. see AttributionRegular expressions to the rescue! These few lines of code handle properly quoted fields with embedded commas, quotes, and newlines based on the RFC 4180 standard.Unless stated elsewhere, you don't need a finite state machine. The regular expression handles RFC 4180 properly thanks to positive lookbehind, negative lookbehind, and positive lookahead.Clone/download code at https://github.com/peterthoeny/parse-csv-jsWhy not just use .split(',') ?http://www.w3schools.com/jsref/jsref_split.asp

ng-repeat finish event

ChruS

[ng-repeat finish event](https://stackoverflow.com/questions/13471129/ng-repeat-finish-event)

I want to call some jQuery function targeting div with table. That table is populated with ng-repeat.  When I call it on I have no result.  Also doesn't help.Is there any way to execute function right after ng-repeat population completes? I've read an advice about using custom directive, but I have no clue how to use it with ng-repeat and my div...

2012-11-20 10:23:01Z

I want to call some jQuery function targeting div with table. That table is populated with ng-repeat.  When I call it on I have no result.  Also doesn't help.Is there any way to execute function right after ng-repeat population completes? I've read an advice about using custom directive, but I have no clue how to use it with ng-repeat and my div...Indeed, you should use directives, and there is no event tied to the end of a ng-Repeat loop (as each element is constructed individually, and has it's own event). But a) using directives might be all you need and b) there are a few ng-Repeat specific properties you can use to make your "on ngRepeat finished" event.Specifically, if all you want is to style/add events to the whole of the table, you can do so using in a directive that encompasses all the ngRepeat elements. On the other hand, if you want to address each element specifically, you can use a directive within the ngRepeat, and it will act on each element, after it is created.Then, there are the $index, $first, $middle and $last properties you can use to trigger events. So for this HTML:You can use directives like so:See it in action in this Plunker. Hope it helps!If you simply want to execute some code at the end of the loop, here's a slightly simpler variation that doesn't require extra event handling:See a live demo.There is no need of creating a directive especially just to have a ng-repeat complete event.ng-init does the magic for you.the $last makes sure, that finished only gets fired, when the last element has been rendered to the DOM.Do not forget to create $scope.finished event.Happy Coding!!EDIT: 23 Oct 2016In case you also want to call the finished function when there is no item in the array then you may use the following workaroundJust add the above line on the top of the ng-repeat element. It will check if the array is not having any value and call the function accordingly.E.g.Here is a repeat-done directive that calls a specified function when true.  I have found that the called function must use $timeout with interval=0 before doing DOM manipulation, such as initializing tooltips on the rendered elements.  jsFiddle: http://jsfiddle.net/tQw6w/In $scope.layoutDone, try commenting out the $timeout line and uncommenting the "NOT CORRECT!" line to see the difference in the tooltips.JS:Here's a simple approach using ng-init that doesn't even require a custom directive. It's worked well for me in certain scenarios e.g. needing to auto-scroll a div of ng-repeated items to a particular item on page load, so the scrolling function needs to wait until the ng-repeat has finished rendering to the DOM before it can fire.Note that this is only useful for functions you need to call one time after the ng-repeat renders initially. If you need to call a function whenever the ng-repeat contents are updated then you'll have to use one of the other answers on this thread with a custom directive.Complementing Pavel's answer, something more readable and easily understandable would be:Why else do you think angular.noop is there in the first place...?Advantages:You don't have to write a directive for this...Maybe a bit simpler approach with ngInit and Lodash's debounce method without the need of custom directive:Controller:Template:There is even simpler pure AngularJS solution using ternary operator:Template:Be aware that ngInit uses pre-link compilation phase - i.e. the expression is invoked before child directives are processed. This means that still an asynchronous processing might be required.It may also be necessary when you check the scope.$last variable to wrap your trigger with a setTimeout(someFn, 0). A setTimeout 0 is an accepted technique in javascript and it was imperative for my directive to run correctly.This is an improvement of the ideas expressed in other answers in order to show how to gain access to the ngRepeat properties ($index, $first, $middle, $last, $even, $odd) when using declarative syntax and isolate scope (Google recommended best practice) with an element-directive.  Note the primary difference: scope.$parent.$last.My solution was to add a div to call a function if the item was the last in a repeat.i would like to add another answer, since the preceding answers takes it that the code needed to run after the ngRepeat is done is an angular code, which in that case all answers above give a great and simple solution, some more generic than others, and in case its important the digest life cycle stage you can take a look at Ben Nadel's blog about it, with the exception of using $parse instead of $eval.but in my experience, as the OP states, its usually running some JQuery plugins or methods on the finnaly compiled DOM, which in that case i found that the most simple solution is to create a directive with a setTimeout, since the setTimeout function gets pushed to the end of the queue of the browser, its always right after everything is done in angular, usually ngReapet which continues after its parents postLinking functionfor whoever wondering that in that case why not to use $timeout, its that it causes another digest cycle that is completely unnecessary I did it this way.Create the directiveAfter you add it on the label where this ng-repeatAnd ready with that will be run at the end of the ng-repeat.I had to render formulas using MathJax after ng-repeat ends, none of the above answers solved my problem, so I made like below. It's not a nice solution, but worked for me...I found an answer here well practiced, but it was still necessary to add a delayCreate the following directive:Add it to your repeater as an attribute, like this:According to Radu,:For me it works, but I still need to add a setTimeoutIf you simply wants to change the class name so it will rendered differently, below code would do the trick.This code worked for me when I had a similar requirement to render the shopped item in my shopping list in Strick trough font.

change type of input field with jQuery

Richard Knop

[change type of input field with jQuery](https://stackoverflow.com/questions/1544317/change-type-of-input-field-with-jquery)

This is supposed to change the #password input field (with id="password") that is of type password to a normal text field, and then fill in the text「Password」.It doesn’t work, though. Why?Here is the form:

2009-10-09 14:54:57Z

This is supposed to change the #password input field (with id="password") that is of type password to a normal text field, and then fill in the text「Password」.It doesn’t work, though. Why?Here is the form:It's very likely this action is prevented as part of the browser's security model.Edit: indeed, testing right now in Safari, I get the error type property cannot be changed.Edit 2: that seems to be an error straight out of jQuery. Using the following straight DOM code works just fine:Edit 3: Straight from the jQuery source, this seems to be related to IE (and could either be a bug or part of their security model, but jQuery isn't specific):Even easier... there's no need for all the dynamic element creation. Just create two separate fields, making one the 'real' password field (type="password") and one a 'fake' password field (type="text"), setting the text in the fake field to a light gray color and setting the initial value to 'Password'. Then add a few lines of Javascript with jQuery as below:So when the user enters the 'fake' password field it will be hidden, the real field will be shown, and the focus will move to the real field. They will never be able to enter text in the fake field.When the user leaves the real password field the script will see if it's empty, and if so will hide the real field and show the fake one.Be careful not to leave a space between the two input elements because IE will position one a little bit after the other (rendering the space) and the field will appear to move when the user enters/exits it.One step solutionNowadays, you can just useBut of course, you should really just do thisin all but IE. There are placeholder shims out there to mimic that functionality in IE as well.A more cross-browser solution… I hope the gist of this helps someone out there.This solution tries to set the type attribute, and if it fails, it simply creates a new <input> element, preserving element attributes and event handlers.changeTypeAttr.js (GitHub Gist):This works for me.An ultimate way to use jQuery:Leave the original input field hidden from the screen.Create new input field on the fly by JavaScript.Migrate the ID and value from hidden input field to the new input field.To get around the error on IE like type property cannot be changed, you may find this useful as belows:Attach click/focus/change event to new input element, in order to trigger the same event on hidden input.Old hidden input element is still inside the DOM so will react with the event triggered by new input element. As ID is swapped, new input element will act like the old one and respond to any function call to old hidden input's ID, but looks different.Have you tried using .prop()?http://api.jquery.com/prop/I haven't tested in IE (since I needed this for an iPad site) - a form I couldn't change the HTML but I could add JS:(Old school JS is ugly next to all the jQuery!)But, http://bugs.jquery.com/ticket/1957 links to MSDN: "As of Microsoft Internet Explorer 5, the type property is read/write-once, but only when an input element is created with the createElement method and before it is added to the document." so maybe you could duplicate the element, change the type, add to DOM and remove the old one?Just create a new field to bypass this security thing:I received the same error message while attempting to do this in Firefox 5.I solved it using the code below:And to use it, just set the onFocus and onBlur attributes of your fields to something like the following:I use this for a username field as well, so it toggles a default value. Just set the second parameter of the function to '' when you call it.Also it might be worth noting that the default type of my password field is actually password, just in case a user doesn't have javascript enabled or if something goes wrong, that way their password is still protected. The $(document).ready function is jQuery, and loads when the document has finished loading. This then changes the password field to a text field. Obviously you'll have to change 'password_field_id' to your password field's id.Feel free to use and modify the code!Hope this helps everyone who had the same problem I did :)-- CJ KentEDIT:

Good solution but not absolute. Works on on FF8 and IE8 BUT not fully on Chrome(16.0.912.75 ver). Chrome does not display the Password text when the page loads.

Also - FF will display your password when autofill is switched on.Simple solution for all those who want the functionality in all browsers:HTMLjQueryType properties can't be changed you need to replace or overlay the input with a text input and send the value to the password input on submit.I guess you could use a background-image that contains the word "password" and change it back to an empty background-image on .focus()..blur()  ----> image with "password".focus() -----> image with no "password"You could also do it with some CSS and jQuery. Have a text field show up exactly on top of the password field, hide() is on focus() and focus on the password field... Try this 

Demo is hereIt works much easier with that:and in order to turn it back to password field again,(assuming the password field is the 2nd input tag with text type):This Worked for me.use this one it is very easyThis will do the trick. Although it could be improved to ignore attributes that are now irrelevant.Plugin:Usage:Fiddle:http://jsfiddle.net/joshcomley/yX23U/Simply this:such asThis is assuming that your input field was set to "text" before hand. Here is a little snippet that allows you to change the type of elements in documents.jquery.type.js (GitHub Gist):It gets around the issue by removing the input from the document, changing the type and then putting it back where it was originally.Note that this snippet was only tested for WebKit browsers – no guarantees on anything else!Here is a method which uses an image next to the password field to toggle between seeing the password (text input) and not seeing it (password input).  I use an "open eye" and "closed eye" image, but you can use whatever suits you.  The way it works is having two inputs/images and upon clicking the image, the value is copied from the visible input to the hidden one, and then their visibility is swapped.  Unlike many of the other answers which use hardcoded names, this one is general enough to use it multiple times on a page.  It also degrades gracefully if JavaScript is unavailable.Here is what two of these look like on a page.  In this example, the Password-A has been revealed by clicking on its eye.I like this way, to change the type of an input element: old_input.clone()....

Here is an example. There is an check box "id_select_multiple". If this is is changed to "selected", input elements with name "foo" should be changed to check boxes. If it gets unchecked, they should be become radio buttons again.heres a DOM solutionI've created a jQuery extension to toggle between text and password.  Works in IE8 (probably 6&7 as well, but not tested) and won't lose your value or attributes:Works like a charm.  You can simply call $('#element').togglePassword(); to switch between the two or give an option to 'force' the action based on something else (like a checkbox): $('#element').togglePassword($checkbox.prop('checked'));Just another option for all the IE8 lovers, and it works perfect in newer browsers. You can just color the text to match the background of the input. If you have a single field, this will change the color to black when you click/focus on the field. I would not use this on a public site since it would 'confuse' most people, but I am using it in an ADMIN section where only one person has access to the users passwords.-OR-This, also needed, will change the text back to white when you leave the field. Simple, simple, simple.[ Another Option ]

Now, if you have several fields that you are checking for, all with the same ID, as I am using it for, add a class of 'pass' to the fields you want to hide the text in. Set the password fields type to 'text'. This way, only the fields with a class of 'pass' will be changed.Here is the second part of this. This changes the text back to white after you leave the field.

How to prevent ENTER keypress to submit a web form?

user67722

[How to prevent ENTER keypress to submit a web form?](https://stackoverflow.com/questions/585396/how-to-prevent-enter-keypress-to-submit-a-web-form)

How do you prevent an ENTER key press from submitting a form in a web-based application?

2009-02-25 09:57:27Z

How do you prevent an ENTER key press from submitting a form in a web-based application?[revision 2012, no inline handler, preserve textarea enter handling]Now you can define a keypress handler on the form:

<form [...] onkeypress="return checkEnter(event)">Here is a jQuery handler that can be used to stop enter submits, and also stop backspace key -> back.  The (keyCode: selectorString) pairs in the "keyStop" object are used to match nodes that shouldn't fire their default action.Remember that the web should be an accessible place, and this is breaking keyboard users' expectations. That said, in my case the web application I am working on doesn't like the back button anyway, so disabling its key shortcut is OK.  The "should enter -> submit" discussion is important, but not related to the actual question asked.Here is the code, up to you to think about accessibility and why you would actually want to do this!Simply return false from the onsubmit handleror if you want a handler in the middleYou will have to call this function whic will just cancel the default submit behaviour of the form. You can attach it to any input field or event.The ENTER key merely activates the form's default submit button, which will be the first the browser finds within the form.Therefore don't have a submit button, but something likeEDIT: In response to discussion in comments:This doesn't work if you have only one text field - but it may be that is the desired behaviour in that case.The other issue is that this relies on Javascript to submit the form. This may be a problem from an accessibility point of view. This can be solved by writing the <input type='button'/> with javascript, and then put an <input type='submit' /> within a <noscript> tag. The drawback of this approach is that for javascript-disabled browsers you will then have form submissions on ENTER. It is up to the OP to decide what is the desired behaviour in this case.I know of no way of doing this without invoking javascript at all.In short answer in pure Javascript is:This only disables the "Enter" keypress action for input type='text'. Visitors can still use "Enter" key all over the website.See my detailed answer for a similar question hereAll the answers I found on this subject, here or in other posts has one drawback and that is it prevents the actual change trigger on the form element as well. So if you run these solutions onchange event is not triggered as well. To overcome this problem I modified these codes and developed the following code for myself. I hope this becomes useful for others.

I gave a class to my form "prevent_auto_submit" and added the following JavaScript:I've always done it with a keypress handler like the above in the past, but today hit on a simpler solution. The enter key just triggers the first non-disabled submit button on the form, so actually all that's required is to intercept that button trying to submit:That's it. Keypresses will be handled as usual by the browser / fields / etc. If the enter-submit logic is triggered, then the browser will find that hidden submit button and trigger it. And the javascript handler will then prevent the submision.I've spent some time making this cross browser for IE8,9,10, Opera 9+, Firefox 23, Safari (PC) and Safari(MAC)JSFiddle Example: http://jsfiddle.net/greatbigmassive/ZyeHe/Base code - Call this function via "onkeypress" attached to your form and pass "window.event" into it.Then on your form:Though, it would be better if you didn't use obtrusive JavaScript.In my case, this jQuery JavaScript solved the problemPreventing "ENTER" to submit form may inconvenience some of your users. So it would be better if you follow the procedure below:Write the 'onSubmit' event in your form tag:write Javascript function as follows:What ever the reason, if you want to prevent the form submission on pressing Enter key, you can write the following function in javascript:thanks.Add this tag to your form - onsubmit="return false;"

Then you can only submit your form with some JavaScript function.To prevent form submit when pressing enter in a textarea or input field, check the submit event to find what type of element sent the event.A better solution is if you don't have a submit button and you fire the event with a normal button. It is better because in the first examlple 2 submit events are fired, but in the second example only 1 submit event is fired.You will find this more simple and useful :DHow about:Please check this article How to prevent ENTER keypress to submit a web form?You can trap the keydown on a form in javascript and prevent the even bubbling, I think.  ENTER on a webpage basically just submits the form that the currently selected control is placed in.This link provides a solution that has worked for me in Chrome, FF, and IE9 plus the emulator for IE7 and 8 that comes with IE9's developer tool (F12).http://webcheatsheet.com/javascript/disable_enter_key.phpAnother approach is to append the submit input button to the form only when it is supposed to be submited and replace it by a simple div during the form fillingSimply add this attribute to your FORM tag:Then, in your SCRIPT tag, add this:Then, when you make a button or for any other reason (like in a function) you finally permit a submit, simply flip the global boolean and do a .submit() call, similar to this example:I Have come across this myself because I have multiple submit buttons with different 'name' values, so that when submitted they do different things on the same php file. The enter / return button breaks this as those values aren't submitted.

So I was thinking, does the enter / return button activate the first submit button in the form?

That way you could have a 'vanilla' submit button that is either hidden or has a 'name' value that returns the executing php file back to the page with the form in it.

Or else a default (hidden) 'name' value that the keypress activates, and the submit buttons overwrite with their own 'name' values.

Just a thought.How about:And just name your button right and it will still submit, but text fields i.e. the explicitOriginalTarget when you hit return in one, will not have the right name.

This worked for me.

onkeydown="return !(event.keyCode==13)"Here's how I'd do it:put into javascript external file or somewhere inside body tagI had the same problem (forms with tons of text fields and unskilled users).I solved it in this way:using this in the HTML code:In this way the ENTER key works as planned, but a confirmation (a second ENTER tap, usually) is required.I leave to the readers the quest for a script sending the user in the field where he pressed ENTER if he decide to stay on the form.

How do I pass the this context to a function?

user126715

[How do I pass the this context to a function?](https://stackoverflow.com/questions/3630054/how-do-i-pass-the-this-context-to-a-function)

I thought this would be something I could easily google, but maybe I'm not asking the right question...How do I set whatever "this" refers to in a given javascript function?for example, like with most of jQuery's functions such as:  How do I write/call my own standalone functions that have an appropriate "this" reference when called?  I use jQuery, so if there's a jQuery-specific way of doing it, that'd be ideal.

2010-09-02 18:31:17Z

I thought this would be something I could easily google, but maybe I'm not asking the right question...How do I set whatever "this" refers to in a given javascript function?for example, like with most of jQuery's functions such as:  How do I write/call my own standalone functions that have an appropriate "this" reference when called?  I use jQuery, so if there's a jQuery-specific way of doing it, that'd be ideal.Javascripts .call() and .apply() methods allow you to set the context for a function.Now you can call:Which would alert FOO. The other way around, passing obj_b would alert BAR!!. The difference between .call() and .apply() is that .call() takes a comma separated list if you're passing arguments to your function and .apply() needs an array.Therefore, you can easily write a function hook by using the apply() method. For instance, we want to add a feature to jQuerys .css() method. We can store the original function reference, overwrite the function with custom code and call the stored function.Since the magic arguments object is an array like object, we can just pass it to apply(). That way we guarantee, that all parameters are passed through to the original function.Use function.call:Where that is the object which you want this in the function to be.jQuery uses a .call(...) method to assign the current node to this inside the function you pass as the parameter.EDIT:Don't be afraid to look inside jQuery's code when you have a doubt, it's all in clear and well documented Javascript.ie: the answer to this question is around line 574, callback.call( object[ name ], name, object[ name ] ) === falseYou can use the bind function to set the context of this within a function.Another basic example:NOT working:Working:So basically: just add .bind(this) to your function

How to go to a URL using jQuery? [duplicate]

user1990525

[How to go to a URL using jQuery? [duplicate]](https://stackoverflow.com/questions/16959476/how-to-go-to-a-url-using-jquery)

How to go to a URL using jQuery or JavaScript. I don't want to use window.location as I want to invoke this link from a popup. New link should also open in a popup.  I also don't want to use Ajax. Just simulate href in JavaScript.

2013-06-06 10:15:47Z

How to go to a URL using jQuery or JavaScript. I don't want to use window.location as I want to invoke this link from a popup. New link should also open in a popup.  I also don't want to use Ajax. Just simulate href in JavaScript.why not using?window.location is just what you need. Other thing you can do is to create anchor element and simulate click on itActually, you have to use the anchor # to play with this. If you reverse engineer the Gmail url system, you'll findEverything after # is the part your want to load in your page, then you just have to chose where to load it.By the way, using document.location by adding a #something won't refresh your page.

Google MAP API Uncaught TypeError: Cannot read property 'offsetWidth' of null

jaeyong

[Google MAP API Uncaught TypeError: Cannot read property 'offsetWidth' of null](https://stackoverflow.com/questions/11740663/google-map-api-uncaught-typeerror-cannot-read-property-offsetwidth-of-null)

I'm trying to use Google MAP API v3 with the following code.When I run this code, the browser says this. I have no idea, since I follow the direction given in this tutorial.Do you have any clue?

2012-07-31 12:58:43Z

I'm trying to use Google MAP API v3 with the following code.When I run this code, the browser says this. I have no idea, since I follow the direction given in this tutorial.Do you have any clue?This problem is usually due to the map div not being rendered before the javascript runs that needs to access it.You should put your initialization code inside an onload function or at the bottom of your HTML file, just before the  tag, so the DOM is completely rendered before it executes (note that the second option is more sensitive to invalid HTML).Note, as pointed out by matthewsheets this also could be cause by the div with that id not existing at all in your HTML (the pathological case of the div not being rendered) Adding code sample from wf9a5m75's post to put everything in one place:For others that might still be having this issue, even after trying the above recommendations, using an incorrect selector for your map canvas in the initialize function can cause this same issue as the function is trying to access something that doesn't exist. Double-check that your map Id matches in your initialize function and your HTML or this same error may be thrown. In other words, make sure your IDs match up. ;)google uses id="map_canvas" and id="map-canvas" in the samples, double-check and re-double-check the id :DYou can also get this error if you don't specify center or zoom in your map options.Year, geocodezip's answer is correct.

So change your code like this:

 (if you still in trouble, or maybe somebody else in the future)Just so I add my fail scenario in getting this to work. I had a <div id="map> in which I was loading the map with:and the div was initially hidden and it didn't have explicitly width and height values set so it's size was width x 0. Once I've set the size of this div in CSS like this everything worked! Hope this helps someone.For even more others that might still be having this issue, I was using a self-closing <div id="map1" /> tag, and the second div was not showing, and did not seem to be in the dom. as soon as i changed it to two open&close tags <div id="map1"></div> it worked. hthAlso take care not to writecorrect:I had single quotes in my and replaced them with double quotes This did the trick for me.Changing the ID (in all 3 places) from "map-canvas" to "map" fixed it for me, even though I had made sure the IDs were the same, the div had a width and height, and the code wasn't running until after the window load call. It's not the dash; it doesn't seem to work with any other ID than "map".Also, make sure you're not placing hash symbol (#) inside your selector in a statement. It's not a jQuery. Just a quick reminder for someone in a hurry.I had the same issue but the problem was that zoom was not defined within the options object given to Google Maps.If you're creating multiple maps in a loop, if a single map DOM element doesn't exist, it breaks all of them. First, check to make sure the DOM element exists before creating a new Map object.If you happen to be using asp.net Webforms and are registering the script in the code behind of a page using a master page, don't forget to use the clientID of the map element (vb.net):In order to solve it you need to add async defer to the script.It should be like this: See here the meaning of async defer.Since you'll be calling a function from the main js file, you also want to make sure that this  is after the one where you load the main script.Make sure you include the Places library &libraries=places parameter when you first load the API.For example:I know I'm a bit late to the party, just wanted to add that the error can also happen when the div doesn't exist in the page. You can also check if the div exists first before loading the google maps function call. Something likeHope this will help you.Actually easiest way to fix this is just move your object before Javascript code it worked to me. I guess in your answer object is loaded after javascript code.In my case these sort of issues were solved using defer https://developer.mozilla.org/en/docs/Web/HTML/Element/script<script src="<your file>.js" defer></script>You need to take into account browsers's support of this option though (I haven't seen problems) Check that you're not overriding window.selfMy issue: I had created a component and wrote self = this instead of var self = this. If you don't use the keyword var, JS will put that variable on the window object, so I overwrote window.self which caused this error.This is an edit of a previously deleted post to contain the content of the linked answer, in the answer itself. The purpose for re-publishing this answer is to function as a PSA for React 0.9+ users who have also stumbled into this issue.Also got this error while using ReactJS while following this blog post. sahat's comment here helped -

 see the content of sahat's comment below.My fail was to use as an option, rather than the correct option add async defer at the begining of map api key call.

    In a case I was dealing with, the map div was conditionally rendered depending if the location was being made public. If you can't be sure whether the map canvas div will be on the page, simply check that your document.getElementById is returning an element and only invoke the map if it's present:Here the problem was the API link without the key param:That way works fine.

Javascript object Vs JSON

testndtv

[Javascript object Vs JSON](https://stackoverflow.com/questions/8294088/javascript-object-vs-json)

I want to understand the basic differences clearly between Javascript object and JSON string.Let's say I create the following JS variable:Q1. Is the key/property name valid both with/without quotes? (e.g. "one" : 1) If yes, what is the difference?Q2: If I convert the above object using JSON.stringify(testObject), what’s the difference between the original JS object and the JSON? I feel they are almost the same. Please elaborate on this.Q3: For parsing a JSON string, is the method below recommended?

2011-11-28 09:53:34Z

I want to understand the basic differences clearly between Javascript object and JSON string.Let's say I create the following JS variable:Q1. Is the key/property name valid both with/without quotes? (e.g. "one" : 1) If yes, what is the difference?Q2: If I convert the above object using JSON.stringify(testObject), what’s the difference between the original JS object and the JSON? I feel they are almost the same. Please elaborate on this.Q3: For parsing a JSON string, is the method below recommended?Q1: When defining object literals in javascript, the keys may include quotes or not. There is no difference except that quotes allow you to specify certain keys that would cause the interpreter to fail to parse if you tried them bare. For example, if you wanted a key that was just an exclamation point, you would need quotes:In most cases though, you can omit the quotes around keys on object literals.Q2: JSON is literally a string representation. It is just a string. So, consider this:Since testObject is a real object, you can call properties on it and do anything else you can do with objects:On the other hand, jsonString is just a string:Note one other difference: In JSON, all keys must be quoted. That contrasts with object literals, where the quotes can usually be omitted as per my explanation in Q1.Q3. You can parse a JSON string by using JSON.parse, and this is generally the best way to do it (if the browser or a framework provides it). You can also just use eval since JSON is valid javascript code, but the former method is recommended for a number of reasons (eval has a lot of nasty problems associated with it).Problems solved by JSONLet's say you want to exchange regular JavaScript objects between two computers, and you set two rules:Now you create two objects on the first host:How can you convert those objects into strings for transmission to the second host?JSON has been created as a solution to the needs just discussed: It is a set of rules to create a string equivalent to an object by listing all attributes and values (methods are ignored).JSON normalizes the use of double-quotes for attribute names and values.Remember that JSON is a set of rules only (a standard).How many JSON objects are created?Only one, it is automatically created by the JS engine.Modern JavaScript engines found in browsers have a native object, also named JSON. This JSON object is able to:The (single) JSON object is similar to a codec, it's function is to encode and decode.Note that:Going back to the questions:Q1 - in JS you only need to use quotes if the key is a reserved word or if it would otherwise be an illegal token.  In JSON you MUST always use double quotes on key names.Q2 - the jsonString is a serialised version of the input object ...Q3 - which may be deserialised to an identical looking object using JSON.parse()Question already has good answers posted, I am adding a small example below, which will make it more easy to understand the explanations given in previous answers. 

Copy paste below snippet to your IDE for better understanding and comment the 

 line containing invalid_javascript_object_no_quotes object declaration to avoid compile time error.

Single Page Application: advantages and disadvantages [closed]

VB_

[Single Page Application: advantages and disadvantages [closed]](https://stackoverflow.com/questions/21862054/single-page-application-advantages-and-disadvantages)

I've read about SPA and it advantages. I find most of them unconvincing. There are 3 advantages that arouse my doubts.Question: Can you act as advocate of SPA and prove that I am wrong about first three statements?1. SPA is extremely good for very responsive sites:What is wrong with holding a model layer for non-SPA? Does SPA the only compatible architecture with MVC on client side?2. With SPA we don't need to use extra queries to the server to download pages.Hah, and how many pages user can download during visiting your site? Two, three? Instead there appear another security problems and you need to separate your login page, admin page etc into separate pages. In turn it conflicts with SPA architecture.3.May be any other advantages? Don't hear about any else..P.S. I've worked on SPA and non-SPA projects. And I'm asking those questions because I need to deepen my understanding. No mean to harm SPA supporters. Don't ask me to read a bit more about SPA. I just want to hear your considerations about that.

2014-02-18 18:12:54Z

I've read about SPA and it advantages. I find most of them unconvincing. There are 3 advantages that arouse my doubts.Question: Can you act as advocate of SPA and prove that I am wrong about first three statements?1. SPA is extremely good for very responsive sites:What is wrong with holding a model layer for non-SPA? Does SPA the only compatible architecture with MVC on client side?2. With SPA we don't need to use extra queries to the server to download pages.Hah, and how many pages user can download during visiting your site? Two, three? Instead there appear another security problems and you need to separate your login page, admin page etc into separate pages. In turn it conflicts with SPA architecture.3.May be any other advantages? Don't hear about any else..P.S. I've worked on SPA and non-SPA projects. And I'm asking those questions because I need to deepen my understanding. No mean to harm SPA supporters. Don't ask me to read a bit more about SPA. I just want to hear your considerations about that.Let's look at one of the most popular SPA sites, GMail.1. SPA is extremely good for very responsive sites:Server-side rendering is not as hard as it used to be with simple techniques like keeping a #hash in the URL, or more recently HTML5 pushState. With this approach the exact state of the web app is embedded in the page URL. As in GMail every time you open a mail a special hash tag is added to the URL. If copied and pasted to other browser window can open the exact same mail (provided they can authenticate). This approach maps directly to a more traditional query string, the difference is merely in the execution.  With HTML5 pushState() you can eliminate the #hash and use completely classic URLs which can resolve on the server on the first request and then load via ajax on subsequent requests.2. With SPA we don't need to use extra queries to the server to download pages.The number of pages user downloads during visit to my web site?? really how many mails some reads when he/she opens his/her mail account. I read >50 at one go. now the structure of the mails is almost the same. if you will use a server side rendering scheme the server would then render it on every request(typical case). 

    - security concern - you should/ should not keep separate pages for the admins/login that entirely depends upon the structure of you site take paytm.com for example also making a web site SPA does not mean that you open all the endpoints for all the users I mean I use forms auth with my spa web site. 

   - in the probably most used SPA framework Angular JS the dev can load the entire html temple from the web site so that can be done depending on the users authentication level. pre loading html for all the auth types isn't SPA. 3. May be any other advantages? Don't hear about any else..Advantages that I can think of are:Updates from CommentsI am a pragmatist, so I will try to look at this in terms of costs and benefits.Note that for any disadvantage I give, I recognize that they are solvable.  That's why I don't look at anything as black and white, but rather, costs and benefits.AdvantagesDisadvantagesAgain, I recognize that every one of these problems is solvable, at some cost. 

But there comes a point where you are spending all your time solving problems which you could have just avoided in the first place.  It comes back to the benefits and how important they are to you.1. Client must enable javascript. Yes, this is a clear disadvantage of SPA. In my case I know that I can expect my users to have JavaScript enabled. If you can't then you can't do a SPA, period. That's like trying to deploy a .NET app to a machine without the .NET Framework installed.2. Only one entry point to the site. I solve this problem using SammyJS. 2-3 days of work to get your routing properly set up, and people will be able to create deep-link bookmarks into your app that work correctly. Your server will only need to expose one endpoint - the "give me the HTML + CSS + JS for this app" endpoint (think of it as a download/update location for a precompiled application) - and the client-side JavaScript you write will handle the actual entry into the application.3. Security. This issue is not unique to SPAs, you have to deal with security in exactly the same way when you have an "old-school" client-server app (the HATEOAS model of using Hypertext to link between pages). It's just that the user is making the requests rather than your JavaScript, and that the results are in HTML rather than JSON or some data format. In a non-SPA app you have to secure the individual pages on the server, whereas in a SPA app you have to secure the data endpoints. (And, if you don't want your client to have access to all the code, then you have to split apart the downloadable JavaScript into separate areas as well. I simply tie that into my SammyJS-based routing system so the browser only requests things that the client knows it should have access to, based on an initial load of the user's roles, and then that becomes a non-issue.)So, bottom line: If you need offline processing (or at least want your clients to be able to survive occasional server outages) - dramatically reducing your own hardware costs - and you can assume JavaScript & modern browsers, then you need a SPA. In other cases it's more of a tradeoff.One major disadvantage of SPA - SEO. Only recently Google and Bing started indexing Ajax-based pages by executing JavaScript during crawling, and still in many cases pages are being indexed incorrectly. While developing SPA, you will be forced to handle SEO issues, probably by post-rendering all your site and creating static html snapshots for crawler's use. This will require a solid investment in a proper infrastructures.Since writing this answer a while ago, I gain much more experience with Single Page Apps (namely, AngularJS 1.x) - so I have more info to share. In my opinion, the main disadvantage of SPA applications is SEO, making them limited to kind of "dashboard" apps only. In addition, you are going to have a much harder times with caching, compared to classic solutions. For example, in ASP.NET caching is extreamly easy - just turn on OutputCaching and you are good: the whole HTML page will be cached according to URL (or any other parameters). However, in SPA you will need to handle caching yourself (by using some solutions like second level cache, template caching, etc..).I would like to make the case for SPA being best for Data Driven Applications.  gmail, of course is all about data and thus a good candidate for a SPA.  But if your page is mostly for display, for example, a terms of service page,  then a SPA is completely overkill.I think the sweet spot is having a site with a mixture of both SPA and static/MVC style pages, depending on the particular page.For example, on one site I am building, the user lands on a standard MVC index page.  But then when they go to the actual application, then it calls up the SPA.  Another advantage to this is that the load-time of the SPA is not on the home page, but on the app page. The load time being on the home page could be a distraction to first time site users.This scenario is a little bit like using Flash.  After a few years of experience, the number of Flash only sites dropped to near zero due to the load factor.  But as a page component, it is still in use.For such companies as google, amazon etc, whose servers are running at max capacity in 24/7-mode, reducing traffic means real money - less hardware, less energy, less maintenance. Shifting CPU-usage from server to client pays off, and SPAs shine. The advantages overweight disadvantages by far.

So, SPA or not SPA depends much on the use case.Just for mentioning another, probably not so obvious (for Web-developers) use case for SPAs:

I'm currently looking for a way to implement GUIs in embedded systems and browser-based architecture seems appealing to me. Traditionally there were not many possibilities for UIs in embedded systems - Java, Qt, wx, etc or  propriety commercial frameworks. Some years ago Adobe tried to enter the market with flash but seems to be not so successful. Nowadays, as "embedded systems" are as powerful as mainframes some years ago, a browser-based UI connected to the control unit via REST is a possible solution. The advantage is, the huge palette of tools for UI for no cost. (e.g. Qt require 20-30$ per sold unit on royalty fees plus 3000-4000$ per developer)For such architecture SPA offers many advantages - e.g. more familiar development-approach for desktop-app developers, reduced server access (often in car-industry the UI and system muddles are separate hardware, where the system-part has an RT OS). As the only client is the built-in browser, the mentioned disadvantages like JS-availability, server-side logging, security don't count any more.2. With SPA we don't need to use extra queries to the server to download pages.I still have to learn a lot but since I started learn about SPA, I love them.This particular point may make a huge difference.In many web apps that are not SPA, you will see that they will still retrieve and add content to the pages making ajax requests. So I think that SPA goes beyond by considering: what if the content that is going to be retrieved and displayed using ajax is the whole page? and not just a small portion of a page?Let me present an scenario. Consider that you have 2 pages: Consider that you are at the list page. Then you click on a product to view the details. The client side app will trigger 2 ajax requests:Then, the client side app will insert the data into the html template and display it.Then you go back to the list (no request is done for this!) and you open another product. This time, there will be only an ajax request to get the details of the product. The html template is going to be the same so you don't need to download again.You may say that in a non SPA, when you open the product details, you make only 1 request and in this scenario we did 2. Yes. But you get the gain from an overall perspective, when you navigate across of many pages, the number of requests is going to be lower. And the data that is transferred between the client side and the server is going to be lower too because the html templates are going to be reused. Also, you don't need to download in every requests all those css, images, javascript files that are present in all the pages.Also, let's consider that you server side language is Java. If you analyze the 2 requests that I mentioned, 1 downloads data (you don't need to load any view file and call the view rendering engine) and the other downloads and static html template so you can have an HTTP web server that can retrieve it directly without having to call the Java application server, no computation is done!Finally, the big companies are using SPA: Facebook, GMail, Amazon. They don't play, they have the greatest engineers studying all this. So if you don't see the advantages you can initially trust them and hope to discover them down the road. But is important to use good SPA design patterns. You may use a framework like AngularJS. Don't try to implement an SPA without using good design patterns because you may end up having a mess.Disadvantages:

Technically, design and initial development of SPA is complex and can be avoided. Other reasons for not using this SPA can be:Apart from above, other architectural limitations are Navigational Data loss, No log of Navigational History in browser and difficulty in Automated Functional Testing with selenium.This link explain Single Page Application's Advantages and Disadvantages.In my development I found two distinct advantages for using an SPA. That is not to say that the following can not be achieved in a traditional web app just that I see incremental benefit without introducing additional disadvantages.Other than requiring JS (which is not a crazy thing to require of web apps) other noted disadvantages are in my opinion either not specific to SPA or can be mitigated through good habits and development patterns.Try not to consider using a SPA without first defining how you will address security and API stability on the server side. Then you will see some of the true advantages to using a SPA. Specifically, if you use a RESTful server that implements OAUTH 2.0 for security, you will achieve two fundamental separation of concerns that can lower your development and maintenance costs. Hinted to earlier, but not made explicit; If your goal is to deploy Android & Apple applications, writing a JavaScript SPA that is wrapped by a native call to host the screen in a browser (Android or Apple) eliminates the need to maintain both an Apple code base and an Android code base. I understand this is an older question, but I would like to add another disadvantage of Single Page Applications:If you build an API that returns results in a data language (such as XML or JSON) rather than a formatting language (like HTML), you are enabling greater application interoperability, for example, in business-to-business (B2B) applications. Such interoperability has great benefits but does allow people to write software to "mine" (or steal) your data. This particular disadvantage is common to all APIs that use a data language, and not to SPAs in general (indeed, an SPA that asks the server for pre-rendered HTML avoids this, but at the expense of poor model/view separation). This risk exposed by this disadvantage can be mitigated by various means, such as request limiting and connection blocking, etc.

Jasmine.js comparing arrays

user2032804

[Jasmine.js comparing arrays](https://stackoverflow.com/questions/15717844/jasmine-js-comparing-arrays)

Is there a way in jasmine.js to check if two arrays are equal, for example:Neither seems to work.

2013-03-30 11:10:08Z

Is there a way in jasmine.js to check if two arrays are equal, for example:Neither seems to work.Just did the test and it works with toEqualplease find my test:http://jsfiddle.net/7q9N7/3/Just for information:You can compare an array like the below mentioned if the array has some valuesBut if the array that is returned from some function has more than 1 elements and all are zero then verify by usingjust for the record you can always compare using JSON.stringify

const arr = [1,2,3];

expect(JSON.stringify(arr)).toBe(JSON.stringify([1,2,3]));

expect(JSON.stringify(arr)).toEqual(JSON.stringify([1,2,3]));

It's all meter of taste, 

this will also work for complex literal objectsI had a similar issue where one of the arrays was modified. I was using it for $httpBackend, and the returned object from that was actually a $promise object containing the array (not an Array object). You can create a jasmine matcher to match the array by creating a toBeArray function:And then just use it in your tests like the other jasmine matchers:

All falsey values in JavaScript

user56reinstatemonica8

[All falsey values in JavaScript](https://stackoverflow.com/questions/19839952/all-falsey-values-in-javascript)

What are the values in JavaScript that are 'falsey', meaning that they evaluate as false in expressions like if(value), value ? and !value?There are some discussions of the purpose of falsey values on Stack Overflow already, but no exhaustive complete answer listing what all the falsey values are.I couldn't find any complete list on MDN JavaScript Reference, and I was surprised to find that the top results when looking for a complete, authoritative list of falsey values in JavaScript were blog articles, some of which had obvious omissions (for example, NaN), and none of which had a format like Stack Overflow's where comments or alternative answers could be added to point out quirks, surprises, omissions, mistakes or caveats. So, it seemed to make sense to make one. 

2013-11-07 15:34:45Z

What are the values in JavaScript that are 'falsey', meaning that they evaluate as false in expressions like if(value), value ? and !value?There are some discussions of the purpose of falsey values on Stack Overflow already, but no exhaustive complete answer listing what all the falsey values are.I couldn't find any complete list on MDN JavaScript Reference, and I was surprised to find that the top results when looking for a complete, authoritative list of falsey values in JavaScript were blog articles, some of which had obvious omissions (for example, NaN), and none of which had a format like Stack Overflow's where comments or alternative answers could be added to point out quirks, surprises, omissions, mistakes or caveats. So, it seemed to make sense to make one. "Falsey" simply means that JavaScript's internal ToBoolean function returns false. ToBoolean underlies !value, value ? ... : ...; and if (value). Here's its official specification (2018 working draft) (the only change since the very first ECMAscript specification in 1997 is the addition of ES6's Symbols, which are always truthy):It's worth talking about falsy values' loose comparisons with ==, which uses ToNumber() and can cause some confusion due to the underlying differences. They effectively form three groups:With "strict equality" (===), there are no such groupings. Only false === false. This is one of the reasons why many developers and many style guides (e.g. standardjs) prefer === and almost never use ==. "Truthy" simply means that JavaScript's internal ToBoolean function returns true. A quirk of Javascript to be aware of (and another good reason to prefer === over ==): it is possible for a value to be truthy (ToBoolean returns true), but also == false.You might think if (value && value == false) alert('Huh?') is a logical impossibility that couldn't happen, but it will, for:These are just a few values that some people might expect to be falsey, but are actually truthy.true, 1, "1" and [1] return true when compared to each other with ==.Don't forget about the non-empty string "false" which evaluates to trueJust to add to @user568458's list of falsy values:

jQuery.parseJSON throws「Invalid JSON」error due to escaped single quote in JSON

Felix

[jQuery.parseJSON throws「Invalid JSON」error due to escaped single quote in JSON](https://stackoverflow.com/questions/2275359/jquery-parsejson-throws-invalid-json-error-due-to-escaped-single-quote-in-json)

I’m making requests to my server using jQuery.post() and my server is returning JSON objects (like { "var": "value", ... }). However, if any of the values contains a single quote (properly escaped like \'), jQuery fails to parse an otherwise valid JSON string. Here’s an example of what I mean (done in Chrome’s console):Is this normal? Is there no way to properly pass a single quote via JSON?

2010-02-16 18:39:18Z

I’m making requests to my server using jQuery.post() and my server is returning JSON objects (like { "var": "value", ... }). However, if any of the values contains a single quote (properly escaped like \'), jQuery fails to parse an otherwise valid JSON string. Here’s an example of what I mean (done in Chrome’s console):Is this normal? Is there no way to properly pass a single quote via JSON?According to the state machine diagram on the JSON website, only escaped double-quote characters are allowed, not single-quotes. Single quote characters do not need to be escaped:

Update - More information for those that are interested:Douglas Crockford does not specifically say why the JSON specification does not allow escaped single quotes within strings. However, during his discussion of JSON in Appendix E of JavaScript: The Good Parts, he writes:So perhaps he decided to only allow strings to be defined using double-quotes since this is one less rule that all JSON implementations must agree on. As a result, it is impossible for a single quote character within a string to accidentally terminate the string, because by definition a string can only be terminated by a double-quote character. Hence there is no need to allow escaping of a single quote character in the formal specification.This is confirmed by the JSONTokener source code. The nextString method accepts escaped single quote characters and treats them just like double-quote characters:At the top of the method is an informative comment:So some implementations will accept single quotes - but you should not rely on this. Many popular implementations are quite restrictive in this regard and will reject JSON that contains single quoted strings and/or escaped single quotes.Finally to tie this back to the original question, jQuery.parseJSON first attempts to use the browser's native JSON parser or a loaded library such as json2.js where applicable (which on a side note is the library the jQuery logic is based on if JSON is not defined). Thus jQuery can only be as permissive as that underlying implementation:As far as I know these implementations only adhere to the official JSON specification and do not accept single quotes, hence neither does jQuery.If you need a single quote inside of a string, since \' is undefined by the spec, use \u0027   see http://www.utf8-chartable.de/ for all of themedit: please excuse my misuse of the word backticks in the comments.  I meant backslash.  My point here is that in the event you have nested strings inside other strings, I think it can be more useful and readable to use unicode instead of lots of backslashes to escape a single quote.  If you are not nested however it truly is easier to just put a plain old quote in there.I understand where the problem lies and when I look at the specs its clear that unescaped single quotes should be parsed correctly.I am using jquery`s jQuery.parseJSON function to parse the JSON string but still getting the parse error when there is a single quote in the data that is prepared with json_encode.Could it be a mistake in my implementation that looks like this (PHP - server side):The final step is that I store the JSON encoded string into an JS variable:If I use "" instead of '' it still throws an error.SOLUTION:The only thing that worked for me was to use bitmask JSON_HEX_APOS to convert the single quotes like this:Is there another way of tackle this issue? Is my code wrong or poorly written?ThanksWhen You are sending a single quote in a queryWhen You get the value including a single quoteIf you want to search/ insert the value which includes a single quote in a query

xxx=Replace(empid,"'","''")Striking a similar issue using CakePHP to output a JavaScript script-block using PHP's native json_encode. $contractorCompanies contains values that have single quotation marks and as explained above and expected json_encode($contractorCompanies) doesn't escape them because its valid JSON.By adding addslashes() around the JSON encoded string you then escape the quotation marks allowing Cake / PHP to echo the correct javascript to the browser. JS errors disappear.I was trying to save a JSON object from a XHR request into a HTML5 data-* attribute. I tried many of above solutions with no success.What I finally end up doing was replacing the single quote ' with it code &#39; using a regex after the stringify() method call the following way: Interesting. How are you generating your JSON on the server end? Are you using a library function (such as json_encode in PHP), or are you building the JSON string by hand?The only thing that grabs my attention is the escape apostrophe (\'). Seeing as you're using double quotes, as you indeed should, there is no need to escape single quotes. I can't check if that is indeed the cause for your jQuery error, as I haven't updated to version 1.4.1 myself yet.

how to break the _.each function in underscore.js

dy_

[how to break the _.each function in underscore.js](https://stackoverflow.com/questions/8779799/how-to-break-the-each-function-in-underscore-js)

I'm looking for a way to stop iterations of underscore.js _.each() method, but can't find the solution. jQuery .each() can break if you do return false.Is there a way to stop underscore each()?

2012-01-08 17:55:11Z

I'm looking for a way to stop iterations of underscore.js _.each() method, but can't find the solution. jQuery .each() can break if you do return false.Is there a way to stop underscore each()?You can't break from the each method—it emulates the native forEach method's behavior, and the native forEach doesn't provide to escape the loop (other than throwing an exception).However, all hope is not lost! You can use the Array.every method. :)From that link:In other words, you could do something convoluted like this (link to JSFiddle):This will alert 1 through 3, and then "break" out of the loop.You're using underscore.js, so you'll be pleased to learn that it does provide an every method—they call it every, but as that link mentions, they also provide an alias called all.Update:_.find would be better as it breaks out of the loop when the element is found:** Old **If you want to conditionally break out of a loop, use _.filter api instead of _.each. Here is a code snippetYou can have a look to _.some instead of _.each.

_.some stops traversing the list once a predicate is true.

Result(s) can be stored in an external variable.See http://underscorejs.org/#someMaybe you want Underscore's any() or find(), which will stop processing when a condition is met.Like the other answers, it's impossible.

Here is the comment about breaker in underscore underscore issue #21You cannot break a forEach in underscore, as it emulates EcmaScript 5 native behaviour.I believe if your array was actually an object you could return using an empty object.http://underscorejs.org/#eachUpdate:You can actually "break" by throwing an error inside and catching it outside: something like this:This obviously has some implications regarding any other exceptions that your code trigger in the loop, so use with caution!worked in my case

How to search in array of object in mongodb

vcxz

[How to search in array of object in mongodb](https://stackoverflow.com/questions/14040562/how-to-search-in-array-of-object-in-mongodb)

Suppose the mongodb document(table) 'users' isI want to find the person who has award 'Nation Medal' and must be awarded in year 1975

There could be other persons who have this award in different years.How can I find this person using award type and year. So I can get exact person.

2012-12-26 12:27:05Z

Suppose the mongodb document(table) 'users' isI want to find the person who has award 'Nation Medal' and must be awarded in year 1975

There could be other persons who have this award in different years.How can I find this person using award type and year. So I can get exact person.The right way is:$elemMatch allows you to match more than one component within the same array element.Without $elemMatch mongo will look for users with National Medal in some year and some award in 1975s, but not for users with National Medal in 1975.See MongoDB $elemMatch Documentation for more info. See Read Operations Documentation for more information about querying documents with arrays.Use $elemMatch to find the array of particular object

How to add `style=display:「block」` to an element using jQuery?

Someone

[How to add `style=display:「block」` to an element using jQuery?](https://stackoverflow.com/questions/3269136/how-to-add-style-displayblock-to-an-element-using-jquery)

How to add style=display:"block" to an element in jQuery?

2010-07-16 21:55:27Z

How to add style=display:"block" to an element in jQuery?Edit: or as dave thieben points out in his comment below, you can do this as well:Depending on the purpose of setting the display property, you might want to take a look atandThere are multiple function to do this work that wrote in bottom based on priority.Set one or more CSS properties for the set of matched elements. Display the matched elements and is roughly equivalent to calling .css("display", "block")You can display element using .show() insteadSet one or more attributes for the set of matched elements. If target element hasn't style attribute, you can use this method to add inline style to element.You can add specific CSS property to element using pure javascript, if you don't want to use jQuery.If you need to add multiple then you can do it like this:As a good practice I would also put the property name between quotes to allow the dash since most styles have a dash in them. If it was 'display', then quotes are optional but if you have a dash, it will not work without the quotes. Anyways, to make it simple: always enclose them in quotes.

How to sort an array of objects with jquery or javascript [duplicate]

Karoline Brynildsen

[How to sort an array of objects with jquery or javascript [duplicate]](https://stackoverflow.com/questions/5503900/how-to-sort-an-array-of-objects-with-jquery-or-javascript)

I have an array of objects:How do I get the array to be sorted in ascending order of the atribute name (array[i][1])?I've tried to do this: array[i][1].sort(), but that doesn't work.Please help me!Edit: the array can contain more than two objects! It can contain hundreds.Edit:

Why is this question marked as a duplicate, when it was asked 2 years before the "duplicated" question?

2011-03-31 17:33:21Z

I have an array of objects:How do I get the array to be sorted in ascending order of the atribute name (array[i][1])?I've tried to do this: array[i][1].sort(), but that doesn't work.Please help me!Edit: the array can contain more than two objects! It can contain hundreds.Edit:

Why is this question marked as a duplicate, when it was asked 2 years before the "duplicated" question?The sort function takes an additional argument, a function that takes two arguments. This function should return -1, 0 or 1 depending on which of the two arguments should come first in the sorting. More info.I also fixed a syntax error in your multidimensional array.the sort method contains an optional argument to pass a custom compare function.Assuming you wanted an array of arrays:Otherwise if you wanted an array of objects, you could do:Well, it appears that instead of creating a true multidimensional array, you've created an array of (almost) JavaScript Objects. Try defining your arrays like this ->Hopefully that helps!

Getting the first index of an object

Ryan Florence

[Getting the first index of an object](https://stackoverflow.com/questions/909003/getting-the-first-index-of-an-object)

Consider:How would I do this:Obviously, that doesn’t work because the first index is named foo, 

not 0.works, but I don’t know it’s named foo. It could be named anything. I just want the first.

2009-05-26 05:03:55Z

Consider:How would I do this:Obviously, that doesn’t work because the first index is named foo, 

not 0.works, but I don’t know it’s named foo. It could be named anything. I just want the first.If the order of the objects is significant, you should revise your JSON schema to store the objects in an array:or maybe:As Ben Alpert points out, properties of Javascript objects are unordered, and your code is broken if you expect them to enumerate in the same order that they are specified in the object literal—there is no "first" property.Just for fun this works in JS 1.8.5This matches the same order that you would see doingIf you want something concise try:wrapped as a function:they're not really ordered, but you can do:the .hasOwnProperty() is important to ignore prototyped objects.This will not give you the first one as javascript objects are unordered, however this is fine in some cases.for first key of object you can use for valueThere is no way to get the first element, seeing as "hashes" (objects) in JavaScript have unordered properties. Your best bet is to store the keys in an array:Then use that to get the proper value:ES6Using underscore you can use _.pairs to get the first object entry as a key value pair as follows:Then the key would be available with a further [0] subscript, the value with [1]I had the same problem yesterday. I solved it like this:Not the most elegant solution, and I am pretty sure that it may yield different results in different browsers (i.e. the specs says that enumeration is not required to enumerate the properties in the same order as they were defined). However, I only had a single property in my object so that was a non-issue. I just needed the first key.You could do something like this:To get the first key of your objectBased on CMS answer. I don't get the value directly, instead I take the key at its index and use this to get the value:My solution:

Turning live() into on() in jQuery

Jack

[Turning live() into on() in jQuery](https://stackoverflow.com/questions/8021436/turning-live-into-on-in-jquery)

My application has dynamically added Dropdowns. The user can add as many as they need to. I was traditionally using jQuery's live() method to detect when one of these Dropdowns was change()ed:As of jQuery 1.7, I've updated this to:Looking at the Docs, that should be perfectly valid (right?) - but the event handler never fires. Of course, I've confirmed jQuery 1.7 is loaded and running, etc. There are no errors in the error log.What am I doing wrong? Thanks!

2011-11-05 16:16:03Z

My application has dynamically added Dropdowns. The user can add as many as they need to. I was traditionally using jQuery's live() method to detect when one of these Dropdowns was change()ed:As of jQuery 1.7, I've updated this to:Looking at the Docs, that should be perfectly valid (right?) - but the event handler never fires. Of course, I've confirmed jQuery 1.7 is loaded and running, etc. There are no errors in the error log.What am I doing wrong? Thanks!The on documentation states (in bold ;)):Equivalent to .live() would be something likeAlthough it is better if you bind the event handler as close as possible to the elements, that is, to an element being closer in the hierarchy.Update: While answering another question, I found out that this is also mentioned in the .live documentation:In addition to the selected answer,Port jQuery.live to jQuery 1.9+ while you wait for your application to migrate. Add this to your JavaScript file.Note: Above function will not work from  jQuery v3 as this.selector is removed.Or, you can use https://github.com/jquery/jquery-migrate Just found a better solution which doesn't involve editing third party code:https://github.com/jquery/jquery-migrate/#readmeInstall the jQuery Migrate NuGet package in Visual Studio to make all the versioning issues go away. Next time Microsoft update their unobtrusive AJAX and validation modules perhaps try it without the migrate script again to see if they resolved the issue.As jQuery Migrate is maintained by the jQuery Foundation I think this is not only the best approach for third party libraries and also to get warning messages for your own libraries detailing how to update them.In addition to the selected answers,If you use Visual Studio, you can use the Regex Replace.

In Edit > Find and Replace > Replace in Files

Or Ctrl + Shift + H In Find and Replace pop-up, set these fieldsFind what: \$\((.*)\)\.live\((.*),

Replace with: $(document.body).on($2,$1,

In find options check "Use Regular Expressions"jquery verision x.x.x.js  open editor, find jQuery.fn.extendadd codeExample : jquery-2.1.1.js -->  line 7469 (jQuery.fn.extend)Example images view

How to handle initializing and rendering subviews in Backbone.js?

Ian Storm Taylor

[How to handle initializing and rendering subviews in Backbone.js?](https://stackoverflow.com/questions/9337927/how-to-handle-initializing-and-rendering-subviews-in-backbone-js)

I have three different ways to initialize and render a view and its subviews, and each one of them has different problems. I'm curious to know if there is a better way that solves all of the problems:Initialize the children in the parent's initialize function. This way, not everything gets stuck in render so that there is less blocking on rendering.The problems:Initialize the children in the parent's initialize() still, but instead of appending, use setElement().delegateEvents() to set the child to an element in the parents template.Problems:Initialize the children in the parent's render() method instead.Problems:Really curious to get your guys' take on this. Which scenario would you use? or is there a fourth magical one that solves all of these problems?Have you ever kept track of a rendered state for a View? Say a renderedBefore flag? Seems really janky.

2012-02-18 02:13:38Z

I have three different ways to initialize and render a view and its subviews, and each one of them has different problems. I'm curious to know if there is a better way that solves all of the problems:Initialize the children in the parent's initialize function. This way, not everything gets stuck in render so that there is less blocking on rendering.The problems:Initialize the children in the parent's initialize() still, but instead of appending, use setElement().delegateEvents() to set the child to an element in the parents template.Problems:Initialize the children in the parent's render() method instead.Problems:Really curious to get your guys' take on this. Which scenario would you use? or is there a fourth magical one that solves all of these problems?Have you ever kept track of a rendered state for a View? Say a renderedBefore flag? Seems really janky.This is a great question. Backbone is great because of the lack of assumptions it makes, but it does mean you have to (decide how to) implement things like this yourself. After looking through my own stuff, I find that I (kind of) use a mix of scenario 1 and scenario 2. I don't think a 4th magical scenario exists because, simply enough, everything you do in scenario 1 & 2 must be done.I think it'd be easiest to explain how I like to handle it with an example. Say I have this simple page broken into the specified views:Say the HTML is, after being rendered, something like this:Hopefully it's pretty obvious how the HTML matches up with the diagram. The ParentView holds 2 child views, InfoView and PhoneListView as well as a few extra divs, one of which, #name, needs to be set at some point.  PhoneListView holds child views of its own, an array of PhoneView entries.So on to your actual question.  I handle initialization and rendering differently based on the view type.  I break my views into two types, Parent views and Child views.The difference between them is simple, Parent views hold child views while Child views do not. So in my example, ParentView and PhoneListView are Parent views, while InfoView and the PhoneView entries are Child views.Like I mentioned before, the biggest difference between these two categories is when they're allowed to render. In a perfect world, I want Parent views to only ever render once. It is up to their child views to handle any re-rendering when the model(s) change. Child views, on the other hand, I allow to re-render anytime they need since they don't have any other views relying upon them.In a little more detail, for Parent views I like my initialize functions to do a few things:Step 1 is pretty self explanatory.Step 2, the rendering, is done so that any elements the child views rely on already exist before I try to assign them. By doing this, I know all child events will be correctly set, and I can re-render their blocks as many times as I want without worrying about having to re-delegate anything. I do not actually render any child views here, I allow them to do that within their own initialization.Steps 3 and 4 are actually handled at the same time as I pass el in while creating the child view. I like to pass an element in here as I feel the parent should determine where in its own view the child is allowed to put its content.For rendering, I try to keep it pretty simple for Parent views. I want the render function to do nothing more than render the parent view. No event delegation, no rendering of child views, nothing. Just a simple render.Sometimes this doesn't always work though. For instance in my example above, the #name element will need to be updated any time the name within the model changes. However, this block is part of the ParentView template and not handled by a dedicated Child view, so I work around that. I will create some sort of subRender function that only replaces the content of the #name element, and not have to trash the whole #parent element. This may seem like a hack, but I've really found it works better than having to worry about re-rendering the whole DOM and reattaching elements and such. If I really wanted to make it clean, I'd create a new Child view (similar to the InfoView) that would handle the #name block.Now for Child views, the initialization is pretty similar to Parent views, just without the creation of any further Child views.  So:Child view rendering is also very simple, just render and set the content of my el.  Again, no messing with delegation or anything like that.Here is some example code of what my ParentView may look like:You can see my implementation of subRender here. By having changes bound to subRender instead of render, I don't have to worry about blasting away and rebuilding the whole block.Here's example code for the InfoView block:The binds are the important part here.  By binding to my model, I never have to worry about manually calling render myself.  If the model changes, this block will re-render itself without affecting any other views.The PhoneListView will be similar to the ParentView, you'll just need a little more logic in both your initialization and render functions to handle collections. How you handle the collection is really up to you, but you'll at least need to be listening to the collection events and deciding how you want to render (append/remove, or just re-render the whole block). I personally like to append new views and remove old ones, not re-render the whole view.The PhoneView will be almost identical to the InfoView, only listening to the model changes it cares about.Hopefully this has helped a little, please let me know if anything is confusing or not detailed enough.I'm not sure if this directly answers your question, but I think it's relevant:http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/The context in which I set up this article is different, of course, but I think the two solutions I offer, along with the pros and cons of each, should get you moving in the right direction.To me it does not seem like the worst idea in the world to differentiate between the intital setup and subsequent setups of your views via some sort of flag. To make this clean and easy the flag should be added to your very own View which should extend the Backbone (Base) View.Same as Derick I am not completely sure if this directly answers your question but I think it might be at least worth mentioning in this context.Kevin Peel gives a great answer - here's my tl;dr version:I'm trying to avoid coupling between views like these. There are two ways I usually do:Basically, you let your router function initialize parent and child view. So the view has no knowledge of each other, but the router handles it all.Both have knowledge of the same DOM, and you can order them anyway you want.What I do is giving each children an identity (which Backbone has already done that for you: cid)When Container does the rendering, using the 'cid' and 'tagName' generate a placeholder for every child, so in template the children has no idea about where it will be put by the Container.than you can using no specified placeholder is needed, and Container only generate the placeholder rather than the children's DOM structure. Cotainer and Children are still generating own DOM elements and only once.Here is a light weight mixin for creating and rendering subviews, which I think addresses all the issues in this thread:https://github.com/rotundasoftware/backbone.subviewsThe approach taken by this plug is create and render subviews after the first time the parent view is rendered. Then, on subsequent renders of the parent view, $.detach the subview elements, re-render the parent, then insert the subview elements in the appropriate places and re-render them. This way subviews objects are reused on subsequent renders, and there is no need to re-delegate events.Note that the case of a collection view (where each model in the collection is represented with one subview) is quite different and merits its own discussion / solution I think. Best general solution I am aware of to that case is the CollectionView in Marionette.EDIT: For the collection view case, you may also want to check out this more UI focused implementation, if you need selection of models based on clicks and / or dragging and dropping for reordering.

Elements order in a「for (… in …)」loop

chakrit

[Elements order in a「for (… in …)」loop](https://stackoverflow.com/questions/280713/elements-order-in-a-for-in-loop)

Does the "for…in" loop in Javascript loop through the hashtables/elements in the order they are declared? Is there a browser which doesn't do it in order?

The object I wish to use will be declared once and will never be modified.Suppose I have:And I further use them in:Can I expect 'A : "Hello"' to always come before 'B : "World"' in most decent browsers?

2008-11-11 12:00:36Z

Does the "for…in" loop in Javascript loop through the hashtables/elements in the order they are declared? Is there a browser which doesn't do it in order?

The object I wish to use will be declared once and will never be modified.Suppose I have:And I further use them in:Can I expect 'A : "Hello"' to always come before 'B : "World"' in most decent browsers?Quoting John Resig:All browsers respect definition order with the exception of Chrome and Opera which do for every non-numerical property name. In these two browsers the properties are pulled in-order ahead of the first non-numerical property (this is has to do with how they implement arrays). The order is the same for Object.keys as well.This example should make it clear what happens: The technicalities of this are less important than the fact that this may change at any time. Do not rely on things staying this way.In short: Use an array if order is important to you.Bumping this a year later...It is 2012 and the major browsers still differ:gist or test in current browserSafari 5, Firefox 14Chrome 21, Opera 12, Node 0.6, Firefox 27IE9From the ECMAScript Language Specification, section 12.6.4 (on the for .. in loop):And section 4.3.3 (definition of "Object"):I guess that means you cant rely on the properties being enumerated in a consistent order across JavaScript implementations. (It would be bad style anyway to rely on implementation-specific details of a language.)If you want your order defined, you will need to implement something that defines it, like an array of keys that you sort before accessing the object with it.The elements of an object that for/in enumerates are the properties that don't have the DontEnum flag set. The ECMAScript, aka Javascript, standard explicitly says that "An Object is an unordered collection of properties" (see http://www.mozilla.org/js/language/E262-3.pdf section 8.6).It's not going to be standards conformant (i.e. safe) to assume all Javascript implementations will enumerate in declaration order.Iteration order is also confused with respect to deleting of properties, but in this case with IE only.The desire for changing the spec to fix the iteration order seems to be quite a popular desire among developers if the discussion at http://code.google.com/p/v8/issues/detail?id=164 is any indication.in IE6, the order is not guaranteed. The order cannot be trusted. Both Opera and Chrome return the list of properties unordered.The code above shows B, A, C in Opera and C, A, B in Chrome.This does not answer the question per se, but offers a solution to the basic problem.Assuming that you cannot rely on order to preserved, why not use an array of objects with key and value as properties?Now, it is up to you to ensure that the keys are unique (assuming that this is also important to you. As well, direct addressing changes, and for (...in...) now returns indexes as 'keys'.

What does ~~ (「double tilde」) do in Javascript?

Shane Tomlinson

[What does ~~ (「double tilde」) do in Javascript?](https://stackoverflow.com/questions/4055633/what-does-double-tilde-do-in-javascript)

I was checking out an online game physics library today and came across the ~~ operator.  I know a single ~ is a bitwise NOT, would that make ~~ a NOT of a NOT, which would give back the same value, wouldn't it?

2010-10-29 20:27:52Z

I was checking out an online game physics library today and came across the ~~ operator.  I know a single ~ is a bitwise NOT, would that make ~~ a NOT of a NOT, which would give back the same value, wouldn't it?It removes everything after the decimal point because the bitwise operators implicitly convert their operands to signed 32-bit integers. This works whether the operands are (floating-point) numbers or strings, and the result is a number.In other words, it yields:only if x is between -(231) and 231 - 1. Otherwise, overflow will occur and the number will "wrap around".This may be considered useful to convert a function's string argument to a number, but both because of the possibility of overflow and that it is incorrect for use with non-integers, I would not use it that way except for "code golf" (i.e. pointlessly trimming bytes off the source code of your program at the expense of readability and robustness). I would use +x or Number(x) instead.The number -43.2, for example is:as a signed (two's complement) 32-bit binary number. (JavaScript ignores what is after the decimal point.) Inverting the bits gives:Inverting again gives:This differs from Math.floor(-43.2) in that negative numbers are rounded toward zero, not away from it. (The floor function, which would equal -44, always rounds down to the next lower integer, regardless of whether the number is positive or negative.)The first ~ operator forces the operand to an integer (possibly after coercing the value to a string or a boolean), then inverts the lowest 31 bits. Officially ECMAScript numbers are all floating-point, but some numbers are implemented as 31-bit integers in the SpiderMonkey engine.You can use it to turn a 1-element array into an integer. Floating-points are converted according to the C rule, ie. truncation of the fractional part.The second ~ operator then inverts the bits back, so you know that you will have an integer. This is not the same as coercing a value to boolean in a condition statement, because an empty object {} evaluates to true, whereas ~~{} evaluates to false.In ECMAScript 6, the equivalent of ~~ is Math.trunc:The polyfill:The ~ seems to do -(N+1). So ~2 == -(2 + 1) == -3 If you do it again on -3 it turns it back: ~-3 == -(-3 + 1) == 2 It probably just converts a string to a number in a round-about way.See this thread: http://www.sitepoint.com/forums/showthread.php?t=663275Also, more detailed info is available here: http://dreaminginjavascript.wordpress.com/2008/07/04/28/Given ~N is -(N+1), ~~N is then -(-(N+1) + 1). Which, evidently, leads to a neat trick.Just a bit of a warning. The other answers here got me into some trouble.The intent is to remove anything after the decimal point of a floating point number, but it has some corner cases that make it a bug hazard. I'd recommend avoiding ~~.First, ~~ doesn't work on very large numbers. ~~1000000000000 == -727279968 As an alternative, use Math.trunc() (as Gajus mentioned, Math.trunc() returns the integer part of a floating point number but is only available in ECMAScript 6 compliant JavaScript). You can always make your own Math.trunc() for non-ECMAScript-6 environments by doing this:I wrote a blog post on this for reference: http://bitlords.blogspot.com/2016/08/the-double-tilde-x-technique-in.htmlHere is an example of how this operator can be used efficiently, where it makes sense to use it:Source:See section Interacting with pointsConverting Strings to Numbers~-1 is 0sourceTilde(~) has an algorihm -(N+1)For examle:Double tilde is -(-(N+1)+1)For example:Triple tilde is -(-(-(N+1)+1)+1)For example:

How to terminate script execution when debugging in Google Chrome?

srgstm

[How to terminate script execution when debugging in Google Chrome?](https://stackoverflow.com/questions/13134723/how-to-terminate-script-execution-when-debugging-in-google-chrome)

When stepping through JavaScript code in Google Chrome debugger, how do I terminate script execution if I do not want to continue? The only way I found is closing the browser window.Pressing "Reload this page" runs the rest of the code and even submits forms as if pressing F8 "Continue".UPDATE: When pressing F5 (Refresh) while a script is paused:Closing and then opening again the browser window is not always the next easiest way

because it will kill browser session state and that may be important. All your breakpoints are also lost.UPDATE (Jan 2014): Refresh while debugging:Kind of progress!Navigate to the same page while debugging:Also juacala suggested an effective workaround. For example, if you are using jQuery, running delete $ from console will stop execution once any jQuery method is encountered. I have tested it in all above browsers and can confirm it is working.UPDATE (Mar 2015): Finally, after over 2 years and almost 10K views, the right answer was given by Alexander K. Google Chrome has its own Task Manager which can kill a tab process without closing the tab itself, keeping all the breakpoints and other stuff intact.I even went as far as BrowserStack.com to test it in Chrome v22 and found that this was working this way even at that time.Juacala's workaround is still useful when debugging in IE or Firefox.UPDATE (Jan 2019):Chrome Dev Tools at last added a proper way to stop script execution which is nice (although a bit hidden). Refer to James Gentes's answer for details.

2012-10-30 07:51:14Z

When stepping through JavaScript code in Google Chrome debugger, how do I terminate script execution if I do not want to continue? The only way I found is closing the browser window.Pressing "Reload this page" runs the rest of the code and even submits forms as if pressing F8 "Continue".UPDATE: When pressing F5 (Refresh) while a script is paused:Closing and then opening again the browser window is not always the next easiest way

because it will kill browser session state and that may be important. All your breakpoints are also lost.UPDATE (Jan 2014): Refresh while debugging:Kind of progress!Navigate to the same page while debugging:Also juacala suggested an effective workaround. For example, if you are using jQuery, running delete $ from console will stop execution once any jQuery method is encountered. I have tested it in all above browsers and can confirm it is working.UPDATE (Mar 2015): Finally, after over 2 years and almost 10K views, the right answer was given by Alexander K. Google Chrome has its own Task Manager which can kill a tab process without closing the tab itself, keeping all the breakpoints and other stuff intact.I even went as far as BrowserStack.com to test it in Chrome v22 and found that this was working this way even at that time.Juacala's workaround is still useful when debugging in IE or Firefox.UPDATE (Jan 2019):Chrome Dev Tools at last added a proper way to stop script execution which is nice (although a bit hidden). Refer to James Gentes's answer for details.In Chrome, there is "Task Manager", accessible via Shift+ESC or throughYou can select your page task and end it by pressing "End Process" button. As of April 2018, you can stop infinite loops in Chrome:Also note the shortcut keys: F8 and Ctrl+\One way you can do it is pause the script, look at what code follows where you are currently stopped, e.g.:In the console, do the following:Then play the script: it will cause a fatal error when it tries to access somethingElse, and the script will die. Voila, you've terminated the script.EDIT: Originally, I deleted a variable. That's not good enough. You have to delete a function or an object of which JavaScript attempts to access a property.Good question here. I think you cannot terminate the script execution. Although I have never looked for it, I have been using the chrome debugger for quite a long time at work. I usually set breakpoints in my javascript code and then I debug the portion of code I'm interested in. When I finish debugging that code, I usually just run the rest of the program or refresh the browser.If you want to prevent the rest of the script from being executed (e.g. due to AJAX calls that are going to be made) the only thing you can do is to remove that code in the console on-the-fly, thus preventing those calls from being executed, then you could execute the remaining code without problems.I hope this helps!P.S: I tried to find out an option for terminating the execution in some tutorials / guides like the following ones, but couldn't find it. As I said before, probably there is no such option.http://www.codeproject.com/Articles/273129/Beginner-Guide-to-Page-and-Script-Debugging-with-Chttp://www.nsbasic.com/app/tutorials/TT10.htmIf you are encountering this while using the debugger statement, ... then I think the page will continue running forever until the js runtime yields, or the next break. Assuming you're in break-on-error mode (the pause-icon toggle), you can ensure a break happens by instead doing something like:or maybe call a non-existent function:(Of course this doesn't help if you are trying to step through functions, though perhaps you could dynamically add in a throw 1 or z() or somesuch in the Sources panel, ctrl-S to save, and then ctrl-R to refresh... this may however skip one breakpoint, but may work if you're in a loop.)If you are doing a loop and expect to trigger the debugger statement again, you could just type throw 1 instead.Then when you hit ctrl-R, the next throw will be hit, and the page will refresh.(tested with Chrome v38, circa Apr 2017)Refering to the answer given by @scottndecker to the following question, chrome now provides a 'disable JavaScript' option under Developer Tools:Good thing is you can stop and rerun again just by checking/unchecking it.You can do it, but you must prepare your code first.Instructions for halting script execution in Google Chrome Dev Tools:(1) Prepare your code first, by creating a global variable: (2) Any place where you may wish to quit, test the value of this variable:(3) Pause execution of script on-or-before the above test line(s)(4) Switch to console(5) Type:(6) Continue script execution. Script will return false when it executes the test from step (2) aboveNotes: (A) This trick works with global variables and objects, but it will not work with local variables. Note that this:

newVar = 'never used before';

creates a new property of the window object (works with above trick), whilst this: 

var newVar = 'never used before';

creates a local variable (does NOT work with above trick!)(B) So, you can still use this trick with already-running code if you have either a global variable or an object that will return false if it has a given value.(C) In a pinch, you can use juacala's trick and delete an element from the DOM (on the elements tab) that will cause a javascript error. For example, suppose you have code var cartype = $('#cartype').val(); If you delete the element with ID=cartype before that line of code, then the js will break on that line. However, the element will still be missing when you try to re-run the code. The trick described above allows you to run and re-run the code ad infinitum.More notes:(a) Insert breakpoint into code: just type debugger; on a line by itself. If DevTools is open, the script will jump into debugger at that point. If DevTools not open, code will ignore statement.(b) Want to avoid jumping into the jQuery library when debugging code? Blackbox it. See blackbox instructions for Chrome - or - for FirefoxGratitude (please visit and upvote):Javascript Debugging line by line using Google ChromeIs it possible to change javascript variable values while debugging in Google Chrome?If you have a rogue loop, pause the code in Google Chrome debugger (the small "||" button while in Sources tab). Switch back to Chrome itself, open "Task Manager" (Shift+ESC), select your tab, click the "End Process" button. You will get the Aww Snap message and then you can reload (F5).As others have noted, reloading the page at the point of pausing is the same as restarting the rogue loop and can cause nasty lockups if the debugger also then locks (in some cases leading to restarting chrome or even the PC). The debugger needs a "Stop" button. Nb: The accepted answer is out of date in that some aspects of it are now apparently wrong. If you vote me down, pls explain :).Open the source tab in 'Developer Tools', click on a line number in a script that is running, this will create a breakpoint and the debugger will break there.You can pause on any XHR pattern which I find very useful during debugging these kind of scenarios.For example I have given breakpoint on an URL pattern containing "/"There are many appropiate solution to this problem as mentioned above in this post, but i have found a small hack that can be inserrted in the script or pasted in the Chromes console (debugger) to achieve it:This will cause execution to be paused when you hit F12.

How to get the url parameters using AngularJS

praveenpds

[How to get the url parameters using AngularJS](https://stackoverflow.com/questions/11758079/how-to-get-the-url-parameters-using-angularjs)

HTML source code AngularJS source codeHere the variables loc and loc1 both return test as the result for the above URL. Is this the correct way?

2012-08-01 11:17:27Z

HTML source code AngularJS source codeHere the variables loc and loc1 both return test as the result for the above URL. Is this the correct way?I know this is an old question, but it took me some time to sort this out given the sparse Angular documentation.  The RouteProvider and routeParams is the way to go.  The route wires up the URL to your Controller/View and the routeParams can be passed into the controller. Check out the Angular seed project.  Within the app.js you'll find an example for the route provider.  To use params simply append them like this:Then in your controller inject $routeParams:With this approach you can use params with a url such as:

"http://www.example.com/view1/param1/param2"While routing is indeed a good solution for application-level URL parsing, you may want to use the more low-level $location service, as injected in your own service or controller:This simple syntax will work for http://example.com/path?myParam=paramValue. However, only if you configured the $locationProvider in the HTML 5 mode before:Otherwise have a look at the http://example.com/#!/path?myParam=someValue "Hashbang" syntax which is a bit more complicated, but have the benefit of working on old browsers (non-HTML 5 compatible) as well.If you're using ngRoute, you can inject $routeParams into your controllerhttp://docs.angularjs.org/api/ngRoute/service/$routeParamsIf you're using angular-ui-router, you can inject $stateParamshttps://github.com/angular-ui/ui-router/wiki/URL-RoutingI found solution how to use $location.search()  to get parameter from URLfirst in URL u need put syntax " # " before parameter like this example"http://www.example.com/page#?key=value" and then in your controller u put $location in function and use $location.search() to get URL parameter forIf the answers already posted didn't help, one can try with

$location.search().myParam; 

with URLs http://example.domain#?myParam=paramValueSimple and easist way to get url valueWhen using angularjs with expressOn my example I was using angularjs with express doing the routing so using $routeParams would mess up with my routing. I used the following code to get what I was expecting:This receives a URL template and the path of the given location. The I just call it with:Putting it all together my controller is:The result will be:Hope this helps someone out there!

How to call a JavaScript function from PHP?

Zeeshan Rang

[How to call a JavaScript function from PHP?](https://stackoverflow.com/questions/1045845/how-to-call-a-javascript-function-from-php)

How to call a JavaScript function from PHP?The following code is from xyz.html (on a button click) it calls a wait() in an external xyz.js. This wait() calls wait.php.and wait.phpwhere loadxml() calls code from another PHP file the same way. The loadxml() is working fine otherwise, but it is not being called the way I want it.

2009-06-25 19:45:42Z

How to call a JavaScript function from PHP?The following code is from xyz.html (on a button click) it calls a wait() in an external xyz.js. This wait() calls wait.php.and wait.phpwhere loadxml() calls code from another PHP file the same way. The loadxml() is working fine otherwise, but it is not being called the way I want it.As far as PHP is concerned (or really, a web server in general), an HTML page is nothing more complicated than a big string.All the fancy work you can do with language like PHP - reading from databases and web services and all that - the ultimate end goal is the exact same basic principle: generate a string of HTML*.Your big HTML string doesn't become anything more special than that until it's loaded by a web browser. Once a browser loads the page, then all the other magic happens - layout, box model stuff, DOM generation, and many other things, including JavaScript execution.So, you don't "call JavaScript from PHP", you "include a JavaScript function call in your output".There are many ways to do this, but here are a couple.Using just PHP:Escaping from php mode to direct output mode:You don't need to return a function name or anything like that.  First of all, stop writing AJAX requests by hand.  You're only making it hard on yourself.  Get jQuery or one of the other excellent frameworks out there.Secondly, understand that you already are going to be executing javascript code once the response is received from the AJAX call.Here's an example of what I think you're doing with jQuery's AJAXNow, if you're dead-set on sending a function name from PHP back to the AJAX call, you can do that too.  * Or JSON or XML etc.I always just use  echo "<script> function(); </script>"; or something similar. you're not technically calling the function in PHP, but this as close as your going to get.Per now (February 2012) there's a new feature for this. Check hereCode sample (taken from the web):You can't.  You can call a JS function from HTML outputted by PHP, but that's a whole 'nother thing.Thats not possible. PHP is a Server side language and JavaScript client side and they don't really know a lot about each other. You would need a Server sided JavaScript Interpreter (like Aptanas Jaxer). Maybe what you actually want to do is to use an Ajax like Architecture (JavaScript function calls PHP script asynchronously and does something with the result).If you want to echo it out for later execution it's okIf you want to execute the JS and use the results in PHP use V8JSYou can refer here for further reference:

What are Extensions in php v8js?If you want to execute HTML&JS and use the output in PHP http://htmlunit.sourceforge.net/ is your solutionPHP runs in the server. JavaScript runs in the client. So php can't call a JavaScript function.you can try this one also:-try like this You may not be able to directly do this, but the Xajax library is pretty close to what you want. I will demonstrate with an example. Here's a button on a webpage:Our intuitive guess would be that xajax_addCity() is a Javascript function, right? Well, right and wrong. The cool thing Xajax allows is that we don't have any JS function called xajax_addCity(), but what we do have is a PHP function called addCity() that can do whatever PHP does! Think about it for a minute. We are virtually invoking a PHP function from Javascript code!

That over-simplified example was just to whet the appetite, a better explanation is on the Xajax site, have fun!

How can I remove or replace SVG content?

Sami

[How can I remove or replace SVG content?](https://stackoverflow.com/questions/10784018/how-can-i-remove-or-replace-svg-content)

I have a piece of JavaScript code which creates (using D3.js) an svg element which contains a chart. I want to update the chart based on new data coming from a web service using AJAX, the problem is that each time I click on the update button, it generates a new svg, so I want to remove the old one or update its content.Here is a snippet from the JavaScript function where I create the svg:How can I remove the old svg element or at least replace its content?

2012-05-28 11:34:45Z

I have a piece of JavaScript code which creates (using D3.js) an svg element which contains a chart. I want to update the chart based on new data coming from a web service using AJAX, the problem is that each time I click on the update button, it generates a new svg, so I want to remove the old one or update its content.Here is a snippet from the JavaScript function where I create the svg:How can I remove the old svg element or at least replace its content?Here is the solution:This is a remove function provided by D3.js.If you want to get rid of all children,will remove all content associated with the svg.Note: This is recommended in case you want to update chart.Setting the id attribute when appending the svg element can also let d3 select so remove() later on this element by id :I had two charts.This removed all charts. This worked for removing the existing bar chart, but then I couldn't re-add the bar chart afterTried this.  It not only let me remove the existing bar chart, but also let me re-add a new bar chart.Not sure if this is the correct way to remove, and re-add a chart in d3.  It worked in Chrome, but have not tested in IE.  I am using the SVG using D3.js and i had the same issue.I used this code for removing the previous svg but the linear gradient inside SVG were not coming in IE$("#container_div_id").html("");then I wrote the below code to resolve the issuehere i am removing the previous g and path inside the SVG, replacing with the new one.Keeping my linear gradient inside SVG tags in the static content and then I called the above code, This works in IE You could also just use jQuery to remove the contents of the div that contains your svg.You should use append("svg:svg"), not append("svg") so that D3 makes the element with the correct 'namespace' if you're using xhtml.

How to disable text selection using jQuery?

Dawid Ohia

[How to disable text selection using jQuery?](https://stackoverflow.com/questions/2700000/how-to-disable-text-selection-using-jquery)

Does jQuery or jQuery-UI have any functionality to disable text selection for given document elements?

2010-04-23 15:54:20Z

Does jQuery or jQuery-UI have any functionality to disable text selection for given document elements?In jQuery 1.8, this can be done as follows:If you use jQuery UI, there is a method for that, but it can only handle mouse selection (i.e. CTRL+A is still working):The code is realy simple, if you don't want to use jQuery UI :I found this answer ( Prevent Highlight of Text Table ) most helpful, and perhaps it can be combined with another way of providing IE compatibility.Here's a more comprehensive solution to the disconnect selection, and the cancellation of some of the hot keys (such as Ctrl+a and Ctrl+c. Test:  Cmd+a and Cmd+c)and call example:jsfiddle.net/JBxnQ/This could be also not enough for old versions of FireFox (I can't tell which). If all this does not work, add the following:The following would disable the selection of all classes 'item' in all common browsers (IE, Chrome, Mozilla, Opera and Safari):This can easily be done using JavaScript This is applicable to all BrowsersCall to this functionThis is actually very simple.

To disable text selection (and also click+drag-ing text (e.g a link in Chrome)), just use the following jQuery code:All this does is prevent the default from happening when you click with your mouse (mousedown()) in the body and html tags. You can very easily change the element just by changing the text in-between the two quotes (e.g change $('body, html') to $('#myUnselectableDiv') to make the myUnselectableDiv div to be, well, unselectable.A quick snippet to show/prove this to you:Please note that this effect is not perfect, and performs the best while making the whole window not selectable. You might also want to addas well, by using that section of Vladimir's answer above. (get to his post here)1 line solution for CHROME:  and FF:  IE requires setting the "unselectable" attribute (details on bottom).I tested this in Chrome and it works. This property is inherited so setting it on the body element will disable selection in your entire document.  Details here: http://help.dottoro.com/ljrlukea.phpIf you're using Closure, just call this function:It handles all browsers transparently.The non-IE browsers are handled like this:Defined here:

http://closure-library.googlecode.com/svn/!svn/bc/4/trunk/closure/goog/docs/closure_goog_style_style.js.source.htmlThe IE portion is handled like this:I think this code works on all browsers and requires the least overhead. It's really a hybrid of all the above answers. Let me know if you find a bug!Add CSS:Add jQuery:Optional: To disable selection for all children elements as well, you can change the IE block to:Usage:I've tried all the approaches, and this one is the simplest for me because I'm using IWebBrowser2 and don't have 10 browsers to contend with:Works perfectly for me!One solution to this, for appropriate cases, is to use a <button> for the text that you don't want to be selectable. If you are binding to the click event on some text block, and don't want that text to be selectable, changing it to be a button will improve the semantics and also prevent the text being selected.Best and simplest way I found it, prevents ctrl + c, right click. In this case I blocked everything, so I don't have to specify anything.

.append(), prepend(), .after() and .before()

Epik

[.append(), prepend(), .after() and .before()](https://stackoverflow.com/questions/14846506/append-prepend-after-and-before)

I am pretty proficient with coding, but now and then I come across code that seems to do basically the same thing. My main question here is, why would you use .append() rather then .after() or vice verses? I have been looking and cannot seem to find a clear definition of the differences between the two and when to use them and when not to.What are the benefits of one over the other and also why would i use one rather then the other?? Can someone please explain this to me?

2013-02-13 04:42:48Z

I am pretty proficient with coding, but now and then I come across code that seems to do basically the same thing. My main question here is, why would you use .append() rather then .after() or vice verses? I have been looking and cannot seem to find a clear definition of the differences between the two and when to use them and when not to.What are the benefits of one over the other and also why would i use one rather then the other?? Can someone please explain this to me?.append() puts data inside an element at last index and

.prepend() puts the prepending elem at first indexafter execution:after execution:.after() puts the element after the element

.before() puts the element before the elementafter execution:after execution:This image displayed below gives a clear understanding and shows the exact difference between .append(), .prepend(), .after() and .before()You can see from the image that .append() and .prepend() adds the new elements as child elements (brown colored) to the  target.And .after() and .before() adds the new elements as sibling elements (black colored) to the  target.Here is a DEMO for better understanding.EDIT: the flipped versions of those functions:Using this code:on this target:So although these functions flip the parameter order, each creates the same element nesting:...but they return a different element. This matters for method chaining.append() & prepend() are for inserting content inside an element (making the content its child) while after() & before() insert content outside an element (making the content its sibling).The best way is going to documentation.So, append and prepend refers to child of the object whereas after and before refers to sibling of the the object. There is a basic difference between .append() and .after() and .prepend() and .before()..append() adds the parameter element inside the selector element's tag at the very end whereas the .after() adds the parameter element after the element's tag. The vice-versa is for .prepend() and .before(). FiddleThere is no extra advantage for each of them. It totally depends on your scenario. Code below shows their difference.Imagine the DOM (HTML page) as a tree right. The HTML elements are the nodes of this tree.The append() adds a new node to the child of the node you called it on. The after() adds a new node as a sibling or at the same level or child to the parent of the node you called it on. When you are manipulating the DOM with jquery the methods you use depend on the result you want and a frequent use is to replace content.In replacing content you want to .remove() the content and replace it with new content.  If you .remove() the existing tag and then try to use .append() it won't work because the tag itself has been removed, whereas if you use .after(), the new content is added 'outside' the (now removed) tag and isn't affected by the previous .remove().

How to find first element of array matching a boolean condition in JavaScript?

Jakub P.

[How to find first element of array matching a boolean condition in JavaScript?](https://stackoverflow.com/questions/10457264/how-to-find-first-element-of-array-matching-a-boolean-condition-in-javascript)

I'm wondering if there's a known, built-in/elegant way to find the first element of a JS array  matching a given condition. A C# equivalent would be List.Find.So far I've been using a two-function combo like this:And then I can use:But since there are so many functional-style array methods in ECMAScript, perhaps there's something out there already like this? I imagine lots of people have to implement stuff like this all the time...

2012-05-04 23:14:21Z

I'm wondering if there's a known, built-in/elegant way to find the first element of a JS array  matching a given condition. A C# equivalent would be List.Find.So far I've been using a two-function combo like this:And then I can use:But since there are so many functional-style array methods in ECMAScript, perhaps there's something out there already like this? I imagine lots of people have to implement stuff like this all the time...Since ES6 there is the native find method for arrays; this stops enumerating the array once it finds the first match and returns the value.Old answer:I have to post an answer to stop these filter suggestions :-)You can use the some Array method to iterate the array until a condition is met (and then stop). Unfortunately it will only return whether the condition was met once, not by which element (or at what index) it was met. So we have to amend it a little:As of ECMAScript 6, you can use Array.prototype.find for this. This is implemented and working in Firefox (25.0), Chrome (45.0), Edge (12), and Safari (7.1), but not in Internet Explorer or a bunch of other old or uncommon platforms.For example, the expression below evaluates to 106.If you want to use this right now but need support for IE or other unsupporting browsers, you can use a shim. I recommend the es6-shim. MDN also offers a shim if for some reason you don't want to put the whole es6-shim into your project. For maximum compatibility you want the es6-shim, because unlike the MDN version it detects buggy native implementations of find and overwrites them (see the comment that begins "Work around bugs in Array#find and Array#findIndex" and the lines immediately following it).What about using filter and getting the first index from the resulting array?It should be clear by now that JavaScript offers no such solution natively; here are the closest two derivatives, the most useful first:Traditional search methods in JavaScript are characterized by returning the index of the found element instead of the element itself or -1. This avoids having to choose a return value from the domain of all possible types; an index can only be a number and negative values are invalid.Both solutions above don't support offset searching either, so I've decided to write this:If you're using underscore.js you can use its find and indexOf functions to get exactly what you want:Documentation:As of ES 2015, Array.prototype.find() provides for this exact functionality.For browsers that do not support this feature, the Mozilla Developer Network has provided a polyfill (pasted below):Array.prototype.find() does just that, more info: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findI have got inspiration from multiple sources on the internet to derive into the solution below. Wanted to take into account both some default value and to provide a way to compare each entry for a generic approach which this solves.Usage: (giving value "Second")Implementation:There is no built-in function in Javascript to perform this search.If you are using jQuery you could do a jQuery.inArray(element,array).A less elegant way that will throw all the right error messages (based on Array.prototype.filter) but will stop iterating on the first result isThen examples areIt works by ending filter by using throw.

Angular JS: What is the need of the directive’s link function when we already had directive’s controller with scope?

Yugal Jindle

[Angular JS: What is the need of the directive’s link function when we already had directive’s controller with scope?](https://stackoverflow.com/questions/20018507/angular-js-what-is-the-need-of-the-directive-s-link-function-when-we-already-ha)

I need to perform some operations on scope and the template. It seems that I can do that in either the link function or the controller function (since both have access to the scope).When is it the case when I have to use link function and not the controller?Also, I understand that link is the non-angular world. So, I can use $watch, $digest and $apply.What is the significance of the link function, when we already had controller?

2013-11-16 12:34:11Z

I need to perform some operations on scope and the template. It seems that I can do that in either the link function or the controller function (since both have access to the scope).When is it the case when I have to use link function and not the controller?Also, I understand that link is the non-angular world. So, I can use $watch, $digest and $apply.What is the significance of the link function, when we already had controller?After my initial struggle with the link and controller functions and reading quite a lot about them, I think now I have the answer.First lets understand,How do angular directives work in a nutshell:Comparing compile vs link vs controller :Therefore, finally we have the following which fits all the pieces perfectly :The difference between link and controller comes into play when you want to nest directives in your DOM and expose API functions from the parent directive to the nested ones.From the docs:Say you want to have two directives my-form and my-text-input and you want my-text-input directive to appear only inside my-form and nowhere else.In that case, you will say while defining the directive my-text-input that it requires a controller from the parent DOM element using the require argument, like this: require: '^myForm'. Now the controller from the parent element will be injected into the link function as the fourth argument, following $scope, element, attributes. You can call functions on that controller and communicate with the parent directive.Moreover, if such a controller is not found, an error will be raised.There is no real need to use the link function if one is defining the controller since the $scope is available on the controller. Moreover, while defining both link and controller, one does need to be careful about the order of invocation of the two (controller is executed before).However, in keeping with the Angular way, most DOM manipulation and 2-way binding using $watchers is usually done in the link function while the API for children and $scope manipulation is done in the controller. This is not a hard and fast rule, but doing so will make the code more modular and help in separation of concerns (controller will maintain the directive state and link function will maintain the DOM + outside bindings).The controller function/object represents an abstraction model-view-controller (MVC). While there is nothing new to write about MVC, it is still the most significant advanatage of angular: split the concerns into smaller pieces. And that's it, nothing more, so if you need to react on Model changes coming from View the Controller is the right person to do that job.The story about link function is different, it is coming from different perspective then MVC.  And is really essential, once we want to cross the boundaries of a controller/model/view (template).Let' start with the parameters which are passed into the link function:To put the link into the context, we should mention that all directives are going through this initialization process steps: Compile, Link. An Extract from Brad Green and Shyam Seshadri book Angular JS:Compile phase (a sister of link, let's mention it here to get a clear picture):In this phase, Angular walks the DOM to identify all the registered

 directives in the template. For each directive, it then transforms the

 DOM based on the directive’s rules (template, replace, transclude, and

 so on), and calls the compile function if it exists. The result is a

 compiled template function,Link phase:A nice example how to use the link could be found here: Creating Custom Directives. See the example: Creating a Directive that Manipulates the DOM, which inserts a "date-time" into page, refreshed every second. Just a very short snippet from that rich source above, showing the real manipulation with DOM. There is hooked function to $timeout service, and also it is cleared in its destructor call to avoid memory leaks

Can someone explain this 'double negative' trick? [duplicate]

ProfessionalAmateur

[Can someone explain this 'double negative' trick? [duplicate]](https://stackoverflow.com/questions/4686583/can-someone-explain-this-double-negative-trick)

I am by no means an expert at Javascript, but I have been reading Mark Pilgrim's "Dive into HTML5" webpage and he mentioned something that I would like a better understanding of.He states:If anyone can explain this a little better I would appreciate it!

2011-01-13 23:39:06Z

I am by no means an expert at Javascript, but I have been reading Mark Pilgrim's "Dive into HTML5" webpage and he mentioned something that I would like a better understanding of.He states:If anyone can explain this a little better I would appreciate it!A logical NOT operator ! converts a value to a boolean that is the opposite of its logical value. The second ! converts the previous boolean result back to the boolean representation of  its original logical value.From these docs for the Logical NOT operator:So if getContext gives you a "falsey" value, the !!  will make it return the boolean value false. Otherwise it will return true.The "falsey" values are:Javascript has a confusing set of rules for what is considered "true" and "false" when placed in a context where a Boolean is expected.  But the logical-NOT operator, !, always produces a proper Boolean value (one of the constants true and false).  By chaining two of them, the idiom !!expression produces a proper Boolean with the same truthiness as the original expression.Why would you bother?  Because it makes functions like the one you show more predictable.  If it didn't have the double negative in there, it might return undefined, a Function object, or something not entirely unlike a Function object.  If the caller of this function does something weird with the return value, the overall code might misbehave ("weird" here means "anything but an operation that enforces Boolean context").  The double-negative idiom prevents this.In javascript, using the "bang" operator (!) will return true if the given value is true, 1, not null, etc. It will return false if the value is undefined, null, 0, or an empty string.So the bang operator will always return a boolean value, but it will represent the opposite value of what you began with. If you take the result of that operation and "bang" it again, you can reverse it again, but still end up with a boolean (and not undefined, null, etc).Using the bang twice will take a value that could have been undefined, null, etc, and make it just plain false. It will take a value that could have been 1, "true", etc. and make it just plain true.The code could have been written:Using !!variable gives you a guarantee of typecast to boolean.To give you a simple example:But it doesn't make sense to use if you are doing something like:The if will cast it to boolean so there is no need to make the implicit double negative cast.! casts "something"/"anything" to a boolean.!! gives the original boolean value back (and guarantees the expression is a boolean now, regardless to what is was before)The first ! coerces the variable to a boolean type and inverts it. The second ! inverts it again (giving you the original (correct) boolean value for whatever you are checking).For clarity you would be better off usingdocument.createElement('canvas').getContext may evaluate to either undefined or an object reference. !undefined yields true, ![some_object] yields false. This is almost what we need, just inverted. So !! serves to convert undefined to false and an object reference to true.It's to do with JavaScript's weak typing.  document.createElement('canvas').getContext is a function object.  By prepending a single ! it evaluates it as a boolean expression and flips the answer around.  By prepending another !, it flips the answer back.  The end result is that the function evaluates it as a boolean expression, but returns an actual boolean result rather than the function object itself.  Prepending !! is a quick and dirty way to typecast an expression to a boolean type.If document.createElement('canvas').getContext isn't undefined or null, it will return true. Otherwise it will return false.

How do I use format() on a moment.js duration?

mvanveen

[How do I use format() on a moment.js duration?](https://stackoverflow.com/questions/13262621/how-do-i-use-format-on-a-moment-js-duration)

Is there any way I can use the moment.js format method on duration objects?  I can't find it anywhere in the docs and it doesn't seen to be an attribute on duration objects.I'd like to be able to do something like:Also, if there are any other libraries which can easily accomodate this sort of functionality, I'd be interested in reccomendations.Thanks!

2012-11-07 03:13:12Z

Is there any way I can use the moment.js format method on duration objects?  I can't find it anywhere in the docs and it doesn't seen to be an attribute on duration objects.I'd like to be able to do something like:Also, if there are any other libraries which can easily accomodate this sort of functionality, I'd be interested in reccomendations.Thanks!We are looking into adding some kind of formatting to durations in moment.js. See https://github.com/timrwood/moment/issues/463A couple other libraries that might help out are http://countdownjs.org/ and https://github.com/icambron/twix.jsHave a look at the JSFiddleconvert duration to ms and then to moment:Use this plugin Moment Duration Format.Example:Use this line of code:     The best scenario for my particular use case was:This improves upon @Wilson's answer since it does not access private internal property _data.You don't need .format. Use durations like this:I found this solution here: https://github.com/moment/moment/issues/463EDIT:And with padding for seconds, minutes and hours:I use:And I get "09:30" in var str.If you're willing to use a different javascript library, numeral.js can format seconds as follows (example is for 1000 seconds):if diff is a momentI use the classic format function in these cases:This is a hack because the time diff is treated as a standard moment date, an early epoch date time, but it doesn't matter to our goal and you don't need any pluginTo format moment duration to stringif you use angular add this to your filters:usage exampleIf all hours must be displayed (more than 24) and if '0' before hours is not necessary, then formatting can be done with a short line of code:Based on ni-ko-o-kin's answer:My solution that does not involve any other library and it works with diff > 24hHow about native javascript?Prints:You can use numeral.js to format your duration:Use moment-duration-format.This can be used to get the first two characters as hours and last two as minutes. Same logic may be applied to seconds.moment.duration(x).format() has been deprecated.

You can usemoment.utc(4366589).format("HH:mm:ss") to get the desired response.If you use Angular >2, I made a Pipe inspired by @hai-alaluf answer.This works for me:

How do I delay a function call for 5 seconds? [duplicate]

Webnet

[How do I delay a function call for 5 seconds? [duplicate]](https://stackoverflow.com/questions/4738595/how-do-i-delay-a-function-call-for-5-seconds)

I want widget.Rotator.rotate() to be delayed 5 seconds between calls... how do I do this in jQuery... it seems like jQuery's delay() wouldn't work for this...

2011-01-19 17:33:46Z

I want widget.Rotator.rotate() to be delayed 5 seconds between calls... how do I do this in jQuery... it seems like jQuery's delay() wouldn't work for this...You can use plain javascript, this will call your_func once, after 5 seconds:If your function has no parameters and no explicit receiver you can call directly setTimeout(func, 5000)There is also a plugin I've used once. It has oneTime and everyTime methods.Or:Or:

Convert RGB to RGBA over white

Mark Kahn

[Convert RGB to RGBA over white](https://stackoverflow.com/questions/6672374/convert-rgb-to-rgba-over-white)

I have a hex color, e.g. #F4F8FB (or rgb(244, 248, 251)) that I want converted into an as-transparent-as-possible rgba color (when displayed over white).  Make sense?  I'm looking for an algorithm, or at least idea of an algorithm for how to do so.For Example:Ideas?FYI solution based on Guffa's answer:

2011-07-12 23:20:57Z

I have a hex color, e.g. #F4F8FB (or rgb(244, 248, 251)) that I want converted into an as-transparent-as-possible rgba color (when displayed over white).  Make sense?  I'm looking for an algorithm, or at least idea of an algorithm for how to do so.For Example:Ideas?FYI solution based on Guffa's answer:Take the lowest color component, and convert that to an alpha value. Then scale the color components by subtracting the lowest, and dividing by the alpha value.Example:So, rgb(152, 177, 202) displays as rgba(0, 62, 123, .404).I have verified in Photoshop that the colors actually match perfectly.Let r, g, and b be the input values and r', g', b', and a' be the output values, all scaled (for now, as it makes the math prettier) between 1 and 0. Then, by the formula for overlaying colors:The 1 - a' terms represent the background contribution, and the other terms represent the foreground. Do some algebra:Intuitively, it seems that the minimum color value will be the limiting factor in the problem, so bind this to m:Set the corresponding output value, m', to zero, as we want to maximize transparency:So, in javascript (translating from 1 to 255 along the way):Note that I'm assuming that a' is opacity here. It is trivial to change it to transparency - just remove the "1 -" from the formula for a'. Anothing thing to note is that this does not seem to produce exact results - it said that the opacity was 0.498 for the example you gave above (128, 128, 255). However, this is extremely close.I'd look to RGB<->HSL conversion. I.e. luminosity == amount of white == amount of transparency. For your example rgb( 128, 128, 255 ), we need to shift RGB values to 0 first by maximum amount, i.e. to rgb( 0, 0, 128 ) - that would be our color with as few of white as possible. And after that, using formula for luminance, we calculate amount of white we need to add to our dark color to get original color - that would be our alpha:Hope that makes sense. :)For those of you using SASS/SCSS, I've wrote a small SCSS function so you can easily use the algorithm described by @GuffaI'm just describing an idea for the algorithm, no full solution:Basically, you have three numbers x, y, z and you are looking for three new numbers x', y', z' and a multiplier a in the range [0,1] such that:This is written in units where the channels also take values in the range [0,1]. In 8bit discrete values, it'd be something like this:Moreover, you want the largest possible value a. You can solve:Etc. In real values this has infinitely many solutions, just plug in any real number a, but the problem is to find a number for which the discretization error is minimal.This should do it:The top answer didn't work for me with low color components. For example it does not calculate correct alpha if color is #80000. Technically it should make it into #ff0000 with alpha 0.5. To resolve this, you need to use RGB -> HSL -> RGBA conversion. This is pseudo code to get the correct values:"newRgb" will contain the value of the new adjusted color and use "alpha" variable to control the transparency.

Is there a Sleep/Pause/Wait function in JavaScript? [duplicate]

Richard

[Is there a Sleep/Pause/Wait function in JavaScript? [duplicate]](https://stackoverflow.com/questions/7854820/is-there-a-sleep-pause-wait-function-in-javascript)

Is there a JavaScript function that simulates the operation of the sleep function in PHP — a function that pauses code execution for x milliseconds, and then resumes where it left off?I found some things here on Stack Overflow, but nothing useful.

2011-10-21 20:18:31Z

Is there a JavaScript function that simulates the operation of the sleep function in PHP — a function that pauses code execution for x milliseconds, and then resumes where it left off?I found some things here on Stack Overflow, but nothing useful.You need to re-factor the code into pieces. This doesn't stop execution, it just puts a delay in between the parts.You can't (and shouldn't) block processing with a sleep function. However, you can use setTimeout to kick off a function after a delay:Depending on your needs, setInterval might be useful, too.setTimeout() function it's use to delay a process in JavaScript.w3schools has an easy tutorial about this function.

Getting value of HTML Checkbox from onclick/onchange events

Maxim Gershkovich

[Getting value of HTML Checkbox from onclick/onchange events](https://stackoverflow.com/questions/4471401/getting-value-of-html-checkbox-from-onclick-onchange-events)

From within onClickHandler and/or onChangeHandler, how can I determine what is the new state of the checkbox?

2010-12-17 14:27:57Z

From within onClickHandler and/or onChangeHandler, how can I determine what is the new state of the checkbox?The short answer:Use the click event, which won't fire until after the value has been updated, and fires when you want it to:Live example | SourceThe longer answer:The change event handler isn't called until the checked state has been updated (live example | source), but because (as Tim Büthe points out in the comments) IE doesn't fire the change event until the checkbox loses focus, you don't get the notification proactively. Worse, with IE if you click a label for the checkbox (rather than the checkbox itself) to update it, you can get the impression that you're getting the old value (try it with IE here by clicking the label: live example | source). This is because if the checkbox has focus, clicking the label takes the focus away from it, firing the change event with the old value, and then the click happens setting the new value and setting focus back on the checkbox. Very confusing.But you can avoid all of that unpleasantness if you use click instead.I've used DOM0 handlers (onxyz attributes) because that's what you asked about, but for the record, I would generally recommend hooking up handlers in code (DOM2's addEventListener, or attachEvent in older versions of IE) rather than using onxyz attributes. That lets you attach multiple handlers to the same element and lets you avoid making all of your handlers global functions.An earlier version of this answer used this code for handleClick:The goal seemed to be to allow the click to complete before looking at the value. As far as I'm aware, there's no reason to do that, and I have no idea why I did. The value is changed before the click handler is called. In fact, the spec is quite clear about that. The version without setTimeout works perfectly well in every browser I've tried (even IE6). I can only assume I was thinking about some other platform where the change isn't done until after the event. In any case, no reason to do that with HTML checkboxes.For React.js, you can do this with more readable code. Hope it helps.Use this

Replace multiple strings with multiple other strings

Anderson Green

[Replace multiple strings with multiple other strings](https://stackoverflow.com/questions/15604140/replace-multiple-strings-with-multiple-other-strings)

I'm trying to replace multiple words in a string with multiple other words. The string is "I have a cat, a dog, and a goat."However, this does not produce "I have a dog, a goat, and a cat", but instead it produces "I have a cat, a cat, and a cat". Is it possible to replace multiple strings with multiple other strings at the same time in JavaScript, so that the correct result will be produced?

2013-03-24 21:19:55Z

I'm trying to replace multiple words in a string with multiple other words. The string is "I have a cat, a dog, and a goat."However, this does not produce "I have a dog, a goat, and a cat", but instead it produces "I have a cat, a cat, and a cat". Is it possible to replace multiple strings with multiple other strings at the same time in JavaScript, so that the correct result will be produced?You can use a function to replace each one.jsfiddle exampleIf you want to dynamically maintain the regex and just add future exchanges to the map, you can do thisto generate the regex.  So then it would look like thisAnd to add or change any more replacements you could just edit the map. fiddle with dynamic regexIf you want this to be a general pattern you could pull this out to a function like thisSo then you could just pass the str and a map of the replacements you want to the function and it would return the transformed string.fiddle with functionTo ensure Object.keys works in older browsers, add a polyfill eg from MDN or Es5.This may not meet your exact need in this instance, but I've found this a useful way to replace multiple parameters in strings, as a general solution. It will replace all instances of the parameters, no matter how many times they are referenced:You would invoke it as follows:Use numbered items to prevent replacing again.

egthenHow it works:-

%\d+ finds the numbers which come after a %. The brackets capture the number.This number (as a string) is the 2nd parameter, n, to the lambda function.The +n-1 converts the string to the number then 1 is subtracted to index the pets array.The %number is then replaced with the string at the array index.The /g causes the lambda function to be called repeatedly with each number which is then replaced with a string from the array.In modern JavaScript:-This worked for me:using Array.prototype.reduce():Example

Just in case someone is wondering why the original poster's solution is not working:user regular function to define the pattern to replace and then use replace function to work on input string,With my replace-once package, you could do the following:/* 

replaceSome method for strings

it takes as ,much arguments as we want and replaces all 

of them with the last argument we specified 

2013 CopyRights saved for: Max Ahmed

this is an example:*/jsFiddle: http://jsfiddle.net/CPj89/I wrote this npm package stringinject https://www.npmjs.com/package/stringinject which allows you to do the followingwhich will replace the {0} and {1} with the array items and return the following stringor you could replace placeholders with object keys and values like so:You can find and replace string using delimiters.You can use https://www.npmjs.com/package/union-replacer for this purpose. It is basically a string.replace(regexp, ...) counterpart, which allows multiple replaces to happen in one pass while preserving full power of string.replace(...).Disclosure: I am the author. The library was developed to support more complex user-configurable replacements and it addresses all the problematic things like capture groups, backreferences and callback function replacements.The solutions above are good enough for exact string replacements though.I expanded on @BenMcCormicks a bit. His worked for regular strings but not if I had escaped characters or wildcards. Here's what I didreturns "blah blah 234433 blah blah"This way it will match the key in the mapObj and not the matched word'Solution with Jquery (first include this file): Replace multiple strings with multiple other strings:

Textarea that can do syntax highlighting on the fly?

Pekka

[Textarea that can do syntax highlighting on the fly?](https://stackoverflow.com/questions/1619167/textarea-that-can-do-syntax-highlighting-on-the-fly)

I am storing a number of HTML blocks inside a CMS for reasons of easier maintenance. They are represented by <textarea>s.Does anybody know a JavaScript Widget of some sort that can do syntax highlighting for HTML within a textarea or similar, while still staying a plain text editor (no WYSIWYG or advanced functions)?

2009-10-24 21:20:17Z

I am storing a number of HTML blocks inside a CMS for reasons of easier maintenance. They are represented by <textarea>s.Does anybody know a JavaScript Widget of some sort that can do syntax highlighting for HTML within a textarea or similar, while still staying a plain text editor (no WYSIWYG or advanced functions)?It's not possible to achieve the required level of control over presentation in a regular textarea.If you're OK with that, try CodeMirror or Ace (formerly skywriter and bespin), or Monaco (used in MS VSCode).From the duplicate thread - an obligatory wikipedia link: http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editorsHere is the response I've done to a similar question (Online Code Editor) on programmers:First, you can take a look to this article:

Wikipedia ― Comparison of JavaScript-based source code editors.For more, here is some tools that seem to fit with your request:CodePress does this, as does EditArea. Both are open source.I would recommend EditArea for live editing of a syntax hightlighted textarea.Update: Bespin is now ACE, which is mentioned by the highest rated answer here. Use ACE instead.Gotta go with Bespin by Mozilla. It's built using HTML5 features (so it's quick and fast, but doesn't support legacy browsers though), but definitely amazing to use and beats everything I've come across - probably beacause it's Mozilla backing it, and they develop Firefox so yeah... There's also a jQuery Plugin which contains a extension for it to make it a bit easier to use with jQuery.You can Highlight text in a <textarea>, using a <div> carefully placed behind it.check out Highlight Text Inside a Textarea.The only editor I know of that has syntax highlighting and a fallback to a textarea is Mozilla Bespin. Google around for embedding Bespin to see how to embed the editor. The only site I know of that uses this right now is the very alpha Mozilla Jetpack Gallery (in the submit a Jetpack page) and you may want to see how they include it.There's also a blog post on embedding and reusing the Bespin editor that may help you.Why are you representing them as textareas? This is my favorite:http://alexgorbatchev.com/wiki/SyntaxHighlighterBut if you are using a CMS, there's probably a better plugin. For example, wordpress has an evolved version:http://www.viper007bond.com/wordpress-plugins/syntaxhighlighter/

How to find the array index with a value?

jdborg

[How to find the array index with a value?](https://stackoverflow.com/questions/7346827/how-to-find-the-array-index-with-a-value)

Say I've got thisWhich gives me[0]100 [1]200 etc.Is there any way in JavaScript to return the index with the value?I.e. I want the index for 200, I get returned 1.

2011-09-08 10:47:46Z

Say I've got thisWhich gives me[0]100 [1]200 etc.Is there any way in JavaScript to return the index with the value?I.e. I want the index for 200, I get returned 1.You can use indexOf:You will get -1 if it cannot find a value in the array.For objects array use map with indexOf:In modern browsers you can use findIndex:Its part of ES6 and supported by Chrome, FF, Safari and EdgeUse jQuery's function

jQuery.inArrayHere is an another way find value index in complex array in javascript. Hope help somebody indeed.

Let us assume we have a JavaScript array as following,Now if we have a requirement to select a particular object in the array. Let us assume that we want to find index of student with name Tanmay.We can do that by iterating through the array and comparing value at the given key.You can use the function to find index of a particular element as below,Use indexOfhow about indexOf ? Array.indexOf doesnt work in some versions of internet explorer - there are lots of alternative ways of doing it though ... see this question / answer : How do I check if an array includes an object in JavaScript?When the lists aren't extremely long, this is the best way I know:It is possible to use a ES6 function Array.prototype.findIndex.MDN says:Find an index by object property.To find an index by object property:For example, there is a such array:Then, code to find an index of necessary property looks like that:Please Note: Includes function is a simple instance method on the array and helps to easily find if an item is in the array(including NaN unlike indexOf)Here is my take on it, seems like most peoples solutions don't check if the item exists and it removes random values if it does not exist.First check if the element exists by looking for it's index.

If it does exist, remove it by its index using the splice methodReference array: Using filter and indexOf:Looping through each item in the array using indexOf:

How do I use Node.js Crypto to create a HMAC-SHA1 hash?

user847495

[How do I use Node.js Crypto to create a HMAC-SHA1 hash?](https://stackoverflow.com/questions/7480158/how-do-i-use-node-js-crypto-to-create-a-hmac-sha1-hash)

I want to create a hash of I love cupcakes (signed with the key abcdeg)How can I create that hash, using Node.js Crypto?

2011-09-20 04:29:52Z

I want to create a hash of I love cupcakes (signed with the key abcdeg)How can I create that hash, using Node.js Crypto?Documentation for crypto: http://nodejs.org/api/crypto.htmlA few years ago it was said that update() and digest() were legacy methods and the new streaming API approach was introduced. Now the docs say that either method can be used. For example:Tested on node v6.2.2 and v7.7.2See https://nodejs.org/api/crypto.html#crypto_class_hmac. Gives more examples for using the streaming approach.Gwerder's solution wont work because hash = hmac.read(); happens before the stream is done being finalized. Thus AngraX's issues. Also the hmac.write statement is un-necessary in this example.Instead do this:More formally, if you wish, the linecould be written because in this example text is a utf string

What is the cleanest way to disable CSS transition effects temporarily?

Sam Saffron

[What is the cleanest way to disable CSS transition effects temporarily?](https://stackoverflow.com/questions/11131875/what-is-the-cleanest-way-to-disable-css-transition-effects-temporarily)

I have a DOM element with some/all of the following effects applied: I am writing a jQuery plugin that is resizing this element, I need to disable these effects temporarily so I can resize it smoothly. What is the most elegant way of disabling these effects temporarily (and then re-enabling them), given they may be applied from parents or may not be applied at all.  

2012-06-21 05:16:02Z

I have a DOM element with some/all of the following effects applied: I am writing a jQuery plugin that is resizing this element, I need to disable these effects temporarily so I can resize it smoothly. What is the most elegant way of disabling these effects temporarily (and then re-enabling them), given they may be applied from parents or may not be applied at all.  Use this CSS:Plus either this JS (without jQuery)...Or this JS with jQuery...... or equivalent code using whatever other library or framework you're working with.This is actually a fairly subtle problem.First up, you probably want to create a 'notransition' class that you can apply to elements to set their *-transition CSS attributes to none. For instance:(Minor aside - note the lack of an -ms-transition in there. You don't need it. The first version of Internet Explorer to support transitions at all was IE 10, which supported them unprefixed.)But that's just style, and is the easy bit. When you come to try and use this class, you'll run into a trap. The trap is that code like this won't work the way you might naively expect:Naively, you might think that the change in height won't be animated, because it happens while the 'notransition' class is applied. In reality, though, it will be animated, at least in all modern browsers I've tried. The problem is that the browser is caching the styling changes that it needs to make until the JavaScript has finished executing, and then making all the changes in a single reflow. As a result, it does a reflow where there is no net change to whether or not transitions are enabled, but there is a net change to the height. Consequently, it animates the height change.You might think a reasonable and clean way to get around this would be to wrap the removal of the 'notransition' class in a 1ms timeout, like this:but this doesn't reliably work either. I wasn't able to make the above code break in WebKit browsers, but on Firefox (on both slow and fast machines) you'll sometimes (seemingly at random) get the same behaviour as using the naive approach. I guess the reason for this is that it's possible for the JavaScript execution to be slow enough that the timeout function is waiting to execute by the time the browser is idle and would otherwise be thinking about doing an opportunistic reflow, and if that scenario happens, Firefox executes the queued function before the reflow.The only solution I've found to the problem is to force a reflow of the element, flushing the CSS changes made to it, before removing the 'notransition' class. There are various ways to do this - see here for some. The closest thing there is to a 'standard' way of doing this is to read the offsetHeight property of the element.One solution that actually works, then, isHere's a JS fiddle that illustrates the three possible approaches I've described here (both the one successful approach and the two unsuccessful ones):

http://jsfiddle.net/2uVAA/131/Add an additional CSS class that blocks the transition, and then remove it to return to the previous state. This make both CSS and JQuery code short, simple and well understandable.CSS:!important was added to be sure that this rule will have more "weight", because ID is normally more specific than class.JQuery:I would advocate disabling animation as suggested by DaneSoul, but making the switch global:.notransition can be then applied to the body element, effectively overriding any transition animation on the page:For a pure JS solution (no CSS classes), just set the transition to 'none'. To restore the transition as specified in the CSS, set the transition to an empty string.If you're using vendor prefixes, you'll need to set those too.You can disable animation, transition, trasforms for all of element in page with this css codeI think you could create a separate css class that you can use in these cases:Then in jQuery you would toggle the class like so:If you want to remove CSS transitions, transformations and animations from the current webpage you can just execute this little script I wrote (inside your browsers console):It uses vanillaJS to load this css-file. Heres also a github repo in case you want to use this in the context of a scraper (Ruby-Selenium): remove-CSS-animations-repodoes in your js kill it?obviously repeat for each.I'd have a class in your CSS like this:and then in your jQuery:

Is there a sleep function in JavaScript? [duplicate]

user120324

[Is there a sleep function in JavaScript? [duplicate]](https://stackoverflow.com/questions/1141302/is-there-a-sleep-function-in-javascript)

Is there a sleep function in JavaScript?

2009-07-17 03:16:52Z

Is there a sleep function in JavaScript?You can use the setTimeout or setInterval functions.If you are looking to block the execution of code with call to sleep, then no, there is no method for that in JavaScript.JavaScript does have setTimeout method. setTimeout will let you defer execution of a function for x milliseconds.Remember, this is completely different from how sleep method, if it existed, would behave.If you run the above function, you will have to wait for 3 seconds (sleep method call is blocking) before you see the alert 'hi'. Unfortunately, there is no sleep function like that in JavaScript.If you run test2, you will see 'hi' right away (setTimeout is non blocking) and after 3 seconds you will see the alert 'hello'.A naive, CPU-intensive method to block execution for a number of milliseconds:This code blocks for the specified duration. This is CPU hogging code. This is different from a thread blocking itself and releasing CPU cycles to be utilized by another thread. No such thing is going on here. Do not use this code, it's a very bad idea.

Make a link use POST instead of GET

Elliot

[Make a link use POST instead of GET](https://stackoverflow.com/questions/3915917/make-a-link-use-post-instead-of-get)

I'm not sure if this is even possible. But I was wondering if anyone knows how to make a hyperlink pass some variables and use POST (like a form) as opposed to GET.

2010-10-12 14:52:19Z

I'm not sure if this is even possible. But I was wondering if anyone knows how to make a hyperlink pass some variables and use POST (like a form) as opposed to GET.You create a form with hidden inputs that hold the values to be posted, set the action of the form to the destination url, and the form method to post. Then, when your link is clicked, trigger a JS function that submits the form.See here, for an example. This example uses pure JavaScript, with no jQuery — you could choose this if you don't want to install anything more than you already have.You don't need JavaScript for this. Just wanted to make that clear, since as of the time this answer was posted, all of the answers to this question involve the use of JavaScript in some way or another.You can do this rather easily with pure HTML and CSS by creating a form with hidden fields containing the data you want to submit, then styling the submit button of the form to look like a link.For example:The exact CSS you use may vary depending on how regular links on your site are styled.You can use javascript functions. JQuery has a nice post function built in if you decide to use it: JQuery PostThis is an old question, but none of the answers satisfy the request in-full. So I'm adding another answer.The requested code, as I understand, should make only one change to the way normal hyperlinks work: the POST method should be used instead of GET. The immediate implications would be:I am using jquery here, but this could be done with native apis (harder and longer of course).And to see the result, save the following as reflector.php in the same directory you have the above saved.Another working example, using similar approach posted : create a html form, use javascript to simulate the post. This does 2 things : post data to a new page and open it in a new window/tab.HTMLJavaScriptThis is not possible using raw HTML, although you could use jQuery to add a click event handler to the link that could use the post function to issue the POST.HTML + JQuery: A link that submits a hidden form with POST.Since I spent a lot of time to understand all these answers, and since all of them have some interesting details, here is the combined version that finally worked for me and which I prefer for its simplicity.My approach is again to create a hidden  form and to submit it by clicking a link somewhere else in the page. It doesn't matter where in the body of the page the form will be placed.The code for the form:Description:The display: none hides the form. You can alternatively put it in a div or another element and set the display: none on the element.The type="hidden" will create an fild that will not be shown but its data will be transmitted to the action eitherways (see W3C). I understand that this is the simplest input type.The code for the link:Description:The empty href just targets the same page. But it doesn't really matter in this case since the return false will stop the browser from following the link. You may want to change this behavior of course. In my specific case, the action contained a redirection at the end.The onclick was used to avoid using href="javascript:..." as noted by mplungjan. The $('#myHiddenFormId').submit(); was used to submit the form (instead of defining a function, since the code is very small).This link will look exactly like any other <a> element. You can actually use any other element instead of the <a> (for example a <span> or an image).You can use this jQuery functionHere is an example in jsFiddle (http://jsfiddle.net/S7zUm/)As mentioned in many posts, this is not directly possible, but an easy and successful way is as follows:

First, we put a form in the body of our html page, which does not have any buttons for the submit, and also its inputs are hidden.

Then we use a javascript function to get the data and ,send the form. One of the advantages of this method is to redirect to other pages, which depends on the server-side code.

The code is as follows:

and now in anywhere you need an  to be in "POST" method:Check this it will help you I suggest a more dynamic approach, without html coding into the page, keep it strictly JS:

Cloning an Object in Node.js

slifty

[Cloning an Object in Node.js](https://stackoverflow.com/questions/5055746/cloning-an-object-in-node-js)

What is the best way to clone an object in node.jse.g. I want to avoid the situation where:The object may well contain complex types as attributes, so a simple for(var x in obj1) wouldn't solve.  Do I need to write a recursive clone myself or is there something built in that I'm not seeing?

2011-02-20 07:08:05Z

What is the best way to clone an object in node.jse.g. I want to avoid the situation where:The object may well contain complex types as attributes, so a simple for(var x in obj1) wouldn't solve.  Do I need to write a recursive clone myself or is there something built in that I'm not seeing?Low-frills deep copy:Attention: This solution is now marked as deprecated in the documentation of Node.js:Original answer::For a shallow copy, use Node's built-in util._extend() function.Source code of Node's _extend function is in here: https://github.com/joyent/node/blob/master/lib/util.jsI'm surprised Object.assign hasn't been mentioned.If available (e.g. Babel), you can use the object spread operator:This will define an extend method that you can use. Code comes from this article.You can use the extend function from JQuery:There is a Node.js Plugin too:https://github.com/shimondoodkin/nodejs-clone-extendTo do it without JQuery or Plugin read this here:http://my.opera.com/GreyWyvern/blog/show.dml/1725165Check out underscore.js. It has both clone and extend and many other very useful functions.This can be useful: Using the Underscore module with Node.jsThere are some Node modules out there if don't want to "roll your own". This one looks good: https://www.npmjs.com/package/cloneLooks like it handles all kinds of stuff, including circular references. From the github page:This code is also work cause The Object.create() method creates a new object with the specified prototype object and properties.Simple and the fastest way to clone an Object in NodeJS is to use Object.keys( obj ) methodThe method Object.keys requires JavaScript 1.8.5; nodeJS v0.4.11 supports this methodbut of course for nested objects need to implement recursive funcOther solution is to use native JSON (Implemented in JavaScript 1.7), but it's much slower (~10 times slower) than previous oneThere is also a project on Github that aims to be a more direct port of the jQuery.extend():https://github.com/dreamerslab/node.extendAn example, modified from the jQuery docs:There is another library lodash, it has clone and cloneDeep, also many other useful function. Looking for a true clone option, I stumbled across ridcully's link to here:http://my.opera.com/GreyWyvern/blog/show.dml/1725165I modified the solution on that page so that the function attached to the Object prototype is not enumerable.  Here is my result:Hopefully this helps someone else as well.  Note that there are some caveats... particularly with properties named "clone".  This works well for me.  I don't take any credit for writing it.  Again, I only changed how it was being defined.Y'all suffering yet the solution is simple.var obj2 = {...obj1}; // Boom You can also use SugarJS in NodeJS.http://sugarjs.com/They have a very clean clone feature:

http://sugarjs.com/api/Object/cloneIf you're using coffee-script, it's as easy as:Though this isn't a deep clone.None of the answers satisfied me, several don't work or are just shallow clones, answers from @clint-harris and using JSON.parse/stringify are good but quite slow. I found a module that does deep cloning fast: https://github.com/AlexeyKupershtokh/node-v8-cloneThere is no built-in way to do a real clone (deep copy) of an object in node.js. There are some tricky edge cases so you should definitely use a library for this. I wrote such a function for my simpleoo library. You can use the deepCopy function without using anything else from the library (which is quite small) if you don't need it. This function supports cloning multiple data types, including arrays, dates, and regular expressions, it supports recursive references, and it also works with objects whose constructor functions have required parameters.Here is the code:Fastest cloner, it open native clone method from node.jsAnother solution is to encapsulate directly in the new variable using: 

obj1= {...obj2}You can prototype object and then call object instance every time you want to use and change object:You can also pass arguments to object constructorHope this is helpful.

Equivalent of String.format in jQuery

Waleed Eissa

[Equivalent of String.format in jQuery](https://stackoverflow.com/questions/1038746/equivalent-of-string-format-in-jquery)

I'm trying to move some JavaScript code from MicrosoftAjax to JQuery. I use the JavaScript equivalents in MicrosoftAjax of the popular .net methods, e.g. String.format(), String.startsWith(), etc. Are there equivalents to them in jQuery?

2009-06-24 14:30:36Z

I'm trying to move some JavaScript code from MicrosoftAjax to JQuery. I use the JavaScript equivalents in MicrosoftAjax of the popular .net methods, e.g. String.format(), String.startsWith(), etc. Are there equivalents to them in jQuery?The source code for ASP.NET AJAX is available for your reference, so you can pick through it and include the parts you want to continue using into a separate JS file.  Or, you can port them to jQuery.Here is the format function...And here are the endsWith and startsWith prototype functions...This is a faster/simpler (and prototypical) variation of the function that Josh posted:Usage:I use this so much that I aliased it to just f, but you can also use the more verbose format. e.g. 'Hello {0}!'.format(name)Many of the above functions (except Julian Jelfs's) contain the following error:Or, for the variants that count backwards from the end of the argument list:Here's a correct function. It's a prototypal variant of Julian Jelfs's code, which I made a bit tighter:And here is a slightly more advanced version of the same, which allows you to escape braces by doubling them:This works correctly:Here is another good implementation by Blair Mitchelmore, with a bunch of nice extra features: https://web.archive.org/web/20120315214858/http://blairmitchelmore.com/javascript/string.formatMade a format function that takes either a collection or an array as argumentsUsage: Code:There is an (somewhat) official option: jQuery.validator.format.Comes with jQuery Validation Plugin 1.6 (at least).

Quite similar to the String.Format found in .NET.Edit Fixed broken link.If you're using the validation plugin you can use:jQuery.validator.format("{0} {1}", "cool", "formatting") = 'cool formatting'http://docs.jquery.com/Plugins/Validation/jQuery.validator.format#templateargumentargumentN...Though not exactly what the Q was asking for, I've built one that is similar but uses named placeholders instead of numbered. I personally prefer having named arguments and just send in an object as an argument to it (more verbose, but easier to maintain).Here's an example usage...None of the answers presented so far has no obvious optimization of using enclosure to initialize once and store regular expressions, for subsequent usages.Also, none of the examples respects format() implementation if one already exists.Using a modern browser, which supports EcmaScript 2015 (ES6), you can enjoy Template Strings. Instead of formatting, you can directly inject the variable value into it:Note the template string has to be written using back-ticks (`).Here's mine:Not bullet proof but works if you use it sensibly. Way past the late season but I've just been looking at the answers given and have my tuppence worth:Usage:Method:Result:Now you can use Template Literals:    Here's my version that is able to escape '{', and clean up those unassigned place holders.The following answer is probably the most efficient but has the caveat of only being suitable for 1 to 1 mappings of arguments. This uses the fastest way of concatenating strings (similar to a stringbuilder: array of strings, joined). This is my own code. Probably needs a better separator though.Use it like:This violates DRY principle, but it's a concise solution:I couldn't get Josh Stodola's answer to work, but the following worked for me. Note the specification of prototype. (Tested on IE, FF, Chrome, and Safari.):s really should be a clone of this so as not to be a destructive method, but it's not really necessary.Expanding on adamJLev's great answer above, here is the TypeScript version:I have a plunker that adds it to the string prototype:

string.format

It is not just as short as some of the other examples, but a lot more flexible.Usage is similar to c# version:Also, added support for using names & object propertiesYou can also closure array with replacements like this. or you can try bind

how to bypass Access-Control-Allow-Origin?

ETAN

[how to bypass Access-Control-Allow-Origin?](https://stackoverflow.com/questions/7564832/how-to-bypass-access-control-allow-origin)

I'm doing a ajax call to my own server on a platform which they set prevent these ajax calls (but I need it to fetch the data from my server to display retrieved data from my server's database).

My ajax script is working , it can send the data over to my server's php script to allow it to process.

However it cannot get the processed data back as it is blocked by "Access-Control-Allow-Origin"I have no access to that platform's source/core. so I can't remove the script that it disallowing me to do so.

(P/S I used Google Chrome's Console and found out this error)The Ajax code as shown below:or is there a JSON equivalent code to the ajax script above ?  I think JSON is allowed.I hope someone could help me out.

2011-09-27 06:03:12Z

I'm doing a ajax call to my own server on a platform which they set prevent these ajax calls (but I need it to fetch the data from my server to display retrieved data from my server's database).

My ajax script is working , it can send the data over to my server's php script to allow it to process.

However it cannot get the processed data back as it is blocked by "Access-Control-Allow-Origin"I have no access to that platform's source/core. so I can't remove the script that it disallowing me to do so.

(P/S I used Google Chrome's Console and found out this error)The Ajax code as shown below:or is there a JSON equivalent code to the ajax script above ?  I think JSON is allowed.I hope someone could help me out.Put this on top of retrieve.php:Note that this effectively disables CORS protection, and leaves your users exposed to attack. If you're not completely certain that you need to allow all origins, you should lock this down to a more specific origin:Okay, but you all know that the * is a wildcard and allows cross site scripting from every domain?You would like to send multiple Access-Control-Allow-Origin headers for every site that's allowed to - but unfortunately its officially not supported to send multiple Access-Control-Allow-Origin headers, or to put in multiple origins.You can solve this by checking the origin, and sending back that one in the header, if it is allowed:Thats much safer. You might want to edit the matching and change it to a manual function with some regex, or something like that. At least this will only send back 1 header, and you will be sure its the one that the request came from. Please do note that all HTTP headers can be spoofed, but this header is for the client's protection. Don't protect your own data with those values. If you want to know more, read up a bit on CORS and CSRF.Why is it safer?Allowing access from other locations then your own trusted site allows for session highjacking. I'm going to go with a little example - image Facebook allows a wildcard origin - this means that you can make your own website somewhere, and make it fire AJAX calls (or open iframes) to facebook. This means you can grab the logged in info of the facebook of a visitor of your website. Even worse - you can script POST requests and post data on someone's facebook - just while they are browsing your website.Be very cautious when using the ACAO headers!Warning, Chrome (and other browsers) will complain that multiple ACAO headers are set if you follow some of the other answers.The error will be something like XMLHttpRequest cannot load ____. The 'Access-Control-Allow-Origin' header contains multiple values '____, ____, ____', but only one is allowed. Origin '____' is therefore not allowed access.Try this:I have fixed this problem when calling a MVC3 Controller.

I added:before myAnd also my $.ajax was complaining that it does not accept Content-type header in my ajax call, so I commented it out as I know its JSON being passed to the Action.Hope that helps.Have you tried actually adding the Access-Control-Allow-Origin header to the response sent from your server? Like, Access-Control-Allow-Origin: *?It's a really bad idea to use *, which leaves you wide open to cross site scripting. You basically want your own domain all of the time, scoped to your current SSL settings, and optionally additional domains. You also want them all to be sent as one header. The following will always authorize your own domain in the same SSL scope as the current page, and can optionally also include any number of additional domains. It will send them all as one header, and overwrite the previous one(s) if something else already sent them to avoid any chance of the browser grumbling about multiple access control headers being sent.Usage:You get the idea.

Disable dragging an image from an HTML page

User 1034

[Disable dragging an image from an HTML page](https://stackoverflow.com/questions/4211909/disable-dragging-an-image-from-an-html-page)

I need to put an image in my page. I want to disable dragging of that image. I am trying lot of things but no help. Can somebody help me out ?I don't want to keep that image as a background-image because I am resizing the image.

2010-11-18 05:17:22Z

I need to put an image in my page. I want to disable dragging of that image. I am trying lot of things but no help. Can somebody help me out ?I don't want to keep that image as a background-image because I am resizing the image.You can like this...See it working (or not working, rather)It seems you are using jQuery.CSS only solution: use pointer-events: nonehttps://developer.mozilla.org/en-US/docs/CSS/pointer-eventsjust add draggable="false" to your image tag:IE8 and under doesn't support however.simplest cross browser solution is problem withis that it is not working in firefoxI tried myself and found this is working.I am sure this disables dragging of all the images. Not sure it effects something else. I used it on my website at http://www.namdevmatrimony.in/

It's works like a magic!!! :)See this answer; in Chrome and Safari you can use the following style to disable the default dragging:You could try user-select for Firefox and IE(10+):You can add the following to each image you don't want to be draggable, (inside the img tag):e.g. This code does exactly what you want. It prevents the image from dragging while allowing any other actions that depend on the event.Directly use this: ondragstart="return false;" in your image tag. If you have multiple images, wrapped on a <div> tag:Works in all major browsers.Since my images were created using ajax, and therefore not available on windows.load.$("#page").delegate('img', 'dragstart', function (event) { event.preventDefault(); });This way I can control which section blocks the behavior, it only uses one event binding and it works for future ajax created images without having to do anything.With jQuery new on binding:$('#page').on('dragstart', 'img', function(event) { event.preventDefault(); });

(thanks @ialphan)Great solution, had one small issue with conflicts,

If anyone else has conflict from other js library simply enable no conflict like so.Hope this helps someone out.Well I don't know if the answers in here have helped everyone or not, but here's a simple inline CSS trick which would definitely help you to disable dragging and selecting texts on a HTML page.On your <body> tag add ondragstart="return false". This will disable dragging of images. But if you also want to disable text selection then add onselectstart="return false".The code will look like this: <body ondragstart="return false" onselectstart="return false">You may consider my solution the best. Most of answers are not compatible with old browsers like IE8 since e.preventDefault() wont be supported as well as ondragstart event. To do it cross browser compatible you have to block mousemove event for this image. See example below:jQuerywithout jQuerytested and worked even for IE8Set the following CSS properties to the image:Well, this is possible, and the other answers posted are perfectly valid, but you could take a brute force approach and prevent the default behavior of mousedown on images. Which, is to start dragging the image. Something like this:Works in this Plunker http://plnkr.co/edit/HbAbJkF0PVLIMjTmEZmlAnswer is simple:<body oncontextmenu="return false"/> - disable right-click

   <body ondragstart="return false"/> - disable mouse dragging

   <body ondrop="return false"/> - disable mouse dropjQuery:You can replace the body selector with any other container that children you want to prevent from being dragged and dropped. I did the css properties shown here as well as monitor ondragstart with the following javascript:You can use inline code for thisAnd the second option is use external or on-page css Both are Working Correctly 

I m using external css on this site (Click Here)Stealing from my own answer,  just add a completely transparent element of the same size over the image.  When you resize your image, be sure to resize the element.This should work for most browsers, even older ones.

Why is it that parseInt(8,3) == NaN and parseInt(16,3) == 1?

Devid Farinelli

[Why is it that parseInt(8,3) == NaN and parseInt(16,3) == 1?](https://stackoverflow.com/questions/39147108/why-is-it-that-parseint8-3-nan-and-parseint16-3-1)

I'm reading this but I'm confused by what is written in the parseInt with a radix argument chapterWhy is it that parseInt(8, 3) → NaN and parseInt(16, 3) → 1?AFAIK 8 and 16 are not base-3 numbers, so parseInt(16, 3) should return NaN too

2016-08-25 13:47:30Z

I'm reading this but I'm confused by what is written in the parseInt with a radix argument chapterWhy is it that parseInt(8, 3) → NaN and parseInt(16, 3) → 1?AFAIK 8 and 16 are not base-3 numbers, so parseInt(16, 3) should return NaN tooThis is something people trip over all the time, even when they know about it. :-) You're seeing this for the same reason parseInt("1abc") returns 1: parseInt stops at the first invalid character and returns whatever it has at that point. If there are no valid characters to parse, it returns NaN.parseInt(8, 3) means "parse "8" in base 3" (note that it converts the number 8 to a string; details in the spec). But in base 3, the single-digit numbers are just 0, 1, and 2. It's like asking it to parse "9" in octal. Since there were no valid characters, you got NaN.parseInt(16, 3) is asking it to parse "16" in base 3. Since it can parse the 1, it does, and then it stops at the 6 because it can't parse it. So it returns 1.Since this question is getting a lot of attention and might rank highly in search results, here's a rundown of options for converting strings to numbers in JavaScript, with their various idiosyncracies and applications (lifted from another answer of mine here on SO):For the same reason thatIn the doc, parseInt takes a string. AndSo 16, 8, or '1foobar' is first converted to string.ThenMeaning it converts up to where it can. The 6, 8, and foobar are ignored, and only what is before is converted. If there is nothing, NaN is returned.

Access properties of the parent with a Handlebars 'each' loop

Drew Noakes

[Access properties of the parent with a Handlebars 'each' loop](https://stackoverflow.com/questions/12297959/access-properties-of-the-parent-with-a-handlebars-each-loop)

Consider the following simplified data:And a Handlebars template:This won't work because within the each loop, the parent scope is not accessible -- at least not in any way that I've tried. I'm hoping that there's a way of doing this though!

2012-09-06 10:24:24Z

Consider the following simplified data:And a Handlebars template:This won't work because within the each loop, the parent scope is not accessible -- at least not in any way that I've tried. I'm hoping that there's a way of doing this though!There are two valid ways to achieve this.By prepending ../ to the property name, you can reference the parent scope.You can go up multiple levels via repeating the ../. For example, to go up two levels use ../../key.For more information, see the Handlebars documentation on paths.By prepending @root to the property path, you can navigate downwards from the topmost scope (as shown in caballerog's answer).For more information, see the Handlebars documentation on @data variables.The new method is using dot notation, the slash notation is deprecated (http://handlebarsjs.com/expressions.html).So, the actual method to access to the parents elements are the following:In your specific example, you would use:Another method from the official documentation(http://handlebarsjs.com/builtin_helpers.html) is using alias 

How to find keys of a hash?

Pat

[How to find keys of a hash?](https://stackoverflow.com/questions/18912/how-to-find-keys-of-a-hash)

I know in javascript Objects double as hashes but i have been unable to find a built in function to get the keys I want something like It is simple to write a function myself to iterate over the items and add the keys to an array that I return, but is there a standard cleaner way to do that?I keep feeling it must be a simple built in function that I missed but I can't find it!

2008-08-20 21:35:59Z

I know in javascript Objects double as hashes but i have been unable to find a built in function to get the keys I want something like It is simple to write a function myself to iterate over the items and add the keys to an array that I return, but is there a standard cleaner way to do that?I keep feeling it must be a simple built in function that I missed but I can't find it!There is function in modern JavaScript (ECMAScript 5) called Object.keys performing this operation:Compatibility details can be found here. On the Mozilla site there is also a snippet for backward compatibility:For production code requiring a large compatibility with client browsers I still suggest Ivan Nevostruev's answer above with shim to ensure Object.keys in older browsers. However, it's possible to get the exact functionality requested using ECMA's new defineProperty feature.As of ECMAScript 5 - Object.definePropertyAs of ECMA5 you can use Object.defineProperty() to define non-enumerable properties. The current compatibility still has much to be desired, but this should eventually become usable in all browsers. (Specifically note the current incompatibility with IE8!)However, since ECMA5 already added Object.keys you might as well use:Original answerEdit: Since this answer has been around for a while I'll leave the above untouched. Anyone reading this should also read Ivan Nevostruev's answer below.There's no way of making prototype functions non-enumerable which leads to them always turning up in for-in loops that don't use hasOwnProperty. I still think this answer would be ideal if extending the prototype of Object wasn't so messy.you can use Object.keysYou could use Underscore.js, which is a Javascript utility library.This is the best you can do, as far as I know...using jQuery you can get the keys like this:Or:thanks to @pimlottc I believe you can loop through the properties of the object using for/in, so you could do something like this:I wanted to use the top rated answer aboveHowever when using in conjunction with the google maps API v3, google maps is non-functional.works well.if you are trying to get the elements only but not the functions then this code can help you}this is part of my implementation of the HashMap and I only want the keys, this is the hashmap object that contains the keys

How to create a jQuery plugin with methods?

Yuval Karmi

[How to create a jQuery plugin with methods?](https://stackoverflow.com/questions/1117086/how-to-create-a-jquery-plugin-with-methods)

I'm trying to write a jQuery plugin that will provide additional functions/methods to the object that calls it. All the tutorials I read online (have been browsing for the past 2 hours) include, at the most, how to add options, but not additional functions.Here's what I am looking to do://format div to be a message container by calling the plugin for that divor something along those lines.

Here's what it boils down to: I call the plugin, then I call a function associated with that plugin. I can't seem to find a way to do this, and I've seen many plugins do it before.Here's what I have so far for the plugin:How can I achieve something like that?Thank you!Update Nov 18, 2013: I've changed the correct answer to that of Hari's following comments and upvotes.

2009-07-12 22:22:49Z

I'm trying to write a jQuery plugin that will provide additional functions/methods to the object that calls it. All the tutorials I read online (have been browsing for the past 2 hours) include, at the most, how to add options, but not additional functions.Here's what I am looking to do://format div to be a message container by calling the plugin for that divor something along those lines.

Here's what it boils down to: I call the plugin, then I call a function associated with that plugin. I can't seem to find a way to do this, and I've seen many plugins do it before.Here's what I have so far for the plugin:How can I achieve something like that?Thank you!Update Nov 18, 2013: I've changed the correct answer to that of Hari's following comments and upvotes.According to the jQuery Plugin Authoring page (http://docs.jquery.com/Plugins/Authoring), it's best not to muddy up the jQuery and jQuery.fn namespaces. They suggest this method:Basically you store your functions in an array (scoped to the wrapping function) and check for an entry if the parameter passed is a string, reverting to a default method ("init" here) if the parameter is an object (or null).Then you can call the methods like so...Javascripts "arguments" variable is an array of all the arguments passed so it works with arbitrary lengths of function parameters.Here's the pattern I have used for creating plugins with additional methods.  You would use it like:or, to invoke a method directly,Example:What about this approach:The selected objects are stored in the messagePlugin closure, and that function returns an object that contains the functions associated with the plugin, the in each function you can perform the desired actions to the currently selected objects.You can test and play with the code here.Edit: Updated code to preserve the power of the jQuery chainability.The problem with the currently selected answer is that you're not actually creating a new instance of the custom plugin for every element in the selector like you think you're doing... you're actually only creating a single instance and passing in the selector itself as the scope.View this fiddle for a deeper explanation.Instead, you'll need to loop through the selector using jQuery.each and instantiate a new instance of the custom plugin for every element in the selector.Here's how:And a working fiddle.You'll notice how in the first fiddle, all divs are always moved to the right the exact same number of pixels. That is because only one options object exists for all elements in the selector.Using the technique written above, you'll notice that in the second fiddle, each div is not aligned and is randomly moved (excluding the first div as it's randomizer is always set to 1 on line 89). That is because we are now properly instantiating a new custom plugin instance for every element in the selector. Every element has its own options object and is not saved in the selector, but in the instance of the custom plugin itself.This means that you'll be able to access the methods of the custom plugin instantiated on a specific element in the DOM from new jQuery selectors and aren't forced to cache them, as you would be in the first fiddle.For example, this would return an array of all options objects using the technique in the second fiddle. It would return undefined in the first.This is how you would have to access the options object in the first fiddle, and would only return a single object, not an array of them:I'd suggest using the technique above, not the one from the currently selected answer.jQuery has made this a lot easier with the introduction of the Widget Factory.Example:Initialization:Method calling:(This is how the jQuery UI library is built.)A simpler approach is to use nested functions. Then you can chain them in an object-oriented fashion. Example:And here's how to call it:Be careful though. You cannot call a nested function until it has been created. So you cannot do this:The DoEvenMore function doesn't even exist because the DoSomething function hasn't been run yet which is required to create the DoEvenMore function. For most jQuery plugins, you really are only going to have one level of nested functions and not two as I've shown here.

Just make sure that when you create nested functions that you define these functions at the beginning of their parent function before any other code in the parent function gets executed.Finally, note that the "this" member is stored in a variable called "_this". For nested functions, you should return "_this" if you need a reference to the instance in the calling client. You cannot just return "this" in the nested function because that will return a reference to the function and not the jQuery instance. Returning a jQuery reference allows you to chain intrinsic jQuery methods on return.I got it from jQuery Plugin BoilerplateAlso described in jQuery Plugin Boilerplate, repriseToo late but maybe it can help someone one day.I was in the same situation like, creating a jQuery plugin with some methods, and after reading some articles and some tires I create a jQuery plugin boilerplate (https://github.com/acanimal/jQuery-Plugin-Boilerplate).In addition, I develop with it a plugin to manage tags (https://github.com/acanimal/tagger.js) and wrote a two blog posts explaining step by step the creation of a jQuery plugin (http://acuriousanimal.com/blog/2013/01/15/things-i-learned-creating-a-jquery-plugin-part-i/).You can do:In this way your plugins object is stored as data value  in your element.What about using triggers? Does anyone know any drawback using them?

The benefit is that all internal variables are accessible via the triggers, and the code is very simple.See on jsfiddle.Here I want to suggest steps to create simple plugin with arguments.Here, we have added default object called params and set default values of options using extend function. Hence, If we pass blank argument then it will set default values instead otherwise it will set.Read more: How to Create JQuery pluginTry this one:Here is my bare-bones version of this. Similar to the ones posted before, you would call like:-or access the instance directly @ plugin_MessagePluginMessagePlugin.jsThe following plugin-structure utilizes the jQuery-data()-method to provide a public interface to internal plugin-methods/-settings (while preserving jQuery-chainability):   Now you can call internal plugin-methods to access or modify plugin data or the relevant element using this syntax:As long as you return the current element (this) from inside your implementation of myPublicPluginMethod() jQuery-chainability 

will be preserved - so the following works:  Here are some examples (for details checkout this fiddle):This can actually be made to work in a "nice" way using defineProperty. Where "nice" means without having to use () to get plugin namespace nor having to pass function name by string.Compatibility nit: defineProperty doesn't work in ancient browsers such as IE8 and below.

Caveat: $.fn.color.blue.apply(foo, args) won't work, you need to use foo.color.blue.apply(foo, args).JSFiddle linkAccording to jquery standard you can create plugin as follow:How to call this plugin?Reference: linkI think this might help you...In the above example i had created a simple jquery highlight plugin.I had shared an article in which i had discussed about How to Create Your Own jQuery Plugin from Basic to Advance.

I think you should check it out... http://mycodingtricks.com/jquery/how-to-create-your-own-jquery-plugin/Following is a small plug-in to have warning method for debugging purpose. Keep this code in jquery.debug.js file:

JS:HTML:Here is how I do it: What you did is basically extending jQuery.fn.messagePlugin object by new method. Which is useful but not in your case.You have to do is using this techniqueBut you can accomplish what you want I mean there is a way to do $("#mydiv").messagePlugin().saySomething("hello"); My friend he started writing about lugins and how to extend them with your chainf of functionalities here is the link to his blog

Replace multiple whitespaces with single whitespace in JavaScript string

eve 

[Replace multiple whitespaces with single whitespace in JavaScript string](https://stackoverflow.com/questions/6163169/replace-multiple-whitespaces-with-single-whitespace-in-javascript-string)

I have strings with extra whitespaces, each time there's more than only one whitespace I'd like it be only one.Anyone?

I tried searching google, but nothing worked for me.Thanks

2011-05-28 17:16:57Z

I have strings with extra whitespaces, each time there's more than only one whitespace I'd like it be only one.Anyone?

I tried searching google, but nothing worked for me.ThanksSomething like this:You can augment String to implement these behaviors as methods, as in:This now enables you to use the following elegant forms to produce the strings you want:using a regular expression with the replace function does the trick:It splits the string by whitespaces, remove them all empty array items from the array (the ones which were more than a single space), and joins all the words again into a string, with a single whitespace in between them.I presume you're looking to strip spaces from the beginning and/or end of the string (rather than removing all spaces?If that's the case, you'll need a regex like this:This will remove all spaces from the beginning or end of the string. If you only want to trim spaces from the end, then the regex would look like this instead:Hope that helps.jQuery.trim() works well. http://api.jquery.com/jQuery.trim/I know I should not necromancy on a subject, but given the details of the question, I usually expand it to mean:For this, I use code like this (the parenthesis on the first regexp are there just in order to make the code a bit more readable ... regexps can be a pain unless you are familiar with them):The reason this works is that the methods on String-object return a string object on which you can invoke another method (just like jQuery & some other libraries). Much more compact way to code if you want to execute multiple methods on a single object in succession.var x = " Test   Test Test ".split(" ").join("");

alert(x);Try this.the result will beWhat happened here is that it will trim the outside spaces first using trim() then trim the inside spaces using .replace(/\s+/g, ' ').If you want to restrict user to give blank space in the name just create a if statement and  give the condition. like I did:How about this one?"my    test  string \t\t with crazy stuff      is cool ".replace(/\s{2,9999}|\t/g, ' ')outputs "my test string with crazy stuff is cool "This one gets rid of any tabs as well

Explanation of [].slice.call in javascript?

Yansky

[Explanation of [].slice.call in javascript?](https://stackoverflow.com/questions/2125714/explanation-of-slice-call-in-javascript)

I stumbled onto this neat shortcut for converting a DOM NodeList into a regular array, but I must admit, I don't completely understand how it works:So it starts with an empty array [], then slice is used to convert the result of call to a new array yeah?The bit I don't understand is the call. How does that convert document.querySelectorAll('a') from a NodeList to a regular array?

2010-01-24 02:48:55Z

I stumbled onto this neat shortcut for converting a DOM NodeList into a regular array, but I must admit, I don't completely understand how it works:So it starts with an empty array [], then slice is used to convert the result of call to a new array yeah?The bit I don't understand is the call. How does that convert document.querySelectorAll('a') from a NodeList to a regular array?What's happening here is that you call slice() as if it was a function of NodeList using call(). What slice() does in this case is create an empty array, then iterate through the object it's running on (originally an array, now a NodeList) and keep appending the elements of that object to the empty array it created, which is eventually returned. Here's an article on this.EDIT:That's not right. [].slice returns a function object. A function object has a function call() which calls the function assigning the first parameter of the call() to this; in other words, making the function think that it's being called from the parameter (the NodeList returned by document.querySelectorAll('a')) rather than from an array.In javascript, methods of an object can be bound to another object at runtime. In short, javascript allows an object to "borrow" the method of another object:The call and apply methods of function objects (in javascript functions are objects as well) allows you to do this. So in your code you could say that the Nodelist is borrowing an array's slice method. What does the conversion is the fact that slice returns another array as it's result.It retrieves the slice function from an Array. It then calls that function, but using the result of document.querySelectorAll as the this object instead of an actual array.It is a technique to convert array-like objects to real arrays.Some of these objects include:This serves many purposes, for example objects are passed by reference whereas arrays are passed by value.Also, note the first argument 0 can be omited, thorough explanation here.And for the sake of completeness, there is also jQuery.makeArray().This is the code that we have,Lets dismantle it first,Step: 1 Execution of call functionStep: 2 Execution of slice function invoked inside of callP.S For better understanding of our scenario some steps that are necessary for our context has been ignored from the original algorithm of call and slice.From ES6: Simply make array with Array.from(element.children) or Array.from({length: 5})

CSS3 transition events

Andreas Köberle

[CSS3 transition events](https://stackoverflow.com/questions/2794148/css3-transition-events)

Are there any events fired by an element to check wether a css3 transition has started or end?

2010-05-08 13:02:44Z

Are there any events fired by an element to check wether a css3 transition has started or end?Stack Overflow: How do I normalize CSS3 Transition functions across browsers?Update All modern browsers now support the unprefixed event:element.addEventListener('transitionend', callback, false);https://caniuse.com/#feat=css-transitionsI was using the approach given by Pete, however I have now started using the following Alternatively if you use bootstrap then you can simply do This is becuase they include the following in bootstrap.js Note they also include an emulateTransitionEnd function which may be needed to ensure a callback always occurs.http://blog.alexmaccaw.com/css-transitionsAll modern browsers now support the unprefixed event:element.addEventListener('transitionend', callback, false);Works in the latest versions of Chrome, Firefox and Safari. Even IE10+.In Opera 12 when you bind using the plain JavaScript, 'oTransitionEnd' will work:however if you bind through jQuery, you need to use 'otransitionend'In case you are using Modernizr or bootstrap-transition.js you can simply do a change:You can find some info here as well http://www.ianlunn.co.uk/blog/articles/opera-12-otransitionend-bugs-and-workarounds/Just for fun, don't do this!If you simply want to detect only a single transition end, without using any JS framework here's a little convenient utility function:Usage:then if you wish to cancel at some point you can still do it withIt's good for other event usages as well :)

Check if a string is a date value

Thizzer

[Check if a string is a date value](https://stackoverflow.com/questions/7445328/check-if-a-string-is-a-date-value)

What is an easy way to check if a value is a valid date, any known date format allowed. For example I have the values 10-11-2009, 10/11/2009, 2009-11-10T07:00:00+0000 which should all be recognized as date values, and the values 200, 10, 350, which should not be recognized as a date value. What is the simplest way to check this, if this is even possible? Because timestamps would also be allowed.

2011-09-16 13:23:22Z

What is an easy way to check if a value is a valid date, any known date format allowed. For example I have the values 10-11-2009, 10/11/2009, 2009-11-10T07:00:00+0000 which should all be recognized as date values, and the values 200, 10, 350, which should not be recognized as a date value. What is the simplest way to check this, if this is even possible? Because timestamps would also be allowed.Would Date.parse() suffice?See its relative MDN Documentation page.It is an old question but other new questions like:get closed as duplicates of this one, so I think it's important to add some fresh info here. I'm writing it because I got scared thinking that people actually copy and paste some of the code posted here and use it in production.Most of the answers here either use some complex regular expressions that match only some very specific formats and actually do it incorrectly (like matching January 32nd while not matching actual ISO date as advertised - see demo) or they try to pass anything to the Date constructor and wish for the best.As I explained in this answer there is currently a library available for that:

Moment.jsIt is a library to parse, validate, manipulate, and display dates in JavaScript, that has a much richer API than the standard JavaScript date handling functions.It is 12kB minified/gzipped and works in Node.js and other places:Using Moment you can be very specific about checking valid dates. Sometimes it is very important to add some clues about the format that you expect. For example, a date such as 06/22/2015 looks like a valid date, unless you use a format DD/MM/YYYY in which case this date should be rejected as invalid. There are few ways how you can tell Moment what format you expect, for example:The true argument is there so the Moment won't try to parse the input if it doesn't exactly conform to one of the formats provided (it should be a default behavior in my opinion).You can use an internally provided format:And you can use multiple formats as an array:See: DEMO.If you don't want to use Moment.js, there are also other libraries:I created the immoment module that is like (a subset of) Moment but without surprises caused by mutation of existing objects (see the docs for more info).Today I recommend using Luxon for date/time manipulation instead of Moment, which (unlike Moment) makes all object immutable so there are no nasty surprises related to implicit mutation of dates.See also:A series of articles by Rob Gravelle on JavaScript date parsing libraries:Of course anyone can try to reinvent the wheel, write a regular expression (but please actually read ISO 8601 and RFC 3339 before you do it) or call buit-in constructors with random data to parse error messages like 'Invalid Date' (Are you sure this message is exactly the same on all platforms? In all locales? In the future?) or you can use a tested solution and use your time to improve it, not reinvent it. All of the libraries listed here are open source, free software.This is how I solved this problem in an app I'm working on right now:updated based on feedback from krillgar:or.......new Date(date) === 'Invalid Date' only works in Firefox and Chrome. IE8 (the one I have on my machine for testing purposes) gives NaN.As was stated to the accepted answer, Date.parse(date) will also work for numbers. So to get around that, you could also check that it is not a number (if that's something you want to confirm).None of the answers here address checking whether the date is invalid such as February 31. This function addresses that by checking if the returned month is equivalent to the original month and making sure a valid year was presented.How about something like this? It will test if it is a Date object or a date string:I should mention that this doesn't test for ISO formatted strings but with a little more work to the RegExp you should be good.By referring to all of the above comments, I have come to a solution.This works if the Date passed is in ISO format or need to manipulate for other formats. You can play here on JSFiddle.Use Regular expression to validate it. I would do thisPlay here Here's a minimalist version.A bit improved function that uses only Date.parse():Note: Date.parse() will parse numbers: for example Date.parse(1) will return a date. So here we check if s is not a number the, if it is a date.After trying all the answers listed above I ended up with the following:Note that new Date(date) !== "Invalid Date" is always true. Hope this helps.This callable function works perfectly, returns true for valid date.

Be sure to call using a date on ISO format (yyyy-mm-dd or yyyy/mm/dd):I know it's an old question but I faced the same problem and saw that none of the answers worked properly - specifically weeding out numbers (1,200,345,etc..) from dates, which is the original question. Here is a rather unorthodox method I could think of and it seems to work. Please point out if there are cases where it will fail.This is the line to weed out numbers. Thus, the entire function could look like:is it fine to check for a Date related function is available for the object to find whether it is a Date object or not ?like This is how I end up doing it. This will not cover all formats.

You have to adjust accordingly. I have control on the format, so it works for meOk, this is an old question, but I found another solution while checking the solutions here. For me works to check if the function getTime() is present at the date object:By default this is set to TRUE. So even strings of wrong format return good values.I have used it something like this :Try this:

How can I get Knockout JS to data-bind on keypress instead of lost-focus?

Edward Tanguay

[How can I get Knockout JS to data-bind on keypress instead of lost-focus?](https://stackoverflow.com/questions/4386311/how-can-i-get-knockout-js-to-data-bind-on-keypress-instead-of-lost-focus)

This example of knockout js works so when you edit a field and press TAB, the viewmodel data  and hence the text below the fields is updated.How can I change this code so that the viewmodel data is updated every keypress?

2010-12-08 10:14:47Z

This example of knockout js works so when you edit a field and press TAB, the viewmodel data  and hence the text below the fields is updated.How can I change this code so that the viewmodel data is updated every keypress?From the documentationIn version 3.2 you can simply use textinput binding.:It does two important things:So no need for additional modules, custom controls and other things.If you want it to do updates on afterkeydown "by default," you could inject the valueUpdate binding in the value binding handler.  Just supply a new allBindingsAccessor for the handler to use that includes afterkeydown.If you're not comfortable "overriding" the value binding, you could give the overriding custom binding a different name and use that binding handler.demoA solution like this would be suitable for Knockout version 2.x.  The Knockout team has fleshed out a more complete binding for text-like inputs through the textInput binding in Knockout version 3 and up.  It was designed to handle all text input methods for text inputs and textarea.  It will even handle real time updating which effectively renders this approach obsolete.Jeff Mercado's answer is fantastic, but unfortunately broken with Knockout 3.But I found the answer suggested by the ko devs while working through Knockout 3 changes. See the bottom comments at https://github.com/knockout/knockout/pull/932. Their code:http://jsfiddle.net/mbest/GKJnt/Edit 

Ko 3.2.0 now has a more complete solution with the new "textInput" binding. See SalvidorDali's answer

What is DOM Event delegation?

Xenon

[What is DOM Event delegation?](https://stackoverflow.com/questions/1687296/what-is-dom-event-delegation)

Can anyone please explain event delegation in JavaScript and how is it useful?

2009-11-06 12:33:49Z

Can anyone please explain event delegation in JavaScript and how is it useful?DOM event delegation is a mechanism of responding to ui-events via a single common parent rather than each child, through the magic of event "bubbling" (aka event propagation).When an event is triggered on an element, the following occurs:Event bubbling provides the foundation for event delegation in browsers. Now you can bind an event handler to a single parent element, and that handler will get executed whenever the event occurs on any of its child nodes (and any of their children in turn). This is event delegation. Here's an example of it in practice:With that example if you were to click on any of the child <li> nodes, you would see an alert of "click!", even though there is no click handler bound to the <li> you clicked on. If we bound onclick="..." to each <li> you would get the same effect.So what's the benefit?Imagine you now have a need to dynamically add new <li> items to the above list via DOM manipulation:Without using event delegation you would have to "rebind" the "onclick" event handler to the new <li> element, in order for it to act the same way as its siblings. With event delegation you don't need to do anything. Just add the new <li> to the list and you're done.This is absolutely fantastic for web apps with event handlers bound to many elements, where new elements are dynamically created and/or removed in the DOM. With event delegation the number of event bindings can be drastically decreased by moving them to a common parent element, and code that dynamically creates new elements on the fly can be decoupled from the logic of binding their event handlers.Another benefit to event delegation is that the total memory footprint used by event listeners goes down (since the number of event bindings go down). It may not make much of a difference to small pages that unload often (i.e. user's navigate to different pages often). But for long-lived applications it can be significant. There are some really difficult-to-track-down situations when elements removed from the DOM still claim memory (i.e. they leak), and often this leaked memory is tied to an event binding. With event delegation you're free to destroy child elements without risk of forgetting to "unbind" their event listeners (since the listener is on the ancestor). These types of memory leaks can then be contained (if not eliminated, which is freaking hard to do sometimes. IE I'm looking at you).Here are some better concrete code examples of event delegation:Event delegation allows you to avoid adding event listeners to specific nodes;  instead, the event listener is added to one parent.  That event listener analyzes bubbled events to find a match on child elements.JavaScript Example : Let's say that we have a parent UL element with several child elements:Let's also say that something needs to happen when each child element is clicked.  You could add a separate event listener to each individual LI element, but what if LI elements are frequently added and removed from the list?  Adding and removing event listeners would be a nightmare, especially if addition and removal code is in different places within your app.  The better solution is to add an event listener to the parent UL element.  But if you add the event listener to the parent, how will you know which element was clicked?Simple:  when the event bubbles up to the UL element, you check the event object's target property to gain a reference to the actual clicked node.  Here's a very basic JavaScript snippet which illustrates event delegation:Start by adding a click event listener to the parent element.  When the event listener is triggered, check the event element to ensure it's the type of element to react to.  If it is an LI element, boom:  we have what we need!  If it's not an element that we want, the event can be ignored.  This example is pretty simple -- UL and LI is a straight-forward comparison.  Let's try something more difficult.  Let's have a parent DIV with many children but all we care about is an A tag with the classA CSS class:http://davidwalsh.name/event-delegate dom event delegation is something different from the computer science definition.It refers to handling bubbling events from many elements, like table cells, from a parent object, like the table. It can keep the code simpler, especially when adding or removing elements, and saves some memory.Delegation is a technique where an object expresses certain behavior to the outside but in reality delegates responsibility for implementing that behaviour to an associated object. This sounds at first very similar to the proxy pattern, but it serves a much different purpose. Delegation is an abstraction mechanism which centralizes object (method) behavior.Generally spoken: use delegation as alternative to inheritance. Inheritance is a good strategy, when a close relationship exist in between parent and child object, however, inheritance couples objects very closely. Often, delegation is the more flexible way to express a relationship between classes.This pattern is also known as "proxy chains". Several other design patterns use delegation - the State, Strategy and Visitor Patterns depend on it.If there are many elements inside one parent, and you want to handle events on them of them - don’t bind handlers to each element.

Instead, bind the single handler to their parent, and get the child from event.target.

This site provides useful info about how to implement event delegation.

http://javascript.info/tutorial/event-delegationEvent delegation is handling an event that bubbles using an event handler on a container element, but only activating the event handler's behavior if the event happened on an element within the container that matches a given condition. This can simplify handling events on elements within the container.For instance, suppose you want to handle a click on any table cell in a big table. You could write a loop to hook up a click handler to each cell...or you could hook up a click handler on the table and use event delegation to trigger it only for table cells (and not table headers, or the whitespace within a row around cells, etc.).It's also useful when you're going to be adding and removing elements from the container, because you don't have to worry about adding and removing event handlers on those elements; just hook the event on the container and handle the event when it bubbles.Here's a simple example (it's intentionally verbose to allow for inline explanation): Handling a click on any td element in a container table:Before going into the details of that, let's remind ourselves how DOM events work.DOM events are dispatched from the document to the target element (the capturing phase), and then bubble from the target element back to the document (the bubbling phase). This graphic in the old DOM3 events spec (now superceded, but the graphic's still valid) shows it really well:Not all events bubble, but most do, including click.The comments in the code example above describe how it works. matches checks to see if an element matches a CSS selector, but of course you can check for whether something matches your criteria in other ways if you don't want to use a CSS selector.That code is written to call out the individual steps verbosely, but on vaguely-modern browsers (and also on IE if you use a polyfill), you can use closest and contains instead of the loop:Live Example:closest checks the element you call it on to see if it matches the given CSS selector and, if it does, returns that same element; if not, it checks the parent element to see if it matches, and returns the parent if so; if not, it checks the parent's parent, etc. So it finds the "closest" element in the ancestor list that matches the selector. Since that might go past the container element, the code above uses contains to check that if a matching element was found, it's within the container — since by hooking the event on the container, you've indicated you only want to handle elements within that container.Going back to our table example, that means that if you have a table within a table cell, it won't match the table cell containing the table:It's basically how association is made to the element. .click applies to the current DOM, while .on (using delegation) will continue to be valid for new elements added to the DOM after event association.Which is better to use, I'd say it depends on the case.Example:.Click Event:Event .on:Note that I've separated the selector in the .on. I'll explain why.Let us suppose that after this association, let us do the following:That is where you will notice the difference.If the event was associated via .click, task 5 will not obey the click event, and so it will not be removed.If it was associated via .on, with the selector separate, it will obey.A delegate in C# is similar to a function pointer in C or C++. Using a delegate allows the programmer to encapsulate a reference to a method inside a delegate object. The delegate object can then be passed to code which can call the referenced method, without having to know at compile time which method will be invoked. See this link  --> http://www.akadia.com/services/dotnet_delegates_and_events.htmlEvent delegation makes use of two often overlooked features of JavaScript events: event bubbling and the target element.When an event is triggered on an element, for example a mouse click on a button, the same event is also triggered on all of that element’s ancestors. This process is known as event bubbling; the event bubbles up from the originating element to the top of the DOM tree.Imagine an HTML table with 10 columns and 100 rows in which you want something to happen when the user clicks on a table cell. For example, I once had to make each cell of a table of that size editable when clicked. Adding event handlers to each of the 1000 cells would be a major performance problem and, potentially, a source of browser-crashing memory leaks. Instead, using event delegation, you would add only one event handler to the table element, intercept the click event and determine which cell was clicked.Attach an event listener to a parent element that fires when an event occurs on a child element.When an event moves through the DOM from child to a parent element, that's called Event Propagation, because the event propagates, or moves through the DOM.In this example, an event (onclick) from a button gets passed to the parent paragraph.Codepen

iOS 8 removed「minimal-ui」viewport property, are there other「soft fullscreen」solutions?

bitinn

[iOS 8 removed「minimal-ui」viewport property, are there other「soft fullscreen」solutions?](https://stackoverflow.com/questions/24889100/ios-8-removed-minimal-ui-viewport-property-are-there-other-soft-fullscreen)

(This is a multi-part question, I will try my best to summarise the scenario.)We are currently building a responsive web app (news reader) that allow users to swipe between tabbed content, as well as scroll vertically inside each tabbed content.A common approach to the problem is to have a wrapper div that fills the browser viewport, set overflow to hidden or auto, then scroll horizontally and/or vertically inside it.This approach is great but has one main drawback: since the height of the document is exactly the same as the browser viewport, the mobile browser will not hide the address bar/navigation menu.There are numerous hacks and viewport properties that enable us to get more screen real estate, but none are quite as effective as minimal-ui (introduced in iOS 7.1).News came yesterday that iOS 8 beta4 had removed minimal-ui from Mobile Safari (see Webkit section in iOS 8 Release Notes), which left us wondering:Q1. Is it still possible to hide the address bar on Mobile Safari?As far as we know, iOS 7 no longer responds to the window.scrollTo hack, this suggests we have to live with the smaller screen space, unless we adopt a vertical layout or use mobile-web-app-capable.Q2. Is it still possible to have a similar soft fullscreen experience?By soft fullscreen I really mean without using the mobile-web-app-capable meta tag.Our web app is built to be accessible, any page can be bookmarked or shared using the native browser menu. By adding mobile-web-app-capable we prevent users from invoking such menu (when it's saved to homescreen), which confuses and antagonises users.minimal-ui used to be the middle-ground, hiding the menu by default but keeping it accessible with a tap -- though Apple might have removed it due to other accessibility concerns (such as users not knowing where to tap to activate the menu).Q3. Is a fullscreen experience worth the trouble?It would seem that a fullscreen API is not coming to iOS anytime soon, but even if it is, I don't see how the menu will be kept accessible (same goes for Chrome on Android).In this case, maybe we should just leave mobile safari as it is, and account for viewport height (for iPhone 5+, it's 460 = 568 - 108, where 108 includes the OS bar, address bar and navigation menu; for iPhone 4 or older, it's 372).Would love to hear some alternatives (besides building a native app).

2014-07-22 13:43:42Z

(This is a multi-part question, I will try my best to summarise the scenario.)We are currently building a responsive web app (news reader) that allow users to swipe between tabbed content, as well as scroll vertically inside each tabbed content.A common approach to the problem is to have a wrapper div that fills the browser viewport, set overflow to hidden or auto, then scroll horizontally and/or vertically inside it.This approach is great but has one main drawback: since the height of the document is exactly the same as the browser viewport, the mobile browser will not hide the address bar/navigation menu.There are numerous hacks and viewport properties that enable us to get more screen real estate, but none are quite as effective as minimal-ui (introduced in iOS 7.1).News came yesterday that iOS 8 beta4 had removed minimal-ui from Mobile Safari (see Webkit section in iOS 8 Release Notes), which left us wondering:Q1. Is it still possible to hide the address bar on Mobile Safari?As far as we know, iOS 7 no longer responds to the window.scrollTo hack, this suggests we have to live with the smaller screen space, unless we adopt a vertical layout or use mobile-web-app-capable.Q2. Is it still possible to have a similar soft fullscreen experience?By soft fullscreen I really mean without using the mobile-web-app-capable meta tag.Our web app is built to be accessible, any page can be bookmarked or shared using the native browser menu. By adding mobile-web-app-capable we prevent users from invoking such menu (when it's saved to homescreen), which confuses and antagonises users.minimal-ui used to be the middle-ground, hiding the menu by default but keeping it accessible with a tap -- though Apple might have removed it due to other accessibility concerns (such as users not knowing where to tap to activate the menu).Q3. Is a fullscreen experience worth the trouble?It would seem that a fullscreen API is not coming to iOS anytime soon, but even if it is, I don't see how the menu will be kept accessible (same goes for Chrome on Android).In this case, maybe we should just leave mobile safari as it is, and account for viewport height (for iPhone 5+, it's 460 = 568 - 108, where 108 includes the OS bar, address bar and navigation menu; for iPhone 4 or older, it's 372).Would love to hear some alternatives (besides building a native app).The minimal-ui viewport property is no longer supported in iOS 8. However, the minimal-ui itself is not gone. User can enter the minimal-ui with a "touch-drag down" gesture.There are several pre-conditions and obstacles to manage the view state, e.g. for minimal-ui to work, there has to be enough content to enable user to scroll; for minimal-ui to persist, window scroll must be offset on page load and after orientation change. However, there is no way of calculating the dimensions of the minimal-ui using the screen variable, and thus no way of telling when user is in the minimal-ui in advance.These observations is a result of research as part of developing Brim – view manager for iOS 8. The end implementation works in the following way:The end result looks like this:For the sake of documentation, and in case you prefer to write your own implementation, it is worth noting that you cannot use Scream to detect if device is in minimal-ui straight after the orientationchange event because window dimensions do not reflect the new orientation until the rotation animation has ended. You have to attach a listener to the orientationchangeend event.Scream and orientationchangeend have been developed as part of this project.Since there is no programmatic way to mimic minimal-ui, we have come up with a different workaround, using calc() and known iOS address bar height to our advantage:The following demo page (also available on gist, more technical details there) will prompt user to scroll, which then triggers a soft-fullscreen (hide address bar/menu), where header and content fills the new viewport.It's true, minimal-ui could be both useful and harmful, and I suppose the trade-off now has another balance, in favor of newer, bigger iPhones.I've been dealing with the issue while working with my js framework for HTML5 apps. After many attempted solutions, each with their drawbacks, I surrendered to considering that space lost on iPhones previous than 6.

Given the situation, I think that the only solid and predictable behavior is a pre-determined one.In short, I ended up preventing any form of minimal-ui, so at least my screen height is always the same and you always know what actual space you have for your app.With the help of time, enough users will have more room.EDITThis is a little simplified, for demo purpose, but should work for you. Assuming you have a main containerThen:As a sidenote: this app too is bookmarkable, as it uses an internal routing to hashed addresses, but I also added a prompt iOS users to add to home. I feel this way helps loyalty and returning visitors (and so the lost space is back).The easiest way I found to fix this was to set the height of the body and html elements to 100.1% for any request where the user agent was an iphone. This only works in Landscape mode, but thats all I needed.Check it out at https://www.360jungle.com/virtual-tour/25The root problem here seems that iOS8 safari won't hide the address bar when scrolling down if the content is equal or less than the viewport.As you found out already, adding some padding at the bottom gets around this issue:The above css should be conditionally applied, for example with UA sniffing adding a gt-ios8 class to <html>.I want to comment/partially answer/share my thoughts. I am using the overflow-y:scroll technique for a big upcoming project of mine. Using it has two MAJOR advantages.a) You can use a drawer with action buttons from the bottom of the screen; if the document scrolls and the bottom bar disappears, tapping on a button located at the bottom of the screen will first make the bottom bar appear, and then be clickable. Also, the way this thing works, causes trouble with modals that have buttons at the far bottom.b) When using an overflown element, the only things that are repainted in case of major css changes are the ones in the viewable screen. This gave me a huge performance boost when using javascript to alter css of multiple elements on the fly. For example, if you have a list of 20 elements you need repainted and only two of them are on-screen in the overflown element, only those are repainted while the rest are repainted when scrolling. Without it all 20 elements are repainted...of course it depends on the project and if you need any of the functionality I mentioned. Google uses overflown elements for gmail to use the functionality I described on a). Imo, it's worth the while, even considering the small height in older iphones (372px as you said).It IS possible, using something like the below example that I put together with the help of work from (https://gist.github.com/bitinn/1700068a276fb29740a7) that didn't quite work on iOS 11:Here's the modified code that works on iOS 11.03, please comment if it worked for you.The key is adding some size to BODY so the browser can scroll, ex: height: calc(100% + 40px);Full sample below & link to view in your browser (please test!)Full example link here:

https://repos.codehot.tech/misc/ios-webapp-example2.htmlIt is possible to get a web application running in full screen in both iOS and Android, it is called a PWA and after mucha hard work, it was the only way around this issue.PWAs open a number of interesting options for development that should not be missed. I've made a couple already, check out this Public and Private Tender Manual For Designers (Spanish). And here is an English explanation from the CosmicJS siteI haven't done web design for iOS but from what I recall seeing in the WWDC sessions and in documentation, the search bar in Mobile Safari, and navigation bars across the OS, will now automatically resize and shrink to show more of your content.You can test this in Safari on an iPhone and notice that, when you scroll down to see more contents on a page, the navigation/search bar is hidden automatically.Perhaps leaving the address bar/navigation bar as is, and not creating a full-screen experience, is what's best. I don't see Apple doing that anytime soon. And at most they are not automatically controlling when the address bar shows/hides.Sure, you are losing screen real estate, specially on an iPhone 4 or 4S, but there doesn't seem to be an alternative as of Beta 4.

When to use ES6 class based React components vs. functional ES6 React components?

omarjmh

[When to use ES6 class based React components vs. functional ES6 React components?](https://stackoverflow.com/questions/36097965/when-to-use-es6-class-based-react-components-vs-functional-es6-react-components)

After spending some time learning React I understand the difference between the two main paradigms of creating components.My question is when should I use which one and why? What are the benefits/tradeoffs of one over the other?ES6 classes:Functional:I’m thinking functional whenever there is no state to be manipulated by that component, but is that it?I’m guessing if I use any life cycle methods, it might be best to go with a class based component.

2016-03-19 04:47:26Z

After spending some time learning React I understand the difference between the two main paradigms of creating components.My question is when should I use which one and why? What are the benefits/tradeoffs of one over the other?ES6 classes:Functional:I’m thinking functional whenever there is no state to be manipulated by that component, but is that it?I’m guessing if I use any life cycle methods, it might be best to go with a class based component.You have the right idea. Go with functional if your component doesn't do much more than take in some props and render. You can think of these as pure functions because they will always render and behave the same, given the same props. Also, they don't care about lifecycle methods or have their own internal state.Because they're lightweight, writing these simple components as functional components is pretty standard.If your components need more functionality, like keeping state, use classes instead.More info: https://facebook.github.io/react/docs/reusable-components.html#es6-classesEDIT: Much of the above was true, until the introduction of React Hooks.Regarding the recommendation on when to use class over functional components, Facebook officially recommends using functional components wherever possible. As a small aside, I have heard a number of people discussing not using functional components for the performance reasons, specifically that Whilst true, please consider if your components are really rendering at such a speed or volume that this would be worth concern.If they are, you can prevent redefining functions using useCallback and useMemo hooks. However, bear in mind that this may make your code (microscopically) worse in performance. But honestly, I have never heard of redefining functions being a bottleneck in React apps. Premature optimisations are the root of all evil - worry about this when it's a problemAlways try to use stateless functions (functional components) whenever possible. There are scenarios where you'll need to use a regular React class:There's now a React class called PureComponent that you can extend (instead of Component) which implements its own shouldComponentUpdate that takes care of shallow props comparison for you. Read moreUPDATE March 2019https://overreacted.io/how-are-function-components-different-from-classes/UPDATE Feb 2019:With the introduction of React hooks, it seems as though the React teams wants us to use functional components whenever possible (which better follows JavaScript's functional nature). Their motivation: A functional component with hooks can do almost everything a class component can do, without any of the draw backs mentions above. I recommend using them as soon as you are able.Original AnswerFunctional components aren't any more lightweight than class based components, "they perform exactly as classes." - https://github.com/facebook/react/issues/5677#issuecomment-241190513The above link is a little dated, but React 16.7.0's documentation says

