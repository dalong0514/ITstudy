Crackerjack

[PHP Session data not being saved](https://stackoverflow.com/questions/155920/php-session-data-not-being-saved)

I have one of those "I swear I didn't touch the server" situations. I honestly didn't touch any of the php scripts. The problem I am having is that php data is not being saved across different pages or page refreshes. I know a new session is being created correctly because I can set a session variable (e.g. $_SESSION['foo'] = "foo" and print it back out on the same page just fine. But when I try to use that same variable on another page it is not set! Is there any php functions or information I can use on my hosts server to see what is going on?Here is an example script that does not work on my hosts' server as of right now:The 'views' variable never gets incremented after doing a page refresh. I'm thinking this is a  problem on their side, but I wanted to make sure I'm not a complete idiot first.Here is the phpinfo() for my hosts' server (PHP Version 4.4.7):

2008-10-01 01:57:49Z

I have one of those "I swear I didn't touch the server" situations. I honestly didn't touch any of the php scripts. The problem I am having is that php data is not being saved across different pages or page refreshes. I know a new session is being created correctly because I can set a session variable (e.g. $_SESSION['foo'] = "foo" and print it back out on the same page just fine. But when I try to use that same variable on another page it is not set! Is there any php functions or information I can use on my hosts server to see what is going on?Here is an example script that does not work on my hosts' server as of right now:The 'views' variable never gets incremented after doing a page refresh. I'm thinking this is a  problem on their side, but I wanted to make sure I'm not a complete idiot first.Here is the phpinfo() for my hosts' server (PHP Version 4.4.7):

Thanks for all the helpful info. It turns out that my host changed servers and started using a different session save path other than /var/php_sessions which didn't exist anymore. A solution would have been to declare ini_set(' session.save_path','SOME WRITABLE PATH'); in all my script files but that would have been a pain. I talked with the host and they explicitly set the session path to a real path that did exist. Hope this helps anyone having session path troubles.Check to make sure you are not mixing https:// with http://.  Session variables do not flow between secure and insecure sessions.Had same problem - what happened to me is our server admin changed the session.cookie_secure boolean to On, which means that cookies will only be sent over a secure connection. Since the cookie was not being found, php was creating a new session every time, thus session variables were not being seen.Use phpinfo() and check the session.* settings.Maybe the information is stored in cookies and your browser does not accept cookies, something like that.Check that first and come back with the results.You can also do a print_r($_SESSION); to have a dump of this variable and see the content....Regarding your phpinfo(), is the session.save_path a valid one? Does your web server have write access to this directory?Hope this helps.I had following problemindex.phpindex2.phpThe variable $_SESSION['a'] was not set correctly. Then I have changed the index.php acordinglyI dont know what this internally means, I just explain it to myself that the session variable change was not quick enough :)Check to see if the session save path is writable by the web server.Make sure you have cookies turned on.. (I forget when I turn them off to test something)Use firefox with the firebug extension to see if the cookie is being set and transmitted back.And on a unrelated note, start looking at php5, because php 4.4.9 is the last of the php4 series.Check who the group and owner are of the folder where the script runs. If the group id or user id are wrong, for example, set to root, it will cause sessions to not be saved properly.Check the value of "views" when before you increment it. If, for some bizarre reason, it's getting set to a string, then when you add 1 to it, it'll always return 1.Well, we can eliminate code error because I tested the code on my own server (PHP 5).Here's what to check for:If you set a session in php5, then try to read it on a php4 page, it might not look in the correct place! Make the pages the same php version or set the session_path.I spent ages looking for the answer for a similar problem.  It wasn't an issue with the code or the setup, as a very similar code worked perfectly in another .php on the same server. Turned out the problem was caused by a very large amount of data being saved into the session in this page.  In one place we had a line like this:$_SESSION['full_list'] = $full_list where $full_list was an array of data loaded from the database; each row was an array of about 150 elements.  When the code was initially written a couple of years ago, the DB only contained about 1000 rows, so the $full_list contained about 100 elements, each being an array of about 20 elements.  With time, the 20 elements turned into 150 and 1000 rows turned into 17000, so the code was storing close to 64 meg of data into the session.  Apparently, with this amount of data being stored, it refused to store anything else.  Once we changed the code to deal with data locally without saving it into the session, everything worked perfectly.Thanks for this one Darryl.  This helped me out.  I was deleting a session variable, and for some reason it was keeping the session from committing.  now i'm just setting it to null instead (which is fine for my app), and it works. I know one solution I found (OSX with Apache 1 and just switched to PHP5) when I had a similar problem was that unsetting 1 specific key (ie unset($_SESSION['key']);) was causing it not to save. As soon as I didn't unset that key any more it saved. I have never seen this again, except on that server on another site, but then it was a different variable. Neither were anything special.Here is one common problem I haven't seen addressed in the other comments: is your host running a cache of some sort? If they are automatically caching results in some fashion you would get this sort of behavior.Just wanted to add a little note that this can also occur if you accidentally miss the session_start() statement on your pages.Check if you are using session_write_close(); anywhere, I was using this right after another session and then trying to write to the session again and it wasn't working.. so just comment that sh*t outI had session cookie path set to "//" instead of "/". Firebug is awesome.

Hope it helps somebody.I had this problem when using secure pages where I was coming from www.domain.com/auth.php that redirected to domain.com/destpage.php. I removed the www from the auth.php link and it worked. This threw me because everything worked otherwise; the session was not set when I arrived at the destination though.A common issue often overlooked is also that there must be NO other code or extra spacing before the session_start() command.I've had this issue before where I had a blank line before session_start() which caused it not to work properly.Adding my solution: Check if you access the correct domain. I was using www.mysite.com to start the session, and tried to receive it from mysite.com (without the www). I have solved this by adding a htaccess rewrite of all domains to www to be on the safe side/site.Also check if you use http or https.Edit your php.ini.

I think the value of session.gc_probability is 1, so set it to 0.Another few things I had to do (I had same problem: no sesson retention after PHP upgrade to 5.4). You many not need these, depending on what your server's php.ini contains (check phpinfio());Basically, your php.ini should be set to no cookies, and session parameters must be consistent with what osc wants.You may also need to change a few session code snippets in application_top.php - creating objects where none exist in the tep_session_is_registered(...) calls (e eg. navigation object), set $HTTP_ variables to the newer $_SERVER ones and a few other isset tests for empty objects (google for info). I ended up being able to use the original sessions.php files (includes/classes and includes/functions) with a slightly modified application_top.php to get things going again. The php.ini settings were the main problem, but this of course depends on what your server company has installed as the defaults.

Which PHP opcode cacher should I use to improve performance? [closed]

Edmund Tay

[Which PHP opcode cacher should I use to improve performance? [closed]](https://stackoverflow.com/questions/28716/which-php-opcode-cacher-should-i-use-to-improve-performance)

I'm trying to improve performance under high load and would like to implement opcode caching. Which of the following should I use?I'm also open to any other alternatives that have slipped under my radar.Currently running on a stock Debian Etch with Apache 2 and PHP 5.2[Update 1]HowtoForge installation links added[Update 2]Based on the answers and feedback given, I have tested all 3 implementations using the following Apache JMeter test plan on my application:With 50 concurrent connections, the results are as follows:No Opcode Caching

APC

eAccelerator

XCache

Performance Graph (smaller is better)

From the above results, eAccelerator has a slight edge in performance compared to APC and XCache. However, what matters most from the above data is that any sort of opcode caching gives a tremendous boost in performance.I have decided to use APC due to the following 2 reasons:To summarize my experience:Ease of Installation: APC > eAccelerator > XCache

Performance: eAccelerator > APC, XCache

Control Panel: APC > XCache > eAccelerator

2008-08-26 17:50:53Z

I'm trying to improve performance under high load and would like to implement opcode caching. Which of the following should I use?I'm also open to any other alternatives that have slipped under my radar.Currently running on a stock Debian Etch with Apache 2 and PHP 5.2[Update 1]HowtoForge installation links added[Update 2]Based on the answers and feedback given, I have tested all 3 implementations using the following Apache JMeter test plan on my application:With 50 concurrent connections, the results are as follows:No Opcode Caching

APC

eAccelerator

XCache

Performance Graph (smaller is better)

From the above results, eAccelerator has a slight edge in performance compared to APC and XCache. However, what matters most from the above data is that any sort of opcode caching gives a tremendous boost in performance.I have decided to use APC due to the following 2 reasons:To summarize my experience:Ease of Installation: APC > eAccelerator > XCache

Performance: eAccelerator > APC, XCache

Control Panel: APC > XCache > eAcceleratorI think the answer might depend on the type of web applications you are running. I had to make this decision myself two years ago and couldn't decide between Zend Optimizer and eAccelerator.In order to make my decision, I used ab (apache bench) to test the server, and tested the three combinations (zend, eaccelerator, both running) and proved that eAccelerator on its own gave the greatest performance.If you have the luxury of time, I would recommend doing similar tests yourself, and making the decision based on your results.I use APC because it was easy to install in windows and I'm developing on WAMP.Integrating APC into PHP6 was discussed here: 

http://www.php.net/~derick/meeting-notes.html#add-an-opcode-cache-to-the-distribution-apcAnd there are directions on installing APC on Debian Etch here:

http://www.howtoforge.com/apc-php5-apache2-debian-etchI have run several benchmarks with eAcclerator, APC, XCache, and Zend Optimizer (even though Zend is an optimizer, not a cache).  Benchmark Results http://blogs.interdose.com/dominik/wp-content/uploads/2008/04/opcode_wordpress.pngResult: eAccelerator is fastest (in all tests), followed by XCache and APC. (The one in the diagram is the number of seconds to call a WordPress home page 10,000 times).Zend Optimizer made everything slower (!).I can't tell you for sure, but the place where I am working now is looking at APC and eAccelerator. However, this might influence you - APC will be integrated into a future release of PHP (thanks to Ed Haber for the link).I've had good success with eAccelerator (speed improvement with no load is noticable) but XCache also seems pretty promising. You may want to run some trials with each though, your application might scale differently on each.I've been using XCache for more than a year now with no problems at all.I tried to switch to eAccelerator, but ended up with a bunch of segmentation faults (it's less forgiving of errors). The major benefit to eAccelerator is that it's not just an opcode cache, it's also an optimizer.You should fully test out your application with each one of them to make sure there aren't any problems, and then I'd use apachebench to test it under load.These add-ons have historically introduced lots of weird bugs to track down. These bugs can cause inconsistent behaviour which can't be diagnosed easily because it depends on the state of the cache.So I'd say:But I'd say:

How can I implement OCR on a website using PHP? [closed]

Moshe

[How can I implement OCR on a website using PHP? [closed]](https://stackoverflow.com/questions/2170271/how-can-i-implement-ocr-on-a-website-using-php)

Are there any free OCR libraries that work with PHP or Python on a Linux server? The idea is to be able to upload an image and pull out characters from it, or allow users to "draw characters", and parse them out of said image.

2010-01-31 02:10:37Z

Are there any free OCR libraries that work with PHP or Python on a Linux server? The idea is to be able to upload an image and pull out characters from it, or allow users to "draw characters", and parse them out of said image.Since you're on a Linux box, I would highly recommend Google's open source project ocropus.  It's not PHP, but I think it will be your best option.  Of course you can call it from within PHP via exec.  Its mature and has a lot of options.  From the project site:There is also another open source project, tesseract.  I've used this in the past as well and have been pleased with the results.  Includes training, limiting your alphabet, etc.Have you seen phpOCR classes of Andrey Kucherenko  ?

http://www.phpclasses.org/package/2874-PHP-Recognize-text-objects-in-graphical-images.html

It's an old article but may help you.

symfony2 - how to switch from「dev」to「prod」?

Raffael

[symfony2 - how to switch from「dev」to「prod」?](https://stackoverflow.com/questions/6789950/symfony2-how-to-switch-from-dev-to-prod)

I downloaded symfony2 and I am able to run it starting from app_dev.php.But when I start from app.php, then I get an error page 404.app.php though is of course there and it gets executed.The error happens apparently somewhere after the last line of code in app.php:I guess there is a switch somewhere I have to configure.EDIT:As suggested by GeLo I added the routing for the production version to app/config/routing.yml. I created src/Acme/DemoBundle/Resources/config/routing.yml with content:In DemoController::indexAction() I placed a die(__FILE__);nothing; I still get 404 from app.php !?EDIT regarding the answer:did the trick. mind the env-parameter.

2011-07-22 12:21:43Z

I downloaded symfony2 and I am able to run it starting from app_dev.php.But when I start from app.php, then I get an error page 404.app.php though is of course there and it gets executed.The error happens apparently somewhere after the last line of code in app.php:I guess there is a switch somewhere I have to configure.EDIT:As suggested by GeLo I added the routing for the production version to app/config/routing.yml. I created src/Acme/DemoBundle/Resources/config/routing.yml with content:In DemoController::indexAction() I placed a die(__FILE__);nothing; I still get 404 from app.php !?EDIT regarding the answer:did the trick. mind the env-parameter.By default, Symfony 2 is delivered with a demo bundle which is just accessible from the development environment. The production environment doesn't contain any route, so it's normal you get a 404 error page.EDIT :Are you sure your bundle is enable in the AppKernel.php ?If yes, clear the cache with the following command : ./app/console cache:clearCheck if the route is enable with the following command : ./app/console router:debugChange the owner instead.

sudo chown www-data:www-data -R app/cache

sudo chown www-data:www-data -R app/logsThats letting the browser own the folders.

the syntax is:

chown <USER>:<GROUP> <SWITCH> <DIRECTORY>I just wanted to integrate a couple of tips for this kind of problem since I faced it nowadays with a new fresh Symfony2 installation.As a fresh installation you normally get AppBundle under /src/AppBundle together with AcmeDemoBundle under /src/Acme/DemoBundleIf you want to run AcmeDemoBundle on app_dev and, in the meanwhile, have an application ( i.e. AppBundle provided with fresh installation ) on app.php ( and avoid 404 ) you can also do something like that:in /app/config/routing_dev.yml comment the following rows ( if you have them ):in /app/config/routing.yml add a new route ( if you don't have )then empty cache like already advised by the others and test the application on 1) http:// your_application_path/web/2) http:// your_application_path/web/app_dev.phpIf everything is fine on the first one you should get a white page with a string "Homepage."

( to edit this one go in /app/Resources/views/default/index.html.twig...

Layout for this one is base.html.twig ) and, on the second one you should get the DemoBundle provided by Symfony2.Hope it helps!I fixed it with just letting the web-server account (i.e. 'master-chef' own the /Symfony2/app/cache/prod directory. The command as below:In your "web/app.php" fileChange the value to "true".Now you can load the application in production mode.Your problem is related to the cache of Symfony2. I had the same problems. Try this:You're done.

Which coding style you use for ternary operator? [closed]

Imran

[Which coding style you use for ternary operator? [closed]](https://stackoverflow.com/questions/243217/which-coding-style-you-use-for-ternary-operator)

I keep it in single line, if it's short. Lately I've been using this style for longer or nested ternary operator expressions. A contrived example:Personally which style you use, or find most readable?Edit: (on when to use ternary-operator)I usually avoid using more than 2 levels deep ternary operator. I tend prefer 2 levels deep ternary operator over 2 level if-else, when I'm echoing variables in PHP template scripts.

2008-10-28 13:10:42Z

I keep it in single line, if it's short. Lately I've been using this style for longer or nested ternary operator expressions. A contrived example:Personally which style you use, or find most readable?Edit: (on when to use ternary-operator)I usually avoid using more than 2 levels deep ternary operator. I tend prefer 2 levels deep ternary operator over 2 level if-else, when I'm echoing variables in PHP template scripts.The ternary operator is generally to be avoided, but this form can be quite readable:This way, the condition and the result are kept together on the same line, and it's fairly easy to skim down and understand what's going on.I try not to use a ternary operator to write nested conditions. It defies readability and provides no extra value over using a conditional.Only if it can fit on a single line, and it's crystal-clear what it means, I use it:Personally, I only use the ternary operator if it fits on one line. If it need to span, then it's time for the good old a style I sometimes use, which I'm bringing up since it hasn't been mentioned, is like this:..but usually only if putting it all on one line makes it too long. I find that having the = ? : all line up makes it look neater.PHP nested ternary operators behave differently.This syntax passes all the following tests.

Based on http://deadlytechnology.com/web-development-tips/php-ternary-syntax/.See: http://au.php.net/ternaryExample #3 "Non-obvious Ternary Behaviour" explains why the following does not work in PHP.ternary operators are short effective ways to write simple if statements.  They shouldn't be nested or difficult to read.  Remember: You write the software once but is is read 100 times.  It should be easier to read than write.I tend to enclose the condition in parentheses : (a == b) ? 1 : 0I'll dissent with the common opinion. I'm sort of like Imran with my conditional operator style. If it fits cleanly on one line, I keep it on one line. If it doesn't fit cleanly on one line, I do break it, but I use only a single tab (4 spaces; I have VS set to insert spaces for tabs) for the indent. I don't immediately jump to if-else, because a lot of the time the conditional operator makes more sense contextually. (If it doesn't make sense contextually, however, I simply don't use it.)Also, I don't nest conditional operators. At that point, I do find it too difficult to read, and it's time to go to the more verbose if-else style.The "contrived example" is how I would indent it, except that I would indent from the left margin, not based on where the ( or whatever is on the line above.To the ternary detractors - readability is the point.  If you don't think it makes for more readable code, don't use it.  But I find the contrary to be the case at least some of the time.The ternary conditional can make code cleaner and more elegant, and most importantly, help you put emphasis on the right things and avoid repeating yourself.  Consider using them, but do not make the code less readable by doing so.  In VB.NET:Note that "it is less readable" is not the same thing as "I'm not used to seeing that". I don't use it.  It always smelled to me like trying to save space and typing in source code with the expectation that small source == more efficient compiled code.I don't find it readable at all, but much of that is because I just never use it.  I tend not to use the ternary operator at all as I find if .. else much more readable.Imran, you have formatted this beautifully. However, the ternary operator does tend to get unreadable as you nest more than two. an if-else block may give you an extra level of comprehensible nesting. Beyond that, use a function or table-driven programming.I personally only use it for an assignment of a variable (in java) for example :and (other example) when using function that doesn't allow null parameter such as :

Get Last Part of URL PHP

Belgin Fish

[Get Last Part of URL PHP](https://stackoverflow.com/questions/7395049/get-last-part-of-url-php)

I'm just wondering how I can extract the last part of a URL using PHP.The example URL is:Now how can I extract the final part using PHP?There is always the same number of variables in the URL, and the id is always at the end.

2011-09-12 23:04:17Z

I'm just wondering how I can extract the last part of a URL using PHP.The example URL is:Now how can I extract the final part using PHP?There is always the same number of variables in the URL, and the id is always at the end.You can use preg_match to match the part of the URL that you want.  In this case, since the pattern is easy, we're looking for a forward slash (\/ and we have to escape it since the forward slash denotes the beginning and end of the regular expression pattern), along with one or more digits (\d+) at the very end of the string ($).  The parentheses around the \d+ are used for capturing the piece that we want:  namely the end.  We then assign the ending that we want ($end) to $matches[1] (not $matches[0], since that is the same as $url (ie the entire string)).Note:  You may or may not want to add some more sophistication to this regular expression.  For example, if you know that your URL strings will always start with http:// then the regex can become /^http:\/\/.*\/(\d+)$/ (where .* means zero or more characters (that aren't the newline character)).The absolute simplest way to accomplish this, is with basename()Which will printOf course, if there is a query string at the end it will be included in the returned value, in which case the accepted answer is a better solution.Split it apart and get the last element:Edit: To support apache-style-canonical URLs, rtrim is handy:A different example which might me considered more readable is (Demo):This example also takes into account to only work on the path of the URL.Yet another edit (years after), canonicalization and easy UTF-8 alternative use included (via PCRE regular expression in PHP):Which is pretty rough but shows how to wrap this this within a preg_match call for finer-grained control via PCRE regular expression pattern. To add some sense to this bare-metal example, it should be wrapped inside a function of its' own (which would also make the aliasing superfluous). Just presented this way for brevity.If you are looking for a robust version that can deal with any form of URLs, this should do nicely:Here is the description of the strrchr function: http://www.php.net/manual/en/function.strrchr.phpHope that's useful!Another option:One of the most elegant solutions was here Get characters after last / in urlby DisgruntledGoatOne liner: $page_path = end(explode('/', trim($_SERVER['REQUEST_URI'], '/')));Get URI, trim slashes, convert to array, grab last partthis will do the job easily to get the last part of the required URLthis will get you the string after first "/" from the right.1-linerThis simply removes everything before the last slash, including it.One line working answer:Output: drink

How to check if a string starts with「_」in PHP? [duplicate]

openfrog

[How to check if a string starts with「_」in PHP? [duplicate]](https://stackoverflow.com/questions/1962031/how-to-check-if-a-string-starts-with-in-php)

Example: I have a $variable = "_foo", and I want to make absolutely sure that $variable does not start with an underscore "_". How can I do that in PHP? Is there some access to the char array behind the string?

2009-12-25 21:50:27Z

Example: I have a $variable = "_foo", and I want to make absolutely sure that $variable does not start with an underscore "_". How can I do that in PHP? Is there some access to the char array behind the string?You might check out the substr function in php and grab the first character that way:http://php.net/manual/en/function.substr.phpIn PHP you can get particular character of a string with array index notation. $variable[0] is the first character of a string (if $variable is a string).Since someone mentioned efficiency, I've benchmarked the functions given so far out of curiosity:Here are the results on my average DualCore machine with 100.000 runs eachAs you can see, treating the haystack as array to find out the char at the first position is always the fastest solution. It is also always performing at equal speed, regardless of string length. Using strpos is faster than substr for short strings but slower for long strings, when the string does not start with the prefix. The difference is irrelevant though. stripos is incredibly slow with long strings. preg_match performs mostly the same regardless of string length, but is only mediocre in speed. The mb_substr solution performs worst, while probably being more reliable though.Given that these numbers are for 100.000 runs, it should be obvious that we are talking about 0.0000x seconds per call. Picking one over the other for efficiency is a worthless micro-optimization, unless your app is doing startsWith checking for a living.This is the most simple answer where you are not concerned about performance:If strpos returns 0 it means that what you were looking for begins at character 0, the start of the string.It is documented thoroughly here: http://uk3.php.net/manual/en/function.strpos.php(PS $string[0] === '_' is the best answer)Here’s a better starts with function:To build on pinusnegra's answer, and in response to Gumbo's comment on that answer:Running on PHP 5.3.0, the following works and returns the expected value, even without checking if the string is at least 1 character in length:I don't know how other versions of PHP will react, but if they all work, then this method is probably more efficient than the substr route.

Accessing a class constant using a simple variable which contains the name of the constant

Adam Arold

[Accessing a class constant using a simple variable which contains the name of the constant](https://stackoverflow.com/questions/7506530/accessing-a-class-constant-using-a-simple-variable-which-contains-the-name-of-th)

I'm trying to access a class constant in one of my classes:If I have a variable which holds the name of this constant like this:Can I access the value of MY_CONST somehow?does not work obviously because it is for static properties.

Variable variables does not work either.

2011-09-21 20:57:40Z

I'm trying to access a class constant in one of my classes:If I have a variable which holds the name of this constant like this:Can I access the value of MY_CONST somehow?does not work obviously because it is for static properties.

Variable variables does not work either.There are two ways to do this: using the constant function or using reflection.The constant function works with constants declared through define as well as class constants:A second, more laborious way, would be through reflection:There is no syntax for that, but you can use an explicit lookup:I believe it also works with self::.If you want to access is dynamically, you can use the reflection API Docs:The benefit with the reflection API can be that you can get all constants at once (getConstants).If you dislike the reflection API because you don't wanna use it, an alternative is the constant function (Demo):have you tried Just a note for Reflection: the constructor for ReflectionClass must receive the full path of the class for its parameter. 

This means that just setting the string 'A' as a constructor parameter may not work in some cases.To avoid this problem, when using ReflectionClass you will be better if you do this:Function get_class will give you the full path of a class whenever you are in the code. Missing the full path may result in a "Class not found" PHP error.

Curl and PHP - how can I pass a json through curl by PUT,POST,GET

Gilberg

[Curl and PHP - how can I pass a json through curl by PUT,POST,GET](https://stackoverflow.com/questions/21271140/curl-and-php-how-can-i-pass-a-json-through-curl-by-put-post-get)

I have been working on building an Rest API for the hell of it and I have been testing it out as I go along by using curl from the command line which is very easy for CRUDI can successfully make these call from the command lineThe above calls are easy to make from the command line and work fine with my api, but now I want to use PHP to create the curl.  As you can see, I pass data as a json string.  I have read around and I think I can probably do the POST and include the POST fields, but I have not been able to find out how to pass http body data with GET.  Everything I see says you must attached it to the url, but it doesn't look that way on the command line form.  Any way, I would love it if someone could write the correct way to do these four operations in PHP here on one page.  I would like to see the simplest way to do it with curl and php.  I think I need to pass everything through the http body because my php api catching everything with php://input

2014-01-21 23:22:03Z

I have been working on building an Rest API for the hell of it and I have been testing it out as I go along by using curl from the command line which is very easy for CRUDI can successfully make these call from the command lineThe above calls are easy to make from the command line and work fine with my api, but now I want to use PHP to create the curl.  As you can see, I pass data as a json string.  I have read around and I think I can probably do the POST and include the POST fields, but I have not been able to find out how to pass http body data with GET.  Everything I see says you must attached it to the url, but it doesn't look that way on the command line form.  Any way, I would love it if someone could write the correct way to do these four operations in PHP here on one page.  I would like to see the simplest way to do it with curl and php.  I think I need to pass everything through the http body because my php api catching everything with php://inputPUTPOSTGET

   See  @Dan H answerDELETEYou can use this small library: https://github.com/ledfusion/php-rest-curlMaking a call is as simple as:And for the $result variable:Hope it helpsFor myself, I just encode it in the url and use $_GET on the destination page.  Here's a line as an example.EDIT: Adding the destination snippet... (EDIT 2 added more above at OPs request)I was Working with Elastic SQL plugin.

Query is done with GET method using cURL as below:I exposed a custom port at public server, doing a reverse proxy with Basic Auth set.This code, works fine plus Basic Auth Header:set one more property curl_setopt($ch, CURLOPT_SSL_VERIFYPEER , false); 

What is the difference between IMPLODE & JOIN

Khawer Zeshan

[What is the difference between IMPLODE & JOIN](https://stackoverflow.com/questions/17914008/what-is-the-difference-between-implode-join)

What is the difference between IMPLODE & JOIN as both works the same way.Is there is any advantage of using one over another?

2013-07-28 23:22:55Z

What is the difference between IMPLODE & JOIN as both works the same way.Is there is any advantage of using one over another?They are aliases of each other. They should theoretically work exactly the same. Although, using explode/implode has been shown to increase the awesomeness of your code by 10%Join: Join is an Alias of implode().Example:Implode: implode Returns a string from array elements.Example:UPDATE: I tested them in Benchmark and they are same in speed. There is no difference between them.join() is an alias for implode(), so implode is theoretically more "PHP native" though there is absolutely no performance increase to be gained by using it.On the other hand, join() is found in, amongst other languages, Perl, Python and ECMAScript (including JavaScript) and so is much more portable in terms of comprehensibility to a wider audience of programmers. So although explode and implode are unarguably way more dramatic, I would vote for join as a more universal way to express the concatenation of every value of an array into a string.Can't think of any.  The one is an alias of the other.  They both combine array elements into a string.  In short the reality is that in php,  join() and implode() methods function the same way.One can be interchanged for the other as they work in the same way.

Doctrine and LIKE query

Eugene

[Doctrine and LIKE query](https://stackoverflow.com/questions/8164682/doctrine-and-like-query)

I have entity for Doctrine:I need make query like this: I try handle query without like:But it make error. Why?

Can I do this query without DQL? I want make this query use magic methods findBy**

2011-11-17 09:18:00Z

I have entity for Doctrine:I need make query like this: I try handle query without like:But it make error. Why?

Can I do this query without DQL? I want make this query use magic methods findBy**This is not possible with the magic find methods. Try using the query builder:You can use the createQuery method (direct in the controller) :You need to change AcmeCodeBundle to match your bundle nameOr even better - create a repository class for the entity and create a method in there - this will make it reusableThis is not possible with the magic methods, however you can achieve this using DQL (Doctrine Query Language). In your example, assuming you have entity named Orders with Product property, just go ahead and do the following:Should do exactly what you need.Actually you just need to tell doctrine who's your repository class, if you don't, doctrine uses default repo instead of yours.@ORM\Entity(repositoryClass="Company\NameOfBundle\Repository\NameOfRepository")you can also do it like that :

PHP - Indirect modification of overloaded property

w00

[PHP - Indirect modification of overloaded property](https://stackoverflow.com/questions/10454779/php-indirect-modification-of-overloaded-property)

I know this question has been asked several times, but none of them have a real answer for a workaround. Maybe there's one for my specific case.I'm building a mapper class which uses the magic method __get() to lazy load other objects. It looks something like this:In my code I do:This works so far. The User object doesn't have a property called 'role', so it uses the magic __get() method to create that object and it returns its property from the 'role' object.But when i try to modify the 'rolename':Then it gives me the following error:Not sure if this is still some bug in PHP or if it's "expected behaviour", but in any case it doesn't work the way I want. This is really a show stopper for me... Because how on earth am I able to change the properties of the lazy loaded objects??EDIT:The actual problem only seems to occur when I return an array which contains multiple objects.I've added an example piece of code which reproduces the problem:http://codepad.org/T1iPZm9tYou should really run this in your PHP environment the really see the 'error'. But there is something really interesting going on here.I try to change the property of an object, which gives me the notice 'cant change overloaded property'. But if I echo the property after that I see that it actually DID change the value... Really weird...

2012-05-04 19:10:35Z

I know this question has been asked several times, but none of them have a real answer for a workaround. Maybe there's one for my specific case.I'm building a mapper class which uses the magic method __get() to lazy load other objects. It looks something like this:In my code I do:This works so far. The User object doesn't have a property called 'role', so it uses the magic __get() method to create that object and it returns its property from the 'role' object.But when i try to modify the 'rolename':Then it gives me the following error:Not sure if this is still some bug in PHP or if it's "expected behaviour", but in any case it doesn't work the way I want. This is really a show stopper for me... Because how on earth am I able to change the properties of the lazy loaded objects??EDIT:The actual problem only seems to occur when I return an array which contains multiple objects.I've added an example piece of code which reproduces the problem:http://codepad.org/T1iPZm9tYou should really run this in your PHP environment the really see the 'error'. But there is something really interesting going on here.I try to change the property of an object, which gives me the notice 'cant change overloaded property'. But if I echo the property after that I see that it actually DID change the value... Really weird...Nice you gave me something to play around with RunOutput Class Used  Output Modified Class All you need to do is add "&" in front of your __get function to pass it as reference:Struggled with this one for a while.I've had this same error, without your whole code it is difficult to pinpoint exactly how to fix it but it is caused by not having a __set function.The way that I have gotten around it in the past is I have done things like this:now if you do this:you should see 'Test'Though I am very late in this discussion, I thought this may be useful for some one in future.I had faced similar situation. The easiest workaround for those who doesn't mind unsetting and resetting the variable is to do so. I am pretty sure the reason why this is not working is clear from the other answers and from the php.net manual. The simplest workaround worked for me is Assumption: Note: this solution is one of the quick workaround possible to solve the problem and get the variable copied. If the array is too humungous, it may be good to force rewrite the __get method to return a reference rather expensive copying of big arrays.I was receiving this notice for doing this:This fixed it:I have run into the same problem as w00, but I didn't had the freedom to rewrite the base functionality of the component in which this problem (E_NOTICE) occured. I've been able to fix the issue using an ArrayObject in stead of the basic type array(). This will return an object, which will defaulty be returned by reference.I agree with VinnyD that what you need to do is add "&" in front of your __get function, as to make it to return the needed result as a reference:But be aware of two things:1) You should also door you might still be returning a value and not a reference...2) Remember that in any case that __get returns a reference this also means that the corresponding __set will NEVER be called; this is because php resolves this by using the reference returned by __get, which is called instead!So: means __get is called and, since __get has &__get and return &$something, $var is now, as intended, a reference to the overloaded property...works as expected and __set is called as expected...But:or works as expected in the sense that the element will be correctly added or modified in the overloaded array property, BUT __set WILL NOT BE CALLED: __get will be called instead!These two calls would NOT work if not using &__get and return &$something, but while they do work in this way, they NEVER call __set, but always call __get.This is why I decided to return a reference when $something is an array(), or when the overloaded property has no special setter method, and instead return a valuewhen $something is NOT an array or has a special setter function.In any case, this was quite tricky to understand properly for me! :)This is occurring due to how PHP treats overloaded properties in that they are not modifiable or passed by reference.See the manual for more information regarding overloading.To work around this problem you can either use a __set function or create a createObject method.Below is a __get and __set that provides a workaround to a similar situation to yours, you can simply modify the __set to suite your needs.Note the __get never actually returns a variable. and rather once you have set a variable in your object it no longer is overloaded.Which will allow for:

Doctrine array vs simple_array vs json_array

0x1gene

[Doctrine array vs simple_array vs json_array](https://stackoverflow.com/questions/16587769/doctrine-array-vs-simple-array-vs-json-array)

I use symfony and doctrine as ORM, in available type I have array, simple_array, or json_array

I wonder what is the difference beetween each of them ? And when to use one or the other ? Do you have a show case for each of them to illustrate the differences ?I already used simple_array in some applications but I find it not really well rendered in formType... (Or maybe I'm not using it well!? )To illustrate my question, here is a show case:I have an Task that I have to run on specific week's days

So I created TaskEntity with days attributeDays would be like that:But I have no idea witch type to choose ...

2013-05-16 12:42:39Z

I use symfony and doctrine as ORM, in available type I have array, simple_array, or json_array

I wonder what is the difference beetween each of them ? And when to use one or the other ? Do you have a show case for each of them to illustrate the differences ?I already used simple_array in some applications but I find it not really well rendered in formType... (Or maybe I'm not using it well!? )To illustrate my question, here is a show case:I have an Task that I have to run on specific week's days

So I created TaskEntity with days attributeDays would be like that:But I have no idea witch type to choose ...For your problem simple_array is the right way, the right way may also create seven boolean fields.However here's a little vademecum:The best way to see how a type works in doctrine is to read the code of the type, this is because there are several details that are taken for granted or are not really explained in the documentation.So you can go intofind your type and check if its methods work as you want.Here some details:in /vendor/doctrine/dbal/lib/Doctrine/DBAL/Types/SimpleArrayType.phpit's just a implode()/explode() of items, stores only the values and it's useful because you can easily query the database.in /vendor/doctrine/dbal/lib/Doctrine/DBAL/Types/ArrayType.phpcalls PHP to serialize()/unserialize(), it's faster than json_array. Looking at the code I think it also works with objects. Obviously if you see the field as plain text it's uncomprensible.in /vendor/doctrine/dbal/lib/Doctrine/DBAL/Types/JsonArrayType.phpit calls json_encode()/json_decode(), if you look in the field you can see a unformatted JSON array but it's more readable than PHP's serialized object and is really more portable (JSON exists everywhere).June 2018 updateAnother consideration: The most efficient way to represent a small set of true/false values like the ones presented here would be a bitfield.That way you're only storing one integer instead of a full string. And you avoid the encode/decode overhead.See https://stackoverflow.com/a/5412214/827254 for a good example.The best solution for your problem, as stated, would be to use an array mapping of type array or json_array but not simple_array. The reason is that the serialization method of simple_array is just a call to implode(',', $array) and that would retain only the values and not the keys of the array, thus invalid for your situation where you have an associative array.However, you could also model your $days attribute as a 0-based array (i.e. monday would be zero, tuesday would be 1, etc.). In that case, it would work because the deserializing with explode(',', $serialized); generates a 0-based array with the serialised values.According to the Documentation:Doctrine ORM > Basic Mapping > Doctrine Mapping TypesYou have 3 choices regaring array data:So, if you are sure about not having , (comma) in your array values, use simple_array. If you have a simple array structure (linear), use array and if you have more complex key-value arrays, use json_array.

Laravel Mail::send() sending to multiple to or bcc addresses

haakym

[Laravel Mail::send() sending to multiple to or bcc addresses](https://stackoverflow.com/questions/26584904/laravel-mailsend-sending-to-multiple-to-or-bcc-addresses)

I can't seem to successfully send to multiple addresses when using Laravel's Mail::send() callback, the code does however work when I only specify one recipient.I've tried chaining:and passing an array:but neither seem to work and I get failure messages when returning Mail::failures(), a var_dump() of Mail::failures() shows the email addresses that I tried to send to, for example:Clearly doing something wrong, would appreciate any help as I'm not understanding the API either: http://laravel.com/api/4.2/Illuminate/Mail/Message.html#method_toI realise I could put the Mail::send() method in a for/foreach loop and Mail::send() for each email address, but this doesn't appear to me to be the optimal solution, I was hoping I would also be able to ->bcc() to all addresses once everything was working so the recipients wouldn't see who else the mail is being sent to.

2014-10-27 09:55:40Z

I can't seem to successfully send to multiple addresses when using Laravel's Mail::send() callback, the code does however work when I only specify one recipient.I've tried chaining:and passing an array:but neither seem to work and I get failure messages when returning Mail::failures(), a var_dump() of Mail::failures() shows the email addresses that I tried to send to, for example:Clearly doing something wrong, would appreciate any help as I'm not understanding the API either: http://laravel.com/api/4.2/Illuminate/Mail/Message.html#method_toI realise I could put the Mail::send() method in a for/foreach loop and Mail::send() for each email address, but this doesn't appear to me to be the optimal solution, I was hoping I would also be able to ->bcc() to all addresses once everything was working so the recipients wouldn't see who else the mail is being sent to.I've tested it using the following code:Result - empty array for failures.But of course you need to configure your app/config/mail.php properly. So first make sure you can send e-mail just to one user and then test your code with many users. Moreover using this simple code none of my e-mails were delivered to free mail accounts, I got only emails to inboxes that I have on my paid hosting accounts, so probably they were caught by some filters (it's maybe simple topic/content issue but I mentioned it just in case you haven't received some of e-mails) .If you want to send emails simultaneously to all the admins, you can do something like this:In your .env file add all the emails as comma separated values:so when you going to send the email just do this (yes! the 'to' method of message builder instance accepts an array):So,and...will now send the mail to all the admins.the accepted answer does not work any longer with laravel 5.3 because mailable tries to access ->email and results in a working code for laravel 5.3 is this:   With Laravel 5.6, if you want pass multiple emails with names, you need to pass array of associative arrays. Example pushing multiple recipients into the $to array:Fixed two recipients:The 'name' key is not mandatory. You can set it to 'name' => NULL or do not add to the associative array, then only 'email' will be used.In a scenario where you intend to push a single email to different recipients at one instance (i.e CC multiple email addresses), the solution below works fine with Laravel 5.4 and above.where document is any class that further customizes your email.This works great - i have access to the request object and the email arrayI am using Laravel 5.6 and the Notifications Facade.If I set a variable with comma separating the e-mails and try to send it, I get the error:

"Address in mail given does not comply with RFC 2822, 3.6.2"So, to solve the problem, I got the solution idea from @Toskan, coding the following.It worked for me to send to one or many recipients. 😉it works for me fine,

if you a have string, then simply explode it first. $emails = array();

PHP if in_array() how to get the key as well?

Tom

[PHP if in_array() how to get the key as well?](https://stackoverflow.com/questions/11836741/php-if-in-array-how-to-get-the-key-as-well)

Struggling with a tiny problem.I have an array:I am checking if a set value is in the array.The thing is, when it find the value 5 in array, I really need the key to work with in my "do something".In this case I need to set:(key from the found value in_array).Any suggestions?

2012-08-06 22:13:32Z

Struggling with a tiny problem.I have an array:I am checking if a set value is in the array.The thing is, when it find the value 5 in array, I really need the key to work with in my "do something".In this case I need to set:(key from the found value in_array).Any suggestions?array_search() is what you are looking for.If you only need the key of the first match, use array_search():If you need the keys of all entries that match a specific value, use array_keys():You could just use this http://www.php.net/manual/en/function.array-search.phpYou can try this way you know it exists, and if it doesn't it doesn't cause notices, warnings, or fatal script errors depending on what your doing with that key there after.Maybe you want to use array_search instead, which returns false if the value is not found and the index if the value is found. Check out the description hereIn case anyone need it in array of arrrays. My case was this:I had an array like this:And another one like this (an array of objects):As the OP, I had to "do something" (use values in a html php template, my case Laravel with blade) with the key where some value was in the array. For my code, I had to use this:

How to change mysql to mysqli?

JasonDavis

[How to change mysql to mysqli?](https://stackoverflow.com/questions/1390607/how-to-change-mysql-to-mysqli)

Based on this code below I use for regular mysql, how could I convert it to use mysqli?Is it as simple as changing mysql_query($sql); to mysqli_query($sql);?

2009-09-07 18:56:12Z

Based on this code below I use for regular mysql, how could I convert it to use mysqli?Is it as simple as changing mysql_query($sql); to mysqli_query($sql);?The first thing to do would probably be to replace every mysql_* function call with its equivalent mysqli_*, at least if you are willing to use the procedural API -- which would be the easier way, considering you already have some code based on the MySQL API, which is a procedural one.To help with that, the The MySQLi Extension Function Summary is definitely something that will prove helpful.For instance:Note: For some functions, you may need to check the parameters carefully: Maybe there are some differences here and there -- but not that many, I'd say: both mysql and mysqli are based on the same library (libmysql ; at least for PHP <= 5.2)For instance:

Once you are done with that, try to execute the new version of your script... And check if everything works ; if not... Time for bug hunting ;-)(I realise this is old, but it still comes up...)If you do replace mysql_* with mysqli_* then bear in mind that a whole load of mysqli_* functions need the database link to be passed.E.g.:becomesI.e., lots of checking required.The easiest way i always handle this Where3 steps replacement in the following orderThis works for me everytimeI would tentatively recommend using PDO for your SQL access.Then it is only a case of changing the driver and ensuring the SQL works on the new backend. In theory. Data migration is a different issue.Abstract database access is great.In case of big projects, many files to change and also if the previous project version of PHP was 5.6 and the new one is 7.1, you can create a new file sql.php and include it in the header or somewhere you use it all the time and needs sql connection.  For example:The reason for the new mysqli extension was to take advantage of new features found in MySQL systems versions 4.1.3 and newer. When changing your existing code from mysql_* to mysqli API you should avail of these improvements, otherwise your upgrade efforts could go in vain.

The mysqli extension has a number of benefits, the key enhancements over the mysql extension being:When upgrading from mysql_* functions to MySQLi, it is important to take these features into consideration, as well as some changes in the way this API should be used. The new mysqli object-oriented interface is a big improvement over the older functions and it can make your code cleaner and less susceptible to typographical errors. There is also the procedural version of this API, but its use is discouraged as it leads to less readable code, which is more prone to errors.  To open new connection to the database with MySQLi you need to create new instance of MySQLi class. Using procedural style it would look like this:  Keep in mind that only the first 3 parameters are the same as in mysql_connect. The same code in the old API would be:  If your PHP code relied on implicit connection with default parameters defined in php.ini, you now have to open the MySQLi connection passing the parameters in your code, and then provide the connection link to all procedural functions or use the OOP style.For more information see the article: How to connect properly using mysqliThis is a big one. MySQL has added support for native prepared statements in MySQL 4.1 (2004). Prepared statements are the best way to prevent SQL injection. It was only logical that support for native prepared statements was added to PHP. Prepared statements should be used whenever data needs to be passed along with the SQL statement (i.e. WHERE, INSERT or UPDATE are the usual use cases).  The old MySQL API had a function to escape the strings used in SQL called mysql_real_escape_string, but it was never intended for protection against SQL injections and naturally shouldn't be used for the purpose.

The new MySQLi API offers a substitute function mysqli_real_escape_string for backwards compatibility, which suffers from the same problems as the old one and therefore should not be used unless prepared statements are not available. The old mysql_* way:The prepared statement way: Prepared statements in MySQLi can look a little off-putting to beginners. If you are starting a new project then deciding to use the more powerful and simpler PDO API might be a good idea. Some old-school PHP developers are used to checking for SQL errors manually and displaying them directly in the browser as means of debugging. However, such practice turned out to be not only cumbersome, but also a security risk. Thankfully MySQLi has improved error reporting capabilities. MySQLi is able to report any errors it encounters as PHP exceptions. PHP exceptions will bubble up in the script and if unhandled will terminate it instantly, which means that no statement after the erroneous one will ever be executed. The exception will trigger PHP Fatal error and will behave as any error triggered from PHP core obeying the display_errors and log_errors settings. To enable MySQLi exceptions use the line mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT) and insert it right before you open the DB connection.If you were used to writing code such as: oryou no longer need to die() in your code.  If for some reason you can't use exceptions, MySQLi has equivalent functions for error retrieval. You can use mysqli_connect_error() to check for connection errors and mysqli_error($mysqli) for any other errors. Pay attention to the mandatory argument in mysqli_error($mysqli) or alternatively stick to OOP style and use $mysqli->error.See these posts for more explanation:

mysqli or die, does it have to die?

How to get MySQLi error information in different environments?Unfortunately not every function from mysql_* has its counterpart in MySQLi only with an "i" added in the name and connection link as first parameter. Here is a list of some of them:If you have a lot files to change in your projects you can create functions with the same names like mysql functions,

and in the functions make the convert like this code:I have just created the function with the same names to convert and overwrite to the new one php7:It works for me , I hope it will work for you all , if I mistaken , correct me.Although this topic is a decade old, I still often require to 'backpatch' existing applications which relied upon the mysql extension — the original programmers were too lazy to refactor all their code, and just tell customers to make sure that they run the latest PHP 5.6 version available.PHP 5.6 is now officially deprecated; in other words, developers had a decade to get rid of their dependencies upon mysql and move to PDO (or, well, mysqli...). But... changing so much legacy code is expensive, and not every manager is willing to pay for the uncountable hours to 'fix' projects with dozens of thousands of lines.I've searched for many solutions, and, in my case, I often used the solution presented by @esty-shlomovitz — but in the meantime, I've found something even better:https://www.phpclasses.org/package/9199-PHP-Replace-mysql-functions-using-the-mysqli-extension.html(you need to register to download it, but that just takes a minute)These are just two files which act as drop-in replacements for the whole mysql extension and very cleverly emulate pretty much everything (using mysqli) without the need to worry much about it. Of course, it's not a perfect solution, but very likely it will work in 99% of all cases out there.Also, a good tutorial for dealing with the chores of migration (listing many of the common pitfalls when migrating) can also be found here: https://www.phpclasses.org/blog/package/9199/post/3-Smoothly-Migrate-your-PHP-Code-using-the-Old-MySQL-extension-to-MySQLi.html(if you're reading this in 2030 and the PHPclasses website is down, well, you can always try archive.org :-)Here is a complete tutorial how to make it quickly if you need to make worgking again a website after PHP upgrade. I used it after upgrading hosting for my customers from 5.4 (OMG!!!) to 7.x PHP version.First of all, you need to put the connection to a new variable $link or $con, or whatever you want.ExampleChange the connection from :or to: With Notepad++ I use "Find in files" (Ctrl + Shift + f) :in the following order I choose "Replace in Files" :if you get errors it is maybe because your $con is not accessible from your functions.You need to add a global $con; in all your functions, for example :In SQL class, you will put connection to $this->con instead of $con.  and replace it in each functions call (for example : mysqli_query($con, $query);)My simple shell script to change mysql to mysqli in all php files in directory:You can do a mass find and replace using notepad++ for the following, it worked for me:Find: mysql_Replace: mysqli_Find: _query(Replace: _query($conn, The following needs changing but it depends how you're connecting...Update connection string in config.php to following:

PHP Coding styles return; in switch/case

opHASnoNAME

[PHP Coding styles return; in switch/case](https://stackoverflow.com/questions/1437461/php-coding-styles-return-in-switch-case)

we're trying to implement new coding style guidelines for our team, the php codesniffer is printing an warning on switch case statements when no "break" is found like:is there any good reason to use :?? the break is never reached ?

2009-09-17 08:26:06Z

we're trying to implement new coding style guidelines for our team, the php codesniffer is printing an warning on switch case statements when no "break" is found like:is there any good reason to use :?? the break is never reached ?It's perfectly valid to leave out the break when you return from a switch.But it's fairly common practise to add explicit breaks to every case as a defensive programming practise.The idea is that should you later change your code in case 1 and remove the return statement, you could forget to add a break.That would accidentally cause program flow to fall through to case 2.Falling through case statements is slightly unusual and you should add a comment to your code when you do it to show that it's intentional.As with many defensive programming practises you've got to balance whether the code bloat - which potentially clutters your code and make it less readable - is worth it or not.If your "php codesniffer is printing a warning" try to get another better codesniffer and don't forget to try to use the last PHP stable version. You can, of course, write a breakafter one return, but it doesn't make sense, because it will never be read at all. Your code is OK.Look at this:In my opinion, this is simpler and better: fewer lines => less code to maintain :-)I have much better solution.Please follow below code for above switch statment:It will not result in any error and code is also fine with concepts.To answer your question, no there's no good reason to have something that does nothing. Think about it this way, a comment after the return instead of a break saying "don't forget" will have the same affect - none. And put that way it sounds silly, right?  Unless you need to set a var to use later, I'd suggest the approach you have is perfectly fine. I knew the code's intent within 2 seconds from looking at it. Having a break just creates confusion.There is no one size fits all really. The correct approach depends on whichever fits the scenario. Set a variable in each case and having a break may be the right way, or perhaps just return makes sense.   

   Some observations on other suggestions made in answers:  1) Not having a break after return means problems could arise if code is later changed  Whenever possible, code should be explicit, as well as readable and clear. We can also code in a way to make future changes easier. But in something as simple as a switch it should be no problem and need no safety net to refactor a case later to add or remove a return or break.In fact, if you removed a return and "didn't notice there was no break" then that's a poor mistake and could be made in any part of coding. No gotcha checking will save you from that. And one should be very careful coding for future potentials, as that potential may never happen, or something else may happen, and you just end up maintaining obsolete code for years.  In the same vein this was argued to be a safety net for future changes - What if you remove the return and accidentally left in that safety net break when you should have removed it?  Even if this switch statement was a life or death scenario, really serious code, I would be against adding the "pointless" break after the return. Just make sure whoever was working on the code knew what they were doing, and it was code reviewed by enough eyes and tested fully.

If it was that serious, then you'd have additional checks in place better than a proposed safety net to catch sloppy devs.  To argue that break after return adds a safety net, means you're not coding or testing properly. If this is a safety net deemed useful then it's likely there are tons of bugs in the code in potentially more serious places.  The wiki article of "Defensive Programming" was linked to, but it's not relevant here:Leaving a safety net break in is not a scenario of unforeseen circumstances, nor defensive programming. It's just bad coding, and you can't litter your code with back up code just in case you don't code correctly when you change something. That's such a bad approach to coding. The argument that "if someone removed return it won't work", well you could also have a typo in the case var, or forget to write the case, or...The return returns, and you don't code "defensively" to avoid a return failing. That would mean PHP is broken, and you aint gonna fill your code with safety nets to cater for that. That's something you have on a much higher level up.  2) break after return keeps it explicit  But it's explicitly wrong. The return returns, so the break won't happen. To me that is scratch head time wondering if I've missed the intent - not for long as it's clear what will happen, but there will be a moment where I ponder it to make sure I've not missed something.While it's not invalid or error to have a return and then break in the same case, it's just entirely pointless as the break does nothing. It's pointless code that needs to be seen, maintained, and figured out as it's not logical. If explicit is the core goal and having a break after a return urks you because it's pointless, then I'd say it'd be better to set a variable and break, then return the variable after breaking from the switch.

Like @RageZ answer https://stackoverflow.com/a/1437476/2632129   3) Set a variable and return after the switch statement is completed  There's nothing wrong with this approach at all, but if there's no reason to store the value in a variable (later use etc) then it's good to return immediately when there's no need to hang around to do anything else.  That shows clear intent - return a value as soon as the case is matched.I am not an expert in perfect coding but I think the validator would prefer something like thatI think using return in case statement to break the flow of the code is not really a best practice. So that's why the validator say there is no break ...For your question about at category, I don't know ... sorryFrom the PHP manual (http://us3.php.net/manual/en/control-structures.switch.php) :PHP continues to execute the statements until the end of the switch block, or the first time it sees a break statement. If you don't write a break statement at the end of a case's statement list, PHP will go on executing the statements of the following case. For example:Here, if $i is equal to 0, PHP would execute all of the echo statements! If $i is equal to 1, PHP would execute the last two echo statements. You would get the expected behavior ('i equals 2' would be displayed) only if $i is equal to 2. Thus, it is important not to forget break statements (even though you may want to avoid supplying them on purpose under certain circumstances). 

Resolution: This table does not contain a unique column. Grid edit, checkbox, Edit, Copy and Delete features are not available

OldWest

[Resolution: This table does not contain a unique column. Grid edit, checkbox, Edit, Copy and Delete features are not available](https://stackoverflow.com/questions/18922503/resolution-this-table-does-not-contain-a-unique-column-grid-edit-checkbox-ed)

This is not a question but a self generated problem/question and solution that I found working. I thought it would be decent courtesy to share since there was not a complete working solution I could find.The error generated in phpMyAdmin is:"This table does not contain a unique column. Grid edit, checkbox, Edit, Copy and Delete features are not available."There are several working solutions depending on your exact scenario.For example, as long as all of your AI or Unique identifier field are unique then you can simply alter the table and ensure this is the Primary key and set to unique value.I solved this with this solution on one of my tables.The other table had multiple AI int values that were the Primary field, but there were multiple values of the same kind. The simple fix for this was to just add a column to the end of the table as Unique AI Int. Basically all MySQL is saying is it needs a unique value in each record to differentiate the rows.Hope this was helpful.

2013-09-20 17:25:07Z

This is not a question but a self generated problem/question and solution that I found working. I thought it would be decent courtesy to share since there was not a complete working solution I could find.The error generated in phpMyAdmin is:"This table does not contain a unique column. Grid edit, checkbox, Edit, Copy and Delete features are not available."There are several working solutions depending on your exact scenario.For example, as long as all of your AI or Unique identifier field are unique then you can simply alter the table and ensure this is the Primary key and set to unique value.I solved this with this solution on one of my tables.The other table had multiple AI int values that were the Primary field, but there were multiple values of the same kind. The simple fix for this was to just add a column to the end of the table as Unique AI Int. Basically all MySQL is saying is it needs a unique value in each record to differentiate the rows.Hope this was helpful.I have been faced this problem.

The cause is your table don't have a primary key field.

And I have a simple solution: Set a field to primary key to specific filed that suit with your business logic.

For example, I have database thesis_db and field thesis_id, I will press button Primary (key icon) to set thesis_id to become primary key field:

This is not an error. PhpMyAdmin is just informing you, that there is no unique ID column in your result set. Depending on the type of query you sent, this is the desired behaviour.It is not MySQL which is saying it needs a unique ID, if any combination of the columns in your result set is unique, the values of those columns can be used in an UPDATE or DELETE query. It is phpMyAdmin which says it does not have enough information to offer you the checkboxes and buttons you will normally see in a result set with unique ID.My case is different.  This issue is only specific to PHPMyAdmin. I downloaded couple other admin tools (Adminer, MySQLWorkbench, HeidiSQL etc) and the same db works fine in all of those.I have all the indexes, primary key and unique keys defined and still get the error. I get this after I upgraded to MySQL 5.6 (did not face the same with the previous versions).  Turns out PMA has issues with Table names in capital.  PMA is not able to recognise keys with capital table names. Once I change them to small (ALTER TABLE mytable ENGINE=INNODB -- I use INNODB -- does that for each table without changing anything else), I was able to access normally. I'm on a Windows system with UniformServer.Simply create a new column, set the Name to whatever you like, set the Type to INT and check the box that says A_I.

The A_I checkbox stands for AUTO_INCREMENT, which essentially means that sequence numbers are assigned automatically in that new column (see below). This column essentially acts as a reference for phpMyAdmin to delete rows from. If necessary, click on the unique button for this new column, although this happened automatically for me. After following the above steps, you should no longer have the error message and buttons should appear for editing rows in phpMyAdmin!An easy fix to this would be going to the SQL tab and just simply put in the code Asuming that you have a row named id.This is how you get rid of that notice and be able to open those grid cells for edit1) click "STRUCTURE" 2) go to the field you want to be a primary key (and this usually is the 1st one ) and then click on the "PRIMARY" and "INDEX" fields for that field and accept the PHPMyadmin's pop-up question "OK". 3) pad yourself in the back.Adding this in the config.inc.php file worked for me (under the last $cfg line):$cfg['RowActionLinksWithoutUnique'] = 'true';The file should be located in the phpMyAdmin folder on your local computerIn my case, the error occured in phpmyadmin version 4.5.1 when i set lower_case_table_names = 2 and had a table name with uppercase characters, The table had a primary key set to auto increment but still showed the error. The issue stopped when i changed the table name to all lowercase.I have been faced this problem.The cause is your table don't have a primary key field.And I have a simple solution: Set a field to primary key to specific filed that suit with your business logic.

For example, I have database thesis_db and field thesis_id, I will press button Primary (key icon) to set thesis_id to become primary key fieldI recently got the same problem and after looking for duplicates I was able to fix it just by setting (missing) primary key on the table. Hope this could help This question helped me identify the problem of why phpMyAdmin refused me grid-edit-etc. on some tables. I just had forgotten to declare my primary key and was overseeing it in my  "Why the hell should this table be different from its neighbours" solution search process...I just wanted to react on following in OP self-answer:  This was actually my case, but there's absolutely no need to add any column: if your primary key is the combination of 2 fields (ex. junction table in many to many relationship), then simply declare it as such:

- eiter in phpyAdmin, just enter "2" in "Create an index on [x] columns", then select your 2 columns

- or ALTER TABLE mytable ADD PRIMARY KEY(mycol1,mycol2)I got this error when trying to modify directly after running Query. Turns out, after making a view from that exact same query, I was able to modify the values.I faced the same problem whenever i am firing SELECT query with specific columns, though the one of the column is primary in table. I was trying to fetch selective records with selective columns in standard wordpress "posts" table. ID column is already primary and unique..My PMA is 4.3.8. Let me know if this helps..the code that worked for meThis for me was resolved by re-exporting the data from original source DB and then importing it into the mirror DB.Make sure all your tables have one primary key. I forgot to add a primary key to one table and that solved this problem for me. :) 

json_encode(): Invalid UTF-8 sequence in argument

Artjom Kurapov

[json_encode(): Invalid UTF-8 sequence in argument](https://stackoverflow.com/questions/10205722/json-encode-invalid-utf-8-sequence-in-argument)

I'm calling json_encode() on data that comes from a MySQL database with utf8_general_ci collation. The problem is that some rows have weird data which I can't clean. For example symbol �, so once it reaches json_encode(), it fails with json_encode(): Invalid UTF-8 sequence in argument.I've tried utf8_encode() and utf8_decode(), even with mb_check_encoding() but it keeps getting through and causing havoc. Running PHP 5.3.10 on Mac. So the question is - how can I clean up invalid utf8 symbols, keeping the rest of data, so that json_encoding() would work?Update. Here is a way to reproduce it:

2012-04-18 08:35:13Z

I'm calling json_encode() on data that comes from a MySQL database with utf8_general_ci collation. The problem is that some rows have weird data which I can't clean. For example symbol �, so once it reaches json_encode(), it fails with json_encode(): Invalid UTF-8 sequence in argument.I've tried utf8_encode() and utf8_decode(), even with mb_check_encoding() but it keeps getting through and causing havoc. Running PHP 5.3.10 on Mac. So the question is - how can I clean up invalid utf8 symbols, keeping the rest of data, so that json_encoding() would work?Update. Here is a way to reproduce it:I had a similar error which caused json_encode to return a null field whenever there was a hi-ascii character such as a curly apostrophe in a string, due to the wrong character set being returned in the query.The solution was to make sure it comes as utf8 by adding:after the mysql connect statement.Seems like the symbol was Å, but since data consists of surnames that shouldn't be public, only first letter was shown and it was done by just $lastname[0], which is wrong for multibyte strings and caused the whole hassle. Changed it to mb_substr($lastname, 0, 1) - works like a charm.The problem is that this character is UTF8, but json_encode does not handle it correctly.

To say more, there is a list of other characters (see Unicode characters list), that will trigger the same error, so stripping off this one (Å) will not correct an issue to the end.What we have used is to convert these chars to html entities like this:Make sure that your connection charset to MySQL is UTF-8. It often defaults to ISO-8859-1 which means that the MySQL driver will convert the text to ISO-8859-1.You can set the connection charset with mysql_set_charset, mysqli_set_charset or with the query SET NAMES 'utf-8'Using this code might help. It solved my problem!  or like thatThe symbol you posted is the placeholder symbol for a broken byte sequence. Basically, it's not a real symbol but an error in your string.What is the exact byte value of the symbol? Blindly applying utf8_encode is not a good idea, it's better to find out first where the byte(s) came from and what they mean.Another thing that throws this error, when you use php's json_encode function, is when unicode characters are upper case \U and not lower case \ujson_encode works only with UTF-8 data. You'll have to ensure that your data     is in UTF-8. alternatively, you can use iconv() to convert your results to UTF-8 before feeding them to json_encode()Updated.. I solved this issue by stating the charset on PDO connection as below:"mysql:host=$host;dbname=$db;charset=utf8"All data received was then in the correct charset for the rest of the code to useUsing setLocale('fr_FR.UTF8') before json_encode solved the problem.

How to reverse htmlentities()?

Uli

[How to reverse htmlentities()?](https://stackoverflow.com/questions/6465263/how-to-reverse-htmlentities)

For special characters like áéí, I can call htmlentities():To get the corresponding html entities: How can I reverse this back to áéí ?

2011-06-24 08:31:15Z

For special characters like áéí, I can call htmlentities():To get the corresponding html entities: How can I reverse this back to áéí ?If you use htmlentities() to encode, you can use html_entity_decode() to reverse the process:e.g.You want to look at html_entity_decode and worry about which charset you should be using (probably ISO8859-1).It may also be worth reading this article about character sets etc.I think you are looking for html_entity_decode.html_entity_decode(). This can be found at the very beginning of the documentation for htmlentities

Consuming my own Laravel API

robjmills

[Consuming my own Laravel API](https://stackoverflow.com/questions/16520691/consuming-my-own-laravel-api)

I'm developing a Laravel 4 app that will make the same CRUD operations on my dataset available through a JSON REST API and a Web UI. It seems that to prevent breaking the DRY principle that my UI should consume my own API by routing all requests from the UI back to the API. I'm unsure though about the best approach to making this work. Presumably I would have separate UI and API controllers and somehow route the requests through. Or should I be looking at a different approach altogether?Thanks.

2013-05-13 11:12:27Z

I'm developing a Laravel 4 app that will make the same CRUD operations on my dataset available through a JSON REST API and a Web UI. It seems that to prevent breaking the DRY principle that my UI should consume my own API by routing all requests from the UI back to the API. I'm unsure though about the best approach to making this work. Presumably I would have separate UI and API controllers and somehow route the requests through. Or should I be looking at a different approach altogether?Thanks.I'm actually tinkering with the same idea and it's pretty neat. With Laravel you do have the ability to make internal requests (some might refer to this as HMVC, but I won't). Here's the basics of an internal request.$response will now contain the returned response of the API. Typically this will be returned a JSON encoded string which is great for clients, but not that great for an internal API request. You'll have to extend a few things here but basically the idea is to return the actual object back through for the internal call, and for external requests return the formatted JSON response. You can make use of things like $response->getOriginalContent() here for this kind of thing.What you should look at doing is constructing some sort of internal Dispatcher that allows you to dispatch API requests and return the original object. The dispatcher should also handle malformed requests or bad responses and throw exceptions to match.The idea itself is solid. But planning an API is hard work. I'd recommend you write up a good list of all your expected endpoints and draft a couple of API versions then select the best one.NOTE: As vcardillo pointed out below, route filters are not called with these methods.I am currently doing the same thing, and Jason's answer got me going in a great direction. Looking at the Symfony\Component\HttpFoundation\Request documentation, I figured out how to POST, as well as everything else I'd need to do. Assuming you're using a form, here is some code that could help you:GET:POST:POST w/ cookiesPOST w/ filesI hope this helps someone else. If you aren't using a form, or you are but not using Laravel's Input / Cookie facade, replace the Input / Cookie facades with your own content.Taylor Otwell suggested using app()->handle() rather than Route::dispatch() to achieve a clean request.For Route::dispatch($request) I noticed if the endpoint of your non-GET request (parameters on the HTTP request body) uses a dependency injected \Illuminate\Http\Request or \Illuminate\Foundation\Http\FormRequest extending instance, state of the parameters, cookies, files, etc. are from the original HTTP request. i.e., for your application's controller action method.If parameter names and post method type for your app controller and API controller are the same, you won't notice the difference since the original parameter values are passed on. But when you're manually assembling the 3rd parameter of Request::create(), Route::dispatch() will result in it being ignored.app()->handle() fixes that context problem in the Laravel request lifecycle.Caveat: app()->handle() affects  Illuminate\Support\Facades\Request, refreshing it with this new request instance. As a knock-on effect, calls like Request::isXmlHttpRequest() or redirect()->back() invoked after app()->handle() will cause unpredictable behaviour. I'd suggest tracking the context of your original request and instead use redirect()->to(route('...')) so you strictly control flow and state of your app.Given all these corner cases, it may be best to just do a manual curl using a Guzzle HTTP client.If you're consuming your own API, use app()->handle() instead of Route::dispatch() as Derek MacDonald has suggested.app()->handle() creates a fresh request, while Route::dispatch() runs the route within the stack, effectively ignoring parameters that are part of the request that you're sending.Edit: Just a heads-up. Taylor Otwell advises against using sub-requests to make internal API calls, as they mess the current route. You can an HTTP API client like Guzzle instead to make the API calls.If you are looking for using passport login api internally, then you need to add the parameters to original request:You can use Optimus API consumer, the API is clean and simple, example making an internal request:In it's core, it uses Illuminate\Routing\Router and Illuminate\Http\Request to make the callIf you are looking for using passport login api internally, then you need to add the parameters to original request:

Laravel - Using (:any?) wildcard for ALL routes?

qwerty

[Laravel - Using (:any?) wildcard for ALL routes?](https://stackoverflow.com/questions/13297278/laravel-using-any-wildcard-for-all-routes)

I am having a bit of trouble with the routing.I'm working on a CMS, and i need two primary routes. /admin and /(:any). The admin controller is used for the route /admin, and the view controller should be used for anything else than /admin. From the view controller, i will then parse the url and show the correct content.This is what i have:The first route works, but the second one doesn't. I played around with it a little bit, and it seems if i use (:any) without the question mark, it only works if i put something after /. If i do put the question mark there, it doesn't work at all.I want all of the following routes to go to view@index:Is this possible without hardcoding a bunch of (:any?)/(:any?)/(:any?)/(:any?) (which i don't even know works)?What's the best way to go about this?

2012-11-08 20:29:31Z

I am having a bit of trouble with the routing.I'm working on a CMS, and i need two primary routes. /admin and /(:any). The admin controller is used for the route /admin, and the view controller should be used for anything else than /admin. From the view controller, i will then parse the url and show the correct content.This is what i have:The first route works, but the second one doesn't. I played around with it a little bit, and it seems if i use (:any) without the question mark, it only works if i put something after /. If i do put the question mark there, it doesn't work at all.I want all of the following routes to go to view@index:Is this possible without hardcoding a bunch of (:any?)/(:any?)/(:any?)/(:any?) (which i don't even know works)?What's the best way to go about this?Edit: There has been some confusion since the release of Laravel 4 regarding this topic, this answer was targeting Laravel 3.There are a few ways to approach this.The first method is matching (:any)/(:all?):Not the best solution because it gets broken into multiple parameters, and for some reason (:all) doesn't work by itself (bug?)The second solution is to use a regular expression, this is a better way then above in my opinion.There is one more method, which would let you check if there are cms pages even when the route may have matched other patterns, provided those routes returned a 404. This method modifies the event listener defined in routes.php:However, my preferred method is #2. I hope this helps. Whatever you do, make sure you define all your other routes above these catch all routes, any routes defined after will never trigger.This solution works fine on Laravel 5:This is for Lumen instead:Hitting a 404 status seems a bit wrong to me. This can get you in all kind of problems when logging the 404's. I recently bumped into the same wildcard routing problem in Laravel 4 and solved it with the following snippet:This should solve your problem in a controlled way. The regular expression can be simplified to:But you should use this at your own risk.Edit (addition):As this overwrites a lot of routes, you should consider wrapping it in an "App::before" statement:This way, it will not overwrite custom routes you define later on.The above code will capture the recursive sub urls you mentioned:Any other special cases, such as admin/*, you can capture before this one.Add this in the end of routes filefrom http://scotch.io/tutorials/simple-and-easy-laravel-routingJust spelling-out my experience in case it helps someone piece something together.I built a self-API-consuming React app on Laravel.

It has a single view served by Laravel/Lumen.

It uses the React router.

Clicking links in the app always worked, but typing-in URLs needed the following consideration:In Laravel I used the following in my web.php routes file:And everything worked.Then I switched the project to Lumen.

Thanks to this post, I used the following in my web.php routes file:This worked for first level URLS such as:However,did not.I looked in the network tab in Google Developer tools and noticed that the URL for app.js was appending /something in front of app.js on second and higher tier URLS, such as:All I had to do was add a leading slash to my app.js source  in my single view page such as:Instead of:so:This worked in Laravel (It was a Blade file that may have automatically resolved the js/app.js URL)withBut, I had to do this in Lumen (Not a Blade file):withThanks for the solution William. However methods 1 & 2 aren't working anymore Laravel 4, and in order to use solution #3 in Laravel 4 you will have to fire the 404 event in your start/global.php file.Now we can handle this in our routes.php file:Having basic lumen scaffolding. In my case, I have 2 frontend apps and api routes

Return the portion of a string before the first occurrence of a character in php

Travis

[Return the portion of a string before the first occurrence of a character in php](https://stackoverflow.com/questions/3766301/return-the-portion-of-a-string-before-the-first-occurrence-of-a-character-in-php)

In PHP, what is the simplest way to return the portion of a string before the first occurrence of a specific character?For example, if I have a string..."The quick brown foxed jumped over the etc etc."...and I am filtering for a space character (" "), the function would return

"The"Thanks!

2010-09-22 04:27:13Z

In PHP, what is the simplest way to return the portion of a string before the first occurrence of a specific character?For example, if I have a string..."The quick brown foxed jumped over the etc etc."...and I am filtering for a space character (" "), the function would return

"The"Thanks!You could do this:But I like this better:for googlers: strtok is better for thatPrints The.How about this:

Fatal error: Call to undefined function imap_open() in PHP

Sumit

[Fatal error: Call to undefined function imap_open() in PHP](https://stackoverflow.com/questions/9654453/fatal-error-call-to-undefined-function-imap-open-in-php)

I am trying to access my gmail account through my localhost. However, I am getting the response:This is my code:

2012-03-11 11:16:47Z

I am trying to access my gmail account through my localhost. However, I am getting the response:This is my code:Simple enough, the IMAP extension is not activated in your PHP installation. It is not enabled by default. If your local installation is running XAMPP on Windows, you have to enable it as described in the XAMPP FAQ:The Installation Procedure is always the same, but the package-manager and package-name varies, depending which distribution, version and/or repository one uses. In general, the steps are:On Ubuntu the APT package php5-imap (or php-imap) can bei installed with apt-get:On Debian, the APT package php5-imap can be installed aptitude (or apt-get):On CentOS and Fedora the RPM package php-imap can be installed with yum (hint: the name of the package might be something alike php56w-imap or php71w-imap, when using Webtatic repo):On systemd systems, while using systemd units, the command to restart unit httpd.service is:The solution stated above has the problem, that when the module was already referenced in:It might throw a:That happens, because it is referenced in the default php.ini file (at least on Ubuntu 12.04) and a PHP module must at most be referenced once. Using INI snippets to load modules is suggested, while the the directory /etc/php5/conf.d/ (that path may also vary) is being scanned for INI files:Ubuntu also features proprietary commands to manage PHP modules, to be executed before restarting the web-server:Once the IMAP module is loaded into the server, the PHP IMAP Functions should then become available; best practice may be, to check if a module is even loaded, before attempting to utilize it.In Ubuntu for install imap useUbuntu 14.04 and above useAnd imap by default not enabled by PHP so use this command to enable imap extensionThen restart your Apacheif you are on linux, edit the /etc/php/php.ini (or you will have to create a new extension import file at /etc/php5/cli/conf.d) file so that you add the imap shared object file and then, restart the apache server. Uncommentso that it becomes like this:Then, restart the apache byWith you can find out which php.ini has been used by this instance of php.During migration from Ubuntu 12.04 to 14.04 I stumbled over this as well and wanted to share that as of Ubuntu 14.04 LTS the IMAP extension seems no longer to be loaded per default.Check to verify if the extension is installed:should give a response like this:if not, install it.To actually enable the extensionshould fix it for apache. For CLI do the same in /etc/php5/cli/conf.dOn Mac OS X with Homebrew, as obviously, PHP is already installed due to provided error we cannot run:Also, installing module only, here will not work:So, we must reinstall it:if it is centos with php 5.3 installed.and restart apache or Ubuntu with Nginx and PHP-FPM 7 use this: sudo apt-get install php-imapservice php7.0-fpm restart

service ngnix restartcheck the module have been installed

php -m | grep imapConfiguration for module imap will be enabled automatically, both at cli php.ini and at fpm php.ininano /etc/php/7.0/cli/conf.d/20-imap.ini

nano /etc/php/7.0/fpm/conf.d/20-imap.iniIf your local installation is running XAMPP on Windows , That's enough :

 you can open the file "\xampp\php\php.ini" to activate the php exstension by removing the beginning semicolon at the line ";extension=php_imap.dll". It should be:toTo install IMAP on PHP 7.0.32 on Ubuntu 16.04. Go to the given link and based on your area select link. In my case, I select a link from the Asia section. Then a file will be downloaded. just click on the file to install IMAP .Then restart apachehttps://packages.ubuntu.com/xenial/all/php-imap/download.to check if IMAP is installed check phpinfo file.incase of successful installation 

IMAP c-Client Version    2007f will be shown.For Xampp 7.3.9 PHP.ini  line 913:You should remove the semicolon.

PHP preg replace only allow numbers

Ryan

[PHP preg replace only allow numbers](https://stackoverflow.com/questions/7688844/php-preg-replace-only-allow-numbers)

How can I modify this existing preg_replace to only allow numbers?

2011-10-07 14:42:25Z

How can I modify this existing preg_replace to only allow numbers?I think you're saying you want to remove all non-numeric characters. If so, \D means "anything that isn't a digit":Try this:This should do what you want:You could also use T-Regx library:T-Regx also:

Can I include code into a PHP class?

openfrog

[Can I include code into a PHP class?](https://stackoverflow.com/questions/1957732/can-i-include-code-into-a-php-class)

I want to make a PHP class, lets say Myclass.php. Now inside that class I want to define just the class itself and some instance variables. But all the methods must come from a Myclass_methods.php file. Can I just include that file into the class body?I have good reasons why I want to seperate this. In short, I'll have a backend in which I can change the business logic of a class, while all other things must remain untouched. The system maintains all the ORM and other stuff for me.But if this is a bad idea, it might be better to re-generate the whole class file after editing the business logic (so, the user-defined methods in this case).Performance question: If during one request Myclass.php is included just once, actually that Myclass_methods.php should also be included just once. Might be wrong. Experts?

2009-12-24 10:19:47Z

I want to make a PHP class, lets say Myclass.php. Now inside that class I want to define just the class itself and some instance variables. But all the methods must come from a Myclass_methods.php file. Can I just include that file into the class body?I have good reasons why I want to seperate this. In short, I'll have a backend in which I can change the business logic of a class, while all other things must remain untouched. The system maintains all the ORM and other stuff for me.But if this is a bad idea, it might be better to re-generate the whole class file after editing the business logic (so, the user-defined methods in this case).Performance question: If during one request Myclass.php is included just once, actually that Myclass_methods.php should also be included just once. Might be wrong. Experts?No. You cannot include files in the class body.

In a file defining a class, you may only include files in a method body or outside the class body.From your description I take you want this:Running this code will result inWhat is possible though is thisDoing it this way, will import the contents of the include file into the method scope, not the class scope. You may include functions and variables in the include file, but not methods. You could but should not put entire scripts into it as well and change what the method does, e.g.However, patching the class this way to exhibit different behavior is not how you should do it in OOP. It's just plain wrong and should make your eyes bleed.Since you want to dynamically change behavior, extending the class is also not a good option (see below why). What you really will want to do is write an interface and make your class use objects implementing this interface, thus making sure the appropriate methods are available. This is called a Strategy Pattern and works like this:Now you got the contract that all Meowing Behaviors must obey, namely having a meow method. Next define a Meowing Behavior:Now to use it, use:    By adding the Meowing TypeHint to setMeowing, you make sure that the passed param implements the Meowing interface. Let's define another Meowing Behavior:Now, you can easily interchange behaviors like this:While you also could have solved the above with inheritance by defining an abstract BaseCat and meow method and then deriving concrete RegularCat and Lolkat classes from that, you have to consider what you want to achieve. If your cats will never change the way they meow, go ahead and use inheritance, but if your RegularCat and Lolkat is supposed to be able to do arbitrary meows, then use the Strategy pattern.For more design patterns in PHP, check these resources:Might it not be an idea to create the core class with the relevant base functionality and then extend this with the required methods - it seems like a more logical approach.I'll start by saying I'm not too clear why this problem is not best solved using a base class containing the methods, subclasses containing the data, and dynamic class loading. I'll assume you have a good reason.Once your provider supports PHP 5.4 you can do what you want using traits.Code File:File cat.phpFile dog.phpYou could make this even cleaner by naming both include files the same, putting them in different subdirectories, and using set_include_path() or defining an __autoload() function to select between them. Like I said though, this same problem could be solved better using inheritance. If you have a multiple-inheritance type problem though, if for instance you have four kinds of pets with five kinds of colors with three hair types and you need a different combination of methods for each of the 60 different classes, this is the right solution.5.4 is currently just a Release Candidate (as of 2/24/2012) and even once released most hosts will not support it for many months - mine took 18 months after 5.3 was released before they would support it. Until then you must write entirely separate and complete class files. You can however format your classes with an eventual change to traits in mind.Right now you can partially get what you want using magic methods and have an easy upgrade to traits when they are available.Code File:File cat.phpFile dog.phpYou are limited however in that your functions can not access private and protected class properties and methods and you can not use this method to provide magic methods such as __get(). Traits will solve both of those limitations.What about using traits for this? Would that be an acceptable option? This is something I am currently experimenting with and it seems to work quite while. A simplified version of what I am doing is basically like this. I have an application with shared core files and multiple projects. Within those projects i have modules. I want to have functions that are available for the entire project on a core level but only for that specific project.My project controller Extensions fileModule file in the projectSince PHP5.4 release you can create dynamic objects like this: https://github.com/ptrofimov/jslikeobjectBut this is scarcely the best practice.Reviving an old question but this is a fairly simple solution.  Do you need the common function calls to be exclusive to your class?  If not, simply include your common function file(s) within the same scope as your class.  You will need to create methods in your class but they will only need to call the common function.  Here's a simple SOAP server example:post_function.php    I have had to do what you are describing in cases where I maintain a free version and a premium version of the same software.  Because, as @Gordon noted, you cannot do exactly this: Instead I do this: For functions you want to reference, create class methods in the main class, and call the included file's method, passing the $this pointer as a parameter.  So that I can tell at a glance where functions are, I will prefix the name of the included functions as shown below: I came across this recently, and came up with a solution, that helped in my case.  I wanted many functions in a class, but the class became bloated, so wanted to separate out the class functions into groups for readability.  It took a little time to accomplish, but since the functions of the class didn't rely (much) on $this, I removed "$this" from the class functions and created several helper files to include those functions.  When $this was necessary, I could nevertheless move the function into a helper file, by passing $this to the function, adding public set/get functions where necessary.  It's a hack, but it's sure to help someone`

    class myClass

    {

        var x;`can be worked around to`

    class myClass

    {

        var x;`and helper function set 1

    function myFunc1Group1($THIS_OBJECT)

    {

        $x = $THIS_OBJECT->getX();

        $x++;

        $THIS_OBJECT->setX($x);

    }

    function myFunc2Group1($THIS_OBJECT){}

and helper function set 2, etc.Probably not the best route in all cases, but helped me out a lot.  Basically the class functions were only to construct and delegate, and the calculations were put into helpers.

How to check whether the user uploaded a file in PHP?

Click Upvote

[How to check whether the user uploaded a file in PHP?](https://stackoverflow.com/questions/946418/how-to-check-whether-the-user-uploaded-a-file-in-php)

I do some form validation to ensure that the file a user uploaded is of the right type. But the upload is optional, so I want to skip the validation if he didn't upload anything and submitted the rest of the form. How can I check whether he uploaded something or not? Will $_FILES['myflie']['size'] <=0 work?

2009-06-03 18:38:53Z

I do some form validation to ensure that the file a user uploaded is of the right type. But the upload is optional, so I want to skip the validation if he didn't upload anything and submitted the rest of the form. How can I check whether he uploaded something or not? Will $_FILES['myflie']['size'] <=0 work?You can use is_uploaded_file():From the docs:EDIT: I'm using this in my FileUpload class, in case it helps:This code worked for me. I am using multiple file uploads so I needed to check whether there has been any upload.HTML part:PHP part:@karim79 has the right answer, but I had to rewrite his example to suit my purposes.  His example assumes that the name of the submitted field is known and can be hard coded in.  I took that a step further and made a function that will tell me if any files were uploaded without having to know the name of the upload field.You should use $_FILES[$form_name]['error']. It returns UPLOAD_ERR_NO_FILE if no file was uploaded. Full list: PHP: Error Messages ExplainedBut be alert. User can upload any type of file and also can hack your server or system by uploading a malicious or php file. In this script there should be some validations. Thank you.I checked your code and think you should try this:is_uploaded_file() is great to use, specially for checking whether it is an uploaded file or a local file (for security purposes).However, if you want to check whether the user uploaded a file, 

use $_FILES['file']['error'] == UPLOAD_ERR_OK.See the PHP manual on file upload error messages. If you just want to check for no file, use UPLOAD_ERR_NO_FILE.

How to find out what the date was 5 days ago?

Yeti

[How to find out what the date was 5 days ago?](https://stackoverflow.com/questions/2708894/how-to-find-out-what-the-date-was-5-days-ago)

Well, the following returns what date was 5 days ago:But, how do I find what was 5 days ago from any date, not just today?For example: What was 5 days prior to 2008-12-02?

2010-04-25 16:20:02Z

Well, the following returns what date was 5 days ago:But, how do I find what was 5 days ago from any date, not just today?For example: What was 5 days prior to 2008-12-02?I think a readable way of doing that is:find out what the date was 5 days ago from today in phpfind out what the date was n days ago from today in phpOther than that, you can use strtotime for any date:Or, as you used, mktime:Well, you get it. The key is to remove enough seconds from the timestamp.5 days ago from a particular date:Try thisSimply do this...hope it helpIf you want a method in which you know the algorithm, or the functions mentioned in the previous answer aren't available: convert the date to Julian Day number (which is a way of counting days from January 1st, 4713 B.C), then subtract five, then convert back to calendar date (year, month, day).  Sources of the algorithms for the two conversions is section 9 of http://www.hermetic.ch/cal_stud/jdn.htm or http://en.wikipedia.org/wiki/Julian_dayUse the built in date_sub and date_add functions to math with dates. (See http://php.net/manual/en/datetime.sub.php)Similar to Sazzad's answer, but in procedural style PHP, General algorithms for date manipulation convert dates to and from Julian Day Numbers.  Here is a link to a description of such algorithms, a description of the best algorithms currently known, and the mathematical proofs of each of them:

http://web.archive.org/web/20140910060704/http://mysite.verizon.net/aesir_research/date/date0.htmsimple way to find the same is 

What does「===」mean?

Tim Sylvester

[What does「===」mean?](https://stackoverflow.com/questions/1117967/what-does-mean)

I've noticed someone using the PHP operator === which I can't make sense out of. I've tried it with a function, and it corresponds in crazy ways.What is the definition of this operator? I can't even find it in the declaration of PHP operators.

2009-07-13 06:39:00Z

I've noticed someone using the PHP operator === which I can't make sense out of. I've tried it with a function, and it corresponds in crazy ways.What is the definition of this operator? I can't even find it in the declaration of PHP operators.PHP Docshttp://www.php.net/ternaryYou can read here, short summary:In PHP you may compare two values using the == operator or === operator. The difference is this:PHP is a dynamic, interpreted language that is not strict on data types. It means that the language itself will try to convert data types, whenever needed.The output is integer value 6, because + is the numerical addition operator in PHP, so if you provide operands with other data types to it, PHP will first convert them to their appropriate type ("2" will be converted to 2) and then perform the operation.If you use == as the comparison operator with two operands that might be in different data types, PHP will convert the second operand type, to the first's. So:4 == "4" // truePHP converts "4" to 4, and then compares the values. In this case, the result will be true.If you use === as the comparison operator, PHP will not try to convert any data types. So if the operands' types are different, then they are NOT identical.4 === "4" // false$x == $y is TRUE if the value of the $x and $y are same:$x === $y TRUE if the value of the $x and $y are same and type of $x and $y are same:You'll see this operator in many dynamically typed languages, not just PHP.== will try to convert whatever it's dealing with into types that it can compare.=== will strictly compare the type and value.In any dynamically typed language you have to be careful with ==, you can get some interesting bugs.The ternary === is less convenient, but it's safer. For comparisons you should always give some additional thought to whether it should be === or ==For PHP, there many different meanings a zero can takeSo === is added to ensure the type and the value are the same. See Double and Triple equals operator in PHP that I got for googling on "PHP three equals operator".At one point it says that:It also gives an example to explain it."===" matching the value in the variable as well as data type of the variable.

How to install php-redis extension using the official PHP Docker image approach?

starikovs

[How to install php-redis extension using the official PHP Docker image approach?](https://stackoverflow.com/questions/31369867/how-to-install-php-redis-extension-using-the-official-php-docker-image-approach)

I want to build my PHP-FPM image with php-redis extension based on the official PHP Docker image, for example, using this Dockerfile: php:5.6-fpm.The docs say that I can install extensions this way, installing dependencies for extensions manually: Without Docker I installed it with apt-get install php5-redis. But how can I install it using the approach above?

2015-07-12 16:15:23Z

I want to build my PHP-FPM image with php-redis extension based on the official PHP Docker image, for example, using this Dockerfile: php:5.6-fpm.The docs say that I can install extensions this way, installing dependencies for extensions manually: Without Docker I installed it with apt-get install php5-redis. But how can I install it using the approach above?Redis is not an extension that is included in「php-src」, therefore you cannot use docker-php-ext-install. Use PECL:My opinion, the easiest way is:RUN pecl install redis && docker-php-ext-enable redis;)I've found two ways to install php-redis extension for official php-fpm Docker image. Here they are:The first way is to compile redis from sources and install.docker-php-ext-install script is included in php-fpm image and can compile extensions and install them.The second way you can do it is with PECL.As TimWolla answered, you can do it with PECL, but in my case, PECL isn't installed by default.Slightly revised version of starikovs and skyred answers for the current PHP 7 version of the docker image (tested on php:7.0.8-fpm-alpine and php:7.0.8-alpine).Uses the newly released 3.0 version (June 2016) for PHP 7.Based on @starikovs answer. I added a variable for docker style.If you want to use redis as session handler;If you want to use redis extension with PHP 7 in 2015 (borrowed from skyred's answer);This works for alpine images:Edit: Added missing backslashI'm using combination of PECL and PHP official docker extension scriptFor PHP7 you need to wait for official redis pecl release or use git:Slightly revised version of starikovs and skyred answers for current version of the docker image.

Tested on php:5-fpm-alpineIn your Dockerfile you can clone the repo and install it with:

PHP standard input?

Chris Lutz

[PHP standard input?](https://stackoverflow.com/questions/554760/php-standard-input)

I know PHP is usually used for web development, where there is no standard input, but PHP claims to be usable as a general-purpose scripting language, if you do follow it's funky web-based conventions. I know that PHP prints to stdout (or whatever you want to call it) with print and echo, which is simple enough, but I'm wondering how a PHP script might get input from stdin (specifically with fgetc(), but any input function is good), or is this even possible?

2009-02-16 22:05:15Z

I know PHP is usually used for web development, where there is no standard input, but PHP claims to be usable as a general-purpose scripting language, if you do follow it's funky web-based conventions. I know that PHP prints to stdout (or whatever you want to call it) with print and echo, which is simple enough, but I'm wondering how a PHP script might get input from stdin (specifically with fgetc(), but any input function is good), or is this even possible?It is possible to read the stdin by creating a file handle to php://stdin and then read from it with fgets() for a line for example (or, as you already stated, fgetc() for a single character):Reading from STDIN is recommended wayTo avoid having to mess around with filehandles, use file_get_contents() and php://stdin:(If you're reading a truly huge amount of data from stdin you might want to use the filehandle approach, but this should be good for many megabytes.)A simple method is You can use fopen() on php://stdin:Grab it all in one shot:IIRC, you may also use the following:Technically the same, but a little cleaner syntax-wise.This also works: When using fgets, it may block in bash scripts, if the stdin isn't set or empty, including while using the @ php error control operator.This behavior can be avoided by setting stream_set_blocking on the php header:As example, to be called as follow:Instead of manually opening STDIN stream, use built in readline() function if you just want to read a single line without too much a hassle :PHP documentation is your friend : 

https://www.php.net/manual/en/function.readline.php

php substr() function with utf-8 leaves � marks at the end

Nazar

[php substr() function with utf-8 leaves � marks at the end](https://stackoverflow.com/questions/9087502/php-substr-function-with-utf-8-leaves-marks-at-the-end)

Here is simple code and it outputs something like this:Бензин Офиси А.С. также производит все типы жира и смазок и их побочных продук�...I tried mb_substr() with no luck. How to do this the right way?

2012-01-31 21:52:32Z

Here is simple code and it outputs something like this:Бензин Офиси А.С. также производит все типы жира и смазок и их побочных продук�...I tried mb_substr() with no luck. How to do this the right way?The comments above are correct so long as you have mbstring enabled on your server.Here's the php docs:http://php.net/manual/en/book.mbstring.phpA proper (logical) alternative for unicode strings;Use the PHP: mb_substr - Manual PHP5 does not understand UTF-8 natively. It is proposed for PHP6, if it ever comes out.Use the multibyte string functions to manipulate UTF-8 strings safely.For instance, mb_substr() in your case.If your strings may contain Unicode (multi-byte) characters and you don’t want to break these, replace substr with one of the following two, depending on what you want:Limit to 142 characters:Limit to 142 bytes:Never use constant in substr function for UTF-8 string:

    $st = substr($text, $beg, 100);

50% chance you will get half of a character at end of string)Do like this:100% resultNo mb_substrIf you want to use strlen function, to calculate length of string, which you want to return and your string $word has UTF-8 encoding, you have to use mb_strlen() function:$foo = mb_substr($word, 0, mb_strlen($word)-1);I hope this solution help you as it helped me a lot.

PHPExcel and Text Wrapping

tehlivi

[PHPExcel and Text Wrapping](https://stackoverflow.com/questions/11299663/phpexcel-and-text-wrapping)

I know that this line of code will make the cell text-wrap:'D1' being the chosen cell.Instead of using this code for every cell I need wrapped, is there a way to make the entire Excel Worksheet automatically wrap everything?Or is there a better practice technique to use for specified columns? 

2012-07-02 19:04:11Z

I know that this line of code will make the cell text-wrap:'D1' being the chosen cell.Instead of using this code for every cell I need wrapped, is there a way to make the entire Excel Worksheet automatically wrap everything?Or is there a better practice technique to use for specified columns? Apply to a range:Apply to a columnApply to column 

convert date string to mysql datetime field

mjr

[convert date string to mysql datetime field](https://stackoverflow.com/questions/2501915/convert-date-string-to-mysql-datetime-field)

I have a bunch of records with dates formatted as a string such as '04/17/2009'I want to convert them to a mysql datetime fieldI plan to use a foreach loop to read the old date value and insert the newly formatted value into a new field in each recordwhat would be the best way to convert that string...I thought php might have a way to do it automatically?thanks

2010-03-23 16:57:04Z

I have a bunch of records with dates formatted as a string such as '04/17/2009'I want to convert them to a mysql datetime fieldI plan to use a foreach loop to read the old date value and insert the newly formatted value into a new field in each recordwhat would be the best way to convert that string...I thought php might have a way to do it automatically?thanksFirst, convert the string into a timestamp:Then do aIf these strings are currently in the db, you can skip php by using mysql's STR_TO_DATE() function.I assume the strings use a format like month/day/year where month and day are always 2 digits, and year is 4 digits.You can support other date formats by using other format specifiers.Use DateTime::createFromFormat like this :You can adapt this to any input format, whereas strtotime() will assume you're using the US date format if you use /, even if you're not.The added 00:00:00 is because createFromFormat will use the current date to fill missing data, ie : it will take the current hour:min:sec and not 00:00:00 if you don't precise it.Then use date() to put it into the correct format.I assume we are talking about doing this in Bash?I like to use sed to load the date values into an array so I can break down each field and do whatever I want with it. The following example assumes and input format of mm/dd/yyyy...you also may want to read up on the date command in linux. It can be very useful:

http://unixhelp.ed.ac.uk/CGI/man-cgi?date Hope that helps... :)-Ryan

PhpStorm Field accessed via magic method

Sizzling Code

[PhpStorm Field accessed via magic method](https://stackoverflow.com/questions/25578649/phpstorm-field-accessed-via-magic-method)

I have ignited datatables Library in my CodeIgniter library folder.Some Code from LibraryThen I called the library in model then I tried to call the library functionsand everything works fine, except that the phpstorm shows me this error:I tried to remove this error with document comments but can't figure out how can I do that.. 

any help will be appreciated.

2014-08-30 03:08:46Z

I have ignited datatables Library in my CodeIgniter library folder.Some Code from LibraryThen I called the library in model then I tried to call the library functionsand everything works fine, except that the phpstorm shows me this error:I tried to remove this error with document comments but can't figure out how can I do that.. 

any help will be appreciated.If you want to remove this without document comments you can uncheck Notify about access to a field via magic method which is found in Project Settings > Inspections > PHP > Undefined > Undefined fieldAs mentioned by LazyOne in the question comments:Snippet from Dmitry Dulepov's article "Quick tip: magic methods and PhpStorm".

How to create an empty array in PHP with predefined size?

Reed Richards

[How to create an empty array in PHP with predefined size?](https://stackoverflow.com/questions/5385433/how-to-create-an-empty-array-in-php-with-predefined-size)

I am creating a new array in a for loop.PHP keeps complaining about the offset since for each iteration I add a new index for the array, which is kind of stupid. Is there some way to predefine the number items in the array so that PHP will not show this notice?In other words, can I predefine the size of the array in a similar way to this?

2011-03-22 00:39:36Z

I am creating a new array in a for loop.PHP keeps complaining about the offset since for each iteration I add a new index for the array, which is kind of stupid. Is there some way to predefine the number items in the array so that PHP will not show this notice?In other words, can I predefine the size of the array in a similar way to this?There is no way to create an array of a predefined size without also supplying values for the elements of that array.The best way to initialize an array like that is array_fill. By far preferable over the various loop-and-insert solutions.Every position in the $my_array will contain $some_data.The first zero in array_fill just indicates the index from where the array needs to be filled with the value.You can't predefine a size of an array in php. A good way to acheive your goal is the following:Note that it is way faster to use array_fill() to fill an Array :If you want to verify if a value has been set at an index, you should use the following:

array_key_exists("key", $array) or isset($array["key"])See array_key_exists

, 

isset

and

array_fillPossibly related, if you want to initialize and fill an array with a range of values, use PHP's (wait for it...) range function:PHP Arrays don't need to be declared with a size.You also shouldn't get a warning/notice using code like the example you have shown. The common  Notice people get is "Undefined offset" when reading from an array.A way to counter this is to check with isset or array_key_exists, or to use a function such as:So that you can avoid the repeated code.Note: isset returns false if the element in the array is NULL, but has a performance gain over array_key_exists.If you want to specify an array with a size for performance reasons, look at:SplFixedArray in the Standard PHP Library.There is also array_pad. You can use it like this:For initializing with zeros the $number_of_items positions of the array $data.PHP provides two types of array.normal array : This array is dynamic.SplFixedArray : this is a standard php library which provides the ability to create array of fix size.You can use  PHP documentation more info check this link

https://www.php.net/manual/en/splfixedarray.setsize.php

How can I employ「if exists」for creating or dropping an index in MySQL?

Paul

[How can I employ「if exists」for creating or dropping an index in MySQL?](https://stackoverflow.com/questions/2480148/how-can-i-employ-if-exists-for-creating-or-dropping-an-index-in-mysql)

I was wondering if there's a way to check if an index exists before creating it or destroying it on MySQL. It appears that there was a feature request for this a few years back, but I can't find any documentation for a solution. This needs to be done in a PHP app using MDB2.

2010-03-19 19:47:12Z

I was wondering if there's a way to check if an index exists before creating it or destroying it on MySQL. It appears that there was a feature request for this a few years back, but I can't find any documentation for a solution. This needs to be done in a PHP app using MDB2.Here is my 4 liner:IF EXISTS modifier is not built for DROP INDEX or CREATE INDEX yet. But you can check manually for the existence before creating/dropping an index.Use this sentence to check whether the index already exists.Here is a DROP INDEX IF EXISTS procedure:This code was created based on the procedure from here: Determining if MySQL table index exists before creatingI tweaked answers found here and else where to come up with the following sprocs for dropping & creating indexes. Note that the AddTableIndex sproc can drop the index if need be. They also accept a schema name which was critical for my uses.I have something similar with using SELECT IF() statement in MySQL.The advantage of using if() statement is it doesn’t need any procedures to be written.I think this will helpful to you drop your existing index.MySQL Workbench version 6.3 (MySql fork MariaDb)I was having problems with some of the solutions presented here. This is what I came up with:Use it as follows:This was tested on MAC OS X 10.8.2 with MySQL 5.5.24 and on Windows 7 with MySQL 5.5.21Here is a workaround for the DROP INDEX IF EXISTS, that is missing in MySQL and MariaDB versions before v10.1.4. You can also use it for every other statement you want, that should be depend on the existence of an INDEX (e.g. for SELECT "info: index exists." like in the example below).

mysql_escape_string VS mysql_real_escape_string

RobertPitt

[mysql_escape_string VS mysql_real_escape_string](https://stackoverflow.com/questions/3665572/mysql-escape-string-vs-mysql-real-escape-string)

So this is something we all should know about, and played on my mind when I first seen it..I know that mysql_escape_string is deprecated from 5.3 but what was the actual difference in mysql_real_escape_string.What I thought was that mysql_real_escape_string is the exact same as mysql_escape_string apart from mysql_real_escape_string takes a second argument for the mysql resource.so then I thought well surly there must be some difference as to how strings are handled because there would not be a need for 2 functions.So then I thought that the difference was purely down to locale and character encodings. ?can anyone clear this up for me ?

2010-09-08 07:42:39Z

So this is something we all should know about, and played on my mind when I first seen it..I know that mysql_escape_string is deprecated from 5.3 but what was the actual difference in mysql_real_escape_string.What I thought was that mysql_real_escape_string is the exact same as mysql_escape_string apart from mysql_real_escape_string takes a second argument for the mysql resource.so then I thought well surly there must be some difference as to how strings are handled because there would not be a need for 2 functions.So then I thought that the difference was purely down to locale and character encodings. ?can anyone clear this up for me ?The difference is that mysql_escape_string just treats the string as raw bytes, and adds escaping where it believes it's appropriate.mysql_real_escape_string, on the other hand, uses the information about the character set used for the MySQL connection. This means the string is escaped while treating multi-byte characters properly; i.e., it won't insert escaping characters in the middle of a character. This is why you need a connection for mysql_real_escape_string; it's necessary in order to know how the string should be treated.However, instead of escaping, it's a better idea to use parameterized queries from the MySQLi library; there has previously been bugs in the escaping routine, and it's possible that some could appear again. Parameterizing the query is much, much harder to mess up, so it's less likely that you can get compromised by a MySQL bug.Well... sort of, yes. It takes the character set of the MySQL connection into account.http://php.net/mysql_escape_stringmysql_escape_string is not deprecated from 5.3 but, for 4.3.0 and above.

So any One using PHP version above/or 4.3.0 should use mysql_real_escape_string.if using php < 4.3.0, than make your magic_quotes_gpc active from php.ini, though it is recommended to update, but if your code will have problem than make sure you use, magic_quotes_gpc and addslash function rather than mysql_escape_string.now both of these functions are deprecated in 

How can I get at the matches when using preg_replace in PHP?

Polsonby

[How can I get at the matches when using preg_replace in PHP?](https://stackoverflow.com/questions/1746/how-can-i-get-at-the-matches-when-using-preg-replace-in-php)

I am trying to grab the capital letters of a couple of words and wrap them in span tags. I am using preg_replace for extract and wrapping purposes, but it's not outputting anything.

2008-08-05 00:35:17Z

I am trying to grab the capital letters of a couple of words and wrap them in span tags. I am using preg_replace for extract and wrapping purposes, but it's not outputting anything.You need to put the pattern in parentheses /([A-Z])/, like this:\0 will also match the entire matched expression without doing an explicit capture using parenthesis.As always, you can go to php.net/preg_replace or php.net/<whatever search term> to search the documentation quickly. Quoth the documentation:From the preg_replace documentation on php.net:See Flubba's example.Use parentheses around your desired capture.

laravel collection to array

datavoredan

[laravel collection to array](https://stackoverflow.com/questions/35284974/laravel-collection-to-array)

I have two models, Post and Comment; many comments belong to a single post. I'm trying to access all comments associated with a post as an array.I have the following, which gives a collection.$comments_collection = $post->comments()->get()How would I turn this $comments_collection into an array? Is there a more direct way of accessing this array through eloquent relationships?

2016-02-09 06:03:00Z

I have two models, Post and Comment; many comments belong to a single post. I'm trying to access all comments associated with a post as an array.I have the following, which gives a collection.$comments_collection = $post->comments()->get()How would I turn this $comments_collection into an array? Is there a more direct way of accessing this array through eloquent relationships?You can use toArray() of eloquent as below.  The toArray method converts the collection into a plain PHP array. If the collection's values are Eloquent models, the models will also be converted to arraysFrom Laravel Docs:Try this:see this can help you

toArray() method in CollectionsUse all() method - it's designed to return items of Collection:you can do something like thisReference is https://laravel.com/docs/5.1/collections#method-toarrayOriginally from Laracasts website https://laracasts.com/discuss/channels/laravel/how-to-convert-this-collection-to-an-arrayUse collect($comments_collection).Else, try json_encode($comments_collection) to convert to json.Try collect function in array like:this methods can help youtoArray() with collect() 

instanceof negation

Mathew

[instanceof negation](https://stackoverflow.com/questions/14362603/instanceof-negation)

Which is the correct format for negating instanceof?orI've convinced myself the latter is correct way, probably after reading a blog article several years ago, but after some command-line tests, they both seem equivalent. Are they?

2013-01-16 16:03:23Z

Which is the correct format for negating instanceof?orI've convinced myself the latter is correct way, probably after reading a blog article several years ago, but after some command-line tests, they both seem equivalent. Are they?Let's read the docs:So instanceof has higher priority, thus both statements are equivalent. Parenthesis are probably used to make it obvious so you don't need to look it up in the documentation.Yes, logically they are equivalent. The answer by Álvaro G. Vicario provides more detail why.Of the two, there is an argument that the following is more readable. But there is no single way. That's the beauty and curse of PHP.

Symfony 2.0 step by step tutorial required [closed]

Shaun

[Symfony 2.0 step by step tutorial required [closed]](https://stackoverflow.com/questions/5354035/symfony-2-0-step-by-step-tutorial-required)

I need tutorial about symfony 2.0.Any links or suggestion would be appreciated.Note: I just have a little knowledge about Jobeet tutorial and dont have a full fledged project developed on symfony.

2011-03-18 15:18:07Z

I need tutorial about symfony 2.0.Any links or suggestion would be appreciated.Note: I just have a little knowledge about Jobeet tutorial and dont have a full fledged project developed on symfony.I am currently in the process of writing a Symfony2 tutorial for a blogging website called symblog http://tutorial.symblog.co.uk/. The first 6 parts are online, more will be coming shortly. Its aimed to be worked through similar to the Jobeet tutorial for symfony 1.I'd suggest series "Create your own framework" from Fabien Potencier, the creator of Symfony2 framework. It unveils many internal things of Symfony2 and gives good understanding of it.Symfony2 documentation is not Completed yet .. but you have a look on few tutorilas here

http://www.dobervich.com/2011/03/03/symfony2-blog-application-tutorial-part-i-project-setup/

How to extract text from the PDF document? [closed]

Sfisioza

[How to extract text from the PDF document? [closed]](https://stackoverflow.com/questions/6999889/how-to-extract-text-from-the-pdf-document)

How to extract text from the PDF document using PHP?(I can't use other tools, I don't have root access)I've found some functions working for plain text, but they don't handle well Unicode characters:http://www.hashbangcode.com/blog/zend-lucene-and-pdf-documents-part-2-pdf-data-extraction-437.html

2011-08-09 16:55:35Z

How to extract text from the PDF document using PHP?(I can't use other tools, I don't have root access)I've found some functions working for plain text, but they don't handle well Unicode characters:http://www.hashbangcode.com/blog/zend-lucene-and-pdf-documents-part-2-pdf-data-extraction-437.htmlDownload  the class.pdf2text.php @ https://pastebin.com/dvwySU1a (Updated on 5 of April 2014) or http://www.phpclasses.org/browse/file/31030.html (Registration required)Code:The class doesn't work with all pdf's I've tested, give it a try and you may get lucky :)If the above doesn't work, try http://pdfparser.org/Project Home (Problem  with SSL Cert)I know that this topic is quite old, but this need is still alive.

I read many documents, forum and script and build a new advanced one which supports compressed and uncompressed pdf :https://gist.github.com/smalot/6183152Hope it helps everone

DDD and MVC: Difference between 'Model' and 'Entity'

Nathan Loding

[DDD and MVC: Difference between 'Model' and 'Entity'](https://stackoverflow.com/questions/3029952/ddd-and-mvc-difference-between-model-and-entity)

I'm seriously confused about the concept of the 'Model' in MVC.  Most frameworks that exist today put the Model between the Controller and the database, and the Model almost acts like a database abstraction layer.  The concept of 'Fat Model Skinny Controller' is lost as the Controller starts doing more and more logic.In DDD, there is also the concept of a Domain Entity, which has a unique identity to it.  As I understand it, a user is a good example of an Entity (unique userid, for instance).  The Entity has a life-cycle -- it's values can change throughout the course of the action -- and then it's saved or discarded.The Entity I describe above is what I thought Model was supposed to be in MVC?  How off-base am I?To clutter things more, you throw in other patterns, such as the Repository pattern (maybe putting a Service in there).  It's pretty clear how the Repository would interact with an Entity -- how does it with a Model?Controllers can have multiple Models, which makes it seem like a Model is less a "database table" than it is a unique Entity.UPDATE: In this post the Model is described as something with knowledge, and it can be singular or a collection of objects.  So it's sound more like an Entity and a Model are more or less the same.  The Model is an all encompassing term, where an Entity is more specific.  A Value Object would be a Model as well.  At least in terms of MVC.  Maybe???So, in very rough terms, which is better?No "Model" really ...Or this, which has a Model as the DAO?Both those examples didn't even do what I was describing above.  I'm clearly lost.  Any input?

2010-06-12 20:12:22Z

I'm seriously confused about the concept of the 'Model' in MVC.  Most frameworks that exist today put the Model between the Controller and the database, and the Model almost acts like a database abstraction layer.  The concept of 'Fat Model Skinny Controller' is lost as the Controller starts doing more and more logic.In DDD, there is also the concept of a Domain Entity, which has a unique identity to it.  As I understand it, a user is a good example of an Entity (unique userid, for instance).  The Entity has a life-cycle -- it's values can change throughout the course of the action -- and then it's saved or discarded.The Entity I describe above is what I thought Model was supposed to be in MVC?  How off-base am I?To clutter things more, you throw in other patterns, such as the Repository pattern (maybe putting a Service in there).  It's pretty clear how the Repository would interact with an Entity -- how does it with a Model?Controllers can have multiple Models, which makes it seem like a Model is less a "database table" than it is a unique Entity.UPDATE: In this post the Model is described as something with knowledge, and it can be singular or a collection of objects.  So it's sound more like an Entity and a Model are more or less the same.  The Model is an all encompassing term, where an Entity is more specific.  A Value Object would be a Model as well.  At least in terms of MVC.  Maybe???So, in very rough terms, which is better?No "Model" really ...Or this, which has a Model as the DAO?Both those examples didn't even do what I was describing above.  I'm clearly lost.  Any input?Entity means an object that is a single item that the business logic works with, more specifically those which have an identity of some sort.

Thus, many people refer to ORM-mapped objects as entities.Some refer to as "entity" to a class an instance of which represents a single row in a database.Some other people prefer to call only those of these classes as "entity" which also contain business rules, validation, and general behaviour, and they call the others as "data transfer objects".A Model is something that is not directly related to the UI (=View) and control flow (=Controller) of an application, but rather about the way how data access and the main data abstraction of the application works.Basically, anything can be a model that fits the above.You can use entities as your models in MVC. They mean two different things, but the same classes can be called both.ExamplesYour exampleAs for your code examples, I would prefer the first one.

A Model is a class that is used as a means of data abstaction of an application, not a class which has a name suffixed with "Model". Many people consider the latter bloatware.You can pretty much consider your Repository class as part of your model, even if its name isn't suffixed with "Model".I would add to that the fact that it is also easier to work with the first one, and for other people who later may have to understand your code, it is easier to understand.All answers are a heavy mashup of different things and simply wrong.A model in DDD is much like a model in the real world:

A simplification and abstraction of something.

No less and no more.

It has nothing to do with data nor objects or anything else.

It's simply the concept of a domain part. And in also every complex domain

there is always more than one model, e.g. Trading, Invoicing, Logistics.An entity is not a "model with identity" but simply an object with identity.A repository is not just a 1st level cache but a part of the domain too.

It is giving an illusion of in-memory objects and responsible for fetching 

Aggregates (not entities!) from anywhere and saving them

i.e. maintaining the life cycle of objects.The "model" in your application is the bit which holds your data. The "entity" in domain-driven design is, if I remember correctly, a model with an identity. That is to say, an entity is a model which usually corresponds directly to a "physical" element in a database or file. I believe DDD defines two types of models, one being the entity, the other being the value, which is just a model without and identity.The Repository pattern is just a type of indexed collection of models/entities. So for instance if your code wants order #13, it will first ask the repository for it, and if it can't get it from there, it will go and fetch it from wherever. It's basically a level 1 cache if you will. There is no difference in how it acts with a model, and how it acts with an entity, but since the idea of a repository is to be able to fetch models using their IDs, in terms of DDD, only entities would be allowed into the repository.A simple solution using service and collection:EDIT:

The model(class) is the simple representation of the entity scheme. The model(object) is a single entity. The service operates on models and provides concrete data to the controllers. No controller has any model. The models stand alone.

On the other "side", mappers map the models into persistance layers (e.g: databases, 3rd party backends, etc).while this is specifically about Ruby on Rails, the same principles and information still apply since the discussion is around MVC and DDD.http://blog.scottbellware.com/2010/06/no-domain-driven-design-in-rails.html

How to draw a shape using a piece of image in php

Anshul Mishra

[How to draw a shape using a piece of image in php](https://stackoverflow.com/questions/33514840/how-to-draw-a-shape-using-a-piece-of-image-in-php)

I need to create a frame image by using a piece of an image.For Example:User will upload a image piece from back-end:Now I need to create a frame on front-end as per the front-end user's requirement (user will choose the height and width of frame then he will choose this image piece) like this:I am not getting any way to do this, I have tried to do this by css and html canvas but no luck.Can some one please suggest me how can I achieve this by using PHP or CSS or HTML or JavaScript or any how.You can see the working example here, that actually I need to do.Create your own frame

2015-11-04 06:09:37Z

I need to create a frame image by using a piece of an image.For Example:User will upload a image piece from back-end:Now I need to create a frame on front-end as per the front-end user's requirement (user will choose the height and width of frame then he will choose this image piece) like this:I am not getting any way to do this, I have tried to do this by css and html canvas but no luck.Can some one please suggest me how can I achieve this by using PHP or CSS or HTML or JavaScript or any how.You can see the working example here, that actually I need to do.Create your own frameWhether done manually by you, or on the fly somehow through a GD library, you absolutely at the least need to take the image you state you are receiving......and crop and tighten it to make it clean like this (with no white space around the edges and the notch/cut removed):Then you have an image you can actually work with.NOTE: I am not doing the javascript here. It would be used to dynamically set the element sizing as seen in the html.Normally I would use a judicious amount of :before and ':after' pseudo elements to keep the html less cluttered, but since you need dynamic sizing of the frame, then we need to use a number of nested div elements to set dynamic styles for widths and heights that are critical to some of the div elements (some of which would still be pseudo elements if javascript could access those or if dynamic sizing was not needed).NOTE: So far I have only tested this in Chrome and Firefox. Really old browsers are for sure going to fail miserably.The sample image you have posted in your answer might not be best for usage in generating the frame. You should get 2 different images for horizontal and vertical sides of the frame. The bevel and edges can also be different images that can be positioned accordingly.Updated with the cleaned-up image from @ScottS answer I have tried a lot to create the frame using a single image via php, but did not find any solution in php.With the help of the two answers (Lucky Soni's answer and ScottS's answer) I have created a script to full fill my requirement (many thanks to both).First I have created 4 images from single image while uploading:HTML layout:Styling:Now I am able to create a proper frame from any type of imagetry that the snippet is from: http://www.phpforkids.com/php/php-gd-library-drawing-shapes.phpI have look at your solution, that is good enough. But I have noticed few things, when I tried to increase the height and width it did not give the appropriate result.I have tried to solve this by using the different sizes of image.I have cropped that part of image in 4 sizes, so that we can use these sizes while creating the frame in different ratio.For example if I am going to create a frame 1000*200, then it was breaking the css, because you were using a image of only 20*20 thick image in all sizes of frame.Now you just need to set the ratio for all size of images, For example:Hope this will be useful for you

Converting HTML to PDF using PHP? [duplicate]

Click Upvote

[Converting HTML to PDF using PHP? [duplicate]](https://stackoverflow.com/questions/733219/converting-html-to-pdf-using-php)

Is it possible to convert a HTML page to PDF using PHP, and if so, how can it be done?Specifically, the page is an invoice generated dynamically. So I would like it loaded using:And the HTML output would have to be converted to PDF.Any good libraries that do this will be fine.

2009-04-09 07:41:24Z

Is it possible to convert a HTML page to PDF using PHP, and if so, how can it be done?Specifically, the page is an invoice generated dynamically. So I would like it loaded using:And the HTML output would have to be converted to PDF.Any good libraries that do this will be fine.If you wish to create a pdf from php, pdflib will help you (as some others suggested).Else, if you want to convert an HTML page to PDF via PHP, you'll find a little trouble outta here.. For 3 years I've been trying to do it as best as I can.So, the options I know are:DOMPDF : php class that wraps the html and builds the pdf. Works good, customizable (if you know php), based on pdflib, if I remember right it takes even some CSS. Bad news: slow when the html is big or complex.HTML2PS: same as DOMPDF, but this one converts first to a .ps (ghostscript) file, then, to whatever format you need (pdf, jpg, png). For me is little better than dompdf, but has the same speed problem.. but, better compatibility with CSS.Those two are php classes, but if you can install some software on the server, and access it throught passthru() or system(), give a look to these too:wkhtmltopdf: based on webkit (safari's wrapper), is really fast and powerful.. seems like  this is the best one (atm) for converting html pages to pdf on the fly; taking only 2 seconds for a 3 page xHTML document with CSS2. It is a recent project, anyway, the google.code page is often updated.htmldoc : This one is a tank, it never really stops/crashes.. the project looks dead since 2007, but anyway if you don't need CSS compatibility this can be nice for you.what about TCPDF?has lots of features, and one of advantage using it you can convert html to pdf on the flyI personally don't trust all those services that are offered for free. Here is an application you can download: http://www.tufat.com/script19.htmYou could use PDFlib. There's a documentation on php.net on how to utilize it. Alas, you have to live with a rather obtrusive watermark if you don't buy a license for PDFlib.Also this one that does a goog job : html2pdfdompdf: https://github.com/dompdf/dompdftakes a html input string and returns the pdf-string.it's not browser-level quality and has problems with css, but it works well enough for simple text documents.Yes, absolutely.There are off-the shelf solutions that you can purchase that'll accept an HTML input and convert eh file for you.There is also a common PDFLib that you can use to generate your PDF's using PHP but it requires you to create them manually by setting all the elements on the page.This is another one I've used that's been pretty niceThe problems with the php classes are AFAIK 2:I think the only way to have an accurated conversion is using a browser wrapper becose, for definition, will always be the better html reader.I suggest another link with some comparison: LINK

That's where i read about wkhtmltopdf.. give a read to all the comments too, many others way are there...

Clearing content of text file using php

Subho Halder

[Clearing content of text file using php](https://stackoverflow.com/questions/1073609/clearing-content-of-text-file-using-php)

I have a filelist.txt file and I created a file called clear.php to clear the content of filelist.I put a button in index.html to call clear.php to clear the file.Can anyone help me out regarding what PHP code I should write in clear.php?How to code a button to call clear.php and then return back to index.html showing the result that it has been cleared?

2009-07-02 10:24:13Z

I have a filelist.txt file and I created a file called clear.php to clear the content of filelist.I put a button in index.html to call clear.php to clear the file.Can anyone help me out regarding what PHP code I should write in clear.php?How to code a button to call clear.php and then return back to index.html showing the result that it has been cleared?You can redirect by using the header() function to modify the Location header.This would truncate the file:In clear.php, redirect to the caller page by making use of $_SERVER['HTTP_REFERER'] value.I don't exactly know where u want to show the result.To add button you may use either jQuery libraries or simple Javascript script as shown below:HTML link or button:Javascript:Use PHP to clear a file content. For instance you can use the fseek($fp, 0); or ftruncate ( resource $file , int $size ) as below:Redirect PHP - you can use header ( string $string [, bool $replace = true [, int $http_response_code ]] )I hope it's help.Use 'w' and not, 'a'.Try fopen()

http://www.php.net/manual/en/function.fopen.phpw as mode will truncate the file.

How to only use created_at in Laravel

refear99

[How to only use created_at in Laravel](https://stackoverflow.com/questions/29886497/how-to-only-use-created-at-in-laravel)

I want only use created_at , how to do it?I know:This can custom timestamps nameThis can disable timestamps

2015-04-27 03:03:38Z

I want only use created_at , how to do it?I know:This can custom timestamps nameThis can disable timestampsEloquent does not provide such functionality out of the box, but you can create it on your own using the creating event callback:Use on the top:And for 'created_at' field, you can use:UPDATE FOR LARAVEL 5.5.0 - 5.5.5This was broken in Laravel 5.5.0 (and fixed again in 5.5.5).If you are using 5.5.x, make sure you are on the newest version.If for some reason you cannot be on the newest version, here is a workaround.Set the public $timestamps to false:And when necessary:ORWhen the two fields "created_at" and "updated_at" are required, you do not have to do anything, of course ;)I have a better answer from here for Laravel 5.2 or above.U can use this in model-So, for your question, the answer is -My solution:This works for meI solved by adding default value CURRENT_TIMESTAMP in my database for the column created_at. And In my model I use this below codeI hope this method works in all versions of laravel.To disable only updated_at, you can override Model::setUpdatedAt() method, like following : Of course, if you wanted to do this for the created_at column, it's just as easy. And that's work for Laravel 5.1On your model set const UPDATED_AT = null;orconst CREATED_AT = null;it stops Laravel trying to update the updated_at/created_at fieldIt works for Laravel 5.8And it is better than overwrite: setUpdatedAt in your modelbecause it is shorter and because the check for if (! is_null(static::UPDATED_AT) is happening in source code earlier than triggering 

setUpdatedAtIn version 5.3 I just did public $timestamps = false; and then added protected $fillable = ['created_at']. Note: You can add anything you want, just make sure it matches the one in your table.` Approach with only setUpdatedAt did not work with Laravel 5.1.7 because it has one more place where updated_at gets processed.Model class performUpdate method calls Builder class method:which leads us toI'm not sure, why Laravel is processing updated_at twice - in performUpdate with $this->updateTimestamps() and then later in Builder with $this->addUpdatedAtColumn($values).With some debugging, I found that you have to also update your model with getUpdatedAtColumn override. At first I was afraid that it will try to update a non-existent field "null", but it turned out that Arr::add is smart enough to ignore null keys.So, in your model class add these:This should be enough to disable both updates.Use on the top the class:const UPDATED_AT = null;orconst CREATED_AT = null;For Laravel 5.*Model:Migration:My solution for this is using a new __construct method.See:A solution that is simple, decoupled, and reusable is to use a Model Observer. The idea is to capture the creating event and fill the created_at attribute. This method may be used by any number of models without having to repeat code or using unofficial tricks. Most importantly, it closely resembles the internal mechanics of the Model class, thus avoiding unexpected errors.1) Create SetCreatedAt observer in App\Observers:2) On App\Providers\AppServiceProvider inside the boot method add the following line for each of the models that you want the created_at to be generated for:3) On your models, the only thing that you have to do is disable the timestamps:Tested with Laravel 5.3, but it should work with previous versions as well.Good luck!In 5.4, the problem it gives is that it also doesn't populate updated_at field even after update (Eloquent update).instead add this methodYou can use CURRENT_TIMESTAMP default value for created field in your MySQL table and set in your model.In Laravel 5.7, this was enough for me to have it work:In migration:instead of classic $table->timestamp('created_at');In model:I used very simple hack ;)class MyClass extends Model {}I just pointed both to the same column :)

Best way to document Array options in PHPDoc?

Reactgular

[Best way to document Array options in PHPDoc?](https://stackoverflow.com/questions/15414103/best-way-to-document-array-options-in-phpdoc)

I'm struggling to write readable and easy to understand documentation that describes the multi-tree structure for Array options that are passed to a function.Here is an example array structure.There are many possible options for the above array, but this is used as a parameter to a function that understands that structure.I'd like to document how the array should be structured in PHPDoc, but I'm not sure what the correct approach is.Here is what I have now.My problem is that when the HTML document is generated, it's not formatted very nicely. Additionally, I'm not sure the above is clearly explains the array structure.Is there an alternative approach?

2013-03-14 15:56:57Z

I'm struggling to write readable and easy to understand documentation that describes the multi-tree structure for Array options that are passed to a function.Here is an example array structure.There are many possible options for the above array, but this is used as a parameter to a function that understands that structure.I'd like to document how the array should be structured in PHPDoc, but I'm not sure what the correct approach is.Here is what I have now.My problem is that when the HTML document is generated, it's not formatted very nicely. Additionally, I'm not sure the above is clearly explains the array structure.Is there an alternative approach?Just adding some tabulation will make it look good and easy to understandA nested list approach: Result: If you want it to look fancy, with a bit of Css it will make wonders! xdA bit too late to the party but this is how I do it instead:Think it's quite clean and easy to understand what $params should be.I wrote a plugin for phpstorm that allows specifying keys like this:(basically just a slightly stricter version of @siannone's format)It allows to specify @return keys as well:Can you use objects instead of arrays? That would make documentation easy.Then you can use a type hint where the class is required.Markdown Syntax for Object Notation (MSON) may be a better choice.exampleI kinda like this better: I just paste in the code from where it gets initialized, quick and easy.AS this is purely display rather than a directive, and should retain space formatting within the docs, I'd be inclined to go for readability with indentation rather than a wall of characters:Though using an actual PHP array definition with indentation is even cleanerArrays in PHP are really more like anonymous structs.For arbitrary data structures there are a number of schema validators but unfortunately it's not widely supported in type hinting. Perhaps some common schemes have plugins? The problem is things working in only one or a few places. You might get the right thing working for your IDE but run static analysis and it can all got to hell.Care needs to be taken to separate things out so that if possible other tools not supporting a scheme, such as via a plugin, will simply ignore it.PHPDoc tends to be supported everywhere but is also very limited.There are often proposals but there's no real good standard. Most solutions are non-standard, not widely supported, partial hacks with limitations or purely superficial (documentation).There are specific implementations in specific places but nothing widespread and dedicated to PHP itself. Though you can make your own schemas in PHP IDE's tend to lack decent code bridges, even those with PHP in the name.You should define your field struct separately. Your outer data structure is as pseudo code @key fields field[] rather than representing as multi-dimensional arrays. Conceptually and confusingly you can go so far as:Or steal from C then invent a laguage...You can invent a schema based on structs to allow both flat and nested. Nested should be the default, things should only be defined to be as accessible as they need to be for reuse.An unusual approach is to instead use objects. This doesn't have to entail using interfaces such as array access. In PHP an object wraps an array for properties. It's possible to cast an array to an object (without implementation, only properties) and back.If you use objects instead as an associative array ($array[$key] versus $object->{$key}) then you can make dummy objects to at least fool the IDE...Of those three options which may or may not work depends on the tool used.You can then lie...The problem with this is that it means converting arrays to objects. That have both performance implications and changes pass by value to pass by reference. Which is faster is debatable. Arrays should in theory be faster, though objects have benefits being references by default and work better with JSON which separates object from array unlike PHP.Objects also don't support a property that might not be set very well in regards to type hinting, even though properties in an object are just a PHP array (use ->{key} instead of [key]). There's the potential for other weird things.If performance is a real concern, you can turn PHP into a compiled language. In the same way you can extend an interface to make an object compilable you can do the same for where you might do everything with OOP and auto-complete but can then do the equivalent of inlining a class by specifying the property it wraps, then using reflection to pretty much replace uses with the contents of the matching methods, with a few extra bits needed (marking what to inline or convert to procedural, single property to wrap or multiple, etc).The concept is similar to boxing and unboxing. If you're really insane about SA support and broad support for IDEs (auto-complete, checking, etc), analysers, tools, etc then it might be the only way.

sort files by date in PHP

sasori

[sort files by date in PHP](https://stackoverflow.com/questions/2667065/sort-files-by-date-in-php)

I currently have an index.php file which allows me to output the list of files inside the same directory, the output shows the names then I used filemtime() function to show the date when the file was modified. my problem now is, how will I sort the output to show the latest modified file ?, I've been thinking for awhile how to do this. if only I am doing it with mysql interaction there will be no problem at all. please show me an example how to sort and output the list of files starting from the latest modified one. this is what i have for now

2010-04-19 11:47:56Z

I currently have an index.php file which allows me to output the list of files inside the same directory, the output shows the names then I used filemtime() function to show the date when the file was modified. my problem now is, how will I sort the output to show the latest modified file ?, I've been thinking for awhile how to do this. if only I am doing it with mysql interaction there will be no problem at all. please show me an example how to sort and output the list of files starting from the latest modified one. this is what i have for nowYou need to put the files into an array in order to sort and find the last modified file.Not tested, but that's how to do it.This would get all files in path/to/files with an .swf extension into an array and then sort that array by the file's mtimeThe above uses an Lambda function and requires PHP 5.3. Prior to 5.3, you would doIf you don't want to use an anonymous function, you can just as well define the callback as a regular function and pass the function name to usort instead.With the resulting array, you would then iterate over the files like this:Note that because you already called filemtime when sorting the files, there is no additional cost when calling it again in the foreach loop due to the stat cache.An example that uses RecursiveDirectoryIterator class, it's a convenient way to iterate recursively over filesystem.I use your exact proposed code with only some few additional lines. The idea is more or less the same of the one proposed by @elias, but in this solution there cannot be conflicts on the keys since each file in the directory has a different filename and so adding it to the key solves the conflicts. The first part of the key is the datetime string formatted in a manner such that I can lexicographically compare two of them.

How to alias a function in PHP?

Atif Mohammed Ameenuddin

[How to alias a function in PHP?](https://stackoverflow.com/questions/1688711/how-to-alias-a-function-in-php)

Is it possible to alias a function with a different name in PHP? Suppose we have a function with the name sleep. Is there a way to make an alias called wait?By now I'm doing like this:

2009-11-06 16:31:07Z

Is it possible to alias a function with a different name in PHP? Suppose we have a function with the name sleep. Is there a way to make an alias called wait?By now I'm doing like this:Starting with PHP 5.6 it is possible to alias a function by importing it:yup, function wait ($seconds) { sleep($seconds); } is the way to go. But if you are worried about having to change wait() should you change the number of parameters for sleep() then you might want to do the following instead:Nope, but you can do this:This way you also resolve arguments-number-issuesYou can look at lambdas also if you have PHP 5.3If you aren't concerned with using PHP's "eval" instruction (which a lot of folks have a real problem with, but I do not), then you can use something like this:I used it in some simple tests, and it seemed to work fairly well. Here is an example:No, there's no quick way to do this in PHP. The language does not offer the ability to alias functions without writing a wrapper function.If you really really really needed this, you could write a PHP extension that would do this for you.  However, to use the extension you'd need to compile your extension and configure PHP to us this extension, which means the portability of your application would be greatly reduced.No, functions aren't 1st-class citizens so there's no wait = sleep like Javascript for example.  You basically have to do what you put in your question:you can use runkit extensionhttp://us.php.net/manual/en/function.runkit-function-copy.phpIf your PHP doesn't support use x as y syntax, in older PHP version you can define anonymous function:Or place the code inside the constant, e.g.:See also: What can I use instead of eval()?This is especially useful if you've long piece of code, and you don't want to repeat it or the code is not useful for a new function either.There is also function posted by Dave H which is very useful for creating an alias of a user function:nope. the way you wrote is the best way to do it.No, there's no quick way to do so - at least for anything before PHP v5.3, and it's not a particularly good idea to do so either.  It simply complicates matters. This is especially helpful for use in classes with magic methods.But I'm pretty sure it works with regular functions too.Source:

PHP: New features -> "Variadic functions via ..."I know this is old, but you can always  What I have used in my CLASS

Change an associative array into an indexed array / get an Zend_Table_Row_Abstract as non-associative

Ethan

[Change an associative array into an indexed array / get an Zend_Table_Row_Abstract as non-associative](https://stackoverflow.com/questions/1065131/change-an-associative-array-into-an-indexed-array-get-an-zend-table-row-abstra)

Hi out there in Stackland.  I was wondering if there was either a function or an easy way to change an associative array into an indexed array.To elaborate, I'm using the Zend framework, and I've got a point in my site where I take out a row of an SQL table as an associative array.  I've passed it to javascript via an echoed  in JSON.  However, I've noticed that I can see the names of my database's columns in Firebug.  Having outsiders know the names of your tables and columns is a big security no-no, so I'd like to change it from toIs there a good way to do this?It would also work to be able to have a Zend_Table_Abstract->fetchAll() return a non-associative array, but I don't think that's possible.  Thanks for your help!

2009-06-30 18:10:19Z

Hi out there in Stackland.  I was wondering if there was either a function or an easy way to change an associative array into an indexed array.To elaborate, I'm using the Zend framework, and I've got a point in my site where I take out a row of an SQL table as an associative array.  I've passed it to javascript via an echoed  in JSON.  However, I've noticed that I can see the names of my database's columns in Firebug.  Having outsiders know the names of your tables and columns is a big security no-no, so I'd like to change it from toIs there a good way to do this?It would also work to be able to have a Zend_Table_Abstract->fetchAll() return a non-associative array, but I don't think that's possible.  Thanks for your help!Is pure php ok?Sourcedefine functionPass the associative array as a parameter and it will convert into the default index of the array. For example: we have Array('2014-04-30'=>43,'2014-04-29'=>41) after the call to the function the array will be Array(0=>43,1=>41).for multi layered array i use this:it turns this:into this : You could use this simple piece of code, if you do not want to use the inbuilt PHP function.

Regular Expression to collect everything after the last /

Hellonearthis

[Regular Expression to collect everything after the last /](https://stackoverflow.com/questions/1150559/regular-expression-to-collect-everything-after-the-last)

I'm new at regular expressions and wonder how to phrase one that collects everything after the last /.I'm extracting an ID used by Google's GData.my example string is Where the ID is: p1f3JYcCu_cb0i0JYuCu123Oh and I'm using PHP.

2009-07-19 18:45:22Z

I'm new at regular expressions and wonder how to phrase one that collects everything after the last /.I'm extracting an ID used by Google's GData.my example string is Where the ID is: p1f3JYcCu_cb0i0JYuCu123Oh and I'm using PHP.This matches at least one of (anything not a slash) followed by end of the string:

Notes:

But, most likely a faster and simpler solution is to use your language's built-in string list processing functionality - i.e. ListLast( Text , '/' ) or equivalent function.For PHP, the closest function is strrchr which works like this:This includes the slash in the results - as per Teddy's comment below, you can remove the slash with substr:Generally:The data you want would then be the match of the first group.Edit   Since you’re using PHP, you could also use strrchr that’s returning everything from the last occurence of a character in a string up to the end. Or you could use a combination of strrpos and substr, first find the position of the last occurence and then get the substring from that position up to the end. Or explode and array_pop, split the string at the / and get just the last part.You can also get the "filename", or the last part, with the basename function.On my box I could just pass the full URL. It's possible you might need to strip off http:/ from the front.Basename and dirname are great for moving through anything that looks like a unix filepath.^ = start of the row.*\/ = greedy match to last occurance to / from start of the row(.*) = group of everything that comes after the last occurance of /you can also normal string splitThis pattern will not capture the last slash in $0, and it won't match anything if there's no characters after the last slash.Edit: but it requires lookbehind, not supported by ECMAScript (Javascript, Actionscript), Ruby or a few other flavors. If you are using one of those flavors, you can use:But it will capture the last slash in $0.Not a PHP programmer, but strrpos seems a more promising place to start. Find the rightmost '/', and everything past that is what you are looking for. No regex used.Find position of last occurrence of a char in a stringbased on @Mark Rushakoff's answer the best solution for different cases:

Laravel migration table field's type change

naing linhtut

[Laravel migration table field's type change](https://stackoverflow.com/questions/32940495/laravel-migration-table-fields-type-change)

Following is my file 2015_09_14_051851_create_orders_table.php.

And I want to change $table->integer('category_id'); as a string with new migration.

2015-10-05 02:33:32Z

Following is my file 2015_09_14_051851_create_orders_table.php.

And I want to change $table->integer('category_id'); as a string with new migration.update: 31 Oct 2018, Still usable on laravel 5.7 https://laravel.com/docs/5.7/migrations#modifying-columnsTo make some change to existing db, you can modify column type by using  change() in migration.This is what you could doplease note you need to add doctrine/dbal dependency to composer.json

for more information you can find it here http://laravel.com/docs/5.1/migrations#modifying-columnsThe standard solution didn't work for me, when changing the type from TEXT to LONGTEXT.I had to it like this:This could be a Doctrine issue. More information here.Another way to do it is to use the string() method, and set the value to the text type max length:2018 Solution, still other answers are valid but you dont need to use any dependency:First you have to create a new migration:Then in that migration file up(), try:If you donot change the size default will be varchar(191) but If you want to change size of the field:Then migrate the file by:more info from doc.all other answers are Correct But  Before you runmake sure you run this code first to avoid this error First composer requires doctrine/dbal, then:For me the solution was just replace unsigned with indexThis is the full code:Not really an answer, but just a note about ->change():https://laravel.com/docs/5.8/migrations#modifying-columnsIf your column isn't one of these you will need to either drop the column or use the alter statement as mentioned in other answers.

Find PHP version on windows command line

ntf

[Find PHP version on windows command line](https://stackoverflow.com/questions/15517718/find-php-version-on-windows-command-line)

I just tried to know version of my PHP from windows command typing,

C:\> php -v

But it is not working. It says php is not recognized as internal or external command.

2013-03-20 07:30:26Z

I just tried to know version of my PHP from windows command typing,

C:\> php -v

But it is not working. It says php is not recognized as internal or external command.In command prompt type below Where C:\path\to\php is the folder where your php.exe file is located. After this run than you will see something like UPDATE:If you find that when you restart your computer, this solution will not work anymore:Set the Path like as following:You just need to find out where is your PHP folder.This should give the following output: I have uploaded a youtube video myself about checking the version of PHP via command prompt in Bangla: https://www.youtube.com/watch?v=zVkhD_tv9ckGo to c drive and run the command as belowC:\xampp\php>php -vIt is most likely that php is not in your specified path.Try to issue the php command with the full path, for example:C:\> "C:\Program Files\php\php.exe" -vPlease note, that this is just an example, your php installation might be in a different directory.xampp control panel->shell->type php-v 

you get the version of php of your xampp installedDB(mariadb/mysql)version

type localhost/phpmyadmin in url click enter

click on sql

type   select version();

enter to get the mysql or mariaDb versionFor Beginners to anything php, it is usually stored in the C:/ path folder of your PC (My Computer).==On Windows==

1.Click Start Menu button

2.Type cmd and press enter to select the first program/application that responds to your search result.

A black window terminal will appear, this is known as a Command Line Interpreter

3.In the Terminal Window (Application) Type cd c: and press enter

4.Now type php -v and press enterand viola there you'll have the current php version that is installed in your machineEasy Method is:

Just copy the file cmd.exe from c:/windows/system32/ and paste it to C:\xampp\php\

and run it,

when the cmd opens type " php -v " without quotes and hit enter...

you will get your php version..

thank youFor me, the PHP path traversed from php5.6.25 (or php7) installation folder, through wamp folder, bin and php...Output : PHP 5.6.30Just create a php file and write the codeand open the file in any browser. It will show the php version installed in your system.Easiest way is to, just click on the WAMP icon on task bar 

and Go to PHP >Version, version will be displayed This how I check php versionPS C:\Windows\system32> php -versionResult:PS C:\Windows\system32>Nothing to worry it's easyIf you are using any local server like Wamp, Xampp then Go to this StepsThanks.Step 1 : Open CMD

Step 2 : Go to C:/xampp/php or  htdocs path:/

step 3 :  Type  "php -v " 

Result php version

PHP : Custom error handler - handling parse & fatal errors

A.N.M. Saiful Islam

[PHP : Custom error handler - handling parse & fatal errors](https://stackoverflow.com/questions/1900208/php-custom-error-handler-handling-parse-fatal-errors)

How can i handle parse & fatal errors using a custom error handler?

2009-12-14 10:57:15Z

How can i handle parse & fatal errors using a custom error handler?Simple Answer: You can't. See the manual:For every other error, you can use set_error_handler()EDIT:Since it seems, that there are some discussions on this topic, with regards to using register_shutdown_function, we should take a look at the definition of handling: To me, handling an error means catching the error and reacting in a way that is "nice" for the user and the underlying data (databases, files, web services, etc.).Using register_shutdown_function you cannot handle an error from within the code where it was called, meaning the code would still stop working at the point where the error occurs. You can, however, present the user with an error message instead of a white page, but you cannot, for example, roll back anything that your code did prior to failing.Actually you can handle parse and fatal errors. It is true that the error handler function you defined with set_error_handler() will not be called. The way to do it is by defining a shutdown function with register_shutdown_function(). Here is what I have working in my website:File prepend.php (this file will be prepended to all php scripts automatically). See below for tips on prepending files to PHP.PHP will call function errorHandler() if he catches an error in any of the scripts. If the error forces the script to shutdown immediately, the error is handled by function shutdownHandler().This is working on the site I have under development. I haven't yet tested it in production. But it is currently catching all errors I find while developing it.I believe there is a risk of catching the same error twice, once by each function. This could happen if an error that I am handling in the function shutdownHandler() was also caught by function errorHandler().TODO's:1 - I need to work on a better log() function to handle errors gracefully. Because I am still in development, I am basically logging the error to a database and echoing it to the screen.2 - Implement error handling for all MySQL calls.3 - Implement error handling for my javascript code.IMPORTANT NOTES:1 - I am using the following line in my php.ini to automatically prepend the above script to all php scripts:it works well.2 - I am logging and resolving all errors, including E_STRICT errors. I believe in developing a clean code. During development, my php.ini file has the following lines:When I go live, I will change display_errors to 0 to reduce the risk of my users seeing ugly PHP error messages.I hope this helps someone.You can track these errors using code like this:(Parse errors can only be caught if they occur in other script files via include() or require(), or by putting this code into an auto_prepend_file as other answers have mentioned.)From the PHP.net comments on the page http://www.php.net/manual/en/function.set-error-handler.phpFrom my experience you can catch all type of errors, hide the default error message and display an error message of your own (if you like). Below are listed the things you need.1) An initial/top level script, let us call it index.php where you store you custom error handler functions. Custom error function handlers must stay at the top so they catch errors below them, by "below" I mean in inclued files.2) The assumption that this top script is error free must be true! this is very important, you cannot catch fatal errors in index.php when your custom error handler function is found in index.php.3) Php directives (must also be found in index.php)

set_error_handler("myNonFatalErrorHandler"); #in order to catch non fatal errors

register_shutdown_function('myShutdown'); #in order to catch fatal errors

ini_set('display_errors', false); #in order to hide errors shown to user by php

ini_set('log_errors',FALSE); #assuming we log the errors our selves

ini_set('error_reporting', E_ALL); #We like to report all errorswhile in production (if I am not wrong) we can leave ini_set('error_reporting', E_ALL); as is in order to be able to log error, in the same time ini_set('display_errors', false); will make sure that no errors are displayed to the user.As for the actual content of the two functions I am talking, myNonFatalErrorHandler and myShutdown, I don't put detailed content here in order to keep things simple. In addition the other visitors have given alot of examples. I just show a very plain idea.as for $err_lvl it can be:The script with parse error is always interrupted and it can not be handled. So if the script is called directly or by include/require, there is nothing you can do. But if it is called by AJAX, flash or any other way, there is a workaround how to detect parse errors.I needed this to handle swfupload script.

Swfupload is a flash that handles file uploads and everytime file is uploaded, it calls PHP handling script to handle filedata - but there is no browser output, so the PHP handling script needs these settings for debugging purposes:Note 1 null means is not set to isset()

PHP - strtotime, specify timezone

Andy Hin

[PHP - strtotime, specify timezone](https://stackoverflow.com/questions/3569014/php-strtotime-specify-timezone)

I have a date string, say '2008-09-11'. I want to get a timestamp out of this, but I need to specify a timezone dynamically (rather then PHP default). So to recap, I have two strings:How do I get the timestamp for this?EDIT: The time of day will be the midnight of that day.... $dateStr = '2008-09-11 00:00:00';

2010-08-25 18:21:02Z

I have a date string, say '2008-09-11'. I want to get a timestamp out of this, but I need to specify a timezone dynamically (rather then PHP default). So to recap, I have two strings:How do I get the timestamp for this?EDIT: The time of day will be the midnight of that day.... $dateStr = '2008-09-11 00:00:00';$timestamp = $date->format('U');The accepted answer is great if you're running PHP > 5.2 (I think that's the version they added the DateTime class). If you want to support an older version, you don't want to type as much, or if you just prefer the functional approach there is another way which also does not modify global settings:This will work if for some reason you're using <5.2 (Heaven forbid).But anything 5.2 and above, I'd strongly recommend you opt for @salathe's answer.If you're going to use Timezones, I propose you use the DateTime class, and in this case the DateTime::createFromFormat() function which will allow you to do semothing like this:When you put $tz in the DateTime::createFromFormat function, you tell it what time zone the date you gave is in, so that when you need to convert it to another timezone, all you have to do is something like this:Whenever you are referring to an exact moment in time, persist the time according to a unified standard that is not affected by daylight savings. (GMT and UTC are equivalent with this regard, but it is preferred to use the term UTC. Notice that UTC is also known as Zulu or Z time.)If instead you choose to persist a time using a local time value, include the local time offset from UTC, such that the timestamp can later be interpreted unambiguously.In some cases, you may need to store both the UTC time and the equivalent local time. Often this is done with two separate fields, but some platforms support a datetimeoffset type that can store both in a single field.When storing timestamps as a numeric value, use Unix time - which is the number of whole seconds since 1970-01-01T00:00:00Z (excluding leap seconds). If you require higher precision, use milliseconds instead. This value should always be based on UTC, without any time zone adjustment.If you might later need to modify the timestamp, include the original time zone ID so you can determine if the offset may have changed from the original value recorded.When scheduling future events, usually local time is preferred instead of UTC, as it is common for the offset to change. See answer, and blog post.Remember that time zone offsets are not always an integer number of hours (for example, Indian Standard Time is UTC+05:30, and Nepal uses UTC+05:45).If using Java, use java.time for Java 8, or use Joda Time for Java 7 or lower.

If using .NET, consider using Noda Time.

If using .NET without Noda Time, consider that DateTimeOffset is often a better choice than DateTime.

If using Perl, use DateTime.

If using Python, use pytz or dateutil.

If using JavaScript, use moment.js with the moment-timezone extension.

If using PHP > 5.2, use the native time zones conversions provided by DateTime, and DateTimeZone classes. Be careful when using.DateTimeZone::listAbbreviations() - see answer. To keep PHP with up to date Olson data, install periodically the timezonedb PECL package; see answer.If using C++, be sure to use a library that uses the properly implements the IANA timezone database. These include cctz, ICU, and Howard Hinnant's "tz" library.Do not use Boost for time zone conversions. While its API claims to support standard IANA (aka "zoneinfo") identifiers, it crudely maps them to fixed offsets without considering the rich history of changes each zone may have had.(Also, the file has fallen out of maintenance.)Most business rules use civil time, rather than UTC or GMT. Therefore, plan to convert UTC timestamps to a local time zone before applying application logic.Remember that time zones and offsets are not fixed and may change. For instance, historically US and UK used the same dates to 'spring forward' and 'fall back'.However, in 2007 the US changed the dates that the clocks get changed on. This now means that for 48 weeks of the year the difference between London time and New York time is 5 hours and for 4 weeks (3 in the spring, 1 in the autumn) it is 4 hours. Be aware of items like this in any calculations that involve multiple zones.Consider the type of time (actual event time, broadcast time, relative time, historical time, recurring time) what elements (timestamp, time zone offset and time zone name) you need to store for correct retrieval - see "Types of Time" in answer.Keep your OS, database and application tzdata files in sync, between themselves and the rest of the world.On servers, set hardware clocks and OS clocks to UTC rather than a local time zone.Regardless of the previous bullet point, server-side code, including web sites, should never expect the local time zone of the server to be anything in particular. see answer.Use NTP services on all servers.If using FAT32, remember that timestamps are stored in local time, not UTC.When dealing with recurring events (weekly TV show, for example), remember that the time changes with DST and will be different across time zones.Always query date-time values as lower-bound inclusive, upper-bound exclusive (>=, <).Laconic Answer (no need to change default timezone)Loquacious AnswerUse strtotime's second option which changes the frame of reference of the function. By the way I prefer not to update the default time zone of the script:And a HelperMaybe not the most performant approach, but works well when you know the default timezone and the offset. For example if the default timezone is UTC and the offset is -8 hours:

How to get name of the constant?

Deniss Kozlovs

[How to get name of the constant?](https://stackoverflow.com/questions/1880148/how-to-get-name-of-the-constant)

Assuming you have a constant defined in a class:Is it possible with PHP?

2009-12-10 10:45:51Z

Assuming you have a constant defined in a class:Is it possible with PHP?You can get them with the reflection APII'm assuming you would like to get the name of the constant based on the value of your variable (value of variable == value of constant). Get all the constants defined in the class, loop over them and compare the values of those constants with the value of your variable.

Note that with this approach you might get some other constant that the one you want, if there are two constants with the same value.example:ps: do you mind telling why you need this, as it seems very unusual ...Here's what I did to achieve it. Inspired by Jan Hancic.With Reflection:$constants is an array which holds all the names and values of the constants defined in class Foo.I know this is an old question and all, but I still feel that I have some useful input. I implemented this using an abstract class that all my enums extend. The abstract class contains a generic toString() method;This way you can get a human readable string to use in output, on every enum that extends the base enum. Furthermore, your implementation of the enum, being final, cannot be extended and because the constructor in the BaseEnum is private it can never be instantiated.So for instance, if you show a list of all usernames with their types you can do something likeAll the other answers cover the essential points.  But, if crazy one liners is your thing, then:If you need to handle the case where the value might not actually be one of the constants, then you can give up an extra line:All constant can be assigned to an array using this function.then using following function you can print the array structureand you can see more explanation here www.sugunan.comWarning: This way you should NOT program... ( if youre not sure what youre doing :) )I wrote 1 row which echos constants and their numeric values by your choice of CATEGORY_so here is the list of CATEGORY_ ERR_And if you want just the one youre looking for by number => I created 1row function:So for example some info constant with number 64:will output something like: NameOfConstant: INFO_LICENSEOK, OK, I know everything is already covered :)

But Jan Hančič asked for use case, so I'll share mine.

Aside: everyone seems to use array_flip(). Why not array_search()?I needed it in a class that extends \Exception and is base class of small set of my concrete exceptions. Each of those concrete exception classes covers a broad exception domain and has defined several precise exception causes. Reason? I don't want to have a horde of exceptions to maintain and remember of. Also, there is exception handler set that dumps exception's guts into log file - and it's here I need to get the constant name as trying to decipher exception cause from status in quite painful.Examples from my CLI scripts:if you need to get the constant value on a method of the same class, you just need to use the self operator. You could use reflection if you want to use the constants on another class

SQL Query: order by length of characters?

TorbenL

[SQL Query: order by length of characters?](https://stackoverflow.com/questions/3606907/sql-query-order-by-length-of-characters)

Morning, is it possible to order sql data rows by the length of characters?e.g. SELECT * FROM database ORDER BY data.length()

2010-08-31 07:31:36Z

Morning, is it possible to order sql data rows by the length of characters?e.g. SELECT * FROM database ORDER BY data.length()I think you want to use this: http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-lengthYou can use just simply LENGTH(), but beware, because it counts the byte number (which won't give you the expected result with multibyte strings).Where data is varchar fielde.g;For anyone doing with Sqlite

change mime type of output in php

Sam

[change mime type of output in php](https://stackoverflow.com/questions/152006/change-mime-type-of-output-in-php)

I've got a php script. Most of the time the script returns html, which is working fine, but on one occasion (parameter ?Format=XML) the script returns XML instead of HTML.Is there any way to change the returned mime type of the php output on the fly from text/html to text/xml or application/xml?

2008-09-30 06:52:11Z

I've got a php script. Most of the time the script returns html, which is working fine, but on one occasion (parameter ?Format=XML) the script returns XML instead of HTML.Is there any way to change the returned mime type of the php output on the fly from text/html to text/xml or application/xml?More information available at the PHP documentation for header()Set the Content-Type header:Though you should probably use "application/xml" instead.You should send a Content-Type header before you send any output.I will answer to the update, since the previous answers are good.

I have read that Internet Explorer is well known for ignoring Mime type headers (most of the time?) to rely on content of the file (which can cause problems in some cases).Mmm, I did a simple test:Internet Explorer 6 displays it correctly as XML. Even if I remove the xml declaration.

You should indicate which version is problematic.Actually, as I wrote above, with IE (6 at least), you don't even need a content-type, it recognize XML data and display it as a tree. Is your XML correct?[Update] Tried with IE7 as well, adding ?format=xml too, still displaying XML correctly. If I send malformed XML, IE displays an error. Tested on WinXP Pro SP2+You can add encoding as well in the same line. I added utf-8, which is most common.I just used the following:

NOTE: I am using "i" for sql improved extension. Iterate through the rows, printing XML nodes for each

PHP file_exists and wildcard

bsamek

[PHP file_exists and wildcard](https://stackoverflow.com/questions/2746364/php-file-exists-and-wildcard)

Is there a way to write the PHP file_exists function so that it searches a directory for a file with an arbitrary extension.  For instance, suppose I knew that a file were called "hello", but I didn't know the extension, how would I write a function that searched for a file called hello.* and returned the name of this file?  As far as I can tell, file_exists will only search for a string.Thanks.

2010-04-30 17:15:00Z

Is there a way to write the PHP file_exists function so that it searches a directory for a file with an arbitrary extension.  For instance, suppose I knew that a file were called "hello", but I didn't know the extension, how would I write a function that searched for a file called hello.* and returned the name of this file?  As far as I can tell, file_exists will only search for a string.Thanks.You're looking for the glob() function.file_exists doesn't do any kind of search : it only allows one to know whether a fle exists or not, when knowingf its name.And, with PHP >= 5.3, you could use the new GlobIterator.

As an example with glob(), the following portion of code :Gives me this output :

While this one :Yes, with two * ;-)Will give me :As of PHP5.3, you can also use the GlobIterator to search a directory with wildcards:would return the full paths to all .pdf files in some/path in an array. The above performs about the same as glob(), but iterators provide a more powerful and extensible API.As long as file_exists returns a BOOLEAN I wrote this small function

that accepts a search string with * to look for files...

Example:If you need a little more control and are on pre PHP 5.3 you could use a DirectoryIterator or RecursiveDirectoryIterator. Both have a lot of great function for added control and manipulation.PHP docs are at DirectoryIterator and RecursiveDirectoryIterator

Replace only first match using preg_replace [duplicate]

deadbeef

[Replace only first match using preg_replace [duplicate]](https://stackoverflow.com/questions/6729710/replace-only-first-match-using-preg-replace)

I have a string with structure similar to: 'aba aaa cba sbd dga gad aaa cbz'. The string can be a bit different each time as it's from an external source.I would like to replace only first occurrence of 'aaa' but not the others. Is it possible?

2011-07-18 07:17:04Z

I have a string with structure similar to: 'aba aaa cba sbd dga gad aaa cbz'. The string can be a bit different each time as it's from an external source.I would like to replace only first occurrence of 'aaa' but not the others. Is it possible?The optional fourth parameter of preg_replace is limit:You can use the limit argument of preg_replace for this and set it to 1 so that at most one replacement happens:for example, out $content is:1) if you use:it will change everything from the START to the last AAA and Your result will be:2) if you use:Your Result will be like:

Access PHP var from external javascript file

FFish

[Access PHP var from external javascript file](https://stackoverflow.com/questions/2928827/access-php-var-from-external-javascript-file)

I can access a PHP var with Javascript like this:But what if I want to use an external JS file:externaljs.js:

2010-05-28 12:13:34Z

I can access a PHP var with Javascript like this:But what if I want to use an external JS file:externaljs.js:You don't really access it, you insert it into the javascript code when you serve the page.However if your other javascript isn't from an external source you can do something like:and then in the file.js use color like so:You can also access data from php script in Javascript (I'll use jQuery here) like thisCreate input hidden field within you php file like thisin your javascript file:This will do the job as well :)What I've seen done is let .js files run through the php interpreter. Which I can not recommend. What I do recommend is fetching the values through AJAX and have the PHP file return the value to the JS file. Which is a much cleaner method.First of all you have to understand that no program can actually have access to the other program's variable.When you realize that, the rest is simple.

You can either set up a js variable in the main file and then include your external js, or make this external js dynamic, generated by PHP as wellWhat you likely want, is called Asynchronous JavaScript and XML (AJAX): http://www.w3schools.com/ajax/default.aspaBasically, imagine being able to send messages from the clients JavaScript to your PHP scripts on the server. In the example you gave (externaljs.js), you would have the script ask the server what $color is, via HTTP. You can also point the script tag at a PHP script that generates the JavaScript you want. It depends on what you need to do.It helps to have some understanding of taint checking, data verification, and security ;)As the others are saying, javascript doesn't have access to php variables.  However, it does have access to the DOM. So, you can use php to add attributes to some page element. And then you can access those attributes with javascript.e.g. <div id='apple' class='red'> is completely available to javascriptDon solution is good, furthermore if you want to use a php array in an external javascipt this can help you:PHP: HTML:Javasript: (You can now use the array like a normal Javascript array)externaljs.js is a static file. Of course it can't access PHP data. The only way to pass PHP data to a js file would be to physically alter the file by writing to it in your PHP script, although this is a messy solution at best.Edit in response to Ólafur Waage's answer: I guess writing to the js file isn't the only way. Passing the js through the PHP interpreter never crossed my mind (for good reason).You could change it to And the PHP script could just write JavaScript like that :Though using AJAX like said Sepehr Lajevardi would be much cleaner2017-2018 and above solution: Since nobody bringed it up yet and I guess no one thought of combining the functions base64_encode and json_encode yet, you could even send PHP Array variables like that:Then you could just load your desired js file with the parameter for a query string like this:echo '<script type="text/javascript" src="js/main.php?string='.$string.'&array='.$array.'">';Then js/main.php will look like this for example. You can test your variables this way:The following will then output when you open your index.php. So you see, you don't open js/main.php and you still got the javascript functionality from it.You cant do that and dont try to as this is not a recommended approach, However you can pass php variables as a function parameters to function written in external jsYou can include() them just as you would anything else:This will basically render the external file as inline js.  The main disadvantage here is that you lose the potential performance benefit of browser caching.  On the other hand, it's much easier than re-declaring your php variables in javascript.

Parsing Huge XML Files in PHP

Ian

[Parsing Huge XML Files in PHP](https://stackoverflow.com/questions/911663/parsing-huge-xml-files-in-php)

I'm trying to parse the DMOZ content/structures XML files into MySQL, but all existing scripts to do this are very old and don't work well. How can I go about opening a large (+1GB) XML file in PHP for parsing?

2009-05-26 16:50:50Z

I'm trying to parse the DMOZ content/structures XML files into MySQL, but all existing scripts to do this are very old and don't work well. How can I go about opening a large (+1GB) XML file in PHP for parsing?There are only two php APIs that are really suited for processing large files. The first is the old expat api, and the second is the newer XMLreader functions. These apis read continuous streams rather than loading the entire tree into memory (which is what simplexml and DOM does).For an example, you might want to look at this partial parser of the DMOZ-catalog:This is a very similar question to Best way to process large XML in PHP but with a very good specific answer upvoted addressing the specific problem of DMOZ catalogue parsing.

However, since this is a good Google hit for large XMLs in general, I will repost my answer from the other question as well:My take on it:https://github.com/prewk/XmlStreamerA simple class that will extract all children to the XML root element while streaming the file.

Tested on 108 MB XML file from pubmed.com.I've recently had to parse some pretty large XML documents, and needed a method to read one element at a time.If you have the following file complex-test.xml:And wanted to return the <Object/>sPHP:This isn't a great solution, but just to throw another option out there:You can break many large XML files up into chunks, especially those that are really just lists of similar elements (as I suspect the file you're working with would be).e.g., if your doc looks like:You can read it in a meg or two at a time, artificially wrap the few complete <listing> tags you loaded in a root level tag, and then load them via simplexml/domxml (I used domxml, when taking this approach).Frankly, I prefer this approach if you're using PHP < 5.1.2.  With 5.1.2 and higher, XMLReader is available, which is probably the best option, but before that, you're stuck with either the above chunking strategy, or the old SAX/expat lib.  And I don't know about the rest of you, but I HATE writing/maintaining SAX/expat parsers.Note, however, that this approach is NOT really practical when your document doesn't consist of many identical bottom-level elements (e.g., it works great for any sort of list of files, or URLs, etc., but wouldn't make sense for parsing a large HTML document)I would suggest using a SAX based parser rather than DOM based parsing.Info on using SAX in PHP: http://www.brainbell.com/tutorials/php/Parsing_XML_With_SAX.htmThis is an old post, but first in the google search result, so I thought I post another solution based on this post:http://drib.tech/programming/parse-large-xml-files-phpThis solution uses both XMLReader and SimpleXMLElement :You can combine XMLReader with DOM for this. In PHP both APIs (and SimpleXML) are based on the same library - libxml2. Large XMLs are a list of records typically. So you use XMLReader to iterate the records, load a single record into DOM and use DOM methods and Xpath to extract values. The key is the method XMLReader::expand(). It loads the current node in an XMLReader instance and its descendants as DOM nodes. Example XML:Example code:Take note that the expanded node is never appended to the DOM document. It allows the GC to clean it up.This approach works with XML namespaces as well.

PHP Can static:: replace self::?

elite5472

[PHP Can static:: replace self::?](https://stackoverflow.com/questions/4718808/php-can-static-replace-self)

I am a little confused with this matter. I am designing an ORM class that tries to behave very similarly to ActiveRecord in ruby on rails, but that's beside the point.What I'm trying to say is that my class makes extensive use of static attribute inheritance, specially for database and table handling. My question is, should I use self:: at all?

2011-01-17 22:59:52Z

I am a little confused with this matter. I am designing an ORM class that tries to behave very similarly to ActiveRecord in ruby on rails, but that's beside the point.What I'm trying to say is that my class makes extensive use of static attribute inheritance, specially for database and table handling. My question is, should I use self:: at all?You have to ask yourself: "Am I targeting the problem with the adequated approach?"self:: and static:: do two different things. For instance self:: or __CLASS__ are references to the current class, so defined in certain scope it will NOT suffice the need of static calling on forward.What will happen on inheritance?This will printIn the other hand with static:: It has the expected behaviourThis will printThat is called late static binding in PHP 5.3.0. It solves the limitation of calling the class that was referenced at runtime.With that in mind I think you can now see and solve the problem adequately. If you are inheriting several static members and need access to the parent and child members self:: will not suffice.try to use the code bellow to see the difference between self and static:and you get this result:

PHP - get all class names inside a particular namespace

Pedram Behroozi

[PHP - get all class names inside a particular namespace](https://stackoverflow.com/questions/22761554/php-get-all-class-names-inside-a-particular-namespace)

I want to get all classes inside a namespace. I have something like this:I tried get_declared_classes() inside getAllClasses() but MyClass1 and MyClass2 were not in the list.How could I do that?

2014-03-31 12:28:53Z

I want to get all classes inside a namespace. I have something like this:I tried get_declared_classes() inside getAllClasses() but MyClass1 and MyClass2 were not in the list.How could I do that?The generic approach would be to get all fully qualified classnames (class with full namespace) in your project, and then filter by the wanted namespace.PHP offers some native functions to get those classes (get_declared_classes, etc), but they won't be able to find classes that have not been loaded (include / require), therefore it won't work as expected with autoloaders (like Composer for example).

This is a major issue as the usage of autoloaders is very common.So your last resort is to find all PHP files by yourself and parse them to extract their namespace and class:If you follow PSR 0 or PSR 4 standards (your directory tree reflects your namespace), you don't have to filter anything: just give the path that corresponds to the namespace you want.If you're not a fan of copying/pasting the above code snippets, you can simply install this library: https://github.com/gnugat/nomo-spaco .

If you use PHP >= 5.5, you can also use the following library: https://github.com/hanneskod/classtools .Update: Since this answer became somewhat popular, I've created a packagist package to simplify things. It contains basically what I've described here, without the need to add the class yourself or configure the $appRoot manually. It may eventually support more than just PSR-4.That package can be found here: haydenpierce/class-finder.See more info in the README file.I wasn't happy with any of the solutions here so I ended up building my class to handle this. This solution requires that you are:In a nutshell, this class attempts to figure out where the classes actually live on your filesystem based on the namespaces you've defined in composer.json. For instance, classes defined in the namespace Backup\Test are found in /home/hpierce/BackupApplicationRoot/src/Test. This can be trusted because mapping a directory structure to namespace is required by PSR-4: You may need to adjust appRoot to point to the directory that contains composer.json.Pretty interesting that there does not seem to be any reflection method that does that for you. However I came up with a little class that is capable of reading namespace information.In order to do so, you have to traverse trough all defined classes. Then we get the namespace of that class and store it into an array along with the classname itself.The output will be: array(2) { [0]=> string(17) "ClassTwo\ClassTwo" [1]=> string(20) "ClassTwo\ClassTwoNew" }Of course everything besides the NameSpaceFinder class itself if assembled quick and dirty. So feel free to clean up the include mess by using autoloading.I think a lot of people might have a problem like this, so I relied on the answers from @hpierce and @loïc-faugeron to solve this problem.With the class described below, you can have all classes within a namespace or they respect a certain term.In this case, you must use Composer to perform class autoloading. Using the ClassMap available on it, the solution is simplified.A class can be localized in the file system by its name and its namespace, like the autoloader does. In the normal case the namespace should tell the relative path to the class files. The include paths are the starting points of the relative paths. The function get_include_path() returns a list of include paths in one string. Each include path can be tested, whether there exists a relative path which matches the namespace. If the matching path is found, you will know the location of the class files.As soon as the location of the class files is known, the classes can be extracted from the file names, because the name of a class file should consist of the class name followed by .php.Here is a sample code to get all class names of the namespace foo\bar as a string array:I am going to give an example which is actually being used in our Laravel 5 app but can be used almost everywhere. The example returns class names with the namespace which can be easily taken out, if not required. Laravel people can use app_path() . '/{{2}}/*.php' in glob().class_parents, spl_classes() and class_uses can be used to retrieve all the class namesYou can use get_declared_classes but with a little additional work.So first you get all declared classes and then check which of them starts with your namespace.Note: you will get array where keys do not start with 0. To achive this, you can try: array_values($neededClasses);.Quite a few interesting answers above, some actually peculiarly complex for the proposed task. To add a different flavor to the possibilities, here a quick and easy non-optimized function to do what you ask using the most basic techniques and common statements I could think of:Use simply as:I've written this function to assume you are not adding the last "trailing slash" (\) on the namespace, so you won't have to double it to escape it. ;) Please notice this function is only an example and has many flaws. Based on the example above, if you use 'namespace\sub' and 'namespace\sub\deep' exists, the function will return all classes found in both namespaces (behaving as if it was recursive). However, it would be simple to adjust and expand this function for much more than that, mostly requiring a couple of tweaks in the foreach block.It may not be the pinnacle of the code-art-nouveau, but at least it does what was proposed and should be simple enough to be self-explanatory. I hope it helps pave the way for you to achieve what you are looking for. Note: PHP 5 and 7 friendly.After trying the composer solutions above, was not satisfied with the time it took to obtain the recursive classes inside a namespace, up to 3 seconds but on some machines it took 6-7 seconds which was unacceptable. Below class renders the classes in ~0.05 in a normal 3-4 levels depth directory structure.Usage:

   Result:The easiest way should be to use your own autoloader __autoload function and inside of it save the loaded classes names. Does that suits You ?Otherwise I think You will have to deal with some reflection methods.for symfony you can use the Finder Component:http://symfony.com/doc/current/components/finder.htmlI just did something similar, this is relatively simple but can be built off of.Note: This solution seems to work with Laravel directly. For outside Laravel, you might need to copy and modify the ComposerClassMap class from the given source. I didn't try.If you are already using Composer for PSR-4 compliant autoloading, you can use this method to get all autoloaded classes and filter them (That's the example from my module system, directly copied and pasted from there):Source of the ComposerClassMap class: https://github.com/facade/ignition/blob/master/src/Support/ComposerClassMap.php

PDO bindParam vs. execute

Explosion Pills

[PDO bindParam vs. execute](https://stackoverflow.com/questions/12392424/pdo-bindparam-vs-execute)

I often see code using bindParam or bindValue with PDO.  Is simply passing arguments to execute frowned upon for any reason?I understand that bindParam actually binds to the variables and that you can set the type of parameter being bound with both bind methods, but what if you are only inserting strings?I often see the above, but personally I prefer:It is not as verbose and visually it makes more sense to me to have the inputs "going in" to the query together.  However, I hardly ever see it used.Is there a reason to prefer the bind methods over passing parameters to execute when you don't have to take advantage of the special behaviors of the former?

2012-09-12 16:14:16Z

I often see code using bindParam or bindValue with PDO.  Is simply passing arguments to execute frowned upon for any reason?I understand that bindParam actually binds to the variables and that you can set the type of parameter being bound with both bind methods, but what if you are only inserting strings?I often see the above, but personally I prefer:It is not as verbose and visually it makes more sense to me to have the inputs "going in" to the query together.  However, I hardly ever see it used.Is there a reason to prefer the bind methods over passing parameters to execute when you don't have to take advantage of the special behaviors of the former?You might find bindParam used when you just want to bind a variable reference to a parameter in the query, but perhaps still need to do some manipulations on it and only want the value of the variable calculated at time of query execution. It also allows you to do more complex things like bind a parameter to a stored procedure call and have the returned value updated into the bound variable.For more, see the bindParam documentation, bindValue documentation and execute documentation.For examplebindValue and passing an array to execute behave in much the same way as the parameter value is fixed at that point and SQL executed accordingly.Following the same example above, but using bindValueWhen passing values directly in execute all values are treated as strings (even if integer value is provided).  So if you need to enforce data types, you should always use bindValue or bindParam.I think you might see bind* used more than execute(array) as many consider it to be better coding practice to explicitly define data types in parameter declarations.By passing the parameters along with the $pdo->execute() method, all values in the array with be passed, as PDO::PARAM_STR to the statement with the $pdo->bindParam() function.The main difference that I can see now, is that with the $pdo->bindParam() function, you can define the data type passed along, using the PDO::PARAM_* constants as described in the PHP.net manualSimple,

the value of bindParam may change but the value of bindValue can not change.

Example:

How to develop and include a Composer package?

greggilbert

[How to develop and include a Composer package?](https://stackoverflow.com/questions/14295558/how-to-develop-and-include-a-composer-package)

I'm looking to develop a package in PHP, but I don't want it immediately available on GitHub or somewhere. It's easy enough to include a Packagist file in my composer.json, but how do I add a local package into my composer.json? Also, should I be building the package in /vendor/foo/bar (relative to the root composer.json), or should I put it somewhere else?Edit: I guess my question is about how everyone else writes their packages. Does every new package get added to Packagist, and then when you want to test your changes, you commit to GitHub (or wherever), and then pull that back down via Composer? That seems really inefficient.

2013-01-12 16:53:42Z

I'm looking to develop a package in PHP, but I don't want it immediately available on GitHub or somewhere. It's easy enough to include a Packagist file in my composer.json, but how do I add a local package into my composer.json? Also, should I be building the package in /vendor/foo/bar (relative to the root composer.json), or should I put it somewhere else?Edit: I guess my question is about how everyone else writes their packages. Does every new package get added to Packagist, and then when you want to test your changes, you commit to GitHub (or wherever), and then pull that back down via Composer? That seems really inefficient.As this question has many different components/standards to be explained, I'll try to explain as much as possible here and you can PM me or just Google it for more specific questions as they come up.To answer your first question, "How do I add a local package into my composer.json?":If by "add local package" you mean autoload your class/package, you can do that by either using PSR-4 or PSR-0 or Classmap options in composer. You can Google it if you need more info on PSR-0, PSR-4 and Classmap.If you actually want to add a local package:Now if you have the local package on git, then there would be no need to archive the package (basically omit step 2) and you just need to replace the URL in the above example to the path/to/localPackage/.git.(End of edit)Now to answer the larger question: "How do I develop and include a Composer package?":Now, if everything is done right, you should be able to use your library as a dependency in other projects by adding it to the composer.json of that project.Instead of creating a new repository, you can tell composer to use any local path:https://getcomposer.org/doc/05-repositories.md#pathFor instance, lets say that you have your PHP projects under ~/devel/projectsYou may have your main project in ~/devel/projects/main_project, and your "local package" in ~/devel/projects/local_packageDefine your composer configuration for the local package. In ~/devel/projects/local_package/composer.json.Then, you can edit ~/devel/projects/main_project/composer.json and link to your local package via path repo:More info on this link (not written by me but has a good explanation on this subject):https://carlosbuenosvinos.com/working-at-the-same-time-in-a-project-and-its-dependencies-composer-and-path-type-repository/It seems most answers on this thread are not "in the know". I am new to Composer myself, but these answers are misleading. The question could simply be stated as: "How can I develop a composer package".Yes, you could use a custom repository or upload an unfinished package and update it after every change. That neither is the correct solution or the answer to the question.It doesn't help that Composer's official documentation doesn't state this upfront, but you can see the heading on the Libraries documentation page:This is very important to understandThe previously mentioned page goes on to state:In this example so far, we have a required package, and now a name. Note the vendor/name format.So now to autoloading our own files, which is documented on the Basic usage page.This will autoload the namespaced class files under the src/Acme directory.On to the fun.Install or update the package with the command:orThis will download the required packages and create the autoload.php fileOur project structure should look simular to the following:Now to test.Include autoload.phprequire_once 'path/to/project/vendor/autoload.php';Assuming Foo.php looks like the following:we can then call this from our script:Please correct any misleading information I may have stated. This is what seems the be the solution to a popular question.Here's a recap of the solutions plus my ownSince you don't want to publish yet, you're in development, this is a poor option.You may not want to publish your library source on github, not want to pay for a private repo, or be able to use a cloud external service (due to political or network policies).You can use the composer repository path in your example implementation to point to a local zip file as a release. You'll have to re-zip every time you make a change to the lib, even with a batch file to do it, this is icky.This is getting close, but you'll need to do a composer update each time you change your library and want to test your example implementation. This mimics productions but is cumbersome. Personally I recommend this solution, even though it's not brainless.This is a hack, but you could just add:}Please note that you will need to copy+paste the 'require' section from your lib to your sample implementation. Change 'yourlibnamespace' to your library namespace and "D:\Code\yourlib\src\" to your local path to your library source.This way any changes are immediately reflected. However you will not be using or testing your library's composer.json file at all. If you change a requirement in your library .json it will not flow through at all. So it has some big disadvantages, but does do what you want, which is to test your library implementation immediately with the least commands possible.Usually you just have src\ and tests\, but many have examples\ where you can find sample implementations. As you develop your application you can contribute to these example implementations. You can do this in a local git/svn repo, and you have the advantage of getting the lib's 'require', plus the namespace automatically. It is the best of all worlds. I recommend this method.Maybe adding a custom repository will help you?https://github.com/composer/composer/blob/master/doc/05-repositories.mdYou can set up a local git repository with your library very easily.Of course if you use composer to manage dependencies you should build your library someplace else and download it to vendor/ via composer coz this is the whole point i guess.That's my flow of creating and developing a new Composer package locally:This is still not ideal, but it gets the work done for small to medium packages.To make developing more efficient I simply symlink the development repository into a directory that has already installed it. For example, if /Code/project-1 requires a package that's in /Code/package-1, I:That way, when I make changes in /Code/package-1, it's immediately reflected in /Code/project-1.My workflow does not completely answer the OP's question but may be helpful for others.So what I do is simple: I add the package directly under the vendor directory, either directly or using a symlink.

Are there limits for session variables?

jolt

[Are there limits for session variables?](https://stackoverflow.com/questions/4274955/are-there-limits-for-session-variables)

As the title says, are there limits (if any) for session variables or they're considered as usual variables and can store equal amount of data?I'm looking if there are any other limits aside from variable type ones like max length, max values and so on.P.S. If the question is unclear, please let me know.Thanks in advance!

2010-11-25 08:21:21Z

As the title says, are there limits (if any) for session variables or they're considered as usual variables and can store equal amount of data?I'm looking if there are any other limits aside from variable type ones like max length, max values and so on.P.S. If the question is unclear, please let me know.Thanks in advance!As @Thariama said, there's no limit on the number of variables; also, there's no limit on the amount of data you can store in a session (I've seen sessions tens of MB in size).As the size of a session gets larger, you'll run into various quirks though: PHP 5 deserializes the whole session into memory at session_start() (using the default session handler - you can make you own solution, of course); with a 20 MB session and 50 concurrent users, your scripts start to be severely limited by disk access speeds (a.k.a. "script startup is slow as molasses" - the sessions alone would be hogging a GB of RAM); in the end, we dedicated a box to keep as many sessions as possible in its RAM, and the frontend boxes accessed them over NFS (although it helped in our case, this may be overkill for you).Note that for many concurrent users and session storage on disk, the number of session temporary files may cause problems with filesystem limits (e.g. how many files can be in one directory before you run into problems with stat() performance), or other limits (we once found the hard way that a box was configured to only allow 4096 open files at the same time). None of this is really session-specific, but can be triggered by session handling.No, there is no limit on much space a session may have (or how many variables a session may possess).

The only limit is the specs on your computer, this is defined by your available memory_limit in your php.ini .

Be aware that this space will be shared among all sessions for all users.It is completely specific to your web-server. For Apache, look here:http://httpd.apache.org/docs/trunk/mod/mod_session.htmlIt even allows sessions to be stored in database by using mod_session_dbd. Therefore physical limits like 1 file per session can be overcome.  Moreover, Apache can be configured to keep track of per user sessions stored on a particular server or group of servers for scalability.The simple answer is no. (That is, they have no more restrictions than any other PHP variable has... must fit into memory, etc.)However, keep in mind that $_SESSION data is stored somewhere, by default as serialized data in one file per session. So there are practical limitations. You wouldn't want to store a huge blob of information in them because they would be loaded/saved from the data store on every page that uses session_start().

Dynamically reference to $this should not work, but it does

Demis Palma ツ

[Dynamically reference to $this should not work, but it does](https://stackoverflow.com/questions/28419924/dynamically-reference-to-this-should-not-work-but-it-does)

As per PHP documentation about Variable variables: However it seems that it's false, at least on the version of PHP, I've tested (5.5.12).Question #1: How can it work? According to the documentation it should not.But there's more.It stops the execution as expected:Note that the statement {'th' . 'is'} has been evaluated: "Undefined variable: this".However (this is the strangest thing), referencing explicitly the special variable $this, fixes all the dynamic references used before or after that within the method.Question #2: How an explicit reference to $this can fix all the other dynamic references to $this present in the whole method?

2015-02-09 21:40:38Z

As per PHP documentation about Variable variables: However it seems that it's false, at least on the version of PHP, I've tested (5.5.12).Question #1: How can it work? According to the documentation it should not.But there's more.It stops the execution as expected:Note that the statement {'th' . 'is'} has been evaluated: "Undefined variable: this".However (this is the strangest thing), referencing explicitly the special variable $this, fixes all the dynamic references used before or after that within the method.Question #2: How an explicit reference to $this can fix all the other dynamic references to $this present in the whole method?PHP uses a concept we call the compiled variables (CV) optimization. This means that instead of using a hashtable which maps variable names to their values, we use a plain array and index into it. The compiler knows which variable name corresponds to which index. Performing array index lookups is significantly faster than doing hashtable lookups.The $this variable will also be stored this way and its index is specially remembered as op_array->this_var. If no $this use is found this value is left uninitialized at -1. When pushing a new execution context onto the VM stack PHP will check op_array->this_var and, if it isn't -1, initialize the $this variable entry.When a variable variable is accessed, PHP will walk through the CV table and construct a proper symbol hashtable from it. Of course it will only add variables which actually are in the CV table, so if it doesn't contain $this you'll end up with an undefined variable lookup.Now consider your three cases:Note that the situation is different in PHP 7 - we'll always set this_var on a variable variable lookup, so indirect $this lookups should always work.

PHPUnit: how do I mock multiple method calls with multiple arguments?

Thomas

[PHPUnit: how do I mock multiple method calls with multiple arguments?](https://stackoverflow.com/questions/10954107/phpunit-how-do-i-mock-multiple-method-calls-with-multiple-arguments)

I am writing a unit test for a method using PHPUnit. The method I am testing makes a call to the same method on the same object 3 times but with different sets of arguments. My question is similar to the questions asked here and hereThe questions asked in the other posts have to do with mocking methods that only take one argument.However, my method takes multiple arguments and I need something like this: This code doesn't work because equalTo() validates only one argument. Giving it more than one argument throws an exception:Is there a way to do a logicalOr mocking for a method with more than one argument?Thanks in advance.

2012-06-08 18:23:22Z

I am writing a unit test for a method using PHPUnit. The method I am testing makes a call to the same method on the same object 3 times but with different sets of arguments. My question is similar to the questions asked here and hereThe questions asked in the other posts have to do with mocking methods that only take one argument.However, my method takes multiple arguments and I need something like this: This code doesn't work because equalTo() validates only one argument. Giving it more than one argument throws an exception:Is there a way to do a logicalOr mocking for a method with more than one argument?Thanks in advance.In my case the answer turned out to be quite simple:The key is to use $this->at(n), with n being the Nth call of the method. I couldn't do anything with any of the logicalOr() variants I tried.For others who are looking to both match input parameters and provide return values for multiple calls.. this works for me:Stubbing a method call to return the value from a mapOr you can use if you don't need to specify input argumentsIn case someone finds this without looking at the correspondent section in the phpunit documentation, you can use the withConsecutive method The only downside of this being that the code MUST call the MyMockedMethod in the order of arguments supplied. I have not yet found a way around this.

PHP cli getting input from user and then dumping into variable possible?

kritya

[PHP cli getting input from user and then dumping into variable possible?](https://stackoverflow.com/questions/6543841/php-cli-getting-input-from-user-and-then-dumping-into-variable-possible)

Is it possible to get input from a user using php cli and then dump the input into a variable and then the script goes ahead.Just like the c++ cin function ?Is that possible if yes then how ?

Maybe not only php but maybe with some linux commands ?

2011-07-01 05:14:49Z

Is it possible to get input from a user using php cli and then dump the input into a variable and then the script goes ahead.Just like the c++ cin function ?Is that possible if yes then how ?

Maybe not only php but maybe with some linux commands ?Have a look at this PHP manual page

http://php.net/manual/en/features.commandline.phpin particularYou can simply do:to read a line from standard input in php CLI mode.In this example I'm extending Devjar's example. Credits for him for example code. Last code example is simplest and safest in my opinion.When you use his code:You should note stdin mode is not binary-safe. You should add "b" to your mode and use following code:Also you can set max charters. This is my personal example. I'll suggest to use this as your code. It's also recommended to use directly STDIN than "php://stdin". 

Get previous attribute value in Eloquent model event

coatesap

[Get previous attribute value in Eloquent model event](https://stackoverflow.com/questions/17367383/get-previous-attribute-value-in-eloquent-model-event)

Is there a way to see the old/previous value of a model's attribute in its saving or updating event?eg. Is something like the following possible:

2013-06-28 14:42:38Z

Is there a way to see the old/previous value of a model's attribute in its saving or updating event?eg. Is something like the following possible:Ok, I found this quite by chance, as it's not in the documentation at present...There is a getOriginal() method available which returns an array of the original attribute values:In Laravel 4.0 and 4.1, you can check with isDirty() method:You could overload the methods, then call the parent method.

How do I install soap extension?

Loreto Gabawa Jr.

[How do I install soap extension?](https://stackoverflow.com/questions/2509143/how-do-i-install-soap-extension)

How do I install Soap?I got this error:I am hosting my site in DreamHost and they don't support any third-party installation.UPDATE:I copied the php.ini file with this script: http://sxi.sabrextreme.com/dh-phpiniI am using an API from a website and it says something like this:and here are the list of extensions my php.ini file has:The problem is, the extension php_soap.dll is not found there.

2010-03-24 15:52:08Z

How do I install Soap?I got this error:I am hosting my site in DreamHost and they don't support any third-party installation.UPDATE:I copied the php.ini file with this script: http://sxi.sabrextreme.com/dh-phpiniI am using an API from a website and it says something like this:and here are the list of extensions my php.ini file has:The problem is, the extension php_soap.dll is not found there.ApachePHP5ApacheNginxIn ubuntu to install php_soap on PHP7 use below commands. ReferenceFor older version of php use below command and restart apache.find this line in php.ini :then remove the semicolon ; and restart Apache serverDreamhost now includes SoapClient in their PHP 5.3 builds.  You can switch your version of php in the domain setup section of the dreamhost control panel.I had the same problem, there was no extension=php_soap.dll in my php.ini

But this was because I had copied the php.ini from a old and previous php version (not a good idea).

I found the dll in the ext directory so I just could put it myself into the php.ini

extension=php_soap.dll

After Apache restart all worked with soap :)How To for Linux Ubuntu...Check if file php_soap.ao exists on /usr/lib/php/20160303/Change the line :;extension=php_soap.dlltoextension=php_soap.soCHecking...Please follow the below steps :They dont support it as in in they wont help you or be responsible for you hosing anything, but you can install custom extensions. To do so you need to first set up a local install of php 5, during that process you can compile in extensions you need or you can add them dynamically to the php.ini after the fact.

PHP - warning - Undefined property: stdClass - fix?

Phill Pafford

[PHP - warning - Undefined property: stdClass - fix?](https://stackoverflow.com/questions/2471605/php-warning-undefined-property-stdclass-fix)

I get this warning in my error logs and wanted to know how to correct this issues in my code.Warning:

PHP Notice:  Undefined property:  stdClass::$records in script.php on line 440Some Code:Response if records existsResponse if records does not existI was thinking something like array_key_exists() functionality but for objects, anything? or am I going about this the wrong way?

2010-03-18 16:32:25Z

I get this warning in my error logs and wanted to know how to correct this issues in my code.Warning:

PHP Notice:  Undefined property:  stdClass::$records in script.php on line 440Some Code:Response if records existsResponse if records does not existI was thinking something like array_key_exists() functionality but for objects, anything? or am I going about this the wrong way?You can use property_exists

http://www.php.net/manual/en/function.property-exists.phpIn this case, I would use:You won't get any ugly notices if the property doesn't exist, and you'll know you've actually got some records to work with, ie. $response->records is not an empty array, NULL, FALSE, or any other empty values.isset() is fine for top level, but empty() is much more useful to find whether nested values are set. Eg:Or:If you want to use property_exists, you'll need to get the name of the class with get_class()In this case it would be :The response itself seems to have the size of the records. You can use that to check if records exist. Something like:Depending on whether you're looking for a member or method, you can use either of these two functions to see if a member/method exists in a particular object: http://php.net/manual/en/function.method-exists.phphttp://php.net/manual/en/function.property-exists.phpMore generally if you want all of them: http://php.net/manual/en/function.get-object-vars.phpIf think this will work:newly defined proprties included too.

PHP DomDocument failing to handle utf-8 characters (☆)

Greg

[PHP DomDocument failing to handle utf-8 characters (☆)](https://stackoverflow.com/questions/11309194/php-domdocument-failing-to-handle-utf-8-characters)

The webserver is serving responses with utf-8 encoding, all files are saved with utf-8 encoding, and everything I know of setting has been set to utf-8 encoding.Here's a quick program, to test if the output works:The output of the program is:Which renders as:What could I be doing wrong? How much more specific do I have to be to tell the DomDocument to handle utf-8 properly?

2012-07-03 10:40:47Z

The webserver is serving responses with utf-8 encoding, all files are saved with utf-8 encoding, and everything I know of setting has been set to utf-8 encoding.Here's a quick program, to test if the output works:The output of the program is:Which renders as:What could I be doing wrong? How much more specific do I have to be to tell the DomDocument to handle utf-8 properly?DOMDocument::loadHTML() expects a HTML string.HTML uses the ISO-8859-1 encoding (ISO Latin Alphabet No. 1) as default per it's specs. That is since longer, see 6.1. The HTML Document Character Set. In reality that is more the default support for Windows-1252 in common webbrowsers.I go back that far because PHP's DOMDocument is based on libxml and that brings the HTMLparser which is designed for HTML 4.0.I'd say it's safe to assume then that you can load an ISO-8859-1 encoded string.Your string is UTF-8 encoded. Turn all characters higher than 127 / h7F into HTML Entities and you're fine. If you don't want to do that your own, that is what mb_convert_encoding with the HTML-ENTITIES target encoding does:The following is a code example that makes the progress a bit more visible by using a callback function:This exemplary outputs for your string:Anyway, that's just for looking deeper into your string. You want to have it either converted into an encoding loadHTML can deal with. That can be done by converting all outside of US-ASCII into HTML Entities:Take care that your input is actually UTF-8 encoded. If you have even mixed encodings (that can happen with some inputs) mb_convert_encoding can only handle one encoding per string. I already outlined above how to more specifically do string replacements with the help of regular expressions, so I leave further details for now.The other alternative is to hint the encoding. This can be done in your case by modifying the document and adding awhich is a Content-Type specifying a charset. That is also best practice for HTML strings that are not available via a webserver (e.g. saved on disk or inside a string like in your example). The webserver normally set's that as the response header.If you don't care the misplaced warnings, you can just add it in front of the string:Per the HTML 2.0 specs, elements that can only appear in the <head> section of a document, will be automatically placed there. This is what happens here, too. The output (pretty-print):There's a faster fix for that, after loading your html document in DOMDocument, you just set (or better said reset) the original encoding. Here's a sample code:Output:

What does \d+ mean in regular expression terms?

Elitmiar

[What does \d+ mean in regular expression terms?](https://stackoverflow.com/questions/2841550/what-does-d-mean-in-regular-expression-terms)

I'm new to regular expressions and came accros the following \d+ . I do not exactly know what this means, please point me in the right direction.

2010-05-15 19:53:02Z

I'm new to regular expressions and came accros the following \d+ . I do not exactly know what this means, please point me in the right direction.\d is a digit (a character in the range 0-9), and + means 1 or more times.  So, \d+ is 1 or more digits.This is about as simple as regular expressions get.  You should try reading up on regular expressions a little bit more.  Google has a lot of results for regular expression tutorial, for instance.  Or you could try using a tool like the free Regex Coach that will let you enter a regular expression and sample text, then indicate what (if anything) matches the regex.\d is called a character class and will match digits. It is equal to [0-9].+ matches 1 or more occurrences of the character before.So \d+ means match 1 or more digits.\d means 'digit'. + means, '1 or more times'. So \d+ means one or more digit. It will match 12 and 1.\d is a digit, + is 1 or more, so a sequence of 1 or more digits

How to install bcmath module?

JDesigns

[How to install bcmath module?](https://stackoverflow.com/questions/3400362/how-to-install-bcmath-module)

How do I install the bcmath module on a server? I triedbut it said it found nothing.

2010-08-03 20:05:55Z

How do I install the bcmath module on a server? I triedbut it said it found nothing.Try yum install php-bcmath. 

If you still can't find anything, try yum search bcmath to find the package nameubuntu and php7.1ubuntu and php without version specificationWorked great on CentOS 6.5All my calls to bcmath functions started working right after an apache restartSweet!Not sure why I had to go so deep considering the yum install gave me bcmath in phpinfo()If you have installed php 7.1 

then this line work on your system.check your php version in your system on ubuntu 16.04and then result show there..When using the official PHP images of Docker, use docker-php-ext-install bcmath.Source: https://hub.docker.com/_/php?tab=description#php-core-extensionsWas getting call to undefined function bcmod()you should then see something similar to /etc/php.d/bcmath.ini listed under phpinfo.I found that the repo that had the package was not enabled. On OEL7, and that worked...I used the following command to find where the package wasif you want enable any extension then you have to install an extension first, extension maybe enabled but not installed so, taking example of bcmath1.yum search php-bcmath2.then ensure php version in which u want to install this extension3.u will get output like after yum search command>>yum search php-bcmath**

Loaded plugins: fastestmirror, universal-hooks

Loading mirror speeds from cached hostfile7.u can install any extension from above steps.The following worked for me on Centos 7.4 with PHP 7.1 using remi repository.First find out which PHP version I have:Then search for bcmath extension in remi-php71 repository:Now install the first matching extension:Finally, restart php and nginx:This worked for me install php72-php-bcmath.x86_64

Then,In Ubuntu PHP 7.3I just tried below package for php v5.6 and it worked for me.apt repo have this extension, just run the below command from your terminal ::sudo apt-get install php7.2-bcmath*If still anyone is not getting how to install bcmath as it has lots of other dependant modules to install like php7.2-common, etc.Try using synaptic application, to install the same. fire command.\Open the synaptic application and then click on search tab.search for bcmathsearch results will show all the packages depends on php.Install as per your convenience.and install with all auto populated dependancies it required to install.That's it.For Centos 7 with php7.0Install CentOS SCLo RH repository: yum install centos-release-scl-rhInstall rh-php71-php-bcmath rpm package: yum install rh-php71-php-bcmathsystemctl restart httpd.serviceIf you want to install PHP extensions in ubuntu.first know which PHP version is active.After that install needed plugin using this command.you can replace php7.0-bcmath to php-PHPVersion-extensionNameFor PHP 7+ version you can use only:

PHP get index of last inserted item in array

Christian

[PHP get index of last inserted item in array](https://stackoverflow.com/questions/3275082/php-get-index-of-last-inserted-item-in-array)

It's as easy as the title sounds; I need to get the index/key of the last inserted item. Why is this difficult? See the following two code samples:Writes:Sure, that seems to work fine, but see this:Writes:So in short, the popular workaround count($array)-1 is flawed.

2010-07-18 10:05:54Z

It's as easy as the title sounds; I need to get the index/key of the last inserted item. Why is this difficult? See the following two code samples:Writes:Sure, that seems to work fine, but see this:Writes:So in short, the popular workaround count($array)-1 is flawed.Here is a linear (fastest) solution:You can use key($a) together with end($a)printsYou can use the end() function to get the last element in an array, and array_keys() to return an array of the array-keys. Confusing. In practice, it works like this:Credit goes to hollsk in the comments.If you are only working with numerical indexes for your array, the last auto-generated index will always be the biggest array key of the array.So, for auto-generated indexes, using something like max(array_keys($a)) should work.For example, this :Would get you :

But note that this will not work for situations when you are the one specifying the index...On arrays with numeric keys from 0 to n-1 I always use:It doesn't get any faster or simpler I guess. If someone got something like this that works for other arrays please    let me know.Bah, looks like I've found the answer by myself:

Eloquent ->first() if ->exists()

Webinan

[Eloquent ->first() if ->exists()](https://stackoverflow.com/questions/24531312/eloquent-first-if-exists)

I want to get the first row in table where condition matches:It works well, but if the condition doesn't match, it throws an Exception:Currently I resolve it like this:Can I do this without running two queries?

2014-07-02 12:39:56Z

I want to get the first row in table where condition matches:It works well, but if the condition doesn't match, it throws an Exception:Currently I resolve it like this:Can I do this without running two queries?Note: The first() method doesn't throw an exception as described in the original question.  If you're getting this kind of exception, there is another error in your code.The correct way to user first() and check for a result:Other techniques (not recommended, unnecessary overhead):or or Each one is a different way to get your required result.(ps - I couldn't comment) I think your best bet is something like you've done, or similar to:Oh, also: count() instead if exists but this could be something used after get.get returns Collection and is rather supposed to fetch multiple rows.count is a generic way of checking the result:Try it this way in a simple manner it will work An answer has already been accepted, but in these situations, a more elegant solution in my opinion would be to use error handling.

Add a custom file extension to Netbeans

garrow

[Add a custom file extension to Netbeans](https://stackoverflow.com/questions/905416/add-a-custom-file-extension-to-netbeans)

I am trying to figure out how to add a custom file type to be recognised by Netbeans.I am editing .tpl files and I would like them to be recognised as PHP/HTML files.I've looked here and here but I cant find cnd.properties in config directory and there is no Advanced Options dialog in the options dialog.I'm using Netbeans 6.5 with PHP and all modules up to date.

2009-05-25 05:13:41Z

I am trying to figure out how to add a custom file type to be recognised by Netbeans.I am editing .tpl files and I would like them to be recognised as PHP/HTML files.I've looked here and here but I cant find cnd.properties in config directory and there is no Advanced Options dialog in the options dialog.I'm using Netbeans 6.5 with PHP and all modules up to date.Let me guess, for Smarty templates? I did the followingIn NetBeans 8.XX this is achieved by going to NetBeans > Preferences > Miscellaneous > Files. In the row File Extension click on NEW and enter your new file extension without the dot (example: tpl). Choose the Associated File Type (MIME) and click Apply.Go toNow find the row file extension select tpl . Then most important to Choose the Associated File Type (MIME) as text/x-php5. After save this, restart netbeans.If you're looking for how to get Netbeans to recognize smarty templates, there's now a Smarty template plugin that should be more useful:

http://plugins.netbeans.org/plugin/37379/php-smarty

Laravel 5 change public_path()

user1995781

[Laravel 5 change public_path()](https://stackoverflow.com/questions/31758901/laravel-5-change-public-path)

I am trying to move the public folder to other place. However, I can't find the place to modify public_path() variable. Now, the 'public_path()' return the wrong path of folder.Where can I set the variable for public_path()?

2015-08-01 06:13:25Z

I am trying to move the public folder to other place. However, I can't find the place to modify public_path() variable. Now, the 'public_path()' return the wrong path of folder.Where can I set the variable for public_path()?You can override the public path using ioc container :What worked for me flawlessly was adding to public/index.php the following three lines:For more detailed explanation click hereWhile accepted answer works for requests coming from HTTP, it will not work for artisan.If you need artisan to know your custom public path, you need to extend Laravel main Application class. I know it sounds scary, but it's actually very simple.All you need to do is following:

Step 1: In the file: bootstrap/app.php change the very first declaration of $app variableto reflect your own custom Application class:Step 2: Define your custom Application class somewhere. For example in app/Application.phpCongrats! You have extended Laravel core Application class.Step 3: Overwrite the publicPath method. Copy and paste Laravel original method to your new class and change it to your needs. In my particular case I did like this:That's it! You can overwrite any method in Application class the same way.I suggest you add it in app/Providers/AppServiceProvider.php:This affects artisan as well.In laravel 5.6 this work for me ... adding this code to bootstrap/app.php :where __DIR__.'/../' is path to your public folderIn my case in Laravel 6.0 work this.

This file: bootstrap/app.phpI changed the public_path() folder, this example is with httpdocs folder, you can put watherver you want.

Execute root commands via PHP

Mehmet INCE

[Execute root commands via PHP](https://stackoverflow.com/questions/8532304/execute-root-commands-via-php)

I have a CentOS 5.7 linux server and use php5.3.x.On a pfSense system, you can restart services-that required root permissions using a php web page.I'm trying to do something similar, I have written some php code to execute shell commands.  For example, to restart the sshd service:and I tried to execute that command via exec function, but it needs root permission, but we have a apache user authority.I have come across a few solutions:Any other solutions? 

Thanks for answers.now.. it's interesting. i tried @refp post and it worked my local ubuntu server. But when i tried same at my cenOS vps server. It's not working.and that is apache's error log "rm: cannot remove `/var/lock/subsys/vsftpd': Permission denied" 

2011-12-16 09:43:16Z

I have a CentOS 5.7 linux server and use php5.3.x.On a pfSense system, you can restart services-that required root permissions using a php web page.I'm trying to do something similar, I have written some php code to execute shell commands.  For example, to restart the sshd service:and I tried to execute that command via exec function, but it needs root permission, but we have a apache user authority.I have come across a few solutions:Any other solutions? 

Thanks for answers.now.. it's interesting. i tried @refp post and it worked my local ubuntu server. But when i tried same at my cenOS vps server. It's not working.and that is apache's error log "rm: cannot remove `/var/lock/subsys/vsftpd': Permission denied" Read this whole post before trying it out, there are choices to be made.1) Create a script (preferrably .sh) that contains what you want to be ran as root.2) This file should be owned by root, and since it will later run with root permissions make sure that only root has permission to write to the file.3) To run the script as root no matter what user that executes it, we will need a binary wrapper. Create one that will execute our php_shell.sh.4) Compile and set proper permissions, including the suid bit (saying that it should run with root privileges):php_root will now run with root permissions, and execute the commands specified in php_shell.sh.If you don't need to the option to easily change what commands that will be executed I'd recommend you to write the commands directly in wrapper.c under step 4. Then you don't need to have a binary executing a external script executing the commands in question.In wrapper.c, use system ("your shell command here"); to specify what commands you'd like to execute.I would not have PHP execute any sudo commands. To me that sounds like asking for trouble. Instead I would create two separate systems.The first system, in PHP (the web tier), would handle user requests. When a request is made that needs a sudo command I would place this request in some queue. This could be a database of some sort or middle-ware such as ZeroMQ.The second system (the business tier) would read or receive messages from this queue and would have the ability to execute sudo commands but won't be in the scope of your web-server process.I know this is a bit vague and it can be solved in different ways with various technologies but I think this is the best and safest way to go.Allow the www-data user to run to run program1 and program2 with no password:Add to the contents of the sudoers file:Save.from https://askubuntu.com/questions/76920/call-a-shell-script-from-php-run-as-rootSolution using a binary wrapper (with suid bit)

Some modification of Filip Roséen - refp post.To execute any command modified wrapper.cCompile and set proper permissions;Now call from PHP. Execute any command.I recently published a project that allows PHP to obtain and interact with a real Bash shell, it will easily give you a shell logged in as root. Then you can just execute the individual bash commands rather than bundling then in a script. That way you can also handle the return. Get it here: https://github.com/merlinthemagic/MTSAfter downloading you would simply use the following code:Write this command in the terminal this command will disable SELinux.

this isn't a good practice.

How can I overwrite file contents with new content in PHP?

newbie

[How can I overwrite file contents with new content in PHP?](https://stackoverflow.com/questions/7551132/how-can-i-overwrite-file-contents-with-new-content-in-php)

I tried to use fopen, but I only managed to append content to end of file. Is it possible to overwrite all contents with new content in PHP?

2011-09-26 06:00:10Z

I tried to use fopen, but I only managed to append content to end of file. Is it possible to overwrite all contents with new content in PHP?Use file_put_contents()Alternatively, if you're stuck with fopen() you can use the w or w+ modes:MY PREFERRED METHOD is using fopen,fwrite and fclose [it will cost less CPU]It'll affect a lot in performance, for example [on the same class/situation] file_get_contents too: if you have a BIG FILE, it'll read the whole content in one shot and that operation could take a long waiting time

What's the best practice to set html attribute via PHP?

user198729

[What's the best practice to set html attribute via PHP?](https://stackoverflow.com/questions/2109583/whats-the-best-practice-to-set-html-attribute-via-php)

When doing this job in PHP,one may meet this kind of issue:The problem is that if $variable contains double quotes,should change it to \"And that's not the whole story yet:In this case,we need to change single quotes to \',but leave double quotes as is.So how can we do it in a general property manner?

2010-01-21 13:43:45Z

When doing this job in PHP,one may meet this kind of issue:The problem is that if $variable contains double quotes,should change it to \"And that's not the whole story yet:In this case,we need to change single quotes to \',but leave double quotes as is.So how can we do it in a general property manner?You always want to HTML-encode things inside HTML attributes, which you can do with htmlspecialchars:You probably want to set the second parameter ($quote_style) to ENT_QUOTES.The only potential risk is that $variable may already be encoded, so you may want to set the last parameter ($double_encode) to false.Well, before you output any text into HTML you should escape it using htmlspecialchars(). So just make sure (double) quote is correctly changed.Pay attention to the second parameter of that function.To address your edit [Edit: that you have removed meanwhile]: When you place dynamically JavaScript onto your site, you should before know quite well, what it would look like. Else you open the door widely for XSS attacks. That doesn't mean you have to know every quotation mark, but you should know enough to decide how to embed it at the line where you finally output it in the HTML file.Beyond that,works exactly likeThe Bat tool has a StringTool::htmlAttributes ( $arrayOfAttributes ) method that does the job too.https://github.com/lingtalfi/Bat/blob/master/StringTool.php

PHP get actual maximum upload size

Zulakis

[PHP get actual maximum upload size](https://stackoverflow.com/questions/13076480/php-get-actual-maximum-upload-size)

When usingit actually gives you the string specified in the php.ini file.It is not good to use this value as a reference for the maximum upload size becauseSo, is there any way to get the value actually being used by PHP, besides the one reported by ini_get, or what is the best way to determinate it?

2012-10-25 20:11:26Z

When usingit actually gives you the string specified in the php.ini file.It is not good to use this value as a reference for the maximum upload size becauseSo, is there any way to get the value actually being used by PHP, besides the one reported by ini_get, or what is the best way to determinate it?Drupal has this implemented fairly elegantly:The above functions are available anywhere in Drupal, or you can copy it and use it in your own project subject to the terms of the GPL license version 2 or later.As for parts 2 and 3 of your question, you will need to parse the php.ini file directly. These are essentially configuration errors, and PHP is resorting to fallback behaviors. It appears you can actually get the location of the loaded php.ini file in PHP, although trying to read from it may not work with basedir or safe-mode enabled:Here is the full solution. It takes care of all traps like the shorthand byte notation and also considers post_max_size:This is an error-free version of this source: http://www.smokycogs.com/blog/finding-the-maximum-file-upload-size-in-php/ .This is what I use:Looks like it isn't possible.Because of this, I am going to continue using this code:Originally from this helpful php.net comment.STILL OPEN TO ACCEPT BETTER ANSWERSI don't think so, at least not in the way you have defined it. There are so many other factors that come into consideration for maximum file upload size, most notably the connection speed of the user as well as the timeout setting for the web server as well as the PHP process(es).A more useful metric for you might be to decide what is a reasonable maximum file size for the types of files you expect to receive for a given input. Make the decision on what is reasonable for your use case and set a policy around that.Well you can always use this syntax, which will give you correct numbers from PHP ini file:Mart

Why is WordPress considered to be poorly programmed? [closed]

Philip Brocoum

[Why is WordPress considered to be poorly programmed? [closed]](https://stackoverflow.com/questions/1481631/why-is-wordpress-considered-to-be-poorly-programmed)

I'm not a fan of PHP or spaghetti code, or anything like that, but in my experience WordPress works amazingly well, it's well organized, and I've never come across any hard to understand code. The documentation is incredibly thorough, any security flaws are fixed within seconds, and it "just works". Not to mention that it does EVERYTHING, and it has an awesome plug-in system. Oh, and "the Loop" is awesome. I've never had any problems doing simple modifications to the code or to themes.Can you guys give any specific examples of what you don't like about it, or what you would have programmed differently? I just don't understand why it gets such a bad rap. I wish my own software worked as well and had as many features and looked as nice.

2009-09-26 16:53:57Z

I'm not a fan of PHP or spaghetti code, or anything like that, but in my experience WordPress works amazingly well, it's well organized, and I've never come across any hard to understand code. The documentation is incredibly thorough, any security flaws are fixed within seconds, and it "just works". Not to mention that it does EVERYTHING, and it has an awesome plug-in system. Oh, and "the Loop" is awesome. I've never had any problems doing simple modifications to the code or to themes.Can you guys give any specific examples of what you don't like about it, or what you would have programmed differently? I just don't understand why it gets such a bad rap. I wish my own software worked as well and had as many features and looked as nice.I'm a fan of WordPress, but there are definitely issues that impede coders trying to work with it. As a small example, there's get_the_content() (returns) and the_content() (prints), but there's get_permalink() and the_permalink(). Then, there's just the_date(), because it accepts an argument indicating whether you want it to print or return. This kind of thing drives even an experienced WP person up the wall, because you've always got to be Googling the usage - and it speaks to a deeper lack of attention to detail in the code.Another glaring issue is the lack of built-in caching. It even used to have it, but they ripped it out and never replaced it. You shouldn't need a third-party plugin to have basic caching in a system like WordPress, particularly with all the other bells and whistles it builds in.To paraphrase (supposedly) Churchill, though, "WordPress is the worst blogging system... except for all the others".I've written many custom applications in PHP/MySQL over the years - from tiny to huge.  Not having taken the time to learn the details of WordPress, I find it very frustrating to work with (under the hood).Subjectively:Their concepts of usability is great, and support for plugins is also great.  I'd just love to see the system re-engineered with those principles, but with a disciplined and clear development methodology.I'm sure the next guy would say "no it isn't, bla bla bla", but that is just my opinion after bumping into it (hosting, modifying) about 3 times.It's a subjective question for sure. From experience I've notice WP takes way, way more server resources than other systems or my custom code. I've had to move WP sites off my servers as a consequence. So my experience suggests there are some memory use issues. As an exercise try going through the code, tracing the logic from the start of a request to a page, and look at how many objects are loaded, how many methods are called before any HTML is output. Apart from what's been mentioned already:No sane templating system. All those years and they still have PHP code intertwined with HTML, and default templates that have no support for i18n or l10n whatsoever (hard-coded strings, hard-coded date formats, etc.).Multiple entry points - maybe it's just me, but it's annoying. Especially when some of those are way too big.When you have to be sure of a statement that is made by "everyone", if you can, is trying to check it for yourself.And you can do something in your statement: just read Wordpress source code. Some modules are good, some are a mess, some others are just normal. But all of them compose a great blog system that are used by thousand of people around the world that are more interested in writing good stuff instead of complaining about "how ugly" is a particular source code. In summary, the Wordpress creators have a shippable product that is useful.In the end, it doesn't matter. If you want a perfect blog system, you can always write one yourself. I would have added more comments.On a separate note, the most recent version of Wordpress introduced a labyrinthine piece of code that denies access to pages that:

1. Aren't in a menu or submenu

2. Aren't in the $_registered_pages variable.A lot of plugins for earlier versions of Wordpress have been broken by this new security measure.Finally, sessions. Wordpress does its very best to get out of your way by handling all its session data in a separate manner from PHP's built-in $_SESSION variable, but it doesn't give you the option of starting the PHP session, you have to add that to the core program yourself. I haven't found documentation that would allow us WP hackers and plugin writers to take advantage of the pre-existing WP session yet, either.

How safe are PHP session variables?

oym

[How safe are PHP session variables?](https://stackoverflow.com/questions/1181105/how-safe-are-php-session-variables)

I have a login script that verifies a username/password against data in a 'user' table.  Furthermore, I have a 'roles' table that specifies the access level of a given user.  Assuming I am using safe login scripts, are there any security holes in simply performing an additional query, upon successful login, against the 'roles' table to discover the user's authorization level and storing this into a session variable?  The idea would then be that on any page with mixed authority, I could simply query the session variable to discover the logged in user's authorization level.  Thanks.

2009-07-25 03:20:52Z

I have a login script that verifies a username/password against data in a 'user' table.  Furthermore, I have a 'roles' table that specifies the access level of a given user.  Assuming I am using safe login scripts, are there any security holes in simply performing an additional query, upon successful login, against the 'roles' table to discover the user's authorization level and storing this into a session variable?  The idea would then be that on any page with mixed authority, I could simply query the session variable to discover the logged in user's authorization level.  Thanks.Sessions are significantly safer than, say, cookies. But it is still possible to steal a session and thus the hacker will have total access to whatever is in that session. Some ways to avoid this are IP Checking (which works pretty well, but is very low fi and thus not reliable on its own), and using a nonce. Typically with a nonce, you have a per-page "token" so that each page checks that the last page's nonce matches what it has stored. In either security check, there is a loss of usability. If you do IP checking and the user is behind a intranet firewall (or any other situation that causes this) which doesn't hold a steady IP for that user, they will have to re-authenticate every time they lose their IP. With a nonce, you get the always fun "Clicking back will cause this page to break" situation.But with a cookie, a hacker can steal the session simply by using fairly simple XSS techniques. If you store the user's session ID as a cookie, they are vulnerable to this as well. So even though the session is only penetrable to someone who can do a server-level hack (which requires much more sophisticated methods and usually some amount of privilege, if your server is secure), you are still going to need some extra level of verification upon each script request. You should not use cookies and AJAX together, as this makes it a tad easier to totally go to town if that cookie is stolen, as your ajax requests may not get the security checks on each request. For example, if the page uses a nonce, but the page is never reloaded, the script may only be checking for that match. And if the cookie is holding the authentication method, I can now go to town doing my evilness using the stolen cookie and the AJAX hole.Only scripts executing on your server have access to the _SESSION array.  If you define the scope of the session cookie, you can even restrict it to a specific directory.  The only way someone besides you could get that session data is to inject some PHP code into one of your pages.As for the system you're using, that is acceptable and is a good way to save database calls, but keep in mind that it will require the user to log out and log in again for any authorization changes to apply.  So if you wanted to lock out an account and that user is already logged in, you can't.It should be noted that in Apache the PHP $_SESSION superglobal is accessible across virtualhosts. Consider this scenario:This is not such a big deal when you control all the virtualhosts on your server, but if you are on a shared machine, it's problematic.If you rely on a value stored inside of a session variable to determine roles then you lose the ability to change the value in the DB and have it reflected against the user's current session.  If you look at Zend Framework, there's a clear distinction between authentication and authorization, and strongly-worded warnings in the manual to only store the minimal amount of data in the session (ie "Yup, he's user #37 & he logged in").As far as 'safety' goes - unless you're on shared host, there's nothing to worry about.  On a properly configured shared host, they should be relatively secure, too.

Why does PDO print my password when the connection fails?

The Surrican

[Why does PDO print my password when the connection fails?](https://stackoverflow.com/questions/6455018/why-does-pdo-print-my-password-when-the-connection-fails)

I have a simple website where I establish a connection to a Mysql server using PDO.I had some traffic on my site and the servers connection limit was reached, and the website throws this error, with my PLAIN password in it!Ironically I switched to PDO for security reasons, so this really shocked me, because this exact error is something you can provoke very easily on most sites using simple http flooding.I have now wrapped my connection in a try/catch block, but still I think this is catastrophic! I am new to PDO and so my question is: what do I have to do to consider to be safe? How do I establish a connection in a secure way? Are there other known security holes like this one that I have to be aware of?

2011-06-23 13:43:38Z

I have a simple website where I establish a connection to a Mysql server using PDO.I had some traffic on my site and the servers connection limit was reached, and the website throws this error, with my PLAIN password in it!Ironically I switched to PDO for security reasons, so this really shocked me, because this exact error is something you can provoke very easily on most sites using simple http flooding.I have now wrapped my connection in a try/catch block, but still I think this is catastrophic! I am new to PDO and so my question is: what do I have to do to consider to be safe? How do I establish a connection in a secure way? Are there other known security holes like this one that I have to be aware of?You should have display_errors = off in your PHP.ini anyway to avoid this problem.  Errors that reveal details like these come from many places, in addition to PDO.Yes, you should also have it in a try/catch block.You can also $pdo->setAttribute(PDO::ERRMODE_SILENT), but then you need to be checking the error codes manually rather than using a try/catch block.  See http://php.net/manual/en/pdo.setattribute.php for more error constants.Simple workaround it to catch PDOException thrown by PDO constructor:Ok this made me giggle a little, the usage of error reporting is for debugging purposes, it allows you to quickly find and fix issues.When you're within a live environment your server should be configured for internal logging only, and not direct output, so basically you will need to turn off the output of errors within your php.ini.But while you're within your test environment this stack is merely a tool to help you, and is configurable.When errors occur within a live environment they would be logged, so you should always be checking your log files and then fix accordingly.People may specify that you can manage errors within your PHP Application but by personal preference I think this is the wrong way to go about it, configuring the INI and config files for your web-server and MySQL / MsSQL will result in more acute management.If your application is a public application then it would also be a good idea to handle errors within the application as a large percentage of clients may be on shared hosting and not have full access to server configurations.We use encoded username and passwords, and decode those in the PDO constructor, then we catch the PDOException and throw a new PDOException with the old exception its message, so that the trace will show only the encoded username and password.A good encryption library for PHP is: defuse/php-encryptionhttps://github.com/defuse/php-encryptionExample code:

mod_php vs cgi vs fast-cgi

Karthick

[mod_php vs cgi vs fast-cgi](https://stackoverflow.com/questions/3953793/mod-php-vs-cgi-vs-fast-cgi)

I have been trying to understand the exact meaning/purpose of loading php as an apache module vs the rest.When php is installed as an apache module, what exactly happens? For example, does reading the php-ini file happen every time the php request comes or when the php module is loaded alone?

2010-10-17 15:10:39Z

I have been trying to understand the exact meaning/purpose of loading php as an apache module vs the rest.When php is installed as an apache module, what exactly happens? For example, does reading the php-ini file happen every time the php request comes or when the php module is loaded alone?php.ini is read when the PHP module is loaded in both mod_php, FastCGI and FPM. In regular CGI mode, the config file have to be read at runtime because there's no preforked processes of any kind.I think the only real advantage of running PHP as a module inside the web server is that the configuration might be easier. You get a lot better performance when you run it in FastCGI or FPM mode and can use a threaded or evented (instead of forked) Apache, or when you can throw out Apache altogether.This link may help: http://2bits.com/articles/apache-fcgid-acceptable-performance-and-better-resource-utilization.htmlphp.ini is read when the module is loaded in the case of an Apache module. PHP CGI uses a php interpreter executable like any other shell script would do. Since there is no state involved at each invocation, the config file would have to be read every single time in case of CGI.

Initialize an Associative Array with Key Names but Empty Values

NYCBilly

[Initialize an Associative Array with Key Names but Empty Values](https://stackoverflow.com/questions/12880026/initialize-an-associative-array-with-key-names-but-empty-values)

I cannot find any examples, in books or on the web, describing how one would properly initialize an associative array by name only (with empty values) - unless, of course, this IS the proper way(?)It just feels as though there is another more efficient way to do this:config.phpindex.phpAny recommendations, suggestions, or direction would be appreciated. Thanks.

2012-10-14 06:58:45Z

