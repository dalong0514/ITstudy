i have searched for days for a solution which has no performance issue. and finally came up with this one.UPDATEincase you want to deal with objects that are supposed to be the parameters. you can use JSON.stringify(object) to convert to it to string and add to the data set. One more option not involving .bind or ES6 is to use a child component with a handler to call the parent handler with the necessary props. Here's an example (and a link to working example is below):The basic idea is for the parent component to pass the onClick function to a child component. The child component calls the onClick function and can access any props passed to it (and the event), allowing you to use any event value or other props within the parent's onClick function. Here's a CodePen demo showing this method in action. I realize this is pretty late to the party, but I think a much simpler solution could satisfy many use cases:I presume you could also use a data- attribute.Simple, semantic.Simply create a function like this and call it in the place you need<

    Icon

    onClick = {

        () => {

            methodName(theParamsYouwantToPass);

        }

    }/

        >Making alternate attempt to answer OP's question including e.preventDefault() calls:Rendered link (ES6)Component FunctionYou can simply do it if you are using ES6.Implementing show total count from an object by passing count as a parameter from main to sub components as described below.Here is MainComponent.js    And Here is SubComp.jsTry to implement above and you will get exact scenario that how pass parameters works in reactjs on any DOM method.I wrote a wrapper component that can be reused for this purpose that builds on the accepted answers here. If all you need to do is pass a string however, then just add a data-attribute and read it from e.target.dataset (like some others have suggested).  By default my wrapper will bind to any prop that is a function and starts with 'on' and automatically pass the data prop back to the caller after all the other event arguments.  Although I haven't tested it for performance, it will give you the opportunity to avoid creating the class yourself, and it can be used like this:or for Components and functionsor if you preferdeclare that Outside your container (near your imports)Here is usage in a container:  Here is the wrapper code 'withData.js:I have below 3 suggestion to this on JSX onClick Events - I have added code for onclick event value pass to the method in two ways . 1 . using bind method 2. using arrow(=>) method .     see the methods handlesort1 and handlesortBelow is the example which passes value on onClick event.I used es6 syntax. remember in class component arrow function does not bind automatically, so explicitly binding in constructor. I guess you will have to bind the method to the React’s class instance. It’s safer to use a constructor to bind all methods in React. In your case when you pass the parameter to the method, the first parameter is used to bind the ‘this’ context of the method, thus you cannot access the value inside the method.Theres' a very easy way.Coming out of nowhere to this question, but i think .bind will do the trick. Find the sample code below. Using arrow function :You must install stage-2:npm install babel-preset-stage-2 :    There is a couple of ways to pass parameter in event handlers, some are following.You can use an arrow function to wrap around an event handler and pass parameters:above example is equivalent to calling .bind or you can explicitly call bind.Apart from these two approaches, you can also pass arguments to a function which is defined as a curry function.There are 3 ways to handle this :- You can use your code like this:Here e is for event object, if you want to use event methods like preventDefault() in your handle function or want to get target value or name like e.target.name.I found the solution of passing param as a tag's attribute quite reasonable.However it has limitations:That's why I came up with this library: react-event-param It:Usage example:There were a lot of performance considerations, all in the vacuum.

The issue with this handlers is that you need to curry them in order to incorporate the argument that you can't name in the props.

This means that the component needs a handler for each and every clickable element. Let's agree that for a few buttons this is not an issue, right?

The problem arises when you are handling tabular data with dozens of columns and thousands of rows. There you notice the impact of creating that many handlers.  The fact is, I only need one.

I set the handler at the table level (or UL or OL...), and when the click happens I can tell which was the clicked cell using data available since ever in the event object:  I use the tagname fields to check that the click happened in a valid element, for example ignore clicks in THs ot footers.

The rowIndex and cellIndex give the exact location of the clicked cell.

Textcontent is the text of the clicked cell.  This way I don't need to pass the cell's data to the handler, it can self-service it.

If I needed more data, data that is not to be displayed, I can use the dataset attribute, or hidden elements.

With some simple DOM navigation it's all at hand.

This has been used in HTML since ever, since PCs were much easier to bog.  Simple changed is required: Use 

<th value={column} onClick={that.handleSort} >{column}</th>instead of

<th value={column} onClick={that.handleSort} >{column}</th>Use a closure, it result in a clean solution: <th onClick={this.handleSort(column)} >{column}</th>handleSort function will return a function that have the value column already set.    The anonymous function will be called with the correct value when the user click on the th.Example: https://stackblitz.com/edit/react-pass-parameters-example

How to get image size (height & width) using JavaScript?

Saneef

[How to get image size (height & width) using JavaScript?](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)

Are there any JavaScript or jQuery APIs or methods to get the dimensions of an image on the page?

2009-03-08 06:41:13Z

Are there any JavaScript or jQuery APIs or methods to get the dimensions of an image on the page?You can programmatically get the image and check the dimensions using Javascript...This can be useful if the image is not a part of the markup.clientWidth and clientHeight are DOM properties that show the current in-browser size of the inner dimensions of a DOM element (excluding margin and border). So in the case of an IMG element, this will get the actual dimensions of the visible image.Also (in addition to Rex and Ian's answers) there is:andThese provide the height and width of the image file itself (rather than just the image element).If you are using jQuery and you are requesting image sizes you have to wait until they load or you will only get zeroes.I think an update to these answers is useful because one of the best-voted replies suggests using clientWidth and clientHeight, which I think is now obsolete.I have done some experiments with HTML5, to see which values actually get returned.First of all, I used a program called Dash to get an overview of the image API.

It states that height and width are the rendered height/width of the image and that naturalHeight and naturalWidth are the intrinsic height/width of the image (and are HTML5 only).I used an image of a beautiful butterfly, from a file with height 300 and width 400. And this Javascript:Then I used this HTML, with inline CSS for the height and width.Results:I then changed the HTML to the following:i.e. using height and width attributes rather than inline stylesResults:I then changed the HTML to the following:i.e. using both attributes and CSS, to see which takes precedence.Results:Using JQuery you do this:The thing all other have forgot is that you cant check image size before it loads. When the author checks all of posted methods it will work probably only on localhost. Since jQuery could be used here, remember that 'ready' event is fired before images are loaded. $('#xxx').width() and .height() should be fired in onload event or later.You can only really do this using a callback of the load event as the size of the image is not known until it has actually finished loading. Something like the code below...With jQuery library-Use .width() and .height().More in jQuery width and jQuery heigth.ok guys, i think i improved the source code to be able to let the image load before trying to find out its properties, otherwise it will display '0 * 0', because the next statement would have been called before the file was loaded into the browser. Requires jquery...Before using real image size you should load source image. If you use JQuery framework  you can get real image size in simple way.Assuming, we want to get image dimensions of <img id="an-img" src"...">Natural Dimensionsel.naturalWidth and el.naturalHeight will get us the natural dimensions, the dimensions of the image file.Layout Dimensionsel.offsetWidth and el.offsetHeight will get us the dimensions at which the element is rendered on the document.This answer was exactly what I was looking for (in jQuery):JQuery Answer:You can have a simple function like the following (imageDimensions()) if you don't fear using promises.Recently I had same issue for an error in the flex slider. The first image's height was set smaller due to the loading delay. I tried the following method for resolving that issue and it's worked.    This will give you the height with respect to the width you set rather than original width or  Zero. You can also use:Nicky De Maeyer asked after a background picture; I simply get it from the css and replace the "url()":You can apply the onload handler property when the page loads in js or jquery like this:-Simply, you can test like this.it is important to remove the browser interpreted setting from the parent div. So if you want the real image width and height you can just use This is one TYPO3 Project example from me where I need the real properties of the image to scale it with the right relation. This is my method, hope this helpful. :)this work for multiple image preview and upload . if you have to select for each of the images one by one . Then copy and past into all the preview image function and validate!!!Before acquire element's attributes,the document page should be onload:Thought this might be helpful to some who are using Javascript and/or Typescript in 2019. I found the following, as some have suggested, to be incorrect:This is correct:Conclusion:Use img, not this, after onload.

Node.js on multi-core machines

zaharpopov

[Node.js on multi-core machines](https://stackoverflow.com/questions/2387724/node-js-on-multi-core-machines)

Node.js looks interesting, BUT I must miss something - isn't Node.js tuned only to run on a single process and thread?Then how does it scale for multi-core CPUs and multi-CPU servers? After all, it is all great to make fast as possible single-thread server, but for high loads I would want to use several CPUs. And the same goes for making applications faster - seems today the way is use multiple CPUs and parallelize the tasks.How does Node.js fit into this picture? Is its idea to somehow distribute multiple instances or what?

2010-03-05 15:13:47Z

Node.js looks interesting, BUT I must miss something - isn't Node.js tuned only to run on a single process and thread?Then how does it scale for multi-core CPUs and multi-CPU servers? After all, it is all great to make fast as possible single-thread server, but for high loads I would want to use several CPUs. And the same goes for making applications faster - seems today the way is use multiple CPUs and parallelize the tasks.How does Node.js fit into this picture? Is its idea to somehow distribute multiple instances or what?Node.js absolutely does scale on multi-core machines.Yes, Node.js is one-thread-per-process. This is a very deliberate design decision and eliminates the need to deal with locking semantics. If you don't agree with this, you probably don't yet realize just how insanely hard it is to debug multi-threaded code.  For a deeper explanation of the Node.js process model and why it works this way (and why it will NEVER support multiple threads), read my other post.Two ways:Since v6.0.X Node.js has included the cluster module straight out of the box, which makes it easy to set up multiple node workers that can listen on a single port. Note that this is NOT the same as the older learnboost "cluster" module available through npm.Workers will compete to accept new connections, and the least loaded process is most likely to win. It works pretty well and can scale up throughput quite well on a multi-core box.If you have enough load to care about multiple cores, then you are going to want to do a few more things too:PS: There's a discussion between Aaron and Christopher in the comments of another post (as of this writing, its the top post). A few comments on that:Shared Ports: nginx (port 80) --> Node_workers x N (sharing port 3000 w/ Cluster)vsIndividual Ports: nginx (port 80) --> {Node_worker (port 3000), Node_worker (port 3001), Node_worker (port 3002), Node_worker (port 3003) ...}There are arguably some benefits to the individual ports setup (potential to have less coupling between processes, have more sophisticated load-balancing decisions, etc.), but it is definitely more work to set up and the built-in cluster module is a low-complexity alternative that works for most people.One method would be to run multiple instances of node.js on the server and then put a load balancer (preferably a non-blocking one like nginx) in front of them.Ryan Dahl answers this question in the tech talk he gave at Google last summer.  To paraphrase, "just run multiple node processes and use something sensible to allow them to communicate. e.g. sendmsg()-style IPC or traditional RPC".If you want to get your hands dirty right away, check out the spark2 Forever module.  It makes spawning multiple node processes trivially easy.  It handles setting up port sharing, so they can each accept connections to the same port, and also auto-respawning if you want to make sure a process is restarted if/when it dies.UPDATE - 10/11/11: Consensus in the node community seems to be that Cluster is now the preferred module for managing multiple node instances per machine.  Forever is also worth a look.You can use cluster module. Check this.Multi-node harnesses all the cores that you may have.

Have a look at http://github.com/kriszyp/multi-node.For simpler needs, you can start up multiple copies of node on different port numbers and put a load balancer in front of them.Node Js is supporting clustering to take full advantages of your cpu. If you are not not running it with cluster, then probably you are wasting your hardware capabilities.Clustering in Node.js allows you to create separate processes which can share same server port. For example, if we run one HTTP server on Port 3000, it is one Server running on Single thread on single core of processor.Code shown below allow you to cluster your application. This code is official code represented by Node.js.check this article for the full tutorialAs mentioned above, Cluster will scale and load-balance your app across all cores.

adding something likeWill restart any failing workers.These days, a lot of people also prefer PM2, which handles the clustering for you and also provides some cool monitoring features.Then, add Nginx or HAProxy in front of several machines running with clustering and you have multiple levels of failover and a much higher load capacity.Future version of node will allow you to fork a process and pass messages to it and Ryan has stated he wants to find some way to also share file handlers, so it won't be a straight forward Web Worker implementation.At this time there is not an easy solution for this but it's still very early and node is one of the fastest moving open source projects I've ever seen so expect something awesome in the near future.Spark2 is based on Spark which is now no longer maintained. Cluster is its successor, and it has some cool features, like spawning one worker process per CPU core and respawning dead workers.I'm using Node worker to run processes in a simple way from my main process. Seems to be working great while we wait for the official way to come around.The new kid on the block here is LearnBoost's "Up". It provides "Zero-downtime reloads" and additionally creates multiple workers (by default the number of CPUs, but it is configurable) to provide the best of all Worlds. It is new, but seems to be pretty stable, and I'm using it happily in one of my current projects.The cluster module allows you to utilise all cores of your machine. In fact you can take advantage of this in just 2 commands and without touching your code using a very popular process manager pm2.You may run your node.js application on multiple cores by using the cluster module on combination with os module which may be used to detect how many CPUs you have.For example let's imagine that you have a server module that runs simple http server on the backend and you want to run it for several CPUs:It's also possible to design the web-service as several stand alone servers that listen to unix sockets, so that you can push functions like data processing into seperate processes.This is similar to most scrpting/database web server architectures where a cgi process handles business logic and then pushes and pulls the data via a unix socket to a database.the difference being that the data processing is written as  a node webserver listening on a port.it's more complex but ultimately its where multi-core development has to go. a multiprocess architecture using multiple components for each web request.It's possible to scale NodeJS out to multiple boxes using a pure TCP load balancer (HAProxy) in front of multiple boxes running one NodeJS process each.If you then have some common knowledge to share between all instances you could use a central Redis store or similar which can then be accessed from all process instances (e.g. from all boxes)

Check if object is a jQuery object

David Hellsing

[Check if object is a jQuery object](https://stackoverflow.com/questions/1853223/check-if-object-is-a-jquery-object)

Is there a fast way of checking if an object is a jQuery object or a native JavaScript object?example:obviously, the code above works but it's not safe. You could potentially add a selector key to the o object and get the same result. Is there a better way of making sure that the object actually is a jQuery object?Something in line with (typeof obj == 'jquery')

2009-12-05 19:43:16Z

Is there a fast way of checking if an object is a jQuery object or a native JavaScript object?example:obviously, the code above works but it's not safe. You could potentially add a selector key to the o object and get the same result. Is there a better way of making sure that the object actually is a jQuery object?Something in line with (typeof obj == 'jquery')You can use the instanceof operator:Explanation: the jQuery function (aka $) is implemented as a constructor function. Constructor functions are to be called with the new prefix.When you call $(foo), internally jQuery translates this to new jQuery(foo)1. JavaScript proceeds to initialize this inside the constructor function to point to a new instance of jQuery, setting it's properties to those found on jQuery.prototype (aka jQuery.fn). Thus, you get a new object where instanceof jQuery is true.1It's actually new jQuery.prototype.init(foo): the constructor logic has been offloaded to another constructor function called init, but the concept is the same.You may also use the .jquery property as described here: http://api.jquery.com/jquery-2/Check out the instanceof operator.The best way to check the instance of an object is through instanceof operator or with the method isPrototypeOf() which inspects if the prototype of an object is in another object's prototype chain.

But sometimes it might fail in the case of multiple jQuery instances on a document. As @Georgiy Ivankin mentioned:One way to overcome that problem is by aliasing the jQuery object in a closure or IIFEOther way to overcome that problem is by inquiring the jquery property in objHowever, if you try to perform that checking with primitive values, it will throw an error, so you can modify the previous checking by ensuring obj to be an ObjectAlthough the previous way is not the safest (you can create the 'jquery' property in an object), we can improve the validation by working with both approaches:The problem here is that any object can define a property jquery as own, so a better approach would be to ask in the prototype, and ensure that the object is not null or undefined

Due to coercion, the if statement will make short circuit by evaluating the && operator when obj is any of the falsy values (null, undefined, false, 0, ""), and then proceeds to perform the other validations.Finally we can write an utility function:Let's take a look at: Logical Operators and truthy / falsyHowever, There is one more way to check the object in jQuery.I have made example to understand things, jsfiddle linkFor those who want to know if an object is a jQuery object without having jQuery installed, the following snippet should do the work :You can check if the object is produced by JQuery with the jquery property:=> return the number of the JQuery version if the object produced by JQuery.

=> otherwise, it returns undefined

Get class name using jQuery

X10nD

[Get class name using jQuery](https://stackoverflow.com/questions/2400386/get-class-name-using-jquery)

I want to get the class name using jQueryAnd if it has an id 

2010-03-08 09:43:29Z

I want to get the class name using jQueryAnd if it has an id After getting the element as jQuery object via other means than its class, thenshould do the trick. For the ID use .attr('id').If you are inside an event handler or other jQuery method, where the element is the pure DOM node without wrapper, you can use:Both are standard DOM methods and well supported in all browsers.It is better to use .hasClass() when you want to check if an element has a particular class. This is because when an element has multiple class it is not trivial to check.Example:Where:With .hasClass() we can test if the div has the class divhover.Be Careful , Perhaps , you have a class and a subclass . If you use  previous solutions , you will have : So if you want to have the class selector, do the following : and you will have Now if you want to select all elements that have the same class such as div above : that meansOR can be implemented with vanilla javascript in 2 lines: This is to get the second class into multiple classes using into a elementyou can simply use,var className = $('#id').attr('class');If your <div> has an id:...you can try: If your <div> has only a class, you can try: If you're going to use the split function to extract the class names, then you're going to have to compensate for potential formatting variations that could produce unexpected results.  For example:producesI think you're better off using a regular expression to match on set of allowable characters for class names. For example:producesThe regular expression is probably not complete, but hopefully you understand my point.  This approach mitigates the possibility of poor formatting.To complete Whitestock answer (which is the best I found) I did :So for " myclass1  myclass2  " the result will be '.myclass1 .myclass2'You can get class Name by two ways : ORWith Javascript With jQueryORIf you do not know the class name BUT you know the ID you can try this:Then Call it using :If you want to get classes of div and then want to check if any class exists then simple use.e.g;Try itHTMLjQueryif we have single or we want first div element we can use $('div')[0].className otherwise we need an id of that elementBest way to get class name in javascript or jqueryattr() attribute function is used to get and set attribute.If we have a code:to take class name by using jQuery we could define and use a simple plugin method:or The use of the method will be:We have to notice that it will return a list of classes unlike of native method element.className which returns only first class of the attached classes. Because often the element has more than one class attached to it, I recommend you not to use this native method but element.classlist or the method described above. The first variant of it will return a list of classes as an array, the second as a string - class names separated by spaces:Another important notice is that both methods as well as jQuery methodreturn only class list of the first element caught by the jQuery object if we use a more common selector which points many other elements. In such a case we have to mark the element, we want to get his classes, by using some index, e.g.It depends also what you need to do with these classes. If you want just to check for a class into the class list of the element with this id you should just use method "hasClass":as mentioned in the comments above. But if you could need to take all classes as a selector, then use this code:The result will be:and you could get it to create dynamically a specific rewriting css rule for example.Regardsuse like this:-if you've used this class more than once then use each operator

React-router urls don't work when refreshing or writing manually

DavidDev

[React-router urls don't work when refreshing or writing manually](https://stackoverflow.com/questions/27928372/react-router-urls-dont-work-when-refreshing-or-writing-manually)

I'm using React-router and it works fine while I'm clicking on link buttons, but when I refresh my webpage it does not load what I want.For instance, I am in localhost/joblist and everything is fine because I arrived here pressing a link. But If I refresh the webpage I get:By default, it didn't work like this. Initially I had my URL as localhost/#/ and localhost/#/joblist and they worked perfectly fine. But I don't like this kind of URL, so trying to erase that #, I wrote:This problem does not happen with localhost/, this one always returns what I want.EDIT: This app is single-page, so /joblist doesn't need to ask anything to any server.EDIT2: My entire router.

2015-01-13 17:51:54Z

I'm using React-router and it works fine while I'm clicking on link buttons, but when I refresh my webpage it does not load what I want.For instance, I am in localhost/joblist and everything is fine because I arrived here pressing a link. But If I refresh the webpage I get:By default, it didn't work like this. Initially I had my URL as localhost/#/ and localhost/#/joblist and they worked perfectly fine. But I don't like this kind of URL, so trying to erase that #, I wrote:This problem does not happen with localhost/, this one always returns what I want.EDIT: This app is single-page, so /joblist doesn't need to ask anything to any server.EDIT2: My entire router.Looking at the comments on the accepted answer and the generic nature of this question ('don't work'), I thought this might be a good place for some general explanations about the issues involved here. So this answer is intended as background info / elaboration on the specific use case of the OP. Please bear with me.The first big thing to understand about this is that there are now 2 places where the URL is interpreted, whereas there used to be only 1 in 'the old days'. In the past, when life was simple, some user sent a request for http://example.com/about to the server, which inspected the path part of the URL, determined the user was requesting the about page and then sent back that page.With client-side routing, which is what React-Router provides, things are less simple. At first, the client does not have any JS code loaded yet. So the very first request will always be to the server. That will then return a page that contains the needed script tags to load React and React Router etc. Only when those scripts have loaded does phase 2 start. In phase 2, when the user clicks on the 'About us' navigation link for example, the URL is changed locally only to http://example.com/about (made possible by the History API), but no request to the server is made.  Instead, React Router does its thing on the client side, determines which React view to render and renders it. Assuming your about page does not need to make any REST calls, it's done already. You have transitioned from Home to About Us without any server request having fired.So basically when you click a link, some Javascript runs that manipulates the URL in the address bar, without causing a page refresh, which in turn causes React Router to perform a page transition on the client side.But now consider what happens if you copy-paste the URL in the address bar and e-mail it to a friend. Your friend has not loaded your website yet. In other words, she is still in phase 1. No React Router is running on her machine yet. So her browser will make a server request to http://example.com/about. And this is where your trouble starts. Until now, you could get away with just placing a static HTML at the webroot of your server. But that would give 404 errors for all other URLs when requested from the server. Those same URLs work fine on the client side, because there React Router is doing the routing for you, but they fail on the server side unless you make your server understand them.If you want the http://example.com/about URL to work on both the server- and the client-side, you need to set up routes for it on both the server- and the client side. Makes sense right?And this is where your choices begin. Solutions range from bypassing the problem altogether, via a catch-all route that returns the bootstrap HTML, to the full-on isomorphic approach where both the server and the client run the same JS code..With Hash History instead of Browser History, your URL for the about page would look something like this:

http://example.com/#/about

The part after the hash (#) symbol is not sent to the server. So the server only sees http://example.com/ and sends the index page as expected. React-Router will pick up the #/about part and show the correct page.Downsides: .With this approach you do use Browser History, but just set up a catch-all on the server that sends /* to index.html, effectively giving you much the same situation as with Hash History. You do have clean URLs however and you could improve upon this scheme later without having to invalidate all your user's favorites.Downsides: .In the hybrid approach you expand upon the catch-all scenario by adding specific scripts for specific routes. You could make some simple PHP scripts to return the most important pages of your site with content included, so Googlebot can at least see what's on your page.Downsides:.What if we use Node JS as our server so we can run the same JS code on both ends? Now, we have all our routes defined in a single react-router config and we don't need to duplicate our rendering code. This is 'the holy grail' so to speak. The server sends the exact same markup as we would end up with if the page transition had happened on the client. This solution is optimal in terms of SEO.Downsides:.Choose the one that you can get away with. Personally I think the catch-all is simple enough to set up, so that would be my minimum. This setup allows you to improve on things over time. If you are already using Node JS as your server platform, I'd definitely investigate doing an isomorphic app. Yes it's tough at first, but once you get the hang of it it's actually a very elegant solution to the problem. So basically, for me, that would be the deciding factor. If my server runs on Node JS, I'd go isomorphic; otherwise I would go for the Catch-all solution and just expand on it (Hybrid solution) as time progresses and SEO requirements demand it.If you'd like to learn more on isomorphic (also called 'universal') rendering with React, there are some good tutorials on the subject:Also, to get you started, I recommend looking at some starter kits. Pick one that matches your choices for the technology stack (remember, React is just the V in MVC, you need more stuff to build a full app). Start with looking at the one published by Facebook itself:Or pick one of the many by the community. There is a nice site now that tries to index all of them:I started with these:Currently I am using a home-brew version of universal rendering that was inspired by the two starter kits above, but they are out of date now. Good luck with your quest!The answers here are all extremely helpful, what worked for me was configuring my Webpack server to expect the routes.The historyApiFallback is what fixed this issue for me. Now routing works correctly and I can refresh the page or type in the URL directly. No need to worry about work arounds on your node server. This answer obviously only works if you're using webpack.EDIT: see my answer here for a more detailed reason why this is necessary:

https://stackoverflow.com/a/37622953/5217568You can change your .htaccess file and insert this:I am using react: "^16.12.0" and react-router: "^5.1.2"

This method is the Catch-all and is probably the easiest way to get you started.For React Router V4 Users:If you try to solve this problem by Hash History technique mentioned in other answers, note that does not work in V4, please use HashRouter instead:Reference: HashRouterThe router can be called in two different ways, depending on whether the navigation occurs on the client or on the server. You have it configured for client-side operation. The key parameter is the second one to the run method, the location.When you use the React Router Link component, it blocks browser navigation and calls transitionTo to do a client-side navigation. You are using HistoryLocation, so it uses the HTML5 history API to complete the illusion of navigation by simulating the new URL in the address bar. If you're using older browsers, this won't work. You would need to use the HashLocation component.When you hit refresh, you bypass all of the React and React Router code. The server gets the request for /joblist and it must return something. On the server you need to pass the path that was requested to the run method in order for it to render the correct view. You can use the same route map, but you'll probably need a different call to Router.run.  As Charles points out, you can use URL rewriting to handle this. Another option is to use a node.js server to handle all requests and pass the path value as the location argument. In express, for example, it might look like this:Note that the request path is being passed to run. To do this, you'll need to have a server-side view engine that you can pass the rendered HTML to. There are a number of other considerations using renderToString and in running React on the server. Once the page is rendered on the server, when your app loads in the client, it will render again, updating the server-side rendered HTML as needed.In your index.html head, add the following:Then when running with webpack dev server use this command.--history-api-fallback is the important partI used create-react-app to make a website just now and had the same issue presented here. I use BrowserRouting from the react-router-dom package. I am running on a Nginx server and what solved it for me was adding the following to /etc/nginx/yourconfig.confWhich corresponds to adding the following to the .htaccess in case you are running AppacheThis also seems to be the solution suggested by Facebook themselves and can be found hereThis can solve your problem I also faced the same problem in ReactJS application in Production mode.

Here is the 2 solution to the problem.1.Change the routing history to "hashHistory" instead of browserHistory in the place of Now build the app using the command Then place the build folder in your var/www/ folder, Now the application is working fine with addition of # tag in each and every url. like localhost/#/home

   localhost/#/aboutusSolution 2 : Without # tag using browserHistory,Set your history = {browserHistory} in your Router,Now build it using sudo npm run build.You need to create the "conf" file to solve the 404 not found page,

the conf file should be like this.open your terminal type the below commands cd /etc/apache2/sites-available

ls

nano sample.conf

Add the below content in it.Now you need to enable the sample.conf file by using the following commandthen it will ask you to reload the apache server,using

     sudo service apache2 reload or restartthen open your localhost/build folder and add the .htaccess file with content of below.Now the app is working normally.Note: change 0.0.0.0 ip to your local ip address.If any doubts regarding this feel free to raise a comment.I hope it is helpful to others.If you're hosting a react app via AWS Static S3 Hosting & CloudFrontThis problem presented itself by CloudFront responding with a 403 Access Denied message because it expected /some/other/path to exist in my S3 folder, but that path only exists internally in React's routing with react-router. The solution was to set up a distribution Error Pages rule. Go to the CloudFront settings and choose your distribution. Next go to the "Error Pages" tab. Click "Create Custom Error Response" and add an entry for 403 since that's the error status code we get. Set the Response Page Path to /index.html and the status code to 200. The end result astonishes me with its simplicity. The index page is served, but the URL is preserved in the browser, so once the react app loads, it detects the URL path and navigates to the desired route. Error Pages 403 RuleThe Webpack Dev Server has an option to enable this. Open up package.json and add --history-api-fallback.

This solutions worked for me.react-router-tutorialAdd this to webpack.congif.jsIf you are hosting your react app on IIS, just add a web.config file containing :This will tell IIS server to return the main page to the client instead of 404 error and no need to use hash history.Production stack: React, React Router v4, BrowswerRouter, Express, Nginx1) User BrowserRouter for pretty urls 2) Add index.html to all unknown requests by using /*3) bundle webpack with webpack -p4) run nodemon server.js or node server.jsEDIT: You may want to let nginx handle this in the server block and disregard step 2:If you are using Create React App:There's a great walk though of this issue with solutions for many major hosting platforms that you can find HERE on the Create React App page.  For example, I use React Router v4 and Netlify for my frontend code.  All it took was adding 1 file to my public folder ("_redirects") and one line of code in that file:Now my website properly renders paths like mysite.com/pricing when entered into the browser or when someone hits refresh.Try adding ".htaccess" file inside the public folder with the below code.If you do have a fallback to your index.html, make sure that in your index.html file you have this:This may differ from project to project.I found the solution for my SPA with react router (Apache). Just add in .htaccesssource: https://gist.github.com/alexsasharegan/173878f9d67055bfef63449fa7136042I'm not using server side rendering yet but I hit the same problem as the OP where Link seemed to work fine most of the time but failed when I had a parameter. I'll document my solution here to see if it helps anyone.My main jsx contains this:This works fine for the first matching link but when the :id changes in <Link> expressions nested on that model's detail page, the url changes in the browser bar but the content of the page did not initially change to reflect the linked model.The trouble was that I had used the props.params.id to set the model in componentDidMount. The component is just mounted once so this means that the first model is the one that sticks on the page and the subsequent Links change the props but leave the page looking unchanged.Setting the model in the component state in both componentDidMount and in componentWillReceiveProps (where it is based on the next props) solves the problem and the page content changes to reflect the desired model.This topic is a little bit old and solved but I would like to suggest you a simply, clear and better solution. It works if you use web server.Each web server has an ability to redirect the user to an error page in case of http 404. To solve this issue you need to redirect user to the index page.If you use Java base server (tomcat or any java application server) the solution could be the following:web.xml:Example:That is it, no more magic needs:)If you're using firebase all you have to do is make sure you've got a rewrites property in your firebase.json file in the root of your app (in the hosting section). For example:Hope this saves somebody else a hoard of frustration and wasted time.Happy coding...Further reading on the subject:https://firebase.google.com/docs/hosting/full-config#rewritesFirebase CLI: "Configure as a single-page app (rewrite all urls to /index.html)"If you are using Express or some other framework in the backend , you can add the similar configuration as below and check out the Webpack public path in the configuration, it should work fine even on reload if you are using BrowserRouterIf you are hosting in IIS ; Adding this to my webconfig solved my problemYou can make similar configuration for any other serverFixing the "cannot GET /URL" error on refresh or on calling the URL directly.Configure your webpack.config.js to expect the given link the routes like this.In case, anyone is here looking for solution on React JS SPA with Laravel.

The accepted answer is the best explanation of why such problems happen. As already explained you have to configure both client side and server side.

In your blade template, include the js bundled file, make sure to use URL facade like thisIn your routes, make sure add this to the main endpoint where the blade template is. For example,The above is the main endpoint for the blade template. Now add an optional route too,The problem that happens is that first the blade template is loaded, then the react router. So, when you're loading '/setting-alerts', it loads the html and the js. But when you load '/setting-alerts/about', it first loads on the server side. Since on the server side, there is nothing on this location, it returns not found. When you have that optional router, it loads that same page and react router is also loaded, then react loader decides which component to show.

Hope this helps.For those who are using IIS 10, this is what you should do to make this right. Be sure that you are using browserHistory with this. As for reference I will give the code for the routing, but this is not what matters, what matters is the next step after the component code below:Since the problem is IIS receives request from client browsers, it will interpret the URL as if it is asking for a page, then returns a 404 page since there is no available page. Do the following:And it will now work fine.

I hope it helps. :-)As I am using .Net Core MVC something like this helped me:Basically in MVC side, all the routes not matching will fall into to Home/Index as it specified in startup.cs. Inside Index it is possible to get the original request url and pass it wherever needed.I had this same problem and this solution worked for us..Background:We are hosting multiple apps on the same server.  When we would refresh the server would not understand where to look for our index in the dist folder for that particular app.  The above link will take you to what worked for us... Hope this helps, as we have spent quite a hours on figuring out a solution for our needs. We are using:my webpack.config.jsmy index.jsmy app.jsI like this way of handling it. Try adding:

yourSPAPageRoute/* on the server side to get rid of this problem. I went with this approach because even the native HTML5 History API doesn't support correct redirection on page refresh (As far as I know).Note: Selected answer has already addressed this but I'm trying to be more specific.Express Route

Tested and just wanted to share this.Hope it helps.Adding more information to Joshua Dyck's answer.If you are using Firebase and want to use both the root route and a sub-directory route you need to add the following code in your firebase.json:Example:You are building a website for a client. You want the owner of the website to add information in https://your.domain.com/management while the users of the website will navigate to https://your.domain.com.In this case your firebase.json file will look like that:Assume you have the following Home route definitionAt your Home component, you can intercept the request at ComponentWillMount event,Now, instead of calling /joblist at url, you can request /?joblist, and the  Component will auto redirect the request to /joblist (take note the extra question mark in the path)

Getting the client's timezone offset in JavaScript

Árvíztűrő tükörfúrógép

[Getting the client's timezone offset in JavaScript](https://stackoverflow.com/questions/1091372/getting-the-clients-timezone-offset-in-javascript)

How can I gather the visitor's time zone information? I need the Timezone, as well as the GMT offset hours.

2009-07-07 09:48:16Z

How can I gather the visitor's time zone information? I need the Timezone, as well as the GMT offset hours.Note that not all timezones are offset by whole hours: for example, Newfoundland is UTC minus 3h 30m (leaving Daylight Saving Time out of the equation).Using an offset to calculate Timezone is a wrong approach, and you will always encounter problems. Time zones and daylight saving rules may change on several occasions during a year, and It's difficult to keep up with changes.To get the system's IANA timezone in JavaScript, you should use  ecma-402/1.0 says that timeZone may be undefined if not provided to constructor. However, future draft (3.0) fixed that issue by changing to system default timezone.in ecma-402/3.0 which is still in a draft it changed toI realize this answer is a bit off topic but I imagine many of us looking for an answer also wanted to format the time zone for display and perhaps get the zone abbreviation too. So here it goes...If you want the client timezone nicely formatted you can rely on the JavaScript Date.toString method and do:This will give you "GMT-0400 (EST)" for example, including the timezone minutes when applicable. Alternatively, with regex you can extract any desired part:For "GMT-0400 (EDT)" :For "GMT-0400" :For just "EDT" :For just "-0400":Date.toString reference: https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toStringIt's already been answered how to get offset in minutes as an integer, but in case anyone wants the local GMT offset as a string e.g. "+1130":You can use:Browser time zone detection is rather tricky to get right, as there is little information provided by the browser.Moment Timezone uses Date.getTimezoneOffset() and Date.toString() on a handful of moments around the current year to gather as much information about the browser environment as possible. It then compares that information with all the time zone data loaded and returns the closest match. In case of ties, the time zone with the city with largest population is returned.I wrote a function in my project, which returns the timezone in hh:mm format. I hope this may help someone:Working Fiddletry getTimezoneOffset() of the Date object:This method returns time zone offset in minutes which is the difference between GMT and local time in minutes.A one-liner that gives both the offset and the time zone is to simply call toTimeString() on a new Date object. From MDN:The catch is that the timezone is not in the standard IANA format; it's somewhat more user-friendly, than the "continent/city" IANA format. Try it out:In California right now, toTimeString() returns Pacific Daylight Time while the Intl API returns America/Los_Angeles. In Colombia, you'd get Colombia Standard Time, vs. America/Bogota.Note that many other answers to this question attempt to obtain the same information by calling Date.toString(). That approach is not that reliable, as MDN explains:JavaScript:With moment.js:With momentjs, you can find current timezone as With dayjs, you can find current timezone as Both API returns utc offset in minutes.Timezone in hours-If you want to be precise as you mentioned in comment, then you should try like this-If all you need is the "MST" or the "EST" time zone abbreviation:See this resultant operator was opposite to the Timezone .So apply some math function then validate the num less or more.See the MDN document 

Example : Thu Jun 21 2018 18:12:50 GMT+0530 (India Standard Time) O/P : +0530Try this,This value is from user's machine and it can be changed anytime so I think it doesn't matter, I just want to get an approximate value and then convert it to GMT in my server.For example, I am from Taiwan and it returns "+8" for me.Working example JSHTMLResultOn the new Date() you can get the offset, to get the timezone name you may do:new Date().toString().replace(/(.*\((.*)\).*)/, '$2');you get the value between () in the end of the date, that is the name of the timezone.As an alternative to new Date().getTimezoneOffset() and moment().format('zz'), you can also use momentjs:jstimezone is also quite buggy and unmaintained (https://bitbucket.org/pellepim/jstimezonedetect/issues?status=new&status=open)Use this to convert OffSet to postive:This would be my solution:I was looking for just the 3 letter string (like "PDT") and tried Marquez's answer but had to tweak it a bit for cross browser support. Luckily, the string is the last potential match :)Here's what I did, in CoffeeScript:Works in IE8, IE9, Safari 9, Firefox 44, and Chrome 48You just to to include moment.js and jstz.js and after thatThis is very good work for me:you can simply try this.

it will return you current machine timeThis will do the job.undefined

Using Node.JS, how do I read a JSON file into (server) memory?

Matt Cashatt

[Using Node.JS, how do I read a JSON file into (server) memory?](https://stackoverflow.com/questions/10011011/using-node-js-how-do-i-read-a-json-file-into-server-memory)

I am doing some experimentation with Node.js and would like to read a JSON object, either from a text file or a .js file (which is better??) into memory so that I can access that object quickly from code.  I realize that there are things like Mongo, Alfred, etc out there, but that is not what I need right now.How do I read a JSON object out of a text or js file and into server memory using JavaScript/Node?

2012-04-04 12:22:40Z

I am doing some experimentation with Node.js and would like to read a JSON object, either from a text file or a .js file (which is better??) into memory so that I can access that object quickly from code.  I realize that there are things like Mongo, Alfred, etc out there, but that is not what I need right now.How do I read a JSON object out of a text or js file and into server memory using JavaScript/Node?Sync:Async:The easiest way I have found to do this is to just use require and the path to your JSON file.For example, suppose you have the following JSON file.test.jsonYou can then easily load this in your node.js application using requireAsynchronous is there for a reason! Throws stone at @mihaiOtherwise, here is the code he used with the asynchronous version:At least in Node v8.9.1, you can just dovar json_data = require('/path/to/local/file.json');and access all the elements of the JSON object. In Node 8 you can use the built-in util.promisify() to asynchronously read a file like thisusing node-fs-extra (async await)Using fs-extra package is quite simple:Sync:Async:https://nodejs.org/dist/latest-v6.x/docs/api/fs.html#fs_fs_readfile_file_options_callback  https://nodejs.org/dist/latest-v6.x/docs/api/fs.html#fs_fs_readfilesync_file_options  You can find all usage of Node.js at the File System docs!

hope this help for you!  So many answers, and no one ever made a benchmark to compare sync vs async vs require. I described the difference in use cases of reading json in memory via require, readFileSync and readFile here.If you are looking for a complete solution for Async loading a JSON file from Relative Path with Error HandlingDirectory Structure:

Huge number of files generated for every Angular project

Moshe Shaham

[Huge number of files generated for every Angular project](https://stackoverflow.com/questions/38718690/huge-number-of-files-generated-for-every-angular-project)

I wanted to start a simple hello world app for Angular.When I followed the instructions in the official quickstart the installation created 32,000 files in my project.I figured this is some mistake or I missed something, so I decided to use angular-cli, but after setting up the project I counted 41,000 files.Where did I go wrong? Am I missing something really really obvious?

2016-08-02 11:04:31Z

I wanted to start a simple hello world app for Angular.When I followed the instructions in the official quickstart the installation created 32,000 files in my project.I figured this is some mistake or I missed something, so I decided to use angular-cli, but after setting up the project I counted 41,000 files.Where did I go wrong? Am I missing something really really obvious?There is nothing wrong with your configuration.Angular (since version 2.0) uses npm modules and dependencies for development. That's the sole reason you are seeing such a huge number of files.A basic setup of Angular contains transpiler, typings dependencies which are essential for development purposes only.Once you are done with development, all you will need to do is to bundle this application.After bundling your application, there will be only one bundle.js file which you can then deploy on your server.'transpiler' is just a compiler, thanks @omninonsense for adding that.NPM Package                       Files (Development)                   Real World Files (Deployment) *: bundled with @angular [ see this for bundling process &neArr; ]There is nothing wrong with your development configuration.Something wrong with your production configuration.When you develop a "Angular 2 Project" or "Any Project Which is based on JS" you can use all files, you can try all files, you can import all files. But if you want to serve this project you need to COMBINE all structured files and get rid of useless files.There are a lot of options for combine these files together:As several people already mentioned: All files in your node_modules directory (NPM location for packages) are part of your project dependencies (So-called direct dependencies). As an addition to that, your dependencies can also have their own dependencies and so on, etc. (So-called transitive dependencies). Several ten thousand files are nothing special.Because you are only allowed to upload 10'000 files (See comments), I would go with a bundler engine. This engine will bundle all your JavaScript, CSS, HTML, etc. and create a single bundle (or more if you specify them). Your index.html will load this bundle and that's it.I am a fan of webpack, so my webpack solution will create an application bundle and a vendor bundle (For the full working application see here https://github.com/swaechter/project-collection/tree/master/web-angular2-example):index.htmlwebpack.config.jsAdvantages:Disadvantages:Disclaimer: This is a good solution for Http 1.*, because it minimizes the overhead for each Http request. You only have a request for your index.html and each bundle - but not for 100 - 200 files. At the moment, this is the way to go.Http 2, on the other hand, tries to minimize the Http overhead, so it's based on a stream protocol. This stream is able to communicate in both direction (Client <--> Server) and as a reason of that, a more intelligent resource loading is possible (You only load the required files). The stream eliminates much of the Http overhead (Less Http round trips).But it's the same as with IPv6: It will take a few years until people will really use Http 2You need to ensure that you're just deploying the dist (short for distributable) folder from your project generated by the Angular CLI. This allows the tool to take your source code and it's dependencies and only give you what you need in order to run your application.That being said there is/was an issue with the Angular CLI in regards to production builds via `ng build --prodYesterday (August 2, 2016) a release was done which switched the build mechanism from broccoli + systemjs to webpack which successfully handles production builds.Based upon these steps:I am seeing a dist folder size of 1.1 MB across the 14 files listed here:Note Currently to install the webpack version of the angular cli, you must run... npm install angular-cli@webpack -gAngular itself has lots of dependencies, and the beta version of CLI downloads four times more files. This is how to create a simple project will less files ("only" 10K files)

https://yakovfain.com/2016/05/06/starting-an-angular-2-rc-1-project/Seems like nobody have mentioned Ahead-of-Time Compilation as described here: https://angular.io/docs/ts/latest/cookbook/aot-compiler.htmlMy experience with Angular so far is that AoT creates the smallest builds with almost no loading time. And most important as the question here is about - you only need to ship a few files to production.This seems to be because the Angular compiler will not be shipped with the production builds as the templates are compiled "Ahead of Time". It's also very cool to see your HTML template markup transformed to javascript instructions that would be very hard to reverse engineer into the original HTML.I've made a simple video where I demonstrate download size, number of files etc. for an Angular app in dev vs AoT build - which you can see here:https://youtu.be/ZoZDCgQwnmQYou'll find the source code for the demo here:https://github.com/fintechneo/angular2-templatesAnd - as all the others said here - there's nothing wrong when there are many files in your development environment. That's how it is with all the dependencies that comes with Angular, and many other modern frameworks. But the difference here is that when shipping to production you should be able to pack it into a few files. Also you don't want all of these dependency files in your git repository.This is actually not Angular specific, it happens with almost any project that uses the NodeJs / npm ecosystem for its tooling. Those project are inside your node_modules folders, and are the transititve dependencies that your direct dependencies need to run.In the node ecosystem modules are usually small, meaning that instead of developing things ourselves we tend to import most of what we need under the form of a module. This can include such small things like the famous left-pad function, why write it ourselves if not as an exercise ?So having a lot of files its actually a good thing, it means everything is very modular and module authors frequently reused other modules. This ease of modularity is probably one of the main reasons why the node ecosystem grew so fast.In principle this should not cause any issue, but it seems you run into a google app engine file count limit. In that I case I suggest to not upload node_modules to app engine.instead build the application locally and upload to google app engine only the bundled filesn but don't to the build in app engine itself.If you are using angular cli's newer version use ng build --prodIt will create dist folder which have less files and speed of project will increased.Also for testing in local with best performance of angular cli you can use ng serve --prodif you use Angular CLI you can always use --minimal flag when you create a project I've just run it with the flag and it creates 24 600 files and ng build --prod produces 212 KB dist folder So if you don't need water fountains in your project or just want to quickly test something out this I think is pretty useful  Here is a comparison of what takes more space in angular projects.

If your file system supports symbolic links, then you can at least relegate all of these files to a hidden folder -- so that a smart tool like tree won't display them by default.Using a hidden folder for this may also encourage the understanding that these are build-related intermediate files that don't need to be saved to revision control -- or used directly in your deployment.Creating a new project with angular cli recently and the node_modules folder was 270 mb, so yes this is normal but I'm sure most new devs to the angular world question this and is valid. For a simple new project it would make sense to pare the dependencies down maybe a bit;) Not knowing what all the packages depend on can be a bit unnerving especially to new devs trying the cli out for the first time. Add to the fact most basic tutorials don't discuss the deployment settings to get the exported files only needed. I don't believe even the tutorial offered on the angular official website talks about how to deploy the simple project. There is nothing wrong. These are all the node dependencies that you have mentioned in the package.json.Just be careful if you have download some of the git hub project, it might have lot of other dependencies that are not actually require for angular 2 first hello world app :)

Testing if a checkbox is checked with jQuery

Rajeev

[Testing if a checkbox is checked with jQuery](https://stackoverflow.com/questions/4813219/testing-if-a-checkbox-is-checked-with-jquery)

If the checkbox is checked, then I only need to get the value as 1; otherwise, I need to get it as 0.  How do I do this using jQuery?$("#ans").val() will always give me one right in this case:

2011-01-27 05:59:52Z

If the checkbox is checked, then I only need to get the value as 1; otherwise, I need to get it as 0.  How do I do this using jQuery?$("#ans").val() will always give me one right in this case:Use .is(':checked') to determine whether or not it's checked, and then set your value accordingly.More information here.will tell you if it's checked.  You can also use a second parameter true/false to check/uncheck the checkbox.Per comment, use prop instead of attr when available. E.g:Just use $(selector).is(':checked') It returns a boolean value. Stefan Brinkmann's answer is excellent, but incomplete for beginners (omits the variable assignment). Just to clarify:It works like this:Example:Alerts 'no'If this is helpful, please upvote Stefan Brinkmann's answer.You can try this:I've found the same problem before,

hope this solution can help you.

first, add a custom attribute to your checkboxes:write a jQuery extension to get value:use code to get check-box value:you can test hereJquery  : 

  var test= $("#ans").is(':checked')

and it return true or false.In your function:You can also use:Use:statusNum will equal 1 if the checkbox is checked, and 0 if it is not.EDIT: You could add the DOM to the function as well.I've came through a case recently where I've needed check value of checkbox when user clicked on button. The only proper way to do so is to use prop() attribute.this worked in my case maybe someone will need it. When I've tried .attr(':checked') it returned checked but I wanted boolean value and .val() returned value of attribute value.There are Several options are there like....If all these option return true then you can set value accourdingly.Try thisHere flag is true if checked otherwise falseAgain this will make cheked You can get value (true/false) by these two methodFirst check the value is checkedElse set the 0 valueIf you want integer value of checked or not, try:You can perform it, this way:

Creating a new DOM element from an HTML string using built-in DOM methods or Prototype

Omer Bokhari

[Creating a new DOM element from an HTML string using built-in DOM methods or Prototype](https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro)

I have an HTML string representing an element: '<li>text</li>'. I'd like to append it to an element in the DOM (a ul in my case). How can I do this with Prototype or with DOM methods?(I know i could do this easily in jQuery, but unfortunately we're not using jQuery.)

2009-01-30 01:13:44Z

I have an HTML string representing an element: '<li>text</li>'. I'd like to append it to an element in the DOM (a ul in my case). How can I do this with Prototype or with DOM methods?(I know i could do this easily in jQuery, but unfortunately we're not using jQuery.)Note: most current browsers support HTML <template> elements, which provide a more reliable way of turning creating elements from strings. See Mark Amery's answer below for details.For older browsers, and node/jsdom: (which doesn't yet support <template> elements at the time of writing), use the following method. It's the same thing the libraries use to do to get DOM elements from an HTML string (with some extra work for IE to work around bugs with its implementation of innerHTML):Note that unlike HTML templates this won't work for some elements that cannot legally be children of a <div>, such as <td>s. If you're already using a library, I would recommend you stick to the library-approved method of creating elements from HTML strings:HTML 5 introduced the <template> element which can be used for this purpose (as now described in the WhatWG spec and MDN docs).A <template> element is used to declare fragments of HTML that can be utilized in scripts. The element is represented in the DOM as a HTMLTemplateElement which has a .content property of DocumentFragment type, to provide access to the template's contents. This means that you can convert an HTML string to DOM elements by setting the innerHTML of a <template> element, then reaching into the template's .content property.Examples:Note that similar approaches that use a different container element such as a div don't quite work. HTML has restrictions on what element types are allowed to exist inside which other element types; for instance, you can't put a td as a direct child of a div. This causes these elements to vanish if you try to set the innerHTML of a div to contain them. Since <template>s have no such restrictions on their content, this shortcoming doesn't apply when using a template.However, template is not supported in some old browsers. As of January 2018, Can I use... estimates 90% of users globally are using a browser that supports templates. In particular, no version of Internet Explorer supports them; Microsoft did not implement template support until the release of Edge.If you're lucky enough to be writing code that's only targeted at users on modern browsers, go ahead and use them right now. Otherwise, you may have to wait a while for users to catch up.Use insertAdjacentHTML(). It works with all current browsers, even with IE11.Newer DOM implementations have range.createContextualFragment, which does what you want in a framework-independent way.It's widely supported. To be sure though, check its compatibility down in the same MDN link, as it will be changing. As of May 2017 this is it:No need for any tweak, you got a native API:For certain html fragments like <td>test</td>, div.innerHTML, DOMParser.parseFromString and range.createContextualFragment (without the right context) solutions mentioned in other answers here, won't create the <td> element.jQuery.parseHTML() handles them properly (I extracted jQuery 2's parseHTML function into an independent function that can be used in non-jquery codebases).If you are only supporting Edge 13+, it is simpler to just use the HTML5 template tag:Heres a simple way to do it:With Prototype, you can also do:HTML:JS:You can create valid DOM nodes from a string using:document.createRange().createContextualFragment()The following example adds a button element in the page taking the markup from a string:I am using this method (Works in IE9+), although it will not parse <td> or some other invalid direct childs of body:To enhance furthermore the useful .toDOM() snippet that we can find in different places, we can now safely use backticks (template literals). So we can have single and double quotes in the foo html declaration.This behave like heredocs for those familiar with the term.This can be enhanced furthermore with variables, to make complex templating:So, why not use directly .innerHTML +=?

By doing so, the whole DOM is being recalculated by the browser, it's much slower.https://caniuse.com/template-literalsI added a Document prototype that creates an element from string:<template>DemoLate but just as a note;It's possible to add a trivial element to target element as a container and remove it after using.// Tested on chrome 23.0, firefox 18.0, ie 7-8-9 and opera 12.11.Here's my code, and it works:For the heck of it I thought I'd share this over complicated but yet simple approach I came up with... Maybe someone will find something useful.Fastest solution to render DOM from string:And here u can check performance for DOM manipulation React vs native JSNow u can simply use:And of course in near future u use references from memory cause var "element" is your new created DOM in your document.And remember "innerHTML=" is very slow :/var msg = "test"

jQuery.parseHTML(msg)Use jneratorYou can use the following function to convert the text "HTML" to the elementHere is working code for meI wanted to convert 'Text' string to HTML elementThis will work too:It feels more like a jquery way with the chained function calls.

How to find if an array contains a specific string in JavaScript/jQuery? [duplicate]

Cofey

[How to find if an array contains a specific string in JavaScript/jQuery? [duplicate]](https://stackoverflow.com/questions/6116474/how-to-find-if-an-array-contains-a-specific-string-in-javascript-jquery)

Can someone tell me how to detect if "specialword" appears in an array? Example:

2011-05-24 20:31:35Z

Can someone tell me how to detect if "specialword" appears in an array? Example:You really don't need jQuery for this.orIt's worth noting that array.indexOf(..) is not supported in IE < 9, but jQuery's indexOf(...) function will work even for those older versions.  jQuery offers $.inArray:Note that inArray returns the index of the element found, so 0 indicates the element is the first in the array. -1 indicates the element was not found.Edit 3.5 years later$.inArray is effectively a wrapper for Array.prototype.indexOf in browsers that support it (almost all of them these days), while providing a shim in those that don't. It is essentially equivalent to adding a shim to Array.prototype, which is a more idiomatic/JSish way of doing things. MDN provides such code. These days I would take this option, rather than using the jQuery wrapper.Edit another 3 years laterGosh, 6.5 years?!The best option for this in modern Javascript is Array.prototype.includes:No comparisons and no confusing -1 results. It does what we want: it returns true or false. For older browsers it's polyfillable using the code at MDN.Here you go:This function returns a positive integer (the array index of the given value), or -1 if the given value was not found in the array.Live demo: http://jsfiddle.net/simevidas/5Gdfc/You probably want to use this like so:You can use a for loop:I don't like $.inArray(..), it's the kind of ugly, jQuery-ish solution that most sane people wouldn't tolerate. Here's a snippet which adds a simple contains(str) method to your arsenal:Similarly, you could wrap $.inArray in an extension:

Repeat Character N Times

Steve

[Repeat Character N Times](https://stackoverflow.com/questions/1877475/repeat-character-n-times)

In Perl I can repeat a character multiple times using the syntax:Is there a simple way to accomplish this in Javascript? I can obviously use a function, but I was wondering if there was any built in approach, or some other clever technique.

2009-12-09 22:48:37Z

In Perl I can repeat a character multiple times using the syntax:Is there a simple way to accomplish this in Javascript? I can obviously use a function, but I was wondering if there was any built in approach, or some other clever technique.These days, the repeat string method is implemented almost everywhere. (It is not in Internet Explorer.) So unless you need to support older browsers, you can simply write:Before repeat, we used this hack:(Note that an array of length 11 gets you only 10 "a"s, since Array.join puts the argument between the array elements.)Simon also points out that according to this jsperf, it appears that it's faster in Safari and Chrome (but not Firefox) to repeat a character multiple times by simply appending using a for loop (although a bit less concise).In a new ES6 harmony, you will have native way for doing this with repeat. Also ES6 right now only experimental, this feature is already available in Edge, FF, Chrome and SafariAnd surely if repeat function is not available you can use old-good Array(n + 1).join("abc")Convenient if you repeat yourself a lot:The most performance-wice way is https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeatShort version is below.Polyfill from Mozilla:An alternative is: If you need to repeat multiple chars, multiply your conditional:NOTE: You do not have to overshoot by 1 as with word = Array(11).join('a')If you're not opposed to including a library in your project, lodash has a repeat function.https://lodash.com/docs#repeatThe following function will perform a lot faster than the option suggested in the accepted answer:You'd use it like this :To compare the performance of this function with that of the option proposed in the accepted answer, see this Fiddle and this Fiddle for benchmarks.In modern browsers, you can now do this using String.prototype.repeat method:Read more about this method on MDN.This option is even faster. Unfortunately, it doesn't work in any version of Internet explorer. The numbers in the table specify the first browser version that fully supports the method:Although the most voted answer is a bit more compact, with this approach you don't have to add an extra array item.In ES2015/ES6 you can use "*".repeat(n) So just add this to your projects, and your are good to go.Another interesting way to quickly repeat n character is to use idea from quick exponentiation algorithm:For repeat a value in my projects i use repeatFor example:but be careful because this method has been added to the ECMAScript 6 specification.Here is what I use:I'm going to expand on @bonbon's answer. His method is an easy way to "append N chars to an existing string", just in case anyone needs to do that. For example since "a google" is a 1 followed by 100 zeros.NOTE: You do have to add the length of the original string to the conditional.Lodash offers a similar functionality as the Javascript repeat() function which is not available in all browers. It is called _.repeat and available since version 3.0.0:Can be used as a one-liner too:In CoffeeScript:this is how you can call a function and get the result by the helps of Array() and join()Here is an ES6 version

Remove CSS class from element with JavaScript (no jQuery) [duplicate]

Amra

[Remove CSS class from element with JavaScript (no jQuery) [duplicate]](https://stackoverflow.com/questions/2155737/remove-css-class-from-element-with-javascript-no-jquery)

Could anyone let me know how to remove a class on an element using JavaScript only?

Please do not give me an answer with jQuery as I can't use it, and I don't know anything about it.

2010-01-28 15:43:04Z

Could anyone let me know how to remove a class on an element using JavaScript only?

Please do not give me an answer with jQuery as I can't use it, and I don't know anything about it.The right and standard way to do it is using classList. It is now widely supported in the latest version of most modern browsers:Documentation: https://developer.mozilla.org/en/DOM/element.classListwhere MyID is the ID of the element and MyClass is the name of the class you wish to remove.UPDATE: 

To support class names containing dash character, such as "My-Class", useHere's a way to bake this functionality right into all DOM elements:More at https://developer.mozilla.org/en-US/docs/Web/API/element.classListEditOkay, complete re-write.

It's been a while, I've learned a bit and the comments have helped.Now you can call myElement.removeClass('myClass')or chain it: myElement.removeClass("oldClass").addClass("newClass");It's very simple, I think.try:All of these answers are way too complicated, tryThe result would be a return of the stringSuper easy. Credits go to jondavidjohn Remove portion of string in JavascriptI use this JS snippet code :First of all, I reach all the classes then according to index of my target class, I set className = "".There is also $.toggleClass, $.addClass, and $.removeClass. For documentation, take a look at http://api.jquery.com/toggleClass/.Take a look at this jsFiddle example to see it in action.With the plus sign ('+') appending the class as opposed to overwriting any existing classes    

How to access the first property of an object in Javascript?

atogle

[How to access the first property of an object in Javascript?](https://stackoverflow.com/questions/983267/how-to-access-the-first-property-of-an-object-in-javascript)

Is there an elegant way to access the first property of an object...For example, I need to access foo1 object without knowing the name of foo1:

2009-06-11 19:55:12Z

Is there an elegant way to access the first property of an object...For example, I need to access foo1 object without knowing the name of foo1:Using this you can access also other properties by indexes. Be aware tho! Object.keys return order is not guaranteed as per ECMAScript however unofficially it is by all major browsers implementations, please read https://stackoverflow.com/a/23202095 for details on this.Try the for … in loop and break after the first iteration:You can also do Object.values(example)[0].Use Object.keys to get an array of the properties on an object. Example:Documentation and cross-browser shim provided here. An example of its use can be found in another one of my answers here.Edit: for clarity, I just want to echo what was correctly stated in other answers: the key order in javascript objects is undefined.A one-rule version:There isn't a "first" property. Object keys are unordered.If you loop over them with for (var foo in bar) you will get them in some order, but it may change in future (especially if you add or remove other keys).Solution with lodash library:but there is no guarantee of the object properties internal storage order because it depends on javascript VM implementation.No. An object literal, as defined by MDC is:Therefore an object literal is not an array, and you can only access the properties using their explicit name or a for loop using the in keyword.The top answer could generate the whole array and then capture from the list. Here is an another effective shortcutThis has been covered here before.The concept of first does not apply to object properties, and the order of a for...in loop is not guaranteed by the specs, however in practice  it is reliably FIFO except critically for chrome (bug report). Make your decisions accordingly.I don't recommend you to use Object.keys since its not supported in old IE versions. But if you really need that, you could use the code above to guarantee the back compatibility:Feature     Firefox (Gecko)4 (2.0)   Chrome 5  Internet Explorer 9  Opera 12    Safari 5More info: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keysBut if you only need the first one, we could arrange a shorter solution like:To get the first key name in the object you can use:Returns a string, so you cant access nested objects if there were, like:var obj = { first: { someVal : { id : 1} }; Here with that solution you can't access id.The best solution if you want to get the actual object is using lodash like:To return the value of the first key, (if you don't know exactly the first key name):if you know the key name just use:orIf you need to access "the first property of an object", it might mean that there is something wrong with your logic. The order of an object's properties should not matter.Use an array instead of an object (square brackets).Note that you lose the 'foo' identifiers. But you could add a name property to the contained objects:Any reason not to do this?You may use Maps which can iterate in its insertion order and can access its first item like this.we can also do with this approch.You can use Object.prototype.keys which returns all the keys of an object in the same order. So if you want the first object just get that array and use the first element as desired key.

How do I view events fired on an element in Chrome DevTools?

John Hoffman

[How do I view events fired on an element in Chrome DevTools?](https://stackoverflow.com/questions/10213703/how-do-i-view-events-fired-on-an-element-in-chrome-devtools)

I have a customizable form element on a page from a library. I want to see what javascript events are fired when I interact with it because I am trying to find out which event handler to use.How do I do that using Chrome Web Developer?

2012-04-18 16:23:22Z

I have a customizable form element on a page from a library. I want to see what javascript events are fired when I interact with it because I am trying to find out which event handler to use.How do I do that using Chrome Web Developer?Similarly, you can right click on the target element -> select "inspect element"  Scroll down on the right side of the dev frame, at the bottom is 'event listeners'.  Expand the tree to see what events are attached to the element.  Not sure if this works for events that are handled through bubbling (I'm guessing not)You can use monitorEvents function.Just inspect your element (right mouse click → Inspect on visible element or go to Elements tab in Chrome Developer Tools and select wanted element) then go to Console tab and write:Now when you move mouse over this element, focus or click it, the name of the fired event will be displayed with its data.To stop getting this data just write this to console:$0 is just the last DOM element selected by Chrome Developer Tools. You can pass any other DOM object there (for example result of getElementById or querySelector).You can also specify event "type" as second parameter to narrow monitored events to some predefined set. For example:List of this available types is here.I made a small gif that illustrates how this feature works:Visual Event is a nice little bookmarklet that you can use to view an element's event handlers.  On online demo can be viewed here.For jQuery (at least version 1.11.2) the following procedure worked for me. And it's time to stop re-inventing the wheel and start using vanilla JS events ... :)This won't show custom events like those your script might create if it's a jquery plugin. for example : The Event Panel under Scripts in chrome developer tools will not show you "Something:custom-event-one"

How to identify if a webpage is being loaded inside an iframe or directly into the browser window?

akshat

[How to identify if a webpage is being loaded inside an iframe or directly into the browser window?](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t)

I am writing an iframe based facebook app. Now I want to use the same html page to render the normal website as well as the canvas page within facebook. I want to know if I can determine whether the page has been loaded inside the iframe or directly in the browser?

2008-11-28 15:45:25Z

I am writing an iframe based facebook app. Now I want to use the same html page to render the normal website as well as the canvas page within facebook. I want to know if I can determine whether the page has been loaded inside the iframe or directly in the browser?Browsers can block access to window.top due to same origin policy. IE bugs also take place. Here's the working code:top and self are both window objects (along with parent), so you're seeing if your window is the top window.When in an iframe on the same origin as the parent, the window.frameElement method returns the element (e.g. iframe or object) in which the window is embedded. Otherwise, if browsing in a top-level context, or if the parent and the child frame have different origins, it will evaluate to null.This is an HTML Standard with basic support in all modern browsers.RoBorg is correct, but I wanted to add a side note.In IE7/IE8 when Microsoft added Tabs to their browser they broke one thing that will cause havoc with your JS if you are not careful.Imagine this page layout:Now in frame "baz" you click a link (no target, loads in the "baz" frame) it works fine.If the page that gets loaded, lets call it special.html, uses JS to check if "it" has a parent frame named "bar" it will return true (expected).Now lets say that the special.html page when it loads, checks the parent frame (for existence and its name, and if it is "bar" it reloads itself in the bar frame. e.g.So far so good. Now comes the bug.Lets say instead of clicking on the original link like normal, and loading the special.html page in the "baz" frame, you middle-clicked it or chose to open it in a new Tab.When that new tab loads (with no parent frames at all!) IE will enter an endless loop of page loading! because IE "copies over" the frame structure in JavaScript such that the new tab DOES have a parent, and that parent HAS the name "bar".The good news, is that checking:in that new tab does return true, and thus you can test for this odd condition.The accepted answer didn't work for me inside the content script of a Firefox 6.0 Extension (Addon-SDK 1.0): Firefox executes the content script in each: the top-level window and in all iframes. Inside the content script I get the following results: The strange thing about this output is that it's always the same regardless whether the code is run inside an iframe or the top-level window.On the other hand Google Chrome seems to execute my content script only once within the top-level window, so the above wouldn't work at all.What finally worked for me in a content script in both browsers is this:Without iframes this prints 0:0, in a top-level window containing one frame it prints 1:1, and in the only iframe of a document it prints 0:1.This allows my extension to determine in both browsers if there are any iframes present, and additionally in Firefox if it is run inside one of the iframes.I'm not sure how this example works for older Web browsers but I use this for IE, Firefox and Chrome without and issue:I'm using this:Use this javascript function as an example on how to accomplish this.The other solutions did not worked for me. This one works on all browsers:One way to defend against clickjacking is to include a "frame-breaker" script in each page that should not be framed. The following methodology will prevent a webpage from being framed even in legacy browsers, that do not support the X-Frame-Options-Header.In the document HEAD element, add the following:First apply an ID to the style element itself:This way, everything can be in the document HEAD and you only need one method/taglib in your API.Reference: https://www.codemagi.com/blog/post/194Since you are asking in the context of a facebook app, you might want to consider detecting this at the server when the initial request is made. Facebook will pass along a bunch of querystring data including the fb_sig_user key if it is called from an iframe.Since you probably need to check and use this data anyway in your app, use it to determine the the appropriate context to render.I actually used to check window.parent and it worked for me, but lately window is a cyclic object and always has a parent key, iframe or no iframe.As the comments suggest hard comparing with window.parent works. Not sure if this will work if iframe is exactly the same webpage as parent.It's an ancient piece of code that I've used a few times:If you want to know if the user is accessing your app from facebook page tab or canvas check for the Signed Request. If you don't get it, probably the user is not accessing from facebook.

To make sure confirm the signed_request fields structure and fields content.With the php-sdk you can get the Signed Request like this:You can read more about Signed Request here:https://developers.facebook.com/docs/reference/php/facebook-getSignedRequest/and here:https://developers.facebook.com/docs/reference/login/signed-request/This ended being the simplest solution for me. But only if number of iframes differs in your page and page who are loading you in iframe. Make no iframe in your page to have 100% guarantee of result of this codeWrite this javascript in each pageThen it will automatically redirects to home page.

Is there a way to detect if a browser window is not currently active?

Luke Francl

[Is there a way to detect if a browser window is not currently active?](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active)

I have JavaScript that is doing activity periodically. When the user is not looking at the site (i.e., the window or tab does not have focus), it'd be nice to not run.Is there a way to do this using JavaScript?My reference point: Gmail Chat plays a sound if the window you're using isn't active. 

2009-06-29 19:20:00Z

I have JavaScript that is doing activity periodically. When the user is not looking at the site (i.e., the window or tab does not have focus), it'd be nice to not run.Is there a way to do this using JavaScript?My reference point: Gmail Chat plays a sound if the window you're using isn't active. Since originally writing this answer, a new specification has reached recommendation status thanks to the W3C. The Page Visibility API (on MDN) now allows us to more accurately detect when a page is hidden to the user.Current browser support:The following code falls back to the less reliable blur/focus method in incompatible browsers:onfocusin and onfocusout are required for IE 9 and lower, while all others make use of onfocus and onblur, except for iOS, which uses onpageshow and onpagehide.I would use jQuery because then all you have to do is this:Or at least it worked for me.There are 3 typical methods used to determine if the user can see the HTML page, however none of them work perfectly:In order to improve the imperfect behaviors described above, I use a combination of the 3 methods: W3C Visibility API, then focus/blur and user activity methods in order to reduce the false positive rate. This allows to manage the following events:This is how it works: when the document loose the focus, the user activity (such as mouse move) on the document is monitored in order to determine if the window is visible or not. The page visibility probability is inversely proportional to the time of the last user activity on the page: if the user makes no activity on the document for a long time, the page is most probably not visible. The code below mimics the W3C Page Visibility API: it behaves the same way but has a small false positive rate. It has the advantage to be multibrowser (tested on Firefox 5, Firefox 10, MSIE 9, MSIE 7, Safari 5, Chrome 9).Since there is currently no working cross-browser solution without false positive, you should better think twice about disabling periodical activity on your web site.There is a neat library available on GitHub:https://github.com/serkanyersen/ifvisible.jsExample:I've tested version 1.0.1 on all browsers I have and can confirm that it works with:... and probably all newer versions.Doesn't fully work with:Using : Page Visibility APICan i use ? http://caniuse.com/#feat=pagevisibilityI create a Comet Chat for my app, and when I receive a message from another user I use:I started off using the community wiki answer, but realised that it wasn't detecting alt-tab events in Chrome. This is because it uses the first available event source, and in this case it's the page visibility API, which in Chrome seems to not track alt-tabbing.I decided to modify the script a bit to keep track of all possible events for page focus changes. Here's a function you can drop in:Use it like this:This version listens for all the different visibility events and fires a callback if any of them causes a change. The focused and unfocused handlers make sure that the callback isn't called multiple times if multiple APIs catch the same visibility change.This is really tricky. There seems to be no solution given the following requirements.This happens because:Given these restrictions, it is possible to implement a solution that combines 

- The page Visibility API

- window blur/focus

- document.activeElementThat is able to:When the iframe has focus, your blur/focus events don't get invoked at all, and the page Visibility API won't trigger on alt+tab.I built upon @AndyE's solution and implemented this (almost good) solution here:

https://dl.dropboxusercontent.com/u/2683925/estante-components/visibility_test1.html

(sorry, I had some trouble with JSFiddle).This is also available on Github: https://github.com/qmagico/estante-componentsThis works on chrome/chromium.

It kind works on firefox, except that it doesn't load the iframe contents (any idea why?)Anyway, to resolve the last problem (4), the only way you can do that is to listen for blur/focus events on the iframe.

If you have some control over the iframes, you can use the postMessage API to do that.https://dl.dropboxusercontent.com/u/2683925/estante-components/visibility_test2.htmlI still haven't tested this with enough browsers.

If you can find more info about where this doesn't work, please let me know in the comments below.http://jsfiddle.net/ARTsinn/JTxQY/this works for me on chrome 67, firefox 67,u can use :In HTML 5 you could also use:See:This is an adaptation of the answer from Andy E.This will do a task e.g. refresh the page every 30 seconds,

but only if the page is visible and focused.If visibility can't be detected, then only focus will be used.If the user focuses the page, then it will update immediatelyThe page won't update again until 30 seconds after any ajax callA slightly more complicated way would be to use setInterval() to check mouse position and compare to last check. If the mouse hasn't moved in a set amount of time, the user is probably idle.This has the added advantage of telling if the user is idle, instead of just checking if the window is not active.As many people have pointed out, this is not always a good way to check whether the user or browser window is idle, as the user might not even be using the mouse or is watching a video, or similar. I am just suggesting one possible way to check for idle-ness.For a solution without jQuery check out Visibility.js which provides information about three page statesand also convenience-wrappers for setIntervalA fallback for older browsers (IE < 10; iOS < 7) is also availableFor angular.js, here is a directive (based on the accepted answer) that will allow your controller to react to a change in visibility:You can use it like this example: <div react-on-window-focus="refresh()">, where refresh() is a scope function in the scope of whatever Controller is in scope.If you want to act on whole browser blur:

As I commented, if browser loose focus none of the suggested events fire. My idea is to count up in a loop and reset the counter if an event fire. If the counter reach a limit I do a location.href to an other page. This also fire if you work on dev-tools. This is a draft successful tested on FF.Here is a solid, modern solution. (Short a sweet 👌🏽)This will setup a listener to trigger when any visibility event is fired which could be a focus or blur.

JavaScript checking for null vs. undefined and difference between == and ===

MUG4N

[JavaScript checking for null vs. undefined and difference between == and ===](https://stackoverflow.com/questions/5101948/javascript-checking-for-null-vs-undefined-and-difference-between-and)

2011-02-24 08:10:55Z

Is the variable null:...but note the latter will also be true if a is undefined.Is it undefined:...but again, note that the last one is vague; it will also be true if a is null.Now, despite the above, the usual  way to check for those is to use the fact that they're falsey:This is defined by ToBoolean in the spec.They're both values usually used to indicate the absence of something. undefined is the more generic one, used as the default value of variables until they're assigned some other value, as the value of function arguments that weren't provided when the function was called, and as the value you get when you ask an object for a property it doesn't have. But it can also be explicitly used in all of those situations. (There's a difference between an object not having a property, and having the property with the value undefined; there's a difference between calling a function with the value undefined for an argument, and leaving that argument off entirely.)null is slightly more specific than undefined: It's a blank object reference. JavaScript is loosely typed, of course, but not all of the things JavaScript interacts with are loosely typed. If an API like the DOM in browsers needs an object reference that's blank, we use null, not undefined. And similarly, the DOM's getElementById operation returns an object reference — either a valid one (if it found the DOM element), or null (if it didn't).Interestingly (or not), they're their own types. Which is to say, null is the only value in the Null type, and undefined is the only value in the Undefined type.The only difference between them is that == will do type coercion to try to get the values to match, and === won't. So for instance "1" == 1 is true, because "1" coerces to 1. But "1" === 1 is false, because the types don't match. ("1" !== 1 is true.) The first (real) step of === is "Are the types of the operands the same?" and if the answer is "no", the result is false. If the types are the same, it does exactly what == does.Type coercion uses quite complex rules and can have surprising results (for instance, "" == 0 is true).More in the spec:The difference is subtle.In JavaScript an undefined variable is a variable that as never been declared, or never assigned a value. Let's say you declare var a; for instance, then a will be undefined, because it was never assigned any value.But if you then assign a = null; then a will now be null. In JavaScript null is an object (try typeof null in a JavaScript console if you don't believe me), which means that null is a value (in fact even undefined is a value).Example:This can prove useful in function arguments. You may want to have a default value, but consider null to be acceptable. In which case you may do:If you omit the optional parameter doSomething(1, 2) thenoptional will be the "three" string but if you pass doSomething(1, 2, null) then optional will be null.As for the equal == and strictly equal === comparators, the first one is weakly type, while strictly equal also checks for the type of values. That means that 0 == "0" will return true; while 0 === "0" will return false, because a number is not a string.You may use those operators to check between undefined an null. For example:The last case is interesting, because it allows you to check if a variable is either undefined or null and nothing else:The spec is the place to go for full answers to these questions. Here's a summary:More reading:undefinedIt means the variable is not yet intialized . Example :equals(==)It only check value is equals not datatype .Example :Because it checks only value .Strict Equals(===)Checks the value and datatype should be same .Example :Because it checks the datatype x is a primitive type and y is a boolean object .just check if a variable has a valid value like this : it will return true if variable does't contain :Ad 1. null is not an identifier for a property of the global object, like undefined can beAd 2. The === check values and types. The == dont require same types and made implicit conversion before comparison (using .valueOf() and .toString()). Here you have all (src):if== (its negation !=)=== (its negation !==)If your (logical) check is for a negation (!) and you want to capture both JS null and undefined  (as different Browsers will give you different results) you would use the less restrictive comparison:

e.g.:This will capture both null and undefinedTry With Different Logic. You can use bellow code for check all four(4) condition for validation like not null, not blank, not undefined and not zero only use this code (!(!(variable))) in javascript and jquery.}

HTML form readonly SELECT tag/input

Jrgns

[HTML form readonly SELECT tag/input](https://stackoverflow.com/questions/368813/html-form-readonly-select-tag-input)

According to HTML specs, the select tag in HTML doesn't have a readonly attribute, only a disabled attribute. So if you want to keep the user from changing the dropdown, you have to use disabled.The only problem is that disabled HTML form inputs don't get included in the POST / GET data.What's the best way to emulate the readonly attribute for a select tag, and still get the POST data?

2008-12-15 15:59:09Z

According to HTML specs, the select tag in HTML doesn't have a readonly attribute, only a disabled attribute. So if you want to keep the user from changing the dropdown, you have to use disabled.The only problem is that disabled HTML form inputs don't get included in the POST / GET data.What's the best way to emulate the readonly attribute for a select tag, and still get the POST data?You should keep the select element disabled but also add another hidden input with the same name and value.If you reenable your SELECT, you should copy its value to the hidden input in an onchange event and disable (or remove) the hidden input.Here is a demo:We could also use this Disable all except the selected option:This way the dropdown still works (and submits its value) but the user can not select another value.DemoYou can re-enable the select object on submit.EDIT: i.e., normally disabling the select tag (with the disabled attribute) and then re-enabling it automatically just before submiting the form:Example with jQuery:In addition, you could re-enable every disabled input or select:another way of doing a readOnly attribute to a select element is by using cssyou could do like :DEMOTested and working in IE 6, 7 & 8b2, Firefox 2 & 3, Opera 9.62, Safari 3.2.1 for Windows and Google Chrome.Simple jQuery solutionUse this if your selects have the readonly classOr this if your selects have the readonly="readonly" attributeSimple CSS solution:This results in Select to be gray with nice "disable" cursor on hover

and on select the list of options is "empty" so you can not change its value.Yet another more contemporary option (no pun intended) is to disable all the options of the select element other then the selected one. note however that this is an HTML 4.0 feature

and ie 6,7,8 beta 1 seem to not respect this.http://www.gtalbot.org/BrowserBugsSection/MSIE7Bugs/OptionDisabledSupport.htmlThis is the best solution I have found:The code above disables all other options not selected while keeping the selected option enabled. Doing so the selected option will make it into the post-back data.Easier still:

add the style attribute to your select tag:I know that it is far too late, but it can be done with simple CSS:The style hides all the options and the groups when the select is in readonly state, so the user can not change his selection.No JavaScript hacks needed.This is the simplest and best solution.

You will set a readolny attr on your select, or anyother attr like data-readonly, and do the followingSet the select disabled when you plan for it to be read-only and then remove the disabled attribute just before submitting the form.In addition to disabling the options that should not be selectable i wanted to actually make them dissapear from the list, but still be able to enable them should i need to later:This finds all select elements with a readonly attribute, then finds all options inside those selects that are not selected, then it hides them and disables them.It is important to separate the jquery query in 2 for performance reasons, because jquery reads them from right to left, the code: will first find all unselected options in the document and then filter those that are inside selects with a readonly attribute.One simple server-side approach is to remove all the options except the one that you want to be selected. Thus, in Zend Framework 1.12, if $element is a Zend_Form_Element_Select:If you disable a form field, this won't be send when form is submitted. 

So if you need a readonly that works like disabled but sending values do this :After any change in readonly properties of an element.Solution with tabindex. Works with select but also text inputs. Simply use a .disabled class.CSS:JS:HTML:Edit: With Internet Explorer, you also need this JS:Following on from Grant Wagners suggestion; here is a jQuery snippet that does it with handler functions instead of direct onXXX attributes:I resolved it with jquery:If you are using jquery validate, you can do the following below, I used the disabled attribute without a problem:What I found works great, with plain javascript (ie: no JQuery library required), is to change the innerHTML of the <select> tag to the desired single remaining value.Before:Sample Javascript:After:This way, no visiual effect change, and this will POST/GET within the <FORM>.Rather than the select itself, you could disable all of the options except for the currently selected option.  This gives the appearance of a working drop-down, but only the option you want passed in is a valid selection.html solution:javascript ones:to remove:edit: added remove methodsSimply, remove the disabled attribute before submit the form.disabled="disabled" ->will get your value from database dan show it in the form.

readonly="readonly" ->you can change your value in selectbox, but your value couldn't save in your database.If the select dropdown is read-only since birth and does not need to change at all, perhaps you should use another control instead? Like a simple <div> (plus hidden form field) or an <input type="text">?Added: If the dropdown is not read-only all the time and JavaScript is used to enable/disable it, then this is still a solution - just modify the DOM on-the-fly.Below worked for me :I managed it by hiding the select box and showing a span in its place with only informational value. On the event of disabling the .readonly class, we need also to remove the .toVanish elements and show the .toShow ones.In IE I was able to defeat the onfocus=>onblur approach by double-clicking.

But remembering the value and then restoring it in the onchange event seems to handle that issue.You can do similar without expando properties by using a javascript variable.Here's an attempt to use a custom jQuery function to achieve the functionality (as mentioned here):

Most efficient way to create a zero filled JavaScript array?

dil

[Most efficient way to create a zero filled JavaScript array?](https://stackoverflow.com/questions/1295584/most-efficient-way-to-create-a-zero-filled-javascript-array)

What is the most efficient way to create an arbitrary length zero filled array in JavaScript?

2009-08-18 18:11:29Z

What is the most efficient way to create an arbitrary length zero filled array in JavaScript?ES6 introduces Array.prototype.fill. It can be used like this:Not sure if it's fast, but I like it because it's short and self-describing.It's still not in IE (check compatibility), but there's a polyfill available.Although this is an old thread, I wanted to add my 2 cents to it. Not sure how slow/fast this is, but it's a quick one liner. Here is what I do:If I want to pre-fill with a number:If I want to pre-fill with a string:Other answers have suggested:but if you want 0 (the number) and not "0" (zero inside a string), you can do:Here is another way to do it using ES6 that nobody has mentioned so far:It works by passing a map function as the second parameter of Array.from.In the example above, the first parameter allocates an array of 3 positions filled with the value undefined and then the lambda function maps each one of them to the value 0.Although Array(len).fill(0) is shorter, it doesn't work if you need to fill the array by doing some computation first (I know the question didn't ask for it, but a lot of people end up here looking for this).For instance, if you need an array with 10 random numbers:It's more concise (and elegant) than the equivalent:This method can also be used to generate sequences of numbers by taking advantage of the index parameter provided in the callback:Since this answer is getting a good deal of attention, I also wanted to show this cool trick. Although not as useful as my main answer, will introduce the still not very known, but very useful String repeat() method. Here's the trick:Cool, huh? repeat() is a very useful method to create a string that is the repetition of the original string a certain number of times. After that, split() creates an array for us, which is then map()ped to the values we want. Breaking it down in steps:Array(n).fill(0)(16 char), where n is size of array2018.10.28 i made performance comparison of 15 propositions from other answers. Tests was done on Mac OS X 10.13.6 High Sierra, on three browsers: Chrome 69.0.3497, Safari 12.0 (13606.2.11) and Firefox 63.0 (64 bit). Below i show results for fastest browser (safari):

For all browsers the fastest solution was M - however it is not "typical array" (but very fast) - Safari 33.8k operations/second, Chrome 5.2k, FF 3.5k,Fastest solutions for typical arrays:The slowest solution:Solution N works only on Firefox and Chrome.Fastest:Slowest:You can perform test on your machine here.The already mentioned ES 6 fill method takes care of this nicely. Most modern desktop browsers already support the required Array prototype methods as of today (Chromium, FF, Edge and Safari) [1]. You can look up details on MDN. A simple usage example isGiven the current browser support you should be cautious to use this unless you are sure your audience uses modern Desktop browsers.Note added August 2013, updated February 2015: The answer below from 2009 relates to JavaScript's generic Array type. It doesn't relate to the newer typed arrays defined in ES2015 [and available now in many browsers], like Int32Array and such. Also note that ES2015 adds a fill method to both Arrays and typed arrays, which is likely to be the most efficient way to fill them...Also, it can make a big difference to some implementations how you create the array. Chrome's V8 engine, in particular, tries to use a highly-efficient, contiguous-memory array if it thinks it can, shifting to the object-based array only when necessary.With most languages, it would be pre-allocate, then zero-fill, like this:But, JavaScript arrays aren't really arrays, they're key/value maps just like all other JavaScript objects, so there's no "pre-allocate" to do (setting the length doesn't allocate that many slots to fill), nor is there any reason to believe that the benefit of counting down to zero (which is just to make the comparison in the loop fast) isn't outweighed by adding the keys in reverse order when the implementation may well have optimized their handling of the keys related to arrays on the theory you'll generally do them in order.In fact, Matthew Crumley pointed out that counting down is markedly slower on Firefox than counting up, a result I can confirm — it's the array part of it (looping down to zero is still faster than looping up to a limit in a var). Apparently adding the elements to the array in reverse order is a slow op on Firefox. In fact, the results vary quite a bit by JavaScript implementation (which isn't all that surprising). Here's a quick and dirty test page (below) for browser implementations (very dirty, doesn't yield during tests, so provides minimal feedback and will run afoul of script time limits). I recommend refreshing between tests; FF (at least) slows down on repeated tests if you don't.The fairly complicated version that uses Array#concat is faster than a straight init on FF as of somewhere between 1,000 and 2,000 element arrays.  On Chrome's V8 engine, though, straight init wins out every time...Here's the test page (live copy):By default Uint8Array, Uint16Array and Uint32Array classes keep zeros as its values, so you don't need any complex filling techniques, just do:all elements of array ary will be zeros by default.If you use ES6, you can use Array.from() like this:Has the same result asBecause Note that while is usually more efficient than for-in, forEach, etc.I've tested all combinations of pre-allocating/not pre-allocating, counting up/down, and for/while loops in IE 6/7/8, Firefox 3.5, Chrome, and Opera.The functions below was consistently the fastest or extremely close in Firefox, Chrome, and IE8, and not much slower than the fastest in Opera and IE 6. It's also the simplest and clearest in my opinion. I've found several browsers where the while loop version is slightly faster, so I'm including it too for reference.orusing object notationzero filled? like...filled with 'undefined'...obj notation with zerosAs a side note, if you modify Array's prototype, bothandwill have those prototype modificationsAt any rate, I wouldn't be overly concerned with the efficiency or speed of this operation, there are plenty of other things that you will likely be doing that are far more wasteful and expensive than instanciating an array of arbitrary length containing zeros.If you need to create many zero filled arrays of different lengths during the execution of your code, the fastest way I've found to achieve this is to create a zero array once, using one of the methods mentioned on this topic, of a length which you know will never be exceeded, and then slice that array as necessary.For example (using the function from the chosen answer above to initialize the array), create a zero filled array of length maxLength, as a variable visible to the code that needs zero arrays:Now slice this array everytime you need a zero filled array of length requiredLength < maxLength:I was creating zero filled arrays thousands of times during execution of my code, this speeded up the process tremendously.I have nothing against:suggested by Zertosh, but in a new ES6 array extensions allow you to do this natively with fill method. Now IE edge, Chrome and FF supports it, but check the compatibility tablenew Array(3).fill(0) will give you [0, 0, 0]. You can fill the array with any value like new Array(5).fill('abc') (even objects and other arrays).On top of that you can modify previous arrays with fill:which gives you: [1, 2, 3, 9, 9, 6]The way I usually do it (and is amazing fast) is using Uint8Array. For example, creating a zero filled vector of 1M elements:I'm a Linux user and always have worked for me, but once a friend using a Mac had some non-zero elements. I thought his machine was malfunctioning, but still here's the safest way we found to fix it:EditedChrome 25.0.1364.160Firefox 20.0Missing the most important test (at least for me): the Node.js one. I suspect it close to Chrome benchmark.Using lodash or underscoreOr if you have an array existing and you want an array of the same lengthAs of ECMAScript2016, there is one clear choice for large arrays. Since this answer still shows up near the top on google searches, here's an answer for 2017.Here's a current jsbench with a few dozen popular methods, including many proposed up to now on this question. If you find a better method please add, fork and share.I want to note that there is no true most efficient way to create an arbitrary length zero filled array. You can optimize for speed, or for clarity and maintainability - either can be considered the more efficient choice depending on the needs of the project.When optimizing for speed, you want to: create the array using literal syntax; set the length, initialize iterating variable, and iterate through the array using a while loop. Here's an example.Another possible implementation would be:But I strongly discourage using this second implantation in practice as it's less clear and doesn't allow you to maintain block scoping on your array variable.These are significantly faster than filling with a for loop, and about 90% faster than the standard method of But this fill method is still the most efficient choice for smaller arrays due to it's clarity, conciseness and maintainability. The performance difference likely won't kill you unless you're making a lot of arrays with lengths on the order of thousands or more.A few other important notes. Most style guides recommend you no longer use varwithout a very special reason when using ES6 or later. Use const for variables that won't be redefined and let for variables that will. The MDN and Airbnb's Style Guide are great places to go for more information on best practices. The questions wasn't about syntax, but it's important that people new to JS know about these new standards when searching through these reams of old and new answers.To create an all new ArrayTo add some values at the end of an existing Array[...existingArray, ...new Array(numberOfElementsToAdd).fill(0)]What about new Array(51).join('0').split('')?Didn't see this method in answers, so here it is:In result you will get zero-valued array of length 200:I'm not sure about the performance of this code, but it shouldn't be an issue if you use it for relatively small arrays.My fastest function would be:Using the native push and shift to add items to the array is much faster (about 10 times) than declaring the array scope and referencing each item to set it's value.fyi: I consistently get faster times with the first loop, which is counting down, when running this in firebug (firefox extension).I'm interested to know what T.J. Crowder makes of that ? :-)This concat version is much faster in my tests on Chrome (2013-03-21). About 200ms for 10,000,000 elements vs 675 for straight init.Bonus: if you want to fill your array with Strings, this is a concise way to do it (not quite as fast as concat though):I was testing out the great answer by T.J. Crowder, and came up with a recursive merge based on the concat solution that outperforms any in his tests in Chrome (i didn't test other browsers).call the method with makeRec(29).Shortest for loop codeSafe var versionI knew I had this proto'd somewhere :)Edit: testsIn response to Joshua and others methods I ran my own benchmarking, and I'm seeing completely different results to those reported.Here's what I tested:Results:So by my reckoning push is indeed slower generally but performs better with longer arrays in FF but worse in IE which just sucks in general (quel surprise).It might be worth pointing out, that Array.prototype.fill had been added as part of the ECMAScript 6 (Harmony) proposal. I would rather go with the polyfill written below, before considering other options mentioned on the thread.I just use :Anonymous function:A bit shorter with for-loop:Works with any Object, just change what's inside this.push(). You can even save the function:Call it using:Adding elements to an already existing array:Performance: http://jsperf.com/zero-filled-array-creation/25

Why is the result of ('b'+'a'+ + 'a' + 'a').toLowerCase() 'banana'?

HV Sharma

[Why is the result of ('b'+'a'+ + 'a' + 'a').toLowerCase() 'banana'?](https://stackoverflow.com/questions/57456188/why-is-the-result-of-ba-a-a-tolowercase-banana)

I was practicing some JavaScript when one of my friends came across this JavaScript code:The above code answers "banana"!

Can anyone explain why?

2019-08-12 05:50:43Z

I was practicing some JavaScript when one of my friends came across this JavaScript code:The above code answers "banana"!

Can anyone explain why?+'a' resolves to NaN ("Not a Number") because it coerces a string to a number, while the character a cannot be parsed as a number.

Adding NaN to "ba" turns NaN into the string "NaN" due to type conversion, gives baNaN.

And then there is an a behind, giving baNaNa.The space between + + is to make the first one string concatenation and the second one a unary plus (i.e. "positive") operator.

You have the same result if you use 'ba'+(+'a')+'a', resolved as 'ba'+NaN+'a', which is equivalent to 'ba'+'NaN'+'a' due to type juggling....is evaluated as....(see: operator precedence)(+'a') attempts to convert 'a' to a number using the unary plus operator. Because 'a' is not a number, the result is NaN  ("Not-A-Number"):Although NaN stands for "Not a Number", it's still a numeric type; when added to strings, it concatenates just as any other number would:Finally, it's lowercased:For clarity, let's break this down into two steps. First, we get the value of the parenthesized expression and then we apply the toLowerCase() function on the result.Going L-R, we have:Applying .toLowerCase() on the value returned from step one gives: There are many similar puns in JavaScript that you can check out.It's just because of  + operator.We can get further knowledge from chunk it.For example You can convert a string into number by 2 ways:So back to the original query;

Here it tries to convert the next char ('a') to the number but suddenly we got error NaN, But it treats as a string because the previous character was in the string.

So it will beAnd last it converts it to toLowerCase(), So it would be bananaIf you are put number next to it, Your result will be change.It would be 'ba1a'This line of code evaluates an expression and then calls a method based on the returned value.The expression ('b' + 'a' + + 'a' + 'a') is solely composed of string literals and addition operators.An implicit action taken is the call for ToNumber on a stringThe interpreter has rules of how to parse the expression, by breaking it down into its components of left and right hand expressions.Step 1: 'b' + 'a'Left Expression: 'b'

 Left Value: 'b'    Operator: +  (one of the expression sides is a string, so string concatenation)Right Expression: 'a'

 Right Value: 'a'Result: 'ba'Step 2: 'ba' + + 'a'Left Expression: 'ba'

 Left Value: 'ba'  Operator: +  (one of the expression sides is a string, so string concatenation)Right Expression: + 'a' (this evaluates the Math Value of the character 'a' assuming that it is a positive number from the + sign -- the minus sign would have also worked here indicating a negative number -- which results in NaN)

 Right Value: NaN  (because the operator is string concatenation, toString is called on this value during concatenation)Result: 'baNaN'Step 3: 'baNaN' + 'a'Left Expression: 'baNaN'

 Left Value: 'baNaN'    Operator: +  (one of the expression sides is a string, so string concatenation)Right Expression: 'a'

 Right Value: 'a'Result: 'baNaNa'After this the grouping expression has been evaluated, and toLowerCase is called which leaves us with banana.So...The main thing here to know first and learn from is using + before any value in JavaScript, will convert that value to a number, but if that value can not be converted, JavaScript engine will return NaN, which means, not a number (can not be converted to a number, mate!) and the rest of story as below:Read more about NaN at W3Schools or Mozilla Developer NetworkSee the magic here. Second plus is an unary operator which gives 'NaN'

What's the difference between '$(this)' and 'this'?

Kevin Wu

[What's the difference between '$(this)' and 'this'?](https://stackoverflow.com/questions/1051782/whats-the-difference-between-this-and-this)

I am currently working through this tutorial: Getting Started with jQueryFor the two examples below:Notice in the first example, we use $(this) to append some text inside of each li element. In the second example we use this directly when resetting the form.$(this) seems to be used a lot more often than this.My guess is in the first example, $() is converting each li element into a jQuery object which understands the append() function whereas in the second example reset() can be called directly on the form.Basically we need $() for special jQuery-only functions.Is this correct?

2009-06-27 00:18:37Z

I am currently working through this tutorial: Getting Started with jQueryFor the two examples below:Notice in the first example, we use $(this) to append some text inside of each li element. In the second example we use this directly when resetting the form.$(this) seems to be used a lot more often than this.My guess is in the first example, $() is converting each li element into a jQuery object which understands the append() function whereas in the second example reset() can be called directly on the form.Basically we need $() for special jQuery-only functions.Is this correct?Yes you only need $() when you're using jQuery. If you want jQuery's help to do DOM things just keep this in mind.Basically every time you get a set of elements back jQuery turns it into a jQuery object. If you know you only have one result, it's going to be in the first element.And so on...$() is the jQuery constructor function.this is a reference to the DOM element of invocation.So basically, in $(this), you are just passing the this in $() as a parameter so that you could call jQuery methods and functions.Yes, you need $(this) for jQuery functions, but when you want to access basic javascript methods of the element that don't use jQuery, you can just use this.When using jQuery, it is advised to use $(this) usually. But if you know (you should learn and know) the difference, sometimes it is more convenient and quicker to use just this. For instance:is easier and purer thanthis is the element, $(this) is the jQuery object constructed with that elementA deeper lookthisMDN is contained in an execution contextThe scope refers to the current Execution ContextECMA. In order to understand this, it is important to understand the way execution contexts operate in JavaScript. execution contexts bind thisWhen control enters an execution context (code is being executed in that scope) the environment for variables are setup (Lexical and Variable Environments - essentially this sets up an area for variables to enter which were already accessible, and an area for local variables to be stored), and the binding of this occurs.jQuery binds thisExecution contexts form a logical stack. The result is that contexts deeper in the stack have access to previous variables, but their bindings may have been altered. Every time jQuery calls a callback function, it alters the this binding by using applyMDN.The result of calling apply is that inside of jQuery callback functions, this refers to the current element being used by the callback function. For example, in .each, the callback function commonly used allows for .each(function(index,element){/*scope*/}). In that scope, this == element is true. jQuery callbacks use the apply function to bind the function being called with the current element. This element comes from the jQuery object's element array. Each jQuery object constructed contains an array of elements which match the selectorjQuery API that was used to instantiate the jQuery object. $(selector) calls the jQuery function (remember that $ is a reference to jQuery, code: window.jQuery = window.$ = jQuery;). Internally, the jQuery function instantiates a function object. So while it may not be immediately obvious, using $() internally uses new jQuery(). Part of the construction of this jQuery object is to find all matches of the selector. The constructor will also accept html strings and elements. When you pass this to the jQuery constructor, you are passing the current element for a jQuery object to be constructed with. The jQuery object then contains an array-like structure of the DOM elements matching the selector (or just the single element in the case of this). Once the jQuery object is constructed, the jQuery API is now exposed. When a jQuery api function is called, it will internally iterate over this array-like structure. For each item in the array, it calls the callback function for the api, binding the callback's this to the current element. This call can be seen in the code snippet above where obj is the array-like structure, and i is the iterator used for the position in the array of the current element.Yeah, by using $(this), you enabled jQuery functionality for the object. By just using this, it only has generic Javascript functionality.this reference a javascript object and $(this) used to encapsulate with jQuery. Example =>  

Formatting a number with exactly two decimals in JavaScript

Abs

[Formatting a number with exactly two decimals in JavaScript](https://stackoverflow.com/questions/1726630/formatting-a-number-with-exactly-two-decimals-in-javascript)

I have this line of code which rounds my numbers to two decimal places. But I get numbers like this: 10.8, 2.4, etc. These are not my idea of two decimal places so how I can improve the following?I want numbers like 10.80, 2.40, etc. Use of jQuery is fine with me.

2009-11-13 01:46:18Z

I have this line of code which rounds my numbers to two decimal places. But I get numbers like this: 10.8, 2.4, etc. These are not my idea of two decimal places so how I can improve the following?I want numbers like 10.80, 2.40, etc. Use of jQuery is fine with me.To format a number using fixed-point notation, you can simply use the toFixed method:Note that toFixed() returns a string.IMPORTANT: Note that toFixed does not round 90% of the time, it will return the rounded value, but for many cases, it doesn't work.For instance:2.005.toFixed(2) === "2.00"Nowadays, you can use the Intl.NumberFormat constructor. It's part of the ECMAScript Internationalization API Specification (ECMA402). It has pretty good browser support, including even IE11, and it is fully supported in Node.js. You can alternatively use the toLocaleString method, which internally will use the Intl API:This API also provides you a wide variety of options to format, like thousand separators, currency symbols, etc.This is an old topic but still top-ranked Google results and the solutions offered share the same floating point decimals issue. Here is the (very generic) function I use, thanks to MDN:As we can see, we don't get these issues:This genericity also provides some cool stuff:Now, to answer the OP's question, one has to type:Or, for a more concise, less generic function:You can call it with:Various examples and tests (thanks to @t-j-crowder!):I usually add this to my personal library, and after some suggestions and using the @TIMINeutron solution too, and making it adaptable for decimal length then, this one fits best: will work for the exceptions reported.I don't know why can't I add a comment to a previous answer (maybe I'm hopelessly blind, dunno), but I came up with a solution using @Miguel's answer:And its two comments (from @bighostkim and @Imre):My final solution is as follows:As you can see I had to add a little bit of "correction" (it's not what it is, but since Math.round is lossy - you can check it on jsfiddle.net - this is the only way I knew how to "fix" it). It adds 0.001 to the already padded number, so it is adding a 1 three 0s to the right of the decimal value. So it should be safe to use.After that I added .toFixed(decimal) to always output the number in the correct format (with the right amount of decimals).So that's pretty much it. Use it well ;)EDIT: added functionality to the "correction" of negative numbers.One way to be 100% sure that you get a number with 2 decimals: If this causes rounding errors, you can use the following as James has explained in his comment:Use this method belowAND if you want the number to be fixed useI didn't find an accurate solution for this problem, so I created my own:Examples:@heridev and I created a small function in jQuery.You can try next:HTMLjQuery​

DEMO ONLINE:http://jsfiddle.net/c4Wqn/Here's a simple oneUse like alert(roundFloat(1.79209243929,4));JsfiddleThe trouble with floating point values is that they are trying to represent an infinite amount of (continuous) values with a fixed amount of bits. So naturally, there must be some loss in play, and you're going to be bitten with some values.When a computer stores 1.275 as a floating point value, it won't actually remember whether it was 1.275 or 1.27499999999999993, or even 1.27500000000000002. These values should give different results after rounding to two decimals, but they won't, since for computer they look exactly the same after storing as floating point values, and there's no way to restore the lost data. Any further calculations will only accumulate such imprecision.So, if precision matters, you have to avoid floating point values from the start. The simplest options are toFor example, when using integers to store the number of hundredths, the function for finding the actual value is quite simple:With strings, you'll need rounding, but it's still manageable:Note that this function rounds to nearest, ties away from zero, while IEEE 754 recommends rounding to nearest, ties to even as the default behavior for floating point operations. Such modifications are left as an exercise for the reader :)Round your decimal value, then use toFixed(x) for your expected digit(s).CallparseDecimalRoundAndFixed(10.800243929,4)  =>  10.80

parseDecimalRoundAndFixed(10.807243929,2)  =>  10.81Round downRound upRound nearestHere is my 1-line solution: Number((yourNumericValueHere).toFixed(2));Here's what happens:1) First, you apply .toFixed(2) onto the number that you want to round off the decimal places of. Note that this will convert the value to a string from number. So if you are using Typescript, it will throw an error like this: "Type 'string' is not assignable to type 'number'"2) To get back the numeric value or to convert the string to numeric value, simply apply the Number() function on that so-called 'string' value.For clarification, look at the example below:EXAMPLE:

I have an amount that has upto 5 digits in the decimal places and I would like to shorten it to upto 2 decimal places. I do it like so:Put the following in some global scope:and then try:Note that toFixed() can only work for the number of decimals between 0-20 i.e. a.getDecimals(25) may generate a javascript error, so to accomodate that you may add some additional check i.e.this will return a random number from 1 to 100 rounded to 2 decimal places.This worked for me: Rounding Decimals in JavaScriptUsing this response by reference: https://stackoverflow.com/a/21029698/454827I build a function to get dynamic numbers of decimals:here working example: https://jsfiddle.net/wpxLduLc/With these examples you will still get an error when trying to round the number 1.005 the solution is to either use a library like Math.js or this function:I got some ideas from this post a few months back, but none of the answers here, nor answers from other posts/blogs could handle all the scenarios (e.g. negative numbers and some "lucky numbers" our tester found). In the end, our tester did not find any problem with this method below. Pasting a snippet of my code:I also have code comments (sorry i forgot all the details already)...I'm posting my answer here for future reference:I'm fix the problem the modifier.

Support 2 decimal only.That should yield: 10.20That should yield: 0.05That should yield: 4.04etc.This is very simple and works just as well as any of the others:Since toFixed() can only be called on numbers, and unfortunately returns a string, this does all the parsing for you in both directions.  You can pass a string or a number, and you get a number back every time!  Calling parseNumber(1.49) will give you 1, and parseNumber(1.49,2) will give you 1.50.  Just like the best of 'em!You could also use the  .toPrecision() method and some custom code, and always round up to the nth decimal digit regardless the length of int part.You could also make it a plugin for a better use.Simple as this.I found a very simple way that solved this problem for me and can be used or adapted:100% working!!! Try it

Bootstrap modal appearing under background

natlines

[Bootstrap modal appearing under background](https://stackoverflow.com/questions/10636667/bootstrap-modal-appearing-under-background)

I have used the code for my modal straight from the Bootstrap example, and have included only the bootstrap.js (and not bootstrap-modal.js). However, my modal is appearing underneath the grey fade (backdrop) and is non editable.Here's what it looks like:See this fiddle for one way  to reproduce this problem. The basic structure of that code is like this:Any ideas why this is or what I can do to fix this?

2012-05-17 13:27:00Z

I have used the code for my modal straight from the Bootstrap example, and have included only the bootstrap.js (and not bootstrap-modal.js). However, my modal is appearing underneath the grey fade (backdrop) and is non editable.Here's what it looks like:See this fiddle for one way  to reproduce this problem. The basic structure of that code is like this:Any ideas why this is or what I can do to fix this?If the modal container has a fixed or relative position or is within an element with fixed or relative position this behavior will occur.Make sure the modal container and all of its parent elements are positioned the default way to fix the problem.Here are a couple ways to do this:The problem has to do with the positioning of the parent containers. You can easily "move" your modal out from these containers before displaying it. Here's how to do it if you were showing your modal using js:Or, if you launch modal using buttons, drop the .modal('show'); and just do:This will keep all normal functionality, allowing you to show the modal using a button.I tried all options supplied above but didn't get it to work using those.What did work: setting the z-index of the .modal-backdrop to -1.Also, make sure that version of BootStrap css and js are the same ones. Different versions can also make modal appearing under background:For example:Bad:Good:I have also encountered this problem and none of the solutions worked for me until i figured out i actually don't need a backdrop. You can easily remove the backdrop with the folowing code.Note: the data-backdrop attribute needs to be set to false (other options: static or true).I got it to work by giving a high z-index value to the modal window AFTER opening it. E.g.:Solution provided by @Muhd is the best way to do it. But if you are stuck in a situation where changing structure of the page is not an option, use this trick: The trick in here is data-backdrop="false" style="background-color: rgba(0, 0, 0, 0.5);"  by removing the default backdrop and create a dummy one by setting background color of the dialog itself with some alpha.Update 1:

As pointed out by @Gustyn that clicking on the background does not close the dialog as is expected. So to achieve that you have to add some java script code. Here is some example how you can achieve this.  A but late on this but here is a generic solution -Visit this link - Bootstrap 3 - modal disappearing below backdrop when using a fixed sidebar for details.An other way to approach this is to remove the z-index from the .modal-backdrop in bootstrap.css. This will cause the backdrop to be on the same level as the rest of your body (it will still fade) and your modal to be on top..modal-backdrop looks like thisJust add two lines of CSS:The .modal-backdrop should have 1050 value to set it over the navbar.I've simply set:and it works.... For the original question: Use this in your modal: This problem can often be experienced when using things like gradients in CSS for things like backgrounds or even accordion headers.Unfortunately, modifying or overriding core Bootstrap CSS is undesirable, and can lead to unwanted side effects. The least intrusive approach is to add data-backdrop="false" but you may notice that the fade effect no longer works as expected.After following recent releases of Bootstrap, version 3.3.5 seems to resolve this issue with no unwanted side effects.Download: https://github.com/twbs/bootstrap/releases/download/v3.3.5/bootstrap-3.3.5-dist.zipBe sure to include the CSS files and JavaScript files from 3.3.5.This would cover all modals without messing up any of the animations or expected behavior.. Hi I had the same issue then I realize that when you using bootsrap 3.1 

Unlike in older versions of bootsrap (2.3.2)

the html structure of the modal was changed!you must wrap your modal header body and footer with modal-dialog and modal-content  none of the suggested solutions above worked for me but this technique solved the issue:I had this issue and the easiest way to fix it was addind z-index greater than 1040 on the modal-dialog div:I believe bootstrap create a div modal-backdrop fade in which in my case has the z-index 1040, so if You put the modal-dialog on top of this, it should not be grey out anymore.set the z-index .modal to a highest valueFor example,

.sidebarwrapper has z-index of 1100, so set the z-index of .modal to 1101I have a lighter and better solution..It could be easily solve through some additional CSS styles..This will works best if you have a requirement that needs the modal to be inside an element and not near the </body> tag..In my case solve it, add this in my stylesheet:with google debugger, can examine element BACKDROP And modify attributes. Goog luck.in your navbar navbar-fixed-top need z-index = 1041

and also if u use bootstarp-combined.min.css the also change  .navbar-fixed-top, .navbar-fixed-bottom z-index to 1041Change the absolute position to relative.You can also remove the z-index from .modal-backdrop. Resulting css would look like this. I removed modal backdrop.This is not better solution, but works for me.what i find is that:in bootstrap 3.3.0  it's not right,but when in bootstrap 3.3.5  it's right.let's see the code.

3.3.0: 3.3.5Add this one to you pages.

It work for me.I was fixed this by adding style below to DIV tagAnd add custom cssFor me the easiest solution was to put my modal in a wrapper with absolute position and z-index higher than .modal-backdrop. Since modal-backdrop (at least in my case) has z-index 1050:In my case, I had a wrapper with the following:Only removed the z-index:1 and have no idea why fixed the problem. also for sure removing the relative position did but I needed it.

Can I use jQuery with Node.js?

John

[Can I use jQuery with Node.js?](https://stackoverflow.com/questions/1801160/can-i-use-jquery-with-node-js)

Is it possible to use jQuery selectors/DOM manipulation on the server-side using Node.js?

2009-11-26 01:54:20Z

Is it possible to use jQuery selectors/DOM manipulation on the server-side using Node.js?Update (27-Jun-18): It looks like there was a major update to jsdom that causes the original answer to no longer work. I found this answer that explains how to use jsdom now. I've copied the relevant code below.Note: The original answer fails to mention that it you will need to install jsdom as well using npm install jsdomUpdate (late 2013): The official jQuery team finally took over the management of the jquery package on npm:

Then:Yes you can, using a library I created called nodeQuery At the time of writing there also is the maintained Cheerio.Using jsdom you now can. Just look at their jquery example in the examples directory.This is my formula to make a simple crawler in Node.js. It is the main reason for wanting to do DOM manipulation on the server side and probably it's the reason why you got here.First, use request to download the page to be parsed. When the download is complete, handle it to cheerio and begin DOM manipulation just like using jQuery.Working example:This example will print to the console all top questions showing on SO home page. This is why I love Node.js and its community. It couldn't get easier than that :-)Install dependencies:And run (assuming the script above is in file crawler.js):Some pages will have non-english content in a certain encoding and you will need to decode it to UTF-8. For instance, a page in brazilian portuguese (or any other language of latin origin) will likely be encoded in ISO-8859-1 (a.k.a. "latin1"). When decoding is needed, I tell request not to interpret the content in any way and instead use iconv-lite to do the job.Working example:Before running, install dependencies:And then finally:The next step would be to follow links. Say you want to list all posters from each top question on SO. You have to first list all top questions (example above) and then enter each link, parsing each question's page to get the list of involved users.When you start following links, a callback hell can begin. To avoid that, you should use some kind of promises, futures or whatever. I always keep async in my toolbelt. So, here is a full example of a crawler using async:Before running:Run a test:Sample output:And that's the basic you should know to start making your own crawlers :-)in 2016 things are way easier. install jquery to node.js with your console:bind it to the variable $ (for example - i am used to it) in your node.js code: do stuff:also works for gulp as it is based on node.js.I believe the answer to this is now yes.

https://github.com/tmpvar/jsdomnpm install jquery --save #note ALL LOWERCASEnpm install jsdom --savejQuery module can be installed using:Example:References of jQuery in Node.js** : You have to get the window using the new JSDOM API.WARNINGThis solution, as mentioned by Golo Roden is not correct. It is just a quick fix to help people to have their actual jQuery code running using a Node app structure, but it's not Node philosophy because the jQuery is still running on the client side instead of on the server side. I'm sorry for giving a wrong answer.You can also render Jade with node and put your jQuery code inside. Here is the code of the jade file:My working code is:and then:or if the window is present, then:First of all install it After installing it, you can use it as belowYou can check out the full tutorial here: https://medium.com/fbdevclagos/how-to-use-jquery-on-node-df731bd6abc7The module jsdom is a great tool. But if you want to evaluate entire pages and do some funky stuff on them server side I suggest running them in their own context:So things like require / CommonJS on site will not blow your Node process itself.You can find documentation here. Cheers!As of jsdom v10, .env() function is deprecated. I did it like below after trying a lot of things to require jquery:Hope this helps you or anyone who has been facing these types of issues.No. It's going to be quite a big effort to port a browser environment to node.Another approach, that I'm currently investigating for unit testing, is to create "Mock" version of jQuery that provides callbacks whenever a selector is called.This way you could unit test your jQuery plugins without actually having a DOM. You'll still have to test in real browsers to see if your code works in the wild, but if you discover browser specific issues, you can easily "mock" those in your unit tests as well.I'll push something to github.com/felixge once it's ready to show.You can use Electron, it allows hybrid browserjs and nodejs.Before, I tried to use canvas2d in nodejs, but finally I gave up. It's not supported by nodejs default, and too hard to install it (many many ... dependeces).

Until I use Electron, I can easily use all my previous browserjs code, even WebGL, and pass the result value(eg. result base64 image data) to nodejs code.None of these solutions has helped me in my Electron App.My solution (workaround):In your index.js file:In your .js files write yours jQuery functions in this way:Yes, jQuery can be used with Node.js. Steps to include jQuery in node project:- npm i jquery --save

Include jquery in codesI do use jquery in node.js projects all the time specifically in the chrome extension's project. e.g. https://github.com/fxnoob/gesture-control-chrome-extension/blob/master/src/default_plugins/tab.jsNot that I know of. The DOM is a client side thing (jQuery doesn't parse the HTML, but the DOM).Here are some current Node.js projects:https://github.com/ry/node/wiki (https://github.com/nodejs/node)And SimonW's djangode is pretty damn cool...An alternative is to use Underscore.js.  It should provide what you might have wanted server-side from JQuery.

How to get client's IP address using JavaScript?

FlySwat

[How to get client's IP address using JavaScript?](https://stackoverflow.com/questions/391979/how-to-get-clients-ip-address-using-javascript)

I need to somehow retrieve the client's IP address using JavaScript; no server side code, not even SSI.However, I'm not against using a free 3rd party script/service.

2008-12-24 18:22:30Z

I need to somehow retrieve the client's IP address using JavaScript; no server side code, not even SSI.However, I'm not against using a free 3rd party script/service.I would use a web service that can return JSON (along with jQuery to make things simpler). Below are all the free active IP lookup services I could find and the information they return. If you know of any more, then please add a comment and I'll update this answer.Try it: https://www.cloudflare.com/cdn-cgi/traceReturns:Limitations:Try it: http://api.db-ip.com/addrinfo?api_key=<your api key>&addr=<ip address>Returns:Limitations:Try it: http://gd.geobytes.com/GetCityDetailsReturns:Limitations:Try it: https://json.geoiplookup.io/apiReturns:Limitations:Try it: http://www.geoplugin.net/json.gpReturns:Limitations:Try it: https://api.hackertarget.com/geoip/?q=<ip address>Returns:Limitations:Try it: https://ipapi.co/json/Returns:Limitations:Try it: http://ip-api.com/jsonReturns:Limitations:Try it: https://api.ipdata.coReturns:Limitations:Try it: https://ipfind.co/me?auth=<your api key>Returns:Limitations:Try it: https://api.ipgeolocation.io/ipgeo?apiKey=<your api key>Returns:Limitations:Try it: https://api.ipify.org/?format=jsonReturns:Limitations:Try it: https://api.ipinfodb.com/v3/ip-city/?key=<your api key>&format=jsonReturns:Limitations:Try it: https://ipinfo.io/jsonReturns:Limitations:Try it: https://api.ipregistry.co/?key=<your api key>Returns:Limitations:Try it: http://api.ipstack.com/<ip address>?access_key=<your api key>Returns:Limitations:Try it: https://jsonip.comReturns:Limitations:Try it: http://ip.jsontest.com/Returns:Limitations:Try it: https://geoip.nekudo.com/apiReturns:Limitations:Keep in mind that since these are all free services, your mileage may vary in terms of exceeding quota and uptime, and who knows when/if they will be taken offline down the road (exhibit A: Telize). Most of these services also offer a paid tier in case you want more features like SSL support.Also, as skobaljic noted in the comments below, the request quotas are mostly academic since this is happening client-side and most end users will never exceed the quota.UPDATESFinal UpdateThis solution would not longer work because browsers are fixing webrtc leak: for more info on that read this other question: RTCIceCandidate no longer returning IP Update: I always wanted to make a min/ uglified version of the code, so here is an ES6 Promise code: Note: This new minified code would return only single IP if you want all the IPs of the user( which might be more depending on his network), use the original code...thanks to WebRTC, it is very easy to get local IP in WebRTC supported browsers( at least for now). I have modified the source code, reduced the lines, not making any stun requests since you only want Local IP, not the Public IP, the below code works in latest Firefox and Chrome, just run the snippet and check for yourself:what is happening here is, we are creating a dummy peer connection, and for the remote peer to contact us, we generally exchange ice candidates with each other. And reading the ice candidates( from local session description and onIceCandidateEvent) we can tell the IP of the user.where I took code from --> SourceYou can, relaying it via server side with JSONPAnd while googling to find one, found it here on SO Can I perform a DNS lookup (hostname to IP address) using client-side Javascript?Most of the answers here "work around" the need for server-side code by... Hitting someone else's server. Which is a totally valid technique, unless you actually do need to get the IP address without hitting a server. Traditionally this wasn't possible without some sort of a plugin (and even then, you'd likely get the wrong IP address if you were behind a NAT router), but with the advent of WebRTC it is actually possible to do this... If you're targeting browsers that support WebRTC (currently: Firefox, Chrome and Opera). Please read mido's answer for details on how you can retrieve useful client IP addresses using WebRTC.You can do an ajax call to hostip.info or a similar service...As a bonus, geolocalisation information is returned in the same call.ORFiddleYou can't.  You'd have to ask a server.Check out http://www.ipify.org/According to them:Here's a working JS example (instead of wondering why this answer has so few votes, try it yourself to see it in action):Too lazy to copy/paste? I like it. Here's a 💻 demo Too lazy to click? :OI have nothing to do with the IPify team. I just think it's ridiculously cool that someone would provide such a service for the general good.You can use my service http://ipinfo.io for this, which will give you the client IP, hostname, geolocation information and network owner. Here's a simple example that logs the IP:Here's a more detailed JSFiddle example that also prints out the full response information, so you can see all of the available details: http://jsfiddle.net/zK5FN/2/Include this code in your page : <script type="text/javascript" src="http://l2.io/ip.js"></script>more doc hereI would say Chad and Malta has great answer. However, theirs are complicated. So I suggest this code that I found from ads by country pluginNo ajax. Just plain javascripts. :DIf you go to http://j.maxmind.com/app/geoip.js you will see that it containsIt doesn't really answer the question yet becausehttp://j.maxmind.com/app/geoip.js doesn't contain the IP (although I bet it uses the IP to get the country).But it's so easy to make a PhP script that pop something likeMake that. Put on http://yourdomain.com/yourip.php.Then do The question specifically mention NOT to use third party script. There is no other way. Javascript cannot know your IP. But other servers that  can be accessed through javascript can which work just as well with no issue.There are two interpretations to this question.  Most folks interpreted "Client IP" to mean the Public IP Address that Web server's see outside the LAN and out on the Internet.  This is not the IP address of the client computer in most cases, thoughI needed the real IP address of the computer that is running the browser that is hosting my JavaScript software (which is almost always a local IP address on a LAN that is behind something that NAT layer).  Mido posted a FANTASTIC answer, above, that seems to be the only answer that really provided the IP address of the client.Thanks for that, Mido!However, the function presented runs asynchronously.  I need to actually USE the IP address in my code, and with an asynchronous solution, I might try to use the IP address before it is retrieved/learned/stored.  I had to be able to wait on the results to arrive before using them.Here is a "Waitable" version of Mido's function.  I hope it helps someone else:Well, I am digressing from the question, but I had a similar need today and though I couldn't find the ID from the client using Javascript, I did the following.On the server side: -Using JavascriptI am using ASP.Net Ajax, but you can use getElementById instead of $get().What's happening is, I've got a hidden div element on the page with the user's IP rendered from the server. Than in Javascript I just load that value.This might be helpful to some people with a similar requirement like yours (like me while I hadn't figure this out).Cheers!With using Smart-IP.net Geo-IP API. For example, by using jQuery:There's an easier and free approach that won't ask your visitor for any permission.It consists in submitting a very simple Ajax POST request to http://freegeoip.net/json. Once you receive your location information, in JSON, you react accordingly by updating the page or redirecting to a new one.Here is how you submit your request for location information:Not possible in general unless you use some kind of external service.Get your IP with jQueryyou can get your public IP address with one line of JS? There is a free service that offers this for you and a get request is all that you need to do:For the above snippet to work, your browser will have to support CORS (cross-origin request sharing). Otherwise

a security exception would be thrown. In older browsers, you can use this version, which uses a JSON-P request:You can use the userinfo.io javascript library.You can also use requirejs to load the script.It will give you the IP address of your visitor, as well as a few data on its location (country, city, etc.). It is based on maxmind geoip database.Disclaimer: I wrote this libraryJavascript / jQuery get Client's IP Address & Location (Country, City)You only need to embed a  tag with "src" link to the server. The server will return "codehelper_ip" as an Object / JSON, and you can use it right away.More information at Javascript Detect Real IP Address Plus CountryIf you are using jQUery, you can try:It will show you more information about returned object.If you want callback function, please try this:Appspot.com callback's service isn't available.  ipinfo.io seems to be working.I did an extra step and retrieved all geo info using AngularJS. (Thanks to Ricardo)  Check it out.Working page here: http://www.orangecountyseomarketing.com/projects/_ip_angularjs.htmlI really like api.ipify.org because it supports both HTTP and HTTPS. Here are some examples of getting the IP using api.ipify.org using jQuery.If you don't want it in JSON there is also a plaintext response over HTTPSAnd there is also a plaintext response over HTTPThere isn't really a reliable way to get the client computer's IP address.This goes through some of the possibilities. The code that uses Java will break if the user has multiple interfaces.http://nanoagent.blogspot.com/2006/09/how-to-find-evaluate-remoteaddrclients.htmlFrom looking at the other answers here it sounds like you may want to get the client's public IP address, which is probably the address of the router they're using to connect to the internet. A lot of the other answers here talk about that. I would recommend creating and hosting your own server side page for receiving the request and responding with the IP address instead of depending on someone else's service that may or may not continue to work.If you're including an file anways, you could do a simple ajax get:And ajax.getIp.php would be this:Use ipdata.co.The API also provides geolocation data and has 10 global endpoints each able to handle >800M requests a day!I'm going to offer a method that I use a lot when I want to store information in the html page, and want my javascript to read information without actually having to pass parameters to the javascript. This is especially useful when your script is referenced externally, rather than inline.It doesn't meet the criterion of "no server side script", however. But if you can include server side scripting in your html, do this:Make hidden label elements at the bottom of your html page, just above the end body tag.Your label will look like this: Be sure to make a class called hiddenlabel and set the visibility:hidden so no one actually sees the label. You can store lots of things this way, in hidden labels.Now, in your javascript, to retrieve the information stored in the label (in this case the client's ip address), you can do this:Now your variable "ip" equals the ip address. Now you can pass the ip to your API request.* EDIT 2 YEARS LATER *

Two minor refinements:I routinely use this method, but call the label class="data", because, in fact, it is a way to store data. Class name "hiddenlabel" is kind of a stupid name.The second modification is in the style sheet, instead of visibility:hidden:...is the better way of doing it.You could do this entirely client side and mostly in JavaScript by using a Flash object that the js can call. Flash can access the IP address of the local machine which might not be very useful.Try this: http://httpbin.org/ip (or https://httpbin.org/ip)Example with https:Source: http://httpbin.org/First of all the actual answer: It is not possible to use purely client-side executed code to find out your own IP address.However you can just do a GET towards https://api.muctool.de/whois and receive something like to obtain a client's IP address

jQuery.click() vs onClick

Techie

[jQuery.click() vs onClick](https://stackoverflow.com/questions/12627443/jquery-click-vs-onclick)

I have a huge jQuery application, and I'm using the below two methods for click events.First methodSecond methodI use either the first or second method in my application. Which one is better? Better for performance? And standard?

2012-09-27 18:02:02Z

I have a huge jQuery application, and I'm using the below two methods for click events.First methodSecond methodI use either the first or second method in my application. Which one is better? Better for performance? And standard?Using $('#myDiv').click(function(){ is better as it follows standard event registration model. (jQuery internally uses addEventListener and attachEvent). Basically registering an event in modern way is the unobtrusive way of handling events. Also to register more than one event listener for the target you can call addEventListener() for the same target. http://jsfiddle.net/aj55x/1/ More about Modern event registration -> http://www.quirksmode.org/js/events_advanced.htmlOther methods such as setting the HTML attributes, example: Or DOM element properties, example: are old and they can be over written easily. HTML attribute should be avoided as It makes the markup bigger and less readable. Concerns of content/structure and behavior are not well-separated, making a bug harder to find.The problem with the DOM element properties method is that only one event handler can be bound to an element per event.More about Traditional event handling -> http://www.quirksmode.org/js/events_tradmod.htmlMDN Reference: https://developer.mozilla.org/en-US/docs/DOM/eventFor better performance, use the native JavaScript. For faster development, use jQuery. Check the comparison in performance at jQuery vs Native Element Performance.I've done a test in Firefox 16.0 32-bit on Windows Server 2008 R2 / 7 64-bitFor click events, check Native Browser events vs jquery trigger or jQuery vs Native Click Event Binding.Testing in Chrome 22.0.1229.79 32-bit on Windows Server 2008 R2 / 7 64-bitFrom what I understand, your question is not really about whether to use jQuery or not. It's rather: Is it better to bind events inline in HTML or through event listeners?Inline binding is deprecated. Moreover this way you can only bind one function to a certain event.Therefore I recommend using event listeners. This way, you'll be able to bind many functions to a single event and to unbind them later if needed. Consider this pure JavaScript code:This works in most modern browsers.However, if you already include jQuery in your project — just use jQuery: .on or .click function.You could combine them, use jQuery to bind the function to the click$('#myDiv').click is better, because it separates JavaScript code from HTML. One must try to keep the page behaviour and structure different. This helps a lot.Go for this as it will give you both standard and performance.As the second method is simple JavaScript code and is faster than jQuery. But here performance will be approximately the same.IMHO, onclick is the preferred method over .click only when the following conditions are met:I formed this opinion because of the fact that the JavaScript engines on mobile devices are 4 to 7 times slower than their desktop counterparts which were made in the same generation. I hate it when I visit a site on my mobile device and receive jittery scrolling because the jQuery is binding all of the events at the expense of my user experience and battery life. Another recent supporting factor, although this should only be a concern with government agencies ;) , we had IE7 pop-up with a message box stating that JavaScript process is taking to long...wait or cancel process. This happened every time there were a lot of elements to bind to via jQuery.Difference in works. If you use click(), you can add several functions, but if you use an attribute, only one function will be executed - the last one.DEMOHTMLJavaScriptIf we are talking about performance, in any case directly using is always faster, but using of an attribute, you will be able to assign only one function.Seperation of concerns is key here, and so the event binding is the generally accepted method. This is basically what a lot of the existing answers have said. However don't throw away the idea of declarative markup too quickly. It has it's place, and with frameworks like Angularjs, is the centerpiece. There needs to be an understanding that the whole <div id="myDiv" onClick="divFunction()">Some Content</div> was shamed so heavily because it was abused by some developers. So it reached the point of sacrilegious proportions, much like tables. Some developers actually avoid tables for tabular data. It's the perfect example of people acting without understanding. Although I like the idea of keeping my behaviour seperate from my views. I see no issue with the markup declaring what it does (not how it does it, that's behaviour). It might be in the form of an actual onClick attribute, or a custom attribute, much like bootstraps javascript components. This way, by glancing just at the markup, you can see what is does, instead of trying to reverse lookup javascript event binders. So, as a third alternative to the above, using data attributes to declarativly announce the behaviour within the markup. Behaviour is kept out of the view, but at a glance you can see what is happening.  Bootstrap example:Source: http://getbootstrap.com/javascript/#popoversNote The main disadvantage with the second example is the pollution of global namespace. This can be circumvented by either using the third alternative above, or frameworks like Angular and their ng-click attributes with automatically scope. Neither one is better in that they may be used for different purposes. onClick (should actually be onclick) performs very slightly better, but I highly doubt you will notice a difference there.It is worth noting that they do different things: .click can be bound to any jQuery collection whereas onclick has to be used inline on the elements you want it to be bound to. You can also bind only one event to using onclick, whereas .click lets you continue to bind events.In my opinion, I would be consistent about it and just use .click everywhere and keep all of my JavaScript code together and separated from the HTML.Don't use onclick. There isn't any reason to use it unless you know what you're doing, and you probably don't.onclick, onmouseover, onmouseout, etc. events are actually bad for performance (in Internet Explorer mainly, go figure). If you code using Visual Studio, when you run a page with these, every single one of these will create a separate SCRIPT block taking up memory, and thus slowing down performance.Not to mention you should have a separation of concerns: JavaScript and layouts should be separated!It is always better to create evenHandlers for any of these events, one event can capture hundreds/thousands of items, instead of creating thousands of separate script blocks for each one!(Also, everything everyone else is saying.)Well, one of the main ideas behind jQuery is to separate JavaScript from the nasty HTML code. The first method is the way to go.Most of the time, native JavaScript methods are a better choice over jQuery when performance is the only criteria, but jQuery makes use of JavaScript and makes the development easy. You can use jQuery as it does not degrade performance too much. In your specific case, the difference of performance is ignorable.The first method of using onclick is not jQuery but simply Javascript, so you do not get the overhead of jQuery. The jQuery way can expanded via selectors if you needed to add it to other elements without adding the event handler to each element, but as you have it now it is just a question if you need to use jQuery or not.Personally since you are using jQuery I would stick with it as it is consistent and does decouple the markup from the script.The first method is to prefer. It uses the advanced event registration model[s], which means you can attach multiple handlers to the same element. You can easily access the event object, and the handler can live in any function's scope. Also, it is dynamic, i.e it can be invoked at any time and is especially well-suited for dynamically generated elements. Whether you use jQuery, an other library or the native methods directly does not really matter.The second method, using inline attributes, needs a lot of global functions (which leads to namespace pollution) and mixes the content/structure (HTML) with the behavior (JavaScript). Do not use that.Your question about performance or standards can't be easily answered. The two methods are just completely different, and do different things. The first one is mightier, while the second one is despised (considered bad style).Onclick Function Jquery$('#selector').click(function(){

//Your Functionality

});

Check if an element contains a class in JavaScript?

daGUY

[Check if an element contains a class in JavaScript?](https://stackoverflow.com/questions/5898656/check-if-an-element-contains-a-class-in-javascript)

Using plain JavaScript (not jQuery), Is there any way to check if an element contains a class?Currently, I'm doing this:The issue is that if I change the HTML to this......there's no longer an exact match, so I get the default output of nothing (""). But I still want the output to be I have class1 because the <div> still contains the .class1 class.

2011-05-05 13:40:19Z

Using plain JavaScript (not jQuery), Is there any way to check if an element contains a class?Currently, I'm doing this:The issue is that if I change the HTML to this......there's no longer an exact match, so I get the default output of nothing (""). But I still want the output to be I have class1 because the <div> still contains the .class1 class.Use element.classList .contains method:This works on all current browsers and there are polyfills to support older browsers too. Alternatively, if you work with older browsers and don't want to use polyfills to fix them, using indexOf is correct, but you have to tweak it a little:Otherwise you will also get true if the class you are looking for is part of another class name.DEMOjQuery uses a similar (if not the same) method.Applied to the example:As this does not work together with the switch statement, you could achieve the same effect with this code:It's also less redundant ;)The easy and effective solution is trying .contains method.In modern browsers, you can just use the contains method of Element.classList :(from CanIUse.com)If you want to use Element.classList but you also want to support older browsers, consider using this polyfill by Eli Grey.Since he wants to use switch(), I'm surprised no one has put this forth yet:element.matches(selectorString)According to MDN Web Docs:Therefore, you can use Element.matches() to determine if an element contains a class.View Browser CompatibilityHere is a little snippet If you’re trying to check wether element contains a class, without using jQuery.This accounts for the fact that element might contain multiple class names separated by space.ORYou can also assign this function to element prototype.And trigger it like this (very similar to jQuery’s .hasClass() function):A simplified oneliner:11 indexOf for arrays is not supported by IE (ofcourse). There are plenty of monkey patches to be found on the net for that.This is a little old, but maybe someone will find my solution helpfull:I know there a lot of answers but most of these are for additional functions and additional classes. This is the one I personally use; much cleaner and much less lines of code!className is just a string so you can use the regular indexOf function to see if the list of classes contains another string.Here's a case-insensitive trivial solution:If the element only has one class name you can quickly check it by getting the class attribute.  The other answers are much more robust but this certainly has it's use cases.I've created a prototype method which uses classList, if possible, else resorts to indexOf:I would Poly fill the classList functionality and use the new syntax. This way newer browser will use the new implementation (which is much faster) and only old browsers will take the performance hit from the code.https://github.com/remy/polyfills/blob/master/classList.jsThis is a bit off, but if you have an event that triggers switch, you can do without classes:You can do.replace(/[0-9]/g, '') removes digits from id.It is a bit hacky, but works for long switches without extra functions or loopsSee this Codepen link for faster and easy way of checking an element if it has a specific class using vanilla JavaScript~!hasClass (Vanilla JS) This is supported on IE8+. First we check if classList exists if it does we can use the contains method which is supported by IE10+. If we are on IE9 or 8 it falls back to using a regex, which is not as efficient but is a concise polyfill.Alternatively if you are compiling with babel you can simply use:

el.classList.contains(className);Try this one:I think that perfect solution will be thisin which element is currently the class '.bar' ? Here is another solution but it's up to you.jsfiddle demoOf course this is only a lookup for 1 simple element <img>(/Image/g) but you can put all in an array like <li> is /LI/g, <ul> = /UL/g etc. Just to add to the answer for people trying to find class names within inline SVG elements.Change the hasCLass() function to:Instead of using the className property you'll need to use the getAttribute() method to grab the class name.I created these functions for my website, I use only vanilla javascript, maybe it will help someone.

First I created a function to get any HTML element:Then the function that recieve the class to remove and the selector of the element:Now you can use it like this:Hope it will help.Tip: Try to remove dependencies of jQuery in your projects as much as you can - VanillaJS.document.firstElementChild returns <html> tag then the classList attribute returns all classes added to it.For me the most elegant and faster way to achieve it is:

What characters are valid for JavaScript variable names?

Richard Clayton

[What characters are valid for JavaScript variable names?](https://stackoverflow.com/questions/1661197/what-characters-are-valid-for-javascript-variable-names)

Which characters can be used for naming a JavaScript variable?I want to create a small "extension library" for my non-JavaScript users here at work (who all seem to be squeamish when it comes to the language).  I love how jQuery and Prototype have both use the $ dollar sign, and since I use jQuery, I'm looking for another nice single-character symbol to use.  I realize that I could just test out a number of characters, but I'm hoping to narrow down my list of characters to start with (in consideration of  future integration with another popular library, perhaps).

2009-11-02 13:04:29Z

Which characters can be used for naming a JavaScript variable?I want to create a small "extension library" for my non-JavaScript users here at work (who all seem to be squeamish when it comes to the language).  I love how jQuery and Prototype have both use the $ dollar sign, and since I use jQuery, I'm looking for another nice single-character symbol to use.  I realize that I could just test out a number of characters, but I'm hoping to narrow down my list of characters to start with (in consideration of  future integration with another popular library, perhaps).To quote Valid JavaScript variable names, my write-up summarizing the relevant spec sections:I’ve also created a tool that will tell you if any string that you enter is a valid JavaScript variable name according to ECMAScript 5.1 and Unicode 6.1:P.S. To give you an idea of how wrong Anthony Mills' answer is: if you were to summarize all these rules in a single ASCII-only regular expression for JavaScript, it would be 11,236 characters long. Here it is:From the ECMAScript specification in section 7.6 Identifier Names and Identifiers, a valid identifier is defined as:which creates a lot of opportunities for naming variables and also in golfing. Let's try some examples.A valid identifier could start with either a UnicodeLetter, $, _,  or \ UnicodeEscapeSequence. A unicode letter is any character from these categories (see all categories):This alone accounts for some crazy possibilities - working examples. If it doesn't work in all browsers, then call it a bug, cause it should.Basically, in regular expression form: [a-zA-Z_$][0-9a-zA-Z_$]*. In other words, the first character can be a letter or _ or $, and the other characters can be letters or _ or $ or numbers.Note: While other answers have pointed out that you can use Unicode characters in JavaScript identifiers, the actual question was "What characters should I use for the name of an extension library like jQuery?" This is an answer to that question. You can use Unicode characters in identifiers, but don't do it. Encodings get screwed up all the time. Keep your public identifiers in the 32-126 ASCII range where it's safe.Before JavaScript 1.5: ^[a-zA-Z_$][0-9a-zA-Z_$]*$In English: It must start with a dollar sign, underscore or one of letters in the 26-character alphabet, upper or lower case. Subsequent characters (if any) can be one of any of those or a decimal digit.JavaScript 1.5 and later * : ^[\p{L}\p{Nl}$_][\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]*$This is more difficult to express in English, but it is conceptually similar to the older syntax with the addition that the letters and digits can be from any language. After the first character, there  are also allowed additional underscore-like characters (collectively called「connectors」) and additional character combining marks (「modifiers」). (Other currency symbols are not included in this extended set.)JavaScript 1.5 and later also allows Unicode escape sequences, provided that the result is a character that would be allowed in the above regular expression.Identifiers also must not be a current reserved word or one that is considered for future use.There is no practical limit to the length of an identifier. (Browsers vary, but you’ll safely have 1000 characters and probably several more orders of magnitude than that.)Links to the character categories:*n.b. This Perl regex is intended to describe the syntax only — it won’t work in JavaScript, which doesn’t (yet) include support for Unicode Properties. (There are some third-party packages that claim to add such support.)Actually, ECMAScript says on page 15:

That an identifier may start with a $, an underscore or a UnicodeLetter, and then it goes on (just below that) to specify that a UnicodeLetter can be any character from the unicode catagories, Lo, Ll, Lu, Lt, Lm and Nl.

And when you look up those catagories you will see that this opens up a lot more possibilities than just latin letters. Just search for "unicode catagories" in google and you can find them.Javascript VariablesYou can start a variable with any letter, $, or _ character. As long as it doesn't start with a number, you can include numbers as well.Start: [a-z], $, _Contain: [a-z], [0-9], $, _jQueryYou can use _ for your library so that it will stand side-by-side with jQuery. However, there is a configuration you can set so that jQuery will not use $. It will instead use jQuery. To do this, simply set:This page explains how to do this.The accepted answer would rule out a lot of valid identifiers, as far as I can see. Here is a regular expression that I put together which should follow the spec (see chapter 7.6 on identifiers). Created it using RegexBuddy and you can find an export of the explanation at http://samples.geekality.net/js-identifiers.In addition, the name cannot be one of the following reserved words.Javascript variables can have letters, digits, dollar signs ($) and underscores (_). They can't start with digits.Usually libraries use $ and _ as shortcuts for functions that you'll be using everywhere. Although the names $ or _ aren't meaningful, they're useful for their shortness and since you'll be using the function everywhere you're expected to know what they mean.If your library doesn't consist on getting a single function being used everywhere, I'd recommend that you use more meaningful names as those will help you and others understand what your code is doing without necessarily compromising the source code niceness.You could for instance take a look at the awesome DateJS library and at the syntatic sugar it allows without the need of any symbol or short-named variables.You should first get your code to be practical, and only after try making it pretty.in case regular expressions is not a must, wouldn't it be better to just ask the browser to decide using eval ?Here is one quick suggestion for creating variable names. If you want the variable not to conflict when being used in FireFox, do not use the variable name "_content" as this variable name is already being used by the browser. I found this out the hard way and had to change all of the places I used the variable "_content" in a large JavaScript application.I've taken Anas Nakawa's idea and improved it. First of all, there is no reason to actually run the function being declared. We want to know whether it parses correctly, not whether the code works. Second, a literal object is a better context for our purpose than var XXX as it's harder to break out of.Wrote a glitch workspace that iterates over all the codepoints and emit the character if eval('var ' + String.fromCodePoint(#) + ' = 1') works. It just keeps going, and going, and going....

Clearing <input type='file' /> using jQuery

slipheed

[Clearing <input type='file' /> using jQuery](https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery)

Is it possible to clear an <input type='file' /> control value with jQuery? I've tried the following:But it's not working.

2009-06-25 13:32:15Z

Is it possible to clear an <input type='file' /> control value with jQuery? I've tried the following:But it's not working.Easy: you wrap a <form> around the element, call reset on the form, then remove the form using .unwrap(). Unlike the .clone() solutions otherwise in this thread, you end up with the same element at the end (including custom properties that were set on it).Tested and working in Opera, Firefox, Safari, Chrome and IE6+. Also works on other types of form elements, with the exception of type="hidden".JSFiddleAs Timo notes below, if you have the buttons to trigger the reset of the field inside of the <form>, you must call .preventDefault() on the event to prevent the <button> from triggering a submit.Does not work in IE 11 due to an unfixed bug. The text (file name) is cleared on the input, but its File list remains populated.Quick answer: replace it.In the code below I use the replaceWith jQuery method to replace the control with a clone of itself. In the event you have any handlers bound to events on this control, we'll want to preserve those as well. To do this we pass in true as the first parameter of the clone method.Fiddle: http://jsfiddle.net/jonathansampson/dAQVM/If cloning, while preserving event handlers, presents any issues you could consider using event delegation to handle clicks on this control from a parent element:This prevents the need for any handlers to be cloned along with the element when the control is being refreshed.Jquery is supposed to take care of the cross-browser/older browser issues for you.This works on modern browsers that I tested: Chromium v25, Firefox v20, Opera v12.14Using jquery 1.9.1HTMLJqueryOn jsfiddleThe following javascript solution also worked for me on the browsers mention above.On jsfiddleI have no way to test with IE, but theoretically this should work. If IE is different enough that the Javascript version does not work because MS have done it in a different way, the jquery method should in my opinion deal with it for you, else it would be worth pointing it out to the jquery team along with the method that IE requires. (I see people saying "this won't work on IE", but no vanilla javascript to show how it does work on IE (supposedly a "security feature"?), perhaps report it as a bug to MS too (if they would count it as such), so that it gets fixed in any newer release)Like mentioned in another answer, a post on the jquery forumBut jquery have now removed support for browser testing, jquery.browser.This javascript solution also worked for me, it is the vanilla equivalent of the jquery.replaceWith method.On jsfiddleThe important thing to note is that the cloneNode method does not preserve associated event handlers.See this example.On jsfiddleBut jquery.clone offers this [*1]On jsfiddle[*1] jquery is able to do this if the events were added by jquery's methods as it keeps a copy in jquery.data, it does not work otherwise, so it's a bit of a cheat/work-around and means things are not compatible between different methods or libraries.On jsfiddleYou can not get the attached event handler direct from the element itself.Here is the general principle in vanilla javascript, this is how jquery an all other libraries do it (roughly).On jsfiddleOf course jquery and other libraries have all the other support methods required for maintaining such a list, this is just a demonstration.For obvious security reasons you can't set the value of a file input, even to an empty string.All you have to do is reset the form where the field or if you only want to reset the file input of a form containing other fields, use this:Here is an exemple: http://jsfiddle.net/v2SZJ/1/This works for me. http://forum.jquery.com/topic/how-to-clear-a-file-input-in-ieHope it helps.In IE8 they made the File Upload field read-only for security. See the IE team blog post:$("#control").val('') is all you need! Tested on Chrome using JQuery 1.11Other users have tested in Firefox as well.I got stuck with all the options here. Here's a hack that I made which worked:and you can trigger the reset using jQuery with a code similar to this:(jsfiddle: http://jsfiddle.net/eCbd6/)I ended up with this:may not be the most elegant solution, but it work as far as I can tell.I have used https://github.com/malsup/form/blob/master/jquery.form.js, which has a function called clearInputs(), which is crossbrowser, well tested, easy to use and handles also IE issue and hidden fields clearing if needed. Maybe a little long solution to only clear file input, but if you are dealing with crossbrowser file uploads, then this solution is recommended.The usage is easy:The value of file inputs is read only (for security reasons). You can't blank it programatically (other than by calling the reset() method of the form, which has a broader scope than just that field).I was able to get mine working with the following code:I have been looking for simple and clean way to clear HTML file input, the above answers are great, but none of them really answers what i'm looking for, until i came across on the web with simple an elegant way to do it :all the credit go's to Chris Coyier.The .clone() thing does not work in Opera (and possibly others). It keeps the content.The closest method here for me was Jonathan's earlier, however ensuring that the field preserved its name, classes, etc made for messy code in my case.Something like this might work well (thanks to Quentin too):I have managed to get this to work using the following...This has been tested in IE10, FF, Chrome & Opera.There are two caveats...What I don't understand is who on earth thought not allowing you to clear an input field from an invalid unacceptable file selection was a good idea?OK, don't let me dynamically set it with a value so I can't leach files from a user's OS, but let me clear an invalid selection without resetting an entire form. It's not like 'accept' does anything other than a filter anyhow and in IE10, it doesn't even understand MS Word mime types, it's a joke!On my Firefox 40.0.3 only work with thisits works for me in every browser.I tried with the most of the techniques the users mentioned, but none of they worked in all browsers. i.e: clone() doesn't work in FF for file inputs.

I ended up copying manually the file input, and then replacing the original with the copied one. It works in all browsers.This works with Chrome, FF, and SafariMay not work with IE or OperaMake it asynchronous, and reset it after the button's desired actions have been done.it does not work for me:so in asp mvc I use razor features for replacing file input.

at first create a variable for input string with Id and Name and then use it for showing in page and replacing on reset button click:An easy way is changing the input type and change it back again.Something like this:You can replace it with its clone like so But this clones with its value too so you had better like soIt's easy lol (works in all browsers [except opera]):JS Fiddle: http://jsfiddle.net/cw84x/1/What? 

In your validation function, just put Assuming upload is the name:I'm using JSP, not sure if that makes a difference...Works for me, and I think it's way easier.

jQuery checkbox change and click event

Professor Chaos

[jQuery checkbox change and click event](https://stackoverflow.com/questions/7031226/jquery-checkbox-change-and-click-event)

Here .change() updates the textbox value with the checkbox status. I use .click() to confirm the action on uncheck. If the user selects cancel, the checkmark is restored but .change() fires before confirmation.This leaves things in an inconsistent state and the textbox says false when the checkbox is checked.How can I deal with the cancellation and keep textbox value consistent with the check state?

2011-08-11 18:50:19Z

Here .change() updates the textbox value with the checkbox status. I use .click() to confirm the action on uncheck. If the user selects cancel, the checkmark is restored but .change() fires before confirmation.This leaves things in an inconsistent state and the textbox says false when the checkbox is checked.How can I deal with the cancellation and keep textbox value consistent with the check state?Tested in JSFiddle and does what you're asking for.This approach has the added benefit of firing when a label associated with a checkbox is clicked. Updated Answer:Original Answer:Use mousedownMost of the answers won't catch it (presumably) if you use <label for="cbId">cb name</label>. This means when you click the label it will check the box instead of directly clicking on the checkbox. (Not exactly the question, but various search results tend to come here)In which case you could use:Earlier versions of jQuery:JSFiddle example with jQuery 1.6.4jQuery 1.7+JSFiddle example with the latest jQuery 2.xWell .. just for the sake of saving a headache (its past midnight here), I could come up with:Hope it helpsHere you areHtmlJavaScriptFor me this works great:Get rid of the change event, and instead change the value of the textbox in the click event. Rather than returning the result of the confirm, catch it in a var. If its true, change the value. Then return the var.Checkbox click and checking for the value in the same event loop is the problem.Try this:Demo: http://jsfiddle.net/mrchief/JsUWv/6/if you are using the iCheck Jquery use the below code Try thisLate answer, but you can also use on("change")simply just use click event

 my check box id is CheckAllget radio value by nameI am not sure why everyone is making this so complicated. 

This is all I did. 

What is「export default」in javascript?

damphat

[What is「export default」in javascript?](https://stackoverflow.com/questions/21117160/what-is-export-default-in-javascript)

File: SafeString.jsI have never seen export default before. Are there any equivalent stuff for export default that can be easier to understand?

2014-01-14 15:21:21Z

File: SafeString.jsI have never seen export default before. Are there any equivalent stuff for export default that can be easier to understand?It's part of the ES6 module system, described here. There is a helpful example in that documentation, also:Update: As of June 2015, the module system is defined in §15.2 and the export syntax in particular is defined in §15.2.3 of the ECMAScript 2015 specification.export default is used to export a single class, function or primitive from a script file.The export can also be written asThis is used to import this function in another script fileSay in app.js, you can As the name says, it's used to export functions, objects, classes or expressions from script files or modulesUtiliites.jsThis can be imported and used asApp.jsOrWhen export default is used, this is much simpler. Script files just exports one thing.

cube.jsand used as

App.jsexport default function(){} can be used when the function has no name. There can only be one default export in a file. The alternative is a named export.This page describes export default in detail as well as other details about modules that I found very helpful.I am writing this post because (I assume I am tired) I did not quite understood nor MDN, nor other people description and the best way to understand something is to teach it to other people. It's just I don't see a simple answer of the question.I will illustrate this line with a simple example.Lets say we have 3 modules and an index.html:modul.jsmodul2.jsmodul3.jsindex.htmlThe output is:So the longer explanation is:'export default' is used if you want to export a single thing for a module.So the thing that is important is "import blabla from './modul3.js'" - we could say instead: "import pamelanderson from './modul3.js" and then pamelanderson(); This will work just fine when we use 'export default' and basically this is it - it allows us to name it whatever we like when it is default.P.s. If you want to test the example - create the files first, then allow CORS in the browser -> if you are using firefox type in the url of the browser: about:config -> Search for "privacy.file_unique_origin" -> change it to "false" -> open index.html -> press F12 to open the console and see the output -> Enjoy and don't forget to return the cors settings to default.P.s.2 Sorry for the silly variable namingMore info @ 

link2medium, link2mdn1, link2mdn2As explained on this MDN pageFor example:In my oppinnion the important about default export is, that it CAN be imported with ANY name!if there is file foo.js which exports default:it can be imported in bar.js using:

export default is used to export a single class, function or primitive.export default function() { } can be used when the function has no name. There can only be one default export in a file.read more

Selecting last element in JavaScript array [duplicate]

mkyong

[Selecting last element in JavaScript array [duplicate]](https://stackoverflow.com/questions/9050345/selecting-last-element-in-javascript-array)

I'm making an application that updates a user's location and path in real time and displays this on a Google Map. I have functionality that allows multiple users to be tracked at the same time using an object, which is updated every second. Right now, when a user pressed a button in the Android app, the coordinates are sent to a database and each time the location changes, a marker is updated on the map (and a polyline is formed). Since I have multiple users, I send a unique and randomly generated alphanumeric string so that I can display an individual path for each user. When the JS pulls this data from the database, it checks if the user exists, if it does not, it creates a new key with the value being a list. It would look something like this:What I'm doing is storing a list of coordinates as the value of the key, which is the user's ID. My program keeps updating this list each time the location is changed by adding to the list (this works properly). What I need to do is update the marker's location each time the location changes. I would like to do this by selecting the last item in the array since that would be the last known location. Right now, each time the location is changed a new marker is added to the map (each one of the points in the example would show a marker at that location) so markers continue to be added. I would use a ´for (x in loc)` statement each time the location updates to grab the last location from the list and use that to update the marker. How do I select this last element from the array within the hash?

2012-01-29 02:11:43Z

I'm making an application that updates a user's location and path in real time and displays this on a Google Map. I have functionality that allows multiple users to be tracked at the same time using an object, which is updated every second. Right now, when a user pressed a button in the Android app, the coordinates are sent to a database and each time the location changes, a marker is updated on the map (and a polyline is formed). Since I have multiple users, I send a unique and randomly generated alphanumeric string so that I can display an individual path for each user. When the JS pulls this data from the database, it checks if the user exists, if it does not, it creates a new key with the value being a list. It would look something like this:What I'm doing is storing a list of coordinates as the value of the key, which is the user's ID. My program keeps updating this list each time the location is changed by adding to the list (this works properly). What I need to do is update the marker's location each time the location changes. I would like to do this by selecting the last item in the array since that would be the last known location. Right now, each time the location is changed a new marker is added to the map (each one of the points in the example would show a marker at that location) so markers continue to be added. I would use a ´for (x in loc)` statement each time the location updates to grab the last location from the list and use that to update the marker. How do I select this last element from the array within the hash?It looks like that:Which in your case looks like this:or, in longer version, without creating new variables:If you are a fan for creating functions/shortcuts to fulfill such tasks, the following code:will allow you to get the last element of an array by invoking array's last() method, in your case eg.:You can check that it works here: http://jsfiddle.net/D4NRN/Use the slice() method:You can also .pop off the last element. Be careful, this will change the value of the array, but that might be OK for you.use es6 deconstruction array with the spread operatorvar last = [...yourArray].pop();note that yourArray doesn't change.This will return undefined if the array is empty and this will not change the value of the array.I find slice at -1 useful for getting the last element (especially of an array of unknown length) and the performance is much better than calculating the length less 1.Mozilla Docs on SlicePerformance of the various methods for selecting last array elementUnderscore and Lodash have the _.last(Array) method, that returns the last element in an Array. They both work about the sameRamda also has a _.last functionUse JavaScript objects if this is critical to your application. You shouldn't be using raw primitives to manage critical parts of your application.  As this seems to be the core of your application, you should use objects instead. I've written some code below to help get you started. The method lastLocation would return the last location.You can define a getter on Array.prototype:As you can see, access doesn't look like a function call; the getter function is called internally.This worked:In case you are using ES6 you can do:So, a lot of people are answering with pop(), but most of them don't seem to realize that's a destructive method. So, for a really silly, nondestructive method:a push pop, like in the 90s :)push appends a value to the end of an array, and returns the length of the result. so pop returns the value of the last item of an array, prior to it removing that value at that index. so arrays are 0 indexed, so c.length => 3, c[c.length] => undefined (because you're looking for the 4th value if you do that(this level of depth is for any hapless newbs that end up here)).Probably not the best, or even a good method for your application, what with traffic, churn, blah. but for traversing down an array, streaming it onto another, just being silly with inefficient methods, this. Totally this.

What is the「double tilde」(~~) operator in JavaScript? [duplicate]

jismo

[What is the「double tilde」(~~) operator in JavaScript? [duplicate]](https://stackoverflow.com/questions/5971645/what-is-the-double-tilde-operator-in-javascript)

I'm seeing this in some code, and I have no idea what it does:What's the ~~ operator do?

2011-05-11 23:18:14Z

I'm seeing this in some code, and I have no idea what it does:What's the ~~ operator do?That ~~ is a double NOT bitwise operator.It is used as a faster substitute for Math.floor().It hides the intention of the code.It's two single tilde operators, so it does a bitwise complement (bitwise not) twice. The operations take out each other, so the only remaining effect is the conversion that is done before the first operator is applied, i.e. converting the value to an integer number.Some use it as a faster alternative to Math.floor, but the speed difference is not that dramatic, and in most cases it's just micro optimisation. Unless you have a piece of code that really needs to be optimised, you should use code that descibes what it does instead of code that uses a side effect of a non-operation.With optimisation of the JavaScript engine in browsers, the performance for operators and functions change. With current browsers, using ~~ instead of Math.floor is somewhat faster in some browsers, and not faster at all in some browsers. If you really need that extra bit of performance, you would need to write different optimised code for each browser.See: tilde vs floorFor more info, see:The diffrence is very simple:Long versionIf you want to have better readability, use Math.floor. But if you want to minimize it, use tilde ~~.There are a lot of sources on the internet saying Math.floor is faster, but sometimes ~~. I would not recommend you think about speed because it is not going to be noticed when running the code. Maybe in tests etc, but no human can see a diffrence here. What would be faster is to use ~~ for a faster load time.Short version~~ is shorter/takes less space. Math.floor improves the readability. Sometimes tilde is faster, sometimes Math.floor is faster, but it is not noticeable.

How do I attach events to dynamic HTML elements with jQuery? [duplicate]

frankadelic

[How do I attach events to dynamic HTML elements with jQuery? [duplicate]](https://stackoverflow.com/questions/1359018/how-do-i-attach-events-to-dynamic-html-elements-with-jquery)

Suppose I have some jQuery code that attaches an event handler to all elements with class .myclass. For example:And my HTML might be as follows:That works with no problem.

However, consider if the .myclass elements were written to the page at some future time.For example:In this case, the test4 link is created when a user clicks on a#anchor1.The test4 link does not have the click() handler associated with it, even though it has class="myclass".Basically, I would like to write the click() handler once and have it apply to both content present at page load, and content brought in later via AJAX / DHTML. Any idea how I can fix this? 

2009-08-31 19:29:03Z

Suppose I have some jQuery code that attaches an event handler to all elements with class .myclass. For example:And my HTML might be as follows:That works with no problem.

However, consider if the .myclass elements were written to the page at some future time.For example:In this case, the test4 link is created when a user clicks on a#anchor1.The test4 link does not have the click() handler associated with it, even though it has class="myclass".Basically, I would like to write the click() handler once and have it apply to both content present at page load, and content brought in later via AJAX / DHTML. Any idea how I can fix this? I am adding a new answer to reflect changes in later jQuery releases. The .live() method is deprecated as of jQuery 1.7. From http://api.jquery.com/live/For jQuery 1.7+ you can attach an event handler to a parent element using .on(), and pass the a selector combined with 'myclass' as an argument.See http://api.jquery.com/on/So instead of...You can write...This will work for all a tags with 'myclass' in the body, whether already present or dynamically added later.The body tag is used here as the example had no closer static surrounding tag, but any parent tag that exists when the .on method call occurs will work. For instance a ul tag for a list which will have dynamic elements added would look like this:As long as the ul tag exists this will work (no li elements need exist yet).Sometimes doing this (the top-voted answer) is not always enough:This can be an issue because of the order event handlers are fired. If you find yourself doing this, but it is causing issues because of the order in which it is handled.. You can always wrap that into a function, that when called "refreshes" the listener.For example:Because it is a function, whenever I set up my listener this way, I typically call it on document ready:Then, whenever you add some dynamically added element, call that method again:Hopefully this helps!Regards,After jQuery 1.7 the preferred methods are .on() and .off() Sean's answer shows an example.If you're adding a pile of anchors to the DOM, look into event delegation instead. Here's a simple example:Binds a handler to an event (like click) for all current - and future - matched element. Can also bind custom events.link textYou can bind a single click event to a page for all elements, no matter if they are already on that page or if they will arrive at some future time, like that:Been using it for a while. Works like a charm.In jQuery 1.7 and later, it is recommended to use .on() in place of bind or any other event delegation method, but .bind() still works.If your on jQuery 1.3+ then use .live()You want to use the live() function. See the docs.For example:

JSLint says「missing radix parameter」

Mike Vierwind

[JSLint says「missing radix parameter」](https://stackoverflow.com/questions/7818903/jslint-says-missing-radix-parameter)

I ran  JSLint on this JavaScript code and it said: This is the code in question:What is wrong here?

2011-10-19 09:04:00Z

I ran  JSLint on this JavaScript code and it said: This is the code in question:What is wrong here?It always a good practice to pass radix with parseInt - For decimal -If the radix parameter is omitted, JavaScript assumes the following:  (Reference)To avoid this warning, instead of using:You may replace it by:

Note that parseInt and Number have different behaviors, but in some cases, one can replace the other.I'm not properly answering the question but, I think it makes sense to clear why we should specify the radix. On MDN documentation we can read that:If radix is undefined or 0 (or absent), JavaScript assumes the following:Source: MDN parseInt()You can turn off this rule if you wish to skip that test.Insert: Under the "rules" property in the tslint.json file.It's not recommended to do that if you don't understand this exception.Adding the following on top of your JS file will tell JSHint to supress the radix warning:See also: http://jshint.com/docs/#optionsI solved it with just using the +foo, to convert the string.Keep in mind it's not great for readability (dirty fix).You can also simply add this line right above your parseInt line: This will disable eslint check for the next line. Use this if you only need to skip one or two lines.Just put an empty string in the radix place, because parseInt() take two arguments:parseInt(string, radix);string

The value to parse. If the string argument is not a string, then it is converted to a string (using the ToString abstract operation). Leading whitespace in the string argument is ignored.radix

An integer between 2 and 36 that represents the radix (the base in mathematical numeral systems) of the above-mentioned string. Specify 10 for the decimal numeral system commonly used by humans. Always specify this parameter to eliminate reader confusion and to guarantee predictable behavior. Different implementations produce different results when a radix is not specified, usually defaulting the value to 10.imageIndex = parseInt(id.substring(id.length - 1))-1;

imageIndex = parseInt(id.substring(id.length - 1), '')-1;Simply add your custom rule in .eslintrc which looks like that 

"radix": "off"

and you will be free of this eslint unnesesery warning.

This is for the eslint linter.Prior to ECMAScript 5, parseInt() also autodetected octal literals, which caused problems because many developers assumed a leading 0 would be ignored.So Instead of : Do this:ReferenceInstead of calling the substring function you could use .slice()Here, -1 in slice indicates that to start slice from the last index.Thanks.

How to check if a string is a valid JSON string in JavaScript without using Try/Catch

Chi Chan

[How to check if a string is a valid JSON string in JavaScript without using Try/Catch](https://stackoverflow.com/questions/3710204/how-to-check-if-a-string-is-a-valid-json-string-in-javascript-without-using-try)

Something like:The solution should not contain try/catch. Some of us turn on "break on all errors" and they don't like the debugger breaking on those invalid JSON strings.

2010-09-14 15:07:50Z

Something like:The solution should not contain try/catch. Some of us turn on "break on all errors" and they don't like the debugger breaking on those invalid JSON strings.A comment first. The question was about not using try/catch.

If you do not mind to use it, read the answer below.

Here we just check a JSON string using a regexp, and it will work in most cases, not all cases.Have a look around the line 450 in https://github.com/douglascrockford/JSON-js/blob/master/json2.jsThere is a regexp that check for a valid JSON, something like:EDIT: The new version of json2.js makes a more advanced parsing than above, but still based on a regexp replace ( from the comment of @Mrchief )Use a JSON parser like JSON.parse:I know i'm 3 years late to this question, but I felt like chiming in.While Gumbo's solution works great, it doesn't handle a few cases where no exception is raised for JSON.parse({something that isn't JSON})I also prefer to return the parsed JSON at the same time, so the calling code doesn't have to call JSON.parse(jsonString) a second time.This seems to work well for my needs:Usage: isJSON({}) will be false, isJSON('{}') will be true.To check if something is an Array or Object (parsed JSON):Usage: isAO({}) will be true, isAO('{}') will be false.Here my working code:I used a really simple method to check a string how it's a valid JSON or not.Result with a valid JSON string:Result with a simple string;Result with an object:Result with null input:The last one returns false because the type of null variables is object.This works everytime. :)In prototypeJS, we have method isJSON. You can try that. Even json might help. From Prototype framework String.isJSON definition hereso this is the version that can be used passing a string objectI used JQuery to parse JSON strings and I used trycatch statement to handle exceptions, but throwing exceptions for un-parsable strings slowed down my code, so I used simple Regex to check the string if it is a possible JSON string or not without going feather by checking it's syntax, then I used the regular way by parsing the string using JQuery :Maybe it will useful:output:IE7: string,object,string,stringCHROME: object,object,string,stringI think I know why you want to avoid that. But maybe try & catch !== try & catch. ;o) This came into my mind:So you may also dirty clip to the JSON object, like:As this as encapsuled as possible, it may not break on error.Here is the typescript version too:I infer from the opening comment that the use case is delineating whether a response is HTML or JSON. In which case, when you do receive JSON, you probably ought to be parsing it and handling invalid JSON at some point in your code anyway. Aside from anything, I imagine you would like to be informed by your browser should JSON be expected but invalid JSON received (as will users by proxy of some meaningful error message)!Doing a full regex for JSON is unnecessary therefore (as it would be - in my experience - for most use-cases).  You would probably be better off using something like the below:that should save you having to exception handle valid non-JSON code and take care of duff json at the same time.hope this works for you tooIf there are errors, return false. If there are no errors, return json dataYou can use the javascript eval() function to verify if it's valid.e.g.Alternatively, you can use JSON.parse function from json.org:Hope this helps.WARNING: eval() is dangerous if someone adds malicious JS code, since it will execute it. Make sure the JSON String is trustworthy, i.e. you got it from a trusted source.Edit For my 1st solution, it's recommended to do this.To guarantee json-ness. If the jsonString isn't pure JSON, the eval will throw an exception.Oh you can definitely use try catch to check whether its or not a valid JSONTested on Firfox Quantom 60.0.1use function inside a function to get the JSON tested and use that output to validate the string. hears an example.The function IsJsonString(str), that is using JSON.parse(str), doesn't work in my case.

I tried to validate json output from GraphiQL it always return false. Lucky me, isJSON works better:Sample output:For people who like the .Net convention of "try" functions that return a boolean and handle a byref param containing the result. If you don't need the out parameter you can omit it and just use the return value.StringTests.jsStringUtils.jsObjectUtils.js

What's the easiest way to call a function every 5 seconds in jQuery? [duplicate]

ensnare

[What's the easiest way to call a function every 5 seconds in jQuery? [duplicate]](https://stackoverflow.com/questions/2170923/whats-the-easiest-way-to-call-a-function-every-5-seconds-in-jquery)

JQuery, how to call a function every 5 seconds.I'm looking for a way to automate the changing of images in a slideshow.  I'd rather not install any other 3rd party plugins if possible.

2010-01-31 07:31:35Z

JQuery, how to call a function every 5 seconds.I'm looking for a way to automate the changing of images in a slideshow.  I'd rather not install any other 3rd party plugins if possible.You don't need jquery for this, in plain javascript, the following will work!To stop the loop you can useyou could register an interval on the page using setInterval, ie:Just a little tip for the first answer. If your function is already defined, reference the function but don't call it!!! So don't put any parentheses after the function name. Just like:A good exemple where to subscribe a setInterval(), and use a clearInterval() to stop the forever loop:call this line to stop the loop:The functions mentioned above execute no matter if it has completed in previous invocation or not, this one runs after every x seconds once the execution is completeBoth setInterval and setTimeout can work for you (as @Doug Neiner and @John Boker wrote both now point to setInterval).

See here for some more explanation about both to see which suites you most and how to stop each of them.you can use window.setInterval and time must to be define in miliseconds, in below case the function will call after every single second (1000 miliseconds)

How do I replace all line breaks in a string with <br /> tags?

Jin Yong

[How do I replace all line breaks in a string with <br /> tags?](https://stackoverflow.com/questions/784539/how-do-i-replace-all-line-breaks-in-a-string-with-br-tags)

How can I read the line break from a value with JavaScript and replace all the line breaks with <br /> tags?Example:A variable passed from PHP as below:I would like my result to look something like this after the JavaScript converts it:

2009-04-24 04:38:11Z

How can I read the line break from a value with JavaScript and replace all the line breaks with <br /> tags?Example:A variable passed from PHP as below:I would like my result to look something like this after the JavaScript converts it:This will turn all returns into HTMLIn case you wonder what ?: means.

It is called a non-capturing group. It means that group of regex within the parentheses won't be saved in memory to be referenced later.

You can check out these threads for more information:

https://stackoverflow.com/a/11530881/5042169

https://stackoverflow.com/a/36524555/5042169If your concern is just displaying linebreaks, you could do this with CSS.HTMLCSSjsfiddle

https://jsfiddle.net/yk1angkz/125/Note: Pay attention to code formatting and indenting, since white-space: pre-wrap will display all whitespaces (except for the last newline after the text, see fiddle).Without regex:This works for input coming from a textareaIf the accepted answer isn't working right for you then you might try.It worked for me.Regardless of the system:It is also important to encode the rest of the text in order to protect from possible script injection attacksThis worked for me when value came from a TextBox:For those of you who just want to allow max. 2 <br> in a row, you can use this:First line: Search for \n OR \r\n where at least 2 of them are in a row, e.g. \n\n\n\n. Then replace it with 2 br Second line: Search for all single \r\n or \n and replace them with <br>if you send the variable from PHP, you can obtain it with this before sending:str = str.replace(/\n/g, '<br>') str = str.replace(/\n*\n/g, '<br>') Not answering the specific question, but I am sure this will help someone...If you have output from PHP that you want to render on a web page using JavaScript (perhaps the result of an Ajax request), and you just want to retain white space and line breaks, consider just enclosing the text inside a <pre></pre> block:Try

Get difference between 2 dates in JavaScript? [duplicate]

chobo2

[Get difference between 2 dates in JavaScript? [duplicate]](https://stackoverflow.com/questions/3224834/get-difference-between-2-dates-in-javascript)

How do I get the difference between 2 dates in full days (I don't want any fractions of a day)I tried the above but this did not work.

2010-07-11 22:19:54Z

How do I get the difference between 2 dates in full days (I don't want any fractions of a day)I tried the above but this did not work.Here is one way:Observe that we need to enclose the date in quotes. The rest of the code gets the time difference in milliseconds and then divides to get the number of days. Date expects mm/dd/yyyy format.... since dates naturally have time-zone information, which can span regions with different day light savings adjustmentsPrevious answers to this question don't account for cases where the two dates in question span a daylight saving time (DST) change. The date on which the DST change happens will have a duration in milliseconds which is != 1000*60*60*24, so the typical calculation will fail.You can work around this by first normalizing the two dates to UTC, and then calculating the difference between those two UTC dates.Now, the solution can be written as,This works because UTC time never observes DST. See Does UTC observe daylight saving time?p.s. After discussing some of the comments on this answer, once you've understood the issues with javascript dates that span a DST boundary, there is likely more than just one way to solve it. What I provided above is a simple (and tested) solution. I'd be interested to know if there is a simple arithmetic/math based solution instead of having to instantiate the two new Date objects. That could potentially be faster.Here is a solution using moment.js:I used your original input values, but you didn't specify the format so I assumed the first value was July 11th.  If it was intended to be November 7th, then adjust the format to D/M/YYYY instead.I tried lots of ways, and found that using datepicker was the best, but the date format causes problems with JavaScript....So here's my answer and can be run out of the box.a Fiddle can be seen here DEMOThis is the code to subtract one date from another. This example converts the dates to objects as the getTime() function won't work unless it's an Date object.

JavaScript variable number of arguments to function

Timo

[JavaScript variable number of arguments to function](https://stackoverflow.com/questions/2141520/javascript-variable-number-of-arguments-to-function)

Is there a way to allow "unlimited" vars for a function in JavaScript?Example:

2010-01-26 18:06:29Z

Is there a way to allow "unlimited" vars for a function in JavaScript?Example:Sure, just use the arguments object.In (most) recent browsers, you can accept variable number of arguments with this syntax:Here's a small example:Documentation and more examples here: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parametersAnother option is to pass in your arguments in a context object.and use it like thisThis has the advantage that you can add as many named arguments as you want, and the function can use them (or not) as it sees fit.I agree with Ken's answer as being the most dynamic and I like to take it a step further.  If it's a function that you call multiple times with different arguments - I use Ken's design but then add default values:This way, if you have many parameters but don't necessarily need to set them with each call to the function, you can simply specify the non-defaults.  For the extend method, you can use jQuery's extend method ($.extend()), craft your own or use the following:This will merge the context object with the defaults and fill in any undefined values in your object with the defaults.  Yes, just like this : It is preferable to use rest parameter syntax as Ramast pointed out. I just want to add some nice property of the ...args argumentAs mentioned already, you can use the arguments object to retrieve a variable number of function parameters.If you want to call another function with the same arguments, use apply. You can even add or remove arguments by converting arguments to an array. For example, this function inserts some text before logging to console:Although I generally agree that the named arguments approach is useful and flexible (unless you care about the order, in which case arguments is easiest), I do have concerns about the cost of the mbeasley approach (using defaults and extends). This is an extreme amount of cost to take for pulling default values. First, the defaults are defined inside the function, so they are repopulated on every call. Second, you can easily read out the named values and set the defaults at the same time using ||. There is no need to create and merge yet another new object to get this information.This is roughly the same amount of code (maybe slightly more), but should be a fraction of the runtime cost.While @roufamatic did show use of the arguments keyword and @Ken showed a great example of an object for usage I feel neither truly addressed what is going on in this instance and may confuse future readers or instill a bad practice as not explicitly stating a function/method is intended to take a variable amount of arguments/parameters.  When another developer is looking through your code is it very easy to assume this function does not take parameters. Especially if that developer is not privy to the arguments keyword. Because of this it is a good idea to follow a style guideline and be consistent. I will be using Google's for all examples.Let's explicitly state the same function has variable parameters:There may be times when an object is needed as it is the only approved and considered best practice method of an data map. Associative arrays are frowned upon and discouraged.SIDENOTE: The arguments keyword actually returns back an object using numbers as the key. The prototypal inheritance is also the object family. See end of answer for proper array usage in JSIn this case we can explicitly state this also. Note: this naming convention is not provided by Google but is an example of explicit declaration of a param's type. This is important if you are looking to create a more strict typed pattern in your code.This depends on your function's and program's needs. If for instance you are simply looking to return a value base on an iterative process across all arguments passed then most certainly stick with the arguments keyword. If you need definition to your arguments and mapping of the data then the object method is the way to go. Let's look at two examples and then we're done!As mentioned up top of the answer the arguments keyword actually returns an object. Because of this any method you want to use for an array will have to be called. An example of this:To avoid this use the rest parameter:Use the arguments object when inside the function to have access to all arguments passed in.Be aware that passing an Object with named properties as Ken suggested adds the cost of allocating and releasing the temporary object to every call. Passing normal arguments by value or reference will generally be the most efficient. For many applications though the performance is not critical but for some it can be.

Detect if an element is visible with jQuery [duplicate]

TheCarver

[Detect if an element is visible with jQuery [duplicate]](https://stackoverflow.com/questions/8774089/detect-if-an-element-is-visible-with-jquery)

Using .fadeIn() and .fadeOut(), I have been hiding/showing an element on my page, but with two buttons, one for hide and one for show. I now want to have one button to toggle both.My HTML / JavaScript as it is:My HTML / JavaScript as I would like to have it:How do I detect if the element is visible or not?

2012-01-07 23:44:02Z

Using .fadeIn() and .fadeOut(), I have been hiding/showing an element on my page, but with two buttons, one for hide and one for show. I now want to have one button to toggle both.My HTML / JavaScript as it is:My HTML / JavaScript as I would like to have it:How do I detect if the element is visible or not?You're looking for:Although you should probably change your selector to use jQuery considering you're using it in other places anyway:It is important to note that if any one of a target element's parent elements are hidden, then .is(':visible') on the child will return false (which makes sense).:visible has had a reputation for being quite a slow selector as it has to traverse up the DOM tree inspecting a bunch of elements. There's good news for jQuery 3, however, as this post explains (Ctrl + F for :visible):Expanding even further to your specific use case, there is a built in jQuery function called $.fadeToggle():There's no need, just use fadeToggle() on the element:Here's a demo.

How can I run multiple npm scripts in parallel?

André Pena

[How can I run multiple npm scripts in parallel?](https://stackoverflow.com/questions/30950032/how-can-i-run-multiple-npm-scripts-in-parallel)

In my package.json I have these two scripts:I have to run these 2 scripts in parallel everytime I start developing in Node.js. The first thing I thought of was adding a third script like this:... but that will wait for start-watch to finish before running wp-server.How can I run these in parallel? Please keep in mind that I need to see the output of these commands. Also, if your solution involves a build tool, I'd rather use gulp instead of grunt because I already use it in another project.

2015-06-20 03:42:47Z

In my package.json I have these two scripts:I have to run these 2 scripts in parallel everytime I start developing in Node.js. The first thing I thought of was adding a third script like this:... but that will wait for start-watch to finish before running wp-server.How can I run these in parallel? Please keep in mind that I need to see the output of these commands. Also, if your solution involves a build tool, I'd rather use gulp instead of grunt because I already use it in another project.Use a package called concurrently.npm i concurrently --save-devThen setup your npm run dev task as so:If you're using an UNIX-like environment, just use & as the separator: Otherwise if you're interested on a cross-platform solution, you could use npm-run-all  module:From windows cmd you can use start:Every command launched this way starts in its own window.You should use npm-run-all (or concurrently, parallelshell), because it has more control over starting and killing commands. The operators &, | are bad ideas because you'll need to manually stop it after all tests are finished.This is an example for protractor testing through npm:-p = Run commands in parallel.-r = Kill all commands when one of them finishes with an exit code of zero.Running npm run test will start Selenium driver, start http server (to serve you files) and run protractor tests. Once all tests are finished, it will close the http server and the selenium driver.A better solution is to use &You can use one & for parallel run scriptReference linkI have a crossplatform solution without any additional modules. I was looking for something like a try catch block I could use both in the cmd.exe and in the bash. The solution is command1 || command2 which seems to work in both enviroments same. So the solution for the OP is:Then simple npm start (and npm run dev) will work on all platforms!I've checked almost all solutions from above and only with npm-run-all I was able to solve all problems. Main advantage over all other solution is an ability to run script with arguments.This allows me to run command with arguments like npm run test:watch -- Something.EDIT:There is one more useful option for npm-run-all:Add -r to your npm-run-all script to kill all processes when one finished with code 0. This is especially useful when you run a HTTP server and another script that use the server.If you replace the double ampersand with a single ampersand, the scripts will run concurrently. In this case, I'd say the best bet If this script is for a private module intended to run only on *nix-based machines, you can use the control operator for forking processes, which looks like this: &An example of doing this in a partial package.json file:You'd then execute them both in parallel via npm run serve-bundle. You can enhance the scripts to output the pids of the forked process to a file like so:Google something like bash control operator for forking to learn more on how it works. I've also provided some further context regarding leveraging Unix techniques in Node projects below:If you're not on Windows, Unix tools/techniques often work well to achieve something with Node scripts because: Modules for system tasks in Nodeland are also often abstractions or approximations of Unix tools, from fs to streams.edit:You need to have npm-run-all installed beforehand. Also check this page for other usage scenarios.Another option to run multiple Node scripts is with a single Node script, which can fork many others. Forking is supported natively in Node, so it adds no dependencies and is cross-platform.This would just run the scripts as-is and assume they're located in the parent script's directory.This would run the scripts with arguments and configured by the many available options.Forking also has the added benefit that the parent script can receive events from the forked child processes as well as send back. A common example is for the parent script to kill its forked children.For more available events and methods see the ChildProcess documentationI ran into problems with & and |, which exit statuses and error throwing, respectively.Other solutions want to run any task with a given name, like npm-run-all, which wasn't my use case.So I created npm-run-parallel that runs npm scripts asynchronously and reports back when they're done.So, for your scripts, it'd be:npm-run-parallel wp-server start-watchIn my case I have two projects, one was UI and the other was API, and both have their own script in their respective package.json files.So, here is what I did.Simple node script to get you going without too much hassle. Using readline to combine outputs so the lines don't get mangled.I have been using npm-run-all for some time, but I never got along with it, because the output of the command in watch mode doesn't work well together. For example, if I start create-react-app and jest in watch mode, I will only be able to see the output from the last command I ran. So most of the time, I was running all my commands manually...This is why, I implement my own lib, run-screen. It still very young project (from yesterday :p ) but it might be worth to look at it, in your case it would be:Then you press the numeric key 1 to see the output of wp-server and press 0 to see the output of start-watch.My solution is similar to Piittis', though I had some problems using Windows. So I had to validate for win32.

jQuery Tips and Tricks

clawr

[jQuery Tips and Tricks](https://stackoverflow.com/questions/182630/jquery-tips-and-tricks)

2008-12-20 03:08:59Z

Creating an HTML Element and keeping a reference

Checking if an element exists

Writing your own selectorsjQuery's data() method is useful and not well known. It allows you to bind data to DOM elements without modifying the DOM.You can nest filters (as nickf showed here).I'm really not a fan of the $(document).ready(fn) shortcut. Sure it cuts down on the code but it also cuts way down on the readability of the code. When you see $(document).ready(...), you know what you're looking at. $(...) is used in far too many other ways to immediately make sense.If you have multiple frameworks you can use jQuery.noConflict(); as you say, but you can also assign a different variable for it like this:Very useful if you have several frameworks that can be boiled down to $x(...)-style calls.Ooooh, let's not forget jQuery metadata! The data() function is great, but it has to be populated via jQuery calls.Instead of breaking W3C compliance with custom element attributes such as:Use metadata instead:Set an event handler for any element that matches a selector, even if it gets added to the DOM after the initial page load:This allows you to load content via ajax, or add them via javascript and have the event handlers get set up properly for those elements automatically.Likewise, to stop the live event handling:These live event handlers have a few limitations compared to regular events, but they work great for the majority of cases.For more info see the jQuery Documentation.UPDATE: live() and die() are deprecated in jQuery 1.7.   See http://api.jquery.com/on/ and http://api.jquery.com/off/ for similar replacement functionality.UPDATE2: live() has been long deprecated, even before jQuery 1.7. For versions jQuery 1.4.2+ before 1.7 use delegate() and undelegate(). The live() example ($('button.someClass').live('click', someFunction);) can be rewritten using delegate() like that: $(document).delegate('button.someClass', 'click', someFunction);.Replace anonymous functions with named functions. This really supercedes the jQuery context, but it comes into play more it seems like when using jQuery, due to its reliance on callback functions. The problems I have with inline anonymous functions, are that they are harder to debug (much easier to look at a callstack with distinctly-named functions, instead 6 levels of "anonymous"), and also the fact that multiple anonymous functions within the same jQuery-chain can become unwieldy to read and/or maintain. Additionally, anonymous functions are typically not re-used; on the other hand, declaring named functions encourages me to write code that is more likely to be re-used.An illustration; instead of:I prefer:Defining properties at element creationIn jQuery 1.4 you can use an object literal to define properties when you create an element:... You can even add styles:Here's a link to the documentation.instead of using a different alias for the jQuery object (when using noConflict), I always write my jQuery code by wrapping it all in a closure. This can be done in the document.ready function:alternatively you can do it like this:I find this to be the most portable. I've been working on a site which uses both Prototype AND jQuery simultaneously and these techniques have avoided all conflicts.jQuery has .index but it is a pain to use, as you need the list of elements, and pass in the element you want the index of:The following is much easier:If you want to know the index of an element within a set (e.g. list items) within a unordered list:Shorthand for the ready-eventThe explicit and verbose way:The shorthand:On the core jQuery function, specify the context parameter in addition to the selector parameter.  Specifying the context parameter allows jQuery to start from a deeper branch in the DOM, rather than from the DOM root.  Given a large enough DOM, specifying the context parameter should translate to performance gains.Example: Finds all inputs of type radio within the first form in the document.Reference: http://docs.jquery.com/Core/jQuery#expressioncontextNot really jQuery only but I made a nice little bridge for jQuery and MS AJAX:It's really nice if you're doing lots of ASP.NET AJAX, since jQuery is supported by MS now having a nice bridge means it's really easy to do jQuery operations:So the above example isn't great, but if you're writing ASP.NET AJAX server controls, makes it easy to have jQuery inside your client-side control implementation.Optimize performance of complex selectorsQuery a subset of the DOM when using complex selectors drastically improves performance:Speaking of Tips and Tricks and as well some tutorials. I found these series of tutorials (「jQuery for Absolute Beginners」Video Series) by Jeffery Way are VERY HELPFUL. It targets those developers who are new to jQuery. He shows how to create many cool stuff with jQuery, like animation, Creating and Removing Elements and more...I learned a lot from it. He shows how it's easy to use jQuery.

Now I love it and i can read and understand any jQuery script even if it's complex.Here is one example I like "Resizing Text"1- jQuery...2- CSS Styling... 2- HTML... Highly recommend these tutorials...  http://blog.themeforest.net/screencasts/jquery-for-absolute-beginners-video-series/Asynchronous each() functionIf you have really complex documents where running the jquery each() function locks up the browser during the iteration, and/or Internet Explorer pops up the 'do you want to continue running this script' message, this solution will save the day.The first way you can use it is just like each():An optional 2nd parameter lets you specify the speed/delay in between iterations which may be useful for animations (the following example will wait 1 second in between iterations):Remember that since this works asynchronously, you can't rely on the iterations to be complete before the next line of code, for example:I wrote this for an internal project, and while I am sure it can be improved, it worked for what we needed, so hope some of you find it useful. Thanks -Syntactic shorthand-sugar-thing--Cache an object collection and execute commands on one line:Instead of:I do:A somewhat "real" use case could be something along these lines:I like declare a $this variable at the beginning of anonymous functions, so I know I can reference a jQueried this.Like so:Saving a jQuery object to a variable lets you reuse it without having to search back through the DOM to find it.(As @Louis suggested, I now use $ to indicate that a variable holds a jQuery object.)As a more complex example, say you've got a list of foods in a store, and you want to show only the ones that match a user's criteria. You have a form with checkboxes, each one containing a criteria. The checkboxes have names like organic and lowfat, and the products have corresponding classes - .organic, etc.Now you can keep working with that jQuery object. Every time a checkbox is clicked (to check or uncheck), start from the master list of foods and filter down based on the checked boxes:It seems that most of the interesting and important tips have been already mentioned, so this one is just a little addition.The little tip is the jQuery.each(object, callback) function. Everybody is probably using the jQuery.each(callback) function to iterate over the jQuery object itself because it is natural. The jQuery.each(object, callback) utility function iterates over objects and arrays. For a long time, I somehow did not see what it could be for apart from a different syntax (I don’t mind writing all fashioned loops), and I’m a bit ashamed that I realized its main strength only recently.The thing is that since the body of the loop in jQuery.each(object, callback) is a function, you get a new scope every time in the loop which is especially convenient when you create closures in the loop.In other words, a typical common mistake is to do something like:Now, when you invoke the functions in the functions array, you will get three times alert with the content undefined which is most likely not what you wanted. The problem is that there is just one variable i, and all three closures refer to it. When the loop finishes, the final value of i is 3, and someArrary[3] is undefined. You could work around it by calling another function which would create the closure for you. Or you use the jQuery utility which it will basically do it for you:Now, when you invoke the functions you get three alerts with the content 1, 2 and 3 as expected.In general, it is nothing you could not do yourself, but it’s nice to have.Access jQuery functions as you would an arrayAdd/remove a class based on a boolean...Is the shorter version of...Not that many use-cases for this. Never the less; I think it's neat :)UpdateJust in case you are not the comment-reading-type, ThiefMaster points out that the toggleClass accepts a boolean value, which determines if a class should be added or removed. So as far as my example code above goes, this would be the best approach...Update:Just include this script on the site and you’ll get a Firebug console that pops up for debugging in any browser. Not quite as full featured but it’s still pretty helpful! Remember to remove it when you are done.Check out this link:From CSS TricksUpdate:

I found something new; its the the JQuery Hotbox.JQuery HotboxGoogle hosts several JavaScript libraries on Google Code. Loading it from there saves bandwidth and it loads quick cos it has already been cached.OrYou can also use this to tell when an image is fully loaded.The "console.info" of firebug, which you can use to dump messages and variables to the screen without having to use alert boxes. "console.time" allows you to easily set up a timer to wrap a bunch of code and see how long it takes.Use filtering methods over pseudo selectors when possible so jQuery can use querySelectorAll (which is much faster than sizzle). Consider this selector:The same selection can be made using:Which is must faster because the initial selection of '.class' is QSA compatibleRemove elements from a collection and preserve chainabilityConsider the following:The filter() function removes elements from the jQuery object. In this case: All li-elements not containing the text "One" or "Two" will be removed.Changing the type of an input elementI ran into this issue when I was trying to change the type of an input element already attached to the DOM. You have to clone the existing element, insert it before the old element, and then delete the old element. Otherwise it doesn't work:Judicious use of third-party jQuery scripts, such as form field validation or url parsing. It's worth seeing what's about so you'll know when you next encounter a JavaScript requirement.Line-breaks and chainabilityWhen chaining multiple calls on collections...You can increase readability with linebreaks. Like this:Use .stop(true,true) when triggering an animation prevents it from repeating the animation. This is especially helpful for rollover animations.Using self-executing anonymous functions in a method call such as .append() to iterate through something. I.E.:I use this to iterate through things that would be large and uncomfortable to break out of my chaining to build.HTML5 data attributes support, on steroids!The data function has been mentioned before. With it, you are able to associate data with DOM elements.Recently the jQuery team has added support for HTML5 custom data-* attributes. And as if that wasn't enough; they've force-fed the data function with steroids, which means that you are able to store complex objects in the form of JSON, directly in your markup.

The HTML:

The JavaScript:

How to initialize an array's length in JavaScript?

Michael Martin-Smucker

[How to initialize an array's length in JavaScript?](https://stackoverflow.com/questions/4852017/how-to-initialize-an-arrays-length-in-javascript)

Most of the tutorials that I've read on arrays in JavaScript (including w3schools and devguru) suggest that you can initialize an array with a certain length by passing an integer to the Array constructor using the var test = new Array(4); syntax.After using this syntax liberally in my js files, I ran one of the files through jsLint, and it freaked out:After reading through jsLint's explanation of its behavior, it looks like jsLint doesn't really like the new Array() syntax, and instead prefers [] when declaring arrays.So I have a couple questions:First, why?  Am I running any risk by using the new Array() syntax instead?  Are there browser incompatibilities that I should be aware of?And second, if I switch to the square bracket syntax, is there any way to declare an array and set its length all on one line, or do I have to do something like this:

2011-01-31 14:29:07Z

Most of the tutorials that I've read on arrays in JavaScript (including w3schools and devguru) suggest that you can initialize an array with a certain length by passing an integer to the Array constructor using the var test = new Array(4); syntax.After using this syntax liberally in my js files, I ran one of the files through jsLint, and it freaked out:After reading through jsLint's explanation of its behavior, it looks like jsLint doesn't really like the new Array() syntax, and instead prefers [] when declaring arrays.So I have a couple questions:First, why?  Am I running any risk by using the new Array() syntax instead?  Are there browser incompatibilities that I should be aware of?And second, if I switch to the square bracket syntax, is there any way to declare an array and set its length all on one line, or do I have to do something like this:Regarding your comment: In JS you don't need to initialize the length of the array. It grows dynamically. You can just store the length in some variable, e.g.With ES2015 .fill() you can now simply do:Which is a lot more concise than Array.apply(0, new Array(n)).map(i => value)It is possible to drop the 0 in .fill() and run without arguments, which will fill the array with undefined. (However, this will fail in Typescript)OR  Note: you can't loop empty slots Array(4).forEach( (_,i) => {} )   OR  ( typescript safe )ORClassic method using a function ( works in any browser ) When creating a 2D array with the fill intuitively should create new instances. But what actually going to happened is the same array will be stored as a reference.Solution So a 3x2 Array will look something like this: The shortest:ES6 introduces Array.from which lets you create an Array from any "array-like" or iterables objects:In this case {length: 10} represents the minimal definition of an "array-like" object: an empty object with just a length property defined.Array.from allows for a second argument to map over the resulting array. This will initialize the length property to 4:I'm surprised there hasn't been a functional solution suggested that allows you to set the length in one line. The following is based on UnderscoreJS:For reasons mentioned above, I'd avoid doing this unless I wanted to initialize the array to a specific value. It's interesting to note there are other libraries that implement range including Lo-dash and Lazy, which may have different performance characteristics.Please people don't give up your old habits just yet.

There is a large difference in speed between allocating memory once then working with the entries in that array (as of old), and allocating it many times as an array grows (which is inevitably what the system does under the hood with other suggested methods).None of this matters of course, until you want to do something cool with larger arrays. Then it does.Seeing as there still seems to be no option in JS at the moment to set the initial capacity of an array, I use the following...There are tradeoffs involved:But if it fits with what you're doing there can be a payoff.

Informal timing putsat pretty speedy (about 50ms for the 10000 given that with n=1000000 it took about 5 seconds), andat well over a minute (about 90 sec for the 10000 on the same chrome console, or about 2000 times slower).

That won't just be the allocation, but also the 10000 pushes, for loop, etc..(this was probably better as a comment, but got too long)So, after reading this I was curious if pre-allocating was actually faster, because in theory it should be. However, this blog gave some tips advising against it http://www.html5rocks.com/en/tutorials/speed/v8/.So still being unsure, I put it to the test. And as it turns out it seems to in fact be slower.This code yields the following after a few casual runs:Here is another solution The first argument of apply() is a this object binding, which we don't care about here, so we set it to null. Array.apply(..) is calling the Array(..) function and spreading out the { length: 3 } object value as its arguments.The array constructor has an ambiguous syntax, and JSLint just hurts your feelings after all.Also, your example code is broken, the second var statement will raise a SyntaxError. You're setting the property length of the array test, so there's no need for another var.As far as your options go, array.length is the only "clean" one. Question is, why do you need to set the size in the first place? Try to refactor your code to get rid of that dependency. Assuming that Array's length is constant. In Javascript, This is what we do:const intialArray = new Array(specify the value); As explained above, using new Array(size) is somewhat dangerous. Instead of using it directly, place it inside an "array creator function". You can easily make sure that this function is bug-free and you avoid the danger of calling new Array(size) directly. Also, you can give it an optional default initial value. This createArray function does exactly that:In most answers it is recommended to fill the array because otherwise "you can't iterate over it", but this is not true. You can iterate an empty array, just not with forEach. While loops, for of loops and for i loops work fine. Does not work.These work:Check this fiddle with the above examples.Also angulars *ngFor works fine with an empty array:You can set the array length by using array.length = youValueSo it would beThe reason you shouldn't use new Array is demonstrated by this code:Some other code could mess with the Array variable. I know it's a bit far fetched that anyone would write such code, but still...Also, as Felix King said, the interface is a little inconsistent, and could lead to some very difficult-to-track-down bugs.If you wanted an array with length = x, filled with undefined (as new Array(x) would do), you could do this:

Complex nesting of partials and templates

PhillipKregg

[Complex nesting of partials and templates](https://stackoverflow.com/questions/12863663/complex-nesting-of-partials-and-templates)

My question involves how to go about dealing with complex nesting of templates (also called partials) in an AngularJS application.The best way to describe my situation is with an image I created:As you can see this has the potential to be a fairly complex application with lots of nested models.The application is single-page, so it loads an index.html that contains a div element in the DOM with the ng-view attribute.For circle 1, You see that there is a Primary navigation that loads the appropriate templates into the ng-view.  I'm doing this by passing $routeParams to the main app module.  Here is an example of what's in my app:In circle 2, the template that is loaded into the ng-view has an additional sub-navigation.  This sub-nav then needs to load templates into the area below it - but since ng-view is already being used, I'm not sure how to go about doing this.I know that I can include additional templates within the 1st template, but these templates are all going to be pretty complex.  I would like to keep all the templates separate in order to make the application easier to update and not have a dependency on the parent template having to be loaded in order to access its children.In circle 3, you can see things get even more complex.  There is the potential that the sub-navigation templates will have a 2nd sub-navigation that will need to load its own templates as well into the area in circle 4How does one go about structuring an AngularJS app to deal with such complex nesting of templates while keeping them all separate from one another?

2012-10-12 16:49:09Z

My question involves how to go about dealing with complex nesting of templates (also called partials) in an AngularJS application.The best way to describe my situation is with an image I created:As you can see this has the potential to be a fairly complex application with lots of nested models.The application is single-page, so it loads an index.html that contains a div element in the DOM with the ng-view attribute.For circle 1, You see that there is a Primary navigation that loads the appropriate templates into the ng-view.  I'm doing this by passing $routeParams to the main app module.  Here is an example of what's in my app:In circle 2, the template that is loaded into the ng-view has an additional sub-navigation.  This sub-nav then needs to load templates into the area below it - but since ng-view is already being used, I'm not sure how to go about doing this.I know that I can include additional templates within the 1st template, but these templates are all going to be pretty complex.  I would like to keep all the templates separate in order to make the application easier to update and not have a dependency on the parent template having to be loaded in order to access its children.In circle 3, you can see things get even more complex.  There is the potential that the sub-navigation templates will have a 2nd sub-navigation that will need to load its own templates as well into the area in circle 4How does one go about structuring an AngularJS app to deal with such complex nesting of templates while keeping them all separate from one another?Well, since you can currently only have one ngView directive... I use nested directive controls. This allows you to set up templating and inherit (or isolate) scopes among them. Outside of that I use ng-switch or even just ng-show to choose which controls I'm displaying based on what's coming in from $routeParams.EDIT Here's some example pseudo-code to give you an idea of what I'm talking about. With a nested sub navigation.Here's the main app pageDirective for the sub navigationtemplate for the sub navigationtemplate for a main page (from primary nav)Controller for a main page. (from the primary nav)Directive for a Sub AreaFor subsections it's as easy as leveraging strings in ng-include:Or you can create an object in case you have links to sub pages all over the place:Or you can even use $routeParamsYou can also put an ng-controller at the top-most level of each partialYou may checkout this library for the same purpose also:http://angular-route-segment.comIt looks like what you are looking for, and it is much simpler to use than ui-router. From the demo site:JS:Top-level HTML:Nested HTML:I too was struggling with nested views in Angular.Once I got a hold of ui-router I knew I was never going back to angular default routing functionality.Here is an example application that uses multiple levels of views nestingAs it can be seen there are 4 main views (view1,view2,view3,view4) and view1 has 3 child views.You may use ng-include to avoid using nested ng-views.http://docs.angularjs.org/api/ng/directive/ngInclude

http://plnkr.co/edit/ngdoc:example-example39@snapshot?p=previewMy index page I use ng-view. Then on my sub pages which I need to have nested frames. I use    ng-include. 

The demo shows a dropdown. I replaced mine with a link  ng-click. 

In the function I would put    $scope.template = $scope.templates[0]; or $scope.template = $scope.templates[1];Angular ui-router supports nested views. I haven't used it yet but looks very promising.http://angular-ui.github.io/ui-router/

How to print a stack trace in Node.js?

mike.toString

[How to print a stack trace in Node.js?](https://stackoverflow.com/questions/2923858/how-to-print-a-stack-trace-in-node-js)

Does anyone know how to print a stack trace in Node.js?

2010-05-27 18:35:59Z

Does anyone know how to print a stack trace in Node.js?Any Error object has a stack member that traps the point at which it was constructed.or more simply:Now there's a dedicated function on console for that:As already answered, you can simply use the trace command:However, if you came to this question searching about how to log the stack trace of an exception, you can simply log the Exception object.It will log:

If your Node.js version is < than 6.0.0, logging the Exception object will not be enough. In this case, it will print only:For Node version < 6, use console.error(e.stack) instead of console.error(e) to print the error message plus the full stack, like the current Node version does.

Note: if the exception is created as a string like throw "myException", it's not possible to retrieve the stack trace and logging e.stack yields undefined.To be safe, you can use and it will work for old and new Node.js versions.To print stacktrace of Error in console in more readable way:Example result:With a readily available Node module, it is possible to get full-length stack traces out of Node (albeit with a minor performance penalty):  http://www.mattinsler.com/post/26396305882/announcing-longjohn-long-stack-traces-for-node-jsTry Error.captureStackTrace(targetObject[, constructorOpt]).The function a and b are captured in error stack and stored in myObj.For what I know printing the complete stack trace in nodejs is not possible, you can just print a "partial" stack trace, you can not see from where you came from in the code, just where the Exception occur. That's what Ryan Dahl explains in this youtube video. http://youtu.be/jo_B4LTHi3I  at min 56:30 for being precise. Hope this helpsIf you want to only log the stack trace of the error (and not the error message) Node 6 and above automatically includes the error name and message inside the stack trace, which is a bit annoying if you want to do some custom error handling:console.log(error.stack.replace(error.message, ''))This workaround will log only the error name and stack trace (so you can, for example, format the error message and display it how you want somewhere else in your code).The above example would print only the error name follow by the stack trace, for example:Instead of:@isaacs answer is correct, but I have a more correct answer. This answer is inspired by the original source code of the Console class at node js (source code):In case someone is still looking for this like I was, then there is a module we can use called "stack-trace". It is really popular. NPM LinkThen walk through the trace. Or just simply print the trace:you can use node-stack-trace module which is a power full module to track call stacks.

How can I get a JavaScript stack trace when I throw an exception?

David Wolever

[How can I get a JavaScript stack trace when I throw an exception?](https://stackoverflow.com/questions/591857/how-can-i-get-a-javascript-stack-trace-when-i-throw-an-exception)

If I throw a JavaScript exception myself (eg, throw "AArrggg"), how can I get the stack trace (in Firebug or otherwise)?  Right now I just get the message.edit: As many people below have posted, it is possible to get a stack trace for a JavaScript exception but I want to get a stack trace for my exceptions.  For example:When foo is called, I want to get a stack trace which includes the calls to foo, bar, bar.

2009-02-26 18:36:33Z

If I throw a JavaScript exception myself (eg, throw "AArrggg"), how can I get the stack trace (in Firebug or otherwise)?  Right now I just get the message.edit: As many people below have posted, it is possible to get a stack trace for a JavaScript exception but I want to get a stack trace for my exceptions.  For example:When foo is called, I want to get a stack trace which includes the calls to foo, bar, bar.Edit 2 (2017):In all modern browsers you can simply call: console.trace(); (MDN Reference)Edit 1 (2013):A better (and simpler) solution as pointed out in the comments on the original question is to use the stack property of an Error object like so:This will generate output like this:Giving the name of the calling function along with the URL, its calling function, and so on.Original (2009):A modified version of this snippet may somewhat help:Note that chromium/chrome (other browsers using V8), and also Firefox do have a convenient interface to get a stacktrace through a stack property on Error objects.It applies for the base exceptions as well as for the ones you throw yourself. (Considered that you use the Error class, which is anyway a good practice).See details on V8 documentationIn Firefox it seems that you don't need to throw the exception.  It's sufficient to doIf you have firebug, there's a break on all errors option in the script tab. Once the script has hit your breakpoint, you can look at firebug's stack window:A good (and simple) solution as pointed out in the comments on the original question is to use the stack property of an Error object like so:This will generate output like this:Giving the name of the calling function along with the URL and line number, its calling function, and so on.I have a really elaborate and pretty solution that I have devised for a project I am currently working on and I have extracted and reworked it a bit to be generalized. Here it is:Check it out on GitHub (currently v1.2)! You can use it like Console.debug("Whatever"); and it will, depending on the settings in Console, print the output and a stack trace (or just simple info/nothing extra at all). Here's an example:Make sure to play around with the settings in the Console object! You can add spacing between the lines of the trace and turn it off entirely. Here it is with Console.trace set to false:You can even turn off the first bit of info shown (set Console.settings.debug.showInfo to false) or disable debugging entirely (set Console.settings.debug.enabled to false) so you never have to comment out a debug statement again! Just leave them in and this will do nothing.I don't think there's anything built in that you can use however I did find lots of examples of people rolling their own.You can access the stack (stacktrace in Opera) properties of an Error instance even if you threw it. The thing is, you need to make sure you use throw new Error(string) (don't forget the new instead of throw string.Example:With Chrome browser, you can use console.trace method: https://developer.chrome.com/devtools/docs/console-api#consoletraceobjectThis will give a stack trace (as array of strings) for modern Chrome, Opera, Firefox and IE10+Usage:It excludes from the stack its own call as well as title "Error" that is used by Chrome and Firefox (but not IE).It shouldn't crash on older browsers but just return empty array. If you need more universal solution look at stacktrace.js. Its list of supported browsers is really impressive but to my mind it is very big for that small task it is intended for: 37Kb of minified text including all dependencies. one way to get a the real stack trace on Firebug is to create a real error like calling an undefined function:Or use console.error() followed by a throw statement since console.error() shows the stack trace.An update to Eugene's answer: The error object must be thrown in order for IE (specific versions?) to populate the stack property. The following should work better than his current example, and should avoid returning undefined when in IE.Note 1: This sort of thing should only be done when debugging, and disabled when live, especially if called frequently. Note 2: This may not work in all browsers, but seems to work in FF and IE 11, which suits my needs just fine.This polyfill code working in modern (2017) browsers (IE11, Opera, Chrome, FireFox, Yandex):Other answers: not working in IE 11 !Using arguments.callee.caller - not working in strict mode in any browser!In Google Chrome (version 19.0 and beyond), simply throwing an exception works perfectly. For example:will show the stack trace at the browser's console output:Hope this help.function:use case:this script will show the errorKind of late to the party, but, here is another solution, which autodetects if arguments.callee is available, and uses new Error().stack if not.

Tested in chrome, safari and firefox.2 variants - stackFN(n) gives you the name of the function n away from the immediate caller, and stackArray() gives you an array, stackArray()[0] being the immediate caller.Try it out at http://jsfiddle.net/qcP9y/6/You could use this library http://www.stacktracejs.com/ . It's very goodFrom documentationHere is an answer that gives you max performance (IE 6+) and max compatibility. Compatible with IE 6!It is easier to get a stack trace on Firefox than it is on IE but fundamentally here is what you want to do:Wrap the "problematic" piece of code in a try/catch block:If you will examine the contents of the "error" object it contains the following fields:e.fileName : The source file / page where the issue came from

e.lineNumber : The line number in the file/page where the issue arose 

e.message : A simple message describing what type of error took place

e.name : The type of error that took place, in the example above it should be 'TypeError'

e.stack : Contains the stack trace that caused the exceptionI hope this helps you out.I had to investigate an endless recursion in smartgwt with IE11, so in order to investigate deeper, I needed a stack trace. The problem was, that I was unable to use the dev console, because the reproduction was more difficult that way.

Use the following in a javascript method:Wow - I don't see a single person in 6 years suggesting that we check first to see if stack is available before using it! The worst thing you can do in an error handler is throw an error because of calling something that doesn't exist.As others have said, while stack is mostly safe to use now it is not supported in IE9 or earlier.I log my unexpected errors and a stack trace is pretty essential. For maximum support I first check to see if Error.prototype.stack exists and is a function. If so then it is safe to use error.stack. Edit: It appears that since stack is a property and not a method you can safely call it even on older browsers. I'm still confused because I was pretty sure checking Error.prototype worked for me previously and now it doesn't - so I'm not sure what's going on.Using console.error(e.stack) Firefox only shows the stacktrace in logs,

Chrome also shows the message.

This can be a bad surprise if the message contains vital information. Always log both.Just tryThis works pretty well for chrome:

How do I conditionally add attributes to React components?

Remi Sture

[How do I conditionally add attributes to React components?](https://stackoverflow.com/questions/31163693/how-do-i-conditionally-add-attributes-to-react-components)

Is there a way to only add attributes to a React component if a certain condition is met?I'm supposed to add required and readOnly attributes to form elements based on an Ajax call after render, but I can't see how to solve this since readOnly="false" is not the same as omitting the attribute completely.The example below should explain what I want, but it won't work (Parse Error: Unexpected identifier).

2015-07-01 14:07:27Z

Is there a way to only add attributes to a React component if a certain condition is met?I'm supposed to add required and readOnly attributes to form elements based on an Ajax call after render, but I can't see how to solve this since readOnly="false" is not the same as omitting the attribute completely.The example below should explain what I want, but it won't work (Parse Error: Unexpected identifier).Apparently, for certain attributes, React is intelligent enough to omit the attribute if the value you pass to it is not truthy. For example:will result in:Update: if anyone is curious as to how/why this happens, you can find details in ReactDOM's source code, specifically at lines 30 and 167 of the DOMProperty.js file.juandemarco's answer is usually correct, but here is another option.Build an object how you like:Render with spread, optionally passing other props also.Here is an example of using Bootstrap's Button via React-Bootstrap (version 0.32.4):Depending on the condition, either {bsStyle: 'success'} or {} will be returned. The spread operator will then spread the properties of the returned object to Button component. In the falsy case, since no properties exist on the returned object, nothing will be passed to the component.An alternative way based on Andy Polhill's comment:The only small difference is that in the second example the inner component <Button/>'s props object will have a key bsStyle with a value of undefined.Here is an alternative.Or its inline versionHere's a way I do it.With a conditional:I still prefer using the regular way of passing props down, because it is more readable (in my opinion) in the case of not have any conditionals.Without a conditional:You can use the same shortcut, which is used to add/remove (parts of) components ({isVisible && <SomeComponent />}).Let’s say we want to add a custom property (using aria-* or data-*) if a condition is true:Let’s say we want to add a style property if a condition is true:If you use ECMAScript 6, you can simply write like this.This should work, since your state will change after the Ajax call, and the parent component will re-render.In React you can conditionally render Components, but also their attributes, like props, className, id, and more.In React it's very good practice to use the ternary operator which can help you conditionally render Components.An example also shows how to conditionally render Component and its style attribute.Here is a simple example:Considering the post JSX In Depth, you can solve your problem this way:

What does `void 0` mean? [duplicate]

Randomblue

[What does `void 0` mean? [duplicate]](https://stackoverflow.com/questions/7452341/what-does-void-0-mean)

Reading through the Backbone.js source code, I saw this:What is void 0? What is the purpose of using it here?

2011-09-17 03:58:03Z

Reading through the Backbone.js source code, I saw this:What is void 0? What is the purpose of using it here?void[MDN] is a prefix keyword that takes one argument and always returns undefined.ExamplesIt seems pretty useless, doesn't it? If it always returns undefined, what's wrong with just using undefined itself?In a perfect world we would be able to safely just use undefined: it's much simpler and easier to understand than void 0. But in case you've never noticed before, this isn't a perfect world, especially when it comes to Javascript. The problem with using undefined was that undefined is not a reserved word (it is actually a property of the global object [wtfjs]). That is, undefined is a permissible variable name, so you could assign a new value to it at your own caprice.Note: This is no longer a problem in any environment that supports ECMAScript 5 or newer (i.e. in practice everywhere but IE 8), which defines the undefined property of the global object as read-only (so it is only possible to shadow the variable in your own local scope). However, this information is still useful for backwards-compatibility purposes.void, on the other hand, cannot be overidden. void 0 will always return undefined. undefined, on the other hand, can be whatever Mr. Javascript decides he wants it to be.Why should we use void 0? What's so special about 0? Couldn't we just as easily use 1, or 42, or 1000000 or "Hello, world!"?And the answer is, yes, we could, and it would work just as well. The only benefit of passing in 0 instead of some other argument is that 0 is short and idiomatic.Although undefined can generally be trusted in modern JavaScript environments, there is one trivial advantage of void 0: it's shorter. The difference is not enough to worry about when writing code but it can add up enough over large code bases that most code minifiers replace undefined with void 0 to reduce the number of bytes sent to the browser.void 0 returns undefined and can not be overwritten while undefined can be overwritten. void is a reserved JavaScript keyword. It evaluates the expression and always returns undefined.

Count the number of occurrences of a character in a string in Javascript

Bjorn

[Count the number of occurrences of a character in a string in Javascript](https://stackoverflow.com/questions/881085/count-the-number-of-occurrences-of-a-character-in-a-string-in-javascript)

I need to count the number of occurrences of a character in a string.For example, suppose my string contains:I want to find the count of comma , character, which is 3. And the count of individual strings after the split along comma, which is 4.I also need to validate that each of the strings i.e str1 or str2 or str3 or str4 should not exceed, say, 15 characters.

2009-05-19 05:24:24Z

I need to count the number of occurrences of a character in a string.For example, suppose my string contains:I want to find the count of comma , character, which is 3. And the count of individual strings after the split along comma, which is 4.I also need to validate that each of the strings i.e str1 or str2 or str3 or str4 should not exceed, say, 15 characters.I have updated this answer. I like the idea of using a match better, but it is slower:jsfiddleUse a regular expression literal if you know what you are searching for beforehand, if not you can use the RegExp constructor, and pass in the g flag as an argument.match returns null with no results thus the || []The original answer I made in 2009 is below. It creates an array unnecessarily, but using a split is faster (as of September 2014). I'm ambivalent, if I really needed the speed there would be no question that I would use a split, but I would prefer to use match.Old answer (from 2009):If you're looking for the commas:If you're looking for the strBoth in @Lo's answer and in my own silly jsperf test split comes ahead in speed, at least in Chrome, but again creating the extra array just doesn't seem sane.There are at least four ways. The best option, which should also be the fastest -owing to the native RegEx engine -, is placed at the top. jsperf.com is currently down, otherwise I would provide you with performance statistics.Update: Please, find the performance tests here, and run them yourselves, so as to contribute your performance results. The specifics of the results will be given later.split not recommended. Resource hungry. Allocates new instances of 'Array' for each match. Don't try that for a >100MB file via FileReader. You can actually easily observe the EXACT resource usage using Chrome's profiler option.searching for a single characterUpdate:element mapping and filtering, not recommended due to its overall resource preallocation rather than using Pythonian 'generators'Share:

I made this gist, with currently 8 methods of character-counting, so we can directly pool and share our ideas - just for fun, and perhaps some interesting benchmarks :)https://gist.github.com/2757250Add this function to sting prototype :usage:A quick Google search got this (from http://www.codecodex.com/wiki/index.php?title=Count_the_number_of_occurrences_of_a_specific_character_in_a_string#JavaScript)Use it like this:Simply, use the split to find out the number of occurrences of a character in a string.mainStr.split(',').length // gives 4 which is the number of strings after splitting using delimiter comma

mainStr.split(',').length - 1 // gives 3 which is the count of commaI have found that the best approach to search for a character in a very large string (that is 1 000 000 characters long, for example) is to use the replace() method.You can see yet another JSPerf suite to test this method along with other methods of finding a character in a string.Here is a similar solution, but it uses Array.prototype.reduce As was mentioned, String.prototype.split works much faster than String.prototype.replace.ok, an other one with regexp - probably not fast, but short and better readable then others, in my case just '_' to countjust remove everything that does not look like your char 

but it does not look nice with a string as inputPerformance of Split vs RegExpEasiest way i found out...Example-You can also rest your string and work with it like an array of elements usingOr I was working on a small project that required a sub-string counter. Searching for the wrong phrases provided me with no results, however after writing my own implementation I have stumbled upon this question. Anyway, here is my way, it is probably slower than most here but might be helpful to someone:http://jsfiddle.net/5ZzHt/1/Please let me know if you find this implementation to fail or do not follow some standards! :)UPDATE

You may want to substitute:With:Interesting read discussing the above:

http://www.erichynds.com/blog/javascript-length-property-is-a-stored-valueI made a slight improvement on the accepted answer, it allows to check with case-sensitive/case-insensitive matching, and is a method attached to the string object:lit is the string to search for ( such as 'ex' ), and cis is case-insensitivity, defaulted to false, it will allow for choice of case insensitive matches.

amount_of_os would be equal to 2.

This time, amount_of_os would be equal to 3, since the capital O from the string gets included in the search.If you are using lodash, the _.countBy method will do this:This method also work with array:Here is my solution. Lots of solution already posted before me. But I love to share my view here.Here you find my REPLThe following uses a regular expression to test the length. testex ensures you don't have 16 or greater consecutive non-comma characters. If it passes the test, then it proceeds to split the string. counting the commas is as simple as counting the tokens minus one.What about string.split(desiredCharecter).length-1Example:var str = "hellow how is life";

var len = str.split("h").length-1; will give count 2 for character "h" in the above string;I'm using Node.js v.6.0.0 and the fastest is the one with index (the 3rd method in Lo Sauer's answer).The second is:Here's one almost as fast as the split and the replace methods, which are a tiny bit faster than the regex method (in chrome).I just did a very quick and dirty test on repl.it using Node v7.4. For a single character, the standard for loop is quickest:Some code:Results from a few runs:And there is:Works with integers too!My solution:The fifth method in Leo Sauers answer fails, if the character is on the beginning of the string.

e.g. will give 2 instead of 3, because the filter funtion Boolean gives false for 0.Other possible filter function:I know this might be an old question but I have a simple solution for low-level beginners in JavaScript. As a beginner, I could only understand some of the solutions to this question so I used two nested FOR loops to check each character against every other character in the string, incrementing a count variable for each character found that equals that character.I created a new blank object where each property key is a character and the value is how many times each character appeared in the string(count).Example function:-I believe you will find the below solution to be very short, very fast, able to work with very long strings, able to support multiple character searches, error proof, and able to handle empty string searches.Example usage:The above code fixes the major performance bug in Jakub Wawszczyk's that the code keeps on looks for a match even after indexOf says there is none and his version itself is not working because he forgot to give the function input parameters.The fastest method seems to be via the index operator:Usage:Or as a prototype function:Usage:In javascript you can use above code to get occurrence of a character in a string.  My solution with ramda js:Link to REPL.The function takes string str as parameter and counts occurrence of each unique characters in the string. The result comes in key - value pair for each character. 

How to check for an undefined or null variable in JavaScript?

Tomas Vana

[How to check for an undefined or null variable in JavaScript?](https://stackoverflow.com/questions/2559318/how-to-check-for-an-undefined-or-null-variable-in-javascript)

We are frequently using the following code pattern in our JavaScript codeIs there a less verbose way of checking that has the same effect?According to some forums and literature saying simply the following should have the same effect.Unfortunately, Firebug evaluates such a statement as error on runtime when some_variable is undefined, whereas the first one is just fine for it. Is this only an (unwanted) behavior of Firebug or is there really some difference between those two ways?

2010-04-01 09:17:18Z

We are frequently using the following code pattern in our JavaScript codeIs there a less verbose way of checking that has the same effect?According to some forums and literature saying simply the following should have the same effect.Unfortunately, Firebug evaluates such a statement as error on runtime when some_variable is undefined, whereas the first one is just fine for it. Is this only an (unwanted) behavior of Firebug or is there really some difference between those two ways?You have to differentiate between cases:A variable that has been declared but not initialized is undefined.I think the most efficient way to test for "value is null or undefined" is So these two lines are equivalent:Note 1As mentioned in the question, the short variant requires that some_variable has been declared, otherwise a ReferenceError will be thrown. However in many use cases you can assume that this is safe:check for optional arguments:check for properties on an existing objectOn the other hand typeof can deal with undeclared global variables (simply returns undefined). Yet these cases should be reduced to a minimum for good reasons, as Alsciende explained.Note 2This - even shorter - variant is not equivalent:soNote 3In general it is recommended to use === instead of ==.

The proposed solution is an exception to this rule. The JSHint syntax checker even provides the eqnull option for this reason.From the jQuery style guide:Checking null with normal equality will also return true for undefined.if (window.variable == null) alert('variable is null or undefined');In newer JavaScript standards like ES5 and ES6 you can just sayall return false, which is similar to Python's check of empty variables.

So if you want to write conditional logic around a variable, just sayhere "null" or "empty string" or "undefined" will be handled efficiently.If you try and reference an undeclared variable, an error will be thrown in all JavaScript implementations.Properties of objects aren't subject to the same conditions. If an object property hasn't been defined, an error won't be thrown if you try and access it. So in this situation you could shorten:toWith this in mind, and the fact that global variables are accessible as properties of the global object (window in the case of a browser), you can use the following for global variables:In local scopes, it always useful to make sure variables are declared at the top of your code block, this will save on recurring uses of typeof.Firstly you have to be very clear about what you test. JavaScript has all sorts of implicit conversions to trip you up, and two different types of equality comparator: == and ===.A function, test(val) that tests for null or undefined should have the following characteristics:Let's see which of the ideas here actually pass our test.These work:These do not work:I created a jsperf entry to compare the correctness and performance of these approaches. Results are inconclusive for the time being as there haven't been enough runs across different browsers/platforms. Please take a minute to run the test on your computer!At present, it seems that the simple val == null test gives the best performance. It's also pretty much the shortest. The test may be negated to val != null if you want the complement.this is the only case in which == should be used:Since there is no single complete and correct answer, I will try to summarize:In general, the expression:cannot be simplified, because the variable might be undeclared so omitting the typeof(variable) != "undefined" would result in ReferenceError. But, you can simplify the expression according to the context:If the variable is global, you can simplify to:If it is local, you can probably avoid situations when this variable is undeclared, and also simplify to:If it is object property, you don't have to worry about ReferenceError:You can just check if the variable has a value or not. Meaning,If you do not know whether a variable exists (that means, if it was declared) you should check with the typeof operator. e.g.I have done this using this methodsave the id in some variablethen use if conditionAs mentioned in one of the answers, you can be in luck if you are talking about a variable that has a global scope. As you might know, the variables that you define globally tend to get added to the windows object. You can take advantage of this fact so lets say you are accessing a variable called bleh, just use the double inverted operator (!!) This would return a false while bleh has not been declared AND assigned a value.here's another way using the Array includes() method:whatever yyy is undefined or null, it will return trueyesnoOpen the Developer tools in your browser and just try the code shown in the below image.

In order to understand, Let's analyze what will be the value return by the Javascript Engine when converting undefined , null and ''(An empty string also). You can directly check the same on your developer console.You can see all are converting to false , means All these three are assuming ‘lack of existence’ by javascript. So you no need to explicitly check all the three in your code like below.Also I want to point out one more thing.What will be the result of Boolean(0)?Of course false. This will create a bug in your code when 0 is a valid value in your expected result. So please make sure you check for this when you write the code.Testing nullity (if (value == null)) or non-nullity (if (value != null)) is less verbose than testing the definition status of a variable.Moreover, testing if (value) (or  if( obj.property)) to ensure the existence of your variable (or object property) fails if it is defined with a boolean false value. Caveat emptor :)Both values can be easily distinguished by using the strict comparison operator:Working example at:http://www.thesstech.com/tryme?filename=nullandundefinedSample Code:Similar to what you have, you could do something likeif (some_variable === undefined || some_variable === null) {

   do stuff

}You must define a function of this form:In ES5 or ES6 if you need check it several times you cand do:

Sort JavaScript object by key

vdh_ant

[Sort JavaScript object by key](https://stackoverflow.com/questions/5467129/sort-javascript-object-by-key)

I need to sort JavaScript objects by key. Hence the following:Would become:

2011-03-29 02:08:51Z

I need to sort JavaScript objects by key. Hence the following:Would become:The other answers to this question are outdated, never matched implementation reality, and have officially become incorrect now that the ES6/ES2015 spec has been published.See the section on property iteration order in Exploring ES6 by Axel Rauschmayer:So yes, JavaScript objects are in fact ordered, and the order of their keys/properties can be changed.Here’s how you can sort an object by its keys/properties, alphabetically:Use var instead of const for compatibility with ES5 engines.JavaScript objects1 are not ordered. It is meaningless to try to "sort" them. If you want to iterate over an object's properties, you can sort the keys and then retrieve the associated values:Alternate implementation using Object.keys fanciness:1Not to be pedantic, but there's no such thing as a JSON object.A lot of people have mention that "objects cannot be sorted", but after that they are giving you a solution which works. Paradox, isn't it?No one mention why those solutions are working. They are, because in most of the browser's implementations values in objects are stored in the order in which they were added. That's why if you create new object from sorted list of keys it's returning an expected result.And I think that we could add one more solution – ES5 functional way:ES2015 version of above (formatted to "one-liner"):Short explanation of above examples (as asked in comments):Object.keys is giving us a list of keys in provided object (obj or o), then we're sorting those using default sorting algorithm, next .reduce is used to convert that array back into an object, but this time with all of the keys sorted.Guys I'm figuratively shocked! Sure all answers are somewhat old, but no one did even mention the stability in sorting! So bear with me I'll try my best to answer the question itself and go into details here. So I'm going to apologize now it will be a lot to read.Since it is 2018 I will only use ES6, the Polyfills are all available at the MDN docs, which I will link at the given part.Answer to the question:If your keys are only numbers then you can safely use Object.keys() together with Array.prototype.reduce() to return the sorted object:However if you are working with strings I highly recommend chaining Array.prototype.sort() into all of this:If someone is wondering what reduce does:If needed here is the explanation for the one liner:Why Sorting is a bit complicated:In short Object.keys() will return an array with the same order as we get with a normal loop:Sidenote - you can use Object.keys() on arrays as well, keep in mind the index will be returned:But it is not as easy as shown by those examples, real world objects may contain numbers and alphabetical characters or even symbols (please don't do it).Here is an example with all of them in one object:Now if we use Array.prototype.sort() on the array above the output changes:Here is a quote from the docs:You have to make sure that one of them returns the desired output for you. In reallife examples people tend to mix up things expecially if you use different information inputs like APIs and Databases together.So what's the big deal? Well there are two articles which every programmer should understand:In-place algorithm:So basically our old array will be overwritten! This is important if you want to keep the old array for other reasons. So keep this in mind.Sorting algorithmThis shows that the sorting is right but it changed. So in the real world even if the sorting is correct we have to make sure that we get what we expect! This is super important keep this in mind as well. For more JavaScript examples look into the Array.prototype.sort() - docs: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sortThis works for mehere is the 1 linerThis is an old question, but taking the cue from Mathias Bynens' answer, I've made a short version to sort the current object, without much overhead.after the code execution, the "unordered" object itself will have the keys alphabetically sorted.It's 2019 and we have a 2019 way to solve this :)Using lodash this will work:Just food for thought.Suppose it could be useful in VisualStudio debugger which shows unordered object properties.Underscore version:If you don't trust your browser for keeping the order of the keys, I strongly suggest to rely on a ordered array of key-value paired arrays.Maybe a bit more elegant form:P.S. and the same with ES6+ syntax:recursive sort, for nested object and arraysAs already mentioned, objects are unordered.However...You may find this idiom useful:You can then iterate through kv and do whatever you wish.Here is a clean lodash-based version that works with nested objectsIt would be even cleaner if lodash had a toObject() method...Just use lodash to unzip map and sortBy first value of pair and zip again it will return sorted key.If you want sortby value change pair index to 1 instead of 0Sorts keys recursively while preserving references.Example:Use this code if you have nested objects or if you have nested array obj.Solution:Explanation:Many JavaScript runtimes store values inside an object in the order in which they are added. To sort the properties of an object by their keys you can make use of the Object.keys function which will return an array of keys. The array of keys can then be sorted by the Array.prototype.sort() method which sorts the elements of an array in place (no need to assign them to a new variable).Once the keys are sorted you can start using them one-by-one to access the contents of the old object to fill a new object (which is now sorted).Below is an example of the procedure (you can test it in your targeted browsers):Note: Object.keys is an ECMAScript 5.1 method but here is a polyfill for older browsers:I transfered some Java enums to javascript objects. These objects returned correct arrays for me. if object keys are mixed type (string, int, char), there is a problem. Simple and readable snippet, using lodash.You need to put the key in quotes only when calling sortBy. It doesn't have to be in quotes in the data itself.Also, your second parameter to map is wrong. It should be a function, but using pluck is easier.There's a great project by @sindresorhus called sort-keys that works awesome.You can check its source code here:https://github.com/sindresorhus/sort-keysOr you can use it with npm:Here are also code examples from his readmeThis is a lightweight solution to everything I need for JSON sorting.Pure JavaScript answer to sort an Object.  This is the only answer that I know of that will handle negative numbers.  This function is for sorting numerical Objects.  Input

    obj = {1000: {}, -1200: {}, 10000: {}, 200: {}};The output will be an object sorted by those numbers with new keys starting at 0.Just to simplify it and make it more clear the answer from Matt BallNot sure if this answers the question, but this is what I needed. Called as : The one line: Just convert the object to an array and loop through. array.map(), array.forEach() and array.filter() sorts contents by defaultResult

typeof !==「undefined」vs. != null

Derek Thurn

[typeof !==「undefined」vs. != null](https://stackoverflow.com/questions/2703102/typeof-undefined-vs-null)

I often see JavaScript code which checks for undefined parameters etc. this way:This seems kind of wasteful, since it involves both a type lookup and a string comparison, not to mention its verbosity. It's needed because undefined could be renamed, though. My question is:

How is that code any better than this approach:As far as I know, you can't redefine null, so it's not going to break unexpectedly. And, because of the type-coercion of the != operator, this checks for both undefined and null... which is often exactly what you want (e.g. for optional function parameters). Yet this form does not seem widespread, and it even causes JSLint to yell at you for using the evil != operator. Why is this considered bad style?

2010-04-24 03:26:13Z

I often see JavaScript code which checks for undefined parameters etc. this way:This seems kind of wasteful, since it involves both a type lookup and a string comparison, not to mention its verbosity. It's needed because undefined could be renamed, though. My question is:

How is that code any better than this approach:As far as I know, you can't redefine null, so it's not going to break unexpectedly. And, because of the type-coercion of the != operator, this checks for both undefined and null... which is often exactly what you want (e.g. for optional function parameters). Yet this form does not seem widespread, and it even causes JSLint to yell at you for using the evil != operator. Why is this considered bad style?typeof is safer as it allows the identifier to never have been declared before:If the variable is declared (either with the var keyword, as a function argument, or as a global variable), I think the best way to do it is:jQuery does it, so it's good enough for me :-)Otherwise, you'll have to use typeof to avoid a ReferenceError.If you expect undefined to be redefined, you could wrap your code like this:Or obtain it via the void operator:good way:But the best looking way is to check via :You shouldn't really worry about undefined being renamed. If someone renames undefined, you will be in a lot more trouble than just a few if checks failing. If you really want to protect your code, wrap it in an IFFE (immediately invoked function expression) like this:If you're working with global variables (which is wrong already) in a browser enviroment, I'd check for undefined like this:Since global variables are a part of the window object, you can simply check against undefined instead of casting to a string and comparing strings. On top of that, why are your variables not defined? I've seen a lot of code where they check a variables existence and perform some action based on that. Not once have I seen where this approach has been correct. If you are really worried about undefined being redefined, you can protect against this with some helper method like this:This works because when someone writes undefined = "foo" he only lets the name undefined reference to a new value, but he doesn't change the actual value of undefined.You can also use the void operator to obtain an undefined value:(And yes, as noted in another answer, this will throw an error if the variable was not declared, but this case can often be ruled out either by code inspection, or by code refactoring, e.g. using window.input !== void 0 for testing global variables or adding var input.)I've actually come across if (typeof input !== 'undefined') in this scenario where it's being used to provide default function parameters: ES6 provides new ways of introducing default function parameters this way:This is less verbose and cleaner than the first option.works just fine. It is of course not a null comparison, but I usually find that if I need to distinguish between undefined and null, I actually rather need to distinguish between undefined and just any false value, sodoes it.If a program redefines undefined it is really braindead anyway.The only reason I can think of was for IE4 compatibility, it did not understand the undefined keyword (which is not actually a keyword, unfortunately), but of course values could be undefined, so you had to have this:and the comparison above would work just fine.In your second example, you probably need double parentheses to make lint happy?

jQuery get textarea text

RodgerB

[jQuery get textarea text](https://stackoverflow.com/questions/144810/jquery-get-textarea-text)

Recently I have started playing with jQuery, and have been following a couple of tutorials. Now I feel slightly competent with using it (it's pretty easy), and I thought it would be cool if I were able to make a 'console' on my webpage (as in, you press the ` key like you do in FPS games, etc.), and then have it Ajax itself back to the server in-order to do stuff.I originally thought the best way would be to just get the text inside the textarea, and then split it, or should I use the keyup event, convert the keycode returned to an ASCII character, append the character to a string and send the string to the server (then empty the string).I couldn't find any information on getting text from a textarea, all I got was keyup information. Also, how can I convert the keycode returned to an ASCII character?

2008-09-28 00:05:56Z

Recently I have started playing with jQuery, and have been following a couple of tutorials. Now I feel slightly competent with using it (it's pretty easy), and I thought it would be cool if I were able to make a 'console' on my webpage (as in, you press the ` key like you do in FPS games, etc.), and then have it Ajax itself back to the server in-order to do stuff.I originally thought the best way would be to just get the text inside the textarea, and then split it, or should I use the keyup event, convert the keycode returned to an ASCII character, append the character to a string and send the string to the server (then empty the string).I couldn't find any information on getting text from a textarea, all I got was keyup information. Also, how can I convert the keycode returned to an ASCII character?Why would you want to convert key strokes to text? Add a button that sends the text inside the textarea to the server when clicked. You can get the text using the value attribute as the poster before has pointed out, or using jQuery's API:Where it is often the text function you use (e.g. in divs etc) then for text area it is valget:set:You should have a div that just contains the console messages, that is, previous commands and their output. And underneath put an input or textarea that just holds the command you are typing.That way you just send the value of the input box to the server for processing, and append the result to the console messages div.Normally, it's the value propertyOr is there something I'm missing in what you need?I have figured out that I can convert the keyCode of the event to a character by using the following function:From there I would then append the character to a string, and when the enter key is pressed send the string to the server. I'm sorry if my question seemed somewhat cryptic, and the title meaning something almost completely off-topic, it's early in the morning and I haven't had breakfast yet ;).Thanks for all your help guys.Methinks the word "console" is causing the confusion.If you want to emulate an old-style full/half duplex console, you'd use something like this:event.which has the key that was pressed. For backspace handling, event.which === 8.the best way: 

    $('#myTextBox').val('new value').trim();Read textarea value and code-char conversion:And below nice Quake like console on div-s only :)

ES6 class variable alternatives

wintercounter

[ES6 class variable alternatives](https://stackoverflow.com/questions/22528967/es6-class-variable-alternatives)

Currently in ES5 many of us are using the following pattern in frameworks to create classes and class variables, which is comfy:In ES6 you can create classes natively, but there is no option to have class variables:Sadly, the above won't work, as classes only can contain methods. I understand that I can this.myVar = true in constructor…but I don't want to 'junk' my constructor, especially when I have 20-30+ params for a bigger class.I was thinking of many ways to handle this issue, but haven't yet found any good ones. (For example: create a ClassConfig handler, and pass a parameter object, which is declared separately from the class. Then the handler would attach to the class. I was thinking about WeakMaps also to integrate, somehow.)What kind of ideas would you have to handle this situation?

2014-03-20 09:45:42Z

Currently in ES5 many of us are using the following pattern in frameworks to create classes and class variables, which is comfy:In ES6 you can create classes natively, but there is no option to have class variables:Sadly, the above won't work, as classes only can contain methods. I understand that I can this.myVar = true in constructor…but I don't want to 'junk' my constructor, especially when I have 20-30+ params for a bigger class.I was thinking of many ways to handle this issue, but haven't yet found any good ones. (For example: create a ClassConfig handler, and pass a parameter object, which is declared separately from the class. Then the handler would attach to the class. I was thinking about WeakMaps also to integrate, somehow.)What kind of ideas would you have to handle this situation?2018 update:There is now a stage 3 proposal - I am looking forward to make this answer obsolete in a few months.In the meantime anyone using TypeScript or babel can use the syntax:Inside a class declaration/expression body and it will define a variable. Hopefully in a few months/weeks I'll be able to post an update.Update: Chrome 74 now ships with this syntax working.The notes in the ES wiki for the proposal in ES6 (maximally minimal classes) note:This means that what you're asking for was considered, and explicitly decided against.Good question. The good people of TC39 want class declarations to declare and define the capabilities of a class. Not its members. An ES6 class declaration defines its contract for its user. Remember, a class definition defines prototype methods - defining variables on the prototype is generally not something you do.

You can, of course use:In the constructor like you suggested. Also see the summary of the consensus.A new proposal for ES7 is being worked on that allows more concise instance variables through class declarations and expressions - https://esdiscuss.org/topic/es7-property-initializersJust to add to Benjamin's answer — class variables are possible, but you wouldn't use prototype to set them.For a true class variable you'd want to do something like the following:From within a class method that variable can be accessed as this.constructor.foo (or MyClass.foo). These class properties would not usually be accessible from to the class instance. i.e. MyClass.foo gives 'bar' but new MyClass().foo is undefinedIf you want to also have access to your class variable from an instance, you'll have to additionally define a getter:I've only tested this with Traceur, but I believe it will work the same in a standard implementation.JavaScript doesn't really have classes. Even with ES6 we're looking at an object- or prototype-based language rather than a class-based language.  In any function X () {}, X.prototype.constructor points back to X.

When the new operator is used on X, a new object is created inheriting X.prototype. Any undefined properties in that new object (including constructor) are looked up from there. We can think of this as generating object and class properties.Babel supports class variables in ESNext, check this example:In your example:Because of MY_CONST is primitive https://developer.mozilla.org/en-US/docs/Glossary/Primitive we can just do:But if MY_CONST is reference type like static get MY_CONST() {return ['string'];} alert output is string, false. In such case delete operator can do the trick:And finally for class variable not const:Since your issue is mostly stylistic (not wanting to fill up the constructor with a bunch of declarations) it can be solved stylistically as well.The way I view it, many class based languages have the constructor be a function named after the class name itself. Stylistically we could use that that to make an ES6 class that stylistically still makes sense but does not group the typical actions taking place in the constructor with all the property declarations we're doing. We simply use the actual JS constructor as the "declaration area", then make a class named function that we otherwise treat as the "other constructor stuff" area, calling it at the end of the true constructor.Both will be called as the new instance is constructed.Sorta like having 2 constructors where you separate out the declarations and the other constructor actions you want to take, and stylistically makes it not too hard to understand that's what is going on too.I find it's a nice style to use when dealing with a lot of declarations and/or a lot of actions needing to happen on instantiation and wanting to keep the two ideas distinct from each other.NOTE: I very purposefully do not use the typical idiomatic ideas of "initializing" (like an init() or initialize() method) because those are often used differently. There is a sort of presumed difference between the idea of constructing and initializing. Working with constructors people know that they're called automatically as part of instantiation. Seeing an init method many people are going to assume without a second glance that they need to be doing something along the form of var mc = MyClass(); mc.init();, because that's how you typically initialize. I'm not trying to add an initialization process for the user of the class, I'm trying to add to the construction process of the class itself.While some people may do a double-take for a moment, that's actually the bit of the point: it communicates to them that the intent is part of construction, even if that makes them do a bit of a double take and go "that's not how ES6 constructors work" and take a second looking at the actual constructor to go "oh, they call it at the bottom, I see", that's far better than NOT communicating that intent (or incorrectly communicating it) and probably getting a lot of people using it wrong, trying to initialize it from the outside and junk. That's very much intentional to the pattern I suggest.For those that don't want to follow that pattern, the exact opposite can work too. Farm the declarations out to another function at the beginning. Maybe name it "properties" or "publicProperties" or something. Then put the rest of the stuff in the normal constructor.Note that this second method may look cleaner but it also has an inherent problem where properties gets overridden as one class using this method extends another. You'd have to give more unique names to properties to avoid that. My first method does not have this problem because its fake half of the constructor is uniquely named after the class.What about the oldschool way? In constructor you mention only those vars which have to be computed. 

I like prototype inheritance for this feature -- it can help to save a lot of memory(in case if there are a lot of never-assigned vars).As Benjamin said in his answer, TC39 explicitly decided not to include this feature at least for ES2015.  However, the consensus seems to be that they will add it in ES2016.The syntax hasn't been decided yet, but there's a preliminary proposal for ES2016 that will allow you to declare static properties on a class.Thanks to the magic of babel, you can use this today.  Enable the class properties transform according to these instructions and you're good to go.  Here's an example of the syntax:This proposal is in a very early state, so be prepared to tweak your syntax as time goes on.[Long thread, not sure if its already listed as an option...].

A simple alternative for contsants only, would be defining the const outside of class. 

This will be accessible only from the module itself, unless accompanied with a getter.

This way prototype isn't littered and you get the const.You can mimic es6 classes behaviour... and use your class variables :)I put it on GitHubES7 has a solution for 'junking' your constructor function. Here is an example:The above example would look the following in ES6:Be aware when using this that this syntax might not be supported by all browsers and might have to be transpiled an earlier version of JS. The way I solved this, which is another option (if you have jQuery available), was to Define the fields in an old-school object and then extend the class with that object. I also didn't want to pepper the constructor with assignments, this appeared to be a neat solution.-- Update Following Bergi's comment.No JQuery Version:You still do end up with 'fat' constructor, but at least its all in one class and assigned in one hit.EDIT #2:

I've now gone full circle and am now assigning values in the constructor, e.g.Why? Simple really, using the above plus some JSdoc comments, PHPStorm was able to perform code completion on the properties. Assigning all the vars in one hit was nice, but the inability to code complete the properties, imo, isn't worth the (almost certainly minuscule) performance benefit.Well, you can declare variables inside the Constructor.This is a bit hackish combo of static and get  works for meelsewhere used

Convert Array to Object

David Hellsing

[Convert Array to Object](https://stackoverflow.com/questions/4215737/convert-array-to-object)

What is the best way to convert:to:

2010-11-18 14:22:34Z

What is the best way to convert:to:ECMAScript 6 introduces the easily polyfillable Object.assign:The own length property of the array is not copied because it isn't enumerable.Also, you can use ES6 spread syntax to achieve the same result:With a function like this:Your array already is more-or-less just an object, but arrays do have some "interesting" and special behavior with respect to integer-named properties. The above will give you a plain object.edit oh also you might want to account for "holes" in the array:In modern JavaScript runtimes, you can use the .reduce() method:That one also avoids "holes" in the array, because that's how .reduce() works.You could use an accumulator aka reduce.Pass an empty object {} as a starting point; then "augment" that object incrementally.

At the end of the iterations, result will be {"0": "a", "1": "b", "2": "c"}If your array is a set of key-value pair objects:will produce: {a: 1, b: 2, c: 3}For the sake of completeness, reduceRight allows you to iterate over your array in reverse order:will produce: {c:3, b:2, a:1}Your accumulator can be of any type for you specific purpose. For example in order to swap the key and value of your object in an array, pass []:will produce: [{1: "a"}, {2: "b"}, {3: "c"}]Unlike map, reduce may not be used as a 1-1 mapping. You have full control over the items you want to include or exclude. Therefore reduce allows you to achieve what filter does, which makes reduce very versatile:will produce: [{2: "b"}, {3: "c"}]Caution: reduce and Object.key are part of ECMA 5th edition; you should provide a polyfill for browsers that don't support them (notably IE8).See a default implementation by Mozilla.If you're using jquery:For completeness, ECMAScript 2015(ES6) spreading. Will require either a transpiler(Babel) or an environment running at least ES6.I'd probably write it this way (since very rarely I'll not be having the underscorejs library at hand):Here is an O(1) ES2015 method just for completeness.Surprised not to see -we can use Object.assign and array.reduce function to convert an Array to Object.

Easy way in modern JavaScript is to use Object.assign() that does nothing but copying key:value from one object to another. In our case, Array donates properties to new {}.I ended up using object spread operator, since it is part of the ECMAScript 2015 (ES6) standard.Made the following fiddle as an example.Five years later, there's a good way :)Object.assign was introduced in ECMAScript 2015.For ES2016, spread operator for objects. Note: This is after ES6 and so transpiler will need to be adjusted. you can use spread operatorIf you're using ES6, you can use Object.assign and the spread operatorIf you have nested array likeUsing  javascript#forEach one can do thisWith ECMA6:FWIW, one another recent approach is to use the new Object.fromEntries along with Object.entries as follows:...which allows for avoiding storing sparse array items as undefined or null and preserves non-index (e.g., non-positive-integer/non-numeric) keys.One may wish to add arr.length, however, as that is not included:A quick and dirty one:Quick and dirty #2:As of Lodash 3.0.0 you can use _.toPlainObjectHere's a recursive function I just wrote. It's simple and works well.Here's an example (jsFiddle):Results:

[docs]or more verboseorshortest one with vanilla JSsome more complex exampleeven shorter (by using function(e) {console.log(e); return e;} === (e)=>(console.log(e),e))[/docs]I would do this simply with Array.of(). Array of has the ability to use it's context as a constructor.So we may bind Array.of() to a function and generate an array like object.By utilizing Array.of() one can even do array sub-classing.If you can use Map or Object.assign, it's very easy.Create an array:The below creates an object with index as keys:Replicate the same as above with MapsConverts to an index based object {0 : 'css'} etc...Convert to an value based object {css : 'css is great'} etc...A simple and cheeky method of quickly converting an Array of items in to an ObjectThen using it like so...Output: Checking the type:AND things wouldn't be complete if there wasn't a prototype method Using like:Output:*NOTE that there is no naming routine, so if you want to have specific names, then you will need to continue using the existing methods below.Older methodThis allows you to generate from an array an object with keys you define in the order you want them. console.log(">>> :" + result.onion); will output "paint", the function has to have arrays of equal length or you get an empty object.Here is an updated methodOr useES5 - Solution:Using Array prototype function 'push' and 'apply' you can populate the object with the array elements.More browser supported and more flexible way of doing that is using a normal loop, something like:But also the modern way could be using the spread operator, like: Or Object assign:Both will return:You could use a function like this:This one should handle sparse arrays more efficiently.Here's a solution in coffeescript

Split array into chunks

Industrial

[Split array into chunks](https://stackoverflow.com/questions/8495687/split-array-into-chunks)

Let's say that I have an Javascript array looking as following:  What approach would be appropriate to chunk (split) the array into many smaller arrays with, lets say, 10 elements at its most?

2011-12-13 20:24:42Z

Let's say that I have an Javascript array looking as following:  What approach would be appropriate to chunk (split) the array into many smaller arrays with, lets say, 10 elements at its most?The array.slice method can extract a slice from the beginning, middle, or end of an array for whatever purposes you require, without changing the original array.Modified from an answer by dbaseman: https://stackoverflow.com/a/10456344/711085minor addendum:I should point out that the above is a not-that-elegant (in my mind) workaround to use Array.map. It basically does the following, where ~ is concatenation:It has the same asymptotic running time as the method below, but perhaps a worse constant factor due to building empty lists. One could rewrite this as follows (mostly the same as Blazemonger's method, which is why I did not originally submit this answer):More efficient method:My preferred way nowadays is the above, or one of the following:Demo:Or if you don't want an Array.range function, it's actually just a one-liner (excluding the fluff):orTry to avoid mucking with native prototypes, including Array.prototype, if you don't know who will be consuming your code (3rd parties, coworkers, yourself at a later date, etc.).There are ways to safely extend prototypes (but not in all browsers) and there are ways to safely consume objects created from extended prototypes, but a better rule of thumb is to follow the Principle of Least Surprise and avoid these practices altogether.If you have some time, watch Andrew Dupont's JSConf 2011 talk, "Everything is Permitted: Extending Built-ins", for a good discussion about this topic. But back to the question, while the solutions above will work, they are overly complex and requiring unnecessary computational overhead. Here is my solution:Here's a ES6 version using reduceAnd you're ready to chain further map/reduce transformations.

Your input array is left intactIf you prefer a shorter but less readable version, you can sprinkle some concat into the mix for the same end result:I tested the different answers into jsperf.com. The result is available there: https://web.archive.org/web/20150909134228/https://jsperf.com/chunk-mtdsAnd the fastest function (and that works from IE8) is this one:I'd prefer to use splice method:One-liner in ECMA 6Old question: New answer! I actually was working with an answer from this question and had a friend improve on it! So here it is: Nowadays you can use lodash' chunk function to split the array into smaller arrays https://lodash.com/docs#chunk No need to fiddle with the loops anymore!There have been many answers but this is what I use:First, check for a remainder when dividing the index by the chunk size.If there is a remainder then just return the accumulator array.If there is no remainder then the index is divisible by the chunk size, so take a slice from the original array (starting at the current index) and add it to the accumulator array.So, the returned accumulator array for each iteration of reduce looks something like this:Ok, let's start with a fairly tight one:Which is used like this:Then we have this tight reducer function:Which is used like this:Since a kitten dies when we bind this to a number, we can do manual currying like this instead:Which is used like this:Then the still pretty tight function which does it all in one go:I think this a nice recursive solution with ES6 syntax:I aimed at creating a simple non-mutating solution in pure ES6. Peculiarities in javascript make it necessary to fill the empty array before mapping :-(This version with recursion seem simpler and more compelling:The ridiculously weak array functions of ES6 makes for good puzzles :-)If you use EcmaScript version >= 5.1, you can implement a functional version of chunk() using array.reduce() that has O(N) complexity:Explanation of each // nbr above:Currying based on chunkSize:You can add the chunk() function to the global Array object:Created a npm package for this https://www.npmjs.com/package/array.chunkWhen using a TypedArrayThe following ES2015 approach works without having to define a function and directly on anonymous arrays (example with chunk size 2):If you want to define a function for this, you could do it as follows (improving on K._'s comment on Blazemonger's answer):And this would be my contribution to this topic. I guess .reduce() is the best way.But the above implementation is not very efficient since .reduce() runs through all arr function. A more efficient approach (very close to the fastest imperative solution) would be, iterating over the reduced (to be chunked) array since we can calculate it's size in advance by Math.ceil(arr/n);. Once we have the empty result array like Array(Math.ceil(arr.length/n)).fill(); the rest is to map slices of the arr array into it.ES6 one-line approach based on Array.prototype reduce and push methods:ES6 Generator versionThis is the most efficient and straight-forward solution I could think of:ES6 spreads functional #ohmy #ftwUse chunk from lodashEDIT: @mblase75 added more concise code to the earlier answer while I was writing mine, so I recommend going with his solution.You could use code like this:Change the value of arraySize to change the maximum length of the smaller arrays.Here is a non-mutating solution using only recursion and slice().Then simply use it like splitToChunks([1, 2, 3, 4, 5], 3) to get [[1, 2, 3], [4, 5]].Here is a fiddle for you to try out: https://jsfiddle.net/6wtrbx6k/2/Here is neat & optimised implemention of chunk() function. Assuming default chunk size is 10.For a functional solution, using Ramda:Where popularProducts is your input array, 5 is the chunk size

jQuery $(document).ready and UpdatePanels?

Herb Caudill

[jQuery $(document).ready and UpdatePanels?](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)

I'm using jQuery to wire up some mouseover effects on elements that are inside an UpdatePanel. The events are bound in $(document).ready . For example:Of course, this works fine the first time the page is loaded, but when the UpdatePanel does a partial page update, it's not run and the mouseover effects don't work any more inside the UpdatePanel. What's the recommended approach for wiring stuff up in jQuery not only on the first page load, but every time an UpdatePanel fires a partial page update? Should I be using the ASP.NET ajax lifecycle instead of $(document).ready?

2008-11-01 22:24:34Z

I'm using jQuery to wire up some mouseover effects on elements that are inside an UpdatePanel. The events are bound in $(document).ready . For example:Of course, this works fine the first time the page is loaded, but when the UpdatePanel does a partial page update, it's not run and the mouseover effects don't work any more inside the UpdatePanel. What's the recommended approach for wiring stuff up in jQuery not only on the first page load, but every time an UpdatePanel fires a partial page update? Should I be using the ASP.NET ajax lifecycle instead of $(document).ready?An UpdatePanel completely replaces the contents of the update panel on an update. This means that those events you subscribed to are no longer subscribed because there are new elements in that update panel.What I've done to work around this is re-subscribe to the events I need after every update. I use $(document).ready() for the initial load, then use Microsoft's PageRequestManager (available if you have an update panel on your page) to re-subscribe every update.  The PageRequestManager is a javascript object which is automatically available if an update panel is on the page. You shouldn't need to do anything other than the code above in order to use it as long as the UpdatePanel is on the page.If you need more detailed control, this event passes arguments similar to how .NET events are passed arguments (sender, eventArgs) so you can see what raised the event and only re-bind if needed.Here is the latest version of the documentation from Microsoft: msdn.microsoft.com/.../bb383810.aspxA better option you may have, depending on your needs, is to use jQuery's .on(). These method are more efficient than re-subscribing to DOM elements on every update. Read all of the documentation before you use this approach however, since it may or may not meet your needs. There are a lot of jQuery plugins that would be unreasonable to refactor to use .delegate() or .on(), so in those cases, you're better off re-subscribing.The area which is going to be updated.User Control with jQuery Inside an UpdatePanelThis isn't a direct answer to the question, but I did put this solution together by reading the answers that I found here, and I thought someone might find it useful.I was trying to use a jQuery textarea limiter inside of a User Control. This was tricky, because the User Control runs inside of an UpdatePanel, and it was losing its bindings on callback.If this was just a page, the answers here would have applied directly. However, User Controls do not have direct access to the head tag, nor did they have direct access to the UpdatePanel as some of the answers assume. I ended up putting this script block right into the top of my User Control's markup. For the initial bind, it uses $(document).ready, and then it uses prm.add_endRequest from there:So... Just thought someone might like to know that this works.Upgrade to jQuery 1.3 and use:Note: live works with most events, but not all. There is a complete list in the documentation.You could also try:,since pageLoad() is an ASP.NET ajax event which is executed each time the page is loaded at client side.My answer? etc.Worked like a charm, where a number of other solutions failed miserably.I would use one of the following approaches:This worked for me:function pageLoad() is very dangerous to use in this situation.  You could have events become wired multiple times.  I would also stay away from .live() as it attaches to the document element and has to traverse the entire page (slow and crappy). The best solution I have seen so far is to use jQuery .delegate() function on a wrapper outside the update panel and make use of bubbling.  Other then that, you could always wire up the handlers using Microsoft's Ajax library which was designed to work with UpdatePanels. When $(document).ready(function (){...}) not work after page post back then use JavaScript function  pageLoad  in Asp.page  as follow: I had a similar problem and found the way that worked best was to rely on Event Bubbling and event delegation to handle it.  The nice thing about event delegation is that once setup, you don't have to rebind events after an AJAX update.What I do in my code is setup a delegate on the parent element of the update panel.  This parent element is not replaced on an update and therefore the event binding is unaffected.There are a number of good articles and plugins to handle event delegation in jQuery and the feature will likely be baked into the 1.3 release.  The article/plugin I use for reference is:http://www.danwebb.net/2008/2/8/event-delegation-made-easy-in-jqueryOnce you understand what it happening, I think you'll find this a much more elegant solution that is more reliable than remembering to re-bind events after every update.  This also has the added benefit of giving you one event to unbind when the page is unloaded.FWIW, I experienced a similar issue w/mootools.  Re-attaching my events was the correct move, but needed to be done at the end of the request..egJust something to keep in mind if beginRequest causes you to get null reference JS exceptions.CheersThis is a great plugin for use with update panels:http://updatepanelplugin.codeplex.com/The pageLoad function is perfect for this case since it runs on the initial page load and every updatepanel async postback. I just had to add the unbind method to make the jquery work on updatepanel postbacks.http://encosia.com/document-ready-and-pageload-are-not-the-same/My answer is based on all the expert comments above, but below is the following code that anyone can use to make sure on each postback and on each asynchronous postback the JavaScript code will still be executed.In my case, I had a user control within a page. Just paste the below code in your user control.Update Panel always replaces your Jquery with its inbuilt Scriptmanager's scripts after every load. Its better if you use pageRequestManager's instance methods like this...it will work fine ... Use below script and change the body of the script accordingly.In response to Brian MacKay's answer:I inject the JavaScript into my page via the ScriptManager instead of putting it directly into the HTML of the UserControl.  In my case, I need to scroll to a form that is made visible after the UpdatePanel has finished and returned.  This goes in the code behind file.  In my sample, I've already created the prm variable on the main content page.

jQuery AJAX cross domain

Firose Hussain

[jQuery AJAX cross domain](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

Here are two pages, test.php and testserver.php.test.phptestserver.phpNow my problem: when both of these files are on the same server (either localhost or web server), it works and alert("Success") is called; If it is on different servers, meaning testserver.php on web server and test.php on localhost, its not working, and alert("Error") is executing. Even if the URL inside ajax is changed to http://domain.com/path/to/file/testserver.php

2010-08-17 19:31:01Z

Here are two pages, test.php and testserver.php.test.phptestserver.phpNow my problem: when both of these files are on the same server (either localhost or web server), it works and alert("Success") is called; If it is on different servers, meaning testserver.php on web server and test.php on localhost, its not working, and alert("Error") is executing. Even if the URL inside ajax is changed to http://domain.com/path/to/file/testserver.phpUse JSONP.jQuery:PHP:The echo might be wrong, it's been a while since I've used php. In any case you need to output callbackName('jsonString') notice the quotes. jQuery will pass it's own callback name, so you need to get that from the GET params.And as Stefan Kendall posted, $.getJSON() is a shorthand method, but then you need to append 'callback=?' to the url as GET parameter (yes, value is ?, jQuery replaces this with its own generated callback method).JSONP is a good option, but there is an easier way. You can simply set the Access-Control-Allow-Origin header on your server. Setting it to * will accept cross-domain AJAX requests from any domain. (https://developer.mozilla.org/en/http_access_control)The method to do this will vary from language to language, of course. Here it is in Rails:In this example, the say_hello action will accept AJAX requests from any domain and return a response of "hello!".Here is an example of the headers it might return:Easy as it is, it does have some browser limitations. See http://caniuse.com/#feat=cors.You can control this via HTTP header by adding Access-Control-Allow-Origin. Setting it to * will accept cross-domain AJAX requests from any domain.Using PHP it's really simple, just add the following line into the script that you want to have access outside from your domain:Don't forget to enable mod_headers module in httpd.conf.You need to have a look at Same Origin Policy:For you to be able to get data, it has to be:Same protocol and hostYou need to implement JSONP to workaround it.I had to load webpage from local disk "file:///C:/test/htmlpage.html", call "http://localhost/getxml.php" url, and do this in IE8+ and Firefox12+ browsers, use jQuery v1.7.2 lib to minimize boilerplate code. After reading dozens of articles finally figured it out. Here is my summary.Here is an example jQuery ajax call with some debug sysouts.It is true that the same-origin policy prevents JavaScript from making requests across domains, but the CORS specification allows just the sort of API access you are looking for, and is supported by the current batch of major browsers.See how to enable cross-origin resource sharing for client and server:http://enable-cors.org/"Cross-Origin Resource Sharing (CORS) is a specification that enables truly open access across domain-boundaries. If you serve public content, please consider using CORS to open it up for universal JavaScript/browser access."This is possible, but you need to use JSONP, not JSON. Stefan's link pointed you in the right direction. The jQuery AJAX page has more information on JSONP.Remy Sharp has a detailed example using PHP.I use Apache server, so I've used mod_proxy module. Enable modules:Then add:Finally, pass proxy-url to your script.Browser security prevents making an ajax call from a page hosted on one domain to a page hosted on a different domain; this is called the "same-origin policy".There are few examples for using JSONP which include error handling.However, please note that the error-event is not triggered when using JSONP! See: http://api.jquery.com/jQuery.ajax/ or jQuery ajax request using jsonp errorFrom the Jquery docs (link):So I would take it that you need to use jsonp for the request. But haven't tried this myself.I know 3 way to resolve your problem:For Microsoft Azure, it's slightly different.Azure has a special CORS setting that needs to be set.  It's essentially the same thing behind the scenes, but simply setting the header joshuarh mentions will not work. The Azure documentation for enabling cross domain can be found here:https://docs.microsoft.com/en-us/azure/app-service-api/app-service-api-cors-consume-javascriptI fiddled around with this for a few hours before realizing my hosting platform had this special setting.it works, all you need:PHP:JS (jQuery ajax): 

JavaScript private methods

Wayne Kao

[JavaScript private methods](https://stackoverflow.com/questions/55611/javascript-private-methods)

To make a JavaScript class with a public method I'd do something like:That way users of my class can:How do I create a private method that can be called by the buy_food and use_restroom methods but not externally by users of the class?In other words, I want my method implementation to be able to do:But this shouldn't work:How do I define private_stuff as a private method so both of these hold true?I've read Doug Crockford's writeup a few times but it doesn't seem like "private" methods can be called by public methods and "privileged" methods can be called externally.

2008-09-11 01:12:39Z

To make a JavaScript class with a public method I'd do something like:That way users of my class can:How do I create a private method that can be called by the buy_food and use_restroom methods but not externally by users of the class?In other words, I want my method implementation to be able to do:But this shouldn't work:How do I define private_stuff as a private method so both of these hold true?I've read Doug Crockford's writeup a few times but it doesn't seem like "private" methods can be called by public methods and "privileged" methods can be called externally.You can do it, but the downside is that it can't be part of the prototype:You can simulate private methods like this:More information on this technique here: http://webreflection.blogspot.com/2008/04/natural-javascript-private-methods.htmlJavaScript uses prototypes and does't have classes (or methods for that matter) like Object Oriented languages. A JavaScript developer need to think in JavaScript.Wikipedia quote:Solution using a self invoking function and the call function to call the private "method" :The call function allows us to call the private function with the appropriate context (this).If you are using node.js, you don't need the IIFE because you can take advantage of the module loading system:Load the file:The bind operator :: is an ECMAScript proposal and is implemented in Babel (stage 0).Load the file:In these situations when you have a public API, and you would like private and public methods/properties, I always use the Module Pattern. This pattern was made popular within the YUI library, and the details can be found here:http://yuiblog.com/blog/2007/06/12/module-pattern/It is really straightforward, and easy for other developers to comprehend. For a simple example:Here is the class which I created to understand what Douglas Crockford's has suggested in his site Private Members in JavaScriptI conjured up this: EDIT: Actually, someone has linked to a identical solution. Duh!I think such questions come up again and again because of the lack of understanding of the  closures. Сlosures is most important thing in JS. Every JS programmer have to feel the essence of it.1. First of all we need to make separate scope (closure).2. In this area, we can do whatever we want. And no one will know about it.3. For the world to know about our restaurant class, 

we have to return it from the closure.4. At the end, we have:5. Also, this approach has potential for inheritance and templatingI hope this helps someone better understand this subjectPersonally, I prefer the following pattern for creating classes in JavaScript :As you can see, it allows you to define both class properties and instance properties, each of which can be public and private.See also this Fiddle.All of this closure will cost you.  Make sure you test the speed implications especially in IE. You will find you are better off with a naming convention. There are still a lot of corporate web users out there that are forced to use IE6...Don't be so verbose. It's Javascript. Use a Naming Convention.After years of working in es6 classes, I recently started work on an es5 project (using requireJS which is already very verbose-looking). I've been over and over all the strategies mentioned here and it all basically boils down to use a naming convention:my-tooltip.js  Take any of the solutions that follow Crockford's private or priviledged pattern. For example:In any case where the attacker has no "execute" right on the JS context he has no way of accessing any "public" or "private" fields or methods. In case the attacker does have that access he can execute this one-liner:Note that the above code is generic to all constructor-type-privacy. It will fail with some of the solutions here but it should be clear that pretty much all of the closure based solutions can be broken like this with different replace() parameters. After this is executed any object created with new Foo() is going to have an eval method which can be called to return or change values or methods defined in the constructor's closure, e.g.:The only problem I can see with this that it won't work for cases where there is only one instance and it's created on load. But then there is no reason to actually define a prototype and in that case the attacker can simply recreate the object instead of the constructor as long as he has a way of passing the same parameters (e.g. they are constant or calculated from available values).In my opinion, this pretty much makes Crockford's solution useless. Since the "privacy" is easily broken the downsides of his solution (reduced readability & maintainability, decreased performance, increased memory) makes the "no privacy" prototype based method the better choice. I do usually use leading underscores to mark __private and _protected methods and fields (Perl style), but the idea of having privacy in JavaScript just shows how it's a misunderstood language. Therefore I disagree with Crockford except for his first sentence.So how do you get real privacy in JS? Put everything that is required to be private on the server side and use JS to do AJAX calls.The apotheosis of the Module Pattern: The Revealing Module PatternA neat little extension to a very robust pattern.If you want the full range of public and private functions with the ability for public functions to access private functions, layout code for an object like this:Here's what i enjoyed the most so far regarding private/public methods/members and instantiation in javascript:here is the article: http://www.sefol.com/?p=1090and here is the example:JSFiddle: http://jsfiddle.net/northkildonan/kopj3dt3/1/The module pattern is right in most cases. But if you have thousands of instances, classes save memory. If saving memory is a concern and your objects contain a small amount of private data, but have a lot of public functions, then you'll want all public functions to live in the .prototype to save memory.This is what I came up with:The object priv contains private properties. It is accessible through the public function getPriv(), but this function returns false unless you pass it the secret, and this is only known inside the main closure.What about this?Private variable lookup is impossible outside of the scope of the immediate function.

There is no duplication of functions, saving memory.The downside is that the lookup of private variables is clunky privateVars[this.id].cooked is ridiculous to type. There is also an extra "id" variable.Wrap all code in Anonymous Function: Then , all functions will be private ,ONLY  functions attached  to window object : Use this : You can do this now with es10 private methods. You just need to add a # before the method name.Similar to georgebrock but a little less verbose (IMHO)

Any problems with doing it this way? (I haven't seen it anywhere)edit: I realised this is kinda useless since every independent instantiation has its own copy of the public methods, thus undermining the use of the prototype.Private functions cannot access the public variables using module patternSince everybody was posting here his own code, I'm gonna do that too...I like Crockford because he introduced real object oriented patterns in Javascript. But he also came up with a new misunderstanding, the "that" one.So why is he using "that = this"? It has nothing to do with private functions at all. It has to do with inner functions! Because according to Crockford this is buggy code: So he suggested doing this:So as I said, I'm quite sure that Crockford was wrong his explanation about that and this (but his code is certainly correct). Or was he just fooling the Javascript world, to know who is copying his code? I dunno...I'm no browser geek ;DEDITAh, that's what is all about: What does 'var that = this;' mean in JavaScript?So Crockie was really wrong with his explanation....but right with his code, so he's still a great guy. :))In general I added the private Object _ temporarily to the object.

You have to open the privacy exlipcitly in the "Power-constructor" for the method.

If you call the method from the prototype, you will

be able to overwrite the prototype-methodThis is what I worked out:Needs one class of sugar code that you can find here. Also supports protected, inheritance, virtual, static stuff...https://github.com/nooning/JSClassI have created a new tool to allow you to have true private methods on the prototype

https://github.com/TremayneChrist/ProtectJSExample:You have to put a closure around your actual constructor-function, where you can define your private methods.

To change data of the instances through these private methods, you have to give them "this" with them, either as an function argument or by calling this function with .apply(this) :I know it's a bit too late but how about this?There are many answers on this question already, but nothing fitted my needs. So i came up with my own solution, I hope it is usefull for someone:As you can see this system works when using this type of classes in javascript. As far as I figured out none of the methods commented above did.See this answer for a a clean & simple 'class' solution with a private and public interface and support for compositionI prefer to store private data in an associated WeakMap.  This allows you to keep your public methods on the prototype where they belong.  This seems to be the most efficient way to handle this problem for large numbers of objects.

Fastest way to copy file in node.js

bonbonez

[Fastest way to copy file in node.js](https://stackoverflow.com/questions/11293857/fastest-way-to-copy-file-in-node-js)

Project that I am working on (node.js) implies lots of operations with the file system (copying/reading/writing etc). I'd like to know which methods are the fastest, and I'd be happy to get an advice. Thanks.

2012-07-02 12:38:56Z

Project that I am working on (node.js) implies lots of operations with the file system (copying/reading/writing etc). I'd like to know which methods are the fastest, and I'd be happy to get an advice. Thanks.This is a good way to copy a file in one line of code using streams:In node v8.5.0, copyFile was addedSame mechanism, but this adds error handling:I was not able to get the createReadStream/createWriteStream method working for some reason, but using fs-extra npm module it worked right away. I am not sure of the performance difference though.fs-extranpm install --save fs-extraSince Node.js 8.5.0 we have new fs.copyFile and fs.copyFileSync methods.Usage Example:Fast to write and convenient to use, with promise and error management.Same with async/await syntax:Well, usually it is good to avoid asynchronous file operations. Here is the short (i.e. no error handling) sync example:Mike Schilling's solution with error handling with a short-cut for the error event handler.If you don't care about it being async, and aren't copying gigabyte-sized files, and would rather not add another dependency just for a single function:benweet's solution checking visibility of the file before copy:Why not use nodejs built in copy function?It provide both async and sync version:https://nodejs.org/api/fs.html#fs_fs_copyfilesync_src_dest_flagsFor fast copies you should use the fs.constants.COPYFILE_FICLONE flag. It allows (for filesystems that support this) to not actually copy the content of the file. Just a new file entry is created, but it points to a Copy-on-Write "clone" of the source file.To do nothing/less is the fastest way of doing something ;)https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callbackUsing promises instead:This is what I personally use to copy a file and replace another file using node.js :)Mike's solution, but with promises:Improvement of one other answer.Features:Usage:Code:all above solutions that do not check an existence of a source file are dangerous... e.g.otherwise there is a risk in a scenario in case source and target are by a mistake replaced, your data will be permanently lost without noticing any error.

Smooth scrolling when clicking an anchor link

Only Bolivian Here

[Smooth scrolling when clicking an anchor link](https://stackoverflow.com/questions/7717527/smooth-scrolling-when-clicking-an-anchor-link)

I have a couple of hyperlinks on my page. A FAQ that users will read when they visit my help section.Using Anchor links, I can make the page scroll towards the anchor and guide the users there.Is there a way to make that scrolling smooth?But notice that he's using a custom JavaScript library. Maybe jQuery offers somethings like this baked in?

2011-10-10 19:19:34Z

I have a couple of hyperlinks on my page. A FAQ that users will read when they visit my help section.Using Anchor links, I can make the page scroll towards the anchor and guide the users there.Is there a way to make that scrolling smooth?But notice that he's using a custom JavaScript library. Maybe jQuery offers somethings like this baked in?Update April 2018: There's now a native way to do this:This is currently only supported in the most bleeding edge browsers.For older browser support, you can use this jQuery technique:And here's the fiddle: http://jsfiddle.net/9SDLw/If your target element does not have an ID, and you're linking to it by its name, use this:For increased performance, you should cache that $('html, body') selector, so that it doesn't run every single time an anchor is clicked:If you want the URL to be updated, do it within the animate callback:The correct syntax is:Simplifying: DRYExplanation of href*=\\#:The new hotness in CSS3. This is a lot easier than every method listed on this page and requires no Javascript. Just enter the below code into you css and all of a sudden links point to locations inside you own page will have a smooth scrolling animation.After that any links pointed towards a div will smoothly glide over to those sections.BTW, I spent hours trying to get this to work. Found the solution in some obscure comments section. It was buggy and wouldn't work in some tags. Didn't work in the body. It finally worked when I put it in html{} in the CSS file.this worked perfect for meI'm surprised no one has posted a native solution that also takes care of updating the browser location hash to match. Here it is:See tutorial: http://www.javascriptkit.com/javatutors/scrolling-html-bookmark-javascript.shtmlI suggest you to make this generic code : You can see a very good article here : jquery-effet-smooth-scroll-defilement-fluideOnly CSSAll you need to add only this. Now your internal links scrolling behavior will be smooth like a stream-flow.Note: All latest browsers (Opera, Chrome, Firefox etc) supports this.for detail understanding, read this articleOfficial:

http://css-tricks.com/snippets/jquery/smooth-scrolling/There are already a lot of good answers here - however they are all missing the fact that empty anchors have to be excluded. Otherwise those scripts generate JavaScript errors as soon as an empty anchor is clicked.In my opinion the correct answer is like this:Using JQuery:The answer given works but disables outgoing links. Below a version with an added bonus ease out (swing) and respects outgoing links.HTMLor With absolute Full URLjQueryModern browsers are a little faster these days. A setInterval might work. This function work well in Chrome and Firefox these days.(A little slow in safari, didn't bother with IE)There is a css way of doing this using scroll-behavior. Add the following property.And that is it. No JS required.PS: please check the browser compatibility.Adding this:is somehow nullifying the vertical offsetin Firefox and IE, ut not in Chrome. Basically, the page scrolls smoothly to the point at which it should stop based upon the offset, but then jumps down to where the page would go without the offset.It does add the hash to the end of the url, but pressing back does not take you back to the top, it just removes the hash from the url and leaves the viewing window where it sits.Here is the full js I am using:This solution will also work for the following URLs, without breaking anchor links to different pages.etc.I haven't tested this in all browsers, yet.This will make it easy to allow jQuery to discern your target hash and know when and where to stop.Tested and Verified Code   There is native support for smooth scrolling on hash id scrolls.You can take a look: https://www.w3schools.com/howto/howto_css_smooth_scroll.asp#section2I did this for both "/xxxxx#asdf" and "#asdf" href anchorsHere is the solution I implemented for multiple links and anchors, for a smooth scroll:http://www.adriantomic.se/development/jquery-localscroll-tutorial/

if you have your navigation links set up in a navigation div and declared with this structure: and your corresponding anchor tag destinations as so:Then just load this into the head of the document:Thanks to @AdriantomicIf you have a simple button on the page to scroll down to a div and want the back button to work by jumping to top, just add this code:This could be extended to jump to different divs too, by reading the hash value, and scrolling like Joseph Silbers answer.Never forget that offset() function is giving your element's position to document. So when you need scroll your element relative to its parent you should use this;The key point is getting scrollTop of scroll-div and add it to scrollTop. If you won't do that position() function always gives you different position values.You can use window.scroll() with behavior: smooth and top set to the anchor tag's offset top which ensures that the anchor tag will be at the top of the viewport.Demo:You can just set the CSS property scroll-behavior to smooth (which most modern browsers support) which obviates the need for Javascript.thanks for sharing, Joseph Silber. Here your 2018 solution as ES6 with a minor change to keep the standard behavior (scroll to top):Requires jquery and animates to anchor tag with the specified name instead of id, while adding the hash to browser url. Also fixes an error in most answers with jquery where the # sign is not prefixed with an escaping backslash. The back button, unfortunately, does not navigate back properly to previous hash links...

Most efficient method to groupby on an array of objects

Rail24

[Most efficient method to groupby on an array of objects](https://stackoverflow.com/questions/14446511/most-efficient-method-to-groupby-on-an-array-of-objects)

What is the most efficient way to groupby objects in an array?For example, given this array of objects:I’m displaying this information in a table. I’d like to groupby different methods, but I want to sum the values.I’m using Underscore.js for its groupby function, which is helpful, but doesn’t do the whole trick, because I don’t want them「split up」but「merged」, more like the SQL group by method.What I’m looking for would be able to total specific values (if requested).So if I did groupby Phase, I’d want to receive:And if I did groupy Phase / Step, I’d receive:Is there a helpful script for this, or should I stick to using Underscore.js, and then looping through the resulting object to do the totals myself?

2013-01-21 20:18:24Z

What is the most efficient way to groupby objects in an array?For example, given this array of objects:I’m displaying this information in a table. I’d like to groupby different methods, but I want to sum the values.I’m using Underscore.js for its groupby function, which is helpful, but doesn’t do the whole trick, because I don’t want them「split up」but「merged」, more like the SQL group by method.What I’m looking for would be able to total specific values (if requested).So if I did groupby Phase, I’d want to receive:And if I did groupy Phase / Step, I’d receive:Is there a helpful script for this, or should I stick to using Underscore.js, and then looping through the resulting object to do the totals myself?If you want to avoid external libraries, you can concisely implement a vanilla version of groupBy() like so:Using ES6 Map object:About Map:

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Mapwith ES6:Although the linq answer is interesting, it's also quite heavy-weight.  My approach is somewhat different:You can see it in action on JSBin.I didn't see anything in Underscore that does what has does, although I might be missing it.  It's much the same as _.contains, but uses _.isEqual rather than === for comparisons.  Other than that, the rest of this is problem-specific, although with an attempt to be generic.Now DataGrouper.sum(data, ["Phase"]) returnsAnd DataGrouper.sum(data, ["Phase", "Step"]) returnsBut sum is only one potential function here.  You can register others as you like:and now DataGrouper.max(data, ["Phase", "Step"]) will returnor if you registered this:then calling DataGrouper.tasks(data, ["Phase", "Step"]) will get youDataGrouper itself is a function.  You can call it with your data and a list of the properties you want to group by.  It returns an array whose elements are object with two properties: key is the collection of grouped properties, vals is an array of objects containing the remaining properties not in the key.  For example, DataGrouper(data, ["Phase", "Step"]) will yield:DataGrouper.register accepts a function and creates a new function which accepts the initial data and the properties to group by.  This new function then takes the output format as above and runs your function against each of them in turn, returning a new array.  The function that's generated is stored as a property of DataGrouper according to a name you supply and also returned if you just want a local reference.Well that's a lot of explanation.  The code is reasonably straightforward, I hope!I would check lodash groupBy it seems to do exactly what you are looking for. It is also quite lightweight and really simple.Fiddle example: https://jsfiddle.net/r7szvt5k/Provided that your array name is arr the groupBy with lodash is just:This is probably more easily done with linq.js, which is intended to be a true implementation of LINQ in JavaScript (DEMO):result:Or, more simply using the string-based selectors (DEMO):You can build an ES6 Map from array.reduce(). This has a few advantages over the other solutions: As an example of the last point, imagine I have an array of objects that I want to do a (shallow) merge on by id, like this:To do this, I would usually start by grouping by id, and then merging each of the resulting arrays. Instead, you can do the merge directly in the reduce():From: http://underscorejs.org/#groupByYou can do it with Alasql JavaScript library:Try this example at jsFiddle.BTW: On large arrays (100000 records and more) Alasql faster tham Linq. See test at jsPref. Comments:MDN has this example in their Array.reduce() documentation. Although the question have some answers and the answers look a bit over complicated, I suggest to use vanilla Javascript for group-by with a nested (if necessary) Map.Without mutations:i'd like to suggest my approach. First, separate grouping and aggregating. Lets declare prototypical "group by" function. It takes another function to produce "hash" string for each array element to group by. when grouping is done you can aggregate data how you need, in your casein common it works. i have tested this code in chrome console. and feel free to improve and find mistakes ;)This solution takes any arbitrary function (not a key) so it's more flexible than solutions above, and allows arrow functions, which are similar to lambda expressions used in LINQ:NOTE: whether you want to extend Array's prototype is up to you.Example supported in most browsers:Example using arrow functions (ES6):Both examples above return:This one outputs array.Based on previous answersand it's a little nicer to look at with object spread syntax, if your environment supports.Here, our reducer takes the partially-formed return value (starting with an empty object), and returns an object composed of the spread out members of the previous return value, along with a new member whose key is calculated from the current iteree's value at prop and whose value is a list of all values for that prop along with the current value.Checked answer -- is not grouping solve, however is a direct answer.REAL GROUP BY for Array of Objects by some field with calculated key name.Play with estKey -- you may group by more then one fieldAlso you can groups data recursively. For example initially group by Phase, then by Step field.Verify it by yourself, just run it. Это то самое оно, что люди называют группировкой?Wish you be a successful.Да здравствуют высокие показатели мастерства программистов во имя процветания всего человечества! Ура, товарищи!Imagine that you have something like this:[{id:1, cat:'sedan'},{id:2, cat:'sport'},{id:3, cat:'sport'},{id:4, cat:'sedan'}]By doing this:

const categories =  [...new Set(cars.map((car) => car.cat))]You will get this:

['sedan','sport']Explanation:

 1. First, we are creating a new Set by passing an array. Because Set only allows unique values, all duplicates will be removed.Set Doc:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set

Spread OperatorDoc: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntaxLets generate a generic Array.prototype.groupBy() tool. Just for variety let's use ES6 fanciness the spread operator for some Haskellesque pattern matching on a recursive approach. Also let's make our Array.prototype.groupBy() to accept a callback which takes the item (e) the index (i) and the applied array (a) as arguments.Ceasar's answer is good, but works only for inner properties of the elements inside the array (length in case of string).this implementation works more like: this linkhope this helps...ES6 reduce based version version with the support for function iteratee. Works just as expected if the iteratee function is not provided:In the context of the OP question:Another ES6 version which reverses the grouping and uses the values as keys and the keys as the grouped values:Note: functions are posted in their short form (one line) for brevity and to relate just the idea. You can expand them and add additional error checking etc.Here is a ES6 version that won't break on null membersJust to add to Scott Sauyet's answer, some people were asking in the comments how to use his function to groupby value1, value2, etc., instead of grouping just one value.All it takes is to edit his sum function:leaving the main one (DataGrouper) unchanged:With sort featureSample:From @mortb, @jmarceli answer and from this post,I take the advantage of JSON.stringify() to be the identity for the PRIMITIVE VALUE multiple columns of group by.Here's a nasty, hard to read solution using ES6:I have improved answers. This function takes array of group fields and return grouped object whom key is also object of group fields.

How can I shuffle an array? [duplicate]

Anshul

[How can I shuffle an array? [duplicate]](https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array)

I want to shuffle an array of elements in JavaScript like these:

2011-06-08 04:52:41Z

I want to shuffle an array of elements in JavaScript like these:Use the modern version of the Fisher–Yates shuffle algorithm:Note however, that swapping variables with destructuring assignment causes significant performance loss, as of October 2017.You could use the Fisher-Yates Shuffle (code adapted from this site):

Is there a better way of writing v = (v == 0 ? 1 : 0); [closed]

Ollie Glass

[Is there a better way of writing v = (v == 0 ? 1 : 0); [closed]](https://stackoverflow.com/questions/6911235/is-there-a-better-way-of-writing-v-v-0-1-0)

I want to toggle a variable between 0 and 1. If it's 0 I want to set it to 1, else if it's 1 I want to set it to 0.This is such a fundamental operation that I write so often I'd like to investigate the shortest, clearest possible way of doing it. Here's my best so far:Can you improve on this?Edit: the question is asking how to write the above statement in the fewest characters while retaining clarity - how is this 'not a real question'? This wasn't intended to be a code-golf exercise, though some interesting answers have come out of people approaching it as golf - it's nice to see golf being used in a constructive and thought-provoking manner.

2011-08-02 11:22:54Z

I want to toggle a variable between 0 and 1. If it's 0 I want to set it to 1, else if it's 1 I want to set it to 0.This is such a fundamental operation that I write so often I'd like to investigate the shortest, clearest possible way of doing it. Here's my best so far:Can you improve on this?Edit: the question is asking how to write the above statement in the fewest characters while retaining clarity - how is this 'not a real question'? This wasn't intended to be a code-golf exercise, though some interesting answers have come out of people approaching it as golf - it's nice to see golf being used in a constructive and thought-provoking manner.You can simply use:This of course assumes that the variable is initialised properly, i.e. that it only has the value 0 or 1.Another method that is shorter but uses a less common operator:To be clear; I never approached this question as code golf, just to find a short way of doing the task without using any obscuring tricks like side effects of operators.Since 0 is a false value and 1 is a true value.If you are happy to use true and false instead of numbersor if they must be numbers:v = (v + 1) % 2 and if you need to cycle through more values just change 2 for (n + 1). Say you need to cycle 0,1,2 just do v = (v + 1) % 3.You could write a function for it and use it like:v = inv(v)If you don't care about any possibility other than 1:In the above case, v will end up being 1 if v is 0, false, undefined or null.  Take care using this kind of approach - v will be 0 even if v is "hello world".Lines like v = 1 - v, or v ^= 1 or v= +!v will all get the job done, but they constitute what I would refer to as hacks. These are not beautiful lines of code, but cheap tricks to have the intended effect. 1 - v does not communicate "toggle the value between 0 and 1". This makes your code less expressive and introduces a place (albeit a small one) where another developer will have to parse your code.Having instead a function like v = toggle(v) communicates the intent at the quickest glance.(Honesty and mathematical integrity - given the number of votes on this "answer" - have led me to edit this answer.  I held off as long as possible because it was intended as a short quip and not as anything "deep" so putting in any explanation seemed counter to the purpose.  However, the comments are making it clear that I should be clear to avoid misunderstanding.)My original answer:The wording of this part of the specification:implies that the most accurate solution is:First, the confession: I did get my delta functions confused.  The Kronecker delta would have been slightly more appropriate, but not by much as I wanted something that was domain-independent (the Kronecker delta is mainly used just for integers).  But I really shouldn't have used delta functions at all, I should have said:Let me clarify.  Recall that a function is a triple, (X,Y,f), where X and Y are sets (called the domain and codomain respectively) and f is a rule that assigns an element of Y to each element of X.  We often write the triple (X,Y,f) as f: X &rightarrow; Y.  Given a subset of X, say A, there is a characteristic function which is a function χA: X &rightarrow; {0,1} (it can also be thought of as a function to a larger codomain such as &Nopf; or &Ropf;).  This function is defined by the rule:χA(x) = 1 if x &in; A and χA(x) = 0 if x ∉ A.If you like truth tables, it's the truth table for the question "Is the element x of X an element of the subset A?".So from this definition, it's clear that the characteristic function is what is needed here, with X some big set containing 0 and A = {0}.  That's what I should have written.And so to delta functions.  For this, we need to know about integration.  Either you already know it, or you don't.  If you don't, nothing I can say here will tell you about the intricacies of the theory, but I can give a one sentence summary.  A measure on a set X is in essence "that which is needed to make averages work".  That is to say that if we have a set X and a measure μ on that set then there is a class of functions X &rightarrow; &Ropf;, called measurable functions for which the expression ∫X f dμ makes sense and is, in some vague sense, the "average" of f over X.Given a measure on a set, one can define a "measure" for subsets of that set.  This is done by assigning to a subset the integral of its characteristic function (assuming that this is a measurable function).  This can be infinite, or undefined (the two are subtly different).There are lots of measures around, but there are two that are important here.  One is the standard measure on the real line, &Ropf;.  For this measure, then ∫&Ropf; f dμ is pretty much what you get taught in school (is calculus still taught in schools?): sum up little rectangles and take smaller and smaller widths.  In this measure, the measure of an interval is its width.  The measure of a point is 0.Another important measure, which works on any set, is called the point measure.  It is defined so that the integral of a function is the sum of its values:∫X f dμ = ∑x &in;X f(x)This measure assigns to each singleton set the measure 1.  This means that a subset has finite measure if and only if it is itself finite.  And very few functions have finite integral.  If a function has a finite integral, it must be non-zero only on a countable number of points.  So the vast majority of functions that you probably know do not have finite integral under this measure.And now to delta functions.  Let's take a very broad definition.  We have a measurable space (X,μ) (so that's a set with a measure on it) and an element a &in; X.  We "define" the delta function (depending on a) to be the "function" δa: X &rightarrow; &Ropf; with the property that δa(x) = 0 if x ≠ a and ∫X δa dμ = 1.The most important fact about this to get a-hold of is this: The delta function need not be a function.  It is not properly defined: I have not said what δa(a) is.What you do at this point depends on who you are.  The world here divides in to two categories.  If you are a mathematician, you say the following:If you are not a mathematician, you say the following:Having now offended my audience, I shall continue.The dirac delta is usually taken to be the delta function of a point (often 0) in the real line with its standard measure.  So those who are complaining in the comments about me not knowing my deltas are doing so because they are using this definition.  To them, I apologise: although I can wriggle out of that by using the Mathematician's defence (as popularised by Humpty Dumpty: simply redefine everything so that it is correct), it is bad form to use a standard term to mean something different.But there is a delta function which does do what I want it to do and it is that which I need here.  If I take a point measure on a set X then there is a genuine function δa : X &rightarrow; &Ropf; which satisfies the criteria for a delta function.  This is because we are looking for a function X &rightarrow; &Ropf; which is zero except at a and such that the sum of all of its values is 1.  Such a function is simple: the only missing piece of information is its value at a, and to get the sum to be 1 we just assign it the value 1.  This is none other than the characteristic function on {a}.  Then:∫X δa dμ = ∑x &in; X δa(x) = δa(a) = 1.So in this case, for a singleton set, the characteristic function and the delta function agree.In conclusion, there are three families of "functions" here:The second of these is the most general as any of the others is an example of it when using the point measure.  But the first and third have the advantage that they are always genuine functions.  The third is actually a special case of the first, for a particular family of domains (integers, or some subset thereof).So, finally, when I originally wrote the answer I wasn't thinking properly (I wouldn't go so far as to say that I was confused, as I hope I've just demonstrated I do know what I'm talking about when I actually think first, I just didn't think very much).  The usual meaning of the dirac delta is not what is wanted here, but one of the points of my answer was that the input domain was not defined so the Kronecker delta would also not have been right.  Thus the best mathematical answer (which I was aiming for) would have been the characteristic function.I hope that that is all clear; and I also hope that I never have to write a mathematical piece again using HTML entities instead of TeX macros!You could do The decrement sets the value to 0 or -1, and then the Math.abs converts -1 to +1.in general whenever you need to toggle between two values , you can just subtract the current value from the sum of the two toggle values :If it must be the integer 1 or 0, then the way you're doing it is fine, though parentheses aren't needed.  If these a are to be used as booleans, then you can just do:Is enough !There are three solutions I would like to propose. All of them convert any value to 0 (if 1, true etc.) or 1 (if 0, false, null etc.):and one additional, already mentioned, but clever and fast (although works only for 0s and 1s):You can use the following solution:This will first convert the integer to the opposite boolean (0 to True and any other value to False), then will treat it as integer when multiplying by 1. As a result 0 will be converted to 1 and any other value to 0.As a proof see this jsfiddle and provide any values you wish to test: jsfiddle.net/rH3g5/The results are as follows:As mblase75 noted, jAndy had some other solution that works as mine:It also first makes boolean from the original value, but uses + instead of 1* to convert it into integer. The result is exactly the same, but the notation is shorter.The another approach is to use ~~ operator:It is pretty uncommon and always converts to integer from boolean.To sum up another answer, a comment and my own opinion, I suggest combining two things:Here is the function which you could place in a library or maybe wrap it in a Plugin for another Javascript Framework.And the usage is simply:The advantages are:I don't know why you want to build your own booleans? I like the funky syntaxes, but why not write understandable code?This is not the shortest/fastest, but the most clearest (and readable for everyone) is using the well-known if/else state:If you want to be really clear, you should use booleans instead of numbers for this. They are fast enough for most cases. With booleans, you could just use this syntax, which will win in shortness:Another form of your original solution:EDIT: Thanks TehShrike and Guffa for pointing out the error in my original solution.I would make it more explicit.What does v mean?For example when v is some state. Create an object Status. In DDD an value object.Implement the logic in this value object. Then you can write your code in a more functional way which is more readable. Switching status can be done by creating a new Status based on the current status. Your if statement / logic is then encapsulated in your object, which you can unittest. An valueObject is always immutable, so it has no identity. So for changing it's value you have to create a new one.Example:Another way to do it:This is missing:It works as round robin as well:OrThe charme of the last solution, it works with all other values as well.For a very special case, like to get a (changing) value and undefined, this pattern may be helpful:Just for kicks: v = Math.pow(v-1,v) also toggles between 1 and 0.Since this is JavaScript, we can use the unary + to convert to int:This will logical NOT the value of v (giving true if v == 0 or false if v == 1). Then we convert the returned boolean value into its corresponding integer representation.One more:

v=++v%2(in C it would be simple ++v%=2)ps. Yeah, I know it's double assignment, but this is just raw rewrite of C's method (which doesn't work as is, cause JS pre-increment operator dosen't return lvalue.If you're guaranteed your input is either a 1 or a 0, then you could use:define an array{1,0}, set v to v[v], therefore v with a value of 0 becomes 1, and vica versa.Another creative way of doing it, with v being equal to any value, will always return 0 or 1If possible values for v are only 0 and 1, then for any integer x, the expression:

v = Math.pow((Math.pow(x, v) - x), v);

will toggle the value.I know this is an ugly solution and the OP was not looking for this...but I was thinking about just another solution when I was in the loo :PUntested, but if you're after a boolean I think var v = !v will work.Reference: http://www.jackfranklin.co.uk/blog/2011/05/a-better-way-to-reverse-variableswill work for v=0 and v=1; and toggle the state;If there are just two values, as in this case(0, 1), i believe it's wasteful to use int. Rather go for boolean and work in bits. I know I'm assuming but in case of toggle between two states boolean seems to be ideal choice. Well, As we know that in javascript only that Boolean comparison will also give you expected result.i.e. v = v == 0 is enough for that.Below is the code for that:JSFiddle: https://jsfiddle.net/vikash2402/83zf2zz0/Hoping this will help you :)It will type cast the Inverted Boolean value to Number, which is the desired output.

Query-string encoding of a Javascript Object

Napolux

[Query-string encoding of a Javascript Object](https://stackoverflow.com/questions/1714786/query-string-encoding-of-a-javascript-object)

Do you know a fast and simple way to encode a Javascript Object into a string that I can pass via a GET Request?No jQuery, no other frameworks - just plain Javascript :)

2009-11-11 12:07:37Z

Do you know a fast and simple way to encode a Javascript Object into a string that I can pass via a GET Request?No jQuery, no other frameworks - just plain Javascript :)like this?Edit: this one also converts recursive objects (using php "array" notation for the query string)jQuery has a function for this, jQuery.param(), if you're already using it you can use that:

http://api.jquery.com/jquery.param/example:str now contains width=1680&height=1050Just use URLSearchParams This works in all current browsersEdit: I like this one-liner, but I bet it would be a more popular answer if it matched the accepted answer semantically:Here's a one liner in ES6:Reference: https://nodejs.org/api/querystring.htmlI suggest using the URLSearchParams interface:A small amendment to the accepted solution by user187291:Checking for hasOwnProperty on the object makes JSLint/JSHint happy, and it prevents accidentally serializing methods of the object or other stuff if the object is anything but a simple dictionary. See the paragraph on for statements in this page: http://javascript.crockford.com/code.htmlWell, everyone seems to put his one-liner here so here goes mine:Do you need to send arbitrary objects? If so, GET is a bad idea since there are limits to the lengths of URLs that user agents and web servers will accepts. My suggestion would be to build up an array of name-value pairs to send and then build up a query string:This method converts a Javascript object into a URI Query String. Also handles nested arrays and objects (in Rails / PHP syntax):Example Usage:use JSON.take a look at this question for ideas on how to implement.Here's the coffeescript version of accepted answer. This might save time to someone.Here's a concise & recursive version with Object.entries.  It handles arbitrarily nested arrays, but not nested objects.  It also removes empty elements:E.g.:This one skips null/undefined valuesIn ES7 you can write this in one line:Single line to convert Object into Query String in case somebody need it againI have a simpler solution that does not use any third-party library and is already apt to be used in any browser that has "Object.keys" (aka all modern browsers + edge + ie):In ES5

In ES3

If you want to convert a nested object recursively and the object may or may not contain arrays (and the arrays may contain objects or arrays, etc), then the solution gets a little more complex. This is my attempt.I've also added some options to choose if you want to record for each object member at what depth in the main object it sits, and to choose if you want to add a label to the members that come from converted arrays.Ideally you should test if the thing parameter really receives an object or array.Addition for accepted solution, this works with objects & array of objects:Also have added objName if you're using object parameters like in asp.net mvc action methods.A little bit look betterI made a comparison of JSON stringifiers and the results are as follows:The shortest among them is URL Object Notation.ok, it's a older post but i'm facing this problem and i have found my personal solution.. maybe can help someone else..The above answers fill not work if you have a lot of nested objects.

Instead you can pick the function param from here - https://github.com/knowledgecode/jquery-param/blob/master/jquery-param.js

It worked very well for me!ES6 SOLUTION FOR QUERY STRING ENCODING OF A JAVASCRIPT OBJECTThis is a solution that will work for .NET backends out of the box. I have taken the primary answer of this thread and updated it to fit our .NET needs.here is a simple implementation that gets an object and converts it to query params stringMy implementation of encoding object as query string, using reduce:Just another way (no recursive object):Refer from the answer @user187291, add "isArray" as parameter to make the json nested array to be converted.To make the result : staffId=00000001&Detail[0].identityId=123456&Detail[1].identityId=654321

Insert code into the page context using a content script

André Alves

[Insert code into the page context using a content script](https://stackoverflow.com/questions/9515704/insert-code-into-the-page-context-using-a-content-script)

I'm learning how to create Chrome extensions. I just started developing one to catch YouTube events. I want to use it with YouTube flash player (later I will try to make it compatible with HTML5).manifest.json:myScript.js:The problem is that the console gives me the "Started!", but there is no "State Changed!" when I play/pause YouTube videos.When this code is put in the console, it worked. What am I doing wrong?

2012-03-01 11:53:21Z

I'm learning how to create Chrome extensions. I just started developing one to catch YouTube events. I want to use it with YouTube flash player (later I will try to make it compatible with HTML5).manifest.json:myScript.js:The problem is that the console gives me the "Started!", but there is no "State Changed!" when I play/pause YouTube videos.When this code is put in the console, it worked. What am I doing wrong?Content scripts are executed in an "isolated world" environment. You have to inject your state() method into the page itself.When you want to use one of the chrome.* APIs in the script, you have to implement a special event handler, as described in this answer: Chrome extension - retrieving Gmail's original message.Otherwise, if you don't have to use chrome.* APIs, I strongly recommend to inject all of your JS code in the page via adding a <script> tag:This is the easiest/best method when you have lots of code. Include your actual JS code in a file within your extension, say script.js. Then let your content script be as follows (explained here: Google Chome「Application Shortcut」Custom Javascript):Note: If you use this method, the injected script.js file has to be added to the "web_accessible_resources" section (example). If you do not, Chrome will refuse to load your script and display the following error in the console:This method is useful when you want to quickly run a small piece of code. (See also: How to disable facebook hotkeys with Chrome extension?).Note: template literals are only supported in Chrome 41 and above. If you want the extension to work in Chrome 40-, use:For a big chunk of code, quoting the string is not feasible. Instead of using an array, a function can be used, and stringified:This method works, because the + operator on strings and a function converts all objects to a string. If you intend on using the code more than once, it's wise to create a function to avoid code repetition. An implementation might look like:Note: Since the function is serialized, the original scope, and all bound properties are lost!Sometimes, you want to run some code immediately, e.g. to run some code before the <head> element is created. This can be done by inserting a <script> tag with textContent (see method 2/2b).An alternative, but not recommended is to use inline events. It is not recommended because if the page defines a Content Security policy that forbids inline scripts, then inline event listeners are blocked. Inline scripts injected by the extension, on the other hand, still run.

If you still want to use inline events, this is how:Note: This method assumes that there are no other global event listeners that handle the reset event. If there is, you can also pick one of the other global events. Just open the JavaScript console (F12), type document.documentElement.on, and pick on of the available events.Occasionally, you need to pass an arbitrary variable to the injected function. For example:To inject this code, you need to pass the variables as arguments to the anonymous function. Be sure to implement it correctly! The following will not work:The solution is to use JSON.stringify before passing the argument. Example:If you have many variables, it's worthwhile to use JSON.stringify once, to improve readability, as follows:The only thing missing hidden from Rob W's excellent answer is how to communicate between the injected page script and the content script.On the receiving side (either your content script or the page script) add an event listener:On the initiator side (content or page script) send the event:You can perform stringifying/parsing explicitly to strip the non-transferrable data, otherwise only null will be transferred for the entire detail in modern Chrome, see crbug.com/917703.I've also faced the problem of ordering of loaded scripts, which was solved through sequential loading of scripts. The loading is based on Rob W's answer.The example of usage would be:Actually, I'm kinda new to JS, so feel free to ping me to the better ways.in Content script , i add script tag to the head which binds a 'onmessage' handler, inside the handler i use , eval to execute code.

In booth content script i use onmessage handler as well , so i get two way communication. 

Chrome DocspmListener.js is a post message url listener This way , I can have 2 way communication between CS to Real Dom.

Its very usefull for example if you need to listen webscoket events ,

or to any in memory variables or events.If you wish to inject pure function, instead of text, you can use this method:And you can pass parameters (unfortunatelly no objects and arrays can be stringifyed) to the functions. Add it into the baretheses, like so:

Use of .apply() with 'new' operator. Is this possible?

Premasagar

[Use of .apply() with 'new' operator. Is this possible?](https://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible)

In JavaScript, I want to create an object instance (via the new operator), but pass an arbitrary number of arguments to the constructor. Is this possible?What I want to do is something like this (but the code below does not work):The AnswerFrom the responses here, it became clear that there's no built-in way to call .apply() with the new operator. However, people suggested a number of really interesting solutions to the problem.My preferred solution was this one from Matthew Crumley (I've modified it to pass the arguments property):

2009-10-22 12:15:09Z

In JavaScript, I want to create an object instance (via the new operator), but pass an arbitrary number of arguments to the constructor. Is this possible?What I want to do is something like this (but the code below does not work):The AnswerFrom the responses here, it became clear that there's no built-in way to call .apply() with the new operator. However, people suggested a number of really interesting solutions to the problem.My preferred solution was this one from Matthew Crumley (I've modified it to pass the arguments property):With ECMAScript5's Function.prototype.bind things get pretty clean:It can be used as follows:or even directly:This and the eval-based solution are the only ones that always work, even with special constructors like Date:editA bit of explanation: 

We need to run new on a function that takes a limited number of arguments. The bind method allows us to do it like so:The anything parameter doesn't matter much, since the new keyword resets f's context. However, it is required for syntactical reasons. Now, for the bind call: We need to pass a variable number of arguments, so this does the trick:Let's wrap that in a function. Cls is passed as arugment 0, so it's gonna be our anything.Actually, the temporary f variable is not needed at all:Finally, we should make sure that bind is really what we need. (Cls.bind may have been overwritten). So replace it by Function.prototype.bind, and we get the final result as above.Here's a generalized solution that can call any constructor (except native constructors that behave differently when called as functions, like String, Number, Date, etc.) with an array of arguments:An object created by calling construct(Class, [1, 2, 3]) would be identical to an object created with new Class(1, 2, 3).You could also make a more specific version so you don't have to pass the constructor every time. This is also slightly more efficient, since it doesn't need to create a new instance of the inner function every time you call it.The reason for creating and calling the outer anonymous function like that is to keep function F from polluting the global namespace. It's sometimes called the module pattern.[UPDATE]For those who want to use this in TypeScript, since TS gives an error if F returns anything:If your environment supports ECMA Script 2015's spread operator (...), you can simply use it like thisNote: Now that the ECMA Script 2015's specifications are published and most JavaScript engines are actively implementing it, this would be the preferred way of doing this.You can check the Spread operator's support in few of the major environments, here.Suppose you've got an Items constructor which slurps up all the arguments you throw at it:You can create an instance with Object.create() and then .apply() with that instance:Which when run prints 10 since 1 + 2 + 3 + 4 == 10:In ES6, Reflect.construct() is quite convenient:@Matthew

I think it's better to fix the constructor property also.You could move the init stuff out into a separate method of Something's prototype:An improved version of @Matthew's answer. This form has the slight performance benefits obtained by storing the temp class in a closure, as well as the flexibility of having one function able to be used to create any classThis would be used by calling applyCtor(class, [arg1, arg2, argn]);This answer is a little late, but figured anyone who sees this might be able to use it. There is a way to return a new object using apply. Though it requires one little change to your object declaration.For the first if statement to work in testNew you have to return this; at the bottom of the function. So as an example with your code:Update: I've changed my first example to sum any number of arguments, instead of just two.I just came across this problem, and I solved it like this: Yeah, it's a bit ugly, but it solves the problem, and it's dead simple.if you're interested in an eval-based solutionThis works!See also how CoffeeScript does it.s = new Something([a,b,c]...)becomes:This constructor approach works both with and without the new keyword:It assumes support for Object.create but you could always polyfill that if you're supporting older browsers. See the support table on MDN here.Here's a JSBin to see it in action with console output.Solution without ES6 or polyfills:

output

Demo {arg1: "X", arg2: "Y", arg3: "Z"}

... or "shorter" way:

edit:

I think this might be a good solution:You can't call a constructor with a variable number of arguments like you want with the new operator.What you can do is change the constructor slightly. Instead of:Do this instead:Or if you must use an array:Matthew Crumley's solutions in CoffeeScript:orIf your target browser doesn't support ECMAScript 5 Function.prototype.bind, the code won't work. It is not very likely though, see compatibilty table.modified @Matthew answer. Here I can pass any number of parameters to function as usual (not array). Also 'Something' is not hardcoded into:This one-liner should do it:While the other approaches are workable, they're unduly complex.  In Clojure you generally create a function that instantiates types/records and use that function as the mechanism for instantiation.  Translating this to JavaScript:By taking this approach you avoid the use of new except as described above.  And this function, of course, has no issues working with apply or any number of other functional programming features.By using this approach, all of your type constructors (e.g. Person) are vanilla, do-nothing constructors.  You just pass in arguments and assign them to properties of the same name.  The hairy details go in the constructor function (e.g. person).It is of little bother having to create these extra constructor functions since they are a good practice anyhow.  They can be convenient since they allow you to potentially have several constructor functions with different nuances.It's also intresting to see how the issue of reusing the temporary F() constructor, was addressed by using arguments.callee, aka the creator/factory function itself:

http://www.dhtmlkitchen.com/?category=/JavaScript/&date=2008/05/11/&entry=Decorator-Factory-AspectAny function (even a constructor) can take a variable number of arguments. Each function has an "arguments" variable which can be cast to an array with [].slice.call(arguments).The above tests produce the following output:Here is my version of createSomething:Based on that, I tried to simulate the new keyword of JavaScript: I tested it and it seems that it works perfectly fine for all scenarios. It also works on native constructors like Date. Here are some tests:Yes we can, javascript is more of prototype inheritance in nature.when we create an object with "new" then our created object INHERITS getAge(), But if we used apply(...) or call(...) to call Actor, then we are passing an object for "this" but the object we pass WON'T inherit from Actor.prototypeunless, we directly pass apply or call Actor.prototype but then.... "this" would point to "Actor.prototype" and this.name would write to: Actor.prototype.name. Thus affecting all other objects created with Actor...since we overwrite the prototype rather than the instanceLet's try with applyBy passing Actor.prototype to Actor.call() as the first argument, when the Actor() function is ran, it executes this.name=name, Since "this" will point to Actor.prototype, this.name=name; means Actor.prototype.name=name;Coming back to orginal question how to use new operator with apply, here is my take.... since ES6 this is possible through the Spread operator, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator#Apply_for_newThis answer was already, sort of given in comment https://stackoverflow.com/a/42027742/7049810, but seems to have been missed by mostActually the simplest method is:A revised solution from @jordancpaul's answer.Make an anonymous prototype and apply the Something prototype to it using the arguments and then create a new instance of that anonymous prototype. The one disadavantage of this is it will not pass the s instanceof Something check, though it is identical, it is basically an instance of a clone.Thanks to posts here I've used it this way:and implementation:

How do you check if a selector matches something in jQuery? [duplicate]

One Crayon

[How do you check if a selector matches something in jQuery? [duplicate]](https://stackoverflow.com/questions/299802/how-do-you-check-if-a-selector-matches-something-in-jquery)

In Mootools, I'd just run if ($('target')) { ... }.  Does if ($('#target')) { ... } in jQuery work the same way?

2008-11-18 19:13:31Z

In Mootools, I'd just run if ($('target')) { ... }.  Does if ($('#target')) { ... } in jQuery work the same way?As the other commenters are suggesting the most efficient way to do it seems to be: If you absolutely must have an exists() function - which will be slower- you can do:Then in your code you can useAs answered hereno, jquery always returns a jquery object regardless if a selector was matched or not.

You need to use .lengthif you used:you would imply that chaining was possible when it is not.This would be betterI think most of the people replying here didn't quite understand the question, or else I might be mistaken.The question is "how to check whether or not a selector exists in jQuery."Most people have taken this for "how to check whether an element exists in the DOM using jQuery." Hardly interchangeable.jQuery allows you to create custom selectors, but see here what happens when you try to use on e before initializing it;After running into this, I realized it was simply a matter of checkingCheers.Yet another way:Alternatively:I prefer the Which basically checks if this elements is a kind of "*" (any element).

Just a cleaner syntax and the "is" makes more sense inside an "if"For me .exists doesn't work, so I use the index :firstly create a function:then

How to fix Error: listen EADDRINUSE while using nodejs?

Danny Fox

[How to fix Error: listen EADDRINUSE while using nodejs?](https://stackoverflow.com/questions/9898372/how-to-fix-error-listen-eaddrinuse-while-using-nodejs)

If I run a server with the port 80, and I try to use xmlHTTPrequest i get this error: Error: listen EADDRINUSEWhy is it problem for nodejs, if I want to do a request, while I run a server on the port 80? For the webbrowsers it is not a problem: I can surf on the internet, while the server is running.The server is:And the request:

2012-03-27 22:00:59Z

If I run a server with the port 80, and I try to use xmlHTTPrequest i get this error: Error: listen EADDRINUSEWhy is it problem for nodejs, if I want to do a request, while I run a server on the port 80? For the webbrowsers it is not a problem: I can surf on the internet, while the server is running.The server is:And the request:EADDRINUSE means that the port number which listen() tries to bind the server to is already in use.So, in your case, there must be running a server on port 80 already.If you have another webserver running on this port you have to put node.js behind that server and proxy it through it.You should check for the listening event like this, to see if the server is really listening:What really helped for me was:But this will kill a system process.With you can check if it worked.The aforementioned killall -9 node, suggested by Patrick works as expected and solves the problem but you may want to read the edit part of this very answer about why kill -9 may not be the best way to do it. On top of that you might want to target a single process rather than blindly killing all active processes.In that case, first get the process ID (PID) of the process running on that port (say 8888):lsof -i tcp:8888

This will return something like:Then just do (ps - actually do not. Please keep reading below):kill -9 57385You can read a bit more about this here.EDIT: I was reading on a fairly related topic today and stumbled upon this interesting thread on why should i not kill -9 a process. So, as stated you should better kill the above process with:kill -15 57385EDIT 2: As noted in a comment around here many times this error is a consequence of not exiting a process gracefully. That means, a lot of people exit a node command (or any other) using CTRL+Z. The correct way of stopping a running process is issuing the CTRL+C command which performs a clean exit.Exiting a process the right way will free up that port while shutting down. This will allow you to restart the process without going through the trouble of killing it yourself before being able to re-run it again. Just a head's up, Skype will sometimes listen on port 80 and therefore cause this error if you try to listen on port 80 from Node.js or any other app.You can turn off that behaviour in Skype by accessing the options and clicking Advanced -> Connection -> Use port 80 (Untick this)You should try killing the process that is listening on port 80.Killall will kill all the node apps running. You might not want to do that. With this command you can kill only the one app that is listening on a known port.If using unix try this command: Under a controller env, you could use:pkill node before running your script should do the job.Bear in mind this command will kill all the node processes, which might be right if you have i.e a container running only one instance, our you have such env where you can guarantee that.In any other scenario, I recommend using a command to kill a certain process id or name you found by looking for it programmatically. like if your process is called, node-server-1 you could do pkill node-server-1.This resource might be useful to understand:

https://www.thegeekstuff.com/2009/12/4-ways-to-kill-a-process-kill-killall-pkill-xkill/Two possible solutions for Windows/MacWindowsMacYou can try netstatFor OSX El Capitan and newer (or if your netstat doesn't support -p), use lsofif this does not resolve your problem, Mac users can refer to complete discussion about this issue Find (and kill) process locking port 3000 on MacWindowsMacYour application is already running on that port 8080 .

Use this code to kill the port and run your code againAnother thing that can give this error, is two HTTP servers in the same node code. I was updating some Express 2 to Express 3 code, and had this...And, it triggered this error.This works for me (I'm using mac). Run this commandlsof -PiTCP -sTCP:LISTENThis's going to display a list of ports that your syetem is using. Find the PID that your node is runningand run kill -9 [YOUR_PID]EADDRINUSE means that the port(which we try to listen in node application) is already being used. In order to overcome, we need to identify which process is running with that port. For example if we are trying to listen our node application in 3000 port. We need to check whether that port is already is being used by any other process.That the above command gives below result.Now you got process ID(25315), Kill that process. Note: This solution for linux users.for force kill use above cmd to kill particular port and then run your serverTry both commands and it will stop all node process.This error comes when you have any process running on a port on which you want to run your application.how to get which process running on that port=>

command:

 sudo netstat -ap | grep :3000    output : you will get the process information which is using that porttcp        0      0 IPaddress:3000      :                     LISTEN      26869/node Now you can kill that process 

sudo kill -9 26869In below command replace your portNumberEADDRINUSE means port of your nodejs app is already in use.There is a way to terminate the process using Task Manager:I have seen this error before (in node) with http.client, and as I recall, the problem had to do with not initializing the httpClient or setting bad options in the httpClient creation and/or in the url request.I have the same problem too,and I simply close the terminal and open a new terminal and run again. that works for me, some time just need to wait for a few second till it work again.But this works only on a developer machine instead of a server console..Error: listen EADDRINUSE means the port which you want to assign/bind to your application server is already in use. You can either assign another port to your application.Or if you want to assign the same port to the app. Then kill the application that is running at your desired port.For a node application what you can try is, find the process id for the node app by :After getting the process id, doOn Debian i found out to run on port 80 you need to issue the command as root i.e I hope it helps In my case Apache HTTP Server was run on port 80 I solved it by issue the command as rootsudo killall httpdUpdate If Jenkin is installed and running on your Mac;Seems there is another Node ng serve process running. Check it by typing this in your console (Linux/Mac):and quit it with:OR alternativley use to serve your project on a free port of you choice.While killing the NODE_PORT, it might kill your chrome process or anything that is listening to the same port, and that's annoying. This shell script may be helpful - in my case the port is 1337 but you can change it anytimeIn my case I use a web hosting but it´s the same in local host, I used: for watch the node process then, the console shows the process with PID.

for kill the process you have to use this command:where PID is the process id from the command above.Two servers can not listen on same port, so check out if other server listening on same port, also check out for browser sync if its running on same portFor other people on windows 10 with node as localhost and running on a port like 3500,  not 80 ...What does not work:What shows information but still not does work:What does work: Git Bash or Powershell on Windows Notice the PID  ( far right )

I could not get killall to work... so Now after that not so fun exercise on windows, I realized I can use task manager and find the Node engine and just end it.FYI , I was using Visual Studio Code to run Node on port 3500, and I use Git Bash shell inside VS code.  I had exited gracefully with Ctrl + C ,  but sometimes this does not kill it.   I don't want to change my port or reboot so this worked.  Hopefully it helps others.  Otherwise it is documentation for myself. For windows users execute the following command in PowerShell window to kill all the node processes.The option which is working for me :Run:You'll get something like:

Should I use JSLint or JSHint JavaScript validation? [closed]

amateur

[Should I use JSLint or JSHint JavaScript validation? [closed]](https://stackoverflow.com/questions/6803305/should-i-use-jslint-or-jshint-javascript-validation)

I am currently validating my JavaScript against JSLint and making progress on, it's assisting me to write better JavaScript - in particular in working with the Jquery library.I have now come across JSHint, a fork of JSLint.

So I am wondering for web applications, which are very much JavaScript was driven, which is the better or most applicable validation tool to work against:  I want to decide now on a validation mechanism and moving forward, use this for client side validation.And Difference between jshint and jslint? Please explain in single javascript example.Links:

2011-07-23 21:04:49Z

I am currently validating my JavaScript against JSLint and making progress on, it's assisting me to write better JavaScript - in particular in working with the Jquery library.I have now come across JSHint, a fork of JSLint.

So I am wondering for web applications, which are very much JavaScript was driven, which is the better or most applicable validation tool to work against:  I want to decide now on a validation mechanism and moving forward, use this for client side validation.And Difference between jshint and jslint? Please explain in single javascript example.Links:[EDIT]

