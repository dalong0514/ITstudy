PHP - Get bool to echo false when false

Anonymous1

[PHP - Get bool to echo false when false](https://stackoverflow.com/questions/4948663/php-get-bool-to-echo-false-when-false)

The following code doesn't print out anything:But the following code prints 1:Is there a better way to print 0 or false when $bool_val is false than adding an if statement?

2011-02-09 18:02:25Z

The following code doesn't print out anything:But the following code prints 1:Is there a better way to print 0 or false when $bool_val is false than adding an if statement?Or if you only want output when it's false:This is the easiest way to do this:orIf the second argument is not true, it will output the result directly.No, since the other option is modifying the Zend engine, and one would be hard-pressed to call that a "better way".Edit:If you really wanted to, you could use an array:This will print out boolean value as it is, instead of 1/0. I like this one to print that outTry converting your boolean to an integer?var_export provides the desired functionality.This will always print a value rather than printing nothing for null or false. var_export prints a PHP representation of the argument it's passed, the output could be copy/pasted back into PHP.If you want to print strings "true" or "false", you can cast to a boolean as below, but beware of the peculiarities:This gives 0 or 1:PHP Manual: intval functionWhen $var is boolean variable, true or false will be printed out.You can use a ternary operatorThe %b option of sprintf() will convert a boolean to an integer:If you're not familiar with it: You can give this function an arbitrary amount of parameters while the first one should be your ouput string spiced with replacement strings like %b or %s for general string replacement.Each pattern will be replaced by the argument in order:json_encode will do it out-of-the-box, but it's not pretty (indented, etc):...gives...use on scriptYour'e casting a boolean to boolean and expecting an integer to be displayed.  It works for true but not false.  Since you expect an integer:

Cannot simply use PostgreSQL table name (「relation does not exist」)

Keyslinger

[Cannot simply use PostgreSQL table name (「relation does not exist」)](https://stackoverflow.com/questions/695289/cannot-simply-use-postgresql-table-name-relation-does-not-exist)

I'm trying to run the following PHP script to do a simple database query:This produces the following error:In all the examples I can find where someone gets an error stating the relation does not exist, it's because they use uppercase letters in their table name. My table name does not have uppercase letters. Is there a way to query my table without including the database name, i.e. showfinder.sf_bands?

2009-03-29 20:16:21Z

I'm trying to run the following PHP script to do a simple database query:This produces the following error:In all the examples I can find where someone gets an error stating the relation does not exist, it's because they use uppercase letters in their table name. My table name does not have uppercase letters. Is there a way to query my table without including the database name, i.e. showfinder.sf_bands?From what I've read, this error means that you're not referencing the table name correctly.  One common reason is that the table is defined with a mixed-case spelling, and you're trying to query it with all lower-case.In other words, the following fails:Use double-quotes to delimit identifiers so you can use the specific mixed-case spelling as the table is defined.Re your comment, you can add a schema to the "search_path" so that when you reference a table name without qualifying its schema, the query will match that table name by checked each schema in order.  Just like PATH in the shell or include_path in PHP, etc.  You can check your current schema search path:You can change your schema search path:See also http://www.postgresql.org/docs/8.3/static/ddl-schemas.htmlI had problems with this and this is the story (sad but true) :I dont like remembering useless stuff like this but you have to ;)Postgres process query different from other RDMS. Put schema name in double quote before your table name like this, "SCHEMA_NAME"."SF_Bands" Put the dbname parameter in your connection string. It works for me while everything else failed.Also when doing the select, specify the your_schema.your_table like this: I had a similar problem on OSX but tried to play around with double and single quotes. For your case, you could try something like thisThis is realy helpfullI digged this issues more, and found out about how to set this "search_path" by defoult for a new user in current database.Open DataBase Properties then open Sheet "Variables" 

and simply add this variable for your user with actual value.So now your user will get this schema_name by defoult and you could use tableName without schemaName.You must write schema name and table name in qutotation mark. As below:For me the problem was, that I had used a query to that particular table while Django was initialized. Of course it will then throw an error, because those tables did not exist. In my case, it was a get_or_create method within a admin.py file, that was executed whenever the software ran any kind of operation (in this case the migration). Hope that helps someone. 

What does double question mark (??) operator mean in PHP [duplicate]

elkolotfi

[What does double question mark (??) operator mean in PHP [duplicate]](https://stackoverflow.com/questions/53610622/what-does-double-question-mark-operator-mean-in-php)

I was diving into Symfony framework (version 4) code and found this peace of code:I'm not pretty sure what this actually does but I imagine that it expands to something like:Or maybe:Someone has any precision about the subject?EDIT:To all the people who answered the question: thank you

To all the people who marked my question as negative because there's already a similar question (PHP ternary operator vs null coalescing operator):It is true that both questions are very similar. However it is hard for everybody to imagine that the "??" is called the coalescing operator. Otherwise I could easy find it on the official documentation:http://php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-opHowever, for someone who didn't know that this feature was added in php 7 it's more likely to type:"php ?? operator" or "php double question mark operator" And here is why my question has an added value.I ask you to, please, reconsider your negative feedback. 

ThanksRegards,

Epixilog

2018-12-04 10:18:12Z

I was diving into Symfony framework (version 4) code and found this peace of code:I'm not pretty sure what this actually does but I imagine that it expands to something like:Or maybe:Someone has any precision about the subject?EDIT:To all the people who answered the question: thank you

To all the people who marked my question as negative because there's already a similar question (PHP ternary operator vs null coalescing operator):It is true that both questions are very similar. However it is hard for everybody to imagine that the "??" is called the coalescing operator. Otherwise I could easy find it on the official documentation:http://php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-opHowever, for someone who didn't know that this feature was added in php 7 it's more likely to type:"php ?? operator" or "php double question mark operator" And here is why my question has an added value.I ask you to, please, reconsider your negative feedback. 

ThanksRegards,

EpixilogIt's the "null coalescing operator", added in php 7.0. The definition of how it works is: So it's actually just isset() in a handy operator.Those two are equivalent1:Documentation: http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.coalesceIn the list of new PHP7 features: http://php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-opAnd original RFC https://wiki.php.net/rfc/isset_ternaryEDIT: As this answer gets a lot of views, little clarification:1There is a difference: In case of ??, the first expression is evaluated only once, as opposed to ? :, where the expression is first evaluated in the condition section, then the second time in the "answer" section. Is equivalent to :For constants, the behaviour is the same when using a constant that already exists :However, for constants that don't exist, this is different :Php will convert the non-existing constant to a string.You can use constant("ConstantName") that returns the value of the constant or null if the constant doesn't exist, but it will still raise a warning. You can prepended the function with the error control operator @ to ignore the warning message :is  short hand for x = y if y is set, otherwise x = 'dev'There is alsomeaning if y equals 'SOMETHING' then x = 10, otherwise x = 20

When to use static vs instantiated classes

user73119

[When to use static vs instantiated classes](https://stackoverflow.com/questions/1185605/when-to-use-static-vs-instantiated-classes)

PHP is my first programming language. I can't quite wrap my head around when to use static classes vs instantiated objects.I realize that you can duplicate and clone objects. However in all of my time using php any object or function always ended up as a single return (array, string, int) value or void.I understand concepts in books like a video game character class. duplicate car object and make the new one red, that all makes sense, but what doesn't is its application in php and web apps.A simple example. A blog. What objects of a blog would be best implemented as static or instantiated objects? The DB class? Why not just instantiate the db object in the global scope? Why not make every object static instead? What about performance?Is it all just style? Is there a proper way to do this stuff?

2009-07-26 21:30:22Z

PHP is my first programming language. I can't quite wrap my head around when to use static classes vs instantiated objects.I realize that you can duplicate and clone objects. However in all of my time using php any object or function always ended up as a single return (array, string, int) value or void.I understand concepts in books like a video game character class. duplicate car object and make the new one red, that all makes sense, but what doesn't is its application in php and web apps.A simple example. A blog. What objects of a blog would be best implemented as static or instantiated objects? The DB class? Why not just instantiate the db object in the global scope? Why not make every object static instead? What about performance?Is it all just style? Is there a proper way to do this stuff?This is quite an interesting question -- and answers might get interesting too ^^The simplest way to consider things might be :(Yeah, I admit, really really overly-simplified...)One thing about static methods/classes is that they don't facilitate unit testing (at least in PHP, but probably in other languages too).Another thing about static data is that only one instance of it exists in your program : if you set MyClass::$myData to some value somewhere, it'll have this value, and only it, every where -- Speaking about the user, you would be able to have only one user -- which is not that great, is it ?For a blog system, what could I say ? There's not much I would write as static, actually, I think ; maybe the DB-access class, but probably not, in the end ^^The main two reasons against using static methods are:Having a static method call inside some other method is actually worse than importing a global variable. In PHP, classes are global symbols, so every time you call a static method you rely on a global symbol (the class name). This is a case when global is evil. I had problems with this kind of approach with some component of Zend Framework. There are classes which use static method calls (factories) in order to build objects. It was impossible for me to supply another factory to that instance in order to get a customized object returned. The solution to this problem is to only use instances and instace methods and enforce singletons and the like in the beginning of the program.Miško Hevery, who works as an Agile Coach at Google, has an interesting theory, or rather advise, that we should separate the object creation time from the time we use the object. So the life cycle of a program is split in two. The first part (the main() method let's say), which takes care of all the object wiring in your application and the part that does the actual work.So instead of having:We should rather do:And then, in the index/main page, we'd do (this is the object wiring step, or the time to create the graph of instances to be used by the program):The main idea is to decouple the dependencies out of your classes. This way the code is much more extensible and, the most important part for me, testable. Why is it more important to be testable? Because I don't always write library code, so extensibility is not that important, but testability is important when I do refactoring. Anyways, testable code usually yields extensible code, so it's not really an either-or situation.Miško Hevery also makes a clear distinction between singletons and Singletons (with or without a capital S). The difference is very simple. Singletons with a lower case "s" are enforced by the wiring in the index/main. You instantiate an object of a class which does not implement the Singleton pattern and take care that you only pass that instance to any other instance which needs it. On the other hand, Singleton, with a capital "S" is an implementation of the classical (anti-)pattern. Basically a global in disguise which does not have much use in the PHP world. I haven't seen one up to this point. If you want a single DB connection to be used by all your classes is better to do it like this:By doing the above it's clear that we have a singleton and we also have a nice way to inject a mock or a stub in our tests. It's surprisingly how unit tests lead to a better design. But it makes lots of sense when you think that tests force you to think about the way you'd use that code.The only situation where I'd use (and I've used them to mimic the JavaScript prototype object in PHP 5.3) static members is when I know that the respective field will have the same value cross-instance. At that point you can use a static property and maybe a pair of static getter/setter methods. Anyway, don't forget to add possibility for overriding the static member with an instance member. For example Zend Framework was using a static property in order to specify the name of the DB adapter class used in instances of Zend_Db_Table. It's been awhile since I've used them so it may no longer be relevant, but that's how I remember it.Static methods that don't deal with static properties should be functions. PHP has functions and we should use them.So in PHP static can be applied to functions or variables. Non-static variables are tied to a specific instance of a class. Non-static methods act on an instance of a class. So let's make up a class called BlogPost.title would be a non-static member. It contains the title of that blog post. We might also have a method called find_related(). It's not static because it requires information from a specific instance of the blog post class.This class would look something like this:On the other hand, using static functions, you might write a class like this:In this case, since the function is static and isn't acting on any particular blog post, you must pass in the blog post as an argument. Fundamentally this is a question about object oriented design. Your classes are the nouns in your system, and the functions that act on them are the verbs.  Static functions are  procedural. You pass in the object of the functions as arguments.Update: I'd also add that the decision is rarely between instance methods and static methods, and more between using classes and using associative arrays. For example, in a blogging app, you either read blog posts from the database and convert them into objects, or you leave them in the result set and treat them as associative arrays. Then you write functions that take associative arrays or lists of associative arrays as arguments. In the OO scenario, you write methods on your BlogPost class that act on individual posts, and you write static methods that act on collections of posts. A long way, yes. You can write perfectly good object oriented programs without ever using static members. In fact some people would argue that static members are an impurity in the first place. I would suggest that - as a beginner in oop - you try to avoid static members all together. It will force you in the direction of writing in an object oriented rather than procedural style.I have a different approach to most answers here, especially when using PHP. I think all classes should be static unless you have a good reason why not. Some of the "why not" reasons are:Let me take one example. Since every PHP script produces HTML code, my framework has an html writer class. This ensures that no other class will attempt to write HTML as it is a specialised task that should be concentrated into a single class. Typically, you would use the html class like this:Every time get_buffer() is called, it resets everything so that the next class to use the html writer starts in a known state. All my static classes have an init() function which needs to be called before the class is used for the first time. This is more by convention than a necessity. The alternative to a static class in this case is messy. You would not want every class that needs to write a tiny bit of html to have to manage an instance of the html writer.Now I will give you an example of when not to use static classes. My form class manages a list of form elements like text inputs, dropdown lists and more. It is typically used like this:There is no way you could do this with static classes, especially considering that some of the constructors of each added class do a lot of work. Also, the chain of inheritance for all the elements is quite complex. So this is a clear example where static classes should not be used. Most utility classes such as the ones converting/formatting strings are good candidates for being a static class. My rule is simple: everything goes static in PHP unless there is one reason why it should not. "Having a static method call inside some other method is actually worse than importing a global variable." (define "worse")... and "Static methods that don't deal with static properties should be functions".These are both pretty sweeping statements.  If I have a set of functions that are related in subject matter, but instance data is totally inappropriate, I would much rather have them defined in a class and not each of them in the global namespace.  I'm just using the mechanics available in PHP5 to it's just altogether a convenient way to enforce higher cohesion and lower coupling.And FWIW -- there is no such thing, at least in PHP5, as "static classes"; methods and properties can be static.  To prevent instantiation of the class, one can declare it abstract, also.First ask yourself, what is this object going to represent? An object instance is good for operating on separate sets of dynamic data.A good example would be ORM or database abstraction layer. You may have multiple database connections.Those two connections can now operate independently:Now within this package/library, there may be other classes such as Db_Row, etc. to represent a specific row returned from a SELECT statement. If this Db_Row class was a static class, then that would be assuming you only have one row of data in one database and it would be impossible to do what an object instance could. With an instance, you can now have an unlimited number of rows in an unlimited number of tables in an unlimited number of databases. The only limit is the server hardware ;).For example, if the getRows method on the Db object returns an array of Db_Row objects, you can now operate on each row independently of one another:A good example of a static class would be something that handles registry variables, or session variables since there will only be one registry or one session per user.In one part of your application:And in another part:Since there is only ever going to be one user at a time per session, there is no point in creating an instance for the Session.I hope this helps, along with the other answers to help clear things up. As a side note, check out "cohesion" and "coupling". They outline some very, very good practices to use when writing your code that apply to all programming languages.If your class is static that means you can't pass its object around to other classes (since there is no instance possible) so that means all your classes will be directly using that static class which means your code is now tightly coupled with the class.Tight coupling makes your code less  reusable, fragile and prone to bugs. You want to avoid static classes to be able to pass instance of the class to other classes.And yes this is only one of many other reasons some of which have been already mentioned.In general, you should use member variables and member functions unless it absolutely has to be shared between all instances or unless you are creating a singleton. Using member data and member functions allows you to reuse your functions for multiple different pieces of data, whereas you can only have one copy of data on which you operate if you use static data and functions. Additionally, though not as applicable to PHP, static functions and data lead to code being non-reentrant, whereas class data facilitates reentrancy. I'd like to say that there is definitely a case where I'd like static variables- in cross-language applications.

You could have a class that you pass a language to (e.g. $_SESSION['language']) and it in turn accesses other classes that are designed like so:Using Strings::getString("somestring") is a nice way to abstract your language usage out of your application. You could do it however you please but in this case having each strings file have constants with string values that are accessed by the Strings class works pretty well.

Why is === faster than == in PHP?

coderex

[Why is === faster than == in PHP?](https://stackoverflow.com/questions/2401478/why-is-faster-than-in-php)

Why is === faster than == in PHP?

2010-03-08 13:14:19Z

Why is === faster than == in PHP?Because the equality operator == coerces, or converts, the data type temporarily to see if it’s equal to the other operand, whereas === (the identity operator) doesn’t need to do any converting whatsoever and thus less work is done, which makes it faster.=== does not perform typecasting, so 0 == '0' evaluates to true, but 0 === '0' - to false.First, === checks to see if the two arguments are the same type - so the number 1 and the string '1' fails on the type check before any comparisons are actually carried out. On the other hand, == doesn't check the type first and goes ahead and converts both arguments to the same type and then does the comparison.Therefore, === is quicker at checking a fail conditionThere are two things to consider:I compared the speed of:And here are the results:You can see that the speed is almost identical.I don't really know if it's significantly faster, but === in most languages is a direct type comparison, while == will try to do type coercion if necessary/possible to gain a match.The == incurs a larger overhead of type conversion before comparison. === first checks the type, then proceeds without having to do any type conversion.Because === doesn't need to coerce the operands to be of the same type before comparing them.I doubt the difference in speed is very much though.  Under normal circumstances you should use whichever operator makes more sense.In conclusion === is faster because don't converts the data type to see if two variables have same value, but when you need to see if two variables have same value you will use == if doesen't mather what type are variables, or === if is important also the type of variables.Faster should not just be measured in direct execution time (direct performance tests are almost negligible in this case). That said, I would need to see a test involving iteration, or recursion, to really see if there is a significant, cumulative difference (when used in a realistic context). The testing and debugging time you will save when dealing with edge cases should be meaningful to you, alsoIn php (c code) value is a "class" like:When your are comparing $a == $b and $a is int type, there will be something like:but string '1' will not be cast to ascii code 49, it will be 1.When you are comparing $a === $b and $a is int type, there will be someting like:If the test results are correct, then it must be a compiler issue,The processor will do whatever it is told to do on a clock cycleIf it has less to do then it will be quicker to doAddition:Ah well actually if the compiler has already created loads of machine code to be processed, then if it has already added zillions of stuff to cope with what type of data needs comparing, then the removal of one "minor" IF will not change speeds much at all. If anyone still reads this are then I am interesting in more discussion.Phil

The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead [duplicate]

eggyal

[The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead [duplicate]](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli)

When I attempt to connect to a MySQL server from PHP, I see the following error:The code on the referenced line is:I am certain that the arguments are correct, and this exact code has been working for years without problem.  Indeed, I obtained it from a well-sourced tutorial on PHP.

2012-12-19 03:11:43Z

When I attempt to connect to a MySQL server from PHP, I see the following error:The code on the referenced line is:I am certain that the arguments are correct, and this exact code has been working for years without problem.  Indeed, I obtained it from a well-sourced tutorial on PHP.

Removing array item by value

Marek

[Removing array item by value](https://stackoverflow.com/questions/1883421/removing-array-item-by-value)

I need to remove array item with given value:Could it be done in shorter (more efficient) way?

2009-12-10 19:36:41Z

I need to remove array item with given value:Could it be done in shorter (more efficient) way?It can be accomplished with a simple one-liner.Having this array:You can do:And the value of $arr will be:Hope it helps write beautiful code.I am adding a second answer.  I wrote a quick benchmarking script to try various methods here.The third method, array_keys() with the optional search parameter specified, seems to be by far the best method.  Output example:Judging by this, the solution I would use then would be:How about:or for multiple values:This would prevent key loss as well, which is a side effect of array_flip().to remove $rm_val from $arrThe most powerful solution would be using array_filter, which allows you to define your own filtering function.But some might say it's a bit overkill, in your situation... 

A simple foreach loop to go trough the array and remove the item you don't want should be enough.Something like this, in your case, should probably do the trick :Try array_search()Your solutions only work if you have unique values in your arraySee:A better way would be unset with array_search, in a loop if neccessary.w/o flip:You can use array_splice function for this operation Ref : array_splice

file_put_contents(meta/services.json): failed to open stream: Permission denied

vishnub1626

[file_put_contents(meta/services.json): failed to open stream: Permission denied](https://stackoverflow.com/questions/23540083/file-put-contentsmeta-services-json-failed-to-open-stream-permission-denied)

I am new to Laravel. I was trying to open http://localhost/test/public/ and I got I googled around and changed the permission of storage directory using chmod -R 777 app/storage but to no avail.I changed debug=>true in app.php and visited the page and got Error in exception handler: Then I changed the permissions of storage directory using the command chmod -R 644 app/storage and the 'Error in exception handler' error was gone and a page is loaded. But in there I am getting this: 

2014-05-08 11:10:22Z

I am new to Laravel. I was trying to open http://localhost/test/public/ and I got I googled around and changed the permission of storage directory using chmod -R 777 app/storage but to no avail.I changed debug=>true in app.php and visited the page and got Error in exception handler: Then I changed the permissions of storage directory using the command chmod -R 644 app/storage and the 'Error in exception handler' error was gone and a page is loaded. But in there I am getting this: Suggestion from vsmoraes worked for me:Laravel >= 5.4Laravel < 5.4NOTE: DO NOT DO THIS ON ANY REMOTE SERVER (DEV OR PRODUCTION)When I asked this question, this was a problem on my localhost, running in a Virtual Machine. So I thought setting up a 777 was safe enough, however, folks are right when they say you should look for a different solution. Try 775 firstFor googlers who has been facing this problem with Laravel 5. This is a permission issue caused by different users trying to write at the same log file within the storage/logs folder with different permissions.What happens is your laravel config probably is setup to log errors daily and therefore your webserver (apache/nginx) might create this file under a default user depending on your environment it can be something like _www on OSX or www-data on *NIX systems, then the issue comes when you might have run some artisan commands and got some errors, so the artisan will write this file but with a different user because PHP on terminal is executed by a different user actually your login user, you can check it out by running this command: If your login user created that log file your webserver you will not be able to write errors in it and vice-versa because laravel writes log files with 655 permissions by default which only allows the owner to write in it.To fix this temporary you have to manually give permissions for the group  664 to this file so both your login user and webserver user can write to that log file.To avoid this issue permanently you may want to setup a proper permissions when a new file is create within the storage/logs dir by inheriting the permissions from the directory this answer https://unix.stackexchange.com/a/115632 can help you to tackle with that.You should not give 777 permissions. It's a security risk.

To Ubuntu users, in Laravel 5, I sugest to change owner for directory storage recursively:Try the follow:In Ubuntu based systems, www-data is apache user.For everyone using Laravel 5, Homestead and Mac try this:some times SELINUX caused this problem;

you can disable selinux with this command.Problem solved this enables the write permission to app , framework, logs Hope this will Helpgo to the directory of the laravel project on your terminal and write:This way you're making your user the owner and giving privileges:

1 Execute, 2 Write, 4 Read

1+2+4 = 7 means (rwx)

2+4 = 6 means (rw)

finally, for the storage access, ug+rwx means you're giving the user and group a 7For vagrant users, the solution is:(in vagrant) php artisan cache:clear (outside of vagrant) chmod -R 777 app/storage (in vagrant) composer dump-autoloadMaking sure you chmod in your local environment and not inside vagrant is important here!Try again with chmod -R 755 /var/www/html/test/app/storage. Use with sudo for Operation not permitted in chmod. Use Check owner permission if still having the error.As per Laravel 5.4 which is the latest as I am writing this, if you have any problem like this, you ned to change the permission. 

DO NOT LISTEN TO ANYONE WHO TELLS YOU TO SET 777 FOR ANY DIRECTORY.

It has a security issue. 

Change the permission of storage folder like thisChange bootstrap folder permission like thisNow please make sure that you're executing both commands from your application directory. You won't face problems in future regarding permission. 775 doesn't compromise any security of your machine. Suggest the correct permission, if for Apache,If you have Laravel 5 and looking permanent solution , applicable both php artisan command line usage and Apache server use this:sudo chmod -R 777 vendor storage

echo "umask 000" | sudo tee -a /etc/resolv.conf

sudo service apache2 restartSee detailed explanation here.FOR ANYONE RUNNING AN OS WITH SELINUX: The correct way of allowing httpd to write to the laravel storage folder is:Then to apply the changes immediately:SELinux can be a pain to deal with, but if it's present then I'd STRONGLY ADVISE you learn it rather than bypassing it entirely. I had the same issue and the below steps helped me fix the issue.<?php echo exec('whoami'); ?>And run the file from the web browser. It would give the apache user. In my case, it is ec2-user as I was using the aws with cronjob installed in /etc/cron.d/. It could be different user for others.sudo chown -R ec2-user:<usergroup> /app-path/publicYou need to identify and use the right "user" and "usergroup" here.Xampp for use:Any time I change app.php I get a permission denied writing bootstrap/cache/services.json so I did this to fix it:solved this for me Setting permission to 777 is definitely terrible idea!... butIf you are getting permission error connected with "storage" folder that's what worked for me:If using laradock, try chown -R laradock:www-data ./storage in your workspace containerIn my case solution was to change permission to app/storage/framework/views and app/storage/logs directories.If you use Linux or Mac, even you can also run in ssh terminal. You can use terminal for run this command, If you are using windows, you can run using git bash.  You can download git form https://git-scm.com/downloads. If anyone else runs into a similar issue with fopen file permissions error, but is wise enough not to blindly chmod 777 here is my suggestion.Check the command you are using for permissions that apache needs:The 'r' means open for read only, and if you aren't editing the file, this is what you should have it set as. This means apache/www-data needs at least read permission on that file, which if the file is created through laravel it will have read permission already.If for any reason you have to write to the file:Then make sure apache also has permissions to write to the file.http://php.net/manual/en/function.fopen.phpJust start your server using artisianphp artisian serveThen access your project from the specified URL:I have the same issue when running vagrant on mac. solved the problem by changing the user of Apache server in https.conf file:Run apache under php user instead of user daemon to resolve file access issue with phpnow, php created cache file can be read and edit by apache without showing any access permission error.After a lot of trial and error with directory permissions I ended up with an epiphany...there was no space left on the disk's partition. Just wanted to share to make sure nobody else is stupid enough to keep looking for the solution in the wrong direction.In Linux you can use df -h to check your disk size and free space.This issue actually caused by different users who wants to write/read file but denied cause different ownership. maybe you as 'root' installed laravel before then you login into your site as 'laravel' user where 'laravel' the default ownership, so this is the actually real issue here. So when user 'laravel' want to read/write all file in disk as default, to be denied, cause that file has ownership by 'root'.To solving this problem you can follow like this:sudo chown -hR your-user-name /root /nameforlderor in my casesudo chown -hR igmcoid /root /sublaravelFootnote:Hopes it helps somewhere somehow...While working on Windows 10 with Laragon and Laravel 4, it seemed to me there was no way to change the permissions manually, since executing chmod-commands in the Laragon-in-built-terminal had no effect.However, it was possible in this terminal to go to the storage folder and manually add the desired folders like this:The cd-command in the terminal brings you to the folder (you might need to adjust this path to suit your file structure).

The mkdir-command will create the directory with the given name.I did not have the opportunity to test this approach in Laravel 5, but I expect that a similar approach should work. Of course there might be a better way, but at least this was a reasonable workaround for my situation (fixing the error: file_put_contents(/var/www/html/laravel/app/storage/meta/services.json): failed to open stream).I have solved my problem by doing this. I have tried to give the 777 access to storage folder and it have  work for me1) go to your laravel root directory , (/var/www/html for me) and run the following command 

PHP 5: const vs static

Chris Jacob

[PHP 5: const vs static](https://stackoverflow.com/questions/1685922/php-5-const-vs-static)

In PHP 5, what is the difference between using const and static?When is each appropriate? And what role does public, protected and private play - if any?

2009-11-06 07:10:18Z

In PHP 5, what is the difference between using const and static?When is each appropriate? And what role does public, protected and private play - if any?In the context of a class, static variables are on the class scope (not the object) scope, but unlike a const, their values can be changed.Public, protected, and private are irrelevant in terms of consts (which are always public); they are only useful for class variables, including static variable.Edit: It is important to note that PHP 7.1.0 introduced support for specifying the visibility of class constants.One last point that should be made is that a const is always static and public. This means that you can access the const from within the class like so:From outside the class you would access it like this:Constant is just a constant, i.e. you can't change its value after declaring.Static variable is accessible without making an instance of a class and therefore shared between all the instances of a class.Also, there can be a static local variable in a function that is declared only once (on the first execution of a function) and can store its value between function calls, example:When talking about class inheritance you can differentiate between the constant or variable in different scopes by using self and static key words. Check this example which illustrates how to access what:And then do:or:Output:In other words self:: refers to the static property and constant from the same scope where it is being called (in this case the Person superclass), while static:: will access the property and constant from the scope in run time (so in this case in the Pirate subclass).Read more on late static binding here on php.net.

Also check the answer on another question here and here.Declaring a class method or property as static makes them accessible without needing an instantiation of the class.A class constant is just like a normal constant, it cannot be changed at runtime. This is also the only reason you will ever use const for.Private, public and protected are access modifiers that describes who can access which parameter/method.Public means that all other objects gets access.

Private means that only the instantiated class gets access.

Protected means that the instantiated class and derived classes gets access.Here's the things i learned so far about static members , constant variables and access modifiers(private,public and protected). 

ConstantDefinitionLike the name says values of a constant variable can't be changed.Constants differ from normal variables in that you don't use the $ symbol to declare or use them.The value must be a constant expression, not (for example) a variable, a property, a result of a mathematical operation, or a function call. Declaring a constant in php     Constant's scope is global and can be accessed using a self keywordStaticDefinitionStatic keyword can be used for declaring a class, member function or a variable.Static members in a class is global can be accessed using a self keyword as well.Declaring class properties or methods as static makes them accessible without needing an instantiation of the class. A property declared as static cannot be accessed with an instantiated class object (though a static method can). If no visibility declaration ( public, private, protected ) is used, then the property or method will be treated as if it was declared as public.Because static methods are callable without an instance of the object created.Static property exampleAccessing static properties and functions examplePublic, private , protected (A.K.A access modifiers) Before reading the definition below , read this Article about Encapsulation .It will help you to understand the concept more deeply Link 1 wikipediaTutorials point link about encapsulationDefinitionUsing private , public , protected keywords you can control access to the members in a class. Class members declared public can be accessed everywhere. Members declared protected can be accessed only within the class itself and by inherited and parent classes. Members declared as private may only be accessed by the class that defines the member.ExampleAccessing the public, private and protected members exampleFor more info read this php documentation about visibility Visibility Php DocReferences : php.netI hope you understood the concept. Thanks for reading :) :) Have a good oneSo to recap on @Matt great answer:  Example:Edit: It is important to note that PHP 7.1.0 introduced support for specifying the visibility of class constants.

Fatal error: Class 'ZipArchive' not found in

Parag Chaure

[Fatal error: Class 'ZipArchive' not found in](https://stackoverflow.com/questions/3872555/fatal-error-class-ziparchive-not-found-in)

I have a problem that I install 'Archive_Zip 0.1.1' on Linux server, but when I try to run the script to create the zip file it gives the fatal errorwhere I put the code but it doesn't find the class file. Please tell me the solution. What should I do to resolve the problem?

I also put php.ini file to the folder where script is, but it does not work.

2010-10-06 12:47:01Z

I have a problem that I install 'Archive_Zip 0.1.1' on Linux server, but when I try to run the script to create the zip file it gives the fatal errorwhere I put the code but it doesn't find the class file. Please tell me the solution. What should I do to resolve the problem?

I also put php.ini file to the folder where script is, but it does not work.For the ZipArchive class to be present, PHP needs to have the zip extension installed.See this page for installation instructions (both Linux and Windows).On Amazon ec2 with Ubuntu + nginx + php7, I had the same issues, solved it using:  sudo apt-get install php7.0-zip

On ubuntu desktop, I had to do.This installed the library but I still kept on getting the same error, so I had to restart apache using:and it worked. I'm not seeing it here, so I'd like to add that on Debian/Ubuntu you may need to enable the extension after installing the relative package. So:First of all, The solution for remote server:If you are using cpanel you may have zip extension installed but not activate. You need to active it. For this case you need to go to cpanel > inside software section > click on PHP version. Then find zip and check it. Now save.You should see like the image.

 Refresh page. The error should disappear. Note: If you dont found, contact server provider. They will install for you.This workedand no need to restart php7.0-fpm manually.If you have WHM available it is easier.Log in to WHM.Go to EasyApache 4 (or whatever version u have) under Software tab.Under Currently Installed Packages click Customize.Go to PHP Extensions, in search type "zip" (without quotes),you should see 3 modulescheck all of them,click blue button few times to finish the process.This worked for me. 

Thankfully I've WHM available.You also need to compile PHP with zip support. The manual says the following:It's not enough to simply install the correct extensions on the server. Have a look at the installation instructions link Pekka posted earlier. My answer is just a clarification of his.I had the same issue with CentOS and cPanel installed server. I installed zipArchive package via cPanel and didn't worked as expected.

After trying with so many fixes suggested each and everywhere just the below worked for me.First find the name for the correct package with the below commandThen use the below code.In my case correct code to install zipArchive wasI had the solution from this link.

How can I inslatt zipArchive on PHP 7.2 with CentOS 7?And this installation somehow enabled that package too and it also restarted the effecting services and after the completion of the execution of the above code zipArchive issue was gone.PHP 5.2.0 and laterLinux systemsIn order to use these functions you must compile PHP with zip support by using the --enable-zip configure option.WindowsWindows users need to enable php_zip.dll inside of php.ini in order to use these functions.Centos 6I faced this issue on GCP while deploying wordpress in the App Engine Standard environment. This solved it : For PHP 7.xFor PHP 5.xAnd then restart the Apache serverFor Centos 7 and PHP 7.3 on RemiSearch for the zip extension:The extension name is php73-php-pecl-zip.x86_64. To install it in server running single version of PHP, remove the prefix php73:Restart PHP:Check installed PHP extensions:I had the same issue and it had solved using two command lines:sudo apt install php-zipthen reboot your web server, for Apachesudo service apache2 restartFor CentOS based server useEnable it by running: echo "extension=zip.so" >> /etc/php.d/zip.iniTry to write \ZIPARCHIVE instead of ZIPARCHIVE.1) You should require your file with ZipArchive file. 2) Or use __autoload method of class.

In PHP 5 it is a greate method __autoload().http://www.php.net/manual/en/language.oop5.autoload.php

Parse error: Syntax error, unexpected end of file in my PHP code

pratnala

[Parse error: Syntax error, unexpected end of file in my PHP code](https://stackoverflow.com/questions/11482527/parse-error-syntax-error-unexpected-end-of-file-in-my-php-code)

I got an error:With this code:What's the problem?

2012-07-14 09:20:26Z

I got an error:With this code:What's the problem?You should avoid this (at the end of your code):and this:You shouldn't put brackets directly close to the open/close php tag, but it separate with a space:also avoid <? and use <?phpI had the same error, but I had it fixed by modifying the php.ini file.Find your php.ini file see Dude, where's my php.ini?then open it with your favorite editor.Look for a short_open_tag property, and apply the following change:There are two different methods to get around the parse error syntax.Avoid in your PHP file this:Make sure you put it like thisThere is also a simple way to solve your problem.

Search for the short_open_tag property value (Use in your text editor with Ctrl + F!), and apply the following change:toAccording to the description of core php.ini directives, short_open_tag allows you to use the short open tag (<?) although this might cause issues when used with xml (<?xml will not work when this is enabled)! Just go to php.ini then find short_open_tag= Off set to short_open_tag= OnI had ran into this trouble when I left a php foreach: tag unclosed.Closing it using the following solved the syntax error: unexpected end of fileHope it helps someoneCheck that you closed your class.For example, if you have controller class with methods, and by accident you delete the final bracket, which close whole class, you will get this error.also, look for a comment // that breaks the closing curly braceif (1==1) { //echo "it is true"; }the closing curly brace will not properly close the conditional section and php won't properly process the remainder of code.Avoid this as well <? } ?> make sure you put <?php } ?>I saw some errors, which I've fixed below.This is what I got as being erroneous:This is how I would have done it:In my case the culprit was the lone opening <?php tag in the last line of the file. Apparently it works on some configurations with no problems but causes problems on others.For me, the most frequent cause is an omitted } character, so that a function or if statement block is not terminated. I fix this by inserting a } character after my recent edits and moving it around from there. I use an editor that can locate opening brackets corresponding to a closing bracket, so that feature helps, too (it locates the function that was not terminated correctly).We can hope that someday language interpreters and compilers will do some work to generate better error messages, since it is so easy to omit a closing bracket.If this helps anyone, please vote the answer up.You can't divide IF/ELSE instructions into two separate  blocks. If you need HTML code to be printed, use echo.Also, another case where it is hard to spot is when you have a file with just a function, I know it is not a common use case but it is annoying and had to spot the error.The file above returns the erro Parse error: syntax error, unexpected end of file in while the below does not.If your using parse_ini_file($file) or a routine is rading an .ini file, check if you data is quoted in the ini file. Unquoted data will cause this error. Ex; data1=test will cause the error, data1="test" will not.

Difference between「!==」and「==!」[closed]

Gerald Schneider

[Difference between「!==」and「==!」[closed]](https://stackoverflow.com/questions/12313423/difference-between-and)

Yesterday I stumbled over this when I modified PHP code written by someone else. I was baffled that a simple comparison (if ($var ==! " ")) didn't work as expected. After some testing I realized that whoever wrote that code used ==! instead of !== as comparison operator. I've never seen ==! in any language so I wondered how the hell this code could even work and did some testing:This produces this output:The operator seems to work for boolean and integer variables, but not for strings. I can't find ==! in the PHP documentation or anything about it on any search engine (tried Google, Bing, DuckDuckGo, but I suspect they try to interpret it instead of searching for the literal string). Has anybody seen this before and can shed any light on this behavior?

2012-09-07 07:11:02Z

Yesterday I stumbled over this when I modified PHP code written by someone else. I was baffled that a simple comparison (if ($var ==! " ")) didn't work as expected. After some testing I realized that whoever wrote that code used ==! instead of !== as comparison operator. I've never seen ==! in any language so I wondered how the hell this code could even work and did some testing:This produces this output:The operator seems to work for boolean and integer variables, but not for strings. I can't find ==! in the PHP documentation or anything about it on any search engine (tried Google, Bing, DuckDuckGo, but I suspect they try to interpret it instead of searching for the literal string). Has anybody seen this before and can shed any light on this behavior?The difference is that there is no operator ==!.This expression:Is basically the same as this:Its just a combination of == and !. Only relevant operator present here is ==. So the combination ==! will work just as a normal ==, checking Equality, and trust me,is none other than and thus;AndCombining multiple operators characters may not work as an operator always. for example, if we take = and !, it will work as operators only if it is in the pattern of != or !==. There can be numerous combinations for these characters like  !====, !==! etc.. etc.. Operator combinations should be in unique format, unique order, unique combinations (all characters wont combine with all other characters) and definitely, without any space between them.Check the operators list below;==! is not an operator but two :== and ! ! having a higher priority than ==So :"a" !== " ": bool(true) --> true because "a" is really not equal to " ""a" ==! " ": bool(false) --> false because "a" is not equals to !" "Could be written with a space between == and !.==! doesn't exist as such. It's a somewhat cryptic notation of == !As spaces don't matter in those operations, you could just as easily write a --> b, which evaluates to a-- > b, but will look strange.So, as to the question: "a" ==! " " will be parsed to "a" == !" ". Negation of a string is covered by casting, meaning any string but "0" and " " is, when casted, true.Thus, the expression "a" == !" " will get transferred:And, as string "a" is not the same as bool true, this evaluates the whole expression to false.So, what's the moral of the story? Don't let yourself be confused by missing or wrong placed spaces! :)==! isn't a php comparison operator at all - it is the same as == ! (note the space)I.e.

Create or write/append in text file

Jerahmeel Acebuche

[Create or write/append in text file](https://stackoverflow.com/questions/24972424/create-or-write-append-in-text-file)

I have a website that every time a user logs in or logs out I save it to a text file.My code doesn't work in appending data or creating a text file if it does not exist.. Here is the sample codeIt seems it does not append to next line after I open it again.Also I think it would also have an error in a situation when 2 users login at the same time, would it affect opening the text file and saving it afterwards?

2014-07-26 15:11:15Z

I have a website that every time a user logs in or logs out I save it to a text file.My code doesn't work in appending data or creating a text file if it does not exist.. Here is the sample codeIt seems it does not append to next line after I open it again.Also I think it would also have an error in a situation when 2 users login at the same time, would it affect opening the text file and saving it afterwards?Try something like this: Use the a mode. It stands for append.You can do it the OO way, just an alternative and flexible:Then use it like this .. let's say you have user_name stored in a session (semi pseudo code):Check your log with this:Result is like:github.com/thielicious/LoggerThere is no such file open mode as "wr" in your code:The file open modes in PHP http://php.net/manual/en/function.fopen.php is the same as in C: http://www.cplusplus.com/reference/cstdio/fopen/ There are the following main open modes "r" for read, "w" for write and "a" for append, and you cannot combine them. You can add other modifiers like "+" for update, "b" for binary. The new C standard  adds a new standard subspecifier ("x"), supported by PHP, that can be appended to any "w" specifier (to form "wx", "wbx", "w+x" or "w+bx"/"wb+x"). This subspecifier forces the function to fail if the file exists, instead of overwriting it. Besides that, in PHP 5.2.6, the 'c' main open mode was added. You cannot combine 'c' with 'a', 'r', 'w'. The 'c' opens the file for writing only. If the file does not exist, it is created. If it exists, it is neither truncated (as opposed to 'w'), nor the call to this function fails (as is the case with 'x'). 'c+'     Open the file for reading and writing; otherwise it has the same behavior as 'c'. Additionally, and in PHP 7.1.2 the 'e' option was added that can be combined with other modes. It set close-on-exec flag on the opened file descriptor. Only available in PHP compiled on POSIX.1-2008 conform systems. So, for the task as you have described it, the best file open mode would be 'a'. It opens the file for writing only. It places the file pointer at the end of the file. If the file does not exist, it attempts to create it. In this mode, fseek() has no effect, writes are always appended. Here is what you need, as has been already pointed out above:Try this code:I always use it like this, and it works...Although there are many ways to do this. But if you want to do it in an easy way and want to format text before writing it to log file. You can create a helper function for this.

Adding one day to a date

ian

[Adding one day to a date](https://stackoverflow.com/questions/1394791/adding-one-day-to-a-date)

My code to add one day to a date returns a date before day adding: 

2009-09-30 20:24:00 date after adding one day SHOULD be rolled over to the next month: 1970-01-01 17:33:29I have used pretty similar code before, what am I doing wrong here?

2009-09-08 15:55:34Z

My code to add one day to a date returns a date before day adding: 

2009-09-30 20:24:00 date after adding one day SHOULD be rolled over to the next month: 1970-01-01 17:33:29I have used pretty similar code before, what am I doing wrong here?For PHP 5.2.0+, you may also do as follows:Simplest solution:It Worked for me:

For Current Datefor anydate:Try thisSimple to read and understand way:I always just add 86400 (seconds in a day):It's not the slickest way you could probably do it, but it works!While I agree with Doug Hays' answer, I'll chime in here to say that the reason your code doesn't work is because strtotime() expects an INT as the 2nd argument, not a string (even one that represents a date)If you turn on max error reporting you'll see this as a "A non well formed numeric value" error which is E_NOTICE level.The modify() method that can be used to add increments to an existing DateTime value.Create a new DateTime object with the current date and time:Once you have the DateTime object, you can manipulate its value by adding or subtracting time periods:You can read more on the PHP Manual.The following code get the first day of January of current year (but it can be a another date) and add 365 days to that day (but it can be N number of days) using DateTime class and its method modify() and format():

Strtotime() doesn't work with dd/mm/YYYY format

Simon

[Strtotime() doesn't work with dd/mm/YYYY format](https://stackoverflow.com/questions/2891937/strtotime-doesnt-work-with-dd-mm-yyyy-format)

I really like the strtotime() function, but the user manual doesn't give a complete description of the supported date formats. strtotime('dd/mm/YYYY') doesn't work, it works only with mm/dd/YYYY format.If I have date in dd/mm/YYYY format, how can I convert it to YYYY-mm-dd?

I can do it by using explode() function, but I think there are better solutions.

2010-05-23 13:41:54Z

I really like the strtotime() function, but the user manual doesn't give a complete description of the supported date formats. strtotime('dd/mm/YYYY') doesn't work, it works only with mm/dd/YYYY format.If I have date in dd/mm/YYYY format, how can I convert it to YYYY-mm-dd?

I can do it by using explode() function, but I think there are better solutions.Here is the simplified solution:Result:The strtotime documentation reads:You can parse dates from a custom format (as of PHP 5.3) with DateTime::createFromFormat(Aside: The ! is used to reset non-specified values to the Unix timestamp, ie. the time will be midnight.)If you do not want to (or cannot) use PHP 5.3, then a full list of available date/time formats which strtotime accepts is listed on the Date Formats manual page. That page more thoroughly describes the fact that m/d/Y is inferred over d/m/Y (but you can, as mentioned in the answers here, use d-m-Y, d.m.Y or d\tm\tY).In the past, I've also resorted to the quicky str_replace mentioned in another answer, as well as self-parsing the date string into another format likeFrom the STRTOTIME writeup

Note:Dates in the m/d/y or d-m-y formats are disambiguated by looking at the separator between the various components: if the separator is a slash (/), then the American m/d/y is assumed; whereas if the separator is a dash (-) or a dot (.), then the European d-m-y format is assumed. It is as simple as that.This is a good solution to many problems:fastest should probably bethis will return false if the format does not look like the proper one, but it wont-check wether the date is validI haven't found a better solution. You can use explode(), preg_match_all(), etc.I have a static helper function like thisThere is probably a better name for that, but I use ausStrToTime() because it works with Australian dates (which I often deal with, being an Australian). A better name would probably be the standardised name, but I'm not sure what that is.I tried to convert ddmmyy format to date("Y-m-d" format but was not working when I directly pass ddmmyy =date('dmy')then realized it has to be in yyyy-mm-dd format so. used substring to organize then passed to date("Y-m-d",strtotime($strParam));it worked!Are you getting this value from a database? If so, consider formatting it in the database (use date_format in mysql, for example). If not, exploding the value may be the best bet, since strtotime just doesn't seem to appreciate dd/mm/yyyy values.If you know it's in dd/mm/YYYY, you can do:It will match dates in the form d/m/YY or dd/mm/YYYY (or any combination of the two)...  If you want to support more separators than just /, you can change the regex to:And then add any characters you want into the [/-] bit (Note, the - character needs to be last)This workaround is simpler and more elegant than explode:You don't have to know what format you're getting the date in, but if it comes with slashes they are replaced with full stops and it is treated as European by strtotime.$srchDate = date_format(date_create_from_format('d/m/Y', $srchDate), 'Y/m/d');This will work for you.

You convert the String into a custom date format where you can specify to PHP what the original format of the String is that had been given to it.

Now that it is a date format, you can convert it to PHP's default date format, which is the same that is used by MySQL. The simplest solution is this:This the solution i'm using even if the leading zero are there.$date_info = '20/02/2019';

echo date('Y-m-d', strtotime(str_replace('/', '-', $date_info) )); 

PHP Fatal error: Cannot redeclare class

Jin Yong

[PHP Fatal error: Cannot redeclare class](https://stackoverflow.com/questions/708140/php-fatal-error-cannot-redeclare-class)

Does anyone know what can cause this problem?

2009-04-02 03:11:03Z

Does anyone know what can cause this problem?It means you've already created a class.For instance:That second Foo would throw the error.You have a class of the same name declared more than once.  Maybe via multiple includes.  When including other files you need to use something like to prevent multiple inclusions.  It's very easy for this to happen, though not always obvious, since you could have a long chain of files being included by one another.That happens when you declare a class more than once in a page.

You can fix it by either wrapping that class with an if statement (like below), or you can put it into a separate file and use require_once(), instead of include().Use include_once(); - with this, your codes  will be included only one time.This will happen if we use any of the in built classes in the php library. I used the class name as Directory and I got the same error. If you get error first make sure that the class name you use is not one of the in built classes.This error might also occur if you define the __construct method more than once.Sometimes that happens due to some bugs in PHP's FastCGI.Try to restart it. At Ubuntu it's:I had the same problem while using autoload like follows:and in other class there was:

The sollution is to keep namespace compatibility, in my example namespace testClassNamespace; in both files.Just adding;This error can also occur if you by mistake put a function inside another function.PHP 5.3 (an I think older versions too) seems to have problem with same name in different cases. So I had this problem when a had the class Login and the interface it implements LogIn. After I renamed LogIn to Log_In the problem got solved.Just do one thing whenever you include or require filename namely class.login.php. You can include it this way:This way it never throws an error.This function will print a stack telling you where it was called from:Call this function at the top of the file that includes your class.Sometimes it will only print once, even though your class is being included two or more times. This is because PHP actually parses all the top-level classes in a file before executing any code and throws the fatal error immediately. To remedy this, wrap your class declaration in if(true) { ... }, which will move your class down a level in scope. Then you should get your two traces before PHP fatal errors.This should help you find where you class is being included from multiple times in a complex project.Did You use Zend Framework? I have the same problem too.

I solved it by commenting out this the following line in config/application.ini:I hope this will help you.Another possible culprit is source control and unresolved conflicts. SVN may cause the same class to appear twice in the conflicted code file; two alternative versions of it ("mine" and "theirs").I have encountered that same problem:

newer php version doesn't deal the same with multiple incluse of the same file (as a library), so now I have to change all my include by some include_once.Or this tricks could help, if you d'ont have too much class in your library...I had the same problem "PHP Fatal error: Cannot redeclare class XYZ.php".I have two directories like controller and model and I uploaded by mistakenly XYZ.php in both directories.(so file with the same name cause the issue).Find in your whole project and make sure you have only one class XYZ.php.Add a namespace in your class so you can use the same class name.i have encountered that same problem. found out the case was the class name. i dealt with it by changing the name. hence resolving the problem.It actually means that class is already declared in the page and you are trying to recreate it.A simple technique is as follow.I solved the issue with the following. Hope this will help you a bit.

What is your preferred php deployment strategy? [closed]

GloryFish

[What is your preferred php deployment strategy? [closed]](https://stackoverflow.com/questions/425692/what-is-your-preferred-php-deployment-strategy)

I'm beginning a new project in PHP and I'd love to get some feedback from other developers on their preferred strategy for PHP deployment. I'd love to automate things a bit so that once changes are committed they can be quickly migrated to a development or production server.I have experience with deployments using Capistrano with Ruby as well as some basic shell scripting.Before I dive head first on my own it would be great to hear how others have approached this in their projects.Currently developers work on local installations of the site and commit changes to a subversion repository. Initial deployments are made by exporting a tagged release from svn and uploading that to the server.Additional changes are typically made piecemeal by manually uploading changed files.

2009-01-08 20:09:33Z

I'm beginning a new project in PHP and I'd love to get some feedback from other developers on their preferred strategy for PHP deployment. I'd love to automate things a bit so that once changes are committed they can be quickly migrated to a development or production server.I have experience with deployments using Capistrano with Ruby as well as some basic shell scripting.Before I dive head first on my own it would be great to hear how others have approached this in their projects.Currently developers work on local installations of the site and commit changes to a subversion repository. Initial deployments are made by exporting a tagged release from svn and uploading that to the server.Additional changes are typically made piecemeal by manually uploading changed files.For PHP, SVN with Phing build scripts are the way to go. Phing is similar to ANT but is written in PHP, which makes it much easier for PHP developers to modify for their needs.Our deployment routine is as follows:There's also phpUnderControl, which is a Continuous Integration server. I didn't find it very useful for web projects to be honest.I'm currently deploying PHP using Git. A simple git push production is all that's needed to update my production server with the latest copy from Git. It's easy and fast because Git's smart enough to only send the diffs and not the whole project over again. It also helps keep a redundant copy of the repository on the web server in case of hardware failure on my end (though I also push to GitHub to be safe).We use Webistrano, a web frontend for Capistrano, and are very happy with it.Webistrano allows multi-stage, multi-environment deployments from SVN, GIT and others. It has built-in rollback support, support for separate server roles such as web, db, app, etc., and deploys in parallel. It allows you to override config parameters on multiple levels, such as per stage, and logs the results of every deploy, optionally mailing it.Even though Capistrano and Webistrano are Ruby applications, the syntax of the deployment 'recipes' is easy and powerful enough to understand for any PHP programmer. Originally Capistrano was built for Ruby on Rails projects, but easily accommodates PHP projects.Once configured it is even easy enough to be used by non-programmers, such as testers deploying a staging version.To provide the fastest deploy possible we installed the fast_remote_cache method, which updates a svn working-copy cache on the remote server, and then hardlinks the result.I use Apache Ant to deploy to different targets (dev, QA and live). Ant is designed to work for Java deployment, but it provides a pretty useful general case solution for deploying arbitrary files.The syntax of the build.xml file is pretty easy to learn - you define different targets and their dependencies which run when you call the ant program on the command line.For example, I have targets for dev, QA and live, each of which depends on the cvsbuild target which checks out the latest head revision from our CVS server, copies the appropriate files to the build directory (using the fileset tag), and then rsyncs the build directory to the appropriate server. There are a few quirks to learn, and the learning curve is not totally flat, but I've been doing it this way for years with no trouble so I'd recommend it for your situation, though I'm curious what other answers I'll see on this thread.I do stuff manually using Git. One repository for development, which gets git push --mirror'ed to a public repo, and the live server is a third repo pulled from that. This part I suppose is the same as your own setup.The big difference is that I use branches for nearly every change I'm working on (I've got about 5 right now), and tend to flip back and forth between them. The master branch doesn't get changed directly except for merging other branches.I run the live server direct from the master branch, and when I'm finished with another branch and ready to merge it, flip the server to that branch for a while. If it breaks, putting it back to master takes seconds. If it works, it gets merged into master and the live code gets updated. I suppose an analogy of this in SVN would be having two working copies and pointing to the live one via a symlink.I know Phing has been mentioned a few times now, but I've had great luck with phpUnderControl. For us wean alternative to home-made deployment scripts is to deploy to a platform-as-a-service which abstracts away a lot of that work for you. A PaaS will typically offer its own code deployment tool, as well as scaling, fault-tolerance (eg. not going down when hardware fails), and usually a great toolkit for monitoring, log checking etc. There's also the benefit of deploying to a known good configuration which will be kept up-to-date over time (one less headache for you).The PaaS I would recommend is dotCloud, in addition to PHP (see their PHP quickstart) it can also deploy MySQL, MongoDB and a whole bunch of additional services. It also has nice goodies like zero-downtime deployment, instant rollback, full support for SSL and websocket, etc. And there's a free tier which is always nice :)Of course I'm slightly biased since I work there! Other options worth checking out in addition  to dotCloud are Pagodabox and Orchestra (now part of Engine Yard).Hope this helps!SolomonThat you automatically and blindly take changes from a repository to production servers sounds dangerous. What if your committed code contains a regression bug, so your production application gets glitchy?But, if you want a Continuous Integration system for PHP, I guess Phing is the best choice for PHP. I haven't tested it myself, though, as I do stuff the manual way of e.g. scp.I am way late to the party, but I thought I would share our methods. We use Phing with Phingistrano, which provides Capistrano-like functionality to Phing via pre-built build files. It is very cool, but only works if you use Git at the moment.I have a working copy of an SVN release branch on the server.  Updating the site (when there aren't schema changes) is as easy as issuing an SVN update command.  I don't even have to take the site offline.Phing is probably your best bet, if you can stand the pain of xml configuration files. The Symfony framework has its own port of rake (pake), which works quite well, but is rather tightly coupled to the rest of Symfony (Though you could probably separate them). Another option is to use Capistrano. Obviously it doesn't integrate as well with PHP, as it does with Ruby, but you can still use it for a lot of stuff.Lastly, you can always write shell scripts. So far, that's what I have done.http://controltier.org/wiki/Main_Pagewe are going to use it for multi-server deployments & maintenance.One year late but...

In my case, deployment is not automatic. I find it dangerous to deploy code and run database-migration scripts automatically.Instead, subversion hooks are used to deploy only to testing/staging server. Code is deployed to production at the end of an iteration, after having run tests and made sure things will work. For the deployment itself, I use a custom-made Makefile that uses rsync for transferring files. The Makefile may also run the migration scripts on the remote server, pause/resume web and database servers.At my work myself and my team have developed a Phing oriented replacement for capistrano's deploy and we've also incorporated some of the goodies available in phing like PHPUnit testing, phpcs and PHPDocumentor. We've made it a git repo that can be added to a project as a submodule in git and it works very well. I've attached it to a handful of projects and it's modular enough that it's easy to make it work with any project on any of our several environments (staging, testing, production, etc...). With the phing build scripts you can run them from the command line manually, and I've also had success automating the build/deploy routines with Hudson and now Jenkins ci.I can't post any links now because the repo isn't public yet, but I've been told we're going to open source it sometimes soon, so please feel free to contact me if you're interested or if you have any questions on automating your deployment with phing and git.I guess SVN deploy way is not very good. Because:You need to open the SVN access for the whole worldhave many .svn in the production web serversI think Phing to produce a branch + combine all the js/css + replace stage config + ssh upload to all www servers is better way.ssh to 10 www server and svn up is also trouble. 

Memcached vs APC which one should I choose? [closed]

Thomaschaaf

[Memcached vs APC which one should I choose? [closed]](https://stackoverflow.com/questions/815041/memcached-vs-apc-which-one-should-i-choose)

I read this article: http://www.mysqlperformanceblog.com/2006/09/27/apc-or-memcached/ from way back when.. I want to get the best caching engine available so that my application is really fast. Of course I don't want to over-cache but I want to at least choose the best thing out there. In that article it says Memcached is slow and apc is fast so why is everyone choosing memcached?http://framework.zend.com/manual/en/zend.cache.backends.html#zend.cache.backends.twolevels here is says "use a fast one (but limited) like Apc, Memcache... and a "slow" one like File, Sqlite..." do you think using Apc as the fast and Memcache as the slow is a good idea?

2009-05-02 15:31:26Z

I read this article: http://www.mysqlperformanceblog.com/2006/09/27/apc-or-memcached/ from way back when.. I want to get the best caching engine available so that my application is really fast. Of course I don't want to over-cache but I want to at least choose the best thing out there. In that article it says Memcached is slow and apc is fast so why is everyone choosing memcached?http://framework.zend.com/manual/en/zend.cache.backends.html#zend.cache.backends.twolevels here is says "use a fast one (but limited) like Apc, Memcache... and a "slow" one like File, Sqlite..." do you think using Apc as the fast and Memcache as the slow is a good idea?Memcached is a distributed caching system, whereas APC is non-distributed - and mainly an opcode cache.If (and only if) you have a web application which has to live on different webservers (loadbalancing), you have to use memcache for distributed caching.

If not, just stick to APC and its cache.You should always use an opcode cache, which APC is (also APC will get integrated into php6 iirc, so why not start using it now).You can/should use both for different purposes.Memcached if you need to preserve state across several web servers (if you're load balanced and it's important that what's in the cache is the same for all servers).APC if you just need access to quick memory to read (& write) on a (or each) server.Remember APC can also compile and speed up your script execution time. So you could for example be using APC for increased execution performance, while using memcached for cache storage.The main advatage of APC is opcode cache. Since PHP 5.5 integrated OpCache to its core and APC for PHP 5.4 is still flagged as beta, it's not official annoucement, but the development of APC would be dropped in near future.So I would recommend you to choose Memcached.I use both one for speed and the other to sync all my servers. If you do use memcache then please do keep in mind of the open ports which you will need to block with iptables.Hey Thomaschaaf, I hope this is not tool late for you but please note that APC has some issues related to "user-cache". To make a long story short, when you set time-outs for cache entries, or if your apache crashes inside internal APC code (timeout, for example), then you may suffer some problems.I have an entry about the issue here: http://nirlevy.blogspot.com/2009/06/apc-futexwait-lockdown-make-your-apache.html, and you should also read http://t3.dotgnu.info/blog/php/user-cache-timebomb.html (from one of the APC developers i think)I use only APC since APC is a code cache and acts like memcache ! Only 1 config file instead of 2.And only 1 place to monitor both cache.....It depends on what you are doing but for my drupal websites running on a VPS I find APC works great!  If you are running CentOS 6 it is available as a yum update so dead simple to install and no config as the defaults are reasonable.  A no brainer imho.

PHP - find entry by object property from an array of objects

Alex

[PHP - find entry by object property from an array of objects](https://stackoverflow.com/questions/4742903/php-find-entry-by-object-property-from-an-array-of-objects)

The array looks like:And I have a integer variable called $v.How could I select an array entry that has a object where the ID property has the $v value ?

2011-01-20 02:24:39Z

The array looks like:And I have a integer variable called $v.How could I select an array entry that has a object where the ID property has the $v value ?You either iterate the array, searching for the particular record (ok in a one time only search) or build a hashmap using another associative array.For the former, something like thisSee this question and subsequent answers for more information on the latter - Reference PHP array by multiple indexesYurkamTim is right. It needs only a modification:After function($) you need a pointer to the external variable by "use(&$searchedValue)" and then you can access the external variable. Also you can modify it.I've found more elegant solution here. Adapted to the question it may look like:Using array_column to re-index will save time if you need to find multiple times:Then you can simply $lookup[$id] at will.Tryworking example hereUsing it the way you wanted would be something like:Fixing a small mistake of the @YurkaTim, your solution work for me but adding use:To use $searchedValue, inside of the function, one solution can be use ($searchedValue) after function parameters function ($e) HERE.the array_filter function only return on $neededObject the if the condition on return is true If $searchedValue is a string or integer:If $searchedValue is array where we need check with a list:I sometimes like using the array_reduce() function to carry out the search. It's similar to array_filter() but does not affect the searched array, allowing you to carry out multiple searches on the same array of objects.I did this with some sort of Java keymap.

If you do that, you do not need to loop over your objects array every time.output:Way to instantly get first value:I posted what I use to solve this very issue efficiently here using a quick Binary Search Algorithm: https://stackoverflow.com/a/52786742/1678210I didn't want to copy the same answer.  Someone else had asked it slightly differently but the answer is the same.

How to remove all leading zeroes in a string

Gerald

[How to remove all leading zeroes in a string](https://stackoverflow.com/questions/5098688/how-to-remove-all-leading-zeroes-in-a-string)

If I have a stringhow can I get rid of the leading zeroes so that I will only have thisnote that the number above was generated randomly.

2011-02-23 23:34:16Z

If I have a stringhow can I get rid of the leading zeroes so that I will only have thisnote that the number above was generated randomly.ltrim:Don't know why people are using so complex methods to achieve such a simple thing! And regex? Wow!Here you go, the easiest and simplest way (as explained here: https://nabtron.com/kiss-code/ ):Similar to another suggestion, except will not obliterate actual zero:you can add "+" in your variable,example :Regex was proposed already, but not correctly:output is then:Background on Regex:

the ^ signals beginning of string and the + sign signals more or none of the preceding sign. Therefore, the regex ^0+ matches all zeroes at the beginning of a string.I don't think preg_replace is the answer..

old thread but just happen to looking for this today. ltrim and (int) casting is the winner.Im Fixed with this way.its very simple. only pass a string its remove zero start of string.Ajay Kumar offers the simplest echo +$numString;

I use these:Actually any math function will take the number from the "string" and treat it like so. It's much simpler than any regex or comparative functions.

I saw that in php.net, don't remember where.Assuming you want a run-on of three or more zeros to be removed and your example is one string:You can make the regex pattern fit what you need if my assumptions are off.This help?

How to fix Error: laravel.log could not be opened?

FRR

[How to fix Error: laravel.log could not be opened?](https://stackoverflow.com/questions/23411520/how-to-fix-error-laravel-log-could-not-be-opened)

I'm pretty new at laravel, in fact and I'm trying to create my very first project. for some reason I keep getting this error (I haven't even started coding yet)I've read this has something to do with permissions but chmod -R 775 storage didn't help at all. 

2014-05-01 16:02:45Z

I'm pretty new at laravel, in fact and I'm trying to create my very first project. for some reason I keep getting this error (I haven't even started coding yet)I've read this has something to do with permissions but chmod -R 775 storage didn't help at all. Never set a directory to 777. you should change directory ownership. so set your current user that you are logged in with as owner and the webserver user (www-data, apache, ...) as the group.

You can try this:then to set directory permission try this:Update:Webserver user and group depend on your webserver and your OS. to figure out what's your web server user and group use the following commands. for nginx use:ps aux|grep nginx|grep -v grep for apache use:ps aux | egrep '(apache|httpd)'Never use 777 for directories on your live server, but on your own machine, sometimes we need to do more than 775, because MeansIf your webserver is not running as Vagrant, it will not be able to write to it, so you have 2 options:or change the group to your webserver user, supposing it's www-data:To fix this issue, you need to change the ownership of the directory to the unix user that the webserver uses.Even though I created the project within the VM using the VM user, the folder belonged to the user in the real computer; so, when trying to Now it's working.Thanks to all those that helped me figure this thing outEDIT:Actually, it still wasn't working, it still gave me a "permission denied" problem.Here's what I did, I modified my Vagrantfile like this:You need to adjust the permissions of storage and bootstrap/cache.Depending on how your web server is setup, you may be able to be more specific with your permissions, and only grant them to your web server user. Google WEB SERVER NAME Laravel file permissions for more information.At the time of writing, this is for Laravel 5.4It also may be SELinux. (Centos, RedHat)Determine status of SElinux on terminal:If status is enabled, write command to disable SElinuxOr you may execute this command$ sudo setenforce 0Add to composer.jsonAfter composer installRun following commands and you can add sudo at starting of command depends on your system:For all Centos 7 users on a Laravel context, there is no need to disable Selinux, just run these commands:Lastly, make sure your hosts, ips and virtual hosts are all correctly for remote accessing.Selinux is intended to restrict access even to root users, so only the necessary stuff might be accessed, at least on a generalist overview, it's extra security, disabling it is not a good practise, there are many links to learn Selinux, but for this case it is not even required.In Laravel, you should set ACL on storage and cache directory so that web server user can read/write on the directory. Open a new terminal and run following:References:https://symfony.com/doc/3.4/setup/file_permissions.html#using-acl-on-a-system-that-supports-setfacl-linux-bsdhttps://linux.die.net/man/1/setfaclThis solution is specific for laravel 5.5 You have to change permissions to a few folders:

chmod -R -777 storage/logs

chmod -R -777 storage/framework

for the above folders 775 or 765 did not work for my projectAlso the ownership of the project folder should be as follows (current user):(web server user)You could do:I wasn't too keen on changing my folder permissions to 777. Here's how I went about fixing this issue.First, I changed the user who is running the web server on my local machine(I run nginx, but the principles apply everywhere):Afterwards, I created another index.php file under the public/ folder to find out who was running my php-fpm version and where I would go about changing that:Reloading the page, I found out that www-data was the user(under the environment section). I also found out I was running php 7.1. I proceeded to change the user:Finally, I gave the following permissions to folders:Now, I made sure that I was the owner of the folders by using a simple:If you set the server and php-fpm users to yourself and the folders are owned by root for example, then you will keep encountering this issue. This can happen if you did a sudo laravel new <project> as root. In that case, make sure you use a recursive chown command on your project to change the user:group settings. In most default cases, www-data is the main setting for the server and php, in that case it's a matter of making sure the folder isn't out of www-data's reach.My project is setup in my home directory. On Ubuntu 16.04 and Laravel 5.5.try thisIf you use cmdIf you use GUIFirst go to the project and right click on the storage and check the properties and go to the Permissions tab Change the permissions using below codeThen your file properties may be Then check your settings and execute laravel command it will work :)In my particular case I had a config file generated and cached into the bootstrap/cache/ directory so my steps where: (on Ubuntu) : Can be solved in 2 simple steps : And Delete "/var/www/laravel/app/storage/logs/laravel.log" and try again:rm storage/logs/laravel.logHad this issue and found this and it solved the issue.This error can be fixed by disabling Linux.Check if it has been enabledsestatusYou try..setenforce 0For this error:Error in exception handler: The stream or file "/var/www/laravel/app/storage/logs/laravel.log" could not be opened: failed to open stream: Permission denied in /var/www/laravel/bootstrap/compiled.php:8423use this command in terminal:Fixed my problem with this command in centos 7.6 Server

PHP-FPM doesn't write to error log

eidng8

[PHP-FPM doesn't write to error log](https://stackoverflow.com/questions/8677493/php-fpm-doesnt-write-to-error-log)

I've just installed a nginx+php-fpm server. Everything seems fine except that PHP-FPM never writes error to its log.fpm.confnginx.confI've made an erroneous php script and run, and see error output on the web browser. Also nginx error log states stderr output from fpm with the same message. I've check that the user have write (I've even tried 777) permission to the appointed log folder. Even the appointed error.log file has be created successfully by php-fpm. However, the log file is always empty, no matter what outrageous error has been made from php script.What's going on?[Found the reason quite a while later]It was permission. Changed the owner to the sites's users solved the problem.

2011-12-30 08:14:39Z

I've just installed a nginx+php-fpm server. Everything seems fine except that PHP-FPM never writes error to its log.fpm.confnginx.confI've made an erroneous php script and run, and see error output on the web browser. Also nginx error log states stderr output from fpm with the same message. I've check that the user have write (I've even tried 777) permission to the appointed log folder. Even the appointed error.log file has be created successfully by php-fpm. However, the log file is always empty, no matter what outrageous error has been made from php script.What's going on?[Found the reason quite a while later]It was permission. Changed the owner to the sites's users solved the problem.This worked for me:Edit:The file to edit is the file that configure your desired pool.

By default its: /etc/php-fpm.d/www.confI struggled with this for a long time before finding my php-fpm logs were being written to /var/log/upstart/php5-fpm.log. It appears to be a bug between how upstart and php-fpm interact. See more here: https://bugs.launchpad.net/ubuntu/+source/php5/+bug/1319595I had a similar issue and had to do the following to the pool.d/www.conf fileIt still wasn't writing the log file so I actually had to create it by touch /var/log/fpm-php.www.log then setting the correct owner sudo chown www-data:www-data /var/log/fpm-php.www.log.Once this was done, and php5-fpm restarted, logging was resumed.There are multiple php config files, but THIS is the one you need to edit:uncomment the line that says:That will allow PHPs stderr to go to php-fpm's error log instead of /dev/null.I gathered insights from a bunch of answers here and I present a comprehensive solution:So, if you setup nginx with php5-fpm and log a message using error_log() you can see it in /var/log/nginx/error.log by default.A problem can arise if you want to log a lot of data (say an array) using error_log(print_r($myArr, true));. If an array is large enough, it seems that nginx will truncate your log entry.To get around this you can configure fpm (php.net fpm config) to manage logs. Here are the steps to do so. Now your logs will be in /var/log/fpm-php.www.log.There is a bug https://bugs.php.net/bug.php?id=61045 in php-fpm from v5.3.9 and till now (5.3.14 and 5.4.4). Developer promised fix will go live in next release. If you don't want to wait - use patch on that page and re-build or rollback to 5.3.8.in your fpm.conf file you haven't set 2 variable which is only for error loggingthis variables are error_log (file path of your error log file) log_level (error logging level); Error log file

; Note: the default prefix is /usr/local/php/var

; Default Value: log/php-fpm.log; Log level

; Possible Values: alert, error, warning, notice, debug

; Default Value: noticein my case I show that the error log was going to /var/log/php-fpm/www-error.log . so I commented this line in /etc/php-fpm.d/www.confand as said above I also uncommented this line Now I can see logs in the file specified by nginx.I'd like to add another tip to the existing answers because they did not solve my problem.Watch out for the following nginx directive in your php location block:Removing this line has brought an end to many hours of struggling and pulling hair.It could be hidden in some included conf directory like /etc/nginx/default.d/php.conf in my fedora.Check the Owner directory of "PHP-FPM"You can do:

How to display string that contains HTML in twig template?

Gildas Ross

[How to display string that contains HTML in twig template?](https://stackoverflow.com/questions/8355123/how-to-display-string-that-contains-html-in-twig-template)

How can I display a string that contains HTML tags in twig template?My PHP variable contains this html and text:When I do this in my twig template:I get this:I want this instead:Is it possible to get this easily?

2011-12-02 10:44:59Z

How can I display a string that contains HTML tags in twig template?My PHP variable contains this html and text:When I do this in my twig template:I get this:I want this instead:Is it possible to get this easily?Use raw keyword, http://twig.sensiolabs.org/doc/api.html#escaper-extensionYou can also use:so that only <b> tag will be allowed.if you want to allow multiple tags

How can I trim all strings in an Array? [duplicate]

Daniel

[How can I trim all strings in an Array? [duplicate]](https://stackoverflow.com/questions/6769464/how-can-i-trim-all-strings-in-an-array)

If I have this array:and I want to trim all of them, How can I do that?The array after the trim:

2011-07-20 22:47:25Z

If I have this array:and I want to trim all of them, How can I do that?The array after the trim:array_map() is what you need:array_map() applies a given callback to every value of an array and return the results as a new array.

Laravel migration: unique key is too long, even if specified

harryg

[Laravel migration: unique key is too long, even if specified](https://stackoverflow.com/questions/23786359/laravel-migration-unique-key-is-too-long-even-if-specified)

I am trying to migrate a users table in Laravel. When I run my migration I get this error:my migration is as follows:After some googling I came across this bug report where Taylor says you can specify the index key as the 2nd parameter of unique(), which I have done. It still gives the error. What is going on here?

2014-05-21 14:35:38Z

I am trying to migrate a users table in Laravel. When I run my migration I get this error:my migration is as follows:After some googling I came across this bug report where Taylor says you can specify the index key as the 2nd parameter of unique(), which I have done. It still gives the error. What is going on here?Specify a smaller length for your e-mail:Which is the default, actually:And you should be good.For Laravel 5.4 you can find a solution in this Laravel 5.4: Specified key was too long error, Laravel News post:As outlined in the Migrations guide to fix this all you have to do is edit your AppServiceProvider.php file and inside the boot method set a default string length:Update 1As of Laravel 5.4 those changes are no more needed.Update 2Current production MariaDB versions DO NOT support this setting by default globally. It is implemented in MariaDB 10.2.2+ by default.SolutionAnd if you intentionally want to use the correct future-default (starting from Laravel 5.4) UTF8 multi-byte utf8mb4 support for 😀 then start to fix 😂 your database configuration.In Laravel config/database.php define:DYNAMIC allows to store long key indexes.Server settings (by default included in MySQL 5.7.7+ / MariaDB 10.2.2+):For clients:And then STOP your MySQL/MariaDB server. After that START. Hot RESTART may not work.Now you have Laravel 5.x with UTF8 support.If you're on or updated to Laravel 5.4 This worked for me;Just 1 change. in AppServiceProvider.phpAs mentioned in the migrate guide https://laravel.com/docs/master/migrations#creating-indexesIf anyone else stumbles upon this answer like I did but for a different reason, you may check your Laravel DB charset/collation.I was installing an application (Snipe-IT) and had configured the Laravel database config to use the following:Removing mb4 from both strings fixed the issue, although I believe Antonio's answer is the real solution to the problem.This worked for me: Remove mb4 from charset and collation from config/database.php, then it will execute successfully.

'charset' => 'utf8',

'collation' => 'utf8_unicode_ci',For laravel 5.6 

This solution solve my problem 

go to config/database.php 

Find the code belowChange this two field With This For laravel 5.4, simply edit file I have faced the same issue, and fixed it by adding the below two lines in my app/database.phpMy file looks like below :In file config/database.php where :Change this line to this :i had same problem and i am using a wamp Solution : 

Open file :

config/database.phpThanksI added to the migration itselfyes, I know I need to consider it on every migration but I would rather that than have it tucked away in some completely unrelated service providerIf someone having this problem even after doing, above mentioned changes. For an example, in my case I did below changes, But it wouldn't work right away for two reasons. One is if you are using lumen instead of laravel, you may have to uncomment this line in your app.php file first. And then you have to create the migration script again with the artisan command, Since now only the changes you made to ServiceProvider will work.for laravel 5.7 write these code in appserviceprovider.phpChange charset to from 'utf8mb4' to 'utf8' andcollation to 'utf8mb4_unicode_ci' to 'utf8_unicode_ci'in config/database.php fileIt worked for me.Laravel uses the utf8mb4 character set by default, which includes support for storing "emojis" in the database. If you are running a version of MySQL older than the 5.7.7 release or MariaDB older than the 10.2.2 release, you may need to manually configure the default string length generated by migrations in order for MySQL to create indexes for them. You may configure this by calling the  Schema::defaultStringLength method within your AppServiceProvider:You can check out ofhttps://laravel-news.com/laravel-5-4-key-too-long-error

https://laravel.com/docs/5.5/migrations#indexesIt's because Laravel 5.4 uses utf8mb4 which supports storing emojis.Add this in your app\Providers\AppServiceProvider.phpand you should be good to go.If you're on or updated to Laravel 5.4 and latest version it works;

Just 1 change in AppServiceProvider.phpFor Laravel >= 5.6 usersOpen AppServiceProvider.php fileUse the following classThen inside boot method add the following lineI'd like to point that something that i missed ...I'm new at Laravel, and i didn't copy the "use Illuminate....." because i really didn'at paid atention, because right above the function boot you alread have a use Statement.Hope that helps anyoneI had a problem, change the configuration of the 'config / database' keeping the same pattern in the database.I then gave the commandIn 24 october 2016 Taylor Otwell the Author of Laravel  announced on is Twitterwhich before version 5.4 the character set was utf8During this century many web app, include chat or some kind platform to allow their users to converses, and many people like to use emoji or smiley. and this are some kind of super characters that require more spaces to be store and that is only possible using utf8mb4 as the charset. That is the reason why they migrate to utf8mb4 just for space purpose.if you look up in the Illuminate\Database\Schema\Builder class you will see that the $defaultStringLength is set to 255, and to modify that you can procede through the Schema Facade and call the defaultStringLength method and pass the new length.to perform that change call that method within your AppServiceProvider class which is under the app\providers subdirectory like thisI will suggest to use 191 as the value just because MySQL support 767 bytes, and because 767 / 4 which is the number of byte take by each multibyte character you will get 191.You can learn more here 

The utf8mb4 Character Set (4-Byte UTF-8 Unicode Encoding)

    Limits on Table Column Count and Row SizeSOLUTION:First change the defaultStringLength to 191, in the app\Providers\AppServiceProvider.php:Then, change the charset and collation values as follows, in config\database.php:(link to know about MariaDB charset)You will not have this problem if you're using MySQL 5.7.7+ or MariaDB 10.2.2+.To update MariaDB on your Mac using Brew first unlink the current one:

brew unlink mariadb and then install a dev one using brew install mariadb --devel After installation is done stop/start the service running:

brew services stop mariadb

brew services start mariadbCurrent dev version is 10.2.3. After the installation is finished you won't have to worry about this anymore and you can use utf8mb4 (that is now a default in Laravel 5.4) without switching back to utf8 nor editing AppServiceProvider as proposed in the Laravel documentation:  https://laravel.com/docs/master/releases#laravel-5.4 (scroll down to: Migration Default String Length)Just installed MariaDB 10.2.4 RC, fired up new blank Laravel 5.4 project and default migration (varchar(255) columns) works.No need to change DB conf and Laravael config/database.php. Thus just as @scorer noted about default behaviour for 10.2.2+.All was well described in the others Anwser

you can see more details in the link bellow (search with key 'Index Lengths & MySQL / MariaDB")

https://laravel.com/docs/5.5/migrationsBUT WELL THAT's not what this answer is about! the thing is even with doing the above you will like get another error (that's when you like launch php artisan migrate command and because of the problem of the length, the operation like stuck in the middle. solution is bellow, and the user table is like created without the rest or not totally correctly)

we need to roll back. the default roll back will not do. because the operation of migration didn't like finish. you need to delete the new created tables in the database manually.we can do it using tinker as in bellow:I myself had a problem with users table. after that your good to goSet database engine InnoDB:If you have tried every other answer and they have not worked, you can drop all tables from the database and then execute the migrate command all at once using this command:If you are seeing this error then definitely you need to make following changes on 

AppServiceProvider.php file -> which can be found inside app->providers:changes to be madethis should solve your problem for more you can see the Laravel news regarding this issue. 

https://laravel-news.com/laravel-5-4-key-too-long-error

Difference between break and continue in PHP?

powtac

[Difference between break and continue in PHP?](https://stackoverflow.com/questions/4364757/difference-between-break-and-continue-in-php)

What is the difference between break and continue in PHP?

2010-12-06 09:10:11Z

What is the difference between break and continue in PHP?break ends a loop completely, continue just shortcuts the current iteration and moves on to the next iteration.This would be used like so:break exits the loop you are in, continue starts with the next cycle of the loop immediatly.Example:will output:BREAK:CONTINUE:So depending on your need, you can reset the position currently being executed in your code to a different level of the current nesting.Also, see here for an artical detailing Break vs Continue with a number of examplesFor the Record:Break ends the current loop/control structure and skips to the end of it, no matter how many more times the loop otherwise would have repeated.Continue skips to the beginning of the next iteration of the loop.'continue' is used within looping structures to skip the rest of the current loop iteration and continue execution at the condition evaluation and then the beginning of the next iteration.'break' ends execution of the current for, foreach, while, do-while or switch structure.break accepts an optional numeric argument which tells it how many nested enclosing structures are to be broken out of. Check out the following links:http://www.php.net/manual/en/control-structures.break.phphttp://www.php.net/manual/en/control-structures.continue.phpHope it helps..break used to get out from the loop statement, but continue just stop script on specific condition and then continue looping statement until reach the end..Hope it can help u;break will stop the current loop (or pass an integer to tell it how many loops to break from).continue will stop the current iteration and start the next one.break will exit the loop, while continue will start the next cycle of the loop immediately.I am not writing anything same here. Just a changelog note from PHP manual.

Where are $_SESSION variables stored?

Steve Gattuso

[Where are $_SESSION variables stored?](https://stackoverflow.com/questions/454635/where-are-session-variables-stored)

Are $_SESSION variables stored on the client or the server?

2009-01-18 04:10:54Z

Are $_SESSION variables stored on the client or the server?The location of the $_SESSION variable storage is determined by PHP's session.save_path configuration. Usually this is /tmp on a Linux/Unix system. Use the phpinfo() function to view your particular settings if not 100% sure by creating a file with this content in the DocumentRoot of your domain:Here is the link to the PHP documentation on this configuration setting:http://php.net/manual/en/session.configuration.php#ini.session.save-pathAs mentioned already, the contents are stored at the server. However the session is identified by a session-id, which is stored at the client and send with each request. Usually the session-id is stored in a cookie, but it can also be appended to urls. (That's the PHPSESSID query-parameter you some times see)They're generally stored on the server. Where they're stored is up to you as the developer. You can use the session.save_handler configuration variable and the session_set_save_handler to control how sessions get saved on the server. The default save method is to save sessions to files. Where they get saved is controlled by the session.save_path variable.One addition: It should be noted that, in case "/tmp" is the directory where the session data is stored (which seems to be the default value), the sessions will not persist after reboot of that web server, as "/tmp" is often purged during reboot. The concept of a client-wise persistence stands and falls with the persistence of the storage on the server - which might fail if the "/tmp" directory is used for session data.On Debian (isn't this the case for most Linux distros?), it's saved in /var/lib/php5/. As mentioned above, it's configured in your php.ini.I am using Ubuntu and my sessions are stored in /var/lib/php5.As Mr. Taylor pointed out this is usually set in php.ini.  Usually they are stored as files in a specific directory.  For ubuntu 16.10 are sessions save in /var/lib/php/session/...How does it work? How does it know it's me?Most sessions set a user-key(called the sessionid) on the user's computer that looks something like this: 765487cf34ert8dede5a562e4f3a7e12. Then, when a session is opened on another page, it scans the computer for a user-key and runs to the server to get your variables.If you mistakenly clear the cache, then your user-key will also be cleared. You won't be able to get your variables from the server any more since you don't know your id.Many of the answers above are opaque. In my opinion the author of this question simply wants to know where session variables are stored by default. According to this:https://canvas.seattlecentral.edu/courses/937693/pages/10-advanced-php-sessions they are simply stored on the server by default. Hopefully, others will find this contribution meaningful.   

REST API - why use PUT DELETE POST GET?

Stann

[REST API - why use PUT DELETE POST GET?](https://stackoverflow.com/questions/4573305/rest-api-why-use-put-delete-post-get)

So, I was looking through some articles on creating REST API's.

And some of them suggest using all types of HTTP requests: like PUT DELETE POST GET.

We would create for example index.php and write API this way:OK, granted - I don't know much about web services (yet). 

But, wouldn't it be easier to just accept JSON object through regular POST or GET (that would contain method name and all parameters) and then respond in JSON as well. We can easily serialize/deserialize via PHP's json_encode() and json_decode() and do whatever we want with that data without having to deal with different HTTP request methods.Am I missing something?UPDATE 1:Ok - after digging through various API's and learning a lot about XML-RPC, JSON-RPC, SOAP, REST I came to a conclusion that this type of API is sound. Actually stack exchange is pretty much using this approach on their sites and I do think that these people know what they are doing Stack Exchange API.

2011-01-01 05:57:06Z

So, I was looking through some articles on creating REST API's.

And some of them suggest using all types of HTTP requests: like PUT DELETE POST GET.

We would create for example index.php and write API this way:OK, granted - I don't know much about web services (yet). 

But, wouldn't it be easier to just accept JSON object through regular POST or GET (that would contain method name and all parameters) and then respond in JSON as well. We can easily serialize/deserialize via PHP's json_encode() and json_decode() and do whatever we want with that data without having to deal with different HTTP request methods.Am I missing something?UPDATE 1:Ok - after digging through various API's and learning a lot about XML-RPC, JSON-RPC, SOAP, REST I came to a conclusion that this type of API is sound. Actually stack exchange is pretty much using this approach on their sites and I do think that these people know what they are doing Stack Exchange API.The idea of REpresentational State Transfer is not about accessing data in the simplest way possible.You suggested using post requests to access JSON, which is a perfectly valid way to access/manipulate data.REST is a methodology for meaningful access of data. When you see a request in REST, it should immediately be apparant what is happening with the data.For example:is likely going to return a list of chevy cars. A good REST api might even incorporate some output options in the querystring like ?output=json or ?output=html which would allow the accessor to decide what format the information should be encoded in.After a bit of thinking about how to reasonably incorporate data typing into a REST API, I've concluded that the best way to specify the type of data explicitly would be via the already existing file extension such as .js, .json, .html, or .xml. A missing file extension would default to whatever format is default (such as JSON); a file extension that's not supported could return a 501 Not Implemented status code.Another example:is likely going to create a new chevy malibu in the db with the associated colors. I say likely as the REST api does not need to be directly related to the database structure. It is just a masking interface so that the true data is protected (think of it like accessors and mutators for a database structure).Now we need to move onto the issue of idempotence. Usually REST implements CRUD over HTTP. HTTP uses GET, PUT, POST and DELETE for the requests.A very simplistic implementation of REST could use the following CRUD mapping:There is an issue with this implementation: Post is defined as a non-idempotent method. This means that subsequent calls of the same Post method will result in different server states. Get, Put, and Delete, are idempotent; which means that calling them multiple times should result in an identical server state.This means that a request such as:could actually be implemented as:Whereaswill result in the same server state if you call it once, or if you call it 1000 times.A better way of handling the removal of the oldest item would be to request:and use the ID from the resulting data to make a delete request:An issue with this method would be if another /cars item was added between when /oldest was requested and when the delete was issued.This is a security and maintainability question. Whenever possible, you should use 'safe' (unidirectional) methods such as GET and HEAD in order to limit potential vulnerability.Whenever possible, you should use 'idempotent' methods such as GET, HEAD, PUT and DELETE, which can't have side effects and are therefore less error prone/easier to control.SourceIn short, REST emphasizes nouns over verbs. As your API becomes more complex, you add more things, rather than more commands.You asked:From the Wikipedia on REST:From what (little) I've seen, I believe this is usually accomplished by maximizing the use of existing HTTP verbs, and designing a URL scheme for your service that is as powerful and self-evident as possible.Custom data protocols (even if they are built on top of standard ones, such as SOAP or JSON) are discouraged, and should be minimized to best conform to the REST ideology.The actual objects you are working with can be in any format.  The idea is to reuse as much of HTTP as possible to expose your operations the user wants to perform on those resource (queries, state management/mutation, deletion).You asked:There is a lot more to know about REST and the URI syntax/HTTP verbs themselves.  For example, some of the verbs are idempotent, others aren't.  I didn't see anything about this in your question, so I didn't bother trying to dive into it.  The other answers and Wikipedia both have a lot of good information.Also, there is a lot to learn about the various network technologies built on top of HTTP that you can take advantage of if you're using a truly restful API.  I'd start with authentication.In regards to using extension to define data type.

I noticed that MailChimp API is doing it, but I don't think this is a good idea.My sound like a good idea, but I think "older" approach is better - using HTTP headersAlso HTTP headers are much better for cross data type communication (if ever someone would need it)Yes. ;-)This phenomenon exists because of the uniform interface constraint. REST likes using already existing standards instead of reinventing the wheel. The HTTP standard has already proven to be highly scalable (the web is working for a while). Why should we fix something which is not broken?!note: The uniform interface constraint is important if you want to decouple the clients from the service. It is similar to defining interfaces for classes in order to decouple them from each other. Ofc. in here the uniform interface consists of standards like HTTP, MIME types, URI, RDF, linked data vocabs, hydra vocab, etc... Good Semantics is important in programming.Utilizing more methods besides GET/POST will be helpful because it will increase the readability of your code and make it easier to maintain.Why?Because you know GET will retrieve data from your api. You know POST will add new data to your system. You know PUT will make updates. DELETE will delete rows etc, etc,I normally structure my RESTFUL Web Services so that I have a function callback named the same thing as the method.I use PHP, so I use function_exists (I think its called). If the function doesn't exist, I throw a 405 (METHOD NOT ALLOWED). Bill Venners: In your blog post entitled "Why REST Failed," you said that we need all four HTTP verbs—GET, POST, PUT, and DELETE— and lamented that browser vendors only GET and POST." Why do we need all four verbs? Why aren't GET and POST enough?Elliotte Rusty Harold: There are four basic methods in HTTP: GET, POST, PUT, and DELETE. GET is used most of the time. It is used for anything that's safe, that doesn't cause any side effects. GET is able to be bookmarked, cached, linked to, passed through a proxy server. It is a very powerful operation, a very useful operation.POST by contrast is perhaps the most powerful operation. It can do anything. There are no limits as to what can happen, and as a result, you have to be very careful with it. You don't bookmark it. You don't cache it. You don't pre-fetch it. You don't do anything with a POST without asking the user. Do you want to do this? If the user presses the button, you can POST some content. But you're not going to look at all the buttons on a page, and start randomly pressing them. By contrast browsers might look at all the links on the page and pre-fetch them, or pre-fetch the ones they think are most likely to be followed next. And in fact some browsers and Firefox extensions and various other tools have tried to do that at one point or another.PUT and DELETE are in the middle between GET and POST. The difference between PUT or DELETE and POST is that PUT and DELETE are *idempotent, whereas POST is not. PUT and DELETE can be repeated if necessary. Let's say you're trying to upload a new page to a site. Say you want to create a new page at http://www.example.com/foo.html, so you type your content and you PUT it at that URL. The server creates that page at that URL that you supply. Now, let's suppose for some reason your network connection goes down. You aren't sure, did the request get through or not? Maybe the network is slow. Maybe there was a proxy server problem. So it's perfectly OK to try it again, or again—as many times as you like. Because PUTTING the same document to the same URL ten times won't be any different than putting it once. The same is true for DELETE. You can DELETE something ten times, and that's the same as deleting it once.By contrast, POST, may cause something different to happen each time. Imagine you are checking out of an online store by pressing the buy button. If you send that POST request again, you could end up buying everything in your cart a second time. If you send it again, you've bought it a third time. That's why browsers have to be very careful about repeating POST operations without explicit user consent, because POST may cause two things to happen if you do it twice, three things if you do it three times. With PUT and DELETE, there's a big difference between zero requests and one, but there's no difference between one request and ten.Please visit the url for more details. http://www.artima.com/lejava/articles/why_put_and_delete.htmlUpdate: Idempotent methods

An idempotent HTTP method is a HTTP method that can be called many times without different outcomes. It would not matter if the method is called only once, or ten times over. The result should be the same. Again, this only applies to the result, not the resource itself. This still can be manipulated (like an update-timestamp, provided this information is not shared in the (current) resource representation.Consider the following examples:The first example is idempotent: no matter how many times we execute this statement, a will always be 4. The second example is not idempotent. Executing this 10 times will result in a different outcome as when running 5 times. Since both examples are changing the value of a, both are non-safe methods.Basically REST is (wiki):REST is not protocol, it is principles.

Different uris and methods - somebody so called best practices.

What does the PHP error message「Notice: Use of undefined constant」mean?

Nik

[What does the PHP error message「Notice: Use of undefined constant」mean?](https://stackoverflow.com/questions/2941169/what-does-the-php-error-message-notice-use-of-undefined-constant-mean)

PHP is writing this error in the logs: "Notice: Use of undefined constant".Error in logs:Relevant lines of code:What does it mean and why am I seeing it?

2010-05-31 03:07:15Z

PHP is writing this error in the logs: "Notice: Use of undefined constant".Error in logs:Relevant lines of code:What does it mean and why am I seeing it?You should quote your array keys:As is, it was looking for constants called department, name, email, message, etc. When it doesn't find such a constant, PHP (bizarrely) interprets it as a string ('department', etc).  Obviously, this can easily break if you do defined  such a constant later (though it's bad style to have lower-case constants).The error message is due to the unfortunate fact that PHP will implicitly declare an unknown token as a constant string of the same name.That is, it's trying to interpret this (note the missing quote marks): The only valid way this would be valid syntax in PHP is if there was previously a constant department defined.  So sadly, rather than dying with a Fatal error at this point, it issues this Notice and acts as though a constant had been defined with the same name and value:There are various ways you can get this error message, but they all have the same root cause - a token that could be a constant.This is what the problem is in your case, and it's because you've got string array keys that haven't been quoted.  Fixing the string keys will fix the bug:Change:To:Another reason you might see this error message is if you leave off the $ from a variable, or $this-> from a member.  Eg, either of the following would cause a similar error message:A similar but more subtle issue can result if you try to use a disallowed character in a  variable name - a hyphen (-) instead of an underscore _ would be a common case.For example, this is OK, since underscores are allowed in variable names:But this isn't:It'll be interpreted the same as this:In order to refer to a class constant you need to specify the class scope with ::, if you miss this off PHP will think you're talking about a global define().Eg:There are some system-defined constants that only exist in newer versions of PHP, for example the mode option constants for round() such as PHP_ROUND_HALF_DOWN only exist in PHP 5.3 or later.So if you tried to use this feature in PHP 5.2, say:You'd get this error message:you probably forgot to use "". For exemple:change to:You missed putting single quotes around your array keys:should be:The correct way of using post variables isUse single quotation(')Insert single quotes.ExampleAm not sure if there is any difference am using code igniter and i use "" for the names and it works great.regards,Jorge.Looks like the predefined fetch constants went away with the MySQL extension, so we need to add them before the first function...//predifined fetch constantsI tested and succeeded.

What does '<?=' mean in PHP?

user198729

[What does '<?=' mean in PHP?](https://stackoverflow.com/questions/2020445/what-does-mean-in-php)

What does <?= mean exactly?

2010-01-07 13:08:43Z

What does <?= mean exactly?It's a shorthand for <?php echo $a; ?>.It's enabled by default since 5.4 regardless of php.ini settings.It's a shorthand for this:They're called short tags; see example #2 in the documentation.Since it wouldn't add any value to repeat that it means echo, I thought you'd like to see what means in PHP exactly:You can use this code to test it yourself:From the List of Parser Tokens, here is what T_OPEN_TAG_WITH_ECHO links to.<?= $a ?> is the same as <? echo $a; ?>, just shorthand for convenience.is a shortcut for:As of PHP 5.4.0, 

    <?=   ?>

are always available even without the short_open_tag set in php.ini.Furthermore, as of PHP 7.0, The ASP tags:

    <%, %> 

and the script tag 

    <script language="php"> 

are removed from PHP.It's a shortcut for <?php echo $a; ?> if short_open_tags are enabled. Ref: http://php.net/manual/en/ini.core.phpI hope it doesn't get deprecated. While writing <? blah code ?> is fairly unnecessary and confusable with XHTML, <?= isn't, for obvious reasons. Unfortunately I don't use it, because short_open_tag seems to be disabled more and more.Update: I do use <?= again now, because it is enabled by default with PHP 5.4.0.

See http://php.net/manual/en/language.basic-syntax.phptags.php

Remove useless zero digits from decimals in PHP

vitto

[Remove useless zero digits from decimals in PHP](https://stackoverflow.com/questions/14531679/remove-useless-zero-digits-from-decimals-in-php)

I'm trying to find a fast way to remove zero decimals from number values like this:Does exists some optimized way to do that?

2013-01-25 23:00:41Z

I'm trying to find a fast way to remove zero decimals from number values like this:Does exists some optimized way to do that?$num + 0 does the trick.Internally, this is equivalent to casting to float with (float)$num or floatval($num) but I find it simpler.you could just use the floatval functionThis is what I use:N.B. This assumes . is the decimal separator. It has the advantage that it will work on arbitrarily large (or small) numbers since there is no float cast. It also won't turn numbers into scientific notation (e.g. 1.0E-17).Simply adding + to your string variable will cause typecast to (float) and removes zeros:For everyone coming to this site having the same problem with commata instead, change: to:If there are two zeros to be removed, then change to:More here: PHP number: decimal point visible only if neededYou should cast your numbers as floats, which will do this for you.Output of this will be what you are looking for.If you want to remove the zero digits just before to display on the page or template.You can use the sprintf() functionThere is nothing that can't be fixed with a simple regex ;)http://xkcd.com/208/Typecast to a float.Due to this question is old. First, I'm sorry about this.The question is about number xxx.xx but in case that it is x,xxx.xxxxx or difference decimal separator such as xxxx,xxxx this can be harder to find and remove zero digits from decimal value.And here is the code for test.Be careful with adding +0.Result of this is 1.Strange, when I get a number out of database with a "float" type and if my number is ex. 10000 when I floatval it, it becomes 1.I've tested all the solutions above but didn't work.Complicated way but works:the solutions above are the optimal way but in case you want to have your own you could use this. What this algorithm does it starts at the end of string and checks if its 0, if it is it sets to empty string and then goes to the next character from back untill the last character is > 0You can use: Thats my small solution...

Can included to a class and set varsprivate $dsepparator = '.'; // decimals

private $tsepparator= ','; // thousandThat can be set by constructor and change to users lang.This is my solution. 

I want to keep ability to add thousands separator This is a simple one line function using rtrim, save separator and decimal point :I found this solution is the best:Simple and accurate!Ultimate Solution: The only safe way is to use regex:it will work for any caseThe following is much simpler$number=1200.0000;

str_replace('.00', '',number_format($number, 2, '.', ''));Output will be: 1200

Do AJAX requests retain PHP Session info?

Click Upvote

[Do AJAX requests retain PHP Session info?](https://stackoverflow.com/questions/676846/do-ajax-requests-retain-php-session-info)

If I had a user logged onto my site, having his id stored in $_SESSION, and from his browser he clicked a 'Save' button which would make an AJAX request to the server. Will his $_SESSION and cookies be retained in this request, and can I safely rely on the id being present in the $_SESSION?

2009-03-24 10:39:58Z

If I had a user logged onto my site, having his id stored in $_SESSION, and from his browser he clicked a 'Save' button which would make an AJAX request to the server. Will his $_SESSION and cookies be retained in this request, and can I safely rely on the id being present in the $_SESSION?The answer is yes:Sessions are maintained server-side.  As far as the server is concerned, there is no difference between an AJAX request and a regular page request.  They are both HTTP requests, and they both contain cookie information in the header in the same way.From the client side, the same cookies will always be sent to the server whether it's a regular request or an AJAX request.  The Javascript code does not need to do anything special or even to be aware of this happening, it just works the same as it does with regular requests.If the PHP file the AJAX requests has a session_start() the session info will be retained. (baring the requests are within the same domain)What you're really getting at is: are cookies sent to with the AJAX request?  Assuming the AJAX request is to the same domain (or within the domain constraints of the cookie), the answer is yes. So AJAX requests back to the same server do retain the same session info (assuming the called scripts issue a session_start() as per any other PHP script wanting access to session information).Well, not always. Using cookies, you are good. But the "can I safely rely on the id being present" urged me to extend the discussion with an important point (mostly for reference, as the visitor count of this page seems quite high).PHP can be configured to maintain sessions by URL-rewriting, instead of cookies. (How it's good or bad (<-- see e.g. the topmost comment there) is a separate question, let's now stick to the current one, with just one side-note: the most prominent issue with URL-based sessions -- the blatant visibility of the naked session ID -- is not an issue with internal Ajax calls; but then, if it's turned on for Ajax, it's turned on for the rest of the site, too, so there...)In case of URL-rewriting (cookieless) sessions, Ajax calls must take care of it themselves that their request URLs are properly crafted. (Or you can roll your own custom solution. You can even resort to maintaining sessions on the client side, in less demanding cases.) The point is the explicit care needed for session continuity, if not using cookies:From OWASP.org:From a Ruby-forum post:It is very important that AJAX requests retain session. The easiest example is when you try to do an AJAX request for the admin panel, let's say. Of course that you will protect the page that you make the request to, not to accessible by others who don't have the session you get after administrator login.

Makes sense?One thing to watch out for though, particularly if you are using a framework, is to check if the application is regenerating session ids between requests - anything that depends explicitly on the session id will run into problems, although obviously the rest of the data in the session will unaffected.If the application is regenerating session ids like this then you can end up with a situation where an ajax request in effect invalidates / replaces the session id in the requesting page.That's what frameworks do, e.g. if you initialize session in Front Controller or boostrap script, you won't have to care about it's initalization either for page controllers or ajax controllers. PHP frameworks are not a panacea, but they do so many useful things like this!put your session() auth in all server side pages accepting an ajax request:that's about the only way I've ever done it.

Creating and Update Laravel Eloquent

1myb

[Creating and Update Laravel Eloquent](https://stackoverflow.com/questions/18839941/creating-and-update-laravel-eloquent)

What's the shorthand for inserting a new record or updating if it doesn't exist?

2013-09-17 01:34:48Z

What's the shorthand for inserting a new record or updating if it doesn't exist?Here's a full example of what "lu cip" was talking about:Below is the updated link of the docs which is on the latest version of LaravelDocs here: Updated linkJust in case people are still coming across this... I found out a few weeks after writing this, that this is in fact part of Laravel's Eloquent's core...Digging into Eloquent’s equivalent method(s). You can see here: https://github.com/laravel/framework/blob/4.2/src/Illuminate/Database/Eloquent/Model.php#L553on :570 and :553Old Answer BelowI am wondering if there is any built in L4 functionality for doing this in some way such as: I did create this method a few weeks back...I Hope that helps. I would love to see an alternative to this if anyone has one to share. 

@erikthedev_As in Laravel >= 5.3, if someone is still curious how to do so in easy way. Its possible by using : updateOrCreate().For example for asked question you can use something like:Above code will check the table represented by ShopMeta, which will be most likely shop_metas unless not defined otherwise in model itself and it will try to find entry with column shopId = $theID and column metadateKey = 2001 and if it finds then it will update column shopOwner of found row to New One.If it finds more than one matching rows then it will update the very first row that means which has lowest primary id.If not found at all then it will insert a new row with :shopId = $theID,metadateKey = 2001 and shopOwner = New OneNotice

Check your model for $fillable and make sue that you have every column name defined there which you want to insert or update and rest columns have either default value or its id column auto incremented one.Otherwise it will throw error when executing above example:As there would be some field which will need value while inserting new row and it will not be possible as either its not defined in $fillable or it doesnt have default value.For more reference please see Laravel Documentation at :

https://laravel.com/docs/5.3/eloquentOne example from there is:which pretty much clears everything.Someone has asked if it is possible using Query Builder in Laravel. Here is reference for Query Builder from Laravel docs.Query Builder works exactly the same as Eloquent so anything which is true for Eloquent is true for Query Builder as well. So for this specific case, just use the same function with your query builder like so:Of course, don't forget to add DB facade:ORI hope it helpsSave function:already do what you want... Laravel code:firstOrNew will create record if not exist and updating a row if already exist.

 You can also use updateOrCreate here is the full exampleIf there's a flight from Oakland to San Diego, set the price to $99. if not exist create new rowReference Doc here: (https://laravel.com/docs/5.5/eloquent)Then make your changes and save. Note the firstOrNew doesn't do the insert if its not found, if you do need that then its firstOrCreate. If you need the same functionality using the DB, in Laravel >= 5.5 you can use:or the shorthand version when $attributes and $values are the same:One more option if your id isn't autoincrement and you know which one to insert/update:Actually firstOrCreate would not update in case that the register already exists in the DB.

I improved a bit Erik's solution as I actually needed to update a table that has unique values not only for the column "id"Then you'd use it like this:like @JuanchoRamone posted above (thank @Juancho) it's very useful for me, but if your data is array you should modify a little like this:Like the firstOrCreate method, updateOrCreate persists the model, so there's no need to call save()And for your issuehttps://github.com/yadakhov/insert-on-duplicate-keyLaravel 6 CRUD Tutorial With Example from scratchapp/Http/Controllers/MovieController.phpcheck if a user exists or not. If not  insert

PHP: How to remove specific element from an array?

dcp3450

[PHP: How to remove specific element from an array?](https://stackoverflow.com/questions/2448964/php-how-to-remove-specific-element-from-an-array)

How do I remove an element from an array when I know the elements name? for example:I have an array:the user enters strawberrystrawberry is removed.To fully explain:I have a database that stores a list of items separated by a comma. The code pulls in the list based on a user choice where that choice is located. So, if they choose strawberry they code pulls in every entry were strawberry is located then converts that to an array using split(). I want to them remove the user chosen items, for this example strawberry, from the array.

2010-03-15 17:05:30Z

How do I remove an element from an array when I know the elements name? for example:I have an array:the user enters strawberrystrawberry is removed.To fully explain:I have a database that stores a list of items separated by a comma. The code pulls in the list based on a user choice where that choice is located. So, if they choose strawberry they code pulls in every entry were strawberry is located then converts that to an array using split(). I want to them remove the user chosen items, for this example strawberry, from the array.Use array_search to get the key and remove it with unset if found:array_search returns false (null until PHP 4.2.0) if no item has been found.And if there can be multiple items with the same value, you can use array_keys to get the keys to all items:Use array_diff() for 1 line solution:...No need for extra functions or foreach loop.If you are using a plain array here (which seems like the case), you should be using this code instead:unset($array[$key]) only removes the element but does not reorder the plain array.Supposingly we have an array and use array_splice:Compared to unset:Notice how unset($array[$key]) does not reorder the array.You can use array filter to remove the items by a specific condition on $v:Will be like this:This is a simple reiteration that can delete multiple values in the array.I'm currently using this function:You can input an array or only a string with the element(s) which should be removed.

Write it like this:OR$detils = array_delete('orange', $detils);It'll also reindex it.Just u can do single line .it will be remove element from arrayThis question has several answers but I want to add something more because when I used unset or array_diff I had several problems to play with the indexes of the new array when the specific element was removed (because the initial index are saved)I get back to the example :orIf you print the result you will obtain :Result :But the indexes will be saved and so you will access to your element like :And so the final array are not re-indexed. So you need to add after the unset or array_diff:After that your array will have a normal index :Related to this post : Re-Index ArrayHope it will helpA better approach would maybe be to keep your values as keys in an associative array, and then call array_keys() on it when you want to actual array. That way you don't need to use array_search to find your element.The answer to PHP array delete by value (not key)

Given by 

 https://stackoverflow.com/users/924109/rok-kralj IMO is the best answer as it removes and does not mutate It generalizes nicely, you can remove as many elements as you like at the same time, if you want.Disclaimer: Note that my solution produces a new copy of the array while keeping the old one intact in contrast to the accepted answer which mutates. It might be a bit slower because of this.I was looking for the answer to the same question and came across this topic. I see two main ways: the combination of array_search & unset and the use of array_diff. At first glance, it seemed to me that the first method would be faster, since does not require the creation of an additional array (as when using array_diff). But I wrote a small benchmark and made sure that the second method is not only more concise, but also faster! Glad to share this with you. :) https://glot.io/snippets/f6ow6biaolI would prefer to use array_key_exists to search for keys in arrays like: Array([0]=>'A',[1]=>'B',['key'=>'value']) to find the specified effectively, since array_search and in_array() don't work here. And do removing stuff with unset().I think it will help someone.You Can Refer this link..Using array_seach(), try the following:array_search() returns the key of the element it finds, which can be used to remove that element from the original array using unset(). It will return FALSE on failure, however it can return a "falsey" value on success (your key may be 0 for example), which is why the strict comparison !== operator is used.The if() statement will check whether array_search() returned a value, and will only perform an action if it did.

PHP convert XML to JSON

Bryan Hadlock

[PHP convert XML to JSON](https://stackoverflow.com/questions/8830599/php-convert-xml-to-json)

I am trying to convert xml to json in php. If I do a simple convert using simple xml and json_encode none of the attributes in the xml show.So I am trying to manually parse it like this.and the output for state is {"state":{"0":"Alabama"}} rather than {"state":"Alabama"}What am I doing wrong?XML:Output:var dump:

2012-01-12 05:36:25Z

I am trying to convert xml to json in php. If I do a simple convert using simple xml and json_encode none of the attributes in the xml show.So I am trying to manually parse it like this.and the output for state is {"state":{"0":"Alabama"}} rather than {"state":"Alabama"}What am I doing wrong?XML:Output:var dump:Json & Array from XML in 3 lines:Sorry for answering an old post, but this article outlines an approach that is relatively short, concise and easy to maintain. I tested it myself and works pretty well.http://lostechies.com/seanbiefeld/2011/10/21/simple-xml-to-json-with-php/I figured it out. json_encode handles objects differently than strings. I cast the object to a string and it works now.I guess I'm a bit late to the party but I have written a small function to accomplish this task. It also takes care of attributes, text content and even if multiple nodes with the same node-name are siblings.Dislaimer:

I'm not a PHP native, so please bear with simple mistakes.Usage example:Example Input (myfile.xml):Example output:Pretty printed:Quirks to keep in mind:

Several tags with the same tagname can be siblings. Other solutions will most likely drop all but the last sibling. To avoid this each and every single node, even if it only has one child, is an array which hold an object for each instance of the tagname. (See multiple "" elements in example)Even the root element, of which only one should exist in a valid XML document is stored as array with an object of the instance, just to have a consistent data structure.To be able to distinguish between XML node content and XML attributes each objects attributes are stored in the "$" and the content in the "_" child.Edit:

I forgot to show the output for your example input dataA common pitfall is to forget that json_encode() does not respect elements with a textvalue and attribute(s). It will choose one of those, meaning dataloss.

The function below solves that problem. If one decides to go for the json_encode/decode way, the following function is advised.by doing so, <foo bar="3">Lorem</foo> will not end up as {"foo":"Lorem"} in your JSON.Try to use thisOr You can use this library : https://github.com/rentpost/xml2arrayI've used Miles Johnson's TypeConverter for this purpose. It's installable using Composer.You could write something like this using it:Optimizing Antonio Max answer:If you would like to only convert a specific part of the XML to JSON, you can use XPath to retrieve this and convert that to JSON.Please note that if you Xpath is incorrect, this will die with an error. So if you're debugging this through AJAX calls I recommend you log the response bodies as well.This is an improvement of the most upvoted solution by Antonio Max, which also works with XML that has namespaces (by replacing the colon with an underscore). It also has some extra options (and does parse <person my-attribute='name'>John</person> correctly).Best solution which works like a charmSourceFound FTav's answer the most useful as it is very customizable, but his xml2js function has some flaws. For instance, if children elements has equal tagnames they all will be stored in a single object, this means that the order of elements will not be preserved. In some cases we really want to preserve order, so we better store every element's data in a separate object:Here is how it works. Initial xml structure:Result JSON:Looks like the $state->name variable is holding an array.  You can useinside the foreach to test that.If that's the case, you can change the line inside the foreach to to correct it.... When the representation need perfect XML interpretation (without problems with attributes) and to reproduce all text-tag-text-tag-text-... and order of tags. Also good remember here that JSON object "is an unordered set" (not repeat keys and the keys can't have predefined order)...  Even ZF's xml2json is wrong (!) because not preserve exactly the XML structure.All solutions here have problems with this simple XML,... @FTav solution seems better than 3-line solution, but also have little bug when tested with this XML.The solution, today well-known as jsonML, is used by Zorba project and others, and was first presented in ~2006 or ~2007, by (separately) Stephen McKamey and John Snelson. Produce See http://jsonML.org or github.com/mckamey/jsonml.  The production rules of this JSON are based on the element JSON-analog,  This syntax is a element definition and recurrence, with element-list ::= element ',' element-list | element.After researching a little bit all of the answers, I came up with a solution that worked just fine with my JavaScript functions across browsers (Including consoles / Dev Tools) :It basically creates a new DOMDocument, loads and XML file into it and traverses through each one of the nodes and children getting the data / parameters and exporting it into JSON without the annoying "@" signs.Link to the XML file.This solution handles namespaces, attributes, and produces consistent result with repeating elements (always in array, even if there is only one occurrence).

Inspired by ratfactor's sxiToArray().Example:If you are ubuntu user install xml reader (i have php 5.6. if you have other please find package and install)

What Does This Mean in PHP -> or => [duplicate]

Willy Keatinge

[What Does This Mean in PHP -> or => [duplicate]](https://stackoverflow.com/questions/14037290/what-does-this-mean-in-php-or)

I see these in PHP all the time but I don't have a clue as to what they actually mean. What does -> do and what does => do. And I'm not talking about the operators. They're something else, but nobody seems to know...

2012-12-26 07:18:35Z

I see these in PHP all the time but I don't have a clue as to what they actually mean. What does -> do and what does => do. And I'm not talking about the operators. They're something else, but nobody seems to know...The double arrow operator, =>, is used as an access mechanism for arrays. This means that what is on the left side of it will have a corresponding value of what is on the right side of it in array context. This can be used to set values of any acceptable type into a corresponding index of an array. The index can be associative (string based) or numeric.The object operator, ->, is used in object scope to access methods and properties of an object. It’s meaning is to say that what is on the right of the operator is a member of the object instantiated into the variable on the left side of the operator. Instantiated is the key term here. => is used in associative array key value assignment.  Take a look at:http://php.net/manual/en/language.types.array.php.-> is used to access an object method or property.  Example: $obj->method().-> is used to call a method on the object of a class=> is used to assign values to the keys of an arrayE.g.:->calls/sets object variables.

Ex:=>

Sets key/value pairs for arrays. Ex:

What are the differences between composer update and composer install?

Dawlatzai Ghousi

[What are the differences between composer update and composer install?](https://stackoverflow.com/questions/33052195/what-are-the-differences-between-composer-update-and-composer-install)

What are the differences between composer update and composer install?

2015-10-10 09:03:42Z

What are the differences between composer update and composer install?composer updatecomposer update will update your depencencies as they are specified in composer.json For example, if you require this package as a dependency:and you have actually installed the 0.9.1 version of the package, running composer update will cause an upgrade of this package (for example to 0.9.2, if it's already been released)in detail composer update will:composer install composer install will not update anything; it will just install all the dependencies as specified in the composer.lock fileIn detail:When to install and when to updateWhen you run composer install it will look for a lock file and install whatever is contained in it, if it can't find one, it'll read composer.json, install its dependencies and generate a lockfile.When you run composer update it simply reads composer.json, installs the dependencies and updates the lockfile (or creates a new lockfile).As per: composer help install:As per: composer help update:See also: Composer: It’s All About the Lock FileThe best difference between composer update and composer installcomposer installTo add dependencies you need to add it manually to the composer.json file.If composer.lock file exists, install exactly what's specificated on this fileNot any component will be updated with this command.composer updateTo add or remove dependencies you need to add it manually to the composer.json fileIf you can't (or don't know how to add or remove a library which is in fact easy,just add the name of the dependency and version in the require property of the file) modify the composer.json file manually or you prefer use the command line instead, composer has special functions for this :composer requireFor example if we want to add a dependency with the command line we will simply execute composer require twig/twigcomposer removeIf you want to remove an unused dependency we will execute simply :composer remove twig/twig --update-with-dependencies

How to check if mod_rewrite is enabled in php?

Ties

[How to check if mod_rewrite is enabled in php?](https://stackoverflow.com/questions/9021425/how-to-check-if-mod-rewrite-is-enabled-in-php)

I was wondering if it is possible to check if mod_rewrite is enabled on Apache AND IIS in PHP.ModRewrite for IIS exists. Check it here.So, I'm looking for a PHP script that checks for mod_rewrite on Apache and IIS.Does anyone know such script or can write one?Especially for Microsoft IIS.Thanks!

2012-01-26 16:25:41Z

I was wondering if it is possible to check if mod_rewrite is enabled on Apache AND IIS in PHP.ModRewrite for IIS exists. Check it here.So, I'm looking for a PHP script that checks for mod_rewrite on Apache and IIS.Does anyone know such script or can write one?Especially for Microsoft IIS.Thanks!If you're using mod_php, you can use apache_get_modules(). This will return an array of all enabled modules, so to check if mod_rewrite is enabled, you could simply doUnfortunately, you're most likely trying to do this with CGI, which makes it a little bit more difficult.You can test it using the following, thoughIf the above condition evaluates to true, then mod_write is enabled.I like Christian Roy's solution:Then, you can check in your PHP code forNo idea if this works also with IIS (I have no way to check) but the odds are good.Upload a file called info.php with this code and run it:Search for mod_rewrite on the page, and see if you can find it under Loaded Modules.don't make it so difficult you can simply find in phpinfo();Hope helpful!Thanksvia command line we in centOs we can do thisLook under Configuration in the apache2handler in the Loaded Modules row.  This is simple and works.This is my current method of checking if Mod_rewrite enabled for both Apache and IISIt works in my local machine and also worked in my IIS based webhost. However, on a particular apache server, it didn't worked for Apache as the apache_get_modules() was disabled but the mod_rewrite was enable in that server.You can get a list of installed apache modules, and check against that. Perhaps you can check if its installed by searching for its .dll (or linux equivalent) file.Two lines of code:One more method through exec().If mod_rewrite is loaded it will return "rewrite_module" in output.Another idea, indeed more a dirty hack, regarding mod rewrite is server dependend an not necessary a php issue:

Why not, if you have the possibillity, create a test directory put a .htaccess in it rewriting to test.php, call the directory via http and check if you get the expected result you put in test.php.Indeed, dirty. Use this function:How about making a redirect to a known file and then checking if that redirect actually works with curl ?

Laravel Unknown Column 'updated_at'

Loko

[Laravel Unknown Column 'updated_at'](https://stackoverflow.com/questions/28277955/laravel-unknown-column-updated-at)

I've just started with Laravel and I get the following error: I know the error is from the timestamp column when you migrate a table but I'm not using the updated_at field. I used to use it when I followed the Laravel tutorial but now that I am making (or attempting to make) my own stuff. I get this error even though I don't use timestamps. I can't seem to find the place where it's being used. This is the code:ControllerRouteModelI must be forgetting something... What am I doing wrong here?

2015-02-02 12:38:40Z

I've just started with Laravel and I get the following error: I know the error is from the timestamp column when you migrate a table but I'm not using the updated_at field. I used to use it when I followed the Laravel tutorial but now that I am making (or attempting to make) my own stuff. I get this error even though I don't use timestamps. I can't seem to find the place where it's being used. This is the code:ControllerRouteModelI must be forgetting something... What am I doing wrong here?In the model, write the below code;This would work.Explanation : By default laravel will expect created_at & updated_at column in your table.

By making it to false it will override the default setting.Setting timestamps to false means you are going to lose both created_at and updated_at whereas you could set both of the keys in your model.Case 1:You have created_at column but not update_at you could simply set updated_at to false in your modelCase 2:You have both created_at and updated_at columns but with different column namesYou could simply do:Finally ignoring timestamps completely:For those who are using laravel 5 or above must use public modifier other wise it will throw an exception Nice answer by Alex and Sameer, but maybe just additional info on why is necessary to putTimestamps are nicely explained on official Laravel page:

Traits in PHP – any real world examples/best practices? [closed]

Max

[Traits in PHP – any real world examples/best practices? [closed]](https://stackoverflow.com/questions/7892749/traits-in-php-any-real-world-examples-best-practices)

Traits have been one of the biggest additions for PHP 5.4. I know the syntax and understand the idea behind traits, like horizontal code re-use for common stuff like logging, security, caching etc.However, I still don't know how I would make use of traits in my projects. Are there any open source projects that already use traits? Any good articles/reading material on how to structure architectures using traits?

2011-10-25 16:45:16Z

Traits have been one of the biggest additions for PHP 5.4. I know the syntax and understand the idea behind traits, like horizontal code re-use for common stuff like logging, security, caching etc.However, I still don't know how I would make use of traits in my projects. Are there any open source projects that already use traits? Any good articles/reading material on how to structure architectures using traits?My personal opinion is that there is actually very little application for traits when writing clean code.Instead of using traits to hack code into a class it is better to pass in the dependencies via the constructor or via setters:The main reason why I find that better than using traits is that your code is much more flexible by removing the hard coupling to a trait. For example you could simply pass a different logger class now. This makes your code reusable and testable.I guess one would have to look into languages that have Traits for some time now to learn the accepted Good/Best practices. My current opinion on Trait is that you should only use them for code that you would have to duplicate in other classes that share the same functionality. Example for a Logger trait:And then you do (demo)I guess the important thing to consider when using traits is that they really are just pieces of code that get copied into the class. This can easily lead to conflicts, for instance, when you try to change visibility of methods, e.g.The above will result in an error (demo). Likewise, any methods declared in the trait that are also already declared in the using class will not get copied into the class, e.g.will print 2 (demo). These are things you will want to avoid because they make errors hard to find. You will also want to avoid putting things into traits that operate on properties or methods of the class that uses it, e.g. works (demo) but now the trait is intimately coupled to A and the whole idea of horizontal reuse is lost. When you follow the Interface Segregation Principle you will have many small classes and interfaces. That makes Traits an ideal candidate for the things you mentioned, e.g. crosscutting concerns, but not to compose objects (in a structual sense). In our Logger example above, the trait is completely isolated. It has no dependencies on concrete classes. We could use aggregation/composition (like shown elsewhere on this page) to achieve the same resulting class, but the drawback of using aggregation/composition is that we will have to add the proxy/delegator methods manually to each and every class then that should be able to log. Traits solve this nicely by allowing me to keep the boilerplate in one place and selectively apply it where needed.Note: given that traits are a new concept in PHP, all opinion expressed above is subject to change. I've not have had much time to evaluate the concept myself yet. But I hope it is good enough to give you something to think about.:) I don't like to theorize and debate about what should be done with something. In this case traits. I'll show you what I find traits useful for and you can either learn from it, or ignore it.Traits - they are great to apply strategies. Strategy design patterns, in short, are useful when you want the same data to be handled (filtered, sorted, etc) differently.For example, you have a list of products that you want to filter out based on some criteria (brands, specs, whatever), or sorted by different means (price, label, whatever). You can create a sorting trait that contains different functions for different sorting types (numeric, string, date, etc). You can then use this trait not only in your product class (as given in the example), but also in other classes that need similar strategies (to apply a numeric sort to some data, etc).Try it:As a closing note, I think about traits like accessories (which I can use to alter my data). Similar methods and properties that can get cut out from my classes and be put into a single place, for easy maintenance, shorter and cleaner code.I am excited for Traits because they solve a common issue when developing extensions for the Magento ecommerce platform. The problem occurs when extensions add functionality to a core class (like say the User model) by extending it. This is done by pointing the Zend autoloader (via a XML config file) to use the User model from the extension, and have that new model extend the core model. (example) But what if two extensions override the same model? You get a "race condition" and only one is loaded.The solution right now is to edit the extensions so one extends the other's model override class in a chain, and then set the extension configuration to load them in the correct order so the inheritance chain works.This system frequently causes errors, and when installing new extensions it's necessary to check for conflicts and edit extensions. This is a pain, and breaks the upgrade process.I think using Traits would be a good way to accomplish the same thing without this annoying model override "race condition". Granted there could still be conflicts if multiple Traits implement methods with the same names, but I would imagine something like a simple namespace convention could solve this for the most part.TL;DR I think Traits could be useful for creating extensions/modules/plugins for large PHP software packages like Magento. You could have a trait for read-only object like this:You could detect if that trait is used and determine wheter or not you should write that object in a database, file, etc. 

Does file_get_contents() have a timeout setting?

Flora Clinton

[Does file_get_contents() have a timeout setting?](https://stackoverflow.com/questions/10236166/does-file-get-contents-have-a-timeout-setting)

I am calling a series of links using the file_get_contents() method in a loop. Each link may take more than 15 minutes to process. Now, I worry about whether PHP's file_get_contents() has a timeout period?If yes, it will time out with a call and move to next link. I don't want to call the next link without the prior one finishing.So, please tell me whether file_get_contents() has a timeout period. The file which contains the file_get_contents() is set to set_time_limit() to zero (unlimited).

2012-04-19 20:25:16Z

I am calling a series of links using the file_get_contents() method in a loop. Each link may take more than 15 minutes to process. Now, I worry about whether PHP's file_get_contents() has a timeout period?If yes, it will time out with a call and move to next link. I don't want to call the next link without the prior one finishing.So, please tell me whether file_get_contents() has a timeout period. The file which contains the file_get_contents() is set to set_time_limit() to zero (unlimited).The default timeout is defined by default_socket_timeout ini-setting, which is 60 seconds. You can also change it on the fly:Another way to set a timeout, would be to use stream_context_create to set the timeout as HTTP context options of the HTTP stream wrapper in use:As @diyism mentioned, "default_socket_timeout, stream_set_timeout, and stream_context_create timeout are all the timeout of every line read/write, not the whole connection timeout." And the top answer by @stewe has failed me.As an alternative to using file_get_contents, you can always use curl with a timeout.So here's a working code that works for calling links.It is worth noting that if changing default_socket_timeout on the fly, it might be useful to restore its value after your file_get_contents call:Yes! By passing a stream context in the third parameter: Here with a timeout of 1s:Source in comment section of https://www.php.net/manual/en/function.file-get-contents.phpHTTP context options:Other contexts: https://www.php.net/manual/en/context.phpFor me work when i change my php.ini in my host:

Doing HTTP requests FROM Laravel to an external API

Chilion

[Doing HTTP requests FROM Laravel to an external API](https://stackoverflow.com/questions/22355828/doing-http-requests-from-laravel-to-an-external-api)

What I want is get an object from an API with a HTTP (eg, jQuery's AJAX) request to an external api. How do I start? I did research on Mr Google but I can't find anything helping.Im starting to wonder is this is even possible?

In this post Laravel 4 make post request from controller to external url with data it looks like it can be done. But there's no example nor any source where to find some documentation.Please help me out?

2014-03-12 15:14:20Z

What I want is get an object from an API with a HTTP (eg, jQuery's AJAX) request to an external api. How do I start? I did research on Mr Google but I can't find anything helping.Im starting to wonder is this is even possible?

In this post Laravel 4 make post request from controller to external url with data it looks like it can be done. But there's no example nor any source where to find some documentation.Please help me out?Based upon an answer of a similar question here:

https://stackoverflow.com/a/22695523/1412268Take a look at GuzzleWe can use package Guzzle in Laravel, it is a PHP HTTP client to send HTTP requests.You can install Guzzle through composerOr you can specify Guzzle as a dependency in your project's existing composer.jsonExample code in laravel 5 using Guzzle as shown below,You just want to call an external URL and use the results? PHP does this out of the box, if we're talking about a simple GET request to something serving JSON:If you want to do a post request, it's a little harder but there's loads of examples how to do this with curl. So I guess the question is; what exactly do you want?Updated on March 21 2019Add GuzzleHttp package using composer require guzzlehttp/guzzle:~6.3.3Or you can specify Guzzle as a dependency in your project's composer.jsonInclude below line in the top of the class where you are calling the APIAdd below code for making the request Definitively, for any PHP project, you may want to use GuzzleHTTP for sending requests.

Guzzle has very nice documentation you can check here.

I just want to say that, you probably want to centralize the usage of the Client class of Guzzle in any component of your Laravel project (for example a trait) instead of being creating Client instances on several controllers and components of Laravel (as many articles and replies suggest).I created a trait you can try to use, which allows you to send requests from any component of your Laravel project, just using it and calling to makeRequest.Notice this trait can even handle files sending.If you want more details about this trait and some other stuff to integrate this trait to Laravel, check this article. Additionally, if interested in this topic or need major assistance, you can take my course which guides you in the whole process.I hope it helps all of you.Best wishes :)You can use Httpful :Website : http://phphttpclient.com/Github : https://github.com/nategood/httpful

How to check that a string is an int, but not a double, etc.?

Rory

[How to check that a string is an int, but not a double, etc.?](https://stackoverflow.com/questions/2012187/how-to-check-that-a-string-is-an-int-but-not-a-double-etc)

PHP has an intval() function that will convert a string to an integer. However I want to check that the string is an integer beforehand, so that I can give a helpful error message to the user if it's wrong. PHP has is_int(), but that returns false for string like "2".PHP has the is_numeric() function, but that will return true if the number is a double. I want something that will return false for a double, but true for an int.e.g.:

2010-01-06 10:21:32Z

PHP has an intval() function that will convert a string to an integer. However I want to check that the string is an integer beforehand, so that I can give a helpful error message to the user if it's wrong. PHP has is_int(), but that returns false for string like "2".PHP has the is_numeric() function, but that will return true if the number is a double. I want something that will return false for a double, but true for an int.e.g.:How about using ctype_digit?From the manual:The above example will output:This will only work if your input is always a string:If your input might be of type int, then combine ctype_digit with is_int.If you care about negative numbers, then you'll need to check the input for a preceding -, and if so, call ctype_digit on a substr of the input string. Something like this would do it:filter_var should do it:butIf you just want Booleans as return values, wrap it into a function, e.g.+1 to Dominic's answer (using ctype_digit). Another way you could do it is with type coercion:Cast it to int.

if it still have the same value its int;Source.Had a need for a robust is_int recently. I found intval() too unpredictable:

Came across this snippet in the PHP documentation comments, and after testing it, it covers almost everything you throw at it:But careful:One really clean way that I like to use is that one. You cast it twice, first in int, secondly in string, then you strict compare ===. See the example below:Now, about your function my_is_int, you can do something like this:I´m using this one:You can just check for a number, if it is then check than casting is given a double or not:Just for positive numbers:Checking it:Output:Try this:Also works if your $string has decimal placesThis will take care of negative number as well Maybe not the most performant way of doing it. But you can write it in one line.As expected:Gotcha:A few years late, but based on the answers given here I came up with a solution that's slightly more accurate (on booleans, in particular) and more efficient (I think) than most other answers: Working as expected for these: Except maybe for these 2: How about:This function should only return true for any string number that can be cast to int with (int) or intval() without losing anything of mathematical significance (such as non-zeros after decimal point or numbers outside of PHP's integer range) while accepting things that aren't mathematically significant (such as whitespace; leading zeros; or, after the decimal point, zeros exclusively).It will return false for '10.' but not for '10.0'. If you wanted '10.' to be true you could change the + after the 0 in the regular expression to *.Here some code I've used that seems to work well and doesn't have any of the issues that many of the others do.It does not check order etc so not meant for negative integers but with some addition code that can be done as well using some of the other ideas from above. It can also be adapted to work with binary array('0', '1') or Hexadecimals as well etc.See this. Converts $val to integer and then checks if the original $val converted to string is IDENTICAL (===) - just == won't work as expected -  to the integer val converted to string.If you don't check string values it might not work as you expect it:Output:Reason being even if you use hex (0x101010), octal (01) or an integer stored as float (1.0, 0.0), internally all are stored as float. However, if you use the function to check for int stored as a string, it will work.You can use the following condition. Notice that you should not use !==I devised a way I couldn't find anywhere, so I'm putting it in here:Without further ado it's this: ctype_digit((string) abs($input))Example:Results: (are as expected, I suppose)It works perfectly! Hope it will be helpful to you =)If you want to genuinely know if a string is a valid representation of a true PHP integer type...However this is impossible to run as the set is too large (will not fit in memory in this case, if you loop instead it will take too many CPU cycles).You can perhaps do a binary search with string comparison, however there are better ways.The simplest being:There are some other unusual ways to approach it such as:You can also do string comparison but you'll still need to do things such as ctype_digit, check the length is reasonable (don't waste CPU before doing things like ctype_digit) and have some awkward handling for negative numbers.Note that filter_var does not correctly assert that a string is genuinely the representation of a PHP integer. It will allow a leading + and surrounding whitespace.Internally PHP uses the function "_zend_handle_numeric_str" for strict comparison but it doesn't directly expose this anywhere, hence the trick using the array keys (which does use it to convert any string that's a representation of a PHP integer to a PHP integer).If you want binary safe conversion to and from PHP this is the approach to take.Not everyone might want that and it might be a case of handling user input. filter_var isn't too bad for that and will be fairly safe in most cases for people new to PHP.A length check, ctype_digit and then a check of converted value that it's in a range is also fairly solid for user input. More complex schemes might want trim or regex.The problem with a lot of the answers here in that respect is that while the question is vague, the answers shouldn't be. If you're going to propose a solution you should be able to explain exactly what it will and wont expect. Without that there's no telling if an answer matches a question or is safe. The PHP manual does not always help because it doesn't explain all of the caveats for each of the relevant methods it supplies. Things such as ctype_digit and is_int are very reliable and easy to predit but the specifics of is_numeric, filter_var and juggling (+$var) or casting (intval/floatval) are poorly documented.This is PHP fudge for you. It has a myriad number of schemas for interpreting strings as integers, with inconsistencies. The strictest method of validating an integer string is not directly exposed to the user.If you are handling numeric IDs from mysql and are trying to impose a validation for it to be a valid non zero int or an int but in string format (as mysql always returns everything in string format) and not NULL. You can use the following. This is the most error/warning/notice proof way to only allow int/string-ints which I found.Here's a simple solution that uses is_numeric, floatval, and intval:Results:Note that values greater than PHP_INT_MAX may return false.Could either use is_numeric() then check for presence of "." in the string (not particularly culture-sensitive though).Alternatively use is_numeric() then cast to a double and see if $var == floor($var) (should return true if it's an integer).

How to change the session timeout in PHP?

Oli

[How to change the session timeout in PHP?](https://stackoverflow.com/questions/8311320/how-to-change-the-session-timeout-in-php)

I would like to extend the session timeout in phpI know that it is possible to do so by modifying the php.ini file.

But I don't have access to it.So is it possible to do it only with php code?

2011-11-29 13:13:41Z

I would like to extend the session timeout in phpI know that it is possible to do so by modifying the php.ini file.

But I don't have access to it.So is it possible to do it only with php code?Session timeout is a notion that has to be implemented in code if you want strict guarantees; that's the only way you can be absolutely certain that no session ever will survive after X minutes of inactivity.If relaxing this requirement a little is acceptable and you are fine with placing a lower bound instead of a strict limit to the duration, you can do so easily and without writing custom logic.If your sessions are implemented with cookies (which they probably are), and if the clients are not malicious, you can set an upper bound on the session duration by tweaking certain parameters. If you are using PHP's default session handling with cookies, setting session.gc_maxlifetime along with session_set_cookie_params should work for you like this:This works by configuring the server to keep session data around for at least one hour of inactivity and instructing your clients that they should "forget" their session id after the same time span. Both of these steps are required to achieve the expected result.You can make things completely controllable by using custom logic to also place an upper bound on session inactivity; together with the lower bound from above this results in a strict setting.Do this by saving the upper bound together with the rest of the session data:So far we have not been concerned at all with the exact values of each session id, only with the requirement that the data should exist as long as we need them to. Be aware that in the (unlikely) case that session ids matter to you, care must be taken to regenerate them with session_regenerate_id when required.If you use PHP's default session handling, the only way to reliably change the session duration in all platforms is to change php.ini. That's because in some platforms, garbage collection is implemented through a script that runs every certain time (a cron script) that reads directly from php.ini, and therefore any attempts at changing it at run time, e.g. via ini_set(), are unreliable and most likely won't work.For example, in Debian Linux systems, PHP's internal garbage collection is disabled by setting session.gc_probability=0 by default in the configuration, and is instead done via /etc/cron.d/php, which runs at XX:09 and XX:39 (that is, every half hour). This cron job looks for sessions older than the session.gc_maxlifetime specified in the configuration, and if any are found, they are deleted. As a consequence, in these systems ini_set('session.gc_maxlifetime', ...) is ignored. That also explains why in this question: PHP sessions timing out too quickly, the OP had problems in one host but the problems ceased when switching to a different host.So, given that you don't have access to php.ini, if you want to do it portably, using the default session handling is not an option. Apparently, extending the cookie lifetime was enough for your host, but if you want a solution that works reliably even if you switch hosts, you have to use a different alternative.Available alternative methods include:There is an example of (1) in the documentation for session_set_save_handler(). The example is long but I'll reproduce it here, with the relevant modifications necessary to extend the session duration. Note the inclusion of session_set_cookie_params() to increase the cookie lifetime as well.Approach (2) is more complicated; basically, you have to re-implement all session functions on your own. I won't go into details here.Adding comment for anyone using Plesk having issues with any of the above as it was driving me crazy, setting session.gc_maxlifetime from your PHP script wont work as Plesk has it's own garbage collection script run from cron.I used the solution posted on the link below of moving the cron job from hourly to daily to avoid this issue, then the top answer above should work:https://websavers.ca/plesk-php-sessions-timing-earlier-expectedPut $_SESSION['login_time'] = time(); into the previous authentication page.

And the snipped below in every other page where you want to check the session time-out.Edit : This only works if you already used the tweaks in other posts, or disabled Garbage Collection, and want to manually check the session duration.

Don't forget to add die() after a redirect, because some scripts/robots might ignore it. Also, directly destroying the session with session_destroy() instead of relying on a redirect for that might be a better option, again, in case of a malicious client or a robot.No. 

If you don't have access to the php.ini, you can't guarantee that changes would have any effect. I doubt you need to extend your sessions time though.

It has pretty sensible timeout at the moment and there are no reasons to extend it. Just a notice for a sharing hosting server or added on domains = For your settings to work you must have a different save session dir for added domain by using php_value session.save_path "folderA/sessionsA".So create a folder to your root server, not into the public_html and not to be publicity accessed from outside. For my cpanel/server worked fine the folder permissions 0700. Give a try...before session_start();orAfter many researching and testing this worked fine for shared cpanel/php7 server. Many thanks to: NoiSYou can override values in php.ini from your PHP code using ini_set().

Best XML Parser for PHP [duplicate]

Murat Ayfer

[Best XML Parser for PHP [duplicate]](https://stackoverflow.com/questions/188414/best-xml-parser-for-php)

I have used the XML Parser before, and even though it worked OK, I wasn't happy with it in general, it felt like I was using workarounds for things that should be basic functionality.I recently saw SimpleXML but I haven't tried it yet. Is it any simpler? What advantages and disadvantages do both have? Any other parsers you've used?

2008-10-09 17:57:06Z

I have used the XML Parser before, and even though it worked OK, I wasn't happy with it in general, it felt like I was using workarounds for things that should be basic functionality.I recently saw SimpleXML but I haven't tried it yet. Is it any simpler? What advantages and disadvantages do both have? Any other parsers you've used?I would have to say SimpleXML takes the cake because it is firstly an extension, written in C, and is very fast.  But second, the parsed document takes the form of a PHP object.  So you can "query" like $root->myElement.Have a look at PHP's available XML extensions and see http://devzone.zend.com/243/ and http://devzone.zend.com/1035/ for a discussion of those.The main difference between XML Parser and SimpleXML is that the latter is not a pull parser. SimpleXML is built on top of the DOM extensions and will load the entire XML file into memory. XML Parser like XMLReader will only load the current node into memory. You define handlers for specific nodes which will get triggered when the Parser encounters it. That is faster and saves on memory. You pay for that with not being able to use XPath.Personally, I find SimpleXml quite limiting (hence simple) in what it offers over DOM. You can switch between DOM and SimpleXml easily though, but I usually dont bother and go the DOM route directly. DOM is an implementation of the W3C DOM API, so you might be familiar with it from other languages, for instance JavaScript.This is a useful function for quick and easy xml parsing when an extension is not available:Hi I think the SimpleXml is very useful .

And with it I am using xpath;I use many xml configs and this  helps me to parse them really fast.

SimpleXml is written on C so it's  very fast.It depends on what you are trying to do with the XML files. If you are just trying to read the XML file (like a configuration file), The Wicked Flea is correct in suggesting SimpleXML since it creates what amounts to nested ArrayObjects. e.g. value will be accessible by $xml->root->child.If you are looking to manipulate the XML files you're probably best off using DOM XMLthe crxml parser is a real easy to parser.This class has got a search function, which takes a node name with any namespace as an argument. It searches the xml for the node and prints out the access statement to access that node using this class. This class also makes xml generation very easy.you can download this class athttp://freshmeat.net/projects/crxmlor from phpclasses.orghttp://www.phpclasses.org/package/6769-PHP-Manipulate-XML-documents-as-array.html

PHP Session Fixation / Hijacking

me2

[PHP Session Fixation / Hijacking](https://stackoverflow.com/questions/5081025/php-session-fixation-hijacking)

I'm trying to understand more about PHP Session Fixation & hijacking and how to prevent these problems. I've been reading the following two articles on Chris Shiflett's website: However, I'm not sure I'm understanding things correctly. To help prevent session fixation is it enough to call session_regenerate_id(true); after successfully logging someone in? I think I understand that correctly.He also talks about using tokens passed along in urls via $_GET to prevent session hijacking. How would this be done exactly? I'm guessing when someone logs in you generate their token & store it in an session variable, then on each page you'd compare that session variable with the value of the $_GET variable?Would this token need to be changed only once per session or on each page load? Also is their a good way of preventing hijacking without having to pass a value along in the urls? this would be alot easier.

2011-02-22 16:37:11Z

I'm trying to understand more about PHP Session Fixation & hijacking and how to prevent these problems. I've been reading the following two articles on Chris Shiflett's website: However, I'm not sure I'm understanding things correctly. To help prevent session fixation is it enough to call session_regenerate_id(true); after successfully logging someone in? I think I understand that correctly.He also talks about using tokens passed along in urls via $_GET to prevent session hijacking. How would this be done exactly? I'm guessing when someone logs in you generate their token & store it in an session variable, then on each page you'd compare that session variable with the value of the $_GET variable?Would this token need to be changed only once per session or on each page load? Also is their a good way of preventing hijacking without having to pass a value along in the urls? this would be alot easier.Ok, there are two separate but related problems, and each is handled differently.This is where an attacker explicitly sets the session identifier of a session for a user.  Typically in PHP it's done by giving them a url like http://www.example.com/index...?session_name=sessionid. Once the attacker gives the url to the client, the attack is the same as a session hijacking attack.There are a few ways to prevent session fixation (do all of them):This is where an attacker gets a hold of a session identifier and is able to send requests as if they were that user.  That means that since the attacker has the identifier, they are all but indistinguishable from the valid user with respect to the server.You cannot directly prevent session hijacking.  You can however put steps in to make it very difficult and harder to use.The difference between Session Fixation and Hijacking is only about how the session identifier is compromised. In fixation, the identifier is set to a value that the attacker knows before hand.  In Hijacking it's either guessed or stolen from the user.  Otherwise the effects of the two are the same once the identifier is compromised.Whenever you regenerate the session identifier using session_regenerate_id the old session should be deleted.  This happens transparently with the core session handler.  However some custom session handlers using session_set_save_handler() do not do this and are open to attack on old session identifiers.  Make sure that if you are using a custom session handler, that you keep track of the identifier that you open, and if it's not the same one that you save that you explicitly delete (or change) the identifier on the old one.  Using the default session handler, you're fine with just calling session_regenerate_id(true).  That will remove the old session information for you.  The old ID is no longer valid and will cause a new session to be created if the attacker (or anyone else for that matter) tries to use it.  Be careful with custom session handlers though....If you're going to destroy a session (on logout for example), make sure you destroy it thoroughly.  This includes unsetting the cookie. Using session_destroy:Both session attacks have the same goal: Gain access to a legitimate session of another user. But the attack vectors are different:In both attacks the session ID is the sensitive data these attack are focused on. So it’s the session ID that needs to be protected for both a read access (Session Hijacking) and a write access (Session Fixation).The general rule of protecting sensitive data by using HTTPS applies in this case, too. Additionally, you should to do the following:To prevent Session Fixation attacks, make sure that:To prevent Session Hijacking attacks, make sure that:To prevent both session attacks, make sure that:The tokens you mention are a "nonce" - number used once. They don't necessarily have to be used only once, but the longer they're used, the higher the odds that the nonce can be captured and used to hijack the session. Another drawback to nonces is that it's very hard to build a system that uses them and allows multiple parallel windows on the same form. e.g. the user opens two windows on a forum, and starts working on two posts:If you have no way of tracking multiple windows, you'll only have stored one nonce - that of window B/Q. When the user then submits their post from window A and passes in nonce 'P', ths system will reject the post as P != Q.I did not read Shiflett's article, but I think you have misunderstood something.By default PHP passes the session token in the URL whenever the client does not accept cookies. Oherwise in the most common case the session token is stored as a cookie.This means that if you put a session token in the URL PHP will recognize it and try to use it subsequently. Session fixation happens when someone creates a session and then tricks another user to share the same session by opening a URL which contains the session token. If the user authenticates in some way, the malicious user then knows the session token of an authenticated one, who might have different privileges.As I'm sure Shiflett explains, the usual thing to do is to regenerate a different token each time the privileges of a user change.Yes you could prevent session fixation by regenerating the session id once upon login.   This way if the attacker will not know the cookie value of the newly authenticated session.   Another approach which totally stops the problem is set session.use_only_cookies=True in your runtime configuration.   An attacker cannot set the value of a cookie in the context of another domain.  Session fixation is relying on sending the cookie value as a GET or POST. 

How to catch curl errors in PHP

Harish Kurup

[How to catch curl errors in PHP](https://stackoverflow.com/questions/3987006/how-to-catch-curl-errors-in-php)

I am using PHP curl functions to post data to the web server from my local machine. My code is as follows:Unfortunately I am not able to catch any errors like 404, 500 or network failure. So how will I get to know that data was not posted to or retrieved from the remote?

2010-10-21 11:40:20Z

I am using PHP curl functions to post data to the web server from my local machine. My code is as follows:Unfortunately I am not able to catch any errors like 404, 500 or network failure. So how will I get to know that data was not posted to or retrieved from the remote?You can use the curl_error() function to detect if there was some error. For example:See the description of libcurl error codes hereSee the description of PHP curl_errno() function hereSee the description of PHP curl_error() function hereIf CURLOPT_FAILONERROR is false, http errors will not trigger curl errors.you can generate curl error after its execution and here are curl error codeSince you are interested in catching network related errors and HTTP errors, the following provides a better approach:Tests:

How to search by key=>value in a multidimensional array in PHP

John Kugelman

[How to search by key=>value in a multidimensional array in PHP](https://stackoverflow.com/questions/1019076/how-to-search-by-key-value-in-a-multidimensional-array-in-php)

Is there any fast way to get all subarrays where a key value pair was found in a multidimensional array? I can't say how deep the array will be.Simple example array:When I search for key=name and value="cat 1" the function should return:I guess the function has to be recursive to get down to the deepest level.

2009-06-19 17:19:57Z

Is there any fast way to get all subarrays where a key value pair was found in a multidimensional array? I can't say how deep the array will be.Simple example array:When I search for key=name and value="cat 1" the function should return:I guess the function has to be recursive to get down to the deepest level.Code:Output:If efficiency is important you could write it so all the recursive calls store their results in the same temporary $results array rather than merging arrays together, like so:The key there is that search_r takes its fourth parameter by reference rather than by value; the ampersand & is crucial.FYI: If you have an older version of PHP then you have to specify the pass-by-reference part in the call to search_r rather than in its declaration. That is, the last line becomes search_r($subarray, $key, $value, &$results).How about the SPL version instead? It'll save you some typing:What's great is that basically the same code will iterate through a directory for you, by using a RecursiveDirectoryIterator instead of a RecursiveArrayIterator. SPL is the roxor.The only bummer about SPL is that it's badly documented on the web. But several PHP books go into some useful detail, particularly Pro PHP; and you can probably google for more info, too.Ref: http://php.net/manual/en/function.array-filter.phpCame back to post this update for anyone needing an optimisation tip on these answers, particulary John Kugelman's great answer up above.His posted function work fine but I had to optimize this scenario for handling a 12 000 row resultset. The function was taking an eternal 8 secs to go through all records, waaaaaay too long.I simply needed the function to STOP searching and return when match was found. Ie, if searching for a customer_id, we know we only have one in the resultset and once we find the customer_id in 

the multidimensional array, we want to return.Here is the speed-optimised ( and much simplified ) version of this function, for anyone in need. Unlike other version, it can only handle only one depth of array, does not recurse and does away with merging multiple results. This brought down the the task to match the 12 000 records to a 1.5 secs. Still very costly but much more reasonable.A minor imporvement to the fast version.Be careful of linear search algorithms (the above are linear) in multiple dimensional arrays as they have compounded complexity as its depth increases the number of iterations required to traverse the entire array. Eg:would take at the most 200 iterations to find what you are looking for (if the needle were at [100][1]), with a suitable algorithm. Linear algorithms in this case perform at O(n) (order total number of elements in entire array), this is poor, a million entries (eg a 1000x100x10 array) would take on average 500,000 iterations to find the needle. Also what would happen if you decided to change the structure of your multidimensional array? And PHP would kick out a recursive algorithm if your depth was more than 100. Computer science can do better:Where possible, always use objects instead of multiple dimensional arrays:and apply a custom comparator interface and function to sort and find them:You can use uasort() to utilize a custom comparator, if you're feeling adventurous you should implement your own collections for your objects that can sort and manage them (I always extend ArrayObject to include a search function at the very least). Once they are sorted (uasort is O(n log n), which is as good as it gets over arbitrary data), binary search can do the operation in O(log n) time, ie a million entries only takes ~20 iterations to search. As far as I am aware custom comparator binary search is not implemented in PHP (array_search() uses natural ordering which works on object references not their properties), you would have to implement this your self like I do.This approach is more efficient (there is no longer a depth) and more importantly universal (assuming you enforce comparability using interfaces) since objects define how they are sorted, so you can recycle the code infinitely. Much better =)Here is solution:http://snipplr.com/view/51108/nested-array-search-by-value-or-key/I needed something similar, but to search for multidimensional array by value... I took John example and wroteI hope it helps somebody :)This is a revised function from the one that John K. posted... I need to grab only the specific key in the array and nothing above it.And another version that returns the key value from the array element in which the value is found (no recursion, optimized for speed): Thanks to all who posted here.If you want to search for array of keys this is goodKeys will not overwrite because each set of key => values will be in separate array in resulting array.

If you don't want duplicate keys then use this one

Twig for loop for arrays with keys

Guillaume

[Twig for loop for arrays with keys](https://stackoverflow.com/questions/10299202/twig-for-loop-for-arrays-with-keys)

I use Twig and I have an array with keys like this:And I would like to get the key (1,2,3,8,9) and the content (alpha, bravo, charlie, delta, echo) in a loop to get all value of this array.How do I solve this problem?

2012-04-24 13:45:47Z

I use Twig and I have an array with keys like this:And I would like to get the key (1,2,3,8,9) and the content (alpha, bravo, charlie, delta, echo) in a loop to get all value of this array.How do I solve this problem?I found the answer : There's this example in the SensioLab page on the for tag:http://twig.sensiolabs.org/doc/tags/for.html#iterating-over-keysThese are also extended options (e.g., sort, reverse) for both 1D and 2D arrays in Twig:I guess you want to do the "Iterating over Keys and Values"As the doc here says, just add "|keys" in the variable you want and it will magically happen.It never hurts to search before asking :)

PHP: Convert any string to UTF-8 without knowing the original character set, or at least try

Grim...

[PHP: Convert any string to UTF-8 without knowing the original character set, or at least try](https://stackoverflow.com/questions/7979567/php-convert-any-string-to-utf-8-without-knowing-the-original-character-set-or)

I have an application that deals with clients from all over the world, and, naturally, I want everything going into my databases to be UTF-8 encoded. The main problem for me is that I don't know what encoding the source of any string is going to be - it could be from a text box (using <form accept-charset="utf-8"> is only useful if the user is actually submitted the form), or it could be from an uploaded text file, so I really have no control over the input.What I need is a function or class that makes sure the stuff going into my database is, as far as is possible, UTF-8 encoded. I've tried iconv(mb_detect_encoding($text), "UTF-8", $text);

but that has problems (if the input is 'fiancée' it returns 'fianc'). I've tried a lot of things =/For file uploads, I like the idea of asking the end user to specify the encoding they use, and show them previews of what the output will look like, but this doesn't help against nasty hackers (in fact, it could make their life a little easier).I've read the other SO questions on the subject, but they seem to all have subtle differences like "I need to parse RSS feeds" or "I scrape data from websites" (or, indeed, "You can't"). But there must be something that at least has a good try!

2011-11-02 11:27:15Z

I have an application that deals with clients from all over the world, and, naturally, I want everything going into my databases to be UTF-8 encoded. The main problem for me is that I don't know what encoding the source of any string is going to be - it could be from a text box (using <form accept-charset="utf-8"> is only useful if the user is actually submitted the form), or it could be from an uploaded text file, so I really have no control over the input.What I need is a function or class that makes sure the stuff going into my database is, as far as is possible, UTF-8 encoded. I've tried iconv(mb_detect_encoding($text), "UTF-8", $text);

but that has problems (if the input is 'fiancée' it returns 'fianc'). I've tried a lot of things =/For file uploads, I like the idea of asking the end user to specify the encoding they use, and show them previews of what the output will look like, but this doesn't help against nasty hackers (in fact, it could make their life a little easier).I've read the other SO questions on the subject, but they seem to all have subtle differences like "I need to parse RSS feeds" or "I scrape data from websites" (or, indeed, "You can't"). But there must be something that at least has a good try!What you're asking for is extremely hard. If possible, getting the user to specify the encoding is the best. Preventing an attack shouldn't be much easier or harder that way.However, you could try doing this:Setting it to strict might help you get a better result. In motherland Russia we have 4 popular encodings, so your question is in great demand here.Only by char codes of symbols you can not detect encoding, because code pages intersect. Some codepages in different languages have even full intersection.  So, we need another approach.The only way to work with unknown encodings is working with probabilities. So, we do not want to answer the question "what is encoding of this text?", we are trying to understand "what is most likely encoding of this text?".One guy here in popular Russian tech blog invented this approach:Build the probability range of char codes in every encoding you want to support. You can build it using some big texts in your language (e.g. some fiction, use Shakespeare for english and Tolstoy for russian, lol ). You will get smth like this:Next. You take text in unknown encoding and for every encoding in your "probability dictionary" you search for frequency of every symbol in unknown-encoded text. Sum probabilities of symbols. Encoding with bigger rating is likely the winner. Better results for bigger texts.If you are interested, I can gladly help you with this task. We can greatly increase the accuracy by building two-charcodes probabilty list.Btw. mb_detect_encoding certanly does not work. Yes, at all. Please, take a look of mb_detect_encoding source code in "ext/mbstring/libmbfl/mbfl/mbfl_ident.c".You've probably tried this to but why not just use the mb_convert_encoding function? It will attempt to auto-detect char set of the text provided or you can pass it a list.Also, I tried to run:and the results are the same for both. How do you see that your text is truncated to 'fianc'? is it in the DB or in a browser?There is no way to identify the charset of a string that is completely accurate.

There are ways to try to guess the charset. One of these ways, and probably/currently the best in PHP, is mb_detect_encoding(). This will scan your string and look for occurrences of stuff unique to certain charsets. Depending on your string, there may not be such distinguishable occurrences.Take the ISO-8859-1 charset vs ISO-8859-15 ( http://en.wikipedia.org/wiki/ISO/IEC_8859-15#Changes_from_ISO-8859-1 )There's only a handful of different characters, and to make it worse, they're represented by the same bytes. There is no way to detect, being given a string without knowing it's encoding, whether byte 0xA4 is supposed to signify ¤ or € in your string, so there is no way to know it's exact charset.(Note: you could add a human factor, or an even more advanced scanning technique (e.g. what Oroboros102 suggests), to try to figure out based upon the surrounding context, if the character should be ¤ or €, though this seems like a bridge too far)There are more distinguishable differences between e.g. UTF-8 and ISO-8859-1, so it's still worth trying to figure it out when you're unsure, though you can and should never rely on it being correct.Interesting read: http://kore-nordmann.de/blog/php_charset_encoding_FAQ.html#how-do-i-determine-the-charset-encoding-of-a-stringThere are other ways of ensuring the correct charset though. Concerning forms, try to enforce UTF-8 as much as possible (check out snowman to make sure yout submission will be UTF-8 in every browser: http://intertwingly.net/blog/2010/07/29/Rails-and-Snowmen )

That being done, at least you're can be sure that every text submitted through your forms is utf_8. Concerning uploaded files, try running the unix 'file -i' command on it through e.g. exec() (if possible on your server) to aid the detection (using the document's BOM.)

Concerning scraping data, you could read the HTTP headers, that usually specify the charset. When parsing XML files, see if the XML meta-data contain a charset definition.Rather than trying to automagically guess the charset, you should first try to ensure a certain charset yourself where possible, or trying to grab a definition from the source you're getting it from (if applicable) before resorting to detection.There are some really good answers and attempts to answer your question here. I am not an encoding master, but I understand your desire to have a pure UTF-8 stack all the way through to your database. I have been using MySQL's utf8mb4 encoding for tables, fields, and connections.My situation boiled down to "I just want my sanitizers, validators, business logic, and prepared statements to deal with UTF-8 when data comes from HTML forms, or e-mail registration links." So, in my simple way, I started off with this idea:From my abstract class SanitizerOne could make an argument that I should separate encoding concerns from my abstract Sanitizer class and simply inject an Encoder object into a concrete child instance of Sanitizer. However, the main problem with my approach is that, without more knowledge, I simply reject encoding types that I do not want (and I am relying on PHP mb_* functions). Without further study, I cannot know if that hurts some populations or not (or, if I am losing out on important information). So, I need to learn more. I found this article.What every programmer absolutely, positively needs to know about encodings and character sets to work with textMoreover, what happens when encrypted data is added to my email registration links (using OpenSSL or mcrypt)? Could this interfere with decoding? What about Windows-1252? What about security implications? The use of utf8_decode() and utf8_encode() in Sanitizer::isUTF8 are dubious.People have pointed out short-comings in the PHP mb_* functions. I never took time to investigate iconv, but if it works better than mb_*functions, let me know.I don't think it's a problem. An application knows the source of the input. If it's from a form, use UTF-8 encoding in your case. That works. Just verify the data provided is correctly encoded (validation). Keep in mind that not all databases support UTF-8 in it's full range.If it's a file you won't save it UTF-8 encoded into the database but in binary form. When you output the file again, use binary output as well, then this is totally transparent.Your idea is nice that a user can tell the encoding, be he/she can tell anyway after downloading the file, as it's binary.So I must admit I don't see a specific issue you raise with your question. But maybe you can add some more details what your problem is.You could set up a set of metrics to try to guess which encoding is being used.  Again, not perfect, but could catch some of the misses from mb_detect_encoding().If you're willing to "take this to the console", I'd recommend enca. Unlike the rather simplistic mb_detect_encoding, it uses "a mixture of parsing, statistical analysis, guessing and black magic to determine their encodings" (lol - see man page). However, you usually have to pass the language of the input file if you want to detect such country-specific encodings. (However, mb_detect_encoding essentially has the same requirement, as the encoding would have to appear "in the right place" in the list of passed encodings for it to be detectable at all.) enca also came up here: How to find encoding of a file in Unix via script(s) It seems that your question is quite answered, but i have an approach that may simplify you case:I had a similar issue trying to return string data from mysql, even configuring both database and php to return strings formatted to utf-8. The only way i got the error was actually returning them from the database. Finally, sailing through the web i found a really easy way to deal with it: Giving that you can save all those types of string data in your mysql in different formats and collations, what you only need to do is, right at your php connection file, set the collation to utf-8, like this:Wich means that first you save the data in any format or collation and you convert it only at the return to your php file.Hope it was helpful!If the text is retrieved from a mysql database you may try adding this after BD connection.mysqli_set_charset($con, "utf8");https://www.php.net/manual/en/mysqli.set-charset.phpcURL default options:I tried something like this. It helped me. If found on meta charset info, I'm converting, otherwise doing nothing. 

Fastest hash for non-cryptographic uses?

John

[Fastest hash for non-cryptographic uses?](https://stackoverflow.com/questions/3665247/fastest-hash-for-non-cryptographic-uses)

I'm essentially preparing phrases to be put into the database, they may be malformed so I want to store a short hash of them instead (I will be simply comparing if they exist or not, so hash is ideal).I assume MD5 is fairly slow on 100,000+ requests so I wanted to know what would be the best method to hash the phrases, maybe rolling out my own hash function or using hash('md4', '...' would be faster in the end?I know MySQL has MD5(), so that would complement a bit of speed on the query end, but maybe there's further a faster hashing function in MySQL I don't know about that would work with PHP..

2010-09-08 06:47:57Z

I'm essentially preparing phrases to be put into the database, they may be malformed so I want to store a short hash of them instead (I will be simply comparing if they exist or not, so hash is ideal).I assume MD5 is fairly slow on 100,000+ requests so I wanted to know what would be the best method to hash the phrases, maybe rolling out my own hash function or using hash('md4', '...' would be faster in the end?I know MySQL has MD5(), so that would complement a bit of speed on the query end, but maybe there's further a faster hashing function in MySQL I don't know about that would work with PHP..CRC32 is pretty fast and there's a function for it: http://www.php.net/manual/en/function.crc32.phpBut you should be aware that CRC32 will have more collisions than MD5 or even SHA-1 hashes, simply because of the reduced length (32 bits compared to 128 bits respectively 160 bits). But if you just want to check whether a stored string is corrupted, you'll be fine with CRC32.And the code used to generate this is: Ranked list where each loop shares the same thing to crypt as all the others.And the output There's a speed comparison on xxhash site. Copy pasting it here:So it seems xxHash is by far the fastest one, while many others beat older hashes, like CRC32, MD5 and SHA.https://code.google.com/p/xxhash/Note that this is the ordering on a 32-bit compilation. On a 64-bit compilation the performance order is likely very different. Some of the hashes are heavily based on 64-bit multiplications and fetches.It seems that crc32 is faster for small messages(in this case 26 characters) while md5 for longer messages(in this case >852 characters).2019 update: This answer is the most up to date. Libraries to support murmur are largely available for all languages.The current recommendation is to use the Murmur Hash Family (see specifically the murmur2 or murmur3 variants).Murmur hashes were designed for fast hashing with minimal collisions (much faster than CRC, MDx and SHAx). It's perfect to look for duplicates and very appropriate for HashTable indexes.In fact it's used by many of the modern databases (Redis, ElastisSearch, Cassandra) to compute all sort of hashes for various purposes. This specific algorithm was the root source of many performance improvements in the current decade.It's also used in implementations of Bloom Filters. You should be aware that if you're searching for "fast hashes", you're probably facing a typical problem that is solved by Bloom filters. ;-)Note: murmur is a general purpose hash, meaning NON cryptographic. It doesn't prevent to find the source "text" that generated a hash. It's NOT appropriate to hash passwords.Some more details: MurmurHash - what is it? Instead of assuming that MD5 is "fairly slow", try it. A simple C-based implementation of MD5 on a simple PC (mine, a 2.4 GHz Core2, using a single core) can hash 6 millions of small messages per second. A small message is here anything up to 55 bytes. For longer messages, MD5 hashing speed is linear with the message size, i.e. it crunches data at about 400 megabytes per second. You may note that this is four times the maximum speed of a good harddisk or a gigabit ethernet network card.Since my PC has four cores, this means that hashing data as fast as my harddisk can provide or receive uses at most 6% of the available computing power. It takes a very special situation for hashing speed to become a bottleneck or even to induce a noticeable cost on a PC.On much smaller architectures where hashing speed may become somewhat relevant, you may want to use MD4. MD4 is fine for non-cryptographic purposes (and for cryptographic purposes, you should not be using MD5 anyway). It has been reported that MD4 is even faster than CRC32 on ARM-based platforms.I suggest urlencode() or base64_encode() for these reasons:Adapting the benchmark code elsewhere in these replies, I've demonstrated that either of these are way faster than any hash algorithm. Depending on your application, you might be able to use urlencode() or base64_encode() to clean up any 'malformed' strings you want to store.Step One: Install libsodium (or make sure you're using PHP 7.2+)Step Two: Use one of the following:_shorthash is about 3x as fast as _generichash, but you need a key and you have a small-but-realistic risk of collisions. With _generichash, you probably don't need to worry about collisions, and don't need to use a key (but may want to anyway).If you're looking for fast and unique, I recommend xxHash or something that uses newer cpu's crc32c built-in command, see  https://stackoverflow.com/a/11422479/32453.  It also links there to possibly even faster hashes if you don't care about the possibility of collision as much.Adler32 performs best on my machine.

And md5() turned out faster than crc32().The implementation for md5 inside hash is a little bit faster than md5().

So this can be an option or some else, please try:You can see at http://www.dozent.net/Tipps-Tricks/PHP/hash-performanceCRC32 is faster, but less secure than MD5 and SHA1. There is not that much speed difference between MD5 and SHA1.

PHP check whether property exists in object or class

Micah

[PHP check whether property exists in object or class](https://stackoverflow.com/questions/14414379/php-check-whether-property-exists-in-object-or-class)

I understand PHP does not have a pure object variable, but I want to check whether a property is in the given object or class.orIn JS, I can write this to check if variable a exists in an object:In PHP, can anything like this be done?Thank you very much for your advice.

2013-01-19 12:30:49Z

I understand PHP does not have a pure object variable, but I want to check whether a property is in the given object or class.orIn JS, I can write this to check if variable a exists in an object:In PHP, can anything like this be done?Thank you very much for your advice.Example 1:Example 2: To check if the property exists and if it's null too, you can use the function property_exists(). Docs: http://php.net/manual/en/function.property-exists.phpAs opposed with isset(), property_exists() returns TRUE even if the property has the value NULL.Example:Neither isset or property_exists work for me.I ended up going with:Example:If you want to know if a property exists in an instance of a class that you have defined, simply combine property_exists() with isset().echo $person->middleName ?? 'Person does not have a middle name';ORExplanationThe traditional PHP way to check for something's existence is to do:OR for a more class specific way:These are both fine in long form statements but in ternary statements they become unnecessarily cumbersome isset($person->middleName) ? echo $person->middleName : echo 'Person does not have a middle name';You can also achieve this with just the ternary operator like so echo $person->middleName ?: 'Person does not have a middle name'; but if the value does not exist (is not set) it will raise an E_NOTICE and is not best practise. If the value is null it will not raise the exception.Therefore ternary operator to the rescue making this a neat little answer:echo $person->middleName ?? 'Person does not have a middle name';To check if something exits, you can use the PHP function isset() see php.net. This function will check if the variable is set and is not NULL.Example: If you need to check if a property exists in a class, then you can use the build in function property_exists()Example:Using array_key_exists() on objects is Deprecated in php 7.4Instead either isset() or property_exists() should be usedreference : php.netJust putting my 2 cents here.Given the following class:the following will happen:Hope this will help anyone

How to order results with findBy() in Doctrine

Mirage

[How to order results with findBy() in Doctrine](https://stackoverflow.com/questions/12048452/how-to-order-results-with-findby-in-doctrine)

I am using the findBy() method on a Doctrine repository:How can I order the results?

2012-08-21 04:29:32Z

I am using the findBy() method on a Doctrine repository:How can I order the results?The second parameter of findBy is for ORDER.

How to remove part of a string? [closed]

siddharth

[How to remove part of a string? [closed]](https://stackoverflow.com/questions/2192170/how-to-remove-part-of-a-string)

How can I remove part of a string?Example string : "REGISTER 11223344 here"How can I remove "11223344" from the above example string?

2010-02-03 13:31:20Z

How can I remove part of a string?Example string : "REGISTER 11223344 here"How can I remove "11223344" from the above example string?If you're specifically targetting "11223344", then use str_replace:You can use str_replace(), which is defined as:So you could write the code as:If you need better matching via regular expressions you can use preg_replace().assuming 11223344 is not constantAs per OP example:When you need rule based matching, you need to use regexThat will match the first set of numbers, so if you need to be more specific try:substr() is a built-in php function which returns part of a string.

The function substr() will take a string as input, the index form where you want the string to be trimmed. and an optional parameter is the length of the substring. You can see proper documentation and example code on http://php.net/manual/en/function.substr.phpNOTE : index for a string starts with 0.Do the followingThis would return "REGISTERhere"orThis would return "REGISTER here"Dynamically, if you want to remove (a) part(s) from (a) fixed index(es) of a string, use this function:For your purpose:One of its usages is to execute command-like strings, which you know their structures.The following snippet will print "REGISTER here"The preg_replace() API usage us as given below.You could do this too, if you like other ways...Note: This will not work with all characters, like unicode strings

Calling a function from a string in C#

Jeremy Boyd

[Calling a function from a string in C#](https://stackoverflow.com/questions/540066/calling-a-function-from-a-string-in-c-sharp)

I know in php you are able to make a call like:Is this possible in .Net?

2009-02-12 04:49:29Z

I know in php you are able to make a call like:Is this possible in .Net?Yes. You can use reflection. Something like this:You can invoke methods of a class instance using reflection, doing a dynamic method invocation:Suppose that you have a method called hello in a the actual instance (this):A slight tangent -- if you want to parse and evaluate an entire expression string which contains (nested!) functions, consider NCalc (http://ncalc.codeplex.com/ and nuget)Ex. slightly modified from the project documentation:And within the EvaluateFunction delegate you would call your existing function.In Fact I am working on Windows Workflow 4.5 and I got to find a way to pass a delegate from a statemachine to a method with no success. The only way I got to find was to pass a string with the name of the method I wanted to pass as delegate and to convert the string to a delegate inside the method. Very nice answer. Thanks. Check this link https://msdn.microsoft.com/en-us/library/53cz7sc6(v=vs.110).aspxIn C#, you can create delegates as function pointers.  Check out the following MSDN article for information on usage: http://msdn.microsoft.com/en-us/library/ms173171(VS.80).aspx

How to get WordPress post featured image URL

ManpreetSandhu

[How to get WordPress post featured image URL](https://stackoverflow.com/questions/11261883/how-to-get-wordpress-post-featured-image-url)

I am using this function to get the featured images:Now I want to get the full featured image on click on the anchor tag for which I need a featured image URL in How can I fix this?

2012-06-29 12:35:40Z

I am using this function to get the featured images:Now I want to get the full featured image on click on the anchor tag for which I need a featured image URL in How can I fix this?Check the code below and let me know if it works for you.If you want JUST the source, and not an array with other information: Easy way!This perfectly worked for me:I think this is the easiest solution and the updated one:This is the simplest answer:You can try this:Try this one You can try this.You can also get it from post_meta like this:You can also get the URL for image attachments as follows. It works fine.You will try this If the post is an image and we already know what the image is, it's possible to get the thumbnail URL without too much hassle:Use:You can change the thumbnail_size value as per your required size.You can also get the URL for image attachments as follows: I had searched a lot and found nothing, until I got this:<?php echo get_the_post_thumbnail_url( null, 'full' ); ?>Which simply give you the full image URL without the entire <img> tag.Hope that can help you.Simply inside the loop write <?php the_post_thumbnail_url(); ?> as shown below:-

Unable to find the wrapper「https」- did you forget to enable it when you configured PHP?

John M

[Unable to find the wrapper「https」- did you forget to enable it when you configured PHP?](https://stackoverflow.com/questions/5444249/unable-to-find-the-wrapper-https-did-you-forget-to-enable-it-when-you-config)

The problem is in the question. I've done a thorough investigation for solutions in regards to this and I know there are topics to this and I've followed them too and nothing has worked. That being said I'll list out exactly everything I've done so far. I am running PHP 5.2.14 with Zend Debugging on the latest Eclipse version on my Windows XP computer. I have a 1 GB of RAM. I have XAMPP running with Apache, MySQL, and FileZilla installed. On XAMPP I've done the following (Apache was off during these changes):

Clicked on Admin from the XAMPP Control Panel and went to https:// localhost/xampp/. From there I accepted the certs from this line on the welcome page:On that same section I checked phpinfo(). Under 'Environment', SERVER["HTTPS"] is on. Under 'Apache Environment', HTTPS is On. Under 'PHP Variables, _SERVER["HTTPS"] is On. Under 'Phar', OpenSSL support is disabled (install ext/openssl). I don't know how to enable the Phar one.Now regarding the files themselves in C:\xampp, I went to the PHP folder. Under both production and development php.ini files (better safe than sorry), I have allow_url_fopen=On, allow_url_include=On, and I removed the semicolon, so that extension=php_openssl.dll is no longer commented out. I even confirmed that the .dll is in the ext folder of the PHP folder. Both libeay32.dll and ssleay32.dll are in the PHP and Apache folders. The Apache folder doesn't contain either productive or development php.ini files.I've went to http://www.slproweb.com/products/Win32OpenSSL.html and installed Win32 OpenSSL v1.0.0d for safe measure.Now the line of code in question in my retrieve_website.php looks like this:I have two other websites that I query but they are served via HTTP and they work fine. I also have this line of code entered near the end of the script:When I run it as a PHP Script on Eclipse, everything outputs perfectly fine the way I want along with these results:Despite all these changes I've made (after I started up Apache), I still get the same errors the first time I access my PHP script in Eclipse and Firefox via http://localhost/tutorial/retrieve_website.php:What is it that I have overlooked or failed to do? To my own knowledge, I've done everything that I've researched about concerning HTTPS and OpenSSL

2011-03-26 18:14:41Z

The problem is in the question. I've done a thorough investigation for solutions in regards to this and I know there are topics to this and I've followed them too and nothing has worked. That being said I'll list out exactly everything I've done so far. I am running PHP 5.2.14 with Zend Debugging on the latest Eclipse version on my Windows XP computer. I have a 1 GB of RAM. I have XAMPP running with Apache, MySQL, and FileZilla installed. On XAMPP I've done the following (Apache was off during these changes):

Clicked on Admin from the XAMPP Control Panel and went to https:// localhost/xampp/. From there I accepted the certs from this line on the welcome page:On that same section I checked phpinfo(). Under 'Environment', SERVER["HTTPS"] is on. Under 'Apache Environment', HTTPS is On. Under 'PHP Variables, _SERVER["HTTPS"] is On. Under 'Phar', OpenSSL support is disabled (install ext/openssl). I don't know how to enable the Phar one.Now regarding the files themselves in C:\xampp, I went to the PHP folder. Under both production and development php.ini files (better safe than sorry), I have allow_url_fopen=On, allow_url_include=On, and I removed the semicolon, so that extension=php_openssl.dll is no longer commented out. I even confirmed that the .dll is in the ext folder of the PHP folder. Both libeay32.dll and ssleay32.dll are in the PHP and Apache folders. The Apache folder doesn't contain either productive or development php.ini files.I've went to http://www.slproweb.com/products/Win32OpenSSL.html and installed Win32 OpenSSL v1.0.0d for safe measure.Now the line of code in question in my retrieve_website.php looks like this:I have two other websites that I query but they are served via HTTP and they work fine. I also have this line of code entered near the end of the script:When I run it as a PHP Script on Eclipse, everything outputs perfectly fine the way I want along with these results:Despite all these changes I've made (after I started up Apache), I still get the same errors the first time I access my PHP script in Eclipse and Firefox via http://localhost/tutorial/retrieve_website.php:What is it that I have overlooked or failed to do? To my own knowledge, I've done everything that I've researched about concerning HTTPS and OpenSSLI solved it in XAMPP by uncommenting ;extension=php_openssl.dll in /apache/bin/php.ini despite phpinfo() telling me /php/php.ini was the loaded ini file.EDIT: I guess Ezra answer is the best solution directly adding the extension line to the appropriate ini file.I had to add extension=php_openssl.dll to my php.ini file located in xampp/php/php.ini. Somehow it was not there, after adding it and restarting Apache everything was working fine.just add two lines in your php.ini file.its working for me.Your Apache is probably not compiled with SSL support. Use cURL instead of file_get_contents anyway. Try this code, if it fails then I am right.I have enable the openssl extention and it work for me :);extension=php_openssl.dll toextension=php_openssl.dllIn my case, the issue was due to WAMP using a different php.ini for CLI than Apache, so your settings made through the WAMP menu don't apply to CLI. Just modify the CLI php.ini and it works.in OpenSuse 12.1 the only thing required was:For me I had to uncomment these lines in php.ini:"ext" is applicable if php_openssl.dll is located in the "ext" folder.Note: I had to do this for two of my php.ini files otherwise it would not work. One located in the vs.php installation folder, and the other on on the PHP folderSourceOn MAC AMPPS, I updated the php-5.5.ini with the following and now it works.You can use this function instead.PHP7, in php.ini file, remove the ";" before extension=opensslProblem with file_get_contents for the requests https in Windows, uncomment the following lines in the php.ini file:After snooping around all day, I figured out the answer thanks to this guide:

http://piwigo.org/forum/viewtopic.php?id=15727Basically under Eclipse -> Windows -> Preferences -> PHP Executables, there is a section on where the .exe and .ini is referenced. The defaulted ones were in the Eclipse directory when you install the PHP Development Tools SDK Feature from Eclipses Install New Software in the Help menu.So instead of that, I added a new executable called PHP 5.3.5 (CGI) and referenced the cgi.exe and .ini from xampp's php folder.Thank you webarto for giving your time to help me out.I'm using opsenSUSE Leap, and I had the same issue -- it means there's no support for OpenSSL. This is how I resolved it:That's it, you're done.I got this error too. I figured out that my version of PHP didn't have openssl compiled in, so simply adding the extension directive to php.ini wasn't enough. I don't know how you have to solve this in your particular case, but for me, I use macports, and the command was just:For those using Winginx (nginx based instead of Apache based), I fixed it with these 4 steps:Try this:In my case (PHP 7.3 on Windows in FastCGI mode) it was uncommenting extension=openssl.

Not extension=php_openssl, as most people post here.(The same thing was posted here, but without details on OS which may be a key difference here.)If you are using wamp server then go to icon click on this Then go to PHP then click on PHP extension there would be php_openssl need to activate from there and restart wamp server Inside the simple_html_dom.php change the value of the $offset variable from -1 to 0. 

this error usually happens when you migrate to PHP 7.HtmlDomParser::file_get_html uses a default offset of -1, passing in 0 should fix your problem.

How do I get an object's unqualified (short) class name?

Greg.Forbes

[How do I get an object's unqualified (short) class name?](https://stackoverflow.com/questions/19901850/how-do-i-get-an-objects-unqualified-short-class-name)

How do I check the class of an object within the PHP name spaced environment without specifying the full namespaced class.  For example suppose I had an object library/Entity/Contract/Name. The following code does not work as get_class returns the full namespaced class. The namespace magic keyword returns the current namespace, which is no use if the tested object has another namespace. I could simply specify the full classname with namespaces, but this seems to lock in the structure of the code.  Also not of much use if I wanted to change the namespace dynamically. Can anyone think of an efficient way to do this.  I guess one option is regex.  

2013-11-11 08:28:23Z

How do I check the class of an object within the PHP name spaced environment without specifying the full namespaced class.  For example suppose I had an object library/Entity/Contract/Name. The following code does not work as get_class returns the full namespaced class. The namespace magic keyword returns the current namespace, which is no use if the tested object has another namespace. I could simply specify the full classname with namespaces, but this seems to lock in the structure of the code.  Also not of much use if I wanted to change the namespace dynamically. Can anyone think of an efficient way to do this.  I guess one option is regex.  You can do this with reflection. Specifically, you can use the ReflectionClass::getShortName method, which gets the name of the class without its namespace.First, you need to build a ReflectionClass instance, and then call the getShortName method of that instance:However, I can't imagine many circumstances where this would be desirable.  If you want to require that the object is a member of a certain class, the way to test it is with instanceof. If you want a more flexible way to signal certain constraints, the way to do that is to write an interface and require that the code implement that interface. Again, the correct way to do this is with instanceof. (You can do it with ReflectionClass, but it would have much worse performance.)(new \ReflectionClass($obj))->getShortName(); is the best solution with regards to performance.I was curious which of the provided solutions is the fastest, so I've put together a little test.ResultsCodeThe results actually surprised me. I thought the explode solution would be the fastest way to go...I added substr to the test of https://stackoverflow.com/a/25472778/2386943

and that's the fastet way I could test (CentOS PHP 5.3.3, Ubuntu PHP 5.5.9) both with an i5.ResultsCode==UPDATE==As mentioned in the comments by @MrBandersnatch there is even a faster way to do this:Here are the updated test results with "SubstringStrChr" (saves up to about 0.001 s):Here is a more easier way of doing this if you are using Laravel PHP framework :I use this:To get the short name as an one-liner (since PHP 5.4):It is a clean approach and reasonable fast.I found myself in a unique situation where instanceof could not be used (specifically namespaced traits) and I needed the short name in the most efficient way possible so I've done a little benchmark of my own. It includes all the different methods & variations from the answers in this question.A list of the of the entire result is here but here are the highlights:A simplified table of results, speed is measured compared to the slowest method:You can use explode for separating the namespace and end to get the class name:Yii wayYii uses this method in its Gii code generatorMethod documentationMore information:https://github.com/yiisoft/yii2/blob/master/framework/helpers/BaseStringHelper.php

http://www.yiiframework.com/doc-2.0/yii-helpers-basestringhelper.html#basename()-detailHere is simple solution for PHP 5.4+What will be return?Extended class name and namespace works well to:What about class in global namespace?If you need to know the class name that was called from inside a class, and don't want the namespace, you can use this one This is great when you have a method inside a class which is extended by other classes. Furthermore, this also works if namespaces aren't used at all.Example:Based on @MaBi 's answer, I made this:Which you may use like that:A::class returns Foo\Bar\Baz\A, but A::getClassShortName() returns A.Works for PHP >= 5.5.I know this is an old post but this is what i use - Faster than all posted above just call this method from your class, a lot quicker than using ReflectionFound on the documentation page of get_class, where it was posted by me at nwhiting dot com.But the idea of namespaces is to structure your code. That also means that you can have classes with the same name in multiple namespaces. So theoretically, the object you pass could have the name (stripped) class name, while still being a totally different object than you expect.Besides that, you might want to check for a specific base class, in which case get_class doesn't do the trick at all. You might want to check out the operator instanceof.You may get an unexpected result when the class doesn't have a namespace. I.e. get_class returns Foo, then $baseClass would be oo.This can easily be fixed by prefixing get_class with a backslash:Now also classes without a namespace will return the right value.Quoting php.net:Based on this info and expanding from arzzzen answer this should work on both Windows and Nix* systems:Note: I did a benchmark of ReflectionClass against basename+str_replace+get_class and using reflection is roughly 20% faster than using the basename approach, but YMMV.The fastest and imho easiest solution that works in any environment is:If you're just stripping name spaces and want anything after the last \ in a class name with namespace (or just the name if there's no '\') you can do something like this:Basically it's regex to get any combination of characters or backslashes up and until the last backslash then to return only the non-backslash characters up and until the end of the string. Adding the ? after the first grouping means if the pattern match doesn't exist, it just returns the full string.A good old regex seems to be faster than the most of the previous shown methods:So this works even when you provide a short class name or a fully qualified (canonical) class name.What the regex does is that it consumes all previous chars until the last separator is found (which is also consumed). So the remaining string will be the short class name. If you want to use a different separator (eg. / ) then just use that separator instead. Remember to escape the backslash (ie. \) and also the pattern char (ie. /) in the input pattern.Because "ReflectionClass" can be version depend just use the follow:or even clear 

Automatically deleting related rows in Laravel (Eloquent ORM)

Martti Laine

[Automatically deleting related rows in Laravel (Eloquent ORM)](https://stackoverflow.com/questions/14174070/automatically-deleting-related-rows-in-laravel-eloquent-orm)

When I delete a row using this syntax:Is there a way to attach a callback of sorts, so that it would e.g. do this automatically:Preferably inside the model-class.

2013-01-05 16:55:28Z

When I delete a row using this syntax:Is there a way to attach a callback of sorts, so that it would e.g. do this automatically:Preferably inside the model-class.I believe this is a perfect use-case for Eloquent events (http://laravel.com/docs/eloquent#model-events). You can use the "deleting" event to do the cleanup:

You should probably also put the whole thing inside a transaction, to ensure the referential integrity..You can actually set this up in your migrations:$table->foreign('user_id')->references('id')->on('users')->onDelete('cascade');Source: http://laravel.com/docs/5.1/migrations#foreign-key-constraintsYou can delete all related photos before actually deleting the user.Hope it helps.Relation in User model:Delete record and related:There are 3 approaches to solving this:1. Using Eloquent Events On Model Boot (ref: https://laravel.com/docs/5.7/eloquent#events)2. Using Eloquent Event Observers (ref: https://laravel.com/docs/5.7/eloquent#observers)In your AppServiceProvider, register the observer like so:Next, add an Observer class like so:3. Using Foreign Key Constraints (ref: https://laravel.com/docs/5.7/migrations#foreign-key-constraints)As of Laravel 5.2, the documentation states that these kinds of event handlers should be registered in the AppServiceProvider:I even suppose to move them to separate classes instead of closures for better application structure.It is better if you override the delete method for this. That way, you can incorporate DB transactions within the delete method itself. If you use the event way, you will have to cover your call of delete method with a DB transaction every time you call it.In your User model.In my case it was pretty simple because my database tables are InnoDB with foreign keys with Cascade on Delete. So in this case if your photos table contains a foreign key reference for the user than all you have to do is to delete the hotel and the cleanup will be done by the Data Base, the data base will delete all the photos records from the data base.I would iterate through the collection detaching everything before deleting the object itself.here's an example:I know it is not automatic but it is very simple.Another simple approach would be to provide the model with a method. Like this:Then you can simply call this where you need:Or you can do this if you wanted, just another option:Note if you are not using the default laravel db connection then you need to do the following:To elaborate on the selected answer, if your relationships also have child relationships that must be deleted, you have to retrieve all child relationship records first, then call the delete() method so their delete events are fired properly as well.You can do this easily with higher order messages.You can also improve performance by querying only the relationships ID column:yeah, but as @supersan stated upper in a comment, if you delete() on a QueryBuilder, the model event will not be fired, because we are not loading the model itself, then calling delete() on that model.The events are fired only if we use the delete function on a Model Instance.So, this beeing said:in order to delete the post tags when deleting the user, we would have to iterate over $user->posts and calling $post->delete()foreach($user->posts as $post) { $post->delete(); } -> this will fire the deleting event on PostVS$user->posts()->delete() -> this will not fire the deleting event on post because we do not actually load the Post Model (we only run a SQL like: DELETE * from posts where user_id = $user->id and thus, the Post model is not even loaded)You can use this method as an alternative.What will happen is that we take all the tables associated with the users table and delete the related data using looping

How do I see the extensions loaded by PHP?

Bialecki

[How do I see the extensions loaded by PHP?](https://stackoverflow.com/questions/478844/how-do-i-see-the-extensions-loaded-by-php)

It's got to be somewhere in the phpinfo() dump, but I just don't know where.  Is it supposed to be under the "Additional Modules" section?  Somewhere else?  I'm trying to figure out why some extensions don't appear to be loaded, but I don't even know where I should be looking.

2009-01-26 04:32:53Z

It's got to be somewhere in the phpinfo() dump, but I just don't know where.  Is it supposed to be under the "Additional Modules" section?  Somewhere else?  I'm trying to figure out why some extensions don't appear to be loaded, but I don't even know where I should be looking.Running Run command. You will get installed extentions:Or run this command to get all module install and uninstall with versionuse get_loaded_extensions() PHP functionYou want to run:on the command line,or if you have access to the server configuration file open and look at all the the extensions,you can even enable or disable them by switching between On and Off like thisget_loaded_extensions() output the extensions list.phpinfo(INFO_MODULES);  output the extensions and their details.If you want to test if a particular extension is loaded you can also use the extension_loaded function, see documentation hereAre you looking for a particular extension? In your phpinfo();, just hit Ctrl+F in your web browser, type in the first 3-4 letters of the extension you're looking for, and it should show you whether or not its loaded.Usually in phpinfo() it doesn't show you all the loaded extensions in one location, it has got a separate section for each loaded extension where it shows all of its variables, file paths, etc, so if there is no section for your extension name it probably means it isn't loaded.Alternatively you can open your php.ini file and use the Ctrl+F method to find your extension, and see if its been commented out (usually by a semicolon near the start of the line).

Where is the php.ini file on a Linux/CentOS PC? [duplicate]

MM PP

[Where is the php.ini file on a Linux/CentOS PC? [duplicate]](https://stackoverflow.com/questions/17850787/where-is-the-php-ini-file-on-a-linux-centos-pc)

I can't find PHP.ini location on my server. I've checked all Stack Overflow answers but I can't find my php.ini location.I have Linux, Cent OS, zPanel. Last version of PHP.My computer: Linux Mint 15 KDE.

2013-07-25 06:39:52Z

I can't find PHP.ini location on my server. I've checked all Stack Overflow answers but I can't find my php.ini location.I have Linux, Cent OS, zPanel. Last version of PHP.My computer: Linux Mint 15 KDE.In your terminal/console (only Linux, in windows you need Putty)And it will show you something like this Loaded Configuration File => /etc/php.ini.ALTERNATIVE METHODYou can make a php file on your website, which run: <?php phpinfo(); ?>, and you can see the php.ini location on the line with: "Loaded Configuration File".Update

This command gives the path right awayYou can find the path to php.ini in the output of phpinfo(). See under "Loaded Configuration File".On most installs you can find it here:/etc/php.ini#php -i | grep php.ini also will work too!

Copy entire contents of a directory to another using php

dave

[Copy entire contents of a directory to another using php](https://stackoverflow.com/questions/2050859/copy-entire-contents-of-a-directory-to-another-using-php)

I tried to copy the entire contents of the directory to another location using but it says it cannot find stream, true *.* is not found.Any other wayThanks

Dave

2010-01-12 17:17:36Z

I tried to copy the entire contents of the directory to another location using but it says it cannot find stream, true *.* is not found.Any other wayThanks

DaveIt seems that copy only handle single files. Here is a function for copying recursively I found in this note on the copy documentation page:As described here, this is another approach that takes care of symlinks too:copy() only works with files.Both the DOS copy and Unix cp commands will copy recursively - so the quickest solution is just to shell out and use these. e.g.Otherwise you'll need to use the opendir/readdir or scandir to read the contents of the directory, iterate through the results and if is_dir returns true for each one, recurse into it.e.g.The best solution is!Like said elsewhere, copy only works with a single file for source and not a pattern. If you want to copy by pattern, use glob to determine the files, then run copy. This will not copy subdirectories though, nor will it create the destination directory.from the last 4th line , make thisandFull thanks must go to Felix Kling for his excellent answer which I have gratefully used in my code. I offer a small enhancement of a boolean return value to report success or failure:My pruned version of @Kzoty answer.

Thank you Kzoty.UsageWith Symfony this is very easy to accomplish:See https://symfony.com/doc/current/components/filesystem.htmlI clone entire directory by SPL Directory Iterator. For Linux servers you just need one line of code to copy recursively while preserving permission:Another way of doing it is:but it's slower and does not preserve permissions.

Php multiple delimiters in explode

OHLÁLÁ

[Php multiple delimiters in explode](https://stackoverflow.com/questions/4955433/php-multiple-delimiters-in-explode)

I have a problem, I have a string array, and I want to explode in different delimiter. For Exampleand I need an array which is explode in @ or vs.I already wrote a solution, but If everybody have a better solution please post here.

2011-02-10 09:43:15Z

I have a problem, I have a string array, and I want to explode in different delimiter. For Exampleand I need an array which is explode in @ or vs.I already wrote a solution, but If everybody have a better solution please post here.what about using You can take the first string, replace all the @ with vs using str_replace, then explode on vs or vice versa. Source: php@metehanarslan at php.netHow about using strtr() to substitute all of your other delimiters with the first one?It's sort of unreadable, I guess, but I tested it as working over here.One-liners ftw!Wouldn't strtok() work for you?Simply you can use the following code:You can try this solution.... It works greatSource : http://www.phpdevtips.com/2011/07/exploding-a-string-using-multiple-delimiters-using-php/I do it this way...How about this?In your case you should use an Array for the $delimiters param. Then it is possible to use multiple chars as one delimiter.If you don't care about trailing spaces in your results, you can remove the array_map('trim', [...] ) part in the return row. (But don't be a quibbler in this case. Keep the preg_split in it.)Required PHP Version: 5.3.0 or higher.You can test it hereYou are going to have some problems (what if you have this string: "vs @ apples" for instance) using this method of sepparating, but if we start by stating that you have thought about that and have fixed all of those possible collisions, you could just replace all occurences of $delimiter[1] to $delimiter[n] with $delimiter[0], and then split on that first one?If your delimiter is only characters, you can use strtok, which seems to be more fit here. Note that you must use it with a while loop to achieve the effects.This will work:As you can see, it first glues the by \n\r exploded parts together with a space, to then cut it apart again, this time taking the spaces with him.

Why would $_FILES be empty when uploading files to PHP?

elmonty

[Why would $_FILES be empty when uploading files to PHP?](https://stackoverflow.com/questions/3586919/why-would-files-be-empty-when-uploading-files-to-php)

I have WampServer 2 installed on my Windows 7 computer. I'm using Apache 2.2.11 and PHP 5.2.11. When I attempt to upload any file from a form, it seems to upload, but in PHP, the $_FILES array is empty. There is no file in the c:\wamp\tmp folder. I have configured php.ini to allow file uploads and such. The tmp folder has read/write privileges for the current user. I'm stumped.HTML:PHP:

2010-08-27 18:01:47Z

I have WampServer 2 installed on my Windows 7 computer. I'm using Apache 2.2.11 and PHP 5.2.11. When I attempt to upload any file from a form, it seems to upload, but in PHP, the $_FILES array is empty. There is no file in the c:\wamp\tmp folder. I have configured php.ini to allow file uploads and such. The tmp folder has read/write privileges for the current user. I'm stumped.HTML:PHP:Here's a check-list for file uploading in PHP:Source for some of these points:

http://getluky.net/2004/10/04/apachephp-_files-array-mysteriously-empty/As far as the HTML you appear to have set that part up correctly. You already have the enctype="multipart/form-data" which is very important to have on the form.As far as your php.ini setup, sometimes on systems multiple php.ini files exist. Be sure you are editing the correct one. I know you said you have configured your php.ini file to have file uploads, but did you also set your upload_max_filesize and post_max_size to be larger than the file you are trying to upload? So you should have:Does your directory: "c:\wamp\tmp" have both read and write permissions? Did you remember to restart Apache after you made the php.ini changes?It is important to add enctype="multipart/form-data" to your form, exampleThank you everybody for the vary comprehensive replies. Those are all very helpful. The answer turned out to be something very odd. It turns out that PHP 5.2.11 doesn't like the following:or If I change it to 2047M, the upload works.I have a same problem looking 2 hours ,is very simple to we check our server configuration first. Example:any type of file size is :20mb, but our upload_max_size is above 20mb but array is null. Answer is our post_max_size should be greater than  upload_max_filesizeHere another cause I found: 

When using JQuery Mobile and the form attribute data-ajax is set to true, the FILES array will be empty. So set data-ajax to false.Make sure your input element has a 'name' attribute.

<input type="file" name="uploadedfile" />If this is missing the $_FILES will be empty.I was struggling with the same problem and testing everything, not getting error reporting and nothing seemed to be wrong.

I had error_reporting(E_ALL) 

But suddenly I realized that I had not checked the apache log and voilà!

There was a syntax error on the script...! (a missing "}" )So, even though this is something evident to be checked, it can be forgotten...

In my case (linux) it is at:No one mentioned this but it helped me out and not many places on the net mention it.Make sure your php.ini sets the following key:You'll need to check with your webhost if they want you to use an absolute server file path.  You should be able to see other directory examples in your php.ini file to determine this.  As soon as I set it I got values in my _FILES object.Finally make sure that your tmp folder and wherever you are moving files to have the correct permissions so that they can be read and written to.If you are trying to upload an array of files then you may need to increase max_file_uploads in php.ini which is by default set to 20Note: max_file_uploads can NOT be changed outside php.ini. See PHP "Bug" #50684Another possible culprit is apache redirects.  In my case I had apache's httpd.conf set up to redirect certain pages on our site to http versions, and other pages to https versions of the page, if they weren't already.  The page on which I had a form with a file input was one of the pages configured to force ssl, but the page designated as the action of the form was configured to be http.  So the page would submit the upload to the ssl version of the action page, but apache was redirecting it to the http version of the page and the post data, including the uploaded file was lost.Check your php.ini for enable_post_data_reading=On , because:In http://php.net/manual/en/ini.core.php#ini.enable-post-data-readingIf your main script is http://Some_long_URL/index.php be carefull to specify the full URL (with explicit index.php and not only http://Some_long_URL) in the action field. Surprisingly, if not, the right script is executed, but with en empty $_FILES !I ran into the same issue and found that it was my IDE was part of the issue.  I was launching the debugger directly from the IDE (PHPStorm) instead of just using the browser directly. The IDE spawned URL was like this:and just using:worked just fine.   My set up is PC / Windows 10 / WAMPSERVER 3.0.6 64bit Here is one more thing to check that has not yet been mentioned...I assumed, naturally, that the folder where my PHP script stored temporary file uploads was /tmp. This belief was reinforced by the fact that echo sys_get_temp_dir() . PHP_EOL; returns/tmp. Also, echo ini_get('upload_tmp_dir'); returns nothing.To verify that the uploaded file does in fact briefly appear in my /tmp folder, I added a sleep(30); statement to my script (as suggested here) and navigated to my /tmp folder in cPanel File Manager to locate the file. However, no matter what, the uploaded file was nowhere to be found there.I spent hours trying to determine the reason for this, and implemented every suggestion that's been offered here.Finally, after searching my website files for the query tmp, I discovered that my site contained other folders named tmp in different directories. I realized that my PHP script was actually writing the uploaded files to .cagefs/tmp. (The "Show Hidden Files" setting must be enabled in cPanel in order to view this folder.)So, why does the sys_get_temp_dir function return inaccurate info? Here's an explanation from the PHP.net webpage for sys_get_temp_dir (i.e., the top comment):This SO post delves into the issue, as well:I got the same problem and none of theme was my error. Check in your .htaccess file, if you got one, if "MultiViews" are enabled. I had to disable them.I had similar problem and the issue was in wrong value in htaccess as shamittomar mentioned.Change php_value post_max_size 10MB to php_value post_max_size 10MI was empty $_FILES because after <form enctype="multipart/form-data" method="post"> i placed Initial code was like I decided to modify and So conclusion is that after <form enctype="multipart/form-data" method="post"> must be <input name, type, id and must not be <div> or some other tagsIn my situation correct code was  I too had problems with $_FILES empty. The above check-list do not mention MultiViews in .htaccess, httpd.conf or httpd-vhost.conf.If you have MultiViews set in the options directive for your directory containing the web site, $_FILES will be empty, even though Content-Length header if showing that the file i uploaded.If you are using JQuery MobileUsing a multipart form with a file input is not supported by Ajax. In this case you should decorate the parent form with data-ajax="false" to ensure the form is submitted properly to the server.

Why does the PHP json_encode function convert UTF-8 strings to hexadecimal entities?

David Jones

[Why does the PHP json_encode function convert UTF-8 strings to hexadecimal entities?](https://stackoverflow.com/questions/16498286/why-does-the-php-json-encode-function-convert-utf-8-strings-to-hexadecimal-entit)

I have a PHP script that deals with a wide variety of languages. Unfortunately, whenever I try to use json_encode, any Unicode output is converted to hexadecimal entities. Is this the expected behavior? Is there any way to convert the output to UTF-8 characters?Here's an example of what I'm seeing:INPUTOUTPUTINPUTOUTPUT

2013-05-11 14:44:14Z

I have a PHP script that deals with a wide variety of languages. Unfortunately, whenever I try to use json_encode, any Unicode output is converted to hexadecimal entities. Is this the expected behavior? Is there any way to convert the output to UTF-8 characters?Here's an example of what I'm seeing:INPUTOUTPUTINPUTOUTPUTSince PHP/5.4.0, there is an option called "JSON_UNESCAPED_UNICODE". Check it out:http://se2.php.net/json_encodeTherefore you should try:JSON_UNESCAPED_UNICODE is available on PHP Version 5.4 or later.

The following code is for Version 5.3.UPDATED You like to set charset and unescaped unicodeOne solution is to first encode data and then decode it in the same file:Here is my combined solution for various PHP versions. In my company we are working with different servers with various PHP versions, so I had to find solution working for all. Credits should go to Marco Gasi & abu. The solution for PHP >= 5.4 is provided in the json_encode docs.The raw_json_encode() function above did not solve me the problem (for some reason, the callback function raised an error on my PHP 5.2.5 server).But this other solution did actually work.https://www.experts-exchange.com/questions/28628085/json-encode-fails-with-special-characters.htmlCredits should go to Marco Gasi. I just call his function instead of calling json_encode():Since you asked:Another solution is to use utf8_encode. This will encode your string to UTF-8.e.g.the json_encode() only works with UTF-8 encoded data.maybe you can get an answer to convert it here: cyrillic-characters-in-phps-json-encode

Refresh a page using PHP

Aan

[Refresh a page using PHP](https://stackoverflow.com/questions/12383371/refresh-a-page-using-php)

How can I refresh a page using PHP periodically? If I can not do it by PHP, what is the best recommended scenario?

2012-09-12 07:43:33Z

How can I refresh a page using PHP periodically? If I can not do it by PHP, what is the best recommended scenario?You can do it with PHP:It refreshes your current page, and if you need to redirect it to another page, use following:In PHP you can use:Or just use JavaScript's window.location.reload().You sure can refresh a page periodically using PHP:This will refresh the page every three seconds.That is simply possible with header() in PHP:I've found two ways to refresh PHP content:1. Using the HTML meta tag:2. Using PHP refresh rate:Besides all the PHP ways to refresh a page, the page will also be refreshed with the following HTML meta tag:See Meta refresh - "automatically refresh the current web page or frame after a given time interval"You can set the time within the content value.header('Location: .'); seems to refresh the page in Chrome, Firefox, Edge, and Internet Explorer 11.You cannot do it in PHP. Once the page is loaded, PHP dies and is out of control.You have a few options:I think that the refresh meta tag is the easiest and most convenient.You can refresh using JavaScript. Rather than the complete page refresh, you can give the contents to be refreshed in a div. Then by using JavaScript you can refresh that particular div only, and it works faster than the complete page refresh.PHP is server-side language, so you can not refresh the page with PHP, but JavaScript is the best option to refresh the page:The visit Location reload() method.Echo the meta tag like this:URL is the one where the page should be redirected to after the refresh.Adding this meta tag in PHP might help:One trick is to add a random number to the end of the URL. That way you don't have to rename the file every time. E.g.:The browser will not cache it as long as the random number is different, but the web server will ignore it.

How to remove line breaks (no characters!) from the string?

Johannes Pille

[How to remove line breaks (no characters!) from the string?](https://stackoverflow.com/questions/10757671/how-to-remove-line-breaks-no-characters-from-the-string)

This might appear to be a dupe, but rest assured it isn't - I have searched both SO as well as the rest of the web for an answer to my problem and ended up finding the same insufficient "solutions" over and over. Anyhow, here it goes:I'm saving user input from a textarea to a MySQL database (within a WordPress environment, but that ought not to matter to this problem, I believe). It is later retrieved from the DB to be shown to Admins in the backend of the site. The problem occurs when users submit text with line breaks (i.e. hit the Enter key).A sample string might look like this:There are no end of line characters ("\n", "\r", or the like) in the string.I am using nl2br() on it to generate HTML output, but that's not enough. The result then is:Which, as far as I understand it, is the expected nl2br() result, as that inserts the tags and isn't supposed to replace the line-breaks in the first place?However the format I need would be this:If the string had EOL characters such as "\n" in it, I'd hit it with either str_replace() or preg_replace() and be done with it, but I have no clue what needle to feed either of those functions if there ain't no characters there in the first place.I can manually access the relevant field in the DB, hit Backspace for every linebreak and what I later on want to do with the string works. So I know I need the above format.

2012-05-25 15:56:47Z

This might appear to be a dupe, but rest assured it isn't - I have searched both SO as well as the rest of the web for an answer to my problem and ended up finding the same insufficient "solutions" over and over. Anyhow, here it goes:I'm saving user input from a textarea to a MySQL database (within a WordPress environment, but that ought not to matter to this problem, I believe). It is later retrieved from the DB to be shown to Admins in the backend of the site. The problem occurs when users submit text with line breaks (i.e. hit the Enter key).A sample string might look like this:There are no end of line characters ("\n", "\r", or the like) in the string.I am using nl2br() on it to generate HTML output, but that's not enough. The result then is:Which, as far as I understand it, is the expected nl2br() result, as that inserts the tags and isn't supposed to replace the line-breaks in the first place?However the format I need would be this:If the string had EOL characters such as "\n" in it, I'd hit it with either str_replace() or preg_replace() and be done with it, but I have no clue what needle to feed either of those functions if there ain't no characters there in the first place.I can manually access the relevant field in the DB, hit Backspace for every linebreak and what I later on want to do with the string works. So I know I need the above format.You should be able to replace it with a preg that removes all newlines and carriage returns. The code is:Even though the \n characters are not appearing, if you are getting carriage returns there is an invisible character there. The preg replace should grab and fix those.Ben's solution is acceptable, but str_replace() is by far faster than preg_replace()Using less CPU power, reduces the world carbon dioxide emissions.It's because nl2br() doesn't remove new lines at all.Use str_replace instead:You can also use PHP trimTo work properly also on Windows I'd suggest to use"\r\n" - for Windows, "\r" - for Mac and "\n" - for Linuxstr_replace(PHP_EOL, null, $str);Something a bit more functional (easy to use anywhere):Using PHP_EOL as the search replacement parameter is also a good idea! Kudos.Alternative built-in: trim()It's there to remove line breaks from different kinds of text files, but does not handle html. I use 3 lines to do this job, so consider $s as your "stuff"...

PHP script - detect whether running under linux or Windows?

siliconpi

[PHP script - detect whether running under linux or Windows?](https://stackoverflow.com/questions/5879043/php-script-detect-whether-running-under-linux-or-windows)

I have a PHP script that may be placed on a windows system or a linux system. I need to run different commands in either case. How can I detect which environment I am in? (preferably something PHP rather than clever system hacks)To clarify, the script is running from the command line.

2011-05-04 05:36:25Z

I have a PHP script that may be placed on a windows system or a linux system. I need to run different commands in either case. How can I detect which environment I am in? (preferably something PHP rather than clever system hacks)To clarify, the script is running from the command line.Check the value of the PHP_OS constantDocs.It will give you various values on Windows like WIN32, WINNT or Windows.See as well: Possible Values For: PHP_OS and php_unameDocs:You can check if the directory separator is / (for unix/linux/mac) or \ on windows. The constant name is DIRECTORY_SEPARATOR.seems like a bit more elegant than the accepted answer. The aforementioned detection with DIRECTORY_SEPARATOR is the fastest, though.Note that PHP_OS reports the OS that PHP was built on, which is not necessarily the same OS that it is currently running on.If you are on PHP >= 5.3 and just need to know whether you're running on Windows or not-Windows then testing whether one of the Windows-specific constants is defined may be a good bet, e.g.:The php_uname function can be used to detect this.This should work in PHP 4.3+:According to Predefined Constants: User Contributed Notes Volker's and rdcapasso solution, you can simply create helper class like this:Usage:Core Predefined Constants: http://us3.php.net/manual/en/reserved.constants.php which has the PHP_OS (string) constant.Or if you want to detect the OS of the client:From http://us3.php.net/manual/en/function.get-browser.phpAccording to your edit you can refer to this dublicate PHP Server Name from Command LineYou can useSoWould do the trick for you, see here http://php.net/manual/en/function.php-uname.phpTo detect whether it's Windows, OS X or Linux:stripos is a bit slower than substr in this particular case, yet it's efficient enough for such a small task, and more elegant.Starting with PHP 7.2.0 you can detect the running O.S. using the constant PHP_OS_FAMILY:See the official PHP documentation for its possible values.You can check if a constant exists in PHP >5.3.0 (manual)Previously, this method was used in Symfony. Now they use a different method:If you want to check if running under Linux, just test if (PHP_OS === 'Linux'). No need to use strtolower() and substr().From http://www.php.net/manual/en/reserved.variables.server.php#102162 :This is the entire $_SERVER array... as ArtWorkAD has noted, by using the HTTP_USER_AGENT key, you can extract the OS more explicitly.

In php, is 0 treated as empty?

mysqllearner

[In php, is 0 treated as empty?](https://stackoverflow.com/questions/2220519/in-php-is-0-treated-as-empty)

Code will explain more:The result returns "Its empty". I thought empty() will check if I already set the variable and have value inside. Why it returns "Its empty"??

2010-02-08 09:16:09Z

Code will explain more:The result returns "Its empty". I thought empty() will check if I already set the variable and have value inside. Why it returns "Its empty"??http://php.net/emptyNote that this is exactly the same list as for a coercion to Boolean false. empty is simply !isset($var) || !$var. Try isset instead.I was wondering why nobody suggested the extremely handy Type comparison table. It answers every question about the common functions and compare operators.A snippet:Along other cheatsheets, I always keep a hardcopy of this table on my desk in case I'm not sureIn case of numeric values you should use is_numeric function:Use strlen() instead.

I ran onto the same issue using 1/0 as possible values for some variables.

I am using if (strlen($_POST['myValue']) == 0) to test if there is a character or not in my variable.I was recently caught with my pants down on this one as well.  The issue we often deal with is unset variables - say a form element that may or may not have been there, but for many elements, 0 (or the string '0' which would come through the post more accurately, but still would be evaluated as "falsey") is a legitimate value say on a dropdown list.using empty() first and then strlen() is your best best if you need this as well, as:From a linguistic point of view empty has a meaning of without value. Like the others said you'll have to use isset() in order to check if a variable has been defined, which is what you do.empty() returns true for everything that evaluates to FALSE, it is actually a 'not' (!) in disguise. I think you meant isset()To accept 0 as a value in variable use issetCheck if variable is emptyCheck if variable is setIt 's working for me!The following things are considered to be empty:From PHP Manual In your case $var is 0, so empty($var) will return true, you are negating the result before testing it, so the else block will run giving "Its empty" as output.From manual:

Returns FALSE if var has a non-empty and non-zero value.The following things are considered to be empty:More: http://php.net/manual/en/function.empty.phpIn my case this code worked.Actually isset just check if the variable sets or not.In this case if you want to check if your variable is really zero or empty you can use this example:just for notice $myVar==0 act like empty function.empty should mean empty .. whatever deceze says.                        When I do     I expect that var_dump(empty($var)); will return false.if you are checking things in an array you always have to do isset($var) first.use only ($_POST['input_field_name'])!=0 instead of !($_POST['input_field_name'])==0 then 0 is not treated as empty.Not sure if there are still people looking for an explanation and a solution. The comments above say it all on the differences between TRUE / FALSE / 1 / 0.

I would just like to bring my 2 cents for the way to display the actual value.If you're working with a Boolean datatype, you're looking for a TRUE vs. FALSE result; if you store it in MySQL, it will be stored as 1 resp. 0 (if I'm not mistaking, this is the same in your server's memory).So to display the the value in PHP, you need to check if it is true (1) or false (0) and display whatever you want: "TRUE" or "FALSE" or possibly "1" or "0".

Attention, everything bigger (or different) than 0 will also be considered as TRUE in PHP. E.g.: 2, "abc", etc. will all return TRUE.

If you're working with a number datatype, the way it is stored is the same.

To display the value, you need to tell PHP to handle it as a number. The easiest way I found is to multiply it by 1.proper example. just create int type field( example mobile number) in the database and submit an blank value for the following database through a form or just insert using SQL. what it will be saved in database 0 because it is int type and cannot be saved as blank or null. therefore it is empty but it will be saved as 0. so when you fetch data through PHP and check for the empty values. it is very useful and logically correct. 0.00, 0.000, 0.0000 .... 0.0...0 is also empty and the above example can also be used for storing different type of values in database like float, double, decimal( decimal have different variants like 0.000 and so on. You need to use isset() to check whether value is set. 

Performance of foreach, array_map with lambda and array_map with static function

Pavel S.

[Performance of foreach, array_map with lambda and array_map with static function](https://stackoverflow.com/questions/18144782/performance-of-foreach-array-map-with-lambda-and-array-map-with-static-function)

What's the performance difference (if there is any) between these three approaches, both used to transform an array to another array?To make myself clear, let's have look at the examples, all doing the same - multiplying the array of numbers by 10:ForeachMap with lambdaMap with 'static' function, passed as string referenceIs there any other approach? I will be happy to hear actually all differences between the cases from above, and any inputs why one should be used instead of others.

2013-08-09 10:35:01Z

What's the performance difference (if there is any) between these three approaches, both used to transform an array to another array?To make myself clear, let's have look at the examples, all doing the same - multiplying the array of numbers by 10:ForeachMap with lambdaMap with 'static' function, passed as string referenceIs there any other approach? I will be happy to hear actually all differences between the cases from above, and any inputs why one should be used instead of others.FWIW, I just did the benchmark since poster didn't do it. Running on PHP 5.3.10 + XDebug. UPDATE 2015-01-22 compare with mcfedr's answer below for additional results without XDebug and a more recent PHP version.I get pretty consistent results with 1M numbers across a dozen attempts:Supposing the lackluster speed of the map on closure was caused by the closure possibly being evaluated each time, I also tested like this:But the results are identical, confirming that the closure is only evaluated once.2014-02-02 UPDATE: opcodes dumpHere are the opcode dumps for the three callbacks. First useForeach():Then the useMapClosure()and the closure it calls:then the useMapNamed() function:and the named function it calls, _tenTimes():Its interesting to run this benchmark with xdebug disabled, as xdebug adds quite a lot of overhead, esp to function calls.This is FGM's script run using 5.6

With xdebugWithout xdebugHere there is only a very small difference between the foreach and closure version.Its also interesting to add a version with a closure with a useFor comparison I add:Here we can see it makes an impact on the closure version, whereas the array hasn't noticeably changed.19/11/2015 I have also now added results using PHP 7 and HHVM for comparison. The conclusions are similar, though everything is much faster.It's interesting. But I've got an opposite result with the following codes which are simplified from my current projects:Here is my testing data and codes:The result is:My tests were in LAMP production environment without xdebug. 

I'am wandering xdebug would slow down array_map's performance.

How to get everything after a certain character?

user1048676

[How to get everything after a certain character?](https://stackoverflow.com/questions/11405493/how-to-get-everything-after-a-certain-character)

I've got a string and I'd like to get everything after a certain value. The string always starts off with a set of numbers and then an underscore. I'd like to get the rest of the string after the underscore. So for example if I have the following strings and what I'd like returned:How can I go about doing something like this?

2012-07-10 01:35:19Z

I've got a string and I'd like to get everything after a certain value. The string always starts off with a set of numbers and then an underscore. I'd like to get the rest of the string after the underscore. So for example if I have the following strings and what I'd like returned:How can I go about doing something like this?The strpos() finds the offset of the underscore, then substr grabs everything from that index plus 1, onwards.If you also want to check if the underscore character (_) exists in your string before trying to get it, you can use the following:strtok is an overlooked function for this sort of thing. It is meant to be quite fast.Empty string like this will force the rest of the string to be returned.NB if there was nothing at all after the '_' you would get a FALSE value for $allTheRest which, as stated in the documentation, must be tested with ===, to distinguish from other falsy values.Here is the method by using explode:or:By specifying 2 for the limit parameter in explode(), it returns array with 2 maximum elements separated by the string delimiter. Returning 2nd element ([1]), will give the rest of string.Here is another one-liner by using strpos (as suggested by @flu):if anyone needs to extract the first part of the string then can try,Query:Output:This_is_a_stringAnother simple way, using strchr() or strstr():In a single statement it would be.

Remove a string from the beginning of a string

Alex

[Remove a string from the beginning of a string](https://stackoverflow.com/questions/4517067/remove-a-string-from-the-beginning-of-a-string)

I have a string that looks like this:How can I remove the first bla_; but only if it's found at the beginning of the string?With str_replace(), it removes all bla_'s.

2010-12-23 08:40:40Z

I have a string that looks like this:How can I remove the first bla_; but only if it's found at the beginning of the string?With str_replace(), it removes all bla_'s.Plain form, without regex:Takes: 0.0369 ms (0.000,036,954 seconds)And with:Takes: 0.1749 ms (0.000,174,999 seconds) the 1st run (compiling), and 0.0510 ms (0.000,051,021 seconds) after.Profiled on my server, obviously.You can use regular expressions with the caret symbol (^) which anchors the match to the beginning of the string:Here.I think substr_replace does what you want, where you can limit your replace to part of your string:

http://nl3.php.net/manual/en/function.substr-replace.php (This will enable you to only look at the beginning of the string.)You could use the count parameter of str_replace ( http://nl3.php.net/manual/en/function.str-replace.php ), this will allow you to limit the number of replacements, starting from the left, but it will not enforce it to be at the beginning.A general version:Some benchmarks:On my quite old home PC:Outputs:Here's an even faster approach:This will remove first match wherever it is found i.e., start or middle or end.str_replace ( mixed $search , mixed $replace , mixed $subject [, int &$count ] )now does what you want.Remove www. from beginning of string, this is the easiest way (ltrim)

Highlight the difference between two strings in PHP

Philip Morton

[Highlight the difference between two strings in PHP](https://stackoverflow.com/questions/321294/highlight-the-difference-between-two-strings-in-php)

What is the easiest way to highlight the difference between two strings in PHP?I'm thinking along the lines of the Stack Overflow edit history page, where new text is in green and removed text is in red. If there are any pre-written functions or classes available, that would be ideal.

2008-11-26 16:21:32Z

What is the easiest way to highlight the difference between two strings in PHP?I'm thinking along the lines of the Stack Overflow edit history page, where new text is in green and removed text is in red. If there are any pre-written functions or classes available, that would be ideal.You can use the PHP Horde_Text_Diff package. It suits your needs, and is quite customisable as well.It's also licensed under the GPL, so Enjoy!Just wrote a class to compute smallest (not to be taken literally) number of edits to transform one string into another string:http://www.raymondhill.net/finediff/It has a static function to render a HTML version of the diff.It's a first version, and likely to be improved, but it works just fine as of now, so I am throwing it out there in case someone needs to generate a compact diff efficiently, like I needed.Edit: It's on Github now:

https://github.com/gorhill/PHP-FineDiffIf you want a robust library, Text_Diff (a PEAR package) looks to be pretty good.  It has some pretty cool features.This is a nice one, also

http://paulbutler.org/archives/a-simple-diff-algorithm-in-php/Here is a short function you can use to diff two arrays. It implements the LCS algorithm:It generates two arrays: If you populate an array with characters, it can be used to compute inline difference. Now just a single step to highlight the differences:Eg.:Will output:StackOerverfFaulowt Additional notes:There is also a PECL extension for xdiff:In particular:Example from PHP Manual:I had terrible trouble with the both the PEAR-based and the simpler alternatives shown. So here's a solution that leverages the Unix diff command (obviously, you have to be on a Unix system or have a working Windows diff command for it to work). Choose your favourite temporary directory, and change the exceptions to return codes if you prefer.This is the best one I've found.http://code.stephenmorley.org/php/diff-implementation/What you are looking for is a "diff algorithm".  A quick google search led me to this solution.  I did not test it, but maybe it will do what you need.A php port of Neil Frasers diff_match_patch (Apache 2.0 licensed)I would recommend looking at these awesome functions from PHP core:similar_text — Calculate the similarity between two stringshttp://www.php.net/manual/en/function.similar-text.phplevenshtein — Calculate Levenshtein distance between two stringshttp://www.php.net/manual/en/function.levenshtein.phpsoundex — Calculate the soundex key of a stringhttp://www.php.net/manual/en/function.soundex.phpmetaphone — Calculate the metaphone key of a stringhttp://www.php.net/manual/en/function.metaphone.phpI came across this PHP diff class by Chris Boulton based on Python difflib which could be a good solution:PHP Diff LibAnother solution (for side-by-side comparison as opposed to a unified view): https://github.com/danmysak/side-by-side.

How to debug PDO database queries?

Nathan Long

[How to debug PDO database queries?](https://stackoverflow.com/questions/2411182/how-to-debug-pdo-database-queries)

Before moving to PDO, I created SQL queries in PHP by concatenating strings. If I got database syntax error, I could just echo the final SQL query string, try it myself on the database, and tweak it until I fixed the error, then put that back into the code.Prepared PDO statements are faster and better and safer, but one thing bothers me: I never see the final query as it's sent to the database. When I get errors about the syntax in my Apache log or my custom log file (I log errors inside a catch block), I can't see the query that caused them.Is there a way capture the complete SQL query sent by PDO to the database and log it to a file?

2010-03-09 17:43:23Z

Before moving to PDO, I created SQL queries in PHP by concatenating strings. If I got database syntax error, I could just echo the final SQL query string, try it myself on the database, and tweak it until I fixed the error, then put that back into the code.Prepared PDO statements are faster and better and safer, but one thing bothers me: I never see the final query as it's sent to the database. When I get errors about the syntax in my Apache log or my custom log file (I log errors inside a catch block), I can't see the query that caused them.Is there a way capture the complete SQL query sent by PDO to the database and log it to a file?You say this :Well, actually, when using prepared statements, there is no such thing as a "final query" :

So, to answer your question :No : as there is no "complete SQL query" anywhere, there is no way to capture it.

The best thing you can do, for debugging purposes, is "re-construct" an "real" SQL query, by injecting the values into the SQL string of the statement.What I usually do, in this kind of situations, is :This is not great, when it comes to debugging -- but that's the price of prepared statements and the advantages they bring.Although Pascal MARTIN is correct that PDO doesn't send the complete query to the database all at once, ryeguy's suggestion to use the DB's logging function actually allowed me to see the complete query as assembled and executed by the database.Here's how:

(These instructions are for MySQL on a Windows machine - your mileage may vary)That file will grow quickly, so be sure to delete it and turn off logging when you're done testing.Sure you can debug using this mode {{ PDO::ATTR_ERRMODE }}

Just add new line before your query then you will show the debug lines.Probably what you want to do is use debugDumParams()

It doesn't build the prepared statement for you, but it will show your parameters.An old post but perhaps someone will find this useful;Here's a function to see what the effective SQL will be, adpated from a comment by "Mark" at php.net:No. PDO queries are not prepared on the client side. PDO simply sends the SQL query and the parameters to the database server. The database is what does the substitution (of the ?'s). You have two options:  almost nothing was said about error displaying except check error logs,

but there's a rather helpful functionality:(source link)it is clear that this code can be modified to be used as exception message 

or any other kind of error handlingfor example you have this pdo statement :now you can get the executed query by defining an array like this :Searching internet I found this as an acceptable solution. A different class is used instead of PDO and PDO functions are called through magic function calls. I am not sure this creates serious performance problems. But it can be used until a sensible logging feature is added to PDO.So as per this thread, you can write a wrapper for your PDO connection which can log and throws an exception when you get a error.Here is simple example:so you can use that class instead of PDOStatement:Here a mentioned PDO decorator implementation:To log MySQL in WAMP, you will need to edit the my.ini (e.g. under wamp\bin\mysql\mysql5.6.17\my.ini)and add to [mysqld]:Here is a function I made to return a SQL query with "resolved" parameters.Assuming you execute like thisThis function DOES NOT add quotes to queries but does the job for me.The problem I had with the solution to catch PDO exemptions for debuging purposes is that it only caught PDO exemptions (duh), but didn't catch syntax errors which were registered as php errors (I'm not sure why this is, but "why" is irrelevant to the solution). All my PDO calls come from a single table model class that I extended for all my interactions with all tables... this complicated things when I was trying to debug code, because the error would register the line of php code where my execute call was called, but didn't tell me where the call was, actually, being made from. I used the following code to solve this problem:So, the above code catches BOTH PDO exceptions AND php syntax errors and treats them the same way. My error handler looks something like this:If anyone has any better ideas on how to get relevant info to my error handler than setting the table model as a global variable, I would be happy to hear it and edit my code.this code works great for me :Don't forget to replace $data and $query by your namesi use this class to debug PDO (with Log4PHP)I've created a modern Composer-loaded project / repository for exactly this here:Find the project's GitHub home here, see a blog post explaining it here. One line to add in your composer.json, and then you can use it like this:$sql is the raw SQL statement, $parameters is an array of your parameters: The key is the placeholder name (":user_id") or the number of the unnamed parameter ("?"), the value is .. well, the value.The logic behind: This script will simply grad the parameters and replace them into the SQL string provided. Super-simple, but super-effective for 99% of your use-cases. Note: This is just a basic emulation, not a real PDO debugging (as this is not possible as PHP sends raw SQL and parameters to the MySQL server seperated).A big thanks to bigwebguy and Mike from the StackOverflow thread Getting raw SQL query string from PDO for writing basically the entire main function behind this script. Big up!TL;DR Log all your queries and tail the mysql log.These directions are for my install of Ubuntu 14.04. Issue command lsb_release -a to get your version. Your install might be different. Nice work! You’re all set. Now all you have to do is tail the log file so you can see the PDO queries your app makes in real time.Enter this cmd tail -f /var/log/mysql/mysql.log.Your output will look something like this:Any new queries your app makes will automatically pop into view, as long as you continue tailing the log. To exit the tail, hit cmd/ctrl c.Huge shout out to Nathan Long’s answer above for the inspo to figure this out on Ubuntu. Also to dikirill for his comment on Nathan’s post which lead me to this solution.Love you stackoverflow! In Debian NGINX environment i did the following.Goto /etc/mysql/mysql.conf.d edit mysqld.cnf if you find log-error = /var/log/mysql/error.log add the following 2 lines bellow it.To see the logs goto /var/log/mysql and  tail -f mysql.logRemember to comment these lines out once you are done with debugging if you are in production environment delete mysql.log as this log file will grow quickly and can be huge.

Sanitizing strings to make them URL and filename safe?

Xeoncross

[Sanitizing strings to make them URL and filename safe?](https://stackoverflow.com/questions/2668854/sanitizing-strings-to-make-them-url-and-filename-safe)

I am trying to come up with a function that does a good job of sanitizing certain strings so that they are safe to use in the URL (like a post slug) and also safe to use as file names. For example, when someone uploads a file I want to make sure that I remove all dangerous characters from the name.So far I have come up with the following function which I hope solves this problem and allows foreign UTF-8 data also.Does anyone have any tricky sample data I can run against this - or know of a better way to safeguard our apps from bad names?$is-filename allows some additional characters like temp vim filesupdate: removed the star character since I could not think of a valid use

2010-04-19 15:51:44Z

I am trying to come up with a function that does a good job of sanitizing certain strings so that they are safe to use in the URL (like a post slug) and also safe to use as file names. For example, when someone uploads a file I want to make sure that I remove all dangerous characters from the name.So far I have come up with the following function which I hope solves this problem and allows foreign UTF-8 data also.Does anyone have any tricky sample data I can run against this - or know of a better way to safeguard our apps from bad names?$is-filename allows some additional characters like temp vim filesupdate: removed the star character since I could not think of a valid useSome observations on your solution:You probably shouldn't include accented etc. characters in your post slug since, technically, they should be percent encoded (per URL encoding rules) so you'll have ugly looking URLs.So, if I were you, after lowercasing, I'd convert any 'special' characters to their equivalent  (e.g. é -> e) and replace non [a-z] characters with '-', limiting to runs of a single '-' as you've done. There's an implementation of converting special characters here: https://web.archive.org/web/20130208144021/http://neo22s.com/slugOWASP have a PHP implementation of their Enterprise Security API which among other things includes methods for safe encoding and decoding input and output in your application. The Encoder interface provides:https://github.com/OWASP/PHP-ESAPI

https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_APII found this larger function in the Chyrp code:and this one in the wordpress codeAlix Axel has done some incredible work in this area. His phunction framework includes several great text filters and transformations.This should make your filenames safe...and a deeper solution to this is:This assumes that you want a dot in the filename.

if you want it transferred to lowercase, just usefor the last line.Try this:Based on the selected answer in this thread: URL Friendly Username in PHP?This isn't exactly an answer as it doesn't provide any solutions (yet!), but it's too big to fit on a comment...I did some testing (regarding file names) on Windows 7 and Ubuntu 12.04 and what I found out was that:1. PHP Can't Handle non-ASCII FilenamesAlthough both Windows and Ubuntu can handle Unicode filenames (even RTL ones as it seems) PHP 5.3 requires hacks to deal even with the plain old ISO-8859-1, so it's better to keep it ASCII only for safety.2. The Lenght of the Filename Matters (Specially on Windows)On Ubuntu, the maximum length a filename can have (incluinding extension) is 255 (excluding path):However, on Windows 7 (NTFS) the maximum lenght a filename can have depends on it's absolute path:Wikipedia says that:To the best of my knowledge (and testing), this is wrong.In total (counting slashes) all these examples have 259 chars, if you strip the C:\ that gives 256 characters (not 255?!). The directories where created using the Explorer and you'll notice that it restrains itself from using all the available space for the directory name. The reason for this is to allow the creation of files using the 8.3 file naming convention. The same thing happens for other partitions.Files don't need to reserve the 8.3 lenght requirements of course:You can't create any more sub-directories if the absolute path of the parent directory has more than 242 characters, because 256 = 242 + 1 + \ + 8 + . + 3. Using Windows Explorer, you can't create another directory if the parent directory has more than 233 characters (depending on the system locale), because 256 = 233 + 10 + \ + 8 + . + 3; the 10 here is the length of the string New folder.Windows file system poses a nasty problem if you want to assure inter-operability between file systems.3. Beware of Reserved Characters and KeywordsAside from removing non-ASCII, non-printable and control characters, you also need to re(place/move):Just removing these characters might not be the best idea because the filename might lose some of it's meaning. I think that, at the very least, multiple occurences of these characters should be replaced by a single underscore (_), or perhaps something more representative (this is just an idea):There are also special keywords that should be avoided (like NUL), although I'm not sure how to overcome that. Perhaps a black list with a random name fallback would be a good approach to solve it.4. Case SensitivenessThis should go without saying, but if you want so ensure file uniqueness across different operating systems you should transform file names to a normalized case, that way my_file.txt and My_File.txt on Linux won't both become the same my_file.txt file on Windows.5. Make Sure It's UniqueIf the file name already exists, a unique identifier should be appended to it's base file name.Common unique identifiers include the UNIX timestamp, a digest of the file contents or a random string.6. Hidden FilesJust because it can be named doesn't mean it should...Dots are usually white-listed in file names but in Linux a hidden file is represented by a leading dot.7. Other ConsiderationsIf you have to strip some chars of the file name, the extension is usually more important than the base name of the file. Allowing a considerable maximum number of characters for the file extension (8-16) one should strip the characters from the base name. It's also important to note that in the unlikely event of having a more than one long extension - such as _.graphmlz.tag.gz - _.graphmlz.tag only _ should be considered as the file base name in this case.8. ResourcesCalibre handles file name mangling pretty decently:Wikipedia page on file name mangling and linked chapter from Using Samba.If for instance, you try to create a file that violates any of the rules 1/2/3, you'll get a very useful error:I've always thought Kohana did a pretty good job of it.The handy UTF8::transliterate_to_ascii() will turn stuff like ñ => n.Of course, you could replace the other UTF8::* stuff with mb_* functions.In terms of file uploads, you would be safest to prevent the user from controlling the file name.  As has already been hinted at, store the canonicalised filename in a database along with a randomly chosen and unique name which you'll use as the actual filename.Using OWASP ESAPI, these names could be generated thus:You could append a timestamp to the $safeFilename to help ensure that the randomly generated filename is unique without even checking for an existing file.In terms of encoding for URL, and again using ESAPI:This method performs canonicalisation before encoding the string and will handle all character encodings.I recommend* URLify for PHP (480+ stars on Github) - "the PHP port of URLify.js from the Django project. Transliterates non-ascii characters for use in URLs".Basic usage:To generate slugs for URLs:To generate slugs for file names:*None of the other suggestions matched my criteria:As a bonus, URLify also removes certain words and strips away all characters not transliterated. Here is a test case with tons of foreign characters being transliterated properly using URLify: https://gist.github.com/motin/a65e6c1cc303e46900d10894bf2da87fI have adapted from another source and added a couple extra, maybe a little overkilland this is Joomla 3.3.2 version from JFile::makeSafe($file)I don't think having a list of chars to remove is safe. I would rather use the following:For filenames: Use an internal ID or a hash of the filecontent. Save the document name in a database. This way you can keep the original filename and still find the file.For url parameters: Use urlencode() to encode any special characters.Depending on how you will use it, you might want to add a length limit to protect against buffer overflows.This is a nice way to secure an upload filename:Here's CodeIgniter's implementation.And the remove_invisible_characters dependency.why not simply use php's urlencode? it replaces "dangerous" characters with their hex representation for urls (i.e. %20 for a space)There are already several solutions provided for this question but I have read and tested most of the code here and I ended up with this solution which is a mix of what I learned here:The function is bundled here in a Symfony2 bundle but it can be extracted to be used as plain PHP, it only has a dependency with the iconv function that must be enabled:Filesystem.php:What is interesting is that I have created PHPUnit tests, first to test edge cases and so you can check if it fits your needs:

(If you find a bug, feel free to add a test case)FilesystemTest.php:The test results: (checked on Ubuntu with PHP 5.3.2 and MacOsX with PHP 5.3.17:I have entry titles with all kinds of weird latin characters as well as some HTML tags that I needed to translate into a useful dash-delimited filename format. I combined @SoLoGHoST's answer with a couple of items from @Xeoncross's answer and customized a bit.I needed to manually add the em dash character (—) to the translation array. There may be others but so far my file names are looking good.So:Part 1: My dad’s「Žurburts」?—they’re (not) the best!becomes:part-1-my-dads-zurburts-theyre-not-the-bestI just add ".html" to the returned string.For transliteration of "almost every single language on the planet Earth" to ASCII characters.This line is core:Answer based on this post.Pretty good job is done in transliteration module for CMS Drupal. It supports almost every single language on the planet Earth. I suggest to check plugin repository if you want to have really complete solution sanitizing strings.This post seems to work the best among all that I have tied. http://gsynuh.com/php-string-filename-url-safe/205This is a good function:This is the code used by Prestashop to sanitize urls :is used by to remove diacriticsThere is 2 good answers to slugfy your data, use it https://stackoverflow.com/a/3987966/971619 or it https://stackoverflow.com/a/7610586/971619

How can I force users to access my page over HTTPS instead of HTTP?

Adam Rosenfield

[How can I force users to access my page over HTTPS instead of HTTP?](https://stackoverflow.com/questions/85816/how-can-i-force-users-to-access-my-page-over-https-instead-of-http)

I've got just one page that I want to force to be accessed as an HTTPS page (PHP on Apache). How do I do this without making the whole directory require HTTPS? Or, if you submit a form to an HTTPS page from an HTTP page, does it send it by HTTPS instead of HTTP?Here is my example:I want it to only be accessed through:Sure, I can put all of the links to this page pointed at the HTTPS version, but that doesn't stop some fool from accessing it through HTTP on purpose...One thing I thought was putting a redirect in the header of the PHP file to check to be sure that they are accessing the HTTPS version:But that can't be the right way, can it?BTW, please pay no attention to the URL. I know that if it were actually a page where there was a shopping cart, etc., you would do it a different way. Think of it as a page from a site that sells one item for one price where you type in your credit card info to be submitted to a payment gateway on an external site for the express purpose of charging your card one time.

2008-09-17 17:56:15Z

I've got just one page that I want to force to be accessed as an HTTPS page (PHP on Apache). How do I do this without making the whole directory require HTTPS? Or, if you submit a form to an HTTPS page from an HTTP page, does it send it by HTTPS instead of HTTP?Here is my example:I want it to only be accessed through:Sure, I can put all of the links to this page pointed at the HTTPS version, but that doesn't stop some fool from accessing it through HTTP on purpose...One thing I thought was putting a redirect in the header of the PHP file to check to be sure that they are accessing the HTTPS version:But that can't be the right way, can it?BTW, please pay no attention to the URL. I know that if it were actually a page where there was a shopping cart, etc., you would do it a different way. Think of it as a page from a site that sells one item for one price where you type in your credit card info to be submitted to a payment gateway on an external site for the express purpose of charging your card one time.The way I've done it before is basically like what you wrote, but doesn't have any hardcoded values:You could do it with a  directive and mod_rewrite on Apache:You could make the Location smarter over time using regular expressions if you want. You should force the client to request HTTPS always with HTTP Strict Transport Security (HSTS) headers:Please note that HSTS is supported in most modern browsers, but not universal. Thus the logic above manually redirects the user regardless of support if they end up on HTTP, and then sets the HSTS header so that further client requests should be redirected by the browser if possible.I just created a .htaccess file and added :Simple !Had to do something like this when running behind a load balancer. Hat tip https://stackoverflow.com/a/16076965/766172The PHP way:The Apache mod_rewrite way:http://www.besthostratings.com/articles/force-ssl-htaccess.htmlSometimes you may need to make sure that the user is browsing your site over securte connection. An easy to way to always redirect the user to secure connection (https://) can be accomplished with a .htaccess file containing the following lines:Please, note that the .htaccess should be located in the web site main folder.In case you wish to force HTTPS for a particular folder you can use:The .htaccess file should be placed in the folder where you need to force HTTPS.Ok.. Now there is tons of stuff on this now but no one really completes the 

"Secure" question.  For me it is rediculous to use something that is insecure.Unless you use it as bait. $_SERVER propagation can be changed at the will of someone who knows how.Also as Sazzad Tushar Khan and the thebigjc stated you can also use httaccess to do this and there are a lot of answers here containing it.

Just add:to the end of what you have in your .httaccess and thats that.Still we are not as secure as we possibly can be with these 2 tools.The rest is simple. If there are missing attributes ie...Also say you have updated your httaccess file and you check:There are a lot more variables you can check ie.. HOST_URI (If there are static atributes about it to check)HTTP_USER_AGENT (Same session different values)So all Im saying is dont just settle for one or the other when the answer lies in a combination.

For more httaccess rewriting info see the docs-> http://httpd.apache.org/docs/2.0/misc/rewriteguide.html

Some Stacks here -> Force SSL/https using .htaccess and mod_rewrite

and

Getting the full URL of the current page (PHP)

to name a couple.Use $_SERVER['HTTPS'] to tell if it is SSL, and redirect to the right place if not.And remember, the page that displays the form does not need to be fed via HTTPS, it's the post back URL that needs it most.Edit: yes, as is pointed out below, it's best to have the entire process in HTTPS. It's much more reassuring - I was pointing out that the post is the most critical part.  Also, you need to take care that any cookies are set to be secure, so they will only be sent via SSL. The mod_rewrite solution is also very nifty, I've used it to secure a lot of applications on my own website.use htaccess:Don't mix HTTP and HTTPS on the same page. If you have a form page that is served up via HTTP, I'm going to be nervous about submitting data -- I can't see if the submit goes over HTTPS or HTTP without doing a View Source and hunting for it.Serving up the form over HTTPS along with the submit link isn't that heavy a change for the advantage.If you use Apache or something like LiteSpeed, which supports .htaccess files, you can do the following.

If you don't already have a .htaccess file, you should create a new .htaccess file in your root directory (usually where your index.php is located). Now add these lines as the first rewrite rules in your .htaccess:You only need the instruction "RewriteEngine On" once in your .htaccess for all rewrite rules, so if you already have it, just copy the second and third line.I hope this helps.Using this is NOT enough:If you have any http content (like an external http image source), the browser will detect a possible threat. So be sure all your ref and src inside your code are httpsFor those using IIS adding this line in the web.config will help:A full example fileYou shouldn't for security reasons. Especially if cookies are in play here. It leaves you wide open to cookie-based replay attacks. Either way, you should use Apache control rules to tune it.Then you can test for HTTPS being enabled and redirect as-needed where needed. You should redirect to the pay page only using a FORM POST (no get), 

and accesses to the page without a POST should be directed back to the other pages. 

(This will catch the people just hot-jumping.) http://joseph.randomnetworks.com/archives/2004/07/22/redirect-to-ssl-using-apaches-htaccess/Is a good place to start, apologies for not providing more. But you really should shove everything through SSL.It's over-protective, but at least you have less worries. I have been through many solutions with checking the status of $_SERVER[HTTPS]  but seems like it is not reliable because sometimes it does not set or set to on, off, etc. causing the script to internal loop redirect.Here is the most reliable solution if your server supports $_SERVER[SCRIPT_URI]Please note that depending on your installation, your server might not support $_SERVER[SCRIPT_URI] but if it does, this is the better script to use.You can check here: Why do some PHP installations have $_SERVER['SCRIPT_URI'] and others notmaybe this one can help, you, that's how I did for my website, it works like a charm :I have used this script and it works well through the site.That easy.

Replacing Spaces with Underscores

alex

[Replacing Spaces with Underscores](https://stackoverflow.com/questions/6431051/replacing-spaces-with-underscores)

I have a PHP Script that users will enter a name like: Alex_Newton,However, some users will use a space rather than an underscore, so my question is:How do I auto-replace spaces with Underscores in PHP?

2011-06-21 19:40:42Z

I have a PHP Script that users will enter a name like: Alex_Newton,However, some users will use a space rather than an underscore, so my question is:How do I auto-replace spaces with Underscores in PHP?As of others have explained how to do it using str_replace, you can also use regex to achieve this.http://php.net/manual/en/function.str-replace.phpUse str_replace function of PHP.Something like:Call http://php.net/str_replace: $input = str_replace(' ', '_', $input);Use str_replace:You can also do this to prevent the words from beginning or ending with underscores like _words_more_words_,  This would avoid beginning and ending with white spaces.This is part of my code which makes spaces into underscores for naming my files:I used like thisStrtr replaces single characters instead of strings, so it's a good solution for this example.  Supposedly strtr is faster than str_replace (but for this use case they're both immeasurably fast).  you can use str_replace  say your name is in variable $nameanother way is to use regex, as it will help to eliminate 2-time space etc.

What is an .inc and why use it?

dpp

[What is an .inc and why use it?](https://stackoverflow.com/questions/7129842/what-is-an-inc-and-why-use-it)

I often see examples in PHP that include.inc files. What is the meaning of .inc? What it is used for? What are the disadvantages and advantages of using it?

2011-08-20 05:15:21Z

I often see examples in PHP that include.inc files. What is the meaning of .inc? What it is used for? What are the disadvantages and advantages of using it?It has no meaning, it is just a file extension. It is some people's convention to name files with a .inc extension if that file is designed to be included by other PHP files, but it is only convention. It does have a possible disadvantage which is that servers normally are not configured to parse .inc files as php, so if the file sits in your web root and your server is configured in the default way, a user could view your php source code in the .inc file by visiting the URL directly.Its only possible advantage is that it is easy to identify which files are used as includes. Although simply giving them a .php extension and placing them in an includes folder has the same effect without the disadvantage mentioned above.If you are concerned about the file's content being served rather than its output. You can use a double extension like: file.inc.php. It then serves the same purpose of helpfulness and maintainability.I normally have 2 php files for each page on my site:EDIT: Another benefit of using the double extention .inc.php would be that any IDE can still recognise the file as PHP code.Generally means that its a file that needs to be included and does not make standalone script in itself.This is a convention not a programming technique.Although if your web server is not configured properly it could expose files with extensions like .inc.It's just a way for the developer to be able to easily identify files which are meant to be used as includes. It's a popular convention. It does not have any special meaning to PHP, and won't change the behaviour of PHP or the script itself.This is a convention that programmer usually use to identify different file names for include files. So that if the other developers is working on their code, he can easily identify why this file is there and what is purpose of this file by just seeing the name of the file. Just to add. Another disadvantage would be, .inc files are not recognized by IDE thus, you could not take advantage of auto-complete or code prediction features.In my opinion, these were used as a way to quickly find include files when developing. Really these have been made obsolete with conventions and framework designs. Note that

You can configure Apache so that all files With .inc extension are forbidden to be retrieved by visiting URL directly.see link:https://serverfault.com/questions/22577/how-to-deny-the-web-access-to-some-files 

Checking if array is multidimensional or not?

Wilco

[Checking if array is multidimensional or not?](https://stackoverflow.com/questions/145337/checking-if-array-is-multidimensional-or-not)

2008-09-28 06:23:12Z

The short answer is no you can't do it without at least looping implicitly if the 'second dimension' could be anywhere. If it has to be in the first item, you'd just do But, the most efficient general way I could find is to use a foreach loop on the array, shortcircuiting whenever a hit is found (at least the implicit loop is better than the straight for()):Implicit looping, but we can't shortcircuit as soon as a match is found...Use count() twice; one time in default mode and one time in recursive mode. If the values match, the array is not multidimensional, as a multidimensional array would have a higher recursive count.This option second value mode was added in PHP 4.2.0. From the PHP Docs:However this method does not detect array(array()).For PHP 4.2.0 or newer:I think this is the most straight forward way and it's state-of-the-art:You can simply execute this: If the optional mode parameter is set to COUNT_RECURSIVE (or 1), count() will recursively count the array. This is particularly useful for counting all the elements of a multidimensional array.If it's the same, means there are no sublevels anywhere. Easy and fast!You could look check is_array() on the first element, under the assumption that if the first element of an array is an array, then the rest of them are too.All great answers... here's my three lines that I'm always usingThis function will return int number of array dimensions (stolen from here).I think you will find that this function is the simplest, most efficient, and fastest way.You can test it like this:You can also do a simple check like this:Try as follows Don't use COUNT_RECURSIVEclick this site for know whyuse rsort and then use issetIn my case. I stuck in vary strange condition.

1st case = array("data"=> "name");

2nd case = array("data"=> array("name"=>"username","fname"=>"fname"));

But if data has array instead of value then sizeof() or count() function not work for this condition. Then i create custom function to check.

If first index of array have value then it return "only value" 

But if index have array instead of value then it return "has array" 

I use this waySpecial thanks to Vinko VrsalovicI think this one is classy (props to another user I don't know his username):All the above methods are too complex for quick rolling out. If an array is flat, testing the first element should return a primitive e.g int, string e.t.c. If it is multidimensional, it should return an array. By extension, you can use this one liner fast and neat.if this returns true, the array is multidimensional. Else it is flat. Just to note, it is very rare for arrays to have different dimensions e.g. if you are generating data from a model, it will always have the same type of multidimensional or flat structure that can be traversed by loops. 

If it isn't, then you have custom built it by hand, which means you know where everything will be and it just works without needing to write a looping algorithm

In addition to the previous answers and depending on the schema of the array you want to check:Even this worksIf false its a single dimension array if true its a multi dimension array.current will give you the first element of your array and check if the first element is an array or not by is_array function.Its as simple as Here is a nice one liner. It iterates over every key to check if the value at that key is an array. This will ensure true 

*only to those arrays with numeric index 

The native print_r function returns a human-readable string. Just count the "Array" instances.try...On my box, "is_multi took 0.83681297302246 seconds in 500000 times"Courtesy: Ruach HaKodeshNo loops, plain and simple.Works also with associate arrays not only numeric arrays, which could not contain 0 ( like in the previous example would throw you a warning if the array doesn't have a 0. ) 

Removing X-Powered-By

Castor

[Removing X-Powered-By](https://stackoverflow.com/questions/2661799/removing-x-powered-by)

2010-04-18 09:49:04Z

I think that is controlled by the expose_php setting in PHP.ini:There is no direct security risk, but as David C notes, exposing an outdated (and possibly vulnerable) version of PHP may be an invitation for people to try and attack it.https://secure.php.net/manual/en/function.header-remove.phpIf you cannot disable the expose_php directive to mute PHP’s talkativeness (requires access to the php.ini), you could use Apache’s Header directive to remove the header field:If you have an access to php.ini, set expose_php = Off.Try adding a header() call before sending headers, like:regardless of the expose_php setting in php.iniIf you use FastCGI try:This solution worked for me :)Please add below line in the script and check. Ngnix / Apache etc level settings might not be required.

PHP json_encode encoding numbers as strings

Chris Barnhill

[PHP json_encode encoding numbers as strings](https://stackoverflow.com/questions/1390983/php-json-encode-encoding-numbers-as-strings)

I am having one problem with the PHP json_encode function. It encodes numbers as strings, e.g. becomesWhen js encounters these values, it interprets them as strings and numeric operations fail on them. Does anyone know some way to prevent json_encode from encoding numbers as strings? Thank you!

2009-09-07 21:14:55Z

I am having one problem with the PHP json_encode function. It encodes numbers as strings, e.g. becomesWhen js encounters these values, it interprets them as strings and numeric operations fail on them. Does anyone know some way to prevent json_encode from encoding numbers as strings? Thank you!I've done a very quick test :This seems to be like what you describe, if I'm not mistaken ?And I'm getting as output :So, in this case, the integers have not been converted to string.

Still, this might be dependant of the version of PHP we are using : there have been a couple of json_encode related bugs corrected, depending on the version of PHP...This test has been made with PHP 5.2.6 ; I'm getting the same thing with PHP 5.2.9 and 5.3.0 ; I don't have another 5.2.x version to test with, though :-(Which version of PHP are you using ? Or is your test-case more complex than the example you posted ?Maybe one bug report on http://bugs.php.net/ could be related ? For instance, Bug #40503 : json_encode integer conversion is inconsistent with PHP ?

Maybe Bug #38680 could interest you too, btw ?Note that since PHP 5.3.3, there's a flag for auto-converting numbers (the options parameter was added in PHP 5.3.0):I, likewise was reading from a DB (PostgreSQL) and everything was a string. We loop over each row and do things with it to build up our final results array, so I used within the loop to force it to be an integer value. When I do json_encode($result_arr) now, it correctly formats it as a number. This allows you to control what is and is not a number coming from your database.EDIT:The json_encode() function also has the ability to do this on the fly using the JSON_NUMERIC_CHECK flag as a second argument to it. You need to be careful using it though as shown in this users example in the documentation (copied below): http://uk3.php.net/manual/en/function.json-encode.php#106641And then you get this JSON:I'm encountering the same problem (PHP-5.2.11/Windows). I'm using this workaroundwhich replaces all (non-negative, integer) numbers enclosed in quotes with the number itself ('"42"' becomes '42').See also this comment in PHP manual.try 

$arr = array('var1' => 100, 'var2' => 200);

$json = json_encode( $arr, JSON_NUMERIC_CHECK);But it just work on PHP 5.3.3. Look at this PHP json_encode change log 

http://php.net/manual/en/function.json-encode.php#refsect1-function.json-encode-changelogThe following test confirms that changing the type to string causes json_encode() to return a numeric as a JSON string (i.e., surrounded by double quotes). Use settype(arr["var"], "integer") or settype($arr["var"], "float") to fix it. For sake of completeness (as I can't add comments yet), let me also add this detail as another answer:(Edit: To be read after realizing that the source data (i.e. in the OP's case, database result set) could be the problem (by returning numeric columns as strings), and json_encode() in fact was not the source of the problem)Manual pages of both "mysql_fetch_array":... and "mysql_ fetch_ row":clearly states that; the entries in the returned array will be strings.(I was using the DB class in phpBB2 (yes I know, it's obsolete!), and "sql_fetchrow()" method of that class uses "mysql_fetch_array()")Not realizing that, I also ended up finding this question, and understanding the problem! :)As Pascal Martin stated above in his follow-up comments, I believe a solution that takes care of the "incorrect type" problem at the source (i.e. by using the "mysql_field_type()" function and doing the casting right after fetch, (or other fetch methods like "object"?)) would be the better in general.So Pascal MARTIN isn't getting enough credit here. Checking for numeric values on every JSON return is not feasable for an existing project with hundreds of server side functions. I replaced php-mysql with php-mysqlnd, and the problem went away. Numbers are numbers, strings are strings, booleans are boolean.I also had the same problem processing data from the database. Basically the problem is that the type in the array to convert in json, is recognized by PHP as a string and not as integer.

In my case I made a query that returns data from a DB column counting row. The PDO driver does not recognize the column as int, but as strings. I solved by performing a cast as int in the affected column.it is php version the problem, had the same issue upgraded my php version to 5.6 solved the problemCasting the values to an int or float seems to fix it.  For example:You can use (int) if any issue occurs!! It will work fine.Just run into the same problem and was the database returning the values as strings.I use this as a workaround:That is multiplying the value by 1 to cast it into a numberHope that helps someonejson_encode serializes some data structure in JSON format to be send across the network. Therefore all content will be of the type string. Just like when you receive some parameter from $_POST or $_GET.If you have to make numeric operations on the values sent, just convert them to int first (with the intval() function in PHP or parseInt() in Javascript) and then execute the operations.Well, PHP json_encode() returns a string.You can use parseFloat() or parseInt() in the js code though:Like oli_arborum said, I think you can use a preg_replace for doing the job. Just change the command like this :

PHP Get all subdirectories of a given directory

Adrian M.

[PHP Get all subdirectories of a given directory](https://stackoverflow.com/questions/2524151/php-get-all-subdirectories-of-a-given-directory)

How can I get all sub-directories of a given directory without files, .(current directory) or ..(parent directory)

and then use each directory in a function?

2010-03-26 14:55:15Z

How can I get all sub-directories of a given directory without files, .(current directory) or ..(parent directory)

and then use each directory in a function?you can use glob() with GLOB_ONLYDIR optionor Here is how you can retrieve only directories with GLOB:The Spl DirectoryIterator class provides a simple interface for viewing the contents of filesystem directories.Almost the same as in your previous question:Replace strtoupper with your desired function.Try this code:In Array://access:Example to show all:Proper wayInspired by LaravelYou can try this function (PHP 7 required)This is the one liner code:You can use the glob() function to do this.Here is some documentation on it:

http://php.net/manual/en/function.glob.php Find all PHP files recursively. The logic should be simple enough to tweak and it aims to be fast(er) by avoiding function calls.If you're looking for a recursive directory listing solutions. Use below code I hope it should help you.The following recursive function returns an array with the full list of sub directoriesSource: https://www.lucidar.me/en/web-dev/how-to-get-subdirectories-in-php/Find all the files and folders under a specified directory.

HTTP Content-Type Header and JSON

php_nub_qq

[HTTP Content-Type Header and JSON](https://stackoverflow.com/questions/20620300/http-content-type-header-and-json)

I have always been trying to avoid using most of the HTTP protocol's properties for the sake of fear of the unknown.However, I said to myself that I'm going to face fear today and start using headers purposefully. I have been trying to send json data to the browser and use it right away. For example, if I have an Ajax handler function on ready state 4 which looks like so:And I have set the content-type header in my PHP code:Why can't I directly access the property from the handler function, when the browser is clearly told that the incoming data is application/json?

2013-12-16 20:30:52Z

I have always been trying to avoid using most of the HTTP protocol's properties for the sake of fear of the unknown.However, I said to myself that I'm going to face fear today and start using headers purposefully. I have been trying to send json data to the browser and use it right away. For example, if I have an Ajax handler function on ready state 4 which looks like so:And I have set the content-type header in my PHP code:Why can't I directly access the property from the handler function, when the browser is clearly told that the incoming data is application/json?The Content-Type header is just used as info for your application.  The browser doesn't care what it is.  The browser just returns you the data from the AJAX call.  If you want to parse it as JSON, you need to do that on your own.The header is there so your app can detect what data was returned and how it should handle it.  You need to look at the header, and if it's application/json then parse it as JSON.This is actually how jQuery works.  If you don't tell it what to do with the result, it uses the Content-Type to detect what to do with it.Content-Type: application/json is just the content header. The content header is just information about the type of returned data, ex::JSON,image(png,jpg,etc..),html.Keep in mind, that JSON in JavaScript is an array or object. If you want to see all the data, use console.log instead of alert:If you want to alert the original JSON content as a string, then add single quotation marks ('):Do not use double quotes. It will confuse JavaScript, because JSON uses double quotes on each value and key:The below code helps me to return a JSON object for JavaScript on the front endMy template codetemplate_file.jsonPython backed codeFile url.pyjQuery code for the front end

SHA1 vs md5 vs SHA256: which to use for a PHP login?

Tony Stark

[SHA1 vs md5 vs SHA256: which to use for a PHP login?](https://stackoverflow.com/questions/2235158/sha1-vs-md5-vs-sha256-which-to-use-for-a-php-login)

I'm making a php login, and I'm trying to decide whether to use SHA1 or Md5, or SHA256 which I read about in another stackoverflow article. Are any of them more secure than others? For SHA1/256, do I still use a salt? Also, is this a secure way to store the password as a hash in mysql?

2010-02-10 07:41:06Z

I'm making a php login, and I'm trying to decide whether to use SHA1 or Md5, or SHA256 which I read about in another stackoverflow article. Are any of them more secure than others? For SHA1/256, do I still use a salt? Also, is this a secure way to store the password as a hash in mysql?Neither. You should use bcrypt. The hashes you mention are all optimized to be quick and easy on hardware, and so cracking them share the same qualities. If you have no other choice, at least be sure to use a long salt and re-hash multiple times.PHP 5.5 offers new functions for password hashing. This is the recommend approach for password storage in modern web applications.If you're using an older version of PHP you really should upgrade, but until you do you can use password_compat to expose this API.Also, please let password_hash() generate the salt for you. It uses a CSPRNG.(Proof of Concept for both caveats here.)You might be tempted to resolve the first caveat by pre-hashing your passwords before running them through bcrypt, but doing so can cause your application to run headfirst into the second. Instead of writing your own scheme, use an existing library written and/or evaluated by security experts.TL;DR - Use bcrypt.I think using md5 or sha256 or any hash optimized for speed is perfectly fine and am very curious to hear any rebuttle other users might have.  Here are my reasonsI do believe you should still encrypt but the only thing I can see the encryption does is prevent people that already have or somehow gained access to the database from just reading out loud the password.  If it is someone unauthorized to on the database then you have bigger issues to worry about that's why Sony got took because they thought an encrypted password protected everything including credit card numbers all it does is protect that one field that's it.The only pure benefit I can see to complex encryptions of passwords in a database is to delay employees or other people that have access to the database from just reading out the passwords.  So if it's a small project or something I wouldn't worry to much about security on the server side instead I would worry more about securing anything a client might send to the server such as sql injection, XSS attacks or the plethora of other ways you could be compromised.  If someone disagrees I look forward to reading a way that a super encrypted password is a must from the client side.The reason I wanted to try and make this clear is because too often people believe an encrypted password means they don't have to worry about it being compromised and they quit worrying about securing the website.As Johannes Gorset pointed out, the post by Thomas Ptacek from Matasano Security explains why simple, general-purpose hashing functions such as MD5, SHA1, SHA256 and SHA512 are poor password hashing choices.Why? They are too fast--you can calculate at least 1,000,000 MD5 hashes a second per core with a modern computer, so brute force is feasible against most passwords people use. And that's much less than a GPU-based cracking server cluster!Salting without key stretching only means that you cannot precompute the rainbow table, you need to build it ad hoc for that specific salt. But it won't really make things that much harder.User @Will says:They don't need to. Apparently, in the case of LinkedIn they used the common SQL injection vulnerability to get the login DB table and cracked millions of passwords offline.Then he goes back to the offline attack scenario:No, SHA512 is not 10000 times slower than MD5--it only takes about twice as much. Crypt/SHA512, on the other hand, is a very different beast that, like its BCrypt counterpart, performs key stretching, producing a very different hash with a random salt built-in and will take anything between 500 and 999999 times as much to compute (stretching is tunable).So the choice for PHP is either Crypt/Blowfish (BCrypt), Crypt/SHA256 or Crypt/SHA512. Or at least Crypt/MD5 (PHK). See www.php.net/manual/en/function.crypt.phpUse SHA256. It is not perfect, as SHA512 would be ideal for a fast hash, but out of the options, its the definite choice. As per any hashing technology, be sure to salt the hash for added security.As an added note, FRKT, please show me where someone can easily crack a salted SHA256 hash? I am truly very interested to see this.Moving forward please use bcrypt as a hardened hash. More information can be found here.Edit on Salting:Use a random number, or random byte stream etc. You can use the unique field of the record in your database as the salt too, this way the salt is different per user.What people seem to be missing is that if the hacker has access to the database he probably also has access to the php file that hashes the password and can likely just modify that to send him all the successful user name password combos.  If he doesn't have access to the web directory he could always just pick a password hash it, and write that into the database.  In other words the hash algorithm doesn't really matter as much as system security, and limiting login attempts also if you don't use SSL then the attacker can just listen in on the connection to get the information. Unless you need the algorithm to take a long time to compute (for your own purposes) then SHA-256 or SHA-512 with a user specific salt should be enough.As an added security measure set up a script (bash, batch, python, etc) or program and give it an obscure name and have it check and see if login.php has changed (check date/time stamp) and send you an email if it has. Also should probably log all attempts at login with admin rights and log all failed attempts to log into the database and have the logs emailed to you.Everyone is talking about this like they can be hacked over the internet.  As already stated, limiting attempts makes it impossible to crack a password over the Internet and has nothing to do with the hash.The salt is a must, but the complexity or multiple salts doesn't even matter.  Any salt alone stops the attacker from using a premade rainbow table.  A unique salt per user stops the attacker from creating a new rainbow table to use against your entire user base.The security really comes into play when the entire database is compromised and a hacker can then perform 100 million password attempts per second against the md5 hash.  SHA512 is about 10,000 times slower.  A complex password with today's power could still take 100 years to bruteforce with md5 and would take 10,000 times as long with SHA512.  The salts don't stop a bruteforce at all as they always have to be known, which if the attacker downloaded your database, he probably was in your system anyway.MD5 is bad because of collision problems - two different passwords possibly generating the same md-5.Sha-1 would be plenty secure for this. The reason you store the salted sha-1 version of the password is so that you the swerver do not keep the user's apassword on file, that they may be using with other people's servers. Otherwise, what difference does it make? If the hacker steals your entire unencrypted database some how, the only thing a hashed salted password does is prevent him from impersonating the user for future signons - the hacker already has the data.What good does it do the attacker to have the hashed value, if what your user inputs is a plain password? And even if the hacker with future technology could generate a million sha-1 keys a second for a brute force attack, would your server handle a million logons a second for the hacker to test his keys?  That's if you are letting the hacker try to logon with the salted sha-1 instead of a password like a normal logon.The best bet is to limit bad logon attempts to some reasonable number - 25 for example, and then time the user out for a minute or two. And if the cumulative bady logon attempts hits 250 within 24 hours, shut the account access down and email the owner.Here is the comparison between MD5 and SHA1. You can get a clear idea about which one is better.Use argon2i. The argon2 password hashing function has won the Password Hashing Competition.Other reasonable choices, if using argon2 is not available, are scrypt, bcrypt and PBKDF2. Wikipedia has pages for these functions:MD5, SHA1 and SHA256 are message digests, not password-hashing functions. They are not suitable for this purpose.Switching from MD5 to SHA1 or SHA512 will not improve the security of the construction so much. Computing a SHA256 or SHA512 hash is very fast. An attacker with common hardware could still try tens of millions (with a single CPU) or even billions (with a single GPU) of hashes per second. Good password hashing functions include a work factor to slow down dictionary attacks.Here is a suggestion for PHP programmers: read the PHP FAQ then use password_hash().Let's assume the next point : the hackers steal our database including the users and password (encrypted). And the hackers created a fake account with a password that they know.MD5 is weak because its short and popular and practically every hash generation without password is weak of a dictionary attack.  But..So, let's say that we are still using MD5 with a SALT.   The hackers don't know the SALT but they know the password of a specific user.  So they can test : ?????12345 where 12345 is the know password and ????? is the salt. The hackers sooner or later can guess the SALT.However, if we used a MD5+SALT and we applied MD5, then there is not way to recover the information.   However, i repeat, MD5 is still short.For example, let's say that my password is : 12345. The SALT is BILLCLINTONmd5 : 827ccb0eea8a706c4c34a16891f84e7bmd5 with the hash : 56adb0f19ac0fb50194c312d49b15378mD5 with the hash over md5 : 28a03c0bc950decdd9ee362907d1798a   I tried to use those online service and i found none that was able to crack it.  And its only MD5! (may be as today it will be crackeable because i generated the md5 online)If you want to overkill then SHA256 is more than enough if its applied with a salt and twice.tldr MD5(HASH+MD5(password)) = ok but short, SHA256 is more than enough.An md5 encryption is one of the worst, because you have to turn the code and it is already decrypted. I would recommend you the SHA256. I'm programming a bit longer and have had a good experience. Below would also be an encryption.

is_null($x) vs $x === null in PHP [duplicate]

Explosion Pills

[is_null($x) vs $x === null in PHP [duplicate]](https://stackoverflow.com/questions/8228837/is-nullx-vs-x-null-in-php)

PHP has two (that I know of, and three if you count isset()) methods to determine if a value is null: is_null() and === null.  I have heard, but not confirmed, that === null is faster, but in a code review someone strongly suggested that I use is_null() instead as it is specifically designed for the null-evaluation purpose.  He also started talking about math or something.Anyway, the fact that is_null() is apparently slower also leads me to believe that it's doing more than === null does and is probably preferred.  Is there any reason to use one or the other?  Is one always preferred?  What about isset()?As an addendum to possibly not get this question closed, what about isset() vs. is_null()?  It seems that all isset() will do is suppress the notice, so unless you actually want a notice for an undefined variable, any reason to use is_null() instead?  How about if you know the variable is initialized at the time?Finally, is there any mathematical reason to prefer is_null() over === null?  Something about null not being comparable?

2011-11-22 14:56:34Z

PHP has two (that I know of, and three if you count isset()) methods to determine if a value is null: is_null() and === null.  I have heard, but not confirmed, that === null is faster, but in a code review someone strongly suggested that I use is_null() instead as it is specifically designed for the null-evaluation purpose.  He also started talking about math or something.Anyway, the fact that is_null() is apparently slower also leads me to believe that it's doing more than === null does and is probably preferred.  Is there any reason to use one or the other?  Is one always preferred?  What about isset()?As an addendum to possibly not get this question closed, what about isset() vs. is_null()?  It seems that all isset() will do is suppress the notice, so unless you actually want a notice for an undefined variable, any reason to use is_null() instead?  How about if you know the variable is initialized at the time?Finally, is there any mathematical reason to prefer is_null() over === null?  Something about null not being comparable?There is absolutely no difference in functionality between is_null and === null.The only difference is that is_null is a function and thusPersonally, I use null === whenever I can, as it is more consistent with false === and true === checks.If you want, you can check the code: is_identical_function (===) and php_is_type (is_null) do the same thing for the IS_NULL case.The related isset() language construct checks whether the variable actually exists before doing the null check. So isset($undefinedVar) will not throw a notice.Also note that isset() may sometimes return true even though the value is null - this is the case when it is used on an overloaded object, i.e. if the object defines an offsetExists/__isset method that returns true even if the offset is null (this is actually quite common, because people use array_key_exists in offsetExists/__isset).As stated by others, there is a time difference between using === and is_null(). Did some quick testing and got these results:Gives the results See the code in actionThey all have their places, though only isset() will avoid undefined variable warnings:I'm not able to say wether it's better to use is_null or === null. But be aware when using isset on arrays.You need isset() if the variable is possibly not defined. It returns false when the variable is not defined or === null (yes, it's that ugly). Only isset() and empty() do not raise an E_NOTICE if the variable or array element does not exist.There is not really a difference between is_null and === null. I think === is much nicer but when you e.g. need to use call_user_func for some dubious reason, you'd have to use is_null.=== and is_null is the same.According to this comment is_null is only 250ns slower. I think because a function is slower than an operator.The PHP documentation has a good discussion and experiments on is_null, === null, isset. Especially read the comment section.

What is causing「Unable to allocate memory for pool」in PHP?

jonathanatx

[What is causing「Unable to allocate memory for pool」in PHP?](https://stackoverflow.com/questions/3723316/what-is-causing-unable-to-allocate-memory-for-pool-in-php)

I've occasionally run up against a server's memory allocation limit, particularly with a bloated application like Wordpress, but never encountered "Unable to allocate memory for pool" and having trouble tracking down any information.Does anyone know what this means?  I've tried increasing the memory_limit without success.  I also haven't made any significant changes to the application. One day there was no problem, the next day I hit this error.

2010-09-16 02:33:43Z

I've occasionally run up against a server's memory allocation limit, particularly with a bloated application like Wordpress, but never encountered "Unable to allocate memory for pool" and having trouble tracking down any information.Does anyone know what this means?  I've tried increasing the memory_limit without success.  I also haven't made any significant changes to the application. One day there was no problem, the next day I hit this error.Probably is APC related.For the people having this problem, please specify you .ini  settings. Specifically your apc.mmap_file_mask setting.For file-backed mmap, it should be set to something like:To mmap directly from /dev/zero, use:For POSIX-compliant shared-memory-backed mmap, use:Using a TTL of 0 means that APC will flush all the cache when it runs out of memory. The error don't appear anymore but it makes APC far less efficient. It's a no risk, no trouble, "I don't want to do my job" decision. APC is not meant to be used that way. You should choose a TTL high enough so the most accessed pages won't expire. The best is to give enough memory so APC doesn't need to flush cache.Just read the manual to understand how ttl is used : http://www.php.net/manual/en/apc.configuration.php#ini.apc.ttlThe solution is to increase memory allocated to APC.

Do this by increasing apc.shm_size.If APC is compiled to use Shared Segment Memory you will be limited by your operating system. Type this command to see your system limit for each segment :To alocate more memory you'll have to increase the number of segments with the parameter apc.shm_segments.If APC is using mmap memory then you have no limit. The amount of memory is still defined by the same option apc.shm_size. If there's not enough memory on the server, then use filters option to prevent less frequently accessed php files from being cached.But never use a TTL of 0.As c33s said, use apc.php to check your config. Copy the file from apc package to a webfolder and point browser to it. You'll see what is really allocated and how it is used. The graphs must remain stable after hours, if they are completly changing at each refresh, then it means that your setup is wrong (APC is flushing everything). Allocate 20% more ram than what APC really use as a security margin, and check it on a regular basis.The default of allowing only 32MB is ridiculously low. PHP was designed when servers were 64MB and most scripts were using one php file per page. Nowadays solutions like Magento require more than 10k files (~60Mb in APC). You should allow enough memory so most of php files are always cached. It's not a waste, it's more efficient to keep opcode in ram rather than having the corresponding raw php in file cache.

Nowadays we can find dedicated servers with 24Gb of memory for as low as $80/month, so don't hesitate to allow several GB to APC. I put 2GB out of 24GB on a server hosting 5Magento stores and ~40 wordpress website, APC uses 1.2GB. Count 64MB for Magento installation, 40MB for a Wordpress with some plugins.Also, if you have developpment websites on the same server. Exclude them from cache.edit start@bokan indicated me that i should add a warning here. if you have a ttl of 0 this means the every cached item can be purged immediately. so if you have a small cache size like 2mb and a ttl of 0 this would render the apc useless, because the data in the cache gets always overwritten.lowering the ttl means only that the cache cannot become full, only with items which can't be replaced.so you have to choose a good balance between ttl and cache size.in my case i had a cache size of 1gb, so it was more than enough for me.edit endhad the same issue on centos 5 with php 5.2.17 and noticed that if the

cache size is small and the ttl parameter is "high" (like 7200) while

having a lot of php files to cache, then the cache fills up quite fast

and apc doesn't find anything which it can remove because all files in

the cache still fit in the ttl.increasing the memory size is only a part solution, you still run in

this error if you cache fills up and all files are within the ttl.so my solution was to set the ttl to 0, so apc fills up the cache an

there is allways the possibility for apc to clear some memory for new

data.hope that helpsedit:

see also: http://pecl.php.net/bugs/bug.php?id=16966download http://pecl.php.net/get/APC extract and run the apc.php, there you have a nice diagram how your cache usage look likeRunning the apc.php script is key to understanding what your problem is, IMO. This helped us size our cache properly and for the moment, seems to have resolved the problem.For newbies like myself, these resources helped:Finding the apc.ini file to make the changes recommended by c33s above, and setting recommended amounts:

http://www.untwistedvortex.com/optimizing-tuning-apc-alternate-php-cache/Understanding what apc.ttl is:

http://www.php.net/manual/en/apc.configuration.php#ini.apc.ttlUnderstanding what apc.shm_size is:

http://www.php.net/manual/en/apc.configuration.php#ini.apc.shm-sizeAs Bokan has mentioned, you can up the memory if available, and he is right on how counter productive setting TTL to 0 is.NotE: This is how I fixed this error for my particular problem. Its a generic issue that can be caused by allot of things so only follow the below if you get the error and you think its caused by duplicate PHP files being loaded into APC.The issue I was having was when I released a new version of my PHP application. Ie replaced all my .php files with new ones APC would load both versions into cache.Because I didnt have enough memory for two versions of the php files APC would run out of memory.There is a option called apc.stat to tell APC to check if a particular file has changed and if so replace it, this is typically ok for development because you are constantly making changes however on production its usually turned off as it was with in my case - http://www.php.net/manual/en/apc.configuration.php#ini.apc.statTurning apc.stat on would fix this issue if you are ok with the performance hit.The solution I came up with for my problem is check if the the project version has changed and if so empty the cache and reload the page. This worked for our guys (running a slew of Wordpress sites on the same server). Changed memory settings in the /etc/php.d/apc.ini file. It was set to 64M, so we doubled it to 128M.apc.shm_size=128MLooking at the internets there can be various of causes.

In my case leaving everything default except......cleared the countless warnings that I was getting earlier.I received the error "Unable to allocate memory for pool" after moving an OpenCart installation to a different server. I also tried raising the memory_limit.The error stopped after I changed the permissions of the file in the error message to have write access by the user that apache runs as (apache, www-data, etc.). Instead of modifying /etc/group directly (or chmod-ing the files to 0777), I used usermod:Then I had to restart apache for the change to take effect:OrOr whatever your system uses to restart apache.If the site is on shared hosting, maybe you must change the file permissions with an FTP program, or contact the hosting provider?To resolve this problem set value for apc.shm_size as integer 

Locate your apc.ini file (In my system apc.ini file location /etc/php5/conf.d/apc.ini) and set:

apc.shm_size = 1000on my system i had to insert

apc.shm_size = 64M

into /usr/local/etc/php.ini

(FreeBSD 9.1)

