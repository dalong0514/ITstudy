This answer has been edited. I'm leaving the original answer below for context (otherwise the comments wouldn't make sense).When this question was originally asked, JSLint was the main linting tool for JavaScript. JSHint was a new fork of JSLint, but had not yet diverged much from the original.Since then, JSLint has remained pretty much static, while JSHint has changed a great deal - it has thrown away many of JSLint's more antagonistic rules, has added a whole load of new rules, and has generally become more flexible. Also, another tool ESLint is now available, which is even more flexible and has more rule options.In my original answer, I said that you should not force yourself to stick to JSLint's rules; as long as you understood why it was throwing a warning, you could make a judgement for yourself about whether to change the code to resolve the warning or not.With the ultra-strict ruleset of JSLint from 2011, this was reasonable advice -- I've seen very few JavaScript codesets that could pass a JSLint test. However with the more pragmatic rules available in today's JSHint and ESLint tools, it is a much more realistic proposition to try to get your code passing through them with zero warnings.There may still occasionally be cases where a linter will complain about something that you've done intentionally -- for example, you know that you should always use === but just this one time you have a good reason to use ==. But even then, with ESLint you have the option to specify eslint-disable around the line in question so you can still have a passing lint test with zero warnings, with the rest of your code obeying the rule. (just don't do that kind of thing too often!)[ORIGINAL ANSWER FOLLOWS]By all means use JSLint. But don't get hung up on the results and on fixing everything that it warns about. It will help you improve your code, and it will help you find potential bugs, but not everything that JSLint complains about turns out to be a real problem, so don't feel like you have to complete the process with zero warnings.Pretty much any Javascript code with any significant length or complexity will produce warnings in JSLint, no matter how well written it is. If you don't believe me, try running some popular libraries like JQuery through it.Some JSLint warnings are more valuable than others: learn which ones to watch out for, and which ones are less important. Every warning should be considered, but don't feel obliged to fix your code to clear any given warning; it's perfectly okay to look at the code and decide you're happy with it; there are times when things that JSlint doesn't like are actually the right thing to do.tl;dr takeaway: If you're looking for a very high standard for yourself or team, JSLint. But its not necessarily THE standard, just A standard, some of which comes to us dogmatically from a javascript god named Doug Crockford. If you want to be a bit more flexible, or have some old pros on your team that don't buy into JSLint's opinions, or are going back and forth between JS and other C-family languages on a regular basis, try JSHint.long version:The reasoning behind the fork explains pretty well why JSHint exists: http://badassjs.com/post/3364925033/jshint-an-community-driven-fork-of-jslint http://anton.kovalyov.net/2011/02/20/why-i-forked-jslint-to-jshint/So I guess the idea is that it's "community-driven" rather than Crockford-driven. In practicality, JSHint is generally a bit more lenient (or at least configurable or agnostic) on a few stylistic and minor syntactical "opinions" that JSLint is a stickler on. As an example, if you think both the A and B below are fine, or if you want to write code with one or more of the aspects of A that aren't available in B, JSHint is for you. If you think B is the only correct option... JSLint. I'm sure there are other differences, but this highlights a few.  A) Passes JSHint out of the box - fails JSLintB) Passes Both JSHint and JSLintPersonally I find JSLint code very nice to look at, and the only hard features of it that I disagree with are its hatred of more than one var declaration in a function and of for-loop var i = 0 declarations, and some of the whitespace enforcements for function declarations. A few of the whitespace things that JSLint enforces, I find to be not necessarily bad, but out of sync with some pretty standard whitespace conventions for other languages in the family (C, Java, Python, etc...), which are often followed as conventions in Javascript as well. Since I'm writing in various of these languages throughout the day, and working with team members who don't like Lint-style whitespace in our code, I find JSHint to be a good balance.  It catches stuff that's a legitimate bug or really bad form, but doesn't bark at me like JSLint does (sometimes, in ways I can't disable) for the stylistic opinions or syntactic nitpicks that I don't care for.  A lot of good libraries aren't Lint'able, which to me demonstrates that there's some truth to the idea that some of JSLint is simply just about pushing 1 version of "good code" (which is, indeed, good code).  But then again, the same libraries (or other good ones) probably aren't Hint'able either, so, touchÃ©.There is an another mature and actively developed "player" on the javascript linting front - ESLint:What really matters here is that it is extendable via custom plugins/rules. There are already multiple plugins written for different purposes. Among others, there are:And, of course, you can use your build tool of choice to run ESLint:I had the same question a couple of weeks ago and was evaluating both JSLint and JSHint.Contrary to the answers in this question, my conclusion was not:Or:As you can configure almost the same rules in JSHint as in JSLint. So I would argue that there's not much difference in the rules you could achieve.So the reasons to choose one over another are more political than technical.We've finally decided to go with JSHint because of the following reasons:I'd make a third suggestion, Google Closure Compiler (and also the Closure Linter).  You can try it out online here.Foreword: Well, that escalated quickly. But decided to pull it through. May this answer be helpful to you and other readers.While JSLint and JSHint are good tools to use, over the years I've come to appreciate what my friend @ugly_syntax calls:This is a general principle, much like a "zen monk", limiting the choices one has to make, one can be more productive and creative.Therefore my current favourite zero-config JS code style:UPDATE:Flow has improved a lot. With it, you

can add types to your JS with will help you prevent a lot

of bugs. But it can also stay out of your way, for instance

when interfacing untyped JS. Give it a try!Add standard as a dependency to you projectThen in package.json, add the following test script:For snazzier output while developing, npm install --global snazzy and run it instead of npm test.My friend when mentioning design space referred to Elm and I encourage you to give that language a try.Why? JS is in fact inspired by LISP, which is a special class of languages, which happens to be untyped. Language such as Elm or Purescript are typed functional programming languages.Type restrict your freedom in order for the compiler to be able to check and guide you when you end up violation the language or your own program's rules; regardless of the size (LOC) of your program.We recently had a junior colleague implement a reactive interface twice: once in Elm, once in React; have a look to get some idea of what I'm talking about.(ps. note that the React code is not idiomatic and could be improved)the reality is that JS is untyped. Who am I to suggest typed programming to you?See, with JS we are in a different domain: freed from types, we can easily express things that are hard or impossible to give a proper type (which can certainly be an advantage).But without types there is little to keep our programs in check, so we are forced to introduce tests and (to a lesser extend) code styles.I recommend you look at LISP (e.g. ClojureScript) for inspiration and invest in testing your codes. Read The way of the substack to get an idea.Peace.Well, Instead of doing manual lint settings we can include all the lint settings at the top of our JS file itself e.g.Declare all the global var in that file like: Declare all the lint settings like: Hope this will help you :)There is also an another actively developed alternative - JSCS â€” JavaScript Code Style:It comes with multiple presets that you can choose from by simply specifying the preset in the .jscsrc configuration file and customize it - override, enable or disable any rules:There are also plugins and extensions built for popular editors.Also see:

Javascript / Chrome - How to copy an object from the webkit inspector as code

mheavers

[Javascript / Chrome - How to copy an object from the webkit inspector as code](https://stackoverflow.com/questions/10305365/javascript-chrome-how-to-copy-an-object-from-the-webkit-inspector-as-code)

I am doing a console.log statement in my javascript in order to log a javascript object. I'm wondering if there's a way, once that's done - to copy that object as javascript code. What I'm trying to do is convert an object that was created using ajax to parse an xml feed into a static javascript object so that a file can run locally, without a server. I've included a screenshot of the object in the chrome inspector window so you can see what I'm trying to do.

2012-04-24 20:15:44Z

I am doing a console.log statement in my javascript in order to log a javascript object. I'm wondering if there's a way, once that's done - to copy that object as javascript code. What I'm trying to do is convert an object that was created using ajax to parse an xml feed into a static javascript object so that a file can run locally, without a server. I've included a screenshot of the object in the chrome inspector window so you can see what I'm trying to do.Note on Recursive Objects: If you're trying to copy a recursive object, you will get [object Object]. The way out is to copy(JSON.stringify(temp1)) , the object will be fully copied to your clipboard as a valid JSON, so you'd be able to format it as you wish, using one of many resources.Try JSON.stringify(). Copy the resulting string. Does not work with objects containing circular references.You can copy an object to your clip board using copy(JSON.stringify(Object_Name)); in the console.Eg:- Copy & Paste the below code in your console and press ENTER. Now, try to paste(CTRL+V for Windows or CMD+V for mac) it some where else and you will get  {"name":"Daniel","age":25}You can now accomplish this in Chrome by right clicking on the object and selecting "Store as Global Variable": http://www.youtube.com/watch?v=qALFiTlVWdgFollow the following steps: If you've sent the object over a request you can copy it from the Chrome -> Network tab. Request Payload - > View SourceUsing "Store as a Global Variable" works, but it only gets the final instance of the object, and not the moment the object is being logged (since you're likely wanting to compare changes to the object as they happen).  To get the object at its exact point in time of being modified, I use this...Call it like so...You may want to remove the .replace(/./g, ",\n") regex if your data happens to have comma's in it.So,. I had this issue,. except I got [object object]I'm sure you could do this with recursion but this worked for me:Here is what I did in my console:Then paste into your editor.This should help stringify deep objects by leaving out recursive Window and Node objects. Right click on data which you want to store

Listening for variable changes in JavaScript

rashcroft22

[Listening for variable changes in JavaScript](https://stackoverflow.com/questions/1759987/listening-for-variable-changes-in-javascript)

Is it possible to have an event in JS that fires when the value of a certain variable changes? JQuery is accepted.

2009-11-18 23:58:15Z

Is it possible to have an event in JS that fires when the value of a certain variable changes? JQuery is accepted.Yes, this is now completely possible!I know this is an old thread but now this effect is possible using accessors (getters and setters): https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects#Defining_getters_and_settersYou can define an object like this, in which aInternal represents the field a:Then you can register a listener using the following:So whenever anything changes the value of x.a, the listener function will be fired. Running the following line will bring the alert popup:See an example here: https://jsfiddle.net/5o1wf1bn/1/You can also user an array of listeners instead of a single listener slot, but I wanted to give you the simplest possible example.Most of the answers to this question are either outdated, ineffective, or require the inclusion of large bloated libraries:Today, you can now use the Proxy object to monitor (and intercept) changes made to an object. It is purpose built for what the OP is trying to do. Here's a basic example:The only drawbacks of the Proxy object are: If you need to observe changes made to a nested object, then you need to use a specialized library such as Observable Slim (which I have published) which works like this:No.But, if it's really that important, you have 2 options (first is tested, second isn't):First, use setters and getters, like so:then you can do something like:then set the listener like:Second, I actually forgot, I'll submit while I think about it :)EDIT: Oh, I remember :) You could put a watch on the value:Given myobj above, with 'a' on it:Using Prototype: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/definePropertySorry to bring up an old thread, but here is a little manual for those who (like me!) don't see how Eli Grey's example works:Hope this can help someoneAs Luke Schafer's answer (note: this refers to his original post; but the whole point here remains valid after the edit), I would also suggest a pair of Get/Set methods to access your value.However I would suggest some modifications (and that's why I'm posting...).A problem with that code is that the field a of the object myobj is directly accessible, so it's possible to access it / change its value without triggering the listeners:So, to guarantee that the listeners are actually called, we would have to prohibit that direct access to the field a. How to do so? Use a closure!Now you can use the same method to create and add the listeners as Luke proposed, but you can rest assured that there's no possible way to read from or write to a going unnoticed!Still on Luke's track, I propose now a simple way to add encapsulated fields and the respective getters/setters to objects by the means of a simple function call.Note that this will only work properly with value types. For this to work with reference types, some kind of deep copy would have to be implemented (see this one, for instance).This works the same as before: we create a local variable on a function, and then we create a closure.How to use it? Simple:If you're using jQuery {UI} (which everyone should be using :-) ), you can use .change() with a hidden <input/> element.AngularJS (I know this is not JQuery, but that might help. [Pure JS is good in theory only]):where "data" is name of your variable in the scope.There is a link to doc.For those tuning in a couple years later:A solution for most browsers (and IE6+) is available that uses the onpropertychange event and the newer spec defineProperty.  The slight catch is that you'll need to make your variable a dom object.Full details:http://johndyer.name/native-browser-get-set-properties-in-javascript/The functionality you're looking for can be achieved through the use of the "defineProperty()" method--which is only available to modern browsers:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/definePropertyI've written a jQuery extension that has some similar functionality if you need more cross browser support:https://github.com/jarederaj/jQueueNot directly: you need a pair getter/setter with an "addListener/removeListener" interface of some sort... or an NPAPI plugin (but that's another story altogether).ororA rather simple and simplistic solution is to just use a function call to set the value of the global variable, and never set its value directly.  This way you have total control:There is no way to enforce this, it just requires programming discipline... though you can use grep (or something similar) to check that nowhere does your code directly set the value of globalVar.Or you could encapsulate it in an object and user getter and setter methods... just a thought.Please guys remember the initial question was for VARIABLES, not for OBJECTS ;)in addition to all answers above, I created a tiny lib called forTheWatch.js, 

that use the same way to catch and callback for changes in normal global variables in javascript.Compatible with JQUERY variables, no need to use OBJECTS, and you can pass directly an ARRAY of several variables if needed.If it can be helpful... :

https://bitbucket.org/esabora/forthewatch Basically you just have to call the function : 

watchIt("theVariableToWatch", "varChangedFunctionCallback");And sorry by advance if not relevant.It's not directly possible.However, this can be done using CustomEvent: https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEventThe below method accepts an array of variable names as an input and adds event listener for each variable and triggers the event for any changes to the value of the variables. The Method uses polling to detect the change in the value. You can increase the value for timeout in milliseconds.By calling the Method:It will detect the changes to variables username and userid. With the help of getter and setter, you can define a JavaScript class that does such a thing.First, we define our class called MonitoredVariable:Assume that we want to listen for money changes, let's create an instance of MonitoredVariable with initial money 0:Then we could get or set its value using money.val:Since we have not defined any listeners for it, nothing special happens after money.val changes to 2.Now let's define some listeners. We have four listeners available: beforeSet, beforeChange, afterChange, afterSet.

The following will happen sequentially when you use money.val = newValue to change variable's value:Now we define afterChange listener which be triggered only after money.val has changed (while afterSet will be triggered even if the new value is the same as the old one):Now set a new value 3 and see what happens:You will see the following in the console:For full code, see https://gist.github.com/yusanshi/65745acd23c8587236c50e54f25731ab.Easiest way I have found, starting from this answer: And then: This is an old thread but I stumbled onto second highest answer (custom listeners) while looking for a solution using Angular. While the solution works, angular has a better built in way to resolve this using @Output and event emitters. Going off of the example in custom listener answer:ChildComponent.htmlChildComponent.tsParentComponent.htmlParentComponent.tsThis will now update non parent each time the child button is clicked. Working stackblitz

Looping through array and removing items, without breaking for loop

dzm

[Looping through array and removing items, without breaking for loop](https://stackoverflow.com/questions/9882284/looping-through-array-and-removing-items-without-breaking-for-loop)

I have the following for loop, and when I use splice() to remove an item, I then get that 'seconds' is undefined.  I could check if it's undefined, but I feel there's probably a more elegant way to do this.  The desire is to simply delete an item and keep on going.  

2012-03-27 01:44:07Z

I have the following for loop, and when I use splice() to remove an item, I then get that 'seconds' is undefined.  I could check if it's undefined, but I feel there's probably a more elegant way to do this.  The desire is to simply delete an item and keep on going.  The array is being re-indexed when you do a .splice(), which means you'll skip over an index when one is removed, and your cached .length is obsolete.To fix it, you'd either need to decrement i after a .splice(), or simply iterate in reverse...This way the re-indexing doesn't affect the next item in the iteration, since the indexing affects only the items from the current point to the end of the Array, and the next item in the iteration is lower than the current point.This is a pretty common issue. The solution is to loop backwards:It doesn't matter if you're popping them off of the end because the indices will be preserved as you go backwards.Recalculate the length each time through the loop instead of just at the outset, e.g.:That way you won't exceed the bounds.EDIT: added a decrement in the if statement.Although your question is about deleting elements from the array being iterated upon and not about removing elements (in addition to some other processing) efficiently, I think one should reconsider it if in similar situation.The algorithmic complexity of this approach is O(n^2) as splice function and the for loop both iterate over the array (splice function shifts all elements of array in the worst case). Instead you can just push the required elements to the new array and then just assign that array to the desired variable (which was just iterated upon).Since ES2015 we can use Array.prototype.filter to fit it all in one line:Another simple solution to digest an array elements once:If you are e using ES6+ - why not just use Array.filter method?  Note that modifying the array element during filter iteration only works for objects and will not work for array of primitive values.Here is another example for the proper use of splice. This example is about to remove 'attribute' from 'array'.To every person who has answered this very basic question with code having splice() in a loop, which has run time O(n2), or who has upvoted such an answer, during the seven years since this question was posted: you should be ashamed.Here is a simple linear time solution to this simple linear time problem.When I run this snippet, with n = 1 million, each call to filterInPlace() takes .013 to .016 seconds.  A quadratic solution (e.g. the accepted answer) would take a million times that, or so.Note that this modifies the original array in place rather than creating a new array; doing it in place like this can be advantageous, e.g. in the case that the array is the program's single memory bottleneck; in that case, you don't want to create another array of the same size, even temporarily.There are lot of wonderful answers on this thread already. However I wanted to share my experience when I tried to solve "remove nth element from array" in ES5 context. JavaScript arrays have different methods to add/remove elements from start or end. These are:Essentially none of the above methods can be used directly to remove nth element from the array. This basically leaves us with only one array method Array.splice to perform removal of nth element (there are other things you could do with these methods as well, but in the context of this question I am focusing on removal of elements):Here is the code copied from original answer (with comments):Another noteworthy method is Array.slice. However the return type of this method is the removed elements. Also this doesn't modify original array. Modified code snippet as follows:Having said that, we can still use Array.slice to remove nth element as shown below. However it is lot more code (hence inefficient) Try to relay an array into newArray when looping:Two examples that work:You can just look through and use shift()

AngularJS 1.2 $injector:modulerr

shoen

[AngularJS 1.2 $injector:modulerr](https://stackoverflow.com/questions/18287482/angularjs-1-2-injectormodulerr)

When using angular 1.2 instead of 1.07 the following piece of code is not valid anymore, why?the issue is in the injector configuration part (app.config):If I remember correctly this issue started with angular 1.1.6.

2013-08-17 09:56:56Z

When using angular 1.2 instead of 1.07 the following piece of code is not valid anymore, why?the issue is in the injector configuration part (app.config):If I remember correctly this issue started with angular 1.1.6.The problem was caused by missing inclusion of ngRoute module. Since version 1.1.6 it's a separate part:my error disappeared by adding this '()' at the endOne more thing to add to the list as this is the first result that comes up with a google search of 'Error: [$injector:modulerr] angular':If you have a mismatch between your app name in your 'index'html' and in your main javascript app definition this can also generate this error.For example if your HTML looks like this:And your JavaScript looks like this (i.e has a typo on app name - myWebCite instead of myWebSite):then the 'Error:[$injector:modulerr] angular' error will be generated also.A noob error can be forgetting to include the module js files in the index.html at allFor those using frameworks that compress, bundle, and minify files, make sure you define each dependency explicitly as these frameworks tend to rename your variables. That happened to me while using ASP.NET BundleConfig.cs to bundle my app scripts together.BeforeAfterRead more here about Angular Dependency Annotation.If you have this error in console ([$injector:nomod], MINERR_ASSET:22), make sure you are not including your application code before loading AngularJSI was doing that and once I fixed the order, the error went away.I have just experienced the same error, in my case it was caused by the second parameter in angular.module being missing- hopefully this may help someone with the same issue.angular.module('MyApp');angular.module('MyApp', []);I had the same problem and tried all possible solution. But finally I came to know from the documentation that ngRoute module is now separated. Have a look to this linkSolution:

Add the cdn angular-route.js after angular.min.js scriptAnother trigger for this error is leaving the "." out before your "otherwise" or any other route in your route definition:Mortified by a full-stop, yet again. Gotta love JS!Besides below answer, if you have this error in console ([$injector:nomod], MINERR_ASSET:22), but everything seems to work fine, make sure that you don't have duplicate includes in your index.html. Because this error can also be raised if you have duplicate includes of the files, that use this module, and are included before the file with actual module declaration.If you go through the official tutorial of angularjs https://docs.angularjs.org/tutorial/step_07Also please note from ngRoute api https://docs.angularjs.org/api/ngRouteJohn Papa provided my issue on this rather obscure comment: Sometimes when you get that error, it means you are missing a file. Other times it means the module was defined after it was used. One way to solve this easily is to name the module files *.module.js and load those first.My problem was in the config.xml. Changing:tofixed it.Its an injector error. You may have use lots of JavaScript files so the injector may be missing. Some are here: Please check the injector you need to insert in your app.jsSometime I have seen this error when you are switching between the projects and running the projects on the same port one after the other. In that case goto chrome Developer Tools > Network and try to check the actual written js file for: if the file match with the workspce. To resolve this select Disable Cache under network.After many months, I returned to develop an AngularJS (1.6.4) app, for which I chose Chrome (PC) and Safari (MAC) for testing during development. This code presented this Error: $injector:modulerr Module Error on IE 11.0.9600 (Windows 7, 32-bit). Upon investigation, it became clear that error was due to forEach loop being used, just replaced all the forEach loops with normal for loops for things to work as-is... It was basically an IE11 issue (answered here) rather than an AngularJS issue, but I want to put this reply here because the exception raised was an AngularJS exception. Hope it would help some of us out there.similarly. don't use lambda functions... just replace ()=>{...} with good ol' function(){...}I had this problem and after check my code line by line i saw thisi just changed it to and it's worked.

so check your tags.

How to replace plain URLs with links?

Sergio del Amo

[How to replace plain URLs with links?](https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links)

I am using the function below to match URLs inside a given text and replace them for HTML links. The regular expression is working great, but currently I am only replacing the first match.How I can replace all the URL? I guess I should be using the exec command, but I did not really figure how to do it.

2008-09-01 09:58:49Z

I am using the function below to match URLs inside a given text and replace them for HTML links. The regular expression is working great, but currently I am only replacing the first match.How I can replace all the URL? I guess I should be using the exec command, but I did not really figure how to do it.First off, rolling your own regexp to parse URLs is a terrible idea. You must imagine this is a common enough problem that someone has written, debugged and tested a library for it, according to the RFCs. URIs are complex - check out the code for URL parsing in Node.js and the Wikipedia page on URI schemes.There are a ton of edge cases when it comes to parsing URLs: international domain names, actual (.museum) vs. nonexistent (.etc) TLDs, weird punctuation including parentheses, punctuation at the end of the URL, IPV6 hostnames etc.I've looked at a ton of libraries, and there are a few worth using despite some downsides:Libraries that I've disqualified quickly for this task:If you insist on a regular expression, the most comprehensive is the URL regexp from Component, though it will falsely detect some non-existent two-letter TLDs by looking at it.The regular expression in the question misses a lot of edge cases. When detecting URLs, it's always better to use a specialized library that handles international domain names, new TLDs like .museum, parentheses and other punctuation within and at the end of the URL, and many other edge cases. See the Jeff Atwood's blog post The Problem With URLs for an explanation of some of the other issues. Add a "g" to the end of the regular expression to enable global matching:But that only fixes the problem in the question where the regular expression was only replacing the first match. Do not use that code.I've made some small modifications to Travis's code (just to avoid any unnecessary redeclaration - but it's working great for my needs, so nice job!):Made some optimizations to Travis' Linkify() code above. I also fixed a bug where email addresses with subdomain type formats would not be matched (i.e. example@domain.co.uk).In addition, I changed the implementation to prototype the String class so that items can be matched like so:Anyway, here's the script:Thanks, this was very helpful. I also wanted something that would link things that looked like a URL -- as a basic requirement, it'd link something like www.yahoo.com, even if the http:// protocol prefix was not present. So basically, if "www." is present, it'll link it and assume it's http://. I also wanted emails to turn into mailto: links. EXAMPLE:  www.yahoo.com would be converted to www.yahoo.comHere's the code I ended up with (combination of code from this page and other stuff I found online, and other stuff I did on my own):In the 2nd replace, the (^|[^/]) part is only replacing www.whatever.com if it's not already prefixed by // -- to avoid double-linking if a URL was already linked in the first replace. Also, it's possible that www.whatever.com might be at the beginning of the string, which is the first "or" condition in that part of the regex.This could be integrated as a jQuery plugin as Jesse P illustrated above -- but I specifically wanted a regular function that wasn't acting on an existing DOM element, because I'm taking text I have and then adding it to the DOM, and I want the text to be "linkified" before I add it, so I pass the text through this function. Works great.Identifying URLs is tricky because they are often surrounded by punctuation marks and because users frequently do not use the full form of the URL. Many JavaScript functions exist for replacing URLs with hyperlinks, but I was unable to find one that works as well as the urlize filter in the Python-based web framework Django. I therefore ported Django's urlize function to JavaScript:An example:The second argument, if true, causes rel="nofollow" to be inserted. The third argument, if true, escapes characters that have special meaning in HTML. See the README file.I made a change to Roshambo String.linkify() to the emailAddressPattern to recognize aaa.bbb.@ccc.ddd addressesI searched on google for anything newer and ran across this one:demo: http://jsfiddle.net/kachibito/hEgvc/1/Works really well for normal links.The best script to do this:

http://benalman.com/projects/javascript-linkify-process-lin/This solution works like many of the others, and in fact uses the same regex as one of them, however in stead of returning a HTML String this will return a document fragment containing the A element and any applicable text nodes. There are some caveats, namely with older IE and textContent support. here is a demo.If you need to show shorter link (only domain), but with same long URL, you can try my modification of Sam Hasler's code version posted aboveReg Ex: 

/(\b((https?|ftp|file):\/\/|(www))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]*)/igBelow are some tested string: Note: If you don't want to pass www as valid one just use below reg ex: 

/(\b((https?|ftp|file):\/\/|(www))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/igThe warnings about URI complexity should be noted, but the simple answer to your question is:

To replace every match you need to add the /g flag to the end of the RegEx:

/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/giKeep it simple! Say what you cannot have, rather than what you can have :)As mentioned above, URLs can be quite complex, especially after the '?', and not all of them start with a 'www.' e.g. maps.bing.com/something?key=!"Â£$%^*()&lat=65&lon&lon=20So, rather than have a complex regex that wont meet all edge cases, and will be hard to maintain, how about this much simpler one, which works well for me in practise.Matchhttp(s):// (anything but a space)+www. (anything but a space)+Where 'anything' is [^'"<>\s]

... basically a greedy match, carrying on to you meet a space, quote, angle bracket, or end of line Also:Remember to check that it is not already in URL format, e.g. the text contains href="..." or src="..."Add ref=nofollow (if appropriate)This solution isn't as "good" as the libraries mentioned above, but is much simpler, and works well in practise.Correct URL detection with international domains & astral characters support is not trivial thing. linkify-it library builds regex from many conditions, and final size is about 6 kilobytes :) . It's more accurate than all libs, currently referenced in accepted answer.See linkify-it demo to check live all edge cases and test your ones.If you need to linkify HTML source, you should parse it first, and iterate each text token separately.simple exampleI've wrote yet another JavaScript library, it might be better for you since it's very sensitive with the least possible false positives, fast and small in size. I'm currently actively maintaining it so please do test it in the demo page and see how it would work for you.link: https://github.com/alexcorvi/anchorme.jsI had to do the opposite, and make html links into just the URL, but I modified your regex and it works like a charm, thanks :) The e-mail detection in Travitron's answer above did not work for me, so I extended/replaced it with the following (C# code).This allows for e-mail addresses like "firstname.secondname@one.two.three.co.uk".After input from several sources I've now a solution that works well.  It had to do with writing your own replacement code.Answer.Fiddle.Replace URLs in text with HTML links, ignore the URLs within a href/pre tag. 

https://github.com/JimLiu/auto-linkHere's my solution:Try the below function :alert(anchorify("Hola amigo! https://www.sharda.ac.in/academics/"));Try Below Solution

Parse Error: Adjacent JSX elements must be wrapped in an enclosing tag

user1072337

[Parse Error: Adjacent JSX elements must be wrapped in an enclosing tag](https://stackoverflow.com/questions/31284169/parse-error-adjacent-jsx-elements-must-be-wrapped-in-an-enclosing-tag)

I am trying to set up my React.js app so that it only renders if a variable I have set is true.  The way my render function is set up looks like:Basically, the important portion here is the if(this.state.submitted==false) portion (I want these div elements to show up when the submitted variable is set to false).  But when running this, I get the error in the question:What is the issue here?  And what can I use to make this work?

2015-07-08 05:28:28Z

I am trying to set up my React.js app so that it only renders if a variable I have set is true.  The way my render function is set up looks like:Basically, the important portion here is the if(this.state.submitted==false) portion (I want these div elements to show up when the submitted variable is set to false).  But when running this, I get the error in the question:What is the issue here?  And what can I use to make this work?You should put your component between an enclosing tag, Which means:Instead:Edit: Per Joe Clay's comment about the Fragments APIIt is late to answer this question but I thought It will add to the explanation.It is happening because any where in your code you are returning two elements simultaneously.e.gIt should be wrapped in a parent element. e.gYour below jsx code get transformed  into thisBut if you do thisthis gets converted into this(Just for illustration purpose, actually you will get error : Adjacent JSX elements must be wrapped in an enclosing tag)In the above code you can see that you are trying to return twice from a method call, which is obviously wrong.Edit- Latest changes in React 16 and own-wards:If you do not want to add extra div to wrap around and want to return more than one child components you can go with React.Fragments.React.Fragments are little bit faster and has less memory usage (no need to create an extra DOM node, less cluttered DOM tree).e.g (In React 16.2.0)ororReact element has to return only one element. You'll have to wrap both of your tags with another element tag.I can also see that your render function is not returning anything. This is how your component should look like:Also note that you can't use if statements inside of a returned element:If you don't want to wrap it in another div as other answers have suggested, you can also wrap it in an array and it will work.It can be written as:Please note that the above will generate a warning: Warning: Each child in an array or iterator should have a unique "key" prop. Check the render method of 'YourComponent'. This can be fixed by adding a key attribute to the components, if manually adding these add it like:Here is some more information on keys:Composition vs Inheritance This means that you are trying to return multiple sibling JSX elements in an incorrect manner. Remember that you are not writing HTML, but JSX! Your code is transpiled from JSX into JavaScript. For example:will be transpiled into:Unless you are new to programming in general, you already know that functions/methods (of any language) take any number of parameters but always only return one value. Given that, you can probably see that a problem arises when trying to return multiple sibling components based on how createElement() works; it only takes parameters for one element and returns that. Hence we cannot return multiple elements from one function call.So if you've ever wondered why this works...but not this...it's because in the first snippet, both <p>-elements are part of children of the <div>-element. When they are part of children then we can express an unlimited number of sibling elements. Take a look how this would transpile:Depending on which version of React you are running, you do have a few options to address this:React 16.0.0 we can return multiple components from render as an array.React 16.4.0 we can return multiple components from render in a Fragment tag. FragmentFuture React you wil be able to use this shorthand syntax. (many tools donâ€™t support it yet so you might want to explicitly write <Fragment> until the tooling catches up.)If you do not wrap your component then you can write it as mentioned below method.Instead of:you can write this:it's very simple we can use a parent element div to wrap all the element 

or we can use the Higher Order Component( HOC's ) concept i.e very useful for 

react js applicationsor another best way is HOC its very simple not very complicated

just add a file hoc.js in your project and simply add these codesnow import hoc.js file where you want to use, now instead of wrapping with div 

element we can wrap with hoc.There is a rule in react that a JSX expression must have exactly one outermost element.wrongcorrectReact 16 gets your return as an array so it should be wrapped by one element like div.Wrong ApproachRight Approach (All elements in one div or other element you are using)React components must wrapperd in single container,that may be any tag 

e.g. "< div>.. < / div>"You can check render method of ReactCSSTransitionGroup  Import view and wrap in View. Wrapping in a div did not work for me.Invalid: Not only child elementsValid: Root element under child elementsFor Rect-Native developers. I encounter this error while renderingItem in FlatList. I had two Text components. I was using them like belowBut after I put these tow Inside View Components it worked for me.You might be using other components but putting them into View may be worked for you.I think the complication may also occur when trying to nest multiple Divs within the return statement. You may wish to do this to ensure your components render as block elements. Here's an example of correctly rendering a couple of components, using multiple divs. I had a problem that generated this error that was not all together obvious.And here was the fix... Go figure. Info shared here in case others hit this bump.  Apparently, you can't have an element class name the same as its React parent function name.  

What do multiple arrow functions mean in javascript?

jhamm

[What do multiple arrow functions mean in javascript?](https://stackoverflow.com/questions/32782922/what-do-multiple-arrow-functions-mean-in-javascript)

I have been reading a bunch of react code and I see stuff like this that I don't understand:

2015-09-25 13:06:31Z

I have been reading a bunch of react code and I see stuff like this that I don't understand:That is a curried functionFirst, examine this function with two parameters â€¦Here it is again in curried form â€¦Here is the same1 code without arrow functions â€¦Focus on returnIt might help to visualize it another way. We know that arrow functions work like this â€“ let's pay particular attention to the return value.So our add function returns a function â€“ we can use parentheses for added clarity. The bolded text is the return value of our function addIn other words add of some number returns a functionCalling curried functionsSo in order to use our curried function, we have to call it a bit differently â€¦This is because the first (outer) function call returns a second (inner) function. Only after we call the second function do we actually get the result. This is more evident if we separate the calls on two lines â€¦Applying our new understanding to your codeOK, now that we understand how that works, let's look at your codeWe'll start by representing it without using arrow functions â€¦However, because arrow functions lexically bind this, it would actually look more like this â€¦Maybe now we can see what this is doing more clearly. The handleChange function is creating a function for a specified field. This is a handy React technique because you're required to setup your own listeners on each input in order to update your applications state. By using the handleChange function, we can eliminate all the duplicated code that would result in setting up change listeners for each field. Cool!1 Here I did not have to lexically bind this because the original add function does not use any context, so it is not important to preserve it in this case.Even more arrowsMore than two arrow functions can be sequenced, if necessary -Curried functions are capable of surprising things. Below we see $ defined as a curried function with two parameters, yet at the call site, it appears as though we can supply any number of arguments. Currying is the abstraction of arity -Partial applicationPartial application is a related concept. It allows us to partially apply functions, similar to currying, except the function does not have to be defined in curried form -Here's a working demo of partial you can play with in your own browser -Understanding the available syntaxes of arrow functions will give you an understanding of what behaviour they are introducing when 'chained' like in the examples you provided.When an arrow function is written without block braces, with or without multiple parameters, the expression that constitutes the function's body is implicitly returned. In your example, that expression is another arrow function.Another advantage of writing anonymous functions using the arrow syntax is that they are bound lexically to the scope in which they are defined. From 'Arrow functions' on MDN:This is particularly pertinent in your example considering that it is taken from a reactjs application. As as pointed out by @naomik, in React you often access a component's member functions using this. For example:A general tip , if you get confused by any of new JS syntax and how it will compile , you can check babel. For example copying your code in babel and selecting the es2015 preset will give an output like thisThink of it like this, every time you see a arrow, you replace it with function.function parameters are defined before the arrow.

So in your example:and then together:From the docs:Brief and simple ðŸŽˆIt is a function which returns another function written in short way.Why people do it â“Have you faced when you need to write a function which can be customized?

Or you have to write a callback function which has fixed parameters (arguments),

but you need to pass more variables to the function but avoiding global variables?

If your answer "yes" then it is the way how to do it.For example we have a button with onClick callback. And we need to pass id to the function, but onClick accepts only one parameter event, we can not pass extra parameters within like this:It will not work!Therefore we make a function which will return other function with its own scope of variables without any global variables, because global variables are evil ðŸ˜ˆ.Below the function handleClick(props.id)} will be called and return a function and it will have id in its scope! No matter how many times it will be pressed the ids will not effect or change each other, they are totally isolated.The example in your question is that of a curried function which makes use of arrow function and has an implicit return for the first argument.Arrow function lexically bind this i.e they do not have their own this argument but take the this value from the enclosing scopeAn equivalent of the above code would beOne more thing to note about your example is that define handleChange as a const or a function. Probably you are using it as part of a class method and it uses a class fields syntaxso instead of binding the outer function directly, you would bind it in the class constructorAnother thing to note in the example is the difference between implicit and explicit return.Above is an example of implicit return ie. it takes the value field as argument and returns the result field*2 which explicitly specifying the function to returnFor an explicit return you would explicitly tell the method to return the valueAnother thing to note about arrow functions is that they do not have their own arguments but inherit that from the parents scope as well.For example if you just define an arrow function likeAs an alternative arrow functions provide the rest parameters that you can useIt might be not totally related, but since the question mentioned react uses case (and I keep bumping into this SO thread): There is one important aspect of the double arrow function which is not explicitly mentioned here.

Only the 'first' arrow(function) gets named (and thus 'distinguishable' by the run-time), any following arrows are anonymous and from React point of view count as a 'new' object on every render.Thus double arrow function will cause any PureComponent to rerender all the time.ExampleYou have a parent component with a change handler as:and with a render like:{

   tasks.map(task => <MyTask handleChange={this.handleChange(task)}/>

}handleChange then used on an input or click. And this all works and looks very nice. BUT it means that any change that will cause the parent to rerender (like a completely unrelated state change) will also re-render ALL of your MyTask as well even though they are PureComponents.This can be alleviated many ways such as passing the 'outmost' arrow and the object you would feed it with or writing a custom shouldUpdate function or going back to basics such as writing named functions (and binding the this manually...)

jQuery Set Cursor Position in Text Area

jcnnghm

[jQuery Set Cursor Position in Text Area](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)

How do you set the cursor position in a text field using jQuery?  I've got a text field with content, and I want the users cursor to be positioned at a certain offset when they focus on the field.  The code should look kind of like this:What would the implementation of that setCursorPosition function look like?  If you had a text field with the content abcdefg, this call would result in the cursor being positioned as follows: abcd**|**efg.Java has a similar function, setCaretPosition.  Does a similar method exist for javascript?Update: I modified CMS's code to work with jQuery as follows:

2009-01-31 16:39:11Z

How do you set the cursor position in a text field using jQuery?  I've got a text field with content, and I want the users cursor to be positioned at a certain offset when they focus on the field.  The code should look kind of like this:What would the implementation of that setCursorPosition function look like?  If you had a text field with the content abcdefg, this call would result in the cursor being positioned as follows: abcd**|**efg.Java has a similar function, setCaretPosition.  Does a similar method exist for javascript?Update: I modified CMS's code to work with jQuery as follows:I have two functions:Then you can use setCaretToPos like this:Live example with both a textarea and an input, showing use from jQuery:As of 2016, tested and working on Chrome, Firefox, IE11, even IE8 (see that last here; Stack Snippets don't support IE8).Here's a jQuery solution:With this, you can doThe solutions here are right except for the jQuery extension code.The extension function should iterate over each selected element and return this to support chaining. Here is the a correct version:I found a solution that works for me:Now you can move the focus to the end of any element by calling:Or you specify the position.This worked for me on Safari 5 on Mac OSX, jQuery 1.4:I do realize that this is a very old post, but I thought that I should offer perhaps a simpler solution to update it using only jQuery.Usage for using ctrl-enter to add a new line (like in Facebook):I am open to critique. Thank you.UPDATE: This solution does not allow normal copy and paste functionality to work (i.e. ctrl-c, ctrl-v), so I will have to edit this in the future to make sure that part works again. If you have an idea how to do that, please comment here, and I will be happy to test it out. Thanks.I'm using this: http://plugins.jquery.com/project/jCaretIn IE to move cursor on some position this code is enough:Set the focus before you have inserted the text into the textarea thus?This works for me in chromeApparently you need a delay of a microsecond or more, because usually a user focusses on the text field by clicking at some position in the text field (or by hitting tab) which you want to override, so you have to wait till the position is set by the user click and then change it.Small modification to the code I found in bitbucketCode is now able to select/highlight with start/end points if given 2 positions.

Tested and works fine in FF/Chrome/IE9/Opera.The code is listed below, only a few lines changed:Just remember to return false right after the function call if you're using the arrow keys since Chrome fricks the frack up otherwise.Based on this question, the answer will not work perfectly for ie and opera when there is new line in the textarea. 

The answer explain how to adjust the selectionStart, selectionEnd before calling setSelectionRange.I have try the adjustOffset from the other question with the solution proposed by @AVProgrammer and it work.I had to get this working for contenteditable elements and jQuery and tought someone might want it ready to use:Usage $(selector).getCaret() returns the number offset and $(selector).setCaret(num) establishes the offeset and sets focus on element.Also a small tip, if you run $(selector).setCaret(num) from console it will return the console.log but you won't visualize the focus since it is established at the console window.Bests ;DYou can directly change the prototype if setSelectionRange does not exist.jsFiddle link

JavaScript: How do I print a message to the error console?

Mark Harrison

[JavaScript: How do I print a message to the error console?](https://stackoverflow.com/questions/164397/javascript-how-do-i-print-a-message-to-the-error-console)

How can I print a message to the error console, preferably including a variable? For example, something like:

2008-10-02 20:23:55Z

How can I print a message to the error console, preferably including a variable? For example, something like:Install Firebug and then you can use console.log(...) and console.debug(...), etc. (see the documentation for more).You also can add CSS to your logging messages:Exceptions are logged into the JavaScript console. You can use that if you want to keep Firebug disabled.Usage:One good way to do this that works cross-browser is outlined in Debugging JavaScript: Throw Away Your Alerts!.If you use Safari, you can writeand it appears right on the console of the browser.Here is a solution to the literal question of how to print a message to the browser's error console, not the debugger console.  (There might be good reasons to bypass the debugger.)As I noted in comments about the suggestion to throw an error to get a message in the error console, one problem is that this will interrupt the thread of execution.  If you don't want to interrupt the thread, you can throw the error in a separate thread, one created using setTimeout.  Hence my solution (which turns out to be an elaboration of the one by Ivo Danihelka):I include the time in milliseconds since the start time because the timeout could skew the order in which you might expect to see the messages.  The second argument to the Error method is for the filename, which is an empty string here to prevent output of the useless filename and line number.  It is possible to get the caller function but not in a simple browser independent way.  It would be nice if we could display the message with a warning or message icon instead of the error icon, but I can't find a way to do that.Another problem with using throw is that it could be caught and thrown away by an enclosing try-catch, and putting the throw in a separate thread avoids that obstacle as well.  However, there is yet another way the error could be caught, which is if the window.onerror handler is replaced with one that does something different.  Can't help you there.To actually answer the question:Instead of error, you can also use info, log or warn.If you are using Firebug and need to support IE, Safari or Opera as well, Firebug Lite adds console.log() support to these browsers.The WebKit Web Inspector also supports Firebug's console API (just a minor addition to Dan's answer).A note about 'throw()' mentioned above. It seems that it stops execution of the page completely (I checked in IE8) , so it's not very useful for logging "on going processes" (like to track a certain variable...)My suggestion is perhaps to add a textarea element somewhere in your document and to change (or append to) its value (which would change its text) for logging information whenever needed...As always, InternetÂ Explorer is the big elephant in rollerskates that stops you just simply using console.log().jQuery's log can be adapted quite easily, but is a pain having to add it everywhere. One solution if you're using jQuery is to put it into your jQuery file at the end, minified first:Visit https://developer.chrome.com/devtools/docs/console-api for a complete console api referenceIn this case, object would be your error stringworking for me.. i'm searching for this.. i used Firefox.

here is my Script.works in Firefox and Chrome.The simplest way to do this is:This does not print to the Console, but will open you an alert Popup with your message which might be useful for some debugging:just do:With es6 syntax you can use:To answer your question you can use ES6 features,

What's the meaning ofã€Œ=>ã€(an arrow formed from equals & greater than) in JavaScript?

rpgs_player

[What's the meaning ofã€Œ=>ã€(an arrow formed from equals & greater than) in JavaScript?](https://stackoverflow.com/questions/24900875/whats-the-meaning-of-an-arrow-formed-from-equals-greater-than-in-javas)

I know that the >= operator means more than or equal to, but I've seen => in some source code. What's the meaning of that operator?Here's the code:

2014-07-23 02:27:02Z

I know that the >= operator means more than or equal to, but I've seen => in some source code. What's the meaning of that operator?Here's the code:This is an arrow function. Arrow functions are a short syntax, introduced by ECMAscript 6, that can be used similarly to the way you would use function expressions. In other words, you can often use them in place of expressions like function (foo) {...}. But they have some important differences. For example, they do not bind their own values of this (see below for discussion).Arrow functions are part of the ECMAscript 6 specification. They are not yet supported in all browsers, but they are partially or fully supported in Node v. 4.0+ and in most modern browsers in use as of 2018. (Iâ€™ve included a partial list of supporting browsers below).You can read more in the Mozilla documentation on arrow functions.From the Mozilla documentation:One of the most handy features of an arrow function is buried in the text above:What this means in simpler terms is that the arrow function retains the this value from its context and does not have its own this. A traditional function may bind its own this value, depending on how it is defined and called. This can require lots of gymnastics like self = this;, etc., to access or manipulate this from one function inside another function. For more info on this topic, see the explanation and examples in the Mozilla documentation.Example (also from the docs):You can use arrow functions in Node, but browser support is spotty.Browser support for this functionality has improved quite a bit, but it still is not widespread enough for most browser-based usages. As of December 12, 2017, it is supported in current versions of:Not supported in:You can find more (and more current) information at CanIUse.com (no affiliation).That's known as an Arrow Function, part of the ECMAScript 2015 spec...Shorter syntax than the previous:DEMOThe other awesome thing is lexical this... Usually, you'd do something like:But that could be rewritten with the arrow like this:DEMOMDN

More on SyntaxFor more, here's a pretty good answer for when to use arrow functions.This would be the "arrow function expression" introduced in ECMAScript 6.https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/arrow_functionsFor historical purposes (if the wiki page changes later), it is:just to add another example of what a lambda can do without using map:Also known as Fat Arrow Functions. They're a clean and consise way to write function expressions, e.g. function() {}.Arrow Functions can remove the need of function, return and {} when defining functions. They are one-liners, similar to Lambda Expressions in Java or Python.If multiple statements need to be made within the same Arrow Function, you need to wrap, in this example, queue[0] in curley brackets {}. In this case the return statement cannot be omitted.You can omit {} from the above.When there is a single parameter, the brackets () around the parameter can be omitted.If we wanted to get the price of every fruit in a single array, in ES5 we could do:In ES6 with the new Arrow Functions, we can make this more concise:Additional information on Arrow Functions can be found here.Additional up-to-date information can be found on browser compatibility hereAs others have said, it's a new syntax to create functions.However, this kind of functions differ from normal ones:I've read, this is a symbol of Arrow Functions in ES6this using Arrow Function can be written asMDN DocsAdding simple CRUD example with ArrowfunctionDissatisfied with the other answers. The top voted answer as of 2019/3/13 is factually wrong.The short terse version of what => means is it's a shortcut writing a function AND for binding it to the current thisIs effectively a shortcut forYou can see all the things that got shortened. We didn't need function, nor return nor .bind(this) nor even braces or parentheses A slightly longer example of an arrow function might beShowing that if we want multiple arguments to the function we need parentheses and if we want write more than a single expression we need braces and an explicit return.It's important to understand the .bind part and it's a big topic. It has to do with what this means in JavaScript.ALL functions have an implicit parameter called this. How this is set when calling a function depends on how that function is called. Take If you call it normallythis will be the global object. If you're in strict mode It will be undefinedYou can set this directly using call or applyYou can also set this implicitly using the dot operator .A problem comes up when you want to use a function as a callback or a listener. You make class and want to assign a function as the callback that accesses an instance of the class.The code above will not work because when the element fires the event and calls the function the this value will not be the instance of the class.One common way to solve that problem is to use .bindBecause the arrow syntax does the same thing we can writebind effectively makes a new function. If bind did not exist you could basically make your own like thisIn older JavaScript without the spread operator it would beUnderstanding that code requires an understanding of closures but the short version is bind makes a new function that always calls the original function with the this value that was bound to it. arrow function do the same thing since they are a shortcut for bind(this)As all of the other answers have already said, it's part of ES2015 arrow function syntax. More specifically, it's not an operator, it's a punctuator token that separates the parameters from the body: ArrowFunction : ArrowParameters => ConciseBody. E.g. (params) => { /* body */ }.In javascript the => is the symbol of an arrow function expression. A arrow function expression does not have its own this binding and therefore cannot be used as a constructor function. for example:For example:Arrow functions which is denoted by symbol (=>) helps you to create anonymous functions and methods. That leads to more shorter syntax. For example, below is a simpleã€ŒAddã€function which returns addition of two numbers.The above function becomes shorter by usingã€ŒArrowã€syntax as shown below.Above code has two parts as shown in the above diagram: -Input:â€Šâ€”â€ŠThis section specifies the input parameters to the anonymous function.Logic:â€Šâ€”â€ŠThis section comes after the symbolã€Œ=>ã€. This section has the logic of the actual function.Many developers think that arrow function makes your syntax shorter, simpler and thus makes your code readable.If you believe the above sentence, then let me assure you itâ€™s a myth. If you think for a moment a properly written function with name is much readable than cryptic functions created in one line using an arrow symbol.See the below code in which have a global variable "context" defined , this global variable is accessed inside a function "SomeOtherMethod" which is called from other method "SomeMethod".This "SomeMethod" has local "context" variable. Now because "SomeOtherMethod" is called from ""SomeMethod" we expect it to display "local context" , but it displays "global context".But if replace the call by using Arrow function it will display "local context".I would encourage you to read this link ( Arrow function in JavaScript ) which explain all the scenarios of javascript context and in which scenarios the callers context is not respected.You can also see the demonstration of Arrow function with javascript in this youtube video which demonstrates practically the term Context.As others have stated, regular (traditional) functions use this from the object that called the function, (e.g. a button that was clicked). Instead, arrow functions use this from the object that defines the function.Consider two almost identical functions:The snippet below demonstrates the fundamental difference between what this represents for each function.  The regular function outputs [object HTMLButtonElement] whereas the arrow function outputs [object Window]. 

JavaScript for detecting browser language preference [duplicate]

Annibigi

[JavaScript for detecting browser language preference [duplicate]](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)

I have been trying to detect the browser language preference using JavaScript.If I set the browser language in IE in Tools>Internet Options>General>Languages, how do I read this value using JavaScript?Same problem for Firefox. I'm not able to detect the setting for tools>options>content>languages using navigator.language.Using  navigator.userLanguage  , it detects the setting done thru

Start>ControlPanel>RegionalandLanguageOptions>Regional Options tab.I have tested with navigator.browserLanguage and navigator.systemLanguage but neither  returns the value for the first setting(Tools>InternetOptions>General>Languages)I found a link which discusses this in detail, but the question remains unanswered :(

2009-06-25 11:08:11Z

I have been trying to detect the browser language preference using JavaScript.If I set the browser language in IE in Tools>Internet Options>General>Languages, how do I read this value using JavaScript?Same problem for Firefox. I'm not able to detect the setting for tools>options>content>languages using navigator.language.Using  navigator.userLanguage  , it detects the setting done thru

Start>ControlPanel>RegionalandLanguageOptions>Regional Options tab.I have tested with navigator.browserLanguage and navigator.systemLanguage but neither  returns the value for the first setting(Tools>InternetOptions>General>Languages)I found a link which discusses this in detail, but the question remains unanswered :(I think the main problem here is that the browser settings don't actually affect the navigator.language property that is obtained via javascript. What they do affect is the HTTP 'Accept-Language' header, but it appears this value is not available through javascript at all. (Probably why @anddoutoi states he can't find a reference for it that doesn't involve server side.)I have coded a workaround: I've knocked up a google app engine script at http://ajaxhttpheaders.appspot.com that will return you the HTTP request headers via JSONP.(Note: this is a hack only to be used if you do not have a back end available that can do this for you. In general you should not be making calls to  third party hosted javascript files in your pages unless you have a very high level of trust in the host.)I intend to leave it there in perpetuity so feel free to use it in your code.Here's some example code (in jQuery) for how you might use itHope someone finds this useful.Edit: I have written a small jQuery plugin on github that wraps this functionality: https://github.com/dansingerman/jQuery-Browser-LanguageEdit 2: As requested here is the code that is running on AppEngine (super trivial really):Edit3: Have open sourced the app engine code here: https://github.com/dansingerman/app-engine-headerswindow.navigator.userLanguage is IE only and it's the language set in Windows Control Panel - Regional Options and NOT browser language, but you could suppose that a user using a machine with Window Regional settings set to France is probably a French user.navigator.language is FireFox and all other browser.Some language code: 'it' = italy, 'en-US' = english US, etc.As pointed out by rcoup and The WebMacheter in comments below, this workaround won't let you discriminate among English dialects when users are viewing website in browsers other than IE.window.navigator.language (Chrome/FF/Safari) returns always browser language and not browser's preferred language, but: "it's pretty common for English speakers (gb, au, nz, etc) to have an en-us version of Firefox/Chrome/Safari." Hence window.navigator.language will still return en-US even if the user preferred language is en-GB.Update of year 2014.Now there is a way to get Accept-Languages in Firefox and Chrome using navigator.languages  (works in Chrome >= 32 and Firefox >= 32)Also, navigator.language in Firefox these years reflects most preferred language of content, not language of UI. But since this notion is yet to be supported by other browsers, it is not very useful.So, to get most preferred content language when possible, and use UI language as fallback:I came across this piece of code to detect browser's language in Angular Translate module, which you can find the source here. I slightly modified the code by replacing angular.isArray with Array.isArray to make it independent of Angular library.

Try PWA Template https://github.com/StartPolymer/progressive-web-app-templateI only needed the primary component for my needs, but you can easily just use the full string. Works with latest Chrome, Firefox, Safari and IE10+.navigator.userLanguage for IEwindow.navigator.language for firefox/opera/safariThere is no decent way to get that setting, at least not something browser independent.But the server has that info, because it is part of the HTTP request header (the Accept-Language field, see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)So the only reliable way is to get an answer back from the server. You will need something that runs on the server (like .asp, .jsp, .php, CGI) and that "thing" can return that info.

Good examples here: http://www.developershome.com/wap/detection/detection.asp?page=readHeaderI've been using Hamid's answer for a while, but it in cases where the languages array is like ["en", "en-GB", "en-US", "fr-FR", "fr", "en-ZA"] it will return "en", when "en-GB" would be a better match.My update (below) will return the first long format code e.g. "en-GB", otherwise it will return the first short code e.g. "en", otherwise it will return null.Update: IE11 was erroring when some properties were undefined.  Added a check to skip those properties.I've just come up with this. It combines newer JS destructuring syntax with a few standard operations to retrieve the language and locale.Hope it helps someoneI can't find a single reference that state that it's possible without involving the serverside.MSDN on:From browserLanguage:Furthermore, it looks like browserLanguage is deprecated cause IE8 doesn't list itJavascript way:If you are using jQuery.i18n plugin, you can use:If you are developing a Chrome App / Extension use the chrome.i18n API.I had the same problem, and I wrote the following front-end only library that wraps up the code for multiple browsers. It's not much code, but nice to not have to copy and paste the same code across multiple websites.Get it: acceptedlanguages.jsUse it:It always returns an array, ordered by users preference. In Safari & IE the array is always single length. In FF and Chrome it may be more than one language.DanSingerman has a very good solution for this question.The only reliable source for the language is in the HTTP-request header.

So you need a server-side script to reply the request-header or at least the Accept-Language field back to you.Here is a very simple Node.js server which should be compatible with DanSingermans jQuery plugin.For what it's worth, Wikimedia's Universal Language Selector library has hooks for doing this:

https://www.mediawiki.org/wiki/Extension:UniversalLanguageSelectorSee the function getFrequentLanguageList in resources/js/ext.uls.init.js . Direct link:

https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/extensions/UniversalLanguageSelector.git;a=blob;f=resources/js/ext.uls.init.js;hb=HEADIt still depends on the server, or more specifically, the MediaWiki API. The reason I'm showing it is that it may provide a good example of getting all the useful information about the user's language: browser language, Accept-Language, geolocation (with getting country/language info from the CLDR), and of course, user's own site preferences.If you only need to support certain modern browsers then you can now use:which returns an array of the user's language preferences in the order specified by the user.As of now (Sep 2014) this works on:

Chrome (v37), 

Firefox (v32) and 

Opera (v24)But not on:

IE (v11)First of all, excuse me for my English.

I would like to share my code, because it works and it is different than the others given anwers. 

In this exemple,if you speak French (France, Belgium or other french language) you are redirected on the french page, otherwise on the english page, depending on the browser configuration :Dan Singerman's answer has an issue that the header fetched has to be used right away, due to the asynchronous nature of jQuery's ajax.  However, with his google app server, I wrote the following, such that the header is set as part of the initial set up and can be used at later time.If you don't want to rely on an external server and you have one of your own you can use a simple PHP script to achieve the same behavior as @DanSingerman answer.languageDetector.php:And just change this lines from the jQuery script:If you have control of a backend and are using django, a 4 line implementation of Dan's idea is:then in urls.py:and on the front end:(you have to set DEFAULT_LANG in settings.py of course)Based on the answer here Accessing the web page's HTTP Headers in JavaScript I built the following script to get the browser language:If you are using ASP .NET MVC and you want to get the Accepted-Languages header from JavaScript then here is a workaround example that does not involve any asynchronous requests.In your .cshtml file, store the header securely in a div's data- attribute:Then your JavaScript code can access the info, e.g. using JQuery:Of course you can use a similar approach with other server technologies as others have mentioned.For who are looking for Java Server solutionHere is RestEasyi had a diffrent approach, this might help someone in the future:the customer wanted a page where you can swap languages.

i needed to format numbers by that setting (not the browser setting / not by any predefined setting)so i set an initial setting depending on the config settings (i18n)later in the script i used a function to determine what numberformating i needso i used the set language of the page and as a fallback i used the browser settings.which should be helpfull for testing purposes aswell.depending on your customers you might not need that settings.I have a hack that I think uses very little code and is quite reliable.Put your site's files in a subdirectory. SSL into your server and create symlinks to that subdirectory where your files are stored that indicate your languages.Something like this:Use your web server to read HTTP_ACCEPT_LANGUAGE and redirect to these "different subdirectories" according to the language value it provides.Now you can use Javascript's window.location.href to get your url and use it in conditionals to reliably identify the preferred language.

Google Maps API v3: How to remove all markers?

mp_

[Google Maps API v3: How to remove all markers?](https://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers)

In Google Maps API v2, if I wanted to remove all the map markers, I could simply do:How do I do this in Google Maps API v3?Looking at the Reference API, it's unclear to me.

2009-10-09 16:13:53Z

In Google Maps API v2, if I wanted to remove all the map markers, I could simply do:How do I do this in Google Maps API v3?Looking at the Reference API, it's unclear to me.Simply do the following:I. Declare a global variable:II. Define a function:ORIII. Push markers in the 'markerArray' before calling the following:IV. Call the clearOverlays(); or map.clearOverlays(); function wherever required.That's it!!Same problem. This code doesn't work anymore.I've corrected it, change clearMarkers method this way:set_map(null) ---> setMap(null)Documentation has been updated to include details on the topic: https://developers.google.com/maps/documentation/javascript/markers#removeIt seems that there is no such function in V3 yet.People suggest to keep references to all markers you have on the map in an array. And then when you want to delete em all, just loop trough the array and call .setMap(null) method on each of the references.See this question for more info/code.My version:The code is edited version of this code http://www.lootogo.com/googlemapsapi3/markerPlugin.html I removed the need to call addMarker  manually.ProsConsThis was the most simple of all the solutions originally posted by YingYang Mar 11 '14 at 15:049 under the original response to the users original questionI am using his same solution 2.5 years later with google maps v3.18 and it works like a charmI don't think there is one in V3 so I used the above custom implementation.Disclaimer:  I did not write this code but I forgot to retain a reference when I merged it into my codebase so I don't know where it came from.On the new version v3, They recommended to keep in arrays. as following. See sample at overlay-overview.Google's Demo Gallery has a demo on how they do it:http://code.google.com/apis/maps/documentation/javascript/examples/overlay-remove.htmlYou can view the source code to see how they add markers.  Long story short, they keep the markers in a global array.  When clearing/deleting them, they loop through the array and call ".setMap(null)" on the given marker object.However, this example shows one 'trick'.  "Clear" for this example means removing them from the map but keeping them in the array, which allows the application to quickly re-add them to the map.  In a sense, this acts like "hiding" them."Delete" clears the array as well.is only working on IE.working on chrome, firefox, ie...The solution is quite easy. You may use the method: marker.setMap(map);. Here, you define on which map the pin will appear. So, if you set null in this method (marker.setMap(null);), the pin will disappear.Now, you can write a function witch while make disappear all markers in your map.You just add to put your pins in an array and declare them with markers.push (your_new pin) or this code for example:This is a function witch can set or disappear all the markers of your array in the map:To disappear all your markers, you should call the function with null:And, to remove and disappear, all your markers, you should reset your array of markers like this:This is my complete code. Itâ€™s the simplest I could reduce to. 

Be care full you may replace YOUR_API_KEY in the code by your key google API:You may consult google developer or the complete documentation on, also, google developer web site.A clean and easy application of rolinger's answer.The "set_map" function posted in both answers appears to no longer work in Google Maps v3 API.I wonder what happenedUpdate:It appears Google changed their API such that "set_map" is not "setMap".http://code.google.com/apis/maps/documentation/v3/reference.htmlHere you can find an example of how to remove markers:https://developers.google.com/maps/documentation/javascript/examples/marker-remove?hl=esThe following from Anon works perfectly, although with flickers when repeatedly clearing the overlays.Simply do the following:I. Declare a global variable:II. Define a function:III. Push markers in the 'markerArray' before calling the following:IV. Call the clearOverlays() function wherever required.That's it!!Hope that will help you.I found using markermanager library in the google-maps-utility-library-v3 project as the easiest way.1. Set up the MarkerManager2. Add markers to the MarkerManager 3. To clear markers you just need to call the MarkerManger's clearMarkers() functionYou can do it this way too:I have just tried this with kmlLayer.setMap(null) and it worked.  Not sure if that would work with regular markers but appears to work correctly.To clear of all the overlays including polys, markers, etc...simply use:map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);}Here is a function that I wrote to do it form me on a map application:To remove all markers from map create functions something like this:1.addMarker(location): this function used to add marker on map2.clearMarkers(): this function remove all markers from map, not from array3.setMapOnAll(map): this function used to add markers info in array4.deleteMarkers(): this function Deletes all markers in the array by removing references to them.The cleanest way of doing this is to iterate over all the features of the map. Markers (along with polygons, polylines, ect.) are stored in the data layer of the map.In the case that the markers are being added via drawing manager, it's best to create a global array of markers or pushing the markers into the data layer on creation like so:I recommend the second approach as it allows you to use other google.maps.data class methods later.This is the method Google themselves use in at least one sample:Check Google sample for complete code example:https://developers.google.com/maps/documentation/javascript/examples/places-searchbox I dont' know why, but, setting setMap(null) to my markers didn't work for me when I'm using DirectionsRenderer.In my case I had to call setMap(null) to my DirectionsRenderer as well.Something like that:Just walk over markers and remove them from map, empty maps markers array after that:just clear GooglemapI've tried all of proposed solutions, but nothing worked for me while all my markers were under a cluster.

Eventually I just put this:In other words, if you wrap markers in a cluster and want to remove all markers, you call:You mean remove as in hiding them or deleting them?if hiding:if you wish to delete them:notice that I use an array markers to keep track of them and reset it manually.You need to set map null to that marker.I found simple solution (I think) : I use a shorthand that does the job well. Just doif you use the gmap V3 plugin:

$("#map").gmap("removeAllMarkers");see: http://www.smashinglabs.pl/gmap/documentation#after-loadI know that this maybe a simiple solution, but this is what I doWorks every time for me.

Using Razor within JavaScript

raklos

[Using Razor within JavaScript](https://stackoverflow.com/questions/4599169/using-razor-within-javascript)

Is it possible or is there a workaround to use Razor syntax within JavaScript that is in a view (cshtml)?I am trying to add markers to a Google map... For example, I tried this, but I'm getting a ton of compilation errors:

2011-01-04 22:34:54Z

Is it possible or is there a workaround to use Razor syntax within JavaScript that is in a view (cshtml)?I am trying to add markers to a Google map... For example, I tried this, but I'm getting a ton of compilation errors:Use the <text> pseudo-element, as described here, to force the Razor compiler back into content mode:Update:Scott Guthrie recently posted about @: syntax in Razor, which is slightly less clunky than the <text> tag if you just have one or two lines of JavaScript code to add. The following approach would probably be preferable, because it reduces the size of the generated HTML. (You could even move the addMarker function to a static, cached JavaScript file to further reduce the size):Updated the above code to make the call to addMarker more correct.To clarify, the @: forces Razor back into text mode, even though addMarker call looks a lot like C# code. Razor then picks up the @item.Property syntax to say that it should directly output the contents of those properties.It's worth noting that View code really isn't a good place to put JavaScript code. JavaScript code should be placed in a static .js file, and then it should get the data that it needs either from an Ajax call or by scanning data- attributes from the HTML. Besides making it possible to cache your JavaScript code, this also avoids issues with encoding, since Razor is designed to encode for HTML, but not JavaScript.I just wrote this helper function. Put it in App_Code/JS.cshtml:Then in your example, you can do something like this:Notice how I don't put quotes around it. If the title already contains quotes, it won't explode. Seems to handle dictionaries and anonymous objects nicely too!You're trying to jam a square peg in a round hole.Razor was intended as an HTML-generating template language. You may very well get it to generate JavaScript code, but it wasn't designed for that.For instance: What if Model.Title contains an apostrophe? That would break your JavaScript code, and Razor won't escape it correctly by default.It would probably be more appropriate to use a String generator in a helper function. There will likely be fewer unintended consequences of that approach.What specific errors are you seeing?Something like this could work better:Note that you need the magical <text> tag after the foreach to indicate that Razor should switch into markup mode.That will work fine, as long as it's in a CSHTML page and not an external JavaScript file.The Razor template engine doesn't care what it's outputting and does not differentiate between <script> or other tags.However, you need to encode your strings to prevent XSS attacks.I prefer "<!--" "-->" like a "text>"One thing to add - I found that Razor syntax hilighter (and probably the compiler) interpret the position of the opening bracket differently:A simple and a good straight-forward example:This creates a script in your page at the location you place the code above which looks like the following:Now you have a global JavaScript variable named razorUserName which you can access and use on the client. The Razor engine has obviously extracted the value from @User.Identity.Name (server-side variable) and put it in the code it writes to your script tag.The following solution seems more accurate to me than combine JavaScript with Razor. Check this out:

https://github.com/brooklynDev/NGonYou can add almost any complex data to ViewBag.Ngon and access it in JavaScriptIn the controller:In JavaScript:It's allows any plain old CLR objects (POCOs) that can be serialized using the default JavascriptSerializer.There is also one more option than @: and <text></text>.Using <script> block itself.When you need to do large chunks of JavaScript depending on Razor code, you can do it like this:Pros of this manner is that it doesn't mix JavaScript and Razor too much, because mixing them a lot will cause readability issues eventually. Also large text blocks are not very readable either.None of the previous solutions work correctly... I have tried all the ways, but it did not give me the expected result... At last I found that there are some errors in the code... And the full code is given below.I finally found the solution (*.vbhtml):

How to auto-reload files in Node.js?

disc0dancer

[How to auto-reload files in Node.js?](https://stackoverflow.com/questions/1972242/how-to-auto-reload-files-in-node-js)

Any ideas on how I could implement an auto-reload of files in Node.js? I'm tired of restarting the server every time I change a file. 

Apparently Node.js' require() function does not reload files if they already have been required, so I need to do something like this:And in the app.js file I have:But this also isn't working - I get an error in the process.compile() statement saying that 'require' is not defined. process.compile is evaling the app.js, but has no clue about the node.js globals.

2009-12-29 00:08:49Z

Any ideas on how I could implement an auto-reload of files in Node.js? I'm tired of restarting the server every time I change a file. 

Apparently Node.js' require() function does not reload files if they already have been required, so I need to do something like this:And in the app.js file I have:But this also isn't working - I get an error in the process.compile() statement saying that 'require' is not defined. process.compile is evaling the app.js, but has no clue about the node.js globals.A good, up to date alternative to supervisor is nodemon:To use nodemon:node-supervisor is awesomeusage to restart on save:by isaacs - http://github.com/isaacs/node-supervisori found a simple way:If somebody still comes to this question and wants to solve it using only the standard modules I made a simple example:This example is only for one file (server.js), but can be adapted to multiple files using an array of files, a for loop to get all file names, or by watching a directory:This code was made for Node.js 0.8 API, it is not adapted for some specific needs but will work in some simple apps.UPDATE:

This functional is implemented in my module simpleR, GitHub reponodemon came up first in a google search, and it seems to do the trick:There is Node-Supervisor that you can install bysee http://github.com/isaacs/node-supervisorEdit: My answer is obsolete. Node.js is a very fast changing technology.I also wondered about reloading modules. I modified node.js and have published the source at Github at nalply/node. The only difference is the function require. It has an optional second argument reload.To reload app.js in current directory useWrite something like this, and you have auto-reload:The only problem I see is the variable module, but I am working at it now.nodemon is a great one. I just add more parameters for debugging and watching options.package.jsonThe command: nodemon --watch server --inspect ./server/server.jsWhereas:--watch server Restart the app when changing .js, .mjs, .coffee, .litcoffee, and .json files in the server folder (included subfolders).--inspect Enable remote debug../server/server.js The entry point.Then add the following config to launch.json (VS Code) and start debugging anytime.Note that it's better to install nodemon as dev dependency of project. So your team members don't need to install it or remember the command arguments, they just npm run dev and start hacking.See more on nodemon docs: https://github.com/remy/nodemon#monitoring-multiple-directoriesThere was a recent thread about this subject on the node.js mailing list.  The short answer is no, it's currently not possible auto-reload required files, but several people have developed patches that add this feature. yet another solution for this problem is using forevernode-dev works great. npm install node-devIt even gives a desktop notification when the server is reloaded and will give success or errors on the message.start your app on command line with:node-dev app.jsHere is a blog post about Hot Reloading for Node. It provides a github Node branch that you can use to replace your installation of Node to enable Hot Reloading.From the blog:I am working on making a rather tiny node "thing" that is able to load/unload modules at-will (so, i.e. you could be able to restart part of your application without bringing the whole app down).

I am incorporating a (very stupid) dependency management, so that if you want to stop a module, all the modules that depends on that will be stopped too.So far so good, but then I stumbled into the issue of how to reload a module. Apparently, one could just remove the module from the "require" cache and have the job done. Since I'm not keen to change directly the node source code, I came up with a very hacky-hack that is: search in the stack trace the last call to the "require" function, grab a reference to it's "cache" field and..well, delete the reference to the node:

Even easier, actually:Apparently, this works just fine. I have absolutely no idea of what that arguments["1"] means, but it's doing its job. I believe that the node guys will implement a reload facility someday, so I guess that for now this solution is acceptable too.

(btw. my "thing" will be here: https://github.com/cheng81/wirez , go there in a couple of weeks and you should see what I'm talking about)You can use nodemon from NPM.

And if you are using Express generator then you can using this command inside your project folder:or using Debug modeyou can also run directlyHope this help.solution at: 

http://github.com/shimondoodkin/node-hot-reloadnotice that you have to take care by yourself of the references used.that means if you did : var x=require('foo'); y=x;z=x.bar; and hot reloaded

it.it means you have to replace the references stored in x, y and z. in the hot reaload callback function.some people confuse hot reload with auto restart

my nodejs-autorestart module also has upstart integration to enable auto start on boot.

if you have a small app auto restart is fine, but when you have a large app hot reload is more suitable. simply because hot reload is faster.Also I like my node-inflow module.Not necessary to use nodemon or other tools like that. Just use capabilities of your IDE. Probably best one is IntelliJ WebStorm with hot reload feature (automatic server and browser reload) for node.js.Here's a low tech method for use in Windows. Put this in a batch file called serve.bat:Now instead of running node app.js from your cmd shell, run serve app.js.This will open a new shell window running the server. The batch file will block (because of the /wait) until you close the shell window, at which point the original cmd shell will ask "Terminate batch job (Y/N)?" If you answer "N" then the server will be relaunched.Each time you want to restart the server, close the server window and answer "N" in the cmd shell.my app structure:first install reload with this command:then change package.json:now you must use reload in your server file:and for last change, end of your response send this script:now start your app with this code:Use this:All you have to do now is:And config will automatically get reloaded :)loaddir is my solution for quick loading of a directory, recursively.can return { 'path/to/file': 'fileContents...' }

or 

{ path: { to: { file: 'fileContents'} } }It has callback which will be called when the file is changed.It handles situations where files are large enough that watch gets called before they're done writing.I've been using it in projects for a year or so, and just recently added promises to it.Help me battle test it!https://github.com/danschumann/loaddirYou can use auto-reload to reload the module without shutdown the server.data.jsontest.jsResult:another simple solution is to use fs.readFile instead of using require

you can save a text file contaning a json object, and create a interval on the server to reload this object.pros:cons:For people using Vagrant and PHPStorm, file watcher is a faster approachwhere forever.sh is likeI recently came to this question because the usual suspects were not working with linked packages. If you're like me and are taking advantage of npm link during development to effectively work on a project that is made up of many packages, it's important that changes that occur in dependencies trigger a reload as well. After having tried node-mon and pm2, even following their instructions for additionally watching the node_modules folder, they still did not pick up changes. Although there are some custom solutions in the answers here, for something like this, a separate package is cleaner. I came across node-dev today and it works perfectly without any options or configuration.From the Readme:You can do it with browser-refresh. Your node app restarts automatically, your result page in browser also refreshes automatically. Downside is that you have to put js snippet on generated page. Here's the repo for the working example.Nowadays WebPack dev server with hot option is used. 

you can add a script like this in your package.json : "hot": "cross-env NODE_ENV=development webpack-dev-server --hot --inline --watch-poll", and every change in your files will trigger a recompile automatically

How to reset the state of a Redux store?

xyz

[How to reset the state of a Redux store?](https://stackoverflow.com/questions/35622588/how-to-reset-the-state-of-a-redux-store)

I am using Redux for state management.

How do I reset the store to its initial state?For example, letâ€™s say I have two user accounts (u1 and u2).

Imagine the following sequence of events:At this point, the cached data will be associated with u1, and I would like to clean it up.How can I reset the Redux store to its initial state when the first user logs out?

2016-02-25 09:00:38Z

I am using Redux for state management.

How do I reset the store to its initial state?For example, letâ€™s say I have two user accounts (u1 and u2).

Imagine the following sequence of events:At this point, the cached data will be associated with u1, and I would like to clean it up.How can I reset the Redux store to its initial state when the first user logs out?One way to do that would be to write a root reducer in your application.The root reducer would normally delegate handling the action to the reducer generated by combineReducers(). However, whenever it receives USER_LOGOUT action, it returns the initial state all over again.For example, if your root reducer looked like this:You can rename it to appReducer and write a new rootReducer delegating to it:Now we just need to teach the new rootReducer to return the initial state after USER_LOGOUT action. As we know, reducers are supposed to return the initial state when they are called with undefined as the first argument, no matter the action. Letâ€™s use this fact to conditionally strip the accumulated state as we pass it to appReducer:Now, whenever USER_LOGOUT fires, all reducers will be initialized anew. They can also return something different than they did initially if they want to because they can check action.type as well.To reiterate, the full new code looks like this:Note that Iâ€™m not mutating the state here, I am merely reassigning the reference of a local variable called state before passing it to another function. Mutating a state object would be a violation of Redux principles.In case you are using redux-persist, you may also need to clean your storage. Redux-persist keeps a copy of your state in a storage engine, and the state copy will be loaded from there on refresh.First, you need to import the appropriate storage engine and then, to parse the state before setting it to undefined and clean each storage state key.I'd like to point out that the accepted comment by Dan Abramov is correct except we experienced a strange issue when using the react-router-redux package along with this approach. Our fix was to not set state to undefined but rather still use the current routing reducer. So I would suggest implementing the solution below if you are using this packageDefine an action:Then in each of your reducers assuming you are using switch or if-else for handling multiple actions through each reducer. I am going to take the case for a switch.This way whenever you call RESET action, you reducer will update the store with default state.Now, for logout you can handle the like below:Every time a userlogs in, without a browser refresh. Store will always be at default.store.dispatch(RESET_ACTION) just elaborates the idea. You will most likely have an action creator for the purpose. A much better way will be that you have a LOGOUT_ACTION. Once you dispatch this LOGOUT_ACTION. A custom middleware can then intercept this action, either with Redux-Saga or Redux-Thunk. Both ways however, you can dispatch another action 'RESET'. This way store logout and reset will happen synchronously and your store will ready for another user login.You can also fire an action which is handled by all or some reducers, that you want to reset to initial store. One action can trigger a reset to your whole state, or just a piece of it that seems fit to you. I believe this is the simplest and most controllable way of doing this.With Redux if have applied the following solution, which assumes I have set an initialState in all my reducers (e.g. { user: { name, email }}). In many components I check on these nested properties, so with this fix I prevent my renders methods are broken on coupled property conditions (e.g. if state.user.email, which will throw an error user is undefined if upper mentioned solutions).Just a simplified answer to the best answer:UPDATE NGRX4If you are migrating to NGRX 4, you may have noticed from the migration guide that the rootreducer method for combining your reducers has been replaced with ActionReducerMap method. At first, this new way of doing things might make resetting state a challenge. It is actually straight-forward, yet the way of doing this has changed. This solution is inspired by the meta-reducers API section of the NGRX4 Github docs.First, lets say your are combining your reducers like this using NGRX's new ActionReducerMap option:Now, lets say you want to reset state from within app.module

``And that is basically one way to achieve the same affect with NGRX 4.I've created a component to give Redux the ability of resetting state, you just need to use this component to enhance your store and dispatch a specific action.type to trigger reset. The thought of implementation is same as what @Dan Abramov said.Github: https://github.com/wwayne/redux-reset Combining the approaches of Dan, Ryan and Rob, to account for keeping the router state and initializing everything else in the state tree, I ended up with this:I have created actions to clear state. So when I dispatch a logout action creator I dispatch actions to clear state as well.User record actionLogout action creatorReducerI am not sure if this is optimal?If you are using redux-actions, here's a quick workaround using a HOF(Higher Order Function) for handleActions.And then use handleActionsEx instead of original handleActions to handle reducers.Dan's answer gives a great idea about this problem, but it didn't work out well for me, because I'm using redux-persist.

When used with redux-persist, simply passing undefined state didn't trigger persisting behavior, so I knew I had to manually remove item from storage (React Native in my case, thus AsyncStorage).or  didn't work for me either - they just yelled at me. (e.g., complaining like "Unexpected key _persist ...")Then I suddenly pondered all I want is just make every individual reducer return their own initial state when RESET action type is encountered. That way, persisting is handled naturally. Obviously without above utility function (handleActionsEx), my code won't look DRY (although it's just a one liner, i.e. RESET: () => initialState), but I couldn't stand it 'cuz I love metaprogramming.My workaround when working with typescript, built on top of Dan's answer (redux typings make it impossible to pass undefined to reducer as first argument, so I cache initial root state in a constant):The accepted answer helped me solve my case. However, I encountered case where not-the-whole-state had to be cleared. So - I did it this way:Hope this helps someone else :) This approach is very right: Destruct any specific state "NAME" to ignore and keep others.Just an extension to @dan-abramov answer, sometimes we may need to retain certain keys from being reset.The following solution worked for me. I added resetting state function to meta reducers.The key was to useto set all reducers to initial state. Returning undefined instead was causing errors due to the fact that the structure of the store has been destroyed./reducers/index.tsapp.module.tsFrom a security perspective, the safest thing to do when logging a user out is to reset all persistent state (e.x. cookies, localStorage, IndexedDB, Web SQL, etc) and do a hard refresh of the page using window.location.reload(). It's possible a sloppy developer accidentally or intentionally stored some sensitive data on window, in the DOM, etc. Blowing away all persistent state and refreshing the browser is the only way to guarantee no information from the previous user is leaked to the next user.(Of course, as a user on a shared computer you should use "private browsing" mode, close the browser window yourself, use the "clear browsing data" function, etc, but as a developer we can't expect everyone to always be that diligent)A quick and easy option which worked for me was using redux-reset . Which was straightforward and also has some advanced options, for larger apps.Setup in create storeDispatch your 'reset' in your logout functionHope this helpsMy take to keep Redux from referencing to the same variable of the initial state:why don't you just use return module.exports.default() ;)Note: make sure you set action default value to {} and you are ok because you don't want to encounter error when you check action.type inside the switch statement.I found that the accepted answer worked well for me, but it triggered the ESLint no-param-reassign error - https://eslint.org/docs/rules/no-param-reassignHere's how I handled it instead, making sure to create a copy of the state (which is, in my understanding, the Reduxy thing to do...):But maybe creating a copy of the state to just pass it into another reducer function that creates a copy of that is a little over-complicated? This doesn't read as nicely, but is more to-the-point:In addition to Dan Abramov's answer, shouldn't we explicitly set action as action = {type: '@@INIT'} alongside state = undefined. With above action type, every reducer returns the initial state.in server, i have a variable is: global.isSsr = true

and in each reducer, i have a const is : initialState

To reset the data in the Store, I do the following with each Reducer:

example with appReducer.js:finally on the server's router:The following solution works for me.First on initiation of our application the reducer state is fresh and new with default InitialState.We have to add an action that calls on APP inital load to persists default state.While logging out of the application we can simple reAssign the default state and reducer will work just as new.Main APP ContainerMain APP ReducerOn Logout calling action for resetting stateHope this solves your problem!For me to reset the state to its initial state, I wrote the following code:One thing the solution in the accepted answer doesn't do is clear the cache for parameterized selectors. If you have a selector like this:Then you would have to release them on logout like this:Otherwise the memoized value for the last call of the selector and the values of the last parameters will still be in memory.Code samples are from the ngrx docs.Another option is to:'@@redux/INIT' is the action type that redux dispatches automatically when you createStore, so assuming your reducers all have a default already, this would get caught by those and start your state off fresh. It might be considered a private implementation detail of redux, though, so buyer beware...Simply have your logout link clear session and refresh the page. No additional code needed for your store. Any time you want to completely reset the state a page refresh is a simple and easily repeatable way to handle it.

How to replace all dots in a string using JavaScript

Omar Abid

[How to replace all dots in a string using JavaScript](https://stackoverflow.com/questions/2390789/how-to-replace-all-dots-in-a-string-using-javascript)

I want to replace all the occurrences of a dot(.) in a JavaScript stringFor example, I have:I want to get: okay this is a string.So far I tried:but this ends up with all the string replaced to spaces.

2010-03-06 00:10:19Z

I want to replace all the occurrences of a dot(.) in a JavaScript stringFor example, I have:I want to get: okay this is a string.So far I tried:but this ends up with all the string replaced to spaces.You need to escape the . because it has the meaning of "an arbitrary character" in a regular expression.One more solution which is easy to understand :)Faster than using regex...EDIT:

Maybe at the time I did this code I did not used jsperf. But in the end such discussion is totally pointless, the performance difference is not worth the legibility of the code in the real world, so my answer is still valid, even if the performance differs from the regex approach.EDIT2:

I have created a lib that allows you to do this using a fluent interface:See https://github.com/FagnerMartinsBrack/str-replace.For this simple scenario, i would also recommend to use the methods that comes build-in in javascript.You could try this :GreetingsI add double backslash to the dot to make it work. Cheer.This is more concise/readable and should perform better than the one posted by Fagner Brack (toLowerCase not performed in loop):Usage:Here's another implementation of replaceAll. Hope it helps someone.Then you can use it:var myText = "My Name is George";

var newText = myText.replaceAll("George", "Michael");Example: I want to replace all double Quote (") into single Quote (') Then the code will be like this@scripto's made a bit more concise and without prototype:Here's how it stacks up: http://jsperf.com/replace-vs-split-join-vs-replaceall/68you can replace all occurrence of any string/character using RegExp javasscript object.Here is the code,

What is the non-jQuery equivalent of '$(document).ready()'?

TIMEX

[What is the non-jQuery equivalent of '$(document).ready()'?](https://stackoverflow.com/questions/2304941/what-is-the-non-jquery-equivalent-of-document-ready)

What is the non-jQuery equivalent of $(document).ready()?

2010-02-21 05:40:52Z

What is the non-jQuery equivalent of $(document).ready()?The nice thing about $(document).ready() is that it fires before window.onload. The load function waits until everything is loaded, including external assets and images. $(document).ready, however, fires when the DOM tree is complete and can be manipulated. If you want to acheive DOM ready, without jQuery, you might check into this library. Someone extracted just the ready part from jQuery. Its nice and small and you might find it useful:domready at Google CodeThis works perfectly, from ECMAThe window.onload doesn't equal to JQuery $(document).ready because $(document).ready waits only to the DOM tree while window.onload check all elements including external assets and images.EDIT: Added IE8 and older equivalent, thanks to Jan Derk's observation. You may read the source of this code on MDN at this link:There are other options apart from "interactive". See the MDN link for details.A little thing I put togetherdomready.jsHow to use itYou can also change the context in which the callback runs by passing a second argumentNow that it's 2018 here's a quick and simple method.This will add an event listener, but if it already fired we'll check that the dom is in a ready state or that it's complete. This can fire before or after sub-resources have finished loading (images, stylesheets, frames, etc).Here's some quick utility helpers using standard ES6 Import & Export I wrote that include TypeScript as well. Maybe I can get around to making these a quick library that can be installed into projects as a dependency.There is a standards based replacement,DOMContentLoaded that is supported by over 90%+ of browsers, but not IE8 (So below code use by JQuery for browser support):jQuery's native function is much more complicated than just window.onload, as depicted below.According to http://youmightnotneedjquery.com/#ready a nice replacement that still works with IE8 is improvements: Personally I  would also check if the type of fn is a function.

And as @elliottregan suggested remove the event listener after use.The reason I answer this question late is because I was searching for this answer but could not find it here. And I think this is the best solution.In plain vanilla JavaScript, with no libraries? It's an error. $ is simply an identifier, and is undefined unless you define it.jQuery defines $ as it's own "everything object" (also known as jQuery so you can use it without conflicting with other libraries). If you're not using jQuery (or some other library that defines it), then $ will not be defined.Or are you asking what the equivalent is in plain JavaScript? In that case, you probably want window.onload, which isn't exactly equivalent, but is the quickest and easiest way to get close to the same effect in vanilla JavaScript.The easiest way in recent browsers would be to use the appropriate GlobalEventHandlers, onDOMContentLoaded, onload, onloadeddata (...)The DOMContentLoaded event is fired when the initial HTML document has been completely loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading. A very different event load should be used only to detect a fully-loaded page. It is an incredibly popular mistake to use load where DOMContentLoaded would be much more appropriate, so be cautious.https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoadedThe function used is an IIFE, very useful on this case, as it trigger itself when ready:https://en.wikipedia.org/wiki/Immediately-invoked_function_expressionIt is obviously more appropriate to place it at the end of any scripts.In ES6, we can also write it as an arrow function: The best is to use the DOM elements, we can wait for any variable to be ready, that trigger an arrowed IIFE.The behavior will be the same, but with less memory impact.In many cases, the document object is also triggering when ready, at least in my browser.

The syntax is then very nice, but it need further testings about compatibilities.The body onLoad could be an alternative too:

Best way to track onchange as-you-type in input type=ã€Œtextã€?

Ilya Birman

[Best way to track onchange as-you-type in input type=ã€Œtextã€?](https://stackoverflow.com/questions/574941/best-way-to-track-onchange-as-you-type-in-input-type-text)

In my experience, input type="text" onchange event usually occurs only after you leave (blur) the control.Is there a way to force browser to trigger onchange every time textfield content changes? If not, what is the most elegant way to track thisã€Œmanuallyã€?Using onkey* events is not reliable, since you can right-click the field and choose Paste, and this will change the field without any keyboard input.Is setTimeout the only way?.. Ugly :-)

2009-02-22 13:43:48Z

In my experience, input type="text" onchange event usually occurs only after you leave (blur) the control.Is there a way to force browser to trigger onchange every time textfield content changes? If not, what is the most elegant way to track thisã€Œmanuallyã€?Using onkey* events is not reliable, since you can right-click the field and choose Paste, and this will change the field without any keyboard input.Is setTimeout the only way?.. Ugly :-)Update:See Another answer (2015).Original 2009 Answer:So, you want the onchange event to fire on keydown, blur, and paste? That's magic.If you want to track changes as they type, use "onkeydown". If you need to trap paste operations with the mouse, use "onpaste" (IE, FF3) and "oninput" (FF, Opera, Chrome, Safari1).1Broken for <textarea> on Safari. Use textInput insteadThese days listen for oninput.  It feels like onchange without the need to lose focus on the element. It is HTML5.Itâ€™s supported by everyone (even mobile), except IE8 and below. For IE add onpropertychange. I use it like this:Below code works fine for me with Jquery 1.8.3HTML : <input type="text" id="myId" />Javascript/JQuery:Javascript is unpredictable and funny here.So, to track the change in textbox, we need onkeydown, oncut and onpaste. In the callback of these event, if you check the value of the textbox then you don't get the updated value as the value is changed after the callback. So a solution for this is to set a timeout function with a timeout of 50 mili-seconds (or may be less)  to track the change.This is a dirty hack but this is the only way, as I researched.Here is an example.

http://jsfiddle.net/2BfGC/12/onkeyup happens after you type for example I press t when I lift the finger the action happens but on keydown the action happens before I digit the character tHope this is helpful for someone. So onkeyup is better for when you want to send what you just typed now.I had a similar requirement (twitter style text field). Used onkeyup and onchange. onchange actually takes care of mouse paste operations during lost focus from the field.[Update] In HTML5 or later, use oninput to get real time character modification updates, as explained in other answers above.If you use ONLY Internet Explorer, you can use this:Hope that helps.I think in 2018 it's better to use the input event.-As the WHATWG Spec describes (https://html.spec.whatwg.org/multipage/indices.html#event-input-input):-Here's an example of how to use it:there is a quite near solution (do not fix all Paste ways) but most of them:It works for inputs as well as for textareas:Do like this:As i said, not all ways to Paste fire an event on all browsers... worst some do not fire any event at all, but Timers are horrible to be used for such.But most of Paste ways are done with keyboard and/or mouse, so normally an onkeyup or onmouseup are fired after a paste, also onkeyup is fired when typing on keyboard.Ensure yor check code does not take much time... otherwise user get a poor impresion.Yes, the trick is to fire on key and on mouse... but beware both can be fired, so take in mind such!!!Please, judge next approach using JQuery:HTML:Javascript(JQuery):"input" worked for me. You could use the keydown, keyup and keypress events as well.To track each try this example and before that completely reduce cursor blink rate to zero.onblur : event generates on exitonchange : event generates on exit if any changes made in inputtextonkeydown: event generates on any key press (for key holding long times also)onkeyup  : event generates on any key releaseonkeypress: same as onkeydown (or onkeyup) but won't react for ctrl,backsace,alt other2018 here, this is what I do:If you can point out flaws in this approach, I would be grateful.Robert Siemer  addEventListener is not supported in IE8 ."Older versions of IE supported an equivalent, proprietary EventTarget.attachEvent() method." https://developer.mozilla.org/it/docs/Web/API/Element/addEventListenerMethod 1: Add an event listener for input:Â Method 2: Define the oninput property with JavaScript:Â Method 3: Define the oninput property with HTML:

How to format a float in javascript?

kkyy

[How to format a float in javascript?](https://stackoverflow.com/questions/661562/how-to-format-a-float-in-javascript)

In JavaScript, when converting from a float to a string, how can I get just 2 digits after the decimal point? For example, 0.34 instead of 0.3445434.

2009-03-19 09:38:00Z

In JavaScript, when converting from a float to a string, how can I get just 2 digits after the decimal point? For example, 0.34 instead of 0.3445434.The specifics, in case the code isn't self-explanatory.edit: ...or just use toFixed, as proposed by Tim BÃ¼the. Forgot that one, thanks (and an upvote) for reminder :)There are functions to round numbers. For example:will print 5.04.EDIT:

FiddleBe careful when using toFixed():First, rounding the number is done using the binary representation of the number, which might lead to unexpected behaviour. For exampleinstead of '0.6'.Second, there's an IE bug with toFixed(). In IE (at least up to version 7, didn't check IE8), the following holds true:It might be a good idea to follow kkyy's suggestion or to use a custom toFixed() function, egOne more problem to be aware of, is that toFixed() can produce unnecessary zeros at the end of the number.

For example:The idea is to clean up the output using a RegExp:The RegExp matches the trailing zeros (and optionally the decimal point) to make sure it looks good for integers as well.There is a problem with all those solutions floating around using multipliers. Both kkyy and Christoph's solutions are wrong unfortunately.Please test your code for number 551.175 with 2 decimal places - it will round to 551.17 while it should be 551.18 ! But if you test for ex. 451.175 it will be ok - 451.18. So it's difficult to spot this error at a first glance.The problem is with multiplying: try 551.175 * 100 = 55117.49999999999 (ups!)So my idea is to treat it with toFixed() before using Math.round();The key here I guess is to round up correctly first, then you can convert it to String.Now you can safely format this value with toFixed(p).

So with your specific case:If you want the string without round you can use this RegEx (maybe is not the most efficient way... but is really easy)Maybe you'll also want decimal separator? Here is a function I just made:There is no way to avoid inconsistent rounding for prices with x.xx5 as actual value using either multiplication or division. If you need to calculate correct prices client-side you should keep all amounts in cents. This is due to the nature of the internal representation of numeric values in JavaScript. Notice that Excel suffers from the same problems so most people wouldn't notice the small errors caused by this phenomen. However errors may accumulate whenever you add up a lot of calculated values, there is a whole theory around this involving the order of calculations and other methods to minimize the error in the final result. To emphasize on the problems with decimal values, please note that 0.1 + 0.2 is not exactly equal to 0.3 in JavaScript, while 1 + 2 is equal to 3.I use this code to format floats. It is based on toPrecision() but it strips unnecessary zeros. I would welcome suggestions for how to simplify the regex.Usage example:

JavaScript string newline character?

Landon Kuhn

[JavaScript string newline character?](https://stackoverflow.com/questions/1155678/javascript-string-newline-character)

Is \n the universal newline character sequence in Javascript for all platforms? If not, how do I determine the character for the current environment?I'm not asking about the HTML newline element (<BR/>). I'm asking about the newline character sequence used within JavaScript strings.

2009-07-20 20:08:52Z

Is \n the universal newline character sequence in Javascript for all platforms? If not, how do I determine the character for the current environment?I'm not asking about the HTML newline element (<BR/>). I'm asking about the newline character sequence used within JavaScript strings.I've just tested a few browsers using this silly bit of JavaScript:IE8 and Opera 9 on Windows use \r\n. All the other browsers I tested (Safari 4 and Firefox 3.5 on Windows, and Firefox 3.0 on Linux) use \n. They can all handle \n just fine when setting the value, though IE and Opera will convert that back to \r\n again internally. There's a SitePoint article with some more details called Line endings in Javascript.Note also that this is independent of the actual line endings in the HTML file itself (both \n and \r\n give the same results).When submitting a form, all browsers canonicalize newlines to %0D%0A in URL encoding. To see that, load e.g. data:text/html,<form><textarea name="foo">foo%0abar</textarea><input type="submit"></form> and press the submit button. (Some browsers block the load of the submitted page, but you can see the URL-encoded form values in the console.) I don't think you really need to do much of any determining, though. If you just want to split the text on newlines, you could do something like this:Yes, it is universal.Although '\n' is the universal newline characters, you have to keep in mind that, depending on your input, new line characters might be preceded by carriage return characters ('\r').Don't use "\n". Just try this:Just enter a back-slash and keep on truckin'! Works like a charm.It might be easiest to just handle all cases of the new line character instead of checking which case then applying it.  For example, if you need to replace the newline then do the following:yes use \n, unless you are generating html code, in which you want to use <br />Email link function i use "%0D%0A"[HTML]Get a line separator for the current browser:A note - when using ExtendScript JavaScript (the Adobe Scripting language used in applications like Photoshop CS3+), the character to use is "\r". "\n" will be interpreted as a font character, and many fonts will thus have a block character instead.For example (to select a layer named 'Note' and add line feeds after all periods):You can use `` quotes (wich are below Esc button) with ES6. So you can write something like this:I believe it is -- when you are working with JS strings.If you are generating HTML, though, you will have to use <br /> tags (not \n, as you're not dealing with JS anymore)I had the problem of expressing newline with \n or \r\n.

Magically the character \r which is used for carriage return worked for me like a newline.

So in some cases, it is useful to consider \r too.Prints:A practical observation... In my NodeJS script I have the following function:First I had only "\n" but I noticed that when I open the log file in Notepad, it shows all entries on the same line. Notepad++ on the other hand shows the entries each on their own line. After changing the code to "\r\n", even Notepad shows every entry on its own line.The \n is just fine for all cases I've encountered. I you are working with web, use \n and don't worry about it (unless you have had any newline-related issues).you can use <br/> and the document.write/, document.writeln one. 

What is the purpose of a self executing function in javascript?

Ej.

[What is the purpose of a self executing function in javascript?](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

In javascript, when would you want to use this:over this:

2009-02-26 20:53:52Z

In javascript, when would you want to use this:over this:Its all about variable scoping.  Variables declared in the self executing function are, by default, only available to code within the self executing function.  This allows code to be written without concern of how variables are named in other blocks of javascript code.For example, as mentioned in a comment by Alexander:This will first alert "3" and then throw an error on the next alert because foo is not defined.Simplistic. So very normal looking, its almost comforting:However. What if I include a really handy javascript library to my page that translates advanced characters into their base level representations?Wait... what? I mean. If someone types in a character with some kind of accent on it (such as a french or spanish character) but I only want 'english' characters? A-z in my program? Well... The spanish 'n~' and french 'e/' characters (I've used two characters each for those, but you can probably make the mental leap into the character that represents the accents), those characters can be translated into base characters of 'n' and 'e'. So someone nice person has written a comprehensive character converter out there that I can include in my site... I include it.One problem: it has a function in it called 'name' same as my function.This is what's called collision. We've got two functions declared in the same scope with the same name. We want to avoid this. So we need to scope our code somehow. The only way to scope code in javascript is to wrap it in a function:That might solve our problem. Everything is now enclosed and can only be accessed from within our opening and closing braces.We have a function in a function... which is weird to look at, but totally legal.Only one problem. Our code doesn't work.

Our userName variable is never echoed into the console! We can solve this issue by adding a call to our function after our existing code block...Or before!A secondary concern: What are the chances that the name 'main' hasn't been used yet? ...so very, very slim.We need MORE scoping. And some way to automatically execute our main() function.Now we come to auto-execution functions (or self-executing, self-running, whatever).((){})();The syntax is awkward as sin. However, it works. When you wrap a function definition in parentheses, and include a parameter list (another set or parentheses!) it acts as a function call.So lets look at our code again, with some self-executing syntax:So, in most tutorials you read, you will now be bombard with the term 'anonymous self-executing' or something similar. After many years of professional development, I strongly urge you to name every function you write for debugging purposes.When something goes wrong (and it will), you will be checking the backtrace in your browser. It is always easier to narrow your code issues when the entries in the stack trace have names!Hugely long-winded and I hope it helps!I am a great fan :) of it because:Enormously â€“ (Why you should say its good?)More here.Namespacing. JavaScript's scopes are function-level.I can't believe none of the answers mention implied globals.The (function(){})() construct does not protect against implied globals, which to me is the bigger concern, see http://yuiblog.com/blog/2006/06/01/global-domination/Basically the function block makes sure all the dependent "global vars" you defined are confined to your program, it does not protect you against defining implicit globals. JSHint or the like can provide recommendations on how to defend against this behavior.The more concise var App = {} syntax provides a similar level of protection, and may be wrapped in the function block when on 'public' pages. (see Ember.js or SproutCore for real world examples of libraries that use this construct)As far as private properties go, they are kind of overrated unless you are creating a public framework or library, but if you need to implement them, Douglas Crockford has some good ideas.I've read all answers, something very important is missing here, I'll KISS. There are 2 main reasons, why I need Self-Executing Anonymous Functions, or better said "Immediately-Invoked Function Expression (IIFE)":The first one has been explained very well. For the second one, please study following example:Attention 1: We are not assigning a function to MyClosureObject, further more the result of invoking that function. Be aware of () in the last line. Attention 2: What do you additionally have to know about functions in Javascript is that the inner functions get access to the parameters and variables of the functions, they are defined within.Let us try some experiments:I can get MyName using getMyName and it works:The following ingenuous approach would not work:But I can set an another name and get the expected result:Edit: In the example above MyClosureObject is designed to be used without the newprefix, therefore by convention it should not be capitalized. Is there a parameter and the "Bunch of code" returns a function?Closure. The value of something gets used by the function assigned to a. something could have some varying value (for loop) and every time a has a new function.Scope isolation, maybe.  So that the variables inside the function declaration don't pollute the outer namespace.Of course, on half the JS implementations out there, they will anyway.Here's a solid example of how a self invoking anonymous function could be useful.Output: 10, 10, 10, 10, 10...Output: 0, 1, 2, 3, 4...One difference is that the variables that you declare in the function are local, so they goes away when you exit the function and the don't conflict with other variables in other code.Since functions in Javascript are first-class object, by defining it that way, it effectively defines a "class" much like C++ or C#.That function can define local variables, and have functions within it.  The internal functions (effectively instance methods) will have access to the local variables (effectively instance variables), but they will be isolated from the rest of the script.Self invoked function in javascript:A self-invoking expression is invoked (started) automatically, without being called. A self-invoking expression is invoked right after its created. This is basically used for avoiding naming conflict as well as for achieving encapsulation. The variables or declared objects are not accessible outside this function. For avoiding the problems of minimization(filename.min) always use self executed function.Self executing function are used to manage the scope of a Variable.The scope of a variable is the region of your program in which it is defined.A global variable has global scope; it is defined everywhere in your JavaScript code and can be accessed from anywhere within the script, even in your functions. On the other hand, variables declared within a function are defined only within the body of the function. 

They are local variables, have local scope and can only be accessed within that function. Function parameters also count as local variables and are defined only within the body of the function.As shown below, you can access the globalvariable variable inside your function and also note that within the body of a function, a local variable takes precedence over a global variable with the same name. So basically a self executing function allows code to be written without concern of how variables are named in other blocks of javascript code.Short answer is :  to prevent pollution of the Global (or higher) scope.IIFE (Immediately Invoked Function Expressions) is the best practice for writing scripts as plug-ins, add-ons, user scripts or whatever scripts are expected to work with other people's scripts. This ensures that any variable you define does not give undesired effects on other scripts.This is the other way to write IIFE expression. I personally prefer this following method:https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/voidFrom the example above it is very clear that IIFE can also affect efficiency and performance, because the function that is expected to be run only once will be executed once and then dumped into the void for good. This means that function or method declaration does not remain in memory.First you must visit MDN IIFE , Now some points about this It looks like this question has been answered all ready, but I'll post my input anyway.I know when I like to use self-executing functions.The function allows me to use some extra code to define the childObjects attributes and properties for cleaner code, such as setting commonly used variables or executing mathematic equations; Oh! or error checking. as opposed to being limited to nested object instantiation syntax of...Coding in general has a lot of obscure ways of doing a lot of the same things, making you wonder, "Why bother?" But new situations keep popping up where you can no longer rely on basic/core principals alone.Actually, the above function will be treated as function expression without a name.The main purpose of wrapping a function with close and open parenthesis is to avoid polluting the global space. The variables and functions inside the function expression became private (i.e) they will not be available outside of the function.IIRC it allows you to create private properties and methods.

How to download a file with Node.js (without using third-party libraries)?

greepow

[How to download a file with Node.js (without using third-party libraries)?](https://stackoverflow.com/questions/11944932/how-to-download-a-file-with-node-js-without-using-third-party-libraries)

How do I download a file with Node.js without using third-party libraries?I don't need anything special. I only want to download a file from a given URL, and then save it to a given directory.

2012-08-14 02:21:44Z

How do I download a file with Node.js without using third-party libraries?I don't need anything special. I only want to download a file from a given URL, and then save it to a given directory.You can create an HTTP GET request and pipe its response into a writable file stream:If you want to support gathering information on the command line--like specifying a target file or directory, or URL--check out something like Commander.Don't forget to handle errors! The following code is based on Augusto Roman's answer.As Michelle Tilley said, but with the appropriate control flow:Without waiting for the finish event, naive scripts may end up with an incomplete file.Edit: Thanks to @Augusto Roman for pointing out that cb should be passed to file.close, not called explicitly.Speaking of handling errors, it's even better listening to request errors too. I'd even validate by checking response code. Here it's considered success only for 200 response code, but other codes might be good. Despite the relative simplicity of this code, I would advise to use the request module as it handles many more protocols (hello HTTPS!) which aren't natively supported by http.That would be done like so:gfxmonk's answer has a very tight data race between the callback and the file.close() completing.  file.close() actually takes a callback that is called when the close has completed.  Otherwise, immediate uses of the file may fail (very rarely!).A complete solution is:Without waiting for the finish event, naive scripts may end up with an incomplete file. Without scheduling the cb callback via close, you may get a race between accessing the file and the file actually being ready.Maybe node.js has changed, but it seems there are some problems with the other solutions (using node v8.1.2):Below is a modified solution (using ES6 and promises) which handles these problems.The following code is based on Brandon Tilley's answer :Don't make file when you get an error, and prefere to use timeout to close your request after X secondes.for those who came in search of  es6-style promise based way, I guess it would be something like: Vince Yuan's code is great but it seems to be something wrong.Hiï¼ŒI think you can use child_process module and curl command.In additionï¼Œwhen you want download largeã€multiple filesï¼Œyou can use cluster module to use more cpu cores.I prefer request() because you can use both http and https with it.You can use https://github.com/douzi8/ajax-request#downloadDownload using promise, which resolve a readable stream. put extra logic to handle the redirect.If you are using express use res.download() method. otherwise fs module use.(or)Path : img

type : jpg 

random uniqid Without library it could be buggy just to point out. Here are a few:Here my suggestion:You can try using res.redirect to the https file download url, and then it will be downloading the file.Like: res.redirect('https//static.file.com/file.txt');Here's yet another way to handle it without 3rd party dependency and also searching for redirects:We can use the download node module and its very simple, please refer below

https://www.npmjs.com/package/download

Remove last item from array

Prithviraj Mitra

[Remove last item from array](https://stackoverflow.com/questions/19544452/remove-last-item-from-array)

I have the following array.I would like to remove the last element i.e. 2.I used arr.slice(-1); but it doesn't remove the value.

2013-10-23 14:24:49Z

I have the following array.I would like to remove the last element i.e. 2.I used arr.slice(-1); but it doesn't remove the value.Use splice(index,howmany)Array.prototype.pop() by JavaScript convention.You can do this using .slice() method like:Here is a demo:instead of doing :Here is a demo:Now the basic syntax of Array.prototype.slice() or in short slice() method is:Here, the begin parameter is zero-based index at which extraction from an array starts. So, lets say based on above example if we do something likeit would return all the array elements from start of sequence from position 0 and that is [1,0,2]. Similarly, if we doit would return [0,2] since 0 is at position 1 here and everything after that. Now, in your case you have passed a negative index i.e., -1 as the begin parameter, which indicates an offset from the end of the sequence. So, slice(-1) in your case extracts the last one array element in the sequence and that is 2 (as we have already seen in the above demo).Now, let's talk about the end parameter in the slice() method syntax here. It is again a zero-based index at which extraction from an array ends. So, lets say we have a array like:-and we want to get just the 2,5,3 elements in the array. Now, position of 2 from start of the sequence is 2 and for last element 3 it is 4. We will need to end the extraction here a position 5, as we need to get the element before that position. So, we will simply implement slice() method here likeIn your case, we have implemented -1 as the end parameter, so our code is likeAs a negative index, end indicates an offset from the end of the sequence. So, slice(0,-1) extracts the first element through the second-to-last element in the sequence. So, we get the desired output. We can also do likewe will get the same output. But, I have used -1 here as its easier to implement even for a long array likeIf you just want to remove the last element, you don't want to sit & calculate the position of last 9 here and the do like arr.slice(0, 22). You can then simply implement the negative index logic here & do Hope it helps!learn by example:You would need to do this since slice doesn't alter the original array. If you want to alter the original array you can use splice:or pop:There is a function for that, explanation here:I would consider .pop() to be the most 'correct' solution, however, sometimes it might not work since you need to use array without the last element right there...In such a case you might want to use the following, it will return [1,2,3]while .pop() would return 4:which might not be desirable...Hope this saves you some time.You could simply use, arr.pop()This removes the last entry of the array.You can do it in two way using splice():  splice(position_to_start_deleting, how_many_data_to_delete) takes two parameter.  position_to_start_deleting : The zero based index from where to start deleting. 

how_many_data_to_delete : From indicated index, how many consecutive data should be deleted.  You can also remove the last element using pop() as pop() removes the last element from some array.

Use arr.pop()arr.slice(-1) will return a copy of the last element of the array, but leaves the original array unmodified.To remove the last n elements from an array, use arr.splice(-n) (note the "p" in "splice").  The return value will be a new array containing the removed elements.Simpler yet, for n == 1, use val = arr.pop()var names = ["harry", "aahan", "arav", "you"]; names.pop(); Just use the following for your use case:// removes the last element

// need to check if arr.length > 0splice(index,howmany) - This solution sounds good. But This howmany will work only for the positive array index. To remove last two items or three items use the index itself. For example, splice(-2) to remove last two items. splice(-3) for removing last three items.It's worth noting that slice will both return a new array, whereas .pop() and .splice() will mutate the existing array.If you like handling collections of data with a chained command style, you will really want to stick with slice for something like this.For example:It can require a lot more messing about, and variable management, to do the same kind of thing with "pop", since unlike map, filter, etc, you don't get a new array back.It's the same kind of thing with push, which adds an item to the end of an array.  You might be better off with concat since that lets you keep the flow going.With Lodash you can use dropRight, if you don't care to know which elements were removed:2019 ECMA5 Solution:Non destructive, generic, one-liner and only requires a copy & paste at the end of your array.say you have var arr = [1,0,2]arr.splice(-1,1) will return to you array [1,0]; while  arr.slice(-1,1) will return to you array [2];This is good way to remove last item :Detail of splice as following:splice(startIndex, number of splice)Output will be: Array[0,1,2,3,4,5].

This will allow you to keep the same amount of array elements as you push a new value in.  If you want to remove n item from end of array in javascript, you can easily use:

How to remove all line breaks from a string

Wingblade

[How to remove all line breaks from a string](https://stackoverflow.com/questions/10805125/how-to-remove-all-line-breaks-from-a-string)

I have a text in a textarea and I read it out using the .value attribute.Now I would like to remove all linebreaks (the character that is produced when you press Enter) from my text now using .replace with a regular expression, but how do I indicate a linebreak in a regex?If that is not possible, is there another way?

2012-05-29 19:05:35Z

I have a text in a textarea and I read it out using the .value attribute.Now I would like to remove all linebreaks (the character that is produced when you press Enter) from my text now using .replace with a regular expression, but how do I indicate a linebreak in a regex?If that is not possible, is there another way?This is probably a FAQ.  Anyhow, line breaks (better: newlines) can be one of Carriage Return (CR, \r, on older Macs), Line Feed (LF, \n, on Unices incl. Linux) or CR followed by LF (\r\n, on WinDOS). (Contrary to another answer, this has nothing to do with character encoding.)Therefore, the most efficient RegExp literal to match all variants isIf you want to match all newlines in a string, use a global match,respectively.  Then proceed with the replace method as suggested in several other answers. (Probably you do not want to remove the newlines, but replace them with other whitespace, for example the space character, so that words remain intact.)How you'd find a line break varies between operating system encodings. Windows would be \r\n, but Linux just uses \n and Apple uses \r.I found this in JavaScript line breaks:That should remove all kinds of line breaks.String.trim() removes whitespace from the beginning and end of strings... including newlines.Here's an example fiddle: http://jsfiddle.net/BLs8u/NOTE! it only trims the beginning and end of the string, not line breaks or whitespace in the middle of the string.You can use \n in a regex for newlines, and \r for carriage returns.Different operating systems use different line endings, with varying mixtures of \n and \r. This regex will replace them all.If you want to remove all control characters, including CR and LF, you can use this:It will remove all non-printable characters. This are all characters NOT within the ASCII HEX space 0x20-0x7E. Feel free to modify the HEX range as needed.The simplest solution would be:.replace() with /\s+/g regexp is changing all groups of white-spaces characters to a single space in the whole string then we .trim() the result to remove all exceeding white-spaces before and after the text.  Are considered as white-spaces characters:

[ \f\n\r\t\vâ€‹\u00a0\u1680â€‹\u2000â€‹-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]To remove new line chars use this:Then you can trim your string to remove leading and trailing spaces:The answer provided by PointedEars is everything most of us need. But by following  Mathias Bynens's answer, I went on a Wikipedia trip and found this: https://en.wikipedia.org/wiki/Newline.The following is a drop-in function that implements everything the above Wiki page considers "new line" at the time of this answer.If something doesn't fit your case, just remove it. Also, if you're looking for performance this might not be it, but for a quick tool that does the job in any case, this should be useful.

A linebreak in regex is \n, so your script would beI am adding my answer, it is just an addon to the above,

as for me I tried all the /n options and it didn't work, I saw my text is comming from server with double slash so I used this:Try the following code. It works on all platforms.USE THIS FUNCTION BELOW AND MAKE YOUR LIFE EASYThe easiest approach is using regular expressions to detect and replace newlines in the string. In this case, we use replace function along with string to replace with, which in our case is an empty string.In the above expression, g and m are for global and multiline flagsOn mac, just use \n in regexp to match linebreaks. So the code will be string.replace(/\n/g, ''), ps: the g followed means match all instead of just the first.On windows, it will be \r\n.

Use basic authentication with jQuery and Ajax

Patrioticcow

[Use basic authentication with jQuery and Ajax](https://stackoverflow.com/questions/5507234/use-basic-authentication-with-jquery-and-ajax)

I am trying to create a basic authentication through the browser, but I can't really get there.If this script won't be here the browser authentication will take over, but I want to tell the browser that the user is about to make the authentication.The address should be something like:I have a form:And a script:

2011-03-31 22:40:07Z

I am trying to create a basic authentication through the browser, but I can't really get there.If this script won't be here the browser authentication will take over, but I want to tell the browser that the user is about to make the authentication.The address should be something like:I have a form:And a script:Use jQuery's beforeSend callback to add an HTTP header with the authentication information:How things change in a year. In addition to the header attribute in place of xhr.setRequestHeader, current jQuery (1.7.2+) includes a username and password attribute with the $.ajax call.EDIT from comments and other answers: To be clear - in order to preemptively send authentication without a 401 Unauthorized response, instead of setRequestHeader (pre -1.7) use 'headers':Use the beforeSend callback to add a HTTP header with the authentication information like so:Or, simply use the headers property introduced in 1.5:Reference: jQuery Ajax APIThe examples above are a bit confusing, and this is probably the best way:I took the above from a combination of Rico and Yossi's answer.The btoa function Base64 encodes a string.As others have suggested, you can set the username and password directly in the Ajax call:OR use the headers property if you would rather not store your credentials in plain text:Whichever way you send it, the server has to be very polite. For Apache, your .htaccess file should look something like this:For some cross domain requests, the browser sends a preflight OPTIONS request that is missing your authentication headers. Wrap your authentication directives inside the LimitExcept tag to respond properly to the preflight.Then send a few headers to tell the browser that it is allowed to authenticate, and the  Access-Control-Allow-Origin to grant permission for the cross-site request.In some cases, the * wildcard doesn't work as a value for Access-Control-Allow-Origin: You need to return the exact domain of the callee. Use SetEnvIf to capture this value.Use the jQuery ajaxSetup function, that can set up default values for all ajax requests.JSONP does not work with basic authentication so the jQuery beforeSend callback won't work with JSONP/Script.I managed to work around this limitation by adding the user and password to the request (e.g. user:pw@domain.tld). This works with pretty much any browser except InternetÂ Explorer where authentication through URLs is not supported (the call will simply not be executed). See http://support.microsoft.com/kb/834489.There are 3 ways to achieve this as shown belowMethod 1: Method 2: Method 3: According to SharkAlley answer it works with nginx too.I was search for a solution to get data by jQuery from a server behind nginx and restricted by Base Auth. This works for me:And the JavaScript code is:Article that I find useful:

Regex for password must contain at least eight characters, at least one number and both lower and uppercase letters and special characters

Swapnil Tatkondawar

[Regex for password must contain at least eight characters, at least one number and both lower and uppercase letters and special characters](https://stackoverflow.com/questions/19605150/regex-for-password-must-contain-at-least-eight-characters-at-least-one-number-a)

I want a regular expression to check that:A password contains at least eight characters, including at least one number and  includes both lower and uppercase letters and special characters, for example #, ?, !.It cannot be your old password or contain your username, "password", or "websitename"And here is my validation expression which is for eight characters including one uppercase letter, one lowercase letter, and one number or special character.How can I write it for a password must be eight characters including one uppercase letter, one special character and alphanumeric characters?

2013-10-26 09:42:10Z

I want a regular expression to check that:A password contains at least eight characters, including at least one number and  includes both lower and uppercase letters and special characters, for example #, ?, !.It cannot be your old password or contain your username, "password", or "websitename"And here is my validation expression which is for eight characters including one uppercase letter, one lowercase letter, and one number or special character.How can I write it for a password must be eight characters including one uppercase letter, one special character and alphanumeric characters?Minimum eight characters, at least one letter and one number:Minimum eight characters, at least one letter, one number and one special character:Minimum eight characters, at least one uppercase letter, one lowercase letter and one number:Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character:Minimum eight and maximum 10 characters, at least one uppercase letter, one lowercase letter, one number and one special character:You may use this regex with multiple lookahead assertions (conditions):This regex will enforce these rules:Regular expressions don't have an AND operator, so it's pretty hard to write a regex that matches valid passwords, when validity is defined by something AND something else AND something else...But, regular expressions do have an OR operator, so just apply DeMorgan's theorem, and write a regex that matches invalid passwords:Anything with less than eight characters OR anything with no numbers OR anything with no uppercase OR or anything with no lowercase OR anything with no special characters.So:If anything matches that, then it's an invalid password.Just a small improvement for @anubhava's answer: Since special character are limited to the ones in the keyboard, use this for any special character:^(?=.*?[A-Z])(?=(.*[a-z]){1,})(?=(.*[\d]){1,})(?=(.*[\W]){1,})(?!.*\s).{8,}$This regex will enforce these rules:I had some difficulty following the most popular answer for my circumstances. For example, my validation was failing with characters such as ; or [. I was not interested in white-listing my special characters, so I instead leveraged [^\w\s] as a test - simply put - match non word characters (including numeric) and non white space characters. To summarize, here is what worked for me...JSFiddle Link - simple demo covering various casesImport the JavaScript file jquery.validate.min.js.You can use this method:A more "generic" version(?), allowing none English letters as special characters.Try this one:Expression:Optional Special Characters:Expression:If the min and max condition is not required then remove .{6, 16}I would reply to Peter Mortensen, but I don't have enough reputation.His expressions are perfect for each of the specified minimum requirements. The problem with his expressions that don't require special characters is that they also don't ALLOW special characters, so they also enforce maximum requirements, which I don't believe the OP requested. Normally you want to allow your users to make their password as strong as they want; why restrict strong passwords?So, his "minimum eight characters, at least one letter and one number" expression:^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$achieves the minimum requirement, but the remaining characters can only be letter and numbers. To allow (but not require) special characters, you should use something like:^(?=.*[A-Za-z])(?=.*\d).{8,}$ to allow any charactersor^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d$@$!%*#?&]{8,}$ to allow specific special charactersLikewise, "minimum eight characters, at least one uppercase letter, one lowercase letter and one number:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$meets that minimum requirement, but only allows letters and numbers. Use:^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$ to allow any charactersor^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d$@$!%*?&]{8,} to allow specific special characters.Not directly answering the question, but does it really have to be a regex?I used to do lots of Perl, and got used to solving problems with regexes. However, when they get more complicated with all the look-aheads and other quirks, you need to write dozens of unit tests to kill all those little bugs.Furthermore, a regex is typically a few times slower than an imperative or a functional solution.For example, the following (not very FP) Scala function solves the original question about three times faster than the regex of the most popular answer. What it does is also so clear that you don't need a unit test at all:What about considering the following regex solution:^(?=.*[\w])(?=.*[\W])[\w\W]{8,}$Which validates the following:Check it out working at the following link https://regex101.com/r/qPmC06/4/According to your need this pattern should work just fine. Try this,Just create a string variable, assign the pattern, and create a boolean method which returns true if the pattern is correct, else false.Sample:@ClasG has already suggested:but it does not accept _(underscore) as a special character (eg. Aa12345_).An improved one is:I've found many problems here, so I made my own.Here it is in all it's glory, with tests: https://regex101.com/r/DCRR65/4/testsThings to look out for:Demo:Just we can do this by using HTML5.Use below code in pattern attribute,It will work perfectly.You can use the below regular expression pattern to check the password whether it matches your expectations or not.Use this,It will validate for at least one lowercase, one upper case, one number and the special charecters of (!,@,#,$,%,?,=,*,&).Minimum length is 8 and maximum length is 20In Java/Android, to test a password with at least one number, one letter, one special character in following pattern:Try this:This regular expression works for me perfectly.Pattern to match at least 1 upper case character, 1 digit and any special characters and the length between 8 to 63."^(?=.[a-z])(?=.[A-Z])(?=.*\d)[a-zA-Z\d\W]{8,63}$"This pattern was used for JAVA programming.Hope the below works. I tried this in Azure custom policy.^(?=.[a-z])(?=.[A-Z])(?=.\d)(?=.[@#$%^&*-_+=[]{}|\:',?/~&quot;();!])([A-Za-z\d@#$%^&amp;*\-_+=[\]{}|\\:',?/~"();!]|.(?!@)){6,16}$Link check online https://regex101.com/r/mqGurh/1I've actually just copied the first answer here and turned it into a more ux-convenient regex which needs one upper, one lower and at least 8 chars but accepts everything "in between".This one is an example-regex which requiresIMPORTANT: This regex will also except all other characters e.g. numbers, special characters like $,#,! etc. - as long as the rules 1. to 3. match the input stringMind the "." alomst at the end of the regex. This will match almost any (and afaik any readable) character A solution I found in one of the previous answer as:*Minimum 8 characters at least 1 Uppercase Alphabet, 1 Lowercase Alphabet, 1 Number and 1 Special Character:...didn't work for me, but the following is a simplified version and works great (add any special character you like, I added # here), and add the number rule as you do with the letters as:

How do you clone an Array of Objects in Javascript?

wallyqs

[How do you clone an Array of Objects in Javascript?](https://stackoverflow.com/questions/597588/how-do-you-clone-an-array-of-objects-in-javascript)

...where each object also has references to other objects within the same array?When I first came up with this problem I just though of something like would exist and searched for info on how to clone objects in javascript. I did find a question on StackOverflow (answered by the very same @JohnResig) and he pointed out that with jQuery you could doto clone an object. I tried this though, this only copies the references of the objects in the array. So if I the value of both nodesArray[0] and clonedNodesArray[0] will turn out to be "green". Then I triedwhich deep copies an Object, but I got "too much recursion" and "control stack overflow" messages from both Firebug and Opera Dragonfly respectively.How would you do it? Is this something that shouldn't even be done? Is there a reusable way of doing this in Javascript?

2009-02-28 05:56:26Z

...where each object also has references to other objects within the same array?When I first came up with this problem I just though of something like would exist and searched for info on how to clone objects in javascript. I did find a question on StackOverflow (answered by the very same @JohnResig) and he pointed out that with jQuery you could doto clone an object. I tried this though, this only copies the references of the objects in the array. So if I the value of both nodesArray[0] and clonedNodesArray[0] will turn out to be "green". Then I triedwhich deep copies an Object, but I got "too much recursion" and "control stack overflow" messages from both Firebug and Opera Dragonfly respectively.How would you do it? Is this something that shouldn't even be done? Is there a reusable way of doing this in Javascript?The issue with your shallow copy is that all the objects aren't cloned.  While the references to each object are unique in each array, once you ultimately grab onto it you're dealing with the same object as before.  There is nothing wrong with the way you cloned it...  the same result would occur using Array.slice().The reason your deep copy is having problems is because you're ending up with circular object references.  Deep will go as deep as it can go, and if you've got a circle, it'll keep going infinitely until the browser faints.If the data structure cannot be represented as a directed acyclic graph, then I'm not sure you're going to be able to find an all-purpose method for deep cloning.  Cyclic graphs provide many tricky corner cases, and since it's not a common operation I doubt anyone has written a full solution (if it's even possible - it might not be!  But I have no time to try to write a rigorous proof now.).  I found some good comments on the issue on this page.If you need a deep copy of an Array of Objects with circular references I believe you're going to have to code your own method to handle your specialized data structure, such that it is a multi-pass clone:As long as your objects contain JSON-serializable content (no functions, no Number.POSITIVE_INFINITY, etc.) there is no need for any loops to clone arrays or objects.  Here is a pure vanilla one-line solution.To summarize the comments below, the primary advantage of this approach is that it also clones the contents of the array, not just the array itself.  The primary downsides are its limit of only working on JSON-serializable content, and it's performance (which is significantly worse than a slice based approach).I solved cloning of an array of objects with Object.assignor even shorter with spread syntaxIf all you need is a shallow copy, a really easy way is:Best and most up to date way to do this clone is as follows:Using the ... ES6 spread operator.Here's the most simple Example:This way we spread the array into individual values and put it in a new array with the [] operator.Here's a longer example that shows the different ways it works: This works for me:And if you need deep copy of objects in array:Map will create new array from the old one (without reference to old one) and inside the map you create new object and iterate over properties (keys) and assign values from old Array object to coresponding properties to the new object.  This will create exactly the same array of objects.I may have a simple way to do this without having to do painful recursion and not knowing all the finer details of the object in question. Using jQuery, simply convert your object to JSON using the jQuery $.toJSON(myObjectArray), then take your JSON string and evaluate it back to an object. BAM! Done, and done! Problem solved. :)I'm answering this question because there doesn't seem to be a simple and explicit solution to the problem of "cloning an array of objects in Javascript":This solution iterates the array values, then iterates the object keys, saving the latter to a new object, and then pushing that new object to a new array.See jsfiddle.  Note: a simple .slice() or [].concat() isn't enough for the objects within the array.JQuery extend is working fine, just you need to specify that you are cloning an array rather than an object (note the [] instead of {} as parameter to the extend method):This method is very simple and you can modify your clone without modify the original array.As Daniel Lew mentioned, cyclic graphs have some problems. If I had this problem I'd either add special clone() methods to the problematic objects or remember which objects I've already copied.I'd do it with a variable copyCount which increases by 1 every time you copy in your code. An object that has a lower copyCount than the current copy-process is copied. If not, the copy, that exists already, should be referenced. This makes it necessary to link from the original to its copy.There is still one problem: Memory. If you have this reference from one object to the other, it's likely that the browser can't free those objects, as they are always referenced from somewhere. You'd have to make a second pass where you set all copy-references to Null. (If you do this, you'd not have to have a copyCount but a boolean isCopied would be enough, as you can reset the value in the second pass.)lodash has cloneDeep function for this purposes:Array.slice can be used to copy an array or part of an array..

http://www.devguru.com/Technologies/Ecmascript/Quickref/Slice.html

This would work with strings and numbers .. - changing a string in one array would not affect the other - but objects are still just copied by reference so changes to referenced objects in one array would have an affect on the other array.Here is an example of a JavaScript undo manager that could be useful for this :http://www.ridgway.co.za/archive/2007/11/07/simple-javascript-undo-manager-for-dtos.aspxMy approach: gives me a nice, clean, deep clone of the original array - with none of the objects referenced back to the original :-)forget eval() (is the most misused feature of JS and makes the code slow) and slice(0) (works for simple data types only)This is the best solution for me:I was pretty frustrated by this problem. Apparently the problem arises when you send in a generic Array to the $.extend method. So, to fix it, I added a little check, and it works perfectly with generic arrays, jQuery arrays, and any objects.Invoke using:This deeply copies arrays, objects, null and other scalar values, and also deeply copies any properties on non-native functions (which is pretty uncommon but possible). (For efficiency, we do not attempt to copy non-numeric properties on arrays.)I use the new ECMAScript 6 Object.assign method :the first argument of this method is the array to be update,

we pass an empty object because we want to have a new object.we can also use this syntax, which is the same but shorter :We can invent a simple recursive Array method to clone multidimensional arrays. While the objects within the nested arrays keep their reference to the corresponding objects in the source array, arrays won't.In JavaScript, array and object copy change the origin values, so Deep copy is the solution for this.A deep copy means actually creating a new array and copying over the values, since whatever happens to it will never affect the origin one.JSON.parse and JSON.stringify is the best and simple way to Deep copy. The JSON.stringify() method converts a JavaScript value to a JSON string.The JSON.parse() method parses a JSON string, constructing the JavaScript value or object described by the string.//Deep CloneFor more details: Read Herewith jQuery:The following code will perform recursively a deep copying of objects and array:SourceSome elegant ways for deep cloning in javascripthttps://mootools.net/core/docs/1.6.0/Types/Objecthttps://scotch.io/bar-talk/copying-objects-in-javascript1) A vanilla Javascript method for cloning objects2) A clever exploit of the JSON library to deep-clone objects3) Using jQueryâ€™s $.extend() function4) Using Mootoolsâ€™ clone() function to clone objectsIf you want to implement deep clone use JSON.parse(JSON.stringify(your {} or []))I think managed to write a generic method of deep cloning any JavaScript structure mainly using Object.create which is supported in all modern browsers. The code is like this:For cloning the objects as well I was just going to suggest ECMAScript 6 reduce():But frankly I like the answer of @dinodsaurus even better. I'm just putting this version here as another option, but personally I'll be using map() as suggested by @dinodsaurus .Depending if you have Underscore or Babel here is a Benchmark of the different way of deep cloning an array. https://jsperf.com/object-rest-spread-vs-clone/2Look like babel is the fastest.

Why is [1,2] + [3,4] =ã€Œ1,23,4ã€in JavaScript?

okeen

[Why is [1,2] + [3,4] =ã€Œ1,23,4ã€in JavaScript?](https://stackoverflow.com/questions/7124884/why-is-1-2-3-4-1-23-4-in-javascript)

I wanted to add the elements of an array into another, so I tried this:It responded with:What is going on?

2011-08-19 16:55:10Z

I wanted to add the elements of an array into another, so I tried this:It responded with:What is going on?The + operator is not defined for arrays. What happens is that Javascript converts arrays into strings and concatenates those.Â Since this question and consequently my answer is getting a lot of attention I felt it would be useful and relevant to have an overview about how the + operator behaves in general also.So, here it goes.Excluding E4X and implementation-specific stuff, Javascript (as of ES5) has 6 built-in data types: Note that although typeof somewhat confusingly returns object for Null and function for callable Objects, Null is actually not an Object and strictly speaking, in specification-conforming Javascript implementations all functions are considered to be Objects.That's right - Javascript has no primitive arrays as such; only instances of an Object called Array with some syntactic sugar to ease the pain.Adding more to the confusion, wrapper entities such as new Number(5), new Boolean(true) and new String("abc") are all of object type, not numbers, booleans or strings as one might expect. Nevertheless for arithmetic operators Number and Boolean behave as numbers.Easy, huh? With all that out of the way, we can move on to the overview itself.Different result types of + by operand types* applies to Chrome13, FF6, Opera11 and IE9. Checking other browsers and versions is left as an exercise for the reader.Note: As pointed out by CMS, for certain cases of objects such as Number, Boolean and custom ones the + operator doesn't necessarily produce a string result. It can vary depending on the implementation of object to primitive conversion. For example var o = { valueOf:function () { return 4; } }; evaluating o + 2; produces 6, a number, evaluating o + '2' produces '42', a string.To see how the overview table was generated visit http://jsfiddle.net/1obxuc7m/JavaScript's + operator has two purposes: adding two numbers, or joining two strings. It doesn't have a specific behaviour for arrays, so it's converting them to strings and then joining them.If you want to join two arrays to produce a new one, use the .concat method instead: If you want to efficiently add all elements from one array to another, you need to use the .push method:The behaviour of the + operator is defined in ECMA-262 5e Section 11.6.1:You can see that each operand is converted ToPrimitive. By reading further we can find that ToPrimitive will always convert arrays to strings, producing this result.It adds the two arrays as if they were strings.The string representation for the first array would be "1,2" and the second would be "3,4". So when the + sign is found, it cannot sum arrays and then concatenate them as being strings.The + concats strings, so it converts the arrays to strings.To combine arrays, use concat.In JavaScript, the binary addition operator (+) performs both numerical addition and string concatenation.  However, when it's first argument is neither a number nor a string then it converts it into a string (hence "1,2") then it does the same with the second "3,4" and concatenates them to "1,23,4".Try using the "concat" method of Arrays instead:It's converting the individual arrays to strings, then combining the strings.It looks like JavaScript is turning your arrays into strings and joining them together. If you want to add tuples together, you'll have to use a loop or a map function.[1,2]+[3,4] in JavaScript is same as evaluating:and so to solve your problem, best thing would be to add two arrays in-place or without creating a new array:It's doing exactly what you asked it to do.What you're adding together are array references (which JS converts to strings), not numbers as it seems. It's a bit like adding strings together: "hello " + "world" = "hello world" would be nice if you could overload operators in JavaScript but you can't:

Can I define custom operator overloads in Javascript?

you can only hack the "==" operator which converts to strings before comparing:

http://blogger.xs4all.nl/peterned/archive/2009/04/01/462517.aspxIt is because, + operator assumes that the operands are string, if they are not numbers. So, it first converts them to string and concats to give the final result , if its not a number. Also, it does not support arrays.Some answers here have explained how the unexpected undesired output ('1,23,4') happens and some have explained how to obtain what they assume to be the expected desired output ([1,2,3,4]), i.e. array concatenation. However, the nature of the expected desired output is actually somewhat ambiguous because the original question simply states "I wanted to add the elements of an array into another...". That could mean array concatenation but it could also mean tuple addition (e.g. here and here), i.e. adding the scalar values of elements in one array to the scalar values of the corresponding elements in the second, e.g. combining [1,2] and [3,4] to obtain [4,6].Assuming both arrays have the same arity/length, here is one simple solution:Another result using just a simple "+" sign will be:So something like this should work (but!):... but it will convert the variable a from an Array to String! Keep it in mind.

Constructors in JavaScript objects

Click Upvote

[Constructors in JavaScript objects](https://stackoverflow.com/questions/1114024/constructors-in-javascript-objects)

Can JavaScript classes/objects have constructors? How are they created?

2009-07-11 16:11:42Z

Can JavaScript classes/objects have constructors? How are they created?Using prototypes:Hiding "color" (somewhat resembles a private member variable):Usage:Here's a template I sometimes use for OOP-similar behavior in JavaScript. As you can see, you can simulate private (both static and instance) members using closures. What new MyClass() will return is an object with only the properties assigned to the this object and in the prototype object of the "class."I've been asked about inheritance using this pattern, so here goes:And an example to use it all:As you can see, the classes correctly interact with each other (they share the static id from MyClass, the announce method uses the correct get_name method, etc.)One thing to note is the need to shadow instance properties. You can actually make the inherit function go through all instance properties (using hasOwnProperty) that are functions, and automagically add a super_<method name> property. This would let you call this.super_get_name() instead of storing it in a temporary value and calling it bound using call.For methods on the prototype you don't need to worry about the above though, if you want to access the super class' prototype methods, you can just call this.constructor.super.prototype.methodName. If you want to make it less verbose you can of course add convenience properties. :)It seems to me most of you are giving example of getters and setters not a constructor, ie http://en.wikipedia.org/wiki/Constructor_(object-oriented_programming).lunched-dan was closer but the example didn't work in jsFiddle.This example creates a private constructor function that only runs during the creation of the object.If you wanted to assign public properties then the constructor could be defined as such:The point of the constructor property is to provide some way of pretending JavaScript has classes. One of the things you cannot usefully do is change an object's constructor after it's been created. It's complicated.I wrote a fairly comprehensive piece on it a few years ago: http://joost.zeekat.nl/constructors-considered-mildly-confusing.htmlExample here: http://jsfiddle.net/FZ5nC/Try this template:You must adjust your namespace if you are defining a static class:Example class:Example instantiation:Notice functions are defined as A.B = function A_B(). This is to make your script easier to debug. Open Chrome's Inspect Element panel, run this script, and expand the debug backtrace:This is a constructor:When you doMyClass is executed, and a new object is returned of that class.I found this tutorial very useful. This approach is used by most of jQuery plug-ins. http://www.htmlgoodies.com/html5/tutorials/create-an-object-oriented-javascript-class-constructor.html#fbid=OVYAQL_TDpKNow ,This pattern has served me well. With this pattern, you create classes in separate files, load them into your overall app "as needed".Yes, you can define a constructor inside a class declaration like this:I guess I'll post what I do with javascript closure since no one is using closure yet. Comments and suggestions to this solution are welcome. :)Using Nick's sample above, you can create a constructor for objects without parameters using a return statement as the last statement in your object definition. Return your constructor function as below and it will run the code in __construct each time you create the object:Maybe it's gotten a little simpler, but below is what I've come up with now in 2017:In using the class above, I have the following:As you can see, the constructor takes in two parameters, and we set the object's properties. We also alter the object's color and shape by using the setter functions, and prove that its change remained upon calling getInfo() after these changes.A bit late, but I hope this helps. I've tested this with a mocha unit-testing, and it's working well.They do if you use Typescript - open source from MicroSoft :-)Typescript lets you 'fake' OO constructs that are compiled into javascript constructs. If you're starting a large project it may save you a lot of time and it just reached milestone 1.0 version.http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdfThe above code gets 'compiled' to :In JavaScript the invocation type defines the behaviour of the function:The function is invoked as a constructor when calling using new operator:Any instance or prototype object in JavaScript have a property constructor, which refers to the constructor function.  Check this post about constructor property.While using Blixt's great template from above, I found out that it doesn't work well with multi-level inheritance (MyGrandChildClass extending MyChildClass extending MyClass) â€“ it cycles on calling first parent's constructor over and over. So here is a simple workaround â€“ if you need multi-level inheritance, instead of using this.constructor.super.call(this, surName); use chainSuper(this).call(this, surName); with the chain function defined like this:http://www.jsoops.net/ is quite good for oop in Js. If provide private, protected, public variable and function, and also Inheritance feature. Example Code:just to offer up some variety. ds.oop is a nice way to declare classes with constructors in javascript. It supports every possible type of inheritance (Including 1 type that even c# does not support) as well as Interfaces which is nice.Here we need to notice one point in java script, it is a class-less language however,we can achieve it by using functions in java script. The most common way to achieve this we need to create a function in java script and use new keyword to create an object and use this keyword to define property and methods.Below is the example.In most cases you have to somehow declare the property you need before you can call a method that passes in this information. If you do not have to initially set a property you can just call a method within the object like so. Probably not the most pretty way of doing this but this still works.

How to get all options of a select using jQuery?

Click Upvote

[How to get all options of a select using jQuery?](https://stackoverflow.com/questions/590163/how-to-get-all-options-of-a-select-using-jquery)

How can I get all the options of a select through jQuery by passing on its ID?I am only looking to get their values, not the text.

2009-02-26 11:32:21Z

How can I get all the options of a select through jQuery by passing on its ID?I am only looking to get their values, not the text.Use:.each() | jQuery API DocumentationI don't know jQuery, but I do know that if you get the select element, it contains an 'options' object.$.map is probably the most efficient way to do this.You can add change options to $('#selectBox option:selected') if you only want the ones that are selected.The first line selects all of the checkboxes and puts their jQuery element into a variable. We then use the .map function of jQuery to apply a function to each of the elements of that variable; all we are doing is returning the value of each element as that is all we care about. Because we are returning them inside of the map function it actually builds an array of the values just as requested.Some answers uses each, but map is a better alternative here IMHO:There are (at least) two map functions in jQuery. Thomas Petersen's answer uses "Utilities/jQuery.map"; this answer uses "Traversing/map" (and therefore a little cleaner code).It depends on what you are going to do with the values. If you, let's say, want to return the values from a function, map is probably the better alternative. But if you are going to use the values directly you probably want each.Although, the CORRECT way is to set the DOM property of the element, like so:This will put the option values of #myselectbox into a nice clean array for you:You can take all your "selected values" by the name of the checkboxes and present them in a sting separated by ",".A nice way to do this is to use jQuery's $.map():Working exampleThe most efficient way to do this is to use $.map()Example:You can use following code for that:For multiselect option:$('#test').val() returns list of selected values.

$('#test option').length returns total number of options (both selected and not selected)This is a simple Script with jQuery:Here is a simple example in jquery to get all the values, texts, or value of the selected item, or text of the selected itemOr:To see the results:If you're looking for all options with some selected text then the below code will work.The short wayor

ExecJS and could not find a JavaScript runtime

srboisvert

[ExecJS and could not find a JavaScript runtime](https://stackoverflow.com/questions/6282307/execjs-and-could-not-find-a-javascript-runtime)

I'm trying to use the Mongoid / Devise Rails 3.1 template (Mongoid and Devise), and I keep getting an error stating ExecJS cannot find a JavaScript runtime.  Fair enough when I didn't have any installed, but I've tried installing Node.js, Mustang and the Ruby Racer, but nothing is working. I could not find a JavaScript runtime. See sstephenson/ExecJS (GitHub) for a list of available runtimes (ExecJS::RuntimeUnavailable).What do I need to do to get this working?

2011-06-08 16:47:34Z

I'm trying to use the Mongoid / Devise Rails 3.1 template (Mongoid and Devise), and I keep getting an error stating ExecJS cannot find a JavaScript runtime.  Fair enough when I didn't have any installed, but I've tried installing Node.js, Mustang and the Ruby Racer, but nothing is working. I could not find a JavaScript runtime. See sstephenson/ExecJS (GitHub) for a list of available runtimes (ExecJS::RuntimeUnavailable).What do I need to do to get this working?I'm on Ubuntu 11.04 and had similar issues. Installing Node.js fixed it.As of Ubuntu 13.04 x64 you only need to run:This will solve the problem.Just add ExecJS and the Ruby Racer in your gem file and run bundle install after.                 Everything should be fine after.In your Gem file, writeand then runEverything works fine for me :)I had a similar problem: my Rails 3.1 app worked fine on Windows but got the same error as the OP when running on Linux.  The fix that worked for me on both platforms was to add the following to my Gemfile:The trick is knowing that :platforms => :ruby actually means only use this gem with "C Ruby (MRI) or Rubinius, but NOT Windows."Other possible values for :platforms are described in the bundler man page.FYI: Windows has a builtin JavaScript engine which execjs can locate.  On Linux there is not a builtin although there are several available that one can install.  therubyracer is one of them.  Others are listed in the execjs README.md.Adding the following gem to my Gemfile solved the issue:Then bundle your new dependencies:An alternative way is to just bundle without the gem group that contains the things you don't have.So do:you don't have to modify the Gemfile at all, providing of course you are not doing asset chain stuff - which usually applies in non-development environments.  Bundle will remember your '--without' setting in the .bundle/config file.   Add following gems in your gem fileand runyou are done :)For amazon linux(AMI):I used to add the Ruby Racer to the Gem file to fix it. But hey, Node.js works!I had this same error but only on my staging server not my production environment.  nodejs was already installed on both environments.By typing:I found out that the node command was located in: /usr/bin/node on production 

but: /usr/local/bin/node in staging.After creating a symlink on staging i.e. :the application then worked in staging. No muss no fuss.Don't Use RubyRacer as it is bad on memory. Installing Node.js as suggested by some people here is a better idea.This list of available runtimes that can be used by ExecJs Library also documents the use of Node.jshttps://github.com/sstephenson/execjsSo, Node.js is not an overkill, and much better solution than using the RubyRacer.FYI, this fixed the problem for me... it's a pathing problem:

http://forums.freebsd.org/showthread.php?t=35539I started getting this problem when I started using rbenv with Ruby 1.9.3 where as my system ruby is 1.8.7. The gem is installed in both places but for some reason the rails script didn't pick it up. But adding the "execjs" and "therubyracer" to the Gemfile did the trick.In your gem file

Uncomment this line.19 # gem 'therubyracer', platforms: :rubyAnd run

bundle installYou are ready to work. :)Attempting to debug in RubyMine using Ubuntu 18.04, Ruby 2.6.*, Rails 5, & RubyMine 2019.1.1, I ran into the same issue.To resolve the issue, I uncommented the mini_racer line from my Gemfile and then ran bundle: Change to: 

How do I find the absolute position of an element using jQuery?

akshat

[How do I find the absolute position of an element using jQuery?](https://stackoverflow.com/questions/683339/how-do-i-find-the-absolute-position-of-an-element-using-jquery)

Is there a way of finding the absolute position of an element, i.e. relative to the start of the window, using jQuery?

2009-03-25 20:36:52Z

Is there a way of finding the absolute position of an element, i.e. relative to the start of the window, using jQuery?.offset() will return the offset position of an element as a simple object, eg:You can use this return value to position other elements at the same spot:Note that $(element).offset() tells you the position of an element relative to the document. This works great in most circumstances, but in the case of position:fixed you can get unexpected results.If your document is longer than the viewport and you have scrolled vertically toward the bottom of the document, then your position:fixed element's offset() value will be greater than the expected value by the amount you have scrolled. If you are looking for a value relative to the viewport (window), rather than the document on a position:fixed element, you can subtract the document's scrollTop() value from the fixed element's offset().top value. Example: $("#el").offset().top - $(document).scrollTop()If the position:fixed element's offset parent is the document, you want to read parseInt($.css('top')) instead.

Easy way to turn JavaScript array into comma-separated list?

Herb Caudill

[Easy way to turn JavaScript array into comma-separated list?](https://stackoverflow.com/questions/201724/easy-way-to-turn-javascript-array-into-comma-separated-list)

I have a one-dimensional array of strings in JavaScript that I'd like to turn into a comma-separated list. Is there a simple way in garden-variety JavaScript (or jQuery) to turn that into a comma-separated list? (I know how to iterate through the array and build the string myself by concatenation if that's the only way.)

2008-10-14 15:47:17Z

I have a one-dimensional array of strings in JavaScript that I'd like to turn into a comma-separated list. Is there a simple way in garden-variety JavaScript (or jQuery) to turn that into a comma-separated list? (I know how to iterate through the array and build the string myself by concatenation if that's the only way.)The Array.prototype.join() method:Actually, the toString() implementation does a join with commas by default:I don't know if this is mandated by the JS spec but this is what most pretty much all browsers seem to be doing.Or (more efficiently):The toString method of an array when called returns exactly what you need - comma-separated list.Here's an implementation that converts a two-dimensional array or an array of columns into a properly escaped CSV string. The functions do not check for valid string/number input or column counts (ensure your array is valid to begin with). The cells can contain commas and quotes! Here's a script for decoding CSV strings.Here's my script for encoding CSV strings:I think this should do it:fiddleBasically all it does is check if the string contains a comma or quote. If it does, then it doubles all the quotes, and puts quotes on the ends. Then it joins each of the parts with a comma.Use the built-in Array.toString method MDN on Array.toString()There are many methods to convert an array to comma separated listFrom MDNThe codeFrom MDNThe codeThe []+ or +[] will convert it into a stringwill output trueIf you need to use " and " instead of ", " between the last two items you can do this:I usually find myself needing something that also skips the value if that value is null or undefined, etc.So here is the solution that works for me:Most of the solutions here would return ', apple' if my array would look like the one in my second example. That's why I prefer this solution.Taking the initial code:The initial answer of using the join function is ideal. One thing to consider would be the ultimate use of the string. For using in some end textual display:For using in a URL for passing multiple values through in a (somewhat) RESTful manner:Of course, it all depends on the final use. Just keep the data source and use in mind and all will be right with the world.Do you want to end it with an "and"?For this situation, I created an npm module.Try arrford:https://github.com/dawsonbotsford/arrfordTonic linkPapa Parse (browser based) handles commas in values and other edge cases.

Use Baby Parse for Node.Eg. (node)1,,"a,b"I liked the solution at https://jsfiddle.net/rwone/qJUh2/ because it adds spaces after commas:Or, as suggested by @StackOverflaw in the comments:As of Chrome 72, it's possible to use Intl.ListFormat:Please note that this way is in its very earlier stage, so as of the date of posting this answer, expect incompatibility with older versions of Chrome and other browsers.This solution also removes values such as "   ":

How to append data to div using JavaScript?

Adham

[How to append data to div using JavaScript?](https://stackoverflow.com/questions/5677799/how-to-append-data-to-div-using-javascript)

I'm using AJAX to append data to div element, where I fill the div from JavaScript, how can I append new data to the div without losing the previous data found in div?

2011-04-15 13:54:07Z

I'm using AJAX to append data to div element, where I fill the div from JavaScript, how can I append new data to the div without losing the previous data found in div?Try this:Using appendChild:Using innerHTML:

This approach will remove all the listeners to the existing elements as mentioned by @BiAiB. So use caution if you are planning to use this version.Beware of innerHTML, you sort of lose something when you use it:Is equivalent to:Which will destroy all nodes inside your div and recreate new ones. All references and listeners to elements inside it will be lost.If you need to keep them (when you have attached a click handler, for example), you have to append the new contents with the DOM functions(appendChild,insertAfter,insertBefore):If you want to do it fast and don't want to lose references and listeners use: .insertAdjacentHTML();"It does not reparse the element it is being used on and thus it does not corrupt the existing elements inside the element. This, and avoiding the extra step of serialization make it much faster than direct innerHTML manipulation."Supported on all mainline browsers (IE6+, FF8+,All Others and Mobile): http://caniuse.com/#feat=insertadjacenthtmlExample from https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTMLIf you are using jQuery you can use $('#mydiv').append('html content') and it will keep the existing content.http://api.jquery.com/append/Even this will work:IE9+ (Vista+) solution, without creating new text nodes:However, this didn't quite do the trick for me since I needed a new line after each message, so my DIV turned into a styled UL with this code:From https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent :you can use jQuery. which make it very simple.just download the jQuery file add jQuery into your HTML 

or you can user online link:and try this:Why not just use setAttribute ?Then you can get this data by : java scriptjqueryUse .html() without any arguments to see that you have entered.

You can use the browser console to quickly test these functions before using them in your code.

How can I check if an element exists in the visible DOM?

Justin Bull

[How can I check if an element exists in the visible DOM?](https://stackoverflow.com/questions/5629684/how-can-i-check-if-an-element-exists-in-the-visible-dom)

How do you test an element for existence without the use of the getElementById method?I have set up a live demo for reference. I will also print the code on here as well:Basically the above code demonstrates an element being stored into a variable and then removed from the DOM. Even though the element has been removed from the DOM, the variable retains the element as it was when first declared. In other words, it is not a live reference to the element itself, but rather a replica. As a result, checking the variable's value (the element) for existence will provide an unexpected result.The isNull function is my attempt to check for an elements existence from a variable, and it works, but I would like to know if there is an easier way to accomplish the same result.PS: I'm also interested in why JavaScript variables behave like this if anyone knows of some good articles related to the subject.

2011-04-12 02:19:05Z

How do you test an element for existence without the use of the getElementById method?I have set up a live demo for reference. I will also print the code on here as well:Basically the above code demonstrates an element being stored into a variable and then removed from the DOM. Even though the element has been removed from the DOM, the variable retains the element as it was when first declared. In other words, it is not a live reference to the element itself, but rather a replica. As a result, checking the variable's value (the element) for existence will provide an unexpected result.The isNull function is my attempt to check for an elements existence from a variable, and it works, but I would like to know if there is an easier way to accomplish the same result.PS: I'm also interested in why JavaScript variables behave like this if anyone knows of some good articles related to the subject.It seems some people are landing here, and simply want to know if an element exists (a little bit different to the original question).That's as simple as using any of the browser's selecting method, and checking it for a truthy value (generally).For example, if my element had an id of "find-me", I could simply use...This is specified to either return a reference to the element or null. If you must have a Boolean value, simply toss a !! before the method call.In addition, you can use some of the many other methods that exist for finding elements, such as (all living off document):Some of these methods return a NodeList, so be sure to check its length property, because a NodeList is an object, and therefore truthy.For actually determining if an element exists as part of the visible DOM (like the question originally asked), Csuwldcat provides a better solution than rolling your own (as this answer used to contain). That is, to use the contains() method on DOM elements.You could use it like so...Use getElementById() if it's available.Also, here's an easy way to do it with jQuery:And if you can't use third-party libraries, just stick to base JavaScript:Using the Node.contains DOM API, you can check for the presence of any element in the page (currently in the DOM) quite easily:CROSS-BROWSER NOTE: the document object in InternetÂ Explorer does not have a contains() method - to ensure cross-browser compatibility, use document.body.contains() instead.I simply do:It works for me and had no issues with it yet...From Mozilla Developer Network:This function checks to see if an element is in the page's body. As contains() is inclusive and determining if the body contains itself isn't the intention of isInPage, this case explicitly returns false.node is the node we want to check for in the <body>.You could just check to see if the parentNode property is null.That is,The easiest solution is to check the baseURI property, which is set only when the element is inserted in the DOM, and it reverts to an empty string when it is removed.jQuery solution:This worked for me using jQuery and did not require $('#elementId')[0] to be used. csuwldcat's solution seems to be the best of the bunch, but a slight modification is needed to make it work correctly with an element that's in a different document than the JavaScript code is running in, such as an iframe:Note the use of the element's ownerDocument property, as opposed to just plain old document (which may or may not refer to the element's owner document).torazaburo posted an even simpler method that also works with non-local elements, but unfortunately, it uses the baseURI property, which is not uniformly implemented across browsers at this time (I could only get it to work in the WebKit-based ones). I couldn't find any other element or node properties that could be used in a similar fashion, so I think for the time being the above solution is as good as it gets.Instead of iterating parents, you can just get the bounding rectangle which is all zeros when the element is detached from the DOM:If you want to handle the edge case of a zero width and height element at zero top and zero left, you can double check by iterating parents till the document.body:A simple way to check if an element exist can be done through one-line code of jQuery.Here is the code below:Another option is element.closest:You can also use jQuery.contains, which checks if an element is a descendant of another element. I passed in document as the parent element to search because any elements that exist on the page DOM are a descendant of document.Check if the element is a child of <html> via Node::contains():I've covered this and more in is-dom-detached.A simple solution with jQuery:I liked this approach:AlsoUse querySelectorAll with forEach,as the opposite of:Try the following. It is the most reliable solution:For example,All existing elements have parentElement set, except the HTML element!This code works for me, and I didn't have any issues with it.So to check that we just loop unto parentNode tree of the element until we reach the last grandparentUse this:

JSON datetime between Python and JavaScript

max

[JSON datetime between Python and JavaScript](https://stackoverflow.com/questions/455580/json-datetime-between-python-and-javascript)

I want to send a datetime.datetime object in serialized form from Python using JSON and de-serialize in JavaScript using JSON. What is the best way to do this?

2009-01-18 17:51:11Z

I want to send a datetime.datetime object in serialized form from Python using JSON and de-serialize in JavaScript using JSON. What is the best way to do this?You can add the 'default' parameter to json.dumps to handle this:Which is ISO 8601 format. A more comprehensive default handler function:Update:  Added output of type as well as value.

Update:  Also handle date For cross-language projects, I found out that strings containing RfC 3339 dates are the best way to go. An RfC 3339 date looks like this:I think most of the format is obvious. The only somewhat unusual thing may be the "Z" at the end. It stands for GMT/UTC. You could also add a timezone offset like +02:00 for CEST (Germany in summer). I personally prefer to keep everything in UTC until it is displayed.For displaying, comparisons and storage you can leave it in string format across all languages. If you need the date for calculations easy to convert it back to a native date object in most language.So generate the JSON like this:Unfortunately, Javascript's Date constructor doesn't accept RfC 3339 strings but there are many parsers available on the Internet.huTools.hujson tries to handle the most common encoding issues you might come across in Python code including date/datetime objects while handling timezones correctly.I've worked it out.Let's say you have a Python datetime object, d, created with datetime.now(). Its value is:You can serialize it to JSON as an ISO 8601 datetime string:The example datetime object would be serialized as:This value, once received in the Javascript layer, can construct a Date object:As of Javascript 1.8.5, Date objects have a toJSON method, which returns a string in a standard format. To serialize the above Javascript object back to JSON, therefore, the command would be:Which would give you:This string, once received in Python, could be deserialized back to a datetime object:This results in the following datetime object, which is the same one you started with and therefore correct:Using json, you can subclass JSONEncoder and override the default() method to provide your own custom serializers:Then, you can call it like this:Here's a fairly complete solution for recursively encoding and decoding datetime.datetime and datetime.date objects using the standard library json module. This needs Python >= 2.6 since the %f format code in the datetime.datetime.strptime() format string is only supported in since then. For Python 2.5 support, drop the %f and strip the microseconds from the ISO date string before trying to convert it, but you'll loose microseconds precision, of course. For interoperability with ISO date strings from other sources, which may include a time zone name or UTC offset, you may also need to strip some parts of the date string before the conversion. For a complete parser for ISO date strings (and many other date formats) see the third-party dateutil module.Decoding only works when the ISO date strings are values in a JavaScript

literal object notation or in nested structures within an object. ISO date

strings, which are items of a top-level array will not be decoded.I.e. this works:And this too:But this doesn't work as expected:Here's the code:If you're certain that only Javascript will be consuming the JSON, I prefer to pass Javascript Date objects directly.The ctime() method on datetime objects will return a string that the Javascript Date object can understand.Javascript will happily use that as an object literal, and you've got your Date object built right in.Late in the game... :) A very simple solution is to patch the json module default. 

For example:Now, you can use json.dumps() as if it had always supported datetime...This makes sense if you require this extension to the json module to always kick in and wish to not change the way you or others use json serialization (either in existing code or not). Note that some may consider patching libraries in that way as bad practice.

Special care need to be taken in case you may wish to extend your application in more than one way - is such a case, I suggest to use the solution by ramen or JT and choose the proper json extension in each case. Not much to add to the community wiki answer, except for timestamp!Javascript uses the following format:Python side (for the json.dumps handler, see the other answers):If you leave that Z out, frontend frameworks like angular can not display the date in browser-local timezone:On python side:On javascript side:where data is result from pythonMy advice is to use a library. There are several available at pypi.org.I use this one, it it works good: https://pypi.python.org/pypi/asjsonApparently Theã€Œrightã€JSON (well JavaScript) date format is 2012-04-23T18:25:43.511Z - UTC and "Z".  Without this JavaScript will use the web browser's local timezone when creating a Date() object from the string.For a "naive" time (what Python calls a time with no timezone and this assumes is local) the below will force local timezone so that it can then be correctly converted to UTC:why is this so hard.

Detect all changes to a <input type=ã€Œtextã€> (immediately) using JQuery

Dustin Boswell

[Detect all changes to a <input type=ã€Œtextã€> (immediately) using JQuery](https://stackoverflow.com/questions/1948332/detect-all-changes-to-a-input-type-text-immediately-using-jquery)

There are many ways the value of a <input type="text"> can change, including:I want my JavaScript function to be called (with the current input value) any time it changes.  And I want it to be called right away, not just when the input loses focus.I'm looking for the cleanest and most robust way to do this across all browsers (using jQuery preferably).Example use case: On the Twitter Signup page, the username field's value gets shown in the url "http://twitter/username" below it.

2009-12-22 18:40:08Z

There are many ways the value of a <input type="text"> can change, including:I want my JavaScript function to be called (with the current input value) any time it changes.  And I want it to be called right away, not just when the input loses focus.I'm looking for the cleanest and most robust way to do this across all browsers (using jQuery preferably).Example use case: On the Twitter Signup page, the username field's value gets shown in the url "http://twitter/username" below it.This jQuery code catches immediate changes to any element, and should work across all browsers:A real-time fancy solution for jQuery >= 1.9if you also want to detect "click" event, just:if you're using jQuery <= 1.4, just use live instead of on.Unfortunately, I think setInterval wins the prize:It's the cleanest solution, at only 1 line of code.  It's also the most robust, since you don't have to worry about all the different events/ways an input can get a value.The downsides of using 'setInterval' don't seem to apply in this case:Binding to the oninput event seems to work fine in most sane browsers. IE9 supports it too, but the implementation is buggy (the event is not fired when deleting characters).With jQuery version 1.7+ the on method is useful to bind to the event like this:2017 answer: the input event does exactly this for anything more recent than IE8.Unfortunately there is no event or set of events that matches your criteria.  Keypresses and copy/paste can both be handled with the keyup event.  Changes through JS are trickier.  If you have control over the code that sets the textbox, your best bet is to modify it to either call your function directly or trigger a user event on the textbox:If you don't have control over that code, you could use setInterval() to 'watch' the textbox for changes:This sort of active monitoring won't catch updates 'immediately', but it seems to be fast enough that there is no perceptible lag.  As DrLouie pointed out in comments, this solution probably doesn't scale well if you need to watch lots of inputs.  You can always adjust the 2nd parameter to setInterval() to check more or less frequently.Here is a slightly different solution if you didn't fancy any of the other answers:  Consider that you cannot rely on click and keyup to capture context menu paste. Add this code somewhere, this will do the trick.Found this solution at val() doesn't trigger change() in jQueryI have created a sample. May it will work for you.http://jsfiddle.net/utbh575s/We actually don't need to setup loops for detecting javaScript changes.

We already setting up many event listeners to the element we want to detect. just triggering any un harmful event will make the job.and ofc this is only available if you have the full control on javascript changes on your project.Well, best way is to cover those three bases you listed by yourself. A simple :onblur, :onkeyup, etc won't work for what you want, so just combine them.KeyUp should cover the first two, and if Javascript is modifying the input box, well I sure hope it's your own javascript, so just add a callback in the function that modifies it.Here's a working example that I'm using to implement an autocomplete variation the populates a jqueryui selector (list), but I don't want it to function exactly like the jqueryui autocomplete which does a drop-down menu.Can't you just use <span contenteditable="true" spellcheck="false"> element in place of <input type="text">?  <span> (with contenteditable="true" spellcheck="false" as attributes) distincts by <input> mainly because:To accomplish the appearance you can, of course, style it in CSS, whereas writing the value as innerText you can get for it an event:Here's a fiddle.Unfortunately there's something that doesn't actually work in IE and Edge, which I'm unable to find.Listen, I know this question is quite old, but for any Future viewers in 2019 or later, theres not even a need for JS with this. NO JQUERY! (Its kindof obsolete in todays world)Sadly this solution will actually only have 1 fault: if your detecting for a change in characters like this snippet below, if you have the special character at the front, and remove everything in the input, it will still detect it as non-ascii. Try placing the character again but at the front this time, and slowly backspace from the end of the text.Theres a perfect solution in HTML:(Detects Pasting, Typing, Backspacing, and other such changes INSTANTLY)you can see this example and choose which are the events that interest you:I may be late to the party here but can you not just use the .change() event that jQuery provides.You should be able to do something like ...You could always bind it to a list of controls with something like ...The live binder ensures that all elements that exist on the page now and in the future are handled.This is the fastest& clean way to do that :I'm using Jquery-->It is working pretty fine for me.

How can I get form data with JavaScript/jQuery?

Bart van Heukelom

[How can I get form data with JavaScript/jQuery?](https://stackoverflow.com/questions/2276463/how-can-i-get-form-data-with-javascript-jquery)

Is there a simple, one-line way to get the data of a form as it would be if it was to be submitted in the classic HTML-only way?For example:Output:Something like this is too simple, since it does not (correctly) include textareas, selects, radio buttons and checkboxes:

2010-02-16 21:24:45Z

Is there a simple, one-line way to get the data of a form as it would be if it was to be submitted in the classic HTML-only way?For example:Output:Something like this is too simple, since it does not (correctly) include textareas, selects, radio buttons and checkboxes:demoUse $('form').serializeArray(), which returns an array:Other option is $('form').serialize(), which returns a string:Take a look at this jsfiddle demoUpdated answer for 2014: HTML5 FormData does thisYou can then post formData exactly as it is - it contains all names and values used in the form.Based on jQuery.serializeArray, returns key-value pairs.This is a nitpicky answer, but let me explain why this is a better solution:use .serializeArray() to get the data in array format and then convert it into an object:Here's a really simple and short soluton that even doesn't require Jquery.It is 2019 and there's a better way to do this:or if you want a plain Object insteadalthough note that this won't work with duplicate keys like you get from multi-select and duplicate checkboxes with the same name.I use this:jQuery PluginHTML FormGet the Dataother than that, you might want to look at serialize();Here is a working JavaScript only implementation which correctly handles checkboxes, radio buttons, and sliders (probably other input types as well, but I've only tested these).If you're looking for a more complete implementation, then take a look at this section of the project I made this for. I'll update this question eventually with the complete solution I came up with, but maybe this will be helpful to someone.If you are using jQuery, here is a little function that will do what you are looking for.First, add an ID to your form (unless it is the only form on the page, then you can just use 'form' as the dom query)The output would look like:You can also use the FormData Objects; The FormData object lets you compile a set of key/value pairs to send using XMLHttpRequest. Its primarily intended for use in sending form data, but can be used independently from forms in order to transmit keyed data.I have included the answer to also give back the object required.Based on neuront's response I created a simple JQuery method that gets the form data in key-value pairs but it works for multi-selects and for array inputs with name='example[]'.This is how it is used:You can find an example below of its definition and how it works.This will append all form fields to the JavaScript object "res":you can use this function for have an object or a JSON from form.for use it:I wrote a library to solve this very problem: JSONForms. It takes a form, goes through each input and builds a JSON object you can easily read.Say you have the following form:Passing the form to JSONForms' encode method returns you the following object:Here's demo with your form.CodepenI wrote a function that takes care of multiple checkboxes and multiple selects. In those cases it returns an array.showing form input element fields and input file to submit your form without page refresh and grab all values with file include in it here it is It will fix issue:couldn't work with multiselects.For those of you who would prefer an Object as opposed to a serialized string (like the one returned by $(form).serialize(), and a slight improvement on $(form).serializeArray()), feel free to use the code below:It will return an object similar to this:As a bonus, it means you don't have to install the entire bundle of jQuery just for one serialize function.You are all not fully correct. You cannot write:Because this way if you have multiselect list - its values will be overwritten with the last one, since it's transmitted as: "param1" : "value1", "param1" : "value2".So, correct approach is:This method should do it. It serializes the form data and then converts them to an object. Takes care of groups of checkboxes as well.Here is a nice vanilla JS function I wrote to extract form data as an object. It also has options for inserting additions into the object, and for clearing the form input fields.Here is an example of its use with a post request:

Resize HTML5 canvas to fit window

devyn

[Resize HTML5 canvas to fit window](https://stackoverflow.com/questions/1664785/resize-html5-canvas-to-fit-window)

How can I automatically scale the HTML5 <canvas> element to fit the page?For example, I can get a <div> to scale by setting the height and width properties to 100%, but a <canvas> won't scale, will it?

2009-11-03 02:02:07Z

How can I automatically scale the HTML5 <canvas> element to fit the page?For example, I can get a <div> to scale by setting the height and width properties to 100%, but a <canvas> won't scale, will it?I believe I have found an elegant solution to this:JavaScriptCSSHasn't had any large negative performance impact for me, so far.The following solution worked for me the best.  Since I'm relatively new to coding, I like to have visual confirmation that something is working the way I expect it to.  I found it at the following site:

http://htmlcheats.com/html/resize-the-html5-canvas-dyamically/Here's the code:The blue border shows you the edge of the resizing canvas, and is always along the edge of the window, visible on all 4 sides, which was NOT the case for some of the other above answers.  Hope it helps.Basically what you have to do is to bind the onresize event to your body, once you catch the event you just need to resize the canvas using window.innerWidth and   window.innerHeight.Setting the canvas coordinate space width and height based on the browser client's dimensions requires you to resize and redraw whenever the browser is resized. A less convoluted solution is to maintain the drawable dimensions in Javascript variables, but set the canvas dimensions based on the screen.width, screen.height dimensions.  Use CSS to fit:The browser window generally won't ever be larger than the screen itself (except where the screen resolution is misreported, as it could be with non-matching dual monitors), so the background won't show and pixel proportions won't vary. The canvas pixels will be directly proportional to the screen resolution unless you use CSS to scale the canvas. A pure CSS approach adding to solution of @jerseyboy above.

Works in Firefox (tested in v29), Chrome (tested in v34) and Internet Explorer (tested in v11).Link to the example: http://temporaer.net/open/so/140502_canvas-fit-to-window.htmlBut take care, as @jerseyboy states in his comment:Unless you want the canvas to upscale your image data automatically (that's what James Black's answer talks about, but it won't look pretty), you have to resize it yourself and redraw the image. Centering a canvasIf your div completely filled the webpage then you can fill up that div and so have a canvas that fills up the div.You may find this interesting, as you may need to use a css to use percentage, but, it depends on which browser you are using, and how much it is in agreement with the spec:

http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-elementYou may need to get the offsetWidth and height of the div, or get the window height/width and set that as the pixel value.CSSJavaScriptIf you're interested in preserving aspect ratios and doing so in pure CSS (given the aspect ratio) you can do something like below. The key is the padding-bottom on the ::content element that sizes the container element. This is sized relative to its parent's width, which is 100% by default. The ratio specified here has to match up with the ratio of the sizes on the canvas element.Using jQuery you can track the window resize and change the width of your canvas using jQuery as well. Something like thatI think this is what should we exactly do: http://www.html5rocks.com/en/tutorials/casestudies/gopherwoord-studios-resizing-html5-games/I'm using sketch.js so after I run the init command for the canvas i change the width and height with jquery. It bases the dimensions on the parent element.

Is there a JavaScript / jQuery DOM change listener?

Fletcher Moore

[Is there a JavaScript / jQuery DOM change listener?](https://stackoverflow.com/questions/2844565/is-there-a-javascript-jquery-dom-change-listener)

Essentially I want to have a script execute when the contents of a DIV change. Since the scripts are separate (content script in the Chrome extension & webpage script), I need a way simply observe changes in DOM state. I could set up polling but that seems sloppy.

2010-05-16 16:43:10Z

Essentially I want to have a script execute when the contents of a DIV change. Since the scripts are separate (content script in the Chrome extension & webpage script), I need a way simply observe changes in DOM state. I could set up polling but that seems sloppy.Several years later, there is now officially a better solution.  DOM4 Mutation Observers are the replacement for deprecated DOM3 mutation events.  They are currently implemented in modern browsers as MutationObserver (or as the vendor-prefixed WebKitMutationObserver in old versions of Chrome):This example listens for DOM changes on document and its entire subtree, and it will fire on changes to element attributes as well as structural changes.  The draft spec has a full list of valid mutation listener properties:(This list is current as of April 2014; you may check the specification for any changes.)EditThis answer is now deprecated. See the answer by apsillers.Since this is for a Chrome extension, you might as well use the standard DOM event - DOMSubtreeModified. See the support for this event across browsers. It has been supported in Chrome since 1.0.See a working example here.Many sites use AJAX to add/show/change content dynamically. Sometimes it's used instead of in-site navigation, so current URL is changed programmatically and content scripts aren't automatically executed by browser in this case since the page isn't fetched from remote server entirely.There are advanced API to work with navigation: webNavigation, webRequest, but we'll use simple chrome.tabs.onUpdated event listener that sends a message to the content script:Another approach depending on how you are changing the div.

If you are using JQuery to change a div's contents with its html() method, you can extend that method and call a registration function each time you put html into a div.We just intercept the calls to html(), call a registration function with this, which in the context refers to the target element getting new content, then we pass on the call to the original jquery.html() function. Remember to return the results of the original html() method, because JQuery expects it for method chaining.For more info on method overriding and extension, check out http://www.bennadel.com/blog/2009-Using-Self-Executing-Function-Arguments-To-Override-Core-jQuery-Methods.htm, which is where I cribbed the closure function. Also check out the plugins tutorial at JQuery's site.In addition to the "raw" tools provided by MutationObserver API, there exist "convenience" libraries to work with DOM mutations.Consider: MutationObserver represents each DOM change in terms of subtrees. So if you're, for instance, waiting for a certain element to be inserted, it may be deep inside the children of mutations.mutation[i].addedNodes[j].Another problem is when your own code, in reaction to mutations, changes DOM - you often want to filter it out.A good convenience library that solves such problems is mutation-summary (disclaimer: I'm not the author, just a satisfied user), which enables you to specify queries of what you're interested in, and get exactly that.Basic usage example from the docs:

How do I select text nodes with jQuery?

Christian Oudard

[How do I select text nodes with jQuery?](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

I would like to get all descendant text nodes of an element, as a jQuery collection. What is the best way to do that?

2008-11-18 13:45:09Z

I would like to get all descendant text nodes of an element, as a jQuery collection. What is the best way to do that?jQuery doesn't have a convenient function for this. You need to combine contents(), which will give just child nodes but includes text nodes, with find(), which gives all descendant elements but no text nodes. Here's what I've come up with:Note: If you're using jQuery 1.7 or earlier, the code above will not work. To fix this, replace addBack() with andSelf(). andSelf() is deprecated in favour of addBack() from 1.8 onwards.This is somewhat inefficient compared to pure DOM methods and has to include an ugly workaround for jQuery's overloading of its contents() function (thanks to @rabidsnail in the comments for pointing that out), so here is non-jQuery solution using a simple recursive function. The includeWhitespaceNodes parameter controls whether or not whitespace text nodes are included in the output (in jQuery they are automatically filtered out).Update: Fixed bug when includeWhitespaceNodes is falsy.Jauco posted a good solution in a comment, so I'm copying it here:jQuery.contents() can be used with jQuery.filter to find all child text nodes. With a little twist, you can find grandchildren text nodes as well. No recursion required:jsFiddleI was getting a lot of empty text nodes with the accepted filter function.  If you're only interested in selecting text nodes that contain non-whitespace, try adding a nodeValue conditional to your filter function, like a simple $.trim(this.nodevalue) !== '':http://jsfiddle.net/ptp6m97v/Or to avoid strange situations where the content looks like whitespace, but is not (e.g. the soft hyphen &shy; character, newlines \n, tabs, etc.), you can try using a Regular Expression. For example, \S will match any non-whitespace characters:If you can make the assumption that all children are either Element Nodes or Text Nodes, then this is one solution.To get all child text nodes as a jquery collection:To get a copy of the original element with non-text children removed:For some reason contents() didn't work for me, so if it didn't work for you, here's a solution I made, I created jQuery.fn.descendants with the option to include text nodes or notUsageGet all descendants including text nodes and element nodesGet all descendants returning only text nodesGet all descendants returning only element nodesCoffeescript Original:Drop In Javascript Version This is cross browser, a small Array.indexOf polyfill is included in the code.Can also be done like this:The above code filters the textNodes from direct children child nodes of a given element.if you want to strip all tags, then try thisfunction:usage:   For me, plain old .contents() appeared to work to return the text nodes, just have to be careful with your selectors so that you know they will be text nodes.For example, this wrapped all the text content of the TDs in my table with pre tags and had no problems.I had the same problem and solved it with:Code:Usage:Is like next() but also returns the text nodes.

Handle file download from ajax post

Pavle Predic

[Handle file download from ajax post](https://stackoverflow.com/questions/16086162/handle-file-download-from-ajax-post)

I have a javascript app that sends ajax POST requests to a certain URL. Response might be a JSON string or it might be a file (as an attachment). I can easily detect Content-Type and Content-Disposition in my ajax call, but once I detect that the response contains a file, how do I offer the client to download it? I've read a number of similar threads here but none of them provide the answer I'm looking for. Please, please, please do not post answers suggesting that I shouldn't use ajax for this or that I should redirect the browser, because none of this is an option. Using a plain HTML form is also not an option. What I do need is to show a download dialog to the client. Can this be done and how?

2013-04-18 14:48:45Z

I have a javascript app that sends ajax POST requests to a certain URL. Response might be a JSON string or it might be a file (as an attachment). I can easily detect Content-Type and Content-Disposition in my ajax call, but once I detect that the response contains a file, how do I offer the client to download it? I've read a number of similar threads here but none of them provide the answer I'm looking for. Please, please, please do not post answers suggesting that I shouldn't use ajax for this or that I should redirect the browser, because none of this is an option. Using a plain HTML form is also not an option. What I do need is to show a download dialog to the client. Can this be done and how?Create a form, use the POST method, submit the form - there's no need for an iframe.  When the server page responds to the request, write a response header for the mime type of the file, and it will present a download dialog - I've done this a number of times.You want content-type of application/download - just search for how to provide a download for whatever language you're using.Don't give up so quickly, because this can be done (in modern browsers) using parts of the FileAPI:Here is the old version using jQuery.ajax. It might mangle binary data when the response is converted to a string of some charset.I faced the same issue and successfully solved it. My use-case is this."Post JSON data to the server and receive an excel file.

That excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser"The above snippet is just doing followingHere we need to carefully set few things at the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.Since I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.What server-side language are you using? In my app I can easily download a file from an AJAX call by setting the correct headers in PHP's response:This will in fact 'redirect' the browser to this download page, but as @ahren alread said in his comment, it won't navigate away from the current page.It's all about setting the correct headers so I'm sure you'll find a suitable solution for the server-side language you're using if it's not PHP.Assuming you already know how to make an AJAX call, on the client side you execute an AJAX request to the server. The server then generates a link from where this file can be downloaded, e.g. the 'forward' URL where you want to point to.

For example, the server responds with:When processing the response, you inject an iframe in your body and set the iframe's SRC to the URL you just received like this (using jQuery for the ease of this example): If you've set the correct headers as shown above, the iframe will force a download dialog without navigating the browser away from the current page.Extra addition in relation to your question; I think it's best to always return JSON when requesting stuff with AJAX technology. After you've received the JSON response, you can then decide client-side what to do with it. Maybe, for example, later on you want the user to click a download link to the URL instead of forcing the download directly, in your current setup you would have to update both client and server-side to do so.For those looking for a solution from an Angular perspective, this worked for me:Here is how I got this working

https://stackoverflow.com/a/27563953/2845977I see you've already found out a solution, however I just wanted to add some information which may help someone trying to achieve the same thing with big POST requests.I had the same issue a couple of weeks ago, indeed it isn't possible to achieve a "clean" download through AJAX, the Filament Group created a jQuery plugin which works exactly how you've already found out, it is called jQuery File Download however there is a downside to this technique.If you're sending big requests through AJAX (say files +1MB) it will negatively impact responsiveness. In slow Internet connections you'll have to wait a lot until the request is sent and also wait for the file to download. It isn't like an instant "click" => "popup" => "download start". It's more like "click" => "wait until data is sent" => "wait for response" => "download start" which makes it appear the file double its size because you'll have to wait for the request to be sent through AJAX and get it back as a downloadable file.If you're working with small file sizes <1MB you won't notice this. But as I discovered in my own app, for bigger file sizes it is almost unbearable.My app allow users to export images dynamically generated, these images are sent through POST requests in base64 format to the server (it is the only possible way), then processed and sent back to users in form of .png, .jpg files, base64 strings for images +1MB are huge, this force users to wait more than necessary for the file to start downloading. In slow Internet connections it can be really annoying.My solution for this was to temporary write the file to the server, once it is ready, dynamically generate a link to the file in form of a button which changes between "Please wait..." and "Download" states and at the same time, print the base64 image in a preview popup window so users can "right-click" and save it. This makes all the waiting time more bearable for users, and also speed things up.Update Sep 30, 2014:Download Script Example:I know this is way beyond what the OP asked, however I felt it would be good to update my answer with my findings. When I was searching for solutions to my problem, I read lots of "Download from AJAX POST data" threads which didn't give me the answer I was looking for, I hope this information helps someone looking to achieve something like this.I want to point out some difficulties that arise when using the technique in the accepted answer, i.e. using a form post:I ended up using the method of saving the file on S3 and sending a pre-signed URL to get the file.As others have stated, you can create and submit a form to download via a POST request.  However, you don't have to do this manually.One really simple library for doing exactly this is jquery.redirect.  It provides an API similar to the standard jQuery.post method:This is a 3 years old question but I had the same problem today. I looked your edited solution but I think that it can sacrifice the performance because it has to make a double request. So if anyone needs another solution that doesn't imply to call the service twice then this is the way I did it: This form is just used to call the service and avoid to use a window.location(). After that you just simply have to make a form submit from jquery in order to call the service and get the file. It's pretty simple but this way you can make a download using a POST. I now that this could be easier if the service you're calling is a GET, but that's not my case.Here is my solution using a temporary hidden form.Note that I massively use JQuery but you can do the same with native JS.I used this FileSaver.js. In my case with csv files, i did this (in coffescript):I think for most complicated case, the data must be processed properly. Under the hood FileSaver.js implement the same approach of the answer of Jonathan Amend.see: http://www.henryalgus.com/reading-binary-files-using-jquery-ajax/

it'll return a blob as a response, which can then be put into filesaverTo get Jonathan Amends answer to work in Edge I made the following changes:to thisI would rather have posted this as a comment but I don't have enough reputation for thatHere is my solution, gathered from different sources:

Server side implementation :Client side implementation (using jquery):there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.First you need to separate the page processing from the results download.1) Only the page calculations are made in the ajax call.I hope this solution can be useful for many, as it was for me.If response is an Array Buffer, try this under onsuccess event in Ajax:

How to delete a localStorage item when the browser window/tab is closed?

Yosef

[How to delete a localStorage item when the browser window/tab is closed?](https://stackoverflow.com/questions/9943220/how-to-delete-a-localstorage-item-when-the-browser-window-tab-is-closed)

My Case: localStorage with key + value that should be deleted when browser is closed and not single tab.Please see my code if its proper and what can be improved:

2012-03-30 12:44:39Z

My Case: localStorage with key + value that should be deleted when browser is closed and not single tab.Please see my code if its proper and what can be improved:should be done like that and not with delete operator:Use with window global keyword:-You can make use of the beforeunload event in JavaScript.Using vanilla JavaScript you could do something like:That will delete the key before the browser window/tab is closed and prompts you to confirm the close window/tab action. I hope that solves your problem.NOTE: The onbeforeunload method should return a string.You should use the sessionStorage instead if you want the key to be deleted when the browser close.Try using Hope this works for youThere is a very specific use case in which any suggestion to use sessionStorage instead of localStorage does not really help.

The use-case would be something as simple as having something stored while you have at least one tab opened, but invalidate it if you close the last tab remaining.

If you need your values to be saved cross-tab and window, sessionStorage does not help you unless you complicate your life with listeners, like I have tried.

In the meantime localStorage would be perfect for this, but it does the job 'too well', since your data will be waiting there even after a restart of the browser.

I ended up using a custom code and logic that takes advantage of both.I'd rather explain then give code. First store what you need to in localStorage, then also in localStorage create a counter that will contain the number of tabs that you have opened.

This will be increased every time the page loads and decreased every time the page unloads. You can have your pick here of the events to use, I'd suggest 'load' and 'unload'.

At the time you unload, you need to do the cleanup tasks that you'd like to when the counter reaches 0, meaning you're closing the last tab.

Here comes the tricky part: I haven't found a reliable and generic way to tell the difference between a page reload or navigation inside the page and the closing of the tab.

So If the data you store is not something that you can rebuild on load after checking that this is your first tab, then you cannot remove it at every refresh.

Instead you need to store a flag in sessionStorage at every load before increasing the tab counter.

Before storing this value, you can make a check to see if it already has a value and if it doesn't,

this means you're loading into this session for the first time, meaning that you can do the cleanup at load if this value is not set and the counter is 0.use sessionStorageThe sessionStorage object is equal to the localStorage object, except that it stores the data for only one session. The data is deleted when the user closes the browser window.The following example counts the number of times a user has clicked a button, in the current session:ExampleAlthough, some users already answered this question already, I am giving an example of application settings to solve this problem.I had the same issue. I am using https://github.com/grevory/angular-local-storage module in my angularjs application. If you configure your app as follows, it will save variable in session storage instead of local storage. Therefore, if you close the browser or close the tab, session storage will be removed automatically. You do not need to do anything. Hope it will help.Here's a simple test to see if you have browser support when working with local storage:It worked for me as expected (I use Google Chrome). 

Adapted from: http://www.w3schools.com/html/html5_webstorage.asp.I don't think the solution presented here is 100% correct because window.onbeforeunload event is called not only when browser/Tab is closed(WHICH IS REQUIRED), but also on all other several events. (WHICH MIGHT NOT BE REQUIRED)See this link for more information on list of events that can fire window.onbeforeunload:-http://msdn.microsoft.com/en-us/library/ms536907(VS.85).aspxwhy not used sessionStorage?"The sessionStorage object is equal to the localStorage object, except that it stores the data for only one session. The data is deleted when the user closes the browser window." http://www.w3schools.com/html/html5_webstorage.aspAfter looking at this question 6 years after it was asked, I found that there still is no sufficient answer to this question; which should achieve all of the following:Execute this piece of javascript at the start of each page load in order to achieve the above:Edit: The basic idea here is the following:This is an old question, but it seems none of the answer above are perfect.In the case you want to store authentication or any sensitive information that are destructed only when the browser is closed, you can rely on sessionStorage and localStorage for cross-tab message passing.Basically, the idea is:Please notice that this scheme does not depend on window.onbeforeunload event which is fragile (since the browser can be closed/crashed without these events being fired). Also, the time the sensitive information is stored on the localStorage is very small (since you rely on transcients change detection for cross tab message event) so it's unlikely that such sensitive information leaks on the user's hard drive.Here's a demo of this concept: http://jsfiddle.net/oypdwxz7/2/There are no such the way to detect browser close so probably you can't delete localStorage on browser close but there are another way to handle the things you can uses sessionCookies as it will destroy after browser close.This is I implemented in my project.You can simply use sessionStorage. Because sessionStorage allow to clear all key value when browser window will be closed .See there : SessionStorage- MDNThere are five methods to choose from:You can use clear(), this method when invoked clears the entire storage of all records for that domain. It does not receive any parameters.you can try following code to delete local storage: 

Wait until all promises complete even if some rejected

Nathan Hagen

[Wait until all promises complete even if some rejected](https://stackoverflow.com/questions/31424561/wait-until-all-promises-complete-even-if-some-rejected)

Let's say I have a set of Promises that are making network requests, of which one will fail:Let's say I want to wait until all of these have finished, regardless of if one has failed. There might be a network error for a resource that I can live without, but which if I can get, I want before I proceed. I want to handle network failures gracefully.Since Promises.all doesn't leave any room for this, what is the recommended pattern for handling this, without using a promises library?

2015-07-15 07:53:55Z

Let's say I have a set of Promises that are making network requests, of which one will fail:Let's say I want to wait until all of these have finished, regardless of if one has failed. There might be a network error for a resource that I can live without, but which if I can get, I want before I proceed. I want to handle network failures gracefully.Since Promises.all doesn't leave any room for this, what is the recommended pattern for handling this, without using a promises library?Sure, you just need a reflect:Or with ES5:Or in your example:Similar answer, but more idiomatic for ES6 perhaps:Depending on the type(s) of values returned, errors can often be distinguished easily enough (e.g. use undefined for "don't care", typeof for plain non-object values, result.message, result.toString().startsWith("Error:") etc.)Benjamin's answer offers a great abstraction for solving this issue, but I was hoping for a less abstracted solution. The explicit way to to resolve this issue is to simply call .catch on the internal promises, and return the error from their callback.Taking this one step further, you could write a generic catch handler that looks like this:then you can doThe problem with this is that the caught values will have a different interface than the non-caught values, so to clean this up you might do something like:So now you can do this:Then to keep it DRY, you get to Benjamin's answer:where it now looks likeThe benefits of the second solution are that its abstracted and DRY. The downside is you have more code, and you have to remember to reflect all your promises to make things consistent.I would characterize my solution as explicit and KISS, but indeed less robust. The interface doesn't guarantee that you know exactly whether the promise succeeded or failed.For example you might have this:This won't get caught by a.catch, soThere's no way to tell which one was fatal and which was wasn't. If that's important then you're going to want to enforce and interface that tracks whether it was successful or not (which reflect does).If you just want to handle errors gracefully, then you can just treat errors as undefined values:In my case, I don't need to know the error or how it failed--I just care whether I have the value or not. I'll let the function that generates the promise worry about logging the specific error.That way, the rest of the application can ignore its error if it wants, and treat it as an undefined value if it wants.I want my high level functions to fail safely and not worry about the details on why its dependencies failed, and I also prefer KISS to DRY when I have to make that tradeoff--which is ultimately why I opted to not use reflect.There is a proposal for a function which can accomplish this natively, in vanilla Javascript: Promise.allSettled, which has made it to stage 4 will be officialized in ES2020. It is very similar to the reflect function in this other answer. Here's an example, from the proposal page. Before, you would have had to do:Using Promise.allSettled instead, the above will be equivalent to:Once this becomes part of the specification and browsers implement it, you will be able to use it on modern browsers without any libraries.It has shipped in all modern browsers, including Node, so in those, the following snippet should run without problems:Output:For older browsers, there is a spec-compliant polyfill here.I really like Benjamin's answer, and how he basically turns all promises into always-resolving-but-sometimes-with-error-as-a-result ones. :)

Here's my attempt at your request just in case you were looking for alternatives. This method simply treats errors as valid results, and is coded similar to Promise.all otherwise:The Promise.all will swallow any rejected promise and store the error in a variable, so it will return when all of the promises have resolved. Then you can re-throw the error out, or do whatever. In this way, I guess you would get out the last rejection instead of the first one.I had the same problem and have solved it in the following way:In that case Promise.all will wait for every Promise will come into resolved or rejected state.And having this solution we are "stopping catch execution" in a non-blocking way. In fact, we're not stopping anything, we just returning back the Promise in a pending state which returns another Promise when it's resolved after the timeout.This should be consistent with how Q does it:Benjamin Gruenbaum answer is of course great,.  But I can also see were Nathan Hagen point of view with the level of abstraction seem vague.  Having short object properties like e & v don't help either, but of course that could be changed. In Javascript there is standard Error object, called Error,.  Ideally you always throw an instance / descendant of this.  The advantage is that you can do instanceof Error, and you know something is an error.So using this idea, here is my take on the problem.Basically catch the error, if the error is not of type Error, wrap the error inside an Error object.  The resulting array will have either resolved values, or Error objects you can check on.  The instanceof inside the catch, is in case you use some external library that maybe did reject("error"), instead of reject(new Error("error")).Of course you could have promises were you resolve an error, but in that case it would most likely make sense to treat as an error anyway, like the last example shows.Another advantage of doing it this, array destructing is kept simple.Instead of You could argue that the !error1 check is simpler than an instanceof, but your also having to destruct both v & e.  I think the following offers a slightly different approach... compare fn_fast_fail() with fn_slow_fail()... though the latter doesn't fail as such... you can check if one or both of a and b is an instance of Error and throw that Error if you want it to reach the catch block (e.g. if (b instanceof Error) { throw b; }) .  See the jsfiddle.Instead of rejecting, resolve it with a object.

You could do something like this when you are implementing promiseHere's my custom settledPromiseAll() Compared to Promise.allFor the brave we could change Promise.all():CAREFUL. In general we never change built-ins, as it might break other unrelated JS libraries or clash with future changes to JS standards.My settledPromiseall is backward compatible with Promise.all and extends its functionality.People who are developing standards -- why not include this to a new Promise standard? I would do:You can execute your logic sequentially via synchronous executor nsynjs. It will pause on each promise, wait for resolution/rejection, and either assign resolve's result to data property, or throw an exception (for handling that you will need try/catch block). Here is an example:I've been using following codes since ES5.The usage signature is just like Promise.all. The major difference is that Promise.wait will wait for all the promises to finish their jobs.I know that this question has a lot of answers, and I'm sure must (if not all) are correct.

However it was very hard for me to understand the logic/flow of these answers.So I looked at the Original Implementation on Promise.all(), and I tried to imitate that logic - with the exception of not stopping the execution if one Promise failed. Explanation: 

- Loop over the input promisesList and execute each Promise.

- No matter if the Promise resolved or rejected: save the Promise's result in a result array according to the index. Save also the resolve/reject status (isSuccess).

- Once all Promises completed, return one Promise with the result of all others.Example of use:I don't know which promise library you are using, but most have something like allSettled.Edit: Ok since you want to use plain ES6 without external libraries, there is no such method.In other words: You have to loop over your promises manually and resolve a new combined promise as soon as all promises are settled.

What is the meaning of polyfills in HTML5?

Jitendra Vyas

[What is the meaning of polyfills in HTML5?](https://stackoverflow.com/questions/7087331/what-is-the-meaning-of-polyfills-in-html5)

What is the meaning of polyfills in HTML5? I saw this word in many sites about HTML5, e.g. HTML5-Cross-Browser-Polyfills.I actually don't understood what is the meaning of polyfills.Is it a new HTML5 technique or a JavaScript library? I never heard this word before HTML5.And what is the difference between shims, fallbacks, and polyfills?

2011-08-17 02:27:04Z

What is the meaning of polyfills in HTML5? I saw this word in many sites about HTML5, e.g. HTML5-Cross-Browser-Polyfills.I actually don't understood what is the meaning of polyfills.Is it a new HTML5 technique or a JavaScript library? I never heard this word before HTML5.And what is the difference between shims, fallbacks, and polyfills?A polyfill is a browser fallback, made in JavaScript, that allows functionality you expect to work in modern browsers to work in older browsers, e.g., to support canvas (an HTML5 feature) in older browsers.It's sort of an HTML5 technique, since it is used in conjunction with HTML5, but it's not part of HTML5, and you can have polyfills without having HTML5 (for example, to support CSS3 techniques you want).Here's a good post:http://remysharp.com/2010/10/08/what-is-a-polyfill/Here's a comprehensive list of Polyfills and Shims:https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-PolyfillsFirst off let's clarify what a polyfil is not: A polyfill is not part of the HTML5 Standard.  Nor is a polyfill limited to Javascript, even though you often see polyfills being referred to in those contexts.  The term polyfill itself refers to some code that "allows you to have some specific functionality that you expect in current orã€Œmodernã€browsers to also work in other browsers that do not have the support for that functionality built in. "Source and example of polyfill here:http://www.programmerinterview.com/index.php/html5/html5-polyfill/A polyfill is a piece of code (or plugin) that provides the technology that you, the developer, expect the browser to provide natively.A polyfill is a shim which replaces the original call with the call to a shim.For example, say you want to use the navigator.mediaDevices object, but not all browsers support this. You could imagine a library that provided a shim which you might use like this:In this case, you are explicitly calling a shim instead of using the original object or method. The polyfill, on the other hand, replaces the objects and methods on the original objects. For example:In your code, it looks as though you are using the standard navigator.mediaDevices object. But really, the polyfill (adapter.js in the example) has replaced this object with its own one. The one it has replaced it with is a shim. This will detect if the feature is natively supported and use it if it is, or it will work around it using other APIs if it is not.So a polyfill is a sort of "transparent" shim. And this is what Remy Sharp (who coined the term) meant when saying "if you removed the polyfill script, your code would continue to work, without any changes required in spite of the polyfill being removed".

React JSX: selectingã€Œselectedã€on selected <select> option

cantera

[React JSX: selectingã€Œselectedã€on selected <select> option](https://stackoverflow.com/questions/21733847/react-jsx-selecting-selected-on-selected-select-option)

In a React component for a <select> menu, I need to set the selected attribute on the option that reflects the application state.In render(), the optionState is passed from the state owner to the SortMenu component. The option values are passed in as props from JSON.However that triggers a syntax error on JSX compilation.Doing this gets rid of the syntax error but obviously doesn't solve the problem:I also tried this:Is there a recommended way of solving this?

2014-02-12 16:34:00Z

In a React component for a <select> menu, I need to set the selected attribute on the option that reflects the application state.In render(), the optionState is passed from the state owner to the SortMenu component. The option values are passed in as props from JSON.However that triggers a syntax error on JSX compilation.Doing this gets rid of the syntax error but obviously doesn't solve the problem:I also tried this:Is there a recommended way of solving this?React automatically understands booleans for this purpose, so you can simply write (note: not recommended)and it will output 'selected' appropriately.However, React makes this even easier for you. Instead of defining selected on each option, you can (and should) simply write value={optionsState} on the select tag itself:For more info, see the React select tag doc.You could do what React warns you when you try to set the "selected" property of the <option>:So, you can use options.value on the defaultValue of your selectHere is a complete solution which incorporates the best answer and the comments below it (which might help someone struggling to piece it all together):UPDATE FOR ES6 (2019) - using arrow functions and object destructuringin main component:included component (which is now a stateless functional):PREVIOUS ANSWER (using bind):in main component:included component (which is now a stateless functional):the main component maintains the selected value for fruit (in state), the included component displays the select element and updates are passed back to the main component to update its state (which then loops back to the included component to change the selected value).Note the use of a name prop which allows you to declare a single handleChange method for other fields on the same form regardless of their type.Here is the latest example of how to do it. From react docs, plus auto-binding "fat-arrow" method syntax. Simply add as first option of your select tag:This will become default and when you'll select a valid option will be setted on your stateI've had a problem with <select> tags not updating to the correct <option> when the state changes. My problem seemed to be that if you render twice in quick succession, the first time with no pre-selected <option> but the second time with one, then the <select> tag doesn't update on the second render, but stays on the default first .I found a solution to this using refs. You need to get a reference to your <select> tag node (which might be nested in some component), and then manually update the value property on it, in the componentDidUpdate hook.Posting a similar answer for MULTISELECT / optgroups:I have a simple solution is following the HTML basic..text-hide is a bootstrap's class, if you not using bootstrap, here you are:I got around a similar issue by setting defaultProps:<select value="this.props.propName" ...So now I avoid errors on compilation if my prop does not exist until mounting.

Invariant Violation: _registerComponent(â€¦): Target container is not a DOM element

Dan Abramov

[Invariant Violation: _registerComponent(â€¦): Target container is not a DOM element](https://stackoverflow.com/questions/26566317/invariant-violation-registercomponent-target-container-is-not-a-dom-elem)

I get this error after a making trivial React example page:Here's my code:HTML:What does this mean?

2014-10-25 19:22:49Z

I get this error after a making trivial React example page:Here's my code:HTML:What does this mean?By the time script is executed, document element is not available yet, because script itself is in the head. While it's a valid solution to keep script in head and render on DOMContentLoaded event, it's even better to put your script at the very bottom of the body and render root component to a div before it like this:and in the bundle.js, call:You should always render to a nested div instead of body. Otherwise, all sorts of third-party code (Google Font Loader, browser plugins, whatever) can modify the body DOM node when React doesn't expect it, and cause weird errors that are very hard to trace and debug. Read more about this issue.The nice thing about putting script at the bottom is that it won't block rendering until script load in case you add React server rendering to your project.Example:(IE9+)Note: Having <script async src="..."></script> in the header ensures that the browser will start downloading JavaScript bundle before HTML content is loaded.the ready function can be used like this: If you don't want to use jQuery, you can use the onload function:just a wild guess, how about adding to index.html the following:            like this:For me it worked! :-)I ran into the same error. It turned out to be caused by a simple typo after changing my code from:toNotice the missing '#'

It should have been Just posting in case it helps anyone else solve this error.Yes, basically what you done is right, except you forget that JavaScript is sync in many cases, so you running the code before your DOM gets loaded, there are few ways to solve this:1) Check to see if DOM fully loaded, then do whatever you want, you can listen to DOMContentLoaded for example:2) Very common way is adding the script tag to the bottom of your document (after body tag):3) Using window.onload, which gets fired when the entire page loaded(img, etc)4) Using document.onload, which gets fired when the DOM is ready:There are even more options to check if DOM is ready, but the short answer is DO NOT run any script before you make sure your DOM is ready in every cases...JavaScript is working along with DOM elements and if they are not available, will return null, could break the whole application... so always make sure you are fully ready to run your JavaScript before you do...If you use webpack for rendering your react and use HtmlWebpackPlugin in your react,this plugin builds its blank index.html by itself and injects js file in it,so it does not contain div element,as HtmlWebpackPlugin docs you can build your own index.html and give its address to this plugin,

in my webpack.config.jsand this is my index.html fileIn my case this error was caused by hot reloading, while introducing new classes. In that stage of the project, use normal watchers to compile your code.For those using ReactJS.Net and getting this error after a publish:Check the properties of your .jsx files and make sure Build Action is set to Content. Those set to None will not be published. I came upon this solution from this SO answer.I ran into similar/same error message. In my case, I did not have the target DOM node which is to render the ReactJS component defined. Ensure the HTML target node is well defined with appropriate "id" or "name", along with other HTML attributes (suitable for your design need)it's easy just make basic HTML CSS js and render the script from js 

Adding hours to JavaScript Date object?

Jeff Meatball Yang

[Adding hours to JavaScript Date object?](https://stackoverflow.com/questions/1050720/adding-hours-to-javascript-date-object)

It amazes me that JavaScript's Date object does not implement an add function of any kind.I simply want a function that can do this:I would simply like some pointers in a direction.Like this:This seems really hackish though - and does it even work?

2009-06-26 19:08:51Z

It amazes me that JavaScript's Date object does not implement an add function of any kind.I simply want a function that can do this:I would simply like some pointers in a direction.Like this:This seems really hackish though - and does it even work?JavaScript itself has terrible Date/Time API's. Nonetheless, you can do this in pure JavaScript:Test:The below code is to add 4 hours to date(example today's date)It will not cause error if you try to add 4 to 23 (see the docs):It is probably better to make the addHours method immutable by returning a copy of the Date object rather than mutating its parameter.This way you can chain a bunch of method calls without worrying about state.The version suggested by kennebec will fail when changing to or from DST, since it is the hour number that is set. will add h hours to this independent of time system peculiarities.

Jason Harwig's method works as well.You can use the momentjs http://momentjs.com/ Library.I also think the original object should not be modified. So to save future manpower here's a combined solution based on Jason Harwig's and Tahir Hasan answers:There is an add in the Datejs library.And here are the JavaScript date methods. kennebec wisely mentioned getHours() and setHours();Check if its not already defined, otherwise defines it on the Date prototype:Another way to handle this is to convert the date to unixtime (epoch), then add the equivalent in (milli)seconds, then convert it back. This way you can handle day and month transitions, like adding 4 hours to 21, which should result in the next day, 01:00. For a simple add/subtract hour/minute function in javascript, try this:This can be used without parameters to get the current timeor with parameters to get the time with the added minutes/hourseven negative time worksthis function returns an array of SPRBRN is correct. In order to account for the beginning/end of the month and year, you need to convert to Epoch and back.Here's how you do that:

or do it in one line (where variable names are the same as above:This is a easy way to get incremented or decremented data value.A little messy, but it works! Given a date format like this: 2019-04-03T15:58Your output would be:  2019-04-03T16:58

AngularJS ng-repeat handle empty list case

Prinzhorn

[AngularJS ng-repeat handle empty list case](https://stackoverflow.com/questions/12340095/angularjs-ng-repeat-handle-empty-list-case)

I thought this would be a very common thing, but I couldn't find how to handle it in AngularJS. Let's say I have a list of events and want to output them with AngularJS, then that's pretty easy:But how do I handle the case when the list is empty? I want to have a message box in place where the list is with something like "No events" or similar. The only thing that would come close is the ng-switch with events.length (how do I check if empty when an object and not an array?), but is that really the only option I have?

2012-09-09 14:52:35Z

I thought this would be a very common thing, but I couldn't find how to handle it in AngularJS. Let's say I have a list of events and want to output them with AngularJS, then that's pretty easy:But how do I handle the case when the list is empty? I want to have a message box in place where the list is with something like "No events" or similar. The only thing that would come close is the ng-switch with events.length (how do I check if empty when an object and not an array?), but is that really the only option I have?You can use ngShow.See example.Or you can use ngHideSee example.For object you can test Object.keys.And if you want to use this with a filtered list here's a neat trick:You might want to check out the angular-ui directive ui-if if you just want to remove the ul from the DOM when the list is empty:With the newer versions of angularjs the correct answer to this question is to use ng-if:This solution will not flicker when the list is about to download either because the list has to be defined and with a length of 0 for the message to display.Here is a plunker to show it in use: http://plnkr.co/edit/in7ha1wTlpuVgamiOblS?p=previewTip: You can also show a loading text or spinner: This is similar to @Konrad 'ktoso' Malawski but slightly easier to remember.Tested with Angular 1.4Here's a different approach using CSS instead of JavaScript/AngularJS.CSS:Markup:If the list is empty, <li ng-repeat="item in filteredItems">, etc. will get commented out and will become a comment instead of a li element.You can use this ng-switch:You can use as keyword to refer a collection under a ng-repeat element:i usually use ng-show where variable you define for example you can use ng-if because this is not render in html page and you dont see your html tag in inspect...

New line in JavaScript alert box

Germ

[New line in JavaScript alert box](https://stackoverflow.com/questions/1841452/new-line-in-javascript-alert-box)

How do you put in a new line into a JavaScript alert box? 

2009-12-03 17:16:10Z

How do you put in a new line into a JavaScript alert box? \n will put a new line in - \n being a control code for new line.Output:you have to use double quotes to display special char like \n \t etc... in js alert box

for exemple in php script:But a second possible problem arrives when you want to display a string specified in double quoted. see link textIf the string is enclosed in double-quotes ("), PHP will interpret more escape sequences for special charactersescape sequences \n is transformed as 0x0A ASCII Escaped character and this character is not displayed in the alert box. The solution consists in to escape this special sequence:if you don't know how the string is enclosed you have to transform special characters to their escape sequencesIn C# I did:It display as:List of Special Character codes in JavaScript:Modified: You don't need to have the extra quotes and stringsWhen you want to write in javascript alert from a php variable, you have to add an other "\" before "\n".

Instead the alert pop-up is not working.ex: Just in case this helps anyone, when doing this from C# code behind I had to use a double escape character or I got an "unterminated string constant" JavaScript error:Works with \n but if the script is into a java tag you must write \\\norJust add a newline \n character.Thanks for the hints.  Using the "+" sign is the only way I could get it to work.  This is the last line of a function that adds some numbers.  I'm just learning JavaScript myself:\n won't work if you're inside java code though:I know its not an answer, just thought it was important.use the new line character of a javascript instead of '\n'.. 

eg: "Hello\nWorld" use "Hello\x0AWorld" 

It works great!!As of ECMAScript 2015 you can use back-ticks (` `) to enclose Template Literals for multi-line strings like this:Outputs:In JAVA app, if message is read from "properties" file.Due to double compilation java-html, you'll need double escape.will result in I saw some people had trouble with this in MVC, so... a simple way to pass '\n' using the Model, and in my case even using a translated text, is to use HTML.Raw to insert the text. That fixed it for me. In the code below, Model.Alert can contains newlines, like "Hello\nWorld"...You can use \n for new lineA new line character in javascript can be achieved by using \nThis can be done using Output :here is a jsfiddle prepared for the same.I used: "\n\r" - it only works in double quotes though.

JavaScript object: access variable property by name as string [duplicate]

Hailwood

[JavaScript object: access variable property by name as string [duplicate]](https://stackoverflow.com/questions/4255472/javascript-object-access-variable-property-by-name-as-string)

If I have a javascript object that looks like belowand I have a function that is passed both the object, and a property name like sowhat would the body of read_prop(object, property) look like?

2010-11-23 11:18:10Z

If I have a javascript object that looks like belowand I have a function that is passed both the object, and a property name like sowhat would the body of read_prop(object, property) look like?You don't need a function for it - simply use the bracket notation:This is equal to dot notation, var side = columns.right;, except the fact that right could also come from a variable, function return value, etc., when using bracket notation.If you NEED a function for it, here it is:To answer some of the comments below that aren't directly related to the original question, nested objects can be referenced through multiple brackets. If you have a nested object like so:you can access property x of c as follows:If a property is undefined, an attempt to reference it will return undefined (not null or false):ThiefMaster's answer is 100% correct, although I came across a similar problem where I needed to fetch a property from a nested object (object within an object), so as an alternative to his answer, you can create a recursive solution that will allow you to define a nomenclature to grab any property, regardless of depth:Where your string reference to a given property ressembles property1.property2Code and comments in JsFiddle.Since I was helped with my project by the answer above (I asked a duplicate question and was referred here), I am submitting an answer (my test code) for bracket notation when nesting within the var:

jQuery UI DatePicker to show month year only

Aanu

[jQuery UI DatePicker to show month year only](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)

I am using jQuery date picker to display the calendar all over my app. I want to know if I can use it to display the month and year (May 2010) and not the calendar?

2010-02-05 16:02:43Z

I am using jQuery date picker to display the calendar all over my app. I want to know if I can use it to display the month and year (May 2010) and not the calendar?Here's a hack (updated with entire .html file):EDIT

jsfiddle for the above example:

http://jsfiddle.net/DBpJe/7755/EDIT 2

Adds the month year value to input box only on clicking of Done button.

Also allows to delete input box values, which isn't possible in above field

http://jsfiddle.net/DBpJe/5103/EDIT 3

updated Better Solution based on rexwolf's solution down.

http://jsfiddle.net/DBpJe/5106 This code is working flawlessly to me:Output is:@Ben Koehler, that's prefect! I made a minor modification so that using a single instance of the date picker more than once works as expected. Without this modification the date is parsed incorrectly and the previously selected date is not highlighted.The above answers are pretty good. My only complaint is that you can't clear the value once it's been set. Also I prefer the extend-jquery-like-a-plugin approach.This works perfect for me:Then invoke like so:This will solve the problem =) But I wanted the timeFormat yyyy-mmOnly tried in FF4 thoughI had this same need today and found this on github, works with jQueryUI and has month picker in place of days in calendarhttps://github.com/thebrowser/jquery.ui.monthpickerHere's what I came up with.  It hides the calendar without needing an extra style block and adds a clear button to deal with the problem of not being able to clear the value once you click on the input.  Also works nicely with multiple monthpickers on the same page.HTML:JavaScript:I needed a Month/Year picker for two fields (From & To) and when one was chosen the Max/Min was set on the other one...a la picking airline ticket dates.

I was having issues setting the max and min...the dates of the other field would get erased.  Thanks to several of the above posts...I finally figured it out. You have to set options and dates in a very specific order.  See this fiddle for the full solution: Month/Year Picker @ JSFiddleCode:Also add this to a style block as mentioned above:I combined many of above good answers and arrive on this:This is proved working but facing many bugs so I was forced to patch in several places of datepicker:patch1:  in _showDatepicker : to smooth the hide;patch2:  in _checkOffset: to correct month picker positioning (otherwise when the field is at the bottom of the browser, the offset check is off);patch3:  in onClose of _hideDatepicker: otherwise when closing the date fields will flash for a very short period which is very annoying.I know the my fix was far from good but for now it's working. Hope it helps.Add one more simple solution http://jsfiddle.net/tmnasim/JLydp/

Features: Is it just me or is this not working as it should in IE(8)?

The date changes when clicking done, but the datepicker opens up again, until you actually click somewhere in the page to loose focus on the input field...I'm looking in to solving this.If you are looking for a month picker try this jquery.mtz.monthpicker This worked for me well.after digging jQueryUI.com for datepicker, here's my conclusion and answer to your question.First, I would say no to your question. You can't use jQueryUI datepicker for picking month and year only. It is not supported. It has no callback function for that.But you can hack it to display only month and and year by using css to hide the days, etc. And I think won't make sense still cause you need the dates to be click in order to pick a date. I can say you just have to use another datepicker. Like what Roger suggested.I had the problem of date picker mixed with month picker.

I solved it like that.If anyone want that also for multiple calendars its not very hard to add this functionallity to jquery ui.

with minified search for:add this in front of xsearch for and replace it with also search for replace it withfor css you should use:after that all is done just go to your desired datepicker init functions and provide setting var justMonth: true is the key here :)Like many others, I've encountered numerous problems trying to do this, and only a combination of the solutions posted, and eventually a big hack to make it perfect, has landed me a solution.Problems with other solutions in this thread that I've tried:I've finally found a way to fix all of these problems. The first four can be fixed simply by being careful about how you reference your date- and monthpickers in their internal code, and of course doing some manual updating of your pickers. This you can see in the instantiation-examples near the bottom. The fifth problem can be helped by adding some custom code to the datepicker functions.NOTE: You do NOT need to use the following monthpicker scripts to fix the first three problems in your normal datepicker. Simply use the datepicker instantiation-script near the bottom of this post.Now, to use monthpickers and mend the last problem, we need to separate the datepickers and the monthpickers. We could get one of the few jQuery-UI monthpicker addons out there, but some lack localization flexibility/ability, some lack animation support...so, what to do? Roll your "own" from the datepicker-code! This gets you a fully-functioning monthpicker, with all the functionalities of the datepicker, just without the displaying of days.I have supplied a monthpicker js-script and the accompanying CSS-script, using the method described below, with the jQuery-UI v1.11.1 code. Simply copy these code-snippets to two new files, monthpicker.js and monthpicker.css, respectively.If you want to read about the rather simple process by which I converted the datepicker to a monthpicker, scroll down to the last section.These following javascript code-snippets work with multiple datepickers and/or monthpickers on the page, without the aforementioned problems! Fixed generally by using '$(this).' a lot :)The first script is for a normal datepicker, and the second one is for the "new" monthpickers.The out-commented .after, which lets you create some element to clear the input-field, is stolen from Paul Richards' answer.I'm using the "MM yy" format in my monthpicker, and the 'yy-mm-dd' format in my datepicker, but this is completely compatible with all formats, so you are free to use whichever one you want. Simply change the 'dateFormat' option. The standard options 'showButtonPanel', 'showAnim', and 'yearRange' are of course optional and customizable to your wishes.Datepicker instantiation.

This one goes from 90 years ago and to the present day. It helps you to keep the input-field correct, especially if you set the defaultDate, minDate and maxDate options, but it can handle it if you don't. It will work with any dateFormat you choose.Include the monthpicker.js file and the monthpicker.css file in the page you want to use the monthpickers.Monthpicker instantiation

The value retrieved from this monthpicker, is always the FIRST day of the selected month.

Starts at the current month, and ranges from 100 years ago and 10 years into the future.That's it!

That's all you need to make a monthpicker.I can't seem to make a jsfiddle work with this, but it is working for me in my ASP.NET MVC project. Just do what you normally do to add a datepicker to your page, and incorporate the above scripts, possibly by changing the selector (meaning $("#MyMonthTextBox")) to something that works for you.I hope this helps someone.I've taken all the javascript code from jquery-ui-1.11.1.js pertaining to their datepicker, pasted it into a new js-file, and replaced the following strings:Then I removed the part of the for-loop which creates the entire ui-datepicker-calendar div (the div which other solutions hide using CSS). This can be found in the _generateHTML: function (inst).Find the line that says:Mark everything from after the closing div-tag and down to (and not including) the line where it says:Now it'll be unhappy because we need to close some things. After that closing div-tag from before, add this:The code should now be seamed together nicely. Here's a code-snippet showing what you should've ended up with:Then I copy/pasted the code from jquery-ui.css pertaining to the datepickers to a new CSS-file, and replaced the following strings:Waht about:

http://www.mattkruse.com/javascript/calendarpopup/Select the month-select exampleMade a couple of refinements to BrianS's nearly perfect response above:EDIT: One problem left to solve with this is that there is no way to empty the datepicker - clear the field and click away and it repopulates with the selected date.EDIT2: I have not managed to solve this nicely (i.e. without adding a separate Clear button next to the input), so ended up just using this: https://github.com/thebrowser/jquery.ui.monthpicker - if anyone can get the standard UI one to do it that would be amazing.You also need this style rule:I liked the @user1857829 answer and his "extend-jquery-like-a-plugin approach".

I just made a litte modification so that when you change month or year in any way the picker actually writes the date in the field.

I found that I'd like that behaviour after using it a bit.I've had certain difficulties with the accepted answer and no other one could be used with a minimum effort as a base. So, I decided to tweak the latest version of the accepted answer until it satisfies at least minimum JS coding/reusability standards.Here is a way much cleaner solution than the 3rd (latest) edition of the Ben Koehler's accepted answer. Moreover, it will:Check it out:And everything else you need is the following CSS somewhere around:That's it. Hope the above will save some time for further readers.I know it's a little late response, but I got the same problem a couple of days before and I have came with a nice & smooth solution.

First I found this great date picker hereThen I've just updated the CSS class (jquery.calendarPicker.css) that comes with the example like this:The plugin fires an event DateChanged when you change anything, so it doesn't matter that you are not clicking on a day (and it fits nice as a year and month picker)Hope it helps!I also needed a month picker. I made a simple one with year on header and 3 rows of 4 months below. Check it out: Simple monthyear picker with jQuery.I tried the various solutions provided here and they worked fine if you simply wanted a couple of drop downs.  The best (in appearance etc) 'picker' (https://github.com/thebrowser/jquery.ui.monthpicker) suggested here is basically a copy of an old version of jquery-ui datepicker with the _generateHTML rewritten.  However, I found it no longer plays nicely with current jquery-ui (1.10.2) and had other issues (doesn't close on esc, doesn't close on other widget opening, has hardcoded styles). Rather than attempt to fix that monthpicker and rather than reattempt the same process with the latest datepicker, I went with hooking into the relevant parts of the existing date picker.   This involves overriding:As this question is a bit old and already well answered, here's only the _selectDay override to show how this was done:As stated, this is an old question, but I found it useful so wanted to add feedback with an alterantive solution.for a monthpicker, using JQuery v 1.7.2, I have the following javascript which is doing just that

  $l("[id$=txtDtPicker]").monthpicker({

                showOn: "both",

                buttonImage: "../../images/Calendar.png",

                buttonImageOnly: true,

                pattern: 'yyyymm', // Default is 'mm/yyyy' and separator char is not mandatory

                monthNames: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez']

            });

Thanks for Ben Koehler's solution.However, I had a problem with multiple instances of datepickers, with some of them needed with day selection. Ben Koehler's solution (in edit 3) works, but hides the day selection in all instances. Here's an update that solves this issue :Use onSelect call back and remove the year portion manually and set the text in the field manually

Why do you need to invoke an anonymous function on the same line?

palig

[Why do you need to invoke an anonymous function on the same line?](https://stackoverflow.com/questions/1140089/why-do-you-need-to-invoke-an-anonymous-function-on-the-same-line)

I was reading some posts about closures and saw this everywhere, but there is no clear explanation how it works - everytime I was just told to use it...:Ok I see that we will create new anonymous function and then execute it. So after that this simple code should work (and it does):My question is what kind of magic happens here? I thought that when I wrote:then a new unnamed function would be created like function ""(msg) ...but then why doesn't this work?Why does it need to be in the same line?Could you please point me some posts or give me an explanation?

2009-07-16 20:26:25Z

I was reading some posts about closures and saw this everywhere, but there is no clear explanation how it works - everytime I was just told to use it...:Ok I see that we will create new anonymous function and then execute it. So after that this simple code should work (and it does):My question is what kind of magic happens here? I thought that when I wrote:then a new unnamed function would be created like function ""(msg) ...but then why doesn't this work?Why does it need to be in the same line?Could you please point me some posts or give me an explanation?Drop the semicolon after the function definition.Above should work.DEMO Page: https://jsfiddle.net/e7ooeq6m/I have discussed this kind of pattern in this post:jQuery and $ questionsEDIT:If you look at ECMA script specification, there are 3 ways you can define a function. (Page 98, Section 13 Function Definition)So you may ask, what's the difference between declaration and expression? From ECMA Script specification:If you notice, 'identifier' is optional for function expression. And when you don't give an identifier, you create an anonymous function. It doesn't mean that you can't specify an identifier.This means following is valid.Important point to note is that you can use 'mySum' only inside the mySum function body, not outside. See following example:Live DemoCompare this toArmed with this knowledge, let's try to analyze your code.When you have code like, You created a function expression. And you can execute this function expression by wrapping it inside parenthesis.It's called a self-invoked function.  What you are doing when you call (function(){}) is returning a function object.  When you append () to it, it is invoked and anything in the body is executed.  The ; denotes the end of the statement, that's why the 2nd invocation fails.One thing I found confusing is that the "()" are grouping operators. Here is your basic declared function. Ex. 1:Functions are objects, and can be grouped. So let's throw parens around the function. Ex. 2:Now instead of declaring and right-away calling the same function, we can use basic substitution to declare it as we call it. Ex. 3.Finally, we don't have a need for that extra foo because we're not using the name to call it! Functions can be anonymous. Ex. 4.To answer your question, refer back to Example 2. Your first line declares some nameless function and groups it, but does not call it. The second line groups a string. Both do nothing. (Vincent's first example.)But An anonymous function is not a function with the name "". It is simply a function without a name.Like any other value in JavaScript, a function does not need a name to be created. Though it is far more useful to actually bind it to a name just like any other value.But like any other value, you sometimes want to use it without binding it to a name. That's the self-invoking pattern.Here is a function and a number, not bound, they do nothing and can never be used:So we have to store them in a variable to be able to use them, just like any other value:You can also use syntatic sugar to bind the function to a variable:But if naming them is not required and would lead to more confusion and less readability, you could just use them right away.Here, my function and my numbers are not bound to a variable, but they can still be used.Said like this, it looks like self-invoking function have no real value. But you have to keep in mind that JavaScript scope delimiter is the function and not the block ({}).So a self-invoking function actually has the same meaning as a C++, C# or Java block. Which means that variable created inside will not "leak" outside the scope. This is very useful in JavaScript in order not to pollute the global scope.It's just how JavaScript works. You can declare a named function:And call it:Or, you can declare an anonymous function:And call that:Or, you can just never bind the function to a name:Functions can also return functions:It's worth nothing that any variables defined with "var" in the body of make_foo will be closed over by each function returned by make_foo.  This is a closure, and it means that the any change made to the value by one function will be visible by another.  This lets you encapsulate information, if you desire:It's just how nearly every programming language but Java works.The code you show,consist of two statements. The first is an expression which yields a function object (which will then be garbage collected because it is not saved). The second is an expression which yields a string. To apply the function to the string, you either need to pass the string as an argument to the function when it is created (which you also show above), or you will need to actually store the function in a variable, so that you can apply it at a later time, at your leisure. Like so:Note that by storing an anonymous function (a lambda function) in a variable, your are effectively giving it a name. Hence you may just as well define a regular function:In summary of the previous comments:when not assigned to a variable, yields a syntax error.  The code is parsed as a function statement (or definition), which renders the closing parentheses syntactically incorrect.  Adding parentheses around the function portion tells the interpreter (and programmer) that this is a function expression (or invocation), as inThis is a self-invoking function, meaning it is created anonymously and runs immediately because the invocation happens in the same line where it is declared.  This self-invoking function is indicated with the familiar syntax to call a no-argument function, plus added parentheses around the name of the function: (myFunction)();.There is a good SO discussion JavaScript function syntax.This answer is not strictly related to the question, but you might be interested to find out that this kind of syntax feature is not particular to functions. For example, we can always do something like this:Related to functions. As they are objects, which inherit from Function.prototype, we can do things like:And you know, we don't even have to surround functions with parenthesis in order to execute them. Anyway, as long as we try to assign the result to a variable.One other thing you may do with functions, as soon as you declare them, is to invoke the new operator over them and obtain an object. The following are equivalent:There is one more property JavaScript function has. If you want to call same anonymous function recursively.My understanding of the asker's question is such that:How does this magic work:I may be wrong. However, the usual practice that people are familiar with is:The reason is such that JavaScript parentheses AKA (), can't contain statements and when the parser encounters the function keyword, it knows to parse it as a function expression and not a function declaration.Source: blog post Immediately-Invoked Function Expression (IIFE)examples without brackets:(this is the only real use of void, afaik)or orwork as well. the void is causing the expression to evaluate, as well as the assignment and the bang. the last one works with ~, +, -, delete, typeof, some of the unary operators (void is one as well). not working are of couse ++, -- because of the requirement of a variable.the line break is not necessary.It is a self-executing anonymous function. The first set of brackets contain the expressions to be executed, and the second set of brackets executes those expressions.Peter Michaux discusses the difference in An Important Pair of Parentheses.It is a useful construct when trying to hide variables from the parent namespace. All the code within the function is contained in the private scope of the function, meaning it can't be accessed at all from outside the function, making it truly private.See:Another point of view First, you can declare an anonymous function:Then you call it:Because foo = function(msg){alert(msg);} so you can replace foo as:But you should wrap your entire anonymous function inside pair of braces to avoid syntax error of declaring function when parsing. Then we have,By this way, It's easy understand for me.When you did:You ended the function before ('SO') because of the semicolon. If you just write:It will work.Working example: http://jsfiddle.net/oliverni/dbVjg/The simple reason why it doesn't work is not because of the ; indicating the end of the anonymous function. It is because without the () on the end of a function call, it is not a function call. That is,If you call result = help(); this is a call to a function and will return true.If you call result = help; this is not a call. It is an assignment where help is treated like data to be assigned to result.What you did was declaring/instantiating an anonymous function by adding the semicolon,and then tried to call it in another statement by using just parentheses... Obviously because the function has no name, but this will not work:The interpreter sees the parentheses on the second line as a new instruction/statement, and thus it does not work, even if you did it like this:It still doesn't work, but it works when you remove the semicolon because the interpreter ignores white spaces and carriages and sees the complete code as one statement.Conclusion: a function call is not a function call without the () on the end unless under specific conditions such as being invoked by another function, that is, onload='help' would execute the help function even though the parentheses were not included. I believe setTimeout and setInterval also allow this type of function call too, and I also believe that the interpreter adds the parentheses behind the scenes anyhow which brings us back to "a function call is not a function call without the parentheses".This is a common method of using an anonymous function as a closure which many JavaScript frameworks use.This function called is automatically when the code is compiled.If placing ; at the first line, the compiler treated it as two different lines. So you can't get the same results as above.This can also be written as:For more details, look into JavaScript/Anonymous Functions.The IIFE simply compartmentalizes the function and hides the msg variable so as to not "pollute" the global namespace. In reality, just keep it simple and do like below unless you are building a billion dollar website.You could namespace your msg property using a Revealing Module Pattern like:Anonymous functions are meant to be one-shot deal where you define a function on the fly so that it generates an output from you from an input that you are providing. Except that you did not provide the input. Instead, you wrote something on the second line ('SO'); - an independent statement that has nothing to do with the function. What did you expect? :)

Object spread vs. Object.assign

Olivier Tassinari

[Object spread vs. Object.assign](https://stackoverflow.com/questions/32925460/object-spread-vs-object-assign)

Letâ€™s say I have an options variable and I want to set some default value.Whatâ€™s is the benefit / drawback of these two alternatives?Using object spreadOr using Object.assignThis is the commit that made me wonder.

2015-10-03 17:33:22Z

Letâ€™s say I have an options variable and I want to set some default value.Whatâ€™s is the benefit / drawback of these two alternatives?Using object spreadOr using Object.assignThis is the commit that made me wonder.This isn't necessarily exhaustive.That's not directly related to what you're asking. That code wasn't using Object.assign(), it was using user code (object-assign) that does the same thing. They appear to be compiling that code with Babel (and bundling it with Webpack), which is what I was talking about: the syntax you can just compile. They apparently preferred that to having to include object-assign as a dependency that would go into their build.For reference object rest/spread is finalised in ECMAScript 2018 as a stage 4. The proposal can be found here.For the most part object reset and spread work the same way, the key difference is that spread defines properties, whilst Object.assign() sets them. This means Object.assign() triggers setters. It's worth remembering that other than this, object rest/spread 1:1 maps to Object.assign() and acts differently to array (iterable) spread. For example, when spreading an array null values are spread. However using object spread null values are silently spread to nothing.Array (Iterable) Spread ExampleObject Spread ExampleThis is consistent with how Object.assign() would work, both silently exclude the null value with no error.I think one big difference between the spread operator and Object.assign that doesn't seem to be mentioned in the current answers is that the spread operator will not copy the the source objectâ€™s prototype to the target object. If you want to add properties to an object and you don't want to change what instance it is of, then you will have to use Object.assign. The example below should demonstrate this:The object spread operator (...) doesn't work in browsers, because it isn't part of any ES specification yet, just a proposal. The only option is to compile it with Babel (or something similar).As you can see, it's just syntactic sugar over Object.assign({}).As far as I can see, these are the important differences.As others have mentioned, at this moment of writing, Object.assign() requires a polyfill and object spread ... requires some transpiling (and perhaps a polyfill too) in order to work.Consider this code:These both produce the same output.Here is the output from Babel, to ES5:This is my understanding so far. Object.assign() is actually standardised, where as object spread ... is not yet. The only problem is browser support for the former and in future, the latter too.Play with the code hereHope this helps.I'd like to summarize status of the "spread object merge" ES feature, in browsers, and in the ecosystem via tools.Again: At time of writing this sample works without transpilation in Chrome (60+), Firefox Developer Edition (preview of Firefox 60), and Node (8.7+).I'm writing this 2.5 years after the original question.  But I had the very same question, and this is where Google sent me.  I am a slave to SO's mission to improve the long tail.Since this is an expansion of "array spread" syntax I found it very hard to google, and difficult to find in compatibility tables.  The closest I could find is Kangax "property spread", but that test doesn't have two spreads in the same expression (not a merge).  Also, the name in the proposals/drafts/browser status pages all use "property spread", but it looks to me like that was a "first principal" the community arrived at after the proposals to use spread syntax for "object merge". (Which might explain why it is so hard to google.) So I document my finding here so others can view, update, and compile links about this specific feature.  I hope it catches on.  Please help spread the news of it landing in the spec and in browsers.Lastly, I would have added this info as a comment, but I couldn't edit them without breaking the authors' original intent.  Specifically, I can't edit @ChillyPenguin's comment without it losing his intent to correct @RichardSchulte.  But years later Richard turned out to be right (in my opinion).  So I write this answer instead, hoping it will gain traction on the old answers eventually (might take years, but that's what the long tail effect is all about, after all). NOTE: Spread is NOT just syntactic sugar around Object.assign.  They operate much differently behind the scenes.Object.assign applies setters to a new object, Spread does not.  In addition, the object must be iterable.Copy

Use this if  you need the value of the object as it is at this moment, and you don't  want that value to reflect any changes made by other owners of the  object.Use it for creating a shallow copy of the object

good practice to always set immutable properties to copy - because mutable versions can be passed into immutable properties, copy will ensure that you'll always be dealing with an immutable objectAssign

Assign is somewhat the opposite to copy. 

Assign will generate a setter which assigns the value to the instance variable directly, rather than copying or retaining it.

When calling the getter of an assign  property, it returns a reference to the actual data. Other answers are old, could not get a good answer.

Below example is for object literals, helps how both can complement each other, and how it cannot complement each other (therefore difference):Several more small examples here, also for array & object:

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntaxThis is now part of ES6, thus is standardized, and is also documented on MDN:

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operatorIt's very convenient to use and makes a lot of sense alongside object destructuring.The one remaining advantage listed above is the dynamic capabilities of Object.assign(), however this is as easy as spreading the array inside of a literal object. In the compiled babel output it uses exactly what is demonstrated with Object.assign()So the correct answer would be to use object spread since it is now standardized, widely used (see react, redux, etc), is easy to use, and has all the features of Object.assign()

Passing arguments forward to another javascript function [duplicate]

Anders Nygaard

[Passing arguments forward to another javascript function [duplicate]](https://stackoverflow.com/questions/3914557/passing-arguments-forward-to-another-javascript-function)

I've tried the following with no success:In function a, I can use the arguments keyword to access an array of arguments, in function b these are lost. Is there a way of passing arguments to another javascript function like I try to do?

2010-10-12 12:18:16Z

I've tried the following with no success:In function a, I can use the arguments keyword to access an array of arguments, in function b these are lost. Is there a way of passing arguments to another javascript function like I try to do?Use .apply() to have the same access to arguments in function b, like this:You can test it out here.ECMAScript ES6 added a new operator that lets you do this in a more practical way: ...Spread Operator.Example without using the apply method:Note This snippet returns a syntax error if your browser still uses ES5.Editor's note: Since the snippet uses console.log(), you must open your browser's JS console to see the result - there will be no in-page result.It will display this result:In short, the spread operator can be used for different purposes if you're using arrays, so it can also be used for function arguments, you can see a similar example explained in the official docs: Rest parametersThe explanation that none of the other answers supplies is that the original arguments are still available, but not in the original position in the arguments object.  The arguments object contains one element for each actual parameter provided to the function. When you call a you supply three arguments: the numbers 1, 2, and, 3. So, arguments contains [1, 2, 3].When you call b, however, you pass exactly one argument: a's arguments object. So arguments contains [[1, 2, 3]] (i.e. one element, which is a's arguments object, which has properties containing the original arguments to a).As @Nick demonstrated, you can use apply to provide a set arguments object in the call.The following achieves the same result:But apply is the correct solution in the general case.

How to extract the hostname portion of a URL in JavaScript

Dustin Getz

[How to extract the hostname portion of a URL in JavaScript](https://stackoverflow.com/questions/1368264/how-to-extract-the-hostname-portion-of-a-url-in-javascript)

Is there a really easy way to start from a full URL:And extract just the host part:There's gotta be a JavaScript function that does this reliably, but I can't find it.

2009-09-02 15:03:33Z

Is there a really easy way to start from a full URL:And extract just the host part:There's gotta be a JavaScript function that does this reliably, but I can't find it.suppose that you have a page with this address: http://sub.domain.com/virtualPath/page.htm. use the following in page code to achive those results:Update: about the .origin***** As the ref states, browser compatibility for window.location.origin is not clear. I've checked it in chrome and it returned http://sub.domain.com:port if the port is anything but 80, and http://sub.domain.com if the port is 80.Special thanks to @torazaburo for mentioning that to me.You could concatenate the location protocol and the host:For a url, let say 'http://stackoverflow.com/questions', it will return 'http://stackoverflow.com'Use document.location object and its host or hostname properties.There are two ways. The first is a variant of another answer here, but this one accounts for non-default ports:But I prefer this simpler method (which works with any URI string):The accepted answer didn't work for me since wanted to be able to work with any arbitary url's, not just the current page URL. Take a look at the URL object:use and for: "http://aaa.bbb.ccc.ddd.com/sadf.aspx?blah"you will get: http://aaa.bbb.ccc.ddd.com/TryorThere is another hack I use and never saw in any StackOverflow response :

using "src" attribute of an image will yield the complete base path of your site.

For instance :On an URL like http://domain.com/somesite/index.html,

root will be set to http://domain.com/somesite/.

This also works for localhost or any valid base URL.Note that this will cause a failed HTTP request on the $ dummy image.

You can use an existing image instead to avoid this, with only slight code changes.Another variant uses a dummy link, with no side effect on HTTP requests :I did not test it on every browser, though.Check this:this will return host name as www.domain.comand:will return domain name with port like www.example.com:80For complete reference check Mozilla developer site.I would like to specify something. If someone want to get the whole url with path like I need, can use:I know this is a bit late, but I made a clean little function with a little ES6 syntaxIt could also be writen in ES5 likeOf course IE doen't support Object.assign, but in my line of work, that doesn't matter.Regex provides much more flexibility.

JSON: why are forward slashes escaped?

Jason S

[JSON: why are forward slashes escaped?](https://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped)

The reason for this "escapes" me.JSON escapes the forward slash, so a hash {a: "a/b/c"} is serialized as {"a":"a\/b\/c"} instead of {"a":"a/b/c"}.Why?

2009-10-16 21:54:18Z

The reason for this "escapes" me.JSON escapes the forward slash, so a hash {a: "a/b/c"} is serialized as {"a":"a\/b\/c"} instead of {"a":"a/b/c"}.Why?JSON doesn't require you to do that, it allows you to do that. It also allows you to use "\u0061" for "A", but it's not required. Allowing \/ helps when embedding JSON in a <script> tag, which doesn't allow </ inside strings, like Seb points out.Some of Microsoft's ASP.NET Ajax/JSON API's use this loophole to add extra information, e.g., a datetime will be sent as "\/Date(milliseconds)\/". (Yuck)The JSON spec says you CAN escape forward slash, but you don't have to.I asked the same question some time ago and had to answer it myself. Here's what I came up with:PHP escapes forward slashes by default which is probably why this appears so commonly. I'm not sure why, but possibly because embedding the string "</script>" inside a <script> tag is considered unsafe.This functionality can be disabled by passing in the JSON_UNESCAPED_SLASHES flag but most developers will not use this since the original result is already valid JSON.The JSON_UNESCAPED_UNICODE|JSON_UNESCAPED_SLASHES must be default, not an (strange) option... How to say it to php-developers?The default MUST be the most frequent use, and the (current) most widely used standards as UTF8. How many PHP-code fragments in the Github or other place need this exoctic "embedded in HTML" feature?

How to get evaluated attributes inside a custom directive

Shlomi Schwartz

[How to get evaluated attributes inside a custom directive](https://stackoverflow.com/questions/12371159/how-to-get-evaluated-attributes-inside-a-custom-directive)

I'm trying to get an evaluated attribute from my custom directive, but I can't find the right way of doing it.I've created this jsFiddle to elaborate.What am I missing?

2012-09-11 13:44:20Z

I'm trying to get an evaluated attribute from my custom directive, but I can't find the right way of doing it.I've created this jsFiddle to elaborate.What am I missing?Notice: I do update this answer as I find better solutions. I also keep the old answers for future reference as long as they remain related. Latest and best answer comes first. Directives in angularjs are very powerful, but it takes time to comprehend which processes lie behind them.While creating directives, angularjs allows you to create an isolated scope with some bindings to the parent scope. These bindings are specified by the attribute you attach the element in DOM and how you define scope property in the directive definition object.There are 3 types of binding options which you can define in scope and you write those as prefixes related attribute.HTMLIn that case, in the scope of directive (whether it's in linking function or controller), we can access these properties like this:Since this answer got accepted, but has some issues, I'm going to update it to a better one. Apparently, $parse is a service which does not lie in properties of the current scope, which means it only takes angular expressions and cannot reach scope. 

{{,}} expressions are compiled while angularjs initiating which means when we try to access them in our directives postlink method, they are already compiled. ({{1+1}} is 2 in directive already).This is how you would want to use:.One thing you should notice here is that, if you want set the value string, you should wrap it in quotes. (See 3rd input)Here is the fiddle to play with: http://jsfiddle.net/neuTA/6/I'm not removing this for folks who can be misled like me, note that using $eval is perfectly fine the correct way to do it, but $parse has a different behavior, you probably won't need this to use in most of the cases.The way to do it is, once again, using scope.$eval. Not only it compiles the angular expression, it has also access to the current scope's properties.What you are missing was $eval.For an attribute value that needs to be interpolated in a directive that is not using an isolated scope, e.g., use Attributes' method $observe:From the directive page, If the attribute value is just a constant, e.g.,you can use $eval if the value is a number or boolean, and you want the correct type:If the attribute value is a string constant, or you want the value to be string type in your directive, you can access it directly:In your case, however, since you want to support interpolated values and constants, use $observe.The other answers here are very much correct, and valuable. But sometimes you just want simple: to get a plain old parsed value at directive instantiation, without needing updates, and without messing with isolate scope. For instance, it can be handy to provide a declarative payload into your directive as an array or hash-object in the form:In that case, you can cut to the chase and just use a nice basic angular.$eval(attr.attrName). Working Fiddle.For the same solution I was looking for Angularjs directive with ng-Model.

 Here is the code that resolve the problem.

 

HTML DOM

My Result is:Use $timeout because directive call after dom load so your changes doesn`'t apply

Chrome sendrequest error: TypeError: Converting circular structure to JSON

Skizit

[Chrome sendrequest error: TypeError: Converting circular structure to JSON](https://stackoverflow.com/questions/4816099/chrome-sendrequest-error-typeerror-converting-circular-structure-to-json)

I've got the following...which calls the following..However, my code never reaches "ZOMG HERE" but rather throws the following error while running chrome.extension.sendRequestDoes anyone have any idea what is causing this?

2011-01-27 12:07:44Z

I've got the following...which calls the following..However, my code never reaches "ZOMG HERE" but rather throws the following error while running chrome.extension.sendRequestDoes anyone have any idea what is causing this?It means that the object you pass in the request (I guess it is pagedoc) has a circular reference, something like:JSON.stringify cannot convert structures like this.N.B.: This would be the case with DOM nodes, which have circular references, even if they are not attached to the DOM tree. Each node has an ownerDocument which refers to document in most cases. document has a reference to the DOM tree at least through document.body and document.body.ownerDocument refers back to document again, which is only one of multiple circular references in the DOM tree.As per the JSON docs at Mozilla, JSON.Stringify has a second parameter censor which can be used to filter/ignore children items while parsing the tree. However, perhaps you can avoid the circular references.In Node.js we cannot. So we can do something like this:The result:Unfortunately there seems to be a maximum of 30 iterations before it automatically assumes it's circular. Otherwise, this should work. I even used areEquivalent from here, but JSON.Stringify still throws the exception after 30 iterations. Still, it's good enough to get a decent representation of the object at a top level, if you really need it. Perhaps somebody can improve upon this though? In Node.js for an HTTP request object, I'm getting:I created a small Node.js module to do this here: https://github.com/ericmuyser/stringy Feel free to improve/contribute!One approach is to strip object and functions from main object. And stringify the simpler formI normally use the circular-json npm package to solve this.Note: circular-json has been deprecated, I now use flatted (from the creator of CircularJSON):from: https://www.npmjs.com/package/flattedBased on zainengineer's answer... Another approach is to make a deep copy of the object and strip circular references and stringify the result.This might not be related answer, but this link  Detecting and fixing circular references in JavaScript might helpful to detect objects which are causing circular dependency.  I resolve this problem on NodeJS like this:I have experienced the same error when trying to build the message below with jQuery. The circular reference happens when reviewerName was being mistakenly assigned to msg.detail.reviewerName. JQuery's .val() fixed the issue, see last line.I was getting the same error with jQuery formvaliadator, but when I removed a console.log inside success: function, it worked.For my case I was getting that error when I was using async function on my server-side to fetch documents using mongoose. It turned out that the reason was I forgot to put await before calling find({}) method. Adding that part fixed my issue. 

Why is React's concept of Virtual DOM said to be more performant than dirty model checking?

Daniil

[Why is React's concept of Virtual DOM said to be more performant than dirty model checking?](https://stackoverflow.com/questions/21109361/why-is-reacts-concept-of-virtual-dom-said-to-be-more-performant-than-dirty-mode)

I saw a React dev talk at (Pete Hunt: React: Rethinking best practices -- JSConf EU 2013)  and the speaker mentioned that dirty-checking of the model can be slow. But isn't calculating the diff between virtual DOMs actually even less performant since the virtual DOM, in most of the cases, should be bigger than model?I really like the potential power of the Virtual DOM (especially server-side rendering) but I would like to know all the pros and cons.

2014-01-14 08:57:15Z

I saw a React dev talk at (Pete Hunt: React: Rethinking best practices -- JSConf EU 2013)  and the speaker mentioned that dirty-checking of the model can be slow. But isn't calculating the diff between virtual DOMs actually even less performant since the virtual DOM, in most of the cases, should be bigger than model?I really like the potential power of the Virtual DOM (especially server-side rendering) but I would like to know all the pros and cons.I'm the primary author of a virtual-dom module, so I might be able to answer your questions. There are in fact 2 problems that need to be solved hereIn React, each of your components have a state. This state is like an observable you might find in knockout or other MVVM style libraries. Essentially, React knows when to re-render the scene because it is able to observe when this data changes. Dirty checking is slower than observables because you must poll the data at a regular interval and check all of the values in the data structure recursively. By comparison, setting a value on the state will signal to a listener that some state has changed, so React can simply listen for change events on the state and queue up re-rendering.The virtual DOM is used for efficient re-rendering of the DOM. This isn't really related to dirty checking your data. You could re-render using a virtual DOM with or without dirty checking. You're right in that there is some overhead in computing the diff between two virtual trees, but the virtual DOM diff is about understanding what needs updating in the DOM and not whether or not your data has changed. In fact, the diff algorithm is a dirty checker itself but it is used to see if the DOM is dirty instead.We aim to re-render the virtual tree only when the state changes. So using an observable to check if the state has changed is an efficient way to prevent unnecessary re-renders, which would cause lots of unnecessary tree diffs. If nothing has changed, we do nothing.A virtual DOM is nice because it lets us write our code as if we were re-rendering the entire scene. Behind the scenes we want to compute a patch operation that updates the DOM to look how we expect. So while the virtual DOM diff/patch algorithm is probably not the optimal solution, it gives us a very nice way to express our applications. We just declare exactly what we want and React/virtual-dom will work out how to make your scene look like this. We don't have to do manual DOM manipulation or get confused about previous DOM state. We don't have to re-render the entire scene either, which could be much less efficient than patching it.I recently read a detailed article about React's diff algorithm here: http://calendar.perfplanet.com/2013/diff/. From what I understand, what makes React fast is:Compared to dirty-check, the key differences IMO are:The second point is even more important for non-trivial models such as one with huge amount of fields or large list. One field change of complex model will result in only the operations needed for DOM elements involving that field, instead of the whole view/template.React is not the only DOM manipulation library. I encourage you to understand the alternatives by reading this article from Auth0 that includes detailed explanation and benchmarks. I'll highlight here their pros and cons, as you asked:Here's a comment by React team member Sebastian MarkbÃ¥ge which sheds some light:https://news.ycombinator.com/item?id=6937668You can read this(The difference between Virtual DOM and DOM) artical to know about Real DOM and Virtual DOM. Hope it will help you!Virtual Dom is not invented by react. It is part of HTML dom.

It is lightweight and detached from the browser-specific implementation details.We can think virtual DOM as Reactâ€™s local and simplified copy of the HTML DOM. It allows React to do its computations within this abstract world and skip theã€Œrealã€DOM operations, often slow and browser-specific. Actually there is no big differenc between DOM and VIRTUAL DOM.Below are the points why Virtual Dom is used (source Virtual DOM in ReactJS):As well as updating the DOM properties ie. values. It follows a algorithm.Now, suppose if you update DOM 10 times directly, then all the above steps will run one by one and updating DOM algorithms will take time to updates DOM values.This, is why Real DOM is slower than virtual DOM.

Why is document.write considered aã€Œbad practiceã€?

FlySwat

[Why is document.write considered aã€Œbad practiceã€?](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

I know document.write is considered bad practice; and I'm hoping to compile a list of reasons to submit to a 3rd party vendor as to why they shouldn't use document.write in implementations of their analytics code.Please include your reason for claiming document.write as a bad practice below.

2009-04-29 15:18:16Z

I know document.write is considered bad practice; and I'm hoping to compile a list of reasons to submit to a 3rd party vendor as to why they shouldn't use document.write in implementations of their analytics code.Please include your reason for claiming document.write as a bad practice below.A few of the more serious problems:Far better to use the safe and DOM friendly DOM manipulation methodsThere's actually nothing wrong with document.write, per se.  The problem is that it's really easy to misuse it.  Grossly, even.In terms of vendors supplying analytics code (like Google Analytics) it's actually the easiest way for them to distribute such snippetsAs long as you don't try to use it after the document has loaded, document.write is not inherently evil, in my humble opinion.Another legitimate use of document.write comes from the HTML5 Boilerplate index.html example.I've also seen the same technique for using the json2.js JSON parse/stringify polyfill (needed by IE7 and below).It can block your pagedocument.write only works while the page is loading; If you call it after the page is done loading, it will overwrite the whole page.This effectively means you have to call it from an inline script block - And that will prevent the browser from processing parts of the page that follow. Scripts and Images will not be downloaded until the writing block is finished.Pro:Con:Here's my twopence worth, in general you shouldn't use document.write for heavy lifting, but there is one instance where it is definitely useful: http://www.quirksmode.org/blog/archives/2005/06/three_javascrip_1.htmlI discovered this recently trying to create an AJAX slider gallery. I created two nested divs, and applied width/height and overflow: hidden to the outer <div> with JS. This was so that in the event that the browser had JS disabled, the div would float to accommodate the images in the gallery - some nice graceful degradation. Thing is, as with the article above, this JS hijacking of the CSS didn't kick in until the page had loaded, causing a momentary flash as the div was loaded. So I needed to write a CSS rule, or include a sheet, as the page loaded. Obviously, this won't work in XHTML, but since XHTML appears to be something of a dead duck (and renders as tag soup in IE) it might be worth re-evaluating your choice of DOCTYPE...It breaks pages using XML rendering (like XHTML pages).Best: some browser switch back to HTML rendering and everything works fine. Probable: some browser disable the document.write() function in XML rendering mode.Worst: some browser will fire an XML error whenever using the document.write() function.It overwrites content on the page which is the most obvious reason but I wouldn't call it "bad".It just doesn't have much use unless you're creating an entire document using JavaScript in which case you may start with document.write.Even so, you aren't really leveraging the DOM when you use document.write--you are just dumping a blob of text into the document so I'd say it's bad form.Off the top of my head:http://www.w3.org/MarkUp/2004/xhtml-faq#docwriteChrome may block document.write that inserts a script in certain cases. When this happens, it will display this warning in the console:Based on analysis done by Google-Chrome Dev Tools' Lighthouse Audit, .write is considered a browser violation as it halts the parser from rendering the page. The parser receives the message that the document is being modified; hence, it gets blocked until JS has completed its process. Only at this time will the parser resume. The biggest consequence of employing such a method is lowered performance. The browser will take longer to load page content. The adverse reaction on load time depends on what is being written to the document. You won't see much of a difference if you are adding a <p> tag to the DOM as opposed to passing an array of 50-some references to JavaScript libraries (something which I have seen in working code and resulted in an 11 second delay - of course, this also depends on your hardware). All in all, it's best to steer clear of this method if you can help it.For more info see Intervening against document.write()One can think of document.write() (and .innerHTML) as evaluating a source code string. This can be very handy for many applications. For example if you get HTML code as a string from some source, it is handy to just "evaluate" it.In the context of Lisp, DOM manipulation would be like manipulating a list structure, e.g. create the list (orange) by doing:And document.write() would be like evaluating a string, e.g. create a list by evaluating a source code string like this:Lisp also has the very useful ability to create code using list manipulation (like using the "DOM style" to create a JS parse tree). This means you can build up a list structure using the "DOM style", rather than the "string style", and then run that code, e.g. like this:If you implement coding tools, like simple live editors, it is very handy to have the ability to quickly evaluate a string, for example using document.write() or .innerHTML. Lisp is ideal in this sense, but you can do very cool stuff also in JS, and many people are doing that, like http://jsbin.com/The disadvantages of document.write mainly depends on these 3 factors:a) ImplementationThe document.write() is mostly used to write content to the screen as soon as that content is needed. This means it happens anywhere, either in a JavaScript file or inside a script tag within an HTML file. With the script tag being placed anywhere within such an HTML file, it is a bad idea to have document.write() statements inside script blocks that are intertwined with HTML inside a web page.b) RenderingWell designed code in general will take any dynamically generated content, store it in memory, keep manipulating it as it passes through the code before it finally gets spit out to the screen. So to reiterate the last point in the preceding section, rendering content in-place may render faster than other content that may be relied upon, but it may not be available to the other code that in turn requires the content to be rendered for processing. To solve this dilemma we need to get rid of the document.write() and implement it the right way.c) Impossible ManipulationOnce it's written it's done and over with. We cannot go back to manipulate it without tapping into the DOM.I don't think using document.write is a bad practice at all. In simple words it is like a high voltage for inexperienced people. If you use it the wrong way, you get cooked. There are many developers who have used this and other dangerous methods at least once, and they never really dig into their failures. Instead, when something goes wrong, they just bail out, and use something safer. Those are the ones who make such statements about what is considered a "Bad Practice".It's like formatting a hard drive, when you need to delete only a few files and then saying "formatting drive is a bad practice".I think the biggest problem is that any elements written via document.write are added to the end of the page's elements. That's rarely the desired effect with modern page layouts and AJAX. (you have to keep in mind that the elements in the DOM are temporal, and when the script runs may affect its behavior).It's much better to set a placeholder element on the page, and then manipulate it's innerHTML.

How can I add or update a query string parameter?

amateur

[How can I add or update a query string parameter?](https://stackoverflow.com/questions/5999118/how-can-i-add-or-update-a-query-string-parameter)

With javascript how can I add a query string parameter to the url if not present or if it present, update the current value? I am using jquery for my client side development.

2011-05-14 00:46:38Z

With javascript how can I add a query string parameter to the url if not present or if it present, update the current value? I am using jquery for my client side development.I wrote the following function which accomplishes what I want to achieve:I have expanded the solution and combined it with another that I found to replace/update/remove the querystring parameters based on the users input and taking the urls anchor into consideration.Not supplying a value will remove the parameter, supplying one will add/update the parameter. If no URL is supplied, it will be grabbed from window.locationUpdateThere was a bug when removing the first parameter in the querystring, I have reworked the regex and test to include a fix.Second UpdateAs suggested by @JarÃ³nBarends - Tweak value check to check against undefined and null to allow setting 0 valuesThird UpdateThere was a bug where removing a querystring variable directly before a hashtag would lose the hashtag symbol which has been fixedFourth UpdateThanks @rooby for pointing out a regex optimization in the first RegExp object.

Set initial regex to ([?&]) due to issue with using (\?|&) found by @YonatanKarniFifth UpdateRemoving declaring hash var in if/else statementThe URLSearchParams utility can be useful for this in combination with window.location.search. For example:Now foo has been set to bar regardless of whether or not it already existed. However, the above assignment to window.location.search will cause a page load, so if that's not desirable use the History API as follows:Now you don't need to write your own regex or logic to handle the possible existence of query strings. However, browser support is poor as it's currently experimental and only in use in recent versions of Chrome, Firefox, Safari, iOS Safari, Android Browser, Android Chrome and Opera. Use with a polyfill if you do decide to use it.Update: Browser support has improved since my original answer.Based on @amateur's answer (and now incorporating the fix from @j_walker_dev comment), but taking into account the comment about hash tags in the url I use the following:Edited to fix [?|&] in regex which should of course be [?&] as pointed out in the commentsEdit: Alternative version to support removing URL params as well.  I have used value === undefined as the way to indicate removal.  Could use value === false or even a separate input param as wanted.See it in action at https://jsfiddle.net/bp3tmuxh/1/Here is my library to do that: https://github.com/Mikhus/jsurlI realize this question is old and has been answered to death, but here's my stab at it. I'm trying to reinvent the wheel here because I was using the currently accepted answer and the mishandling of URL fragments recently bit me in a project.The function is below. It's quite long, but it was made to be as resilient as possible. I would love suggestions for shortening/improving it. I put together a small jsFiddle test suite for it (or other similar functions). If a function can pass every one of the tests there, I say it's probably good to go.Update: I came across a cool function for using the DOM to parse URLs, so I incorporated that technique here. It makes the function shorter and more reliable. Props to the author of that function.window.location.search is read/write.However - modifying the query string will redirect the page you're on and cause a refresh from the server.If what you're attempting to do is maintain client side state (and potentially make it bookmark-able), you'll want to modify the URL hash instead of the query string, which keeps you on the same page (window.location.hash is read/write). This is how web sites like twitter.com do this.You'll also want the back button to work, you'll have to bind javascript events to the hash change event, a good plugin for that is http://benalman.com/projects/jquery-hashchange-plugin/If it's not set or want to update with a new value you can use:This is in simple Javascript, by the way.EDITYou may want to try using the jquery query-object pluginHere's my approach: The location.params() function (shown below) can be used as a getter or setter.  Examples:Given the URL is http://example.com/?foo=bar&baz#some-hash,Here is the params() function, which can optionally be assigned to the window.location object.This is my preference, and it covers the cases I can think of. Can anyone think of a way to reduce it to a single replace?I know this is quite old but i want to fires my working version in here.NOTE This is a modified version of @elreimundoMy take from here (compatible with "use strict"; does not really use jQuery):Example usage:Based on the answer @ellemayo gave, I came up with the following solution that allows for disabling of the hash tag if desired:Call it like this:Results in:Here is a shorter version that takes care of Code:The regex description can be found here.NOTE: This solution is based on @amateur answer, but with many improvements.A different approach without using regular expressions. Supports 'hash' anchors at the end of the url as well as multiple question mark charcters (?). Should be slightly faster than the regular expression approach.Use this function to add, remove and modify query string parameter from URL based on jqueryAdd new and modify existing parameter to urlRemove existingBy using jQuery we can do like belowIn variable new_url we will have new query parameters.Reference: http://api.jquery.com/jquery.param/Code that appends a list of parameters to an existing url using ES6 and jQuery:Where listOfParams is likeExample of Usage:Fast tests:To give an code example for modifying window.location.search as suggested by Gal and tradyblix:Java script code to find a specific query string and replace its value *Yeah I had an issue where my querystring would overflow and duplicate, but this was due to my own sluggishness. so I played a bit and worked up some js jquery(actualy sizzle) and C# magick.So i just realized that after the server has done with the passed values, the values doesn't matter anymore, there is no reuse, if the client wanted to do the same thing evidently it will always be a new request, even if its the same parameters being passed. And thats all clientside, so some caching/cookies etc could be cool in that regards.JS:HTML:C#:No duplicates, each request as unique as you modified it, and due to how this is structured,easy to add more queries dynamicaly from wthin the dom.Here's an alternative method using the inbuilt properties of the anchor HTML element:if you want to set multiple parameters at once:same function as @amateur'sif jslint gives you an error add this after the for loopThere are a lot of awkward and unnecessarily complicated answers on this page. The highest rated one, @amateur's, is quite good, although it has a bit of unnecessary fluff in the RegExp. Here is a slightly more optimal solution with cleaner RegExp and a cleaner replace call:As an added bonus, if uri is not a string, you won't get errors for trying to call match or replace on something that may not implement those methods.And if you want to handle the case of a hash (and you've already done a check for properly formatted HTML), you can leverage the existing function instead of writing a new function containing the same logic:Or you can make some slight changes to @Adam's otherwise excellent answer:This should serve the purpose: 

Is it possible to simulate key press events programmatically?

tan

[Is it possible to simulate key press events programmatically?](https://stackoverflow.com/questions/596481/is-it-possible-to-simulate-key-press-events-programmatically)

Is it possible to simulate key press events programmatically in JavaScript?

2009-02-27 20:17:12Z

Is it possible to simulate key press events programmatically in JavaScript?A non-jquery version that works in both webkit and gecko:If you are ok to use jQuery 1.3.1:What you can do is programmatically trigger keyevent listeners by firing keyevents. It makes sense to allow this from a sandboxed security-perspective. Using this ability, you can then apply a typical observer-pattern. You could call this method "simulating".Below is an example of how to accomplish this in the W3C DOM standard along with jQuery:This example is adapted from: https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_eventsIn jQuery:But as of recently, there is no [DOM] way to actually trigger keyevents leaving the browser-sandbox. And all major browser vendors will adhere to that security concept.As for plugins such as Adobe Flash - which are based on the NPAPI-, and permit bypassing the sandbox: these are phasing-out ; Firefox.Detailed Explanation:You cannot and you must not for security reasons (as Pekka already pointed out). You will always require a user interaction in between. Additionally imagine the chance of the browser vendors getting sued by users, as various programmatic keyboard events will have led to spoofing attacks.See this post for alternatives and more details. There is always the flash based copy-and-paste. Here is an elegant  example. At the same time it is a testimony why the web is moving away from plugin vendors.There is a similar security mindset applied in case of the opt-in CORS policy to access remote content programmatically.The answer is:

There is no way to programmatically trigger input keys in the sandboxed browser environment under normal circumstances. Bottomline: I am not saying it will not be possible in the future, under special browser-modes and/or privileges towards the end-goal of gaming, or similar user-experiences. However prior to entering such modes, the user will be asked for permissions and risks, similar to the Fullscreen API model. Useful: In the context of KeyCodes, this tool and keycode mapping will come in handy.Disclosure: The answer is based on the answer here.You can dispatch keyboard events on an element like this You can create and dispatch keyboard events, and they will trigger appropriate registered event handlers, however they will not produce any text, if dispatched to input element for example.To fully simulate text input you need to produce a sequence of keyboard events plus explicitly set the text of input element. The sequence of events depends on how thoroughly you want to simulate text input.The simplest form would be:You can use dispatchEvent():I didn't test this, but it's adapted from the code on dispatchEvent()'s documentation.  You'll probably want to read through that, and also the docs for createEvent() and initKeyEvent().Building on the answer from alex2k8,  here's a revised version that works in all browsers that jQuery supports (the problem was in missing arguments to jQuery.event.trigger, which is easy to forget when using that internal function).You could even push this further and let it not only simulate the event but actually insert the character (if it is an input element), however there are many cross-browser gotcha's when trying to do that. Better use a more elaborate plugin like SendKeys.In some cases keypress event can't provide required funtionality. From mozilla docs we can see that the feature is deprecated:So, since the keypress event is combined from the two consequently fired events keydown, and the following it keyup for the same key, just generate the events one-by-one:For those interested, you can, in-fact recreate keyboard input events reliably.  In order to change text in input area (move cursors, or the page via an input character) you have to follow the DOM event model closely: http://www.w3.org/TR/DOM-Level-3-Events/#h4_events-inputevents The model should do:Then for each character:Then, optionally for most:This actually changes the text in the page via javascript (without modifying value statements) and sets off any javascript listeners/handlers appropriately.  If you mess up the sequence javascript will not fire in the appropriate order, the text in the input box will not change, the selections will not change or the cursor will not move to the next space in the text area.Unfortunately the code was written for an employer under an NDA so I cannot share it, but it is definitely possible but you must recreate the entire key input "stack" for each element in the correct order.This approach support cross-browser changing the value of key code.

Sourcejust use CustomEvent4 ex want to simulate ctrl+zHere's a library that really helps: https://cdn.rawgit.com/ccampbell/mousetrap/2e5c2a8adbe80a89050aaf4e02c45f02f1cc12d4/tests/libs/key-event.jsI don't know from where did it came from, but it is helpful. It adds a .simulate() method to window.KeyEvent, so you use it simply with KeyEvent.simulate(0, 13) for simulating an enter or KeyEvent.simulate(81, 81) for a 'Q'.I got it at https://github.com/ccampbell/mousetrap/tree/master/tests.This worked for me and it does simulate a keyup for my textaera. if you want it for the entire page just put the KeySimulation() on <body> like this <body onmousemove="KeySimulation()"> or if not onmousemove then onmouseover or onload works too.As of 2019, this solution has worked for me:I used this in my browser game, in order to support mobile devices with a simulated keypad.Clarification: This code dispatches a single keydown event, while a real key press would trigger one keydown event (or several of them if it is held longer), and then one keyup event when you release that key. If you need keyup events too, it is also possible to simulate keyup events by changing "keydown" to "keyup" in the code snippet.This also sends the event to the entire webpage, hence the document. If you want only a specific element to receive the event, you can substitute document for the desired element.Here is a solution that works in Chrome and Chromium (have only tested these platforms). It seems Chrome has some bug or own approach to handling key codes so this property has to be added separately to the KeyboardEvent.It was single rowed once due to easy usage in a console context. But probably useful still.  This is what I managed to find:Native JavaScript with TypeScript supported solution:Type the keyCode or whichever property you are using and cast it to  KeyboardEventInitExampleas soon as the user presses the key in question you can store a reference to that even and use it on any HTML other element:you can set the keyCode if you create your own event, you can copy existing parameters from any real keyboard event (ignoring targets since its the job of dispatchEvent) and :I know the question asks for a javascript way of simulating a keypress. But for those who are looking for a jQuery way of doing things:That's what I tried with js/typescript in chrome. Thanks to

this answer for inspiration.The critical part of getting this to work is to realize that charCode, keyCode and which are all deprecated methods. Therefore if the code processing the key press event uses any of these three, then it'll receive a bogus answer (e.g. a default of 0).As long as you access the key press event with a non-deprecated method, such as key, you should be OK.For completion, I've added the basic Javascript code for triggering the event:

Share data between AngularJS controllers

johnkeese

[Share data between AngularJS controllers](https://stackoverflow.com/questions/21919962/share-data-between-angularjs-controllers)

I'm trying to share data across controllers. Use-case is a multi-step form, data entered in one input is later used in multiple display locations outside the original controller. Code below and in jsfiddle here.HTMLJSAny help is greatly appreciated.

2014-02-20 21:27:13Z

I'm trying to share data across controllers. Use-case is a multi-step form, data entered in one input is later used in multiple display locations outside the original controller. Code below and in jsfiddle here.HTMLJSAny help is greatly appreciated.A simple solution is to have your factory return an object and let your controllers work with a reference to the same object:JS:HTML:Demo: http://jsfiddle.net/HEdJF/When applications get larger, more complex and harder to test you might not want to expose the entire object from the factory this way, but instead give limited access for example via getters and setters:With this approach it is up to the consuming controllers to update the factory with new values, and to watch for changes to get them:HTML:Demo: http://jsfiddle.net/27mk1n1o/I prefer not to use $watch for this. Instead of assigning the entire service to a controller's scope you can assign just the data.JS:HTML:Alternatively you can update the service data with a direct method.JS: There are many ways you can share the data between controllers I've created a factory that controls shared scope between route path's pattern, so you can maintain the shared data just when users are navigating in the same route parent path.So, if the user goes to another route path, for example '/Support', the shared data for path '/Customer' will be automatically destroyed. But, if instead of this the user goes to 'child' paths, like '/Customer/1' or '/Customer/list' the the scope won't be destroyed.You can see an sample here: http://plnkr.co/edit/OL8of9There are multiple ways to share data between controllers  As we know $rootscope is not preferable way for data transfer or communication because it is a global scope which is available for entire applicationFor data sharing between Angular Js controllers Angular services are best practices eg. .factory, .service

For referenceIn case of data transfer from parent to child controller you can directly access parent data in child controller through $scope

If you are using ui-router then you can use $stateParmas to pass url parameters like id, name, key, etc$broadcast is also good way to transfer data between controllers from parent to child and $emit to transfer data from child to parent controllersHTMLJSRefer given link to know more about $broadcastI have used an AngularJS service.Step1: I have created an AngularJS service named SharedDataService.Step2: Create two controllers and use the above created service.Step3: Simply use the created controllers in the view.To see working solution to this problem please press the link belowhttps://codepen.io/wins/pen/bmoYLr.html file:There is another way without using $watch, using angular.copy:There are multiple ways to do this.**Not sure where I picked up this pattern but for sharing data across controllers and reducing the $rootScope and $scope this works great. It is reminiscent of a data replication where you have publishers and subscribers.  Hope it helps.The Service:The Controller that is getting the new data, which is the Publisher would do something like this..The Controller that is also using this new data, which is called the Subscriber would do something like this...This will work for any scenario.  So when the primary controller is initialized and it gets data it would call the changeData method which would then broadcast that out to all the subscribers of that data.  This reduces the coupling of our controllers to each other.Just do it simple (tested with v1.3.15): 

Vue.js - How to properly watch for nested data

Plastic

[Vue.js - How to properly watch for nested data](https://stackoverflow.com/questions/42133894/vue-js-how-to-properly-watch-for-nested-data)

I'm  trying to understand how to properly watch for some prop variation.

I have a parent component (.vue files) that receive data from an ajax call, put the data inside an object and use it to render some child component through a v-for directive, below a simplification of my implementation:... then inside <script> tag:item objects are like this:Now, inside my child "player" component I'm trying to watch for any Item's property variation and I use:It works but it seems a bit tricky to me and I was wondering if this is the right way to do it. My goal is to perform some action every time prop changes or myArray gets new elements or some variation inside existing ones. Any suggestion will be appreciated.

2017-02-09 10:16:36Z

I'm  trying to understand how to properly watch for some prop variation.

I have a parent component (.vue files) that receive data from an ajax call, put the data inside an object and use it to render some child component through a v-for directive, below a simplification of my implementation:... then inside <script> tag:item objects are like this:Now, inside my child "player" component I'm trying to watch for any Item's property variation and I use:It works but it seems a bit tricky to me and I was wondering if this is the right way to do it. My goal is to perform some action every time prop changes or myArray gets new elements or some variation inside existing ones. Any suggestion will be appreciated.You can use a deep watcher for that:This will now detect any changes to the objects in the item array and additions to the array itself (when used with Vue.set). Here's a JSFiddle: http://jsfiddle.net/je2rw3rs/EDITIf you don't want to watch for every change on the top level object, and just want a less awkward syntax for watching nested objects directly, you can simply watch a computed instead:Here's the JSFiddle: http://jsfiddle.net/oa07r5fw/Another good approach and one that is a bit more elegant is as follows:(I learned this approach from @peerbolte in the comment here )VueJs deep watch in child objectsYou can use the "dynamic watcher":The $watch returns an unwatch function which will stop watching if it is called.Also you can use the deep option:Please make sure to take a look to docsNot seeing it mentioned here, but also possible to use the vue-property-decorator pattern if you are extending your Vue class.My problem with the accepted answer of using deep: true, is that when deep-watching an array, I can't easily identify which element of the array contains the change.  The only clear solution I've found is this answer, which explains how to make a component so you can watch each array element individually.If you want to watch all items in a list and know which item in the list changed, you can set up custom watchers on every item separately, like so:If your list isn't populated straight away (like in the original question), you can move the logic out of created to wherever needed, e.g. inside the .then() block.If your list itself updates to have new or removed items, I've developed a useful pattern that "shallow" watches the list itself, and dynamically watches/unwatches items as the list changes:Another way to add that I used to 'hack' this solution was to do this:

I set up a seperate computed value that would simply return the nested object value.None of the answer for me was working. Actually if you want to watch on nested data with Components being called multiple times. So they are called with different props to identify them.

For example <MyComponent chart="chart1"/>  <MyComponent chart="chart2"/>

My workaround is to create an addionnal vuex state variable, that I manually update to point to the property that was last updated.Here is a Vuex.ts implementation example:On any Component function to update the store:Now on any Component to get the update:

What is the motivation for bringing Symbols to ES6?

Yanis

[What is the motivation for bringing Symbols to ES6?](https://stackoverflow.com/questions/21724326/what-is-the-motivation-for-bringing-symbols-to-es6)

As you may know they are planning to include new Symbol primitive type in ECMAScript 6 (not to mention some other crazy stuff). I always thought that the :symbol notion in Ruby is needless; we could easily use plain strings instead, like we do in JavaScript. And now they decide to complicate things in JS with that. I don't understand the motivation. Could someone explain to me whether we really need symbols in JavaScript?

2014-02-12 09:53:29Z

As you may know they are planning to include new Symbol primitive type in ECMAScript 6 (not to mention some other crazy stuff). I always thought that the :symbol notion in Ruby is needless; we could easily use plain strings instead, like we do in JavaScript. And now they decide to complicate things in JS with that. I don't understand the motivation. Could someone explain to me whether we really need symbols in JavaScript?The original motivation for introducing symbols to Javascript was to enable private properties.Unfortunately, they ended up being severely downgraded. They are no longer private, since you can find them via reflection, for example, using Object.getOwnPropertySymbols or proxies.They are now known as unique symbols and their only intended use is to avoid name clashes between properties. For example, ECMAScript itself can now introduce extension hooks via certain methods that you can put on objects (e.g. to define their iteration protocol) without risking them to clash with user names.Whether that is strong enough a motivation to add symbols to the language is debatable.Symbols do not guarantee true privacy but can be used to separate public and internal properties of objects. Let's take an example where we can use Symbol for having private properties.Let's take an example where a property of an object is not private.Above, the Pet class property type is not private. To make it private we have to create a closure. The below example illustrates how we can make type private using a closure.Disadvantage of above approach: We are introducing an extra closure for each Pet instance created, which can harm performance.Now we introduce Symbol. This can help us make a property private without using extra unnecessary closures. Code example below:Symbols are a new, special kind of object that can be used as a unique property name in objects. Using Symbol instead of string's allows different modules to create properties that don't conflict with one another. Symbols can also be made private, so that their properties can't be accessed by anyone who doesn't already have direct access to the Symbol.Symbols are a new primitive. Just like the number, string, and boolean primitives, Symbol have a function which can be used to create them. Unlike the other primitives, Symbols do not have a literal syntax (e.g how string have '') - the only way to create them is with the Symbol constructor in the following way:In reality, Symbol's are just a slightly different way to attach properties to an object - you could easily provide the well-known Symbols as standard methods, just like Object.prototype.hasOwnProperty which appears in everything that inherits from Object.Here are some of the benefits of the Symbol primitive type.Symbols can be given a description, which is really just used for debugging to make life a little easier when logging them to a console.This is where Symbol's get really interesting. They are heavily intertwined with objects. Symbol can be assigned as keys to objects, meaning you can assign an unlimited number of unique Symbol's to an object and be guaranteed that these will never conflict with string keys, or other unique Symbols.Letâ€™s assume you have a logging library, which includes multiple log levels such as logger.levels.DEBUG, logger.levels.INFO, logger.levels.WARN and so on. In ES5 code youâ€™d like make these strings (so logger.levels.DEBUG === 'debug'), or numbers (logger.levels.DEBUG === 10). Both of these arenâ€™t ideal as those values arenâ€™t unique values, but Symbols are! So logger.levels simply becomes:Read more in this great article.This post is about the Symbol(), supplied with actual examples I could find/make and facts & definitions I could find.The Symbol() is the data type, introduced with the release of ECMAScript 6 (ES6).There're two curious facts about the Symbol.You can do it either this way:Or this way:The "some text here" string can't be extracted from the symbol, it's just a description for debugging purposes. It doesn't change the behaviour of symbol in any way. Although, you could console.log it (which is fair, since the value is for debugging, so as not to mistake that log with some other log entry):In this case the value of symbol is actually taken into account and this way two symbols may be non-unique.Let's call those symbols "second-type" symbols. They do not intersect with the "first-type" symbols (i.e. the ones defined with Symbol(data)) in any way.The next two paragraphs pertain only the the first-type symbol.Let's first consider an object, a standard data type. We could define some key-values pairs there and have an access to the values by specifying the key.What if we have two persons with the name Peter?Doing this:wouldn't make much sense.So, appears to be a problem of two absolutely different persons having a same name. Let's then refer out new Symbol(). It's like a person in real life - any person is unique, but their names can be equal. Let's define two "persons".Now we have got two different persons with the same name. Are our persons different indeed? They are; you can check this:How do we benefit there?We can make two entries in your object for the different persons and they can't be mistaken in any way.Using this initialisation, it's absolutely impossible to mistake the entries for the first and second persons. Calling console.log for them will correctly output their second names.Indeed, there already existed a way to define a property to be hidden from Object.keys and enumeration. Here it is:What difference does Symbol() bring there? The difference is that you can still get the property defined with Object.defineProperty in the usual way:And if defined with Symbol as in previous paragraph:You will have an ability to receive its value only if knowing its variable, i.e.Moreover, defining another property under the key "apple" will make the object drop the older one (and if hard-coded, it could throw an error). So, no more apples! That's a pity. Referring the previous paragraph, the Symbols are unique and defining a key as Symbol() will make it unique.Here is how I see it. Symbols provide 'an extra level of privacy', by preventing the keys/properties of an object from being exposed through some popular methods such as Object.keys() and JSON.stringify().Although given an object per se, such properties can still be exposed through reflection, proxy, Object.getOwnPropertySymbols() etc., there is no natural means to access them through a few direct methods, which may be sufficient sometimes from an OOP perspective.A JS symbol is a new primitive data type. They are tokens that serve as unique IDs. A symbol can be created using the Symbol constructor. Take for instance this snippet from MDN:It is often handy to use symbols as unique object property keys, for example:Source

Do DOM tree elements with ids become global variables?

KooiInc

[Do DOM tree elements with ids become global variables?](https://stackoverflow.com/questions/3434278/do-dom-tree-elements-with-ids-become-global-variables)

Working on an idea for a simple HTMLElement wrapper I stumbled upon the following for InternetÂ Explorer and Chrome:For a given HTMLElement with ID in the DOM tree, it is possible to retrieve the div using its ID as the variable name. So for a div likein InternetÂ ExplorerÂ 8 and Chrome you can do:orSo, does this mean every element in the DOM tree is converted to a variable in the global namespace? And does it also mean one can use this as a replacement for the getElementById method in these browsers?

2010-08-08 12:24:43Z

Working on an idea for a simple HTMLElement wrapper I stumbled upon the following for InternetÂ Explorer and Chrome:For a given HTMLElement with ID in the DOM tree, it is possible to retrieve the div using its ID as the variable name. So for a div likein InternetÂ ExplorerÂ 8 and Chrome you can do:orSo, does this mean every element in the DOM tree is converted to a variable in the global namespace? And does it also mean one can use this as a replacement for the getElementById method in these browsers?What is supposed to happen is that â€˜named elementsâ€™ are added as apparent properties of the document object. This is a really bad idea, as it allows element names to clash with real properties of document.IE made the situation worse by also adding named elements as properties of the window object. This is doubly bad in that now you have to avoid naming your elements after any member of either the document or the window object you (or any other library code in your project) might want to use.It also means that these elements are visible as global-like variables. Luckily in this case any real global var or function declarations in your code shadow them, so you don't need to worry so much about naming here, but if you try to do an assignment to a global variable with a clashing name and you forget to declare it var, you'll get an error in IE as it tries to assign the value to the element itself.It's generally considered bad practice to omit var, as well as to rely on named elements being visible on window or as globals. Stick to document.getElementById, which is more widely-supported and less ambiguous. You can write a trivial wrapper function with a shorter name if you don't like the typing. Either way, there's no point in using an id-to-element lookup cache, because browsers typically optimise the getElementById call to use a quick lookup anyway; all you get is problems when elements change id or are added/removed from the document.Opera copied IE, then WebKit joined in, and now both the previously-unstandardised practice of putting named elements on document properties, and the previously-IE-only practice of putting them on window are being standardised by HTML5, whose approach is to document and standardise every terrible practice inflicted on us by browser authors, making them part of the web forever. So Firefox 4 will also support this.What are â€˜named elementsâ€™? Anything with an id, and anything with a name being used for â€˜identifyingâ€™ purposes: that is, forms, images, anchors and a few others, but not other unrelated instances of a name attribute, like control-names in form input fields, parameter names in <param> or metadata type in <meta>. â€˜Identifyingâ€™ names are the ones that should should be avoided in favour of id.As mentioned in the earlier answer this behavior is known as named access on the window object.  The value of the name attribute for some elements and the value of the id attribute for all elements are made available as properties of the global window object.  These are known as named elements.  Since window is the global object in the browser, each named element will be accessible as a global variable.This was originally added by Internet Explorer and eventually was implemented by all other browsers simply for compatibility with sites that are dependent on this behavior.  Interestingly, Gecko (Firefox's rendering engine) chose to implement this in quirks mode only, whereas other rendering engines left it on in standards mode.However, as of Firefox 14, Firefox  now supports named access on the window object in standards mode as well.  Why did they change this?  Turns out there's still a lot of sites that rely on this functionality in standards mode.  Microsoft even released a marketing demo that did, preventing the demo from working in Firefox.Webkit has recently considered the opposite, relegating named access on the window object to quirks mode only.  They decided against it by the same reasoning as Gecko.Soâ€¦ crazy as it seems this behavior is now technically safe to use in the latest version of all major browsers in standards mode.  But while named access can seem somewhat convenient , it should not be used.Why?  A lot of the reasoning can be summed up in this article about why global variables are bad.  Simply put, having a bunch of extra global variables leads to more bugs.  Let's say you accidentally type the name of a var and happen to type an id of a DOM node, SURPRISE!Additionally, despite being standardized there are still quite a few discrepancies in browser's implementations of named access.And I'm sure there's more if you try using named access on edge cases.As mentioned in other answers use document.getElementById to get a reference to a DOM node by its id.  If you need to get a reference to a node by its name attribute use document.querySelectorAll.Please, please do not propagate this problem by using named access in your site.  So many web developers have wasted time trying to track down this magical behavior.  We really need to take action and get rendering engines to turn named access off in standards mode.  In the short term it will break some sites doing bad things, but in the long run it'll help move the web forward.If you're interested I talk about this in more detail on my blog - https://www.tjvantoll.com/2012/07/19/dom-element-references-as-global-variables/.You should stick to getElementById() in these cases, for example:IE likes to mix elements with name and ID attributes in the global namespace, so best to be explicit about what you're trying to get.Yes, they do.Tested in Chrome 55, Firefox 50, IE 11, IE Edge 14, and Safari 10

with the following example: http://jsbin.com/mahobinopa/edit?html,outputThe question should sound:: "Do HTML Tags with provided IDs become globally accessible DOM Elements?"The answer is YES! That's how it was meant to work, and that's why IDs were introduced by W3C to begin with.: 

The ID of an HTML Tag in a parsed scripting environment becomes its corresponding DOM Element handle.However, Netscape Mozilla refused to conform to (to them intruding) W3C and stubbornly kept using the deprecated Name attribute to create havoc and therefore break the Scripting functionality and the coding convenience brought in by the W3C's introduction of Unique IDs.After the Netscape Navigator 4.7 fiasco their developers all went and infiltrated the W3C, whereas their associates were superseding the Web with wrong practices and misusing examples. Forcing the use and reuse of already deprecated Name attribute [!which was not meant to be unique] on par with ID attributes so that scripts that utilized ID handles for accessing particular DOM elements would simply break!And break they did as they would also write and publish extensive coding lessons and examples [their browser would not recognize anyway] such as  document.all.ElementID.property instead of ElementID.property to at least make it inefficient and give the browser more overhead in case it didn't simply break it at HTML domain by using the same token for the (now [1996-97], deprecated) Name and the standard ID attribute supplying it with the same token value.They easily managed to convince the - back then - overwhelming army of ignorant code-writing amateurs that Names and IDs are practically the same, except that ID attribute is shorter and therefore byte-saving and more convenient to the coder than the ancient Name property. Which was of course a lie. Or - in their superseding published articles of HTML, convincing articles that you'll need to provide both Name and ID to your tags for them to be accessible by the Scripting engine. Mosaic Killers [codenamed "Mozilla"] were so pissed they thought "if we go down, so should Internet". The rising Microsoft - on the other hand - were so naive they thought they should keep the deprecated and marked for deletion Name property and treat it as if it was an ID that is a unique Identifier so that they wouldn't break the scripting functionality of old pages coded by Netscape trainees. They were deadly wrong...And the returning of an array collection of ID conflicting elements was not a solution to this deliberate man-made problem either. Actually it defeated the whole purpose. And this is the sole reason W3C turned ugly and gave us idiocies such as document.getElementById and the accompanying rococo goddamn annoying syntax of the sort...

 (...)

How to check if the URL contains a given string?

RayLoveless

[How to check if the URL contains a given string?](https://stackoverflow.com/questions/4597050/how-to-check-if-the-url-contains-a-given-string)

How could I do something like this:

2011-01-04 18:31:05Z

How could I do something like this:You need add href property and check indexOf instead of containswould do it. Alternatively, you could use a regexp:You would use indexOf like this:Also notice the addition of href for the string otherwise you would do:like so:window.location isn't a String, but it has a toString() method. So you can do it like this:or From the old Mozilla docs:The regex way:Or in a simple statement you could use: I use this to test whether the website is running locally or on a server:This checks whether the href contains either 192.168 or localhost AND is followed by :1337.As you can see, using regex has its advantages over the other solutions when the condition gets a bit trickier.document.URL should get you the URL and Try this, it's shorter and works exactly as window.location.href:also if you want to check the previous URL:Easier it getsTry this:Try indexOfYou can also try search (for regular expressions)I like to create a boolean and then use that in a logical if.Put in your js fileRegular Expressions will be more optimal for a lot of people because of word boundaries \b or similar devices. Word boundaries occur when any of 0-9, a-z, A-Z, _ are on that side of the next match, or when an alphanumeric character connects to line or string end or beginning.If you use if(window.location.href.indexOf("sam"), you'll get matches for flotsam and same, among other words. tom would match tomato and tomorrow, without regex.Making it case-sensitive is as simple as removing the i.Further, adding other filters is as easy as Let's talk about (?:\b|_). RegEx typically defines _ as a word character so it doesn't cause a word boundary. We use this (?:\b|_) to deal with this. To see if it either finds \b or _ on either side of the string.Other languages may need to use something likeAll of this is easier than saying Other languages' flavors of Regular Expressions support \p{L} but javascript does not, which would make the task of detecting foreign characters much easier. Something like [^\p{L}](filters|in|any|alphabet)[^\p{L}]Suppose you have this script And the url form is www.localhost.com/web_form_response.html?text_input=stack&over=flowThe text written to <p id="response"> will be stack

How Can I Wait In Node.js (Javascript), l need to pause for a period of time

Christopher Allen

[How Can I Wait In Node.js (Javascript), l need to pause for a period of time](https://stackoverflow.com/questions/14249506/how-can-i-wait-in-node-js-javascript-l-need-to-pause-for-a-period-of-time)

I'm developing a console like script for personal needs. I need to be able to pause for a extended amount of time, but, from my research, node.js has no way to stop as required. Itâ€™s getting hard to read usersâ€™ information after a period of time... Iâ€™ve seen some code out there, but I believe they have to have other code inside of them for them to work such as:However, I need everything after this line of code to execute after the period of time.For example, I've also seen things likeBut node.js doesnt recognize this.How can I achieve this extended pause?

2013-01-10 01:37:22Z

I'm developing a console like script for personal needs. I need to be able to pause for a extended amount of time, but, from my research, node.js has no way to stop as required. Itâ€™s getting hard to read usersâ€™ information after a period of time... Iâ€™ve seen some code out there, but I believe they have to have other code inside of them for them to work such as:However, I need everything after this line of code to execute after the period of time.For example, I've also seen things likeBut node.js doesnt recognize this.How can I achieve this extended pause?Best way to do this is to break your code into multiple functions, like this:It's similar to JohnnyHK's solution, but much neater and easier to extend.A new answer to an old question. Today ( Jan 2017 June 2019) it is much easier. You can use the new async/await syntax.

For example:For using async/await out of the box without installing and plugins, you have to use node-v7 or node-v8, using the --harmony flag.Update June 2019: By using the latest versions of NodeJS you can use it out of the box. No need to provide command line arguments. Even Google Chrome support it today.More info:The shortest solution without any dependencies:Put the code that you want executed after the delay within the setTimeout callback:This is a simple blocking technique:It's blocking insofar as nothing else will happen in your script (like callbacks). But since this is a console script, maybe it is what you need!No dependencies, no callback hell; that's it :-)Considering the example given in the question, this is how we would sleep between two console logs:The "drawback" is that your main function now has to be async as well. But, considering you are already writing modern Javascript code, you are probably (or at least should be!) using async/await all over your code, so this is really not an issue. All modern browsers today support it.Giving a little insight into the sleep function for those that are not used to async/await and fat arrow operators, this is the verbose way of writing it:Using the fat arrow operator, though, makes it even smaller (and more elegant).Node supports waiting natively:then if you can use async functions:or:I wanted an asynchronous sleep that worked in Windows & Linux, without hogging my CPU with a long while loop.  I tried the sleep package but it wouldn't install on my Windows box.  I ended up using:https://www.npmjs.com/package/system-sleepTo install it, type:In your code, Works like a charm.You can use this www.npmjs.com/package/sleepThis question is quite old, but recently V8 has added Generators which can accomplish what the OP requested.  Generators are generally easiest to use for async interactions with the assistance of a library such as suspend or gen-run.Here's an example using suspend:Related reading (by way of shameless self promotion): What's the Big Deal with Generators?.On Linux/nodejs this works for me:It is blocking, but it is not a busy wait loop.The time you specify is in seconds but can be a fraction. I don't know if other OS's have a similar command.If you want to "code golf" you can make a shorter version of some of the other answers here:But really the ideal answer in my opinion is to use Node's util library and its promisify function, which is designed for exactly this sort of thing (making promise-based versions of previously existing non-promise-based stuff):In either case you can then pause simply by using await to call your sleep function:I've recently created simpler abstraction called wait.for to call async functions in sync mode (based on node-fibers). There is also a version based on upcoming ES6 Generators.https://github.com/luciotato/waitforUsing wait.for, you can call any standard nodejs async function, as if it were a sync function, without blocking node's event loop. You can code sequentially when you need it, which is, (I'm guessing) perfect to simplify your scripts for personal use.using wait.for your code will be:Also any async function can be called in Sync mode.

Check the examples.Since, javascript engine (v8) runs code based on sequence of events in event-queue, There is no strict that javascript exactly trigger the execution at after specified time. That is, when you set some seconds to execute the code later, triggering code is purely base on sequence in event queue. So triggering execution of code may take more than specified time.So Node.js follows,to run the code later instead setTimeout(). For example,With ES6 supporting Promises, we can use them without any third-party aid.Then use it like this:Note that the doWhat function becomes the resolve callback within the new Promise(...).Also note that this is ASYNCHRONOUS sleep. It does not block the event loop. If you need blocking sleep, use this library which realizes blocking sleep with the help of C++ bindings. (Although the need for a blocking sleep in Node like async environments is rare.)https://github.com/erikdubbelboer/node-sleepThis code above is the side effect of the solving Javascript's asynchronous callback hell problem. This is also the reason I think that makes Javascript a useful language in the backend. Actually this is the most exciting improvement introduced to modern Javascript in my opinion. To fully understand how it works, how generator works needs to be fully understood. The function keyword followed by a * is called a generator function in modern Javascript. The npm package co provided a runner function to run a generator.Essentially generator function provided a way to pause the execution of a function with yield keyword, at the same time, yield in a generator function made it possible to exchange information between inside the generator and the caller. This provided a mechanism for the caller to extract data from a promise from an asynchronous call and to pass the resolved data back to the generator. Effectively, it makes an asynchronous call synchronous.This is a moment.js flavored module based on the dirty blocking approach suggested by @atlex2. Use this only for testing.If you just need to suspend for testing purpose you current thread execution try this:simple we are going to wait for 5 seconds for some event to happen (that would be indicated by done variable set to true somewhere else in the code) or when timeout expires that we will check every 100msFor some people, the accepted answer is not working, I found this other answer and it is working for me: How can I pass a parameter to a setTimeout() callback?'hello' is the parameter being passed, you can pass all the parameters after the timeout time. Thanks to @Fabio Phms for the answer.The other answers are great but I thought I'd take a different tact.If all you are really looking for is to slow down a specific file in linux:node myprog slowfileThis will sleep 1 sec every five lines. The node program will go as slow as the writer.  If it is doing other things they will continue at normal speed.The mkfifo creates a first-in-first-out pipe.  It's what makes this work.

The perl line will write as fast as you want.  The $|=1 says don't buffer the output.  I put together, after having read the answers in this question, a simple function which can also do a callback, if you need that:For more info onyou should check Redux-Saga. But it is specific to your choice of Redux as your model framework (although strictly not necessary).

What's the difference between console.dir and console.log?

Drew Noakes

[What's the difference between console.dir and console.log?](https://stackoverflow.com/questions/11954152/whats-the-difference-between-console-dir-and-console-log)

In Chrome the console object defines two methods that seem to do the same thing:I read somewhere online that dir takes a copy of the object before logging it, whereas log just passes the reference to the console, meaning that by the time you go to inspect the object you logged, it may have changed.  However some preliminary testing suggests that there's no difference and that they both suffer from potentially showing objects in different states than when they were logged.Try this in the Chrome console (Ctrl+Shift+J) to see what I mean:Now, expand the [Object] beneath the log statement and notice that it shows foo with a value of 2.  The same is true if you repeat the experiment using dir instead of log.My question is, why do these two seemingly identical functions exist on console?

2012-08-14 14:10:41Z

In Chrome the console object defines two methods that seem to do the same thing:I read somewhere online that dir takes a copy of the object before logging it, whereas log just passes the reference to the console, meaning that by the time you go to inspect the object you logged, it may have changed.  However some preliminary testing suggests that there's no difference and that they both suffer from potentially showing objects in different states than when they were logged.Try this in the Chrome console (Ctrl+Shift+J) to see what I mean:Now, expand the [Object] beneath the log statement and notice that it shows foo with a value of 2.  The same is true if you repeat the experiment using dir instead of log.My question is, why do these two seemingly identical functions exist on console?In Firefox, these function behave quite differently: log only prints out a toString representation, whereas dir prints out a navigable tree.In Chrome, log already prints out a tree -- most of the time. However, Chrome's log still stringifies certain classes of objects, even if they have properties. Perhaps the clearest example of a difference is a regular expression:You can also see a clear difference with arrays (e.g., console.dir([1,2,3])) which are logged differently from normal objects:DOM objects also exhibit differing behavior, as noted on another answer.Another useful difference in Chrome exists when sending DOM elements to the console.Notice:Specifically, console.log gives special treatment to DOM elements, whereas console.dir does not. This is often useful when trying to see the full representation of the DOM JS object.There's more information in the Chrome Console API reference about this and other functions.I think Firebug does it differently than Chrome's dev tools. It looks like Firebug gives you a stringified version of the object while console.dir gives you an expandable object. Both give you the expandable object in Chrome, and I think that's where the confusion might come from. Or it's just a bug in Chrome.In Chrome, both do the same thing. Expanding on your test, I have noticed that Chrome gets the current value of the object when you expand it.You can use the following to get a stringified version of an object if that's what you want to see. This will show you what the object is at the time this line is called, not when you expand it.Use console.dir() to output a browse-able object you can click through instead of the .toString() version, like this:How to show full object in Chrome console?From the firebug site

http://getfirebug.com/logging/Following Felix Klings advice I tried it out in my chrome browser.console.dir([1,2]) gives the following output:While console.log([1,2]) gives the following output:So I believe console.dir() should be used to get more information like prototype etc in arrays and objects.Here is the difference in a nutshell:The following code:Logs the following in google dev tools:

How to read a local text file?

Danny

[How to read a local text file?](https://stackoverflow.com/questions/14446447/how-to-read-a-local-text-file)

Iâ€™m trying to write a simple text file reader by creating a function that takes in the fileâ€™s path and converts each line of text into a char array, but itâ€™s not working.What is going wrong here?This still doesnâ€™t seem to work after changing the code a little bit from a previous revision and now itâ€™s giving me an XMLHttpRequest exception 101.Iâ€™ve tested this on Firefox and it works, but in Google Chrome it just wonâ€™t work and it keeps giving me an Exception 101. How can I get this to work on not just Firefox, but also on other browsers (especially Chrome)?

2013-01-21 20:14:10Z

Iâ€™m trying to write a simple text file reader by creating a function that takes in the fileâ€™s path and converts each line of text into a char array, but itâ€™s not working.What is going wrong here?This still doesnâ€™t seem to work after changing the code a little bit from a previous revision and now itâ€™s giving me an XMLHttpRequest exception 101.Iâ€™ve tested this on Firefox and it works, but in Google Chrome it just wonâ€™t work and it keeps giving me an Exception 101. How can I get this to work on not just Firefox, but also on other browsers (especially Chrome)?You need to check for status 0 (as when loading files locally with XMLHttpRequest, you don't get a status returned because it's not from a Webserver)And specify file:// in your filename:Visit Javascripture ! And go the section readAsText and try the example. You will be able to know how the readAsText function of FileReader works.After the introduction of fetch api in javascript, reading file contents could not be simpler.reading a text filereading a json fileJon Perryman,Yes js can read local files (see FileReader()) but not automatically: the user has to pass the file or a list of files to the script with an html <input type=file>.Then with js it is possible to process (example view) the file or the list of files, some of their properties and the file or files content.What js cannot do for security reasons is to access automatically (without the user input) to the filesystem of his computer.To allow js to acccess to the local fs automatically is needed to create not an html file with js inside it but an hta document.An hta file can contain js or vbs inside it.But the hta executable will work on windows systems only.This is standard browser behavior.Also google chrome worked at the fs api, more infos here: http://www.html5rocks.com/en/tutorials/file/filesystem/Provably you already try it, type "false" as follows:Try creating two functions:other example - my reader with FileReader classThis might help, Using Fetch and async functionModern solution:When user uploads a text file via that input, it will be logged to the console. Here's a working jsbin demo.Here's a more verbose version:Currently (January 2020) this only works in Chrome and Firefox, check here for compatibility if you're reading this in the future: https://developer.mozilla.org/en-US/docs/Web/API/Blob/textOn older browsers, this should work:Adding to some the above answers, this modified solution worked for me.........- read file text from javascript 

- Console log text from file using javascript  - Google chrome and mozilla firefox  in my case i have this structure of files : the console.log result :   If you check console logs you will find "Cross origin requests are not supported for protocol schemes: http, data, chrome, chrome-extension, https."What this signifies is that the Chrome creates a sort of virtual disk for every domain, files served by the domain via above listed protocols are stored into this disk, access to files outside it on your local disk are restricted under same origin policy. AJAX requests and responses happen on http/https, therefore wont work for local files. Firefox does not put such restriction, therefore your code will work happily on the Firefox. However there are workarounds for chrome too : see here.Get local file data in js(data.js) load:file of data.js like:dynamic unixTime queryString prevents cached.AJ works in web http://.In order to read a local file text through JavaScript using chrome, the chrome browser should run with the argument --allow-file-access-from-files to allow JavaScript to access local file, then you can read it using XmlHttpRequest like the following:How to read a local file?By using this you will load a file by loadText() then JS will asynchronously wait until the file is read and loaded after that it will execture readText() function allowing you to continue with your normal JS logic (you can also write a try catch block on the loadText() function in the case any error arises) but for this example I keep it at minimal.You can import my library:

then, the function fetchfile(path) will return the uploaded file

Please note: on Google Chrome if the HTML code is local, errors will appear, but saving the HTML code and the files online then running the online HTML file works.

Get array of object's keys

Richard

[Get array of object's keys](https://stackoverflow.com/questions/8763125/get-array-of-objects-keys)

I would like to get the keys of a JavaScript object as an array, either in jQuery or pure JavaScript.Is there a less verbose way than this?

2012-01-06 19:12:38Z

I would like to get the keys of a JavaScript object as an array, either in jQuery or pure JavaScript.Is there a less verbose way than this?Use Object.keys:This is an ES5 feature. This means it works in all modern browsers but will not work in legacy browsers. The ES5-shim has a implementation of Object.keys you can stealYou can use jQuery's $.map.Of course, Object.keys() is the best way to get an Object's keys. If it's not available in your environment, it can be trivially shimmed using code such as in your example (except you'd need to take into account your loop will iterate over all properties up the prototype chain, unlike Object.keys()'s behaviour).However, your example code...jsFiddle....could be modified. You can do the assignment right in the variable part.jsFiddle.Of course, this behaviour is different to what Object.keys() actually does (jsFiddle). You could simply use the shim on the MDN documentation.I don't know about less verbose but I was inspired to coerce the following onto one line by the one-liner request, don't know how Pythonic it is though ;)In case you're here looking for something to list the keys of an n-depth nested object as a flat array:For getting all of the keys of an Object you can use Object.keys(). Object.keys() takes an object as an argument and returns an array of all the keys.In the above example we store an array of keys in the keys const. We then can easily access the amount of properties on the object by checking the length of the keys array.The complementary function of Object.keys() is Object.values(). This function takes an object as an argument and returns an array of values. For example:If you decide to use Underscore.js you better do

JavaScript Promises - reject vs. throw

Naresh

[JavaScript Promises - reject vs. throw](https://stackoverflow.com/questions/33445415/javascript-promises-reject-vs-throw)

I have read several articles on this subject, but it is still not clear to me if there is a difference between Promise.reject vs. throwing an error. For example,Using Promise.rejectUsing throwMy preference is to use throw simply because it is shorter, but was wondering if there is any advantage of one over the other.

2015-10-30 21:48:40Z

I have read several articles on this subject, but it is still not clear to me if there is a difference between Promise.reject vs. throwing an error. For example,Using Promise.rejectUsing throwMy preference is to use throw simply because it is shorter, but was wondering if there is any advantage of one over the other.There is no advantage of using one vs the other, but, there is a specific case where throw won't work. However, those cases can be fixed. Any time you are inside of a promise callback, you can use throw. However, if you're in any other asynchronous callback, you must use reject.For example, this won't trigger the catch:Instead you're left with an unresolved promise and an uncaught exception. That is a case where you would want to instead use reject. However, you could fix this in two ways.Another important fact is that reject() DOES NOT terminate control flow like a return statement does. In contrast throw does terminate control flow. Example:vsYes, the biggest difference is that reject is a callback function that gets carried out after the promise is rejected, whereas throw cannot be used asynchronously. If you chose to use reject, your code will continue to run normally in asynchronous fashion whereas throw will prioritize completing the resolver function (this function will run immediately). An example I've seen that helped clarify the issue for me was that you could set a Timeout function with reject, for example:The above could would not be possible to write with throw. In your small example the difference in indistinguishable but when dealing with more complicated asynchronous concept the difference between the two can be drastic. TLDR: A function is hard to use when it sometimes returns a promise and sometimes throws an exception. When writing an async function, prefer to signal failure by returning a rejected promiseYour particular example obfuscates some important distinctions between them: Because you are error handling inside a promise chain, thrown exceptions get automatically converted to rejected promises. This may explain why they seem to be interchangeable - they are not. Consider the situation below:This would be an anti-pattern because you would then need to support both async and sync error cases.  It might look something like:Not good and here is exactly where Promise.reject ( available in the global scope ) comes to the rescue and effectively differentiates itself from throw.  The refactor now becomes:This now lets you use just one catch() for network failures and the synchronous error check for lack of tokens:An example to try out. Just change isVersionThrow to false to use reject instead of throw. 

How to get a key in a JavaScript object by its value?

arik

[How to get a key in a JavaScript object by its value?](https://stackoverflow.com/questions/9907419/how-to-get-a-key-in-a-javascript-object-by-its-value)

I have a quite simple JavaScript object, which I use as an associative array. Is there a simple function allowing me to get the key for a value, or do I have to iterate the object and find it out manually?

2012-03-28 12:23:57Z

I have a quite simple JavaScript object, which I use as an associative array. Is there a simple function allowing me to get the key for a value, or do I have to iterate the object and find it out manually?With the Underscore.js library:ES6, no prototype mutations or external libraries.Example,No standard method available. You need to iterate and you can create a simple helper:One word of caution: Even if the above works, its generally a bad idea to extend any host or native object's .prototype. I did it here because it fits the issue very well. Anyway, you should probably use this function outside the .prototype and pass the object into it instead.As said, iteration is needed. For instance, in modern browser you could have:Where value contains the value you're looking for.

Said that, I would probably use a loop.Otherwise you could use a proper "hashmap" object - there are several implementation in JS around - or implement by your own.UPDATE 2018Six years passed, but I still get some vote here, so I feel like a more modern solution â€“ for modern browser/environment â€“ should be mentioned in the answer itself and not just in the comments:Of course it can be also a function:The lodash way https://lodash.com/docs#findKeyMade for closure compiler to extract key name which will be unknown after compilationMore sexy version but using future Object.entries function

I use this function:Usage:Main function:Object with keys and values:Test:Example:If you are working with Underscore or Lodash library, you can use the _.findKey function:ES6+ One LinersorReturn all keys with the value:I created the bimap library (https://github.com/alethes/bimap) which implements a powerful, flexible and efficient JavaScript bidirectional map interface. It has no dependencies and is usable both on the server-side (in Node.js, you can install it with npm install bimap) and in the browser (by linking to lib/bimap.js).Basic operations are really simple:Retrieval of the key-value mapping is equally fast in both directions. There are no costly object/array traversals under the hood so the average access time remains constant regardless of the size of the data. Since the values are unique, it should be possible to add the values as an additional set of keys. This could be done with the following shortcut.This would permit retrieval either via the key or the value:This does assume that there are no common elements between the keys and values.Or, easier yet - create a new object with the keys and values in the order you want then do look up against that object. We have had conflicts using the prototype codes above. You don't have to use the String function around the key, that is optional.Here's one just for whatever curiosity it brings you...If you're sure that your object will have only string values, you could really exhaust yourself to conjure up this implementation:Maybe there's something useful to build off of here...Hope this amuses you.didn't see the following:http://jsfiddle.net/rTazZ/2/  This is a small extension to the Underscorejs method, and uses Lodash instead:FindKey will search and return the first key which matches the value.

If you want the last match instead, use FindLastKey instead.Here's a Lodash solution to this that works for flat key => value object, rather than a nested object. The accepted answer's suggestion to use _.findKey works for objects with nested objects, but it doesn't work in this common circumstance.This approach inverts the object, swapping keys for values, and then finds the key by looking up the value on the new (inverted) object. If the key isn't found then false is returned, which I prefer over undefined, but you could easily swap this out in the third parameter of the _.get method in getKey().Here is my solution first:For example, I suppose that we have an object that contains three value pairs: We can simply write a findKey(array, value) that takes two parameters which are an object and the value of the key you are looking for. As such, this method is reusable and you do not need to manually iterate the object every time by only passing two parameters for this function.  Given input={"a":"x", "b":"y", "c":"x"} ...I typically recommend lodash rather than underscore.If you have it, use it.If you don't, then you should consider using the lodash.invert npm package, which is pretty tiny.Here's how you can test it using gulp:1) Create a file called gulpfile.js with the following contents:2) Install the lodash.invert package and gulp3) Test that it works:Referenceshttps://www.npmjs.com/package/lodash.inverthttps://lodash.com/Differences between lodash and underscorehttps://github.com/gulpjs/gulpUnderscore js solutionES6 methods:Really straightforward.Keep it simple!You don't need to filter the object through sophisticated methods or libs, Javascript has a built in function called Object.values.Example:This will return the object property data.Referenceshttps://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Object/values

