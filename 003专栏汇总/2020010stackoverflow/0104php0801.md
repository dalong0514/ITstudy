Or try to run Any Worng artisan command like  php artisan clean browser And See if it output any HTML Commented data along with it error...We got it working by copying the routes from Router.php instead of using Auth::routes(), these are the routes you need:I know this question has been satisfactorily answered, but I wanted to mention a fix that worked in my case. I added {{ csrf_field() }} and it still didn't work. Then I remembered that I blocked all cookies for development purposes, which can be nice when you change the page and want to refresh it.Once I changed the settings to stop blocking all cookies in MS Edge browser the problem went away.my problem solved by just adding @csrf in form tagLaravel 5.6 doesn't support {{ csrf_field() }} just add @csrf in place of {{ csrf_field() }}larvel_fix_error.pngIf anyone still looking for an answer to this issue. For me it happens when I'm switching between local and production server and I'm logged on both sites. To fix the issue, just clear the session. just set the 'expire_on_close' => true in config\session.php and restart your browser Go into 

App/Kernel.php and comment

\App\Http\Middleware\VerifyCsrfToken::class.

Switch php versions on commandline ubuntu 16.04

salimsaid

[Switch php versions on commandline ubuntu 16.04](https://stackoverflow.com/questions/42619312/switch-php-versions-on-commandline-ubuntu-16-04)

I have installed php 5.6 and and php 7.1 on my Ubuntu 16.04I know with Apache as my web server, I can do When I disable php7.1 in Apache modules and enable php 5.6, Apache recognizes the change and uses php 5.6 interpreter as expected.But when I run internal php web server from the commandline:php handles requests using php 7, how do I switch between php 6.6 and php 7.1 in the commandline ?

2017-03-06 06:55:42Z

I have installed php 5.6 and and php 7.1 on my Ubuntu 16.04I know with Apache as my web server, I can do When I disable php7.1 in Apache modules and enable php 5.6, Apache recognizes the change and uses php 5.6 interpreter as expected.But when I run internal php web server from the commandline:php handles requests using php 7, how do I switch between php 6.6 and php 7.1 in the commandline ?sudo update-alternatives --config phpDefault PHP 5.6 is set on your system and you need to switch to PHP 7.1.Apache:Command Line:Default PHP 7.1 is set on your system and you need to switch to PHP 5.6.Apache:Command Line:Sourcetype this in your shelland this is what you will get Choose the appropriate versionI think you should try thisFrom php5.6 to php7.1From php7.1 to php5.6To list all available versions and choose from them : Or do manuallyYou can create a script to switch from versions: sudo nano switch_php

then type this:exit and save

make it executable: sudo chmod +x switch_phpTo execute the script just type ./switch_php [VERSION_NUMBER] where the parameter is 7 or 5.6That's it you can now easily switch form PHP7 to PHP 5.6!I actually wouldn't recommend using a2enmod for php 5 or 7. I would use update-alternatives. You can do sudo update-alternatives --config php to set which system wide version of PHP you want to use. This makes your command line and apache versions work the same. You can read more about update-alternatives on the man page.E.g.I want to switch PHP Version from 7.1 to 7.2 we can use below commanda2dismod is use to disable the current php version and a2enmod is use to enable the versionType given command in your terminal..For disable the selected PHP version...It will upgrade Php version, same thing reverse if you want version downgrade, you can see it by PHP_INFO();Switch from PHP 5.6 to PHP 7.2 using:Switch from PHP 7.2 to PHP 5.6 using:You could use these open source PHP Switch Scripts, which were designed specifically for use in Ubuntu 16.04 LTS.https://github.com/rapidwebltd/php-switch-scriptsThere is a setup.sh script which installs all required dependencies for PHP 5.6, 7.0, 7.1 & 7.2. Once this is complete, you can just run one of the following switch scripts to change the PHP CLI and Apache 2 module version.May be you might have an old PHP version like PHP 5.6 in your system and you installed PHP 7.2 too so thats multiple PHP in your machine. There are some applications which were developed when older PHP 5.6 was latest version, they are still live and you working on those applications, You might be working on Laravel simultaneously but Laravel requires PHP 7+ to get started. Getting the picture ?In that case you can switch between the PHP versions to suit your requirements.Switch From PHP 5.6 => PHP 7.2Apache:-Command Line:-And vice-versa, Switch From PHP 7.2 => PHP 5.6Apache:-Command Line:-Source: How do I install PHP in my computerFrom PHP 5.6 => PHP 7.1for old linux versionsfor more recent versionplease follow the steps : You can use the below script to switch between PHP version easily

I have included phpize configuration too.https://github.com/anilkumararumulla/switch-php-versionDownload the script file and runWhen installing laravel on Ubuntu 18.04, be default PHP 7.3.0RC3 install selected, but laravel and symfony will not install properly complaining about missin php-xml and php-zip, even though they are installed. You need to switch to php 7.1, using the instructions above or,now, running laravel new blog, will proceed correctlyI made a bash script to switch between different PHP versions on Ubuntu.Hope it helps someone.Here's the script:

(save it in /usr/local/bin/sphp.sh, don't forget to add +x flag with command: sudo chmod +x /usr/local/bin/sphp.sh)

How to check if an integer is within a range of numbers in PHP?

Richard Peers

[How to check if an integer is within a range of numbers in PHP?](https://stackoverflow.com/questions/4684023/how-to-check-if-an-integer-is-within-a-range-of-numbers-in-php)

How can I check if a given number is within a range of numbers?

2011-01-13 18:55:35Z

How can I check if a given number is within a range of numbers?The expression:will be true if $value is between $min and $max, inclusivelySee the PHP docs for more on comparison operatorsYou can use filter_varThis will also allow you to specify whether you want to allow octal and hex notation of integers. Note that the function is type-safe. 5.5 is not an integer but a float and will not validate.Detailed tutorial about filtering data with PHP:Might help:http://php.net/manual/en/function.range.phpYou could whip up a little helper function to do this:And you would use it like so:You may want to adjust the comparison operators if you want the boundary values not to be valid.You can try the following one-statement:or:using a switch caseAnother way to do this with simple if/else range. For ex:Actually this is what is use to cast a value which is out of the range to the closest end of it.I created a function to check if times in an array overlap somehow:Here is my little contribution:

Assigning the return value of new by reference is deprecated

José M. Gilgado

[Assigning the return value of new by reference is deprecated](https://stackoverflow.com/questions/1086539/assigning-the-return-value-of-new-by-reference-is-deprecated)

I've just got an error.When I try to assign an object like this: The error I get is "Assigning the return value of new by reference is deprecated". Actually I've been looking for a solution but the only one I've seen is just turn down the politicy of php.ini (error_reporting). I've tried it too, but it didn't work. It's so confusing..I hope you could help me. Thanks in advance.

2009-07-06 11:35:24Z

I've just got an error.When I try to assign an object like this: The error I get is "Assigning the return value of new by reference is deprecated". Actually I've been looking for a solution but the only one I've seen is just turn down the politicy of php.ini (error_reporting). I've tried it too, but it didn't work. It's so confusing..I hope you could help me. Thanks in advance.In PHP5 this idiom is deprecatedYou sure you've not missed an ampersand in your sample code? That would generate the warning you state, but it is not required and can be removed.To see why this idiom was used in PHP4, see this manual page (note that PHP4 is long dead and this link is to an archived version of the relevant page)I recently moved a site using SimplePie (http://simplepie.org/) from a server that was using PHP 5.2.17 to one that is using PHP 5.3.2. It was after this move that I began receiving  a list of error messages such as this one:After reviewing several discussions of this issue, I cleared things up by replacing all the instances of =& new with = new in the simplepie.inc file.I'm not experienced enough to know if this will work in all instances where these error messages are received but it worked in this particular case and it may be worth trying.Perhaps the constructor of MDB2 has some code that uses a $variable =& new ClassName();Nitin is correct - the issue is actually in the MDB2 code.According to Replacement for PEAR: MDB2 on PHP 5.3 you can update to the SVN version of MDB2 for a version which is PHP5.3 compatible.As that answer was given in March 2010, and http://pear.php.net/package/MDB2/ shows a release some months later, I expect the current version of MDB2 will solve the issue also.I had the same problem. I already had the '&' and still it was giving the same warning.

I'm using PHP 5.3 with WAMP and all i did was REMOVE '&' sign and the warning was gone.& is used in PHP to pass an object to a method / assign a new object to a variable by reference. It is deprecated in PHP 5 because PHP 5 passes all objects by reference by default.just remove new in the $obj_md =& new MDB2();It happened because of PHP 5.3 , which comes in WAMP 2.0i package and not Joomla.You have two choices to fix it,either use WAMP 2h (previous version)  or download PHP 5.2.9-2 addon from WAMP website.Upgrade your pear/MDB2 from console:Problem solved at version 2.5.0b3

How to call super in PHP?

openfrog

[How to call super in PHP?](https://stackoverflow.com/questions/1961907/how-to-call-super-in-php)

I have a classB which extends classA. In classB I define a method fooBar() which is also defined in classA. In fooBar() of classB I want to call fooBar() of classA at the beginning. Just the way I'm used to, from Objective-C. Is that possible in PHP? And if so, how?

2009-12-25 20:42:55Z

I have a classB which extends classA. In classB I define a method fooBar() which is also defined in classA. In fooBar() of classB I want to call fooBar() of classA at the beginning. Just the way I'm used to, from Objective-C. Is that possible in PHP? And if so, how?Straight from the manual:Just a quick note because this doesn't come up as easy on Google searches, and this is well documented in php docs if you can find it. If you have a subclass that needs to call the superclass's constructor, you can call it with:An example would be if the super class has some arguments in it's constructor and it's implementing classes needs to call that:You can find a more motivating example here.

how to configuring a xampp web server for different root directory

vardius

[how to configuring a xampp web server for different root directory](https://stackoverflow.com/questions/18902887/how-to-configuring-a-xampp-web-server-for-different-root-directory)

The web directory is the home of all of your application's public and static files. Including images, stylesheets and JavaScript files. It is also where the front controllers live.So the question is when i install and set up xampp my web directory is:and I want to set it up for:How to do it?

Now when I type in my browser the address: http://localhost/

I enter xampp\htdocs directory

and I want to  type in my browser the address: http://localhost/

and enter xampp\htdocs\myproject\web directory

2013-09-19 19:03:31Z

The web directory is the home of all of your application's public and static files. Including images, stylesheets and JavaScript files. It is also where the front controllers live.So the question is when i install and set up xampp my web directory is:and I want to set it up for:How to do it?

Now when I type in my browser the address: http://localhost/

I enter xampp\htdocs directory

and I want to  type in my browser the address: http://localhost/

and enter xampp\htdocs\myproject\web directoryYou can change Apaches httpd.conf by clicking (in xampp control panel) apache/conf/httpd.conf and adjust the entries for DocumentRoot and the corresponding Directory entry.

Just Ctrl+F for "htdocs" and change the entries to your new path.In case, if anyone prefers a simpler solution, especially on Linux (e.g. Ubuntu), a very easy way out is to create a symbolic link to the intended folder in the htdocs folder. For example, if I want to be able to serve files from a folder called "/home/some/projects/testserver/" and my htdocs is located in "/opt/lampp/htdocs/". Just create a symbolic link like so: The command for symbolic link works like so: 

     ln -s target source

where,For more help see ln --help 

Source: Create Symbolic Links in UbuntuAnd that's done. just visit http://localhost/testserver/

In fact, you don't even need to restart your server.ok guys you are not going to believe me how easy it is, so i putted a video on YouTube to show you that [ click here ]now , 

steps :DocumentRoot "C:/xampp/htdocs"

<Directory "C:/xampp/htdocs">those 2 lines  || C:/xampp/htdocs == current location for root || change C:/xampp/htdocs with any location you wantI moved my htdocs folder from C:\xampp\htdocs to D:\htdocs without editing the Apache config file (httpd.conf). Step 1) Move C:\xampp\htdocs folder to D:\htdocs

Step 2) Create a symbolic link in C:\xampp\htdocs linked to D:\htdocs using mklink command.Step 3) Done!Write above code inside following tags    < Directory "c:\projects" > < / Directory >

c:(you can add any directory d: e:) is drive where you have created your project folder.Alias /projects "c:\projects"Now you can access the pr0jects directory on your browser :localhost/projects/If you are running xampp on linux based image, to change root directory open:Change default document root: 

    DocumentRoot "/opt/lampp/htdocs" and <Directory "/opt/lampp/htdocs"to your folder DocumentRoot "/opt/lampp/htdocs/myFolder" and <Directory "/opt/lampp/htdocs/myFolder">You can also put in a new virtual Host entry in the like:You can change the port while you open your XAMP control panel, follow the steps:Once done that, you will be able to start your local server.

How to increment letters like numbers in PHP?

Abs

[How to increment letters like numbers in PHP?](https://stackoverflow.com/questions/3567180/how-to-increment-letters-like-numbers-in-php)

I would like to write a function that takes in 3 characters and increments it and returns the newly incremented characters as a string.I know how to increase a single letter to the next one but how would I know when to increase the second letters and then stop and then increase the first letter again to have a sequential  increase?I would appreciate help with the logic and what php functions will be useful to use.Even better, has some done this already or there is a class available to do this??Thanks all for any help

2010-08-25 14:55:14Z

I would like to write a function that takes in 3 characters and increments it and returns the newly incremented characters as a string.I know how to increase a single letter to the next one but how would I know when to increase the second letters and then stop and then increase the first letter again to have a sequential  increase?I would appreciate help with the logic and what php functions will be useful to use.Even better, has some done this already or there is a class available to do this??Thanks all for any helpCharacter/string increment works in PHP (though decrement doesn't)You can do it with the ++ operator.abaHowever this implementation has some strange things:This will print out letters from a to y.This will print out lettes from a to z and it continues with aa and ends with yz.As proposed in PHP RFC: Strict operators directive

 (currently Under Discussion):Whether or not the RFC gets merged, PHP will sooner or later go that direction of adding operator strictness. Therefore, you should not be incrementing strings.If you know your letters will stay in range a-z/A-Z (not surpass z/Z), you can use the solution that converts letter to ASCII code, increments it, and converts back to letter.Use ord() a chr():As discovered in comments, be careful. This iterates ASCII table so from Z (ASCII 90), it does not go to AA, but to [ (ASCII 91).If you dare to go further and want z became aa, this is what I came up with:I'm giving you also 100% coverage if you intend to work with it further. It tests against original string incrementation ++:To increment or decrement in the 7bits 128 chars ASCII range, the safest:So, it is normal to get a backtick by decrementing a, as the ascii spec listPrint the whole ascii range:More infos about ANSI 7 bits ASCII: man asciiTo increment or decrement in the 8-bits extended 256 chars UTF-8 range. This is where it starts to differ regarding the host machine charset. but those charsets are all available on modern machines. From php, the safest is to use the php-mbstring extension: https://www.php.net/manual/en/function.mb-chr.phpMore info, as example: man iso_8859-9Example, we can find the € symbol in ISO 8859-7:To increment or decrement in the 16 bits UTF-16 Unicode range:Here is a way to generate the whole unicode charset, by generating html entities and converting to utf8. Run it onlineSame stuff, but the range goes up to (16^4 * 4)!To retrieve the unicode € symbol,using the base10 decimal representation of the character. The same symbol, using the base16 hexadecimal representation:First 32 bits are reserved for special control characters, output garbage �����, but have a meaning. You are looking at a number representation problem. This is base24 (or however many numbers your alphabet has). Lets call the base b.Assign a number to each letter in alphabet (A=1, B=2, C=3).Next, figure out your input "number": The representation "ABC" means A*b^2 + B*b^1 + C*b^0

Use this formula to find the number (int). Increment it.Next, convert it back to your number system: Divide by b^2 to get third digit, the remainder (modulo) by b^1 for second digit, the remainder (modulo) by `b^0^ for last digit.This might help: How to convert from base10 to any other base.I have these methods in c# that you could probably convert to php and modify to suit your needs, I'm not sure Hexavigesimal is the exact name for these though...I see by the other answers that in PHP you can use ++ instead, nice!You could use the ASCII codes for alpha numerics. From there you increment and decrement to get the previous/next character.You could split your string in single characters and then apply the transformations on these characters.Just some thoughts to get you started.

Retrieving the name of the current function in PHP [duplicate]

Cian E

[Retrieving the name of the current function in PHP [duplicate]](https://stackoverflow.com/questions/2115913/retrieving-the-name-of-the-current-function-in-php)

Is there a function that can return the name of the current function a program is executing?

2010-01-22 08:21:10Z

Is there a function that can return the name of the current function a program is executing?Yes, you can get the function's name with the magic constant __FUNCTION__Maybe via debug_backtrace http://www.php.net/manual/en/function.debug-backtrace.php

Are abstract class constructors not implicitly called when a derived class is instantiated?

scottm

[Are abstract class constructors not implicitly called when a derived class is instantiated?](https://stackoverflow.com/questions/2321009/are-abstract-class-constructors-not-implicitly-called-when-a-derived-class-is-in)

Take this example:Coming from a C# background, I expect the output to be However, the actual output is just

2010-02-23 19:21:20Z

Take this example:Coming from a C# background, I expect the output to be However, the actual output is justNo, the constructor of the parent class is not called if the child class defines a constructor.From the constructor of your child class, you have to call the constructor of the parent's class :Passing it parameters, if needed.Generally, you'll do so at the beginning of the constructor of the child class, before any specific code ; which means, in your case, you'd have :

And, for reference, you can take a look at this page of the PHP manual : Constructors and Destructors -- it states (quoting) :Well, I just found this in the docs:If you need the same behaviour as C#, that is the parent constructor gets always executed before child constructor, you could create a fake constructor class for your child classes and declare it as an abstract function in your abstract parent class.E.g.

php variable in html no other way than: <?php echo $var; ?>

matthy

[php variable in html no other way than: <?php echo $var; ?>](https://stackoverflow.com/questions/2150238/php-variable-in-html-no-other-way-than-php-echo-var)

I work a lot in mixed HTML and PHP and most time I just want solid HTML with a few PHP variables in it so my code look like this:Which is quite ugly. Isn't there something shorter, more like the following?This is possible to but you get stuck with the "" (you have to replace them all with '') and the layout is goneIs there anything better?

2010-01-27 21:06:10Z

I work a lot in mixed HTML and PHP and most time I just want solid HTML with a few PHP variables in it so my code look like this:Which is quite ugly. Isn't there something shorter, more like the following?This is possible to but you get stuck with the "" (you have to replace them all with '') and the layout is goneIs there anything better?There's the short tag version of your code, which is now completely acceptable to use despite antiquated recommendations otherwise:which (prior to PHP 5.4) requires short tags be enabled in your php configuration.  It functions exactly as the code you typed; these lines are literally identical in their internal implementation:That's about it for built-in solutions.  There are plenty of 3rd party template libraries that make it easier to embed data in your output, smarty is a good place to start.Use the HEREDOC syntax. You can mix single and double quotes, variables and even function calls with unaltered / unescaped html markup.I really think you should adopt Smarty template engine as a standard php lib for your projects.http://www.smarty.net/There are plenty of templating systems that offer more compact syntax for your views. Smarty is venerable and popular. This article lists 10 others.I'd advise against using shorttags, see Are PHP short tags acceptable to use? for more information on why.Personally I don't mind mixing HTML and PHP like soAs long as I have a code-editor with good syntax highlighting, I think this is pretty readable.

If you start echoing HTML with PHP then you lose all the advantages of syntax highlighting your HTML.

Another disadvantage of echoing HTML is the stuff with the quotes, the following is a lot less readable IMHO.The biggest advantage for me with simple echoing and simple looping in PHP and doing the rest in HTML is that indentation is consistent, which in the end improves readability/scannability. In a php section before the HTML section, use sprinf() to create a constant string from the variables:Then in the HTML section you can do whatever you  like, such as:

execute a string of PHP code on the command line

Matthew J Morrison

[execute a string of PHP code on the command line](https://stackoverflow.com/questions/2954540/execute-a-string-of-php-code-on-the-command-line)

I'd like to be able to run a line of PHP code on the command line similar to how the following options work:I'd like to be able to do:I've read that there is a -r option that can do what I need for php, however it doesn't appear to be available when I try to use it.  I've tried using PHP 5.2.13 and PHP 4.4.9 and neither have an -r option available.I wrote this script (that I called run_php.php) - which works, but I'm not a huge fan of it just because I feel like there should be a more "correct" way to do it.My question is: is there a -r option?  If so, why is it not available when I run --help?  If there is no -r option, what is the best way to do this (without writing an intermediary script if possible)?Thanks!=== EDIT ===Because I don't think it was very clear above, the -r option is NOT available to me.  Here is the php -h output for both versions of PHP that I'm running.PHP 4.4.9php 5.2.13There is NO -r option. When I try to use the -r option I get:Sorry for the confusion.

2010-06-02 01:56:52Z

I'd like to be able to run a line of PHP code on the command line similar to how the following options work:I'd like to be able to do:I've read that there is a -r option that can do what I need for php, however it doesn't appear to be available when I try to use it.  I've tried using PHP 5.2.13 and PHP 4.4.9 and neither have an -r option available.I wrote this script (that I called run_php.php) - which works, but I'm not a huge fan of it just because I feel like there should be a more "correct" way to do it.My question is: is there a -r option?  If so, why is it not available when I run --help?  If there is no -r option, what is the best way to do this (without writing an intermediary script if possible)?Thanks!=== EDIT ===Because I don't think it was very clear above, the -r option is NOT available to me.  Here is the php -h output for both versions of PHP that I'm running.PHP 4.4.9php 5.2.13There is NO -r option. When I try to use the -r option I get:Sorry for the confusion.EDIT2: Yep, it's there in PHP 5.2's cli SAPI.EDIT: If you cannot upgrade and that's the case that there's no such option in PHP 5.2 (I don't have it at hand to test), you can do this:Original:There is indeed a -r option (though I'm not sure about PHP 5.2):Just make sure you are using the command line version of PHP. php --version should give you something like this (notice "cli"):In new versions of PHP you just type "php -a" and you hop into an interactive mode, where you can experiment with PHP.Extra Semi colon is not required in the end.You can mention php -r "echo 'hi';" instead of php -r "echo 'hi';";Another example(To get current timestamp at command line):The easiest way to do it is to use the -r flag. However, I've found that it does not allow multiline inputs. To work around that, you can do this:Which lets you pipe from stdin, like so:However, to answer the original question, if you do not have the -r flag available, it is also possible to use the -f flag - just pass stdin as the file to open: php -f /dev/stdinIf you do this, be aware that a) you need to include a blank space at the start of the input, and b) you have to open with <?php. Example:Take a look at this page on PHP command line features, if you haven't already. There are some posts on issues based on OS and double or single quotes.I would also check the PHP informationto see if PHP was compiled with CLI support disabled (--disable-cli).

Strict mode in PHP?

jantimon

[Strict mode in PHP?](https://stackoverflow.com/questions/3193072/strict-mode-in-php)

Other languages with automatic variable declaration - like Perl - have a strict mode.By activating this strict mode, variable declaration is required, and Perl throws an error as soon as you try to use an undeclared variable.Does PHP offer any similar feature?

2010-07-07 08:27:19Z

Other languages with automatic variable declaration - like Perl - have a strict mode.By activating this strict mode, variable declaration is required, and Perl throws an error as soon as you try to use an undeclared variable.Does PHP offer any similar feature?Kind of. You can activate the E_NOTICE level in your error reporting. (List of constants here.)Every instance of usage of an undeclared variable will throw an E_NOTICE.The E_STRICT error level will also throw those notices, as well as other hints on how to optimize your code.Terminating the script If you are really serious, and want your script to terminate instead of just outputting a notice when encountering an undeclared variable, you could build a custom error handler. A working example that handles only E_NOTICEs with "Undefined variable" in them and passes everything else on to the default PHP error handler:Useto show every possible error, including E_STRICT and even when new levels and constants are added in future PHP versions. (Reference)After some years, php 7.0.0 has gained declare(strict_types=1);http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration.strictYes, type error_reporting(E_STRICT|E_ALL); in the beginning of your script.You may check error_reporting, and don't forget to set display_errors as well. 

Note, that there are multiple levels of error reporting. Useat the beginning of your PHP code.

Or set the error_reporting setting in your php.ini file, to set it for all PHP filesPHP is warning about undeclared variables by default, you just need to turn the error reporting level up so you'll see the notices. Note though that since there's no special syntax to declare a variable in PHP and you simply declare one by assigning to it, it can only warn you when you try to use the value of an undeclared variable. Contrary to other languages, "assignments to undeclared variables" do not exist, so PHP can't warn you there.You can implement your own error handling function with set_error_handler().Then you can react to certain error levels as you wish.For example, instead of just showing and logging an error message, you could terminate the script if a variable is not declared properly or if any condition is met that you don't like.That way you can enforce a very strict policy for any code that runs on your PHP interpreter instance.Yes, you do that with error reporting.http://www.php.net/manual/en/function.error-reporting.phpI would suggest that the requirements for reporting and handling errors differ within your development environment and your live production environment (WWW, company Intranet, etc). During development you will want to see as much detail as possible to find and fix problems.  In the live environment, I think don't that you want to show PHP error messages to the users but rather allow the script to continue with reduced functionality (eg. a message like "Sorry we cannot update your profile at the moment", or redirect the user to the home page, etc). A way to achieve this would be through the use to custom error handlers for each environmentA 2019 response to this old question,Yes you can from PHP 7.X onwards,This will enforce all the scalar type declarations to be strict with types.But if you enable this globally it can affect other 3rd party modules (Eg - Composer libraries) which are relying in weak mode, so make sure to enforce it in relevant classes/files.

ReCaptcha 2.0: enable Submit button on callback if recaptcha successful

thanks_in_advance

[ReCaptcha 2.0: enable Submit button on callback if recaptcha successful](https://stackoverflow.com/questions/30018213/recaptcha-2-0-enable-submit-button-on-callback-if-recaptcha-successful)

I have a very simple form as follows. I want to make it so that the Submit button is disabled, and only enabled after the user has successfully completed the ReCaptcha.I'm assuming I'm going to need some Javascript / jQuery to do this.Google's documentation on ReCaptcha 2.0 seems really sparse and dense (to me, anyway). I'd appreciate some pointers:

2015-05-03 19:12:28Z

I have a very simple form as follows. I want to make it so that the Submit button is disabled, and only enabled after the user has successfully completed the ReCaptcha.I'm assuming I'm going to need some Javascript / jQuery to do this.Google's documentation on ReCaptcha 2.0 seems really sparse and dense (to me, anyway). I'd appreciate some pointers:i did the same thing on my test site. however, i used a button instead of submit, so here:you must add the property data-callback="enableBtn" data-callback property executes the function specified after accomplishment of recaptcha.and set the id of the button to whatever id you want to and set it to disabled:then on javascript make a function to enable the button hope it helps.

When to use Try Catch blocks

Shoe

[When to use Try Catch blocks](https://stackoverflow.com/questions/5199146/when-to-use-try-catch-blocks)

Ok, this might be a very noob question, but I find that PHP Documentation on that and several Internet Searches hasn't give me any idea about that.I read someone saying that we should use try-catch blocks only to prevent fatal errors.

I read someone else saying that we should use it only on unexpected errors (wait what? unexpected? if they are unexpected errors how could I prevent them with try-catch? should I put all my application code inside a try block?).

Others simply say that try-catch blocks should be used everywhere because they can be also extended (extending the Exception class).

Finally someone says that PHP try-catch block are totally useless because they are very bad implemented. (On this I found a nice SO question about performance).It seems to me that this topic is very strange and confused. Could someone lights me up?

2011-03-04 20:54:56Z

Ok, this might be a very noob question, but I find that PHP Documentation on that and several Internet Searches hasn't give me any idea about that.I read someone saying that we should use try-catch blocks only to prevent fatal errors.

I read someone else saying that we should use it only on unexpected errors (wait what? unexpected? if they are unexpected errors how could I prevent them with try-catch? should I put all my application code inside a try block?).

Others simply say that try-catch blocks should be used everywhere because they can be also extended (extending the Exception class).

Finally someone says that PHP try-catch block are totally useless because they are very bad implemented. (On this I found a nice SO question about performance).It seems to me that this topic is very strange and confused. Could someone lights me up?Definitely.  I'm not a PHP user, but I might have a little insight after having worked with try/catch in ActionScript, Java, and JavaScript.  Bear in mind though, that different languages and platforms encourage different uses for try/catch.  That said...The only times I'd recommend using try/catch is if you're using a native language function that Let's take the examples you list and see how they square with that list.In the case of AS's loader.close() function, this is good advice.  That's a fatal error, and all from an otherwise trivial misstep.  On the other hand, virtually ALL errors in AS will bring your application to a halt.  Would you then wrap them all in try/catch?  Absolutely not!  A "fatal error" is fatal for a reason.  It means something terribly wrong has happened and for the application to continue on in a potentially "undefined" state is foolhardy.  It's better to know an error happened and then fix it rather than just let it go.That's even worse.  Those are presicely the errors you DON'T want to silence, because silencing them means that you're never going to find them.  Maybe you're not swallowing them, though... maybe you're logging them.  But why would you try/catch/log/continue as though nothing happened, allowing the program to run in a potentially dangerous and unexpected condition?  Just let the error kick you in the teeth and then fix it.  There's little more frustrating than trying to debug something that's wrong in a program that someone else wrote because they wrapped everything in a try/catch block and then neglected to log.  There's potential merit to this if you're the one doing the throwing, and you're trying to alert yourself to an exceptional situation in your program... but why try/catch your own thrown error?  Let it kick you in the teeth, then fix it so that you don't need to throw the error anymore.Maybe so.  I can't answer this one though.So... this might be a bit of a religious question, and I'm certain people will disagree with me, but from my particular vantage point those are the lessons I've learned over the years about try/catch.Different people will tell you different things. But this is what I think, specifically in the case of a web application.Your whole page should be in a try/catch that displays an error message to the user. The error message shouldn't tell the user what happened in detail because thats a security concern. It should record information about the error into a log file.The other case is where something could go wrong in the normal operation of affairs. PHP is not very exception happy so this may not happen very much. Basically, if you run into a function that throws an exception when it fails, you can catch the exception and do something else in that case.In general, your question is like asking how you would use a hammer to improve the qualify of a house. Use exceptions to help you implement particular behaviors. Don't look for places to use exceptions.I think it's simply a matter of preferences, but from my experiences, I'd encourage you to use them as much as possible.In application we currently develop at work (using Zend Framework if it matters), we use one single try..catch block to catch all exceptions throughout the application which are shown to user as, for example, error 500s and exception is logged with more information to database. I, personally, love this approach in case of PHP application as exceptions are extendable and you can basically write whatever functionality you need.I predominantly use Try/Catch around database calls...especially inputs, updates and deletes etc.I sometimes use it around complex data processing with arrays and loops using dynamic data and arrays where there is a chance something might go wrong, ie: missing array elements or something (I normally check for stuff like that though).I also use them around operations over which I don't have complete control such as importing data from an external or foreign data source where there could be problems with the data or accessing the source file.I think what is meant by "Unexpected Errors" is where you can't prevent problems through good programming practices such as checking if a file exists before "including" it,  Some problems you CAN anticipate so use good practices to prevent them.  Don't just leave them to chance by wrapping them in a try/catch. Use good programming practices instead as you should do everywhere.  Don't use try/catch as a lazy shortcut for everything, everywhere.  That's major overkill.I agree with @scriptocalypse. In fact I only use try/catch blocks in PHP in 2 kind of situations.You cant put try catch blocks everywhere. However during application testing, exceptions generated should alert you to places where you need try catches. This is one reason why you should run thorough testing of you application/code. If you see a place where you think you need it, i would put one in.EDIT: ok you CAN put them everywhere, but you need some sense as to where to put them in your code.I normally put Try and Catch around areas in the code that have external forces acting on it that I have no control over. For example, Opening and reading external files.. you have no control that at some point in the reading of the file, the file becomes corrupted or something else happens that you can not control like the file server dc's or something

PHP image upload security check list

usef_ksa

[PHP image upload security check list](https://stackoverflow.com/questions/4166762/php-image-upload-security-check-list)

I am programming a script to upload images  to my application. Are the following security steps  enough to make the application safe from the script side?This is my script:Any new tips are welcome :)

2010-11-12 16:24:39Z

I am programming a script to upload images  to my application. Are the following security steps  enough to make the application safe from the script side?This is my script:Any new tips are welcome :)Re-process the image using GD (or Imagick) and save the processed image. All others are just fun boring for hackers.Edit: And as rr pointed out, use move_uploaded_file() for any upload.Late Edit: By the way, you'd want to be very restrictive about your upload folder. Those places are one of the dark corners where many exploits happen. This is valid for any type of upload and any programming language/server. Check https://www.owasp.org/index.php/Unrestricted_File_UploadFor security test of the image files, I can think of 4 level of securities. They would be:Note: Loading entire image would be slow. One more very important remark. Do not serve/upload anything that could be interpreted as HTML in the browser.Since the files are on your domain, javascript contained in that HTML document will have access to all your cookies, enabling some sort of XSS attack.Make uploaded content available only on the subdomain or on the another domain. This way cookies are not going to be accessible. This is also one of the google's performance tips:https://developers.google.com/speed/docs/best-practices/request#ServeFromCookielessDomainYou might want to run "is_uploaded_file" on the $_FILES['my_files']['tmp_name'] as well. See http://php.net/manual/en/function.is-uploaded-file.phpCreate a new .htaccess file in the uploads dir and paste this code:Just be sure to rename the files u upload + forget about checking types, contents etcI will repeat something I posted in related question.You may detect content type using Fileinfo functions (mime_content_type() in previous versions of PHP).An excerpt form PHP manual on older Mimetype extension, which is now replaced by Fileinfo:getimagesize() may also do a good job, but most of the other checks you are performing are nonsense. For example why string php is not allowed in filename. You are not going to include image file within PHP script, just because its name contains php string, are you?When it comes to re-creating images, in most cases it will improve security... until library you use is not vulnerable.So which PHP extension suits best for secure image re-creation? I've checked CVE details website. I think the applicable trio are those extensions:From the comparison I think GD suits best, because it has smallest number of security issues and they are quite old. Three of them are critical, but ImagMagick and Gmagick do not perform any better... ImageMagick seems to be very buggy (at least when it comes to security), so I choose Gmagick as the second option.if security is very important use database for save file name and renamed file name and here you can change extension of file to somthing like .myfile and make a php file for send image with headers . php can be more secure and you can use it in the img tag like blow :  also check file extension with EXIF before upload. The simplest answer to allow users to securely upload files in PHP is: Always save files outside of your document root.For example: If your document root is /home/example/public_html, save files to /home/example/uploaded.With your files safely out of the confines of being directly executed by your web server, there are a couple of ways you can still make them accessible to your visitors:However, if you go with options 1 or 3 on this list and you have a local file inclusion vulnerability in your application, your file upload form can still be an attack vector.The best way to keep your website secure when user upload image is to do this steps :For an image file, you could also change file permission after renaming to be sure it never executes (rw-r--r--)I'm using a php-upload-script that creates a new random 4-byte-number for each uploaded file, then XORs the content of the file with these 4 bytes (repeating them as often as necessary), and finally attaches the 4 bytes to the file before saving it.For downloading, the 4 bytes have to be cut off of the file again, the contents will be XORed with them again and the result is sent to the client.This way, I can be sure that the files I save on the server will not be executable or have any potential meaning whatsoever for any application. Plus I don't need any extra database to store filenames in.Here is the code I'm using for this:Upload:Download:I looked yesterday for best secure solution and it seems using extra app as GD is the one of them - but if somebody has lack of money for good server it may cause huge delay in server response. However i come up with some trick but possible only with one scenario if you do not have gallery or some image preview and you only giving an option to download uploaded file. So the thing to : 1st. change name on the fly and after it zip the file and then delete sorurce file - so there would bo no chance anybody can cause execution of the hidden code - offcours this solution is secure for server only - cause user which download the file my open some infected one etc -but in my case its not the problem.br

How to install php-curl in Ubuntu 16.04

Govind Samrow

[How to install php-curl in Ubuntu 16.04](https://stackoverflow.com/questions/38800606/how-to-install-php-curl-in-ubuntu-16-04)

Upgraded to Ubuntu 16.04 and facing problem after installing PHP5.Installed PHP-5 with following:Trying to install php-curl but its not working.

2016-08-06 04:41:32Z

Upgraded to Ubuntu 16.04 and facing problem after installing PHP5.Installed PHP-5 with following:Trying to install php-curl but its not working.In Ubuntu 16.04 default PHP version is 7.0, if you want to use different version then you need to install PHP package according to PHP version:This worked for me.This works for me:Do:And then:To Install cURL 7.49.0 on Ubuntu 16.04 and DerivativesFor Ubuntu 18.04 or PHP 7.2 users you can do:apt-get install php7.2-curlYou can check your PHP version by running php -v to verify your PHP version and get the right curl version.and restart the web browser. You can check the modules by running php -m | grep curl

Changing the sign of a number in PHP?

dotty

[Changing the sign of a number in PHP?](https://stackoverflow.com/questions/1438111/changing-the-sign-of-a-number-in-php)

I have a few floats:How can I change all these to negative floats so they become:Also I need a way to do the reverseIf the float is a negative, make it a positive.

2009-09-17 10:57:58Z

I have a few floats:How can I change all these to negative floats so they become:Also I need a way to do the reverseIf the float is a negative, make it a positive.A trivialor, the better solution, IMHO:As @VegardLarsen has posted,I suggest to avoid if/else (or equivalent ternary operator) especially if you have to manipulate a number of items (in a loop or using a lambda function), as it will affect performance.In order to change the sign of a number you can simply do:or, multiply it by -1, of course :)How about something trivial like:re the edit: "Also i need a way to do the reverse If the float is a negative, make it a positive"changes the number to its opposite.I think Gumbo's answer is just fine. Some people prefer this fancy expression that does the same thing:EDIT: Apparently you are looking for a function that will make negatives positive as well. I think these answers are the simplest:using alberT and Dan Tao solution:negative to positive and viceversa

If null use other variable in one line in PHP

rochal

[If null use other variable in one line in PHP](https://stackoverflow.com/questions/4998178/if-null-use-other-variable-in-one-line-in-php)

Is there in PHP something similar to JavaScript's:So, when test is undefined or null we'll see Hello, otherwise - we'll see the value of test.I tried similar syntax in PHP but it doesn't seem to be working right... Also I've got no idea how to google this problem..thanksEditI should probably add that I wanted to use it inside an array:But indeed, I can use the inline '? :' if statement here as well, thanks.

2011-02-14 22:45:56Z

Is there in PHP something similar to JavaScript's:So, when test is undefined or null we'll see Hello, otherwise - we'll see the value of test.I tried similar syntax in PHP but it doesn't seem to be working right... Also I've got no idea how to google this problem..thanksEditI should probably add that I wanted to use it inside an array:But indeed, I can use the inline '? :' if statement here as well, thanks.See @Yamiko's answer below for a PHP7 solution https://stackoverflow.com/a/29217577/140413Or you can be a little more robust and do thisyou can do echo $test ?: 'hello';This will echo $test if it is true and 'hello' otherwise.Note it will throw a notice or strict error if $test is not set but...This shouldn't be a problem since most servers are set to ignore these errors. Most frameworks have code that triggers these errors.Edit:  This is a classic Ternary Operator, but with the middle part left out. Available since PHP 5.3. This only checks for the truthiness of the first variable and not if it is undefined, in which case it triggers the E_NOTICE error. For the latter, check the PHP7 answer below (soon hopefully above).From PHP 7 onwards you can use something called a coalesce operator which does exactly what you want without the E_NOTICE that ?: triggers.To use it you use ?? which will check if the value on the left is set and not null.I'm very surprised this isn't suggested in the other answers:From the docs isset($var) will return false if $var doesn't exist or is set to null.The null coalesce operator from PHP 7 onwards, described by @Yamiko, is a syntax shortcut for the above.In this case:One-liner. Super readable, works for regular variables, arrays and objects.See it in action: Php Sandbox DemoIf you want to create an array this way, array_map provides a more concise way to do this (depending on the number of elements in the array):Just make sure you know which elements evaluate to false so you can apply the right test.There may be a better way, but this is the first thing that came to my mind:Null is false in PHP, therefore you can use ternary:Edit:This also holds for an empty string, since ternary uses the '===' equality rather than '=='And empty or null string is false whether using the '===' or '==' operator. I really should test my answers first.Well, expanding that notation you supplied means you come up with:So it's just a simple if...else construct. In PHP, you can shorten simple if...else constructs as something called a 'ternary expression':Obviously there is no equivalent to the JS alert function in PHP, but the construct is the same.I recently had the very same problem.This is how i solved it:Your value in the database is in variable $test..so if $test row is empty then echo Not Provided

How can I check if an array contains a specific value in php?

hairynuggets

[How can I check if an array contains a specific value in php?](https://stackoverflow.com/questions/8881676/how-can-i-check-if-an-array-contains-a-specific-value-in-php)

I have a PHP variable of type Array and I would like find out if it contains a specific value and let the user know that it is there. This is my array:and I would like do something like:What is the best way to do the above?

2012-01-16 14:52:04Z

I have a PHP variable of type Array and I would like find out if it contains a specific value and let the user know that it is there. This is my array:and I would like do something like:What is the best way to do the above?Use the in_array() function.See in_arrayYou need to use a search algorithm on your array. It depends on how large is your array, you have plenty of choices on what to use. Or you can use on of the built in functions:http://www.w3schools.com/php/php_ref_array.asphttp://php.net/manual/en/function.array-search.phpFrom http://php.net/manual/en/function.in-array.phpbool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] )Searches haystack for needle using loose comparison unless strict is set. Using dynamic variable for search in arrayFollowing is how you can do this:Make sure that you search for kitchen and not Kitchen. This function is case sensitive. So, the below function simply won't work:If you rather want a quick way to make this search case insensitive, have a look at the proposed solution in this reply: https://stackoverflow.com/a/30555568/8661779Source: http://dwellupper.io/post/50/understanding-php-in-array-function-with-examples

Get custom product attributes in Woocommerce

Nick

[Get custom product attributes in Woocommerce](https://stackoverflow.com/questions/13374883/get-custom-product-attributes-in-woocommerce)

In Woocommerce, I am trying to get product custom attribute values but I fail miserably and I don't get anything.So I tried: And I'm getting this raw data:I know that there is a value because it is shown in the attribute section, but I just can't find a way to get it displayed with my custom code.

2012-11-14 07:55:14Z

In Woocommerce, I am trying to get product custom attribute values but I fail miserably and I don't get anything.So I tried: And I'm getting this raw data:I know that there is a value because it is shown in the attribute section, but I just can't find a way to get it displayed with my custom code.Go with the following as @datafeedr wrote in his answer:or even more compact:Original answer:You can get the single value for the attribute with below code:Update for 2018. You can use:To customise the output, copy plugins/woocommerce/templates/single-product/product-attributes.php to themes/theme-child/woocommerce/single-product/product-attributes.php and modify that.woocommerce_get_product_terms() is now deprecated.Use wc_get_product_terms() instead.Example:Most updated:You will need to define $product if it's not on the page.Try this to get an array of attribute name => attribute value(s):It's little inefficient but does the trick.You will get attributes as array in "$formatted_attributes"The answer to "Any idea for getting all attributes at once?" question is just to call function with only product id:key is optional, see http://codex.wordpress.org/Function_Reference/get_post_metaUse below code to get all attributes with details

Dynamic static method call in PHP?

Tom

[Dynamic static method call in PHP?](https://stackoverflow.com/questions/2108795/dynamic-static-method-call-in-php)

Please could someone experienced in PHP help out with the following. Somewhere in my code, I have a call to a public static method inside a non-instantiated class:However, I would like to have many such classes and determine the correct class name on the fly according to the user's language. In other words, I have:... and I need to do something like:I know I could pass the language as a parameter to the function and deal with it inside just one common class but for various reasons, I would prefer a different solution.Does this make any sense, anyone? Thanks.

2010-01-21 11:29:04Z

Please could someone experienced in PHP help out with the following. Somewhere in my code, I have a call to a public static method inside a non-instantiated class:However, I would like to have many such classes and determine the correct class name on the fly according to the user's language. In other words, I have:... and I need to do something like:I know I could pass the language as a parameter to the function and deal with it inside just one common class but for various reasons, I would prefer a different solution.Does this make any sense, anyone? Thanks.Use the call_user_func function:http://php.net/manual/en/function.call-user-func.phpExample:I think you could do:This is called Variable FunctionsI would encapsulate the creation of the class you need in a factory. This way you will have a single entry point when you need to change your base name or the rules for mapping the language to the right class.and then, when you have to use it:As temuri said, parse error is produced, when trying '$className::functionName' :In my case (static method with 2 arguments), best solutions is to use call_user_func_array with 2 arrays (as suggested by nikc.org):BRalthough i think the way you deal is a very bad idea, i think i may have a solutioni think this is what you wantAs far as i could understand your question, you need to get the class name which can be done using get_class function. On the other hand, the Reflection class can help you here which is great when it comes to methods, arguments, etc in OOP way.You can easily do next:And it will works fine, tested on PHP 5.2 >=Solutions like:will not work. PHP will produce parse error.Unfortunately, the only way is to use very slow call_user_func().I know it's an old thread, but as of PHP 5.3.0 you should be using forward_static_callUsing your $language variable, it might look like:

Update Command-line Output, i.e. for Progress

Adam

[Update Command-line Output, i.e. for Progress](https://stackoverflow.com/questions/5265288/update-command-line-output-i-e-for-progress)

I'd like to be able to show a progress meter in a simple PHP script on the command line. Instead of seeing I'd like just the number to change, and replace the previous number, much like git clone does for example Resolving deltas: 100% (8522/8522), done.. While searching for this I found the same question answered in Perl, which is perfect, but I couldn't find it in PHP. Is it possible? If not, I'll resort to C.ThanksUpdate: If anyone's interested in the C++ version, it's here.

2011-03-10 20:07:27Z

I'd like to be able to show a progress meter in a simple PHP script on the command line. Instead of seeing I'd like just the number to change, and replace the previous number, much like git clone does for example Resolving deltas: 100% (8522/8522), done.. While searching for this I found the same question answered in Perl, which is perfect, but I couldn't find it in PHP. Is it possible? If not, I'll resort to C.ThanksUpdate: If anyone's interested in the C++ version, it's here.This can be done using ANSI Escape Sequences -- see here for a list.In PHP, you'll use "\033" when it's indicated ESC on that page.

In your case, you could use something like this :

I simplified a bit, making sure I always have 5 extra characters, and always displaying the same amount of data, to always move backwards by the same number of chars...But, of course, you should be able to do much more complicated, if needed ;-)And there are many other interesting escape sequences : colors, for instance, can enhance your output quite a bit ;-)Just for the record though an old thread:

Instead of using fancy ANSI Escape sequencing to move the curser back I just move it back to the beginning of the line using "\r" instead of to the beginning of the next line "\n". Add a few spaces after your echo to overwrite anything that was there previously, like e.g. so:

PHP - use array as class constant [duplicate]

Martin

[PHP - use array as class constant [duplicate]](https://stackoverflow.com/questions/11184469/php-use-array-as-class-constant)

Is it possible to use an array as a class constant in PHP?I.e If not why?

2012-06-25 06:37:55Z

Is it possible to use an array as a class constant in PHP?I.e If not why?UPDATE:This is now available in PHP 5.6 https://php.net/manual/en/migration56.new-features.phpNo you can't assign an Array to PHP constant.In http://www.php.net/manual/en/language.constants.syntax.phpThis is the reason.Scalar values for examples are int, float, stringNo, you can't.But you could declare it as a static property.---------------Update-----------------------------Array const is available from PHP 5.6. php.net/manual/en/migration56.new-features.php

Laravel, sync() - how to sync an array and also pass additional pivot fields?

Томица Кораћ

[Laravel, sync() - how to sync an array and also pass additional pivot fields?](https://stackoverflow.com/questions/27230672/laravel-sync-how-to-sync-an-array-and-also-pass-additional-pivot-fields)

Official Laravel documentation has this on sync() function:You may also associate other pivot table values with the given IDs:In the latter example only a single pivot row is being added. What I don't understand is how can I associate other pivot table records if there are more than one rows to be synced?Thanks in advance.

2014-12-01 14:35:45Z

Official Laravel documentation has this on sync() function:You may also associate other pivot table values with the given IDs:In the latter example only a single pivot row is being added. What I don't understand is how can I associate other pivot table records if there are more than one rows to be synced?Thanks in advance.In order to sync multiple models along with custom pivot data, you need this:Ie. editAnswering the comment:This works for me  Attaching / DetachingEloquent also provides a few additional helper methods to make working with related models more convenient. For example, let's imagine a user can have many roles and a role can have many users. To attach a role to a user by inserting a record in the intermediate table that joins the models, use the attach method:When attaching a relationship to a model, you may also pass an array of additional data to be inserted into the intermediate table:You can also use Sync if you want to remove old roles and only keep 

the new ones you are attaching nowThe default behaviour can be changed by passing a 'false' as a second 

      argument.

This will attach the roles with ids 1,2,3 without affecting the existing 

    roles.In this mode sync behaves similar to the attach method.Reference: 

https://laravel.com/docs/5.4/eloquent-relationshipsAdd following trait to your project and append it to your model class as a trait. This is helpful, because this adds functionality to use multiple pivots.

Probably someone can clean this up a little and improve on it ;)Model:Usage:Simply just append your fields and their values to the elements:

Creating a folder when I run file_put_contents()

Jake

[Creating a folder when I run file_put_contents()](https://stackoverflow.com/questions/13372179/creating-a-folder-when-i-run-file-put-contents)

I have uploaded a lot of images from the website, and need to organize files in a better way.

Therefore, I decide to create a folder by months.after I tried this one, I get error result.If I tried to put only file in exist folder, it worked. However, it failed to create a new folder. Is there a way to solve this problem?

2012-11-14 02:28:31Z

I have uploaded a lot of images from the website, and need to organize files in a better way.

Therefore, I decide to create a folder by months.after I tried this one, I get error result.If I tried to put only file in exist folder, it worked. However, it failed to create a new folder. Is there a way to solve this problem?file_put_contents() does not create the directory structure. Only the file.You will need to add logic to your script to test if the month directory exists. If not, use mkdir() first.Update: mkdir() accepts a third parameter of $recursive which will create any missing directory structure. Might be useful if you need to create multiple directories.Example with recursive and directory permissions set to 777:modification of above answer to make it a bit more generic, (automatically detects and creates folder from arbitrary filename on system slashes)ps previous answer is awesomei have Been Working on the laravel Project With the Crud Generator and this Method is not Working @aqm so i have created my own functionDon't forget to add at top of the fileuse Illuminate\Support\Facades\File;I wrote a function you might like. It is called forceDir(). It basicaly checks whether the dir you want exists. If so, it does nothing. If not, it will create the directory. A reason to use this function, instead of just mkdir, is that this function can create nexted folders as well.. For example ('upload/promotions/januari/firstHalfOfTheMonth'). Just add the path to the desired dir_path.

php_network_getaddresses: getaddrinfo failed: Name or service not known

Rob

[php_network_getaddresses: getaddrinfo failed: Name or service not known](https://stackoverflow.com/questions/2661546/php-network-getaddresses-getaddrinfo-failed-name-or-service-not-known)

Here is a snippet of my codeWhen I run it, it outputs:I'm using this to submit GET data to the $s['url']I can't figure out why. Any help would be greatly appreciated.

2010-04-18 08:02:38Z

Here is a snippet of my codeWhen I run it, it outputs:I'm using this to submit GET data to the $s['url']I can't figure out why. Any help would be greatly appreciated.If you only want to submit GET data to the URL, you should use something straightforward like file_get_contents();You cannot open a connection directly to a path on a remote host using fsockopen.  The url www.mydomain.net/1/file.php contains a path, when the only valid value for that first parameter is the host, www.mydomain.net.If you are trying to access a remote URL, then file_get_contents() is your best bet.  You can provide a full URL to that function, and it will fetch the content at that location using a normal HTTP request.If you only want to send an HTTP request and ignore the response, you could use fsockopen() and manually send the HTTP request headers, ignoring any response.  It might be easier with cURL though, or just plain old fopen(), which will open the connection but not necessarily read any response.  If you wanted to do it with fsockopen(), it might look something like this:That leaves any error handling up to you of course, but it would mean that you wouldn't waste time reading the response.I had a similar problem on my local testserver and local testdomains e.g.: www.testdomain.loc with the function GetImageSize();Solved it by adding the hostname in the hosts file on the local server:In the file /etc/hosts I added: Hope this helps anyoneHad such a problem (with https://github.com/PHPMailer/PHPMailer), just reload PHP and everything start workedfor Centos 6 and 7:you are trying to open a socket to a file on the remote host which is not correct. you could make a socket connection (TCP/UDP) to a port number on a remote host. so your code should be like this:if you are trying to create a file pointer resource to a remote file, you may use the fopen() function. but to do this, you need to specify the application protocol as well.PHP provides default stream wrappers for URL file opens. based on the schema of the URL the appropriate stream wrapper will be called internally. the URL you are trying to open does not have a valid schema for this solution. make sure there is a schema like "http://" or "ftp://" in it.so the code would be like this:Besides I don't think the HTTP stream wrapper (that handles actions on file resources on URLs with http schema) supports writing of data. you can use fread() to read contents of a the URL through HTTP, but I'm not sure about writing.EDIT:

from comments and other answers I figured out you would want to send a HTTP request to the specified URL.

the methods described in this answer are for when you want to receive data from the remote URL. if you want to send data, you can use http_request() to do this.I was getting the same error of fsocket() and I just updated my hosts fileshope it will solve your problem for any further query please ping me at http://kingologic.comIn my case this error caused by wrong /etc/nsswitch.conf configuration on debian.I've been replaced stringwithand everything works right now.Try to set ENV PATH. Add PHP path in to ENV PATH.In order for this extension to work, there are DLL files that must be available to the Windows system PATH. For information on how to do this, see the FAQ entitled "How do I add my PHP directory to the PATH on Windows". Although copying DLL files from the PHP folder into the Windows system directory also works (because the system directory is by default in the system's PATH), this is not recommended. This extension requires the following files to be in the PATH: libeay32.dll http://php.net/manual/en/openssl.installation.phpin simple word your site has been blocked to access network. may be you have automated some script and it caused your whole website to be blocked. the better way to resolve this is contact that site and tell your issue. if issue is genuine they may consider unblocking

nginx 502 bad gateway

Joel Wickard

[nginx 502 bad gateway](https://stackoverflow.com/questions/4252368/nginx-502-bad-gateway)

I get a 502 Bad Gateway with nginx when using spawn fcgi to spawn php5-cgi.I use this to span an instance on server start using the following line in rc.localpresumably I'm getting the error because the spawn-fcgi / php5-cgi dies and there is nothing listening there anymore to parse php.I get nothing in the logs that I can see anywhere, I'm out of ideas (and new to this setup with nginx)

2010-11-23 03:01:39Z

I get a 502 Bad Gateway with nginx when using spawn fcgi to spawn php5-cgi.I use this to span an instance on server start using the following line in rc.localpresumably I'm getting the error because the spawn-fcgi / php5-cgi dies and there is nothing listening there anymore to parse php.I get nothing in the logs that I can see anywhere, I'm out of ideas (and new to this setup with nginx)I executed my localhost and the page displayed the 502 bad gateway message. This helped me:Maybe it will help you.Source from: http://wildlyinaccurate.com/solving-502-bad-gateway-with-nginx-php-fpmThe 502 error appears because nginx cannot hand off to php5-cgi.  You can try reconfiguring php5-cgi to use unix sockets as opposed to tcp .. then adjust the server config to point to the socket instead of the tcp ... Go to /etc/php5/fpm/pool.d/www.conf and if you are using sockets or this line is uncommented Set couple of other values too:-Don't forget to restart php-fpm and nginx. Make sure you are using the same nginx owner and group name.You have to match the settings for PHP-FPM and Nginx to communicate over sockets or TCP. So go to /etc/php5/fpm/pool.d/www.conf and look for this line:Then go to /etc/nginx/nginx.confLook for this: Match those values and you should be all set. If running a linux server, make sure that your IPTABLES configuration is correct.Execute sudo iptables -L -n , you will recieve a listing of your open ports. If there is not an Iptables Rule to open the port serving the fcgi script you will receive a 502 error. The Iptables Rule which opens the correct port must be listed before any rule which categorically rejects all packets (i.e. a rule of the form "REJECT ALL -- 0.0.0.0/0 0.0.0.0/0 reject-with icmp-port-unreachable or similar)On my configuration, to properly open the port, I had to execute this command (assume my fcgi server is running at port 4567):WARNING: This will open port 4567 to the whole world.So it might be better to do something like this:Doing this removed the 502 error for me.changetoWhen I did sudo /etc/init.d/php-fpm start I got the following error:I guess /etc/php-fpm.d/www.conf needs to know the user that the webserver is running as and assumes it's apache when, for nginx, it's actually nginx, and needs to be changed.You can make nginx ignore client aborts using:I had the same problem while setting up an Ubuntu server. Turns out I was having the problem due to incorrect permissions on socket file.If you are having the problem due to a permission problem, you can uncomment the following lines from: /etc/php5/fpm/pool.d/www.confAlternatively, although I wouldn't recommend, you can give read and write permissions to all groups by using the following command.Try disabling the xcache or apc modules.  Seems to cause a problem with some versions are saving objects to a session variable.Hope this tip will save someone else's life. In my case the problem was that I ran out of memory, but only slightly, was hard to think about it. Wasted 3hrs on that. I recommend running:or...along with running problematic requests on the server to see if your memory doesn't run out. And if it does like in my case, you need to create a swap file (unless you already have one).I have followed this tutorial to create swap file on Ubuntu Server 14.04 and it worked just fine:

http://www.cyberciti.biz/faq/ubuntu-linux-create-add-swap-file/If you're on Ubuntu, and all of the above has failed you, AppArmor is most likely to blame. Here is a good guide how to fix it: https://www.digitalocean.com/community/tutorials/how-to-create-an-apparmor-profile-for-nginx-on-ubuntu-14-04Long story short: Or See everything working nicely... thenI still had problems with Nginx not being able to read error.log, even though it had all the permissions possible, including in Apparomor. I'm guessing it's got something to do with the order of the entries, or some interaction with Passenger or PHP-Fpm... I've run out of time to troubleshoot this and have gone back to Apache for now. (Apache performs much better too FYI.) AppArmor just lets Nginx do whatever it wants if you just remove the profile:Shockingly, but hardly surprising, a lot of posts on fixing Nginx errors resorts to completely disabling SELinux or removing AppArmor. That's a bad idea because you lose protection from a whole lot of software. Just removing the Nginx profile is a better way to troubleshoot your config files. Once you know that the problem isn't in your Nginx config files, you can take the time to create a proper AppArmor profile. Without an AppArmor profile, especially if you run something like Passenger too, I give your server about a month to get backdoored. For me the error was in default file of Nginx

located at /etc/nginx/sites-available/defaultI noticed the version of php-fpm used was 7.0 and the php version i downloaded was 7.2

I simply changed the version to 7.2 and it worked.fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;Similar setup here and looks like it was just a bug in my code.  At the start of my app I looked for the offending URL and this worked: echo '<html>test</html>'; exit(); In my case, turns out the problem was an uninitialized variable that only failed under peculiar circumstances.  

reconstruct/get code of php function

Marek Sebera

[reconstruct/get code of php function](https://stackoverflow.com/questions/7026690/reconstruct-get-code-of-php-function)

Can I programmatically get a code of function by it's name?Like:is it possible?  Are there any php self-descriptive functions to reconstruct function/class code?

 (mean instead of getting source code right from sources file)In Java there exists: http://java.sun.com/developer/technicalArticles/ALT/Reflection/In PHP:

get_class_methods()

typeof

ReflectionFunction (thanks Alin Purcaru)

2011-08-11 13:27:03Z

Can I programmatically get a code of function by it's name?Like:is it possible?  Are there any php self-descriptive functions to reconstruct function/class code?

 (mean instead of getting source code right from sources file)In Java there exists: http://java.sun.com/developer/technicalArticles/ALT/Reflection/In PHP:

get_class_methods()

typeof

ReflectionFunction (thanks Alin Purcaru)Expanding on the suggestion to use the ReflectionFunction, you could use something like this:There isn't anything that will give you the actual code of the function. The only thing close to that available is the ReflectionFunction class. For classes you have ReflectionClass that gives you the class members (constants, variables and methods) and their visibility, but still no actual code.Workaround (it does involve reading the source file):

Use ReflectionFunction::export to find out the file name and line interval where the function is declared, then read the content from that file on those lines. Use string processing to get what's between the first { and the last }.Note: The Reflection API is poorly documented.We program through different operating systems, gnu/linux, windows, mac... Due to this, we have different carriage returns in the code, to solve this, I forked the Brandon Horsley's answer and prepare to check different CR and get code from an class's method instead of a function:thank you, final function

PHP CURL & HTTPS

StackOverflowNewbie

[PHP CURL & HTTPS](https://stackoverflow.com/questions/4372710/php-curl-https)

I found this function that does an AWESOME job (IMHO): http://nadeausoftware.com/articles/2007/06/php_tip_how_get_web_page_using_curlThe only problem I have is that it doesn't work for https://. Anny ideas what I need to do to make this work for https? Thanks!

2010-12-07 01:51:13Z

I found this function that does an AWESOME job (IMHO): http://nadeausoftware.com/articles/2007/06/php_tip_how_get_web_page_using_curlThe only problem I have is that it doesn't work for https://. Anny ideas what I need to do to make this work for https? Thanks!Quick fix, add this in your options:Now you have no idea what host you're actually connecting to, because cURL will not verify the certificate in any way. Hope you enjoy man-in-the-middle attacks!Or just add it to your current function:I was trying to use CURL to do some https API calls with php and ran into this problem.  I noticed a recommendation on the php site which got me up and running: http://php.net/manual/en/function.curl-setopt.php#110457Another option like Gavin Palmer answer is to use the .pem file but with a curl optionIn your code NOTE: setting the cainfo in the php.ini like @Gavin Palmer did is better than setting it in your code like I did, because it will save a disk IO every time the function is called, I just make it like this in case you want to test the cainfo file on the fly instead of changing the php.ini while testing your function.One important note, the solution mentioned above will not work on local host, you have to upload your code to server and then it will work. I was getting no error, than bad request, the problem was I was using localhost (test.dev,myproject.git). Both solution above work, the solution that uses SSL cert is recommended.

PHP generate file for download then redirect

Evan

[PHP generate file for download then redirect](https://stackoverflow.com/questions/822707/php-generate-file-for-download-then-redirect)

I have a PHP app that creates a CSV file which is forced to download using headers.  Here's the relevant part of the code:What I'd like to do is redirect users to a new page after the file is built and the download prompt is sent.  Just adding header("Location: /newpage") to the end didn't work, expectedly, so I'm not sure how to rig this up.

2009-05-05 00:00:48Z

I have a PHP app that creates a CSV file which is forced to download using headers.  Here's the relevant part of the code:What I'd like to do is redirect users to a new page after the file is built and the download prompt is sent.  Just adding header("Location: /newpage") to the end didn't work, expectedly, so I'm not sure how to rig this up.I don't think this can be done - although I am not 100% sure.The common thing (e.g. in popular download sites) is the reverse: first you go to the after page and then the download starts.So redirect your users to the final page that (among other things) says:Your download should start automatically. If not click [a href="create_csv.php"]here[/a].As about initiating the download (e.g. automatically calling create_csv.php) you have many options:very easy to do in the case it is really needed.But you will need to have a bit work in JavaScript and cookies:in PHP you should add setting up a cookiethen on the page where you call the download you should track with JS (e.g. once per second) if there is coming cookie like that (there is used plugin jQuery cookie here):Now if the file starts to be downoaded JS recognizes it and redirects to the page needed after cookie is deleted.Of course, you can tell you need browser to accept cookies, JavaScript and so on, but it works.The header you are sending are HTTP headers. The browser takes that as a page request and processes it as a page. And in your case, a page it needs to download.So adding a redirect header to that confuses the whole process of downloading the file (since headers are collected, generated into one header and then sent to the browser, you can try this by setting multiple redirect headers IIRC)Bear in mind, however, the automatic initiation of downloadable files for IE users will trigger the security warning tab.  All three of the methods outlined by daremon would show this warning.  You simply can't get around this.  You will be better served if you provide real links.I found one workaround for this that relies on javascript, so it's not exactly secure, but for non-secure critical sites it seems to work. Have a form with a button titled 'download' with the action set to point to the download script, then using javascript put something on the onsubmit handler that strips out the download button and replaces the messaging on the screen. The download should still happen and the screen will change. Obviously, if there's an issue with the download script then it still looks like the download was successful even if it doesn't fire, but it's the best I've got right now.This is quite old issue, but here is how I achieved it via JS.Via - https://www.daniweb.com/web-development/php/threads/463652/page-not-redirecting-after-sending-headers-in-phpHere is a solution using javascript.You can try and redirect to the URL plus a parameter that represents the file contents. And in the redirect, you can output the file content for download.Launch the PHP file which contains the CSV download using:or where the JavaScript function popoutWin isThis will open a window, to display the CSV download prompt and then immediately close the window, leaving only the prompt.Here is the answer:

It's work!

You need three different parts of code:

HTML

JQuery

PHPHmmmm...Put the code below in the main javascript of the site.Explaining:

It does the normal redirect with php to some url you will difine and in javascipt it says: If the pathname is the same as the path that redirect made '/url_of_redirect/' then it opens the url on a new page, generating the downlod.   

Laravel 5 session not persisting after user is logged in

Andrei

[Laravel 5 session not persisting after user is logged in](https://stackoverflow.com/questions/30769434/laravel-5-session-not-persisting-after-user-is-logged-in)

I'm having an interesting issue with Laravel 5.After logging in a user, the logged in status is not persisted across pages. Clearly it has something to do with Session::.The way I'm logging in a user is pretty straight-forward:A simple print_r(Session::all()); gives me the following if the user is NOT logged in:After the user is logged in an redirected to / the array looks like this:However, after any action that will lead to a page refresh or a redirect, the session status is lost.My config/session.php file looks like so:The locally stored file for the session can be written and read.I've tried using database drive instead of file. Same thing happens the [login_xx] => 2 key/value is lost and I'm logged out.Since the Session:: is not completely reset I'm suspecting that I'm not logging in the  user properly or simply doing something that I shouldn't be doing somewhere.

2015-06-11 00:07:48Z

I'm having an interesting issue with Laravel 5.After logging in a user, the logged in status is not persisted across pages. Clearly it has something to do with Session::.The way I'm logging in a user is pretty straight-forward:A simple print_r(Session::all()); gives me the following if the user is NOT logged in:After the user is logged in an redirected to / the array looks like this:However, after any action that will lead to a page refresh or a redirect, the session status is lost.My config/session.php file looks like so:The locally stored file for the session can be written and read.I've tried using database drive instead of file. Same thing happens the [login_xx] => 2 key/value is lost and I'm logged out.Since the Session:: is not completely reset I'm suspecting that I'm not logging in the  user properly or simply doing something that I shouldn't be doing somewhere.I faced similar issue, I simply called: after any add/update/delete to Session storage. So it looked like:I had the same issue. Once I removed the various combinations of dd() and print_r() I was using to dump responses for testing purposes and allowed the method to complete and fully render the view, the issue went away and sessions persisted. I solved changingtoaccording to laravel the name of the cookie affects every driverI'm not familiar with Laravel, but on CodeIgniter I save user session in CI's Session Class and Laravel has one too.I suggest to use the build-in session which is more persistent than default $_SESSION - probably it saves user data in database and on each page refresh/change the session is populated again from DB.When user authenticates, just save its session data like this:...where value could be just a boolean value or an entire object that holds user specific data.On each page load, get user data from session:EDIT:

I see that you use the Auth Class. My answer is mostly for manual login of the user and it works.

I think that the Auth Class should be doing this by default, but probably you're missing some configuration or there's a bug.  Here's a possible solution (Laravel 4, but it worths a try): http://laravel.io/forum/11-11-2014-authcheck-always-returning-falseAs of this you should try to change the driver value fromto...also on Laravel's docs you can see that the driver has to be defined like that.First, make sure you don't have some sort of a before filter, middleware, or route group that is causing them to be logged out. At least temporarily, search for any Auth::logout() and comment it out.  I have seen this be the problem more than once.Second, you look like you're doing this call correctly. The third parameter is $login : bool and it defaults to true. This is not your problem, but please change your TRUE and FALSE to true and false to meet with PSR-1/2 standards.  I would have advised that you try another driver, but you have done that and have the same result. This leads me to think that you have some sort of earlier code that is misdirecting to a logout(). You need to make sure of 2 things if you are using default laravel's file session which you can check if you are using in session.php file.ie. This worked for me in Laravel 5.correctedHum... Ensure your machine is setted with good date and hour, and equally the other machines on the network who working with.For exemple in Debian system:In the command prompt, hit date (you will see the date), if it's not correct follow these instructions:Use "cookie" driver instead of "file" of session.php (config\session.php\driver). I had a problem with login using "Auth::loginUsingId()" api instead of "Auth::attempt()" api, it destroyed the session for another request.Make sure that the target route also uses the middleware StartSession. 

In my "fresh" installation of Laravel 5.2 the "web" middleware group uses it, but the root path (/), which also happens to be the default $redirectTo after login, was outside of it. Huge loss of time.I had this problem to and i solve this way.

After Auth::attemp or Auth::login() dont use echo, var_dump or dd() i dont know why but those prevent to keep the session in the browser.And now is workingI had a similar problem and I have fixed it by changing the Session Driver from

SESSION_DRIVER=database

to

SESSION_DRIVER=fileIn my case I had to change the domain setting in the app/config/sessions.php file. I had a different domain written there instead of the one that I was using and naturally it didn't work. Though I don't understand why the framework went ahead and created the session files each time I was reloading the page.I had the same issue, but it has been fixed now.It's because of the conflict between sessions in your machine and in your localhost domain. To solve the problem:First of all check your config/session.php file and check this:after that clear your cookies:on Firefox, right click -> view page info -> Security -> View Cookies -> Remove alli had the same problem in laravel 5.4, the solution for me was:In the file /app/Http/Kernel.php, was commented middleware AuthenticateSession by default.Only uncommented this line and the session work fine in all routesIf you are using loginUsingId() method you should set 'remember' flag to true.So, instead of doing:You should doSee docsYou might wanna check public/index.php, see if there are codes before the Laravel codes. After I remove those codes, I can login just fine.I seems, someone "messed" with my sites, and index.php is the main target for malicious codesJust add  session start and authenticate middleware to global middleware in kernel.php fileDon't forget to save like session()->save() or Session::save()

PHP number: decimal point visible only if needed

vitto

[PHP number: decimal point visible only if needed](https://stackoverflow.com/questions/4113200/php-number-decimal-point-visible-only-if-needed)

I'd like to know if exists some function to automatically format a number by it's decimal, so if I have:so my answer is if does exist some way to remove the decimals if I have DECIMAL data forma in my DB only when it's round?Or shoud I do something like that?

2010-11-06 13:05:46Z

I'd like to know if exists some function to automatically format a number by it's decimal, so if I have:so my answer is if does exist some way to remove the decimals if I have DECIMAL data forma in my DB only when it's round?Or shoud I do something like that?I actually think that your workaround is as good as any. It's simple and clear, and there's really no point talking about performance here, so just go for it.floatval or simply casting to floatAs Emil says yours are good. But if you want to remove 0 from e.g. 7.50 too, I've got a suggestion, rtrim():I add the article Remove useless zero digits from decimals in PHP as a nicer way to clean the value without loose decimal if needed.You could also use rtrim(), which would remove excess 0s, in the case where you might want to keep one decimal place but not the excess zeros. (For example, 4.50 becomes 4.5.) Also allows you to change the number of decimal places from 2 to any other number.Actually I think the cleanest way I can think of to do this for someone that just did a search looking for this sort of thing is to do this:If you are targeting US currency I like to use this method:Warren.S answer helped me out. I didn't need the number_format function, so I just did thisBut in the OP's case, he needs number_format to remove the commas. So this would work for himSince I could not find a flexible solution I wrote a simple function to get the best result:I've been accused of doing something like this:Mine since most quantity or pieces do not require decimal, this function will only show decimal when needed.What about

How to get data from Magento System Configuration

Jorge

[How to get data from Magento System Configuration](https://stackoverflow.com/questions/5892476/how-to-get-data-from-magento-system-configuration)

I just wandering on how I can get the configuration data for my custom module. The configuration can be set from the admin system->configuration and how to pull it in frontend?

2011-05-05 03:50:02Z

I just wandering on how I can get the configuration data for my custom module. The configuration can be set from the admin system->configuration and how to pull it in frontend?sectionName, groupName and fieldName are present in etc/system.xml file of your module.The above code will automatically fetch config value of currently viewed store. If you want to fetch config value of any other store than the currently viewed store then you can specify store ID as the second parameter to the getStoreConfig function as below:you should you use following codeMage::app()->getStore() this will add store code in fetch values so that you can get correct configuration values for current store this will avoid incorrect store's values because magento is also use for multiple store/views so must add store code to fetch anything in magento.if we have more then one store or multiple views configured then this will insure that we are getting values for current store(magento 2 example provided below)sectionName, groupName and fieldName are present in etc/system.xml file of the module.PHP Syntax:From within an editor in the admin, such as the content of a CMS Page or Static Block; the description/short description of a Catalog Category, Catalog Product, etc.For the "Within an editor" approach to work, the field value must be passed through a filter for the {{ ... }} contents to be parsed out. Out of the box, Magento will do this for Category and Product descriptions, as well as CMS Pages and Static Blocks. However, if you are outputting the content within your own custom view script and want these variables to be parsed out, you can do so like this:Replacing identifier/name with the a appropriate values for the model you are loading, and field with the name of the attribute you want to output, which may contain {{ ... }} occurrences that need to be parsed out.From any Block class that extends \Magento\Framework\View\Element\AbstractBlockAny other PHP class:If the class (and none of it's parent's) does not inject \Magento\Framework\App\Config\ScopeConfigInterface via the constructor, you'll have to add it to your class.Once you have injected it into your class, you can now fetch store configuration values with the same syntax example given above for block classes.Note that after modifying any class's __construct() parameter list, you may have to clear your generated classes as well as dependency injection directory: var/generation & var/difor example if you want to get EMAIL ADDRESS from config->store email addresses.

You can specify from wich store you will want the address:

Remove Text Between Parentheses PHP

Belgin Fish

[Remove Text Between Parentheses PHP](https://stackoverflow.com/questions/2174362/remove-text-between-parentheses-php)

I'm just wondering how I could remove the text between a set of parentheses and the parentheses themselves in php.Example :ABC (Test1)I would like it to delete (Test1) and only leave ABCThanks

2010-02-01 02:45:15Z

I'm just wondering how I could remove the text between a set of parentheses and the parentheses themselves in php.Example :ABC (Test1)I would like it to delete (Test1) and only leave ABCThankspreg_replace is a perl-based regular expression replace routine. What this script does is matches all occurrences of a opening parenthesis, followed by any number of characters not a closing parenthesis, and again followed by a closing parenthesis, and then deletes them:Regular expression breakdown:The accepted answer works great for non-nested parentheses. A slight modification to the regex allows it to work on nested parentheses. without regexIt works by looping through each character, counting parentheses. Only when $paren_num == 0 (when it is outside all parentheses) does it append the characters to our resulting string, $new_string.Folks, regular expressions CANNOT be used to parse non-regular languages. Non-regular languages are those that require state to interpret (i.e. remembering how many parenthesis are currently open). All of the above answers will fail on this string: "ABC (hello (world) how are you)". Read Jeff Atwood's Parsing Html The Cthulhu Way: https://blog.codinghorror.com/parsing-html-the-cthulhu-way/, and then use either a by-hand written parser (loop through the characters in the string, see if the character is a parenthesis or not, maintain a stack) or use a lexer/parser capable of parsing a context-free language.Also see this wikipedia article on the "language of properly matched parenthesis:" https://en.wikipedia.org/wiki/Dyck_languageMost quik method (without preg):If you don't want to trim spaces at end of word, just remove trim function from code.

PHP: Sort an array by the length of its values?

Sam152

[PHP: Sort an array by the length of its values?](https://stackoverflow.com/questions/838227/php-sort-an-array-by-the-length-of-its-values)

I made an anagram machine and I have an array of positive matches. The trouble is they are all in a different order, I want to be able to sort the array so the longest array values appear first.Anybody have any ideas on how to do this?

2009-05-08 04:22:11Z

I made an anagram machine and I have an array of positive matches. The trouble is they are all in a different order, I want to be able to sort the array so the longest array values appear first.Anybody have any ideas on how to do this?Use http://us2.php.net/manual/en/function.usort.phpwith this custom functionUse uasort if you want to keep the old indexes, use usort if you don't care.Also, I believe that my version is better because usort is an unstable sort.If you'd like to do it the PHP 5.3 way, you might want to create something like this:This way you won't pollute your global namespace. But do this only if you need it at a single place in your source code to keep things DRY.PHP7 is coming. In PHP7, you could use the Spaceship Operator.Hope this could help you in the future.Make an array of strlen of oyur array elements, and multisort it with your array.This will definately work. I am sure! In addition to the accepted answer, to sort an array by length with ascending OR descending order:Here's a way using the spaceship operator (needs PHP 7.0):Descending Order:Ascending Order:Here's a way I've done it in the past.It's simple.Result:

Find everything between two XML tags with RegEx

Doz

[Find everything between two XML tags with RegEx](https://stackoverflow.com/questions/13241615/find-everything-between-two-xml-tags-with-regex)

In RegEx, I want to find the tag and everything between two XML tags, like the following:I want to find the tag and everything between primaryAddress, and erase that. Everything between the primaryAddress tag is a variable, but I want to remove the entire tag and sub-tags whenever I get primaryAddress.Anyone have any idea how to do that?

2012-11-05 22:44:33Z

In RegEx, I want to find the tag and everything between two XML tags, like the following:I want to find the tag and everything between primaryAddress, and erase that. Everything between the primaryAddress tag is a variable, but I want to remove the entire tag and sub-tags whenever I get primaryAddress.Anyone have any idea how to do that?However, if you want to do it anyway, search for regex pattern and replace it with empty string...You should be able to match it with: /<primaryAddress>(.+?)<\/primaryAddress>/The content between the tags will be in the matched group.It is not good to use this method but if you really want to split it with regex

the verified answer returns the tags but this just return the value between tags.this can capture most outermost layer pair of tags, even with attribute in side or without end tagsedit: as mentioned in comment above, regex is always not enough to parse xml, trying to modify the regex to fit more situation only makes it longer but still useless

Calling other function in the same controller?

Himmators

[Calling other function in the same controller?](https://stackoverflow.com/questions/17861412/calling-other-function-in-the-same-controller)

I've this controller, and the function read($q) return error Call to undefined function sendRequest()I'm assuming it's because I'm referencing the function in the wrong manner, but I can't find any explanations for how to do it.

2013-07-25 14:49:56Z

I've this controller, and the function read($q) return error Call to undefined function sendRequest()I'm assuming it's because I'm referencing the function in the wrong manner, but I can't find any explanations for how to do it.Try:Since PHP is not a pure Object-Orieneted language, it interprets sendRequest() as an attempt to invoke a globally defined function (just like nl2br() for example), but since your function is part of a class ('InstagramController'), you need to use $this to point the interpreter in the right direction.Yes. Problem is in wrong notation. Use:Instead. Or for static methods. Also read this for getting idea of OOP - http://www.php.net/manual/en/language.oop5.basic.php

Get current class and method?

ajsie

[Get current class and method?](https://stackoverflow.com/questions/2140282/get-current-class-and-method)

I'm creating a log function that will log my errors in a file.I thought it will contain which class and method the error occurred in.Is there a way of logging in which class and method the error occurred in so I don't have to type it manually each time?

2010-01-26 15:16:19Z

I'm creating a log function that will log my errors in a file.I thought it will contain which class and method the error occurred in.Is there a way of logging in which class and method the error occurred in so I don't have to type it manually each time?I'm not big on PHP but I believe it has "magic constants" similar to C/C++. Take a look here: This seems to indicate you could useIn the event your in a parent / base class, __CLASS__ will return the parent / base class name which is not desired. In that event you can use get_class():In current PHP versions (5.5+) you should use static::classIt works both in static and instance methods and returns the actual class name, even if the method body was defined in a superclass.use the __METHOD__ constant in PHP5get_called_class() get's the current class. This might also be interesting: debug_print_backtrace().In Laravel 5 CLASS was returning namespace and class name, so it was a large string. So this is how you get current Class without all that other stuff:

php const arrays

Marty Wallace

[php const arrays](https://stackoverflow.com/questions/12129066/php-const-arrays)

Is this the only way to have arrays as constants in php or is this bad code:

2012-08-26 09:38:09Z

Is this the only way to have arrays as constants in php or is this bad code:Your code is fine - arrays cannot be declared constant in PHP before version 5.6, so the static approach is probably the best way to go. You should consider marking this variable as constant via a comment:With PHP 5.6.0 or newer, you can declare arrays constant:Starting with PHP 5.6.0 (28 Aug 2014), it is possible to define an array constant (See PHP 5.6.0 new features).With PHP 7.0.0 (03 Dec 2015) array constants can be defined with define(). In PHP 5.6, they could only be defined with const. (See PHP 7.0.0 new features)I came across this thread looking for the answer myself. After thinking I would have to pass my array through every function it was needed in. My experience with arrays and mysql made me wonder if serialize would work. Of course it does.Marking it static is a good alternative. Here's an example of encapsulating a static array to get somewhat of constant behavior.Prints:I suggest using the following:This way you do have a const array and you're guaranteed that noone can change it, not even a method in the Class itself.Possible micro-optimization (not sure how much PHP compilers optimize nowadays):You have created a static array, not a constant array. Static variables are mutable; constants are immutable. Your code is not bad, but it doesn't do what you intend it to do.  In PHP 5.6, you can declare const arrays. Please see my previous explanation. Perhaps you want something like this:Note that constants have no $ prefix, which indicates their immutability. $foo is a variable; FOO is not. Additionally, constant names are always capitalized, at least in the programming languages I've been exposed to. This is not enforced by the compiler; it is simply an (almost?) universal coding style convention. Visibility keywords public, protected, and private do not apply to constants. Finally, static may or may apply depending on whether or not you want the function to be static.From PHP 5.6 onwards, it is possible to define a constant as a scalar expression, and it is also possible to define an array constant.

Laravel Blade passing variable with string through @include causes error

joeyfb

[Laravel Blade passing variable with string through @include causes error](https://stackoverflow.com/questions/29739745/laravel-blade-passing-variable-with-string-through-include-causes-error)

In Laravel 5.0.27 I am including a view with with a variable and the following code:and I get the following error...I've narrowed down that the error is solely from the "(" in the "mainContent" variable string, and when I remove the "(" the error disappears and everything runs fine. I can't find anything in documentation on this or any similar errors listed online. Does anyone know if this is expected behavior or if this is a bug that should be reported?Thanks so much for your time!

2015-04-20 05:12:20Z

In Laravel 5.0.27 I am including a view with with a variable and the following code:and I get the following error...I've narrowed down that the error is solely from the "(" in the "mainContent" variable string, and when I remove the "(" the error disappears and everything runs fine. I can't find anything in documentation on this or any similar errors listed online. Does anyone know if this is expected behavior or if this is a bug that should be reported?Thanks so much for your time!It's not a bug but a limitation of blade syntax due to regex. Solution came from github:In 5.8v, included views inherit all variables from the parent as per in documentation:

How to extend access token validity since offline_access deprecation

Rok Dominko

[How to extend access token validity since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation)

Since the offline_access Permission is deprecated in Facebook's Authentication flow, we have problem geting the so called long lived access tokens without that permission.In Facebook's document about the deprecation it says, that server side OAuth generated access tokens will be long lived, but they are not. Am I missing something? Some setting in app settings? Some special code I need to use to extend expiration time of access tokens? As I understand the documentation, for server side authentication, the access token wich can be accessed by getAccessToken() method of PHP SDK when the user is logged in is long lived. 

2012-01-24 04:30:03Z

Since the offline_access Permission is deprecated in Facebook's Authentication flow, we have problem geting the so called long lived access tokens without that permission.In Facebook's document about the deprecation it says, that server side OAuth generated access tokens will be long lived, but they are not. Am I missing something? Some setting in app settings? Some special code I need to use to extend expiration time of access tokens? As I understand the documentation, for server side authentication, the access token wich can be accessed by getAccessToken() method of PHP SDK when the user is logged in is long lived. Edit (August 14th 2012):

A week ago the official Facebook PHP SDK was updated. The function name was changed to setExtendedAccessToken, and it was decided we actually needed to destroy the session afterwards, to remove the risk of having two active sessions.

Also, the function no longer actually returns the token, but instead stores it within the persistant data. You can therefore get the new access token with the public function getAccessToken afterwards. Grab the new SDK from official Facebook PHP SDK github page to make sure you're up to date.Original Answer:I have added a new public function to the base_facebook.php file, which returns an new access token which expires in 60 days. You can make a request to this function after you've received the normal access token. I've not tested, but I assume you also need to enable 'deprecate offline_access" in your Advanced settings of the Developer App.Just add this to your base_facebook.php inside the facebook class and make a call to it. It works for me.Actually what was said:Which means that it will be just longer than client-side generated token, and to receive extended token (60 days) you need do it manually by issuing request to:This token can still became invalid for several reasons, and how to handle this described in How-To: Handle expired access tokens blog post.Update:

As of Aug 07, 2012 you can use setExtendedAccessToken method to extend access_token instead of manually constructing URL and retrieving details.//using a javascript for popup for facebook login//got the accesstoken with 1-2 hours expire time//got the accesstoken into a controller called facebook controller//taking the access token to extend to 60days//After the execution of below code , we will have a response with acess token expire time to 60days.// Above response is given for parsing.  //after the parsing the contents in the above execution code the new extended accesstoken is stored.//stored to session.//Have a nice codingAn access token generated through a server-side OAuth call will be of the extended (longer) kind and you don't need to exchange it. It is already an extended token.

The only thing you must do is enable "Deprecate offline access" in your app settings. This is of course only necessary if "Deprecate offline access" was previously disabled.Then, when you authenticate users through Facebook you will receive an access token that lives for 60 days. Authenticating multiple times during the same day will result only in the first authentication extending the expiration time.Should you need an access token that NEVER expires for a PAGE, see my answer to a similar question hereFrom the developers page:this is for extending pages access token to expiring never, and extending the life of user access tokens expiring after 2 months(the 'new access token').Ok so it took about a week of research but here is my solution.

in the https://developers.facebook.com/tools/explorer/ make sure that you have manage_page as part of your access_token.  after that use this code with your app id, secret, and redirect:After that copy the 'new access token' and go back to  https://developers.facebook.com/tools/explorer/  When you get there past in your new access token into the the access token field.

Then click submit.  After that in the node you will see a +____ click on this and scroll down to the accounts and click that.  find the page that you need the access token for and copy and paste it into the access key field.  click debug and you will see that it will never expire.  save that token it will stay valid as long as you do not reset your apps secret.Inspired by previous answers, I wrote a simple token self-renewal program. First, just put your current token in the 'token.sec' file.This program will read a token from the file, and update with a new token if everything is OK. In other programs, you just need to use the token: Here we are:Finally, we can add this in our crontab to renew the token once per momth:

MySQLi prepared statements error reporting [duplicate]

Columbo

[MySQLi prepared statements error reporting [duplicate]](https://stackoverflow.com/questions/2552545/mysqli-prepared-statements-error-reporting)

I'm trying to get my head around MySQli and I'm confused by the error reporting.

I am using the return value of the MySQLi 'prepare' statement to detect errors when executing SQL, like this:But, is the return value of the prepare statement only detecting if there is an error in the preperation of the SQL statement and not detecting execution errors? If so should I therefore change my execute line to flag errors as well like this:And then just to be safe should I also do the following after the statement has executed:...Or was I OK to start with  and the return value on the MySQLi prepare' statement captures all errors associated with the complete execution of the query it defines?Thanks 

C

2010-03-31 11:43:31Z

I'm trying to get my head around MySQli and I'm confused by the error reporting.

I am using the return value of the MySQLi 'prepare' statement to detect errors when executing SQL, like this:But, is the return value of the prepare statement only detecting if there is an error in the preperation of the SQL statement and not detecting execution errors? If so should I therefore change my execute line to flag errors as well like this:And then just to be safe should I also do the following after the statement has executed:...Or was I OK to start with  and the return value on the MySQLi prepare' statement captures all errors associated with the complete execution of the query it defines?Thanks 

CI wrote this twice before in the last two days (so for me it's a duplicate even though the questions started a bit different).Each method of mysqli can fail. You should test each return value. If one fails, think about whether it makes sense to continue with an object that is not in the state you expect it to be. (Potentially not in a "safe" state, but I think that's not an issue here.)Since only the error message for the last operation is stored per connection/statement you might lose information about what caused the error if you continue after something went wrong. You might want to use that information to let the script decide whether to try again (only a temporary issue), change something or to bail out completely (and report a bug). And it makes debugging a lot easier.edit: just a few notes six years later....

The mysqli extension is perfectly capable of reporting operations that result in an (mysqli) error code other than 0 via exceptions, see mysqli_driver::$report_mode.

die() is really, really crude and I wouldn't use it even for examples like this one anymore.

So please, only take away the fact that each and every (mysql) operation can fail for a number of reasons; even if the exact same thing went well a thousand times before....CompletenessYou need to check both $mysqli and $statement. If they are false, you need to output $mysqli->error or $statement->error respectively.EfficiencyFor simple scripts that may terminate, I use simple one-liners that trigger a PHP error with the message. For a more complex application, an error warning system should be activated instead, for example by throwing an exception.Usage example 1: Simple scriptUsage example 2: ApplicationNot sure if this answers your question or not. Sorry if notTo get the error reported from the mysql database about your query you need to use your connection object as the focus.so:would echo the error being sent from mysql about your query.Hope that helps

How to use MAMP's version of PHP instead of the default on OSX

Josh Fraser

[How to use MAMP's version of PHP instead of the default on OSX](https://stackoverflow.com/questions/4262006/how-to-use-mamps-version-of-php-instead-of-the-default-on-osx)

I would like to use MAMP's version of PHP instead of the default installed on my mac.  I tried using ln -s /Applications/MAMP/bin/php5.3/bin/php php but I get a "File exists" error.  What's the best way to work around this so I can just type php instead of the full path?

2010-11-23 23:15:07Z

I would like to use MAMP's version of PHP instead of the default installed on my mac.  I tried using ln -s /Applications/MAMP/bin/php5.3/bin/php php but I get a "File exists" error.  What's the best way to work around this so I can just type php instead of the full path?I would not recommend trying to modify the default version of PHP that is called on the command line.  Doing so may break other parts of your system as well as provide you with problems in the future, should you decide to upgrade your OS.There is an alternative that may meet your needs.  You can create an alias to your copy of MAMP's php 5.3.  In my case I named the alias phpmamp.  Open your terminal and type:Now, typing phpmamp at the command line will launch the MAMP php interperter.  Verify this by typing:You will most likely want to store this, and any other alias, in a ~/.bash_profile  This will allow the aliases to persist across reboots.  Otherwise, the alias should only last for the particular terminal session you are in.  More information about creating a .bash_profile file can be found here:http://www.redfinsolutions.com/redfin-blog/creating-bashprofile-your-macI have created a symlink at the original php location.1. Locate your osx php version with:The result should be:2. Backup (move) your original php binary:3. Create the symlink:4. Run your new php version:PS:In order for this to work on El-CapitanI prefer not to tamper with the current files, so I just prepend the MAMP PHP bin folder to the $PATH env variable.You can edit ~/.bash_profile and add the the following line to the topexport PATH="/Applications/MAMP/bin/php/php5.6.1/bin:$PATH"Just change the PHP version to the current version you are using.Don't forget to do source ~/.bash_profile after you edit the file.I wasn't pleased with the results / solutions I've found on the net so far, because the php.ini configs weren't loaded properly in all cases and on all systems, espacially when you need modules like ioncube and others (it's even more confusing on MAMP Pro). That's why I've created my own php version aliases (with configs), so I've come up with the following solution, as example (based on MAMP Pro, remember to adjust the php.ini paths to your needs):Edit your .bash_profile And add the following entries:Re-Initialize the .bash_profile in the current terminal session (otherwise you won't see any changes, unless you restart the terminal):If you have some additional modules installed, then you can test it with php56 -v and you should get a output of the ioncube, etc. modules. Otherwise test it with php56 -i | grep "yourModuleNameOrSomethingElse"Now you are able to easily use one of the php versions like "php56" in your terminal with all configs loaded. So it's perfect for testing and building your applications through all iterations of versions including the right php.ini configs through the terminal.For normal MAMP Users, the configs should be located in /Applications/MAMP/conf/ I think. Happy programming.Well, the 'file exists' error is probably because you attempted to create a sym-link with the name of a file that was already there. I assume you were in the directory containing the php version you were trying to replace or that this was a second attempt and you did not first remove the existing sym-link. I agree with the others with regard to not "replacing/modifying" the default version of php.Based on the second part of the question, the best way to get around having to type the full path, the answers suggesting an alias are right on point with that. When multiple versions are involved though, that means having to call something other than php to run the version you want to run.I have a script that lets me "select" the version of php that I would like to work with which then creates a sym-link to that version and lets me simply enter 'php' as my command when I want to use it. I wrote a blog about it here where you can get the script. Based on the answer given by @ioCron I may need to revisit my script to account for the different config folders associated with each version.Well none of this was working for me with OSX10.12.5i have mac ports php70 installed at /opt/local/binwhich php showed: I set up the aliases and local paths etc, which mostly worked for me, but other programs were failing (like composer)  so the solution for me was to prepend:to the file /etc/pathsthen it all worked a charm!The latest version of MAMP (Version 5+) offers an easy way to make the MAMP PHP version available to the command line. Just select "PHP" in the the side bar menu and check "Make this version available on the command line". Easy peasy! :)screenshot

How can I force PHP to use strings for array keys?

alex

[How can I force PHP to use strings for array keys?](https://stackoverflow.com/questions/3445953/how-can-i-force-php-to-use-strings-for-array-keys)

I've come across an old app that uses an id to name type array, for example...Now I need to reorder these, and a var_dump() would make it appear that that isn't going to happen while the keys are integers.If I add an a to every index, var_dump() will show double quotes around the key, my guess to show it is now a string...This would let me easily reorder them, without having to touch more code.This does not work.A var_dump() still shows them as integer array indexes.Is there a way to force the keys to be strings, so I can reorder them without ruining the array?

2010-08-10 04:08:10Z

I've come across an old app that uses an id to name type array, for example...Now I need to reorder these, and a var_dump() would make it appear that that isn't going to happen while the keys are integers.If I add an a to every index, var_dump() will show double quotes around the key, my guess to show it is now a string...This would let me easily reorder them, without having to touch more code.This does not work.A var_dump() still shows them as integer array indexes.Is there a way to force the keys to be strings, so I can reorder them without ruining the array?EDIT:Actually they dont have to be in numeric order... Is perfectly valid if youre assigning them manually. Though i agree the integer keys might be misinterpreted as having a sequential meaning by someone although you would think if they were in a non-numeric order it would be evident they werent. That said i think since you had the leeway to change the code as you updated that is the better approach.Probably not the most efficient way but easy as pie:YOU CAN'T!!Edit: ACTUALLY YOU CAN!! 

Cast sequential array to associative array In most cases, the following quote is true:This examples from the PHP DocsThe above example will output:So even if you were to create an array with numbered keys they would just get casted back to integers.Unfortunately for me I was not aware of this until recently but I thought I would share my failed attempts. Failed attempts My next attempts was to create a new array by array_combineing the old values the new (string)keys. I tried several ways of making the $keys array contain numeric values of type string. range("A", "Z" ) works for the alphabet so I though I would try it with a numeric string.This resulted in an array full of keys but were all of int type.Here's a couple of successful attempts of creating an array with the values of type string.Now just to combine the two. This is when I discovered numeric strings are casted to integers. The only way to change the keys to strings and maintain their literal values would be to prefix the key with a suffix it with a decimal point "00","01","02" or "0.","1.","2.". You can achieve this like so. Of course this is less than ideal as you will need to target array elements like this. I've created a little function which will target the correct array element even if you only enter the integer and not the new string. Usage Edit: ACTUALLY YOU CAN!! 

Cast sequential array to associative array All that for nothingUse an object instead of an array $object = (object)$array;You can append the null character "\0" to the end of the array key.  This makes it so PHP can't interpret the string as an integer.  All of the array functions (like array_merge()) work on it.  Also not even var_dump() will show anything extra after the string of integers.Example:The resulting output will be:Without the . "\0" part the resulting array would be:Also ksort() will also ignore the null character meaning $numbers[111] and $numbers["111\0"] will both have the same weight in the sorting algorithm.The only downside to this method is that to access, for example $numbers["444"], you would actually have to access it via $numbers["444\0"] and since not even var_dump() will show you there's a null character at the end, there's no clue as to why you get "Undefined offset".  So only use this hack if iterating via a foreach() or whoever ends up maintaining your code will hate you.I was able to get this to work by adding '.0' onto the end of each key, as such:Will return:array("1.0" => 1, "2.0" => 2, "3.0" => 3, "4.0" => 4)It may not be completely optimal but it does allow you to sort the array and extract (an equivalent of) the original key without having to truncate anything.Edit:

This should workOnly one commenter got this right, and the accepted answer is bad. asort(), uasort(), and arsort() are built-ins that sort arrays whilst maintaining the key associations, and they've existed since version 4. RTFM, people.Don't escape/corrupt your data by messing with keys. You can't stop PHP from using integer keys, so don't try. It only happens when the integer representation is exactly the same as the string, so you just cast them as such when reading the keys & values from the array, i.e. (string) $key. You can do all the sort operations you need using the aforementioned functions.

How to convert seconds to time format? [duplicate]

Dewan159

[How to convert seconds to time format? [duplicate]](https://stackoverflow.com/questions/3856293/how-to-convert-seconds-to-time-format)

For some reason I convert a time format like: 03:30 to seconds 3*3600 + 30*60, now. I wanna convert it back to its first (same) format up there. How could that be?My attempt:Now, what about the minutes? Considering the value can be like 19:00 or 02:51. 

I think you got the picture.And by the way, how to convert 2:0 for example to 02:00 using RegEx?

2010-10-04 14:42:12Z

For some reason I convert a time format like: 03:30 to seconds 3*3600 + 30*60, now. I wanna convert it back to its first (same) format up there. How could that be?My attempt:Now, what about the minutes? Considering the value can be like 19:00 or 02:51. 

I think you got the picture.And by the way, how to convert 2:0 for example to 02:00 using RegEx?If you want to get time format:This might be simplergmdate("H:i:s", $seconds)PHP gmdateIf the you know the times will be less than an hour, you could just use the date() or $date->format() functions.This works because the system epoch time begins at midnight (on 1 Jan 1970, but that's not important for you).If it's an hour or more but less than a day, you could output it in hours:mins:secs format with `For more than a day, you'll need to use modulus to calculate the number of days, as this is where the start date of the epoch would become relevant.Hope that helps.Maybe the simplest way is:Let $time be the time as number of seconds.Now the hours, minutes and seconds are in $hours, $minutes and $seconds respectively.Another solution that will give you the days, hours, minutes, and seconds for a passed-in seconds value:Extra logic will be needed for 'days' if the time is expected to be more than one year. Use str_pad() or ltrim() to add/remove leading zeros.ITroubs answer doesn't deal with the left over seconds when you want to use this code to convert an amount of seconds to a time format like hours : minutes : secondsHere is what I did to deal with this:

(This also adds a leading zero to one-digit minutes and seconds)$time will contain "1:05:21" in this example.If you were to hardcode it you would use modulus to extract the time as others suggested.If you are returning the seconds from MySQL database, assuming you don't need the data in seconds format in your app, there is a much cleaner way to do it, you can use MySQL's SEC_TO_TIME and it will return time in hh:mm:ss format.Eg.something like this?}else{

    return (bool) FALSE;

  }grabbed from: http://www.ckorp.net/sec2time.phpSorry this is too late but maybe useful  Use modulo:just one small additional examplerequested time in milisecondsHere is another way with leading '0' for all of them.It is an adaptation from the answer of Flaxious.If You want nice format like: 0:00:00 use str_pad() as @Gardner.1 day = 86400000 milliseconds.DecodeTime(milliseconds/86400000,hr,min,sec,msec)Ups! I was thinking in delphi, there must be something similar in all languages.

Move table from one database to another in MySQL [closed]

Viswalinga Surya S

[Move table from one database to another in MySQL [closed]](https://stackoverflow.com/questions/15558461/move-table-from-one-database-to-another-in-mysql)

How to move a table from one Database to another Database without using phpMyAdmin? It will be better if it is possible by PHP.

2013-03-21 21:25:43Z

How to move a table from one Database to another Database without using phpMyAdmin? It will be better if it is possible by PHP.ALTER TABLE .. can be used to move tables from one database to another :Warning : as you asked, this is a move, not a copy to the new database!

But you will keep table data (and not integrity constraints if they apply in your case)Regarding php, php is able to run sql commands so it won't be a problem (i can be more precise if you wish).Entire Database (all tables):One Table:PHP:Run PHP SELECT FROM SOURCE-DB  TABLE and Run INSERT INTO Table IN TARGET-DB

Error:「Input is not proper UTF-8, indicate encoding !」using PHP's simplexml_load_string

Camsoft

[Error:「Input is not proper UTF-8, indicate encoding !」using PHP's simplexml_load_string](https://stackoverflow.com/questions/2507608/error-input-is-not-proper-utf-8-indicate-encoding-using-phps-simplexml-lo)

I'm getting the error:parser error : Input is not proper UTF-8, indicate encoding ! Bytes: 0xED 0x6E 0x2C 0x20When trying to process an XML response using simplexml_load_string from a 3rd party source. The raw XML response does declare the content type:<?xml version="1.0" encoding="UTF-8"?>Yet it seems that the XML is not really UTF-8. The langauge of the XML content is Spanish and contain words like Dublín in the XML.I'm unable to get the 3rd party to sort out their XML.How can I pre-process the XML and fix the encoding incompatibilities?Is there a way to detect the correct encoding for a XML file?

2010-03-24 12:35:14Z

I'm getting the error:parser error : Input is not proper UTF-8, indicate encoding ! Bytes: 0xED 0x6E 0x2C 0x20When trying to process an XML response using simplexml_load_string from a 3rd party source. The raw XML response does declare the content type:<?xml version="1.0" encoding="UTF-8"?>Yet it seems that the XML is not really UTF-8. The langauge of the XML content is Spanish and contain words like Dublín in the XML.I'm unable to get the 3rd party to sort out their XML.How can I pre-process the XML and fix the encoding incompatibilities?Is there a way to detect the correct encoding for a XML file?Your 0xED 0x6E 0x2C 0x20 bytes correspond to "ín, " in ISO-8859-1, so it looks like your content is in ISO-8859-1, not UTF-8. Tell your data provider about it and ask them to fix it, because if it doesn't work for you it probably doesn't work for other people either.Now there are a few ways to work it around, which you should only use if you cannot load the XML normally. One of them would be to use utf8_encode(). The downside is that if that XML contains both valid UTF-8 and some ISO-8859-1 then the result will contain mojibake. Or you can try to convert the string from UTF-8 to UTF-8 using iconv() or mbstring, and hope they'll fix it for you. (they won't, but you can at least ignore the invalid characters so you can load your XML)Or you can take the long, long road and validate/fix the sequences by yourself. That will take you a while depending on how familiar you are with UTF-8. Perhaps there are libraries out there that would do that, although I don't know any.Either way, notify your data provider that they're sending invalid data so that they can fix it.Here's a partial fix. It will definitely not fix everything, but will fix some of it. Hopefully enough for you to get by until your provider fix their stuff.I solved this usingIf you are sure that your xml is encoded in UTF-8 but contains bad characters, you can use this function to correct them :We recently ran into a similar issue and was unable to find anything obvious as the cause. There turned out to be a control character in our string but when we outputted that string to the browser that character was not visible unless we copied the text into an IDE.We managed to solve our problem thanks to this post and this:Instead of using javascript, you can simply put this line of code after your mysql_connect sentence:Cheers.Can you open the 3rd party XML source in Firefox and see what it auto-detects as encoding? Maybe they are using plain old ISO-8859-1, UTF-16 or something else. If they declare it to be UTF-8, though, and serve something else, their feed is clearly broken. Working around such a broken feed feels horrible to me (even though sometimes unavoidable, I know).If it's a simple case like "UTF-8 versus ISO-8859-1", you can also try your luck with mb_detect_encoding().If you download XML file and open it for example in Notepad++ you'll see that encoding is set to something else than UTF8 - I'v had the same problem with xml made myself, and it was just te encoding in the editor :)String <?xml version="1.0" encoding="UTF-8"?> don't set up the encoding of the document, it's only info for validator or another resource.I just had this problem. Turns out the XML file (not the contents) was not encoded in utf-8, but in ISO-8859-1. You can check this on a Mac with file -I xml_filename.I used Sublime to change the file encoding to utf-8, and lxml imported it no issues.After several tries i found htmlentities function works.When generating mapping files using doctrine I ran into same issue.  I fixed it by removing all comments that some fields had in the database.  

PHP errors NOT being displayed in the browser [Ubuntu 10.10]

JLove

[PHP errors NOT being displayed in the browser [Ubuntu 10.10]](https://stackoverflow.com/questions/5050426/php-errors-not-being-displayed-in-the-browser-ubuntu-10-10)

I'm new to PHP and the whole LAMP stack but I've managed to get it up and running on my Ubuntu 10.10 system. Everything seems to be working with the exception of error reposting in the browser which I just can't seem to get working (and which I can't work without!).I've read a number of article and other threads which indicate that the following values should be applied in the file /etc/php5/apache2/php.ini:I've restarted apache2 and even restarted my computer but for the life of me I just can't get it working. I've even tried using phpinfo() function which reports that these settings are as I've set them so I know it's picking up the correct configuration file but nothing!Any help would be welcome.

2011-02-19 11:07:20Z

I'm new to PHP and the whole LAMP stack but I've managed to get it up and running on my Ubuntu 10.10 system. Everything seems to be working with the exception of error reposting in the browser which I just can't seem to get working (and which I can't work without!).I've read a number of article and other threads which indicate that the following values should be applied in the file /etc/php5/apache2/php.ini:I've restarted apache2 and even restarted my computer but for the life of me I just can't get it working. I've even tried using phpinfo() function which reports that these settings are as I've set them so I know it's picking up the correct configuration file but nothing!Any help would be welcome.Don't just enable the first occurrence of display_errors in the php.ini file. Make sure you scroll down to the "real" setting and change it from Off to On.The thing is that if you settle with changing (i.e. uncomment + add = On) by the very first occurrence of display_errors your changes will be overwritten somewhere on line 480 where it's set to Off again.I had the same problem - solved it by setting display_errors = On in both php.ini files. Then restarting Apache:Hope this helps.To make it work you should change the following variables in your php.ini:Search for them as they are already defined and put your desired value.

Then restart your apache2 server and everything will work fine. Good luck!After you edit /etc/php5/apache2/php.ini be sure to restart apache.You can do so by running:display_errors = On/etc/init.d/apache2 restartIf you have Local Values overriding master values, you won't change its values in php.ini

take a look for those variables in a .htaccess or in the virtual-host config file.If you edit vhost, restart apache, $ sudo service apache2 restart.htaccess edits don't need apache to restartFollow the below steps,Use the phpinfo(); function to see the table of settings on your browser and look for the and edit that file. Your computer can have multiple php.ini files, you want to edit the right one.Also check display_errors = On, html_errors = On and error_reporting = E_ALL inside that fileRestart Apache.Look at error_reporting directive in php.ini.I was just stuck on the same issue, when I've realized that I was using the open short tag form:You have to go to your /etc/apache2/php.ini file and set the short_open_tag = Off to On, then sudo service apache2 restart!Cheers!it's should overlap, so it turned off. Try to open in your text editor and find display_errors and turn it on. It works for meTry adding log_errors = Off and check the error_reporting setting whether it's set high enough. 

The openssl extension is required for SSL/TLS protection

Yang

[The openssl extension is required for SSL/TLS protection](https://stackoverflow.com/questions/35249620/the-openssl-extension-is-required-for-ssl-tls-protection)

I try to run this command, but it gave me this error.I tried to add "extension=php_openssl.dll" to "php.ini", but it still got this error

2016-02-07 04:09:30Z

I try to run this command, but it gave me this error.I tried to add "extension=php_openssl.dll" to "php.ini", but it still got this errorThe same error occurred to me. I fixed it by turning off TLS for Composer, it's not safe but I assumed the risk on my develop machine.try this:and re-run your Composer. It works to me!But it's unsecure and not recommended for your Server. The official website says:If you don't want to enable unsecure layer in your machine/server, then setup your php to enable openssl and it also works. Make sure the PHP Openssl extension has been installed and enable it on php.ini file.To enable OpenSSL, add or find and uncomment this line on your php.ini file:Linux/OSx:Windows:And reload your php-fpm / web-server if needed!according to the composer reference there are two relevant options: disable-tls and secure-http.nano ~/.composer/config.json ...then it complains much:but it performs the composer selfupdate (or whatever).while one cannot simply "enable SSL in the php.ini" on Linux; PHP needs to be compiled with openSSL configured as shared library - in order to be able to access it from the PHP CLI SAPI.To enable openssl go into php.ini and enable this line:if you don't want enable openssl you can set to composer not use openssl with this command:however, this is a security problem.I had the exact same problem and couldn't find a solution, so after thinking and looking for a while I figured that my PHP.INI apparently didn't look in the correct directory for my PHP Extensions, so I went under:"Directory in which the loadable extensions (modules) reside."

And found the following:And simply removed the ; infront of "extension_dir = "ext", note this is only for Windows, remove the semicolon in front of the first extension_dir if you are running a different operating system.I have no idea why mine wasn't already unmarked, but it's just something to look for if you are having problems.This issue occurs due to openssl and extension director so uncomment below extensions in php.ini fileextension=php_openssl.dllextension_dir = "ext"Its works on my machine.I had the same problem. I tried everything listed on this page. When I re-installed Composer it worked like before. I had a PHP version mismatch that was corrected with a  new install establishing the dependencies with the PHP path installed in my system environment variables. I DO NOT RECOMMEND the composer config -g -- disable-tls true approach.By the way the way to reverse this is composer config -g -- disable-tls false.For me on Windows 10 none of those worked ... I had changed my local server from WAMP to Laragon and had to add the new path to the php.ini in the Environment Variables under:Control Panel --> Advanced System Settings --> Environment Variables --> Path (double click) --> Browse...  then navigate to the php.ini and click ok.After that a reboot was needed and now composer works like a charm!

PHPUnit: assertInstanceOf() not working

Mantas

[PHPUnit: assertInstanceOf() not working](https://stackoverflow.com/questions/16833923/phpunit-assertinstanceof-not-working)

I need to check if a variable is an object of the User type.

User is my class $user my objectThis is not working, I have a use of undefined constant User - assumed 'User'Thanks in advance for your help

2013-05-30 10:36:36Z

I need to check if a variable is an object of the User type.

User is my class $user my objectThis is not working, I have a use of undefined constant User - assumed 'User'Thanks in advance for your helphttp://apigen.juzna.cz/doc/sebastianbergmann/phpunit/function-assertInstanceOf.htmlI think you are using this function wrong. Try:It's always a good idea to use ::class wherever you can. If you get used to this standard, you don't have to use FQCNs (fully qualified classnames), or escape backslashes. Also, IDEs provide better functionality if they know that User here is not just a string, but rather a class.Or You can use something like:I usually use this when I'm checking i.e. if setter method is returning reference to self.

How can I store and retrieve images from a MySQL database using PHP?

Mask

[How can I store and retrieve images from a MySQL database using PHP?](https://stackoverflow.com/questions/1636877/how-can-i-store-and-retrieve-images-from-a-mysql-database-using-php)

How can I insert an image in MySQL and then retrieve it using PHP?I have limited experience in either area, and I could use a little code to get me started in figuring this out.

2009-10-28 12:13:37Z

How can I insert an image in MySQL and then retrieve it using PHP?I have limited experience in either area, and I could use a little code to get me started in figuring this out.First you create a MySQL table to store images, like for example:Then you can write an image to the database like:You can display an image from the database in a web page with:Instead of storing images in database store them in a folder in your disk and store their location in your data base.Beware that serving images from DB is usually much, much much slower than serving them from disk. You'll be starting a PHP process, opening a DB connection, having the DB read image data from the same disk and RAM for cache as filesystem would, transferring it over few sockets and buffers and then pushing out via PHP, which by default makes it non-cacheable and adds overhead of chunked HTTP encoding.OTOH modern web servers can serve images with just few optimized kernel calls (memory-mapped file and that memory area passed to TCP stack), so that they don't even copy memory around and there's almost no overhead.That's a difference between being able to serve 20 or 2000 images in parallel on one machine.So don't do it unless you absolutely need transactional integrity (and actually even that can be done with just image metadata in DB and filesystem cleanup routines) and know how to improve PHP's handling of HTTP to be suitable for images.i also recommend thinking this thru and then choosing to store images in your file system rather than the DB .. 

see here: Storing Images in DB - Yea or Nay?My opinion is, Instead of storing images directly to the database, It is recommended to store the image location in the database. As we compare both options, Storing images in the database is safe for security purpose. Disadvantage are On the other hand, storing image file location in db will have following advantages.Personally i wouldnt store the image in the database, Instead put it in a folder not accessable from outside, and use the database for keeping track of its location. keeps database size down and you can just include it by using PHP. There would be no way without PHP to access that image then

AWS SDK for PHP: Error retrieving credentials from the instance profile metadata server

Ravindra

[AWS SDK for PHP: Error retrieving credentials from the instance profile metadata server](https://stackoverflow.com/questions/27400563/aws-sdk-for-php-error-retrieving-credentials-from-the-instance-profile-metadata)

I am trying to send SNS messeges to android through web api.

Downloaded and installed the SDK from http://aws.amazon.com/developers/getting-started/php/Got following error while running sample.php:A little guidance on this topic will help me a lot

2014-12-10 12:04:20Z

I am trying to send SNS messeges to android through web api.

Downloaded and installed the SDK from http://aws.amazon.com/developers/getting-started/php/Got following error while running sample.php:A little guidance on this topic will help me a lotIn my case, I was usingwhich used to be ok with aws/aws-sdk-php version 2.8.5 , but when composer automatically installed version 3.2.0, I got the error above. The problem is simply that I should've changed the way I made the call toas documented here. Without changing the call, the apache php was falling back to looking for the ~/.aws/credentials file using the HOME environment variable, which was empty. You can check its value by running php -r 'var_dump(getenv("HOME"));'.This is a related postIn my case I had to use hard-coded credentialsSee more details here:You have to place the .aws/credentials file with your configuration in the home directory of the web service *usually /var/www) not in the home directory of the logged in user.You can find what home directory you web service is using by running echo getenv('HOME'); in a php file on your server.I was trying to use a credentials file and got the same error, this guy on github pretty much nailed it:If you specified other section name instead of default, just add a profile key to the S3Client parameters:And @Anti 's answer also helped me alot!If you prefer the hard coded way, just follow @shadi 's answer.Here are the steps:This might be because the config file hasn't been published.Be sure to publish the config file:To test this is the issue, just clear the config.If it works with the cache cleared, then this will be the issue.If it is laravel and aws/aws-sdk-php-laravel sdk then after configuring all step and defining key in .env file 

you have to drop config cache and rebuild it by following commands.You can try these lines:$credentials = new Aws\Credentials\Credentials('key' , 'secret-key');$s3 = new S3Client(['version' => 'latest','region'  => 'ap-south-1','credentials'=>$credentials]);

What is the advantage of using try {} catch {} versus if {} else {}

jeroen

[What is the advantage of using try {} catch {} versus if {} else {}](https://stackoverflow.com/questions/651619/what-is-the-advantage-of-using-try-catch-versus-if-else)

I am switching from plain mysql in php to PDO and I have noticed that the common way to test for errors is using a try / catch combination instead of if / else combinations.What is the advantage of that method, can I use one try / catch block instead of several nested if / else blocks to handle all errors for the different steps (connect, prepare, execute, etc.)?

2009-03-16 18:31:39Z

I am switching from plain mysql in php to PDO and I have noticed that the common way to test for errors is using a try / catch combination instead of if / else combinations.What is the advantage of that method, can I use one try / catch block instead of several nested if / else blocks to handle all errors for the different steps (connect, prepare, execute, etc.)?I'd use the try/catch block when the normal path through the code should proceed without error unless there are truly some exceptional conditions -- like the server being down, your credentials being expired or incorrect.  I wouldn't necessarily use it to handle non-exceptional errors -- say like the current user not being in the correct role.  That is, when you can reasonably expect and handle an error that is not an exceptional condition, I think you should do your checks.In the case that you've described -- setting up and performing a query, a try/catch block is an excellent way to handle it as you normally expect the query to succeed.  On the other hand, you'll probably want to check that the contents of result are what you expect with control flow logic rather than just attempting to use data that may not be valid for your purpose.One thing that you want to look out for is sloppy use of try/catch.  Try/catch shouldn't be used to protect yourself from bad programming -- the "I don't know what will happen if I do this so I'm going to wrap it in a try/catch and hope for the best" kind of programming.  Typically you'll want to restrict the kinds of exceptions you catch to those that are not related to the code itself (server down, bad credentials, etc.) so that you can find and fix errors that are code related (null pointers, etc.). In general, try-catch blocks are great because they will break (move to the catch statement) whenever the exception occurs. If-else blocks rely on you predicting when the error will happen.Edit:

Also, catch blocks won't stop your code from halting when an error is hit.The advantage of try/catch, and exceptions in general, is more for the people developing libraries like PDO.  They allow a system developer to handle undefined situations or unexpected results in a quick and easy way.  Take a database connection.  What should a system do if the database can't be reached.  Should it halt execution? Try again? Throw a warning and continue?  The system developer can't know what you'll need it to do, they they throw an exception, which you'll later catch and handle.The advantage for you, as a consumer of the system is rather than getting some vague error code back, or a simple boolean false that it failed, you get an Exception object which will That's the theory anyway.  There are lots of smart people who claim Exceptions are the way to go.  There are also lots of smart people who think Exceptions are the devil, and a crutch for lazy system developers.  There is nothing resembling consensus on this issue.  Try/Catch totally separates the error handling logic from the object business logic.@Perchik:My general philosophy of error handling:You should use if / else to handle all cases you expect. You should not use try {} catch {} to handle everything (in most cases) because a useful Exception could be raised and you can learn about the presence of a bug from it. You should use try {} catch {} in situations where you suspect something can/will go wrong and you don't want it to bring down the whole system, like network timeout/file system access problems, files doesn't exist, etc.Vexing exceptionsThrowing and catching an exception is an expensive operation compared with most any other primitive operation.  If this is a piece of code that needs to perform well (eg, in a tight loop), you will want to look at your use case - if you expect the exceptions to be thrown relatively often, you will be better off with an if/else perforance-wise (unless the underlying code is just wrapping an exception for you, in which case there's no gain at all).  If the exceptions are only thrown in rare circumstances, then you're better off with a try/catch to avoid the overhead of branching in a tight loop. That’s exactly the advantage, using one try/catch instead of multiple if statements. You will also be able to catch any unanticipated errors.Everybody else had good answers - but I figured I would throw my own in:Since PDO is using objects, they are raising Exceptions if an error occur. The old mysql/mysqli were mere functions and didn't throw Exceptions they simply returned error codes. Try/catch is used when an Exception can be thrown from the code, and you catch it in the catch-clause, which is an object oriented way to handle errors. You can't catch Exceptions with if/else blocks - they share nothing with try/catch.In php by using Try Catch with inheritence, We can throw exception from another class.Example :- I am in the controller and validating user data by using Models.If any error triggers, I just have to throw exception from Model methods.The execution in try will break and catched in the Catch Block.So There is less overhead of returning bool vales and checking that.Apart from this Try Catch works great When using in chain ( Try - Catch inside another Try - Catch ). Completely agree with @Jared UpdikeUsually exception handling is done with the user knowing little or nothing about it. On the other hand, the user of the system knows about what happens inside an if-else block. eg. It should be an "else" clause that shows an ATM user, the message "Insufficient bank balance" when his balance is low. And this message CANNOT be sitting inside a "catch" block for any reason !! Let's say we are writing an a/b division code and the most famous exception case has occurred i.e. 0 divide error, what do you think can be done next?

 1. You can print a message and exit.

 2. You can print a message and let the user re-enter the values, etc.There are cases when different people/vendors want to handle the same exception case in different way. The catch block let them do this with ease. If you need to change the way how a certain exception case will be handled, you just need to change the catch block. Try and Catch functions are useful whenever there is a communication between functions. In Try and Catch , if there exists an exception in the TRY block, the control is transferred directly to the CATCH block which would store our exception condition. This  however is not possible in case of IF ELSE, where in IF condition , if there exists an exception, the control cannot go to the ELSE block howsoever in any case.  Consider the following Code: throw and catch function is used for communication between functions division and the main function.

Note that the statement to print c is not executed when b is 0 as the control directly transfers to the catch block after the value os thrown.

This however would not have been possible , had it been IF ELSE here.

Laravel Eloquent where field is X or null

festie

[Laravel Eloquent where field is X or null](https://stackoverflow.com/questions/36371796/laravel-eloquent-where-field-is-x-or-null)

I have a table like this:Now I want to get all entries where field1 is 1, field2 is null and where datefield is smaller than X or null. I already tried something like this:but thats not working. I always get every entry where datefield is null. It doesn't matter what the other fields are. I also tried to split it in 2 queries: First get every row where datefield is smaller than X or null and then (based on it) get every field where field1 is 1 and field2 is null.The result was the same.

Any idea how to do this?

2016-04-02 09:58:18Z

I have a table like this:Now I want to get all entries where field1 is 1, field2 is null and where datefield is smaller than X or null. I already tried something like this:but thats not working. I always get every entry where datefield is null. It doesn't matter what the other fields are. I also tried to split it in 2 queries: First get every row where datefield is smaller than X or null and then (based on it) get every field where field1 is 1 and field2 is null.The result was the same.

Any idea how to do this?It sounds like you need to make use of advanced where clauses.Given that search in field1 and field2 is constant we will leave them as is, but we are going to adjust your search in datefield a little.Try this:If you ever need to debug a query and see why it isn't working, it can help to see what SQL it is actually executing. You can chain ->toSql() to the end of your eloquent query to generate the SQL.You could merge two queries together:

Correct way to set Bearer token with CURL

HappyCoder

[Correct way to set Bearer token with CURL](https://stackoverflow.com/questions/30426047/correct-way-to-set-bearer-token-with-curl)

I get my bearer token from an API end point and set the following:Next I want to use CURL to access the secure endpoint however I am unsure on how or where to set the Bearer token.I have tried this but but it does not work:EDIT:According to the documentation, I am supposed to be using the bearer token as such: https://apigility.org/documentation/auth/authentication-oauth2

2015-05-24 17:02:10Z

I get my bearer token from an API end point and set the following:Next I want to use CURL to access the secure endpoint however I am unsure on how or where to set the Bearer token.I have tried this but but it does not work:EDIT:According to the documentation, I am supposed to be using the bearer token as such: https://apigility.org/documentation/auth/authentication-oauth2Replace:with:to make it a valid and working Authorization header.This is a cURL function that can send or retrieve data. It should work with any PHP app that supports OAuth:Use it within one-way or two-way requests:This should worksGuzzle example:See https://github.com/andriichuk/php-curl-cookbook#bearer-authIf you are working with a private token instead (like Gitlab API), you should replace:$authorization = "Authorization: Bearer 080042cad6356ad5dc0a720c18b53b8e53d4c274"with:$authorization = "PRIVATE-TOKEN 080042cad6356ad5dc0a720c18b53b8e53d4c274";As at PHP 7.3:

HTTP protocol's PUT and DELETE and their usage in PHP

ilpaijin

[HTTP protocol's PUT and DELETE and their usage in PHP](https://stackoverflow.com/questions/27941207/http-protocols-put-and-delete-and-their-usage-in-php)

I've read the following:Well, we came to the point I lost track of things.PUT and DELETE, they say. I've only ever heard of POST and GET and never saw something like $_PUT or $_DELETE passing by in any PHP code I've ever viewed.What are these methods (PUT) and (DELETE) for and if it's possible to use them in PHP, how would I go about this.Note: I know this is not really a problem but I always grab a learning opportunity if I see one and would very much like to learn to use these methods in PHP if this is possible.

2015-01-14 10:53:58Z

I've read the following:Well, we came to the point I lost track of things.PUT and DELETE, they say. I've only ever heard of POST and GET and never saw something like $_PUT or $_DELETE passing by in any PHP code I've ever viewed.What are these methods (PUT) and (DELETE) for and if it's possible to use them in PHP, how would I go about this.Note: I know this is not really a problem but I always grab a learning opportunity if I see one and would very much like to learn to use these methods in PHP if this is possible.There are a lot of words to spend to explain this, and I'm not skilled enough to do it, but as already posted, a quick recap of what the HTTP specification describes.The protocol basically says this:Basically a protocol is a set of rules you should use from your application to adhere to it. From your application you should retrieve which method was used with $_SERVER['REQUEST_METHOD'] and react consequently. Some applications dealing with browsers that doesn't support PUT or DELETE methods use this trick, a hidden field from the html, with the value of ex.:So from the application you're now able to recognize this as a DELETE request.When you (your browser, your client) request a resource to an HTTP server you must use one of the method that the protocol (HTTP) accept. So you need to pass:so a request should look like:Now, inside you application, PHP take the parameters from this GET request and insert them in a superglobal (accessible allover your application) array. So you can access $_GET['maybe'] that returns 'aparameter`.In case of a POST request you ask for the resource to the HTTP server in a similar way but with an important difference. You provide the data inside the body of the request:Now, inside you application, PHP from this POST request take the parameters and insert them in a superglobal (accessible allover your application) array. So you can access $_POST['maybe'] that returns 'aparameter`.Please pay very attention to Response Status Code too (ex. if you received a PUT request and you've updated that resource without error you should return a 204 status -No content-). Way to use PUT data from PHP:PHP's $_GET and $_POST are poorly named. $_GET is used to access the values of query string parameters, and $_POST lets you access the request body.Using query string parameters is not limited to GET requests, and other kinds of requests than just POST can come with a request body.If you want to find out the verb used to request the page, use $_SERVER['REQUEST_METHOD'].Most suitable place to use these (PUT and DELETE) methods is REST API. Where we use http methods to define the mode of operation for example you want to fetch any resources then you can use following:to add a new item:to Update or Edit:to Delete an existing resource:etc.Now on PHP side you just need to read what HTTP method used so that you can make an action according to that.There are lots of libraries available which can do that for you.There are described in the HTTP spec. In a nutshell, and simplifying somewhat, PUT is for uploading a file to a URL and DELETE is for deleting a file from a URL.$_POST and $_GET are terribly named superglobals. $_POST is for data parsed from the request body. $_GET is for data parsed from the URL. There's nothing that strictly ties data in either of those places (especially the URL) to a particular request method.DELETE requests only care about the URL's path, so there is no data to parse.PUT requests usually care about the entire request body (not a parsed version of it) which you would access with file_get_contents('php://input');.You'd need to map the URL onto a PHP script (e.g. with URL rewriting), test the request method, work out what URL you were actually dealing with, and then write code to do the appropriate action.

Convert a string to a double - is this possible?

csU

[Convert a string to a double - is this possible?](https://stackoverflow.com/questions/2540078/convert-a-string-to-a-double-is-this-possible)

Just wondering in php, if it was possible to convert a string to a double. I am using a financial web service which provides a price as a string. I really need to process this as a double and was wondering how i would convert itthanks

2010-03-29 17:50:21Z

Just wondering in php, if it was possible to convert a string to a double. I am using a financial web service which provides a price as a string. I really need to process this as a double and was wondering how i would convert itthanksJust use floatval().E.g.:And in case you wonder doubleval() is just an alias for floatval().And as the other say, in a financial application, float values are critical as these are not precise enough. E.g. adding two floats could result in something like 12.30000000001 and this error could propagate.For arbitrary precision mathematics PHP offers the Binary Calculator which supports numbers of any size and precision, represented as strings. PHP: bcaddUse doubleval(). But be very careful about using decimals in financial transactions, and validate that user input very carefully.Why is floatval the best option for financial comparison data? bc functions only accurately turn strings into real numbers.Here is comparison of floatval() and bcadd() to turn string to double/float.MONITOR:CODE:**P.S.: ***Use Filters for good ;) !*

How to install jQuery with Composer?

ChocoDeveloper

[How to install jQuery with Composer?](https://stackoverflow.com/questions/11663559/how-to-install-jquery-with-composer)

I have been able to install repositories that do not have a composer.json file like this:I took the "type": "zip" part from the docs, but I couldn't find many other types. For example, I need to install jQuery, but I don't know what to put in type ("js" did not work).Any ideas?EDIT: I'm adding the full solution to help @CMCDragonkai:

2012-07-26 06:22:58Z

I have been able to install repositories that do not have a composer.json file like this:I took the "type": "zip" part from the docs, but I couldn't find many other types. For example, I need to install jQuery, but I don't know what to put in type ("js" did not work).Any ideas?EDIT: I'm adding the full solution to help @CMCDragonkai:This is simply a missing feature. There should probably be a new type of dist which is just a single plaintext file to be downloaded and left as-is. Please file a feature request on the github issue tracker: https://github.com/composer/composer/issues/EDIT : The feature actually exists but wasn't documented. Actually there is an easier way to install jQuery, just type:It uses Component Installer for Composer and by default all assets from Component are installed under components, but it can be customize. (see docs).As outlined already, part one of the solution is defining you own repositories and the "type: ": "file" repository definition option. But a subsequent issue is getting composer to put the JQuery where you want it. As it stands, composer seems to be limited to downloading dependency source under vendor-dir (which is annoying but probably related to autoloading requirements). The general fix to this limitation is to write a composer plugin that overcomes it. Seems to be a few plugins that can manage this. The simplest most lightweight solution I've found is PHP Composer Asset Manager, which is dedicated to managing non PHP/Composer "assets". Though, it has at least one limitation in that changes that the plugin makes are not managed/detected by composer. Still usable.Here's a full composer.json to install JQuery using that plugin:you can install jquery by using npm like so, https://www.npmjs.com/package/jqueryUse npm, yarn or WebPack instead of Composer they are way better for that kind of needs.

What causes:「Notice: Uninitialized string offset」to appear? [closed]

Tomasz Iniewicz

[What causes:「Notice: Uninitialized string offset」to appear? [closed]](https://stackoverflow.com/questions/1263636/what-causes-notice-uninitialized-string-offset-to-appear)

I have a form that users fill out, and on the form there are multiple identical fields, like "project name", "project date", "catagory", etc. Based on how many forms a user is submitting, my goal is to:However, PHP throws me a NOTICE that I don't seem to understand:Notice:PHPThere are references to this issue I am having, but they are not exact and I am having trouble deducing where the actual problem stems from. I would greatly appreciate any help in understanding what is causing the array to not initialize properly.

2009-08-12 00:11:42Z

I have a form that users fill out, and on the form there are multiple identical fields, like "project name", "project date", "catagory", etc. Based on how many forms a user is submitting, my goal is to:However, PHP throws me a NOTICE that I don't seem to understand:Notice:PHPThere are references to this issue I am having, but they are not exact and I am having trouble deducing where the actual problem stems from. I would greatly appreciate any help in understanding what is causing the array to not initialize properly.This error would occur if any of the following variables were actually strings or null instead of arrays, in which case accessing them with an array syntax $var[$i] would be like trying to access a specific character in a string:In short, everything in your insert query.Perhaps the $catagory variable is misspelled?It means one of your arrays isn't actually an array.By the way, your if check is unnecessary. If $varsCount is 0 the for loop won't execute anyway.The error may occur when the number of times you iterate the array is greater than the actual size of the array. for example:will show the error.

  first case u can take the mod of i.. for example or might be it not an array (maybe it was a value and you tried to access it like an array)

  for example:Try to test and initialize your arrays before you use them :If $catagory[$i] doesn't exist, you create (Uninitialized) one ... that's all ;

=> PHP try to read on your table in the address $i, but at this address, there's nothing, this address doesn't exist => PHP return you a notice, and it put nothing to you string.

So you code is not very clean, it takes you some resources that down you server's performance (just a very little).Take care about your MySQL tables default valuesorCheck out the contents of your array with 

Compile regex in PHP

Preston

[Compile regex in PHP](https://stackoverflow.com/questions/209906/compile-regex-in-php)

Is there a way in PHP to compile a regular expression, so that it can then be compared to multiple strings without repeating the compilation process?  Other major languages can do this -- Java, C#, Python, Javascript, etc.

2008-10-16 19:25:06Z

Is there a way in PHP to compile a regular expression, so that it can then be compared to multiple strings without repeating the compilation process?  Other major languages can do this -- Java, C#, Python, Javascript, etc.The Perl-Compatible Regular Expressions library may have already be optimized for your use case without providing a Regex class like other languages do: This is how the study modifier which Imran described can store the compiled expression between calls.preg regexes can use the uppercase S (study) modifier, which is probably the thing you're looking for.http://www.php.net/manual/en/reference.pcre.pattern.modifiers.phpThread is the thread that the script is currently running in. After first use, compiled regexp is cached and next time it is used PHP does not compile it again.Simple test:Caching a regexp makes it 8 times faster!As another commenter has already said, PCRE regexes are already compiled without your having to specifically reference them as such, PCRE keeps an internal hash indexed by the original string you provided.I'm not positive that you can. If you check out Mastering Regular Expressions, some PHP specific optimization techniques are discussed in Chapter10: PHP. Specifically the use of the S pattern modifier to cause the regex engine to "Study" the regular expression before it applies it. Depending on your pattern and your text, this could give you some speed improvements.Edit: you can take a peek at the contents of the book using books.google.com.

Javascript equivalent of PHP's list()

Znarkus

[Javascript equivalent of PHP's list()](https://stackoverflow.com/questions/1954426/javascript-equivalent-of-phps-list)

Really like that function.Is there a Javascript equivalent of that?

2009-12-23 18:11:52Z

Really like that function.Is there a Javascript equivalent of that?There is, in 'newer' versions of Javascript: Destructuring assignment - Javascript 1.7. It's probably only supported in Mozilla-based browsers, and maybe in Rhino.EDIT: actually it wouldn't surprise me if the V8 Javascript library (and thus Chrome) supports this. But don't count on it either 

Now supported in all modern browsers(except IE, of course).try this:ES6 does support this directly now via array destructuring.This is my solution for using List/Explode on Javascript. 

Fiddle Working ExampleFirst the implementation : It also allows for scoping the new generated variables : This was accomplished by modifying an the Array prototype.There is a experimental implementation of list() by PHPJS here:

https://github.com/kvz/phpjs/blob/master/_experimental/array/list.jsCoffeeScript offers destructuring assignment with the syntax:This is pretty much identical to the feature offered in very new JavaScript versions. However, CoffeeScript produces compiled JS that is compatible even with IE6's JavaScript engine, and therefore it's a good option if compatibility is vital.Since most JavaScript implementations don't yet support that feature, you could simply do it in a more JavaScript-like fashion:Example:Check the fiddleAn alternative is to add a list-method to Array.prototype (even I wouldn't recommend it):Example:Check the fiddle for that oneThis is my hack at it; as short as I could get it without writing a function to do it. Gotta be careful of the scope of "this" though:Good enough for a laugh. I still assign each variable one at a time:It's much shorter this way. Besides, if you've got a bunch of variables they should probably be kept in the array, or even better they should be properties of a closure, instead of declaring them all separately.Example: 

How can I find unused functions in a PHP project

Stacey Richards

[How can I find unused functions in a PHP project](https://stackoverflow.com/questions/11532/how-can-i-find-unused-functions-in-a-php-project)

How can I find any unused functions in a PHP project?Are there features or APIs built into PHP that will allow me to analyse my codebase - for example Reflection, token_get_all()?Are these APIs feature rich enough for me not to have to rely on a third party tool to perform this type of analysis?

2008-08-14 19:08:21Z

How can I find any unused functions in a PHP project?Are there features or APIs built into PHP that will allow me to analyse my codebase - for example Reflection, token_get_all()?Are these APIs feature rich enough for me not to have to rely on a third party tool to perform this type of analysis?You can try Sebastian Bergmann's Dead Code Detector:Source: https://github.com/sebastianbergmann/phpdcdNote that it's a static code analyzer, so it might give false positives for methods that only called dynamically, e.g. it cannot detect $foo = 'fn'; $foo();You can install it via PEAR:After that you can use with the following options:More tools:Note: as per the repository notice, this project is no longer maintained and its repository is only kept for archival purposes. So your mileage may vary.Thanks Greg and Dave for the feedback. Wasn't quite what I was looking for, but I decided to put a bit of time into researching it and came up with this quick and dirty solution:I'll probably spend some more time on it so I can quickly find the files and line numbers of the function definitions and references; this information is being gathered, just not displayed.This bit of bash scripting might help:This basically recursively greps the current directory for function definitions, passes the hits to awk, which forms a command to do the following:This command is then sent for execution to bash and the output is grepped for 0, which would indicate 0 calls to the function.Note that this will not solve the problem calebbrown cites above, so there might be some false positives in the output.USAGE: find_unused_functions.php <root_directory>NOTE: This is a ‘quick-n-dirty’ approach to the problem. This script only performs a lexical pass over the files, and does not respect situations where different modules define identically named functions or methods. If you use an IDE for your PHP development, it may offer a more comprehensive solution.Requires PHP 5To save you a copy and paste, a direct download, and any new versions, are available here.If I remember correctly you can use phpCallGraph to do that. It'll generate a nice graph (image) for you with all the methods involved. If a method is not connected to any other, that's a good sign that the method is orphaned.Here's an example: classGallerySystem.pngThe method getKeywordSetOfCategories() is orphaned.Just by the way, you don't have to take an image -- phpCallGraph can also generate a text file, or a PHP array, etc..Because PHP functions/methods can be dynamically invoked, there is no programmatic way to know with certainty if a function will never be called.The only certain way is through manual analysis.I got inspied by Andrey's answer and turned this into a coding standard sniff.The detection is very simple yet powerful:It helped me to remove over 20+ methods I would have to maintain and test.Install ECS:Set up ecs.yaml config:Run the command:See reported methods and remove those you don't fine useful  👍You can read more about it here: Remove Dead Public Methods from Your Codeafaik there is no way. To know which functions "are belonging to whom" you would need to execute the system (runtime late binding function lookup).  But Refactoring tools are based on static code analysis. I really like dynamic typed languages, but in my view they are difficult to scale. The lack of safe refactorings in large codebases and dynamic typed languages is a major drawback for maintainability and handling software evolution.phpxref will identify where functions are called from which would facilitate the analysis - but there's still a certain amount of manual effort involved.

ucfirst() function for multibyte character encodings

Simon

[ucfirst() function for multibyte character encodings](https://stackoverflow.com/questions/2517947/ucfirst-function-for-multibyte-character-encodings)

I've asked about strtolower function. But when using foreign characters it doesn't convert them into uppercase, so I must use:But what can I do, if I want to use ucfirst() function? I haven't found any similar function, where I can set encoding type.

2010-03-25 17:33:44Z

I've asked about strtolower function. But when using foreign characters it doesn't convert them into uppercase, so I must use:But what can I do, if I want to use ucfirst() function? I haven't found any similar function, where I can set encoding type.There is no mb_ucfirst function, as you've already noticed. You can fake a mb_ucfirst with two mb_substr:This is more concise solution, although it is rather similar to ucwords function:  If you need to capitalize string consist of one word, it is the best solution.as of 2019-11-18, it seems nobody on stackoverflow got this right, here's how mb_ucfirst() should be implemented in userland:I´m using cp1250 on webpage, and for Ú mb_ucfirst doesn´t work, so little upgrade:

Count number of iterations in a foreach loop

yuli chika

[Count number of iterations in a foreach loop](https://stackoverflow.com/questions/6220546/count-number-of-iterations-in-a-foreach-loop)

How to calculate how many items in a foreach?I want to count total rows.

2011-06-02 21:21:20Z

How to calculate how many items in a foreach?I want to count total rows.If you just want to find out the number of elements in an array, use count. Now, to answer your question...If you only need the index inside the loop, you could useYou don't need to do it in the foreach. Just use count($Contents).orThere's a few different ways you can tackle this one.  You can set a counter before the foreach() and then just iterate through which is the easiest approach. //Sorry if the code isn't shown correctly. :P//I like this version more, because the counter variable is IN the foreach, and not above.Try:You can do sizeof($Contents) or count($Contents)also this Imagine a counter with an initial value of 0.For every loop, increment the counter value by 1 using $counter = 0;The final counter value returned by the loop will be the number of iterations of your for loop. Find the code below: Try that.

How to generate random date between two dates using php?

M.E

[How to generate random date between two dates using php?](https://stackoverflow.com/questions/1972712/how-to-generate-random-date-between-two-dates-using-php)

I am coding an application where i need to assign random date between two fixed timestampshow i can achieve this using php i've searched first but only found the answer for Java not phpfor example :

2009-12-29 03:02:46Z

I am coding an application where i need to assign random date between two fixed timestampshow i can achieve this using php i've searched first but only found the answer for Java not phpfor example :PHP has the rand() function:It also has mt_rand(), which is generally purported to have better randomness in the results:To turn a timestamp into a string, you can use date(), ie:If given dates are in date time format then use this easiest way of doing this is to convert both numbers to timestamps, then set these as the minimum and maximum bounds on a random number generator.A quick PHP example would be:This function makes use of strtotime() as suggested by zombat to convert a datetime description into a Unix timestamp, and date() to make a valid date out of the random timestamp which has been generated.Another solution using PHP DateTime$start and $end are DateTime objects and we convert into Timestamp. Then we use mt_rand method to get a random Timestamp between them. Finally we recreate a DateTime object.You can just use a random number to determine a random date. Get a random number between 0 and number of days between the dates. Then just add that number to the first date.For example, to get a date a random numbers days between now and 30 days out.Here's another example:The best way :By using carbon and php rand between two datesORThe amount of strtotime in here is WAY too high.

For anyone whose interests span before 1971 and after 2038, here's a modern, flexible solution:Call it any number of ways ...As is, the function requires date1 <= date2.An other solution where we can use date_format :Source : https://gist.github.com/samcrosoft/6550473You could use for example :i had a same situation before and none of the above answers fix my problem so i Came with new functionNow the testing Part(Data may change while testing )print_r(randomDate($fromDate,$toDate,1));result will beprint_r(randomDate($fromDate,$toDate,1));But after the few tests i was thinking about  what if the inputs be likeSo the duplicates may occur while generating the large number of dates such as 10,000so i have added array_unique and this will return only the non duplicatesSimplest of all, this small function works for me

I wrote it in a helper class datetime as a static methodPretty good question; needed to generate some random sample data for an app.You could use the following function with optional arguments to generate random dates:sample input:readers requirements could vary from app to another, in general hope this function is a handy tool where you need to generate some random dates/ sample data for your application.Please note that the function initially in debug mode, so change it to $mood="" other than debug in production .The function accepts:the output in not debug mode is random number according to optional specifications.tested with PHP 7.x Full random date and time

Update without touching timestamps (Laravel)

Jannick Vandaele

[Update without touching timestamps (Laravel)](https://stackoverflow.com/questions/18904853/update-without-touching-timestamps-laravel)

Is it possible to update a user without touching the timestamps?I don't want to disable the timestamps completly..grtz

2013-09-19 21:02:11Z

Is it possible to update a user without touching the timestamps?I don't want to disable the timestamps completly..grtzDisable it temporarily:You can optionally re-enable them after saving.This is a Laravel 4 and 5 only feature and does not apply to Laravel 3.In Laravel 5.2, you can set the public field $timestamps to false like this:Or you can pass the options as a parameter of the save() function :For a deeper understanding of how it works, you can have a look at the class \Illuminate\Database\Eloquent\Model, in the method performUpdate(Builder $query, array $options = []) :The timestamps fields are updated only if the public property timestamps equals true or Arr::get($options, 'timestamps', true) returns true (which it does by default if the $options array does not contain the key timestamps).As soon as one of these two returns false, the timestamps fields are not updated.To add to Antonio Carlos Ribeiro's answerIf your code requires timestamps de-activation more than 50% of the time - maybe you should disable the auto update and manually access it.In eloquent when you extend the eloquent model you can disable timestamp by puttingUPDATEpublic $timestamps = false;inside your model.Above samples works cool, but only for single object (only one row per time).This is easy way how to temporarily disable timestamps if you want to update whole collection.Now you can simply call something like this:For Laravel 5.x users who are trying to perform a Model::update() call, to make it work you can use As the Model::update function does not take a second argument anymore.

ref: laravel 5.0 apiTested and working on version 5.2.If you need to update single model queries:orIf you need to update multiple model queries useinstead ofI ran into the situation of needing to do a mass update that involves a join, so updated_at was causing duplicate column conflicts. I fixed it with this code without needing a scope:You can also use this syntax:I solved it my way, without playing with any configs (not the best way but helpful) :Don't forget to make updated_at fillable in your model.

Laravel 5 show ErrorException file_put_contents failed to open stream: No such file or directory

Evgeniy

[Laravel 5 show ErrorException file_put_contents failed to open stream: No such file or directory](https://stackoverflow.com/questions/46959985/laravel-5-show-errorexception-file-put-contents-failed-to-open-stream-no-such-f)

I have a project on Laravel 5 and I work with it at the office and at home too. It works fine, but recently at home it stopped working. Laravel show me two ErrorException and I'm searching problem decision with Google and find information about correct rights. All advice is about Linux, but I'am work in Windows at the office and at home too.When I try to clear application cache and view cache, artisan talk to me - ...cleared. But cache data and views are present in storage.How can I fix this problem?Thanks in advance!

2017-10-26 17:04:06Z

I have a project on Laravel 5 and I work with it at the office and at home too. It works fine, but recently at home it stopped working. Laravel show me two ErrorException and I'm searching problem decision with Google and find information about correct rights. All advice is about Linux, but I'am work in Windows at the office and at home too.When I try to clear application cache and view cache, artisan talk to me - ...cleared. But cache data and views are present in storage.How can I fix this problem?Thanks in advance!The best way to solve this problem is, go to directory "laravel/bootstrap/cache" and delete config.php file. or you can rename it as well like config.php.old

And your problem will be fix.

Happy coding :-)You should typically run the php artisan config:cache command as part of your production deployment routine. As a solution to your problem, I suggest youTo do this, run the following Artisan commands on your command lineWhere you don't have access to the command line on your server, you can programmatically execute the command by adding the following to your routes:And then call the clear-cache route from your browser.I hope this is helpful.After some research I understand - I have very similar, but different root project locations and its cached in /bootstrap/cache. After cache clearing project started. Actually I faced this issue when I moved my project from server to local.in four basic folders are required cache, sessions, testing, views In My case sessions was missing might be in gitignore.So I manually created session folder and refreshed browser and it was working.So any of the missing folder if we delete this problem can be solved.This type of issue generally occurs while migrating one server to another, one folder to another. Laravel keeps the cache and configuration (file name ) when the folder is different then this problem occurs.Solution Run Following command: https://laravel.com/docs/5.6/configuration#configuration-cachingIn case of shared hosting when you do not have command line access simply navigate to laravel/bootstrap/cache folder and delete (or rename) config.php and you are all done!This is a silly mistake, and a different answer compared to the others, but I'll add it because it happened to me.If you use WSL (linux bash on windows) to manage your laravel application, while using your windows apache to run your server, then running any caching commands in the wsl will store the linux path rather than the windows path to the sessions and other folders.Simply run the cache clearing commands in the powershell, rather than in WSL.Was enough for me.Try with these commands that have been useful with those errorspath\project\storage\framework\views...path\project\storage\framework/sessions...Maybe there is an issue with your composer file. You could try:sourceThe reason for this problem is the cache files in localhost. According to that I've tried several things as follows to clear the cache on my project, but every time I've failed.So I've found a solution for this problem after each and every above steps failed and it worked for me perfectly. I deleted the cache.php file in host_route/bootstrap/cache directory. I think this answer will help your problem.In my case it was not anything that could be fixed with php artisan commands. The issue was folder permissions for the /storage folder. The error did not make that clear.  The best way to solve this problem is, go to directory laravel/bootstrap/cache and delete all files from cache. To do this, run the following Artisan commands on your command line

         1. php artisan config:clear

         2. php artisan cache:clear

         3. php artisan config:cacheIn your panel or server, you can execute commands by adding the following to your routes:And then call the www.yourdomain.com/clear-cache route from your browser.If you are running laravel inside docker then access its filesystemNext navigate to your laravel projects root directory. Make sure that you have inside storage/framework folder:And they should be both readable and writable.I had similar problems because of .gitignore for the /storage folder on first machine, then cloned repository on second machine and laravel was revision to write down sessions cache So, manually creating folder /storage/sessions might be an solution.. 

How to get previous month and year relative to today, using strtotime and date?

mr.b

[How to get previous month and year relative to today, using strtotime and date?](https://stackoverflow.com/questions/5489502/how-to-get-previous-month-and-year-relative-to-today-using-strtotime-and-date)

I need to get previous month and year, relative to current date.However, see following example.This behavior is understandable (to a certain point), due to different number of days in february and march, and code in example above is what I need, but works only 100% correctly for between 1st and 28th of each month.So, how to get last month AND year (think of date("Y-m")) in the most elegant manner as possible, which works for every day of the year? Optimal solution will be based on strtotime argument parsing.Update. To clarify requirements a bit.I have a piece of code that gets some statistics of last couple of months, but I first show stats from last month, and then load other months when needed. That's intended purpose. So, during THIS month, I want to find out which month-year should I pull in order to load PREVIOUS month stats.I also have a code that is timezone-aware (not really important right now), and that accepts strtotime-compatible string as input (to initialize internal date), and then allows date/time to be adjusted, also using strtotime-compatible strings.I know it can be done with few conditionals and basic math, but that's really messy, compared to this, for example (if it worked correctly, of course):So, I ONLY need previous month and year, in a strtotime-compatible fashion.Answer (thanks, @dnagirl):

2011-03-30 16:56:05Z

I need to get previous month and year, relative to current date.However, see following example.This behavior is understandable (to a certain point), due to different number of days in february and march, and code in example above is what I need, but works only 100% correctly for between 1st and 28th of each month.So, how to get last month AND year (think of date("Y-m")) in the most elegant manner as possible, which works for every day of the year? Optimal solution will be based on strtotime argument parsing.Update. To clarify requirements a bit.I have a piece of code that gets some statistics of last couple of months, but I first show stats from last month, and then load other months when needed. That's intended purpose. So, during THIS month, I want to find out which month-year should I pull in order to load PREVIOUS month stats.I also have a code that is timezone-aware (not really important right now), and that accepts strtotime-compatible string as input (to initialize internal date), and then allows date/time to be adjusted, also using strtotime-compatible strings.I know it can be done with few conditionals and basic math, but that's really messy, compared to this, for example (if it worked correctly, of course):So, I ONLY need previous month and year, in a strtotime-compatible fashion.Answer (thanks, @dnagirl):Have a look at the DateTime class. It should do the calculations correctly and the date formats are compatible with strttotime.  Something like:if the day itself doesn't matter do this:I found an answer as I had the same issue today which is a 31st. It's not a bug in php as some would suggest, but is the expected functionality (in some since). According to this post what strtotime actually does is set the month back by one and does not modify the number of days. So in the event of today, May 31st, it's looking for April-31st which is an invalid date. So it then takes April 30 an then adds 1 day past it and yields May 1st. In your example 2011-03-30, it would go back one month to February 30th, which is invalid since February only has 28 days. It then takes difference of those days (30-28 = 2) and then moves two days past February 28th which is March 2nd.As others have pointed out, the best way to get "last month" is to add in either "first day of" or "last day of" using either strtotime or the DateTime object:So using these it's possible to create a date range if your making a query etc.If you want the previous year and month relative to a specific date and have DateTime available then you can do this:strtotime have second timestamp parameter that make the first parameter relative to second parameter. So you can do this:if i understand the question correctly you just want last month and the year it is in:Here is the example: http://codepad.org/c99nVKG8ehh, its not a bug as one person mentioned. that is the expected behavior as the number of days in a month is  often different. The easiest way to get the previous month using strtotime would probably be to use -1 month from the first of this month.I think you've found a bug in the strtotime function. Whenever I have to work around this, I always find myself doing math on the month/year values. Try something like this: Perhaps slightly more long winded than you want, but i've used more code than maybe nescessary in order for it to be more readable.That said, it comes out with the same result as you are getting - what is it you want/expect it to come out with?If you just want the month and year, then just set the day to be '01' rather than taking 'todays' day:That should give you what you need.  You can just set the hour, minute and second to zero as well as you aren't interested in using those.Cuts it down quite a bit ;-)This is because the previous month has less days than the current month. I've fixed this by first checking if the previous month has less days that the current and changing the calculation based on it.If it has less days get the last day of -1 month else get the current day -1 month:would solve this If a DateTime solution is acceptable this snippet returns the year of last month and month of last month avoiding the possible trap when you run this in January.The resulting date is dependent to the number of days the input month is consist of. If input month is february (28 days), 28 days before february 5 is january 8. If input is may 17, 31 days before is april 16. Likewise, if input is may 31, resulting date will be april 30.NOTE: the input takes complete date ('y-m-d') and outputs ('y-m-d') you can modify this code to suit your needs. 

Html/PHP - Form - Input as array

Evo_x

[Html/PHP - Form - Input as array](https://stackoverflow.com/questions/20184670/html-php-form-input-as-array)

I got a form like thisWhat I'd like to have as $_POST output is an array likeI know I could do something like name="levels[1][build_time]" and so on but since these elements get added dynamically, it would be hard to add an index. Is there any other way?EDIT:As suggested, I changed my form. I also included my whole HTML now, because I think I'm missing something here. My HTML now:The output I get now is:Edit 2:As suggested in your edit, I edited my form and moved the square brackets to the end of the name. The output I get now is:I guess that would kinda work but it still looks complicated. No better way?

2013-11-25 04:16:20Z

I got a form like thisWhat I'd like to have as $_POST output is an array likeI know I could do something like name="levels[1][build_time]" and so on but since these elements get added dynamically, it would be hard to add an index. Is there any other way?EDIT:As suggested, I changed my form. I also included my whole HTML now, because I think I'm missing something here. My HTML now:The output I get now is:Edit 2:As suggested in your edit, I edited my form and moved the square brackets to the end of the name. The output I get now is:I guess that would kinda work but it still looks complicated. No better way?Simply add [] to those names likeTake that template and then you can add those even using a loop.Then you can add those dynamically as much as you want, without having to provide an index. PHP will pick them up just like your expected scenario example.EditSorry I had braces in the wrong place, which would make every new value as a new array element. Use the updated code now and this will give you the following array structureSame index on both sub arrays will give you your pair. For exampleIf is ok for you to index the array you can do this:... to achieve that:But if you remove one pair of inputs (dynamically, I suppose) from the middle of the form then you'll get holes in your array, unless you update the input names...HTML: Use names asPHP:$newArray will hold data as you wantin addition:

for those who have a empty POST variable, don't use this:rather use this (as it is already here in this example):

Can't concatenate 2 arrays in PHP

alex

[Can't concatenate 2 arrays in PHP](https://stackoverflow.com/questions/2650177/cant-concatenate-2-arrays-in-php)

I've recently learned how to join 2 arrays using the + operator in PHP.But consider this code...Output isWhy does this not work? Skipping the shorthand and using $array = $array + array('Item 2') does not work either. Does it have something to do with the keys?

2010-04-16 02:22:32Z

I've recently learned how to join 2 arrays using the + operator in PHP.But consider this code...Output isWhy does this not work? Skipping the shorthand and using $array = $array + array('Item 2') does not work either. Does it have something to do with the keys?Both will have a key of 0, and that method of combining the arrays will collapse duplicates. Try using array_merge() instead.If the elements in your array used different keys, the + operator would be more appropriate.Edit: Added a code snippet to clarify Use array_merge()

See the documentation here:

http://php.net/manual/en/function.array-merge.php+ is called the Union operator, which differs from a Concatenation operator (PHP doesn't have one for arrays). The description clearly says:With the example:Since both your arrays have one entry with the key 0, the result is expected.To concatenate, use array_merge.All previous answers are incorrect!

merge actually merges the arrays, meaning, if the arrays have a common item one of the copies will be omitted. Same goes for union.I didn't find a "work-around" for this issue, but to actually do it manually...here it goes:Try array_merge.I think its because you are not assigning a key to either, so they both have key of 0, and the + does not re-index, so its trying to over write it.orIt is indeed a key conflict. When concatenating arrays, duplicate keys are not overwritten.Instead you must use array_merge()This works for non-associative arrays:while(($item = array_shift($array2)) !== null && array_push($array1, $item));Try saying Although it looks like you're trying to add an array into an array, thus $array[][] but that's not what your title suggests.you may use operator . 

$array3 = $array1.$array2;

Converting Object to JSON and JSON to Object in PHP, (library like Gson for Java)

farhan ali

[Converting Object to JSON and JSON to Object in PHP, (library like Gson for Java)](https://stackoverflow.com/questions/9858448/converting-object-to-json-and-json-to-object-in-php-library-like-gson-for-java)

I am developing a web application in PHP,I need to transfer many objects from server as JSON string, is there any library existing for PHP to convert object to JSON and JSON String to Objec, like Gson library for Java.

2012-03-25 06:58:49Z

I am developing a web application in PHP,I need to transfer many objects from server as JSON string, is there any library existing for PHP to convert object to JSON and JSON String to Objec, like Gson library for Java.This should do the trick!Here's an exampleIf you want the output as an Array instead of an Object, pass true to json_decodeMore about json_encode()See also: json_decode()for more extendability for large scale apps use oop style with encapsulated fields. Simple way :-echo json_encode(new Fruit()); //which outputs: Real Gson on PHP :-I made a method to solve this. 

My approach is:1 - Create a abstract class that have a method to convert Objects to Array (including private attr) using Regex.

2 - Convert the returned array to json.I use this Abstract class as parent of all my domain classesClass code:

How to check if a string is base64 valid in PHP

Alias

[How to check if a string is base64 valid in PHP](https://stackoverflow.com/questions/4278106/how-to-check-if-a-string-is-base64-valid-in-php)

I have a string and want to test using PHP if it's a valid base64 encoded or not.

2010-11-25 14:29:33Z

I have a string and want to test using PHP if it's a valid base64 encoded or not.I realise that this is an old topic, but using the strict parameter isn't necessarily going to help.Running base64_decode on a string such as "I am not base 64 encoded" will not return false.If however you try decoding the string with strict and re-encode it with base64_encode, you can compare the result with the original data to determine if it's a valid bas64 encoded value:You can use this function:This code should work, as the decode function returns FALSE if the string is not valid:You can read more about the base64_decode function in the documentation.I think the only way to do that is to do a base64_decode() with the $strict parameter set to true, and see whether it returns false.Just for strings, you could use this function, that checks several base64 properties before returning true:This is a really old question, but I found the following approach to be practically bullet proof. It also takes into account those weird strings with invalid characters that would cause an exception when validating.I got the idea from this page and adapted it to PHP.I tried the following:The following code implements the above steps:The above code will may return unexpected results. For e.g for the string "json" it will return false. "json" may be a valid base64 encoded string since the number of characters it has is a multiple of 4 and all characters are in the allowed range for base64 encoded strings. It seems we must know the range of allowed characters of the original string and then check if the decoded data has those characters.I write this method is working perfectly on my projects. When you pass the base64 Image to this method, If it valid return true else return false. Let's try and let me know any wrong. I will edit and learn in the feature. You can just send the string through base64_decode (with $strict set to TRUE), it will return FALSE if the input is invalid.You can also use f.i. regular expressions see whether the string contains any characters outside the base64 alphabet, and check whether it contains the right amount of padding at the end (= characters). But just using base64_decode is much easier, and there shouldn't be a risk of a malformed string causing any harm.base64_decode() should return false if your base64 encoded data is not valid.Old topic, but I've found this function and It's working:i know that i resort a very old question, and i tried all of the methods proposed; i finally end up with this regex that cover almost all of my cases:basically i check for every character that is not printable (:graph:) is not a space or tab (\s) and is not a unicode letter (all accent ex: èéùìà etc.)i still get false positive with this chars: £§° but i never use them in a string and for me is perfectly fine to invalidate them.

I aggregate this check with the function proposed by @merlucinso the result:I code a solution to validate images checking the sintaxyBut a safe way is using InterventionMOST ANSWERS HERE ARE NOT RELIABLEIn fact, there is no reliable answer, as many non-base64-encoded text will be readable as base64-encoded, so there's no default way to know for sure. Further, it's worth noting that base64_decode will decode many invalid strings 

For exmaple, and is not valid base64 encoding, but base64_decode WILL decode it. As jw specifically. (I learned this the hard way)That said, your most reliable method is, if you control the input, to add an identifier to the string after you encode it that is unique and not base64, and include it along with other checks. It's not bullet-proof, but it's a lot more bullet resistant than any other solution I've seen. For example:Alright guys... finally I have found a bullet proof solution for this problem. Use this below function to check if the string is base64 encoded or not - If data is not valid base64 then function base64_decode($string, true) will return FALSE.I am using this approach. It expects the last 2 characters to be ==substr($buff, -2, 1) == '=' && substr($buff, -1, 1) == '=')Update: I ended up doing another check if the one above fails

base64_decode($buff, true)

facebook Uncaught OAuthException: An active access token must be used to query information about the current user

user401183

[facebook Uncaught OAuthException: An active access token must be used to query information about the current user](https://stackoverflow.com/questions/6034813/facebook-uncaught-oauthexception-an-active-access-token-must-be-used-to-query-i)

I've been struggling to find out what is happening with this.

My scripts were working fine for a bit and suddenly half stopped.I'm accessing the api and am getting back an access token. With the access token, I can access a users public info just fine. However, when I try to post info to their FB account I get this error.Any idea what is happening here?

I'm also using sessions on my site to keep track of internal user ids. Not sure if my sessions could be causing a problem.This is my upload script where I'm getting an error.

2011-05-17 17:37:34Z

I've been struggling to find out what is happening with this.

My scripts were working fine for a bit and suddenly half stopped.I'm accessing the api and am getting back an access token. With the access token, I can access a users public info just fine. However, when I try to post info to their FB account I get this error.Any idea what is happening here?

I'm also using sessions on my site to keep track of internal user ids. Not sure if my sessions could be causing a problem.This is my upload script where I'm getting an error.Just check for the current Facebook user id $user and if it returned null then you need to reauthorize the user (or use the custom $_SESSION user id value - not recommended)I've written a tutorial on how to upload a picture to the user's wall.instead ofit works.So I had the same issue, but it was because I was saving the access token but not using it.  It could be because I'm super sleepy because of due dates, or maybe I just didn't think about it! But in case anyone else is in the same situation:When I log in the user I save the access token:Now when I make requests to facebook I just do something like this:After a certain amount of time, your access token expires.To prevent this, you can request the 'offline_access' permission during the authentication, as noted here: Do Facebook Oauth 2.0 Access Tokens Expire?Had the same problem and the solution was to reauthorize the user.

Check it here:Saved project and opened on my test enviroment and it worked again. As I did, you can comment your previous code and try.I have got the same issue when tried to get users information without auth.Check if you have loggen in before any request.The code above should solve your issue.I had the same issue but I can solve this issue by cleaning the cookies and cache from my browser (ctrl+shift+R). Also, you must ensure that your access token is active.Hope this will help you to solve your problem.

What does this mean?「Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM」

openfrog

[What does this mean?「Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM」](https://stackoverflow.com/questions/1966010/what-does-this-mean-parse-error-syntax-error-unexpected-t-paamayim-nekudotay)

T_PAAMAYIM_NEKUDOTAYIM sounds really exotic, but most certainly absolutely nonsense to me. I traced it all down to this lines of code:In the constructor I create a Config object. Here's the class:No idea why this doesnt work / what the error means...

2009-12-27 14:02:50Z

T_PAAMAYIM_NEKUDOTAYIM sounds really exotic, but most certainly absolutely nonsense to me. I traced it all down to this lines of code:In the constructor I create a Config object. Here's the class:No idea why this doesnt work / what the error means...T_PAAMAYIM_NEKUDOTAYIM is the double colon scope resolution thingy PHP uses - ::Quick glance at your code, I think this line:should beThe first is the way to call a method statically - this code would be valid if $cnf contained a string that was also a valid class. The -> syntax is for calling a method on an instance of a class/object.Just my two cents for future visitors who have this problem.This is the correct syntax for PHP 5.3, for example if you call static method from the class name:If you previously assign the ClassName to the $cnf variable, you can call the static method from it (we are talking about PHP 5.3): However, this sintax doesn't work on PHP 5.2 or lower, and you need to use the following:Hope this helps people having this error in 5.2 version (don't know if this was openfrog's version).In your exampleProbably should be:And make getConfig not staticif you still need to use the double-colon then make sure your on PHP 5.3+The error is down to an "inappropriate use" of the double colon operator:as by using the :: you're attempting to call a static method of the class itself. In your example you want to call a non-static method on an instantiated object.I think what you want is:According to wikipedia, it means a "double colon" scope resolution operator.http://en.wikipedia.org/wiki/Scope_resolution_operatorIt's the name for the :: operatorWikipedia

Why should I use templating system in PHP?

Josef Sábl

[Why should I use templating system in PHP?](https://stackoverflow.com/questions/436014/why-should-i-use-templating-system-in-php)

Why should I use templating system in PHP?The reasoning behind my question is: PHP itself is feature rich templating system, why should I install another template engine?The only two pros I found so far are:... and both are quite negligible when compared to cons.Small example:PHPSmartyI really don't see any difference at all.

2009-01-12 16:37:12Z

Why should I use templating system in PHP?The reasoning behind my question is: PHP itself is feature rich templating system, why should I install another template engine?The only two pros I found so far are:... and both are quite negligible when compared to cons.Small example:PHPSmartyI really don't see any difference at all.Yes, as you said, if you don't force yourself to use a templating engine  inside PHP ( the templating engine ) it becomes easy to slip and stop separating concerns. However, the same people who have problems separating concerns end up generating HTML and feeding it to smarty, or executing PHP code in Smarty, so Smarty's hardly solving your concern separation problem. See also:The main reason people use template systems is to separate logic from presentation. There are several benefits that come from that.Firstly, you can hand off a template to a web designer who can move things around as they see fit, without them having to worry about keeping the flow of the code. They don't need to understand PHP, just to know to leave the special tags alone. They may have to learn a few simple semantics for a few tags but that is a lot simpler than learning the whole language.Also, by splitting the page into separate files, both programmer and designer can work on the same 'page' at once, checking in to source control as they need, without conflicts. Designers can test their template visuals against a stable version of the code while the programmer is making other, potentially breaking changes, against their own copy. But if these people were both editing the same file and had to merge in different changes, you can encounter problems.It also enforces good programming practice in keeping business logic away from presentation logic. If you put your business logic mixed in with the presentation then you have a more difficult time extracting it if you need to present it differently later. Different modes of presentation in web apps are increasingly popular these days: RSS/ATOM feeds, JSON or AJAX responses, WML for handheld devices, etc. With a template system these can often be done entirely with a template and no or little change to anything else.Not everybody will need or appreciate these benefits however. PHP's advantage over Java/Python/Ruby/etc is that you can quickly hack up web pages with some logic in them, and that's all well and good.Using non-PHP templates with the excuse of separating logic is nonsense. If the developer doesn't understand what the business-view logic separation is and how it should be done, then the problem must be addressed appropriately. Otherwise you end up with HTML in business logic or business logic in templates -- no templating engine is going to save you. You have to teach the developer the basics.And if the developer does understand that, the templating system is only a limitation. It doesn't add any value to the development process, only overhead of learning a new syntax, keeping another library up to date, and slower execution. While the latter can be solved with caching and whatnot, this only remedies a problem that otherwise wouldn't exist. So, templating systems offer no value, no advantage at all.There is one exception, though, where I think using a non-PHP templating system is reasonable: when view-logic programmers must have limited access to the templates. For example if you're a provider for a blog-hosting system and you want to allow your users to personalize and code their templates, without allowing them to execute arbitrary code. This argument, however, does not apply to cases where a designer is willing to learn a little code to help programming the UI. If he can learn Smarty, he can surely learn PHP.There is still a good reason for a template system to use, however not Smarty, but PHPTAL. PHPTAL templates are valid XML (and hence XHTML) files. You can farther use dummy content in PHPTAL and so get valid XHTML file with the final appearance, that can be processed and tested with standard tools. Here is a small example:PHPTAL template engine will automatically insert all values from users array and replace our dummy values. Nevertheless, the table is already valid XHTML that can be displayed in a browser of your choice.PHP is pretty much a templating system.  The key is to force yourself to separate logic from presentation on your own.  Using Smarty or something like that only makes it slightly more inconvenient to mix logic and presentation.  If you can't make yourself separate them on your own, using a templating system isn't going to help.  All it's going to do is eat up additional processing power.The key is to not alter any values in your presentation code.  To do this, I think PHP itself is just as effective as Smarty if you use the if/endif syntax:for me, one of the big features of templates engines is that the cache layer its transparent for you. I've been using smarty long time ago, and the cache stuff make the life easier. also the smarty design allow you to use your own cache function.

In my case I choose if for some page should use memcache or disk to store the template output. in the other hand if your site has a big traffic and you dont know how to manage smarty and tuning it well this any template engine could be a site killer. but even not using smarty your site can die also.flickr is currently using smarty. its shouldn't be soo bad, isn't?Mostly I think to avoid any "unsafe" backend logic to be applied in templates.

Since most of the times templates are handed to designers, we only want to give them a closed set of things they can do.I like the ability to trivially display any template from any PHP file (and include fragments of templates inside each other, for common elements like nav bars).  For example, suppose you had a page that normally prints some information if you're logged in or an error if you're not.  With PHP, you'd write something like:In Smarty, it could be something like this (forgive my probably wrong syntax, it's been a while):If you were really clever, you could even display the login page template instead of the error template, optionally with a message explaining why the user ended up there.  And if you went with the technique as I wrote it and then decided you wanted to switch to displaying the login box, it's only a single line change!  For me, it's not just about keeping the separation of view and logic, but about the ability to reuse common elements of the view from many places.I'm happy using an MVC framework like code igniter. I find that in the 'views' I tend to stick to php code that relates only to how values are displayed. I have a library of formatting functions i can use in the views to that effect. One of the premises of code igniter is to avoid a templating language because of the way it can restrict you and the slow down incurred.I find that is better for designers to learn some PHP, so that they can achieve what they need to do eg. alternating class names. It will also make them more useful in the long term and it's not a huge leap from one syntax to the other. You forgot htmlspecialchars() twice. That's why you need templating system.Smarty is poor. Don't judge templating systems based on that.Your analysis is reasonable. I suppose:Personally, I think they're more hassle than they're worth. Particularly they don't work if you want to hand

the templates to "designers" since the WYSIWYG tools don't know what to do with them.One template engine advantage that I didn't see was the possibility of dynamic html elements - something like asp.net controls. For example, with PEAR's HTML Template Flexy you can have dynamic form elements that automatically maintain state. A regular html select element can be populated and have the selected item set in the code behind without loops or conditionals in the template.I think that cleaner syntax is quite a big win. Although it may look like only a few characters, but when you do it every day, then each character starts to count.And {$myvar|escape} is IMHO quite a bit shorter than <?php echo htmlspecialchars($myvar); ?>. (Keeping in mind that <?=$foo?> syntax is only available when it is specially enabled in PHP conf.)I don't think you should use a template engine.  Instead you should use something like Zend_View which encourages you to do separate logic from presentation, but allows you to build your presentation layer in PHP.Just remember to separate logic and final output (presentation). This is better accomplished with a templating framework. But you dont have to learn something like Smarty. Many people here have the correct reply. Smarty is not templating in PHP. Far from it. Smarty is there mostly for those who have to use designers (ie non-programmers) to edit and setup the display of pages. If everyone who are gonna change the layout of your pages can program, you can go with a more PHP code oriented templating system. But you really should have all your output data ready and send it to the template. If you let each page fetch, process and display the content, you will have to refactor it sooner then later.When you're writing code for someone else. For example, I was once involved in the creation of a rigid web application framework that should be customizable for our customers. One important request was that the customer could hire a designer to modify the templates without having to be able to program. Even more important, he might not be authorized to change the code.Smarty for example allows to implement quite rigid restrictions on what the template may do. Basically, our application disabled all but the most basic code constructs and a selected set of modifier functions. So we had two goals that were served well by a template engine: simplicity and security.And let us not forget the future.  Websites are old almost the minute they are published.  You WILL need to update the look and feel at some point.  If you maintain separation often times a designer alone can complete a whole new website with the same programming on the back end.  This allows for faster and cheaper redesigns, allowing you to only involve the programmer if new functionality is required.Some might argue that Smarty does what PHP can do already: separate the presentation from business logic. The PHP programming language is great for code development but when mixed with HTML, the syntax of PHP statements can be a mess to manage. Smarty makes up for this by insulating PHP from the presentation with a much simpler tag-based syntax. The tags reveal application content, enforcing a clean separation from PHP (application) code. No PHP knowledge is required to manage Smarty templates.The importance of this separation is situational. It is commonly more important to web designers than it is to PHP developers. Therefore, Smarty is commonly a good fit when the roles of developers and designers are separated. There is no right or wrong answer: every development team has their own preferences for managing code and templates. Aside from a clean tag-based syntax, Smarty also offers a wide variety of tools to manage presentation: granular data caching, template inheritance and functional sandboxing to name a few. Business requirements and the PHP code Smarty is being used with will play a large role in determining if Smarty is a good fit.I'd wager that if a PHP template language was so coercive as to force you to use it, you wouldn't use it at all. The ability to 'jump out' and do things your way when in trouble is one of the attractives of PHP. I don't say that it's a good thing, nor that the code will be maintainable, just that in the initial considerations, I wouldn't choose a template language that blocked me completely.Otherwise, I agree that templating systems help you divide work between coding and design, and possibly letting designers design and the coding to us.I personally always use templating engines in php, python or whatever.The first obvious reason already mentioned by others:Yeah sure, discipline would do just fine, when you have it.But this is just a tiny aspect of why you would use a templating engine. Most of them are more than just an engine and could be considered templating frameworks, whether you like it or not.For example, Smarty also has advanced caching features like partial caching. Really useful stuff, things you would have todo all by yourself when using just php as templating language.And please do not forget all those really useful helper functions just a quick search away in the docs. Most of them also provide an easy way to plugin your own functions and/or toolkit.So yes, it's a matter of choice. When in need for really simple templating, consider showing some discipline a keep your logic out of your templates. But when you expect your application to grow, you will eventually be in need of template framework's features. And by then, you hopefully not reinventing the wheel by coding it all yourslef.And last but not least, for me there is one killer feature available in some templating frameworks.I've came to know it from Django and i'm now using it in the latest Smarty 3. The guys from the Symphony framework also have Twig, which you can consider a port with the Django syntax.It's look a bit strange at first, but is extremely powerful. You build your skeleton and define various blocks. You can extend such skeleton and fill in (override) the blocks with your content.For me that's a keeper!template management system, we can manage the template files separately. system execution time will be faster then normal PHP project. so here PHP files and template files are separately maintained. once run the files the code will be saved it template_c. so its not compile many times. I several times used tinybutstrong, which has a pretty neat and simple syntax. No loops or pseudocode in the html template.From their homepage:Developers who will make use of OOPs concepts heavily,like JAVA/Spring/Oracle PL-SQL people,they say that PHP language itself is used for presentation/view/display logic in the Enterprise level projects.

In these BIG projects the backend is Oracle,the database is fetched using pl-slq/java and presentation is php.The best example is facebook.http://en.wikipedia.org/wiki/Facebook

facebook uses php for presentation, java/c++ as backend interface. The only reason php is used as presentation because it works closely with HTML,but java/c++ is more OOPs based and can't be fit directly with HTML.

Tell me one CMS(joomla/drupal/wordpress) or framework(zend/symfony/Yii) which makes use of Smarty? So WHY smarty is necessary?Summarizing, I am adding a few of my thoughts. We should use templating system if it gives possibility to:I like using templates for a couple of reasons:1) It cleans up the readability of the PHP code. My PHP files become bloated and ungraceful when there are print("") statements with chunks of HTML everywhere. Also, issues crop up like how do you pass variables into the HTML text? Do you use  tags everywhere? Do you use print("") and escape your HTML quotes and concatenate your variables? Do you use print("") and use single quotes in HTML, going against the standard, and insert your variables directly?2) It cleans up the presentation of the HTML code. It can become hard to keep your generated HTML looking good if it is cut and hacked to pieces across multiple files. For example, your indenting can get way off.3) It allows you to create multiple templates, and then a logged in user can select which template/skin he wants to display when browsing your website, and you can also quickly and effortlessly change the default template to something else if you're so inclined.Overall, it's just a better way of organizing everything. There is a little bit of tradeoff in having to learn and type template class commands, open multiple files, etc. But in my opinion I think it is worth it because the code's readability and organization goes up.

replace &nbsp; characters that are hidden in text

Behnam

[replace &nbsp; characters that are hidden in text](https://stackoverflow.com/questions/9870974/replace-nbsp-characters-that-are-hidden-in-text)

How to remove &nbsp; (that are hidden) and SPACES in below text buti tested:UPDATE: 

Thanks

2012-03-26 11:05:38Z

How to remove &nbsp; (that are hidden) and SPACES in below text buti tested:UPDATE: 

ThanksThis solution will work, I tested it:Not tested, but if you use something like:That should remove all spaces.UPDATETo remove all spaces and &nbsp; references, use something like:UPDATE 2Try this:Forgot to say, reconvert the html entities so add this after the replacement:All solutions above kind of work, until one starts to work with German language where there are such letters:and othere simial ones.

I use the following code: More details here: PCRE(3) Library Functions Manual This worked for me.

How do I use PHPUnit with CodeIgniter?

zechdc

[How do I use PHPUnit with CodeIgniter?](https://stackoverflow.com/questions/8395147/how-do-i-use-phpunit-with-codeigniter)

I have read and read articles on PHPUnit, SimpleTest, and other Unit Testing frameworks. They all sound so great! I finally got PHPUnit working with Codeigniter thanks to https://bitbucket.org/kenjis/my-ciunit/overviewNow my question is, how do I use it?Every tutorial I see has some abstract use like assertEquals(2, 1+1) or:That is great if I had a function that would output such a predictable string. Usually my apps grab a bunch of data from the database then display it in some sort of table. So how do I test Codeigniter's controllers? I would like to do Test-Driven Development and I have read the tutorial on PHPUnits site, but once again the example seem so abstract. Most of my codeigniter functions are displaying data.Is there a book or a great tutorial with a practical application and examples of PHPUnit testing?

2011-12-06 03:54:55Z

I have read and read articles on PHPUnit, SimpleTest, and other Unit Testing frameworks. They all sound so great! I finally got PHPUnit working with Codeigniter thanks to https://bitbucket.org/kenjis/my-ciunit/overviewNow my question is, how do I use it?Every tutorial I see has some abstract use like assertEquals(2, 1+1) or:That is great if I had a function that would output such a predictable string. Usually my apps grab a bunch of data from the database then display it in some sort of table. So how do I test Codeigniter's controllers? I would like to do Test-Driven Development and I have read the tutorial on PHPUnits site, but once again the example seem so abstract. Most of my codeigniter functions are displaying data.Is there a book or a great tutorial with a practical application and examples of PHPUnit testing?It seems you understand the basic structure/syntax of how to write tests and unit testing CodeIgniter code shouldn't be any different from testing non-CI code, so I want to focus on your underlying concerns/issues ...I had similar questions not too long ago with PHPUnit. As someone without formal training I found that getting into the Unit Testing mindset seemed abstract and unnatural at first. I think the main reason for this -- in my case, and probably yours too from the question -- is that you haven't focused on REALLY working to separate the concerns in your code up till now.The testing assertions seem abstract because most of your methods/functions likely perform several different discrete tasks. A successful testing mentality requires a change in how you think about your code. You should stop defining success in terms of "does it work?" Instead you should ask, "does it work, will it play well with other code, is it designed in a way that makes it useful in other applications and can I verify that it works?" For example, below is a simplified example of how you've probably written code up to this point:Exactly what's going on here isn't important. I'm trying to illustrate why this code is difficult to test:As you can see, each of these class methods handles a particular function of the class that is easily testable. Did the remote file retrieval work? Did we find the the values we were trying to parse? Etc. All of a sudden those abstract assertions seem much more useful.IMHO, the more you delve into testing the more you realize it's more about good code design and sensible architecture than simply making sure things work as expected. And here is where the benefits of OOP really start to shine. You can test procedural code just fine, but for a large project with interdependent parts testing has a way of enforcing good design. I know that may be troll bait for some procedural people but oh well.The more you test, the more you'll find yourself writing code and asking yourself, "Will I be able to test this?" And if not, you'll probably change the structure then and there.However, code need not be elementary to be testable. Stubbing and mocking allows you to test external operations the success or failure of which is entirely out of control. You can create fixtures to test database operations and pretty much anything else.The more I test, the more I realize that if I'm having a tough time testing something it's most likely because I have an underlying design problem. If I straighten that out it usually results in all green bars in my test results.Finally, here are a couple of links that really helped me to start thinking in a test-friendly fashion. The first one is a tongue-in-cheek list of what NOT to do if you want to write testable code. In fact, if you browse that entire site you'll find lots of helpful stuff that will help set you on the path to 100% code coverage. Another helpful article is this discussion of dependency injection.Good luck!I have unsuccessfully tried to use PHPUnit with Codeigniter. For example if I wanted to test my CI Models, I ran into the problem of how I will get an instance of that model as it somehow needs the whole CI framework to load it. Consider how you load a model for instance: The problem is that if you look at the super class for a load method you won't find it. It's not as straightforward if you're testing Plain Old PHP Objects where you can mock your dependencies easily and test functionality. Hence, I have settled for CI's Unit testing class. If you're testing your controllers you're essentially testing the business logic (if you have) in there as well as the sql query that "grabs a bunch of data" from the database. This is already integration testing. Best way to is to test the CI model first to test the grabbing of data --- this will be useful if you a have a very complicated query -- and then the controller next to test the business logic that is applied to the data grabbed by the CI Model. It is a good practice to test only one thing at a time. So what will you test? The query or the business logic?I am assuming that you want to test the grabbing of data first, the general steps areYour test method might look like this: Just in case you want to use CI's unit testing class, here is a modified code snippet of one test I wrote using it: 

Install php-mcrypt on CentOS 6

Scott Dawson

[Install php-mcrypt on CentOS 6](https://stackoverflow.com/questions/17109818/install-php-mcrypt-on-centos-6)

I have been trying to install php-mcrypt for a while now. Everytime I get the "No package php-mcrypt available." returned to me. Here's what I've tried:I have made sure to install the EPEL repository. At this point I'm just stumped. I've followed EVERY tutorial I've found online and get the same error.Notes: Go Daddy VPS, CentOS 6.4 64-bit, mcrypt installed without a hitch, but no php-mcrypt.

2013-06-14 13:37:21Z

I have been trying to install php-mcrypt for a while now. Everytime I get the "No package php-mcrypt available." returned to me. Here's what I've tried:I have made sure to install the EPEL repository. At this point I'm just stumped. I've followed EVERY tutorial I've found online and get the same error.Notes: Go Daddy VPS, CentOS 6.4 64-bit, mcrypt installed without a hitch, but no php-mcrypt.I had the same issue, and found the previous suggestions gave me enough info to get it working on my server. The following is what I did:1) Install EPEL repository (From: http://www.rackspace.com/knowledge_center/article/installing-rhel-epel-repo-on-centos-5x-or-6x):2) Install it via:The yum update updated the repository reference on my server then the 2nd command got what I needed :)3) Restart your webserver. For my apache install I did:For me the answer was:1) Get the Repos from 2) Install it via:3) Edit the mcrypt.iniadd thisFinally

4) Restart your webserver:I run this steps in CentOS 6.3 (64) on Azure From Microsoft Linux imageHope it helps you.Best Regards.Updated Answer for centos 7For CentOS 6InstallEdit: See comments for updated repositories.worked for me instead ofI was able to figure this out; it was a lot simpler then I thought. Under the WHM manager go to: Home >> Software >> EasyApache (Apache Update) >> There you have two options "Build Profile" or "Customize Based On Profile". I went Customize to keep my current config then followed the instructions on the page.Eventually there was a place to add and remove php modules. There you will  find ever module under the sun. Just select the one you want and rebuild the profile. It was really that simple.I got too much problem in installing php-mcrypt using epel-release-6-8.noarch.rpm. It has some dependency problem.Then I tried in different way.Get the php-mcrypt using "wget ftp://ftp.univie.ac.at/systems/linux/fedora/epel/6/x86_64/php-mcrypt-5.3.3-3.el6.x86_64.rpm" command.Then install libmcryptftp://ftp.pbone.net/mirror/download.fedora.redhat.com/pub/fedora/epel/6/x86_64/libmcrypt-2.5.8-9.el6.x86_64.rpmThe installed php-mcrypt using following commandIf php_mcrypt installed on 64bit but reported missing by an installer, check the extension path:vi /etc/php.d/mcrypt.iniTo install mcrypt from http://namhuy.net/641/centos-6-install-mcrypt-for-phpmyadmin.htmli386x86_64then just use yum command to install the mcrypt packageThe best way is to:or go to: http://dl.fedoraproject.org/pub/epel/6/x86_64/ to match your version 

check from your info.php that is ok -- done!There are two ways you can address this:For me I had to add the EPEL repository. It is where my php-mcrypt came from:You can enable the EPEL repo with the instructions here:http://fedoraproject.org/wiki/EPELinstalling php-mcrypt from Repoforge worked for me perfectly. Just add Repoforge from http://repoforge.org/ and simply run yum install php-mcrypt.For me, this worked :

yum install php-mcrypt*

and then, restart httpd service

service httpd restartI tryed @VenomFangs solution but the first step was not needed for me. I already had a newer EPEL version installed. So, the first step following was not usefull, I backed to the snapshot I did before doing modifications and I just used the install and restart above commands.wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm

wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm

sudo rpm -Uvh remi-release-6*.rpm epel-release-6*.rpmCentOS Linux release 7.2.1511 (Core)PS : I know this is not the subject, but if somebody needs it, the keyword can help. I needed to do this because of this error on prestashop. Two keywords I would be glad to use to find this informations are : "php_mycrypt.dll" "php_mcrypt.dll"

Fatal error: Call to undefined function mcrypt_encrypt() in /classes/Rijndael.php on line 46EDIT 10/06/2016 :

Another Prestashop solution to try in "Advanced Parameters", "Performance", "Ciphering" (FR : Chiffrement), "Use the custom BlowFish class." instead of "Use Rijndael with mcrypt lib. (you must install the Mcrypt extension)."First find out your PHP version. In my case 5.6.  php --versionPHP 5.6.27 (cli) (built: Oct 15 2016 21:31:59) 

Copyright (c) 1997-2016 The PHP Group

Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend TechnologiesThen: sudo yum search mcryptAnd choose the best one for your version from the list, I used php56w-mcrypt. Finally:sudo service httpd restartI was having same issue in centos 6.5Finaly solution below worked for me-go to http://dl.fedoraproject.org/pub/epel/6/x86_64/

-search for php-mcrypt(http://dl.fedoraproject.org/pub/epel/6/x86_64/php-mcrypt-5.3.3-3.el6.x86_64.rpm)

-execute wget http://dl.fedoraproject.org/pub/epel/6/x86_64/php-mcrypt-5.3.3-3.el6.x86_64.rpm

-rpm -ivh php-mcrypt-5.3.3-3.el6.x86_64.rpmif there are any dependencies you can download same using http://dl.fedoraproject.org/pub/epel/6/x86_64/For php 7 to install mcrypt run:Centos:

sudo yum install php7.0-mcrypt to installOn Ubuntu:

sudo apt-get install php7.0-mcryptIf you want to recompile PHP with mcrypt enable.1.

Insatll mcrypt. libmcrypt-devel is from Third Party Repositories EPEL, so you should:2.

Append --with-mcrypt to your ./configure arguments:3.

Build and install:

Function to check if a string is a date

Justin

[Function to check if a string is a date](https://stackoverflow.com/questions/11029769/function-to-check-if-a-string-is-a-date)

I am trying to write a function to determine if a string is a date/time using PHP. Basically a valid date/time would look like:Obviously though its completely dynamic any of the values can change, but it should always be in form of XXXX-XX-XX XX:XX:XX, how can I write a regular expression to check for this pattern and return true if matched.

2012-06-14 08:55:22Z

I am trying to write a function to determine if a string is a date/time using PHP. Basically a valid date/time would look like:Obviously though its completely dynamic any of the values can change, but it should always be in form of XXXX-XX-XX XX:XX:XX, how can I write a regular expression to check for this pattern and return true if matched.If that's your whole string, then just try parsing it:Here's a different approach without using a regex:In case you don't know the date format:A smaller version, it might help:I use this function as a parameter to the PHP filter_var function. Although this has an accepted answer, it is not going to effectively work in all cases. For example, I test date validation on a form field I have using the date "10/38/2013", and I got a valid DateObject returned, but the date was what PHP call "overflowed", so that "10/38/2013" becomes "11/07/2013". Makes sense, but should we just accept the reformed date, or force users to input the correct date? For those of us who are form validation nazis, We can use this dirty fix: https://stackoverflow.com/a/10120725/486863 and just return false when the object throws this warning.The other workaround would be to match the string date to the formatted one, and compare the two for equal value. This seems just as messy. Oh well. Such is the nature of PHP dev.In my project this seems to work:I wouldn't use a Regex for this, but rather just split the string and check that the date is valid:strtotime? Lists? Regular expressions?What's wrong with PHP's native DateTime object?http://www.php.net/manual/en/datetime.construct.phpIf your heart is set on using regEx then txt2re.com is always a good resource:If you have PHP 5.2 Joey's answer won't work. You need to extend PHP's DateTime class:and than you can use this class without problems:function was copied from this answer or php.netif (strtotime($date)>strtotime(0)) {

 echo 'it is a date'

}

Accessing session from TWIG template

haynar

[Accessing session from TWIG template](https://stackoverflow.com/questions/8399389/accessing-session-from-twig-template)

I've searched a lot on the net how to access the global $_SESSION array from TWIG template and found this: {{app.session.get('index')}}, but when I'm calling it, it returns an empty string. I have a $_SESSION['filter']['accounts'] and I'm getting this error when calling {{app.session.get('filter').accounts}}: Item "accounts" for "" does not exist. What I'm doing wrong?

2011-12-06 11:46:34Z

I've searched a lot on the net how to access the global $_SESSION array from TWIG template and found this: {{app.session.get('index')}}, but when I'm calling it, it returns an empty string. I have a $_SESSION['filter']['accounts'] and I'm getting this error when calling {{app.session.get('filter').accounts}}: Item "accounts" for "" does not exist. What I'm doing wrong?{{app.session}} refers to the Session object and not the $_SESSION array. I don't think the $_SESSION array is accessible unless you explicitly pass it to every Twig template or if you do an extension that makes it available.Symfony2 is object-oriented, so you should use the Session object to set session attributes and not rely on the array. The Session object will abstract this stuff away from you so it is easier to, say, store the session in a database because storing the session variable is hidden from you.So, set your attribute in the session and retrieve the value in your twig template by using the Session object.Hope this helps.Regards,

MattSetup twigThen within your template access session values for exampleA simple trick is to define the $_SESSION array as a global variable. For that, edit the core.php file in the extension folder by adding this function :Then, you'll be able to acces any session variable as :if you want to access toThe way to access a session variable in Twig is:I found that the cleanest way to do this is to create a custom TwigExtension and override its getGlobals() method. Rather than using $_SESSION, it's also better to use Symfony's Session class since it handles automatically starting/stopping the session.I've got the following extension in /src/AppBundle/Twig/AppExtension.php:Then add this in /app/config/services.yml:Then the session can be accessed from any view using:Why don't you use {{ app.object name.field name}} to access the variable?

Abstract Class vs. Interface [duplicate]

nathanjosiah

[Abstract Class vs. Interface [duplicate]](https://stackoverflow.com/questions/15960729/abstract-class-vs-interface)

I have searched around SO as well as the rest of the web for a good answer but I have't found one that I really understand. I am going to present this in a different way and hopefully the answers will help others as well. As far as I understand, the two concepts have the same rules except an abstract class is more flexible due to the method implementation ability. Also, I am aware you can implement multiple interfaces and only extend a single class but I'm sure there are more differences than the two I mentioned.Please look at the two snippets of code and give me an example what I can do with each of my examples that would make me want or not want to use the other. 

2013-04-11 23:40:22Z

I have searched around SO as well as the rest of the web for a good answer but I have't found one that I really understand. I am going to present this in a different way and hopefully the answers will help others as well. As far as I understand, the two concepts have the same rules except an abstract class is more flexible due to the method implementation ability. Also, I am aware you can implement multiple interfaces and only extend a single class but I'm sure there are more differences than the two I mentioned.Please look at the two snippets of code and give me an example what I can do with each of my examples that would make me want or not want to use the other. To resume the idea (globally, not in detail):is the notion to extend from something, and optionally add some new feature or override some existing feature (to do differently). But using inheritance, you share a big part of code with the parent. You are a parent + some other things.is representing some abilities (we says a class is implementing an interface to says that it has these abilities). An interface can be implemented by 2 classes which are completely different and do not share their code (except for methods they implements). When A and B are implementing interface C, A is not a B and B is not a A.And one of the reason for interface is indeed to allow programmer to do the same as they could do with multi-inheritance, but without multi-inheritance problems.This notion is used in some programming languages like JAVA, PHP...Abstract    Abstract Classes focus on a kind of things similarity.People are considered of type mammal and as such would not be considered of type vehicle.InterfaceInterfaces focus on collation of similar function.For example: You are a human being and are of type mammal.  If you want to fly then you will need to implement a flying Interface.  If you want to shoot while flying, then you also need to implement the gun Interface.See the examples below:Briefly speaking, interface is to standardize a set of functions，while abstract class is to define a basic skeleton for classes to derive from.I have thought about this before, and the best I could conclude was that interfaces are a logically convenient abstraction of a pure abstract class (c++).As for why you would choose interfaces over abstract classes, I quote (a c++ source but the concepts are the same):The thing is, when using interfaces, the first thing that comes to mind is decoupling. When using an interface, the user and the implementing-class are totally decoupled. The same applies for when you're using a pure abstract class which is basically an interface. 

How to list all months between two dates

Pooya

[How to list all months between two dates](https://stackoverflow.com/questions/18742998/how-to-list-all-months-between-two-dates)

I'm trying to list all months between two dates.For example; start date is: 2010-12-02 and last date is: 2012-05-06I want to list something like this:This is what I have tried and it is not working at all:

2013-09-11 13:45:24Z

I'm trying to list all months between two dates.For example; start date is: 2010-12-02 and last date is: 2012-05-06I want to list something like this:This is what I have tried and it is not working at all:PHP 5.3See it in actionPHP 5.4 or newerThe part where we modify the start and end dates to the first of the month is important. If we didn't, and the current day higher then the last day in February (i.e. 28 in non-leap years, 29 in leap years) this would skip February.You must make a difference between two months of the same year and two months of different years.That's for the hard way. Now there is a quick and easy way that is already given as an answer which I recommend you to choose.This was my solution since DateTime is not available in my server environment.Try it out: http://3v4l.org/BZOmb

How do I capture PHP output into a variable?

Binarytales

[How do I capture PHP output into a variable?](https://stackoverflow.com/questions/171318/how-do-i-capture-php-output-into-a-variable)

I'm generating a ton of XML that is to be passed to an API as a post variable when a user click on a form button. I also want to be able to show the user the XML before hand.The code is sorta like the following in structure:My XML is being generated with a few while loops and stuff. It then needs to be shown in the two places (the preview and the form value). My question is. How do I capture the generated XML in a variable or whatever so I only have to generate it once and then just print it out as apposed to generating it inside the preview and then again inside the form value?

2008-10-05 01:27:17Z

I'm generating a ton of XML that is to be passed to an API as a post variable when a user click on a form button. I also want to be able to show the user the XML before hand.The code is sorta like the following in structure:My XML is being generated with a few while loops and stuff. It then needs to be shown in the two places (the preview and the form value). My question is. How do I capture the generated XML in a variable or whatever so I only have to generate it once and then just print it out as apposed to generating it inside the preview and then again inside the form value?Put this at your start:And to get the buffer back:See http://us2.php.net/manual/en/ref.outcontrol.php and the individual functions for more information.It sounds like you want PHP Output BufferingNote that output buffering stops the output from being sent, until you "flush" it. See the Documentation for more info.You could try this:

How to check if an array element exists?

openfrog

[How to check if an array element exists?](https://stackoverflow.com/questions/1966169/how-to-check-if-an-array-element-exists)

Example: I'm checking for the existence of an array element like this:However, I keep getting this error:Of course, the first time I want an instance, $instances will not know the key. I guess my check for available instance is wrong?

2009-12-27 15:12:46Z

Example: I'm checking for the existence of an array element like this:However, I keep getting this error:Of course, the first time I want an instance, $instances will not know the key. I guess my check for available instance is wrong?You can use either the language construct isset, or the function array_key_exists.isset should be a bit faster (as it's not a function), but will return false if the element exists and has the value NULL.

For example, considering this array :And those three tests, relying on isset :The first one will get you (the element exists, and is not null) :While the second one will get you (the element exists, but is null) :And the last one will get you (the element doesn't exist) :

On the other hand, using array_key_exists like this :You'd get those outputs :Because, in the two first cases, the element exists -- even if it's null in the second case. And, of course, in the third case, it doesn't exist.

For situations such as yours, I generally use isset, considering I'm never in the second case... But choosing which one to use is now up to you ;-)For instance, your code could become something like this :array_key_exists() is SLOW compared to isset(). A combination of these two (see below code) would help. It takes the performance advantage of isset() while maintaining the correct checking result (i.e. return TRUE even when the array element is NULL)The benchmarking comparison: (extracted from below blog posts).See 

http://thinkofdev.com/php-fast-way-to-determine-a-key-elements-existance-in-an-array/

and 

http://thinkofdev.com/php-isset-and-multi-dimentional-array/for detailed discussion.You can use the function array_key_exists to do that.For example,PS : Example taken from here.You can use isset() for this very thing.According to the php manual you can do this in two ways. It depends what you need to check.If you want to check if the given key or index exists in the array use array_key_existsIf you want to check if a value exists in an array use in_arrayYou want to use the array_key_exists function.A little anecdote to illustrate the use of array_key_exists.You can also use array_keys for number of occurrences

Generating a single Entity from existing database using symfony2 and doctrine

Sethunath

[Generating a single Entity from existing database using symfony2 and doctrine](https://stackoverflow.com/questions/10371600/generating-a-single-entity-from-existing-database-using-symfony2-and-doctrine)

Is it possible to generate a single entity from database using the Symfony2 console tool?In the middle of coding I had to add a table and there are modifications made to the existing entity classes. So I don't want all my entities regenerated. Any suggestions will be appreciated!

2012-04-29 11:04:13Z

Is it possible to generate a single entity from database using the Symfony2 console tool?In the middle of coding I had to add a table and there are modifications made to the existing entity classes. So I don't want all my entities regenerated. Any suggestions will be appreciated!I had the same problem, you've to do this way:ThenWhere metadata_format is the file ending you want to generate (e.g. xml, yml, annotation)And finallyLike this doctrine will load only the entity you need. Just be carefull on the filter you must use the CamelCase !Hope this will help youFor the third command, doctrine kept regenerating all of the Entity files. By adding the entity name after the bundle, it only generated the entity I was interested in.Simple Working Solution for Symfony 2.7 option annotation and for [/xml/yml] see http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.htmldo 3 commands in 3 steps:(NOTE: if your database name is my_meeting You will need to change it to MyMeeting in filter="MyMeeting" for doctrine to find your table name. This is because doctrine will always strip underscores and add Camel-case to your table name. If not, you will get this error: "Database does not have any mapping information".)(NOTE: making sure you have namespace AppBundle\Entity; as below in your Meeting.php class file like this:If not add it in.)where:TO BE SURE, check this directory:AND MAKING SURE you only have .xml files for the table you want to create entity class files and no others. Then run this below command to generate get and set methods for your entity class that you created previouslyNOTE2:

As the last step you must delete the xml doctrine orm db file in for example src\AppBundle/Resources/config/doctrine/VisitorData.orm.xmlIt works very well for me.For explanation please read: http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html@fyrye's comment that is currently hidden deserves the credit, wanted to add this so it's not missed by others. This is the approach:source: https://coderwall.com/p/jofhdw/doctrine-tell-which-tables-to-work-withI was having issues when running the following command because of large number of badly defined legacy tablesIt turns out that the --filter flag only filters AFTER it has read meta data from all of your tables which, if they don't have primary keys or have some other issue, will cause the command to failNone of the answers were quite right for me using Symfony 3.  I ended up doing:I would have left this as a comment to the accepted answer but I'm a newbie. For those like me who had trouble with the --filter switch mapping multiple tables with coincident strings in names, one can use a pattern.Example table names:Vendor

VendorContactThat command will convert both tables rather than just Vendor. If you want just Vendor and not VendorContact, use a pattern in --filter:Hope that helps someone!Works great with Symfony 3 too. If you are getting "No Metadata Classes to process." message try convert your tablename to Doctrine camel casing in the filter parameter."my_table_name" needs to be write as "MyTableName".I had exactly the same issue with Symfony 2.4 and MySQL. None of the workarounds posted above worked for me. I ended up creating a new database with the tables I want to extract (this can be easy to do because MySQL provides the creation script). Then changed the connection to that new database and executed the entity extraction command from there. Seems to be a bit radical, but I will not create the entities by hand. Hope that helpsfor Symfony 3To generate the entities for a new "Group" tableas written in the symfony 3 documentation Didn't work any of these for my symfony 3.3. So I just created a copy of directory and re-generated all of the entities in copy directory. Then I copied required entities in my original directory.--filter does not work due to this issue https://github.com/symfony/symfony/issues/7717

Adding subscribers to a list using Mailchimp's API v3

VenomRush

[Adding subscribers to a list using Mailchimp's API v3](https://stackoverflow.com/questions/30481979/adding-subscribers-to-a-list-using-mailchimps-api-v3)

I'm trying to add users to a list I've created in Mailchimp but I can't find any code examples anywhere. I've tried figuring out how to use the API but I'm very much a "Look at an example and learn" kind of person.I've tried using version 2 of the API but nothing seems to be working despite working from examples on the net and Mailchimp says the following about earlier versions of their API on their website:UPDATE 1: I did some further research based on TooMuchPete's answer with regards to the link on Managing Subscribers and altered some code I found here, but it won't work because the function http_build_query() doesn't deal with nested arrays. I'm not sure how to deal with the 'merge_fields' portion of adding a subscriber. My current code is below:UPDATE 2: I've now resorted to using curl and I've managed to get something almost working. The data sends through to Mailchimp but I'm receiving the error "Your request did not include an API key." I'm guessing I need to authenticate as mentioned here. I've tried adding it to the http header which hasn't worked. See my code below:

2015-05-27 12:08:35Z

I'm trying to add users to a list I've created in Mailchimp but I can't find any code examples anywhere. I've tried figuring out how to use the API but I'm very much a "Look at an example and learn" kind of person.I've tried using version 2 of the API but nothing seems to be working despite working from examples on the net and Mailchimp says the following about earlier versions of their API on their website:UPDATE 1: I did some further research based on TooMuchPete's answer with regards to the link on Managing Subscribers and altered some code I found here, but it won't work because the function http_build_query() doesn't deal with nested arrays. I'm not sure how to deal with the 'merge_fields' portion of adding a subscriber. My current code is below:UPDATE 2: I've now resorted to using curl and I've managed to get something almost working. The data sends through to Mailchimp but I'm receiving the error "Your request did not include an API key." I'm guessing I need to authenticate as mentioned here. I've tried adding it to the http header which hasn't worked. See my code below:Based on the List Members Instance docs, the easiest way is to use a PUT request which according to the docs either "adds a new list member or updates the member if the email already exists on the list".Furthermore apikey is definitely not part of the json schema and there's no point in including it in your json request.Also, as noted in @TooMuchPete's comment, you can use CURLOPT_USERPWD for basic http auth as illustrated in below.I'm using the following function to add and update list members.  You may need to include a slightly different set of merge_fields depending on your list parameters.I got it working. I was adding the authentication to the header incorrectly:These are good answers but detached from a full answer as to how you would get a form to send data and handle that response. This will demonstrate how to add a member to a list with v3.0 of the API from an HTML page via jquery .ajax(). In Mailchimp:HTML:Key things:PHP:Key things:JS:Key things:BATCH LOAD - OK, so after having my previous reply deleted for just using links I have updated with the code I managed to get working. Appreciate anyone to simplify / correct / refine / put in function etc as I'm still learning this stuff, but I got batch member list add working :)If you Want to run Batch Subscribe on a List using Mailchimp API . Then you can use the below function.Function Use And Data format for Batch Operations:Also, You can found this code in my Github gist. GithubGist LinkReference Documentation: OfficialIf it helps anyone, here is what I got working in Python using the Python Requests library instead of CURL.As explained by @staypuftman above, you will need your API Key and List ID from MailChimp and make sure your API Key suffix and URL prefix (i.e. us5) match.Python:

Force file download with php using header()

Kerp

[Force file download with php using header()](https://stackoverflow.com/questions/8485886/force-file-download-with-php-using-header)

I want the user to be able to download some files I have on my server, but when I try to use any of the many examples of this around the internet nothing seems to work for me. I've tried code like this: I've even tried to use the most basic example I could find, like this: When I've tested this I have removed all the other code I have and used an empty file with just this code to remove any faults created by external sources.When I look in the console the file gets sent with the right headers i.eBut the save dialog isn't displayed.I've also tried with inline instead of attachment in the content disposition header but that didn't make a difference either, I've tested this in Firefox 8.0.1 Chrome 15.0.874.121 and Safari 5.1.1.

2011-12-13 07:53:28Z

I want the user to be able to download some files I have on my server, but when I try to use any of the many examples of this around the internet nothing seems to work for me. I've tried code like this: I've even tried to use the most basic example I could find, like this: When I've tested this I have removed all the other code I have and used an empty file with just this code to remove any faults created by external sources.When I look in the console the file gets sent with the right headers i.eBut the save dialog isn't displayed.I've also tried with inline instead of attachment in the content disposition header but that didn't make a difference either, I've tested this in Firefox 8.0.1 Chrome 15.0.874.121 and Safari 5.1.1.I’m pretty sure you don’t add the mime type as a JPEG on file downloads:These headers have never failed me:This worked for me like a charm for downloading PNG and PDF.The problem was that I used ajax to post the message to the server, when I used a direct link to download the file everything worked fine. I used this other Stackoverflow Q&A material instead, it worked great for me:its work for meBased on Farhan Sahibole's answer:This is all I needed for this to work. I stripped off anything that isn't required for this to work.Key is to use ob_clean();

Disable PHPStorm new file branding

JohnBob

[Disable PHPStorm new file branding](https://stackoverflow.com/questions/28787975/disable-phpstorm-new-file-branding)

When I create a new file using PhpStorm it creates it's own comment at the top, this would be fine however when using codeigniter comments using /* */ do not work, anyway to disable this? if not i'm going to have to get a new editor.Here is what I mean

2015-02-28 23:01:59Z

When I create a new file using PhpStorm it creates it's own comment at the top, this would be fine however when using codeigniter comments using /* */ do not work, anyway to disable this? if not i'm going to have to get a new editor.Here is what I meanWindows: Go to File -> Settings -> Editor -> File and Code Templates -> Includes (TAB) -> PHP File Header Mac: Go to PhpStorm -> Preferences -> Editor -> File and Code Templates -> Includes (TAB) -> PHP File Header And then you can edit it or remove it, or whatever you wanna do :)settings > editor > file and code templates > includes(tab) > php file headerI recommend to erase content instead of deleting this elementInstead of erasing the content you can just comment it out by surrounding it with {#...#} because it uses Apache Velocity template language.

How to catch the fatal error: Maximum execution time of 30 seconds exceeded in PHP

ingh.am

[How to catch the fatal error: Maximum execution time of 30 seconds exceeded in PHP](https://stackoverflow.com/questions/6861033/how-to-catch-the-fatal-error-maximum-execution-time-of-30-seconds-exceeded-in-p)

I've been playing around with a system I'm developing and managed to get it to cause this:It happened when I was doing something unrealistic, but nevertheless it could happen with a user.Does anyone know if there is a way to catch this exception? I've read around but everyone seems to suggest upping the time allowed.

2011-07-28 14:53:51Z

I've been playing around with a system I'm developing and managed to get it to cause this:It happened when I was doing something unrealistic, but nevertheless it could happen with a user.Does anyone know if there is a way to catch this exception? I've read around but everyone seems to suggest upping the time allowed.Your only options are to increase the allowed execution time (setting it to 0 makes it infinite, but that is not recommended) of the script or spawn a new thread and hope for the best.The reason that this isn't catchable is that it isn't really thrown. No one line of the code actually triggered the error, rather PHP said, "Nope, sorry, this is too long. Time to shut down now." And that makes sense. Imagine having a script with a max execution time of 30 seconds catching that error and taking another 30 seconds... in a poorly designed program, that opens up some rather nasty opportunities to exploit. At a minimum, it will create opportunities for DOS attacks.How about trying as PHP documentation (well... at least one of its readers) say:Have a look at the following links:This isn't an exception, it's an error.  There are important differences between exceptions and errors, first and foremost errors can't be caught with try/catch semantics.  PHP scripts are built around a paradigm of short execution times, so PHP is configured by default to assume that if a script has been running for longer than 30 seconds it must be caught in an infinite loop and therefore should be terminated. This is to prevent an errant PHP script causing a denial of service, either by accident or by malicious intent.  However, scripts do sometimes need more running time than they are allocated by default.  You can try changing the maximum execution time, either by using set_time_limit() or by altering the value of max_execution_time in the php.ini file to raise the limit.  you can also remove the limit entirely by setting the execution time to 0, though this isn't recommended.  set_time_limit() may be disabled by mechanisms such as disable_functions so it might not be available to you, likewise you might not have access to php.ini. If both of these are the case then you should contact your host for help.  One exception is PHP scripts run from the command line. Under these running conditions, PHP scripts may be interactive and need to spend a long time processing data or waiting for input.  For this reason there isn't a max_execution_time limit on scripts run from the command line by default.  EDIT TO ADD: PHP 7's error handling had a major overhaul.  I believe that errors and exceptions are now both subclasses of Throwable.  This may make the above no longer relevant for PHP7+, though I'll have to look more closely into the specifics of how error handling works now to be sure.  There is nothing you can do about it. but you can have graceful shutdown using register_shutdown_functionYeah I tested the solution by TheJanOnline. sleep() does not count into php execution time so here is WORKING version with indefinite loop:There is a little tricky way to handle "Fatal error: Maximum execution time of 30 seconds exceeded" as exception in certain cases:In your code you must to measure execution time and throw exception earlier than the timeout fatal error may be triggered. $k = 0.8 is a 80% of allowed execution time, so you have 20% of time to handle exception.I came up with this based on the answer @pinkal-vansia gave. So I'm not claiming an original answer, but an answer with a practical application. I needed a way for the page to refresh itself in the event of a timeout. Since I have been observing enough timeouts of my cURL script to know the code is working, but that sometimes for whatever reason it fails to connect to the remote server, or read the served html fully, and that upon refresh the problem goes away, I am ok with script refreshing itself to "cure" a Maximum execution timeout error.FYI, 300 seconds is not too long for the scraping script I'm running, which takes just a little less than that to extract the data from the kinds of pages I'm scraping. Sometimes it goes over by just a few seconds only due to connection irregularities. Knowing that it's connection times that sometimes fail, rather than script processing, it's better to not increase the timeout, but rather just automatically refresh the page and try again.put this in the begining of php fileEDIT 1but first check if there are no code like this:EDIT 2to catch this error look set_error_handler

Can you assign multiple variables at once in PHP like you can with Java?

transformerTroy

[Can you assign multiple variables at once in PHP like you can with Java?](https://stackoverflow.com/questions/8681030/can-you-assign-multiple-variables-at-once-in-php-like-you-can-with-java)

I want to create 5 variables of type array all at once. Is this possible? In Java I know you can, but can't find anything about PHP. I'd like to do something like this:

2011-12-30 15:28:54Z

I want to create 5 variables of type array all at once. Is this possible? In Java I know you can, but can't find anything about PHP. I'd like to do something like this:Yes, you can.is equivalent totherefore:Since PHP 7.1 you can use square bracket syntax:[1] https://wiki.php.net/rfc/short_list_syntax

[2] https://secure.php.net/manual/de/migration71.new-features.php#migration71.new-features.symmetric-array-destructuringI prefer to use the list function for this task. This is not really a function but a language construct, used to assign a list of variables in one operation.list( $var1, $var2, $var3 ) = array('coffee', 'brown', 'caffeine');For more information see the documentation.

What use is lambda in PHP?

user151841

[What use is lambda in PHP?](https://stackoverflow.com/questions/1909002/what-use-is-lambda-in-php)

The lambda anonymous function is part of PHP 5.3. What use does it have? Is there anything that one can only do with lambda? Is lambda better for certain tasks? I've seen the Fibonacci example, and I really don't need to write Fibonacci sequences, so I'm still not sure if it's that useful for the kinds of tasks I encounter in writing webbish applications. So what does one do with it in "real life"?

2009-12-15 17:21:10Z

The lambda anonymous function is part of PHP 5.3. What use does it have? Is there anything that one can only do with lambda? Is lambda better for certain tasks? I've seen the Fibonacci example, and I really don't need to write Fibonacci sequences, so I'm still not sure if it's that useful for the kinds of tasks I encounter in writing webbish applications. So what does one do with it in "real life"?Anything that requires a temporary function that you probably will only use once.I would use them for callbacks, for functions such as:E.g.Before 5.3, you'd have to..Or create_function ...Anonymous functions (closures) can be created as local functions (thus not pollluting the global space, as Dathan suggested).With the "use" keyword, variables that are passed to or created by the enclosing function can be used inside the closure. This is very useful in callback functions that are limited in their parameter list. The "use" variables can be defined outside the closure, eliminating the need to redefine them each time the closure is called.(Of course, this example can be simpler without a closure, but it's just for demo.)There are some use cases that are made more convenient by lambdas.  For instance, if a method uses a callback, using a lambda for that callback means you don't have to define a "real" function somewhere to handle it.  So, lambdas keep your code cleaner.As with the above, lambdas can be used as "short-lived" functions.  For instance, sorting algorithms typically only need to know if variable a is less than variable b for any combination of a and b.  To make a generic sorting algorithm that's capable of handling any class of objects, you might make your sort function definition such that it accepts a function to use as a comparator.  Providing a lambda as the comparator function means that you can define your sort behavior on a per-call basis, rather than having to define a "real" function that will live for the lifetime of your script just to handle this one sorting case.Despite all of the uses one can think for lambda functions, in PHP it also allows something very special called closure. That is the ability to make variables in the current scope available to the function long after the current scope stops existing.Just to mention some useful patterns that closure allow you, one can implement Memoization (Caching) and Curry.Also very useful are the throw-away or callback functions that @Matt highlighted in his answer.For more on closures, check this question: How do JavaScript closures work?The implementation of the cryptic Y combinator?Cited Source: http://fabien.potencier.org/article/17/on-php-5-3-lambda-functions-and-closures

PHP get the last 3 elements of an array

alex

[PHP get the last 3 elements of an array](https://stackoverflow.com/questions/5468912/php-get-the-last-3-elements-of-an-array)

I have an array: How can I get the last 3 elements while preserving the keys? (the number of elements in the array may vary, so I cannot simply slice after the 2nd element)So the output would be:

2011-03-29 06:52:32Z

I have an array: How can I get the last 3 elements while preserving the keys? (the number of elements in the array may vary, so I cannot simply slice after the 2nd element)So the output would be:If you want to preserve key, you can pass in true as the fourth argument:Use array_slice:You can use array_slice with offset as -3 so you don't have to worry about the array length also by setting preserve_keys parameter to TRUE. You can use array_slice():   

PHP Using RegEx to get substring of a string

MonkeyBlue

[PHP Using RegEx to get substring of a string](https://stackoverflow.com/questions/5941832/php-using-regex-to-get-substring-of-a-string)

I'm looking for an way to parse a substring using PHP, and have come across preg_match however I can't seem to work out the rule that I need. I am parsing a web page and need to grab a numeric value from the string, the string is like thisI need to be able to obtain this part of the string:736375493Thanks Aaron

2011-05-09 19:57:43Z

I'm looking for an way to parse a substring using PHP, and have come across preg_match however I can't seem to work out the rule that I need. I am parsing a web page and need to grab a numeric value from the string, the string is like thisI need to be able to obtain this part of the string:736375493Thanks AaronThis is safe for if the format changes. slandau's answer won't work if you ever have any other numbers in the URL.php.net/preg-matchUnfortunately, you have a malformed url query string, so a regex technique is most appropriate.  See what I mean.There is no need for capture groups.  Just match id= then forget those characters with \K, then isolate the following one or more digital characters.Code (Demo)Output:

htmlentities in PHP but preserving html tags

fidoboy

[htmlentities in PHP but preserving html tags](https://stackoverflow.com/questions/1364933/htmlentities-in-php-but-preserving-html-tags)

I want to convert all texts in a string into html entities but preserving the HTML tags, for example this:should be translated into this:any ideas?

2009-09-01 22:19:33Z

I want to convert all texts in a string into html entities but preserving the HTML tags, for example this:should be translated into this:any ideas?You can get the list of correspondances character => entity used by htmlentities, with the function get_html_translation_table ; consider this code :(You might want to check the second parameter to that function in the manual -- maybe you'll need to set it to a value different than the default one)It will get you something like this :Now, remove the correspondances you don't want :Your list, now, has all the correspondances character => entity used by htmlentites, except the few characters you don't want to encode.And now, you just have to extract the list of keys and values :And, finally, you can use str_replace to do the replacement :And you get :Which looks like what you wanted ;-)Edit : well, except for the encoding problem (damn UTF-8, I suppose -- I'm trying to find a solution for that, and will edit again)Second edit couple of minutes after : it seem you'll have to use utf8_encode on the $search list, before calling str_replace :-(Which means using something like this :Between the call to array_keys and the call to str_replace.And, this time, you should really get what you wanted :

And here is the full portion of code :And the full output :This time, it should be ok ^^

It doesn't really fit in one line, is might not be the most optimized solution ; but it should work fine, and has the advantage of allowing you to add/remove any correspondance character => entity you need or not.Have fun !Might not be terribly efficient, but it worksThis is optimized version of the accepted answer.No solution short of a parser is going to be correct for all cases. Yours is a good case:but do you also want to support:where you want it to come out as:Question: Can you do the encoding BEFORE you build the HTML. In other words can do something like:You'll save yourself lots of grief if you can do that.  If you can't, you'll need some way to skip encoding <, >, and " (as described above), or simply encode it all, and then undo it (eg. replace('&lt;', '<'))This is a function I've just written which solves this problem in a very elegant way: First of all, the HTML tags will be extracted from the string, then htmlentities() is executed on every remaining substring and after that the original HTML tags will be inserted at their old position thus resulting in no alternation of the HTML tags. :-)Have fun:Based on the answer of bflesch, I did some changes to manage string containing less than sign, greater than sign and single quote or double quotes.

Example of use:Output is:

You can pass any ent flag according to the htmlentities manualone-line solution with NO translation table or custom function required:i know this is an old question, but i recently had to import a static site into a wordpress site and had to overcome this issue:here is my solution that does not require fiddling with translation tables:htmlspecialchars_decode( htmlentities( html_entity_decode( $string ) ) );when applied to the OP's string:output:when applied to Luca's string:output:

PHP Session data not being saved

